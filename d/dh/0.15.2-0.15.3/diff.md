# Comparing `tmp/dh-0.15.2-py3-none-any.whl.zip` & `tmp/dh-0.15.3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,10 +1,9 @@
-Zip file size: 1647553 bytes, number of entries: 362
--rw-r--r--  2.0 unx      864 b- defN 23-Feb-27 18:34 dh/VERSION.txt
--rw-r--r--  2.0 unx     1171 b- defN 22-Dec-13 23:32 dh/__init__.py
+Zip file size: 1646746 bytes, number of entries: 361
+-rw-r--r--  2.0 unx       23 b- defN 23-Apr-19 10:00 dh/__init__.py
 -rw-r--r--  2.0 unx     7359 b- defN 22-Dec-13 23:32 dh/audio/__init__.py
 -rw-r--r--  2.0 unx     4662 b- defN 22-Dec-13 23:32 dh/data/__init__.py
 -rw-r--r--  2.0 unx    14557 b- defN 22-Dec-13 23:32 dh/data/colormaps/accent.json
 -rw-r--r--  2.0 unx    14191 b- defN 22-Dec-13 23:32 dh/data/colormaps/afmhot.json
 -rw-r--r--  2.0 unx    14118 b- defN 22-Dec-13 23:32 dh/data/colormaps/autumn.json
 -rw-r--r--  2.0 unx    14410 b- defN 22-Dec-13 23:32 dh/data/colormaps/binary.json
 -rw-r--r--  2.0 unx    14533 b- defN 22-Dec-13 23:32 dh/data/colormaps/blues.json
@@ -316,15 +315,15 @@
 -rw-r--r--  2.0 unx      402 b- defN 22-Dec-13 23:32 dh/gui/__init__.py
 -rw-r--r--  2.0 unx     8438 b- defN 22-Dec-13 23:32 dh/gui/tk.py
 -rw-r--r--  2.0 unx        0 b- defN 22-Dec-13 23:32 dh/hardware/__init__.py
 -rw-r--r--  2.0 unx     8344 b- defN 22-Dec-13 23:32 dh/hardware/raspi/__init__.py
 -rw-r--r--  2.0 unx    29474 b- defN 22-Dec-13 23:32 dh/image/__init__.py
 -rw-r--r--  2.0 unx    13563 b- defN 22-Dec-13 23:32 dh/image/pipeline.py
 -rw-r--r--  2.0 unx    14360 b- defN 23-Feb-27 16:34 dh/log/__init__.py
--rw-r--r--  2.0 unx    13577 b- defN 22-Dec-13 23:32 dh/network/__init__.py
+-rw-r--r--  2.0 unx    14841 b- defN 23-Apr-19 08:10 dh/network/__init__.py
 -rw-r--r--  2.0 unx     3784 b- defN 22-Dec-13 23:32 dh/network/pika/__init__.py
 -rw-r--r--  2.0 unx    13600 b- defN 22-Dec-13 23:32 dh/plot/__init__.py
 -rw-r--r--  2.0 unx      772 b- defN 22-Dec-13 23:32 dh/tests/__init__.py
 -rw-r--r--  2.0 unx      702 b- defN 22-Dec-13 23:32 dh/tests/test_data.py
 -rw-r--r--  2.0 unx      719 b- defN 22-Dec-13 23:32 dh/tests/test_ejson.py
 -rw-r--r--  2.0 unx     6216 b- defN 22-Dec-13 23:32 dh/tests/test_image.py
 -rw-r--r--  2.0 unx     1043 b- defN 22-Dec-13 23:32 dh/tests/test_log.py
@@ -350,15 +349,15 @@
 -rw-r--r--  2.0 unx    52517 b- defN 22-Dec-13 23:32 dh/thirdparty/tqdm/_tqdm.py
 -rw-r--r--  2.0 unx    13201 b- defN 22-Dec-13 23:32 dh/thirdparty/tqdm/_tqdm_gui.py
 -rw-r--r--  2.0 unx     9939 b- defN 22-Dec-13 23:32 dh/thirdparty/tqdm/_tqdm_notebook.py
 -rw-r--r--  2.0 unx     1608 b- defN 22-Dec-13 23:32 dh/thirdparty/tqdm/_tqdm_pandas.py
 -rw-r--r--  2.0 unx     8184 b- defN 22-Dec-13 23:32 dh/thirdparty/tqdm/_utils.py
 -rw-r--r--  2.0 unx     2318 b- defN 22-Dec-13 23:32 dh/thirdparty/tqdm/_version.py
 -rw-r--r--  2.0 unx    40288 b- defN 23-Feb-27 18:31 dh/utils/__init__.py
--rwxr-xr-x  2.0 unx     3064 b- defN 23-Feb-27 18:34 dh-0.15.2.data/scripts/raspiCameraClient.py
--rwxr-xr-x  2.0 unx      499 b- defN 23-Feb-27 18:34 dh-0.15.2.data/scripts/raspiCameraServer.py
--rw-r--r--  2.0 unx     1061 b- defN 23-Feb-27 18:34 dh-0.15.2.dist-info/LICENSE.txt
--rw-r--r--  2.0 unx      461 b- defN 23-Feb-27 18:34 dh-0.15.2.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Feb-27 18:34 dh-0.15.2.dist-info/WHEEL
--rw-r--r--  2.0 unx      237 b- defN 23-Feb-27 18:34 dh-0.15.2.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx    34295 b- defN 23-Feb-27 18:34 dh-0.15.2.dist-info/RECORD
-362 files, 2951254 bytes uncompressed, 1592703 bytes compressed:  46.0%
+-rwxr-xr-x  2.0 unx     3064 b- defN 23-Apr-19 10:08 dh-0.15.3.data/scripts/raspiCameraClient.py
+-rwxr-xr-x  2.0 unx      499 b- defN 23-Apr-19 10:08 dh-0.15.3.data/scripts/raspiCameraServer.py
+-rw-r--r--  2.0 unx     1061 b- defN 23-Apr-19 10:08 dh-0.15.3.dist-info/LICENSE.txt
+-rw-r--r--  2.0 unx      461 b- defN 23-Apr-19 10:08 dh-0.15.3.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Apr-19 10:08 dh-0.15.3.dist-info/WHEEL
+-rw-r--r--  2.0 unx      237 b- defN 23-Apr-19 10:08 dh-0.15.3.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx    34223 b- defN 23-Apr-19 10:08 dh-0.15.3.dist-info/RECORD
+361 files, 2950434 bytes uncompressed, 1592000 bytes compressed:  46.0%
```

## zipnote {}

```diff
@@ -1,10 +1,7 @@
-Filename: dh/VERSION.txt
-Comment: 
-
 Filename: dh/__init__.py
 Comment: 
 
 Filename: dh/audio/__init__.py
 Comment: 
 
 Filename: dh/data/__init__.py
@@ -1059,29 +1056,29 @@
 
 Filename: dh/thirdparty/tqdm/_version.py
 Comment: 
 
 Filename: dh/utils/__init__.py
 Comment: 
 
-Filename: dh-0.15.2.data/scripts/raspiCameraClient.py
+Filename: dh-0.15.3.data/scripts/raspiCameraClient.py
 Comment: 
 
-Filename: dh-0.15.2.data/scripts/raspiCameraServer.py
+Filename: dh-0.15.3.data/scripts/raspiCameraServer.py
 Comment: 
 
-Filename: dh-0.15.2.dist-info/LICENSE.txt
+Filename: dh-0.15.3.dist-info/LICENSE.txt
 Comment: 
 
-Filename: dh-0.15.2.dist-info/METADATA
+Filename: dh-0.15.3.dist-info/METADATA
 Comment: 
 
-Filename: dh-0.15.2.dist-info/WHEEL
+Filename: dh-0.15.3.dist-info/WHEEL
 Comment: 
 
-Filename: dh-0.15.2.dist-info/top_level.txt
+Filename: dh-0.15.3.dist-info/top_level.txt
 Comment: 
 
-Filename: dh-0.15.2.dist-info/RECORD
+Filename: dh-0.15.3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## dh/__init__.py

```diff
@@ -1,44 +1 @@
-"""
-Personal Python package of Daniel Haase.
-"""
-
-from os.path import abspath, dirname, join
-from warnings import warn
-
-
-# read version number from text file
-try:
-    _versionFilename = join(dirname(abspath(__file__)), "VERSION.txt")
-    with open(_versionFilename, "r") as _f:
-        for _line in _f:
-            _line = _line.strip()
-            if (_line == "") or (_line[0] == "#"):
-                # ignore empty lines and comments
-                continue
-            else:
-                # the first valid line will be used as version number
-                __version__ = _line
-                break
-        else:
-            # end of file, version was not found
-            warn("Found no valid version number in file '{}'".format(_versionFilename))
-            __version__ = "unknown"
-except Exception as e:
-    warn("Failed to get version number from file '{}' (error: '{}')".format(_versionFilename, e))
-    __version__ = "unknown"
-finally:
-    # purge
-    del abspath
-    del dirname
-    del join
-    del warn
-    del _versionFilename
-    try:
-        del _f
-    except NameError:
-        pass
-    try:
-        del _line
-    except NameError:
-        pass
-
+__version__ = "0.15.3"
```

## dh/network/__init__.py

```diff
@@ -21,14 +21,23 @@
 except ImportError as e:
     _NUMPY_ERROR = e
 else:
     _NUMPY_ERROR = None
 
 
 ###
+#%% exceptions
+###
+
+
+class InvalidMessageHeaderError(Exception): pass
+class InvalidMessageBodyError(Exception): pass
+
+
+###
 #%% socket message types
 ###
 
 
 class SocketMessageType(abc.ABC):
     """
     Base class providing `send()` and `recv()` methods for sending and
@@ -40,14 +49,56 @@
         pass
 
     @abc.abstractmethod
     def recv(self, socket):
         pass
 
 
+class RawByteSocketMessageType(SocketMessageType):
+    """
+    Class providing methods for sending and receiving raw bytes (not messages) via a given socket.
+    """
+
+    def __init__(self, maxByteCount=None):
+        self.maxByteCount = maxByteCount
+
+    @staticmethod
+    def _recvn(socket, byteCount=None):
+        """
+        Receive and return a fixed number of `byteCount` bytes from the socket.
+        """
+        b = io.BytesIO()
+        while True:
+            if byteCount is not None:
+                # there is a max byte count we want to receive
+                currentByteCount = b.getbuffer().nbytes
+                if currentByteCount >= byteCount:
+                    break
+                packet = socket.recv(byteCount - currentByteCount)
+            else:
+                # there is NO max byte count we want to receive
+                packet = socket.recv(1024)
+
+            if len(packet) > 0:
+                b.write(packet)
+            else:
+                break
+
+        if byteCount is not None:
+            return b.getvalue()[:byteCount]
+        else:
+            return b.getvalue()
+
+    def send(self, socket, b):
+        socket.sendall(b)
+
+    def recv(self, socket):
+        return self._recvn(socket, byteCount=self.maxByteCount)
+
+
 class ByteSocketMessageType(SocketMessageType):
     """
     Class providing methods for sending and receiving byte *messages* of up to
     4 GiB in size via a given socket.
 
     Each message has a fixed-length (four byte) header, specifying the length
     of the message content. Thus, calls to `send()` and `recv()` always
@@ -58,41 +109,32 @@
     time. The value for `compress` must be the same for both the server and the
     client.
     """
 
     def __init__(self, compress=False):
         self._compress = compress
 
-    def _recvn(self, socket, byteCount):
-        """
-        Receive and return a fixed number of `byteCount` bytes from the socket.
-        """
-        b = io.BytesIO()
-        while True:
-            currentByteCount = b.getbuffer().nbytes
-            if currentByteCount >= byteCount:
-                break
-            packet = socket.recv(byteCount - currentByteCount)
-            if len(packet) == 0:
-                return None
-            b.write(packet)
-        return b.getvalue()
-
     def send(self, socket, b):
         if self._compress:
             b = zlib.compress(b)
         header = struct.pack(">I", int(len(b)))
         socket.sendall(header + b)
 
     def recv(self, socket):
-        header = self._recvn(socket, 4)
-        if header is None:
-            return None
+        # receive header which specifies the length of the message (in bytes)
+        header = RawByteSocketMessageType._recvn(socket, 4)
+        if len(header) != 4:
+            raise InvalidMessageHeaderError("Received invalid header ({})".format(header))
         length = struct.unpack(">I", header)[0]
-        b = self._recvn(socket, length)
+
+        # receive actual message
+        b = RawByteSocketMessageType._recvn(socket, length)
+        if len(b) != length:
+            raise InvalidMessageBodyError("Received message body of {} byte(s), but header specified {} byte(s)".format(len(b), length))
+
         if self._compress:
             b = zlib.decompress(b)
         return b
 
 
 class NumpySocketMessageType(ByteSocketMessageType):
     """
@@ -237,19 +279,20 @@
             sys.stdout.flush()
             (connectionSocket, connectionAddress) = self._socket.accept()
             self.requestCount += 1
             self.logger.info("[request #{}]  Accepted connection from {}:{}".format(self.requestCount, connectionAddress[0], connectionAddress[1]))
             t0 = time.time()
             try:
                 self.communicate(MessageSocket(connectionSocket))
-                connectionSocket.close()
             except Exception as e:
                 self.logger.error("[request #{}]  {}: {}".format(self.requestCount, type(e).__name__, e))
             else:
                 self.logger.success("[request #{}]  Finished request from {}:{} after {} ms".format(self.requestCount, connectionAddress[0], connectionAddress[1], dh.utils.around((time.time() - t0) * 1000.0)))
+            finally:
+                connectionSocket.close()
 
     @abc.abstractmethod
     def communicate(self, socket):
         """
         Implements the entire communication happening for one connection with a
         client via high-level socket messages (see `SocketMessageType`).
 
@@ -371,15 +414,14 @@
     counterpart is the `ImageProcessingClient2` class.
 
     To specify the processing behavior, sub-class this class and implement
     the static method `process(data, params)`.
     """
 
     def communicate(self, socket):
-        # receive input image and parameters
         data = socket.mrecv(NumpySocketMessageType())
         params = socket.mrecv(JsonSocketMessageType())
 
         # process
         try:
             (result, info) = self.process(data=data, params=params)
         except Exception as e:
@@ -392,15 +434,15 @@
         socket.msend(JsonSocketMessageType(), info)
 
     @staticmethod
     @abc.abstractmethod
     def process(data, params):
         """
         This function specifies the processing behavior of this server and must
-        be implemeted by the user.
+        be implemented by the user.
         """
         pass
 
 
 class ImageProcessingClient2(SocketClient):
     """
     Special case of `SocketClient` which sends a NumPy array and JSON-encoded
```

## Comparing `dh-0.15.2.data/scripts/raspiCameraClient.py` & `dh-0.15.3.data/scripts/raspiCameraClient.py`

 * *Files identical despite different names*

## Comparing `dh-0.15.2.dist-info/LICENSE.txt` & `dh-0.15.3.dist-info/LICENSE.txt`

 * *Files 1% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-Copyright (c) 2015-2017 Daniel Haase
+Copyright (c) 2015-2023 Daniel Haase
 
 Permission is hereby granted, free of charge, to any person obtaining a copy of
 this software and associated documentation files (the "Software"), to deal in
 the Software without restriction, including without limitation the rights to
 use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies
 of the Software, and to permit persons to whom the Software is furnished to do
 so, subject to the following conditions:
```

## Comparing `dh-0.15.2.dist-info/RECORD` & `dh-0.15.3.dist-info/RECORD`

 * *Files 0% similar despite different names*

```diff
@@ -1,9 +1,8 @@
-dh/VERSION.txt,sha256=KNNJ6-HGP0R5u9egBjNCP8JT4r_lCbrNXeqNSZMHuvA,864
-dh/__init__.py,sha256=vnGOEHUh9tgwLikjlicAhAO6Uocc-UAFhSXJB0BYSes,1171
+dh/__init__.py,sha256=WbcBdqaNCRHsRqs6rGd3pRLP4kQSII2td9dR0Fl6HcU,23
 dh/audio/__init__.py,sha256=Zqv26d1QZAUlyJDcknLRnfD4lQsAs4RtwSYjGKuqEHE,7359
 dh/data/__init__.py,sha256=uh9ZnyRHqKQ1PCZTRNe9VKOALTS-xQCCLAdzuQTrYsg,4662
 dh/data/colormaps/accent.json,sha256=w0us4N87g-DdJGHjNtP12Up9X7wqCh9vWm62jFo5FC8,14557
 dh/data/colormaps/afmhot.json,sha256=ZjcMvj0CO1Pvw6F2JOEYzuyWejulQ2JFe4RuTDo9zHE,14191
 dh/data/colormaps/autumn.json,sha256=QADAvgLjKEPHH-UFNr4VlhyNGGvKIwtgEiaiYHhl0yI,14118
 dh/data/colormaps/binary.json,sha256=woQuJY7gyw076wPyYOHamc_qMGMyTAVpA8amaraSlM4,14410
 dh/data/colormaps/blues.json,sha256=XkojdjvauKBX2GF1lAD_CO9EouYsqK0GJIMRml4evkw,14533
@@ -315,15 +314,15 @@
 dh/gui/__init__.py,sha256=pgfSrsYcLCHLTPdqWZujXzF4muz9cvGDbd_xCtYiEvY,402
 dh/gui/tk.py,sha256=-VFL-gM9prfN99nLzORmIjQW1BpMM8-9ala2nhEzKN8,8438
 dh/hardware/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 dh/hardware/raspi/__init__.py,sha256=Vo03pBPbOHfhZa0mYY1PmryyTYOGdA8nAiFwfU_U01c,8344
 dh/image/__init__.py,sha256=MzgRLCz-4FOD76dAnzXXIH4yxd6pCBx-zDSBL-WcT6g,29474
 dh/image/pipeline.py,sha256=aoFDycvyguQ26K0ZsjFnrtalxoisCZq9U7dY-wfOrbE,13563
 dh/log/__init__.py,sha256=ixEiRzWnwjou3hAHFTS2HaOwCPgIlF5lbqvGgRSMAcc,14360
-dh/network/__init__.py,sha256=IT-g6u_Mi7afDe1FmN5TiH392sr10U5Aerkhbiq0BK0,13577
+dh/network/__init__.py,sha256=7kR07DG4FuDRdGbsDkzD0wUzIdM3y7z0Om3BMe76A1Y,14841
 dh/network/pika/__init__.py,sha256=hvTH2C9InXnJsnqyL74DxlM2EcGTZ26lQVVGdT9oTtc,3784
 dh/plot/__init__.py,sha256=SONlU98s7rgY3NjHNBHU96HzJAqNgqASpK50WcUkuZ0,13600
 dh/tests/__init__.py,sha256=dKUfzJI-LzwC-NrxLv0QRYX4Yy3OWoebBZ2k8dWKp54,772
 dh/tests/test_data.py,sha256=D3szBy5_TPpBtVT3SlIqw630ad7bVRdzl-hg-SIu0BM,702
 dh/tests/test_ejson.py,sha256=ru1PUIuOT-9l3S80WmMyQ9csALy9nSqrtP3l3Rb8bCc,719
 dh/tests/test_image.py,sha256=ZvtteZVuhztSSl5pUlr3b0Cuz9P5rU3_58yaQGWMEG0,6216
 dh/tests/test_log.py,sha256=SD3YTM61pzPDF6t1W2OfM0eIEoWE0G8mEPerc9dCXTI,1043
@@ -349,14 +348,14 @@
 dh/thirdparty/tqdm/_tqdm.py,sha256=gg2tiyx030Fw8fZ01HtUcrUC_DKTVQzlu-kOLKCsoas,52517
 dh/thirdparty/tqdm/_tqdm_gui.py,sha256=5Zf56rV_mBGgGQAF8WSAYVj3LMtlG-dz_dhvFQhPVLg,13201
 dh/thirdparty/tqdm/_tqdm_notebook.py,sha256=cuHApzL_Z54Def1W6xC2MUC-rhClM1GkdDmev2ypbVQ,9939
 dh/thirdparty/tqdm/_tqdm_pandas.py,sha256=4RjSpzbHLgfuRLJQPbDf9_LT-f_0db2gaAB6nOJ4dYA,1608
 dh/thirdparty/tqdm/_utils.py,sha256=IJpnne8DJmcqT3IfwHzl2yLC_NF2DlxpTLnlNDCgupA,8184
 dh/thirdparty/tqdm/_version.py,sha256=hensfOmCNA-RhJPWXPwOkm4Ya1lrjb3w8jOu53h-BEY,2318
 dh/utils/__init__.py,sha256=y_wvnuQawE0STyDhqaKHQywk1OUukh0Jbu-yUmiMiAU,40288
-dh-0.15.2.data/scripts/raspiCameraClient.py,sha256=HyZVZgT0wwUpEQ5JvDiwpDNOFMVsAdXQnXbgxZiTtx0,3064
-dh-0.15.2.data/scripts/raspiCameraServer.py,sha256=pspEraZCDBIFqgk51ZvpTKF9UIsTe2wceHiD2v2-nEg,499
-dh-0.15.2.dist-info/LICENSE.txt,sha256=oGEpBwy_V4d8cjJa2oCj0QHQmX71yMxmNiVvHVA7Cr8,1061
-dh-0.15.2.dist-info/METADATA,sha256=dhiVSQPApumVcrFggF3xPBMQdXKIfCR-N5hZWMO1ktQ,461
-dh-0.15.2.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-dh-0.15.2.dist-info/top_level.txt,sha256=auKTe-HjcmPDuAI0emJfeAOUwXev8xbfqnMKlsW53JM,237
-dh-0.15.2.dist-info/RECORD,,
+dh-0.15.3.data/scripts/raspiCameraClient.py,sha256=HyZVZgT0wwUpEQ5JvDiwpDNOFMVsAdXQnXbgxZiTtx0,3064
+dh-0.15.3.data/scripts/raspiCameraServer.py,sha256=pspEraZCDBIFqgk51ZvpTKF9UIsTe2wceHiD2v2-nEg,499
+dh-0.15.3.dist-info/LICENSE.txt,sha256=B9dQULH2bdG0879y6wacxM8dCwYN9beNaWpmaj1LLfc,1061
+dh-0.15.3.dist-info/METADATA,sha256=vW4zndyvHHavsHfFEepBlJKJj4oFI-3yqdKt1v2vkeM,461
+dh-0.15.3.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+dh-0.15.3.dist-info/top_level.txt,sha256=auKTe-HjcmPDuAI0emJfeAOUwXev8xbfqnMKlsW53JM,237
+dh-0.15.3.dist-info/RECORD,,
```

