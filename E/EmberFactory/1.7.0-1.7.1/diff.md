# Comparing `tmp/EmberFactory-1.7.0-py3-none-any.whl.zip` & `tmp/EmberFactory-1.7.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,45 +1,45 @@
-Zip file size: 1076025 bytes, number of entries: 43
--rw-r--r--  2.0 unx       22 b- defN 23-Apr-02 08:41 embermaker/__init__.py
--rw-r--r--  2.0 unx    65271 b- defN 23-Apr-02 08:41 embermaker/ember.py
--rw-r--r--  2.0 unx    15519 b- defN 23-Apr-02 08:41 embermaker/helpers.py
--rw-r--r--  2.0 unx    35717 b- defN 23-Apr-02 08:41 embermaker/makember.py
--rw-r--r--  2.0 unx    10638 b- defN 23-Apr-02 08:41 embermaker/parameters.py
--rw-rw-rw-  2.0 unx    13459 b- defN 23-Apr-02 08:41 embermaker/defaults/colors.xlsx
--rw-rw-rw-  2.0 unx    24982 b- defN 23-Apr-02 08:41 embermaker/defaults/paramdefs.md
--rw-r--r--  2.0 unx     4917 b- defN 23-Apr-02 08:41 emberweb/__init__.py
--rw-r--r--  2.0 unx     8941 b- defN 23-Apr-02 08:41 emberweb/control.py
--rw-r--r--  2.0 unx     3710 b- defN 23-Apr-02 08:41 emberweb/helpers.py
--rw-r--r--  2.0 unx     3369 b- defN 23-Apr-02 08:41 emberweb/sitenav.py
--rw-rw-rw-  2.0 unx     2767 b- defN 23-Apr-02 08:41 emberweb/doc/examples.md
--rw-rw-rw-  2.0 unx     6700 b- defN 23-Apr-02 08:41 emberweb/doc/parameters.md
--rw-rw-rw-  2.0 unx    13196 b- defN 23-Apr-02 08:41 emberweb/doc/tutorial.md
--rw-rw-rw-  2.0 unx    23105 b- defN 23-Apr-02 08:41 emberweb/doc/examples/AR5-SR15-RFCs.xlsx
--rw-rw-rw-  2.0 unx    15262 b- defN 23-Apr-02 08:41 emberweb/doc/examples/AR5-SYR-CO2.xlsx
--rw-rw-rw-  2.0 unx    11789 b- defN 23-Apr-02 08:41 emberweb/doc/examples/Basic-fmt-SRCCL.xlsx
--rw-rw-rw-  2.0 unx    10950 b- defN 23-Apr-02 08:41 emberweb/doc/examples/Basic-fmt-ember-metadata.xlsx
--rw-rw-rw-  2.0 unx    15938 b- defN 23-Apr-02 08:41 emberweb/doc/examples/Basic-layout-SRCCL.xlsx
--rw-rw-rw-  2.0 unx    11665 b- defN 23-Apr-02 08:41 emberweb/doc/examples/Basic-template.xlsx
--rw-rw-rw-  2.0 unx    30158 b- defN 23-Apr-02 08:41 emberweb/doc/examples/RFCs-data-2020_01_26-Z2020_rev1_byPubli.xlsx
--rw-rw-rw-  2.0 unx    18506 b- defN 23-Apr-02 08:41 emberweb/doc/examples/SROCC_SPM3.xlsx
--rw-rw-rw-  2.0 unx    12639 b- defN 23-Apr-02 08:41 emberweb/doc/examples/colors.xlsx
--rw-rw-rw-  2.0 unx   257005 b- defN 23-Apr-02 08:41 emberweb/doc/examples/images/AR5-SR15-RFCs.png
--rw-rw-rw-  2.0 unx   245412 b- defN 23-Apr-02 08:41 emberweb/doc/examples/images/AR5-SYR-CO2.png
--rw-rw-rw-  2.0 unx    98823 b- defN 23-Apr-02 08:41 emberweb/doc/examples/images/SROCC_SPM3.png
--rw-rw-rw-  2.0 unx    24847 b- defN 23-Apr-02 08:41 emberweb/static/apple-touch-icon-180.png
--rw-rw-rw-  2.0 unx   299394 b- defN 23-Apr-02 08:41 emberweb/static/ef-gp-definitions.png
--rw-rw-rw-  2.0 unx    14739 b- defN 23-Apr-02 08:41 emberweb/static/emberfactory.png
--rw-rw-rw-  2.0 unx     5615 b- defN 23-Apr-02 08:41 emberweb/static/emberweb.css
--rw-rw-rw-  2.0 unx     1150 b- defN 23-Apr-02 08:41 emberweb/static/favicon.ico
--rw-rw-rw-  2.0 unx     1471 b- defN 23-Apr-02 08:41 emberweb/static/icons.svg
--rw-rw-rw-  2.0 unx     3771 b- defN 23-Apr-02 08:41 emberweb/templates/base.html
--rw-rw-rw-  2.0 unx      212 b- defN 23-Apr-02 08:41 emberweb/templates/emberweb/doc.html
--rw-rw-rw-  2.0 unx      527 b- defN 23-Apr-02 08:41 emberweb/templates/emberweb/error.html
--rw-rw-rw-  2.0 unx     5155 b- defN 23-Apr-02 08:41 emberweb/templates/emberweb/more.html
--rw-rw-rw-  2.0 unx     2477 b- defN 23-Apr-02 08:41 emberweb/templates/emberweb/result.html
--rw-rw-rw-  2.0 unx     4224 b- defN 23-Apr-02 08:41 emberweb/templates/emberweb/start.html
--rw-rw-rw-  2.0 unx      878 b- defN 23-Apr-02 08:41 EmberFactory-1.7.0.dist-info/LICENCE.md
--rw-r--r--  2.0 unx     4886 b- defN 23-Apr-02 08:41 EmberFactory-1.7.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-02 08:41 EmberFactory-1.7.0.dist-info/WHEEL
--rw-r--r--  2.0 unx       20 b- defN 23-Apr-02 08:41 EmberFactory-1.7.0.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     3853 b- defN 23-Apr-02 08:41 EmberFactory-1.7.0.dist-info/RECORD
-43 files, 1333771 bytes uncompressed, 1069855 bytes compressed:  19.8%
+Zip file size: 1076297 bytes, number of entries: 43
+-rw-r--r--  2.0 unx       22 b- defN 23-Apr-19 21:36 embermaker/__init__.py
+-rw-r--r--  2.0 unx    65304 b- defN 23-Apr-19 21:36 embermaker/ember.py
+-rw-r--r--  2.0 unx    15519 b- defN 23-Apr-19 21:36 embermaker/helpers.py
+-rw-r--r--  2.0 unx    36204 b- defN 23-Apr-19 21:36 embermaker/makember.py
+-rw-r--r--  2.0 unx    10638 b- defN 23-Apr-19 21:36 embermaker/parameters.py
+-rw-rw-rw-  2.0 unx    13459 b- defN 23-Apr-19 21:36 embermaker/defaults/colors.xlsx
+-rw-rw-rw-  2.0 unx    24982 b- defN 23-Apr-19 21:36 embermaker/defaults/paramdefs.md
+-rw-r--r--  2.0 unx     4917 b- defN 23-Apr-19 21:36 emberweb/__init__.py
+-rw-r--r--  2.0 unx     8941 b- defN 23-Apr-19 21:36 emberweb/control.py
+-rw-r--r--  2.0 unx     3710 b- defN 23-Apr-19 21:36 emberweb/helpers.py
+-rw-r--r--  2.0 unx     3369 b- defN 23-Apr-19 21:36 emberweb/sitenav.py
+-rw-rw-rw-  2.0 unx     2767 b- defN 23-Apr-19 21:36 emberweb/doc/examples.md
+-rw-rw-rw-  2.0 unx     6700 b- defN 23-Apr-19 21:36 emberweb/doc/parameters.md
+-rw-rw-rw-  2.0 unx    13196 b- defN 23-Apr-19 21:36 emberweb/doc/tutorial.md
+-rw-rw-rw-  2.0 unx    23105 b- defN 23-Apr-19 21:36 emberweb/doc/examples/AR5-SR15-RFCs.xlsx
+-rw-rw-rw-  2.0 unx    15262 b- defN 23-Apr-19 21:36 emberweb/doc/examples/AR5-SYR-CO2.xlsx
+-rw-rw-rw-  2.0 unx    11789 b- defN 23-Apr-19 21:36 emberweb/doc/examples/Basic-fmt-SRCCL.xlsx
+-rw-rw-rw-  2.0 unx    10950 b- defN 23-Apr-19 21:36 emberweb/doc/examples/Basic-fmt-ember-metadata.xlsx
+-rw-rw-rw-  2.0 unx    15938 b- defN 23-Apr-19 21:36 emberweb/doc/examples/Basic-layout-SRCCL.xlsx
+-rw-rw-rw-  2.0 unx    11665 b- defN 23-Apr-19 21:36 emberweb/doc/examples/Basic-template.xlsx
+-rw-rw-rw-  2.0 unx    30158 b- defN 23-Apr-19 21:36 emberweb/doc/examples/RFCs-data-2020_01_26-Z2020_rev1_byPubli.xlsx
+-rw-rw-rw-  2.0 unx    18506 b- defN 23-Apr-19 21:36 emberweb/doc/examples/SROCC_SPM3.xlsx
+-rw-rw-rw-  2.0 unx    12639 b- defN 23-Apr-19 21:36 emberweb/doc/examples/colors.xlsx
+-rw-rw-rw-  2.0 unx   257005 b- defN 23-Apr-19 21:36 emberweb/doc/examples/images/AR5-SR15-RFCs.png
+-rw-rw-rw-  2.0 unx   245412 b- defN 23-Apr-19 21:36 emberweb/doc/examples/images/AR5-SYR-CO2.png
+-rw-rw-rw-  2.0 unx    98823 b- defN 23-Apr-19 21:36 emberweb/doc/examples/images/SROCC_SPM3.png
+-rw-rw-rw-  2.0 unx    24847 b- defN 23-Apr-19 21:36 emberweb/static/apple-touch-icon-180.png
+-rw-rw-rw-  2.0 unx   299394 b- defN 23-Apr-19 21:36 emberweb/static/ef-gp-definitions.png
+-rw-rw-rw-  2.0 unx    14739 b- defN 23-Apr-19 21:36 emberweb/static/emberfactory.png
+-rw-rw-rw-  2.0 unx     5615 b- defN 23-Apr-19 21:36 emberweb/static/emberweb.css
+-rw-rw-rw-  2.0 unx     1150 b- defN 23-Apr-19 21:36 emberweb/static/favicon.ico
+-rw-rw-rw-  2.0 unx     1471 b- defN 23-Apr-19 21:36 emberweb/static/icons.svg
+-rw-rw-rw-  2.0 unx     3771 b- defN 23-Apr-19 21:36 emberweb/templates/base.html
+-rw-rw-rw-  2.0 unx      212 b- defN 23-Apr-19 21:36 emberweb/templates/emberweb/doc.html
+-rw-rw-rw-  2.0 unx      527 b- defN 23-Apr-19 21:36 emberweb/templates/emberweb/error.html
+-rw-rw-rw-  2.0 unx     5584 b- defN 23-Apr-19 21:36 emberweb/templates/emberweb/more.html
+-rw-rw-rw-  2.0 unx     2477 b- defN 23-Apr-19 21:36 emberweb/templates/emberweb/result.html
+-rw-rw-rw-  2.0 unx     4224 b- defN 23-Apr-19 21:36 emberweb/templates/emberweb/start.html
+-rw-rw-rw-  2.0 unx      878 b- defN 23-Apr-19 21:36 EmberFactory-1.7.1.dist-info/LICENCE.md
+-rw-r--r--  2.0 unx     4886 b- defN 23-Apr-19 21:36 EmberFactory-1.7.1.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Apr-19 21:36 EmberFactory-1.7.1.dist-info/WHEEL
+-rw-r--r--  2.0 unx       20 b- defN 23-Apr-19 21:36 EmberFactory-1.7.1.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     3853 b- defN 23-Apr-19 21:36 EmberFactory-1.7.1.dist-info/RECORD
+43 files, 1334720 bytes uncompressed, 1070127 bytes compressed:  19.8%
```

## zipnote {}

```diff
@@ -108,23 +108,23 @@
 
 Filename: emberweb/templates/emberweb/result.html
 Comment: 
 
 Filename: emberweb/templates/emberweb/start.html
 Comment: 
 
-Filename: EmberFactory-1.7.0.dist-info/LICENCE.md
+Filename: EmberFactory-1.7.1.dist-info/LICENCE.md
 Comment: 
 
-Filename: EmberFactory-1.7.0.dist-info/METADATA
+Filename: EmberFactory-1.7.1.dist-info/METADATA
 Comment: 
 
-Filename: EmberFactory-1.7.0.dist-info/WHEEL
+Filename: EmberFactory-1.7.1.dist-info/WHEEL
 Comment: 
 
-Filename: EmberFactory-1.7.0.dist-info/top_level.txt
+Filename: EmberFactory-1.7.1.dist-info/top_level.txt
 Comment: 
 
-Filename: EmberFactory-1.7.0.dist-info/RECORD
+Filename: EmberFactory-1.7.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## embermaker/__init__.py

```diff
@@ -1 +1 @@
-__version__ = '1.7.0'
+__version__ = '1.7.1'
```

## embermaker/ember.py

```diff
@@ -201,15 +201,15 @@
         return None
 
     @classmethod
     def colorname(cls, transname):
         """
         Color used to show information about the transition, e.g. in elicitation process (not colors for embers):
         :param transname: transition name
-        :return: color name (string)
+        :return: color name
         """
         return cls.colors[cls.names_risk[transname]]
 
     def __init__(self, name):
         """
         Creates standard attributes for transitions
         """
@@ -220,23 +220,22 @@
         self.meta = {}  # Metadata, as for embers
         # A mode may be attributed to transitions within the expert elicitation process;
         # In this context, the mode is the most likely value in a probability distribution.
         self.mode = None
 
     def append_level(self, phase, hazl, conf):
         """
-        Adds a level to this transition
-        :param phase:
-        :param hazl:
-        :param conf:
+        Adds a level to this transition.
+        :param str phase: the name of the phase (see Transition and Level)
+        :param float hazl: the hazard level
+        :param str conf: the confidence level
         :return:
         """
         level = Level(self, {"phase": phase, "hazl": float(hazl), "conf": conf})
         self.levels.append(level)
-        # In principle we want this to be an ordered list (right? or is it ordered by hazl?) => not a dict.
 
     def __getitem__(self, phase):
         """
         Returns the level object for the requested phase in this transition.
         :param phase:
         """
         level = None
@@ -430,15 +429,15 @@
         # (= extend the last colour beyond the last transition):
         plotlevels.append(1.0)
         colorlevels.append(colorlevels[-1])
         plotlevels.insert(0, 0)
         colorlevels.insert(0, colorlevels[0])  # top (copy the last available colour to the 'top' level)
 
         hlp.addlogmes(f"Hazard range of the gradient: {egr.cantohaz(ygmin):6.2f} ->{egr.cantohaz(ygmax):6.2f} ")
-        hlp.addlogmes(f"Fractional levels: {plotlevels}")
+        hlp.addlogmes("Position as % of gradient range: "+", ".join([f"{lv:.5f}" for lv in plotlevels]))
         hlp.addlogmes(f"Colors: {colorlevels}")
 
         self.drawlinear(egr, xmin, xmax, yamin, yamax, ygmin, ygmax, yvmin, yvmax, plotlevels, colorlevels)
 
         # Add the name of the BE
         # - - - - - - - - - - -
         if egr.gp['be_name_rotate'] > 0:
@@ -576,15 +575,15 @@
             c.setLineWidth(0.3 * mm)
             # Get confidence level names and symbols:
             cffile = norm(egr.gp.lst('conf_levels_file'))
             cfgraph = egr.gp.lst('conf_levels_graph')
 
             # Define the 'gap' between confidence lines which make sures that they are not contiguous:
             ygap = egr.get_y() * 0.005
-            maxychi = hazl[0]  # Top of uncertainty range lines so far, to detect overlaps (intial val for ember)
+            maxychi = hazl[0]  # Top of uncertainty range lines so far, to detect overlaps (initial val for ember)
             midychi = hazl[0]  # Middle of uncertainty range lines so far, to detect large overlaps
             lconflen = 0  # Stores the length of the last uncertainty range mark, to help further staggering
 
             # Basis position of conf levels marks on the horizontal axis
             # (xconfstep is also used to stagger the lines showing uncertainty ranges)
             if norm(egr.gp['show_confidence']) == 'on top':
                 xconfstep = min(0.1 * egr.gp['be_x'], 4 * mm)
```

## embermaker/makember.py

```diff
@@ -20,16 +20,14 @@
 from embermaker.helpers import norm
 from embermaker import ember as emb
 from embermaker import parameters as param
 from embermaker.__init__ import __version__
 trd = emb.Transition  # Transition definitions
 
 # For an upcoming release (none of this appears urgent):
-# Todo: Test the support for reading confidence levels in the "extended" format
-#      (implemented but not fully tested with 'extended' format data sheets, but well tested with the basic format)
 
 # Input file
 # ----------
 # This code can process 3 file formats:
 # - The standard file format only contains data about the risk and confidence levels,
 #   in the format from the IPCC SRCCL chap 7 supplementary material; the workbook only contains one sheet.
 # - The extended file format contains the same first sheet, but one or two additional sheets provide:
@@ -291,18 +289,19 @@
 
             # Prepare data for the line showing the changes between embers :
             # - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
             hazl = be.levels_values('hazl')
             risk = be.levels_values('risk')
             if norm(gp['show_changes']) == 'true':
                 rlevs = gp.lst('show_changes')
-                hlevs = np.interp(rlevs, risk, hazl)
+                hlevs = np.interp(rlevs, risk, hazl, left=np.NaN, right=np.NaN)
+                # ^When a rlev is outside the range of defined risk values, don't get a hlev (= set it to NaN)
                 bexs.append(bex)
-                ahlevs.append(
-                    hlevs)  # [a]ll [h]azard-[lev]els = for all requested risk levels and all embers in the group
+                ahlevs.append(hlevs)
+                # ^[a]ll [h]azard-[lev]els = for all requested risk levels and all embers in the group
 
             # Add lines and marks indicating the confidence levels :
             # - - - - - - - - - - - - - - - - - - - - - - - - - - -
             be.drawconf(egr, xbas)
 
             # Move 'drawing cursor' to the end of this ember (1/2 ember interval after the colour bar)
             xbas += be_x + gp['be_int_x'] / 2.0
@@ -389,21 +388,23 @@
 
     :param sht: A sheet from an Excel workbook containing the data
     :param gp: Graphic Parameters which will work as default values
     :return: (lbes, gp) a set of embers (lbes) and new or updated graphic parameters (gp)
     """
     if gp is None:
         gp = param.ParamDict()
-    # Check file format; By default, the format is "Basic" = SRCCL-like (look for the File format in the first 6 rows)
+    # Check file format; By default, the format is "Standard" = SRCCL-like (File format, if any, is in the first 6 rows)
     ffind = [sht.cell(i, 2).value for i in range(1, 7)
              if isinstance(sht.cell(i, 1).value, str) and sht.cell(i, 1).value == "File format"]
     if len(ffind) == 1:
         ffmt = ffind[0].strip()
+        if ffmt == "Basic":
+            ffmt = "Standard"  # Just in case there would be such a file with the "old name" (unlikely)
     else:
-        ffmt = "Basic"
+        ffmt = "Standard"
     hlp.addlogmes("Format of the main input file: " + str(ffmt))
 
     # BE data storage
     lbes = []  # list of ember instances (to be filled by reading the data part of the Excel sheet, below)
 
     be = None  # The ember currently being processed
     be_risk = None
@@ -453,15 +454,15 @@
                 lbes.append(be)
                 be.name = str(name)
                 be.group = be_group
                 trans = None
                 rhaz = float(inda[ndata])  # Reference hazard level (e.g. temperature) / pre-ind
                 # Range of BE validity (do not show colours beyond that)
                 # The 'fullflex' format only has an upper range so far, called 'top value' in the sheet;
-                #      a range bottom was added later in the basic format and copied here 'just in case'
+                #     a range bottom was added later in the standard (formerly basic) fmt and copied here 'just in case'
                 be.haz_valid = (float(gp.get('haz_valid_bottom', gp.get('haz_axis_bottom', 0))),
                                 float(inda[ndata + 1]) + rhaz)
                 be_hazl = []  # temporary storage for hazard-level data within a single ember
                 be_risl = []  # temporary storage for risk-level data within a single ember
                 if ndata != len(be_risk):
                     return {'error': hlp.addlogfail(
                         "Fullflex fmt: #risk levels does not appear to match #hazard levels")}
@@ -501,19 +502,17 @@
 
             elif key == 'CONFIDENCE' and dstate == 'ready':
                 hlp.addlogmes("CONFIDENCE is not supported; "
                               "please move to the standard format if you need confidence levels.")
             elif key == 'HAZARD-INDICATOR-DEF':
                 gp['haz_' + name] = inda[0]  # Those parameters are on the first sheet because they relate to data
 
-    # Basic file format = from IPCC SRCCL sup. mat.
-    # - - - - - - - - - - - - - - - - - - - - - - -
-    elif ffmt == "Basic" or "Standard":
-        # The "Basic" is now becoming the standard format, so we consider renaming it in the future.
-        # This format provides 'hazard' data for 3 transitions defined below.
+    # Standard file format = from IPCC SRCCL sup. mat.
+    # - - - - - - - - - - - - - - - - - - - - - - - - -
+    elif ffmt == "Standard":
 
         # List of parameters that can be used on the first sheet (= together with the data):
         # Todo: this is used beyond the original intention and becomes clutered;
         #       rethink: include in paramdefs.md? And/or have source and figure information on a different worksheet?
         bfparams = ['project_name', 'project_source', 'project_revision_date', 'project_version',
                     'source_key', 'source_title', 'source_author', 'source_editor', 'source_year',
                     'source_crossref', 'source_chapter', 'source_figure_number',
@@ -570,15 +569,15 @@
                         tr_explanation_row = startmeta
                         startmeta += 1
                     # Get names of ember-related metadata - feature in development (2021); may be improved.
                     metanames = [str(cell.value).strip() for cell in row[startmeta:] if cell.value]
                     metanames = [name.lower().replace(' ', '_') for name in metanames if name != ""]
                     for name in metanames:
                         if name not in ['remarks', 'description', 'keywords', 'long_name',
-                                        'inclusion_level', 'references']:
+                                        'inclusion_level', 'references', 'justification']:
                             hlp.addlogwarn('Unknown ember metadata name: ' + name)
             elif hlp.isempty(cola) and not hlp.isempty(colb) and dstate == 'wait-data':
                 # Start new ember
                 if not started:
                     # This is the first ember. Check anything related to metadata before starting to read:
                     fver = str(gp['software_version_min'])
                     if fver > __version__:
@@ -630,25 +629,37 @@
                 if (trans is None or hlp.isempty(row[3].value)) and not hlp.isempty(row[4].value):
                     hlp.addlogwarn('Input file may be badly formated: data without transition: ' + str(row[4].value))
                 trans_phper = trd.phaserisk(trans_phase)
                 if trans_phper is None:
                     return {'error': hlp.addlogfail(f"Input file format error: "
                                                     f"unknown transition phase '{trans_phase}' in line {irow + 1}")}
 
+                # Get and check hazard level data
                 hazl = row[4].value
-                confmessage = f"; conf: {conf}" if not hlp.isempty(conf) else "."
-                hlp.addlogmes(f"- {trans.name}/{trans_phase} -> {str(hazl)}{confmessage}")
-                if type(hazl) in [float, int]:  # existing (not missing) value
+                if not hlp.isempty(hazl):
+                    hlp.addlogmes(f"- {trans.name}/{trans_phase} -> {str(hazl)} conf: {conf}.")
+                    if type(hazl) not in [float, int]:
+                        try:
+                            hazl = float(hazl)
+                        except ValueError:
+                            if hlp.norm(hazl) != "n/a":
+                                hlp.addlogwarn(f"Hazard level cannot be converted to a number: {hazl}")
+                            hazl = None
+                        if hazl is not None:
+                            hlp.addlogwarn(f"Hazard level is not stored as a number: {hazl}. Check Excel file?")
+
+                # Store hazard level data as appropriate
+                if not hlp.isempty(hazl):
                     if newtrans:
                         be.trans.append(trans)
                     if trans_phase == 'mode':
                         # A very special case used for expert elicitation. To change later for simplification?
                         trans.mode = float(hazl)
                     else:
-                        # Addition level to transition
+                        # Add level to transition
                         conf = norm(conf)
                         trans.append_level(trans_phase, hazl, conf)
 
     else:
         return {'error': hlp.addlogfail("Unknown input file format:" + str(ffmt))}
 
     if len(lbes) == 0:
```

## emberweb/__init__.py

```diff
@@ -1,9 +1,9 @@
 # -*- coding: utf-8 -*-
-__version__ = '1.7.0'
+__version__ = '1.7.1'
 """
                  EmberFactory / web application
 
 This script creates the Flask web app.
 The user interface is managed by the 'control.py' module
 The drawing code is in the 'embermaker' package.
```

## emberweb/templates/emberweb/more.html

```diff
@@ -38,17 +38,22 @@
 <li>more information about the hazard level that corresponds to a given risk level inside a
     "risk transition". The standard is min, (optional) median, max; the update adds the possibility to
     provide "percentiles", which are intermediate levels of risk within a transition: p25, p75, etc. (p50 would
     be the median).</li>
 </ul>
 <p>
     The update simplifies the documentation by referring to the former "basic (file) format" as the standard
-    format. The former "full-flex" format was probably used in a single case and is only kept for legacy file(s),
-    as the standard format is now sufficiently flexible to cover all known cases.
-    <br>(version 1.7)
+    format. The former "full-flex" format was probably used in a single case and is kept for legacy file(s).
+    <br>The connecting lines showing changes between embers will no longer be drawn for risk levels absent from an
+    ember.
+    <br>When non-numeric data is erroneously provided for an hazard level (wighin a transition), it will be converted
+    to numeric with a warning. This typically results from entering "." instead of "," as the decimal separator in
+    Excel, with non-English languages. <b>Such erroneous lines were previously ignored: there might thus be a change in
+    behavior (with a warning)</b>.
+    <br>(version 1.7.1)
 </p>
 <h2>2021/09: Support for 'overlapping transitions', corrections for technical issues</h2>
 <p> It is now possible to define 'overlapping transitions', i.e. generate embers with 'uncertainty ranges' which span
     across each other (e.g. it might be that risk is above or below 'high' at a given level).
     Technical changes enable files to be opened in recent versions of Adobe Illustrator (...).
     <br> (version 1.6)
 </p>
```

### html2text {}

```diff
@@ -26,17 +26,23 @@
     * more information about the hazard level that corresponds to a given risk
       level inside a "risk transition". The standard is min, (optional) median,
       max; the update adds the possibility to provide "percentiles", which are
       intermediate levels of risk within a transition: p25, p75, etc. (p50
       would be the median).
 The update simplifies the documentation by referring to the former "basic
 (file) format" as the standard format. The former "full-flex" format was
-probably used in a single case and is only kept for legacy file(s), as the
-standard format is now sufficiently flexible to cover all known cases.
-(version 1.7)
+probably used in a single case and is kept for legacy file(s).
+The connecting lines showing changes between embers will no longer be drawn for
+risk levels absent from an ember.
+When non-numeric data is erroneously provided for an hazard level (wighin a
+transition), it will be converted to numeric with a warning. This typically
+results from entering "." instead of "," as the decimal separator in Excel,
+with non-English languages. Such erroneous lines were previously ignored: there
+might thus be a change in behavior (with a warning).
+(version 1.7.1)
 ***** 2021/09: Support for 'overlapping transitions', corrections for technical
 issues *****
 It is now possible to define 'overlapping transitions', i.e. generate embers
 with 'uncertainty ranges' which span across each other (e.g. it might be that
 risk is above or below 'high' at a given level). Technical changes enable files
 to be opened in recent versions of Adobe Illustrator (...).
 (version 1.6)
```

## Comparing `EmberFactory-1.7.0.dist-info/LICENCE.md` & `EmberFactory-1.7.1.dist-info/LICENCE.md`

 * *Files identical despite different names*

## Comparing `EmberFactory-1.7.0.dist-info/METADATA` & `EmberFactory-1.7.1.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: EmberFactory
-Version: 1.7.0
+Version: 1.7.1
 Summary: Software to (re)produce burning ember diagrams of the style used in IPCC reports.
 Home-page: https://framagit.org/marbaix/ember-factory
 Author: Philippe Marbaix
 Author-email: philippe.marbaix@uclouvain.be
 Maintainer: Philippe Marbaix
 Maintainer-email: philippe.marbaix@uclouvain.be
 License: GNU General Public License 3 or later
```

## Comparing `EmberFactory-1.7.0.dist-info/RECORD` & `EmberFactory-1.7.1.dist-info/RECORD`

 * *Files 17% similar despite different names*

```diff
@@ -1,15 +1,15 @@
-embermaker/__init__.py,sha256=ZKj0X3okn4mK4HiX_1UKKuGOzcIskftLiHEMJogbUYY,22
-embermaker/ember.py,sha256=_JZ00ICVlvXm9ZpyWQAp6ba5Qf8gamUGZjMTVBcaS34,65271
+embermaker/__init__.py,sha256=t5fxYgsky1Zd4XKxuqdV_dDlnVKVgmosmBX1AjwcKE0,22
+embermaker/ember.py,sha256=OdG56TEMMBWlHhcmWWh2PROaB4NRsgeBcn-FfHC918Q,65304
 embermaker/helpers.py,sha256=mEwNngyAE6icTpirLwbW-aqyhFLUH5yb7QadXJAL6Fk,15519
-embermaker/makember.py,sha256=Turn6RuMw2qGFB4wLZrIC9vMhBu8SIMf4j0_vzLJTwI,35717
+embermaker/makember.py,sha256=QWkjj6mPLS-LcT5ard-6b0cKU_N-18M6DIhWYq3U1Zs,36204
 embermaker/parameters.py,sha256=BTZE6lShfaOGPIqox9jlYX9G2Yp9t3LO2rTlCm74mAY,10638
 embermaker/defaults/colors.xlsx,sha256=1lkeiqCE96OT4yew5cs6Jp9OlghwDbwATve5Drq40yA,13459
 embermaker/defaults/paramdefs.md,sha256=OmfwWS4wmzAHtDoKHsN5cQqF2Yeoef-radynlBRHQPQ,24982
-emberweb/__init__.py,sha256=EPk0uhmc8qFs80UX2dPknGFFsPDm4xENDsji8vH8JE0,4917
+emberweb/__init__.py,sha256=3biSqumo56mdSsdx92vk7OsVZy_n4upvj3NQAqVO4Rw,4917
 emberweb/control.py,sha256=JEaprLwMRUqAu8Rk4A2h7EJhE_biQv7UkcHcvOBDVdI,8941
 emberweb/helpers.py,sha256=4t2Dxcb1ZJp7lbm7h_K8e3msRE3dvReyyLBFlHWrQvA,3710
 emberweb/sitenav.py,sha256=ogkD8-gcKPeVcAji5mHPgnUnaOwCVd7gBy__EQj7yaY,3369
 emberweb/doc/examples.md,sha256=WZJ0NXcBdm7P4u6yuNpi0UNbVMaZ6sZ_wJmCMIS5AK8,2767
 emberweb/doc/parameters.md,sha256=2JigHmGvrbBWDeWajQUYmotffKY09FtgUVAQCvwqKMY,6700
 emberweb/doc/tutorial.md,sha256=0DIRC3tluOoM5JeUjbgCSgr6x_G33OF9GjtdG6dwxec,13196
 emberweb/doc/examples/AR5-SR15-RFCs.xlsx,sha256=yR15xh3tbzJqDn0yvj1V5HSlnsydr5yiIXykkoOWjog,23105
@@ -29,15 +29,15 @@
 emberweb/static/emberfactory.png,sha256=3ddTblU3bU02zJKeZ3X69pNf5PKLAXEmmem9wEDjBCE,14739
 emberweb/static/emberweb.css,sha256=SRp6gA2nZxj5Qe4pmXGB4O9IvLjkDU92idIZq5dQLoA,5615
 emberweb/static/favicon.ico,sha256=8vfkajqtT-m0wvvCFBVUXp-eOudOfkfJzl-zCZboV8o,1150
 emberweb/static/icons.svg,sha256=SKsByiMRicLiAGfTHlw4S7n8KYCSVo1VDhLobi4qd0Q,1471
 emberweb/templates/base.html,sha256=mEgl4_E7eHBfPLZe0M2iBRzS9Q2XSKOAG8S3HcLq_JI,3771
 emberweb/templates/emberweb/doc.html,sha256=E8ZebZMItAPKmfqsOh1wjn2xXfB3AQA7ccRYCA3EzPk,212
 emberweb/templates/emberweb/error.html,sha256=y5O2HdMCXZOYAIeJzfPk2tDf6JBJEesvzC594VCu0-M,527
-emberweb/templates/emberweb/more.html,sha256=RLxplqiNYS9dMMzoQrm0dGhPgbLebwsIdR0wRlEEkxQ,5155
+emberweb/templates/emberweb/more.html,sha256=W996joKvbORc5BXbsKhYFjafZcKU_1suuOYpFDRl0l0,5584
 emberweb/templates/emberweb/result.html,sha256=oImgGU10VWTauYO7ozzv4ZO-0a4x7noIGkAvu_q2EOc,2477
 emberweb/templates/emberweb/start.html,sha256=EgYaGXMfwAwr5Tf6NH2pfsqKqwXnhP76hQjDRe1SiJ4,4224
-EmberFactory-1.7.0.dist-info/LICENCE.md,sha256=Jnuo6qKIIBvAcQywengiBnmxRPhzoXCwx9xKLlWhKZk,878
-EmberFactory-1.7.0.dist-info/METADATA,sha256=H8FDKOoyzm_YIPj3fhEHq7BfgDwv0wTLfHdD5exlGUo,4886
-EmberFactory-1.7.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-EmberFactory-1.7.0.dist-info/top_level.txt,sha256=IbK3kTxKFkAlt9kp0XG_cmwQsrpRtuy0ATtgYRZTpww,20
-EmberFactory-1.7.0.dist-info/RECORD,,
+EmberFactory-1.7.1.dist-info/LICENCE.md,sha256=Jnuo6qKIIBvAcQywengiBnmxRPhzoXCwx9xKLlWhKZk,878
+EmberFactory-1.7.1.dist-info/METADATA,sha256=qNdvEZgMogu68Jyd_MRONJgsrStmpT6GS336b8gsBas,4886
+EmberFactory-1.7.1.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+EmberFactory-1.7.1.dist-info/top_level.txt,sha256=IbK3kTxKFkAlt9kp0XG_cmwQsrpRtuy0ATtgYRZTpww,20
+EmberFactory-1.7.1.dist-info/RECORD,,
```

