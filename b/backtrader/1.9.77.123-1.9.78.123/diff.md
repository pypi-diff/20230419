# Comparing `tmp/backtrader-1.9.77.123-py2.py3-none-any.whl.zip` & `tmp/backtrader-1.9.78.123-py2.py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,8 +1,8 @@
-Zip file size: 419521 bytes, number of entries: 178
+Zip file size: 419517 bytes, number of entries: 178
 -rw-rw-rw-  2.0 fat     2578 b- defN 23-Apr-16 20:00 backtrader/__init__.py
 -rw-rw-rw-  2.0 fat    14440 b- defN 23-Apr-16 20:00 backtrader/analyzer.py
 -rw-rw-rw-  2.0 fat     5504 b- defN 23-Apr-16 20:00 backtrader/broker.py
 -rw-rw-rw-  2.0 fat    63600 b- defN 23-Apr-16 20:00 backtrader/cerebro.py
 -rw-rw-rw-  2.0 fat    11691 b- defN 23-Apr-16 20:00 backtrader/comminfo.py
 -rw-rw-rw-  2.0 fat     6498 b- defN 23-Apr-16 20:00 backtrader/dataseries.py
 -rw-rw-rw-  2.0 fat     1890 b- defN 23-Apr-16 20:00 backtrader/errors.py
@@ -14,26 +14,26 @@
 -rw-rw-rw-  2.0 fat    26583 b- defN 23-Apr-16 20:00 backtrader/linebuffer.py
 -rw-rw-rw-  2.0 fat    15838 b- defN 23-Apr-16 20:00 backtrader/lineiterator.py
 -rw-rw-rw-  2.0 fat    10689 b- defN 23-Apr-16 20:00 backtrader/lineroot.py
 -rw-rw-rw-  2.0 fat    22007 b- defN 23-Apr-16 20:00 backtrader/lineseries.py
 -rw-rw-rw-  2.0 fat     1923 b- defN 23-Apr-16 20:00 backtrader/mathsupport.py
 -rw-rw-rw-  2.0 fat    11160 b- defN 23-Apr-16 20:00 backtrader/metabase.py
 -rw-rw-rw-  2.0 fat     2274 b- defN 23-Apr-16 20:00 backtrader/observer.py
--rw-rw-rw-  2.0 fat    21866 b- defN 23-Apr-16 20:00 backtrader/order.py
+-rw-rw-rw-  2.0 fat    21937 b- defN 23-Apr-19 14:09 backtrader/order.py
 -rw-rw-rw-  2.0 fat     7445 b- defN 23-Apr-16 20:00 backtrader/position.py
 -rw-rw-rw-  2.0 fat    26141 b- defN 23-Apr-16 20:00 backtrader/resamplerfilter.py
 -rw-rw-rw-  2.0 fat     1894 b- defN 23-Apr-16 20:00 backtrader/signal.py
 -rw-rw-rw-  2.0 fat     2977 b- defN 23-Apr-16 20:00 backtrader/sizer.py
 -rw-rw-rw-  2.0 fat     3135 b- defN 23-Apr-16 20:00 backtrader/store.py
 -rw-rw-rw-  2.0 fat    61718 b- defN 23-Apr-16 20:00 backtrader/strategy.py
 -rw-rw-rw-  2.0 fat     8950 b- defN 23-Apr-16 20:00 backtrader/talib.py
 -rw-rw-rw-  2.0 fat     7585 b- defN 23-Apr-16 20:00 backtrader/timer.py
 -rw-rw-rw-  2.0 fat    11662 b- defN 23-Apr-16 20:00 backtrader/trade.py
 -rw-rw-rw-  2.0 fat     9893 b- defN 23-Apr-16 20:00 backtrader/tradingcal.py
--rw-rw-rw-  2.0 fat     1110 b- defN 23-Apr-16 20:00 backtrader/version.py
+-rw-rw-rw-  2.0 fat     1110 b- defN 23-Apr-19 14:10 backtrader/version.py
 -rw-rw-rw-  2.0 fat     7741 b- defN 23-Apr-16 20:00 backtrader/writer.py
 -rw-rw-rw-  2.0 fat     1527 b- defN 23-Apr-16 20:00 backtrader/analyzers/__init__.py
 -rw-rw-rw-  2.0 fat     2818 b- defN 23-Apr-16 20:00 backtrader/analyzers/annualreturn.py
 -rw-rw-rw-  2.0 fat     3821 b- defN 23-Apr-16 20:00 backtrader/analyzers/calmar.py
 -rw-rw-rw-  2.0 fat     6513 b- defN 23-Apr-16 20:00 backtrader/analyzers/drawdown.py
 -rw-rw-rw-  2.0 fat     2397 b- defN 23-Apr-16 20:00 backtrader/analyzers/leverage.py
 -rw-rw-rw-  2.0 fat     5020 b- defN 23-Apr-16 20:00 backtrader/analyzers/logreturnsrolling.py
@@ -166,15 +166,15 @@
 -rw-rw-rw-  2.0 fat     1145 b- defN 23-Apr-16 20:00 backtrader/utils/__init__.py
 -rw-rw-rw-  2.0 fat     3787 b- defN 23-Apr-16 20:00 backtrader/utils/autodict.py
 -rw-rw-rw-  2.0 fat     1319 b- defN 23-Apr-16 20:00 backtrader/utils/date.py
 -rw-rw-rw-  2.0 fat     6972 b- defN 23-Apr-16 20:00 backtrader/utils/dateintern.py
 -rw-rw-rw-  2.0 fat     1588 b- defN 20-May-28 03:17 backtrader/utils/flushfile.py
 -rw-rw-rw-  2.0 fat     2091 b- defN 23-Apr-16 20:00 backtrader/utils/ordereddefaultdict.py
 -rw-rw-rw-  2.0 fat     3409 b- defN 23-Apr-16 20:00 backtrader/utils/py3.py
--rw-rw-rw-  2.0 fat     1114 b- defN 23-Apr-16 20:03 backtrader-1.9.77.123.data/scripts/bt-run.py
--rw-rw-rw-  2.0 fat    35121 b- defN 23-Apr-16 20:03 backtrader-1.9.77.123.dist-info/LICENSE
--rw-rw-rw-  2.0 fat     6755 b- defN 23-Apr-16 20:03 backtrader-1.9.77.123.dist-info/METADATA
--rw-rw-rw-  2.0 fat      110 b- defN 23-Apr-16 20:03 backtrader-1.9.77.123.dist-info/WHEEL
--rw-rw-rw-  2.0 fat       49 b- defN 23-Apr-16 20:03 backtrader-1.9.77.123.dist-info/entry_points.txt
--rw-rw-rw-  2.0 fat       11 b- defN 23-Apr-16 20:03 backtrader-1.9.77.123.dist-info/top_level.txt
-?rw-rw-r--  2.0 fat    15398 b- defN 23-Apr-16 20:03 backtrader-1.9.77.123.dist-info/RECORD
-178 files, 1272926 bytes uncompressed, 395411 bytes compressed:  68.9%
+-rw-rw-rw-  2.0 fat     1114 b- defN 23-Apr-19 14:13 backtrader-1.9.78.123.data/scripts/bt-run.py
+-rw-rw-rw-  2.0 fat    35121 b- defN 23-Apr-19 14:13 backtrader-1.9.78.123.dist-info/LICENSE
+-rw-rw-rw-  2.0 fat     6755 b- defN 23-Apr-19 14:13 backtrader-1.9.78.123.dist-info/METADATA
+-rw-rw-rw-  2.0 fat      110 b- defN 23-Apr-19 14:13 backtrader-1.9.78.123.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat       49 b- defN 23-Apr-19 14:13 backtrader-1.9.78.123.dist-info/entry_points.txt
+-rw-rw-rw-  2.0 fat       11 b- defN 23-Apr-19 14:13 backtrader-1.9.78.123.dist-info/top_level.txt
+?rw-rw-r--  2.0 fat    15398 b- defN 23-Apr-19 14:13 backtrader-1.9.78.123.dist-info/RECORD
+178 files, 1272997 bytes uncompressed, 395407 bytes compressed:  68.9%
```

## zipnote {}

```diff
@@ -507,29 +507,29 @@
 
 Filename: backtrader/utils/ordereddefaultdict.py
 Comment: 
 
 Filename: backtrader/utils/py3.py
 Comment: 
 
-Filename: backtrader-1.9.77.123.data/scripts/bt-run.py
+Filename: backtrader-1.9.78.123.data/scripts/bt-run.py
 Comment: 
 
-Filename: backtrader-1.9.77.123.dist-info/LICENSE
+Filename: backtrader-1.9.78.123.dist-info/LICENSE
 Comment: 
 
-Filename: backtrader-1.9.77.123.dist-info/METADATA
+Filename: backtrader-1.9.78.123.dist-info/METADATA
 Comment: 
 
-Filename: backtrader-1.9.77.123.dist-info/WHEEL
+Filename: backtrader-1.9.78.123.dist-info/WHEEL
 Comment: 
 
-Filename: backtrader-1.9.77.123.dist-info/entry_points.txt
+Filename: backtrader-1.9.78.123.dist-info/entry_points.txt
 Comment: 
 
-Filename: backtrader-1.9.77.123.dist-info/top_level.txt
+Filename: backtrader-1.9.78.123.dist-info/top_level.txt
 Comment: 
 
-Filename: backtrader-1.9.77.123.dist-info/RECORD
+Filename: backtrader-1.9.78.123.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## backtrader/order.py

```diff
@@ -315,19 +315,16 @@
             self.exectype = Order.Market
 
         if not self.isbuy():
             self.size = -self.size
 
         # Set a reference price if price is not set using
         # the close price
-        pclose = self.data.close[0] if not self.simulated else self.price
-        if not self.price and not self.pricelimit:
-            price = pclose
-        else:
-            price = self.price
+        pclose = self.data.close[0] if not self.p.simulated else self.price
+        price = pclose if not self.price and not self.pricelimit else self.price
 
         dcreated = self.data.datetime[0] if not self.p.simulated else 0.0
         self.created = OrderData(dt=dcreated,
                                  size=self.size,
                                  price=price,
                                  pricelimit=self.pricelimit,
                                  pclose=pclose,
@@ -473,27 +470,30 @@
 
     def reject(self, broker=None):
         '''Marks an order as rejected'''
         if self.status == Order.Rejected:
             return False
 
         self.status = Order.Rejected
-        self.executed.dt = self.data.datetime[0]
         self.broker = broker
+        if not self.p.simulated:
+            self.executed.dt = self.data.datetime[0]
         return True
 
     def cancel(self):
         '''Marks an order as cancelled'''
         self.status = Order.Canceled
-        self.executed.dt = self.data.datetime[0]
+        if not self.p.simulated:
+            self.executed.dt = self.data.datetime[0]
 
     def margin(self):
         '''Marks an order as having met a margin call'''
         self.status = Order.Margin
-        self.executed.dt = self.data.datetime[0]
+        if not self.p.simulated:
+            self.executed.dt = self.data.datetime[0]
 
     def completed(self):
         '''Marks an order as completely filled'''
         self.status = self.Completed
 
     def partial(self):
         '''Marks an order as partially filled'''
```

## backtrader/version.py

```diff
@@ -18,10 +18,10 @@
 # along with this program.  If not, see <http://www.gnu.org/licenses/>.
 #
 ###############################################################################
 from __future__ import (absolute_import, division, print_function,
                         unicode_literals)
 
 
-__version__ = '1.9.77.123'
+__version__ = '1.9.78.123'
 
 __btversion__ = tuple(int(x) for x in __version__.split('.'))
```

## Comparing `backtrader-1.9.77.123.data/scripts/bt-run.py` & `backtrader-1.9.78.123.data/scripts/bt-run.py`

 * *Files identical despite different names*

## Comparing `backtrader-1.9.77.123.dist-info/LICENSE` & `backtrader-1.9.78.123.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `backtrader-1.9.77.123.dist-info/METADATA` & `backtrader-1.9.78.123.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,13 +1,13 @@
 Metadata-Version: 2.1
 Name: backtrader
-Version: 1.9.77.123
+Version: 1.9.78.123
 Summary: BackTesting Engine
 Home-page: https://github.com/mementum/backtrader
-Download-URL: https://github.com/mementum/backtrader/tarball/1.9.77.123
+Download-URL: https://github.com/mementum/backtrader/tarball/1.9.78.123
 Author: Daniel Rodriguez
 Author-email: danjrod@gmail.com
 License: GPLv3+
 Keywords: trading,development
 Classifier: Development Status :: 5 - Production/Stable
 Classifier: Intended Audience :: Developers
 Classifier: Intended Audience :: Financial and Insurance Industry
```

## Comparing `backtrader-1.9.77.123.dist-info/RECORD` & `backtrader-1.9.78.123.dist-info/RECORD`

 * *Files 2% similar despite different names*

```diff
@@ -13,26 +13,26 @@
 backtrader/linebuffer.py,sha256=Msu8bU6eQVC_uwIW_PqWCdceOnsSu0JcWj6yth-fTqE,26583
 backtrader/lineiterator.py,sha256=T9ZBhmZY4ps7oJGrb46Gi02Xy0ltlPftRvToi3RIQLU,15838
 backtrader/lineroot.py,sha256=JUmTKhgaZ8GzakYFicpv_Qiafi04E7C5KeVGjK1ZqFs,10689
 backtrader/lineseries.py,sha256=3WIDwcAD6qLiaRfjL76mwSztmDsL1Z7pIZuCj3rfMC4,22007
 backtrader/mathsupport.py,sha256=jc2fTjaf3dWzQ4ZV-ypvVPrHnKnoJbrWLHd-pIhdQ2w,1923
 backtrader/metabase.py,sha256=3TkPMWkS3fg-pRFeCmxh81tqC1nS613aa2M0iRQH-MA,11160
 backtrader/observer.py,sha256=o2-HnrP5pb918CpHTznskCBe1P8DnB_tdjjhqDCmXg4,2274
-backtrader/order.py,sha256=3Sy5Ru8lQ1jziM7KbmSnGt9_ViuY0ucZtm1VibMEjPA,21866
+backtrader/order.py,sha256=saiCfenEDSXpMrxkRVJ5oJuLY4m2gaAZMQ3uaOZP_10,21937
 backtrader/position.py,sha256=odBPNNkWVRHZnNY03SqP0TSlhP1I8xoCMHJCuS2rH7E,7445
 backtrader/resamplerfilter.py,sha256=z0hqTqbj4nj7gWQPR9qtBk9Iqz8wcqgF3iqL04cMJdA,26141
 backtrader/signal.py,sha256=2JIr-igZ-W70QEfv3zqAsLkI3tVRjHZ9TwkK8DtKs_M,1894
 backtrader/sizer.py,sha256=7uf6kzcoD5ko4Rjo9L95e33rq8Dl8t5FE2Rd4FOQxF4,2977
 backtrader/store.py,sha256=vg4Fv8ltjHy_jZuIAWhKPVUb2VPvdVTdpm8ENv0Pxjo,3135
 backtrader/strategy.py,sha256=ilbrwdell8QfIL012DsH_ekNpg31C-RrP8O6uFqyHRg,61718
 backtrader/talib.py,sha256=0TnyB1RkwyE0N3Af2jzIeqP-wqyErlMVz1M2-TNWNHw,8950
 backtrader/timer.py,sha256=kl9MKjWufhiyw6ndpMTT5XJIyW-cp8MI-QPm5NrjdgU,7585
 backtrader/trade.py,sha256=7f5CM0_2Q6bPpZi8j1qRZbrnZLcT0cpxr2oiiYWeb9c,11662
 backtrader/tradingcal.py,sha256=b1izVsugrNaWHIkuERpjYXDvxbG2c4gm1jq7M5D0_PU,9893
-backtrader/version.py,sha256=Jcu2cJ9xR7xatw5M1A-Q1InLl1gNtjidkr3qtGAotuo,1110
+backtrader/version.py,sha256=xdzgzzR92xxXIE4dyVkyS0B8pbENoMpat61adXNxSbk,1110
 backtrader/writer.py,sha256=SGrqtTWFnEdIVHrV7F2cr9CdKRjdPJhIY13Gppm6B50,7741
 backtrader/analyzers/__init__.py,sha256=WhP7CQ5-syHOjOEFalskUxhyMKtFVTyuE77s-WqdubU,1527
 backtrader/analyzers/annualreturn.py,sha256=poHmH1j_lTyLXmV3wioemtNtaVREALf9ESKwTitc_Y8,2818
 backtrader/analyzers/calmar.py,sha256=kuNTIGqR0pMy03bwE9F8mrM1TMrExEX5uqVNw9xGY6c,3821
 backtrader/analyzers/drawdown.py,sha256=QVqABTCgSOU15Us2OZnovionqH5L3ljDuE43ZYwjeRc,6513
 backtrader/analyzers/leverage.py,sha256=Lf74_Dwoy1DPLIXPu3caNdRsaITz0SqfZe79e8ErB2U,2397
 backtrader/analyzers/logreturnsrolling.py,sha256=jSJ9VznacZljOyb4t4UW4ab0LABM_-Wa3QKWyx6GT7w,5020
@@ -165,14 +165,14 @@
 backtrader/utils/__init__.py,sha256=TYPfz-M8SfXCQ2wieR-3Qz6jSvdVa09ONRvhftaG5EE,1145
 backtrader/utils/autodict.py,sha256=OKQCZfUkjJ1VFwIPDQ5PX7J1Fsi-_7SHzk6qW5Jvv2o,3787
 backtrader/utils/date.py,sha256=ibOaa7Y2ckvIpdjcRpDnm1odalnnh_UZpPYB2fKdHGY,1319
 backtrader/utils/dateintern.py,sha256=BIT4fdulFC-L5DeooTrL1I1fCXO7VqwbvrL4izIRXBE,6972
 backtrader/utils/flushfile.py,sha256=ekrNdFCs0j4HwRRxho-Fnl0XZBCrpd0uHyq02kV2wjE,1588
 backtrader/utils/ordereddefaultdict.py,sha256=8y7FDnqI1mTcr1NwVfgqsaK-42XwC76Mu_iYRVvLmLM,2091
 backtrader/utils/py3.py,sha256=AcIU2yJGqwiu_v0wOqhf95NnXpI-4aYPpzpyOFG2FbA,3409
-backtrader-1.9.77.123.data/scripts/bt-run.py,sha256=M9og4yLhImdT1OmtArP919VmpExpmgCwxK7_-nh1drE,1114
-backtrader-1.9.77.123.dist-info/LICENSE,sha256=4cCtcomD2KVzNeUs8QZPGv_R1FQXPYzr0-2LSnK0hwQ,35121
-backtrader-1.9.77.123.dist-info/METADATA,sha256=MggT2QxVY235Vcul44XoXlpgvRvN76jqnEARCoVyGMQ,6755
-backtrader-1.9.77.123.dist-info/WHEEL,sha256=bb2Ot9scclHKMOLDEHY6B2sicWOgugjFKaJsT7vwMQo,110
-backtrader-1.9.77.123.dist-info/entry_points.txt,sha256=GaVeeLLzR-C5Awt7C9rVn75IMEtBZ7Zk5PMCwt76Rvs,49
-backtrader-1.9.77.123.dist-info/top_level.txt,sha256=VpSC5MJzXVKdKPBeBCoM1rvYa-sYFwvIRP9zmD-dGfU,11
-backtrader-1.9.77.123.dist-info/RECORD,,
+backtrader-1.9.78.123.data/scripts/bt-run.py,sha256=M9og4yLhImdT1OmtArP919VmpExpmgCwxK7_-nh1drE,1114
+backtrader-1.9.78.123.dist-info/LICENSE,sha256=4cCtcomD2KVzNeUs8QZPGv_R1FQXPYzr0-2LSnK0hwQ,35121
+backtrader-1.9.78.123.dist-info/METADATA,sha256=I3yEDqmo3Itd3FlSd8JXqlyYyl79nRUNEmyR0VoVRcs,6755
+backtrader-1.9.78.123.dist-info/WHEEL,sha256=bb2Ot9scclHKMOLDEHY6B2sicWOgugjFKaJsT7vwMQo,110
+backtrader-1.9.78.123.dist-info/entry_points.txt,sha256=GaVeeLLzR-C5Awt7C9rVn75IMEtBZ7Zk5PMCwt76Rvs,49
+backtrader-1.9.78.123.dist-info/top_level.txt,sha256=VpSC5MJzXVKdKPBeBCoM1rvYa-sYFwvIRP9zmD-dGfU,11
+backtrader-1.9.78.123.dist-info/RECORD,,
```

