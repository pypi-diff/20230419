# Comparing `tmp/populse_mia-2.2.2.tar.gz` & `tmp/populse_mia-2.3.1.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "populse_mia-2.2.2.tar", last modified: Fri Sep 23 13:32:07 2022, max compression
+gzip compressed data, was "populse_mia-2.3.1.tar", last modified: Wed Apr 19 14:34:41 2023, max compression
```

## Comparing `populse_mia-2.2.2.tar` & `populse_mia-2.3.1.tar`

### file list

```diff
@@ -1,108 +1,107 @@
-drwxrwxr-x   0 econdami  (1000) econdami  (1000)        0 2022-09-23 13:32:07.988047 populse_mia-2.2.2/
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    21778 2022-09-23 08:03:06.000000 populse_mia-2.2.2/LICENSE
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     1139 2022-09-23 13:32:07.988047 populse_mia-2.2.2/PKG-INFO
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     4462 2022-09-23 13:23:17.000000 populse_mia-2.2.2/README.md
--rw-rw-r--   0 econdami  (1000) econdami  (1000)      174 2022-09-23 08:03:07.000000 populse_mia-2.2.2/pyproject.toml
-drwxrwxr-x   0 econdami  (1000) econdami  (1000)        0 2022-09-23 13:32:07.955047 populse_mia-2.2.2/python/
-drwxrwxr-x   0 econdami  (1000) econdami  (1000)        0 2022-09-23 13:32:07.957046 populse_mia-2.2.2/python/populse_mia/
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    11367 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/#install_mia.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     2277 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/__init__.py
--rwxrwxr-x   0 econdami  (1000) econdami  (1000)      614 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/__main__.py
-drwxrwxr-x   0 econdami  (1000) econdami  (1000)        0 2022-09-23 13:32:07.960046 populse_mia-2.2.2/python/populse_mia/data_manager/
--rw-rw-r--   0 econdami  (1000) econdami  (1000)      603 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/data_manager/__init__.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    25330 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/data_manager/data_history_inspect.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    20159 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/data_manager/data_loader.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     8841 2022-09-23 10:51:15.000000 populse_mia-2.2.2/python/populse_mia/data_manager/database_mia.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     4270 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/data_manager/filter.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    61697 2022-09-23 10:51:15.000000 populse_mia-2.2.2/python/populse_mia/data_manager/project.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     4564 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/data_manager/project_properties.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     4108 2022-09-23 13:28:17.000000 populse_mia-2.2.2/python/populse_mia/info.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    55536 2022-09-23 10:51:15.000000 populse_mia-2.2.2/python/populse_mia/main.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    50714 2022-09-23 10:51:15.000000 populse_mia-2.2.2/python/populse_mia/software_properties.py
-drwxrwxr-x   0 econdami  (1000) econdami  (1000)        0 2022-09-23 13:32:07.969046 populse_mia-2.2.2/python/populse_mia/sources_images/
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     1161 2022-09-19 13:51:45.000000 populse_mia-2.2.2/python/populse_mia/sources_images/B-W LINEAR.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    46917 2022-09-19 13:51:45.000000 populse_mia-2.2.2/python/populse_mia/sources_images/BLANK_ICON.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     1638 2022-09-19 13:51:45.000000 populse_mia-2.2.2/python/populse_mia/sources_images/Blue-White.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     7465 2022-09-19 13:27:18.000000 populse_mia-2.2.2/python/populse_mia/sources_images/Blue.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     1410 2022-09-19 13:51:45.000000 populse_mia-2.2.2/python/populse_mia/sources_images/Green-White-linear.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    13099 2022-09-19 13:27:18.000000 populse_mia-2.2.2/python/populse_mia/sources_images/LogoIRMaGe.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)   464934 2022-09-19 13:27:16.000000 populse_mia-2.2.2/python/populse_mia/sources_images/Logo_populse_mia_HR.jpeg
--rw-rw-r--   0 econdami  (1000) econdami  (1000)   107780 2022-09-19 13:27:16.000000 populse_mia-2.2.2/python/populse_mia/sources_images/Logo_populse_mia_LR.jpeg
--rw-rw-r--   0 econdami  (1000) econdami  (1000)   287794 2022-09-19 14:03:32.000000 populse_mia-2.2.2/python/populse_mia/sources_images/Logo_populse_square.jpg
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    21842 2022-09-19 13:27:18.000000 populse_mia-2.2.2/python/populse_mia/sources_images/Protocol_record.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     1570 2022-09-19 13:51:45.000000 populse_mia-2.2.2/python/populse_mia/sources_images/RAINBOW.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     1481 2022-09-19 13:51:45.000000 populse_mia-2.2.2/python/populse_mia/sources_images/RED TEMPERATURE.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    18808 2022-09-19 13:27:18.000000 populse_mia-2.2.2/python/populse_mia/sources_images/Tool_Application.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     1740 2022-09-19 13:51:45.000000 populse_mia-2.2.2/python/populse_mia/sources_images/Yellow-Red-White-Blue-Green.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     1369 2022-09-19 13:51:45.000000 populse_mia-2.2.2/python/populse_mia/sources_images/Yellow-red.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)        0 2022-09-19 13:27:16.000000 populse_mia-2.2.2/python/populse_mia/sources_images/__init__.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     1497 2022-09-19 13:51:45.000000 populse_mia-2.2.2/python/populse_mia/sources_images/blue-red-bright-dark.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    58061 2022-09-19 13:27:16.000000 populse_mia-2.2.2/python/populse_mia/sources_images/brain_mri.jpeg
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     3314 2022-09-19 13:51:45.000000 populse_mia-2.2.2/python/populse_mia/sources_images/check.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    22764 2022-09-19 13:27:18.000000 populse_mia-2.2.2/python/populse_mia/sources_images/create.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    22669 2022-09-19 13:27:18.000000 populse_mia-2.2.2/python/populse_mia/sources_images/exit.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     7577 2022-09-19 13:51:45.000000 populse_mia-2.2.2/python/populse_mia/sources_images/export.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     2860 2022-09-19 13:51:45.000000 populse_mia-2.2.2/python/populse_mia/sources_images/garbage_collect.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)      339 2022-09-19 13:27:18.000000 populse_mia-2.2.2/python/populse_mia/sources_images/gray_cross.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     1496 2022-09-19 13:27:18.000000 populse_mia-2.2.2/python/populse_mia/sources_images/green_plus.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    25818 2022-09-19 13:27:18.000000 populse_mia-2.2.2/python/populse_mia/sources_images/green_v.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    82685 2022-09-19 13:27:18.000000 populse_mia-2.2.2/python/populse_mia/sources_images/icons-403.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     1404 2022-09-19 13:51:45.000000 populse_mia-2.2.2/python/populse_mia/sources_images/init32.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    17211 2022-09-19 13:27:18.000000 populse_mia-2.2.2/python/populse_mia/sources_images/open.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    10406 2022-09-19 13:51:45.000000 populse_mia-2.2.2/python/populse_mia/sources_images/pause.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     6888 2022-09-19 13:51:45.000000 populse_mia-2.2.2/python/populse_mia/sources_images/play.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    53974 2022-09-19 13:27:18.000000 populse_mia-2.2.2/python/populse_mia/sources_images/plot.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    26889 2022-09-19 13:27:18.000000 populse_mia-2.2.2/python/populse_mia/sources_images/pref.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     5173 2022-09-19 13:27:18.000000 populse_mia-2.2.2/python/populse_mia/sources_images/red_cross.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)      866 2022-09-19 13:51:45.000000 populse_mia-2.2.2/python/populse_mia/sources_images/red_cross32.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)      794 2022-09-19 13:27:18.000000 populse_mia-2.2.2/python/populse_mia/sources_images/red_minus.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     2840 2022-09-19 13:51:45.000000 populse_mia-2.2.2/python/populse_mia/sources_images/run32.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)      910 2022-09-19 13:51:45.000000 populse_mia-2.2.2/python/populse_mia/sources_images/stop32.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     9094 2022-09-19 13:27:18.000000 populse_mia-2.2.2/python/populse_mia/sources_images/zoom.png
--rw-rw-r--   0 econdami  (1000) econdami  (1000)   385988 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/test.py
-drwxrwxr-x   0 econdami  (1000) econdami  (1000)        0 2022-09-23 13:32:07.970046 populse_mia-2.2.2/python/populse_mia/user_interface/
--rw-rw-r--   0 econdami  (1000) econdami  (1000)      639 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/user_interface/__init__.py
-drwxrwxr-x   0 econdami  (1000) econdami  (1000)        0 2022-09-23 13:32:07.971047 populse_mia-2.2.2/python/populse_mia/user_interface/data_browser/
--rw-rw-r--   0 econdami  (1000) econdami  (1000)      646 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/user_interface/data_browser/__init__.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    25212 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/user_interface/data_browser/advanced_search.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    20948 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/user_interface/data_browser/count_table.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)   110152 2022-09-23 10:51:15.000000 populse_mia-2.2.2/python/populse_mia/user_interface/data_browser/data_browser.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    37702 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/user_interface/data_browser/mini_viewer.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     7173 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/user_interface/data_browser/modify_table.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     3356 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/user_interface/data_browser/rapid_search.py
-drwxrwxr-x   0 econdami  (1000) econdami  (1000)        0 2022-09-23 13:32:07.972046 populse_mia-2.2.2/python/populse_mia/user_interface/data_viewer/
--rw-rw-r--   0 econdami  (1000) econdami  (1000)        0 2022-09-19 13:27:16.000000 populse_mia-2.2.2/python/populse_mia/user_interface/data_viewer/__init__.py
-drwxrwxr-x   0 econdami  (1000) econdami  (1000)        0 2022-09-23 13:32:07.972046 populse_mia-2.2.2/python/populse_mia/user_interface/data_viewer/anatomist/
--rw-rw-r--   0 econdami  (1000) econdami  (1000)       62 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/user_interface/data_viewer/anatomist/__init__.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     4348 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/user_interface/data_viewer/anatomist/mia_anatomist.py
-drwxrwxr-x   0 econdami  (1000) econdami  (1000)        0 2022-09-23 13:32:07.986046 populse_mia-2.2.2/python/populse_mia/user_interface/data_viewer/anatomist_2/
--rw-rw-r--   0 econdami  (1000) econdami  (1000)       62 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/user_interface/data_viewer/anatomist_2/__init__.py
--rwxrwxr-x   0 econdami  (1000) econdami  (1000)    54727 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/user_interface/data_viewer/anatomist_2/anasimpleviewer2.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    12404 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/user_interface/data_viewer/anatomist_2/mia_anatomist.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)  5239860 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/user_interface/data_viewer/anatomist_2/resources.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)  2492915 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/user_interface/data_viewer/anatomist_2/resources_snd_window.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     6629 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/user_interface/data_viewer/anatomist_2/snd_window.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     2651 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/user_interface/data_viewer/data_viewer.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     5721 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/user_interface/data_viewer/data_viewer_tab.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    69962 2022-09-23 10:51:15.000000 populse_mia-2.2.2/python/populse_mia/user_interface/main_window.py
-drwxrwxr-x   0 econdami  (1000) econdami  (1000)        0 2022-09-23 13:32:07.988047 populse_mia-2.2.2/python/populse_mia/user_interface/pipeline_manager/
--rw-rw-r--   0 econdami  (1000) econdami  (1000)      680 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/user_interface/pipeline_manager/__init__.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    18341 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/user_interface/pipeline_manager/iteration_table.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    57136 2022-09-23 10:51:15.000000 populse_mia-2.2.2/python/populse_mia/user_interface/pipeline_manager/node_controller.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    79904 2022-09-23 10:51:15.000000 populse_mia-2.2.2/python/populse_mia/user_interface/pipeline_manager/pipeline_editor.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)   133115 2022-09-23 10:51:15.000000 populse_mia-2.2.2/python/populse_mia/user_interface/pipeline_manager/pipeline_manager_tab.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)   106797 2022-09-23 10:51:15.000000 populse_mia-2.2.2/python/populse_mia/user_interface/pipeline_manager/process_library.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    27159 2022-09-23 10:51:15.000000 populse_mia-2.2.2/python/populse_mia/user_interface/pipeline_manager/process_mia.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    20026 2022-09-23 10:51:15.000000 populse_mia-2.2.2/python/populse_mia/user_interface/pipeline_manager/type_editors.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)   212761 2022-09-23 10:51:15.000000 populse_mia-2.2.2/python/populse_mia/user_interface/pop_ups.py
-drwxrwxr-x   0 econdami  (1000) econdami  (1000)        0 2022-09-23 13:32:07.988047 populse_mia-2.2.2/python/populse_mia/utils/
--rw-rw-r--   0 econdami  (1000) econdami  (1000)      519 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/utils/__init__.py
--rw-rw-r--   0 econdami  (1000) econdami  (1000)    11158 2022-09-23 08:03:07.000000 populse_mia-2.2.2/python/populse_mia/utils/utils.py
-drwxrwxr-x   0 econdami  (1000) econdami  (1000)        0 2022-09-23 13:32:07.959046 populse_mia-2.2.2/python/populse_mia.egg-info/
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     1139 2022-09-23 13:32:07.000000 populse_mia-2.2.2/python/populse_mia.egg-info/PKG-INFO
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     4689 2022-09-23 13:32:07.000000 populse_mia-2.2.2/python/populse_mia.egg-info/SOURCES.txt
--rw-rw-r--   0 econdami  (1000) econdami  (1000)        1 2022-09-23 13:32:07.000000 populse_mia-2.2.2/python/populse_mia.egg-info/dependency_links.txt
--rw-rw-r--   0 econdami  (1000) econdami  (1000)      239 2022-09-23 13:32:07.000000 populse_mia-2.2.2/python/populse_mia.egg-info/requires.txt
--rw-rw-r--   0 econdami  (1000) econdami  (1000)       12 2022-09-23 13:32:07.000000 populse_mia-2.2.2/python/populse_mia.egg-info/top_level.txt
--rw-rw-r--   0 econdami  (1000) econdami  (1000)       38 2022-09-23 13:32:07.988047 populse_mia-2.2.2/setup.cfg
--rw-rw-r--   0 econdami  (1000) econdami  (1000)     1327 2022-09-23 08:03:07.000000 populse_mia-2.2.2/setup.py
+drwxrwxr-x   0 gourieuxe  (2001) gourieuxe  (2001)        0 2023-04-19 14:34:41.203294 populse_mia-2.3.1/
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    21778 2023-02-03 10:23:06.000000 populse_mia-2.3.1/LICENSE
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     1139 2023-04-19 14:34:41.203294 populse_mia-2.3.1/PKG-INFO
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     4462 2023-02-03 10:23:06.000000 populse_mia-2.3.1/README.md
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)      899 2023-04-19 14:24:08.000000 populse_mia-2.3.1/pyproject.toml
+drwxrwxr-x   0 gourieuxe  (2001) gourieuxe  (2001)        0 2023-04-19 14:34:41.179293 populse_mia-2.3.1/python/
+drwxrwxr-x   0 gourieuxe  (2001) gourieuxe  (2001)        0 2023-04-19 14:34:41.183294 populse_mia-2.3.1/python/populse_mia/
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     2291 2023-04-19 12:40:05.000000 populse_mia-2.3.1/python/populse_mia/__init__.py
+-rwxrwxr-x   0 gourieuxe  (2001) gourieuxe  (2001)      614 2023-02-03 10:23:06.000000 populse_mia-2.3.1/python/populse_mia/__main__.py
+drwxrwxr-x   0 gourieuxe  (2001) gourieuxe  (2001)        0 2023-04-19 14:34:41.183294 populse_mia-2.3.1/python/populse_mia/data_manager/
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)      603 2023-02-03 10:23:06.000000 populse_mia-2.3.1/python/populse_mia/data_manager/__init__.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    24917 2023-04-19 12:40:05.000000 populse_mia-2.3.1/python/populse_mia/data_manager/data_history_inspect.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    19843 2023-03-13 12:54:15.000000 populse_mia-2.3.1/python/populse_mia/data_manager/data_loader.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     8329 2023-04-19 12:40:05.000000 populse_mia-2.3.1/python/populse_mia/data_manager/database_mia.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     4270 2023-02-03 10:23:06.000000 populse_mia-2.3.1/python/populse_mia/data_manager/filter.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    67457 2023-04-19 12:40:05.000000 populse_mia-2.3.1/python/populse_mia/data_manager/project.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     4504 2023-03-13 12:54:15.000000 populse_mia-2.3.1/python/populse_mia/data_manager/project_properties.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     4129 2023-04-19 14:33:50.000000 populse_mia-2.3.1/python/populse_mia/info.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    59656 2023-04-19 14:24:08.000000 populse_mia-2.3.1/python/populse_mia/main.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    53467 2023-04-19 07:26:19.000000 populse_mia-2.3.1/python/populse_mia/software_properties.py
+drwxrwxr-x   0 gourieuxe  (2001) gourieuxe  (2001)        0 2023-04-19 14:34:41.191294 populse_mia-2.3.1/python/populse_mia/sources_images/
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     1161 2023-02-03 10:23:08.000000 populse_mia-2.3.1/python/populse_mia/sources_images/B-W LINEAR.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    46917 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/BLANK_ICON.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     1638 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/Blue-White.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     7465 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/Blue.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     1410 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/Green-White-linear.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    13099 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/LogoIRMaGe.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)   464934 2023-02-03 10:23:06.000000 populse_mia-2.3.1/python/populse_mia/sources_images/Logo_populse_mia_HR.jpeg
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)   107780 2023-02-03 10:23:06.000000 populse_mia-2.3.1/python/populse_mia/sources_images/Logo_populse_mia_LR.jpeg
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)   287794 2023-02-03 10:23:06.000000 populse_mia-2.3.1/python/populse_mia/sources_images/Logo_populse_square.jpg
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    21842 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/Protocol_record.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     1570 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/RAINBOW.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     1481 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/RED TEMPERATURE.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    18808 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/Tool_Application.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     1740 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/Yellow-Red-White-Blue-Green.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     1369 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/Yellow-red.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)       37 2023-04-19 12:40:05.000000 populse_mia-2.3.1/python/populse_mia/sources_images/__init__.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     1497 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/blue-red-bright-dark.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    58061 2023-02-03 10:23:06.000000 populse_mia-2.3.1/python/populse_mia/sources_images/brain_mri.jpeg
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     3314 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/check.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    22764 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/create.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    22669 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/exit.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     7577 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/export.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     2860 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/garbage_collect.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)      339 2023-02-03 10:23:08.000000 populse_mia-2.3.1/python/populse_mia/sources_images/gray_cross.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     1496 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/green_plus.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    25818 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/green_v.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    82685 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/icons-403.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     1404 2023-02-03 10:23:08.000000 populse_mia-2.3.1/python/populse_mia/sources_images/init32.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    17211 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/open.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    10406 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/pause.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     6888 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/play.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    53974 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/plot.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    26889 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/pref.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     5173 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/red_cross.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)      866 2023-02-03 10:23:08.000000 populse_mia-2.3.1/python/populse_mia/sources_images/red_cross32.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)      794 2023-02-03 10:23:08.000000 populse_mia-2.3.1/python/populse_mia/sources_images/red_minus.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     2840 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/run32.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)      910 2023-02-03 10:23:08.000000 populse_mia-2.3.1/python/populse_mia/sources_images/stop32.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     9094 2023-02-03 10:23:07.000000 populse_mia-2.3.1/python/populse_mia/sources_images/zoom.png
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)   387168 2023-04-19 12:40:05.000000 populse_mia-2.3.1/python/populse_mia/test.py
+drwxrwxr-x   0 gourieuxe  (2001) gourieuxe  (2001)        0 2023-04-19 14:34:41.195294 populse_mia-2.3.1/python/populse_mia/user_interface/
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)      639 2023-02-03 10:23:06.000000 populse_mia-2.3.1/python/populse_mia/user_interface/__init__.py
+drwxrwxr-x   0 gourieuxe  (2001) gourieuxe  (2001)        0 2023-04-19 14:34:41.195294 populse_mia-2.3.1/python/populse_mia/user_interface/data_browser/
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)      646 2023-02-03 10:23:06.000000 populse_mia-2.3.1/python/populse_mia/user_interface/data_browser/__init__.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    25200 2023-03-13 12:54:15.000000 populse_mia-2.3.1/python/populse_mia/user_interface/data_browser/advanced_search.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    20913 2023-03-13 12:54:15.000000 populse_mia-2.3.1/python/populse_mia/user_interface/data_browser/count_table.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)   109590 2023-03-13 12:54:15.000000 populse_mia-2.3.1/python/populse_mia/user_interface/data_browser/data_browser.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    37709 2023-03-13 12:54:15.000000 populse_mia-2.3.1/python/populse_mia/user_interface/data_browser/mini_viewer.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     7075 2023-03-13 12:54:15.000000 populse_mia-2.3.1/python/populse_mia/user_interface/data_browser/modify_table.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     3352 2023-03-13 12:54:15.000000 populse_mia-2.3.1/python/populse_mia/user_interface/data_browser/rapid_search.py
+drwxrwxr-x   0 gourieuxe  (2001) gourieuxe  (2001)        0 2023-04-19 14:34:41.195294 populse_mia-2.3.1/python/populse_mia/user_interface/data_viewer/
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)       37 2023-04-19 12:40:05.000000 populse_mia-2.3.1/python/populse_mia/user_interface/data_viewer/__init__.py
+drwxrwxr-x   0 gourieuxe  (2001) gourieuxe  (2001)        0 2023-04-19 14:34:41.195294 populse_mia-2.3.1/python/populse_mia/user_interface/data_viewer/anatomist/
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)       89 2023-04-19 12:40:05.000000 populse_mia-2.3.1/python/populse_mia/user_interface/data_viewer/anatomist/__init__.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     4697 2023-03-13 12:54:15.000000 populse_mia-2.3.1/python/populse_mia/user_interface/data_viewer/anatomist/mia_anatomist.py
+drwxrwxr-x   0 gourieuxe  (2001) gourieuxe  (2001)        0 2023-04-19 14:34:41.203294 populse_mia-2.3.1/python/populse_mia/user_interface/data_viewer/anatomist_2/
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)       89 2023-04-19 12:40:05.000000 populse_mia-2.3.1/python/populse_mia/user_interface/data_viewer/anatomist_2/__init__.py
+-rwxrwxr-x   0 gourieuxe  (2001) gourieuxe  (2001)    55084 2023-04-19 12:40:05.000000 populse_mia-2.3.1/python/populse_mia/user_interface/data_viewer/anatomist_2/anasimpleviewer2.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    12341 2023-04-19 12:40:05.000000 populse_mia-2.3.1/python/populse_mia/user_interface/data_viewer/anatomist_2/mia_anatomist.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)  5239900 2023-04-19 12:40:05.000000 populse_mia-2.3.1/python/populse_mia/user_interface/data_viewer/anatomist_2/resources.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)  2492954 2023-04-19 12:40:05.000000 populse_mia-2.3.1/python/populse_mia/user_interface/data_viewer/anatomist_2/resources_snd_window.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     7283 2023-04-19 12:40:05.000000 populse_mia-2.3.1/python/populse_mia/user_interface/data_viewer/anatomist_2/snd_window.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     2677 2023-04-19 12:40:05.000000 populse_mia-2.3.1/python/populse_mia/user_interface/data_viewer/data_viewer.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     5724 2023-03-13 12:54:15.000000 populse_mia-2.3.1/python/populse_mia/user_interface/data_viewer/data_viewer_tab.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    71094 2023-04-19 12:40:05.000000 populse_mia-2.3.1/python/populse_mia/user_interface/main_window.py
+drwxrwxr-x   0 gourieuxe  (2001) gourieuxe  (2001)        0 2023-04-19 14:34:41.203294 populse_mia-2.3.1/python/populse_mia/user_interface/pipeline_manager/
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)      680 2023-02-03 10:23:06.000000 populse_mia-2.3.1/python/populse_mia/user_interface/pipeline_manager/__init__.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    18998 2023-03-13 12:54:15.000000 populse_mia-2.3.1/python/populse_mia/user_interface/pipeline_manager/iteration_table.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    58458 2023-04-19 12:40:05.000000 populse_mia-2.3.1/python/populse_mia/user_interface/pipeline_manager/node_controller.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    80181 2023-03-13 12:54:15.000000 populse_mia-2.3.1/python/populse_mia/user_interface/pipeline_manager/pipeline_editor.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)   133261 2023-04-19 14:24:08.000000 populse_mia-2.3.1/python/populse_mia/user_interface/pipeline_manager/pipeline_manager_tab.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)   107489 2023-04-19 12:40:05.000000 populse_mia-2.3.1/python/populse_mia/user_interface/pipeline_manager/process_library.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    30674 2023-04-19 12:40:05.000000 populse_mia-2.3.1/python/populse_mia/user_interface/pipeline_manager/process_mia.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    22167 2023-04-19 12:40:05.000000 populse_mia-2.3.1/python/populse_mia/user_interface/pipeline_manager/type_editors.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)   221566 2023-04-19 12:40:05.000000 populse_mia-2.3.1/python/populse_mia/user_interface/pop_ups.py
+drwxrwxr-x   0 gourieuxe  (2001) gourieuxe  (2001)        0 2023-04-19 14:34:41.203294 populse_mia-2.3.1/python/populse_mia/utils/
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)      519 2023-02-03 10:23:06.000000 populse_mia-2.3.1/python/populse_mia/utils/__init__.py
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)    10948 2023-03-13 12:54:15.000000 populse_mia-2.3.1/python/populse_mia/utils/utils.py
+drwxrwxr-x   0 gourieuxe  (2001) gourieuxe  (2001)        0 2023-04-19 14:34:41.183294 populse_mia-2.3.1/python/populse_mia.egg-info/
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     1139 2023-04-19 14:34:40.000000 populse_mia-2.3.1/python/populse_mia.egg-info/PKG-INFO
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     4654 2023-04-19 14:34:41.000000 populse_mia-2.3.1/python/populse_mia.egg-info/SOURCES.txt
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)        1 2023-04-19 14:34:40.000000 populse_mia-2.3.1/python/populse_mia.egg-info/dependency_links.txt
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)      250 2023-04-19 14:34:40.000000 populse_mia-2.3.1/python/populse_mia.egg-info/requires.txt
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)       12 2023-04-19 14:34:40.000000 populse_mia-2.3.1/python/populse_mia.egg-info/top_level.txt
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)       38 2023-04-19 14:34:41.203294 populse_mia-2.3.1/setup.cfg
+-rw-rw-r--   0 gourieuxe  (2001) gourieuxe  (2001)     1402 2023-04-19 12:40:05.000000 populse_mia-2.3.1/setup.py
```

### Comparing `populse_mia-2.2.2/LICENSE` & `populse_mia-2.3.1/LICENSE`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/PKG-INFO` & `populse_mia-2.3.1/PKG-INFO`

 * *Files 10% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: populse_mia
-Version: 2.2.2
+Version: 2.3.1
 Summary: populse mia
 Home-page: http://populse.github.io/populse_mia
 Author: Populse team
 Author-email: populse-support@univ-grenoble-alpes.fr
 License: CeCILL
 Platform: OS Independent
 Classifier: Development Status :: 5 - Production/Stable
```

### Comparing `populse_mia-2.2.2/README.md` & `populse_mia-2.3.1/README.md`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/__init__.py` & `populse_mia-2.3.1/python/populse_mia/__init__.py`

 * *Files 11% similar despite different names*

```diff
@@ -41,8 +41,8 @@
 # Populse_mia - Copyright (C) IRMaGe/CEA, 2018
 # Distributed under the terms of the CeCILL license, as published by
 # the CEA-CNRS-INRIA. Refer to the LICENSE file or to
 # http://www.cecill.info/licences/Licence_CeCILL_V2.1-en.html
 # for details.
 ###############################################################################
 
-from .info import __version__
+from .info import __version__  # noqa: F401
```

### Comparing `populse_mia-2.2.2/python/populse_mia/__main__.py` & `populse_mia-2.3.1/python/populse_mia/__main__.py`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/data_manager/__init__.py` & `populse_mia-2.3.1/python/populse_mia/data_manager/__init__.py`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/data_manager/data_history_inspect.py` & `populse_mia-2.3.1/python/populse_mia/data_manager/data_history_inspect.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,26 +1,26 @@
 # -*- coding: utf-8 -*-
-"""
-"""
+"""This module is dedicated to pipeline history."""
 
 import os.path as osp
 
 import traits.api as traits
-from capsul.api import Pipeline, Process, capsul_engine
+from capsul.api import Pipeline, Process  # , capsul_engine
 
-from populse_mia.data_manager.project import (BRICK_EXEC, BRICK_EXEC_TIME,
-                                              BRICK_ID, BRICK_INIT,
-                                              BRICK_INIT_TIME, BRICK_INPUTS,
-                                              BRICK_NAME, BRICK_OUTPUTS,
-                                              COLLECTION_BRICK,
-                                              COLLECTION_CURRENT,
-                                              COLLECTION_INITIAL, TAG_BRICKS,
-                                              TAG_CHECKSUM, TAG_EXP_TYPE,
-                                              TAG_FILENAME, TAG_TYPE, TYPE_MAT,
-                                              TYPE_NII, TYPE_TXT, TYPE_UNKNOWN)
+from populse_mia.data_manager.project import (
+    BRICK_EXEC,
+    BRICK_EXEC_TIME,
+    BRICK_ID,
+    BRICK_INPUTS,
+    BRICK_NAME,
+    BRICK_OUTPUTS,
+    COLLECTION_BRICK,
+    COLLECTION_CURRENT,
+    TAG_BRICKS,
+)
 
 
 class ProtoProcess(object):
     """
     Lightweight convenience class, stores a brick database entry, plus
     additional info (used)
     """
@@ -200,15 +200,15 @@
         {uuid: ProtoProcess instance}
     links: set
         {(src_protoprocess, src_plug_name, dst_protoprocess, dst_plug_name)}.
         Links from/to the 'exterior" are also given: in this
         case src_protoprocess or dst_protoprocess is None.
     """
 
-    session = project.session
+    # session = project.session
 
     procs = {}
     links = set()
     new_procs = get_direct_proc_ancestors(filename, project, procs)
     done_procs = set()
 
     # keep only the latest to begin with
@@ -365,15 +365,15 @@
     """
 
     session = project.session
     bricks = session.get_value(COLLECTION_CURRENT, filename, TAG_BRICKS)
     print("bricks for:", filename, ":", bricks)
 
     new_procs = {}
-    new_links = set()
+    # new_links = set()
 
     if bricks is not None:
         for brick in bricks:
             if brick not in procs:
                 proc = get_history_brick_process(
                     brick, project, before_exec_time=before_exec_time
                 )
@@ -452,14 +452,16 @@
 
     new_procs = {}
     links = set()
     dlink = None
     tmp_filename = "<temp>"
 
     def _get_tmp_param(proc):
+        """Blabla"""
+
         for param, value in proc.brick[BRICK_INPUTS].items():
             if data_in_value(value, tmp_filename, project):
                 return (proc, param)
         return (None, None)  # failed...
 
     # look first from proc outputs history (which is more direct, less error-
     # prone, and a more limited search)
@@ -595,20 +597,27 @@
     either the relative path to the database data directory, or "<temp>" if
     filename is this value and allow_temp is True (which is the default), or
     None if it is not in the database.
     """
 
     if allow_temp and filename == "<temp>":
         return filename
+
     proj_dir = osp.join(osp.abspath(osp.normpath(project.folder)), "")
+
     if not filename.startswith(proj_dir):
         return None
-    filename = filename[len(proj_dir) :]
+
+    # fmt: off
+    filename = filename[len(proj_dir):]
+    # fmt: on
+
     if project.session.has_document(COLLECTION_CURRENT, filename):
         return filename
+
     return None
 
 
 def get_filenames_in_value(value, project, allow_temp=True):
     """
     Parses ``value``, which may be an imbrication of lists, tuples and dicts,
     and gets all filenames referenced in it. Only filenames which are database
```

### Comparing `populse_mia-2.2.2/python/populse_mia/data_manager/data_loader.py` & `populse_mia-2.3.1/python/populse_mia/data_manager/data_loader.py`

 * *Files 2% similar despite different names*

```diff
@@ -20,44 +20,60 @@
 # Populse_mia - Copyright (C) IRMaGe/CEA, 2018
 # Distributed under the terms of the CeCILL license, as published by
 # the CEA-CNRS-INRIA. Refer to the LICENSE file or to
 # http://www.cecill.info/licences/Licence_CeCILL_V2.1-en.html
 # for details.
 ##########################################################################
 
-import datetime
+# import datetime
 import glob
 import hashlib  # To generate the md5 of each path
 import json
 import os.path
 import threading
 import traceback
 from datetime import datetime
 from time import sleep, time
 
 # Populse_db imports
-from populse_db.database import (FIELD_TYPE_BOOLEAN, FIELD_TYPE_DATE,
-                                 FIELD_TYPE_DATETIME, FIELD_TYPE_FLOAT,
-                                 FIELD_TYPE_INTEGER, FIELD_TYPE_LIST_BOOLEAN,
-                                 FIELD_TYPE_LIST_DATE,
-                                 FIELD_TYPE_LIST_DATETIME,
-                                 FIELD_TYPE_LIST_FLOAT,
-                                 FIELD_TYPE_LIST_INTEGER,
-                                 FIELD_TYPE_LIST_STRING, FIELD_TYPE_LIST_TIME,
-                                 FIELD_TYPE_STRING, FIELD_TYPE_TIME)
+from populse_db.database import (
+    FIELD_TYPE_BOOLEAN,
+    FIELD_TYPE_DATE,
+    FIELD_TYPE_DATETIME,
+    FIELD_TYPE_FLOAT,
+    FIELD_TYPE_INTEGER,
+    FIELD_TYPE_LIST_BOOLEAN,
+    FIELD_TYPE_LIST_DATE,
+    FIELD_TYPE_LIST_DATETIME,
+    FIELD_TYPE_LIST_FLOAT,
+    FIELD_TYPE_LIST_INTEGER,
+    FIELD_TYPE_LIST_STRING,
+    FIELD_TYPE_LIST_TIME,
+    FIELD_TYPE_STRING,
+    FIELD_TYPE_TIME,
+)
+
 # PyQt5 imports
 from PyQt5.QtCore import Qt, QThread, pyqtSignal
 from PyQt5.QtWidgets import QProgressDialog
 
-from populse_mia.data_manager.database_mia import (TAG_ORIGIN_BUILTIN,
-                                                   TAG_ORIGIN_USER)
+from populse_mia.data_manager.database_mia import (
+    TAG_ORIGIN_BUILTIN,
+    TAG_ORIGIN_USER,
+)
+
 # Populse_MIA imports
-from populse_mia.data_manager.project import (COLLECTION_CURRENT,
-                                              COLLECTION_INITIAL, TAG_CHECKSUM,
-                                              TAG_FILENAME, TAG_TYPE, TYPE_NII)
+from populse_mia.data_manager.project import (
+    COLLECTION_CURRENT,
+    COLLECTION_INITIAL,
+    TAG_CHECKSUM,
+    TAG_FILENAME,
+    TAG_TYPE,
+    TYPE_NII,
+)
 
 
 class ImportProgress(QProgressDialog):
     """Handle the progress bar.
 
     :param project: A Project object
 
@@ -151,15 +167,14 @@
         tags_names_added = []
         documents = {}
 
         # List of tags to remove
         tags_to_remove = ["Dataset data file", "Dataset header file"]
 
         for dict_log in list_dict_log:
-
             if dict_log["StatusExport"] == "Export ok":
                 file_name = dict_log["NameFile"]
                 path_name = raw_data_folder
 
                 with open(
                     os.path.join(path_name, file_name) + ".nii", "rb"
                 ) as scan_file:
@@ -189,15 +204,14 @@
                 ] = file_database_path
 
                 # print('\ntags_from_file(file_name, path_name): ',
                 # tags_from_file(file_name, path_name))
 
                 # For each tag in each scan
                 for tag in tags_from_file(file_name, path_name):
-
                     # We do the tag only if it's not in the tags to remove
                     if tag[0] not in tags_to_remove:
                         tag_name = tag[0]
 
                         # print('\ntag_name: ', tag_name)
 
                         properties = tag[1]
@@ -269,15 +283,14 @@
                                 hasattr(value, "__len__")
                                 and type(value) != str
                             ):
                                 if (
                                     len(value) == 1
                                     and isinstance(value[0], list)
                                 ) or (len(value) != 1):
-
                                     if tag_type == FIELD_TYPE_STRING:
                                         tag_type = FIELD_TYPE_LIST_STRING
 
                                     elif tag_type == FIELD_TYPE_INTEGER:
                                         tag_type = FIELD_TYPE_LIST_INTEGER
 
                                     elif tag_type == FIELD_TYPE_FLOAT:
@@ -309,15 +322,14 @@
                         # print('tag_type: ', tag_type)
 
                         if (
                             tag_type == FIELD_TYPE_DATETIME
                             or tag_type == FIELD_TYPE_DATE
                             or tag_type == FIELD_TYPE_TIME
                         ):
-
                             if value is not None and value != "":
                                 value = datetime.strptime(value, format)
 
                                 if tag_type == FIELD_TYPE_TIME:
                                     value = value.time()
 
                                 elif tag_type == FIELD_TYPE_DATE:
@@ -358,15 +370,14 @@
                                     None,
                                 ]
                             )
                             tags_names_added.append(tag_name)
 
                         # The value is accepted if it's not empty or null
                         if value is not None and value != "":
-
                             if document_not_existing:
                                 values_added.append(
                                     [
                                         file_database_path,
                                         tag_name,
                                         value,
                                         value,
@@ -390,19 +401,16 @@
                         [file_database_path, TAG_TYPE, TYPE_NII, TYPE_NII]
                     )
                 documents[file_database_path][TAG_CHECKSUM] = original_md5
                 documents[file_database_path][TAG_TYPE] = TYPE_NII
 
         # Missing values added thanks to default values
         for tag in self.project.session.get_fields(COLLECTION_CURRENT):
-
             if tag.origin == TAG_ORIGIN_USER:
-
                 for scan in self.scans_added:
-
                     if (
                         tag.default_value is not None
                         and self.project.session.get_value(
                             COLLECTION_CURRENT, scan[0], tag.field_name
                         )
                         is None
                     ):
@@ -512,22 +520,20 @@
     :param project: current project in the software
     :returns: the list of scans that have been modified
     """
 
     # Returning the files that are problematic
     return_list = []
     for scan in project.session.get_documents_names(COLLECTION_CURRENT):
-
         file_name = scan
         file_path = os.path.relpath(os.path.join(project.folder, file_name))
 
         if os.path.exists(file_path):
             # If the file exists, we do the checksum
             with open(file_path, "rb") as scan_file:
-
                 try:
                     data = scan_file.read()
 
                 except Exception as e:
                     print(
                         '\nError while reading the "{0}" file '
                         "...!\nTraceback:".format(os.path.abspath(file_path))
```

### Comparing `populse_mia-2.2.2/python/populse_mia/data_manager/database_mia.py` & `populse_mia-2.3.1/python/populse_mia/data_manager/database_mia.py`

 * *Files 7% similar despite different names*

```diff
@@ -15,24 +15,20 @@
 # Distributed under the terms of the CeCILL license, as published by
 # the CEA-CNRS-INRIA. Refer to the LICENSE file or to
 # http://www.cecill.info/licences/Licence_CeCILL_V2.1-en.html
 # for details.
 ##########################################################################
 
 # Populse_db imports
-from populse_db.database import (FIELD_TYPE_BOOLEAN, FIELD_TYPE_DATE,
-                                 FIELD_TYPE_DATETIME, FIELD_TYPE_FLOAT,
-                                 FIELD_TYPE_INTEGER, FIELD_TYPE_JSON,
-                                 FIELD_TYPE_LIST_BOOLEAN, FIELD_TYPE_LIST_DATE,
-                                 FIELD_TYPE_LIST_DATETIME,
-                                 FIELD_TYPE_LIST_FLOAT,
-                                 FIELD_TYPE_LIST_INTEGER, FIELD_TYPE_LIST_JSON,
-                                 FIELD_TYPE_LIST_STRING, FIELD_TYPE_LIST_TIME,
-                                 FIELD_TYPE_STRING, FIELD_TYPE_TIME, Database,
-                                 DatabaseSession)
+from populse_db.database import (
+    FIELD_TYPE_BOOLEAN,
+    FIELD_TYPE_STRING,
+    Database,
+    DatabaseSession,
+)
 
 TAG_ORIGIN_BUILTIN = "builtin"
 TAG_ORIGIN_USER = "user"
 
 # Tag unit
 TAG_UNIT_MS = "ms"
 TAG_UNIT_MM = "mm"
@@ -86,14 +82,16 @@
                 "origin": origin,
                 "unit": unit,
                 "default_value": default_value,
             },
         )
 
     def add_field_attributes_collection(self):
+        """Blabla"""
+
         if not self.engine.has_collection(FIELD_ATTRIBUTES_COLLECTION):
             super(DatabaseSessionMIA, self).add_collection(
                 FIELD_ATTRIBUTES_COLLECTION
             )
             super(DatabaseSessionMIA, self).add_field(
                 FIELD_ATTRIBUTES_COLLECTION, "visibility", FIELD_TYPE_BOOLEAN
             )
@@ -122,15 +120,15 @@
     ):
         """Add a field to the database, if it does not already exist.
 
         :param collection: field collection (str)
         :param name: field name (str)
         :param field_type: field type (string, int, float, boolean, date,
                            datetime, time, list_string, list_int, list_float,
-                           list_boolean, list_date, list_datetime, or list_time)
+                           list_boolean, list_date, list_datetime or list_time)
         :param description: field description (str or None)
         :param visibility: Bool to know if the field is visible in the
                            databrowser
         :param origin: To know the origin of a field,
                        in [TAG_ORIGIN_BUILTIN, TAG_ORIGIN_USER]
         :param unit: Origin of the field, in [TAG_UNIT_MS, TAG_UNIT_MM,
                      TAG_UNIT_DEGREE, TAG_UNIT_HZPIXEL, TAG_UNIT_MHZ]
@@ -192,23 +190,27 @@
             fields = [fields]
         for field in fields:
             self.remove_document(
                 FIELD_ATTRIBUTES_COLLECTION, "%s|%s" % (collection, field)
             )
 
     def get_field(self, collection, name):
+        """Blabla"""
+
         field = super(DatabaseSessionMIA, self).get_field(collection, name)
         if field is not None:
             index = "%s|%s" % (collection, name)
             attrs = self.get_document(FIELD_ATTRIBUTES_COLLECTION, index)
             for i in ("visibility", "origin", "unit", "default_value"):
                 setattr(field, i, getattr(attrs, i, None))
         return field
 
     def get_fields(self, collection):
+        """Blabla"""
+
         fields = super(DatabaseSessionMIA, self).get_fields(collection)
         for field in fields:
             name = field.field_name
             index = "%s|%s" % (collection, name)
             attrs = self.get_document(FIELD_ATTRIBUTES_COLLECTION, index)
             for i in ("visibility", "origin", "unit", "default_value"):
                 setattr(field, i, getattr(attrs, i, None))
```

### Comparing `populse_mia-2.2.2/python/populse_mia/data_manager/filter.py` & `populse_mia-2.3.1/python/populse_mia/data_manager/filter.py`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/data_manager/project.py` & `populse_mia-2.3.1/python/populse_mia/data_manager/project.py`

 * *Files 6% similar despite different names*

```diff
@@ -15,29 +15,37 @@
 # for details.
 ##########################################################################
 
 import glob
 import json
 import os
 import tempfile
-from datetime import datetime, timedelta
+from datetime import datetime
 
 import yaml
 from capsul.api import Pipeline
 from capsul.pipeline import pipeline_tools
 from capsul.pipeline.pipeline_nodes import PipelineNode, ProcessNode
+
 # Populse_db imports
-from populse_db.database import (FIELD_TYPE_DATETIME, FIELD_TYPE_INTEGER,
-                                 FIELD_TYPE_JSON, FIELD_TYPE_LIST_STRING,
-                                 FIELD_TYPE_STRING)
-
-from populse_mia.data_manager.database_mia import (TAG_ORIGIN_BUILTIN,
-                                                   TAG_ORIGIN_USER,
-                                                   DatabaseMIA)
+from populse_db.database import (
+    FIELD_TYPE_DATETIME,
+    FIELD_TYPE_INTEGER,
+    FIELD_TYPE_JSON,
+    FIELD_TYPE_LIST_STRING,
+    FIELD_TYPE_STRING,
+)
+
+from populse_mia.data_manager.database_mia import (
+    TAG_ORIGIN_BUILTIN,
+    TAG_ORIGIN_USER,
+    DatabaseMIA,
+)
 from populse_mia.data_manager.filter import Filter
+
 # Populse_MIA imports
 from populse_mia.software_properties import Config, verCmp
 from populse_mia.utils.utils import set_item_data
 
 COLLECTION_CURRENT = "current"
 COLLECTION_INITIAL = "initial"
 COLLECTION_BRICK = "brick"
@@ -84,41 +92,58 @@
     """Class that handles projects and their associated database.
 
     :param project_root_folder: project's path
     :param new_project: project's object
 
     .. Methods:
         - add_clinical_tags: add the clinical tags to the project
+        - cleanup_orphan_bricks: remove orphan bricks from the database
+        - cleanup_orphan_history: remove orphan bricks from the database
+        - cleanup_orphan_nonexisting_files: Remove orphan files which do not
+                                            exist from the database
         - del_clinical_tags: remove clinical tags to the project
+        - files_in_project: return file / directory names within the
+                            project folder
+        - finished_bricks: blabla
+        - get_data_history: get the processing history for the given data file
         - getDate: return the date of creation of the project
+        - get_finished_bricks_in_pipeline: blabla
+        - get_finished_bricks_in_workflows: blabla
         - getFilter: return a Filter object
         - getFilterName: input box to get the name of the filter to save
         - getName: return the name of the project
-        - getSortOrder: return the sort order of the project
+        - get_orphan_bricks: blabla
+        - get_orphan_history: blabla
+        - get_orphan_nonexsiting_files: get orphan files which do not exist
+                                        from the database
         - getSortedTag: return the sorted tag of the project
+        - getSortOrder: return the sort order of the project
         - hasUnsavedModifications: return if the project has unsaved
                                    modifications or not
         - init_filters: initialize the filters at project opening
         - loadProperties: load the properties file
         - redo: redo the last action made by the user on the project
         - reput_values: re-put the value objects in the database
-        - save_current_filter: save the current filter
         - saveConfig: save the changes in the properties file
-        - setCurrentFilter: set the current filter of the project
-        - setDate: set the date of the project
+        - save_current_filter: save the current filter
         - saveModifications: save the pending operations of the project
                              (actions still not saved)
+        - setCurrentFilter: set the current filter of the project
+        - setDate: set the date of the project
         - setName: set the name of the project
-        - setSortOrder: set the sort order of the project
         - setSortedTag: set the sorted tag of the project
+        - setSortOrder: set the sort order of the project
         - undo: undo the last action made by the user on the project
         - unsavedModifications(self, value): Modify the window title depending
                                              of whether the project has unsaved
                                              modifications or not.
         - unsaveModifications: unsaves the pending operations of the project
+        - update_data_history: cleanup earlier history of given data
+        - update_db_for_paths: update the history and brick tables with a new
+                               project file
     """
 
     def __init__(self, project_root_folder, new_project):
         """Initialization of the project class.
 
         :param project_root_folder: project's path
         :param new_project: project's object
@@ -155,15 +180,14 @@
 
         db = "sqlite:///" + os.path.join(db_folder, "mia.db")
         self.database = DatabaseMIA(db)
         self.session = self.database.__enter__()
         self.session.add_field_attributes_collection()
 
         if new_project:
-
             if not os.path.exists(self.folder):
                 os.makedirs(self.folder)
 
             if not os.path.exists(os.path.join(self.folder, "database")):
                 os.makedirs(os.path.join(self.folder, "database"))
 
             if not os.path.exists(os.path.join(self.folder, "filters")):
@@ -483,19 +507,17 @@
         """Add new clinical tags to the project.
 
         :returns: list of clinical tags that were added
         """
         return_tags = []
 
         for clinical_tag in CLINICAL_TAGS:
-
             if clinical_tag not in self.session.get_fields_names(
                 COLLECTION_CURRENT
             ):
-
                 if clinical_tag == "Age":
                     field_type = FIELD_TYPE_INTEGER
 
                 else:
                     field_type = FIELD_TYPE_STRING
 
                 self.session.add_field(
@@ -534,43 +556,317 @@
                     )
 
                 return_tags.append(clinical_tag)
                 self.session.commit()
 
         return return_tags
 
+    def cleanup_orphan_bricks(self, bricks=None):
+        """
+        Remove orphan bricks from the database
+        """
+        obsolete, orphan_files = self.get_orphan_bricks(bricks)
+        print("really orphan:", obsolete)
+        for brick in obsolete:
+            print("remove obsolete brick:", brick)
+            try:
+                self.session.remove_document(COLLECTION_BRICK, brick)
+            except ValueError:
+                pass  # malformed database, the brick doesn't exist
+        for doc in orphan_files:
+            print("remove orphan file:", doc)
+            try:
+                self.session.remove_document(COLLECTION_CURRENT, doc)
+                self.session.remove_document(COLLECTION_INITIAL, doc)
+            except ValueError:
+                pass  # malformed database, the file doesn't exist
+            if os.path.exists(os.path.join(self.folder, doc)):
+                os.unlink(os.path.join(self.folder, doc))
+
+    def cleanup_orphan_history(self):
+        """
+        Remove orphan bricks from the database
+        """
+        obs_hist, obs_bricks, orphan_files = self.get_orphan_history()
+        print("orphan histories:", obs_hist)
+        print("orphan bricks:", obs_bricks)
+        for hist in obs_hist:
+            print("remove obsolete history:", hist)
+            try:
+                self.session.remove_document(COLLECTION_HISTORY, hist)
+            except ValueError:
+                pass  # malformed database, the brick doesn't exist
+        for brick in obs_bricks:
+            print("remove obsolete brick:", brick)
+            try:
+                self.session.remove_document(COLLECTION_BRICK, brick)
+            except ValueError:
+                pass  # malformed database, the brick doesn't exist
+        for doc in orphan_files:
+            print("remove orphan file:", doc)
+            try:
+                self.session.remove_document(COLLECTION_CURRENT, doc)
+                self.session.remove_document(COLLECTION_INITIAL, doc)
+            except ValueError:
+                pass  # malformed database, the file doesn't exist
+            if os.path.exists(os.path.join(self.folder, doc)):
+                os.unlink(os.path.join(self.folder, doc))
+
+    def cleanup_orphan_nonexisting_files(self):
+        """
+        Remove orphan files which do not exist from the database
+        """
+        orphan_files = self.get_orphan_nonexsiting_files()
+        for doc in orphan_files:
+            print("remove orphan file:", doc)
+            try:
+                self.session.remove_document(COLLECTION_CURRENT, doc)
+                self.session.remove_document(COLLECTION_INITIAL, doc)
+            except ValueError:
+                pass  # malformed database, the file doesn't exist
+            if os.path.exists(os.path.join(self.folder, doc)):
+                os.unlink(os.path.join(self.folder, doc))
+
     def del_clinical_tags(self):
         """Remove clinical tags to the project.
 
         :returns: list of clinical tags that were removed
         """
         return_tags = []
 
         for clinical_tag in CLINICAL_TAGS:
-
             if clinical_tag in self.session.get_fields_names(
                 COLLECTION_CURRENT
             ):
                 self.session.remove_field(COLLECTION_CURRENT, clinical_tag)
                 self.session.remove_field(COLLECTION_INITIAL, clinical_tag)
 
                 return_tags.append(clinical_tag)
                 self.session.commit()
 
         return return_tags
 
+    def files_in_project(self, files):
+        """
+        Return values in files that are file / directory names within the
+        project folder.
+
+        `files` are walked recursively and can be, or contain, lists, tuples,
+        sets, dicts (only dict `values()` are considered). Dict keys are
+        dropped and all filenames are merged into a single set.
+
+        The returned value is a set of filenames (str).
+        """
+        proj_dir = os.path.join(
+            os.path.abspath(os.path.normpath(self.folder)), ""
+        )
+        pl = len(proj_dir)
+
+        values = set()
+        tval = [files]
+        while tval:
+            value = tval.pop(0)
+            if isinstance(value, (list, tuple, set)):
+                tval += value
+                continue
+            if isinstance(value, dict):
+                tval += value.values()
+                continue
+            if not isinstance(value, str):
+                continue
+            aval = os.path.abspath(os.path.normpath(value))
+            if not aval.startswith(proj_dir):
+                continue
+
+            values.add(aval[pl:])
+
+        return values
+
+    def finished_bricks(self, engine, pipeline=None, include_done=False):
+        """blabla"""
+        bricks = self.get_finished_bricks_in_workflows(engine)
+        if pipeline:
+            pbricks = self.get_finished_bricks_in_pipeline(engine, pipeline)
+            pbricks.update(bricks)
+            bricks = pbricks
+
+        # filter jobs actually in MIA database
+        docs = self.session.get_documents(
+            COLLECTION_BRICK,
+            document_ids=list(bricks.keys()),
+            fields=[BRICK_ID, BRICK_EXEC, BRICK_OUTPUTS],
+            as_list=True,
+        )
+        docs = {
+            brid: {"brick_exec": brick_exec, "outputs": outputs}
+            for brid, brick_exec, outputs in docs
+            if include_done or brick_exec == "Not Done"
+        }
+
+        def updated(d1, d2):
+            """Blabla"""
+
+            d1.update(d2)
+            return d1
+
+        bricks = {
+            brid: updated(value, docs[brid])
+            for brid, value in bricks.items()
+            if brid in docs
+        }
+
+        # get complete list of outputs to be updated in the database
+        outputs = set()
+        proj_dir = os.path.join(
+            os.path.abspath(os.path.normpath(self.folder)), ""
+        )
+        lp = len(proj_dir)
+
+        def _update_set(outputs, output):
+            """update the outputs set with file/dir names in output, relative
+            to the project directory"""
+            todo = [output]
+            while todo:
+                output = todo.pop(0)
+                if isinstance(output, (list, set, tuple)):
+                    todo += output
+                elif isinstance(output, str):
+                    path = os.path.abspath(os.path.normpath(output))
+                    if path.startswith(proj_dir):  # and os.path.exists(path):
+                        # record only existing files
+                        output = path[lp:]
+                        outputs.add(output)
+
+        # procs = {}
+
+        for brid, brdesc in bricks.items():
+            out_data = brdesc["outputs"]
+            if out_data:
+                for param, output in out_data.items():
+                    _update_set(outputs, output)
+
+        return {"bricks": bricks, "outputs": outputs}
+
+    def get_data_history(self, path):
+        """
+        Get the processing history for the given data file.
+
+        The history dict contains several elements:
+
+        - `parent_files`: set of other data used (directy or indirectly) to
+          produce the data.
+        - `processes`: processing bricks set from each ancestor data which
+          lead to the given one. Elements are process (brick) UUIDs.
+
+        :return: history (dict)
+        """
+
+        from . import data_history_inspect
+
+        return data_history_inspect.get_data_history(path, self)
+
     def getDate(self):
         """Return the date of creation of the project.
 
         :returns: string of the date of creation of the project if it's not
                   Unnamed project, otherwise empty string
         """
 
         return self.properties["date"]
 
+    def get_finished_bricks_in_pipeline(self, engine, pipeline):
+        """blabla"""
+        if not isinstance(pipeline, Pipeline):
+            # it's a single process...
+            procs = {}
+            brid = getattr(pipeline, "uuid", None)
+            if brid is not None:
+                procs[brid] = {"process": pipeline}
+
+            return procs
+
+        nodes_list = [
+            n
+            for n in pipeline.nodes.items()
+            if n[0] != ""
+            and pipeline_tools.is_node_enabled(pipeline, n[0], n[1])
+        ]
+
+        all_nodes = list(nodes_list)
+        while nodes_list:
+            node_name, node = nodes_list.pop(0)
+            if hasattr(node, "process"):
+                process = node.process
+
+                if isinstance(node, PipelineNode):
+                    new_nodes = [
+                        n
+                        for n in process.nodes.items()
+                        if n[0] != ""
+                        and pipeline_tools.is_node_enabled(process, n[0], n[1])
+                    ]
+                    nodes_list += new_nodes
+                    all_nodes += new_nodes
+
+        procs = {}
+
+        for node_name, node in all_nodes:
+            if isinstance(node, ProcessNode):
+                process = node.process
+                brid = getattr(process, "uuid", None)
+                if brid is not None:
+                    procs[brid] = {"process": process}
+
+        return procs
+
+    def get_finished_bricks_in_workflows(self, engine):
+        """blabla"""
+        # import soma_workflow.client as swclient
+        # from soma_workflow import constants
+
+        swm = engine.study_config.modules["SomaWorkflowConfig"]
+        swm.connect_resource(engine.connected_to())
+        controller = swm.get_workflow_controller()
+
+        jobs = {}
+
+        for wf_id in controller.workflows():
+            wf_st = controller.workflow_elements_status(wf_id)
+
+            finished_jobs = {}
+            for job_st in wf_st[0]:
+                job_id = job_st[0]
+                if job_st[1] != "done" or job_st[3][0] != "finished_regularly":
+                    continue
+                finished_jobs[job_id] = job_st
+
+            if not finished_jobs:
+                continue
+
+            wf = controller.workflow(wf_id)
+            for job in wf.jobs:
+                brid = getattr(job, "uuid", None)
+                if not brid:
+                    continue
+                # get engine job
+                ejob = wf.job_mapping[job]
+                job_id = ejob.job_id
+                status = finished_jobs.get(job_id, None)
+                if not status:
+                    continue
+
+                jobs[brid] = {
+                    "workflow": wf_id,
+                    "job": job,
+                    "job_id": job_id,
+                    "swf_status": status,
+                }
+
+        return jobs
+
     def getFilter(self, filter):
         """Return a Filter object from its name.
 
         :param filter: Filter name
         :returns: Filter object
         """
         for filterObject in self.filters:
@@ -596,14 +892,184 @@
 
         :returns: string of the name of the project if it's not Unnamed
                   project, otherwise empty string
         """
 
         return self.properties["name"]
 
+    def get_orphan_bricks(self, bricks=None):
+        """blabla"""
+        orphan = set()
+        orphan_weak_files = set()
+        used_bricks = set()
+        if bricks is not None and not isinstance(bricks, list):
+            bricks = list(bricks)
+
+        brick_docs = self.session.get_document(
+            COLLECTION_BRICK,
+            document_ids=bricks,
+            fields=[BRICK_ID, BRICK_OUTPUTS],
+            as_list=True,
+        )
+
+        proj_dir = os.path.join(
+            os.path.abspath(os.path.normpath(self.folder)), ""
+        )
+        lp = len(proj_dir)
+
+        for brick in brick_docs:
+            brid = brick[0]
+            if brid is None:
+                continue
+            if brick[1] is None:
+                orphan.add(brid)
+                continue
+
+            todo = list(brick[1].values())
+            values = set()
+            while todo:
+                value = todo.pop(0)
+                if isinstance(value, (list, set, tuple)):
+                    todo += value
+                elif isinstance(value, str):
+                    path = os.path.abspath(os.path.normpath(value))
+                    if path.startswith(proj_dir):
+                        value = path[lp:]
+                        values.add(value)
+            docs = self.session.get_documents(
+                COLLECTION_CURRENT,
+                document_ids=list(values),
+                fields=[TAG_FILENAME, TAG_BRICKS],
+                as_list=True,
+            )
+            used = False
+            orphan_files = set()
+            for doc in docs:
+                if doc[1] and brid in doc[1]:
+                    if doc[0].startswith("scripts/") or not os.path.exists(
+                        os.path.join(self.folder, doc[0])
+                    ):
+                        # script files are "weak" and should not prevent
+                        # brick deletion.
+                        # non-existing files can be cleared too.
+                        orphan_files.add(doc[0])
+                        continue
+                    used = True
+                    used_bricks.add(brid)
+                    break
+            if not used:
+                orphan.add(brid)
+                orphan_weak_files.update(orphan_files)
+        if bricks:
+            orphan.update(brid for brid in bricks if brid not in used_bricks)
+
+        return (orphan, orphan_weak_files)
+
+    def get_orphan_history(self):
+        """blabla"""
+        orphan_hist = set()
+        orphan_bricks = set()
+        orphan_weak_files = set()
+        used_hist = set()
+
+        hist_docs = self.session.get_documents(
+            COLLECTION_HISTORY,
+            fields=[HISTORY_ID, HISTORY_BRICKS],
+            as_list=True,
+        )
+
+        proj_dir = os.path.join(
+            os.path.abspath(os.path.normpath(self.folder)), ""
+        )
+        lp = len(proj_dir)
+
+        for hist in hist_docs:
+            hist_id = hist[0]
+            if hist_id is None:
+                continue
+            if hist[1] is None:
+                orphan_hist.add(hist_id)
+                continue
+
+            values = set()
+            for brid in hist[1]:
+                brick_doc = self.session.get_value(
+                    COLLECTION_BRICK, brid, BRICK_OUTPUTS
+                )
+                if brick_doc is None:
+                    todo = []
+                else:
+                    todo = list(brick_doc.values())
+
+                while todo:
+                    value = todo.pop(0)
+                    if isinstance(value, (list, set, tuple)):
+                        todo += value
+                    elif isinstance(value, str):
+                        path = os.path.abspath(os.path.normpath(value))
+                        if path.startswith(proj_dir):
+                            value = path[lp:]
+                            values.add(value)
+
+            docs = self.session.get_documents(
+                COLLECTION_CURRENT,
+                document_ids=list(values),
+                fields=[TAG_FILENAME, TAG_HISTORY],
+                as_list=True,
+            )
+            used = False
+            orphan_files = set()
+            for doc in docs:
+                if doc[1] and hist_id == doc[1]:
+                    if doc[0].startswith("scripts/") or not os.path.exists(
+                        os.path.join(self.folder, doc[0])
+                    ):
+                        # script files are "weak" and should not prevent
+                        # brick deletion.
+                        # non-existing files can be cleared too.
+                        orphan_files.add(doc[0])
+                        continue
+                    used = True
+                    used_hist.add(hist_id)
+                    break
+            if not used:
+                orphan_hist.add(hist_id)
+                orphan_bricks.update(hist[1])
+                orphan_weak_files.update(orphan_files)
+
+        return orphan_hist, orphan_bricks, orphan_weak_files
+
+    def get_orphan_nonexsiting_files(self):
+        """
+        Get orphan files which do not exist from the database
+        """
+        # filter_query = '{Bricks} == None'
+        # docs = self.session.filter_documents(
+        # COLLECTION_CURRENT, filter_query, fields=[TAG_FILENAME],
+        # as_list=True)
+        docs = self.session.get_documents(
+            COLLECTION_CURRENT, fields=[TAG_FILENAME, TAG_BRICKS], as_list=True
+        )
+        orphan = set()
+        for doc in docs:
+            if doc[1]:
+                bricks = list(
+                    self.session.get_documents(
+                        COLLECTION_BRICK,
+                        document_ids=doc[1],
+                        fields=[BRICK_ID],
+                        as_list=True,
+                    )
+                )
+                if bricks:
+                    continue
+            if not os.path.exists(os.path.join(self.folder, doc[0])):
+                orphan.add(doc[0])
+        return orphan
+
     def getSortedTag(self):
         """Return the sorted tag of the project.
 
         :returns: string of the sorted tag of the project if it's not Unnamed
                   project, otherwise empty string
         """
 
@@ -653,15 +1119,14 @@
             self.filters.append(filter_object)
 
     def loadProperties(self):
         """Load the properties file."""
         with open(
             os.path.join(self.folder, "properties", "properties.yml"), "r"
         ) as stream:
-
             try:
                 if verCmp(yaml.__version__, "5.1", "sup"):
                     return yaml.load(stream, Loader=yaml.FullLoader)
                 else:
                     return yaml.load(stream)
 
             except yaml.YAMLError as exc:
@@ -676,16 +1141,17 @@
             - add_tag
             - remove_tags
             - add_scans
             - modified_values
             - modified_visibilities
         """
         # To avoid circular imports
-        from populse_mia.user_interface.data_browser.data_browser import \
-            not_defined_value
+        from populse_mia.user_interface.data_browser.data_browser import (
+            not_defined_value,
+        )
 
         # We can redo if we have an action to make again
         if len(self.redos) > 0:
             to_redo = self.redos.pop()
             self.undos.append(to_redo)
             self.unsavedModifications = True
             # We pop the redo action in the undo stack
@@ -782,16 +1248,16 @@
                         value_to_add[3],
                     )
                 table.add_rows(
                     self.session.get_documents_names(COLLECTION_CURRENT)
                 )
 
             # if action == "remove_scans":
-            #     # To remove a scan, we only need the FileName of the scan
-            #     # The second element is the list of removed scans (Path class)
+            #     To remove a scan, we only need the FileName of the scan
+            #     The second element is the list of removed scans (Path class)
             #     scans_removed = to_redo[1]
             #     for i in range(0, len(scans_removed)):
             #         # We reput each scan, keeping the same values
             #         scan_to_remove = getattr(
             #             scans_removed[i], TAG_FILENAME)
             #         self.session.remove_document(
             #             COLLECTION_CURRENT, scan_to_remove)
@@ -882,14 +1348,29 @@
             self.session.add_value(
                 COLLECTION_INITIAL,
                 valueToReput[0],
                 valueToReput[1],
                 valueToReput[3],
             )
 
+    def saveConfig(self):
+        """Save the changes in the properties file."""
+
+        with open(
+            os.path.join(self.folder, "properties", "properties.yml"),
+            "w",
+            encoding="utf8",
+        ) as configfile:
+            yaml.dump(
+                self.properties,
+                configfile,
+                default_flow_style=False,
+                allow_unicode=True,
+            )
+
     def save_current_filter(self, custom_filters):
         """Save the current filter.
 
         :param custom_filters: The customized filter
         """
 
         from PyQt5.QtWidgets import QMessageBox
@@ -908,15 +1389,15 @@
         if not os.path.exists(filters_path):
             os.mkdir(filters_path)
 
         filter_name = self.getFilterName()
 
         # We save the filter only if we have a filter name from
         # populse_mia.e popup
-        if filter_name != None:
+        if filter_name is not None:
             file_path = os.path.join(filters_path, filter_name + ".json")
 
             if os.path.exists(file_path):
                 # Filter already exists
                 msg = QMessageBox()
                 msg.setIcon(QMessageBox.Warning)
                 msg.setText("The filter already exists in the project")
@@ -927,43 +1408,27 @@
                 msg.setStandardButtons(QMessageBox.Ok)
                 msg.buttonClicked.connect(msg.close)
                 msg.exec()
 
             else:
                 # Json filter file written
                 with open(file_path, "w") as outfile:
-
                     new_filter = Filter(
                         filter_name,
                         self.currentFilter.nots,
                         self.currentFilter.values,
                         self.currentFilter.fields,
                         self.currentFilter.links,
                         self.currentFilter.conditions,
                         self.currentFilter.search_bar,
                     )
 
                     json.dump(new_filter.json_format(), outfile)
                     self.filters.append(new_filter)
 
-    def saveConfig(self):
-        """Save the changes in the properties file."""
-
-        with open(
-            os.path.join(self.folder, "properties", "properties.yml"),
-            "w",
-            encoding="utf8",
-        ) as configfile:
-            yaml.dump(
-                self.properties,
-                configfile,
-                default_flow_style=False,
-                allow_unicode=True,
-            )
-
     def saveModifications(self):
         """Save the pending operations of the project (actions
         still not saved).
         """
 
         self.saveConfig()
         self.unsavedModifications = False
@@ -1025,16 +1490,17 @@
             - remove_tags
             - add_scans
             - modified_values
             - modified_visibilities
         """
 
         # To avoid circular imports
-        from populse_mia.user_interface.data_browser.data_browser import \
-            not_defined_value
+        from populse_mia.user_interface.data_browser.data_browser import (
+            not_defined_value,
+        )
 
         # We can undo if we have an action to revert
         if len(self.undos) > 0:
             to_undo = self.undos.pop()
             # We pop the undo action in the redo stack
             self.redos.append(to_undo)
             # The first element of the list is the type of action
@@ -1106,17 +1572,17 @@
                     )
                     table.removeRow(table.get_scan_row(scan_to_remove))
                     table.scans_to_visualize.remove(scan_to_remove)
                 table.itemChanged.disconnect()
                 table.update_colors()
                 table.itemChanged.connect(table.change_cell_color)
             # if action == "remove_scans":
-            #     # To reput a removed scan, we need the scans names,
-            #     # and all the values associated
-            #     # The second element is the list of removed scans (Scan class)
+            #     To reput a removed scan, we need the scans names,
+            #     and all the values associated
+            #     The second element is the list of removed scans (Scan class)
             #     scans_removed = to_undo[1]
             #     for i in range(0, len(scans_removed)):
             #         # We reput each scan, keeping the same values
             #         scan_to_reput = scans_removed[i]
             #         self.session.add_document(
             #             COLLECTION_CURRENT, getattr(
             #                 scan_to_reput, TAG_FILENAME))
@@ -1229,68 +1695,14 @@
             pass
 
     def unsaveModifications(self):
         """Unsave the pending operations of the project."""
 
         self.unsavedModifications = False
 
-    def files_in_project(self, files):
-        """
-        Return values in files that are file / directory names within the
-        project folder.
-
-        `files` are walked recursively and can be, or contain, lists, tuples,
-        sets, dicts (only dict `values()` are considered). Dict keys are
-        dropped and all filenames are merged into a single set.
-
-        The returned value is a set of filenames (str).
-        """
-        proj_dir = os.path.join(
-            os.path.abspath(os.path.normpath(self.folder)), ""
-        )
-        pl = len(proj_dir)
-
-        values = set()
-        tval = [files]
-        while tval:
-            value = tval.pop(0)
-            if isinstance(value, (list, tuple, set)):
-                tval += value
-                continue
-            if isinstance(value, dict):
-                tval += value.values()
-                continue
-            if not isinstance(value, str):
-                continue
-            aval = os.path.abspath(os.path.normpath(value))
-            if not aval.startswith(proj_dir):
-                continue
-
-            values.add(aval[pl:])
-
-        return values
-
-    def get_data_history(self, path):
-        """
-        Get the processing history for the given data file.
-
-        The history dict contains several elements:
-
-        - `parent_files`: set of other data used (directy or indirectly) to
-          produce the data.
-        - `processes`: processing bricks set from each ancestor data which
-          lead to the given one. Elements are process (brick) UUIDs.
-
-        :return: history (dict)
-        """
-
-        from . import data_history_inspect
-
-        return data_history_inspect.get_data_history(path, self)
-
     def update_data_history(self, data):
         """
         Cleanup earlier history of given data by removing from their bricks
         list those which correspond to obsolete runs (data has been re-written
         by more recent runs). This function only updates data status (bricks
         list), it does not remove obsolete bricks from the database.
 
@@ -1338,395 +1750,123 @@
                     )
 
         for bricks in scan_bricks.values():
             if bricks:
                 obsolete.update(brick for brick in bricks if brick not in used)
         return obsolete
 
-    def finished_bricks(self, engine, pipeline=None, include_done=False):
-        """ """
-        bricks = self.get_finished_bricks_in_workflows(engine)
-        if pipeline:
-            pbricks = self.get_finished_bricks_in_pipeline(engine, pipeline)
-            pbricks.update(bricks)
-            bricks = pbricks
-
-        # filter jobs actually in MIA database
-        docs = self.session.get_documents(
-            COLLECTION_BRICK,
-            document_ids=list(bricks.keys()),
-            fields=[BRICK_ID, BRICK_EXEC, BRICK_OUTPUTS],
-            as_list=True,
-        )
-        docs = {
-            brid: {"brick_exec": brick_exec, "outputs": outputs}
-            for brid, brick_exec, outputs in docs
-            if include_done or brick_exec == "Not Done"
-        }
-
-        def updated(d1, d2):
-            d1.update(d2)
-            return d1
-
-        bricks = {
-            brid: updated(value, docs[brid])
-            for brid, value in bricks.items()
-            if brid in docs
-        }
+    def update_db_for_paths(self, new_path=None):
+        """Update the history and brick tables with a new project file.
 
-        # get complete list of outputs to be updated in the database
-        outputs = set()
-        proj_dir = os.path.join(
-            os.path.abspath(os.path.normpath(self.folder)), ""
-        )
-        lp = len(proj_dir)
-
-        def _update_set(outputs, output):
-            """update the outputs set with file/dir names in output, relative
-            to the project directory"""
-            todo = [output]
-            while todo:
-                output = todo.pop(0)
-                if isinstance(output, (list, set, tuple)):
-                    todo += output
-                elif isinstance(output, str):
-                    path = os.path.abspath(os.path.normpath(output))
-                    if path.startswith(proj_dir):  # and os.path.exists(path):
-                        # record only existing files
-                        output = path[lp:]
-                        outputs.add(output)
-
-        procs = {}
-
-        for brid, brdesc in bricks.items():
-            out_data = brdesc["outputs"]
-            if out_data:
-                for param, output in out_data.items():
-                    _update_set(outputs, output)
-
-        return {"bricks": bricks, "outputs": outputs}
-
-    def get_finished_bricks_in_workflows(self, engine):
-        """ """
-        import soma_workflow.client as swclient
-        from soma_workflow import constants
-
-        swm = engine.study_config.modules["SomaWorkflowConfig"]
-        swm.connect_resource(engine.connected_to())
-        controller = swm.get_workflow_controller()
-
-        jobs = {}
-
-        for wf_id in controller.workflows():
-            wf_st = controller.workflow_elements_status(wf_id)
-
-            finished_jobs = {}
-            for job_st in wf_st[0]:
-                job_id = job_st[0]
-                if job_st[1] != "done" or job_st[3][0] != "finished_regularly":
-                    continue
-                finished_jobs[job_id] = job_st
-
-            if not finished_jobs:
-                continue
-
-            wf = controller.workflow(wf_id)
-            for job in wf.jobs:
-                brid = getattr(job, "uuid", None)
-                if not brid:
-                    continue
-                # get engine job
-                ejob = wf.job_mapping[job]
-                job_id = ejob.job_id
-                status = finished_jobs.get(job_id, None)
-                if not status:
-                    continue
-
-                jobs[brid] = {
-                    "workflow": wf_id,
-                    "job": job,
-                    "job_id": job_id,
-                    "swf_status": status,
-                }
-
-        return jobs
-
-    def get_finished_bricks_in_pipeline(self, engine, pipeline):
-        """ """
-        if not isinstance(pipeline, Pipeline):
-            # it's a single process...
-            procs = {}
-            brid = getattr(pipeline, "uuid", None)
-            if brid is not None:
-                procs[brid] = {"process": pipeline}
-
-            return procs
-
-        nodes_list = [
-            n
-            for n in pipeline.nodes.items()
-            if n[0] != ""
-            and pipeline_tools.is_node_enabled(pipeline, n[0], n[1])
-        ]
-
-        all_nodes = list(nodes_list)
-        while nodes_list:
-            node_name, node = nodes_list.pop(0)
-            if hasattr(node, "process"):
-                process = node.process
-
-                if isinstance(node, PipelineNode):
-                    new_nodes = [
-                        n
-                        for n in process.nodes.items()
-                        if n[0] != ""
-                        and pipeline_tools.is_node_enabled(process, n[0], n[1])
-                    ]
-                    nodes_list += new_nodes
-                    all_nodes += new_nodes
-
-        procs = {}
-
-        for node_name, node in all_nodes:
-            if isinstance(node, ProcessNode):
-                process = node.process
-                brid = getattr(process, "uuid", None)
-                if brid is not None:
-                    procs[brid] = {"process": process}
-
-        return procs
-
-    def get_orphan_bricks(self, bricks=None):
-        """ """
-        orphan = set()
-        orphan_weak_files = set()
-        used_bricks = set()
-        if bricks is not None and not isinstance(bricks, list):
-            bricks = list(bricks)
-
-        brick_docs = self.session.get_document(
-            COLLECTION_BRICK,
-            document_ids=bricks,
-            fields=[BRICK_ID, BRICK_OUTPUTS],
-            as_list=True,
-        )
-
-        proj_dir = os.path.join(
-            os.path.abspath(os.path.normpath(self.folder)), ""
-        )
-        lp = len(proj_dir)
-
-        for brick in brick_docs:
-            brid = brick[0]
-            if brid is None:
-                continue
-            if brick[1] is None:
-                orphan.add(brid)
-                continue
-
-            todo = list(brick[1].values())
-            values = set()
-            while todo:
-                value = todo.pop(0)
-                if isinstance(value, (list, set, tuple)):
-                    todo += value
-                elif isinstance(value, str):
-                    path = os.path.abspath(os.path.normpath(value))
-                    if path.startswith(proj_dir):
-                        value = path[lp:]
-                        values.add(value)
-            docs = self.session.get_documents(
-                COLLECTION_CURRENT,
-                document_ids=list(values),
-                fields=[TAG_FILENAME, TAG_BRICKS],
-                as_list=True,
-            )
-            used = False
-            orphan_files = set()
-            for doc in docs:
-                if doc[1] and brid in doc[1]:
-                    if doc[0].startswith("scripts/") or not os.path.exists(
-                        os.path.join(self.folder, doc[0])
-                    ):
-                        # script files are "weak" and should not prevent
-                        # brick deletion.
-                        # non-existing files can be cleared too.
-                        orphan_files.add(doc[0])
-                        continue
-                    used = True
-                    used_bricks.add(brid)
-                    break
-            if not used:
-                orphan.add(brid)
-                orphan_weak_files.update(orphan_files)
-        if bricks:
-            orphan.update(brid for brid in bricks if brid not in used_bricks)
-
-        return (orphan, orphan_weak_files)
-
-    def cleanup_orphan_bricks(self, bricks=None):
+        Necessary when a project is renamed or when a new project is loaded
+        from outside.
         """
-        Remove orphan bricks from the database
-        """
-        obsolete, orphan_files = self.get_orphan_bricks(bricks)
-        print("really orphan:", obsolete)
-        for brick in obsolete:
-            print("remove obsolete brick:", brick)
-            try:
-                self.session.remove_document(COLLECTION_BRICK, brick)
-            except ValueError:
-                pass  # malformed database, the brick doesn't exist
-        for doc in orphan_files:
-            print("remove orphan file:", doc)
-            try:
-                self.session.remove_document(COLLECTION_CURRENT, doc)
-                self.session.remove_document(COLLECTION_INITIAL, doc)
-            except ValueError:
-                pass  # malformed database, the file doesn't exist
-            if os.path.exists(os.path.join(self.folder, doc)):
-                os.unlink(os.path.join(self.folder, doc))
-
-    def get_orphan_history(self):
-        """ """
-        orphan_hist = set()
-        orphan_bricks = set()
-        orphan_weak_files = set()
-        used_hist = set()
-
-        hist_docs = self.session.get_documents(
+        hist_brick = self.session.get_documents(
             COLLECTION_HISTORY,
             fields=[HISTORY_ID, HISTORY_BRICKS],
             as_list=True,
         )
 
-        proj_dir = os.path.join(
-            os.path.abspath(os.path.normpath(self.folder)), ""
-        )
-        lp = len(proj_dir)
-
-        for hist in hist_docs:
-            hist_id = hist[0]
-            if hist_id is None:
-                continue
-            if hist[1] is None:
-                orphan_hist.add(hist_id)
-                continue
+        if hist_brick is not None and hist_brick != []:
+            old_path = None
+            force_break_loop = False
+
+            for list_hist_brick in hist_brick:
+                if list_hist_brick[0] is not None:
+                    for brick_id in list_hist_brick[1]:
+                        if brick_id is not None:
+                            inputs = self.session.get_value(
+                                COLLECTION_BRICK, brick_id, BRICK_INPUTS
+                            )
+                            old_path = inputs.get("output_directory")
+
+                            if old_path is not None:
+                                tmp = old_path.partition(
+                                    os.path.join("data", "derived_data")
+                                )
+
+                                if tmp[0] != old_path:
+                                    old_path = tmp[0]
+                                    force_break_loop = True
+                                    break
 
-            values = set()
-            for brid in hist[1]:
-                brick_doc = self.session.get_value(
-                    COLLECTION_BRICK, brid, BRICK_OUTPUTS
-                )
-                if brick_doc is None:
-                    todo = []
-                else:
-                    todo = list(brick_doc.values())
+                if force_break_loop:
+                    break
 
-                while todo:
-                    value = todo.pop(0)
-                    if isinstance(value, (list, set, tuple)):
-                        todo += value
-                    elif isinstance(value, str):
-                        path = os.path.abspath(os.path.normpath(value))
-                        if path.startswith(proj_dir):
-                            value = path[lp:]
-                            values.add(value)
+        elif hist_brick == []:
+            old_path = False
 
-            docs = self.session.get_documents(
-                COLLECTION_CURRENT,
-                document_ids=list(values),
-                fields=[TAG_FILENAME, TAG_HISTORY],
-                as_list=True,
+        if old_path is None:
+            print(
+                "\nUpdating the paths in the database when renaming the "
+                "project:\n"
+                "No changes in the HISTORY and BRICK collections are made "
+                "because the output_directory has not been found. The "
+                "renamed project may be corrupted ...!\n"
             )
-            used = False
-            orphan_files = set()
-            for doc in docs:
-                if doc[1] and hist_id == doc[1]:
-                    if doc[0].startswith("scripts/") or not os.path.exists(
-                        os.path.join(self.folder, doc[0])
-                    ):
-                        # script files are "weak" and should not prevent
-                        # brick deletion.
-                        # non-existing files can be cleared too.
-                        orphan_files.add(doc[0])
-                        continue
-                    used = True
-                    used_hist.add(hist_id)
-                    break
-            if not used:
-                orphan_hist.add(hist_id)
-                orphan_bricks.update(hist[1])
-                orphan_weak_files.update(orphan_files)
-
-        return orphan_hist, orphan_bricks, orphan_weak_files
 
-    def cleanup_orphan_history(self):
-        """
-        Remove orphan bricks from the database
-        """
-        obs_hist, obs_bricks, orphan_files = self.get_orphan_history()
-        print("orphan histories:", obs_hist)
-        print("orphan bricks:", obs_bricks)
-        for hist in obs_hist:
-            print("remove obsolete history:", hist)
-            try:
-                self.session.remove_document(COLLECTION_HISTORY, hist)
-            except ValueError:
-                pass  # malformed database, the brick doesn't exist
-        for brick in obs_bricks:
-            print("remove obsolete brick:", brick)
-            try:
-                self.session.remove_document(COLLECTION_BRICK, brick)
-            except ValueError:
-                pass  # malformed database, the brick doesn't exist
-        for doc in orphan_files:
-            print("remove orphan file:", doc)
-            try:
-                self.session.remove_document(COLLECTION_CURRENT, doc)
-                self.session.remove_document(COLLECTION_INITIAL, doc)
-            except ValueError:
-                pass  # malformed database, the file doesn't exist
-            if os.path.exists(os.path.join(self.folder, doc)):
-                os.unlink(os.path.join(self.folder, doc))
+        if old_path is False:
+            # The project has no calculation history: There is nothing to do
+            # and no message to print.
+            pass
 
-    def get_orphan_nonexsiting_files(self):
-        """
-        Get orphan files which do not exist from the database
-        """
-        # filter_query = '{Bricks} == None'
-        # docs = self.session.filter_documents(
-        # COLLECTION_CURRENT, filter_query, fields=[TAG_FILENAME],
-        # as_list=True)
-        docs = self.session.get_documents(
-            COLLECTION_CURRENT, fields=[TAG_FILENAME, TAG_BRICKS], as_list=True
-        )
-        orphan = set()
-        for doc in docs:
-            if doc[1]:
-                bricks = list(
-                    self.session.get_documents(
-                        COLLECTION_BRICK,
-                        document_ids=doc[1],
-                        fields=[BRICK_ID],
-                        as_list=True,
-                    )
+        else:
+            if new_path is None:
+                new_path = os.path.join(
+                    os.path.abspath(os.path.normpath(self.folder)), ""
                 )
-                if bricks:
-                    continue
-            if not os.path.exists(os.path.join(self.folder, doc[0])):
-                orphan.add(doc[0])
-        return orphan
 
-    def cleanup_orphan_nonexisting_files(self):
-        """
-        Remove orphan files which do not exist from the database
-        """
-        orphan_files = self.get_orphan_nonexsiting_files()
-        for doc in orphan_files:
-            print("remove orphan file:", doc)
-            try:
-                self.session.remove_document(COLLECTION_CURRENT, doc)
-                self.session.remove_document(COLLECTION_INITIAL, doc)
-            except ValueError:
-                pass  # malformed database, the file doesn't exist
-            if os.path.exists(os.path.join(self.folder, doc)):
-                os.unlink(os.path.join(self.folder, doc))
+            print(
+                "\nUpdating the paths in the database when renaming the "
+                "project:\n"
+                "Changing {0} with {1} ...!\n".format(old_path, new_path)
+            )
+
+            for list_hist_brick in hist_brick:
+                if list_hist_brick[0] is not None:
+                    hist_id = list_hist_brick[0]
+                    old_pipeline_xml = self.session.get_value(
+                        COLLECTION_HISTORY, hist_id, HISTORY_PIPELINE
+                    )
+                    new_pipeline_xml = old_pipeline_xml.replace(
+                        old_path, new_path
+                    )
+                    self.session.set_value(
+                        COLLECTION_HISTORY,
+                        hist_id,
+                        HISTORY_PIPELINE,
+                        new_pipeline_xml,
+                    )
+
+                    if list_hist_brick[1] is not None:
+                        for brick_id in list_hist_brick[1]:
+                            if brick_id is not None:
+                                inputs = self.session.get_value(
+                                    COLLECTION_BRICK, brick_id, BRICK_INPUTS
+                                )
+
+                                inputs_string = json.dumps(inputs)
+                                new_inputs_string = inputs_string.replace(
+                                    old_path, new_path
+                                )
+                                new_inputs = json.loads(new_inputs_string)
+                                self.session.set_value(
+                                    COLLECTION_BRICK,
+                                    brick_id,
+                                    BRICK_INPUTS,
+                                    new_inputs,
+                                )
+                                outputs = self.session.get_value(
+                                    COLLECTION_BRICK, brick_id, BRICK_OUTPUTS
+                                )
+
+                                ouputs_string = json.dumps(outputs)
+                                new_outputs_string = ouputs_string.replace(
+                                    old_path, new_path
+                                )
+                                new_ouputs = json.loads(new_outputs_string)
+                                self.session.set_value(
+                                    COLLECTION_BRICK,
+                                    brick_id,
+                                    BRICK_OUTPUTS,
+                                    new_ouputs,
+                                )
```

### Comparing `populse_mia-2.2.2/python/populse_mia/data_manager/project_properties.py` & `populse_mia-2.3.1/python/populse_mia/data_manager/project_properties.py`

 * *Files 4% similar despite different names*

```diff
@@ -17,15 +17,15 @@
 
 import os
 
 import yaml
 from packaging import version
 
 # Populse_MIA imports
-from populse_mia.software_properties import Config, verCmp
+from populse_mia.software_properties import Config
 
 
 class SavedProjects:
     """Class that handles all the projects that have been saved in the
     software.
 
     .. Methods:
@@ -70,15 +70,14 @@
 
         :param newPath: new project's path to add
 
         :returns: the new path's list (pathsList attribute)
 
         """
         if self.pathsList:
-
             if newPath not in self.pathsList:
                 self.pathsList.insert(0, newPath)
 
             elif newPath != self.pathsList[0]:
                 self.pathsList.remove(newPath)
                 self.pathsList.insert(0, newPath)
 
@@ -97,37 +96,33 @@
 
         :returns: the dictionary
 
         """
         config = Config()
 
         try:
-
             with open(
                 os.path.join(config.get_config_path(), "saved_projects.yml"),
                 "r",
             ) as stream:
-
                 try:
                     if version.parse(yaml.__version__) > version.parse("5.1"):
                         return yaml.load(stream, Loader=yaml.FullLoader)
                     else:
                         return yaml.load(stream)
 
                 except yaml.YAMLError as exc:
                     print(exc)
 
-        except FileNotFoundError as exc:
-
+        except FileNotFoundError:
             with open(
                 os.path.join(config.get_config_path(), "saved_projects.yml"),
                 "w",
             ) as stream:
                 yaml.dump({"paths": []}, stream, default_flow_style=False)
-
                 return {"paths": []}
 
     def removeSavedProject(self, path):
         """Removes a saved project from the saved_projects.yml file.
 
         :param path: path of the saved project to remove
 
@@ -140,20 +135,18 @@
 
     def saveSavedProjects(self):
         """Saves the savedProjects dictionary to the saved_projects.yml
         file."""
 
         config = Config()
 
-        with (
-            open(
-                os.path.join(config.get_config_path(), "saved_projects.yml"),
-                "w",
-                encoding="utf8",
-            )
+        with open(
+            os.path.join(config.get_config_path(), "saved_projects.yml"),
+            "w",
+            encoding="utf8",
         ) as configfile:
             yaml.dump(
                 self.savedProjects,
                 configfile,
                 default_flow_style=False,
                 allow_unicode=True,
             )
```

### Comparing `populse_mia-2.2.2/python/populse_mia/info.py` & `populse_mia-2.3.1/python/populse_mia/info.py`

 * *Files 2% similar despite different names*

```diff
@@ -17,18 +17,18 @@
 
 import os
 import subprocess
 import sys
 
 # Current version
 version_major = 2
-version_minor = 2
-version_micro = 2
-version_extra = ""  # leave empty for release
-# version_extra = ""
+version_minor = 3
+version_micro = 1
+# version_extra = "dev"  # leave empty for release
+version_extra = ""
 
 # Expected by setup.py: string of form "X.Y.Z"
 if version_extra:
     __version__ = "{0}.{1}.{2}-{3}".format(
         version_major, version_minor, version_micro, version_extra
     )
 
@@ -137,14 +137,15 @@
     "lark-parser >= 0.7.0, < 1.0.0",
     "matplotlib",
     "mia-processes >= 2.2.0",
     "nibabel",
     "nipype",
     "pillow",
     "populse-db >= 2.1.0",
+    "pre-commit",
     "pyqt5",
     "python-dateutil",
     "pyyaml",
     "scikit-image",
     "scipy",
     "snakeviz",
     "soma_workflow",
```

### Comparing `populse_mia-2.2.2/python/populse_mia/main.py` & `populse_mia-2.3.1/python/populse_mia/main.py`

 * *Files 6% similar despite different names*

```diff
@@ -25,35 +25,52 @@
 ###############################################################################
 
 import copy
 import inspect
 import os
 import pkgutil
 import sys
+import traceback
 from functools import partial
 from pathlib import Path
 
 import yaml
 from packaging import version
-from PyQt5 import QtCore
+
 # PyQt5 imports
+from PyQt5 import QtCore
 from PyQt5.QtCore import QDir, QLockFile, Qt
-from PyQt5.QtWidgets import (QApplication, QDialog, QFileDialog, QHBoxLayout,
-                             QLabel, QLineEdit, QMessageBox, QPushButton,
-                             QVBoxLayout)
+from PyQt5.QtWidgets import (
+    QApplication,
+    QDialog,
+    QFileDialog,
+    QHBoxLayout,
+    QLabel,
+    QLineEdit,
+    QMessageBox,
+    QPushButton,
+    QScrollArea,
+    QVBoxLayout,
+    QWidget,
+)
 
 pypath = []
 
 # Disables any etelemetry check.
 if "NO_ET" not in os.environ:
     os.environ["NO_ET"] = "1"
 
 if "NIPYPE_NO_ET" not in os.environ:
     os.environ["NIPYPE_NO_ET"] = "1"
 
+# General QApplication class instantiation
+QtCore.QCoreApplication.setAttribute(QtCore.Qt.AA_ShareOpenGLContexts)
+app = QApplication(sys.argv)
+QApplication.setOverrideCursor(Qt.WaitCursor)
+
 # Adding the populse projects path to sys.path, if in developer mode
 if (
     not os.path.dirname(os.path.dirname(os.path.realpath(__file__)))
     in sys.path
 ):  # "developer" mode
     DEV_MODE = True
     root_dev_dir = os.path.dirname(
@@ -107,15 +124,14 @@
         )
         print("  . Using capsul package from {} ...".format(capsul_dev_dir))
         sys.path.insert(i, capsul_dev_dir)
         pypath.append(capsul_dev_dir)
         del capsul_dev_dir
 
     else:
-
         try:
             import capsul
 
         except Exception:
             pass
 
         else:
@@ -202,15 +218,14 @@
             "...".format(mia_processes_dev_dir)
         )
         sys.path.insert(i, mia_processes_dev_dir)
         pypath.append(mia_processes_dev_dir)
         del mia_processes_dev_dir
 
     else:
-
         try:
             import mia_processes
 
         except Exception:
             pass
 
         else:
@@ -306,76 +321,83 @@
 except (ImportError, AttributeError) as e:
     pkg_error.append("mia_processes")
     print("\n" + "*" * 37)
     print("MIA warning {0}: {1}".format(e.__class__, e))
     print("*" * 37 + "\n")
 
 if len(pkg_error) > 0:
-    app = QApplication(sys.argv)
     msg = QMessageBox()
     msg.setIcon(QMessageBox.Warning)
     msg.setWindowTitle("populse_mia -  warning: ImportError!")
 
     if len(pkg_error) == 1:
         msg.setText(
-            "{0} package not found !\nPlease install "
-            "the package and "
-            "start again mia ...".format(pkg_error[0])
+            "An issue has been detected with the {0} package. "
+            "Please (re)install this package and/or fix the "
+            "problems displayed in the standard output. "
+            "Then, start again Mia ...".format(pkg_error[0])
         )
 
     elif len(pkg_error) == 2:
         msg.setText(
-            "{0} and {1} packages not found !\n"
-            "Please install the packages and start again mia "
-            "...".format(pkg_error[0], pkg_error[1])
+            "An issue has been detected with the {0} and {1} packages. "
+            "Please (re)install these package and/or fix the "
+            "problems displayed in the standard output. "
+            "Then, start again Mia ...".format(pkg_error[0], pkg_error[1])
         )
 
     else:
         msg.setText(
-            "{0}, {1} and {2} packages not found !\n"
-            "Please install the packages and start again mia "
-            "...".format(pkg_error[0], pkg_error[1], pkg_error[2])
+            "An issue has been detected with the {0}, {1} and {2} packages. "
+            "Please (re)install these package and/or fix the "
+            "problems displayed in the standard output. "
+            "Then, start again Mia ...".format(
+                pkg_error[0], pkg_error[1], pkg_error[2]
+            )
         )
 
     msg.setStandardButtons(QMessageBox.Ok)
     msg.buttonClicked.connect(msg.close)
     msg.exec()
-    del app
     sys.exit(1)
 
 # Now that populse projects paths have been, if necessary, added
 # to sys.path, we can import these projects:
 
-import capsul.api as capsul_api
 # capsul imports
-from capsul.api import get_process_instance
+import capsul.api as capsul_api  # noqa E402
+from capsul.api import get_process_instance  # noqa E402
+
 # soma-base imports
-from soma.qt_gui.qtThread import QtThreadCall
+from soma.qt_gui.qtThread import QtThreadCall  # noqa E402
 
-from populse_mia.data_manager.project import Project
-from populse_mia.data_manager.project_properties import SavedProjects
-from populse_mia.software_properties import Config
 # populse_mia imports
-from populse_mia.user_interface.main_window import MainWindow
-from populse_mia.utils.utils import check_python_version
+from populse_mia.data_manager.project import Project  # noqa E402
+from populse_mia.data_manager.project_properties import (  # noqa E402
+    SavedProjects,
+)
+from populse_mia.software_properties import Config  # noqa E402
+from populse_mia.user_interface.main_window import MainWindow  # noqa E402
+from populse_mia.utils.utils import check_python_version  # noqa E402
 
 main_window = None
 
 
 class PackagesInstall:
     """Help to make available a pipeline package in the Mia pipeline library,
     in a recursive way.
 
     :Contains:
         :Method:
             - __init__: constructor
             - add_package: provide recursive representation of a package
     """
 
-    _already_loaded = {  # these classes should not appear in available processes
+    _already_loaded = {  # these classes should not appear
+        # in available processes
         "mia_processes.process_matlab.ProcessMatlab",
         "populse_mia.user_interface.pipeline_manager.process_mia.ProcessMIA",
         "capsul.process.process.Process",
         "capsul.process.process.NipypeProcess",
         "capsul.process.process.FileCopyProcess",
         "capsul.pipeline.pipeline_nodes.ProcessNode",
         "capsul.pipeline.pipeline_nodes.PipelineNode",
@@ -401,31 +423,28 @@
 
         # (filter out test modules)
         if (
             module_name
             and "test" not in module_name.split(".")
             and "tests" not in module_name.split(".")
         ):
-
             # reloading the package
             if module_name in sys.modules.keys():
                 del sys.modules[module_name]
 
             try:
                 __import__(module_name)
                 pkg = sys.modules[module_name]
 
                 for k, v in sorted(list(pkg.__dict__.items())):
-
                     if class_name and k != class_name:
                         continue
 
                     # checking each class in the package
                     if inspect.isclass(v):
-
                         if v in PackagesInstall._already_loaded:
                             continue
 
                         if hasattr(v, "__module__"):
                             vname = "%s.%s" % (v.__module__, v.__name__)
 
                         elif hasattr(v, "__package__"):
@@ -437,39 +456,35 @@
 
                         if vname in PackagesInstall._already_loaded:
                             continue
 
                         PackagesInstall._already_loaded.add(vname)
 
                         try:
-
                             try:
                                 get_process_instance(
                                     "%s.%s" % (module_name, v.__name__)
                                 )
 
                             except Exception:
-
                                 if v is capsul_api.Node or not issubclass(
                                     v, capsul_api.Node
                                 ):
                                     raise
 
                             # updating the tree's dictionary
                             path_list = module_name.split(".")
                             path_list.append(k)
                             pkg_iter = self.packages
 
                             for element in path_list:
-
                                 if element in pkg_iter.keys():
                                     pkg_iter = pkg_iter[element]
 
                                 else:
-
                                     if element is path_list[-1]:
                                         pkg_iter[element] = "process_enabled"
                                         print("Detected brick: ", element)
 
                                     else:
                                         pkg_iter[element] = {}
                                         pkg_iter = pkg_iter[element]
@@ -484,17 +499,15 @@
                     path is None
                     and hasattr(pkg, "__file__")
                     and os.path.basename(pkg.__file__).startswith("__init__.")
                 ):
                     path = [os.path.dirname(pkg.__file__)]
 
                 if path:
-
                     for _, modname, ispkg in pkgutil.iter_modules(path):
-
                         if modname == "__main__":
                             continue  # skip main
 
                         print(
                             "\nExploring subpackages of "
                             "{0}: {1} ...".format(
                                 module_name, str(module_name + "." + modname)
@@ -587,36 +600,31 @@
         """
 
         saved_projects_object = SavedProjects()
         saved_projects_list = copy.deepcopy(saved_projects_object.pathsList)
         deleted_projects = []
 
         for saved_project in saved_projects_list:
-
             if not os.path.isdir(saved_project):
                 deleted_projects.append(os.path.abspath(saved_project))
                 saved_projects_object.removeSavedProject(saved_project)
 
         return deleted_projects
 
     global main_window
 
     # useful for WebEngine
     try:
         # QtWebEngineWidgets need to be imported before QCoreApplication
         # instance is created (used later)
-        from soma.qt_gui.qt_backend import QtWebEngineWidgets
+        from soma.qt_gui.qt_backend import QtWebEngineWidgets  # noqa: F401
+
     except ImportError:
         pass  # QtWebEngineWidgets is not installed
 
-    QtCore.QCoreApplication.setAttribute(QtCore.Qt.AA_ShareOpenGLContexts)
-
-    app = QApplication(sys.argv)
-
-    QApplication.setOverrideCursor(Qt.WaitCursor)
     sys.excepthook = _my_excepthook
 
     # working from the scripts directory
     os.chdir(os.path.dirname(os.path.realpath(__file__)))
     lock_file = QLockFile(
         QDir.temp().absoluteFilePath("lock_file_populse_mia.lock")
     )
@@ -634,16 +642,15 @@
     deleted_projects = _verify_saved_projects()
     project = Project(None, True)
     main_window = MainWindow(project, deleted_projects=deleted_projects)
     main_window.setAttribute(Qt.WA_DeleteOnClose | Qt.WA_QuitOnClose)
     main_window.show()
 
     # make sure to instantiate the QtThreadCall singleton from the main thread
-    qt_thread_call = QtThreadCall()
-
+    QtThreadCall()
     app.exec()
 
 
 def main():
     """Make basic configuration check then actual launch of mia.
 
     Checks if Mia is called from the site/dist packages (user mode) or from a
@@ -651,17 +658,17 @@
     function, then the launch_mia() function (Mia's real launch !!). When
     Mia is exited, if the ~/.populse_mia/configuration.yml exists, sets the
     dev_mode parameter to False.
 
     - If launched from a cloned git repository ('developer mode'):
         - the mia_path is the cloned git repository.
     - If launched from the site/dist packages ('user mode'):
-        - if the file ~/.populse_mia/configuration.yml file is not found or does
-          not exist or if the returned mia_path parameter is incorrect, a
-          valid mia_path path is requested from the user, in order
+        - if the file ~/.populse_mia/configuration.yml file is not found or
+          does not exist or if the returned mia_path parameter is incorrect,
+          a valid mia_path path is requested from the user, in order
           to try to fix a corruption of this file.
 
     :Contains:
         :Private function:
             - _browse_mia_path: the user define the mia_path parameter
             - _verify_miaConfig: check the config and try to fix if necessary
     """
@@ -707,15 +714,14 @@
 
         :param dialog: QtWidgets.QDialog object ('msg' in the main function)
         """
 
         save_flag = False
 
         if DEV_MODE:  # "developer" mode
-
             try:
                 config = Config()
 
                 if not config.get_admin_hash():
                     config.set_admin_hash(
                         "60cfd1916033576b0f2368603fe612fb"
                         "78b8c20e4f5ad9cf39c9cf7e912dd282"
@@ -726,15 +732,14 @@
                     "\nMIA configuration settings could not be "
                     "recovered: {0} ...".format(e)
                 )
                 print("\nMIA is exiting ...\n")
                 sys.exit(1)
 
         elif dialog is not None:  # "user" mode only if problem
-
             mia_home_config = dict()
             mia_home_config["mia_user_path"] = dialog.file_line_edit.text()
             print("\nNew values in ~/.populse_mia/configuration.yml: ")
 
             for key, value in mia_home_config.items():
                 print("- {0}: {1}".format(key, value))
 
@@ -783,17 +788,15 @@
             if not config.get_admin_hash():
                 config.set_admin_hash(
                     "60cfd1916033576b0f2368603fe612fb"
                     "78b8c20e4f5ad9cf39c9cf7e912dd282"
                 )
 
         if "config" in locals():
-
             for key, value in config.config.items():
-
                 if value == "no":
                     save_flag = True
                     config.config[key] = False
 
                 if value == "yes":
                     save_flag = True
                     config.config[key] = True
@@ -805,27 +808,24 @@
         os.path.expanduser("~"), ".populse_mia", "configuration.yml"
     )
 
     if DEV_MODE:  # "developer" mode
         _verify_miaConfig()
 
     else:  # "user" mode
-
         try:
-
             if not os.path.exists(os.path.dirname(dot_mia_config)):
                 os.mkdir(os.path.dirname(dot_mia_config))
                 print(
                     "\nThe {0} directory is created "
                     "...".format(os.path.dirname(dot_mia_config))
                 )
 
             # Just to check if dot_mia_config file is well readable/writeable
             with open(dot_mia_config, "r") as stream:
-
                 if version.parse(yaml.__version__) > version.parse("5.1"):
                     mia_home_config = yaml.load(stream, Loader=yaml.FullLoader)
                 else:
                     mia_home_config = yaml.load(stream)
 
             with open(dot_mia_config, "w", encoding="utf8") as configfile:
                 yaml.dump(
@@ -842,15 +842,14 @@
                 "\nA problem has been detected when opening"
                 " the ~/.populse_mia/configuration.yml file"
                 " or with the parameters returned from this file: ",
                 e,
             )
 
             # open popup, user choose the path to .populse_mia/populse_mia dir
-            app = QApplication(sys.argv)
             msg = QDialog()
             msg.setWindowTitle("populse_mia - mia path selection")
             vbox_layout = QVBoxLayout()
             hbox_layout = QHBoxLayout()
             file_label = QLabel(
                 "Please select the MIA path (directory with\n "
                 "the processes, properties & resources "
@@ -867,15 +866,14 @@
             hbox_layout = QHBoxLayout()
             msg.ok_button = QPushButton("Ok")
             msg.ok_button.clicked.connect(partial(_verify_miaConfig, msg))
             hbox_layout.addWidget(msg.ok_button)
             vbox_layout.addLayout(hbox_layout)
             msg.setLayout(vbox_layout)
             msg.exec()
-            del app
 
         else:
             _verify_miaConfig()
 
     global pypath
 
     if DEV_MODE and pypath:
@@ -900,15 +898,14 @@
                 os.path.join("mia_processes", "python"),
                 os.path.join("soma-base", "python"),
                 os.path.join("soma-workflow", "python"),
                 os.path.join("populse_mia", "processes"),
             ]
 
             for i in pc["path"]:
-
                 if i not in pypath and not any(x in i for x in matches):
                     pypath.append(i)
 
         pc["path"] = pypath
         print("\nChanged python conf:", pc)
         config.update_capsul_config()
         config.saveConfig()
@@ -930,15 +927,16 @@
     user mode, these three libraries are automatically installed on the
     station. The idea is to use the versioning available with pypi
     (https://pypi.org/). Thus, it is sufficient for the user to change the
     version of the library installed on the station (pip install...) to
     also change the version available in Mia. Indeed, when starting Mia, the
     verify_processes function will install or update nipype and
     mia_processes libraries in the pipeline library. Currently, it is
-    mandatory to have nipype, capsul and mia_processes installed in the station.
+    mandatory to have nipype, capsul and mia_processes installed in the
+    station.
     All this information, as well as the installed versions and package
     paths are saved in the  mia_path/properties/process_config.yml file.
     When an upgrade or downgrade is performed for a package, the last
     configuration used by the user is kept (if a pipeline was visible, it
     remains so and vice versa). However, if a new pipeline is available in
     the new version it is automatically marked as visible in the library.
 
@@ -966,15 +964,14 @@
                  did not exist
         """
 
         if isinstance(old_dic, str):
             return True
 
         for key in old_dic:
-
             if key not in new_dic:
                 pass
 
             # keep the same configuration for the pipeline in new and old dic
             elif _deepCompDic(old_dic[str(key)], new_dic[str(key)]):
                 new_dic[str(key)] = old_dic[str(key)]
 
@@ -994,17 +991,15 @@
     )
     print(
         "\nChecking the installed version for nipype, "
         "mia_processes and capsul ..."
     )
 
     if os.path.isfile(proc_config):
-
         with open(proc_config, "r") as stream:
-
             if version.parse(yaml.__version__) > version.parse("5.1"):
                 proc_content = yaml.load(stream, Loader=yaml.FullLoader)
             else:
                 proc_content = yaml.load(stream)
 
     if (isinstance(proc_content, dict)) and ("Packages" in proc_content):
         othPckg = [
@@ -1012,22 +1007,19 @@
             for f in proc_content["Packages"]
             if f not in ["mia_processes", "nipype", "capsul"]
         ]
 
     # Checking that the packages used during the previous launch
     # of mia are still available
     if othPckg:
-
         for pckg in othPckg:
-
             try:
                 __import__(pckg)
 
             except ImportError as e:
-
                 # Try to update the sys.path for the processes/ directory
                 # currently used
                 if (
                     not (
                         os.path.relpath(
                             os.path.join(config.get_mia_path(), "processes")
                         )
@@ -1052,15 +1044,14 @@
 
                         # update the Paths parameter (processes/ directory
                         # currently used) saved later in the
                         # mia_path/properties/process_config.yml file
                         if ("Paths" in proc_content) and (
                             isinstance(proc_content["Paths"], list)
                         ):
-
                             if (
                                 not os.path.relpath(
                                     os.path.join(
                                         config.get_mia_path(), "processes"
                                     )
                                 )
                                 in proc_content["Paths"]
@@ -1109,15 +1100,14 @@
                             )
                         )
 
                     # If an exception is raised, ask the user to remove the
                     # package from the pipeline library or reload it
                     except ImportError as e:
                         print("\n{0}".format(e))
-                        app = QApplication(sys.argv)
                         msg = QMessageBox()
                         msg.setIcon(QMessageBox.Warning)
                         msg.setWindowTitle(
                             "populse_mia - warning: {0}".format(e)
                         )
                         msg.setText(
                             (
@@ -1137,29 +1127,27 @@
                                     )
                                 ),
                             )
                         )
                         msg.setStandardButtons(QMessageBox.Ok)
                         msg.buttonClicked.connect(msg.close)
                         msg.exec()
-                        del app
                         sys.path.remove(
                             os.path.abspath(
                                 os.path.join(
                                     config.get_mia_path(), "processes"
                                 )
                             )
                         )
 
                 # The processes/ directory being already in the sys.path, the
                 # package is certainly not properly installed in the processes
                 # directory
                 else:
                     print("No module named '{0}'".format(pckg))
-                    app = QApplication(sys.argv)
                     msg = QMessageBox()
                     msg.setIcon(QMessageBox.Warning)
                     msg.setWindowTitle("populse_mia - warning: {0}".format(e))
                     msg.setText(
                         (
                             "At least, {0} has not been found in {1}."
                             "\nTo prevent mia crash when using it, "
@@ -1175,15 +1163,102 @@
                                 )
                             ),
                         )
                     )
                     msg.setStandardButtons(QMessageBox.Ok)
                     msg.buttonClicked.connect(msg.close)
                     msg.exec()
-                    del app
+
+            except SyntaxError as e:
+                print(
+                    "\nA problem is detected with the '{0}' "
+                    "package...\nTraceback:".format(pckg)
+                )
+                print("".join(traceback.format_tb(e.__traceback__)), end="")
+                print("{0}: {1}\n".format(e.__class__.__name__, e))
+
+                txt = (
+                    "A problem is detected with the '{0}' package...\n\n"
+                    "Traceback:\n{1} {2} \n{3}\n\nThis may lead to a later "
+                    "crash of Mia ...\nDo you want Mia tries to fix "
+                    "this issue automatically?\nBe careful, risk of "
+                    "destruction of the '{4}' module!".format(
+                        pckg,
+                        "".join(traceback.format_tb(e.__traceback__)),
+                        e.__class__.__name__,
+                        e,
+                        e.filename,
+                    )
+                )
+
+                lineCnt = txt.count("\n")
+                msg = QMessageBox()
+                msg.setWindowTitle("populse_mia - warning: {}".format(e))
+
+                if lineCnt > 15:
+                    scroll = QScrollArea()
+                    scroll.setWidgetResizable(1)
+                    content = QWidget()
+                    scroll.setWidget(content)
+                    layout = QVBoxLayout(content)
+                    tmpLabel = QLabel(txt)
+                    tmpLabel.setTextInteractionFlags(
+                        QtCore.Qt.TextSelectableByMouse
+                    )
+                    layout.addWidget(tmpLabel)
+                    msg.layout().addWidget(
+                        scroll, 0, 0, 1, msg.layout().columnCount()
+                    )
+                    msg.setStyleSheet(
+                        "QScrollArea{min-width:550 px; " "min-height: 300px}"
+                    )
+
+                else:
+                    msg.setText(txt)
+                    msg.setIcon(QMessageBox.Warning)
+
+                ok_button = msg.addButton(QMessageBox.Ok)
+                msg.addButton(QMessageBox.No)
+                msg.exec()
+
+                if msg.clickedButton() == ok_button:
+                    with open(e.filename, "r") as file:
+                        filedata = file.read()
+                        filedata = filedata.replace(
+                            "<undefined>", "'<undefined>'"
+                        )
+
+                    with open(e.filename, "w") as file:
+                        file.write(filedata)
+
+            except ValueError as e:
+                print(
+                    "\nA problem is detected with the '{0}' "
+                    "package...\nTraceback:".format(pckg)
+                )
+                print("".join(traceback.format_tb(e.__traceback__)), end="")
+                print("{0}: {1}\n".format(e.__class__.__name__, e))
+
+                txt = (
+                    "A problem is detected with the '{0}' package...\n\n"
+                    "Traceback:\n{1} {2} \n{3}\n\nThis may lead to a later "
+                    "crash of Mia ...\nPlease, try to fix it !...".format(
+                        pckg,
+                        "".join(traceback.format_tb(e.__traceback__)),
+                        e.__class__.__name__,
+                        e,
+                    )
+                )
+                msg = QMessageBox()
+                msg.setWindowTitle("populse_mia - warning: {0}".format(e))
+                msg.setText(txt)
+                msg.setIcon(QMessageBox.Warning)
+                msg.setStandardButtons(QMessageBox.Ok)
+                msg.buttonClicked.connect(msg.close)
+                msg.exec()
 
     if (
         (not isinstance(proc_content, dict))
         or (
             (isinstance(proc_content, dict))
             and ("Packages" not in proc_content)
         )
@@ -1224,19 +1299,18 @@
                 print(
                     "\nThe process_config.yml file seems to be corrupted! "
                     "Let's try to fix it by installing the current nipype "
                     "processes library again in mia ..."
                 )
 
         else:
-
             if (
                 (isinstance(proc_content, dict))
                 and ("Versions" in proc_content)
-                and ("nipype" not in proc_content["Versions"])
+                and (proc_content["Versions"] is None)
             ) or (
                 (isinstance(proc_content, dict))
                 and ("Versions" in proc_content)
                 and ("nipype" in proc_content["Versions"])
                 and (proc_content["Versions"]["nipype"] is None)
             ):
                 old_nipypeVer = None
@@ -1275,19 +1349,18 @@
                 print(
                     "\nThe process_config.yml file seems to be corrupted! "
                     "Let's try to fix it by installing the mia_processes "
                     "processes library again in mia ..."
                 )
 
         else:
-
             if (
                 (isinstance(proc_content, dict))
                 and ("Versions" in proc_content)
-                and ("mia_processes" not in proc_content["Versions"])
+                and (proc_content["Versions"] is None)
             ) or (
                 (isinstance(proc_content, dict))
                 and ("Versions" in proc_content)
                 and ("mia_processes" in proc_content["Versions"])
                 and (proc_content["Versions"]["mia_processes"] is None)
             ):
                 old_miaProcVer = None
@@ -1326,19 +1399,18 @@
                 print(
                     "\nThe process_config.yml file seems to be corrupted! "
                     "Let's try to fix it by installing the capsul "
                     "processes library again in mia ..."
                 )
 
         else:
-
             if (
                 (isinstance(proc_content, dict))
                 and ("Versions" in proc_content)
-                and ("capsul" not in proc_content["Versions"])
+                and (proc_content["Versions"] is None)
             ) or (
                 (isinstance(proc_content, dict))
                 and ("Versions" in proc_content)
                 and ("capsul" in proc_content["Versions"])
                 and (proc_content["Versions"]["capsul"] is None)
             ):
                 old_capsulVer = None
@@ -1422,17 +1494,15 @@
         #           subpackages/modules
         #           Ex. {package: {subpackage: {pipeline:'process_enabled'}}}
 
         for item in pckg_dic:
             final_pckgs["Packages"][item] = pckg_dic[item]
 
     if pack2install:
-
         if len(pack2install) == 2:
-
             if not any("nipype" in s for s in pack2install):
                 print(
                     "\n** The nipype processes library in mia is "
                     "already using the current installed version ({0}) "
                     "for this station\n".format(nipypeVer)
                 )
 
@@ -1447,15 +1517,14 @@
                 print(
                     "\n** The capsul library in mia is "
                     "already using the current installed version ({0}) "
                     "for this station\n".format(capsulVer)
                 )
 
         elif len(pack2install) == 1:
-
             if any("nipype" in s for s in pack2install):
                 print(
                     "\n** The mia_processes and capsul processes "
                     "libraries are already using in mia the current "
                     "installed version ({0} and {1} respectively) for "
                     "this station\n".format(miaProcVer, capsulVer)
                 )
@@ -1477,28 +1546,32 @@
                 )
 
         if (isinstance(proc_content, dict)) and ("Paths" in proc_content):
             # Save the path to the packages
             final_pckgs["Paths"] = proc_content["Paths"]
 
         if (isinstance(proc_content, dict)) and ("Versions" in proc_content):
-            for item in proc_content["Versions"]:
+            if proc_content["Versions"] is None:
+                for k in ("nipype", "mia_processes", "capsul"):
+                    if k not in final_pckgs["Versions"]:
+                        final_pckgs["Versions"][k] = None
 
-                if item not in final_pckgs["Versions"]:
-                    final_pckgs["Versions"][item] = proc_content["Versions"][
-                        item
-                    ]
+            else:
+                for item in proc_content["Versions"]:
+                    if item not in final_pckgs["Versions"]:
+                        final_pckgs["Versions"][item] = proc_content[
+                            "Versions"
+                        ][item]
 
         # Try to keep the previous configuration before the update
         # of the packages
         if (isinstance(proc_content, dict)) and ("Packages" in proc_content):
             _deepCompDic(proc_content["Packages"], final_pckgs["Packages"])
 
             for item in proc_content["Packages"]:
-
                 if item not in final_pckgs["Packages"]:
                     final_pckgs["Packages"][item] = proc_content["Packages"][
                         item
                     ]
 
         with open(proc_config, "w", encoding="utf8") as stream:
             yaml.dump(
```

### Comparing `populse_mia-2.2.2/python/populse_mia/software_properties.py` & `populse_mia-2.3.1/python/populse_mia/software_properties.py`

 * *Files 3% similar despite different names*

```diff
@@ -23,14 +23,15 @@
 
 import glob
 import os
 import platform
 import re
 
 import yaml
+
 # Capsul import
 from capsul.api import capsul_engine
 from cryptography.fernet import Fernet
 
 CONFIG = b"5YSmesxZ4ge9au2Bxe7XDiQ3U5VCdLeRdqimOOggKyc="
 
 
@@ -64,37 +65,34 @@
         """Transform a version of a package to a corresponding list of integer.
 
         :param v: version of a package (ex. 5.4.1)
 
         :return: a list of integer (ex. [0, 13, 0])
         """
 
-        v = re.sub("[^0-9\.]", "", v)
+        v = re.sub(r"[^0-9\.]", "", v)
         return [int(x) for x in re.sub(r"(\.0+)*$", "", v).split(".")]
 
     if comp == "eq":
-
         if normalise(first_ver) == normalise(sec_ver):
             return True
 
         else:
             return False
 
     elif comp == "sup":
-
         if (normalise(first_ver) > normalise(sec_ver)) or (
             verCmp(first_ver, sec_ver, "eq")
         ):
             return True
 
         else:
             return False
 
     elif comp == "inf":
-
         if (normalise(first_ver) < normalise(sec_ver)) or (
             verCmp(first_ver, sec_ver, "eq")
         ):
             return True
 
         else:
             return False
@@ -121,28 +119,29 @@
             - get_mainwindow_size: get the main window size
             - get_matlab_command: returns Matlab command
             - get_matlab_path: returns the path of Matlab's executable
             - get_matlab_standalone_path: returns the path of Matlab Compiler
               Runtime
             - get_max_projects: returns the maximum number of projects
               displayed in the "Saved projects" menu
-            - get_max_thumbnails:  get max thumbnails number at the data browser
-              bottom
+            - get_max_thumbnails:  get max thumbnails number at the data
+              browser bottom
             - get_mia_path: returns the software's install path
             - get_mri_conv_path: returns the MRIManager.jar path
             - getNbAllSlicesMax: returns the maximum number of slices to
               display in the mini viewer
             - get_opened_projects: returns the opened projects
             - getPathToProjectsFolder: returns the project's path
-            - get_projects_save_path: returns the folder where the projects are
-              saved
+            - get_projects_save_path: returns the folder where the projects
+              are saved
             - get_referential: returns boolean to indicate DataViewer
               referential
-            - getShowAllSlices: returns if the "show all slices" checkbox of the
-              mini viewer is activated
+            - get_resources_path: get the resources path
+            - getShowAllSlices: returns if the "show all slices" checkbox of
+              the mini viewer is activated
             - getSourceImageDir: get the source directory for project images
             - get_spm_path: returns the path of SPM12 (license version)
             - get_spm_standalone_path: returns the path of SPM12 (standalone
               version)
             - getTextColor: return the text color
             - getThumbnailTag: returns the tag that is displayed in the mini
               viewer
@@ -163,16 +162,16 @@
               in the preferences
             - get_use_spm: returns the value of "use spm" checkbox in the
               preferences
             - get_use_spm_standalone: returns the value of "use spm standalone"
               checkbox in the preferences
             - getViewerConfig: returns the DataViewer configuration (neuro or
               radio), by default neuro
-            - getViewerFramerate: returns the DataViewer framerate for automatic
-              time running images
+            - getViewerFramerate: returns the DataViewer framerate for
+              automatic time running images
             - isAutoSave: checks if auto-save mode is activated
             - isControlV1: checks if the selected display of the controller is
               of V1 type
             - isRadioView: checks if miniviewer in radiological orientation (if
               not, then it is in neurological orientation)
             - loadConfig: reads the config in the config.yml file
             - saveConfig: saves the config to the config.yml file
@@ -201,15 +200,16 @@
             - setNbAllSlicesMax: set the maximum number of slices to display in
               the mini viewer
             - set_opened_projects: set the opened projects
             - set_projects_save_path: set the folder where the projects are
               saved
             - set_radioView: set the orientation in miniviewer (True for
               radiological, False for neurological orientation)
-            - set_referential: sets the DataViewer referential
+            - set_referential: set the DataViewer referential
+            - set_resources_path: Set the resources path
             - setShowAllSlices: set the "show all slices" checkbox of the mini
               viewer
             - setSourceImageDir: set the source directory for project images
             - set_spm_path: set the path of SPM12 (license version)
             - set_spm_standalone_path: set the path of SPM12 (standalone
               version)
             - setTextColor: set the text color
@@ -282,14 +282,21 @@
         """Get the ANTS path
 
         :returns: string of path to ANTS
         """
 
         return self.config.get("ants", "")
 
+    def get_freesurfer_setup(self):
+        """Get the freesurfer path
+
+        :returns: string of path to freesurfer
+        """
+        return self.config.get("freesurfer_setup", "")
+
     def getBackgroundColor(self):
         """Get background color.
 
         :returns: string of the background color
         """
 
         return self.config.get("background_color", "")
@@ -341,14 +348,17 @@
 
         use_afni = self.get_use_afni()
         afni_path = self.get_afni_path()
 
         use_ants = self.get_use_ants()
         ants_path = self.get_ants_path()
 
+        use_freesurfer = self.get_use_freesurfer()
+        freesurfer_setup = self.get_freesurfer_setup()
+
         # Make synchronisation from Mia pref to Capsul config:
 
         # TODO: We do not deal with the version parameter. This can produce
         #       hidden configurations (spm and spm12 and spm8 ...)!
 
         # SPM
         spm_configs = eeconf.setdefault("capsul.engine.module.spm", {})
@@ -436,14 +446,25 @@
             m = eeconf.setdefault("capsul.engine.module.ants", {}).setdefault(
                 "ants", {}
             )
             m["config_id"] = "ants"
             m["config_environment"] = "global"
             m["directory"] = ants_path
 
+        # Freesurfer
+        if use_freesurfer:
+            m = eeconf.setdefault(
+                "capsul.engine.module.freesurfer", {}
+            ).setdefault("freesurfer", {})
+            m["config_id"] = "freesurfer"
+            m["config_environment"] = "global"
+            m["setup"] = freesurfer_setup
+            # TODO: change fs subject dir
+            m["subjects_dir"] = ""
+
         # attributes completion
         m = eeconf.setdefault(
             "capsul.engine.module.attributes", {}
         ).setdefault("attributes", {})
         m["config_id"] = "attributes"
         m["config_environment"] = "global"
         m["attributes_schema_paths"] = [
@@ -530,15 +551,16 @@
         """
 
         return self.config.get("mainwindow_size", None)
 
     def get_matlab_command(self):
         """Get Matlab command.
 
-        :returns: matlab executable path or nothing if matlab path not specified
+        :returns: matlab executable path or nothing if matlab path not
+                  specified
         """
 
         if self.config.get("use_spm_standalone"):
             archi = platform.architecture()
             if "Windows" in archi[1]:
                 spm_script = glob.glob(
                     os.path.join(
@@ -598,16 +620,16 @@
         try:
             return int(self.config["max_thumbnails"])
 
         except KeyError:
             return 5
 
     def get_mia_path(self):
-        """Get the path to the folder containing the processes, properties
-        and resources folders of mia (mia_path).
+        """Get the path to the folder containing the processes and properties
+        folders of mia (mia_path).
 
         During the mia installation, the mia_path is defined and stored in the
         configuration.yml file, located in the .populse_mia folder (himself
         located in the user's home). If mia is launched in admin mode,
         mia path is the cloned git repository. If mia is launched in user
         mode, mia path must compulsorily be returned from the mia_path
         parameter of the configuration.yml
@@ -621,17 +643,15 @@
             return mia_path
 
         dot_mia_config = os.path.join(
             os.path.expanduser("~"), ".populse_mia", "configuration.yml"
         )
 
         if os.path.isfile(dot_mia_config):
-
             with open(dot_mia_config, "r") as stream:
-
                 try:
                     if verCmp(yaml.__version__, "5.1", "sup"):
                         mia_home_config = yaml.load(
                             stream, Loader=yaml.FullLoader
                         )
                     else:
                         mia_home_config = yaml.load(stream)
@@ -668,23 +688,22 @@
                                 default_flow_style=False,
                                 allow_unicode=True,
                             )
 
                     self.mia_path = mia_home_config["mia_user_path"]
                     return self.mia_path
 
-                except (yaml.YAMLError, KeyError) as e:
+                except (yaml.YAMLError, KeyError):
                     print(
-                        "\nMia path (where is located the processes, "
-                        "the properties and resources folders) has not "
+                        "\nMia path (where is located the processes and "
+                        "the properties folders) has not "
                         "been found ..."
                     )
 
         else:  # Only for admin mode
-
             try:
                 self.mia_path = self.config["mia_user_path"]
                 return self.mia_path
 
             except (KeyError, AttributeError):
                 config_path = os.path.dirname(os.path.realpath(__file__))
 
@@ -693,15 +712,15 @@
 
                 self.mia_path = config_path
                 return config_path
 
     def get_mri_conv_path(self):
         """Get the MRIManager.jar path.
 
-        :returns: string of the pathto the MRIManager.jar
+        :returns: string of the path to the MRIManager.jar
         """
 
         return self.config.get("mri_conv_path", "")
 
     def getNbAllSlicesMax(self):
         """Get number the maximum number of slices to display in the
         miniviewer.
@@ -748,14 +767,22 @@
         """Checks in anatomist_2 data viewer which referential has been chosen
 
         :returns: 0 for World Coordinates, 1 for Image ref
         """
 
         return self.config.get("ref", "0")
 
+    def get_resources_path(self):
+        """Get the resources path.
+
+        :returns: string of the path to the resources folder
+        """
+
+        return self.config.get("resources_path", "")
+
     def getShowAllSlices(self):
         """Get whether the show_all_slices parameters was enabled
         or not in the miniviewer.
 
         :returns: boolean
         """
 
@@ -830,14 +857,22 @@
         """Get the value of "use fsl" checkbox in the preferences.
 
         :returns: boolean
         """
 
         return self.config.get("use_fsl", False)
 
+    def get_use_freesurfer(self):
+        """Get the value of "use freesurfer" checkbox in the preferences.
+
+        :returns: boolean
+        """
+
+        return self.config.get("use_freesurfer", False)
+
     def get_use_matlab(self):
         """Get the value of "use matlab" checkbox in the preferences.
 
         :returns: boolean
         """
 
         return self.config.get("use_matlab", False)
@@ -941,15 +976,14 @@
         f = Fernet(CONFIG)
         config_file = os.path.join(self.get_config_path(), "config.yml")
 
         if not os.path.exists(config_file):
             return {}
 
         with open(config_file, "rb") as stream:
-
             try:
                 stream = b"".join(stream.readlines())
                 decrypted = f.decrypt(stream)
 
                 if verCmp(yaml.__version__, "5.1", "sup"):
                     return yaml.load(decrypted, Loader=yaml.FullLoader)
 
@@ -1006,14 +1040,24 @@
         :param path: string of ANTS path
         """
 
         self.config["ants"] = path
         # Then save the modification
         self.saveConfig()
 
+    # def set_freesurfer_path(self, path):
+    #     """Set the freesurfer path
+
+    #     :param path: string of freesurfer path
+    #     """
+
+    #     self.config["freesurfer"] = path
+    #     # Then save the modification
+    #     self.saveConfig()
+
     def setAutoSave(self, save):
         """Set auto-save mode.
 
         :param save: boolean
         """
 
         self.config["auto_save"] = save
@@ -1045,18 +1089,16 @@
         self.config["capsul_config"] = capsul_config_dict
 
         # update MIA values
         engine_config = capsul_config_dict.get("engine")
         new_engine = capsul_engine()
 
         for environment, config in engine_config.items():
-
             if environment == "capsul_engine":
                 continue
-
             new_engine.import_configs(environment, config)
 
         engine_config = new_engine.settings.export_config_dict("global")
 
         # afni
         afni = engine_config.get("global", {}).get("capsul.engine.module.afni")
 
@@ -1079,14 +1121,29 @@
             use_ants = bool(ants_path)
 
             if ants_path:
                 self.set_ants_path(ants_path)
 
             self.set_use_ants(use_ants)
 
+        # freesurfer
+        freesurfer = engine_config.get("global", {}).get(
+            "capsul.engine.module.freesurfer"
+        )
+        use_freesurfer = False
+        if freesurfer:
+            freesurfer = next(iter(freesurfer.values()))
+            freesurfer_setup_path = freesurfer.get("setup")
+
+            if freesurfer_setup_path:
+                use_freesurfer = True
+                self.set_freesurfer_setup(freesurfer_setup_path)
+
+            self.set_use_freesurfer(use_freesurfer)
+
         # fsl
         fsl = engine_config.get("global", {}).get("capsul.engine.module.fsl")
         use_fsl = False
 
         if fsl:
             fsl = next(iter(fsl.values()))
             fsl_conf_path = fsl.get("config")
@@ -1263,14 +1320,24 @@
         :param path: string of path to fsl/etc/fslconf/fsl.sh
         """
 
         self.config["fsl_config"] = path
         # Then save the modification
         self.saveConfig()
 
+    def set_freesurfer_setup(self, path):
+        """Set  the freesurfer config file
+
+        :param path: string of path to freesurfer/FreeSurferEnv.sh
+        """
+
+        self.config["freesurfer_setup"] = path
+        # Then save the modification
+        self.saveConfig()
+
     def set_mainwindow_maximized(self, enabled):
         """Set the maximized (full-screen) flag
 
         :param enabled: boolean
         """
 
         self.config["mainwindow_maximized"] = enabled
@@ -1377,23 +1444,33 @@
 
         self.config["radio_view"] = radio_view
         # Then save the modification
         self.saveConfig()
 
     def set_referential(self, ref):
         """Set the referential to image ref or world coordinates in anatomist_2
-        data viewer
+        data viewer.
 
         :param ref: str; 0 for World Coordinates, 1 for Image ref
         """
 
         self.config["ref"] = ref
         # Then save the modification
         self.saveConfig()
 
+    def set_resources_path(self, path):
+        """Set the resources path.
+
+        :param path: string of the path
+        """
+
+        self.config["resources_path"] = path
+        # Then save the modification
+        self.saveConfig()
+
     def setShowAllSlices(self, show_all_slices):
         """Set the show_all_slides setting in miniviewer.
 
         :param show_all_slices: Boolean
         """
 
         self.config["show_all_slices"] = show_all_slices
@@ -1467,14 +1544,24 @@
         :param use_ants: boolean
         """
 
         self.config["use_ants"] = use_ants
         # Then save the modification
         self.saveConfig()
 
+    def set_use_freesurfer(self, use_freesurfer):
+        """Set the value of "use_freesurfer" checkbox in the preferences.
+
+        :param use_freesurfer: boolean
+        """
+
+        self.config["use_freesurfer"] = use_freesurfer
+        # Then save the modification
+        self.saveConfig()
+
     def set_use_fsl(self, use_fsl):
         """Set the value of "use_fsl" checkbox in the preferences.
 
         :param use_fsl: boolean
         """
 
         self.config["use_fsl"] = use_fsl
@@ -1584,15 +1671,14 @@
             "somaworkflow",
         ]:
             engine.load_module(module)
 
         engine_config = capsul_config.get("engine")
 
         if engine_config:
-
             for environment, config in engine_config.items():
                 c = dict(config)
 
                 if (
                     "capsul_engine" not in c
                     or "uses" not in c["capsul_engine"]
                 ):
```

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/B-W LINEAR.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/B-W LINEAR.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/BLANK_ICON.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/BLANK_ICON.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/Blue-White.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/Blue-White.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/Blue.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/Blue.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/Green-White-linear.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/Green-White-linear.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/LogoIRMaGe.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/LogoIRMaGe.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/Logo_populse_mia_HR.jpeg` & `populse_mia-2.3.1/python/populse_mia/sources_images/Logo_populse_mia_HR.jpeg`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/Logo_populse_mia_LR.jpeg` & `populse_mia-2.3.1/python/populse_mia/sources_images/Logo_populse_mia_LR.jpeg`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/Logo_populse_square.jpg` & `populse_mia-2.3.1/python/populse_mia/sources_images/Logo_populse_square.jpg`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/Protocol_record.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/Protocol_record.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/RAINBOW.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/RAINBOW.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/RED TEMPERATURE.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/RED TEMPERATURE.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/Tool_Application.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/Tool_Application.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/Yellow-Red-White-Blue-Green.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/Yellow-Red-White-Blue-Green.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/Yellow-red.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/Yellow-red.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/blue-red-bright-dark.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/blue-red-bright-dark.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/brain_mri.jpeg` & `populse_mia-2.3.1/python/populse_mia/sources_images/brain_mri.jpeg`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/check.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/check.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/create.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/create.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/exit.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/exit.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/export.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/export.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/garbage_collect.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/garbage_collect.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/green_plus.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/green_plus.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/green_v.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/green_v.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/icons-403.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/icons-403.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/init32.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/init32.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/open.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/open.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/pause.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/pause.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/play.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/play.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/plot.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/plot.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/pref.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/pref.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/red_cross.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/red_cross.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/red_cross32.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/red_cross32.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/red_minus.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/red_minus.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/run32.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/run32.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/stop32.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/stop32.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/sources_images/zoom.png` & `populse_mia-2.3.1/python/populse_mia/sources_images/zoom.png`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/test.py` & `populse_mia-2.3.1/python/populse_mia/test.py`

 * *Files 1% similar despite different names*

```diff
@@ -38,24088 +38,24161 @@
 00000250: 6963 656e 6365 5f43 6543 494c 4c5f 5632  icence_CeCILL_V2
 00000260: 2e31 2d65 6e2e 6874 6d6c 0a23 2066 6f72  .1-en.html.# for
 00000270: 2064 6574 6169 6c73 2e0a 2323 2323 2323   details..######
 00000280: 2323 2323 2323 2323 2323 2323 2323 2323  ################
 00000290: 2323 2323 2323 2323 2323 2323 2323 2323  ################
 000002a0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
 000002b0: 2323 2323 2323 2323 2323 2323 2323 2323  ################
-000002c0: 2323 2323 0a0a 2323 2320 4765 6e65 7261  ####..### Genera
-000002d0: 6c20 696d 706f 7274 733a 0a0a 2320 6f74  l imports:..# ot
-000002e0: 6865 7220 696d 706f 7274 0a69 6d70 6f72  her import.impor
-000002f0: 7420 6173 740a 696d 706f 7274 2063 6f70  t ast.import cop
-00000300: 790a 696d 706f 7274 206a 736f 6e0a 696d  y.import json.im
-00000310: 706f 7274 206f 730a 696d 706f 7274 2070  port os.import p
-00000320: 6c61 7466 6f72 6d0a 696d 706f 7274 2073  latform.import s
-00000330: 6875 7469 6c0a 696d 706f 7274 2073 7562  hutil.import sub
-00000340: 7072 6f63 6573 730a 696d 706f 7274 2073  process.import s
-00000350: 7973 0a69 6d70 6f72 7420 7465 6d70 6669  ys.import tempfi
-00000360: 6c65 0a69 6d70 6f72 7420 7468 7265 6164  le.import thread
-00000370: 696e 670a 696d 706f 7274 2075 6e69 7474  ing.import unitt
-00000380: 6573 740a 696d 706f 7274 2075 7569 640a  est.import uuid.
-00000390: 6672 6f6d 2064 6174 6574 696d 6520 696d  from datetime im
-000003a0: 706f 7274 2064 6174 6574 696d 650a 6672  port datetime.fr
-000003b0: 6f6d 2066 756e 6374 6f6f 6c73 2069 6d70  om functools imp
-000003c0: 6f72 7420 7061 7274 6961 6c0a 6672 6f6d  ort partial.from
-000003d0: 2068 6173 686c 6962 2069 6d70 6f72 7420   hashlib import 
-000003e0: 7368 6132 3536 0a66 726f 6d20 7061 7468  sha256.from path
-000003f0: 6c69 6220 696d 706f 7274 2050 6174 680a  lib import Path.
-00000400: 6672 6f6d 2074 696d 6520 696d 706f 7274  from time import
-00000410: 2073 6c65 6570 0a66 726f 6d20 756e 6974   sleep.from unit
-00000420: 7465 7374 2e6d 6f63 6b20 696d 706f 7274  test.mock import
-00000430: 204d 6167 6963 4d6f 636b 2c20 4d6f 636b   MagicMock, Mock
-00000440: 0a0a 696d 706f 7274 2070 7375 7469 6c0a  ..import psutil.
-00000450: 696d 706f 7274 2079 616d 6c0a 2320 4e69  import yaml.# Ni
-00000460: 7079 7065 2069 6d70 6f72 740a 6672 6f6d  pype import.from
-00000470: 206e 6970 7970 652e 696e 7465 7266 6163   nipype.interfac
-00000480: 6573 2069 6d70 6f72 7420 5265 6e61 6d65  es import Rename
-00000490: 2c20 5365 6c65 6374 0a66 726f 6d20 6e69  , Select.from ni
-000004a0: 7079 7065 2e69 6e74 6572 6661 6365 732e  pype.interfaces.
-000004b0: 6261 7365 2e74 7261 6974 735f 6578 7465  base.traits_exte
-000004c0: 6e73 696f 6e20 696d 706f 7274 2049 6e70  nsion import Inp
-000004d0: 7574 4d75 6c74 694f 626a 6563 740a 6672  utMultiObject.fr
-000004e0: 6f6d 206e 6970 7970 652e 696e 7465 7266  om nipype.interf
-000004f0: 6163 6573 2e73 706d 2069 6d70 6f72 7420  aces.spm import 
-00000500: 536d 6f6f 7468 2c20 5468 7265 7368 6f6c  Smooth, Threshol
-00000510: 640a 6672 6f6d 2070 6163 6b61 6769 6e67  d.from packaging
-00000520: 2069 6d70 6f72 7420 7665 7273 696f 6e0a   import version.
-00000530: 2320 2050 7951 7435 2069 6d70 6f72 740a  #  PyQt5 import.
-00000540: 6672 6f6d 2050 7951 7435 2069 6d70 6f72  from PyQt5 impor
-00000550: 7420 5174 4775 690a 6672 6f6d 2050 7951  t QtGui.from PyQ
-00000560: 7435 2e51 7443 6f72 6520 696d 706f 7274  t5.QtCore import
-00000570: 2028 5154 5f56 4552 5349 4f4e 5f53 5452   (QT_VERSION_STR
-00000580: 2c20 5143 6f72 6541 7070 6c69 6361 7469  , QCoreApplicati
-00000590: 6f6e 2c20 5145 7665 6e74 2c0a 2020 2020  on, QEvent,.    
-000005a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000005b0: 2020 2020 2020 514d 6f64 656c 496e 6465        QModelInde
-000005c0: 782c 2051 506f 696e 742c 2051 742c 2051  x, QPoint, Qt, Q
-000005d0: 5468 7265 6164 290a 6672 6f6d 2050 7951  Thread).from PyQ
-000005e0: 7435 2e51 7454 6573 7420 696d 706f 7274  t5.QtTest import
-000005f0: 2051 5465 7374 0a66 726f 6d20 5079 5174   QTest.from PyQt
-00000600: 352e 5174 5769 6467 6574 7320 696d 706f  5.QtWidgets impo
-00000610: 7274 2028 5141 7070 6c69 6361 7469 6f6e  rt (QApplication
-00000620: 2c20 5144 6961 6c6f 672c 2051 4669 6c65  , QDialog, QFile
-00000630: 4469 616c 6f67 2c20 5149 6e70 7574 4469  Dialog, QInputDi
-00000640: 616c 6f67 2c0a 2020 2020 2020 2020 2020  alog,.          
-00000650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000660: 2020 2051 4d65 7373 6167 6542 6f78 2c20     QMessageBox, 
+000002c0: 2323 2323 0a0a 2320 4765 6e65 7261 6c20  ####..# General 
+000002d0: 696d 706f 7274 733a 0a0a 2320 4f74 6865  imports:..# Othe
+000002e0: 7220 696d 706f 7274 0a69 6d70 6f72 7420  r import.import 
+000002f0: 6173 740a 696d 706f 7274 2063 6f70 790a  ast.import copy.
+00000300: 696d 706f 7274 206a 736f 6e0a 696d 706f  import json.impo
+00000310: 7274 206f 730a 696d 706f 7274 2070 6c61  rt os.import pla
+00000320: 7466 6f72 6d0a 696d 706f 7274 2073 6875  tform.import shu
+00000330: 7469 6c0a 696d 706f 7274 2073 7562 7072  til.import subpr
+00000340: 6f63 6573 730a 696d 706f 7274 2073 7973  ocess.import sys
+00000350: 0a69 6d70 6f72 7420 7465 6d70 6669 6c65  .import tempfile
+00000360: 0a69 6d70 6f72 7420 7468 7265 6164 696e  .import threadin
+00000370: 670a 696d 706f 7274 2075 6e69 7474 6573  g.import unittes
+00000380: 740a 696d 706f 7274 2075 7569 640a 6672  t.import uuid.fr
+00000390: 6f6d 2064 6174 6574 696d 6520 696d 706f  om datetime impo
+000003a0: 7274 2064 6174 6574 696d 650a 6672 6f6d  rt datetime.from
+000003b0: 2066 756e 6374 6f6f 6c73 2069 6d70 6f72   functools impor
+000003c0: 7420 7061 7274 6961 6c0a 6672 6f6d 2068  t partial.from h
+000003d0: 6173 686c 6962 2069 6d70 6f72 7420 7368  ashlib import sh
+000003e0: 6132 3536 0a66 726f 6d20 7061 7468 6c69  a256.from pathli
+000003f0: 6220 696d 706f 7274 2050 6174 680a 6672  b import Path.fr
+00000400: 6f6d 2074 696d 6520 696d 706f 7274 2073  om time import s
+00000410: 6c65 6570 0a66 726f 6d20 756e 6974 7465  leep.from unitte
+00000420: 7374 2e6d 6f63 6b20 696d 706f 7274 204d  st.mock import M
+00000430: 6167 6963 4d6f 636b 2c20 4d6f 636b 0a0a  agicMock, Mock..
+00000440: 696d 706f 7274 2070 7375 7469 6c0a 696d  import psutil.im
+00000450: 706f 7274 2079 616d 6c0a 0a23 204e 6970  port yaml..# Nip
+00000460: 7970 6520 696d 706f 7274 0a66 726f 6d20  ype import.from 
+00000470: 6e69 7079 7065 2e69 6e74 6572 6661 6365  nipype.interface
+00000480: 7320 696d 706f 7274 2052 656e 616d 652c  s import Rename,
+00000490: 2053 656c 6563 740a 6672 6f6d 206e 6970   Select.from nip
+000004a0: 7970 652e 696e 7465 7266 6163 6573 2e62  ype.interfaces.b
+000004b0: 6173 652e 7472 6169 7473 5f65 7874 656e  ase.traits_exten
+000004c0: 7369 6f6e 2069 6d70 6f72 7420 496e 7075  sion import Inpu
+000004d0: 744d 756c 7469 4f62 6a65 6374 0a66 726f  tMultiObject.fro
+000004e0: 6d20 6e69 7079 7065 2e69 6e74 6572 6661  m nipype.interfa
+000004f0: 6365 732e 7370 6d20 696d 706f 7274 2053  ces.spm import S
+00000500: 6d6f 6f74 682c 2054 6872 6573 686f 6c64  mooth, Threshold
+00000510: 0a66 726f 6d20 7061 636b 6167 696e 6720  .from packaging 
+00000520: 696d 706f 7274 2076 6572 7369 6f6e 0a0a  import version..
+00000530: 2320 5079 5174 3520 696d 706f 7274 0a66  # PyQt5 import.f
+00000540: 726f 6d20 5079 5174 3520 696d 706f 7274  rom PyQt5 import
+00000550: 2051 7447 7569 0a66 726f 6d20 5079 5174   QtGui.from PyQt
+00000560: 352e 5174 436f 7265 2069 6d70 6f72 7420  5.QtCore import 
+00000570: 280a 2020 2020 5154 5f56 4552 5349 4f4e  (.    QT_VERSION
+00000580: 5f53 5452 2c0a 2020 2020 5143 6f72 6541  _STR,.    QCoreA
+00000590: 7070 6c69 6361 7469 6f6e 2c0a 2020 2020  pplication,.    
+000005a0: 5145 7665 6e74 2c0a 2020 2020 514d 6f64  QEvent,.    QMod
+000005b0: 656c 496e 6465 782c 0a20 2020 2051 506f  elIndex,.    QPo
+000005c0: 696e 742c 0a20 2020 2051 742c 0a20 2020  int,.    Qt,.   
+000005d0: 2051 5468 7265 6164 2c0a 290a 6672 6f6d   QThread,.).from
+000005e0: 2050 7951 7435 2e51 7454 6573 7420 696d   PyQt5.QtTest im
+000005f0: 706f 7274 2051 5465 7374 0a66 726f 6d20  port QTest.from 
+00000600: 5079 5174 352e 5174 5769 6467 6574 7320  PyQt5.QtWidgets 
+00000610: 696d 706f 7274 2028 0a20 2020 2051 4170  import (.    QAp
+00000620: 706c 6963 6174 696f 6e2c 0a20 2020 2051  plication,.    Q
+00000630: 4469 616c 6f67 2c0a 2020 2020 5146 696c  Dialog,.    QFil
+00000640: 6544 6961 6c6f 672c 0a20 2020 2051 496e  eDialog,.    QIn
+00000650: 7075 7444 6961 6c6f 672c 0a20 2020 2051  putDialog,.    Q
+00000660: 4d65 7373 6167 6542 6f78 2c0a 2020 2020  MessageBox,.    
 00000670: 5154 6162 6c65 5769 6467 6574 4974 656d  QTableWidgetItem
-00000680: 290a 6672 6f6d 2074 7261 6974 732e 6170  ).from traits.ap
-00000690: 6920 696d 706f 7274 2054 7261 6974 4c69  i import TraitLi
-000006a0: 7374 4f62 6a65 6374 2c20 556e 6465 6669  stObject, Undefi
-000006b0: 6e65 640a 0a23 2054 6865 2066 6f6c 6c6f  ned..# The follo
-000006c0: 7769 6e67 2073 7461 7465 6d65 6e74 2069  wing statement i
-000006d0: 7320 6375 7272 656e 746c 7920 636f 6d6d  s currently comm
-000006e0: 656e 7465 6420 6265 6361 7573 6520 6974  ented because it
-000006f0: 2068 6173 206e 6f20 6566 6665 6374 2061   has no effect a
-00000700: 6e64 0a23 2063 616e 2062 6520 7265 706c  nd.# can be repl
-00000710: 6163 6564 2062 7920 6120 6675 6e63 7469  aced by a functi
-00000720: 6f6e 2063 616c 6c20 746f 2068 6176 6520  on call to have 
-00000730: 616e 2065 6666 6563 742c 2065 2e67 2e20  an effect, e.g. 
-00000740: 7379 732e 7365 7474 7261 6365 2829 0a23  sys.settrace().#
-00000750: 2073 7973 2e73 6574 7472 6163 650a 0a75   sys.settrace..u
-00000760: 7473 5f64 6972 203d 206f 732e 7061 7468  ts_dir = os.path
-00000770: 2e69 7364 6972 280a 2020 2020 2020 2020  .isdir(.        
-00000780: 2020 2020 206f 732e 7061 7468 2e6a 6f69       os.path.joi
-00000790: 6e28 6f73 2e70 6174 682e 6469 726e 616d  n(os.path.dirnam
-000007a0: 6528 0a20 2020 2020 2020 2020 2020 2020  e(.             
-000007b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000007c0: 206f 732e 7061 7468 2e64 6972 6e61 6d65   os.path.dirname
-000007d0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-000007e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000007f0: 2020 2020 6f73 2e70 6174 682e 6469 726e      os.path.dirn
-00000800: 616d 6528 5f5f 6669 6c65 5f5f 2929 292c  ame(__file__))),
-00000810: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00000820: 2020 2020 2020 2020 2020 2022 6d69 6175             "miau
-00000830: 7464 6174 6122 2929 0a0a 6966 206e 6f74  tdata"))..if not
-00000840: 2075 7473 5f64 6972 3a0a 2020 2020 7072   uts_dir:.    pr
-00000850: 696e 7428 275c 6e54 6f20 776f 726b 2070  int('\nTo work p
-00000860: 726f 7065 726c 792c 2075 6e69 7420 7465  roperly, unit te
-00000870: 7374 7320 6e65 6564 2064 6174 6120 696e  sts need data in
-00000880: 2074 6865 2070 6f70 756c 7365 5f6d 6961   the populse_mia
-00000890: 286f 7220 270a 2020 2020 2020 2020 2020  (or '.          
-000008a0: 2770 6f70 756c 7365 2d6d 6961 292f 6d69  'populse-mia)/mi
-000008b0: 6175 7464 6174 6120 6469 7265 6374 6f72  autdata director
-000008c0: 792e 2050 6c65 6173 6520 7573 653a 5c6e  y. Please use:\n
-000008d0: 270a 2020 2020 2020 2020 2020 2767 6974  '.          'git
-000008e0: 2063 6c6f 6e65 2068 7474 7073 3a2f 2f67   clone https://g
-000008f0: 7269 6361 642d 6769 746c 6162 2e75 6e69  ricad-gitlab.uni
-00000900: 762d 6772 656e 6f62 6c65 2d61 6c70 6573  v-grenoble-alpes
-00000910: 2e66 722f 636f 6e64 616d 6965 2f27 0a20  .fr/condamie/'. 
-00000920: 2020 2020 2020 2020 2027 6d69 6175 7464           'miautd
-00000930: 6174 612e 6769 745c 6e27 0a20 2020 2020  ata.git\n'.     
-00000940: 2020 2020 2027 696e 2070 6f70 756c 7365       'in populse
-00000950: 5f6d 6961 2064 6972 6563 746f 7279 2074  _mia directory t
-00000960: 6f20 646f 776e 6c6f 6164 2069 742e 2e2e  o download it...
-00000970: 5c6e 2729 0a20 2020 2073 7973 2e65 7869  \n').    sys.exi
-00000980: 7428 290a 0a69 6620 280a 2020 2020 6e6f  t()..if (.    no
-00000990: 7420 6f73 2e70 6174 682e 6469 726e 616d  t os.path.dirnam
-000009a0: 6528 6f73 2e70 6174 682e 6469 726e 616d  e(os.path.dirnam
-000009b0: 6528 6f73 2e70 6174 682e 7265 616c 7061  e(os.path.realpa
-000009c0: 7468 285f 5f66 696c 655f 5f29 2929 0a20  th(__file__))). 
-000009d0: 2020 2069 6e20 7379 732e 7061 7468 0a29     in sys.path.)
-000009e0: 3a0a 2020 2020 2320 2264 6576 656c 6f70  :.    # "develop
-000009f0: 6572 2220 6d6f 6465 0a20 2020 2072 6f6f  er" mode.    roo
-00000a00: 745f 6465 765f 6469 7220 3d20 6f73 2e70  t_dev_dir = os.p
-00000a10: 6174 682e 6469 726e 616d 6528 0a20 2020  ath.dirname(.   
+00000680: 2c0a 290a 6672 6f6d 2074 7261 6974 732e  ,.).from traits.
+00000690: 6170 6920 696d 706f 7274 2054 7261 6974  api import Trait
+000006a0: 4c69 7374 4f62 6a65 6374 2c20 556e 6465  ListObject, Unde
+000006b0: 6669 6e65 640a 0a23 2054 6865 2066 6f6c  fined..# The fol
+000006c0: 6c6f 7769 6e67 2073 7461 7465 6d65 6e74  lowing statement
+000006d0: 2069 7320 6375 7272 656e 746c 7920 636f   is currently co
+000006e0: 6d6d 656e 7465 6420 6265 6361 7573 6520  mmented because 
+000006f0: 6974 2068 6173 206e 6f20 6566 6665 6374  it has no effect
+00000700: 2061 6e64 0a23 2063 616e 2062 6520 7265   and.# can be re
+00000710: 706c 6163 6564 2062 7920 6120 6675 6e63  placed by a func
+00000720: 7469 6f6e 2063 616c 6c20 746f 2068 6176  tion call to hav
+00000730: 6520 616e 2065 6666 6563 742c 2065 2e67  e an effect, e.g
+00000740: 2e20 7379 732e 7365 7474 7261 6365 2829  . sys.settrace()
+00000750: 0a23 2073 7973 2e73 6574 7472 6163 650a  .# sys.settrace.
+00000760: 0a75 7473 5f64 6972 203d 206f 732e 7061  .uts_dir = os.pa
+00000770: 7468 2e69 7364 6972 280a 2020 2020 6f73  th.isdir(.    os
+00000780: 2e70 6174 682e 6a6f 696e 280a 2020 2020  .path.join(.    
+00000790: 2020 2020 6f73 2e70 6174 682e 6469 726e      os.path.dirn
+000007a0: 616d 6528 0a20 2020 2020 2020 2020 2020  ame(.           
+000007b0: 206f 732e 7061 7468 2e64 6972 6e61 6d65   os.path.dirname
+000007c0: 286f 732e 7061 7468 2e64 6972 6e61 6d65  (os.path.dirname
+000007d0: 286f 732e 7061 7468 2e72 6561 6c70 6174  (os.path.realpat
+000007e0: 6828 5f5f 6669 6c65 5f5f 2929 290a 2020  h(__file__))).  
+000007f0: 2020 2020 2020 292c 0a20 2020 2020 2020        ),.       
+00000800: 2022 6d69 6175 7464 6174 6122 2c0a 2020   "miautdata",.  
+00000810: 2020 290a 290a 0a69 6620 6e6f 7420 7574    ).)..if not ut
+00000820: 735f 6469 723a 0a20 2020 2070 7269 6e74  s_dir:.    print
+00000830: 280a 2020 2020 2020 2020 225c 6e54 6f20  (.        "\nTo 
+00000840: 776f 726b 2070 726f 7065 726c 792c 2075  work properly, u
+00000850: 6e69 7420 7465 7374 7320 6e65 6564 2064  nit tests need d
+00000860: 6174 6120 696e 2074 6865 2070 6f70 756c  ata in the popul
+00000870: 7365 5f6d 6961 286f 7220 220a 2020 2020  se_mia(or ".    
+00000880: 2020 2020 2270 6f70 756c 7365 2d6d 6961      "populse-mia
+00000890: 292f 6d69 6175 7464 6174 6120 6469 7265  )/miautdata dire
+000008a0: 6374 6f72 792e 2050 6c65 6173 6520 7573  ctory. Please us
+000008b0: 653a 5c6e 220a 2020 2020 2020 2020 2267  e:\n".        "g
+000008c0: 6974 2063 6c6f 6e65 2068 7474 7073 3a2f  it clone https:/
+000008d0: 2f67 7269 6361 642d 6769 746c 6162 2e75  /gricad-gitlab.u
+000008e0: 6e69 762d 6772 656e 6f62 6c65 2d61 6c70  niv-grenoble-alp
+000008f0: 6573 2e66 722f 636f 6e64 616d 6965 2f22  es.fr/condamie/"
+00000900: 0a20 2020 2020 2020 2022 6d69 6175 7464  .        "miautd
+00000910: 6174 612e 6769 745c 6e22 0a20 2020 2020  ata.git\n".     
+00000920: 2020 2022 696e 2070 6f70 756c 7365 5f6d     "in populse_m
+00000930: 6961 2064 6972 6563 746f 7279 2074 6f20  ia directory to 
+00000940: 646f 776e 6c6f 6164 2069 742e 2e2e 5c6e  download it...\n
+00000950: 220a 2020 2020 290a 2020 2020 7379 732e  ".    ).    sys.
+00000960: 6578 6974 2829 0a0a 6966 2028 0a20 2020  exit()..if (.   
+00000970: 206e 6f74 206f 732e 7061 7468 2e64 6972   not os.path.dir
+00000980: 6e61 6d65 286f 732e 7061 7468 2e64 6972  name(os.path.dir
+00000990: 6e61 6d65 286f 732e 7061 7468 2e72 6561  name(os.path.rea
+000009a0: 6c70 6174 6828 5f5f 6669 6c65 5f5f 2929  lpath(__file__))
+000009b0: 290a 2020 2020 696e 2073 7973 2e70 6174  ).    in sys.pat
+000009c0: 680a 293a 0a20 2020 2023 2022 6465 7665  h.):.    # "deve
+000009d0: 6c6f 7065 7222 206d 6f64 650a 2020 2020  loper" mode.    
+000009e0: 726f 6f74 5f64 6576 5f64 6972 203d 206f  root_dev_dir = o
+000009f0: 732e 7061 7468 2e64 6972 6e61 6d65 280a  s.path.dirname(.
+00000a00: 2020 2020 2020 2020 6f73 2e70 6174 682e          os.path.
+00000a10: 6469 726e 616d 6528 0a20 2020 2020 2020  dirname(.       
 00000a20: 2020 2020 206f 732e 7061 7468 2e64 6972       os.path.dir
-00000a30: 6e61 6d65 280a 2020 2020 2020 2020 2020  name(.          
-00000a40: 2020 6f73 2e70 6174 682e 6469 726e 616d    os.path.dirnam
-00000a50: 6528 6f73 2e70 6174 682e 6469 726e 616d  e(os.path.dirnam
-00000a60: 6528 6f73 2e70 6174 682e 7265 616c 7061  e(os.path.realpa
-00000a70: 7468 285f 5f66 696c 655f 5f29 2929 0a20  th(__file__))). 
-00000a80: 2020 2020 2020 2029 0a20 2020 2029 0a0a         ).    )..
-00000a90: 2020 2020 2320 4164 6469 6e67 2070 6f70      # Adding pop
-00000aa0: 756c 7365 5f6d 6961 0a20 2020 2070 7269  ulse_mia.    pri
-00000ab0: 6e74 2827 5c6e 2d20 4d69 6120 696e 2022  nt('\n- Mia in "
-00000ac0: 6465 7665 6c6f 7065 7222 206d 6f64 655c  developer" mode\
-00000ad0: 6e27 290a 0a20 2020 2069 6620 6f73 2e70  n')..    if os.p
-00000ae0: 6174 682e 6973 6469 7228 6f73 2e70 6174  ath.isdir(os.pat
-00000af0: 682e 6a6f 696e 2872 6f6f 745f 6465 765f  h.join(root_dev_
-00000b00: 6469 722c 2022 706f 7075 6c73 652d 6d69  dir, "populse-mi
-00000b10: 6122 2929 3a0a 2020 2020 2020 2020 6d69  a")):.        mi
-00000b20: 615f 6465 765f 6469 7220 3d20 6f73 2e70  a_dev_dir = os.p
-00000b30: 6174 682e 6a6f 696e 2872 6f6f 745f 6465  ath.join(root_de
-00000b40: 765f 6469 722c 2022 706f 7075 6c73 652d  v_dir, "populse-
-00000b50: 6d69 6122 2c20 2270 7974 686f 6e22 290a  mia", "python").
-00000b60: 0a20 2020 2065 6c73 653a 0a20 2020 2020  .    else:.     
-00000b70: 2020 206d 6961 5f64 6576 5f64 6972 203d     mia_dev_dir =
-00000b80: 206f 732e 7061 7468 2e6a 6f69 6e28 726f   os.path.join(ro
-00000b90: 6f74 5f64 6576 5f64 6972 2c20 2270 6f70  ot_dev_dir, "pop
-00000ba0: 756c 7365 5f6d 6961 222c 2022 7079 7468  ulse_mia", "pyth
-00000bb0: 6f6e 2229 0a0a 2020 2020 7379 732e 7061  on")..    sys.pa
-00000bc0: 7468 2e69 6e73 6572 7428 302c 206d 6961  th.insert(0, mia
-00000bd0: 5f64 6576 5f64 6972 290a 2020 2020 6465  _dev_dir).    de
-00000be0: 6c20 6d69 615f 6465 765f 6469 720a 0a20  l mia_dev_dir.. 
-00000bf0: 2020 2023 2041 6464 696e 6720 6d69 615f     # Adding mia_
-00000c00: 7072 6f63 6573 7365 733a 0a20 2020 2069  processes:.    i
-00000c10: 6620 6f73 2e70 6174 682e 6973 6469 7228  f os.path.isdir(
-00000c20: 6f73 2e70 6174 682e 6a6f 696e 2872 6f6f  os.path.join(roo
-00000c30: 745f 6465 765f 6469 722c 2022 6d69 615f  t_dev_dir, "mia_
-00000c40: 7072 6f63 6573 7365 7322 2929 3a0a 2020  processes")):.  
-00000c50: 2020 2020 2020 6d69 615f 7072 6f63 6573        mia_proces
-00000c60: 7365 735f 6465 765f 6469 7220 3d20 6f73  ses_dev_dir = os
-00000c70: 2e70 6174 682e 6a6f 696e 280a 2020 2020  .path.join(.    
-00000c80: 2020 2020 2020 2020 726f 6f74 5f64 6576          root_dev
-00000c90: 5f64 6972 2c20 226d 6961 5f70 726f 6365  _dir, "mia_proce
-00000ca0: 7373 6573 222c 2022 7079 7468 6f6e 220a  sses", "python".
-00000cb0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00000cc0: 2020 7072 696e 7428 0a20 2020 2020 2020    print(.       
-00000cd0: 2020 2020 2022 2d20 5573 696e 6720 6d69       "- Using mi
-00000ce0: 615f 7072 6f63 6573 7365 7320 7061 636b  a_processes pack
-00000cf0: 6167 6520 6672 6f6d 207b 7d20 220a 2020  age from {} ".  
-00000d00: 2020 2020 2020 2020 2020 222e 2e2e 222e            "...".
-00000d10: 666f 726d 6174 286d 6961 5f70 726f 6365  format(mia_proce
-00000d20: 7373 6573 5f64 6576 5f64 6972 290a 2020  sses_dev_dir).  
-00000d30: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00000d40: 7379 732e 7061 7468 2e69 6e73 6572 7428  sys.path.insert(
-00000d50: 312c 206d 6961 5f70 726f 6365 7373 6573  1, mia_processes
-00000d60: 5f64 6576 5f64 6972 290a 2020 2020 2020  _dev_dir).      
-00000d70: 2020 6465 6c20 6d69 615f 7072 6f63 6573    del mia_proces
-00000d80: 7365 735f 6465 765f 6469 720a 0a20 2020  ses_dev_dir..   
-00000d90: 2023 2041 6464 696e 6720 706f 7075 6c73   # Adding populs
-00000da0: 655f 6462 3a0a 2020 2020 6966 206f 732e  e_db:.    if os.
-00000db0: 7061 7468 2e69 7364 6972 286f 732e 7061  path.isdir(os.pa
-00000dc0: 7468 2e6a 6f69 6e28 726f 6f74 5f64 6576  th.join(root_dev
-00000dd0: 5f64 6972 2c20 2270 6f70 756c 7365 5f64  _dir, "populse_d
-00000de0: 6222 2929 3a0a 2020 2020 2020 2020 706f  b")):.        po
-00000df0: 7075 6c73 655f 6462 5f64 6576 5f64 6972  pulse_db_dev_dir
-00000e00: 203d 206f 732e 7061 7468 2e6a 6f69 6e28   = os.path.join(
-00000e10: 726f 6f74 5f64 6576 5f64 6972 2c20 2270  root_dev_dir, "p
-00000e20: 6f70 756c 7365 5f64 6222 2c20 2270 7974  opulse_db", "pyt
-00000e30: 686f 6e22 290a 2020 2020 2020 2020 7072  hon").        pr
-00000e40: 696e 7428 0a20 2020 2020 2020 2020 2020  int(.           
-00000e50: 2022 2d20 5573 696e 6720 706f 7075 6c73   "- Using populs
-00000e60: 655f 6462 2070 6163 6b61 6765 2066 726f  e_db package fro
-00000e70: 6d20 7b7d 2022 0a20 2020 2020 2020 2020  m {} ".         
-00000e80: 2020 2022 2e2e 2e22 2e66 6f72 6d61 7428     "...".format(
-00000e90: 706f 7075 6c73 655f 6462 5f64 6576 5f64  populse_db_dev_d
-00000ea0: 6972 290a 2020 2020 2020 2020 290a 2020  ir).        ).  
-00000eb0: 2020 2020 2020 7379 732e 7061 7468 2e69        sys.path.i
-00000ec0: 6e73 6572 7428 312c 2070 6f70 756c 7365  nsert(1, populse
-00000ed0: 5f64 625f 6465 765f 6469 7229 0a20 2020  _db_dev_dir).   
-00000ee0: 2020 2020 2064 656c 2070 6f70 756c 7365       del populse
-00000ef0: 5f64 625f 6465 765f 6469 720a 0a20 2020  _db_dev_dir..   
-00000f00: 2023 2041 6464 696e 6720 6361 7073 756c   # Adding capsul
-00000f10: 3a0a 2020 2020 6966 206f 732e 7061 7468  :.    if os.path
-00000f20: 2e69 7364 6972 286f 732e 7061 7468 2e6a  .isdir(os.path.j
-00000f30: 6f69 6e28 726f 6f74 5f64 6576 5f64 6972  oin(root_dev_dir
-00000f40: 2c20 2263 6170 7375 6c22 2929 3a0a 2020  , "capsul")):.  
-00000f50: 2020 2020 2020 6361 7073 756c 5f64 6576        capsul_dev
-00000f60: 5f64 6972 203d 206f 732e 7061 7468 2e6a  _dir = os.path.j
-00000f70: 6f69 6e28 726f 6f74 5f64 6576 5f64 6972  oin(root_dev_dir
-00000f80: 2c20 2263 6170 7375 6c22 290a 2020 2020  , "capsul").    
-00000f90: 2020 2020 7072 696e 7428 222d 2055 7369      print("- Usi
-00000fa0: 6e67 2063 6170 7375 6c20 7061 636b 6167  ng capsul packag
-00000fb0: 6520 6672 6f6d 207b 7d20 2220 222e 2e2e  e from {} " "...
-00000fc0: 222e 666f 726d 6174 2863 6170 7375 6c5f  ".format(capsul_
-00000fd0: 6465 765f 6469 7229 290a 2020 2020 2020  dev_dir)).      
-00000fe0: 2020 7379 732e 7061 7468 2e69 6e73 6572    sys.path.inser
-00000ff0: 7428 312c 2063 6170 7375 6c5f 6465 765f  t(1, capsul_dev_
-00001000: 6469 7229 0a20 2020 2020 2020 2064 656c  dir).        del
-00001010: 2063 6170 7375 6c5f 6465 765f 6469 720a   capsul_dev_dir.
-00001020: 0a20 2020 2023 2041 6464 696e 6720 736f  .    # Adding so
-00001030: 6d61 2d62 6173 653a 0a20 2020 2069 6620  ma-base:.    if 
-00001040: 6f73 2e70 6174 682e 6973 6469 7228 6f73  os.path.isdir(os
-00001050: 2e70 6174 682e 6a6f 696e 2872 6f6f 745f  .path.join(root_
-00001060: 6465 765f 6469 722c 2022 736f 6d61 2d62  dev_dir, "soma-b
-00001070: 6173 6522 2929 3a0a 2020 2020 2020 2020  ase")):.        
-00001080: 736f 6d61 5f62 6173 655f 6465 765f 6469  soma_base_dev_di
-00001090: 7220 3d20 6f73 2e70 6174 682e 6a6f 696e  r = os.path.join
-000010a0: 2872 6f6f 745f 6465 765f 6469 722c 2022  (root_dev_dir, "
-000010b0: 736f 6d61 2d62 6173 6522 2c20 2270 7974  soma-base", "pyt
-000010c0: 686f 6e22 290a 2020 2020 2020 2020 7072  hon").        pr
-000010d0: 696e 7428 0a20 2020 2020 2020 2020 2020  int(.           
-000010e0: 2022 2d20 5573 696e 6720 736f 6d61 2d62   "- Using soma-b
-000010f0: 6173 6520 7061 636b 6167 6520 6672 6f6d  ase package from
-00001100: 207b 7d20 220a 2020 2020 2020 2020 2020   {} ".          
-00001110: 2020 222e 2e2e 222e 666f 726d 6174 2873    "...".format(s
-00001120: 6f6d 615f 6261 7365 5f64 6576 5f64 6972  oma_base_dev_dir
-00001130: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
-00001140: 2020 2020 7379 732e 7061 7468 2e69 6e73      sys.path.ins
-00001150: 6572 7428 312c 2073 6f6d 615f 6261 7365  ert(1, soma_base
-00001160: 5f64 6576 5f64 6972 290a 2020 2020 2020  _dev_dir).      
-00001170: 2020 6465 6c20 736f 6d61 5f62 6173 655f    del soma_base_
-00001180: 6465 765f 6469 720a 0a20 2020 2023 2041  dev_dir..    # A
-00001190: 6464 696e 6720 736f 6d61 2d77 6f72 6b66  dding soma-workf
-000011a0: 6c6f 773a 0a20 2020 2069 6620 6f73 2e70  low:.    if os.p
-000011b0: 6174 682e 6973 6469 7228 6f73 2e70 6174  ath.isdir(os.pat
-000011c0: 682e 6a6f 696e 2872 6f6f 745f 6465 765f  h.join(root_dev_
-000011d0: 6469 722c 2022 736f 6d61 2d77 6f72 6b66  dir, "soma-workf
-000011e0: 6c6f 7722 2929 3a0a 2020 2020 2020 2020  low")):.        
-000011f0: 736f 6d61 5f77 6f72 6b66 6c6f 775f 6465  soma_workflow_de
-00001200: 765f 6469 7220 3d20 6f73 2e70 6174 682e  v_dir = os.path.
-00001210: 6a6f 696e 280a 2020 2020 2020 2020 2020  join(.          
-00001220: 2020 726f 6f74 5f64 6576 5f64 6972 2c20    root_dev_dir, 
-00001230: 2273 6f6d 612d 776f 726b 666c 6f77 222c  "soma-workflow",
-00001240: 2022 7079 7468 6f6e 220a 2020 2020 2020   "python".      
-00001250: 2020 290a 2020 2020 2020 2020 7072 696e    ).        prin
-00001260: 7428 0a20 2020 2020 2020 2020 2020 2022  t(.            "
-00001270: 2d20 5573 696e 6720 736f 6d61 2d77 6f72  - Using soma-wor
-00001280: 6b66 6c6f 7720 7061 636b 6167 6520 6672  kflow package fr
-00001290: 6f6d 207b 7d20 220a 2020 2020 2020 2020  om {} ".        
-000012a0: 2020 2020 222e 2e2e 222e 666f 726d 6174      "...".format
-000012b0: 2873 6f6d 615f 776f 726b 666c 6f77 5f64  (soma_workflow_d
-000012c0: 6576 5f64 6972 290a 2020 2020 2020 2020  ev_dir).        
-000012d0: 290a 2020 2020 2020 2020 7379 732e 7061  ).        sys.pa
-000012e0: 7468 2e69 6e73 6572 7428 312c 2073 6f6d  th.insert(1, som
-000012f0: 615f 776f 726b 666c 6f77 5f64 6576 5f64  a_workflow_dev_d
-00001300: 6972 290a 2020 2020 2020 2020 6465 6c20  ir).        del 
-00001310: 736f 6d61 5f77 6f72 6b66 6c6f 775f 6465  soma_workflow_de
-00001320: 765f 6469 720a 0a23 2323 2049 6d70 6f72  v_dir..### Impor
-00001330: 7473 2061 6674 6572 2064 6566 696e 696e  ts after definin
-00001340: 6720 7468 6520 6c6f 6361 7469 6f6e 206f  g the location o
-00001350: 6620 706f 7075 6c73 6520 7061 636b 6167  f populse packag
-00001360: 6573 2069 6e20 7468 6520 6361 7365 206f  es in the case o
-00001370: 6620 610a 2323 2320 6465 7665 6c6f 7065  f a.### develope
-00001380: 7220 636f 6e66 6967 7572 6174 696f 6e3a  r configuration:
-00001390: 0a0a 2320 6361 7073 756c 2069 6d70 6f72  ..# capsul impor
-000013a0: 740a 6672 6f6d 2063 6170 7375 6c2e 6170  t.from capsul.ap
-000013b0: 6920 696d 706f 7274 2028 5069 7065 6c69  i import (Pipeli
-000013c0: 6e65 4e6f 6465 2c20 5072 6f63 6573 732c  neNode, Process,
-000013d0: 2050 726f 6365 7373 4e6f 6465 2c20 5377   ProcessNode, Sw
-000013e0: 6974 6368 2c0a 2020 2020 2020 2020 2020  itch,.          
-000013f0: 2020 2020 2020 2020 2020 2020 2020 6361                ca
-00001400: 7073 756c 5f65 6e67 696e 652c 2067 6574  psul_engine, get
-00001410: 5f70 726f 6365 7373 5f69 6e73 7461 6e63  _process_instanc
-00001420: 6529 0a66 726f 6d20 6361 7073 756c 2e61  e).from capsul.a
-00001430: 7474 7269 6275 7465 732e 636f 6d70 6c65  ttributes.comple
-00001440: 7469 6f6e 5f65 6e67 696e 6520 696d 706f  tion_engine impo
-00001450: 7274 2050 726f 6365 7373 436f 6d70 6c65  rt ProcessComple
-00001460: 7469 6f6e 456e 6769 6e65 0a66 726f 6d20  tionEngine.from 
-00001470: 6361 7073 756c 2e65 6e67 696e 6520 696d  capsul.engine im
-00001480: 706f 7274 2043 6170 7375 6c45 6e67 696e  port CapsulEngin
-00001490: 652c 2057 6f72 6b66 6c6f 7745 7865 6375  e, WorkflowExecu
-000014a0: 7469 6f6e 4572 726f 720a 6672 6f6d 2063  tionError.from c
-000014b0: 6170 7375 6c2e 7069 7065 6c69 6e65 2e70  apsul.pipeline.p
-000014c0: 6970 656c 696e 6520 696d 706f 7274 2050  ipeline import P
-000014d0: 6970 656c 696e 650a 6672 6f6d 2063 6170  ipeline.from cap
-000014e0: 7375 6c2e 7069 7065 6c69 6e65 2e70 6970  sul.pipeline.pip
-000014f0: 656c 696e 655f 776f 726b 666c 6f77 2069  eline_workflow i
-00001500: 6d70 6f72 7420 776f 726b 666c 6f77 5f66  mport workflow_f
-00001510: 726f 6d5f 7069 7065 6c69 6e65 0a66 726f  rom_pipeline.fro
-00001520: 6d20 6361 7073 756c 2e70 6970 656c 696e  m capsul.pipelin
-00001530: 652e 7072 6f63 6573 735f 6974 6572 6174  e.process_iterat
-00001540: 696f 6e20 696d 706f 7274 2050 726f 6365  ion import Proce
-00001550: 7373 4974 6572 6174 696f 6e0a 6672 6f6d  ssIteration.from
-00001560: 2063 6170 7375 6c2e 7072 6f63 6573 732e   capsul.process.
-00001570: 7072 6f63 6573 7320 696d 706f 7274 204e  process import N
-00001580: 6970 7970 6550 726f 6365 7373 0a66 726f  ipypeProcess.fro
-00001590: 6d20 6361 7073 756c 2e71 745f 6775 692e  m capsul.qt_gui.
-000015a0: 7769 6467 6574 732e 7365 7474 696e 6773  widgets.settings
-000015b0: 5f65 6469 746f 7220 696d 706f 7274 2053  _editor import S
-000015c0: 6574 7469 6e67 7345 6469 746f 720a 2320  ettingsEditor.# 
-000015d0: 6d69 615f 7072 6f63 6573 7365 7320 696d  mia_processes im
-000015e0: 706f 7274 0a66 726f 6d20 6d69 615f 7072  port.from mia_pr
-000015f0: 6f63 6573 7365 732e 6272 6963 6b73 2e74  ocesses.bricks.t
-00001600: 6f6f 6c73 2069 6d70 6f72 7420 496e 7075  ools import Inpu
-00001610: 745f 4669 6c74 6572 0a23 2070 6f70 756c  t_Filter.# popul
-00001620: 7365 5f64 6220 696d 706f 7274 0a66 726f  se_db import.fro
-00001630: 6d20 706f 7075 6c73 655f 6462 2e64 6174  m populse_db.dat
-00001640: 6162 6173 6520 696d 706f 7274 2028 4649  abase import (FI
-00001650: 454c 445f 5459 5045 5f42 4f4f 4c45 414e  ELD_TYPE_BOOLEAN
-00001660: 2c20 4649 454c 445f 5459 5045 5f44 4154  , FIELD_TYPE_DAT
-00001670: 452c 0a20 2020 2020 2020 2020 2020 2020  E,.             
-00001680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001690: 2020 2020 4649 454c 445f 5459 5045 5f44      FIELD_TYPE_D
-000016a0: 4154 4554 494d 452c 2046 4945 4c44 5f54  ATETIME, FIELD_T
-000016b0: 5950 455f 464c 4f41 542c 0a20 2020 2020  YPE_FLOAT,.     
-000016c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000016d0: 2020 2020 2020 2020 2020 2020 4649 454c              FIEL
-000016e0: 445f 5459 5045 5f49 4e54 4547 4552 2c20  D_TYPE_INTEGER, 
-000016f0: 4649 454c 445f 5459 5045 5f4c 4953 545f  FIELD_TYPE_LIST_
-00001700: 424f 4f4c 4541 4e2c 0a20 2020 2020 2020  BOOLEAN,.       
-00001710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001720: 2020 2020 2020 2020 2020 4649 454c 445f            FIELD_
-00001730: 5459 5045 5f4c 4953 545f 4441 5445 2c0a  TYPE_LIST_DATE,.
-00001740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001760: 2046 4945 4c44 5f54 5950 455f 4c49 5354   FIELD_TYPE_LIST
-00001770: 5f44 4154 4554 494d 452c 0a20 2020 2020  _DATETIME,.     
-00001780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001790: 2020 2020 2020 2020 2020 2020 4649 454c              FIEL
-000017a0: 445f 5459 5045 5f4c 4953 545f 464c 4f41  D_TYPE_LIST_FLOA
-000017b0: 542c 0a20 2020 2020 2020 2020 2020 2020  T,.             
-000017c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000017d0: 2020 2020 4649 454c 445f 5459 5045 5f4c      FIELD_TYPE_L
-000017e0: 4953 545f 494e 5445 4745 522c 0a20 2020  IST_INTEGER,.   
-000017f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001800: 2020 2020 2020 2020 2020 2020 2020 4649                FI
-00001810: 454c 445f 5459 5045 5f4c 4953 545f 5354  ELD_TYPE_LIST_ST
-00001820: 5249 4e47 2c20 4649 454c 445f 5459 5045  RING, FIELD_TYPE
-00001830: 5f4c 4953 545f 5449 4d45 2c0a 2020 2020  _LIST_TIME,.    
-00001840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001850: 2020 2020 2020 2020 2020 2020 2046 4945               FIE
-00001860: 4c44 5f54 5950 455f 5354 5249 4e47 2c20  LD_TYPE_STRING, 
-00001870: 4649 454c 445f 5459 5045 5f54 494d 4529  FIELD_TYPE_TIME)
-00001880: 0a23 2073 6f6d 6120 696d 706f 7274 0a66  .# soma import.f
-00001890: 726f 6d20 736f 6d61 2e71 745f 6775 692e  rom soma.qt_gui.
-000018a0: 7174 5f62 6163 6b65 6e64 2e51 7420 696d  qt_backend.Qt im
-000018b0: 706f 7274 2051 4974 656d 5365 6c65 6374  port QItemSelect
-000018c0: 696f 6e4d 6f64 656c 2c20 5154 7265 6556  ionModel, QTreeV
-000018d0: 6965 770a 6672 6f6d 2073 6f6d 612e 7174  iew.from soma.qt
-000018e0: 5f67 7569 2e71 745f 6261 636b 656e 642e  _gui.qt_backend.
-000018f0: 5174 5769 6467 6574 7320 696d 706f 7274  QtWidgets import
-00001900: 2051 4d65 6e75 0a0a 2320 706f 7075 6c73   QMenu..# populs
-00001910: 655f 6d69 6120 696d 706f 7274 0a66 726f  e_mia import.fro
-00001920: 6d20 706f 7075 6c73 655f 6d69 612e 6461  m populse_mia.da
-00001930: 7461 5f6d 616e 6167 6572 2e64 6174 615f  ta_manager.data_
-00001940: 6c6f 6164 6572 2069 6d70 6f72 7420 496d  loader import Im
-00001950: 706f 7274 5072 6f67 7265 7373 2c20 496d  portProgress, Im
-00001960: 706f 7274 576f 726b 6572 0a23 2072 6561  portWorker.# rea
-00001970: 645f 6c6f 6729 0a66 726f 6d20 706f 7075  d_log).from popu
-00001980: 6c73 655f 6d69 612e 6461 7461 5f6d 616e  lse_mia.data_man
-00001990: 6167 6572 2e70 726f 6a65 6374 2069 6d70  ager.project imp
-000019a0: 6f72 7420 2843 4f4c 4c45 4354 494f 4e5f  ort (COLLECTION_
-000019b0: 4252 4943 4b2c 0a20 2020 2020 2020 2020  BRICK,.         
-000019c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000019d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000019e0: 2020 2020 2043 4f4c 4c45 4354 494f 4e5f       COLLECTION_
-000019f0: 4355 5252 454e 542c 0a20 2020 2020 2020  CURRENT,.       
-00001a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001a20: 2020 2020 2020 2043 4f4c 4c45 4354 494f         COLLECTIO
-00001a30: 4e5f 4849 5354 4f52 592c 0a20 2020 2020  N_HISTORY,.     
-00001a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001a60: 2020 2020 2020 2020 2043 4f4c 4c45 4354           COLLECT
-00001a70: 494f 4e5f 494e 4954 4941 4c2c 2054 4147  ION_INITIAL, TAG
-00001a80: 5f42 5249 434b 532c 0a20 2020 2020 2020  _BRICKS,.       
-00001a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001ab0: 2020 2020 2020 2054 4147 5f43 4845 434b         TAG_CHECK
-00001ac0: 5355 4d2c 2054 4147 5f45 5850 5f54 5950  SUM, TAG_EXP_TYP
-00001ad0: 452c 0a20 2020 2020 2020 2020 2020 2020  E,.             
-00001ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001b00: 2054 4147 5f46 494c 454e 414d 452c 2054   TAG_FILENAME, T
-00001b10: 4147 5f48 4953 544f 5259 2c0a 2020 2020  AG_HISTORY,.    
-00001b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001b40: 2020 2020 2020 2020 2020 5441 475f 4f52            TAG_OR
-00001b50: 4947 494e 5f55 5345 522c 2054 4147 5f54  IGIN_USER, TAG_T
-00001b60: 5950 452c 0a20 2020 2020 2020 2020 2020  YPE,.           
-00001b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001b90: 2020 2054 5950 455f 4e49 492c 2050 726f     TYPE_NII, Pro
-00001ba0: 6a65 6374 290a 6672 6f6d 2070 6f70 756c  ject).from popul
-00001bb0: 7365 5f6d 6961 2e64 6174 615f 6d61 6e61  se_mia.data_mana
-00001bc0: 6765 722e 7072 6f6a 6563 745f 7072 6f70  ger.project_prop
-00001bd0: 6572 7469 6573 2069 6d70 6f72 7420 5361  erties import Sa
-00001be0: 7665 6450 726f 6a65 6374 730a 6672 6f6d  vedProjects.from
-00001bf0: 2070 6f70 756c 7365 5f6d 6961 2e73 6f66   populse_mia.sof
-00001c00: 7477 6172 655f 7072 6f70 6572 7469 6573  tware_properties
-00001c10: 2069 6d70 6f72 7420 436f 6e66 6967 0a66   import Config.f
-00001c20: 726f 6d20 706f 7075 6c73 655f 6d69 612e  rom populse_mia.
-00001c30: 7573 6572 5f69 6e74 6572 6661 6365 2e64  user_interface.d
-00001c40: 6174 615f 6272 6f77 7365 722e 6d6f 6469  ata_browser.modi
-00001c50: 6679 5f74 6162 6c65 2069 6d70 6f72 7420  fy_table import 
-00001c60: 4d6f 6469 6679 5461 626c 650a 6672 6f6d  ModifyTable.from
-00001c70: 2070 6f70 756c 7365 5f6d 6961 2e75 7365   populse_mia.use
-00001c80: 725f 696e 7465 7266 6163 652e 6d61 696e  r_interface.main
-00001c90: 5f77 696e 646f 7720 696d 706f 7274 204d  _window import M
-00001ca0: 6169 6e57 696e 646f 770a 6672 6f6d 2070  ainWindow.from p
-00001cb0: 6f70 756c 7365 5f6d 6961 2e75 7365 725f  opulse_mia.user_
-00001cc0: 696e 7465 7266 6163 652e 7069 7065 6c69  interface.pipeli
-00001cd0: 6e65 5f6d 616e 6167 6572 2e70 6970 656c  ne_manager.pipel
-00001ce0: 696e 655f 6564 6974 6f72 2069 6d70 6f72  ine_editor impor
-00001cf0: 7420 280a 2020 2020 5069 7065 6c69 6e65  t (.    Pipeline
-00001d00: 4564 6974 6f72 2c20 7361 7665 5f70 6970  Editor, save_pip
-00001d10: 656c 696e 6529 0a66 726f 6d20 706f 7075  eline).from popu
-00001d20: 6c73 655f 6d69 612e 7573 6572 5f69 6e74  lse_mia.user_int
-00001d30: 6572 6661 6365 2e70 6970 656c 696e 655f  erface.pipeline_
-00001d40: 6d61 6e61 6765 722e 7069 7065 6c69 6e65  manager.pipeline
-00001d50: 5f6d 616e 6167 6572 5f74 6162 2069 6d70  _manager_tab imp
-00001d60: 6f72 7420 5c0a 2020 2020 5275 6e50 726f  ort \.    RunPro
-00001d70: 6772 6573 730a 6672 6f6d 2070 6f70 756c  gress.from popul
-00001d80: 7365 5f6d 6961 2e75 7365 725f 696e 7465  se_mia.user_inte
-00001d90: 7266 6163 652e 7069 7065 6c69 6e65 5f6d  rface.pipeline_m
-00001da0: 616e 6167 6572 2e70 726f 6365 7373 5f6c  anager.process_l
-00001db0: 6962 7261 7279 2069 6d70 6f72 7420 5c0a  ibrary import \.
-00001dc0: 2020 2020 5061 636b 6167 654c 6962 7261      PackageLibra
-00001dd0: 7279 4469 616c 6f67 0a66 726f 6d20 706f  ryDialog.from po
-00001de0: 7075 6c73 655f 6d69 612e 7573 6572 5f69  pulse_mia.user_i
-00001df0: 6e74 6572 6661 6365 2e70 6f70 5f75 7073  nterface.pop_ups
-00001e00: 2069 6d70 6f72 7420 2844 6566 6175 6c74   import (Default
-00001e10: 5661 6c75 654c 6973 7443 7265 6174 696f  ValueListCreatio
-00001e20: 6e2c 0a20 2020 2020 2020 2020 2020 2020  n,.             
-00001e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001e50: 2020 2050 6f70 5570 4164 6450 6174 682c     PopUpAddPath,
-00001e60: 2050 6f70 5570 4164 6454 6167 2c0a 2020   PopUpAddTag,.  
-00001e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001e90: 2020 2020 2020 2020 2020 2020 2020 506f                Po
-00001ea0: 7055 7043 6c6f 7365 5069 7065 6c69 6e65  pUpClosePipeline
-00001eb0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00001ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001ee0: 2020 506f 7055 7044 656c 6574 6564 5072    PopUpDeletedPr
-00001ef0: 6f6a 6563 742c 0a20 2020 2020 2020 2020  oject,.         
-00001f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001f20: 2020 2020 2020 2050 6f70 5570 4465 6c65         PopUpDele
-00001f30: 7465 5072 6f6a 6563 742c 0a20 2020 2020  teProject,.     
-00001f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001f60: 2020 2020 2020 2020 2020 2050 6f70 5570             PopUp
-00001f70: 496e 6865 7269 7461 6e63 6544 6963 742c  InheritanceDict,
-00001f80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00001f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001fb0: 2050 6f70 5570 4e65 7750 726f 6a65 6374   PopUpNewProject
-00001fc0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00001fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001ff0: 2020 506f 7055 704f 7065 6e50 726f 6a65    PopUpOpenProje
-00002000: 6374 2c20 506f 7055 7051 7569 742c 0a20  ct, PopUpQuit,. 
-00002010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002030: 2020 2020 2020 2020 2020 2020 2020 2050                 P
-00002040: 6f70 5570 5265 6d6f 7665 5363 616e 2c0a  opUpRemoveScan,.
-00002050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002080: 506f 7055 7053 6565 416c 6c50 726f 6a65  PopUpSeeAllProje
-00002090: 6374 732c 0a20 2020 2020 2020 2020 2020  cts,.           
-000020a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000020b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000020c0: 2020 2020 2050 6f70 5570 5365 6c65 6374       PopUpSelect
-000020d0: 5461 672c 0a20 2020 2020 2020 2020 2020  Tag,.           
-000020e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000020f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002100: 2020 2020 2050 6f70 5570 5365 6c65 6374       PopUpSelect
-00002110: 5461 6743 6f75 6e74 5461 626c 6529 0a66  TagCountTable).f
-00002120: 726f 6d20 706f 7075 6c73 655f 6d69 612e  rom populse_mia.
-00002130: 7574 696c 732e 7574 696c 7320 696d 706f  utils.utils impo
-00002140: 7274 2063 6865 636b 5f76 616c 7565 5f74  rt check_value_t
-00002150: 7970 652c 2074 6162 6c65 5f74 6f5f 6461  ype, table_to_da
-00002160: 7461 6261 7365 0a0a 2320 576f 726b 696e  tabase..# Workin
-00002170: 6720 6672 6f6d 2074 6865 2073 6372 6970  g from the scrip
-00002180: 7473 2064 6972 6563 746f 7279 0a6f 732e  ts directory.os.
-00002190: 6368 6469 7228 6f73 2e70 6174 682e 6469  chdir(os.path.di
-000021a0: 726e 616d 6528 6f73 2e70 6174 682e 7265  rname(os.path.re
-000021b0: 616c 7061 7468 285f 5f66 696c 655f 5f29  alpath(__file__)
-000021c0: 2929 0a0a 2320 4469 7361 626c 6573 2061  ))..# Disables a
-000021d0: 6e79 2065 7465 6c65 6d65 7472 7920 6368  ny etelemetry ch
-000021e0: 6563 6b2e 0a69 6620 224e 4f5f 4554 2220  eck..if "NO_ET" 
-000021f0: 6e6f 7420 696e 206f 732e 656e 7669 726f  not in os.enviro
-00002200: 6e3a 0a20 2020 206f 732e 656e 7669 726f  n:.    os.enviro
-00002210: 6e5b 224e 4f5f 4554 225d 203d 2022 3122  n["NO_ET"] = "1"
-00002220: 0a0a 6966 2022 4e49 5059 5045 5f4e 4f5f  ..if "NIPYPE_NO_
-00002230: 4554 2220 6e6f 7420 696e 206f 732e 656e  ET" not in os.en
-00002240: 7669 726f 6e3a 0a20 2020 206f 732e 656e  viron:.    os.en
-00002250: 7669 726f 6e5b 224e 4950 5950 455f 4e4f  viron["NIPYPE_NO
-00002260: 5f45 5422 5d20 3d20 2231 220a 0a63 6c61  _ET"] = "1"..cla
-00002270: 7373 2054 6573 744d 4941 4361 7365 2875  ss TestMIACase(u
-00002280: 6e69 7474 6573 742e 5465 7374 4361 7365  nittest.TestCase
-00002290: 293a 0a20 2020 2022 2222 5061 7265 6e74  ):.    """Parent
-000022a0: 2063 6c61 7373 2066 6f72 2074 6865 2074   class for the t
-000022b0: 6573 7420 636c 6173 7365 7320 6f66 206d  est classes of m
-000022c0: 6961 2e0a 0a20 2020 203a 436f 6e74 6169  ia...    :Contai
-000022d0: 6e73 3a0a 2020 2020 2020 2020 3a4d 6574  ns:.        :Met
-000022e0: 686f 643a 0a20 2020 2020 2020 2020 2020  hod:.           
-000022f0: 202d 2061 6464 5f76 6973 7561 6c69 7a65   - add_visualize
-00002300: 645f 7461 673a 2073 656c 6563 7473 2061  d_tag: selects a
-00002310: 2074 6167 2074 6f20 6469 7370 6c61 7920   tag to display 
-00002320: 7769 7468 2074 6865 0a20 2020 2020 2020  with the.       
-00002330: 2020 2020 2020 2022 5669 7375 616c 697a         "Visualiz
-00002340: 6564 2074 6167 7322 2070 6f70 2d75 700a  ed tags" pop-up.
-00002350: 2020 2020 2020 2020 2020 2020 2d20 636c              - cl
-00002360: 6561 6e5f 7574 735f 7061 636b 6167 6573  ean_uts_packages
-00002370: 3a20 6465 6c65 7469 6e67 2074 6865 2070  : deleting the p
-00002380: 6163 6b61 6765 2061 6464 6564 2064 7572  ackage added dur
-00002390: 696e 6720 7468 6520 5554 7320 6f72 0a20  ing the UTs or. 
-000023a0: 2020 2020 2020 2020 2020 2020 206f 6c64               old
-000023b0: 206f 6e65 2073 7469 6c6c 2065 7869 7374   one still exist
-000023c0: 696e 670a 2020 2020 2020 2020 2020 2020  ing.            
-000023d0: 2d20 6372 6561 7465 5f6d 6f63 6b5f 6a61  - create_mock_ja
-000023e0: 723a 2063 7265 6174 6573 2061 206d 6f63  r: creates a moc
-000023f0: 6b65 6420 6a61 7661 2028 2e6a 6172 2920  ked java (.jar) 
-00002400: 6578 6563 7574 6162 6c65 0a20 2020 2020  executable.     
-00002410: 2020 2020 2020 202d 2065 6469 745f 6461         - edit_da
-00002420: 7461 6272 6f77 7365 725f 6c69 7374 3a20  tabrowser_list: 
-00002430: 6368 616e 6765 2076 616c 7565 2066 6f72  change value for
-00002440: 2061 2074 6167 2069 6e20 4461 7461 4272   a tag in DataBr
-00002450: 6f77 7365 720a 2020 2020 2020 2020 2020  owser.          
-00002460: 2020 2d20 6578 6563 7574 655f 5144 6961    - execute_QDia
-00002470: 6c6f 6741 6363 6570 743a 2061 6363 6570  logAccept: accep
-00002480: 7420 2863 6c6f 7365 2920 6120 5144 6961  t (close) a QDia
-00002490: 6c6f 6720 696e 7374 616e 6365 0a20 2020  log instance.   
-000024a0: 2020 2020 2020 2020 202d 2065 7865 6375           - execu
-000024b0: 7465 5f51 4469 616c 6f67 436c 6f73 653a  te_QDialogClose:
-000024c0: 2063 6c6f 7365 7320 6120 5144 6961 6c6f   closes a QDialo
-000024d0: 6720 696e 7374 616e 6365 0a20 2020 2020  g instance.     
-000024e0: 2020 2020 2020 202d 2065 7865 6375 7465         - execute
-000024f0: 5f51 4d65 7373 6167 6542 6f78 5f63 6c69  _QMessageBox_cli
-00002500: 636b 436c 6f73 653a 2070 7265 7373 2074  ckClose: press t
-00002510: 6865 2043 6c6f 7365 2062 7574 746f 6e20  he Close button 
-00002520: 6f66 0a20 2020 2020 2020 2020 2020 2020  of.             
-00002530: 2061 2051 4d65 7373 6167 6542 6f78 2069   a QMessageBox i
-00002540: 6e73 7461 6e63 650a 2020 2020 2020 2020  nstance.        
-00002550: 2020 2020 2d20 6578 6563 7574 655f 514d      - execute_QM
-00002560: 6573 7361 6765 426f 785f 636c 6963 6b4f  essageBox_clickO
-00002570: 6b3a 2070 7265 7373 2074 6865 204f 6b20  k: press the Ok 
-00002580: 6275 7474 6f6e 206f 6620 610a 2020 2020  button of a.    
-00002590: 2020 2020 2020 2020 2020 514d 6573 7361            QMessa
-000025a0: 6765 426f 7820 696e 7374 616e 6365 0a20  geBox instance. 
-000025b0: 2020 2020 2020 2020 2020 202d 2065 7865             - exe
-000025c0: 6375 7465 5f51 4d65 7373 6167 6542 6f78  cute_QMessageBox
-000025d0: 5f63 6c69 636b 5965 733a 2070 7265 7373  _clickYes: press
-000025e0: 2074 6865 2059 6573 2062 7574 746f 6e20   the Yes button 
-000025f0: 6f66 2061 0a20 2020 2020 2020 2020 2020  of a.           
-00002600: 2020 2051 4d65 7373 6167 6542 6f78 2069     QMessageBox i
-00002610: 6e73 7461 6e63 650a 2020 2020 2020 2020  nstance.        
-00002620: 2020 2020 2d20 6669 6e64 5f69 7465 6d5f      - find_item_
-00002630: 6279 5f64 6174 613a 206c 6f6f 6b73 2066  by_data: looks f
-00002640: 6f72 2061 2051 4d6f 6465 6c49 6e64 6578  or a QModelIndex
-00002650: 2077 686f 7365 2063 6f6e 7465 6e74 730a   whose contents.
-00002660: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00002670: 7272 6573 706f 6e64 2074 6f20 7468 6520  rrespond to the 
-00002680: 6172 6775 6d65 6e74 2064 6174 610a 2020  argument data.  
-00002690: 2020 2020 2020 2020 2020 2d20 6765 745f            - get_
-000026a0: 6e65 775f 7465 7374 5f70 726f 6a65 6374  new_test_project
-000026b0: 3a20 6372 6561 7465 2061 2074 656d 706f  : create a tempo
-000026c0: 7261 7279 2070 726f 6a65 6374 2074 6861  rary project tha
-000026d0: 7420 6361 6e0a 2020 2020 2020 2020 2020  t can.          
-000026e0: 2020 2020 6265 2073 6166 656c 7920 6d6f      be safely mo
-000026f0: 6469 6669 6564 0a20 2020 2020 2020 2020  dified.         
-00002700: 2020 202d 2070 726f 636c 6962 7669 6577     - proclibview
-00002710: 5f6e 6970 7970 655f 7374 6174 653a 2067  _nipype_state: g
-00002720: 6976 6520 7468 6520 7374 6174 6520 6f66  ive the state of
-00002730: 206e 6970 7970 6520 696e 2074 6865 2070   nipype in the p
-00002740: 726f 6365 7373 0a20 2020 2020 2020 2020  rocess.         
-00002750: 2020 202d 2070 726f 636c 6962 7669 6577     - proclibview
-00002760: 5f6e 6970 7970 655f 7265 7365 745f 7374  _nipype_reset_st
-00002770: 6174 653a 2072 6573 6574 206e 6970 7970  ate: reset nipyp
-00002780: 6520 746f 2069 7473 2069 6e69 7469 616c  e to its initial
-00002790: 2073 7461 7465 0a20 2020 2020 2020 2020   state.         
-000027a0: 2020 2020 2028 6265 666f 7265 2074 6865       (before the
-000027b0: 2073 7461 7274 206f 6620 7468 6520 6375   start of the cu
-000027c0: 7272 656e 7420 7465 7374 2920 696e 2074  rrent test) in t
-000027d0: 6865 2070 726f 6365 7373 206c 6962 7261  he process libra
-000027e0: 7279 2076 6965 770a 2020 2020 2020 2020  ry view.        
-000027f0: 2020 2020 2d20 7265 7374 6172 745f 4d49      - restart_MI
-00002800: 413a 2072 6573 7461 7274 7320 4d49 4120  A: restarts MIA 
-00002810: 7769 7468 696e 2061 2075 6e69 7420 7465  within a unit te
-00002820: 7374 0a20 2020 2020 2020 2020 2020 202d  st.            -
-00002830: 2073 6574 5570 3a20 6361 6c6c 6564 2061   setUp: called a
-00002840: 7574 6f6d 6174 6963 616c 6c79 2062 6566  utomatically bef
-00002850: 6f72 6520 6561 6368 2074 6573 7420 6d65  ore each test me
-00002860: 7468 6f64 0a20 2020 2020 2020 2020 2020  thod.           
-00002870: 202d 2073 6574 5570 436c 6173 733a 2063   - setUpClass: c
-00002880: 616c 6c65 6420 6265 666f 7265 2074 6573  alled before tes
-00002890: 7473 2069 6e20 7468 6520 696e 6469 7669  ts in the indivi
-000028a0: 6475 616c 2063 6c61 7373 0a20 2020 2020  dual class.     
-000028b0: 2020 2020 2020 202d 2074 6561 7244 6f77         - tearDow
-000028c0: 6e3a 2063 6c65 616e 7320 7570 2061 6674  n: cleans up aft
-000028d0: 6572 2065 6163 6820 7465 7374 206d 6574  er each test met
-000028e0: 686f 640a 2020 2020 2020 2020 2020 2020  hod.            
-000028f0: 2d20 7465 6172 446f 776e 436c 6173 733a  - tearDownClass:
-00002900: 2063 616c 6c65 6420 6166 7465 7220 7465   called after te
-00002910: 7374 7320 696e 2074 6865 2069 6e64 6976  sts in the indiv
-00002920: 6964 7561 6c20 636c 6173 730a 2020 2020  idual class.    
-00002930: 2222 220a 0a20 2020 2064 6566 2061 6464  """..    def add
-00002940: 5f76 6973 7561 6c69 7a65 645f 7461 6728  _visualized_tag(
-00002950: 7365 6c66 2c20 7461 6729 3a0a 2020 2020  self, tag):.    
-00002960: 2020 2020 2222 2257 6974 6820 7468 6520      """With the 
-00002970: 2256 6973 7561 6c69 7a65 6420 7461 6773  "Visualized tags
-00002980: 2220 706f 702d 7570 206f 7065 6e2c 2073  " pop-up open, s
-00002990: 656c 6563 7473 2061 2074 6167 2074 6f20  elects a tag to 
-000029a0: 6469 7370 6c61 792e 0a0a 2020 2020 2020  display...      
-000029b0: 2020 2d20 5368 6f75 6c64 2062 6520 6361    - Should be ca
-000029c0: 6c6c 6564 2c20 7769 7468 2061 2064 656c  lled, with a del
-000029d0: 6179 2c20 6265 666f 7265 206f 7065 6e69  ay, before openi
-000029e0: 6e67 2074 6865 2022 5669 7375 616c 697a  ng the "Visualiz
-000029f0: 6564 2074 6167 7322 0a20 2020 2020 2020  ed tags".       
-00002a00: 2020 2070 6f70 2d75 702c 2069 2e65 2e3a     pop-up, i.e.:
-00002a10: 0a20 2020 2020 2020 2020 2020 2020 2051  .              Q
-00002a20: 5469 6d65 722e 7369 6e67 6c65 5368 6f74  Timer.singleShot
-00002a30: 2831 3030 302c 206c 616d 6264 613a 7365  (1000, lambda:se
-00002a40: 6c66 2e61 6464 5f76 6973 7561 6c69 7a65  lf.add_visualize
-00002a50: 645f 7461 6728 0a20 2020 2020 2020 2020  d_tag(.         
-00002a60: 2020 2020 2027 4163 7175 6973 6974 696f       'Acquisitio
-00002a70: 6e44 6174 6527 2929 0a20 2020 2020 2020  nDate')).       
-00002a80: 2020 2049 7427 7320 6375 7272 656e 746c     It's currentl
-00002a90: 7920 6e6f 7420 7468 6520 6361 7365 0a20  y not the case. 
-00002aa0: 2020 2020 2020 2020 2028 7365 6520 5465           (see Te
-00002ab0: 7374 4d49 414e 6f64 6543 6f6e 7472 6f6c  stMIANodeControl
-00002ac0: 6c65 722e 7465 7374 5f66 696c 7465 725f  ler.test_filter_
-00002ad0: 7769 6467 6574 2829 292e 0a0a 2020 2020  widget())...    
-00002ae0: 2020 2020 3a70 6172 616d 2074 6167 3a20      :param tag: 
-00002af0: 7468 6520 7461 6720 746f 2062 6520 6469  the tag to be di
-00002b00: 7370 6c61 7965 6420 2873 7472 290a 2020  splayed (str).  
-00002b10: 2020 2020 2020 2222 220a 0a20 2020 2020        """..     
-00002b20: 2020 2077 203d 2051 4170 706c 6963 6174     w = QApplicat
-00002b30: 696f 6e2e 6163 7469 7665 5769 6e64 6f77  ion.activeWindow
-00002b40: 2829 0a0a 2020 2020 2020 2020 6966 2069  ()..        if i
-00002b50: 7369 6e73 7461 6e63 6528 772c 2051 4469  sinstance(w, QDi
-00002b60: 616c 6f67 293a 0a20 2020 2020 2020 2020  alog):.         
-00002b70: 2020 2076 6973 7561 6c69 7a65 645f 7461     visualized_ta
-00002b80: 6773 203d 2077 2e6c 6179 6f75 7428 292e  gs = w.layout().
-00002b90: 6974 656d 4174 2830 292e 7769 6467 6574  itemAt(0).widget
-00002ba0: 2829 0a20 2020 2020 2020 2020 2020 2074  ().            t
-00002bb0: 6167 735f 6c69 7374 203d 2076 6973 7561  ags_list = visua
-00002bc0: 6c69 7a65 645f 7461 6773 2e6c 6973 745f  lized_tags.list_
-00002bd0: 7769 6467 6574 5f74 6167 730a 0a20 2020  widget_tags..   
-00002be0: 2020 2020 2020 2020 2069 6620 7665 7273           if vers
-00002bf0: 696f 6e2e 7061 7273 6528 5154 5f56 4552  ion.parse(QT_VER
-00002c00: 5349 4f4e 5f53 5452 2920 3d3d 2076 6572  SION_STR) == ver
-00002c10: 7369 6f6e 2e70 6172 7365 2822 352e 392e  sion.parse("5.9.
-00002c20: 3222 293a 0a20 2020 2020 2020 2020 2020  2"):.           
-00002c30: 2020 2020 2066 6f75 6e64 5f69 7465 6d20       found_item 
-00002c40: 3d20 7461 6773 5f6c 6973 742e 6669 6e64  = tags_list.find
-00002c50: 4974 656d 7328 7461 672c 2051 742e 4d61  Items(tag, Qt.Ma
-00002c60: 7463 6845 7861 6374 6c79 290a 0a20 2020  tchExactly)..   
-00002c70: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00002c80: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00002c90: 6f75 6e64 5f69 7465 6d20 3d20 7461 6773  ound_item = tags
-00002ca0: 5f6c 6973 742e 6669 6e64 4974 656d 7328  _list.findItems(
-00002cb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00002cc0: 2020 2020 2074 6167 2c20 5174 2e4d 6174       tag, Qt.Mat
-00002cd0: 6368 466c 6167 2e4d 6174 6368 4578 6163  chFlag.MatchExac
-00002ce0: 746c 790a 2020 2020 2020 2020 2020 2020  tly.            
-00002cf0: 2020 2020 290a 0a20 2020 2020 2020 2020      )..         
-00002d00: 2020 2074 6167 735f 6c69 7374 2e73 6574     tags_list.set
-00002d10: 4375 7272 656e 7449 7465 6d28 666f 756e  CurrentItem(foun
-00002d20: 645f 6974 656d 5b30 5d29 0a20 2020 2020  d_item[0]).     
-00002d30: 2020 2020 2020 2076 6973 7561 6c69 7a65         visualize
-00002d40: 645f 7461 6773 2e63 6c69 636b 5f73 656c  d_tags.click_sel
-00002d50: 6563 745f 7461 6728 290a 0a20 2020 2064  ect_tag()..    d
-00002d60: 6566 2063 6c65 616e 5f75 7473 5f70 6163  ef clean_uts_pac
-00002d70: 6b61 6765 7328 7365 6c66 2c20 7072 6f63  kages(self, proc
-00002d80: 5f6c 6962 5f76 6965 7729 3a0a 2020 2020  _lib_view):.    
-00002d90: 2020 2020 2222 2244 656c 6574 696e 6720      """Deleting 
-00002da0: 7468 6520 7061 636b 6167 6573 2061 6464  the packages add
-00002db0: 6564 2064 7572 696e 6720 7468 6520 5554  ed during the UT
-00002dc0: 732e 2222 220a 0a20 2020 2020 2020 2070  s."""..        p
-00002dd0: 636b 3272 656d 6f76 6520 3d20 5b0a 2020  ck2remove = [.  
-00002de0: 2020 2020 2020 2020 2020 6b0a 2020 2020            k.    
-00002df0: 2020 2020 2020 2020 666f 7220 286b 2c20          for (k, 
-00002e00: 7629 2069 6e20 7072 6f63 5f6c 6962 5f76  v) in proc_lib_v
-00002e10: 6965 772e 746f 5f64 6963 7428 292e 6974  iew.to_dict().it
-00002e20: 656d 7328 290a 2020 2020 2020 2020 2020  ems().          
-00002e30: 2020 6966 2022 5554 735f 7072 6f63 6573    if "UTs_proces
-00002e40: 7365 7322 2069 6e20 6b0a 2020 2020 2020  ses" in k.      
-00002e50: 2020 5d0a 2020 2020 2020 2020 7573 6572    ].        user
-00002e60: 5f70 726f 6320 3d20 7072 6f63 5f6c 6962  _proc = proc_lib
-00002e70: 5f76 6965 772e 746f 5f64 6963 7428 292e  _view.to_dict().
-00002e80: 6765 7428 2255 7365 725f 7072 6f63 6573  get("User_proces
-00002e90: 7365 7322 2c20 4e6f 6e65 290a 0a20 2020  ses", None)..   
-00002ea0: 2020 2020 2069 6620 7573 6572 5f70 726f       if user_pro
-00002eb0: 6320 6973 206e 6f74 204e 6f6e 6520 616e  c is not None an
-00002ec0: 6420 2255 6e69 745f 7465 7374 5f70 6970  d "Unit_test_pip
-00002ed0: 656c 696e 6522 2069 6e20 7573 6572 5f70  eline" in user_p
-00002ee0: 726f 633a 0a20 2020 2020 2020 2020 2020  roc:.           
-00002ef0: 2070 636b 3272 656d 6f76 652e 6170 7065   pck2remove.appe
-00002f00: 6e64 2822 556e 6974 5f74 6573 745f 7069  nd("Unit_test_pi
-00002f10: 7065 6c69 6e65 2229 0a0a 2020 2020 2020  peline")..      
-00002f20: 2020 2320 4d6f 636b 7320 7468 6520 4d65    # Mocks the Me
-00002f30: 7373 6167 6542 6f78 2829 2e71 7565 7374  ssageBox().quest
-00002f40: 696f 6e28 2920 666f 7220 706f 7075 6c73  ion() for populs
-00002f50: 655f 6d69 612e 7573 6572 5f69 6e74 6572  e_mia.user_inter
-00002f60: 6661 6365 2e0a 2020 2020 2020 2020 2320  face..        # 
-00002f70: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
-00002f80: 2e70 726f 6365 7373 5f6c 6962 7261 7279  .process_library
-00002f90: 2e50 6163 6b61 6765 4c69 6272 6172 7944  .PackageLibraryD
-00002fa0: 6961 6c6f 672e 6465 6c65 7465 5f70 6163  ialog.delete_pac
-00002fb0: 6b61 6765 2829 0a20 2020 2020 2020 2051  kage().        Q
-00002fc0: 4d65 7373 6167 6542 6f78 2e71 7565 7374  MessageBox.quest
-00002fd0: 696f 6e20 3d20 4d6f 636b 2872 6574 7572  ion = Mock(retur
-00002fe0: 6e5f 7661 6c75 653d 514d 6573 7361 6765  n_value=QMessage
-00002ff0: 426f 782e 5965 7329 0a0a 2020 2020 2020  Box.Yes)..      
-00003000: 2020 2320 4d6f 636b 7320 7468 6520 6576    # Mocks the ev
-00003010: 656e 742e 6b65 790a 2020 2020 2020 2020  ent.key.        
-00003020: 6576 656e 7420 3d20 4d6f 636b 2829 0a20  event = Mock(). 
-00003030: 2020 2020 2020 2065 7665 6e74 2e6b 6579         event.key
-00003040: 203d 206c 616d 6264 613a 2051 742e 4b65   = lambda: Qt.Ke
-00003050: 795f 4465 6c65 7465 0a0a 2020 2020 2020  y_Delete..      
-00003060: 2020 2320 5265 6d6f 7665 0a20 2020 2020    # Remove.     
-00003070: 2020 2066 6f72 206b 2069 6e20 7063 6b32     for k in pck2
-00003080: 7265 6d6f 7665 3a0a 2020 2020 2020 2020  remove:.        
-00003090: 2020 2020 706b 675f 696e 6465 7820 3d20      pkg_index = 
-000030a0: 7365 6c66 2e66 696e 645f 6974 656d 5f62  self.find_item_b
-000030b0: 795f 6461 7461 2870 726f 635f 6c69 625f  y_data(proc_lib_
-000030c0: 7669 6577 2c20 6b29 0a20 2020 2020 2020  view, k).       
-000030d0: 2020 2020 2028 0a20 2020 2020 2020 2020       (.         
-000030e0: 2020 2020 2020 2070 726f 635f 6c69 625f         proc_lib_
-000030f0: 7669 6577 2e73 656c 6563 7469 6f6e 4d6f  view.selectionMo
-00003100: 6465 6c28 292e 7365 6c65 6374 280a 2020  del().select(.  
-00003110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003120: 2020 706b 675f 696e 6465 782c 2051 4974    pkg_index, QIt
-00003130: 656d 5365 6c65 6374 696f 6e4d 6f64 656c  emSelectionModel
-00003140: 2e53 656c 6563 7443 7572 7265 6e74 0a20  .SelectCurrent. 
-00003150: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00003160: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
-00003170: 2020 2020 2020 2020 2020 2070 726f 635f             proc_
-00003180: 6c69 625f 7669 6577 2e6b 6579 5072 6573  lib_view.keyPres
-00003190: 7345 7665 6e74 2865 7665 6e74 290a 0a20  sEvent(event).. 
-000031a0: 2020 2064 6566 2063 7265 6174 655f 6d6f     def create_mo
-000031b0: 636b 5f6a 6172 2873 656c 662c 2070 6174  ck_jar(self, pat
-000031c0: 6829 3a0a 2020 2020 2020 2020 2222 2243  h):.        """C
-000031d0: 7265 6174 6573 2061 206d 6f63 6b65 6420  reates a mocked 
-000031e0: 6a61 7661 2028 2e6a 6172 2920 6578 6563  java (.jar) exec
-000031f0: 7574 6162 6c65 2e0a 0a20 2020 2020 2020  utable...       
-00003200: 203a 7061 7261 6d20 7061 7468 3a20 7468   :param path: th
-00003210: 6520 6675 6c6c 2070 6174 6820 6f66 2074  e full path of t
-00003220: 6865 2065 7865 6375 7461 626c 652c 2065  he executable, e
-00003230: 6e64 696e 6720 6279 2027 2e6a 6172 270a  nding by '.jar'.
-00003240: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
-00003250: 733a 2030 2069 6620 7375 6363 6573 7320  s: 0 if success 
-00003260: 6f72 2031 2069 6620 6661 696c 7572 650a  or 1 if failure.
-00003270: 2020 2020 2020 2020 2222 220a 0a20 2020          """..   
-00003280: 2020 2020 2028 666f 6c64 6572 2c20 6e61       (folder, na
-00003290: 6d65 2920 3d20 6f73 2e70 6174 682e 7370  me) = os.path.sp
-000032a0: 6c69 7428 7061 7468 290a 0a20 2020 2020  lit(path)..     
-000032b0: 2020 2043 4f4e 5445 4e54 203d 2028 0a20     CONTENT = (. 
-000032c0: 2020 2020 2020 2020 2020 2022 7075 626c             "publ
-000032d0: 6963 2063 6c61 7373 204d 6f63 6b41 7070  ic class MockApp
-000032e0: 207b 5c6e 220a 2020 2020 2020 2020 2020   {\n".          
-000032f0: 2020 2b20 2220 2020 2070 7562 6c69 6320    + "    public 
-00003300: 7374 6174 6963 2076 6f69 6420 6d61 696e  static void main
-00003310: 2853 7472 696e 675b 5d20 6172 6773 297b  (String[] args){
-00003320: 5c6e 220a 2020 2020 2020 2020 2020 2020  \n".            
-00003330: 2b20 2720 2020 2020 2020 2053 7973 7465  + '        Syste
-00003340: 6d2e 6f75 742e 7072 696e 746c 6e28 2245  m.out.println("E
-00003350: 7865 6375 7465 6420 6d6f 636b 206a 6176  xecuted mock jav
-00003360: 6120 6170 702e 2229 3b5c 6e27 0a20 2020  a app.");\n'.   
-00003370: 2020 2020 2020 2020 202b 2022 2020 2020           + "    
-00003380: 7d5c 6e22 0a20 2020 2020 2020 2020 2020  }\n".           
-00003390: 202b 2022 7d22 0a20 2020 2020 2020 2029   + "}".        )
-000033a0: 0a0a 2020 2020 2020 2020 2320 4372 6561  ..        # Crea
-000033b0: 7465 7320 7468 6520 2e6a 6176 6120 736f  tes the .java so
-000033c0: 7572 6365 2063 6f64 650a 2020 2020 2020  urce code.      
-000033d0: 2020 7769 7468 206f 7065 6e28 6f73 2e70    with open(os.p
-000033e0: 6174 682e 6a6f 696e 2866 6f6c 6465 722c  ath.join(folder,
-000033f0: 2022 4d6f 636b 4170 702e 6a61 7661 2229   "MockApp.java")
-00003400: 2c20 2277 2229 2061 7320 6669 6c65 3a0a  , "w") as file:.
-00003410: 2020 2020 2020 2020 2020 2020 6669 6c65              file
-00003420: 2e77 7269 7465 2843 4f4e 5445 4e54 290a  .write(CONTENT).
-00003430: 0a20 2020 2020 2020 2023 2043 7265 6174  .        # Creat
-00003440: 6573 2074 6865 204d 414e 4946 4553 5420  es the MANIFEST 
-00003450: 6669 6c65 0a20 2020 2020 2020 2077 6974  file.        wit
-00003460: 6820 6f70 656e 286f 732e 7061 7468 2e6a  h open(os.path.j
-00003470: 6f69 6e28 666f 6c64 6572 2c20 224d 414e  oin(folder, "MAN
-00003480: 4946 4553 542e 4d46 2229 2c20 2277 2229  IFEST.MF"), "w")
-00003490: 2061 7320 6669 6c65 3a0a 2020 2020 2020   as file:.      
-000034a0: 2020 2020 2020 6669 6c65 2e77 7269 7465        file.write
-000034b0: 2822 4d61 696e 2d43 6c61 7373 3a20 204d  ("Main-Class:  M
-000034c0: 6f63 6b41 7070 5c6e 2229 0a20 2020 2020  ockApp\n").     
-000034d0: 2020 2023 2054 6865 2062 7569 6c64 206f     # The build o
-000034e0: 6e6c 7920 776f 726b 7320 7769 7468 2074  nly works with t
-000034f0: 6865 2027 5c6e 2720 6174 2074 6865 2065  he '\n' at the e
-00003500: 6e64 206f 6620 7468 6520 6d61 6e69 6665  nd of the manife
-00003510: 7374 0a0a 2020 2020 2020 2020 2320 4368  st..        # Ch
-00003520: 6563 6b20 6966 2074 6865 204f 7065 6e4a  eck if the OpenJ
-00003530: 444b 2052 756e 7469 6d65 2028 6a61 7661  DK Runtime (java
-00003540: 2920 6973 2069 6e73 7461 6c6c 6564 0a20  ) is installed. 
-00003550: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
-00003560: 2020 2020 2020 2020 7375 6270 726f 6365          subproce
-00003570: 7373 2e72 756e 285b 226a 6176 6122 2c20  ss.run(["java", 
-00003580: 222d 7665 7273 696f 6e22 5d29 0a0a 2020  "-version"])..  
-00003590: 2020 2020 2020 6578 6365 7074 2046 696c        except Fil
-000035a0: 654e 6f74 466f 756e 6445 7272 6f72 3a0a  eNotFoundError:.
-000035b0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-000035c0: 7428 224f 7065 6e4a 444b 2052 756e 7469  t("OpenJDK Runti
-000035d0: 6d65 2069 7320 6e6f 7420 696e 7374 616c  me is not instal
-000035e0: 6c65 6422 290a 2020 2020 2020 2020 2020  led").          
-000035f0: 2020 7265 7475 726e 2031 0a0a 2020 2020    return 1..    
-00003600: 2020 2020 2320 436f 6d70 696c 6520 616e      # Compile an
-00003610: 6420 7061 636b 0a20 2020 2020 2020 2073  d pack.        s
-00003620: 7562 7072 6f63 6573 732e 7275 6e28 5b22  ubprocess.run(["
-00003630: 6a61 7661 6322 2c20 222d 6422 2c20 222e  javac", "-d", ".
-00003640: 222c 2022 4d6f 636b 4170 702e 6a61 7661  ", "MockApp.java
-00003650: 225d 2c20 6377 643d 666f 6c64 6572 290a  "], cwd=folder).
-00003660: 2020 2020 2020 2020 7375 6270 726f 6365          subproce
-00003670: 7373 2e72 756e 280a 2020 2020 2020 2020  ss.run(.        
-00003680: 2020 2020 5b22 6a61 7222 2c20 2263 766d      ["jar", "cvm
-00003690: 6622 2c20 224d 414e 4946 4553 542e 4d46  f", "MANIFEST.MF
-000036a0: 222c 206e 616d 652c 2022 4d6f 636b 4170  ", name, "MockAp
-000036b0: 702e 636c 6173 7322 5d2c 2063 7764 3d66  p.class"], cwd=f
-000036c0: 6f6c 6465 720a 2020 2020 2020 2020 290a  older.        ).
-000036d0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-000036e0: 6f73 2e70 6174 682e 6578 6973 7473 2870  os.path.exists(p
-000036f0: 6174 6829 3a0a 2020 2020 2020 2020 2020  ath):.          
-00003700: 2020 7072 696e 7428 2254 6865 206a 6176    print("The jav
-00003710: 6120 6578 6563 7574 6162 6c65 2077 6173  a executable was
-00003720: 206e 6f74 2063 7265 6174 6564 2229 0a20   not created"). 
-00003730: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00003740: 6e20 310a 0a20 2020 2020 2020 2072 6574  n 1..        ret
-00003750: 7572 6e20 300a 0a20 2020 2064 6566 2065  urn 0..    def e
-00003760: 6469 745f 6461 7461 6272 6f77 7365 725f  dit_databrowser_
-00003770: 6c69 7374 2873 656c 662c 2076 616c 7565  list(self, value
-00003780: 293a 0a20 2020 2020 2020 2022 2222 4368  ):.        """Ch
-00003790: 616e 6765 2076 616c 7565 2066 6f72 2061  ange value for a
-000037a0: 2074 6167 2069 6e20 4461 7461 4272 6f77   tag in DataBrow
-000037b0: 7365 722e 0a0a 2020 2020 2020 2020 3a70  ser...        :p
-000037c0: 6172 616d 2076 616c 7565 3a20 7468 6520  aram value: the 
-000037d0: 6e65 7720 7661 6c75 650a 2020 2020 2020  new value.      
-000037e0: 2020 2222 220a 0a20 2020 2020 2020 2077    """..        w
-000037f0: 203d 2051 4170 706c 6963 6174 696f 6e2e   = QApplication.
-00003800: 6163 7469 7665 5769 6e64 6f77 2829 0a0a  activeWindow()..
-00003810: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00003820: 7461 6e63 6528 772c 2051 4469 616c 6f67  tance(w, QDialog
-00003830: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
-00003840: 7465 6d20 3d20 772e 7461 626c 652e 6974  tem = w.table.it
-00003850: 656d 2830 2c20 3029 0a20 2020 2020 2020  em(0, 0).       
-00003860: 2020 2020 2069 7465 6d2e 7365 7454 6578       item.setTex
-00003870: 7428 7661 6c75 6529 0a20 2020 2020 2020  t(value).       
-00003880: 2020 2020 2077 2e75 7064 6174 655f 7461       w.update_ta
-00003890: 626c 655f 7661 6c75 6573 2854 7275 6529  ble_values(True)
-000038a0: 0a0a 2020 2020 6465 6620 6578 6563 7574  ..    def execut
-000038b0: 655f 5144 6961 6c6f 6741 6363 6570 7428  e_QDialogAccept(
-000038c0: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
-000038d0: 2222 4163 6365 7074 2028 636c 6f73 6529  ""Accept (close)
-000038e0: 2061 2051 4469 616c 6f67 2077 696e 646f   a QDialog windo
-000038f0: 772e 0a0a 2020 2020 2020 2020 4375 7272  w...        Curr
-00003900: 656e 746c 792c 2074 6869 7320 6d65 7468  ently, this meth
-00003910: 6f64 2069 7320 6e6f 7420 7573 6564 2e0a  od is not used..
-00003920: 2020 2020 2020 2020 2222 220a 0a20 2020          """..   
-00003930: 2020 2020 2077 203d 2051 4170 706c 6963       w = QApplic
-00003940: 6174 696f 6e2e 6163 7469 7665 5769 6e64  ation.activeWind
-00003950: 6f77 2829 0a0a 2020 2020 2020 2020 6966  ow()..        if
-00003960: 2069 7369 6e73 7461 6e63 6528 772c 2051   isinstance(w, Q
-00003970: 4469 616c 6f67 293a 0a20 2020 2020 2020  Dialog):.       
-00003980: 2020 2020 2077 2e61 6363 6570 7428 290a       w.accept().
-00003990: 0a20 2020 2064 6566 2065 7865 6375 7465  .    def execute
-000039a0: 5f51 4469 616c 6f67 436c 6f73 6528 7365  _QDialogClose(se
-000039b0: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
-000039c0: 436c 6f73 6520 6120 5144 6961 6c6f 6720  Close a QDialog 
-000039d0: 7769 6e64 6f77 2e0a 0a20 2020 2020 2020  window...       
-000039e0: 2043 7572 7265 6e74 6c79 2c20 7468 6973   Currently, this
-000039f0: 206d 6574 686f 6420 6973 206e 6f74 2075   method is not u
-00003a00: 7365 642e 0a20 2020 2020 2020 2022 2222  sed..        """
-00003a10: 0a0a 2020 2020 2020 2020 7720 3d20 5141  ..        w = QA
-00003a20: 7070 6c69 6361 7469 6f6e 2e61 6374 6976  pplication.activ
-00003a30: 6557 696e 646f 7728 290a 0a20 2020 2020  eWindow()..     
-00003a40: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00003a50: 2877 2c20 5144 6961 6c6f 6729 3a0a 2020  (w, QDialog):.  
-00003a60: 2020 2020 2020 2020 2020 772e 636c 6f73            w.clos
-00003a70: 6528 290a 0a20 2020 2064 6566 2065 7865  e()..    def exe
-00003a80: 6375 7465 5f51 4d65 7373 6167 6542 6f78  cute_QMessageBox
-00003a90: 5f63 6c69 636b 436c 6f73 6528 7365 6c66  _clickClose(self
-00003aa0: 293a 0a20 2020 2020 2020 2022 2222 5072  ):.        """Pr
-00003ab0: 6573 7320 7468 6520 436c 6f73 6520 6275  ess the Close bu
-00003ac0: 7474 6f6e 206f 6620 6120 514d 6573 7361  tton of a QMessa
-00003ad0: 6765 426f 7820 696e 7374 616e 6365 2e0a  geBox instance..
-00003ae0: 0a20 2020 2020 2020 2043 7572 7265 6e74  .        Current
-00003af0: 6c79 2c20 7468 6973 206d 6574 686f 6420  ly, this method 
-00003b00: 6973 206e 6f74 2075 7365 642e 0a20 2020  is not used..   
-00003b10: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
-00003b20: 2020 7720 3d20 5141 7070 6c69 6361 7469    w = QApplicati
-00003b30: 6f6e 2e61 6374 6976 6557 696e 646f 7728  on.activeWindow(
-00003b40: 290a 0a20 2020 2020 2020 2069 6620 6973  )..        if is
-00003b50: 696e 7374 616e 6365 2877 2c20 514d 6573  instance(w, QMes
-00003b60: 7361 6765 426f 7829 3a0a 2020 2020 2020  sageBox):.      
-00003b70: 2020 2020 2020 636c 6f73 655f 6275 7474        close_butt
-00003b80: 6f6e 203d 2077 2e62 7574 746f 6e28 514d  on = w.button(QM
-00003b90: 6573 7361 6765 426f 782e 436c 6f73 6529  essageBox.Close)
-00003ba0: 0a20 2020 2020 2020 2020 2020 2051 5465  .            QTe
-00003bb0: 7374 2e6d 6f75 7365 436c 6963 6b28 636c  st.mouseClick(cl
-00003bc0: 6f73 655f 6275 7474 6f6e 2c20 5174 2e4c  ose_button, Qt.L
-00003bd0: 6566 7442 7574 746f 6e29 0a0a 2020 2020  eftButton)..    
-00003be0: 6465 6620 6578 6563 7574 655f 514d 6573  def execute_QMes
-00003bf0: 7361 6765 426f 785f 636c 6963 6b4f 6b28  sageBox_clickOk(
-00003c00: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
-00003c10: 2222 5072 6573 7320 7468 6520 4f6b 2062  ""Press the Ok b
-00003c20: 7574 746f 6e20 6f66 2061 2051 4d65 7373  utton of a QMess
-00003c30: 6167 6542 6f78 2069 6e73 7461 6e63 652e  ageBox instance.
-00003c40: 2222 220a 0a20 2020 2020 2020 2077 203d  """..        w =
-00003c50: 2051 4170 706c 6963 6174 696f 6e2e 6163   QApplication.ac
-00003c60: 7469 7665 5769 6e64 6f77 2829 0a0a 2020  tiveWindow()..  
-00003c70: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-00003c80: 6e63 6528 772c 2051 4d65 7373 6167 6542  nce(w, QMessageB
-00003c90: 6f78 293a 0a20 2020 2020 2020 2020 2020  ox):.           
-00003ca0: 2063 6c6f 7365 5f62 7574 746f 6e20 3d20   close_button = 
-00003cb0: 772e 6275 7474 6f6e 2851 4d65 7373 6167  w.button(QMessag
-00003cc0: 6542 6f78 2e4f 6b29 0a20 2020 2020 2020  eBox.Ok).       
-00003cd0: 2020 2020 2051 5465 7374 2e6d 6f75 7365       QTest.mouse
-00003ce0: 436c 6963 6b28 636c 6f73 655f 6275 7474  Click(close_butt
-00003cf0: 6f6e 2c20 5174 2e4c 6566 7442 7574 746f  on, Qt.LeftButto
-00003d00: 6e29 0a0a 2020 2020 6465 6620 6578 6563  n)..    def exec
-00003d10: 7574 655f 514d 6573 7361 6765 426f 785f  ute_QMessageBox_
-00003d20: 636c 6963 6b59 6573 2873 656c 6629 3a0a  clickYes(self):.
-00003d30: 2020 2020 2020 2020 2222 2250 7265 7373          """Press
-00003d40: 2074 6865 2059 6573 2062 7574 746f 6e20   the Yes button 
-00003d50: 6f66 2061 2051 4d65 7373 6167 6542 6f78  of a QMessageBox
-00003d60: 2069 6e73 7461 6e63 652e 0a0a 2020 2020   instance...    
-00003d70: 2020 2020 4375 7272 656e 746c 792c 2074      Currently, t
-00003d80: 6869 7320 6d65 7468 6f64 2069 7320 6e6f  his method is no
-00003d90: 7420 7573 6564 2e0a 2020 2020 2020 2020  t used..        
-00003da0: 2222 220a 0a20 2020 2020 2020 2077 203d  """..        w =
-00003db0: 2051 4170 706c 6963 6174 696f 6e2e 6163   QApplication.ac
-00003dc0: 7469 7665 5769 6e64 6f77 2829 0a0a 2020  tiveWindow()..  
-00003dd0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-00003de0: 6e63 6528 772c 2051 4d65 7373 6167 6542  nce(w, QMessageB
-00003df0: 6f78 293a 0a20 2020 2020 2020 2020 2020  ox):.           
-00003e00: 2063 6c6f 7365 5f62 7574 746f 6e20 3d20   close_button = 
-00003e10: 772e 6275 7474 6f6e 2851 4d65 7373 6167  w.button(QMessag
-00003e20: 6542 6f78 2e59 6573 290a 2020 2020 2020  eBox.Yes).      
-00003e30: 2020 2020 2020 5154 6573 742e 6d6f 7573        QTest.mous
-00003e40: 6543 6c69 636b 2863 6c6f 7365 5f62 7574  eClick(close_but
-00003e50: 746f 6e2c 2051 742e 4c65 6674 4275 7474  ton, Qt.LeftButt
-00003e60: 6f6e 290a 0a20 2020 2064 6566 2066 696e  on)..    def fin
-00003e70: 645f 6974 656d 5f62 795f 6461 7461 280a  d_item_by_data(.
-00003e80: 2020 2020 2020 2020 7365 6c66 2c20 715f          self, q_
-00003e90: 7472 6565 5f76 6965 773a 2051 5472 6565  tree_view: QTree
-00003ea0: 5669 6577 2c20 6461 7461 3a20 7374 720a  View, data: str.
-00003eb0: 2020 2020 2920 2d3e 2051 4d6f 6465 6c49      ) -> QModelI
-00003ec0: 6e64 6578 3a0a 2020 2020 2020 2020 2222  ndex:.        ""
-00003ed0: 224c 6f6f 6b73 2066 6f72 2061 2051 4d6f  "Looks for a QMo
-00003ee0: 6465 6c49 6e64 6578 2c20 696e 2061 2051  delIndex, in a Q
-00003ef0: 5472 6565 5669 6577 2069 6e73 7461 6e63  TreeView instanc
-00003f00: 652e 2222 220a 0a20 2020 2020 2020 2061  e."""..        a
-00003f10: 7373 6572 7420 6973 696e 7374 616e 6365  ssert isinstance
-00003f20: 2871 5f74 7265 655f 7669 6577 2c20 5154  (q_tree_view, QT
-00003f30: 7265 6556 6965 7729 2c20 280a 2020 2020  reeView), (.    
-00003f40: 2020 2020 2020 2020 2266 6972 7374 2061          "first a
-00003f50: 7267 756d 656e 7420 6973 206e 6f74 2061  rgument is not a
-00003f60: 2022 2022 5154 7265 6556 6965 7720 696e   " "QTreeView in
-00003f70: 7374 616e 6365 2122 0a20 2020 2020 2020  stance!".       
-00003f80: 2029 0a20 2020 2020 2020 2071 5f74 7265   ).        q_tre
-00003f90: 655f 7669 6577 2e65 7870 616e 6441 6c6c  e_view.expandAll
-00003fa0: 2829 0a20 2020 2020 2020 2069 6e64 6578  ().        index
-00003fb0: 203d 2071 5f74 7265 655f 7669 6577 2e69   = q_tree_view.i
-00003fc0: 6e64 6578 4174 2851 506f 696e 7428 302c  ndexAt(QPoint(0,
-00003fd0: 2030 2929 0a0a 2020 2020 2020 2020 7768   0))..        wh
-00003fe0: 696c 6520 696e 6465 782e 6461 7461 2829  ile index.data()
-00003ff0: 2061 6e64 2069 6e64 6578 2e64 6174 6128   and index.data(
-00004000: 2920 213d 2064 6174 613a 0a20 2020 2020  ) != data:.     
-00004010: 2020 2020 2020 2069 6e64 6578 203d 2071         index = q
-00004020: 5f74 7265 655f 7669 6577 2e69 6e64 6578  _tree_view.index
-00004030: 4265 6c6f 7728 696e 6465 7829 0a0a 2020  Below(index)..  
-00004040: 2020 2020 2020 7265 7475 726e 2069 6e64        return ind
-00004050: 6578 0a0a 2020 2020 6465 6620 6765 745f  ex..    def get_
-00004060: 6e65 775f 7465 7374 5f70 726f 6a65 6374  new_test_project
-00004070: 2873 656c 662c 206e 616d 653d 2274 6573  (self, name="tes
-00004080: 745f 7072 6f6a 6563 7422 2c20 6c69 6768  t_project", ligh
-00004090: 743d 4661 6c73 6529 3a0a 2020 2020 2020  t=False):.      
-000040a0: 2020 2222 2243 6f70 6965 7320 6120 7465    """Copies a te
-000040b0: 7374 2070 726f 6a65 6374 2077 6865 7265  st project where
-000040c0: 2069 7420 6361 6e20 6265 2073 6166 656c   it can be safel
-000040d0: 7920 6d6f 6469 6669 6564 2e0a 0a20 2020  y modified...   
-000040e0: 2020 2020 202d 2054 6865 206e 6577 2070       - The new p
-000040f0: 726f 6a65 6374 2069 7320 6372 6561 7465  roject is create
-00004100: 6420 696e 2074 6865 202f 746d 7020 282f  d in the /tmp (/
-00004110: 5465 6d70 2920 666f 6c64 6572 2e0a 0a20  Temp) folder... 
-00004120: 2020 2020 2020 203a 7061 7261 6d20 6e61         :param na
-00004130: 6d65 3a20 6e61 6d65 206f 6620 7468 6520  me: name of the 
-00004140: 6469 7265 6374 6f72 7920 636f 6e74 6169  directory contai
-00004150: 6e69 6e67 2074 6865 2070 726f 6a65 6374  ning the project
-00004160: 2028 7374 7229 0a20 2020 2020 2020 203a   (str).        :
-00004170: 7061 7261 6d20 6c69 6768 743a 2054 7275  param light: Tru
-00004180: 6520 746f 2063 6f70 7920 6120 7072 6f6a  e to copy a proj
-00004190: 6563 7420 7769 7468 2066 6577 2064 6f63  ect with few doc
-000041a0: 756d 656e 7473 2028 626f 6f6c 290a 2020  uments (bool).  
-000041b0: 2020 2020 2020 2222 220a 0a20 2020 2020        """..     
-000041c0: 2020 206e 6577 5f74 6573 745f 7072 6f6a     new_test_proj
-000041d0: 203d 206f 732e 7061 7468 2e6a 6f69 6e28   = os.path.join(
-000041e0: 7365 6c66 2e63 6f6e 6669 675f 7061 7468  self.config_path
-000041f0: 2c20 6e61 6d65 290a 0a20 2020 2020 2020  , name)..       
-00004200: 2069 6620 6f73 2e70 6174 682e 6578 6973   if os.path.exis
-00004210: 7473 286e 6577 5f74 6573 745f 7072 6f6a  ts(new_test_proj
-00004220: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
-00004230: 6875 7469 6c2e 726d 7472 6565 286e 6577  hutil.rmtree(new
-00004240: 5f74 6573 745f 7072 6f6a 290a 0a20 2020  _test_proj)..   
-00004250: 2020 2020 2063 6f6e 6669 6720 3d20 436f       config = Co
-00004260: 6e66 6967 2863 6f6e 6669 675f 7061 7468  nfig(config_path
-00004270: 3d73 656c 662e 636f 6e66 6967 5f70 6174  =self.config_pat
-00004280: 6829 0a20 2020 2020 2020 206d 6961 5f70  h).        mia_p
-00004290: 6174 6820 3d20 636f 6e66 6967 2e67 6574  ath = config.get
-000042a0: 5f6d 6961 5f70 6174 6828 290a 0a20 2020  _mia_path()..   
-000042b0: 2020 2020 2074 6573 745f 7072 6f6a 203d       test_proj =
-000042c0: 206f 732e 7061 7468 2e6a 6f69 6e28 0a20   os.path.join(. 
-000042d0: 2020 2020 2020 2020 2020 206d 6961 5f70             mia_p
-000042e0: 6174 682c 0a20 2020 2020 2020 2020 2020  ath,.           
-000042f0: 2022 6d69 6175 7464 6174 6122 2c0a 2020   "miautdata",.  
-00004300: 2020 2020 2020 2020 2020 2272 6573 6f75            "resou
-00004310: 7263 6573 222c 0a20 2020 2020 2020 2020  rces",.         
-00004320: 2020 2022 6d69 6122 2c0a 2020 2020 2020     "mia",.      
-00004330: 2020 2020 2020 226c 6967 6874 5f74 6573        "light_tes
-00004340: 745f 7072 6f6a 6563 7422 2069 6620 6c69  t_project" if li
-00004350: 6768 7420 656c 7365 2022 7072 6f6a 6563  ght else "projec
-00004360: 745f 3822 2c0a 2020 2020 2020 2020 290a  t_8",.        ).
-00004370: 0a20 2020 2020 2020 2073 6875 7469 6c2e  .        shutil.
-00004380: 636f 7079 7472 6565 2874 6573 745f 7072  copytree(test_pr
-00004390: 6f6a 2c20 6e65 775f 7465 7374 5f70 726f  oj, new_test_pro
-000043a0: 6a29 0a20 2020 2020 2020 2072 6574 7572  j).        retur
-000043b0: 6e20 6e65 775f 7465 7374 5f70 726f 6a0a  n new_test_proj.
-000043c0: 0a20 2020 2064 6566 2070 726f 636c 6962  .    def proclib
-000043d0: 7669 6577 5f6e 6970 7970 655f 7374 6174  view_nipype_stat
-000043e0: 6528 7365 6c66 2c20 7072 6f63 5f6c 6962  e(self, proc_lib
-000043f0: 5f76 6965 7729 3a0a 2020 2020 2020 2020  _view):.        
-00004400: 2222 2247 6976 6520 7468 6520 7374 6174  """Give the stat
-00004410: 6520 6f66 206e 6970 7970 6520 7072 6f63  e of nipype proc
-00004420: 5f6c 6962 5f76 6965 772e 0a0a 2020 2020  _lib_view...    
-00004430: 2020 2020 3a70 6172 616d 2070 726f 635f      :param proc_
-00004440: 6c69 625f 7669 6577 3a20 7468 6520 7072  lib_view: the pr
-00004450: 6f63 6573 7320 6c69 6272 6172 7920 7669  ocess library vi
-00004460: 6577 206f 626a 6563 740a 0a20 2020 2020  ew object..     
-00004470: 2020 203a 7265 7475 726e 733a 2074 6865     :returns: the
-00004480: 2073 7461 7465 206f 6620 6e69 7079 7065   state of nipype
-00004490: 2070 726f 635f 6c69 625f 7669 6577 3a0a   proc_lib_view:.
-000044a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000044b0: 2020 2d20 4e6f 6e65 3a20 7072 6f63 5f6c    - None: proc_l
-000044c0: 6962 5f76 6965 7720 6973 2065 6d70 7479  ib_view is empty
-000044d0: 206f 7220 6e69 7079 7065 2069 7320 6e6f   or nipype is no
-000044e0: 7420 6c6f 6164 6564 2e0a 2020 2020 2020  t loaded..      
-000044f0: 2020 2020 2020 2020 2020 2020 2d20 276e              - 'n
-00004500: 6970 7970 6527 3a20 276e 6970 7970 6527  ipype': 'nipype'
-00004510: 2069 7320 6c6f 6164 6564 2062 7574 2027   is loaded but '
-00004520: 696e 7465 7266 6163 6573 2720 6e6f 742e  interfaces' not.
-00004530: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004540: 2020 202d 2027 6e69 7079 7065 2e69 6e74     - 'nipype.int
-00004550: 6572 6661 6365 273a 2027 6e69 7079 7065  erface': 'nipype
-00004560: 2e69 6e74 6572 6661 6365 2720 6973 206c  .interface' is l
-00004570: 6f61 6465 6420 6275 740a 2020 2020 2020  oaded but.      
-00004580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000a30: 6e61 6d65 286f 732e 7061 7468 2e64 6972  name(os.path.dir
+00000a40: 6e61 6d65 286f 732e 7061 7468 2e72 6561  name(os.path.rea
+00000a50: 6c70 6174 6828 5f5f 6669 6c65 5f5f 2929  lpath(__file__))
+00000a60: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
+00000a70: 290a 0a20 2020 2023 2041 6464 696e 6720  )..    # Adding 
+00000a80: 706f 7075 6c73 655f 6d69 610a 2020 2020  populse_mia.    
+00000a90: 7072 696e 7428 275c 6e2d 204d 6961 2069  print('\n- Mia i
+00000aa0: 6e20 2264 6576 656c 6f70 6572 2220 6d6f  n "developer" mo
+00000ab0: 6465 5c6e 2729 0a0a 2020 2020 6966 206f  de\n')..    if o
+00000ac0: 732e 7061 7468 2e69 7364 6972 286f 732e  s.path.isdir(os.
+00000ad0: 7061 7468 2e6a 6f69 6e28 726f 6f74 5f64  path.join(root_d
+00000ae0: 6576 5f64 6972 2c20 2270 6f70 756c 7365  ev_dir, "populse
+00000af0: 2d6d 6961 2229 293a 0a20 2020 2020 2020  -mia")):.       
+00000b00: 206d 6961 5f64 6576 5f64 6972 203d 206f   mia_dev_dir = o
+00000b10: 732e 7061 7468 2e6a 6f69 6e28 726f 6f74  s.path.join(root
+00000b20: 5f64 6576 5f64 6972 2c20 2270 6f70 756c  _dev_dir, "popul
+00000b30: 7365 2d6d 6961 222c 2022 7079 7468 6f6e  se-mia", "python
+00000b40: 2229 0a0a 2020 2020 656c 7365 3a0a 2020  ")..    else:.  
+00000b50: 2020 2020 2020 6d69 615f 6465 765f 6469        mia_dev_di
+00000b60: 7220 3d20 6f73 2e70 6174 682e 6a6f 696e  r = os.path.join
+00000b70: 2872 6f6f 745f 6465 765f 6469 722c 2022  (root_dev_dir, "
+00000b80: 706f 7075 6c73 655f 6d69 6122 2c20 2270  populse_mia", "p
+00000b90: 7974 686f 6e22 290a 0a20 2020 2073 7973  ython")..    sys
+00000ba0: 2e70 6174 682e 696e 7365 7274 2830 2c20  .path.insert(0, 
+00000bb0: 6d69 615f 6465 765f 6469 7229 0a20 2020  mia_dev_dir).   
+00000bc0: 2064 656c 206d 6961 5f64 6576 5f64 6972   del mia_dev_dir
+00000bd0: 0a0a 2020 2020 2320 4164 6469 6e67 206d  ..    # Adding m
+00000be0: 6961 5f70 726f 6365 7373 6573 3a0a 2020  ia_processes:.  
+00000bf0: 2020 6966 206f 732e 7061 7468 2e69 7364    if os.path.isd
+00000c00: 6972 286f 732e 7061 7468 2e6a 6f69 6e28  ir(os.path.join(
+00000c10: 726f 6f74 5f64 6576 5f64 6972 2c20 226d  root_dev_dir, "m
+00000c20: 6961 5f70 726f 6365 7373 6573 2229 293a  ia_processes")):
+00000c30: 0a20 2020 2020 2020 206d 6961 5f70 726f  .        mia_pro
+00000c40: 6365 7373 6573 5f64 6576 5f64 6972 203d  cesses_dev_dir =
+00000c50: 206f 732e 7061 7468 2e6a 6f69 6e28 0a20   os.path.join(. 
+00000c60: 2020 2020 2020 2020 2020 2072 6f6f 745f             root_
+00000c70: 6465 765f 6469 722c 2022 6d69 615f 7072  dev_dir, "mia_pr
+00000c80: 6f63 6573 7365 7322 2c20 2270 7974 686f  ocesses", "pytho
+00000c90: 6e22 0a20 2020 2020 2020 2029 0a20 2020  n".        ).   
+00000ca0: 2020 2020 2070 7269 6e74 280a 2020 2020       print(.    
+00000cb0: 2020 2020 2020 2020 222d 2055 7369 6e67          "- Using
+00000cc0: 206d 6961 5f70 726f 6365 7373 6573 2070   mia_processes p
+00000cd0: 6163 6b61 6765 2066 726f 6d20 7b7d 2022  ackage from {} "
+00000ce0: 0a20 2020 2020 2020 2020 2020 2022 2e2e  .            "..
+00000cf0: 2e22 2e66 6f72 6d61 7428 6d69 615f 7072  .".format(mia_pr
+00000d00: 6f63 6573 7365 735f 6465 765f 6469 7229  ocesses_dev_dir)
+00000d10: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00000d20: 2020 2073 7973 2e70 6174 682e 696e 7365     sys.path.inse
+00000d30: 7274 2831 2c20 6d69 615f 7072 6f63 6573  rt(1, mia_proces
+00000d40: 7365 735f 6465 765f 6469 7229 0a20 2020  ses_dev_dir).   
+00000d50: 2020 2020 2064 656c 206d 6961 5f70 726f       del mia_pro
+00000d60: 6365 7373 6573 5f64 6576 5f64 6972 0a0a  cesses_dev_dir..
+00000d70: 2020 2020 2320 4164 6469 6e67 2070 6f70      # Adding pop
+00000d80: 756c 7365 5f64 623a 0a20 2020 2069 6620  ulse_db:.    if 
+00000d90: 6f73 2e70 6174 682e 6973 6469 7228 6f73  os.path.isdir(os
+00000da0: 2e70 6174 682e 6a6f 696e 2872 6f6f 745f  .path.join(root_
+00000db0: 6465 765f 6469 722c 2022 706f 7075 6c73  dev_dir, "populs
+00000dc0: 655f 6462 2229 293a 0a20 2020 2020 2020  e_db")):.       
+00000dd0: 2070 6f70 756c 7365 5f64 625f 6465 765f   populse_db_dev_
+00000de0: 6469 7220 3d20 6f73 2e70 6174 682e 6a6f  dir = os.path.jo
+00000df0: 696e 2872 6f6f 745f 6465 765f 6469 722c  in(root_dev_dir,
+00000e00: 2022 706f 7075 6c73 655f 6462 222c 2022   "populse_db", "
+00000e10: 7079 7468 6f6e 2229 0a20 2020 2020 2020  python").       
+00000e20: 2070 7269 6e74 280a 2020 2020 2020 2020   print(.        
+00000e30: 2020 2020 222d 2055 7369 6e67 2070 6f70      "- Using pop
+00000e40: 756c 7365 5f64 6220 7061 636b 6167 6520  ulse_db package 
+00000e50: 6672 6f6d 207b 7d20 220a 2020 2020 2020  from {} ".      
+00000e60: 2020 2020 2020 222e 2e2e 222e 666f 726d        "...".form
+00000e70: 6174 2870 6f70 756c 7365 5f64 625f 6465  at(populse_db_de
+00000e80: 765f 6469 7229 0a20 2020 2020 2020 2029  v_dir).        )
+00000e90: 0a20 2020 2020 2020 2073 7973 2e70 6174  .        sys.pat
+00000ea0: 682e 696e 7365 7274 2831 2c20 706f 7075  h.insert(1, popu
+00000eb0: 6c73 655f 6462 5f64 6576 5f64 6972 290a  lse_db_dev_dir).
+00000ec0: 2020 2020 2020 2020 6465 6c20 706f 7075          del popu
+00000ed0: 6c73 655f 6462 5f64 6576 5f64 6972 0a0a  lse_db_dev_dir..
+00000ee0: 2020 2020 2320 4164 6469 6e67 2063 6170      # Adding cap
+00000ef0: 7375 6c3a 0a20 2020 2069 6620 6f73 2e70  sul:.    if os.p
+00000f00: 6174 682e 6973 6469 7228 6f73 2e70 6174  ath.isdir(os.pat
+00000f10: 682e 6a6f 696e 2872 6f6f 745f 6465 765f  h.join(root_dev_
+00000f20: 6469 722c 2022 6361 7073 756c 2229 293a  dir, "capsul")):
+00000f30: 0a20 2020 2020 2020 2063 6170 7375 6c5f  .        capsul_
+00000f40: 6465 765f 6469 7220 3d20 6f73 2e70 6174  dev_dir = os.pat
+00000f50: 682e 6a6f 696e 2872 6f6f 745f 6465 765f  h.join(root_dev_
+00000f60: 6469 722c 2022 6361 7073 756c 2229 0a20  dir, "capsul"). 
+00000f70: 2020 2020 2020 2070 7269 6e74 2822 2d20         print("- 
+00000f80: 5573 696e 6720 6361 7073 756c 2070 6163  Using capsul pac
+00000f90: 6b61 6765 2066 726f 6d20 7b7d 2022 2022  kage from {} " "
+00000fa0: 2e2e 2e22 2e66 6f72 6d61 7428 6361 7073  ...".format(caps
+00000fb0: 756c 5f64 6576 5f64 6972 2929 0a20 2020  ul_dev_dir)).   
+00000fc0: 2020 2020 2073 7973 2e70 6174 682e 696e       sys.path.in
+00000fd0: 7365 7274 2831 2c20 6361 7073 756c 5f64  sert(1, capsul_d
+00000fe0: 6576 5f64 6972 290a 2020 2020 2020 2020  ev_dir).        
+00000ff0: 6465 6c20 6361 7073 756c 5f64 6576 5f64  del capsul_dev_d
+00001000: 6972 0a0a 2020 2020 2320 4164 6469 6e67  ir..    # Adding
+00001010: 2073 6f6d 612d 6261 7365 3a0a 2020 2020   soma-base:.    
+00001020: 6966 206f 732e 7061 7468 2e69 7364 6972  if os.path.isdir
+00001030: 286f 732e 7061 7468 2e6a 6f69 6e28 726f  (os.path.join(ro
+00001040: 6f74 5f64 6576 5f64 6972 2c20 2273 6f6d  ot_dev_dir, "som
+00001050: 612d 6261 7365 2229 293a 0a20 2020 2020  a-base")):.     
+00001060: 2020 2073 6f6d 615f 6261 7365 5f64 6576     soma_base_dev
+00001070: 5f64 6972 203d 206f 732e 7061 7468 2e6a  _dir = os.path.j
+00001080: 6f69 6e28 726f 6f74 5f64 6576 5f64 6972  oin(root_dev_dir
+00001090: 2c20 2273 6f6d 612d 6261 7365 222c 2022  , "soma-base", "
+000010a0: 7079 7468 6f6e 2229 0a20 2020 2020 2020  python").       
+000010b0: 2070 7269 6e74 280a 2020 2020 2020 2020   print(.        
+000010c0: 2020 2020 222d 2055 7369 6e67 2073 6f6d      "- Using som
+000010d0: 612d 6261 7365 2070 6163 6b61 6765 2066  a-base package f
+000010e0: 726f 6d20 7b7d 2022 0a20 2020 2020 2020  rom {} ".       
+000010f0: 2020 2020 2022 2e2e 2e22 2e66 6f72 6d61       "...".forma
+00001100: 7428 736f 6d61 5f62 6173 655f 6465 765f  t(soma_base_dev_
+00001110: 6469 7229 0a20 2020 2020 2020 2029 0a20  dir).        ). 
+00001120: 2020 2020 2020 2073 7973 2e70 6174 682e         sys.path.
+00001130: 696e 7365 7274 2831 2c20 736f 6d61 5f62  insert(1, soma_b
+00001140: 6173 655f 6465 765f 6469 7229 0a20 2020  ase_dev_dir).   
+00001150: 2020 2020 2064 656c 2073 6f6d 615f 6261       del soma_ba
+00001160: 7365 5f64 6576 5f64 6972 0a0a 2020 2020  se_dev_dir..    
+00001170: 2320 4164 6469 6e67 2073 6f6d 612d 776f  # Adding soma-wo
+00001180: 726b 666c 6f77 3a0a 2020 2020 6966 206f  rkflow:.    if o
+00001190: 732e 7061 7468 2e69 7364 6972 286f 732e  s.path.isdir(os.
+000011a0: 7061 7468 2e6a 6f69 6e28 726f 6f74 5f64  path.join(root_d
+000011b0: 6576 5f64 6972 2c20 2273 6f6d 612d 776f  ev_dir, "soma-wo
+000011c0: 726b 666c 6f77 2229 293a 0a20 2020 2020  rkflow")):.     
+000011d0: 2020 2073 6f6d 615f 776f 726b 666c 6f77     soma_workflow
+000011e0: 5f64 6576 5f64 6972 203d 206f 732e 7061  _dev_dir = os.pa
+000011f0: 7468 2e6a 6f69 6e28 0a20 2020 2020 2020  th.join(.       
+00001200: 2020 2020 2072 6f6f 745f 6465 765f 6469       root_dev_di
+00001210: 722c 2022 736f 6d61 2d77 6f72 6b66 6c6f  r, "soma-workflo
+00001220: 7722 2c20 2270 7974 686f 6e22 0a20 2020  w", "python".   
+00001230: 2020 2020 2029 0a20 2020 2020 2020 2070       ).        p
+00001240: 7269 6e74 280a 2020 2020 2020 2020 2020  rint(.          
+00001250: 2020 222d 2055 7369 6e67 2073 6f6d 612d    "- Using soma-
+00001260: 776f 726b 666c 6f77 2070 6163 6b61 6765  workflow package
+00001270: 2066 726f 6d20 7b7d 2022 0a20 2020 2020   from {} ".     
+00001280: 2020 2020 2020 2022 2e2e 2e22 2e66 6f72         "...".for
+00001290: 6d61 7428 736f 6d61 5f77 6f72 6b66 6c6f  mat(soma_workflo
+000012a0: 775f 6465 765f 6469 7229 0a20 2020 2020  w_dev_dir).     
+000012b0: 2020 2029 0a20 2020 2020 2020 2073 7973     ).        sys
+000012c0: 2e70 6174 682e 696e 7365 7274 2831 2c20  .path.insert(1, 
+000012d0: 736f 6d61 5f77 6f72 6b66 6c6f 775f 6465  soma_workflow_de
+000012e0: 765f 6469 7229 0a20 2020 2020 2020 2064  v_dir).        d
+000012f0: 656c 2073 6f6d 615f 776f 726b 666c 6f77  el soma_workflow
+00001300: 5f64 6576 5f64 6972 0a0a 2320 496d 706f  _dev_dir..# Impo
+00001310: 7274 7320 6166 7465 7220 6465 6669 6e69  rts after defini
+00001320: 6e67 2074 6865 206c 6f63 6174 696f 6e20  ng the location 
+00001330: 6f66 2070 6f70 756c 7365 2070 6163 6b61  of populse packa
+00001340: 6765 7320 696e 2074 6865 2063 6173 6520  ges in the case 
+00001350: 6f66 2061 0a23 2064 6576 656c 6f70 6572  of a.# developer
+00001360: 2063 6f6e 6669 6775 7261 7469 6f6e 3a0a   configuration:.
+00001370: 0a23 2043 6170 7375 6c20 696d 706f 7274  .# Capsul import
+00001380: 0a66 726f 6d20 6361 7073 756c 2e61 7069  .from capsul.api
+00001390: 2069 6d70 6f72 7420 2820 2023 206e 6f71   import (  # noq
+000013a0: 613a 2045 3430 320a 2020 2020 5069 7065  a: E402.    Pipe
+000013b0: 6c69 6e65 4e6f 6465 2c0a 2020 2020 5072  lineNode,.    Pr
+000013c0: 6f63 6573 734e 6f64 652c 0a20 2020 2053  ocessNode,.    S
+000013d0: 7769 7463 682c 0a20 2020 2067 6574 5f70  witch,.    get_p
+000013e0: 726f 6365 7373 5f69 6e73 7461 6e63 652c  rocess_instance,
+000013f0: 0a29 0a66 726f 6d20 6361 7073 756c 2e61  .).from capsul.a
+00001400: 7474 7269 6275 7465 732e 636f 6d70 6c65  ttributes.comple
+00001410: 7469 6f6e 5f65 6e67 696e 6520 696d 706f  tion_engine impo
+00001420: 7274 2028 2020 2320 6e6f 7161 3a20 4534  rt (  # noqa: E4
+00001430: 3032 0a20 2020 2050 726f 6365 7373 436f  02.    ProcessCo
+00001440: 6d70 6c65 7469 6f6e 456e 6769 6e65 2c0a  mpletionEngine,.
+00001450: 290a 6672 6f6d 2063 6170 7375 6c2e 656e  ).from capsul.en
+00001460: 6769 6e65 2069 6d70 6f72 7420 4361 7073  gine import Caps
+00001470: 756c 456e 6769 6e65 2c20 576f 726b 666c  ulEngine, Workfl
+00001480: 6f77 4578 6563 7574 696f 6e45 7272 6f72  owExecutionError
+00001490: 2020 2320 6e6f 7161 3a20 4534 3032 0a66    # noqa: E402.f
+000014a0: 726f 6d20 6361 7073 756c 2e70 6970 656c  rom capsul.pipel
+000014b0: 696e 652e 7069 7065 6c69 6e65 2069 6d70  ine.pipeline imp
+000014c0: 6f72 7420 5069 7065 6c69 6e65 2020 2320  ort Pipeline  # 
+000014d0: 6e6f 7161 3a20 4534 3032 0a66 726f 6d20  noqa: E402.from 
+000014e0: 6361 7073 756c 2e70 6970 656c 696e 652e  capsul.pipeline.
+000014f0: 7069 7065 6c69 6e65 5f77 6f72 6b66 6c6f  pipeline_workflo
+00001500: 7720 696d 706f 7274 2028 2020 2320 6e6f  w import (  # no
+00001510: 7161 3a20 4534 3032 0a20 2020 2077 6f72  qa: E402.    wor
+00001520: 6b66 6c6f 775f 6672 6f6d 5f70 6970 656c  kflow_from_pipel
+00001530: 696e 652c 0a29 0a66 726f 6d20 6361 7073  ine,.).from caps
+00001540: 756c 2e70 6970 656c 696e 652e 7072 6f63  ul.pipeline.proc
+00001550: 6573 735f 6974 6572 6174 696f 6e20 696d  ess_iteration im
+00001560: 706f 7274 2050 726f 6365 7373 4974 6572  port ProcessIter
+00001570: 6174 696f 6e20 2023 206e 6f71 613a 2045  ation  # noqa: E
+00001580: 3430 320a 6672 6f6d 2063 6170 7375 6c2e  402.from capsul.
+00001590: 7072 6f63 6573 732e 7072 6f63 6573 7320  process.process 
+000015a0: 696d 706f 7274 204e 6970 7970 6550 726f  import NipypePro
+000015b0: 6365 7373 2020 2320 6e6f 7161 3a20 4534  cess  # noqa: E4
+000015c0: 3032 0a66 726f 6d20 6361 7073 756c 2e71  02.from capsul.q
+000015d0: 745f 6775 692e 7769 6467 6574 732e 7365  t_gui.widgets.se
+000015e0: 7474 696e 6773 5f65 6469 746f 7220 696d  ttings_editor im
+000015f0: 706f 7274 2053 6574 7469 6e67 7345 6469  port SettingsEdi
+00001600: 746f 7220 2023 206e 6f71 613a 2045 3430  tor  # noqa: E40
+00001610: 320a 0a23 204d 6961 5f70 726f 6365 7373  2..# Mia_process
+00001620: 6573 2069 6d70 6f72 740a 6672 6f6d 206d  es import.from m
+00001630: 6961 5f70 726f 6365 7373 6573 2e62 7269  ia_processes.bri
+00001640: 636b 732e 746f 6f6c 7320 696d 706f 7274  cks.tools import
+00001650: 2049 6e70 7574 5f46 696c 7465 7220 2023   Input_Filter  #
+00001660: 206e 6f71 613a 2045 3430 320a 0a23 2050   noqa: E402..# P
+00001670: 6f70 756c 7365 5f64 6220 696d 706f 7274  opulse_db import
+00001680: 0a66 726f 6d20 706f 7075 6c73 655f 6462  .from populse_db
+00001690: 2e64 6174 6162 6173 6520 696d 706f 7274  .database import
+000016a0: 2028 2020 2320 6e6f 7161 3a20 4534 3032   (  # noqa: E402
+000016b0: 0a20 2020 2046 4945 4c44 5f54 5950 455f  .    FIELD_TYPE_
+000016c0: 424f 4f4c 4541 4e2c 0a20 2020 2046 4945  BOOLEAN,.    FIE
+000016d0: 4c44 5f54 5950 455f 4441 5445 2c0a 2020  LD_TYPE_DATE,.  
+000016e0: 2020 4649 454c 445f 5459 5045 5f44 4154    FIELD_TYPE_DAT
+000016f0: 4554 494d 452c 0a20 2020 2046 4945 4c44  ETIME,.    FIELD
+00001700: 5f54 5950 455f 464c 4f41 542c 0a20 2020  _TYPE_FLOAT,.   
+00001710: 2046 4945 4c44 5f54 5950 455f 494e 5445   FIELD_TYPE_INTE
+00001720: 4745 522c 0a20 2020 2046 4945 4c44 5f54  GER,.    FIELD_T
+00001730: 5950 455f 4c49 5354 5f42 4f4f 4c45 414e  YPE_LIST_BOOLEAN
+00001740: 2c0a 2020 2020 4649 454c 445f 5459 5045  ,.    FIELD_TYPE
+00001750: 5f4c 4953 545f 4441 5445 2c0a 2020 2020  _LIST_DATE,.    
+00001760: 4649 454c 445f 5459 5045 5f4c 4953 545f  FIELD_TYPE_LIST_
+00001770: 4441 5445 5449 4d45 2c0a 2020 2020 4649  DATETIME,.    FI
+00001780: 454c 445f 5459 5045 5f4c 4953 545f 464c  ELD_TYPE_LIST_FL
+00001790: 4f41 542c 0a20 2020 2046 4945 4c44 5f54  OAT,.    FIELD_T
+000017a0: 5950 455f 4c49 5354 5f49 4e54 4547 4552  YPE_LIST_INTEGER
+000017b0: 2c0a 2020 2020 4649 454c 445f 5459 5045  ,.    FIELD_TYPE
+000017c0: 5f4c 4953 545f 5354 5249 4e47 2c0a 2020  _LIST_STRING,.  
+000017d0: 2020 4649 454c 445f 5459 5045 5f4c 4953    FIELD_TYPE_LIS
+000017e0: 545f 5449 4d45 2c0a 2020 2020 4649 454c  T_TIME,.    FIEL
+000017f0: 445f 5459 5045 5f53 5452 494e 472c 0a20  D_TYPE_STRING,. 
+00001800: 2020 2046 4945 4c44 5f54 5950 455f 5449     FIELD_TYPE_TI
+00001810: 4d45 2c0a 290a 0a23 2073 6f6d 6120 696d  ME,.)..# soma im
+00001820: 706f 7274 0a66 726f 6d20 736f 6d61 2e71  port.from soma.q
+00001830: 745f 6775 692e 7174 5f62 6163 6b65 6e64  t_gui.qt_backend
+00001840: 2e51 7420 696d 706f 7274 2028 2020 2320  .Qt import (  # 
+00001850: 6e6f 7161 3a20 4534 3032 0a20 2020 2051  noqa: E402.    Q
+00001860: 4974 656d 5365 6c65 6374 696f 6e4d 6f64  ItemSelectionMod
+00001870: 656c 2c0a 2020 2020 5154 7265 6556 6965  el,.    QTreeVie
+00001880: 772c 0a29 0a66 726f 6d20 736f 6d61 2e71  w,.).from soma.q
+00001890: 745f 6775 692e 7174 5f62 6163 6b65 6e64  t_gui.qt_backend
+000018a0: 2e51 7457 6964 6765 7473 2069 6d70 6f72  .QtWidgets impor
+000018b0: 7420 514d 656e 7520 2023 206e 6f71 613a  t QMenu  # noqa:
+000018c0: 2045 3430 320a 0a23 2050 6f70 756c 7365   E402..# Populse
+000018d0: 5f6d 6961 2069 6d70 6f72 740a 6672 6f6d  _mia import.from
+000018e0: 2070 6f70 756c 7365 5f6d 6961 2e64 6174   populse_mia.dat
+000018f0: 615f 6d61 6e61 6765 722e 6461 7461 5f6c  a_manager.data_l
+00001900: 6f61 6465 7220 696d 706f 7274 2028 2020  oader import (  
+00001910: 2320 6e6f 7161 3a20 4534 3032 0a20 2020  # noqa: E402.   
+00001920: 2049 6d70 6f72 7450 726f 6772 6573 732c   ImportProgress,
+00001930: 0a20 2020 2049 6d70 6f72 7457 6f72 6b65  .    ImportWorke
+00001940: 722c 0a29 0a66 726f 6d20 706f 7075 6c73  r,.).from populs
+00001950: 655f 6d69 612e 6461 7461 5f6d 616e 6167  e_mia.data_manag
+00001960: 6572 2e70 726f 6a65 6374 2069 6d70 6f72  er.project impor
+00001970: 7420 2820 2023 206e 6f71 613a 2045 3430  t (  # noqa: E40
+00001980: 320a 2020 2020 434f 4c4c 4543 5449 4f4e  2.    COLLECTION
+00001990: 5f42 5249 434b 2c0a 2020 2020 434f 4c4c  _BRICK,.    COLL
+000019a0: 4543 5449 4f4e 5f43 5552 5245 4e54 2c0a  ECTION_CURRENT,.
+000019b0: 2020 2020 434f 4c4c 4543 5449 4f4e 5f48      COLLECTION_H
+000019c0: 4953 544f 5259 2c0a 2020 2020 434f 4c4c  ISTORY,.    COLL
+000019d0: 4543 5449 4f4e 5f49 4e49 5449 414c 2c0a  ECTION_INITIAL,.
+000019e0: 2020 2020 5441 475f 4252 4943 4b53 2c0a      TAG_BRICKS,.
+000019f0: 2020 2020 5441 475f 4348 4543 4b53 554d      TAG_CHECKSUM
+00001a00: 2c0a 2020 2020 5441 475f 4558 505f 5459  ,.    TAG_EXP_TY
+00001a10: 5045 2c0a 2020 2020 5441 475f 4649 4c45  PE,.    TAG_FILE
+00001a20: 4e41 4d45 2c0a 2020 2020 5441 475f 4849  NAME,.    TAG_HI
+00001a30: 5354 4f52 592c 0a20 2020 2054 4147 5f4f  STORY,.    TAG_O
+00001a40: 5249 4749 4e5f 5553 4552 2c0a 2020 2020  RIGIN_USER,.    
+00001a50: 5441 475f 5459 5045 2c0a 2020 2020 5459  TAG_TYPE,.    TY
+00001a60: 5045 5f4e 4949 2c0a 2020 2020 5072 6f6a  PE_NII,.    Proj
+00001a70: 6563 742c 0a29 0a66 726f 6d20 706f 7075  ect,.).from popu
+00001a80: 6c73 655f 6d69 612e 6461 7461 5f6d 616e  lse_mia.data_man
+00001a90: 6167 6572 2e70 726f 6a65 6374 5f70 726f  ager.project_pro
+00001aa0: 7065 7274 6965 7320 696d 706f 7274 2028  perties import (
+00001ab0: 2020 2320 6e6f 7161 3a20 4534 3032 0a20    # noqa: E402. 
+00001ac0: 2020 2053 6176 6564 5072 6f6a 6563 7473     SavedProjects
+00001ad0: 2c0a 290a 6672 6f6d 2070 6f70 756c 7365  ,.).from populse
+00001ae0: 5f6d 6961 2e73 6f66 7477 6172 655f 7072  _mia.software_pr
+00001af0: 6f70 6572 7469 6573 2069 6d70 6f72 7420  operties import 
+00001b00: 436f 6e66 6967 2020 2320 6e6f 7161 3a20  Config  # noqa: 
+00001b10: 4534 3032 0a66 726f 6d20 706f 7075 6c73  E402.from populs
+00001b20: 655f 6d69 612e 7573 6572 5f69 6e74 6572  e_mia.user_inter
+00001b30: 6661 6365 2e64 6174 615f 6272 6f77 7365  face.data_browse
+00001b40: 722e 6d6f 6469 6679 5f74 6162 6c65 2069  r.modify_table i
+00001b50: 6d70 6f72 7420 2820 2023 206e 6f71 613a  mport (  # noqa:
+00001b60: 2045 3430 322c 2045 3530 310a 2020 2020   E402, E501.    
+00001b70: 4d6f 6469 6679 5461 626c 652c 0a29 0a66  ModifyTable,.).f
+00001b80: 726f 6d20 706f 7075 6c73 655f 6d69 612e  rom populse_mia.
+00001b90: 7573 6572 5f69 6e74 6572 6661 6365 2e6d  user_interface.m
+00001ba0: 6169 6e5f 7769 6e64 6f77 2069 6d70 6f72  ain_window impor
+00001bb0: 7420 4d61 696e 5769 6e64 6f77 2020 2320  t MainWindow  # 
+00001bc0: 6e6f 7161 3a20 4534 3032 0a66 726f 6d20  noqa: E402.from 
+00001bd0: 706f 7075 6c73 655f 6d69 612e 7573 6572  populse_mia.user
+00001be0: 5f69 6e74 6572 6661 6365 2e70 6970 656c  _interface.pipel
+00001bf0: 696e 655f 6d61 6e61 6765 722e 7069 7065  ine_manager.pipe
+00001c00: 6c69 6e65 5f65 6469 746f 7220 696d 706f  line_editor impo
+00001c10: 7274 2028 2020 2320 6e6f 7161 3a20 4534  rt (  # noqa: E4
+00001c20: 3032 2c20 4535 3031 0a20 2020 2050 6970  02, E501.    Pip
+00001c30: 656c 696e 6545 6469 746f 722c 0a20 2020  elineEditor,.   
+00001c40: 2073 6176 655f 7069 7065 6c69 6e65 2c0a   save_pipeline,.
+00001c50: 290a 6672 6f6d 2070 6f70 756c 7365 5f6d  ).from populse_m
+00001c60: 6961 2e75 7365 725f 696e 7465 7266 6163  ia.user_interfac
+00001c70: 652e 7069 7065 6c69 6e65 5f6d 616e 6167  e.pipeline_manag
+00001c80: 6572 2e70 6970 656c 696e 655f 6d61 6e61  er.pipeline_mana
+00001c90: 6765 725f 7461 6220 696d 706f 7274 2028  ger_tab import (
+00001ca0: 2020 2320 6e6f 7161 3a20 4534 3032 2c20    # noqa: E402, 
+00001cb0: 4535 3031 0a20 2020 2052 756e 5072 6f67  E501.    RunProg
+00001cc0: 7265 7373 2c0a 290a 6672 6f6d 2070 6f70  ress,.).from pop
+00001cd0: 756c 7365 5f6d 6961 2e75 7365 725f 696e  ulse_mia.user_in
+00001ce0: 7465 7266 6163 652e 7069 7065 6c69 6e65  terface.pipeline
+00001cf0: 5f6d 616e 6167 6572 2e70 726f 6365 7373  _manager.process
+00001d00: 5f6c 6962 7261 7279 2069 6d70 6f72 7420  _library import 
+00001d10: 2820 2023 206e 6f71 613a 2045 3430 322c  (  # noqa: E402,
+00001d20: 2045 3530 310a 2020 2020 5061 636b 6167   E501.    Packag
+00001d30: 654c 6962 7261 7279 4469 616c 6f67 2c0a  eLibraryDialog,.
+00001d40: 290a 6672 6f6d 2070 6f70 756c 7365 5f6d  ).from populse_m
+00001d50: 6961 2e75 7365 725f 696e 7465 7266 6163  ia.user_interfac
+00001d60: 652e 706f 705f 7570 7320 696d 706f 7274  e.pop_ups import
+00001d70: 2028 2020 2320 6e6f 7161 3a20 4534 3032   (  # noqa: E402
+00001d80: 0a20 2020 2044 6566 6175 6c74 5661 6c75  .    DefaultValu
+00001d90: 654c 6973 7443 7265 6174 696f 6e2c 0a20  eListCreation,. 
+00001da0: 2020 2050 6f70 5570 4164 6450 6174 682c     PopUpAddPath,
+00001db0: 0a20 2020 2050 6f70 5570 4164 6454 6167  .    PopUpAddTag
+00001dc0: 2c0a 2020 2020 506f 7055 7043 6c6f 7365  ,.    PopUpClose
+00001dd0: 5069 7065 6c69 6e65 2c0a 2020 2020 506f  Pipeline,.    Po
+00001de0: 7055 7044 656c 6574 6564 5072 6f6a 6563  pUpDeletedProjec
+00001df0: 742c 0a20 2020 2050 6f70 5570 4465 6c65  t,.    PopUpDele
+00001e00: 7465 5072 6f6a 6563 742c 0a20 2020 2050  teProject,.    P
+00001e10: 6f70 5570 496e 6865 7269 7461 6e63 6544  opUpInheritanceD
+00001e20: 6963 742c 0a20 2020 2050 6f70 5570 4e65  ict,.    PopUpNe
+00001e30: 7750 726f 6a65 6374 2c0a 2020 2020 506f  wProject,.    Po
+00001e40: 7055 704f 7065 6e50 726f 6a65 6374 2c0a  pUpOpenProject,.
+00001e50: 2020 2020 506f 7055 7051 7569 742c 0a20      PopUpQuit,. 
+00001e60: 2020 2050 6f70 5570 5265 6d6f 7665 5363     PopUpRemoveSc
+00001e70: 616e 2c0a 2020 2020 506f 7055 7053 6565  an,.    PopUpSee
+00001e80: 416c 6c50 726f 6a65 6374 732c 0a20 2020  AllProjects,.   
+00001e90: 2050 6f70 5570 5365 6c65 6374 5461 672c   PopUpSelectTag,
+00001ea0: 0a20 2020 2050 6f70 5570 5365 6c65 6374  .    PopUpSelect
+00001eb0: 5461 6743 6f75 6e74 5461 626c 652c 0a29  TagCountTable,.)
+00001ec0: 0a66 726f 6d20 706f 7075 6c73 655f 6d69  .from populse_mi
+00001ed0: 612e 7574 696c 732e 7574 696c 7320 696d  a.utils.utils im
+00001ee0: 706f 7274 2028 2020 2320 6e6f 7161 3a20  port (  # noqa: 
+00001ef0: 4534 3032 0a20 2020 2063 6865 636b 5f76  E402.    check_v
+00001f00: 616c 7565 5f74 7970 652c 0a20 2020 2074  alue_type,.    t
+00001f10: 6162 6c65 5f74 6f5f 6461 7461 6261 7365  able_to_database
+00001f20: 2c0a 290a 0a23 2057 6f72 6b69 6e67 2066  ,.)..# Working f
+00001f30: 726f 6d20 7468 6520 7363 7269 7074 7320  rom the scripts 
+00001f40: 6469 7265 6374 6f72 790a 6f73 2e63 6864  directory.os.chd
+00001f50: 6972 286f 732e 7061 7468 2e64 6972 6e61  ir(os.path.dirna
+00001f60: 6d65 286f 732e 7061 7468 2e72 6561 6c70  me(os.path.realp
+00001f70: 6174 6828 5f5f 6669 6c65 5f5f 2929 290a  ath(__file__))).
+00001f80: 0a23 2044 6973 6162 6c65 7320 616e 7920  .# Disables any 
+00001f90: 6574 656c 656d 6574 7279 2063 6865 636b  etelemetry check
+00001fa0: 2e0a 6966 2022 4e4f 5f45 5422 206e 6f74  ..if "NO_ET" not
+00001fb0: 2069 6e20 6f73 2e65 6e76 6972 6f6e 3a0a   in os.environ:.
+00001fc0: 2020 2020 6f73 2e65 6e76 6972 6f6e 5b22      os.environ["
+00001fd0: 4e4f 5f45 5422 5d20 3d20 2231 220a 0a69  NO_ET"] = "1"..i
+00001fe0: 6620 224e 4950 5950 455f 4e4f 5f45 5422  f "NIPYPE_NO_ET"
+00001ff0: 206e 6f74 2069 6e20 6f73 2e65 6e76 6972   not in os.envir
+00002000: 6f6e 3a0a 2020 2020 6f73 2e65 6e76 6972  on:.    os.envir
+00002010: 6f6e 5b22 4e49 5059 5045 5f4e 4f5f 4554  on["NIPYPE_NO_ET
+00002020: 225d 203d 2022 3122 0a0a 0a63 6c61 7373  "] = "1"...class
+00002030: 2054 6573 744d 4941 4361 7365 2875 6e69   TestMIACase(uni
+00002040: 7474 6573 742e 5465 7374 4361 7365 293a  ttest.TestCase):
+00002050: 0a20 2020 2022 2222 5061 7265 6e74 2063  .    """Parent c
+00002060: 6c61 7373 2066 6f72 2074 6865 2074 6573  lass for the tes
+00002070: 7420 636c 6173 7365 7320 6f66 206d 6961  t classes of mia
+00002080: 2e0a 0a20 2020 203a 436f 6e74 6169 6e73  ...    :Contains
+00002090: 3a0a 2020 2020 2020 2020 3a4d 6574 686f  :.        :Metho
+000020a0: 643a 0a20 2020 2020 2020 2020 2020 202d  d:.            -
+000020b0: 2061 6464 5f76 6973 7561 6c69 7a65 645f   add_visualized_
+000020c0: 7461 673a 2073 656c 6563 7473 2061 2074  tag: selects a t
+000020d0: 6167 2074 6f20 6469 7370 6c61 7920 7769  ag to display wi
+000020e0: 7468 2074 6865 0a20 2020 2020 2020 2020  th the.         
+000020f0: 2020 2020 2022 5669 7375 616c 697a 6564       "Visualized
+00002100: 2074 6167 7322 2070 6f70 2d75 700a 2020   tags" pop-up.  
+00002110: 2020 2020 2020 2020 2020 2d20 636c 6561            - clea
+00002120: 6e5f 7574 735f 7061 636b 6167 6573 3a20  n_uts_packages: 
+00002130: 6465 6c65 7469 6e67 2074 6865 2070 6163  deleting the pac
+00002140: 6b61 6765 2061 6464 6564 2064 7572 696e  kage added durin
+00002150: 6720 7468 6520 5554 7320 6f72 0a20 2020  g the UTs or.   
+00002160: 2020 2020 2020 2020 2020 206f 6c64 206f             old o
+00002170: 6e65 2073 7469 6c6c 2065 7869 7374 696e  ne still existin
+00002180: 670a 2020 2020 2020 2020 2020 2020 2d20  g.            - 
+00002190: 6372 6561 7465 5f6d 6f63 6b5f 6a61 723a  create_mock_jar:
+000021a0: 2063 7265 6174 6573 2061 206d 6f63 6b65   creates a mocke
+000021b0: 6420 6a61 7661 2028 2e6a 6172 2920 6578  d java (.jar) ex
+000021c0: 6563 7574 6162 6c65 0a20 2020 2020 2020  ecutable.       
+000021d0: 2020 2020 202d 2065 6469 745f 6461 7461       - edit_data
+000021e0: 6272 6f77 7365 725f 6c69 7374 3a20 6368  browser_list: ch
+000021f0: 616e 6765 2076 616c 7565 2066 6f72 2061  ange value for a
+00002200: 2074 6167 2069 6e20 4461 7461 4272 6f77   tag in DataBrow
+00002210: 7365 720a 2020 2020 2020 2020 2020 2020  ser.            
+00002220: 2d20 6578 6563 7574 655f 5144 6961 6c6f  - execute_QDialo
+00002230: 6741 6363 6570 743a 2061 6363 6570 7420  gAccept: accept 
+00002240: 2863 6c6f 7365 2920 6120 5144 6961 6c6f  (close) a QDialo
+00002250: 6720 696e 7374 616e 6365 0a20 2020 2020  g instance.     
+00002260: 2020 2020 2020 202d 2065 7865 6375 7465         - execute
+00002270: 5f51 4469 616c 6f67 436c 6f73 653a 2063  _QDialogClose: c
+00002280: 6c6f 7365 7320 6120 5144 6961 6c6f 6720  loses a QDialog 
+00002290: 696e 7374 616e 6365 0a20 2020 2020 2020  instance.       
+000022a0: 2020 2020 202d 2065 7865 6375 7465 5f51       - execute_Q
+000022b0: 4d65 7373 6167 6542 6f78 5f63 6c69 636b  MessageBox_click
+000022c0: 436c 6f73 653a 2070 7265 7373 2074 6865  Close: press the
+000022d0: 2043 6c6f 7365 2062 7574 746f 6e20 6f66   Close button of
+000022e0: 0a20 2020 2020 2020 2020 2020 2020 2061  .              a
+000022f0: 2051 4d65 7373 6167 6542 6f78 2069 6e73   QMessageBox ins
+00002300: 7461 6e63 650a 2020 2020 2020 2020 2020  tance.          
+00002310: 2020 2d20 6578 6563 7574 655f 514d 6573    - execute_QMes
+00002320: 7361 6765 426f 785f 636c 6963 6b4f 6b3a  sageBox_clickOk:
+00002330: 2070 7265 7373 2074 6865 204f 6b20 6275   press the Ok bu
+00002340: 7474 6f6e 206f 6620 610a 2020 2020 2020  tton of a.      
+00002350: 2020 2020 2020 2020 514d 6573 7361 6765          QMessage
+00002360: 426f 7820 696e 7374 616e 6365 0a20 2020  Box instance.   
+00002370: 2020 2020 2020 2020 202d 2065 7865 6375           - execu
+00002380: 7465 5f51 4d65 7373 6167 6542 6f78 5f63  te_QMessageBox_c
+00002390: 6c69 636b 5965 733a 2070 7265 7373 2074  lickYes: press t
+000023a0: 6865 2059 6573 2062 7574 746f 6e20 6f66  he Yes button of
+000023b0: 2061 0a20 2020 2020 2020 2020 2020 2020   a.             
+000023c0: 2051 4d65 7373 6167 6542 6f78 2069 6e73   QMessageBox ins
+000023d0: 7461 6e63 650a 2020 2020 2020 2020 2020  tance.          
+000023e0: 2020 2d20 6669 6e64 5f69 7465 6d5f 6279    - find_item_by
+000023f0: 5f64 6174 613a 206c 6f6f 6b73 2066 6f72  _data: looks for
+00002400: 2061 2051 4d6f 6465 6c49 6e64 6578 2077   a QModelIndex w
+00002410: 686f 7365 2063 6f6e 7465 6e74 730a 2020  hose contents.  
+00002420: 2020 2020 2020 2020 2020 2020 636f 7272              corr
+00002430: 6573 706f 6e64 2074 6f20 7468 6520 6172  espond to the ar
+00002440: 6775 6d65 6e74 2064 6174 610a 2020 2020  gument data.    
+00002450: 2020 2020 2020 2020 2d20 6765 745f 6e65          - get_ne
+00002460: 775f 7465 7374 5f70 726f 6a65 6374 3a20  w_test_project: 
+00002470: 6372 6561 7465 2061 2074 656d 706f 7261  create a tempora
+00002480: 7279 2070 726f 6a65 6374 2074 6861 7420  ry project that 
+00002490: 6361 6e0a 2020 2020 2020 2020 2020 2020  can.            
+000024a0: 2020 6265 2073 6166 656c 7920 6d6f 6469    be safely modi
+000024b0: 6669 6564 0a20 2020 2020 2020 2020 2020  fied.           
+000024c0: 202d 2070 726f 636c 6962 7669 6577 5f6e   - proclibview_n
+000024d0: 6970 7970 655f 7374 6174 653a 2067 6976  ipype_state: giv
+000024e0: 6520 7468 6520 7374 6174 6520 6f66 206e  e the state of n
+000024f0: 6970 7970 6520 696e 2074 6865 2070 726f  ipype in the pro
+00002500: 6365 7373 0a20 2020 2020 2020 2020 2020  cess.           
+00002510: 202d 2070 726f 636c 6962 7669 6577 5f6e   - proclibview_n
+00002520: 6970 7970 655f 7265 7365 745f 7374 6174  ipype_reset_stat
+00002530: 653a 2072 6573 6574 206e 6970 7970 6520  e: reset nipype 
+00002540: 746f 2069 7473 2069 6e69 7469 616c 2073  to its initial s
+00002550: 7461 7465 0a20 2020 2020 2020 2020 2020  tate.           
+00002560: 2020 2028 6265 666f 7265 2074 6865 2073     (before the s
+00002570: 7461 7274 206f 6620 7468 6520 6375 7272  tart of the curr
+00002580: 656e 7420 7465 7374 2920 696e 2074 6865  ent test) in the
+00002590: 2070 726f 6365 7373 206c 6962 7261 7279   process library
+000025a0: 0a20 2020 2020 2020 2020 2020 2020 2076  .              v
+000025b0: 6965 770a 2020 2020 2020 2020 2020 2020  iew.            
+000025c0: 2d20 7265 7374 6172 745f 4d49 413a 2072  - restart_MIA: r
+000025d0: 6573 7461 7274 7320 4d49 4120 7769 7468  estarts MIA with
+000025e0: 696e 2061 2075 6e69 7420 7465 7374 0a20  in a unit test. 
+000025f0: 2020 2020 2020 2020 2020 202d 2073 6574             - set
+00002600: 5570 3a20 6361 6c6c 6564 2061 7574 6f6d  Up: called autom
+00002610: 6174 6963 616c 6c79 2062 6566 6f72 6520  atically before 
+00002620: 6561 6368 2074 6573 7420 6d65 7468 6f64  each test method
+00002630: 0a20 2020 2020 2020 2020 2020 202d 2073  .            - s
+00002640: 6574 5570 436c 6173 733a 2063 616c 6c65  etUpClass: calle
+00002650: 6420 6265 666f 7265 2074 6573 7473 2069  d before tests i
+00002660: 6e20 7468 6520 696e 6469 7669 6475 616c  n the individual
+00002670: 2063 6c61 7373 0a20 2020 2020 2020 2020   class.         
+00002680: 2020 202d 2074 6561 7244 6f77 6e3a 2063     - tearDown: c
+00002690: 6c65 616e 7320 7570 2061 6674 6572 2065  leans up after e
+000026a0: 6163 6820 7465 7374 206d 6574 686f 640a  ach test method.
+000026b0: 2020 2020 2020 2020 2020 2020 2d20 7465              - te
+000026c0: 6172 446f 776e 436c 6173 733a 2063 616c  arDownClass: cal
+000026d0: 6c65 6420 6166 7465 7220 7465 7374 7320  led after tests 
+000026e0: 696e 2074 6865 2069 6e64 6976 6964 7561  in the individua
+000026f0: 6c20 636c 6173 730a 2020 2020 2222 220a  l class.    """.
+00002700: 0a20 2020 2064 6566 2061 6464 5f76 6973  .    def add_vis
+00002710: 7561 6c69 7a65 645f 7461 6728 7365 6c66  ualized_tag(self
+00002720: 2c20 7461 6729 3a0a 2020 2020 2020 2020  , tag):.        
+00002730: 2222 2257 6974 6820 7468 6520 2256 6973  """With the "Vis
+00002740: 7561 6c69 7a65 6420 7461 6773 2220 706f  ualized tags" po
+00002750: 702d 7570 206f 7065 6e2c 2073 656c 6563  p-up open, selec
+00002760: 7473 2061 2074 6167 2074 6f20 6469 7370  ts a tag to disp
+00002770: 6c61 792e 0a0a 2020 2020 2020 2020 2d20  lay...        - 
+00002780: 5368 6f75 6c64 2062 6520 6361 6c6c 6564  Should be called
+00002790: 2c20 7769 7468 2061 2064 656c 6179 2c20  , with a delay, 
+000027a0: 6265 666f 7265 206f 7065 6e69 6e67 2074  before opening t
+000027b0: 6865 2022 5669 7375 616c 697a 6564 2074  he "Visualized t
+000027c0: 6167 7322 0a20 2020 2020 2020 2020 2070  ags".          p
+000027d0: 6f70 2d75 702c 2069 2e65 2e3a 0a20 2020  op-up, i.e.:.   
+000027e0: 2020 2020 2020 2020 2020 2051 5469 6d65             QTime
+000027f0: 722e 7369 6e67 6c65 5368 6f74 2831 3030  r.singleShot(100
+00002800: 302c 206c 616d 6264 613a 7365 6c66 2e61  0, lambda:self.a
+00002810: 6464 5f76 6973 7561 6c69 7a65 645f 7461  dd_visualized_ta
+00002820: 6728 0a20 2020 2020 2020 2020 2020 2020  g(.             
+00002830: 2027 4163 7175 6973 6974 696f 6e44 6174   'AcquisitionDat
+00002840: 6527 2929 0a20 2020 2020 2020 2020 2049  e')).          I
+00002850: 7427 7320 6375 7272 656e 746c 7920 6e6f  t's currently no
+00002860: 7420 7468 6520 6361 7365 0a20 2020 2020  t the case.     
+00002870: 2020 2020 2028 7365 6520 5465 7374 4d49       (see TestMI
+00002880: 414e 6f64 6543 6f6e 7472 6f6c 6c65 722e  ANodeController.
+00002890: 7465 7374 5f66 696c 7465 725f 7769 6467  test_filter_widg
+000028a0: 6574 2829 292e 0a0a 2020 2020 2020 2020  et())...        
+000028b0: 3a70 6172 616d 2074 6167 3a20 7468 6520  :param tag: the 
+000028c0: 7461 6720 746f 2062 6520 6469 7370 6c61  tag to be displa
+000028d0: 7965 6420 2873 7472 290a 2020 2020 2020  yed (str).      
+000028e0: 2020 2222 220a 0a20 2020 2020 2020 2077    """..        w
+000028f0: 203d 2051 4170 706c 6963 6174 696f 6e2e   = QApplication.
+00002900: 6163 7469 7665 5769 6e64 6f77 2829 0a0a  activeWindow()..
+00002910: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00002920: 7461 6e63 6528 772c 2051 4469 616c 6f67  tance(w, QDialog
+00002930: 293a 0a20 2020 2020 2020 2020 2020 2076  ):.            v
+00002940: 6973 7561 6c69 7a65 645f 7461 6773 203d  isualized_tags =
+00002950: 2077 2e6c 6179 6f75 7428 292e 6974 656d   w.layout().item
+00002960: 4174 2830 292e 7769 6467 6574 2829 0a20  At(0).widget(). 
+00002970: 2020 2020 2020 2020 2020 2074 6167 735f             tags_
+00002980: 6c69 7374 203d 2076 6973 7561 6c69 7a65  list = visualize
+00002990: 645f 7461 6773 2e6c 6973 745f 7769 6467  d_tags.list_widg
+000029a0: 6574 5f74 6167 730a 0a20 2020 2020 2020  et_tags..       
+000029b0: 2020 2020 2069 6620 7665 7273 696f 6e2e       if version.
+000029c0: 7061 7273 6528 5154 5f56 4552 5349 4f4e  parse(QT_VERSION
+000029d0: 5f53 5452 2920 3d3d 2076 6572 7369 6f6e  _STR) == version
+000029e0: 2e70 6172 7365 2822 352e 392e 3222 293a  .parse("5.9.2"):
+000029f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00002a00: 2066 6f75 6e64 5f69 7465 6d20 3d20 7461   found_item = ta
+00002a10: 6773 5f6c 6973 742e 6669 6e64 4974 656d  gs_list.findItem
+00002a20: 7328 7461 672c 2051 742e 4d61 7463 6845  s(tag, Qt.MatchE
+00002a30: 7861 6374 6c79 290a 0a20 2020 2020 2020  xactly)..       
+00002a40: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00002a50: 2020 2020 2020 2020 2020 2066 6f75 6e64             found
+00002a60: 5f69 7465 6d20 3d20 7461 6773 5f6c 6973  _item = tags_lis
+00002a70: 742e 6669 6e64 4974 656d 7328 0a20 2020  t.findItems(.   
+00002a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002a90: 2074 6167 2c20 5174 2e4d 6174 6368 466c   tag, Qt.MatchFl
+00002aa0: 6167 2e4d 6174 6368 4578 6163 746c 790a  ag.MatchExactly.
+00002ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00002ac0: 290a 0a20 2020 2020 2020 2020 2020 2074  )..            t
+00002ad0: 6167 735f 6c69 7374 2e73 6574 4375 7272  ags_list.setCurr
+00002ae0: 656e 7449 7465 6d28 666f 756e 645f 6974  entItem(found_it
+00002af0: 656d 5b30 5d29 0a20 2020 2020 2020 2020  em[0]).         
+00002b00: 2020 2076 6973 7561 6c69 7a65 645f 7461     visualized_ta
+00002b10: 6773 2e63 6c69 636b 5f73 656c 6563 745f  gs.click_select_
+00002b20: 7461 6728 290a 0a20 2020 2064 6566 2063  tag()..    def c
+00002b30: 6c65 616e 5f75 7473 5f70 6163 6b61 6765  lean_uts_package
+00002b40: 7328 7365 6c66 2c20 7072 6f63 5f6c 6962  s(self, proc_lib
+00002b50: 5f76 6965 7729 3a0a 2020 2020 2020 2020  _view):.        
+00002b60: 2222 2244 656c 6574 696e 6720 7468 6520  """Deleting the 
+00002b70: 7061 636b 6167 6573 2061 6464 6564 2064  packages added d
+00002b80: 7572 696e 6720 7468 6520 5554 732e 2222  uring the UTs.""
+00002b90: 220a 0a20 2020 2020 2020 2070 636b 3272  "..        pck2r
+00002ba0: 656d 6f76 6520 3d20 5b0a 2020 2020 2020  emove = [.      
+00002bb0: 2020 2020 2020 6b0a 2020 2020 2020 2020        k.        
+00002bc0: 2020 2020 666f 7220 286b 2c20 7629 2069      for (k, v) i
+00002bd0: 6e20 7072 6f63 5f6c 6962 5f76 6965 772e  n proc_lib_view.
+00002be0: 746f 5f64 6963 7428 292e 6974 656d 7328  to_dict().items(
+00002bf0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+00002c00: 2022 5554 735f 7072 6f63 6573 7365 7322   "UTs_processes"
+00002c10: 2069 6e20 6b0a 2020 2020 2020 2020 5d0a   in k.        ].
+00002c20: 2020 2020 2020 2020 7573 6572 5f70 726f          user_pro
+00002c30: 6320 3d20 7072 6f63 5f6c 6962 5f76 6965  c = proc_lib_vie
+00002c40: 772e 746f 5f64 6963 7428 292e 6765 7428  w.to_dict().get(
+00002c50: 2255 7365 725f 7072 6f63 6573 7365 7322  "User_processes"
+00002c60: 2c20 4e6f 6e65 290a 0a20 2020 2020 2020  , None)..       
+00002c70: 2069 6620 7573 6572 5f70 726f 6320 6973   if user_proc is
+00002c80: 206e 6f74 204e 6f6e 6520 616e 6420 2255   not None and "U
+00002c90: 6e69 745f 7465 7374 5f70 6970 656c 696e  nit_test_pipelin
+00002ca0: 6522 2069 6e20 7573 6572 5f70 726f 633a  e" in user_proc:
+00002cb0: 0a20 2020 2020 2020 2020 2020 2070 636b  .            pck
+00002cc0: 3272 656d 6f76 652e 6170 7065 6e64 2822  2remove.append("
+00002cd0: 556e 6974 5f74 6573 745f 7069 7065 6c69  Unit_test_pipeli
+00002ce0: 6e65 2229 0a0a 2020 2020 2020 2020 2320  ne")..        # 
+00002cf0: 4d6f 636b 7320 7468 6520 4d65 7373 6167  Mocks the Messag
+00002d00: 6542 6f78 2829 2e71 7565 7374 696f 6e28  eBox().question(
+00002d10: 2920 666f 7220 706f 7075 6c73 655f 6d69  ) for populse_mi
+00002d20: 612e 7573 6572 5f69 6e74 6572 6661 6365  a.user_interface
+00002d30: 2e0a 2020 2020 2020 2020 2320 7069 7065  ..        # pipe
+00002d40: 6c69 6e65 5f6d 616e 6167 6572 2e70 726f  line_manager.pro
+00002d50: 6365 7373 5f6c 6962 7261 7279 2e50 6163  cess_library.Pac
+00002d60: 6b61 6765 4c69 6272 6172 7944 6961 6c6f  kageLibraryDialo
+00002d70: 672e 6465 6c65 7465 5f70 6163 6b61 6765  g.delete_package
+00002d80: 2829 0a20 2020 2020 2020 2051 4d65 7373  ().        QMess
+00002d90: 6167 6542 6f78 2e71 7565 7374 696f 6e20  ageBox.question 
+00002da0: 3d20 4d6f 636b 2872 6574 7572 6e5f 7661  = Mock(return_va
+00002db0: 6c75 653d 514d 6573 7361 6765 426f 782e  lue=QMessageBox.
+00002dc0: 5965 7329 0a0a 2020 2020 2020 2020 2320  Yes)..        # 
+00002dd0: 4d6f 636b 7320 7468 6520 6576 656e 742e  Mocks the event.
+00002de0: 6b65 790a 2020 2020 2020 2020 6576 656e  key.        even
+00002df0: 7420 3d20 4d6f 636b 2829 0a20 2020 2020  t = Mock().     
+00002e00: 2020 2065 7665 6e74 2e6b 6579 203d 206c     event.key = l
+00002e10: 616d 6264 613a 2051 742e 4b65 795f 4465  ambda: Qt.Key_De
+00002e20: 6c65 7465 0a0a 2020 2020 2020 2020 2320  lete..        # 
+00002e30: 5265 6d6f 7665 0a20 2020 2020 2020 2066  Remove.        f
+00002e40: 6f72 206b 2069 6e20 7063 6b32 7265 6d6f  or k in pck2remo
+00002e50: 7665 3a0a 2020 2020 2020 2020 2020 2020  ve:.            
+00002e60: 706b 675f 696e 6465 7820 3d20 7365 6c66  pkg_index = self
+00002e70: 2e66 696e 645f 6974 656d 5f62 795f 6461  .find_item_by_da
+00002e80: 7461 2870 726f 635f 6c69 625f 7669 6577  ta(proc_lib_view
+00002e90: 2c20 6b29 0a20 2020 2020 2020 2020 2020  , k).           
+00002ea0: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
+00002eb0: 2020 2070 726f 635f 6c69 625f 7669 6577     proc_lib_view
+00002ec0: 2e73 656c 6563 7469 6f6e 4d6f 6465 6c28  .selectionModel(
+00002ed0: 292e 7365 6c65 6374 280a 2020 2020 2020  ).select(.      
+00002ee0: 2020 2020 2020 2020 2020 2020 2020 706b                pk
+00002ef0: 675f 696e 6465 782c 2051 4974 656d 5365  g_index, QItemSe
+00002f00: 6c65 6374 696f 6e4d 6f64 656c 2e53 656c  lectionModel.Sel
+00002f10: 6563 7443 7572 7265 6e74 0a20 2020 2020  ectCurrent.     
+00002f20: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00002f30: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+00002f40: 2020 2020 2020 2070 726f 635f 6c69 625f         proc_lib_
+00002f50: 7669 6577 2e6b 6579 5072 6573 7345 7665  view.keyPressEve
+00002f60: 6e74 2865 7665 6e74 290a 0a20 2020 2064  nt(event)..    d
+00002f70: 6566 2063 7265 6174 655f 6d6f 636b 5f6a  ef create_mock_j
+00002f80: 6172 2873 656c 662c 2070 6174 6829 3a0a  ar(self, path):.
+00002f90: 2020 2020 2020 2020 2222 2243 7265 6174          """Creat
+00002fa0: 6573 2061 206d 6f63 6b65 6420 6a61 7661  es a mocked java
+00002fb0: 2028 2e6a 6172 2920 6578 6563 7574 6162   (.jar) executab
+00002fc0: 6c65 2e0a 0a20 2020 2020 2020 203a 7061  le...        :pa
+00002fd0: 7261 6d20 7061 7468 3a20 7468 6520 6675  ram path: the fu
+00002fe0: 6c6c 2070 6174 6820 6f66 2074 6865 2065  ll path of the e
+00002ff0: 7865 6375 7461 626c 652c 2065 6e64 696e  xecutable, endin
+00003000: 6720 6279 2027 2e6a 6172 270a 0a20 2020  g by '.jar'..   
+00003010: 2020 2020 203a 7265 7475 726e 733a 2030       :returns: 0
+00003020: 2069 6620 7375 6363 6573 7320 6f72 2031   if success or 1
+00003030: 2069 6620 6661 696c 7572 650a 2020 2020   if failure.    
+00003040: 2020 2020 2222 220a 0a20 2020 2020 2020      """..       
+00003050: 2028 666f 6c64 6572 2c20 6e61 6d65 2920   (folder, name) 
+00003060: 3d20 6f73 2e70 6174 682e 7370 6c69 7428  = os.path.split(
+00003070: 7061 7468 290a 0a20 2020 2020 2020 2043  path)..        C
+00003080: 4f4e 5445 4e54 203d 2028 0a20 2020 2020  ONTENT = (.     
+00003090: 2020 2020 2020 2022 7075 626c 6963 2063         "public c
+000030a0: 6c61 7373 204d 6f63 6b41 7070 207b 5c6e  lass MockApp {\n
+000030b0: 220a 2020 2020 2020 2020 2020 2020 2b20  ".            + 
+000030c0: 2220 2020 2070 7562 6c69 6320 7374 6174  "    public stat
+000030d0: 6963 2076 6f69 6420 6d61 696e 2853 7472  ic void main(Str
+000030e0: 696e 675b 5d20 6172 6773 297b 5c6e 220a  ing[] args){\n".
+000030f0: 2020 2020 2020 2020 2020 2020 2b20 2720              + ' 
+00003100: 2020 2020 2020 2053 7973 7465 6d2e 6f75         System.ou
+00003110: 742e 7072 696e 746c 6e28 2245 7865 6375  t.println("Execu
+00003120: 7465 6420 6d6f 636b 206a 6176 6120 6170  ted mock java ap
+00003130: 702e 2229 3b5c 6e27 0a20 2020 2020 2020  p.");\n'.       
+00003140: 2020 2020 202b 2022 2020 2020 7d5c 6e22       + "    }\n"
+00003150: 0a20 2020 2020 2020 2020 2020 202b 2022  .            + "
+00003160: 7d22 0a20 2020 2020 2020 2029 0a0a 2020  }".        )..  
+00003170: 2020 2020 2020 2320 4372 6561 7465 7320        # Creates 
+00003180: 7468 6520 2e6a 6176 6120 736f 7572 6365  the .java source
+00003190: 2063 6f64 650a 2020 2020 2020 2020 7769   code.        wi
+000031a0: 7468 206f 7065 6e28 6f73 2e70 6174 682e  th open(os.path.
+000031b0: 6a6f 696e 2866 6f6c 6465 722c 2022 4d6f  join(folder, "Mo
+000031c0: 636b 4170 702e 6a61 7661 2229 2c20 2277  ckApp.java"), "w
+000031d0: 2229 2061 7320 6669 6c65 3a0a 2020 2020  ") as file:.    
+000031e0: 2020 2020 2020 2020 6669 6c65 2e77 7269          file.wri
+000031f0: 7465 2843 4f4e 5445 4e54 290a 0a20 2020  te(CONTENT)..   
+00003200: 2020 2020 2023 2043 7265 6174 6573 2074       # Creates t
+00003210: 6865 204d 414e 4946 4553 5420 6669 6c65  he MANIFEST file
+00003220: 0a20 2020 2020 2020 2077 6974 6820 6f70  .        with op
+00003230: 656e 286f 732e 7061 7468 2e6a 6f69 6e28  en(os.path.join(
+00003240: 666f 6c64 6572 2c20 224d 414e 4946 4553  folder, "MANIFES
+00003250: 542e 4d46 2229 2c20 2277 2229 2061 7320  T.MF"), "w") as 
+00003260: 6669 6c65 3a0a 2020 2020 2020 2020 2020  file:.          
+00003270: 2020 6669 6c65 2e77 7269 7465 2822 4d61    file.write("Ma
+00003280: 696e 2d43 6c61 7373 3a20 204d 6f63 6b41  in-Class:  MockA
+00003290: 7070 5c6e 2229 0a20 2020 2020 2020 2023  pp\n").        #
+000032a0: 2054 6865 2062 7569 6c64 206f 6e6c 7920   The build only 
+000032b0: 776f 726b 7320 7769 7468 2074 6865 2027  works with the '
+000032c0: 5c6e 2720 6174 2074 6865 2065 6e64 206f  \n' at the end o
+000032d0: 6620 7468 6520 6d61 6e69 6665 7374 0a0a  f the manifest..
+000032e0: 2020 2020 2020 2020 2320 4368 6563 6b20          # Check 
+000032f0: 6966 2074 6865 204f 7065 6e4a 444b 2052  if the OpenJDK R
+00003300: 756e 7469 6d65 2028 6a61 7661 2920 6973  untime (java) is
+00003310: 2069 6e73 7461 6c6c 6564 0a20 2020 2020   installed.     
+00003320: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+00003330: 2020 2020 7375 6270 726f 6365 7373 2e72      subprocess.r
+00003340: 756e 285b 226a 6176 6122 2c20 222d 7665  un(["java", "-ve
+00003350: 7273 696f 6e22 5d29 0a0a 2020 2020 2020  rsion"])..      
+00003360: 2020 6578 6365 7074 2046 696c 654e 6f74    except FileNot
+00003370: 466f 756e 6445 7272 6f72 3a0a 2020 2020  FoundError:.    
+00003380: 2020 2020 2020 2020 7072 696e 7428 224f          print("O
+00003390: 7065 6e4a 444b 2052 756e 7469 6d65 2069  penJDK Runtime i
+000033a0: 7320 6e6f 7420 696e 7374 616c 6c65 6422  s not installed"
+000033b0: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
+000033c0: 7475 726e 2031 0a0a 2020 2020 2020 2020  turn 1..        
+000033d0: 2320 436f 6d70 696c 6520 616e 6420 7061  # Compile and pa
+000033e0: 636b 0a20 2020 2020 2020 2073 7562 7072  ck.        subpr
+000033f0: 6f63 6573 732e 7275 6e28 5b22 6a61 7661  ocess.run(["java
+00003400: 6322 2c20 222d 6422 2c20 222e 222c 2022  c", "-d", ".", "
+00003410: 4d6f 636b 4170 702e 6a61 7661 225d 2c20  MockApp.java"], 
+00003420: 6377 643d 666f 6c64 6572 290a 2020 2020  cwd=folder).    
+00003430: 2020 2020 7375 6270 726f 6365 7373 2e72      subprocess.r
+00003440: 756e 280a 2020 2020 2020 2020 2020 2020  un(.            
+00003450: 5b22 6a61 7222 2c20 2263 766d 6622 2c20  ["jar", "cvmf", 
+00003460: 224d 414e 4946 4553 542e 4d46 222c 206e  "MANIFEST.MF", n
+00003470: 616d 652c 2022 4d6f 636b 4170 702e 636c  ame, "MockApp.cl
+00003480: 6173 7322 5d2c 2063 7764 3d66 6f6c 6465  ass"], cwd=folde
+00003490: 720a 2020 2020 2020 2020 290a 0a20 2020  r.        )..   
+000034a0: 2020 2020 2069 6620 6e6f 7420 6f73 2e70       if not os.p
+000034b0: 6174 682e 6578 6973 7473 2870 6174 6829  ath.exists(path)
+000034c0: 3a0a 2020 2020 2020 2020 2020 2020 7072  :.            pr
+000034d0: 696e 7428 2254 6865 206a 6176 6120 6578  int("The java ex
+000034e0: 6563 7574 6162 6c65 2077 6173 206e 6f74  ecutable was not
+000034f0: 2063 7265 6174 6564 2229 0a20 2020 2020   created").     
+00003500: 2020 2020 2020 2072 6574 7572 6e20 310a         return 1.
+00003510: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00003520: 300a 0a20 2020 2064 6566 2065 6469 745f  0..    def edit_
+00003530: 6461 7461 6272 6f77 7365 725f 6c69 7374  databrowser_list
+00003540: 2873 656c 662c 2076 616c 7565 293a 0a20  (self, value):. 
+00003550: 2020 2020 2020 2022 2222 4368 616e 6765         """Change
+00003560: 2076 616c 7565 2066 6f72 2061 2074 6167   value for a tag
+00003570: 2069 6e20 4461 7461 4272 6f77 7365 722e   in DataBrowser.
+00003580: 0a0a 2020 2020 2020 2020 3a70 6172 616d  ..        :param
+00003590: 2076 616c 7565 3a20 7468 6520 6e65 7720   value: the new 
+000035a0: 7661 6c75 650a 2020 2020 2020 2020 2222  value.        ""
+000035b0: 220a 0a20 2020 2020 2020 2077 203d 2051  "..        w = Q
+000035c0: 4170 706c 6963 6174 696f 6e2e 6163 7469  Application.acti
+000035d0: 7665 5769 6e64 6f77 2829 0a0a 2020 2020  veWindow()..    
+000035e0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+000035f0: 6528 772c 2051 4469 616c 6f67 293a 0a20  e(w, QDialog):. 
+00003600: 2020 2020 2020 2020 2020 2069 7465 6d20             item 
+00003610: 3d20 772e 7461 626c 652e 6974 656d 2830  = w.table.item(0
+00003620: 2c20 3029 0a20 2020 2020 2020 2020 2020  , 0).           
+00003630: 2069 7465 6d2e 7365 7454 6578 7428 7661   item.setText(va
+00003640: 6c75 6529 0a20 2020 2020 2020 2020 2020  lue).           
+00003650: 2077 2e75 7064 6174 655f 7461 626c 655f   w.update_table_
+00003660: 7661 6c75 6573 2854 7275 6529 0a0a 2020  values(True)..  
+00003670: 2020 6465 6620 6578 6563 7574 655f 5144    def execute_QD
+00003680: 6961 6c6f 6741 6363 6570 7428 7365 6c66  ialogAccept(self
+00003690: 293a 0a20 2020 2020 2020 2022 2222 4163  ):.        """Ac
+000036a0: 6365 7074 2028 636c 6f73 6529 2061 2051  cept (close) a Q
+000036b0: 4469 616c 6f67 2077 696e 646f 772e 0a0a  Dialog window...
+000036c0: 2020 2020 2020 2020 4375 7272 656e 746c          Currentl
+000036d0: 792c 2074 6869 7320 6d65 7468 6f64 2069  y, this method i
+000036e0: 7320 6e6f 7420 7573 6564 2e0a 2020 2020  s not used..    
+000036f0: 2020 2020 2222 220a 0a20 2020 2020 2020      """..       
+00003700: 2077 203d 2051 4170 706c 6963 6174 696f   w = QApplicatio
+00003710: 6e2e 6163 7469 7665 5769 6e64 6f77 2829  n.activeWindow()
+00003720: 0a0a 2020 2020 2020 2020 6966 2069 7369  ..        if isi
+00003730: 6e73 7461 6e63 6528 772c 2051 4469 616c  nstance(w, QDial
+00003740: 6f67 293a 0a20 2020 2020 2020 2020 2020  og):.           
+00003750: 2077 2e61 6363 6570 7428 290a 0a20 2020   w.accept()..   
+00003760: 2064 6566 2065 7865 6375 7465 5f51 4469   def execute_QDi
+00003770: 616c 6f67 436c 6f73 6528 7365 6c66 293a  alogClose(self):
+00003780: 0a20 2020 2020 2020 2022 2222 436c 6f73  .        """Clos
+00003790: 6520 6120 5144 6961 6c6f 6720 7769 6e64  e a QDialog wind
+000037a0: 6f77 2e0a 0a20 2020 2020 2020 2043 7572  ow...        Cur
+000037b0: 7265 6e74 6c79 2c20 7468 6973 206d 6574  rently, this met
+000037c0: 686f 6420 6973 206e 6f74 2075 7365 642e  hod is not used.
+000037d0: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
+000037e0: 2020 2020 2020 7720 3d20 5141 7070 6c69        w = QAppli
+000037f0: 6361 7469 6f6e 2e61 6374 6976 6557 696e  cation.activeWin
+00003800: 646f 7728 290a 0a20 2020 2020 2020 2069  dow()..        i
+00003810: 6620 6973 696e 7374 616e 6365 2877 2c20  f isinstance(w, 
+00003820: 5144 6961 6c6f 6729 3a0a 2020 2020 2020  QDialog):.      
+00003830: 2020 2020 2020 772e 636c 6f73 6528 290a        w.close().
+00003840: 0a20 2020 2064 6566 2065 7865 6375 7465  .    def execute
+00003850: 5f51 4d65 7373 6167 6542 6f78 5f63 6c69  _QMessageBox_cli
+00003860: 636b 436c 6f73 6528 7365 6c66 293a 0a20  ckClose(self):. 
+00003870: 2020 2020 2020 2022 2222 5072 6573 7320         """Press 
+00003880: 7468 6520 436c 6f73 6520 6275 7474 6f6e  the Close button
+00003890: 206f 6620 6120 514d 6573 7361 6765 426f   of a QMessageBo
+000038a0: 7820 696e 7374 616e 6365 2e0a 0a20 2020  x instance...   
+000038b0: 2020 2020 2043 7572 7265 6e74 6c79 2c20       Currently, 
+000038c0: 7468 6973 206d 6574 686f 6420 6973 206e  this method is n
+000038d0: 6f74 2075 7365 642e 0a20 2020 2020 2020  ot used..       
+000038e0: 2022 2222 0a0a 2020 2020 2020 2020 7720   """..        w 
+000038f0: 3d20 5141 7070 6c69 6361 7469 6f6e 2e61  = QApplication.a
+00003900: 6374 6976 6557 696e 646f 7728 290a 0a20  ctiveWindow().. 
+00003910: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00003920: 616e 6365 2877 2c20 514d 6573 7361 6765  ance(w, QMessage
+00003930: 426f 7829 3a0a 2020 2020 2020 2020 2020  Box):.          
+00003940: 2020 636c 6f73 655f 6275 7474 6f6e 203d    close_button =
+00003950: 2077 2e62 7574 746f 6e28 514d 6573 7361   w.button(QMessa
+00003960: 6765 426f 782e 436c 6f73 6529 0a20 2020  geBox.Close).   
+00003970: 2020 2020 2020 2020 2051 5465 7374 2e6d           QTest.m
+00003980: 6f75 7365 436c 6963 6b28 636c 6f73 655f  ouseClick(close_
+00003990: 6275 7474 6f6e 2c20 5174 2e4c 6566 7442  button, Qt.LeftB
+000039a0: 7574 746f 6e29 0a0a 2020 2020 6465 6620  utton)..    def 
+000039b0: 6578 6563 7574 655f 514d 6573 7361 6765  execute_QMessage
+000039c0: 426f 785f 636c 6963 6b4f 6b28 7365 6c66  Box_clickOk(self
+000039d0: 293a 0a20 2020 2020 2020 2022 2222 5072  ):.        """Pr
+000039e0: 6573 7320 7468 6520 4f6b 2062 7574 746f  ess the Ok butto
+000039f0: 6e20 6f66 2061 2051 4d65 7373 6167 6542  n of a QMessageB
+00003a00: 6f78 2069 6e73 7461 6e63 652e 2222 220a  ox instance.""".
+00003a10: 0a20 2020 2020 2020 2077 203d 2051 4170  .        w = QAp
+00003a20: 706c 6963 6174 696f 6e2e 6163 7469 7665  plication.active
+00003a30: 5769 6e64 6f77 2829 0a0a 2020 2020 2020  Window()..      
+00003a40: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00003a50: 772c 2051 4d65 7373 6167 6542 6f78 293a  w, QMessageBox):
+00003a60: 0a20 2020 2020 2020 2020 2020 2063 6c6f  .            clo
+00003a70: 7365 5f62 7574 746f 6e20 3d20 772e 6275  se_button = w.bu
+00003a80: 7474 6f6e 2851 4d65 7373 6167 6542 6f78  tton(QMessageBox
+00003a90: 2e4f 6b29 0a20 2020 2020 2020 2020 2020  .Ok).           
+00003aa0: 2051 5465 7374 2e6d 6f75 7365 436c 6963   QTest.mouseClic
+00003ab0: 6b28 636c 6f73 655f 6275 7474 6f6e 2c20  k(close_button, 
+00003ac0: 5174 2e4c 6566 7442 7574 746f 6e29 0a0a  Qt.LeftButton)..
+00003ad0: 2020 2020 6465 6620 6578 6563 7574 655f      def execute_
+00003ae0: 514d 6573 7361 6765 426f 785f 636c 6963  QMessageBox_clic
+00003af0: 6b59 6573 2873 656c 6629 3a0a 2020 2020  kYes(self):.    
+00003b00: 2020 2020 2222 2250 7265 7373 2074 6865      """Press the
+00003b10: 2059 6573 2062 7574 746f 6e20 6f66 2061   Yes button of a
+00003b20: 2051 4d65 7373 6167 6542 6f78 2069 6e73   QMessageBox ins
+00003b30: 7461 6e63 652e 0a0a 2020 2020 2020 2020  tance...        
+00003b40: 4375 7272 656e 746c 792c 2074 6869 7320  Currently, this 
+00003b50: 6d65 7468 6f64 2069 7320 6e6f 7420 7573  method is not us
+00003b60: 6564 2e0a 2020 2020 2020 2020 2222 220a  ed..        """.
+00003b70: 0a20 2020 2020 2020 2077 203d 2051 4170  .        w = QAp
+00003b80: 706c 6963 6174 696f 6e2e 6163 7469 7665  plication.active
+00003b90: 5769 6e64 6f77 2829 0a0a 2020 2020 2020  Window()..      
+00003ba0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00003bb0: 772c 2051 4d65 7373 6167 6542 6f78 293a  w, QMessageBox):
+00003bc0: 0a20 2020 2020 2020 2020 2020 2063 6c6f  .            clo
+00003bd0: 7365 5f62 7574 746f 6e20 3d20 772e 6275  se_button = w.bu
+00003be0: 7474 6f6e 2851 4d65 7373 6167 6542 6f78  tton(QMessageBox
+00003bf0: 2e59 6573 290a 2020 2020 2020 2020 2020  .Yes).          
+00003c00: 2020 5154 6573 742e 6d6f 7573 6543 6c69    QTest.mouseCli
+00003c10: 636b 2863 6c6f 7365 5f62 7574 746f 6e2c  ck(close_button,
+00003c20: 2051 742e 4c65 6674 4275 7474 6f6e 290a   Qt.LeftButton).
+00003c30: 0a20 2020 2064 6566 2066 696e 645f 6974  .    def find_it
+00003c40: 656d 5f62 795f 6461 7461 280a 2020 2020  em_by_data(.    
+00003c50: 2020 2020 7365 6c66 2c20 715f 7472 6565      self, q_tree
+00003c60: 5f76 6965 773a 2051 5472 6565 5669 6577  _view: QTreeView
+00003c70: 2c20 6461 7461 3a20 7374 720a 2020 2020  , data: str.    
+00003c80: 2920 2d3e 2051 4d6f 6465 6c49 6e64 6578  ) -> QModelIndex
+00003c90: 3a0a 2020 2020 2020 2020 2222 224c 6f6f  :.        """Loo
+00003ca0: 6b73 2066 6f72 2061 2051 4d6f 6465 6c49  ks for a QModelI
+00003cb0: 6e64 6578 2c20 696e 2061 2051 5472 6565  ndex, in a QTree
+00003cc0: 5669 6577 2069 6e73 7461 6e63 652e 2222  View instance.""
+00003cd0: 220a 0a20 2020 2020 2020 2061 7373 6572  "..        asser
+00003ce0: 7420 6973 696e 7374 616e 6365 2871 5f74  t isinstance(q_t
+00003cf0: 7265 655f 7669 6577 2c20 5154 7265 6556  ree_view, QTreeV
+00003d00: 6965 7729 2c20 280a 2020 2020 2020 2020  iew), (.        
+00003d10: 2020 2020 2266 6972 7374 2061 7267 756d      "first argum
+00003d20: 656e 7420 6973 206e 6f74 2061 2022 2022  ent is not a " "
+00003d30: 5154 7265 6556 6965 7720 696e 7374 616e  QTreeView instan
+00003d40: 6365 2122 0a20 2020 2020 2020 2029 0a20  ce!".        ). 
+00003d50: 2020 2020 2020 2071 5f74 7265 655f 7669         q_tree_vi
+00003d60: 6577 2e65 7870 616e 6441 6c6c 2829 0a20  ew.expandAll(). 
+00003d70: 2020 2020 2020 2069 6e64 6578 203d 2071         index = q
+00003d80: 5f74 7265 655f 7669 6577 2e69 6e64 6578  _tree_view.index
+00003d90: 4174 2851 506f 696e 7428 302c 2030 2929  At(QPoint(0, 0))
+00003da0: 0a0a 2020 2020 2020 2020 7768 696c 6520  ..        while 
+00003db0: 696e 6465 782e 6461 7461 2829 2061 6e64  index.data() and
+00003dc0: 2069 6e64 6578 2e64 6174 6128 2920 213d   index.data() !=
+00003dd0: 2064 6174 613a 0a20 2020 2020 2020 2020   data:.         
+00003de0: 2020 2069 6e64 6578 203d 2071 5f74 7265     index = q_tre
+00003df0: 655f 7669 6577 2e69 6e64 6578 4265 6c6f  e_view.indexBelo
+00003e00: 7728 696e 6465 7829 0a0a 2020 2020 2020  w(index)..      
+00003e10: 2020 7265 7475 726e 2069 6e64 6578 0a0a    return index..
+00003e20: 2020 2020 6465 6620 6765 745f 6e65 775f      def get_new_
+00003e30: 7465 7374 5f70 726f 6a65 6374 2873 656c  test_project(sel
+00003e40: 662c 206e 616d 653d 2274 6573 745f 7072  f, name="test_pr
+00003e50: 6f6a 6563 7422 2c20 6c69 6768 743d 4661  oject", light=Fa
+00003e60: 6c73 6529 3a0a 2020 2020 2020 2020 2222  lse):.        ""
+00003e70: 2243 6f70 6965 7320 6120 7465 7374 2070  "Copies a test p
+00003e80: 726f 6a65 6374 2077 6865 7265 2069 7420  roject where it 
+00003e90: 6361 6e20 6265 2073 6166 656c 7920 6d6f  can be safely mo
+00003ea0: 6469 6669 6564 2e0a 0a20 2020 2020 2020  dified...       
+00003eb0: 202d 2054 6865 206e 6577 2070 726f 6a65   - The new proje
+00003ec0: 6374 2069 7320 6372 6561 7465 6420 696e  ct is created in
+00003ed0: 2074 6865 202f 746d 7020 282f 5465 6d70   the /tmp (/Temp
+00003ee0: 2920 666f 6c64 6572 2e0a 0a20 2020 2020  ) folder...     
+00003ef0: 2020 203a 7061 7261 6d20 6e61 6d65 3a20     :param name: 
+00003f00: 6e61 6d65 206f 6620 7468 6520 6469 7265  name of the dire
+00003f10: 6374 6f72 7920 636f 6e74 6169 6e69 6e67  ctory containing
+00003f20: 2074 6865 2070 726f 6a65 6374 2028 7374   the project (st
+00003f30: 7229 0a20 2020 2020 2020 203a 7061 7261  r).        :para
+00003f40: 6d20 6c69 6768 743a 2054 7275 6520 746f  m light: True to
+00003f50: 2063 6f70 7920 6120 7072 6f6a 6563 7420   copy a project 
+00003f60: 7769 7468 2066 6577 2064 6f63 756d 656e  with few documen
+00003f70: 7473 2028 626f 6f6c 290a 2020 2020 2020  ts (bool).      
+00003f80: 2020 2222 220a 0a20 2020 2020 2020 206e    """..        n
+00003f90: 6577 5f74 6573 745f 7072 6f6a 203d 206f  ew_test_proj = o
+00003fa0: 732e 7061 7468 2e6a 6f69 6e28 7365 6c66  s.path.join(self
+00003fb0: 2e63 6f6e 6669 675f 7061 7468 2c20 6e61  .config_path, na
+00003fc0: 6d65 290a 0a20 2020 2020 2020 2069 6620  me)..        if 
+00003fd0: 6f73 2e70 6174 682e 6578 6973 7473 286e  os.path.exists(n
+00003fe0: 6577 5f74 6573 745f 7072 6f6a 293a 0a20  ew_test_proj):. 
+00003ff0: 2020 2020 2020 2020 2020 2073 6875 7469             shuti
+00004000: 6c2e 726d 7472 6565 286e 6577 5f74 6573  l.rmtree(new_tes
+00004010: 745f 7072 6f6a 290a 0a20 2020 2020 2020  t_proj)..       
+00004020: 2063 6f6e 6669 6720 3d20 436f 6e66 6967   config = Config
+00004030: 2863 6f6e 6669 675f 7061 7468 3d73 656c  (config_path=sel
+00004040: 662e 636f 6e66 6967 5f70 6174 6829 0a20  f.config_path). 
+00004050: 2020 2020 2020 206d 6961 5f70 6174 6820         mia_path 
+00004060: 3d20 636f 6e66 6967 2e67 6574 5f6d 6961  = config.get_mia
+00004070: 5f70 6174 6828 290a 0a20 2020 2020 2020  _path()..       
+00004080: 2074 6573 745f 7072 6f6a 203d 206f 732e   test_proj = os.
+00004090: 7061 7468 2e6a 6f69 6e28 0a20 2020 2020  path.join(.     
+000040a0: 2020 2020 2020 206d 6961 5f70 6174 682c         mia_path,
+000040b0: 0a20 2020 2020 2020 2020 2020 2022 6d69  .            "mi
+000040c0: 6175 7464 6174 6122 2c0a 2020 2020 2020  autdata",.      
+000040d0: 2020 2020 2020 2272 6573 6f75 7263 6573        "resources
+000040e0: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+000040f0: 6d69 6122 2c0a 2020 2020 2020 2020 2020  mia",.          
+00004100: 2020 226c 6967 6874 5f74 6573 745f 7072    "light_test_pr
+00004110: 6f6a 6563 7422 2069 6620 6c69 6768 7420  oject" if light 
+00004120: 656c 7365 2022 7072 6f6a 6563 745f 3822  else "project_8"
+00004130: 2c0a 2020 2020 2020 2020 290a 0a20 2020  ,.        )..   
+00004140: 2020 2020 2073 6875 7469 6c2e 636f 7079       shutil.copy
+00004150: 7472 6565 2874 6573 745f 7072 6f6a 2c20  tree(test_proj, 
+00004160: 6e65 775f 7465 7374 5f70 726f 6a29 0a20  new_test_proj). 
+00004170: 2020 2020 2020 2072 6574 7572 6e20 6e65         return ne
+00004180: 775f 7465 7374 5f70 726f 6a0a 0a20 2020  w_test_proj..   
+00004190: 2064 6566 2070 726f 636c 6962 7669 6577   def proclibview
+000041a0: 5f6e 6970 7970 655f 7374 6174 6528 7365  _nipype_state(se
+000041b0: 6c66 2c20 7072 6f63 5f6c 6962 5f76 6965  lf, proc_lib_vie
+000041c0: 7729 3a0a 2020 2020 2020 2020 2222 2247  w):.        """G
+000041d0: 6976 6520 7468 6520 7374 6174 6520 6f66  ive the state of
+000041e0: 206e 6970 7970 6520 7072 6f63 5f6c 6962   nipype proc_lib
+000041f0: 5f76 6965 772e 0a0a 2020 2020 2020 2020  _view...        
+00004200: 3a70 6172 616d 2070 726f 635f 6c69 625f  :param proc_lib_
+00004210: 7669 6577 3a20 7468 6520 7072 6f63 6573  view: the proces
+00004220: 7320 6c69 6272 6172 7920 7669 6577 206f  s library view o
+00004230: 626a 6563 740a 0a20 2020 2020 2020 203a  bject..        :
+00004240: 7265 7475 726e 733a 2074 6865 2073 7461  returns: the sta
+00004250: 7465 206f 6620 6e69 7079 7065 2070 726f  te of nipype pro
+00004260: 635f 6c69 625f 7669 6577 3a0a 2020 2020  c_lib_view:.    
+00004270: 2020 2020 2020 2020 2020 2020 2020 2d20                - 
+00004280: 4e6f 6e65 3a20 7072 6f63 5f6c 6962 5f76  None: proc_lib_v
+00004290: 6965 7720 6973 2065 6d70 7479 206f 7220  iew is empty or 
+000042a0: 6e69 7079 7065 2069 7320 6e6f 7420 6c6f  nipype is not lo
+000042b0: 6164 6564 2e0a 2020 2020 2020 2020 2020  aded..          
+000042c0: 2020 2020 2020 2020 2d20 276e 6970 7970          - 'nipyp
+000042d0: 6527 3a20 276e 6970 7970 6527 2069 7320  e': 'nipype' is 
+000042e0: 6c6f 6164 6564 2062 7574 2027 696e 7465  loaded but 'inte
+000042f0: 7266 6163 6573 2720 6e6f 742e 0a20 2020  rfaces' not..   
+00004300: 2020 2020 2020 2020 2020 2020 2020 202d                 -
+00004310: 2027 6e69 7079 7065 2e69 6e74 6572 6661   'nipype.interfa
+00004320: 6365 273a 2027 6e69 7079 7065 2e69 6e74  ce': 'nipype.int
+00004330: 6572 6661 6365 2720 6973 206c 6f61 6465  erface' is loade
+00004340: 6420 6275 740a 2020 2020 2020 2020 2020  d but.          
+00004350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004360: 2020 2020 2020 2020 2020 2020 2020 2744                'D
+00004370: 6174 6147 7261 6262 6572 2720 6e6f 742e  ataGrabber' not.
+00004380: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004390: 2020 202d 2027 7072 6f63 6573 735f 656e     - 'process_en
+000043a0: 6162 6c65 6427 3a20 276e 6970 7970 652e  abled': 'nipype.
+000043b0: 696e 7465 7266 6163 652e 4461 7461 4772  interface.DataGr
+000043c0: 6162 6265 7227 2069 730a 2020 2020 2020  abber' is.      
+000043d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000043e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000043f0: 206c 6f61 6465 642e 0a20 2020 2020 2020   loaded..       
+00004400: 2022 2222 0a0a 2020 2020 2020 2020 6966   """..        if
+00004410: 2070 726f 635f 6c69 625f 7669 6577 2e74   proc_lib_view.t
+00004420: 6f5f 6469 6374 2829 3a0a 2020 2020 2020  o_dict():.      
+00004430: 2020 2020 2020 6966 2070 726f 635f 6c69        if proc_li
+00004440: 625f 7669 6577 2e74 6f5f 6469 6374 2829  b_view.to_dict()
+00004450: 2e67 6574 2822 6e69 7079 7065 2229 3a0a  .get("nipype"):.
+00004460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004470: 6966 2070 726f 635f 6c69 625f 7669 6577  if proc_lib_view
+00004480: 2e74 6f5f 6469 6374 2829 2e67 6574 2822  .to_dict().get("
+00004490: 6e69 7079 7065 2229 2e67 6574 2822 696e  nipype").get("in
+000044a0: 7465 7266 6163 6573 2229 3a0a 2020 2020  terfaces"):.    
+000044b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000044c0: 6966 2028 0a20 2020 2020 2020 2020 2020  if (.           
+000044d0: 2020 2020 2020 2020 2020 2020 2070 726f               pro
+000044e0: 635f 6c69 625f 7669 6577 2e74 6f5f 6469  c_lib_view.to_di
+000044f0: 6374 2829 0a20 2020 2020 2020 2020 2020  ct().           
+00004500: 2020 2020 2020 2020 2020 2020 202e 6765               .ge
+00004510: 7428 226e 6970 7970 6522 290a 2020 2020  t("nipype").    
+00004520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004530: 2020 2020 2e67 6574 2822 696e 7465 7266      .get("interf
+00004540: 6163 6573 2229 0a20 2020 2020 2020 2020  aces").         
+00004550: 2020 2020 2020 2020 2020 2020 2020 202e                 .
+00004560: 6765 7428 2244 6174 6147 7261 6262 6572  get("DataGrabber
+00004570: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
+00004580: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
 00004590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000045a0: 2020 2744 6174 6147 7261 6262 6572 2720    'DataGrabber' 
-000045b0: 6e6f 742e 0a20 2020 2020 2020 2020 2020  not..           
-000045c0: 2020 2020 2020 202d 2027 7072 6f63 6573         - 'proces
-000045d0: 735f 656e 6162 6c65 6427 3a20 276e 6970  s_enabled': 'nip
-000045e0: 7970 652e 696e 7465 7266 6163 652e 4461  ype.interface.Da
-000045f0: 7461 4772 6162 6265 7227 2069 7320 6c6f  taGrabber' is lo
-00004600: 6164 6564 2e0a 2020 2020 2020 2020 2222  aded..        ""
-00004610: 220a 0a20 2020 2020 2020 2069 6620 7072  "..        if pr
-00004620: 6f63 5f6c 6962 5f76 6965 772e 746f 5f64  oc_lib_view.to_d
-00004630: 6963 7428 293a 0a0a 2020 2020 2020 2020  ict():..        
-00004640: 2020 2020 6966 2070 726f 635f 6c69 625f      if proc_lib_
-00004650: 7669 6577 2e74 6f5f 6469 6374 2829 2e67  view.to_dict().g
-00004660: 6574 2822 6e69 7079 7065 2229 3a0a 0a20  et("nipype"):.. 
-00004670: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00004680: 6620 7072 6f63 5f6c 6962 5f76 6965 772e  f proc_lib_view.
-00004690: 746f 5f64 6963 7428 292e 6765 7428 226e  to_dict().get("n
-000046a0: 6970 7970 6522 292e 6765 7428 2269 6e74  ipype").get("int
-000046b0: 6572 6661 6365 7322 293a 0a0a 2020 2020  erfaces"):..    
-000046c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000046d0: 6966 2028 0a20 2020 2020 2020 2020 2020  if (.           
-000046e0: 2020 2020 2020 2020 2020 2020 2070 726f               pro
-000046f0: 635f 6c69 625f 7669 6577 2e74 6f5f 6469  c_lib_view.to_di
-00004700: 6374 2829 0a20 2020 2020 2020 2020 2020  ct().           
-00004710: 2020 2020 2020 2020 2020 2020 202e 6765               .ge
-00004720: 7428 226e 6970 7970 6522 290a 2020 2020  t("nipype").    
-00004730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004740: 2020 2020 2e67 6574 2822 696e 7465 7266      .get("interf
-00004750: 6163 6573 2229 0a20 2020 2020 2020 2020  aces").         
-00004760: 2020 2020 2020 2020 2020 2020 2020 202e                 .
-00004770: 6765 7428 2244 6174 6147 7261 6262 6572  get("DataGrabber
-00004780: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
-00004790: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
-000047a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000047b0: 2020 7374 6174 6520 3d20 280a 2020 2020    state = (.    
-000047c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000047d0: 2020 2020 2020 2020 7072 6f63 5f6c 6962          proc_lib
-000047e0: 5f76 6965 772e 746f 5f64 6963 7428 290a  _view.to_dict().
-000047f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004800: 2020 2020 2020 2020 2020 2020 2e67 6574              .get
-00004810: 2822 6e69 7079 7065 2229 0a20 2020 2020  ("nipype").     
-00004820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004830: 2020 2020 2020 202e 6765 7428 2269 6e74         .get("int
-00004840: 6572 6661 6365 7322 290a 2020 2020 2020  erfaces").      
-00004850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004860: 2020 2020 2020 2e67 6574 2822 4461 7461        .get("Data
-00004870: 4772 6162 6265 7222 290a 2020 2020 2020  Grabber").      
-00004880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004890: 2020 290a 0a20 2020 2020 2020 2020 2020    )..           
-000048a0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-000048b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000048c0: 2020 2020 2020 2073 7461 7465 203d 2022         state = "
-000048d0: 6e69 7079 7065 2e69 6e74 6572 6661 6365  nipype.interface
-000048e0: 7322 0a0a 2020 2020 2020 2020 2020 2020  s"..            
-000048f0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-00004900: 2020 2020 2020 2020 2020 2020 2020 7374                st
-00004910: 6174 6520 3d20 226e 6970 7970 6522 0a0a  ate = "nipype"..
-00004920: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00004930: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00004940: 2020 7374 6174 6520 3d20 4e6f 6e65 0a0a    state = None..
-00004950: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00004960: 2020 2020 2020 2020 2020 7374 6174 6520            state 
-00004970: 3d20 4e6f 6e65 0a0a 2020 2020 2020 2020  = None..        
-00004980: 7265 7475 726e 2073 7461 7465 0a0a 2020  return state..  
-00004990: 2020 6465 6620 7072 6f63 6c69 6276 6965    def proclibvie
-000049a0: 775f 6e69 7079 7065 5f72 6573 6574 5f73  w_nipype_reset_s
-000049b0: 7461 7465 280a 2020 2020 2020 2020 7365  tate(.        se
-000049c0: 6c66 2c20 6d61 696e 5f77 696e 646f 772c  lf, main_window,
-000049d0: 2070 706c 5f6d 616e 6167 6572 2c20 696e   ppl_manager, in
-000049e0: 6974 5f73 7461 7465 0a20 2020 2029 3a0a  it_state.    ):.
-000049f0: 2020 2020 2020 2020 2222 2252 6573 6574          """Reset
-00004a00: 2074 6865 2070 726f 6365 7373 206c 6962   the process lib
-00004a10: 7261 7279 2076 6965 7720 746f 2069 7473  rary view to its
-00004a20: 2069 6e69 7469 616c 2073 7461 7465 2e0a   initial state..
-00004a30: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00004a40: 6d61 696e 5f77 696e 646f 773a 2074 6865  main_window: the
-00004a50: 206d 6169 6e20 7769 6e64 6f77 206f 626a   main window obj
-00004a60: 6563 740a 2020 2020 2020 2020 3a70 6172  ect.        :par
-00004a70: 616d 2070 706c 5f6d 616e 6167 6572 3a20  am ppl_manager: 
-00004a80: 7468 6520 7069 7065 6c69 6e65 206d 616e  the pipeline man
-00004a90: 6167 6572 206f 626a 6563 740a 2020 2020  ager object.    
-00004aa0: 2020 2020 3a70 6172 616d 2069 6e69 745f      :param init_
-00004ab0: 7374 6174 653a 2074 6865 2069 6e69 7469  state: the initi
-00004ac0: 616c 2073 7461 7465 206f 6620 6e69 7079  al state of nipy
-00004ad0: 7065 2070 726f 635f 6c69 625f 7669 6577  pe proc_lib_view
-00004ae0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00004af0: 2020 2020 2020 2020 2020 2020 202d 204e               - N
-00004b00: 6f6e 653a 2070 726f 635f 6c69 625f 7669  one: proc_lib_vi
-00004b10: 6577 2069 7320 656d 7074 7920 6f72 206e  ew is empty or n
-00004b20: 6970 7970 6520 6973 206e 6f74 0a20 2020  ipype is not.   
-00004b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004b50: 6c6f 6164 6564 2e0a 2020 2020 2020 2020  loaded..        
-00004b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004b70: 2020 202d 2027 6e69 7079 7065 273a 2027     - 'nipype': '
-00004b80: 6e69 7079 7065 2720 6973 206c 6f61 6465  nipype' is loade
-00004b90: 6420 6275 7420 2769 6e74 6572 6661 6365  d but 'interface
-00004ba0: 7327 206e 6f74 2e0a 2020 2020 2020 2020  s' not..        
-00004bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004bc0: 2020 202d 2027 6e69 7079 7065 2e69 6e74     - 'nipype.int
-00004bd0: 6572 6661 6365 273a 2027 6e69 7079 7065  erface': 'nipype
-00004be0: 2e69 6e74 6572 6661 6365 2720 6973 206c  .interface' is l
-00004bf0: 6f61 6465 640a 2020 2020 2020 2020 2020  oaded.          
-00004c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004c20: 2020 2020 2020 2062 7574 2027 4461 7461         but 'Data
-00004c30: 4772 6162 6265 7227 206e 6f74 2e0a 2020  Grabber' not..  
-00004c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004c50: 2020 2020 2020 2020 202d 2027 7072 6f63           - 'proc
-00004c60: 6573 735f 656e 6162 6c65 6427 3a20 276e  ess_enabled': 'n
-00004c70: 6970 7970 652e 696e 7465 7266 6163 652e  ipype.interface.
-00004c80: 4461 7461 4772 6162 6265 7227 0a20 2020  DataGrabber'.   
-00004c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004cb0: 2020 2020 2020 2020 2020 2020 2069 7320               is 
-00004cc0: 6c6f 6164 6564 2e0a 2020 2020 2020 2020  loaded..        
-00004cd0: 2222 220a 2020 2020 2020 2020 6d61 696e  """.        main
-00004ce0: 5f77 696e 646f 772e 7061 636b 6167 655f  _window.package_
-00004cf0: 6c69 6272 6172 795f 706f 705f 7570 2829  library_pop_up()
-00004d00: 0a20 2020 2020 2020 2070 6b67 5f6c 6962  .        pkg_lib
-00004d10: 5f77 696e 646f 7720 3d20 6d61 696e 5f77  _window = main_w
-00004d20: 696e 646f 772e 706f 705f 7570 5f70 6163  indow.pop_up_pac
-00004d30: 6b61 6765 5f6c 6962 7261 7279 0a20 2020  kage_library.   
-00004d40: 2020 2020 2070 706c 5f6d 616e 6167 6572       ppl_manager
-00004d50: 2e70 726f 6365 7373 4c69 6272 6172 792e  .processLibrary.
-00004d60: 7072 6f63 6573 735f 6c69 6272 6172 792e  process_library.
-00004d70: 706b 675f 6c69 6272 6172 792e 6973 5f70  pkg_library.is_p
-00004d80: 6174 6820 3d20 4661 6c73 650a 0a20 2020  ath = False..   
-00004d90: 2020 2020 2069 6620 696e 6974 5f73 7461       if init_sta
-00004da0: 7465 2069 7320 4e6f 6e65 3a0a 2020 2020  te is None:.    
-00004db0: 2020 2020 2020 2020 706b 675f 6c69 625f          pkg_lib_
-00004dc0: 7769 6e64 6f77 2e6c 696e 655f 6564 6974  window.line_edit
-00004dd0: 2e73 6574 5465 7874 2822 6e69 7079 7065  .setText("nipype
-00004de0: 2229 0a20 2020 2020 2020 2020 2020 2023  ").            #
-00004df0: 2043 6c69 636b 7320 6f6e 2072 656d 6f76   Clicks on remov
-00004e00: 6520 7061 636b 6167 650a 2020 2020 2020  e package.      
-00004e10: 2020 2020 2020 706b 675f 6c69 625f 7769        pkg_lib_wi
-00004e20: 6e64 6f77 2e6c 6179 6f75 7428 292e 6368  ndow.layout().ch
-00004e30: 696c 6472 656e 2829 5b30 5d2e 6c61 796f  ildren()[0].layo
-00004e40: 7574 2829 2e63 6869 6c64 7265 6e28 295b  ut().children()[
-00004e50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004e60: 2033 0a20 2020 2020 2020 2020 2020 205d   3.            ]
-00004e70: 2e69 7465 6d41 7428 3129 2e77 6964 6765  .itemAt(1).widge
-00004e80: 7428 292e 636c 6963 6b65 642e 656d 6974  t().clicked.emit
-00004e90: 2829 0a0a 2020 2020 2020 2020 656c 6966  ()..        elif
-00004ea0: 2069 6e69 745f 7374 6174 6520 3d3d 2022   init_state == "
-00004eb0: 6e69 7079 7065 223a 0a20 2020 2020 2020  nipype":.       
-00004ec0: 2020 2020 2070 6b67 5f6c 6962 5f77 696e       pkg_lib_win
-00004ed0: 646f 772e 6c69 6e65 5f65 6469 742e 7365  dow.line_edit.se
-00004ee0: 7454 6578 7428 226e 6970 7970 652e 696e  tText("nipype.in
-00004ef0: 7465 7266 6163 6573 2229 0a20 2020 2020  terfaces").     
-00004f00: 2020 2020 2020 2023 2043 6c69 636b 7320         # Clicks 
-00004f10: 6f6e 2072 656d 6f76 6520 7061 636b 6167  on remove packag
-00004f20: 650a 2020 2020 2020 2020 2020 2020 706b  e.            pk
-00004f30: 675f 6c69 625f 7769 6e64 6f77 2e6c 6179  g_lib_window.lay
-00004f40: 6f75 7428 292e 6368 696c 6472 656e 2829  out().children()
-00004f50: 5b30 5d2e 6c61 796f 7574 2829 2e63 6869  [0].layout().chi
-00004f60: 6c64 7265 6e28 295b 0a20 2020 2020 2020  ldren()[.       
-00004f70: 2020 2020 2020 2020 2033 0a20 2020 2020           3.     
-00004f80: 2020 2020 2020 205d 2e69 7465 6d41 7428         ].itemAt(
-00004f90: 3129 2e77 6964 6765 7428 292e 636c 6963  1).widget().clic
-00004fa0: 6b65 642e 656d 6974 2829 0a0a 2020 2020  ked.emit()..    
-00004fb0: 2020 2020 656c 6966 2069 6e69 745f 7374      elif init_st
-00004fc0: 6174 6520 3d3d 2022 6e69 7079 7065 2e69  ate == "nipype.i
-00004fd0: 6e74 6572 6661 6365 7322 3a0a 2020 2020  nterfaces":.    
-00004fe0: 2020 2020 2020 2020 706b 675f 6c69 625f          pkg_lib_
-00004ff0: 7769 6e64 6f77 2e6c 696e 655f 6564 6974  window.line_edit
-00005000: 2e73 6574 5465 7874 2822 6e69 7079 7065  .setText("nipype
-00005010: 2e69 6e74 6572 6661 6365 732e 4461 7461  .interfaces.Data
-00005020: 4772 6162 6265 7222 290a 2020 2020 2020  Grabber").      
-00005030: 2020 2020 2020 2320 436c 6963 6b73 206f        # Clicks o
-00005040: 6e20 7265 6d6f 7665 2070 6163 6b61 6765  n remove package
-00005050: 0a20 2020 2020 2020 2020 2020 2070 6b67  .            pkg
-00005060: 5f6c 6962 5f77 696e 646f 772e 6c61 796f  _lib_window.layo
-00005070: 7574 2829 2e63 6869 6c64 7265 6e28 295b  ut().children()[
-00005080: 305d 2e6c 6179 6f75 7428 292e 6368 696c  0].layout().chil
-00005090: 6472 656e 2829 5b0a 2020 2020 2020 2020  dren()[.        
-000050a0: 2020 2020 2020 2020 330a 2020 2020 2020          3.      
-000050b0: 2020 2020 2020 5d2e 6974 656d 4174 2831        ].itemAt(1
-000050c0: 292e 7769 6467 6574 2829 2e63 6c69 636b  ).widget().click
-000050d0: 6564 2e65 6d69 7428 290a 0a20 2020 2020  ed.emit()..     
-000050e0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000050f0: 2020 2020 2070 6b67 5f6c 6962 5f77 696e       pkg_lib_win
-00005100: 646f 772e 6c69 6e65 5f65 6469 742e 7365  dow.line_edit.se
-00005110: 7454 6578 7428 226e 6970 7970 652e 696e  tText("nipype.in
-00005120: 7465 7266 6163 6573 2e44 6174 6147 7261  terfaces.DataGra
-00005130: 6262 6572 2229 0a20 2020 2020 2020 2020  bber").         
-00005140: 2020 2023 2043 6c69 636b 7320 6f6e 2061     # Clicks on a
-00005150: 6464 2070 6163 6b61 6765 0a20 2020 2020  dd package.     
-00005160: 2020 2020 2020 2070 6b67 5f6c 6962 5f77         pkg_lib_w
-00005170: 696e 646f 772e 6c61 796f 7574 2829 2e63  indow.layout().c
-00005180: 6869 6c64 7265 6e28 295b 305d 2e6c 6179  hildren()[0].lay
-00005190: 6f75 7428 292e 6368 696c 6472 656e 2829  out().children()
-000051a0: 5b0a 2020 2020 2020 2020 2020 2020 2020  [.              
-000051b0: 2020 330a 2020 2020 2020 2020 2020 2020    3.            
-000051c0: 5d2e 6974 656d 4174 2830 292e 7769 6467  ].itemAt(0).widg
-000051d0: 6574 2829 2e63 6c69 636b 6564 2e65 6d69  et().clicked.emi
-000051e0: 7428 290a 0a20 2020 2020 2020 2070 6b67  t()..        pkg
-000051f0: 5f6c 6962 5f77 696e 646f 772e 6f6b 5f63  _lib_window.ok_c
-00005200: 6c69 636b 6564 2829 0a0a 2020 2020 6465  licked()..    de
-00005210: 6620 7265 7374 6172 745f 4d49 4128 7365  f restart_MIA(se
-00005220: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
-00005230: 5265 7374 6172 7473 204d 4941 2077 6974  Restarts MIA wit
-00005240: 6869 6e20 6120 756e 6974 2074 6573 742e  hin a unit test.
-00005250: 0a0a 2020 2020 2020 2020 2d20 4361 6e20  ..        - Can 
-00005260: 6265 2075 7365 6420 746f 2072 6573 7461  be used to resta
-00005270: 7274 204d 4941 2061 6674 6572 2063 6861  rt MIA after cha
-00005280: 6e67 696e 6720 7468 6520 636f 6e74 726f  nging the contro
-00005290: 6c6c 6572 2076 6572 7369 6f6e 2069 6e20  ller version in 
-000052a0: 4d49 410a 2020 2020 2020 2020 2020 7072  MIA.          pr
-000052b0: 6566 6572 656e 6365 732e 0a20 2020 2020  eferences..     
-000052c0: 2020 2022 2222 0a0a 2020 2020 2020 2020     """..        
-000052d0: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-000052e0: 2e63 6c6f 7365 2829 0a0a 2020 2020 2020  .close()..      
-000052f0: 2020 2320 5265 6d6f 7669 6e67 2074 6865    # Removing the
-00005300: 206f 7065 6e65 6420 7072 6f6a 6563 7473   opened projects
-00005310: 2028 696e 2043 492c 2074 6865 2074 6573   (in CI, the tes
-00005320: 7473 2061 7265 2072 756e 2074 7769 6365  ts are run twice
-00005330: 290a 2020 2020 2020 2020 636f 6e66 6967  ).        config
-00005340: 203d 2043 6f6e 6669 6728 636f 6e66 6967   = Config(config
-00005350: 5f70 6174 683d 7365 6c66 2e63 6f6e 6669  _path=self.confi
-00005360: 675f 7061 7468 290a 2020 2020 2020 2020  g_path).        
-00005370: 636f 6e66 6967 2e73 6574 5f6f 7065 6e65  config.set_opene
-00005380: 645f 7072 6f6a 6563 7473 285b 5d29 0a20  d_projects([]). 
-00005390: 2020 2020 2020 2063 6f6e 6669 672e 7361         config.sa
-000053a0: 7665 436f 6e66 6967 2829 0a20 2020 2020  veConfig().     
-000053b0: 2020 2073 656c 662e 6170 702e 6578 6974     self.app.exit
-000053c0: 2829 0a0a 2020 2020 2020 2020 636f 6e66  ()..        conf
-000053d0: 6967 203d 2043 6f6e 6669 6728 636f 6e66  ig = Config(conf
-000053e0: 6967 5f70 6174 683d 7365 6c66 2e63 6f6e  ig_path=self.con
-000053f0: 6669 675f 7061 7468 290a 2020 2020 2020  fig_path).      
-00005400: 2020 636f 6e66 6967 2e73 6574 5f75 7365    config.set_use
-00005410: 725f 6d6f 6465 2846 616c 7365 290a 2020  r_mode(False).  
-00005420: 2020 2020 2020 7365 6c66 2e61 7070 203d        self.app =
-00005430: 2051 4170 706c 6963 6174 696f 6e2e 696e   QApplication.in
-00005440: 7374 616e 6365 2829 0a0a 2020 2020 2020  stance()..      
-00005450: 2020 6966 2073 656c 662e 6170 7020 6973    if self.app is
-00005460: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00005470: 2020 2073 656c 662e 6170 7020 3d20 5141     self.app = QA
-00005480: 7070 6c69 6361 7469 6f6e 2873 7973 2e61  pplication(sys.a
-00005490: 7267 7629 0a0a 2020 2020 2020 2020 7365  rgv)..        se
-000054a0: 6c66 2e70 726f 6a65 6374 203d 2050 726f  lf.project = Pro
-000054b0: 6a65 6374 284e 6f6e 652c 2054 7275 6529  ject(None, True)
-000054c0: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
-000054d0: 696e 5f77 696e 646f 7720 3d20 4d61 696e  in_window = Main
-000054e0: 5769 6e64 6f77 2873 656c 662e 7072 6f6a  Window(self.proj
-000054f0: 6563 742c 2074 6573 743d 5472 7565 290a  ect, test=True).
-00005500: 0a20 2020 2064 6566 2073 6574 5570 2873  .    def setUp(s
-00005510: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
-00005520: 2243 616c 6c65 6420 6265 666f 7265 2065  "Called before e
-00005530: 6163 6820 7465 7374 2222 220a 0a20 2020  ach test"""..   
-00005540: 2020 2020 2023 2041 6c6c 2074 6865 2074       # All the t
-00005550: 6573 7473 2061 7265 2072 756e 2069 6e20  ests are run in 
-00005560: 6164 6d69 6e20 6d6f 6465 0a20 2020 2020  admin mode.     
-00005570: 2020 2063 6f6e 6669 6720 3d20 436f 6e66     config = Conf
-00005580: 6967 2863 6f6e 6669 675f 7061 7468 3d73  ig(config_path=s
-00005590: 656c 662e 636f 6e66 6967 5f70 6174 6829  elf.config_path)
-000055a0: 0a20 2020 2020 2020 2063 6f6e 6669 672e  .        config.
-000055b0: 7365 745f 7573 6572 5f6d 6f64 6528 4661  set_user_mode(Fa
-000055c0: 6c73 6529 0a20 2020 2020 2020 2073 656c  lse).        sel
-000055d0: 662e 6170 7020 3d20 5141 7070 6c69 6361  f.app = QApplica
-000055e0: 7469 6f6e 2e69 6e73 7461 6e63 6528 290a  tion.instance().
-000055f0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-00005600: 2e61 7070 2069 7320 4e6f 6e65 3a0a 2020  .app is None:.  
-00005610: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
-00005620: 7070 203d 2051 4170 706c 6963 6174 696f  pp = QApplicatio
-00005630: 6e28 7379 732e 6172 6776 290a 0a20 2020  n(sys.argv)..   
-00005640: 2020 2020 2073 656c 662e 7072 6f6a 6563       self.projec
-00005650: 7420 3d20 5072 6f6a 6563 7428 4e6f 6e65  t = Project(None
-00005660: 2c20 5472 7565 290a 2020 2020 2020 2020  , True).        
-00005670: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00005680: 203d 204d 6169 6e57 696e 646f 7728 7365   = MainWindow(se
-00005690: 6c66 2e70 726f 6a65 6374 2c20 7465 7374  lf.project, test
-000056a0: 3d54 7275 6529 0a0a 2020 2020 4063 6c61  =True)..    @cla
-000056b0: 7373 6d65 7468 6f64 0a20 2020 2064 6566  ssmethod.    def
-000056c0: 2073 6574 5570 436c 6173 7328 636c 7329   setUpClass(cls)
-000056d0: 3a0a 2020 2020 2020 2020 2222 2243 616c  :.        """Cal
-000056e0: 6c65 6420 6f6e 6365 2061 7420 7468 6520  led once at the 
-000056f0: 6265 6769 6e6e 696e 6720 6f66 2074 6865  beginning of the
-00005700: 2063 6c61 7373 2222 220a 0a20 2020 2020   class"""..     
-00005710: 2020 2063 6c73 2e63 6f6e 6669 675f 7061     cls.config_pa
-00005720: 7468 203d 2074 656d 7066 696c 652e 6d6b  th = tempfile.mk
-00005730: 6474 656d 7028 7072 6566 6978 3d22 6d69  dtemp(prefix="mi
-00005740: 615f 7465 7374 7322 290a 2020 2020 2020  a_tests").      
-00005750: 2020 2320 6861 636b 2074 6865 2043 6f6e    # hack the Con
-00005760: 6669 6720 636c 6173 7320 746f 2067 6574  fig class to get
-00005770: 2063 6f6e 6669 675f 7061 7468 2c20 6265   config_path, be
-00005780: 6361 7573 6520 736f 6d65 2043 6f6e 6669  cause some Confi
-00005790: 670a 2020 2020 2020 2020 2320 696e 7374  g.        # inst
-000057a0: 616e 6365 7320 6172 6520 6372 6561 7465  ances are create
-000057b0: 6420 6f75 7420 6f66 206f 7572 2063 6f6e  d out of our con
-000057c0: 7472 6f6c 2069 6e20 7468 6520 636f 6465  trol in the code
-000057d0: 0a20 2020 2020 2020 2043 6f6e 6669 672e  .        Config.
-000057e0: 636f 6e66 6967 5f70 6174 6820 3d20 636c  config_path = cl
-000057f0: 732e 636f 6e66 6967 5f70 6174 680a 0a20  s.config_path.. 
-00005800: 2020 2064 6566 2074 6561 7244 6f77 6e28     def tearDown(
-00005810: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
-00005820: 2222 4361 6c6c 6564 2061 6674 6572 2065  ""Called after e
-00005830: 6163 6820 7465 7374 2222 220a 0a20 2020  ach test"""..   
-00005840: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
-00005850: 696e 646f 772e 636c 6f73 6528 290a 2020  indow.close().  
-00005860: 2020 2020 2020 2320 5265 6d6f 7669 6e67        # Removing
-00005870: 2074 6865 206f 7065 6e65 6420 7072 6f6a   the opened proj
-00005880: 6563 7473 2028 696e 2043 492c 2074 6865  ects (in CI, the
-00005890: 2074 6573 7473 2061 7265 2072 756e 2074   tests are run t
-000058a0: 7769 6365 290a 2020 2020 2020 2020 636f  wice).        co
-000058b0: 6e66 6967 203d 2043 6f6e 6669 6728 636f  nfig = Config(co
-000058c0: 6e66 6967 5f70 6174 683d 7365 6c66 2e63  nfig_path=self.c
-000058d0: 6f6e 6669 675f 7061 7468 290a 2020 2020  onfig_path).    
-000058e0: 2020 2020 636f 6e66 6967 2e73 6574 5f6f      config.set_o
-000058f0: 7065 6e65 645f 7072 6f6a 6563 7473 285b  pened_projects([
-00005900: 5d29 0a20 2020 2020 2020 2063 6f6e 6669  ]).        confi
-00005910: 672e 7361 7665 436f 6e66 6967 2829 0a20  g.saveConfig(). 
-00005920: 2020 2020 2020 2073 656c 662e 6170 702e         self.app.
-00005930: 6578 6974 2829 0a0a 2020 2020 4063 6c61  exit()..    @cla
-00005940: 7373 6d65 7468 6f64 0a20 2020 2064 6566  ssmethod.    def
-00005950: 2074 6561 7244 6f77 6e43 6c61 7373 2863   tearDownClass(c
-00005960: 6c73 293a 0a20 2020 2020 2020 2022 2222  ls):.        """
-00005970: 4361 6c6c 6564 206f 6e63 6520 6174 2074  Called once at t
-00005980: 6865 2065 6e64 206f 6620 7468 6520 636c  he end of the cl
-00005990: 6173 7322 2222 0a0a 2020 2020 2020 2020  ass"""..        
-000059a0: 6966 206f 732e 7061 7468 2e65 7869 7374  if os.path.exist
-000059b0: 7328 636c 732e 636f 6e66 6967 5f70 6174  s(cls.config_pat
-000059c0: 6829 3a0a 2020 2020 2020 2020 2020 2020  h):.            
-000059d0: 7368 7574 696c 2e72 6d74 7265 6528 636c  shutil.rmtree(cl
-000059e0: 732e 636f 6e66 6967 5f70 6174 6829 0a0a  s.config_path)..
-000059f0: 0a63 6c61 7373 2054 6573 744d 4941 4461  .class TestMIADa
-00005a00: 7461 4272 6f77 7365 7228 5465 7374 4d49  taBrowser(TestMI
-00005a10: 4143 6173 6529 3a0a 2020 2020 2222 2254  ACase):.    """T
-00005a20: 6573 7473 2066 6f72 2074 6865 2064 6174  ests for the dat
-00005a30: 6120 6272 6f77 7365 7220 7461 6220 2844  a browser tab (D
-00005a40: 6174 6142 726f 7773 6572 292e 0a0a 2020  ataBrowser)...  
-00005a50: 2020 3a43 6f6e 7461 696e 733a 0a20 2020    :Contains:.   
-00005a60: 2020 2020 203a 4d65 7468 6f64 3a0a 2020       :Method:.  
-00005a70: 2020 2020 2020 2020 2020 2d20 7465 7374            - test
-00005a80: 5f61 6464 5f70 6174 683a 2074 6573 7473  _add_path: tests
-00005a90: 2074 6865 2070 6f70 7570 2074 6f20 6164   the popup to ad
-00005aa0: 6420 6120 7061 7468 0a20 2020 2020 2020  d a path.       
-00005ab0: 2020 2020 202d 2074 6573 745f 6164 645f       - test_add_
-00005ac0: 7461 673a 2074 6573 7473 2074 6865 2070  tag: tests the p
-00005ad0: 6f70 2075 7020 6164 6469 6e67 2061 2074  op up adding a t
-00005ae0: 6167 0a20 2020 2020 2020 2020 2020 202d  ag.            -
-00005af0: 2074 6573 745f 6164 7661 6e63 6564 5f73   test_advanced_s
-00005b00: 6561 7263 683a 2074 6573 7473 2074 6865  earch: tests the
-00005b10: 2061 6476 616e 6365 6420 7365 6172 6368   advanced search
-00005b20: 2077 6964 6765 740a 2020 2020 2020 2020   widget.        
-00005b30: 2020 2020 2d20 7465 7374 5f62 7269 636b      - test_brick
-00005b40: 5f68 6973 746f 7279 3a20 7465 7374 7320  _history: tests 
-00005b50: 7468 6520 6272 6963 6b20 6869 7374 6f72  the brick histor
-00005b60: 7920 706f 7075 700a 2020 2020 2020 2020  y popup.        
-00005b70: 2020 2020 2d20 7465 7374 5f63 6c65 6172      - test_clear
-00005b80: 5f63 656c 6c3a 2074 6573 7473 2074 6865  _cell: tests the
-00005b90: 206d 6574 686f 6420 636c 6561 7269 6e67   method clearing
-00005ba0: 2063 656c 6c73 0a20 2020 2020 2020 2020   cells.         
-00005bb0: 2020 202d 2074 6573 745f 636c 6f6e 655f     - test_clone_
-00005bc0: 7461 673a 2074 6573 7473 2074 6865 2070  tag: tests the p
-00005bd0: 6f70 2075 7020 636c 6f6e 696e 6720 6120  op up cloning a 
-00005be0: 7461 670a 2020 2020 2020 2020 2020 2020  tag.            
-00005bf0: 2d20 7465 7374 5f63 6f75 6e74 5f74 6162  - test_count_tab
-00005c00: 6c65 3a20 7465 7374 7320 7468 6520 636f  le: tests the co
-00005c10: 756e 7420 7461 626c 6520 706f 7075 700a  unt table popup.
-00005c20: 2020 2020 2020 2020 2020 2020 2d20 7465              - te
-00005c30: 7374 5f6d 6961 5f70 7265 6665 7265 6e63  st_mia_preferenc
-00005c40: 6573 3a20 7465 7374 7320 7468 6520 4d69  es: tests the Mi
-00005c50: 6120 7072 6566 6572 656e 6365 7320 706f  a preferences po
-00005c60: 7075 700a 2020 2020 2020 2020 2020 2020  pup.            
-00005c70: 2d20 7465 7374 5f6d 696e 695f 7669 6577  - test_mini_view
-00005c80: 6572 3a20 7365 6c65 6374 7320 7363 616e  er: selects scan
-00005c90: 7320 616e 6420 6469 7370 6c61 7920 7468  s and display th
-00005ca0: 656d 2069 6e20 7468 6520 6d69 6e69 0a20  em in the mini. 
-00005cb0: 2020 2020 2020 2020 2020 2020 2076 6965               vie
-00005cc0: 7765 720a 2020 2020 2020 2020 2020 2020  wer.            
-00005cd0: 2d20 7465 7374 5f6d 6f64 6966 795f 7461  - test_modify_ta
-00005ce0: 626c 653a 2074 6573 7473 2074 6865 206d  ble: tests the m
-00005cf0: 6f64 6966 7920 7461 626c 6520 6d6f 6475  odify table modu
-00005d00: 6c65 0a20 2020 2020 2020 2020 2020 202d  le.            -
-00005d10: 2074 6573 745f 6d75 6c74 6970 6c65 5f73   test_multiple_s
-00005d20: 6f72 743a 2074 6573 7473 2074 6865 206d  ort: tests the m
-00005d30: 756c 7469 706c 6520 736f 7274 2070 6f70  ultiple sort pop
-00005d40: 7570 0a20 2020 2020 2020 2020 2020 202d  up.            -
-00005d50: 2074 6573 745f 6d75 6c74 6970 6c65 5f73   test_multiple_s
-00005d60: 6f72 745f 6170 7065 6e64 6978 3a20 6164  ort_appendix: ad
-00005d70: 6473 2061 6e64 2072 656d 6f76 6573 2074  ds and removes t
-00005d80: 6167 7320 696e 2074 6865 2064 6174 610a  ags in the data.
-00005d90: 2020 2020 2020 2020 2020 2020 2020 6272                br
-00005da0: 6f77 7365 720a 2020 2020 2020 2020 2020  owser.          
-00005db0: 2020 2d20 7465 7374 5f6f 7065 6e54 6167    - test_openTag
-00005dc0: 7350 6f70 5570 3a20 6f70 656e 7320 6120  sPopUp: opens a 
-00005dd0: 706f 702d 7570 2074 6f20 7365 6c65 6374  pop-up to select
-00005de0: 2074 6865 206c 6567 656e 6420 6f66 2074   the legend of t
-00005df0: 6865 0a20 2020 2020 2020 2020 2020 2020  he.             
-00005e00: 2074 6875 6d62 6e61 696c 730a 2020 2020   thumbnails.    
-00005e10: 2020 2020 2020 2020 2d20 7465 7374 5f6f          - test_o
-00005e20: 7065 6e5f 7072 6f6a 6563 743a 2074 6573  pen_project: tes
-00005e30: 7473 2070 726f 6a65 6374 206f 7065 6e69  ts project openi
-00005e40: 6e67 0a20 2020 2020 2020 2020 2020 202d  ng.            -
-00005e50: 2074 6573 745f 7072 6f6a 6563 745f 6669   test_project_fi
-00005e60: 6c74 6572 3a20 7465 7374 7320 7072 6f6a  lter: tests proj
-00005e70: 6563 7420 6669 6c74 6572 206f 7065 6e69  ect filter openi
-00005e80: 6e67 0a20 2020 2020 2020 2020 2020 202d  ng.            -
-00005e90: 2074 6573 745f 7072 6f6a 6563 745f 7072   test_project_pr
-00005ea0: 6f70 6572 7469 6573 3a20 7465 7374 7320  operties: tests 
-00005eb0: 7361 7665 6420 7072 6f6a 6563 7473 2061  saved projects a
-00005ec0: 6464 6974 696f 6e20 616e 640a 2020 2020  ddition and.    
-00005ed0: 2020 2020 2020 2020 2020 7265 6d6f 7661            remova
-00005ee0: 6c0a 2020 2020 2020 2020 2020 2020 2d20  l.            - 
-00005ef0: 7465 7374 5f70 726f 6a5f 7265 6d6f 765f  test_proj_remov_
-00005f00: 6672 6f6d 5f63 7572 5f70 726f 6a3a 2074  from_cur_proj: t
-00005f10: 6573 7473 2074 6861 7420 7468 6520 7072  ests that the pr
-00005f20: 6f6a 6563 7473 2061 7265 0a20 2020 2020  ojects are.     
-00005f30: 2020 2020 2020 2020 2072 656d 6f76 6564           removed
-00005f40: 2066 726f 6d20 7468 6520 6c69 7374 206f   from the list o
-00005f50: 6620 6375 7272 656e 7420 7072 6f6a 6563  f current projec
-00005f60: 7473 0a20 2020 2020 2020 2020 2020 202d  ts.            -
-00005f70: 2074 6573 745f 7261 7069 645f 7365 6172   test_rapid_sear
-00005f80: 6368 3a20 7465 7374 7320 7468 6520 7261  ch: tests the ra
-00005f90: 7069 6420 7365 6172 6368 2062 6172 0a20  pid search bar. 
-00005fa0: 2020 2020 2020 2020 2020 202d 2074 6573             - tes
-00005fb0: 745f 7265 6d6f 7665 5f73 6361 6e3a 2074  t_remove_scan: t
-00005fc0: 6573 7473 2073 6361 6e73 2072 656d 6f76  ests scans remov
-00005fd0: 616c 2069 6e20 7468 6520 4461 7461 4272  al in the DataBr
-00005fe0: 6f77 7365 720a 2020 2020 2020 2020 2020  owser.          
-00005ff0: 2020 2d20 7465 7374 5f72 656d 6f76 655f    - test_remove_
-00006000: 7461 673a 2074 6573 7473 2074 6865 2070  tag: tests the p
-00006010: 6f70 7570 2072 656d 6f76 696e 6720 7573  opup removing us
-00006020: 6572 2074 6167 730a 2020 2020 2020 2020  er tags.        
-00006030: 2020 2020 2d20 7465 7374 5f72 6573 6574      - test_reset
-00006040: 5f63 656c 6c3a 2074 6573 7473 2074 6865  _cell: tests the
-00006050: 206d 6574 686f 6420 7265 7365 7474 696e   method resettin
-00006060: 6720 7468 6520 7365 6c65 6374 6564 0a20  g the selected. 
-00006070: 2020 2020 2020 2020 2020 2020 2063 656c               cel
-00006080: 6c73 0a20 2020 2020 2020 2020 2020 202d  ls.            -
-00006090: 2074 6573 745f 7265 7365 745f 636f 6c75   test_reset_colu
-000060a0: 6d6e 3a20 7465 7374 7320 7468 6520 6d65  mn: tests the me
-000060b0: 7468 6f64 2072 6573 6574 7469 6e67 2074  thod resetting t
-000060c0: 6865 2063 6f6c 756d 6e73 0a20 2020 2020  he columns.     
-000060d0: 2020 2020 2020 2020 2073 656c 6563 7465           selecte
-000060e0: 640a 2020 2020 2020 2020 2020 2020 2d20  d.            - 
-000060f0: 7465 7374 5f72 6573 6574 5f72 6f77 3a20  test_reset_row: 
-00006100: 7465 7374 2072 6f77 2072 6573 6574 0a20  test row reset. 
-00006110: 2020 2020 2020 2020 2020 202d 2074 6573             - tes
-00006120: 745f 7361 7665 5f70 726f 6a65 6374 3a20  t_save_project: 
-00006130: 7465 7374 206f 7065 6e69 6e67 2026 2073  test opening & s
-00006140: 6176 696e 6720 6f66 2061 2070 726f 6a65  aving of a proje
-00006150: 6374 0a20 2020 2020 2020 2020 2020 202d  ct.            -
-00006160: 2074 6573 745f 7365 6e64 5f64 6f63 5f74   test_send_doc_t
-00006170: 6f5f 7069 7065 6c69 6e65 5f6d 616e 6167  o_pipeline_manag
-00006180: 6572 3a20 7465 7374 7320 7468 6520 706f  er: tests the po
-00006190: 7075 7020 7365 6e64 696e 670a 2020 2020  pup sending.    
-000061a0: 2020 2020 2020 2020 2020 646f 6375 6d65            docume
-000061b0: 6e74 7320 746f 2074 6865 2070 6970 656c  nts to the pipel
-000061c0: 696e 6520 6d61 6e61 6765 720a 2020 2020  ine manager.    
-000061d0: 2020 2020 2020 2020 2d20 7465 7374 5f73          - test_s
-000061e0: 6574 5f76 616c 7565 3a20 7465 7374 7320  et_value: tests 
-000061f0: 7468 6520 7661 6c75 6573 206d 6f64 6966  the values modif
-00006200: 6963 6174 696f 6e73 0a20 2020 2020 2020  ications.       
-00006210: 2020 2020 202d 2074 6573 745f 7368 6f77       - test_show
-00006220: 5f62 7269 636b 5f68 6973 746f 7279 3a20  _brick_history: 
-00006230: 6f70 656e 7320 7468 6520 6869 7374 6f72  opens the histor
-00006240: 7920 706f 702d 7570 2066 6f72 0a20 2020  y pop-up for.   
-00006250: 2020 2020 2020 2020 2020 2073 6361 6e73             scans
-00006260: 2077 6974 6820 6869 7374 6f72 7920 7265   with history re
-00006270: 6c61 7465 6420 746f 2061 2062 7269 636b  lated to a brick
-00006280: 0a20 2020 2020 2020 2020 2020 202d 2074  .            - t
-00006290: 6573 745f 736f 7274 3a20 7465 7374 7320  est_sort: tests 
-000062a0: 7468 6520 736f 7274 696e 6720 696e 2074  the sorting in t
-000062b0: 6865 2044 6174 6142 726f 7773 6572 0a20  he DataBrowser. 
-000062c0: 2020 2020 2020 2020 2020 202d 2074 6573             - tes
-000062d0: 745f 7461 626c 655f 6461 7461 5f61 6464  t_table_data_add
-000062e0: 5f63 6f6c 756d 6e73 3a20 6164 6473 2074  _columns: adds t
-000062f0: 6167 2063 6f6c 756d 6e73 2074 6f20 7468  ag columns to th
-00006300: 6520 7461 626c 6520 6461 7461 0a20 2020  e table data.   
-00006310: 2020 2020 2020 2020 2020 2077 696e 646f             windo
-00006320: 770a 2020 2020 2020 2020 2020 2020 2d20  w.            - 
-00006330: 7465 7374 5f74 6162 6c65 5f64 6174 615f  test_table_data_
-00006340: 6170 7065 6e64 6978 3a20 6f70 656e 7320  appendix: opens 
-00006350: 6120 7072 6f6a 6563 7420 616e 6420 7465  a project and te
-00006360: 7374 7320 6d69 7363 656c 6c61 6e65 6f75  sts miscellaneou
-00006370: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
-00006380: 6d65 7468 6f64 7320 6f66 2074 6865 2074  methods of the t
-00006390: 6162 6c65 2064 6174 6120 7669 6577 2c20  able data view, 
-000063a0: 696e 2074 6865 2064 6174 6120 6272 6f77  in the data brow
-000063b0: 7365 720a 2020 2020 2020 2020 2020 2020  ser.            
-000063c0: 2d20 7465 7374 5f74 6162 6c65 5f64 6174  - test_table_dat
-000063d0: 615f 636f 6e74 6578 745f 6d65 6e75 3a20  a_context_menu: 
-000063e0: 7269 6768 7420 636c 6963 6b73 2061 2073  right clicks a s
-000063f0: 6361 6e20 746f 2073 686f 7720 7468 650a  can to show the.
-00006400: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00006410: 6e74 6578 7420 6d65 6e75 2074 6162 6c65  ntext menu table
-00006420: 2c20 616e 6420 6368 6f73 6573 206f 6e65  , and choses one
-00006430: 206f 7074 696f 6e0a 2020 2020 2020 2020   option.        
-00006440: 2020 2020 2d20 7465 7374 5f75 6e64 6f5f      - test_undo_
-00006450: 7265 646f 5f64 6174 6162 726f 7773 6572  redo_databrowser
-00006460: 3a20 7465 7374 7320 6461 7461 2062 726f  : tests data bro
-00006470: 7773 6572 2075 6e64 6f2f 7265 646f 0a20  wser undo/redo. 
-00006480: 2020 2020 2020 2020 2020 202d 2074 6573             - tes
-00006490: 745f 756e 6e61 6d65 645f 7072 6f6a 5f73  t_unnamed_proj_s
-000064a0: 6f66 745f 6f70 656e 3a20 7465 7374 7320  oft_open: tests 
-000064b0: 756e 6e61 6d65 6420 7072 6f6a 6563 740a  unnamed project.
-000064c0: 2020 2020 2020 2020 2020 2020 2020 6372                cr
-000064d0: 6561 7469 6f6e 2061 7420 736f 6674 7761  eation at softwa
-000064e0: 7265 206f 7065 6e69 6e67 0a20 2020 2020  re opening.     
-000064f0: 2020 2020 2020 202d 2074 6573 745f 7570         - test_up
-00006500: 6461 7465 5f64 6174 615f 6869 7374 6f72  date_data_histor
-00006510: 793a 2075 7064 6174 6573 2074 6865 2068  y: updates the h
-00006520: 6973 746f 7279 206f 6620 6461 7461 2074  istory of data t
-00006530: 6861 740a 2020 2020 2020 2020 2020 2020  hat.            
-00006540: 2020 6861 7665 2062 6565 6e20 7265 2d77    have been re-w
-00006550: 7269 7474 656e 0a20 2020 2020 2020 2020  ritten.         
-00006560: 2020 202d 2074 6573 745f 7570 6461 7465     - test_update
-00006570: 5f64 6566 6175 6c74 5f76 616c 7565 3a20  _default_value: 
-00006580: 7570 6461 7465 7320 7468 6520 7661 6c75  updates the valu
-00006590: 6573 2077 6865 6e20 6120 6c69 7374 0a20  es when a list. 
-000065a0: 2020 2020 2020 2020 2020 2020 206f 6620               of 
-000065b0: 6465 6661 756c 7420 7661 6c75 6573 2069  default values i
-000065c0: 7320 6372 6561 7465 640a 2020 2020 2020  s created.      
-000065d0: 2020 2020 2020 2d20 7465 7374 5f75 7469        - test_uti
-000065e0: 6c73 3a20 7465 7374 2074 6865 2075 7469  ls: test the uti
-000065f0: 6c73 2066 756e 6374 696f 6e73 0a20 2020  ls functions.   
-00006600: 2020 2020 2020 2020 202d 2074 6573 745f           - test_
-00006610: 7669 7375 616c 697a 6564 5f74 6167 733a  visualized_tags:
-00006620: 2074 6573 7473 2074 6865 2070 6f70 7570   tests the popup
-00006630: 206d 6f64 6966 7969 6e67 2074 6865 0a20   modifying the. 
-00006640: 2020 2020 2020 2020 2020 2020 2076 6973               vis
-00006650: 7561 6c69 7a65 6420 7461 6773 0a20 2020  ualized tags.   
-00006660: 2022 2222 0a0a 2020 2020 6465 6620 7465   """..    def te
-00006670: 7374 5f61 6464 5f70 6174 6828 7365 6c66  st_add_path(self
-00006680: 293a 0a20 2020 2020 2020 2022 2222 5472  ):.        """Tr
-00006690: 6965 7320 696d 706f 7274 2061 2064 6f63  ies import a doc
-000066a0: 756d 656e 7420 746f 2074 6865 2070 726f  ument to the pro
-000066b0: 6a65 6374 2e0a 0a20 2020 2020 2020 202d  ject...        -
-000066c0: 2054 6573 7473 3a20 4461 7461 4272 6f77   Tests: DataBrow
-000066d0: 7365 722e 6164 645f 7061 7468 2061 6e64  ser.add_path and
-000066e0: 2050 6f70 5570 4164 6450 6174 680a 0a20   PopUpAddPath.. 
-000066f0: 2020 2020 2020 202d 204d 6f63 6b73 3a20         - Mocks: 
-00006700: 7468 6520 6578 6563 7574 696f 6e20 6f66  the execution of
-00006710: 2051 4669 6c65 4469 616c 6f67 2061 6e64   QFileDialog and
-00006720: 2051 4d65 7373 6167 6542 6f78 0a20 2020   QMessageBox.   
-00006730: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
-00006740: 2020 2320 5365 7473 2073 686f 7274 6375    # Sets shortcu
-00006750: 7473 2066 6f72 206f 6674 656e 2075 7365  ts for often use
-00006760: 6420 6f62 6a65 6374 730a 2020 2020 2020  d objects.      
-00006770: 2020 7070 6c5f 6d61 6e61 6765 7220 3d20    ppl_manager = 
-00006780: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00006790: 2e70 6970 656c 696e 655f 6d61 6e61 6765  .pipeline_manage
-000067a0: 720a 2020 2020 2020 2020 7365 7373 696f  r.        sessio
-000067b0: 6e20 3d20 7070 6c5f 6d61 6e61 6765 722e  n = ppl_manager.
-000067c0: 7072 6f6a 6563 742e 7365 7373 696f 6e0a  project.session.
-000067d0: 2020 2020 2020 2020 7461 626c 655f 6461          table_da
-000067e0: 7461 203d 2073 656c 662e 6d61 696e 5f77  ta = self.main_w
-000067f0: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
-00006800: 6572 2e74 6162 6c65 5f64 6174 610a 0a20  er.table_data.. 
-00006810: 2020 2020 2020 2023 2043 7265 6174 6573         # Creates
-00006820: 2061 206e 6577 2070 726f 6a65 6374 2066   a new project f
-00006830: 6f6c 6465 7220 616e 6420 6164 6473 206f  older and adds o
-00006840: 6e65 2064 6f63 756d 656e 7420 746f 2074  ne document to t
-00006850: 6865 0a20 2020 2020 2020 2023 2070 726f  he.        # pro
-00006860: 6a65 6374 2c20 7365 7473 2074 6865 2070  ject, sets the p
-00006870: 6c75 6720 7661 6c75 6520 7468 6174 2069  lug value that i
-00006880: 7320 6164 6465 6420 746f 2074 6865 2064  s added to the d
-00006890: 6174 6162 6173 650a 2020 2020 2020 2020  atabase.        
-000068a0: 7072 6f6a 6563 745f 385f 7061 7468 203d  project_8_path =
-000068b0: 2073 656c 662e 6765 745f 6e65 775f 7465   self.get_new_te
-000068c0: 7374 5f70 726f 6a65 6374 2829 0a20 2020  st_project().   
-000068d0: 2020 2020 2070 706c 5f6d 616e 6167 6572       ppl_manager
-000068e0: 2e70 726f 6a65 6374 2e66 6f6c 6465 7220  .project.folder 
-000068f0: 3d20 7072 6f6a 6563 745f 385f 7061 7468  = project_8_path
-00006900: 0a20 2020 2020 2020 2066 6f6c 6465 7220  .        folder 
-00006910: 3d20 6f73 2e70 6174 682e 6a6f 696e 2870  = os.path.join(p
-00006920: 726f 6a65 6374 5f38 5f70 6174 682c 2022  roject_8_path, "
-00006930: 6461 7461 222c 2022 7261 775f 6461 7461  data", "raw_data
-00006940: 2229 0a20 2020 2020 2020 204e 4949 5f46  ").        NII_F
-00006950: 494c 455f 3120 3d20 280a 2020 2020 2020  ILE_1 = (.      
-00006960: 2020 2020 2020 2247 7565 7262 6574 2d43        "Guerbet-C
-00006970: 362d 3230 3134 2d52 6174 2d4b 3532 2d54  6-2014-Rat-K52-T
-00006980: 7562 6532 372d 3230 3134 2d30 322d 3134  ube27-2014-02-14
-00006990: 3130 3233 3137 2d30 342d 4733 5f22 0a20  102317-04-G3_". 
-000069a0: 2020 2020 2020 2020 2020 2022 4775 6572             "Guer
-000069b0: 6265 745f 4d44 4546 542d 4d44 4546 5470  bet_MDEFT-MDEFTp
-000069c0: 766d 2d30 3030 3934 305f 3830 302e 6e69  vm-000940_800.ni
-000069d0: 6922 0a20 2020 2020 2020 2029 0a20 2020  i".        ).   
-000069e0: 2020 2020 2044 4f43 554d 454e 545f 3120       DOCUMENT_1 
-000069f0: 3d20 6f73 2e70 6174 682e 6162 7370 6174  = os.path.abspat
-00006a00: 6828 6f73 2e70 6174 682e 6a6f 696e 2866  h(os.path.join(f
-00006a10: 6f6c 6465 722c 204e 4949 5f46 494c 455f  older, NII_FILE_
-00006a20: 3129 290a 0a20 2020 2020 2020 2023 204d  1))..        # M
-00006a30: 6f63 6b73 2074 6865 2065 7865 6375 7469  ocks the executi
-00006a40: 6f6e 206f 6620 6120 6d65 7373 6167 6520  on of a message 
-00006a50: 626f 780a 2020 2020 2020 2020 514d 6573  box.        QMes
-00006a60: 7361 6765 426f 782e 7368 6f77 203d 204d  sageBox.show = M
-00006a70: 6f63 6b28 290a 0a20 2020 2020 2020 2023  ock()..        #
-00006a80: 204f 7065 6e73 2074 6865 2027 6164 645f   Opens the 'add_
-00006a90: 7061 7468 2720 706f 702d 7570 0a20 2020  path' pop-up.   
-00006aa0: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
-00006ab0: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
-00006ac0: 6572 2e74 6162 6c65 5f64 6174 612e 6164  er.table_data.ad
-00006ad0: 645f 7061 7468 2829 0a20 2020 2020 2020  d_path().       
-00006ae0: 2061 6464 5f70 6174 6820 3d20 7365 6c66   add_path = self
-00006af0: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
-00006b00: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
-00006b10: 6461 7461 2e70 6f70 5f75 705f 6164 645f  data.pop_up_add_
-00006b20: 7061 7468 0a0a 2020 2020 2020 2020 2320  path..        # 
-00006b30: 5472 6965 7320 746f 2061 6464 2061 2064  Tries to add a d
-00006b40: 6f63 756d 656e 7420 7769 7468 6f75 7420  ocument without 
-00006b50: 6669 6c6c 696e 6720 7468 6520 706f 702d  filling the pop-
-00006b60: 7570 2066 6965 6c64 730a 2020 2020 2020  up fields.      
-00006b70: 2020 5154 6573 742e 6d6f 7573 6543 6c69    QTest.mouseCli
-00006b80: 636b 2861 6464 5f70 6174 682e 6f6b 5f62  ck(add_path.ok_b
-00006b90: 7574 746f 6e2c 2051 742e 4c65 6674 4275  utton, Qt.LeftBu
-00006ba0: 7474 6f6e 290a 2020 2020 2020 2020 7365  tton).        se
-00006bb0: 6c66 2e61 7373 6572 7445 7175 616c 2861  lf.assertEqual(a
-00006bc0: 6464 5f70 6174 682e 6d73 672e 7465 7874  dd_path.msg.text
-00006bd0: 2829 2c20 2249 6e76 616c 6964 2061 7267  (), "Invalid arg
-00006be0: 756d 656e 7473 2229 0a0a 2020 2020 2020  uments")..      
-00006bf0: 2020 2320 5472 6965 7320 746f 2061 6464    # Tries to add
-00006c00: 2069 6e76 616c 6964 2064 6f63 756d 656e   invalid documen
-00006c10: 7420 7061 7468 0a20 2020 2020 2020 2061  t path.        a
-00006c20: 6464 5f70 6174 682e 6669 6c65 5f6c 696e  dd_path.file_lin
-00006c30: 655f 6564 6974 2e73 6574 5465 7874 2844  e_edit.setText(D
-00006c40: 4f43 554d 454e 545f 3120 2b20 225f 2229  OCUMENT_1 + "_")
-00006c50: 0a20 2020 2020 2020 2061 6464 5f70 6174  .        add_pat
-00006c60: 682e 7479 7065 5f6c 696e 655f 6564 6974  h.type_line_edit
-00006c70: 2e73 6574 5465 7874 2854 5950 455f 4e49  .setText(TYPE_NI
-00006c80: 4929 0a20 2020 2020 2020 2051 5465 7374  I).        QTest
-00006c90: 2e6d 6f75 7365 436c 6963 6b28 6164 645f  .mouseClick(add_
-00006ca0: 7061 7468 2e6f 6b5f 6275 7474 6f6e 2c20  path.ok_button, 
-00006cb0: 5174 2e4c 6566 7442 7574 746f 6e29 0a20  Qt.LeftButton). 
-00006cc0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00006cd0: 7274 4571 7561 6c28 6164 645f 7061 7468  rtEqual(add_path
-00006ce0: 2e6d 7367 2e74 6578 7428 292c 2022 496e  .msg.text(), "In
-00006cf0: 7661 6c69 6420 6172 6775 6d65 6e74 7322  valid arguments"
-00006d00: 290a 0a20 2020 2020 2020 2023 2041 6464  )..        # Add
-00006d10: 7320 6120 7661 6c69 6420 646f 6375 6d65  s a valid docume
-00006d20: 6e74 2070 6174 680a 2020 2020 2020 2020  nt path.        
-00006d30: 6164 645f 7061 7468 2e66 696c 655f 6c69  add_path.file_li
-00006d40: 6e65 5f65 6469 742e 7365 7454 6578 7428  ne_edit.setText(
-00006d50: 444f 4355 4d45 4e54 5f31 290a 2020 2020  DOCUMENT_1).    
-00006d60: 2020 2020 6164 645f 7061 7468 2e74 7970      add_path.typ
-00006d70: 655f 6c69 6e65 5f65 6469 742e 7365 7454  e_line_edit.setT
-00006d80: 6578 7428 5459 5045 5f4e 4949 290a 2020  ext(TYPE_NII).  
-00006d90: 2020 2020 2020 5154 6573 742e 6d6f 7573        QTest.mous
-00006da0: 6543 6c69 636b 2861 6464 5f70 6174 682e  eClick(add_path.
-00006db0: 6f6b 5f62 7574 746f 6e2c 2051 742e 4c65  ok_button, Qt.Le
-00006dc0: 6674 4275 7474 6f6e 290a 0a20 2020 2020  ftButton)..     
-00006dd0: 2020 2023 2041 7373 6572 7473 2074 6861     # Asserts tha
-00006de0: 7420 7468 6520 646f 6375 6d65 6e74 2077  t the document w
-00006df0: 6173 2061 6464 6564 2069 6e74 6f20 7468  as added into th
-00006e00: 6520 6461 7461 2062 726f 7773 6572 0a20  e data browser. 
-00006e10: 2020 2020 2020 2023 2041 2072 6567 756c         # A regul
-00006e20: 6172 2027 2e73 706c 6974 2827 2f27 2927  ar '.split('/')'
-00006e30: 2077 696c 6c20 6e6f 7420 776f 726b 2069   will not work i
-00006e40: 6e20 5769 6e64 6f77 7320 4f53 0a20 2020  n Windows OS.   
-00006e50: 2020 2020 2066 696c 656e 616d 6520 3d20       filename = 
-00006e60: 6f73 2e70 6174 682e 7370 6c69 7428 0a20  os.path.split(. 
-00006e70: 2020 2020 2020 2020 2020 2073 6573 7369             sessi
-00006e80: 6f6e 2e67 6574 5f64 6f63 756d 656e 7473  on.get_documents
-00006e90: 5f6e 616d 6573 2843 4f4c 4c45 4354 494f  _names(COLLECTIO
-00006ea0: 4e5f 4355 5252 454e 5429 5b30 5d0a 2020  N_CURRENT)[0].  
-00006eb0: 2020 2020 2020 295b 2d31 5d0a 2020 2020        )[-1].    
-00006ec0: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
-00006ed0: 7275 6528 6669 6c65 6e61 6d65 2069 6e20  rue(filename in 
-00006ee0: 444f 4355 4d45 4e54 5f31 290a 0a20 2020  DOCUMENT_1)..   
-00006ef0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00006f00: 4571 7561 6c28 7461 626c 655f 6461 7461  Equal(table_data
-00006f10: 2e72 6f77 436f 756e 7428 292c 2031 290a  .rowCount(), 1).
-00006f20: 0a20 2020 2020 2020 2023 204d 6f63 6b73  .        # Mocks
-00006f30: 2074 6865 2065 7865 6375 7469 6f6e 206f   the execution o
-00006f40: 6620 6669 6c65 2064 6961 6c6f 6720 626f  f file dialog bo
-00006f50: 7820 616e 6420 6669 6e64 7320 7468 6520  x and finds the 
-00006f60: 6669 6c65 2074 7970 650a 2020 2020 2020  file type.      
-00006f70: 2020 666f 7220 6578 7420 696e 205b 226e    for ext in ["n
-00006f80: 6969 222c 2022 6d61 7422 2c20 2274 7874  ii", "mat", "txt
-00006f90: 225d 3a0a 2020 2020 2020 2020 2020 2020  "]:.            
-00006fa0: 5146 696c 6544 6961 6c6f 672e 6765 744f  QFileDialog.getO
-00006fb0: 7065 6e46 696c 654e 616d 6520 3d20 4d6f  penFileName = Mo
-00006fc0: 636b 2872 6574 7572 6e5f 7661 6c75 653d  ck(return_value=
-00006fd0: 5b22 6669 6c65 2e22 202b 2065 7874 5d29  ["file." + ext])
-00006fe0: 0a20 2020 2020 2020 2020 2020 2061 6464  .            add
-00006ff0: 5f70 6174 682e 6669 6c65 5f74 6f5f 6368  _path.file_to_ch
-00007000: 6f6f 7365 2829 0a0a 2020 2020 2020 2020  oose()..        
-00007010: 2320 4164 6473 2061 2064 6f63 756d 656e  # Adds a documen
-00007020: 7420 696e 746f 2074 6865 2064 6174 6162  t into the datab
-00007030: 6173 6520 616e 6420 7472 6965 7320 746f  ase and tries to
-00007040: 2073 6176 6520 7468 6520 7361 6d65 0a20   save the same. 
-00007050: 2020 2020 2020 2023 206f 6e65 206f 6e63         # one onc
-00007060: 6520 6167 6169 6e0a 2020 2020 2020 2020  e again.        
-00007070: 7365 6c66 2e70 726f 6a65 6374 2e73 6573  self.project.ses
-00007080: 7369 6f6e 2e61 6464 5f64 6f63 756d 656e  sion.add_documen
-00007090: 7428 434f 4c4c 4543 5449 4f4e 5f43 5552  t(COLLECTION_CUR
-000070a0: 5245 4e54 2c20 444f 4355 4d45 4e54 5f31  RENT, DOCUMENT_1
-000070b0: 290a 2020 2020 2020 2020 6164 645f 7061  ).        add_pa
-000070c0: 7468 2e66 696c 655f 6c69 6e65 5f65 6469  th.file_line_edi
-000070d0: 742e 7365 7454 6578 7428 444f 4355 4d45  t.setText(DOCUME
-000070e0: 4e54 5f31 290a 2020 2020 2020 2020 6164  NT_1).        ad
-000070f0: 645f 7061 7468 2e73 6176 655f 7061 7468  d_path.save_path
-00007100: 2829 0a0a 2020 2020 6465 6620 7465 7374  ()..    def test
-00007110: 5f61 6464 5f74 6167 2873 656c 6629 3a0a  _add_tag(self):.
-00007120: 2020 2020 2020 2020 2222 2254 6573 7473          """Tests
-00007130: 2074 6865 2070 6f70 2d75 7020 6164 6469   the pop-up addi
-00007140: 6e67 2061 2074 6167 2e22 2222 0a0a 2020  ng a tag."""..  
-00007150: 2020 2020 2020 7072 6f6a 6563 745f 385f        project_8_
-00007160: 7061 7468 203d 2073 656c 662e 6765 745f  path = self.get_
-00007170: 6e65 775f 7465 7374 5f70 726f 6a65 6374  new_test_project
-00007180: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
-00007190: 6d61 696e 5f77 696e 646f 772e 7377 6974  main_window.swit
-000071a0: 6368 5f70 726f 6a65 6374 2870 726f 6a65  ch_project(proje
-000071b0: 6374 5f38 5f70 6174 682c 2022 7072 6f6a  ct_8_path, "proj
-000071c0: 6563 745f 3822 290a 0a20 2020 2020 2020  ect_8")..       
-000071d0: 2023 204d 6f63 6b73 2074 6865 2065 7865   # Mocks the exe
-000071e0: 6375 7469 6f6e 206f 6620 6120 6469 616c  cution of a dial
-000071f0: 6f67 2062 6f78 2061 6e64 2063 6c69 636b  og box and click
-00007200: 696e 6720 636c 6f73 650a 2020 2020 2020  ing close.      
-00007210: 2020 514d 6573 7361 6765 426f 782e 6578    QMessageBox.ex
-00007220: 6563 203d 206c 616d 6264 6120 7365 6c66  ec = lambda self
-00007230: 5f2c 202a 6172 6773 3a20 7365 6c66 5f2e  _, *args: self_.
-00007240: 636c 6f73 6528 290a 0a20 2020 2020 2020  close()..       
-00007250: 2023 2054 6573 7469 6e67 2077 6974 686f   # Testing witho
-00007260: 7574 2074 6167 206e 616d 650a 2020 2020  ut tag name.    
-00007270: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
-00007280: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
-00007290: 722e 6164 645f 7461 675f 6163 7469 6f6e  r.add_tag_action
-000072a0: 2e74 7269 6767 6572 2829 0a20 2020 2020  .trigger().     
-000072b0: 2020 2061 6464 5f74 6167 203d 2073 656c     add_tag = sel
-000072c0: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
-000072d0: 7461 5f62 726f 7773 6572 2e70 6f70 5f75  ta_browser.pop_u
-000072e0: 705f 6164 645f 7461 670a 2020 2020 2020  p_add_tag.      
-000072f0: 2020 2320 5154 696d 6572 2e73 696e 676c    # QTimer.singl
-00007300: 6553 686f 7428 3130 3030 2c20 7365 6c66  eShot(1000, self
-00007310: 2e65 7865 6375 7465 5f51 4d65 7373 6167  .execute_QMessag
-00007320: 6542 6f78 5f63 6c69 636b 436c 6f73 6529  eBox_clickClose)
-00007330: 0a20 2020 2020 2020 2051 5465 7374 2e6d  .        QTest.m
-00007340: 6f75 7365 436c 6963 6b28 6164 645f 7461  ouseClick(add_ta
-00007350: 672e 7075 7368 5f62 7574 746f 6e5f 6f6b  g.push_button_ok
-00007360: 2c20 5174 2e4c 6566 7442 7574 746f 6e29  , Qt.LeftButton)
-00007370: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00007380: 7365 7274 4571 7561 6c28 6164 645f 7461  sertEqual(add_ta
-00007390: 672e 6d73 672e 7465 7874 2829 2c20 2254  g.msg.text(), "T
-000073a0: 6865 2074 6167 206e 616d 6520 6361 6e6e  he tag name cann
-000073b0: 6f74 2062 6520 656d 7074 7922 290a 0a20  ot be empty").. 
-000073c0: 2020 2020 2020 2051 4170 706c 6963 6174         QApplicat
-000073d0: 696f 6e2e 7072 6f63 6573 7345 7665 6e74  ion.processEvent
-000073e0: 7328 290a 0a20 2020 2020 2020 2023 2054  s()..        # T
-000073f0: 6573 7469 6e67 2077 6974 6820 7461 6720  esting with tag 
-00007400: 6e61 6d65 2061 6c72 6561 6479 2065 7869  name already exi
-00007410: 7374 696e 670a 2020 2020 2020 2020 6164  sting.        ad
-00007420: 645f 7461 672e 7465 7874 5f65 6469 745f  d_tag.text_edit_
-00007430: 7461 675f 6e61 6d65 2e73 6574 5465 7874  tag_name.setText
-00007440: 2822 5479 7065 2229 0a20 2020 2020 2020  ("Type").       
-00007450: 2023 2051 5469 6d65 722e 7369 6e67 6c65   # QTimer.single
-00007460: 5368 6f74 2831 3030 302c 2073 656c 662e  Shot(1000, self.
-00007470: 6578 6563 7574 655f 514d 6573 7361 6765  execute_QMessage
-00007480: 426f 785f 636c 6963 6b43 6c6f 7365 290a  Box_clickClose).
-00007490: 2020 2020 2020 2020 5154 6573 742e 6d6f          QTest.mo
-000074a0: 7573 6543 6c69 636b 2861 6464 5f74 6167  useClick(add_tag
-000074b0: 2e70 7573 685f 6275 7474 6f6e 5f6f 6b2c  .push_button_ok,
-000074c0: 2051 742e 4c65 6674 4275 7474 6f6e 290a   Qt.LeftButton).
-000074d0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-000074e0: 6572 7445 7175 616c 2861 6464 5f74 6167  ertEqual(add_tag
-000074f0: 2e6d 7367 2e74 6578 7428 292c 2022 5468  .msg.text(), "Th
-00007500: 6973 2074 6167 206e 616d 6520 616c 7265  is tag name alre
-00007510: 6164 7920 6578 6973 7473 2229 0a0a 2020  ady exists")..  
-00007520: 2020 2020 2020 5141 7070 6c69 6361 7469        QApplicati
-00007530: 6f6e 2e70 726f 6365 7373 4576 656e 7473  on.processEvents
-00007540: 2829 0a0a 2020 2020 2020 2020 2320 5465  ()..        # Te
-00007550: 7374 696e 6720 7769 7468 2077 726f 6e67  sting with wrong
-00007560: 2074 7970 650a 2020 2020 2020 2020 6164   type.        ad
-00007570: 645f 7461 672e 7465 7874 5f65 6469 745f  d_tag.text_edit_
-00007580: 7461 675f 6e61 6d65 2e73 6574 5465 7874  tag_name.setText
-00007590: 2822 5465 7374 2229 0a20 2020 2020 2020  ("Test").       
-000075a0: 2061 6464 5f74 6167 2e63 6f6d 626f 5f62   add_tag.combo_b
-000075b0: 6f78 5f74 7970 652e 7365 7443 7572 7265  ox_type.setCurre
-000075c0: 6e74 5465 7874 2846 4945 4c44 5f54 5950  ntText(FIELD_TYP
-000075d0: 455f 494e 5445 4745 5229 0a20 2020 2020  E_INTEGER).     
-000075e0: 2020 2061 6464 5f74 6167 2e74 7970 6520     add_tag.type 
-000075f0: 3d20 4649 454c 445f 5459 5045 5f49 4e54  = FIELD_TYPE_INT
-00007600: 4547 4552 0a20 2020 2020 2020 2061 6464  EGER.        add
-00007610: 5f74 6167 2e74 6578 745f 6564 6974 5f64  _tag.text_edit_d
-00007620: 6566 6175 6c74 5f76 616c 7565 2e73 6574  efault_value.set
-00007630: 5465 7874 2822 5368 6f75 6c64 2062 6520  Text("Should be 
-00007640: 696e 7465 6765 7222 290a 2020 2020 2020  integer").      
-00007650: 2020 2320 5154 696d 6572 2e73 696e 676c    # QTimer.singl
-00007660: 6553 686f 7428 3130 3030 2c20 7365 6c66  eShot(1000, self
-00007670: 2e65 7865 6375 7465 5f51 4d65 7373 6167  .execute_QMessag
-00007680: 6542 6f78 5f63 6c69 636b 436c 6f73 6529  eBox_clickClose)
-00007690: 0a20 2020 2020 2020 2051 5465 7374 2e6d  .        QTest.m
-000076a0: 6f75 7365 436c 6963 6b28 6164 645f 7461  ouseClick(add_ta
-000076b0: 672e 7075 7368 5f62 7574 746f 6e5f 6f6b  g.push_button_ok
-000076c0: 2c20 5174 2e4c 6566 7442 7574 746f 6e29  , Qt.LeftButton)
-000076d0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-000076e0: 7365 7274 4571 7561 6c28 6164 645f 7461  sertEqual(add_ta
-000076f0: 672e 6d73 672e 7465 7874 2829 2c20 2249  g.msg.text(), "I
-00007700: 6e76 616c 6964 2064 6566 6175 6c74 2076  nvalid default v
-00007710: 616c 7565 2229 0a0a 2020 2020 2020 2020  alue")..        
-00007720: 5141 7070 6c69 6361 7469 6f6e 2e70 726f  QApplication.pro
-00007730: 6365 7373 4576 656e 7473 2829 0a0a 2020  cessEvents()..  
-00007740: 2020 2020 2020 2320 5465 7374 696e 6720        # Testing 
-00007750: 7768 656e 2065 7665 7279 7468 696e 6720  when everything 
-00007760: 6973 206f 6b0a 2020 2020 2020 2020 6164  is ok.        ad
-00007770: 645f 7461 672e 7465 7874 5f65 6469 745f  d_tag.text_edit_
-00007780: 7461 675f 6e61 6d65 2e73 6574 5465 7874  tag_name.setText
-00007790: 2822 5465 7374 2229 0a20 2020 2020 2020  ("Test").       
-000077a0: 2061 6464 5f74 6167 2e74 6578 745f 6564   add_tag.text_ed
-000077b0: 6974 5f64 6566 6175 6c74 5f76 616c 7565  it_default_value
-000077c0: 2e73 6574 5465 7874 2822 6465 665f 7661  .setText("def_va
-000077d0: 6c75 6522 290a 2020 2020 2020 2020 6164  lue").        ad
-000077e0: 645f 7461 672e 7479 7065 203d 2046 4945  d_tag.type = FIE
-000077f0: 4c44 5f54 5950 455f 5354 5249 4e47 0a0a  LD_TYPE_STRING..
-00007800: 2020 2020 2020 2020 5154 6573 742e 7157          QTest.qW
-00007810: 6169 7428 3530 3029 0a0a 2020 2020 2020  ait(500)..      
-00007820: 2020 5154 6573 742e 6d6f 7573 6543 6c69    QTest.mouseCli
-00007830: 636b 2861 6464 5f74 6167 2e70 7573 685f  ck(add_tag.push_
-00007840: 6275 7474 6f6e 5f6f 6b2c 2051 742e 4c65  button_ok, Qt.Le
-00007850: 6674 4275 7474 6f6e 290a 2020 2020 2020  ftButton).      
-00007860: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
-00007870: 6528 0a20 2020 2020 2020 2020 2020 2022  e(.            "
-00007880: 5465 7374 220a 2020 2020 2020 2020 2020  Test".          
-00007890: 2020 696e 2073 656c 662e 6d61 696e 5f77    in self.main_w
-000078a0: 696e 646f 772e 7072 6f6a 6563 742e 7365  indow.project.se
-000078b0: 7373 696f 6e2e 6765 745f 6669 656c 6473  ssion.get_fields
-000078c0: 5f6e 616d 6573 280a 2020 2020 2020 2020  _names(.        
-000078d0: 2020 2020 2020 2020 434f 4c4c 4543 5449          COLLECTI
-000078e0: 4f4e 5f43 5552 5245 4e54 0a20 2020 2020  ON_CURRENT.     
-000078f0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00007900: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
-00007910: 6173 7365 7274 5472 7565 280a 2020 2020  assertTrue(.    
-00007920: 2020 2020 2020 2020 2254 6573 7422 0a20          "Test". 
-00007930: 2020 2020 2020 2020 2020 2069 6e20 7365             in se
-00007940: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
-00007950: 726f 6a65 6374 2e73 6573 7369 6f6e 2e67  roject.session.g
-00007960: 6574 5f66 6965 6c64 735f 6e61 6d65 7328  et_fields_names(
+000045a0: 2020 7374 6174 6520 3d20 280a 2020 2020    state = (.    
+000045b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000045c0: 2020 2020 2020 2020 7072 6f63 5f6c 6962          proc_lib
+000045d0: 5f76 6965 772e 746f 5f64 6963 7428 290a  _view.to_dict().
+000045e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000045f0: 2020 2020 2020 2020 2020 2020 2e67 6574              .get
+00004600: 2822 6e69 7079 7065 2229 0a20 2020 2020  ("nipype").     
+00004610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004620: 2020 2020 2020 202e 6765 7428 2269 6e74         .get("int
+00004630: 6572 6661 6365 7322 290a 2020 2020 2020  erfaces").      
+00004640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004650: 2020 2020 2020 2e67 6574 2822 4461 7461        .get("Data
+00004660: 4772 6162 6265 7222 290a 2020 2020 2020  Grabber").      
+00004670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004680: 2020 290a 0a20 2020 2020 2020 2020 2020    )..           
+00004690: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+000046a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000046b0: 2020 2020 2020 2073 7461 7465 203d 2022         state = "
+000046c0: 6e69 7079 7065 2e69 6e74 6572 6661 6365  nipype.interface
+000046d0: 7322 0a0a 2020 2020 2020 2020 2020 2020  s"..            
+000046e0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+000046f0: 2020 2020 2020 2020 2020 2020 2020 7374                st
+00004700: 6174 6520 3d20 226e 6970 7970 6522 0a0a  ate = "nipype"..
+00004710: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00004720: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00004730: 2020 7374 6174 6520 3d20 4e6f 6e65 0a0a    state = None..
+00004740: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00004750: 2020 2020 2020 2020 2020 7374 6174 6520            state 
+00004760: 3d20 4e6f 6e65 0a0a 2020 2020 2020 2020  = None..        
+00004770: 7265 7475 726e 2073 7461 7465 0a0a 2020  return state..  
+00004780: 2020 6465 6620 7072 6f63 6c69 6276 6965    def proclibvie
+00004790: 775f 6e69 7079 7065 5f72 6573 6574 5f73  w_nipype_reset_s
+000047a0: 7461 7465 280a 2020 2020 2020 2020 7365  tate(.        se
+000047b0: 6c66 2c20 6d61 696e 5f77 696e 646f 772c  lf, main_window,
+000047c0: 2070 706c 5f6d 616e 6167 6572 2c20 696e   ppl_manager, in
+000047d0: 6974 5f73 7461 7465 0a20 2020 2029 3a0a  it_state.    ):.
+000047e0: 2020 2020 2020 2020 2222 2252 6573 6574          """Reset
+000047f0: 2074 6865 2070 726f 6365 7373 206c 6962   the process lib
+00004800: 7261 7279 2076 6965 7720 746f 2069 7473  rary view to its
+00004810: 2069 6e69 7469 616c 2073 7461 7465 2e0a   initial state..
+00004820: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00004830: 6d61 696e 5f77 696e 646f 773a 2074 6865  main_window: the
+00004840: 206d 6169 6e20 7769 6e64 6f77 206f 626a   main window obj
+00004850: 6563 740a 2020 2020 2020 2020 3a70 6172  ect.        :par
+00004860: 616d 2070 706c 5f6d 616e 6167 6572 3a20  am ppl_manager: 
+00004870: 7468 6520 7069 7065 6c69 6e65 206d 616e  the pipeline man
+00004880: 6167 6572 206f 626a 6563 740a 2020 2020  ager object.    
+00004890: 2020 2020 3a70 6172 616d 2069 6e69 745f      :param init_
+000048a0: 7374 6174 653a 2074 6865 2069 6e69 7469  state: the initi
+000048b0: 616c 2073 7461 7465 206f 6620 6e69 7079  al state of nipy
+000048c0: 7065 2070 726f 635f 6c69 625f 7669 6577  pe proc_lib_view
+000048d0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000048e0: 2020 2020 2020 2020 2020 2020 202d 204e               - N
+000048f0: 6f6e 653a 2070 726f 635f 6c69 625f 7669  one: proc_lib_vi
+00004900: 6577 2069 7320 656d 7074 7920 6f72 206e  ew is empty or n
+00004910: 6970 7970 6520 6973 206e 6f74 0a20 2020  ipype is not.   
+00004920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004940: 6c6f 6164 6564 2e0a 2020 2020 2020 2020  loaded..        
+00004950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004960: 2020 202d 2027 6e69 7079 7065 273a 2027     - 'nipype': '
+00004970: 6e69 7079 7065 2720 6973 206c 6f61 6465  nipype' is loade
+00004980: 6420 6275 7420 2769 6e74 6572 6661 6365  d but 'interface
+00004990: 7327 206e 6f74 2e0a 2020 2020 2020 2020  s' not..        
+000049a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000049b0: 2020 202d 2027 6e69 7079 7065 2e69 6e74     - 'nipype.int
+000049c0: 6572 6661 6365 273a 2027 6e69 7079 7065  erface': 'nipype
+000049d0: 2e69 6e74 6572 6661 6365 2720 6973 206c  .interface' is l
+000049e0: 6f61 6465 640a 2020 2020 2020 2020 2020  oaded.          
+000049f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004a10: 2020 2020 2020 2062 7574 2027 4461 7461         but 'Data
+00004a20: 4772 6162 6265 7227 206e 6f74 2e0a 2020  Grabber' not..  
+00004a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004a40: 2020 2020 2020 2020 202d 2027 7072 6f63           - 'proc
+00004a50: 6573 735f 656e 6162 6c65 6427 3a20 276e  ess_enabled': 'n
+00004a60: 6970 7970 652e 696e 7465 7266 6163 652e  ipype.interface.
+00004a70: 4461 7461 4772 6162 6265 7227 0a20 2020  DataGrabber'.   
+00004a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004aa0: 2020 2020 2020 2020 2020 2020 2069 7320               is 
+00004ab0: 6c6f 6164 6564 2e0a 2020 2020 2020 2020  loaded..        
+00004ac0: 2222 220a 2020 2020 2020 2020 6d61 696e  """.        main
+00004ad0: 5f77 696e 646f 772e 7061 636b 6167 655f  _window.package_
+00004ae0: 6c69 6272 6172 795f 706f 705f 7570 2829  library_pop_up()
+00004af0: 0a20 2020 2020 2020 2070 6b67 5f6c 6962  .        pkg_lib
+00004b00: 5f77 696e 646f 7720 3d20 6d61 696e 5f77  _window = main_w
+00004b10: 696e 646f 772e 706f 705f 7570 5f70 6163  indow.pop_up_pac
+00004b20: 6b61 6765 5f6c 6962 7261 7279 0a20 2020  kage_library.   
+00004b30: 2020 2020 2070 706c 5f6d 616e 6167 6572       ppl_manager
+00004b40: 2e70 726f 6365 7373 4c69 6272 6172 792e  .processLibrary.
+00004b50: 7072 6f63 6573 735f 6c69 6272 6172 792e  process_library.
+00004b60: 706b 675f 6c69 6272 6172 792e 6973 5f70  pkg_library.is_p
+00004b70: 6174 6820 3d20 4661 6c73 650a 0a20 2020  ath = False..   
+00004b80: 2020 2020 2069 6620 696e 6974 5f73 7461       if init_sta
+00004b90: 7465 2069 7320 4e6f 6e65 3a0a 2020 2020  te is None:.    
+00004ba0: 2020 2020 2020 2020 706b 675f 6c69 625f          pkg_lib_
+00004bb0: 7769 6e64 6f77 2e6c 696e 655f 6564 6974  window.line_edit
+00004bc0: 2e73 6574 5465 7874 2822 6e69 7079 7065  .setText("nipype
+00004bd0: 2229 0a20 2020 2020 2020 2020 2020 2023  ").            #
+00004be0: 2043 6c69 636b 7320 6f6e 2072 656d 6f76   Clicks on remov
+00004bf0: 6520 7061 636b 6167 650a 2020 2020 2020  e package.      
+00004c00: 2020 2020 2020 706b 675f 6c69 625f 7769        pkg_lib_wi
+00004c10: 6e64 6f77 2e6c 6179 6f75 7428 292e 6368  ndow.layout().ch
+00004c20: 696c 6472 656e 2829 5b30 5d2e 6c61 796f  ildren()[0].layo
+00004c30: 7574 2829 2e63 6869 6c64 7265 6e28 295b  ut().children()[
+00004c40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004c50: 2033 0a20 2020 2020 2020 2020 2020 205d   3.            ]
+00004c60: 2e69 7465 6d41 7428 3129 2e77 6964 6765  .itemAt(1).widge
+00004c70: 7428 292e 636c 6963 6b65 642e 656d 6974  t().clicked.emit
+00004c80: 2829 0a0a 2020 2020 2020 2020 656c 6966  ()..        elif
+00004c90: 2069 6e69 745f 7374 6174 6520 3d3d 2022   init_state == "
+00004ca0: 6e69 7079 7065 223a 0a20 2020 2020 2020  nipype":.       
+00004cb0: 2020 2020 2070 6b67 5f6c 6962 5f77 696e       pkg_lib_win
+00004cc0: 646f 772e 6c69 6e65 5f65 6469 742e 7365  dow.line_edit.se
+00004cd0: 7454 6578 7428 226e 6970 7970 652e 696e  tText("nipype.in
+00004ce0: 7465 7266 6163 6573 2229 0a20 2020 2020  terfaces").     
+00004cf0: 2020 2020 2020 2023 2043 6c69 636b 7320         # Clicks 
+00004d00: 6f6e 2072 656d 6f76 6520 7061 636b 6167  on remove packag
+00004d10: 650a 2020 2020 2020 2020 2020 2020 706b  e.            pk
+00004d20: 675f 6c69 625f 7769 6e64 6f77 2e6c 6179  g_lib_window.lay
+00004d30: 6f75 7428 292e 6368 696c 6472 656e 2829  out().children()
+00004d40: 5b30 5d2e 6c61 796f 7574 2829 2e63 6869  [0].layout().chi
+00004d50: 6c64 7265 6e28 295b 0a20 2020 2020 2020  ldren()[.       
+00004d60: 2020 2020 2020 2020 2033 0a20 2020 2020           3.     
+00004d70: 2020 2020 2020 205d 2e69 7465 6d41 7428         ].itemAt(
+00004d80: 3129 2e77 6964 6765 7428 292e 636c 6963  1).widget().clic
+00004d90: 6b65 642e 656d 6974 2829 0a0a 2020 2020  ked.emit()..    
+00004da0: 2020 2020 656c 6966 2069 6e69 745f 7374      elif init_st
+00004db0: 6174 6520 3d3d 2022 6e69 7079 7065 2e69  ate == "nipype.i
+00004dc0: 6e74 6572 6661 6365 7322 3a0a 2020 2020  nterfaces":.    
+00004dd0: 2020 2020 2020 2020 706b 675f 6c69 625f          pkg_lib_
+00004de0: 7769 6e64 6f77 2e6c 696e 655f 6564 6974  window.line_edit
+00004df0: 2e73 6574 5465 7874 2822 6e69 7079 7065  .setText("nipype
+00004e00: 2e69 6e74 6572 6661 6365 732e 4461 7461  .interfaces.Data
+00004e10: 4772 6162 6265 7222 290a 2020 2020 2020  Grabber").      
+00004e20: 2020 2020 2020 2320 436c 6963 6b73 206f        # Clicks o
+00004e30: 6e20 7265 6d6f 7665 2070 6163 6b61 6765  n remove package
+00004e40: 0a20 2020 2020 2020 2020 2020 2070 6b67  .            pkg
+00004e50: 5f6c 6962 5f77 696e 646f 772e 6c61 796f  _lib_window.layo
+00004e60: 7574 2829 2e63 6869 6c64 7265 6e28 295b  ut().children()[
+00004e70: 305d 2e6c 6179 6f75 7428 292e 6368 696c  0].layout().chil
+00004e80: 6472 656e 2829 5b0a 2020 2020 2020 2020  dren()[.        
+00004e90: 2020 2020 2020 2020 330a 2020 2020 2020          3.      
+00004ea0: 2020 2020 2020 5d2e 6974 656d 4174 2831        ].itemAt(1
+00004eb0: 292e 7769 6467 6574 2829 2e63 6c69 636b  ).widget().click
+00004ec0: 6564 2e65 6d69 7428 290a 0a20 2020 2020  ed.emit()..     
+00004ed0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00004ee0: 2020 2020 2070 6b67 5f6c 6962 5f77 696e       pkg_lib_win
+00004ef0: 646f 772e 6c69 6e65 5f65 6469 742e 7365  dow.line_edit.se
+00004f00: 7454 6578 7428 226e 6970 7970 652e 696e  tText("nipype.in
+00004f10: 7465 7266 6163 6573 2e44 6174 6147 7261  terfaces.DataGra
+00004f20: 6262 6572 2229 0a20 2020 2020 2020 2020  bber").         
+00004f30: 2020 2023 2043 6c69 636b 7320 6f6e 2061     # Clicks on a
+00004f40: 6464 2070 6163 6b61 6765 0a20 2020 2020  dd package.     
+00004f50: 2020 2020 2020 2070 6b67 5f6c 6962 5f77         pkg_lib_w
+00004f60: 696e 646f 772e 6c61 796f 7574 2829 2e63  indow.layout().c
+00004f70: 6869 6c64 7265 6e28 295b 305d 2e6c 6179  hildren()[0].lay
+00004f80: 6f75 7428 292e 6368 696c 6472 656e 2829  out().children()
+00004f90: 5b0a 2020 2020 2020 2020 2020 2020 2020  [.              
+00004fa0: 2020 330a 2020 2020 2020 2020 2020 2020    3.            
+00004fb0: 5d2e 6974 656d 4174 2830 292e 7769 6467  ].itemAt(0).widg
+00004fc0: 6574 2829 2e63 6c69 636b 6564 2e65 6d69  et().clicked.emi
+00004fd0: 7428 290a 0a20 2020 2020 2020 2070 6b67  t()..        pkg
+00004fe0: 5f6c 6962 5f77 696e 646f 772e 6f6b 5f63  _lib_window.ok_c
+00004ff0: 6c69 636b 6564 2829 0a0a 2020 2020 6465  licked()..    de
+00005000: 6620 7265 7374 6172 745f 4d49 4128 7365  f restart_MIA(se
+00005010: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
+00005020: 5265 7374 6172 7473 204d 4941 2077 6974  Restarts MIA wit
+00005030: 6869 6e20 6120 756e 6974 2074 6573 742e  hin a unit test.
+00005040: 0a0a 2020 2020 2020 2020 2d20 4361 6e20  ..        - Can 
+00005050: 6265 2075 7365 6420 746f 2072 6573 7461  be used to resta
+00005060: 7274 204d 4941 2061 6674 6572 2063 6861  rt MIA after cha
+00005070: 6e67 696e 6720 7468 6520 636f 6e74 726f  nging the contro
+00005080: 6c6c 6572 2076 6572 7369 6f6e 2069 6e0a  ller version in.
+00005090: 2020 2020 2020 2020 2020 4d69 6120 7072            Mia pr
+000050a0: 6566 6572 656e 6365 732e 0a20 2020 2020  eferences..     
+000050b0: 2020 2022 2222 0a0a 2020 2020 2020 2020     """..        
+000050c0: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+000050d0: 2e63 6c6f 7365 2829 0a0a 2020 2020 2020  .close()..      
+000050e0: 2020 2320 5265 6d6f 7669 6e67 2074 6865    # Removing the
+000050f0: 206f 7065 6e65 6420 7072 6f6a 6563 7473   opened projects
+00005100: 2028 696e 2043 492c 2074 6865 2074 6573   (in CI, the tes
+00005110: 7473 2061 7265 2072 756e 2074 7769 6365  ts are run twice
+00005120: 290a 2020 2020 2020 2020 636f 6e66 6967  ).        config
+00005130: 203d 2043 6f6e 6669 6728 636f 6e66 6967   = Config(config
+00005140: 5f70 6174 683d 7365 6c66 2e63 6f6e 6669  _path=self.confi
+00005150: 675f 7061 7468 290a 2020 2020 2020 2020  g_path).        
+00005160: 636f 6e66 6967 2e73 6574 5f6f 7065 6e65  config.set_opene
+00005170: 645f 7072 6f6a 6563 7473 285b 5d29 0a20  d_projects([]). 
+00005180: 2020 2020 2020 2063 6f6e 6669 672e 7361         config.sa
+00005190: 7665 436f 6e66 6967 2829 0a20 2020 2020  veConfig().     
+000051a0: 2020 2051 4170 706c 6963 6174 696f 6e2e     QApplication.
+000051b0: 7072 6f63 6573 7345 7665 6e74 7328 290a  processEvents().
+000051c0: 2020 2020 2020 2020 7365 6c66 2e61 7070          self.app
+000051d0: 2e65 7869 7428 290a 2020 2020 2020 2020  .exit().        
+000051e0: 6465 6c20 7365 6c66 2e61 7070 0a0a 2020  del self.app..  
+000051f0: 2020 2020 2020 636f 6e66 6967 203d 2043        config = C
+00005200: 6f6e 6669 6728 636f 6e66 6967 5f70 6174  onfig(config_pat
+00005210: 683d 7365 6c66 2e63 6f6e 6669 675f 7061  h=self.config_pa
+00005220: 7468 290a 2020 2020 2020 2020 636f 6e66  th).        conf
+00005230: 6967 2e73 6574 5f75 7365 725f 6d6f 6465  ig.set_user_mode
+00005240: 2846 616c 7365 290a 2020 2020 2020 2020  (False).        
+00005250: 7365 6c66 2e61 7070 203d 2051 4170 706c  self.app = QAppl
+00005260: 6963 6174 696f 6e2e 696e 7374 616e 6365  ication.instance
+00005270: 2829 0a0a 2020 2020 2020 2020 6966 2073  ()..        if s
+00005280: 656c 662e 6170 7020 6973 204e 6f6e 653a  elf.app is None:
+00005290: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+000052a0: 662e 6170 7020 3d20 5141 7070 6c69 6361  f.app = QApplica
+000052b0: 7469 6f6e 2873 7973 2e61 7267 7629 0a0a  tion(sys.argv)..
+000052c0: 2020 2020 2020 2020 7365 6c66 2e70 726f          self.pro
+000052d0: 6a65 6374 203d 2050 726f 6a65 6374 284e  ject = Project(N
+000052e0: 6f6e 652c 2054 7275 6529 0a20 2020 2020  one, True).     
+000052f0: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
+00005300: 646f 7720 3d20 4d61 696e 5769 6e64 6f77  dow = MainWindow
+00005310: 2873 656c 662e 7072 6f6a 6563 742c 2074  (self.project, t
+00005320: 6573 743d 5472 7565 290a 0a20 2020 2064  est=True)..    d
+00005330: 6566 2073 6574 5570 2873 656c 6629 3a0a  ef setUp(self):.
+00005340: 2020 2020 2020 2020 2222 2243 616c 6c65          """Calle
+00005350: 6420 6265 666f 7265 2065 6163 6820 7465  d before each te
+00005360: 7374 2222 220a 0a20 2020 2020 2020 2023  st"""..        #
+00005370: 2041 6c6c 2074 6865 2074 6573 7473 2061   All the tests a
+00005380: 7265 2072 756e 2069 6e20 6164 6d69 6e20  re run in admin 
+00005390: 6d6f 6465 0a20 2020 2020 2020 2063 6f6e  mode.        con
+000053a0: 6669 6720 3d20 436f 6e66 6967 2863 6f6e  fig = Config(con
+000053b0: 6669 675f 7061 7468 3d73 656c 662e 636f  fig_path=self.co
+000053c0: 6e66 6967 5f70 6174 6829 0a20 2020 2020  nfig_path).     
+000053d0: 2020 2063 6f6e 6669 672e 7365 745f 7573     config.set_us
+000053e0: 6572 5f6d 6f64 6528 4661 6c73 6529 0a20  er_mode(False). 
+000053f0: 2020 2020 2020 2073 656c 662e 6170 7020         self.app 
+00005400: 3d20 5141 7070 6c69 6361 7469 6f6e 2e69  = QApplication.i
+00005410: 6e73 7461 6e63 6528 290a 0a20 2020 2020  nstance()..     
+00005420: 2020 2069 6620 7365 6c66 2e61 7070 2069     if self.app i
+00005430: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+00005440: 2020 2020 7365 6c66 2e61 7070 203d 2051      self.app = Q
+00005450: 4170 706c 6963 6174 696f 6e28 7379 732e  Application(sys.
+00005460: 6172 6776 290a 0a20 2020 2020 2020 2073  argv)..        s
+00005470: 656c 662e 7072 6f6a 6563 7420 3d20 5072  elf.project = Pr
+00005480: 6f6a 6563 7428 4e6f 6e65 2c20 5472 7565  oject(None, True
+00005490: 290a 2020 2020 2020 2020 7365 6c66 2e6d  ).        self.m
+000054a0: 6169 6e5f 7769 6e64 6f77 203d 204d 6169  ain_window = Mai
+000054b0: 6e57 696e 646f 7728 7365 6c66 2e70 726f  nWindow(self.pro
+000054c0: 6a65 6374 2c20 7465 7374 3d54 7275 6529  ject, test=True)
+000054d0: 0a0a 2020 2020 4063 6c61 7373 6d65 7468  ..    @classmeth
+000054e0: 6f64 0a20 2020 2064 6566 2073 6574 5570  od.    def setUp
+000054f0: 436c 6173 7328 636c 7329 3a0a 2020 2020  Class(cls):.    
+00005500: 2020 2020 2222 2243 616c 6c65 6420 6f6e      """Called on
+00005510: 6365 2061 7420 7468 6520 6265 6769 6e6e  ce at the beginn
+00005520: 696e 6720 6f66 2074 6865 2063 6c61 7373  ing of the class
+00005530: 2222 220a 0a20 2020 2020 2020 2063 6c73  """..        cls
+00005540: 2e63 6f6e 6669 675f 7061 7468 203d 2074  .config_path = t
+00005550: 656d 7066 696c 652e 6d6b 6474 656d 7028  empfile.mkdtemp(
+00005560: 7072 6566 6978 3d22 6d69 615f 7465 7374  prefix="mia_test
+00005570: 7322 290a 2020 2020 2020 2020 2320 6861  s").        # ha
+00005580: 636b 2074 6865 2043 6f6e 6669 6720 636c  ck the Config cl
+00005590: 6173 7320 746f 2067 6574 2063 6f6e 6669  ass to get confi
+000055a0: 675f 7061 7468 2c20 6265 6361 7573 6520  g_path, because 
+000055b0: 736f 6d65 2043 6f6e 6669 670a 2020 2020  some Config.    
+000055c0: 2020 2020 2320 696e 7374 616e 6365 7320      # instances 
+000055d0: 6172 6520 6372 6561 7465 6420 6f75 7420  are created out 
+000055e0: 6f66 206f 7572 2063 6f6e 7472 6f6c 2069  of our control i
+000055f0: 6e20 7468 6520 636f 6465 0a20 2020 2020  n the code.     
+00005600: 2020 2043 6f6e 6669 672e 636f 6e66 6967     Config.config
+00005610: 5f70 6174 6820 3d20 636c 732e 636f 6e66  _path = cls.conf
+00005620: 6967 5f70 6174 680a 0a20 2020 2064 6566  ig_path..    def
+00005630: 2074 6561 7244 6f77 6e28 7365 6c66 293a   tearDown(self):
+00005640: 0a20 2020 2020 2020 2022 2222 4361 6c6c  .        """Call
+00005650: 6564 2061 6674 6572 2065 6163 6820 7465  ed after each te
+00005660: 7374 2222 220a 0a20 2020 2020 2020 2073  st"""..        s
+00005670: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00005680: 636c 6f73 6528 290a 2020 2020 2020 2020  close().        
+00005690: 2320 5265 6d6f 7669 6e67 2074 6865 206f  # Removing the o
+000056a0: 7065 6e65 6420 7072 6f6a 6563 7473 2028  pened projects (
+000056b0: 696e 2043 492c 2074 6865 2074 6573 7473  in CI, the tests
+000056c0: 2061 7265 2072 756e 2074 7769 6365 290a   are run twice).
+000056d0: 2020 2020 2020 2020 636f 6e66 6967 203d          config =
+000056e0: 2043 6f6e 6669 6728 636f 6e66 6967 5f70   Config(config_p
+000056f0: 6174 683d 7365 6c66 2e63 6f6e 6669 675f  ath=self.config_
+00005700: 7061 7468 290a 2020 2020 2020 2020 636f  path).        co
+00005710: 6e66 6967 2e73 6574 5f6f 7065 6e65 645f  nfig.set_opened_
+00005720: 7072 6f6a 6563 7473 285b 5d29 0a20 2020  projects([]).   
+00005730: 2020 2020 2063 6f6e 6669 672e 7361 7665       config.save
+00005740: 436f 6e66 6967 2829 0a20 2020 2020 2020  Config().       
+00005750: 2051 4170 706c 6963 6174 696f 6e2e 7072   QApplication.pr
+00005760: 6f63 6573 7345 7665 6e74 7328 290a 2020  ocessEvents().  
+00005770: 2020 2020 2020 7365 6c66 2e61 7070 2e65        self.app.e
+00005780: 7869 7428 290a 2020 2020 2020 2020 6465  xit().        de
+00005790: 6c20 7365 6c66 2e61 7070 0a0a 2020 2020  l self.app..    
+000057a0: 4063 6c61 7373 6d65 7468 6f64 0a20 2020  @classmethod.   
+000057b0: 2064 6566 2074 6561 7244 6f77 6e43 6c61   def tearDownCla
+000057c0: 7373 2863 6c73 293a 0a20 2020 2020 2020  ss(cls):.       
+000057d0: 2022 2222 4361 6c6c 6564 206f 6e63 6520   """Called once 
+000057e0: 6174 2074 6865 2065 6e64 206f 6620 7468  at the end of th
+000057f0: 6520 636c 6173 7322 2222 0a0a 2020 2020  e class"""..    
+00005800: 2020 2020 6966 206f 732e 7061 7468 2e65      if os.path.e
+00005810: 7869 7374 7328 636c 732e 636f 6e66 6967  xists(cls.config
+00005820: 5f70 6174 6829 3a0a 2020 2020 2020 2020  _path):.        
+00005830: 2020 2020 7368 7574 696c 2e72 6d74 7265      shutil.rmtre
+00005840: 6528 636c 732e 636f 6e66 6967 5f70 6174  e(cls.config_pat
+00005850: 6829 0a0a 0a63 6c61 7373 2054 6573 744d  h)...class TestM
+00005860: 4941 4461 7461 4272 6f77 7365 7228 5465  IADataBrowser(Te
+00005870: 7374 4d49 4143 6173 6529 3a0a 2020 2020  stMIACase):.    
+00005880: 2222 2254 6573 7473 2066 6f72 2074 6865  """Tests for the
+00005890: 2064 6174 6120 6272 6f77 7365 7220 7461   data browser ta
+000058a0: 6220 2844 6174 6142 726f 7773 6572 292e  b (DataBrowser).
+000058b0: 0a0a 2020 2020 3a43 6f6e 7461 696e 733a  ..    :Contains:
+000058c0: 0a20 2020 2020 2020 203a 4d65 7468 6f64  .        :Method
+000058d0: 3a0a 2020 2020 2020 2020 2020 2020 2d20  :.            - 
+000058e0: 7465 7374 5f61 6464 5f70 6174 683a 2074  test_add_path: t
+000058f0: 6573 7473 2074 6865 2070 6f70 7570 2074  ests the popup t
+00005900: 6f20 6164 6420 6120 7061 7468 0a20 2020  o add a path.   
+00005910: 2020 2020 2020 2020 202d 2074 6573 745f           - test_
+00005920: 6164 645f 7461 673a 2074 6573 7473 2074  add_tag: tests t
+00005930: 6865 2070 6f70 2075 7020 6164 6469 6e67  he pop up adding
+00005940: 2061 2074 6167 0a20 2020 2020 2020 2020   a tag.         
+00005950: 2020 202d 2074 6573 745f 6164 7661 6e63     - test_advanc
+00005960: 6564 5f73 6561 7263 683a 2074 6573 7473  ed_search: tests
+00005970: 2074 6865 2061 6476 616e 6365 6420 7365   the advanced se
+00005980: 6172 6368 2077 6964 6765 740a 2020 2020  arch widget.    
+00005990: 2020 2020 2020 2020 2d20 7465 7374 5f62          - test_b
+000059a0: 7269 636b 5f68 6973 746f 7279 3a20 7465  rick_history: te
+000059b0: 7374 7320 7468 6520 6272 6963 6b20 6869  sts the brick hi
+000059c0: 7374 6f72 7920 706f 7075 700a 2020 2020  story popup.    
+000059d0: 2020 2020 2020 2020 2d20 7465 7374 5f63          - test_c
+000059e0: 6c65 6172 5f63 656c 6c3a 2074 6573 7473  lear_cell: tests
+000059f0: 2074 6865 206d 6574 686f 6420 636c 6561   the method clea
+00005a00: 7269 6e67 2063 656c 6c73 0a20 2020 2020  ring cells.     
+00005a10: 2020 2020 2020 202d 2074 6573 745f 636c         - test_cl
+00005a20: 6f6e 655f 7461 673a 2074 6573 7473 2074  one_tag: tests t
+00005a30: 6865 2070 6f70 2075 7020 636c 6f6e 696e  he pop up clonin
+00005a40: 6720 6120 7461 670a 2020 2020 2020 2020  g a tag.        
+00005a50: 2020 2020 2d20 7465 7374 5f63 6f75 6e74      - test_count
+00005a60: 5f74 6162 6c65 3a20 7465 7374 7320 7468  _table: tests th
+00005a70: 6520 636f 756e 7420 7461 626c 6520 706f  e count table po
+00005a80: 7075 700a 2020 2020 2020 2020 2020 2020  pup.            
+00005a90: 2d20 7465 7374 5f6d 6961 5f70 7265 6665  - test_mia_prefe
+00005aa0: 7265 6e63 6573 3a20 7465 7374 7320 7468  rences: tests th
+00005ab0: 6520 4d69 6120 7072 6566 6572 656e 6365  e Mia preference
+00005ac0: 7320 706f 7075 700a 2020 2020 2020 2020  s popup.        
+00005ad0: 2020 2020 2d20 7465 7374 5f6d 696e 695f      - test_mini_
+00005ae0: 7669 6577 6572 3a20 7365 6c65 6374 7320  viewer: selects 
+00005af0: 7363 616e 7320 616e 6420 6469 7370 6c61  scans and displa
+00005b00: 7920 7468 656d 2069 6e20 7468 6520 6d69  y them in the mi
+00005b10: 6e69 0a20 2020 2020 2020 2020 2020 2020  ni.             
+00005b20: 2076 6965 7765 720a 2020 2020 2020 2020   viewer.        
+00005b30: 2020 2020 2d20 7465 7374 5f6d 6f64 6966      - test_modif
+00005b40: 795f 7461 626c 653a 2074 6573 7473 2074  y_table: tests t
+00005b50: 6865 206d 6f64 6966 7920 7461 626c 6520  he modify table 
+00005b60: 6d6f 6475 6c65 0a20 2020 2020 2020 2020  module.         
+00005b70: 2020 202d 2074 6573 745f 6d75 6c74 6970     - test_multip
+00005b80: 6c65 5f73 6f72 743a 2074 6573 7473 2074  le_sort: tests t
+00005b90: 6865 206d 756c 7469 706c 6520 736f 7274  he multiple sort
+00005ba0: 2070 6f70 7570 0a20 2020 2020 2020 2020   popup.         
+00005bb0: 2020 202d 2074 6573 745f 6d75 6c74 6970     - test_multip
+00005bc0: 6c65 5f73 6f72 745f 6170 7065 6e64 6978  le_sort_appendix
+00005bd0: 3a20 6164 6473 2061 6e64 2072 656d 6f76  : adds and remov
+00005be0: 6573 2074 6167 7320 696e 2074 6865 2064  es tags in the d
+00005bf0: 6174 610a 2020 2020 2020 2020 2020 2020  ata.            
+00005c00: 2020 6272 6f77 7365 720a 2020 2020 2020    browser.      
+00005c10: 2020 2020 2020 2d20 7465 7374 5f6f 7065        - test_ope
+00005c20: 6e54 6167 7350 6f70 5570 3a20 6f70 656e  nTagsPopUp: open
+00005c30: 7320 6120 706f 702d 7570 2074 6f20 7365  s a pop-up to se
+00005c40: 6c65 6374 2074 6865 206c 6567 656e 6420  lect the legend 
+00005c50: 6f66 2074 6865 0a20 2020 2020 2020 2020  of the.         
+00005c60: 2020 2020 2074 6875 6d62 6e61 696c 730a       thumbnails.
+00005c70: 2020 2020 2020 2020 2020 2020 2d20 7465              - te
+00005c80: 7374 5f6f 7065 6e5f 7072 6f6a 6563 743a  st_open_project:
+00005c90: 2074 6573 7473 2070 726f 6a65 6374 206f   tests project o
+00005ca0: 7065 6e69 6e67 0a20 2020 2020 2020 2020  pening.         
+00005cb0: 2020 202d 2074 6573 745f 7072 6f6a 6563     - test_projec
+00005cc0: 745f 6669 6c74 6572 3a20 7465 7374 7320  t_filter: tests 
+00005cd0: 7072 6f6a 6563 7420 6669 6c74 6572 206f  project filter o
+00005ce0: 7065 6e69 6e67 0a20 2020 2020 2020 2020  pening.         
+00005cf0: 2020 202d 2074 6573 745f 7072 6f6a 6563     - test_projec
+00005d00: 745f 7072 6f70 6572 7469 6573 3a20 7465  t_properties: te
+00005d10: 7374 7320 7361 7665 6420 7072 6f6a 6563  sts saved projec
+00005d20: 7473 2061 6464 6974 696f 6e20 616e 640a  ts addition and.
+00005d30: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00005d40: 6d6f 7661 6c0a 2020 2020 2020 2020 2020  moval.          
+00005d50: 2020 2d20 7465 7374 5f70 726f 6a5f 7265    - test_proj_re
+00005d60: 6d6f 765f 6672 6f6d 5f63 7572 5f70 726f  mov_from_cur_pro
+00005d70: 6a3a 2074 6573 7473 2074 6861 7420 7468  j: tests that th
+00005d80: 6520 7072 6f6a 6563 7473 2061 7265 0a20  e projects are. 
+00005d90: 2020 2020 2020 2020 2020 2020 2072 656d               rem
+00005da0: 6f76 6564 2066 726f 6d20 7468 6520 6c69  oved from the li
+00005db0: 7374 206f 6620 6375 7272 656e 7420 7072  st of current pr
+00005dc0: 6f6a 6563 7473 0a20 2020 2020 2020 2020  ojects.         
+00005dd0: 2020 202d 2074 6573 745f 7261 7069 645f     - test_rapid_
+00005de0: 7365 6172 6368 3a20 7465 7374 7320 7468  search: tests th
+00005df0: 6520 7261 7069 6420 7365 6172 6368 2062  e rapid search b
+00005e00: 6172 0a20 2020 2020 2020 2020 2020 202d  ar.            -
+00005e10: 2074 6573 745f 7265 6d6f 7665 5f73 6361   test_remove_sca
+00005e20: 6e3a 2074 6573 7473 2073 6361 6e73 2072  n: tests scans r
+00005e30: 656d 6f76 616c 2069 6e20 7468 6520 4461  emoval in the Da
+00005e40: 7461 4272 6f77 7365 720a 2020 2020 2020  taBrowser.      
+00005e50: 2020 2020 2020 2d20 7465 7374 5f72 656d        - test_rem
+00005e60: 6f76 655f 7461 673a 2074 6573 7473 2074  ove_tag: tests t
+00005e70: 6865 2070 6f70 7570 2072 656d 6f76 696e  he popup removin
+00005e80: 6720 7573 6572 2074 6167 730a 2020 2020  g user tags.    
+00005e90: 2020 2020 2020 2020 2d20 7465 7374 5f72          - test_r
+00005ea0: 6573 6574 5f63 656c 6c3a 2074 6573 7473  eset_cell: tests
+00005eb0: 2074 6865 206d 6574 686f 6420 7265 7365   the method rese
+00005ec0: 7474 696e 6720 7468 6520 7365 6c65 6374  tting the select
+00005ed0: 6564 0a20 2020 2020 2020 2020 2020 2020  ed.             
+00005ee0: 2063 656c 6c73 0a20 2020 2020 2020 2020   cells.         
+00005ef0: 2020 202d 2074 6573 745f 7265 7365 745f     - test_reset_
+00005f00: 636f 6c75 6d6e 3a20 7465 7374 7320 7468  column: tests th
+00005f10: 6520 6d65 7468 6f64 2072 6573 6574 7469  e method resetti
+00005f20: 6e67 2074 6865 2063 6f6c 756d 6e73 0a20  ng the columns. 
+00005f30: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00005f40: 6563 7465 640a 2020 2020 2020 2020 2020  ected.          
+00005f50: 2020 2d20 7465 7374 5f72 6573 6574 5f72    - test_reset_r
+00005f60: 6f77 3a20 7465 7374 2072 6f77 2072 6573  ow: test row res
+00005f70: 6574 0a20 2020 2020 2020 2020 2020 202d  et.            -
+00005f80: 2074 6573 745f 7361 7665 5f70 726f 6a65   test_save_proje
+00005f90: 6374 3a20 7465 7374 206f 7065 6e69 6e67  ct: test opening
+00005fa0: 2026 2073 6176 696e 6720 6f66 2061 2070   & saving of a p
+00005fb0: 726f 6a65 6374 0a20 2020 2020 2020 2020  roject.         
+00005fc0: 2020 202d 2074 6573 745f 7365 6e64 5f64     - test_send_d
+00005fd0: 6f63 5f74 6f5f 7069 7065 6c69 6e65 5f6d  oc_to_pipeline_m
+00005fe0: 616e 6167 6572 3a20 7465 7374 7320 7468  anager: tests th
+00005ff0: 6520 706f 7075 7020 7365 6e64 696e 670a  e popup sending.
+00006000: 2020 2020 2020 2020 2020 2020 2020 646f                do
+00006010: 6375 6d65 6e74 7320 746f 2074 6865 2070  cuments to the p
+00006020: 6970 656c 696e 6520 6d61 6e61 6765 720a  ipeline manager.
+00006030: 2020 2020 2020 2020 2020 2020 2d20 7465              - te
+00006040: 7374 5f73 6574 5f76 616c 7565 3a20 7465  st_set_value: te
+00006050: 7374 7320 7468 6520 7661 6c75 6573 206d  sts the values m
+00006060: 6f64 6966 6963 6174 696f 6e73 0a20 2020  odifications.   
+00006070: 2020 2020 2020 2020 202d 2074 6573 745f           - test_
+00006080: 7368 6f77 5f62 7269 636b 5f68 6973 746f  show_brick_histo
+00006090: 7279 3a20 6f70 656e 7320 7468 6520 6869  ry: opens the hi
+000060a0: 7374 6f72 7920 706f 702d 7570 2066 6f72  story pop-up for
+000060b0: 0a20 2020 2020 2020 2020 2020 2020 2073  .              s
+000060c0: 6361 6e73 2077 6974 6820 6869 7374 6f72  cans with histor
+000060d0: 7920 7265 6c61 7465 6420 746f 2061 2062  y related to a b
+000060e0: 7269 636b 0a20 2020 2020 2020 2020 2020  rick.           
+000060f0: 202d 2074 6573 745f 736f 7274 3a20 7465   - test_sort: te
+00006100: 7374 7320 7468 6520 736f 7274 696e 6720  sts the sorting 
+00006110: 696e 2074 6865 2044 6174 6142 726f 7773  in the DataBrows
+00006120: 6572 0a20 2020 2020 2020 2020 2020 202d  er.            -
+00006130: 2074 6573 745f 7461 626c 655f 6461 7461   test_table_data
+00006140: 5f61 6464 5f63 6f6c 756d 6e73 3a20 6164  _add_columns: ad
+00006150: 6473 2074 6167 2063 6f6c 756d 6e73 2074  ds tag columns t
+00006160: 6f20 7468 6520 7461 626c 6520 6461 7461  o the table data
+00006170: 0a20 2020 2020 2020 2020 2020 2020 2077  .              w
+00006180: 696e 646f 770a 2020 2020 2020 2020 2020  indow.          
+00006190: 2020 2d20 7465 7374 5f74 6162 6c65 5f64    - test_table_d
+000061a0: 6174 615f 6170 7065 6e64 6978 3a20 6f70  ata_appendix: op
+000061b0: 656e 7320 6120 7072 6f6a 6563 7420 616e  ens a project an
+000061c0: 6420 7465 7374 7320 6d69 7363 656c 6c61  d tests miscella
+000061d0: 6e65 6f75 730a 2020 2020 2020 2020 2020  neous.          
+000061e0: 2020 2020 6d65 7468 6f64 7320 6f66 2074      methods of t
+000061f0: 6865 2074 6162 6c65 2064 6174 6120 7669  he table data vi
+00006200: 6577 2c20 696e 2074 6865 2064 6174 6120  ew, in the data 
+00006210: 6272 6f77 7365 720a 2020 2020 2020 2020  browser.        
+00006220: 2020 2020 2d20 7465 7374 5f74 6162 6c65      - test_table
+00006230: 5f64 6174 615f 636f 6e74 6578 745f 6d65  _data_context_me
+00006240: 6e75 3a20 7269 6768 7420 636c 6963 6b73  nu: right clicks
+00006250: 2061 2073 6361 6e20 746f 2073 686f 7720   a scan to show 
+00006260: 7468 650a 2020 2020 2020 2020 2020 2020  the.            
+00006270: 2020 636f 6e74 6578 7420 6d65 6e75 2074    context menu t
+00006280: 6162 6c65 2c20 616e 6420 6368 6f73 6573  able, and choses
+00006290: 206f 6e65 206f 7074 696f 6e0a 2020 2020   one option.    
+000062a0: 2020 2020 2020 2020 2d20 7465 7374 5f75          - test_u
+000062b0: 6e64 6f5f 7265 646f 5f64 6174 6162 726f  ndo_redo_databro
+000062c0: 7773 6572 3a20 7465 7374 7320 6461 7461  wser: tests data
+000062d0: 2062 726f 7773 6572 2075 6e64 6f2f 7265   browser undo/re
+000062e0: 646f 0a20 2020 2020 2020 2020 2020 202d  do.            -
+000062f0: 2074 6573 745f 756e 6e61 6d65 645f 7072   test_unnamed_pr
+00006300: 6f6a 5f73 6f66 745f 6f70 656e 3a20 7465  oj_soft_open: te
+00006310: 7374 7320 756e 6e61 6d65 6420 7072 6f6a  sts unnamed proj
+00006320: 6563 740a 2020 2020 2020 2020 2020 2020  ect.            
+00006330: 2020 6372 6561 7469 6f6e 2061 7420 736f    creation at so
+00006340: 6674 7761 7265 206f 7065 6e69 6e67 0a20  ftware opening. 
+00006350: 2020 2020 2020 2020 2020 202d 2074 6573             - tes
+00006360: 745f 7570 6461 7465 5f64 6174 615f 6869  t_update_data_hi
+00006370: 7374 6f72 793a 2075 7064 6174 6573 2074  story: updates t
+00006380: 6865 2068 6973 746f 7279 206f 6620 6461  he history of da
+00006390: 7461 2074 6861 740a 2020 2020 2020 2020  ta that.        
+000063a0: 2020 2020 2020 6861 7665 2062 6565 6e20        have been 
+000063b0: 7265 2d77 7269 7474 656e 0a20 2020 2020  re-written.     
+000063c0: 2020 2020 2020 202d 2074 6573 745f 7570         - test_up
+000063d0: 6461 7465 5f64 6566 6175 6c74 5f76 616c  date_default_val
+000063e0: 7565 3a20 7570 6461 7465 7320 7468 6520  ue: updates the 
+000063f0: 7661 6c75 6573 2077 6865 6e20 6120 6c69  values when a li
+00006400: 7374 0a20 2020 2020 2020 2020 2020 2020  st.             
+00006410: 206f 6620 6465 6661 756c 7420 7661 6c75   of default valu
+00006420: 6573 2069 7320 6372 6561 7465 640a 2020  es is created.  
+00006430: 2020 2020 2020 2020 2020 2d20 7465 7374            - test
+00006440: 5f75 7469 6c73 3a20 7465 7374 2074 6865  _utils: test the
+00006450: 2075 7469 6c73 2066 756e 6374 696f 6e73   utils functions
+00006460: 0a20 2020 2020 2020 2020 2020 202d 2074  .            - t
+00006470: 6573 745f 7669 7375 616c 697a 6564 5f74  est_visualized_t
+00006480: 6167 733a 2074 6573 7473 2074 6865 2070  ags: tests the p
+00006490: 6f70 7570 206d 6f64 6966 7969 6e67 2074  opup modifying t
+000064a0: 6865 0a20 2020 2020 2020 2020 2020 2020  he.             
+000064b0: 2076 6973 7561 6c69 7a65 6420 7461 6773   visualized tags
+000064c0: 0a20 2020 2022 2222 0a0a 2020 2020 6465  .    """..    de
+000064d0: 6620 7465 7374 5f61 6464 5f70 6174 6828  f test_add_path(
+000064e0: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
+000064f0: 2222 5472 6965 7320 696d 706f 7274 2061  ""Tries import a
+00006500: 2064 6f63 756d 656e 7420 746f 2074 6865   document to the
+00006510: 2070 726f 6a65 6374 2e0a 0a20 2020 2020   project...     
+00006520: 2020 202d 2054 6573 7473 3a20 4461 7461     - Tests: Data
+00006530: 4272 6f77 7365 722e 6164 645f 7061 7468  Browser.add_path
+00006540: 2061 6e64 2050 6f70 5570 4164 6450 6174   and PopUpAddPat
+00006550: 680a 0a20 2020 2020 2020 202d 204d 6f63  h..        - Moc
+00006560: 6b73 3a20 7468 6520 6578 6563 7574 696f  ks: the executio
+00006570: 6e20 6f66 2051 4669 6c65 4469 616c 6f67  n of QFileDialog
+00006580: 2061 6e64 2051 4d65 7373 6167 6542 6f78   and QMessageBox
+00006590: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
+000065a0: 2020 2020 2020 2320 5365 7473 2073 686f        # Sets sho
+000065b0: 7274 6375 7473 2066 6f72 206f 6674 656e  rtcuts for often
+000065c0: 2075 7365 6420 6f62 6a65 6374 730a 2020   used objects.  
+000065d0: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
+000065e0: 7220 3d20 7365 6c66 2e6d 6169 6e5f 7769  r = self.main_wi
+000065f0: 6e64 6f77 2e70 6970 656c 696e 655f 6d61  ndow.pipeline_ma
+00006600: 6e61 6765 720a 2020 2020 2020 2020 7365  nager.        se
+00006610: 7373 696f 6e20 3d20 7070 6c5f 6d61 6e61  ssion = ppl_mana
+00006620: 6765 722e 7072 6f6a 6563 742e 7365 7373  ger.project.sess
+00006630: 696f 6e0a 2020 2020 2020 2020 7461 626c  ion.        tabl
+00006640: 655f 6461 7461 203d 2073 656c 662e 6d61  e_data = self.ma
+00006650: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
+00006660: 726f 7773 6572 2e74 6162 6c65 5f64 6174  rowser.table_dat
+00006670: 610a 0a20 2020 2020 2020 2023 2043 7265  a..        # Cre
+00006680: 6174 6573 2061 206e 6577 2070 726f 6a65  ates a new proje
+00006690: 6374 2066 6f6c 6465 7220 616e 6420 6164  ct folder and ad
+000066a0: 6473 206f 6e65 2064 6f63 756d 656e 7420  ds one document 
+000066b0: 746f 2074 6865 0a20 2020 2020 2020 2023  to the.        #
+000066c0: 2070 726f 6a65 6374 2c20 7365 7473 2074   project, sets t
+000066d0: 6865 2070 6c75 6720 7661 6c75 6520 7468  he plug value th
+000066e0: 6174 2069 7320 6164 6465 6420 746f 2074  at is added to t
+000066f0: 6865 2064 6174 6162 6173 650a 2020 2020  he database.    
+00006700: 2020 2020 7072 6f6a 6563 745f 385f 7061      project_8_pa
+00006710: 7468 203d 2073 656c 662e 6765 745f 6e65  th = self.get_ne
+00006720: 775f 7465 7374 5f70 726f 6a65 6374 2829  w_test_project()
+00006730: 0a20 2020 2020 2020 2070 706c 5f6d 616e  .        ppl_man
+00006740: 6167 6572 2e70 726f 6a65 6374 2e66 6f6c  ager.project.fol
+00006750: 6465 7220 3d20 7072 6f6a 6563 745f 385f  der = project_8_
+00006760: 7061 7468 0a20 2020 2020 2020 2066 6f6c  path.        fol
+00006770: 6465 7220 3d20 6f73 2e70 6174 682e 6a6f  der = os.path.jo
+00006780: 696e 2870 726f 6a65 6374 5f38 5f70 6174  in(project_8_pat
+00006790: 682c 2022 6461 7461 222c 2022 7261 775f  h, "data", "raw_
+000067a0: 6461 7461 2229 0a20 2020 2020 2020 204e  data").        N
+000067b0: 4949 5f46 494c 455f 3120 3d20 280a 2020  II_FILE_1 = (.  
+000067c0: 2020 2020 2020 2020 2020 2247 7565 7262            "Guerb
+000067d0: 6574 2d43 362d 3230 3134 2d52 6174 2d4b  et-C6-2014-Rat-K
+000067e0: 3532 2d54 7562 6532 372d 3230 3134 2d30  52-Tube27-2014-0
+000067f0: 322d 3134 3130 3233 3137 2d30 342d 4733  2-14102317-04-G3
+00006800: 5f22 0a20 2020 2020 2020 2020 2020 2022  _".            "
+00006810: 4775 6572 6265 745f 4d44 4546 542d 4d44  Guerbet_MDEFT-MD
+00006820: 4546 5470 766d 2d30 3030 3934 305f 3830  EFTpvm-000940_80
+00006830: 302e 6e69 6922 0a20 2020 2020 2020 2029  0.nii".        )
+00006840: 0a20 2020 2020 2020 2044 4f43 554d 454e  .        DOCUMEN
+00006850: 545f 3120 3d20 6f73 2e70 6174 682e 6162  T_1 = os.path.ab
+00006860: 7370 6174 6828 6f73 2e70 6174 682e 6a6f  spath(os.path.jo
+00006870: 696e 2866 6f6c 6465 722c 204e 4949 5f46  in(folder, NII_F
+00006880: 494c 455f 3129 290a 0a20 2020 2020 2020  ILE_1))..       
+00006890: 2023 204d 6f63 6b73 2074 6865 2065 7865   # Mocks the exe
+000068a0: 6375 7469 6f6e 206f 6620 6120 6d65 7373  cution of a mess
+000068b0: 6167 6520 626f 780a 2020 2020 2020 2020  age box.        
+000068c0: 514d 6573 7361 6765 426f 782e 7368 6f77  QMessageBox.show
+000068d0: 203d 204d 6f63 6b28 290a 0a20 2020 2020   = Mock()..     
+000068e0: 2020 2023 204f 7065 6e73 2074 6865 2027     # Opens the '
+000068f0: 6164 645f 7061 7468 2720 706f 702d 7570  add_path' pop-up
+00006900: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+00006910: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
+00006920: 726f 7773 6572 2e74 6162 6c65 5f64 6174  rowser.table_dat
+00006930: 612e 6164 645f 7061 7468 2829 0a20 2020  a.add_path().   
+00006940: 2020 2020 2061 6464 5f70 6174 6820 3d20       add_path = 
+00006950: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+00006960: 2e64 6174 615f 6272 6f77 7365 722e 7461  .data_browser.ta
+00006970: 626c 655f 6461 7461 2e70 6f70 5f75 705f  ble_data.pop_up_
+00006980: 6164 645f 7061 7468 0a0a 2020 2020 2020  add_path..      
+00006990: 2020 2320 5472 6965 7320 746f 2061 6464    # Tries to add
+000069a0: 2061 2064 6f63 756d 656e 7420 7769 7468   a document with
+000069b0: 6f75 7420 6669 6c6c 696e 6720 7468 6520  out filling the 
+000069c0: 706f 702d 7570 2066 6965 6c64 730a 2020  pop-up fields.  
+000069d0: 2020 2020 2020 5154 6573 742e 6d6f 7573        QTest.mous
+000069e0: 6543 6c69 636b 2861 6464 5f70 6174 682e  eClick(add_path.
+000069f0: 6f6b 5f62 7574 746f 6e2c 2051 742e 4c65  ok_button, Qt.Le
+00006a00: 6674 4275 7474 6f6e 290a 2020 2020 2020  ftButton).      
+00006a10: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00006a20: 616c 2861 6464 5f70 6174 682e 6d73 672e  al(add_path.msg.
+00006a30: 7465 7874 2829 2c20 2249 6e76 616c 6964  text(), "Invalid
+00006a40: 2061 7267 756d 656e 7473 2229 0a0a 2020   arguments")..  
+00006a50: 2020 2020 2020 2320 5472 6965 7320 746f        # Tries to
+00006a60: 2061 6464 2069 6e76 616c 6964 2064 6f63   add invalid doc
+00006a70: 756d 656e 7420 7061 7468 0a20 2020 2020  ument path.     
+00006a80: 2020 2061 6464 5f70 6174 682e 6669 6c65     add_path.file
+00006a90: 5f6c 696e 655f 6564 6974 2e73 6574 5465  _line_edit.setTe
+00006aa0: 7874 2873 7472 285b 444f 4355 4d45 4e54  xt(str([DOCUMENT
+00006ab0: 5f31 202b 2022 5f22 5d29 290a 2020 2020  _1 + "_"])).    
+00006ac0: 2020 2020 6164 645f 7061 7468 2e74 7970      add_path.typ
+00006ad0: 655f 6c69 6e65 5f65 6469 742e 7365 7454  e_line_edit.setT
+00006ae0: 6578 7428 7374 7228 5b54 5950 455f 4e49  ext(str([TYPE_NI
+00006af0: 495d 2929 0a20 2020 2020 2020 2051 5465  I])).        QTe
+00006b00: 7374 2e6d 6f75 7365 436c 6963 6b28 6164  st.mouseClick(ad
+00006b10: 645f 7061 7468 2e6f 6b5f 6275 7474 6f6e  d_path.ok_button
+00006b20: 2c20 5174 2e4c 6566 7442 7574 746f 6e29  , Qt.LeftButton)
+00006b30: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00006b40: 7365 7274 4571 7561 6c28 6164 645f 7061  sertEqual(add_pa
+00006b50: 7468 2e6d 7367 2e74 6578 7428 292c 2022  th.msg.text(), "
+00006b60: 496e 7661 6c69 6420 6172 6775 6d65 6e74  Invalid argument
+00006b70: 7322 290a 0a20 2020 2020 2020 2023 2041  s")..        # A
+00006b80: 6464 7320 6120 7661 6c69 6420 646f 6375  dds a valid docu
+00006b90: 6d65 6e74 2070 6174 680a 2020 2020 2020  ment path.      
+00006ba0: 2020 6164 645f 7061 7468 2e66 696c 655f    add_path.file_
+00006bb0: 6c69 6e65 5f65 6469 742e 7365 7454 6578  line_edit.setTex
+00006bc0: 7428 7374 7228 5b44 4f43 554d 454e 545f  t(str([DOCUMENT_
+00006bd0: 315d 2929 0a20 2020 2020 2020 2061 6464  1])).        add
+00006be0: 5f70 6174 682e 7479 7065 5f6c 696e 655f  _path.type_line_
+00006bf0: 6564 6974 2e73 6574 5465 7874 2873 7472  edit.setText(str
+00006c00: 285b 5459 5045 5f4e 4949 5d29 290a 2020  ([TYPE_NII])).  
+00006c10: 2020 2020 2020 5154 6573 742e 6d6f 7573        QTest.mous
+00006c20: 6543 6c69 636b 2861 6464 5f70 6174 682e  eClick(add_path.
+00006c30: 6f6b 5f62 7574 746f 6e2c 2051 742e 4c65  ok_button, Qt.Le
+00006c40: 6674 4275 7474 6f6e 290a 0a20 2020 2020  ftButton)..     
+00006c50: 2020 2023 2041 7373 6572 7473 2074 6861     # Asserts tha
+00006c60: 7420 7468 6520 646f 6375 6d65 6e74 2077  t the document w
+00006c70: 6173 2061 6464 6564 2069 6e74 6f20 7468  as added into th
+00006c80: 6520 6461 7461 2062 726f 7773 6572 0a20  e data browser. 
+00006c90: 2020 2020 2020 2023 2041 2072 6567 756c         # A regul
+00006ca0: 6172 2027 2e73 706c 6974 2827 2f27 2927  ar '.split('/')'
+00006cb0: 2077 696c 6c20 6e6f 7420 776f 726b 2069   will not work i
+00006cc0: 6e20 5769 6e64 6f77 7320 4f53 0a20 2020  n Windows OS.   
+00006cd0: 2020 2020 2066 696c 656e 616d 6520 3d20       filename = 
+00006ce0: 6f73 2e70 6174 682e 7370 6c69 7428 0a20  os.path.split(. 
+00006cf0: 2020 2020 2020 2020 2020 2073 6573 7369             sessi
+00006d00: 6f6e 2e67 6574 5f64 6f63 756d 656e 7473  on.get_documents
+00006d10: 5f6e 616d 6573 2843 4f4c 4c45 4354 494f  _names(COLLECTIO
+00006d20: 4e5f 4355 5252 454e 5429 5b30 5d0a 2020  N_CURRENT)[0].  
+00006d30: 2020 2020 2020 295b 2d31 5d0a 2020 2020        )[-1].    
+00006d40: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
+00006d50: 7275 6528 6669 6c65 6e61 6d65 2069 6e20  rue(filename in 
+00006d60: 444f 4355 4d45 4e54 5f31 290a 0a20 2020  DOCUMENT_1)..   
+00006d70: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00006d80: 4571 7561 6c28 7461 626c 655f 6461 7461  Equal(table_data
+00006d90: 2e72 6f77 436f 756e 7428 292c 2031 290a  .rowCount(), 1).
+00006da0: 0a20 2020 2020 2020 2023 204d 6f63 6b73  .        # Mocks
+00006db0: 2074 6865 2065 7865 6375 7469 6f6e 206f   the execution o
+00006dc0: 6620 6669 6c65 2064 6961 6c6f 6720 626f  f file dialog bo
+00006dd0: 7820 616e 6420 6669 6e64 7320 7468 6520  x and finds the 
+00006de0: 6669 6c65 2074 7970 650a 2020 2020 2020  file type.      
+00006df0: 2020 666f 7220 6578 7420 696e 205b 226e    for ext in ["n
+00006e00: 6969 222c 2022 6d61 7422 2c20 2274 7874  ii", "mat", "txt
+00006e10: 225d 3a0a 2020 2020 2020 2020 2020 2020  "]:.            
+00006e20: 5146 696c 6544 6961 6c6f 672e 6765 744f  QFileDialog.getO
+00006e30: 7065 6e46 696c 654e 616d 6573 203d 204d  penFileNames = M
+00006e40: 6f63 6b28 0a20 2020 2020 2020 2020 2020  ock(.           
+00006e50: 2020 2020 2072 6574 7572 6e5f 7661 6c75       return_valu
+00006e60: 653d 285b 2266 696c 652e 2220 2b20 6578  e=(["file." + ex
+00006e70: 745d 2c20 2241 6c6c 2046 696c 6573 2028  t], "All Files (
+00006e80: 2a29 2229 0a20 2020 2020 2020 2020 2020  *)").           
+00006e90: 2029 0a20 2020 2020 2020 2020 2020 2061   ).            a
+00006ea0: 6464 5f70 6174 682e 6669 6c65 5f74 6f5f  dd_path.file_to_
+00006eb0: 6368 6f6f 7365 2829 0a0a 2020 2020 2020  choose()..      
+00006ec0: 2020 2320 4164 6473 2061 2064 6f63 756d    # Adds a docum
+00006ed0: 656e 7420 696e 746f 2074 6865 2064 6174  ent into the dat
+00006ee0: 6162 6173 6520 616e 6420 7472 6965 7320  abase and tries 
+00006ef0: 746f 2073 6176 6520 7468 6520 7361 6d65  to save the same
+00006f00: 0a20 2020 2020 2020 2023 206f 6e65 206f  .        # one o
+00006f10: 6e63 6520 6167 6169 6e0a 2020 2020 2020  nce again.      
+00006f20: 2020 7365 6c66 2e70 726f 6a65 6374 2e73    self.project.s
+00006f30: 6573 7369 6f6e 2e61 6464 5f64 6f63 756d  ession.add_docum
+00006f40: 656e 7428 434f 4c4c 4543 5449 4f4e 5f43  ent(COLLECTION_C
+00006f50: 5552 5245 4e54 2c20 444f 4355 4d45 4e54  URRENT, DOCUMENT
+00006f60: 5f31 290a 2020 2020 2020 2020 6164 645f  _1).        add_
+00006f70: 7061 7468 2e66 696c 655f 6c69 6e65 5f65  path.file_line_e
+00006f80: 6469 742e 7365 7454 6578 7428 7374 7228  dit.setText(str(
+00006f90: 5b44 4f43 554d 454e 545f 315d 2929 0a20  [DOCUMENT_1])). 
+00006fa0: 2020 2020 2020 2061 6464 5f70 6174 682e         add_path.
+00006fb0: 7361 7665 5f70 6174 6828 290a 0a20 2020  save_path()..   
+00006fc0: 2064 6566 2074 6573 745f 6164 645f 7461   def test_add_ta
+00006fd0: 6728 7365 6c66 293a 0a20 2020 2020 2020  g(self):.       
+00006fe0: 2022 2222 5465 7374 7320 7468 6520 706f   """Tests the po
+00006ff0: 702d 7570 2061 6464 696e 6720 6120 7461  p-up adding a ta
+00007000: 672e 2222 220a 0a20 2020 2020 2020 2070  g."""..        p
+00007010: 726f 6a65 6374 5f38 5f70 6174 6820 3d20  roject_8_path = 
+00007020: 7365 6c66 2e67 6574 5f6e 6577 5f74 6573  self.get_new_tes
+00007030: 745f 7072 6f6a 6563 7428 290a 2020 2020  t_project().    
+00007040: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
+00007050: 6e64 6f77 2e73 7769 7463 685f 7072 6f6a  ndow.switch_proj
+00007060: 6563 7428 7072 6f6a 6563 745f 385f 7061  ect(project_8_pa
+00007070: 7468 2c20 2270 726f 6a65 6374 5f38 2229  th, "project_8")
+00007080: 0a0a 2020 2020 2020 2020 2320 4d6f 636b  ..        # Mock
+00007090: 7320 7468 6520 6578 6563 7574 696f 6e20  s the execution 
+000070a0: 6f66 2061 2064 6961 6c6f 6720 626f 7820  of a dialog box 
+000070b0: 616e 6420 636c 6963 6b69 6e67 2063 6c6f  and clicking clo
+000070c0: 7365 0a20 2020 2020 2020 2051 4d65 7373  se.        QMess
+000070d0: 6167 6542 6f78 2e65 7865 6320 3d20 6c61  ageBox.exec = la
+000070e0: 6d62 6461 2073 656c 665f 2c20 2a61 7267  mbda self_, *arg
+000070f0: 733a 2073 656c 665f 2e63 6c6f 7365 2829  s: self_.close()
+00007100: 0a0a 2020 2020 2020 2020 2320 5465 7374  ..        # Test
+00007110: 696e 6720 7769 7468 6f75 7420 7461 6720  ing without tag 
+00007120: 6e61 6d65 0a20 2020 2020 2020 2073 656c  name.        sel
+00007130: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
+00007140: 7461 5f62 726f 7773 6572 2e61 6464 5f74  ta_browser.add_t
+00007150: 6167 5f61 6374 696f 6e2e 7472 6967 6765  ag_action.trigge
+00007160: 7228 290a 2020 2020 2020 2020 6164 645f  r().        add_
+00007170: 7461 6720 3d20 7365 6c66 2e6d 6169 6e5f  tag = self.main_
+00007180: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
+00007190: 7365 722e 706f 705f 7570 5f61 6464 5f74  ser.pop_up_add_t
+000071a0: 6167 0a20 2020 2020 2020 2023 2051 5469  ag.        # QTi
+000071b0: 6d65 722e 7369 6e67 6c65 5368 6f74 2831  mer.singleShot(1
+000071c0: 3030 302c 2073 656c 662e 6578 6563 7574  000, self.execut
+000071d0: 655f 514d 6573 7361 6765 426f 785f 636c  e_QMessageBox_cl
+000071e0: 6963 6b43 6c6f 7365 290a 2020 2020 2020  ickClose).      
+000071f0: 2020 5154 6573 742e 6d6f 7573 6543 6c69    QTest.mouseCli
+00007200: 636b 2861 6464 5f74 6167 2e70 7573 685f  ck(add_tag.push_
+00007210: 6275 7474 6f6e 5f6f 6b2c 2051 742e 4c65  button_ok, Qt.Le
+00007220: 6674 4275 7474 6f6e 290a 2020 2020 2020  ftButton).      
+00007230: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00007240: 616c 2861 6464 5f74 6167 2e6d 7367 2e74  al(add_tag.msg.t
+00007250: 6578 7428 292c 2022 5468 6520 7461 6720  ext(), "The tag 
+00007260: 6e61 6d65 2063 616e 6e6f 7420 6265 2065  name cannot be e
+00007270: 6d70 7479 2229 0a0a 2020 2020 2020 2020  mpty")..        
+00007280: 5141 7070 6c69 6361 7469 6f6e 2e70 726f  QApplication.pro
+00007290: 6365 7373 4576 656e 7473 2829 0a0a 2020  cessEvents()..  
+000072a0: 2020 2020 2020 2320 5465 7374 696e 6720        # Testing 
+000072b0: 7769 7468 2074 6167 206e 616d 6520 616c  with tag name al
+000072c0: 7265 6164 7920 6578 6973 7469 6e67 0a20  ready existing. 
+000072d0: 2020 2020 2020 2061 6464 5f74 6167 2e74         add_tag.t
+000072e0: 6578 745f 6564 6974 5f74 6167 5f6e 616d  ext_edit_tag_nam
+000072f0: 652e 7365 7454 6578 7428 2254 7970 6522  e.setText("Type"
+00007300: 290a 2020 2020 2020 2020 2320 5154 696d  ).        # QTim
+00007310: 6572 2e73 696e 676c 6553 686f 7428 3130  er.singleShot(10
+00007320: 3030 2c20 7365 6c66 2e65 7865 6375 7465  00, self.execute
+00007330: 5f51 4d65 7373 6167 6542 6f78 5f63 6c69  _QMessageBox_cli
+00007340: 636b 436c 6f73 6529 0a20 2020 2020 2020  ckClose).       
+00007350: 2051 5465 7374 2e6d 6f75 7365 436c 6963   QTest.mouseClic
+00007360: 6b28 6164 645f 7461 672e 7075 7368 5f62  k(add_tag.push_b
+00007370: 7574 746f 6e5f 6f6b 2c20 5174 2e4c 6566  utton_ok, Qt.Lef
+00007380: 7442 7574 746f 6e29 0a20 2020 2020 2020  tButton).       
+00007390: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+000073a0: 6c28 6164 645f 7461 672e 6d73 672e 7465  l(add_tag.msg.te
+000073b0: 7874 2829 2c20 2254 6869 7320 7461 6720  xt(), "This tag 
+000073c0: 6e61 6d65 2061 6c72 6561 6479 2065 7869  name already exi
+000073d0: 7374 7322 290a 0a20 2020 2020 2020 2051  sts")..        Q
+000073e0: 4170 706c 6963 6174 696f 6e2e 7072 6f63  Application.proc
+000073f0: 6573 7345 7665 6e74 7328 290a 0a20 2020  essEvents()..   
+00007400: 2020 2020 2023 2054 6573 7469 6e67 2077       # Testing w
+00007410: 6974 6820 7772 6f6e 6720 7479 7065 0a20  ith wrong type. 
+00007420: 2020 2020 2020 2061 6464 5f74 6167 2e74         add_tag.t
+00007430: 6578 745f 6564 6974 5f74 6167 5f6e 616d  ext_edit_tag_nam
+00007440: 652e 7365 7454 6578 7428 2254 6573 7422  e.setText("Test"
+00007450: 290a 2020 2020 2020 2020 6164 645f 7461  ).        add_ta
+00007460: 672e 636f 6d62 6f5f 626f 785f 7479 7065  g.combo_box_type
+00007470: 2e73 6574 4375 7272 656e 7454 6578 7428  .setCurrentText(
+00007480: 4649 454c 445f 5459 5045 5f49 4e54 4547  FIELD_TYPE_INTEG
+00007490: 4552 290a 2020 2020 2020 2020 6164 645f  ER).        add_
+000074a0: 7461 672e 7479 7065 203d 2046 4945 4c44  tag.type = FIELD
+000074b0: 5f54 5950 455f 494e 5445 4745 520a 2020  _TYPE_INTEGER.  
+000074c0: 2020 2020 2020 6164 645f 7461 672e 7465        add_tag.te
+000074d0: 7874 5f65 6469 745f 6465 6661 756c 745f  xt_edit_default_
+000074e0: 7661 6c75 652e 7365 7454 6578 7428 2253  value.setText("S
+000074f0: 686f 756c 6420 6265 2069 6e74 6567 6572  hould be integer
+00007500: 2229 0a20 2020 2020 2020 2023 2051 5469  ").        # QTi
+00007510: 6d65 722e 7369 6e67 6c65 5368 6f74 2831  mer.singleShot(1
+00007520: 3030 302c 2073 656c 662e 6578 6563 7574  000, self.execut
+00007530: 655f 514d 6573 7361 6765 426f 785f 636c  e_QMessageBox_cl
+00007540: 6963 6b43 6c6f 7365 290a 2020 2020 2020  ickClose).      
+00007550: 2020 5154 6573 742e 6d6f 7573 6543 6c69    QTest.mouseCli
+00007560: 636b 2861 6464 5f74 6167 2e70 7573 685f  ck(add_tag.push_
+00007570: 6275 7474 6f6e 5f6f 6b2c 2051 742e 4c65  button_ok, Qt.Le
+00007580: 6674 4275 7474 6f6e 290a 2020 2020 2020  ftButton).      
+00007590: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+000075a0: 616c 2861 6464 5f74 6167 2e6d 7367 2e74  al(add_tag.msg.t
+000075b0: 6578 7428 292c 2022 496e 7661 6c69 6420  ext(), "Invalid 
+000075c0: 6465 6661 756c 7420 7661 6c75 6522 290a  default value").
+000075d0: 0a20 2020 2020 2020 2051 4170 706c 6963  .        QApplic
+000075e0: 6174 696f 6e2e 7072 6f63 6573 7345 7665  ation.processEve
+000075f0: 6e74 7328 290a 0a20 2020 2020 2020 2023  nts()..        #
+00007600: 2054 6573 7469 6e67 2077 6865 6e20 6576   Testing when ev
+00007610: 6572 7974 6869 6e67 2069 7320 6f6b 0a20  erything is ok. 
+00007620: 2020 2020 2020 2061 6464 5f74 6167 2e74         add_tag.t
+00007630: 6578 745f 6564 6974 5f74 6167 5f6e 616d  ext_edit_tag_nam
+00007640: 652e 7365 7454 6578 7428 2254 6573 7422  e.setText("Test"
+00007650: 290a 2020 2020 2020 2020 6164 645f 7461  ).        add_ta
+00007660: 672e 7465 7874 5f65 6469 745f 6465 6661  g.text_edit_defa
+00007670: 756c 745f 7661 6c75 652e 7365 7454 6578  ult_value.setTex
+00007680: 7428 2264 6566 5f76 616c 7565 2229 0a20  t("def_value"). 
+00007690: 2020 2020 2020 2061 6464 5f74 6167 2e74         add_tag.t
+000076a0: 7970 6520 3d20 4649 454c 445f 5459 5045  ype = FIELD_TYPE
+000076b0: 5f53 5452 494e 470a 0a20 2020 2020 2020  _STRING..       
+000076c0: 2051 5465 7374 2e71 5761 6974 2835 3030   QTest.qWait(500
+000076d0: 290a 0a20 2020 2020 2020 2051 5465 7374  )..        QTest
+000076e0: 2e6d 6f75 7365 436c 6963 6b28 6164 645f  .mouseClick(add_
+000076f0: 7461 672e 7075 7368 5f62 7574 746f 6e5f  tag.push_button_
+00007700: 6f6b 2c20 5174 2e4c 6566 7442 7574 746f  ok, Qt.LeftButto
+00007710: 6e29 0a20 2020 2020 2020 2073 656c 662e  n).        self.
+00007720: 6173 7365 7274 5472 7565 280a 2020 2020  assertTrue(.    
+00007730: 2020 2020 2020 2020 2254 6573 7422 0a20          "Test". 
+00007740: 2020 2020 2020 2020 2020 2069 6e20 7365             in se
+00007750: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
+00007760: 726f 6a65 6374 2e73 6573 7369 6f6e 2e67  roject.session.g
+00007770: 6574 5f66 6965 6c64 735f 6e61 6d65 7328  et_fields_names(
+00007780: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007790: 2043 4f4c 4c45 4354 494f 4e5f 4355 5252   COLLECTION_CURR
+000077a0: 454e 540a 2020 2020 2020 2020 2020 2020  ENT.            
+000077b0: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
+000077c0: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
+000077d0: 7275 6528 0a20 2020 2020 2020 2020 2020  rue(.           
+000077e0: 2022 5465 7374 220a 2020 2020 2020 2020   "Test".        
+000077f0: 2020 2020 696e 2073 656c 662e 6d61 696e      in self.main
+00007800: 5f77 696e 646f 772e 7072 6f6a 6563 742e  _window.project.
+00007810: 7365 7373 696f 6e2e 6765 745f 6669 656c  session.get_fiel
+00007820: 6473 5f6e 616d 6573 280a 2020 2020 2020  ds_names(.      
+00007830: 2020 2020 2020 2020 2020 434f 4c4c 4543            COLLEC
+00007840: 5449 4f4e 5f49 4e49 5449 414c 0a20 2020  TION_INITIAL.   
+00007850: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+00007860: 2020 2029 0a0a 2020 2020 2020 2020 666f     )..        fo
+00007870: 7220 646f 6375 6d65 6e74 2069 6e20 7365  r document in se
+00007880: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
+00007890: 726f 6a65 6374 2e73 6573 7369 6f6e 2e67  roject.session.g
+000078a0: 6574 5f64 6f63 756d 656e 7473 5f6e 616d  et_documents_nam
+000078b0: 6573 280a 2020 2020 2020 2020 2020 2020  es(.            
+000078c0: 434f 4c4c 4543 5449 4f4e 5f43 5552 5245  COLLECTION_CURRE
+000078d0: 4e54 0a20 2020 2020 2020 2029 3a0a 2020  NT.        ):.  
+000078e0: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
+000078f0: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
+00007900: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00007910: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 726f  .main_window.pro
+00007920: 6a65 6374 2e73 6573 7369 6f6e 2e67 6574  ject.session.get
+00007930: 5f76 616c 7565 280a 2020 2020 2020 2020  _value(.        
+00007940: 2020 2020 2020 2020 2020 2020 434f 4c4c              COLL
+00007950: 4543 5449 4f4e 5f43 5552 5245 4e54 2c20  ECTION_CURRENT, 
+00007960: 646f 6375 6d65 6e74 2c20 2254 6573 7422  document, "Test"
 00007970: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00007980: 2043 4f4c 4c45 4354 494f 4e5f 494e 4954   COLLECTION_INIT
-00007990: 4941 4c0a 2020 2020 2020 2020 2020 2020  IAL.            
-000079a0: 290a 2020 2020 2020 2020 290a 0a20 2020  ).        )..   
-000079b0: 2020 2020 2066 6f72 2064 6f63 756d 656e       for documen
-000079c0: 7420 696e 2073 656c 662e 6d61 696e 5f77  t in self.main_w
-000079d0: 696e 646f 772e 7072 6f6a 6563 742e 7365  indow.project.se
-000079e0: 7373 696f 6e2e 6765 745f 646f 6375 6d65  ssion.get_docume
-000079f0: 6e74 735f 6e61 6d65 7328 0a20 2020 2020  nts_names(.     
-00007a00: 2020 2020 2020 2043 4f4c 4c45 4354 494f         COLLECTIO
-00007a10: 4e5f 4355 5252 454e 540a 2020 2020 2020  N_CURRENT.      
-00007a20: 2020 293a 0a20 2020 2020 2020 2020 2020    ):.           
-00007a30: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00007a40: 6c28 0a20 2020 2020 2020 2020 2020 2020  l(.             
-00007a50: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
-00007a60: 646f 772e 7072 6f6a 6563 742e 7365 7373  dow.project.sess
-00007a70: 696f 6e2e 6765 745f 7661 6c75 6528 0a20  ion.get_value(. 
-00007a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007a90: 2020 2043 4f4c 4c45 4354 494f 4e5f 4355     COLLECTION_CU
-00007aa0: 5252 454e 542c 2064 6f63 756d 656e 742c  RRENT, document,
-00007ab0: 2022 5465 7374 220a 2020 2020 2020 2020   "Test".        
-00007ac0: 2020 2020 2020 2020 292c 0a20 2020 2020          ),.     
-00007ad0: 2020 2020 2020 2020 2020 2022 6465 665f             "def_
-00007ae0: 7661 6c75 6522 2c0a 2020 2020 2020 2020  value",.        
-00007af0: 2020 2020 290a 0a20 2020 2020 2020 2066      )..        f
-00007b00: 6f72 2064 6f63 756d 656e 7420 696e 2073  or document in s
-00007b10: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00007b20: 7072 6f6a 6563 742e 7365 7373 696f 6e2e  project.session.
-00007b30: 6765 745f 646f 6375 6d65 6e74 735f 6e61  get_documents_na
-00007b40: 6d65 7328 0a20 2020 2020 2020 2020 2020  mes(.           
-00007b50: 2043 4f4c 4c45 4354 494f 4e5f 494e 4954   COLLECTION_INIT
-00007b60: 4941 4c0a 2020 2020 2020 2020 293a 0a20  IAL.        ):. 
-00007b70: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00007b80: 6173 7365 7274 4571 7561 6c28 0a20 2020  assertEqual(.   
-00007b90: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00007ba0: 662e 6d61 696e 5f77 696e 646f 772e 7072  f.main_window.pr
-00007bb0: 6f6a 6563 742e 7365 7373 696f 6e2e 6765  oject.session.ge
-00007bc0: 745f 7661 6c75 6528 0a20 2020 2020 2020  t_value(.       
-00007bd0: 2020 2020 2020 2020 2020 2020 2043 4f4c               COL
-00007be0: 4c45 4354 494f 4e5f 494e 4954 4941 4c2c  LECTION_INITIAL,
-00007bf0: 2064 6f63 756d 656e 742c 2022 5465 7374   document, "Test
-00007c00: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-00007c10: 2020 292c 0a20 2020 2020 2020 2020 2020    ),.           
-00007c20: 2020 2020 2022 6465 665f 7661 6c75 6522       "def_value"
-00007c30: 2c0a 2020 2020 2020 2020 2020 2020 290a  ,.            ).
-00007c40: 0a20 2020 2020 2020 2074 6573 745f 636f  .        test_co
-00007c50: 6c75 6d6e 203d 2073 656c 662e 6d61 696e  lumn = self.main
-00007c60: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
-00007c70: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
-00007c80: 6765 745f 7461 675f 636f 6c75 6d6e 280a  get_tag_column(.
-00007c90: 2020 2020 2020 2020 2020 2020 2254 6573              "Tes
-00007ca0: 7422 0a20 2020 2020 2020 2029 0a0a 2020  t".        )..  
-00007cb0: 2020 2020 2020 666f 7220 726f 7720 696e        for row in
-00007cc0: 2072 616e 6765 280a 2020 2020 2020 2020   range(.        
-00007cd0: 2020 2020 302c 2073 656c 662e 6d61 696e      0, self.main
-00007ce0: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
-00007cf0: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
-00007d00: 726f 7743 6f75 6e74 2829 0a20 2020 2020  rowCount().     
-00007d10: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
-00007d20: 2020 6974 656d 203d 2073 656c 662e 6d61    item = self.ma
-00007d30: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
-00007d40: 726f 7773 6572 2e74 6162 6c65 5f64 6174  rowser.table_dat
-00007d50: 612e 6974 656d 280a 2020 2020 2020 2020  a.item(.        
-00007d60: 2020 2020 2020 2020 726f 772c 2074 6573          row, tes
-00007d70: 745f 636f 6c75 6d6e 0a20 2020 2020 2020  t_column.       
-00007d80: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
-00007d90: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00007da0: 7561 6c28 6974 656d 2e74 6578 7428 292c  ual(item.text(),
-00007db0: 2022 6465 665f 7661 6c75 6522 290a 0a20   "def_value").. 
-00007dc0: 2020 2020 2020 2051 4170 706c 6963 6174         QApplicat
-00007dd0: 696f 6e2e 7072 6f63 6573 7345 7665 6e74  ion.processEvent
-00007de0: 7328 290a 0a20 2020 2020 2020 2023 2054  s()..        # T
-00007df0: 6573 7469 6e67 2077 6974 6820 6c69 7374  esting with list
-00007e00: 2074 7970 650a 2020 2020 2020 2020 7365   type.        se
-00007e10: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
-00007e20: 6174 615f 6272 6f77 7365 722e 6164 645f  ata_browser.add_
-00007e30: 7461 675f 6163 7469 6f6e 2e74 7269 6767  tag_action.trigg
-00007e40: 6572 2829 0a20 2020 2020 2020 2061 6464  er().        add
-00007e50: 5f74 6167 203d 2073 656c 662e 6d61 696e  _tag = self.main
-00007e60: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
-00007e70: 7773 6572 2e70 6f70 5f75 705f 6164 645f  wser.pop_up_add_
-00007e80: 7461 670a 2020 2020 2020 2020 6164 645f  tag.        add_
-00007e90: 7461 672e 7465 7874 5f65 6469 745f 7461  tag.text_edit_ta
-00007ea0: 675f 6e61 6d65 2e73 6574 5465 7874 2822  g_name.setText("
-00007eb0: 5465 7374 5f6c 6973 7422 290a 0a20 2020  Test_list")..   
-00007ec0: 2020 2020 2063 6f6d 626f 5f62 6f78 5f74       combo_box_t
-00007ed0: 7970 6573 203d 205b 0a20 2020 2020 2020  ypes = [.       
-00007ee0: 2020 2020 2022 5374 7269 6e67 222c 0a20       "String",. 
-00007ef0: 2020 2020 2020 2020 2020 2022 496e 7465             "Inte
-00007f00: 6765 7222 2c0a 2020 2020 2020 2020 2020  ger",.          
-00007f10: 2020 2246 6c6f 6174 222c 0a20 2020 2020    "Float",.     
-00007f20: 2020 2020 2020 2022 426f 6f6c 6561 6e22         "Boolean"
-00007f30: 2c0a 2020 2020 2020 2020 2020 2020 2244  ,.            "D
-00007f40: 6174 6522 2c0a 2020 2020 2020 2020 2020  ate",.          
-00007f50: 2020 2244 6174 6574 696d 6522 2c0a 2020    "Datetime",.  
-00007f60: 2020 2020 2020 2020 2020 2254 696d 6522            "Time"
-00007f70: 2c0a 2020 2020 2020 2020 2020 2020 2253  ,.            "S
-00007f80: 7472 696e 6720 4c69 7374 222c 0a20 2020  tring List",.   
-00007f90: 2020 2020 2020 2020 2022 496e 7465 6765           "Intege
-00007fa0: 7220 4c69 7374 222c 0a20 2020 2020 2020  r List",.       
-00007fb0: 2020 2020 2022 466c 6f61 7420 4c69 7374       "Float List
-00007fc0: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-00007fd0: 426f 6f6c 6561 6e20 4c69 7374 222c 0a20  Boolean List",. 
-00007fe0: 2020 2020 2020 2020 2020 2022 4461 7465             "Date
-00007ff0: 204c 6973 7422 2c0a 2020 2020 2020 2020   List",.        
-00008000: 2020 2020 2244 6174 6574 696d 6520 4c69      "Datetime Li
-00008010: 7374 222c 0a20 2020 2020 2020 2020 2020  st",.           
-00008020: 2022 5469 6d65 204c 6973 7422 2c0a 2020   "Time List",.  
-00008030: 2020 2020 2020 5d0a 0a20 2020 2020 2020        ]..       
-00008040: 2066 6f72 2064 6174 615f 7479 7065 2069   for data_type i
-00008050: 6e20 636f 6d62 6f5f 626f 785f 7479 7065  n combo_box_type
-00008060: 733a 0a20 2020 2020 2020 2020 2020 2061  s:.            a
-00008070: 6464 5f74 6167 2e63 6f6d 626f 5f62 6f78  dd_tag.combo_box
-00008080: 5f74 7970 652e 7365 7443 7572 7265 6e74  _type.setCurrent
-00008090: 5465 7874 2864 6174 615f 7479 7065 290a  Text(data_type).
-000080a0: 0a20 2020 2020 2020 2061 6464 5f74 6167  .        add_tag
-000080b0: 2e63 6f6d 626f 5f62 6f78 5f74 7970 652e  .combo_box_type.
-000080c0: 7365 7443 7572 7265 6e74 5465 7874 2822  setCurrentText("
-000080d0: 496e 7465 6765 7220 4c69 7374 2229 0a20  Integer List"). 
-000080e0: 2020 2020 2020 2051 5465 7374 2e6d 6f75         QTest.mou
-000080f0: 7365 436c 6963 6b28 6164 645f 7461 672e  seClick(add_tag.
-00008100: 7465 7874 5f65 6469 745f 6465 6661 756c  text_edit_defaul
-00008110: 745f 7661 6c75 652c 2051 742e 4c65 6674  t_value, Qt.Left
-00008120: 4275 7474 6f6e 290a 2020 2020 2020 2020  Button).        
-00008130: 5154 6573 742e 6d6f 7573 6543 6c69 636b  QTest.mouseClick
-00008140: 280a 2020 2020 2020 2020 2020 2020 6164  (.            ad
-00008150: 645f 7461 672e 7465 7874 5f65 6469 745f  d_tag.text_edit_
-00008160: 6465 6661 756c 745f 7661 6c75 652e 6c69  default_value.li
-00008170: 7374 5f63 7265 6174 696f 6e2e 6164 645f  st_creation.add_
-00008180: 656c 656d 656e 745f 6c61 6265 6c2c 0a20  element_label,. 
-00008190: 2020 2020 2020 2020 2020 2051 742e 4c65             Qt.Le
-000081a0: 6674 4275 7474 6f6e 2c0a 2020 2020 2020  ftButton,.      
-000081b0: 2020 290a 2020 2020 2020 2020 7461 626c    ).        tabl
-000081c0: 6520 3d20 6164 645f 7461 672e 7465 7874  e = add_tag.text
-000081d0: 5f65 6469 745f 6465 6661 756c 745f 7661  _edit_default_va
-000081e0: 6c75 652e 6c69 7374 5f63 7265 6174 696f  lue.list_creatio
-000081f0: 6e2e 7461 626c 650a 2020 2020 2020 2020  n.table.        
-00008200: 6974 656d 203d 2051 5461 626c 6557 6964  item = QTableWid
-00008210: 6765 7449 7465 6d28 290a 2020 2020 2020  getItem().      
-00008220: 2020 6974 656d 2e73 6574 5465 7874 2873    item.setText(s
-00008230: 7472 2831 2929 0a20 2020 2020 2020 2074  tr(1)).        t
-00008240: 6162 6c65 2e73 6574 4974 656d 2830 2c20  able.setItem(0, 
-00008250: 302c 2069 7465 6d29 0a20 2020 2020 2020  0, item).       
-00008260: 2069 7465 6d20 3d20 5154 6162 6c65 5769   item = QTableWi
-00008270: 6467 6574 4974 656d 2829 0a20 2020 2020  dgetItem().     
-00008280: 2020 2069 7465 6d2e 7365 7454 6578 7428     item.setText(
-00008290: 7374 7228 3229 290a 2020 2020 2020 2020  str(2)).        
-000082a0: 7461 626c 652e 7365 7449 7465 6d28 302c  table.setItem(0,
-000082b0: 2031 2c20 6974 656d 290a 2020 2020 2020   1, item).      
-000082c0: 2020 6974 656d 203d 2051 5461 626c 6557    item = QTableW
-000082d0: 6964 6765 7449 7465 6d28 290a 2020 2020  idgetItem().    
-000082e0: 2020 2020 6974 656d 2e73 6574 5465 7874      item.setText
-000082f0: 2873 7472 2833 2929 0a20 2020 2020 2020  (str(3)).       
-00008300: 2074 6162 6c65 2e73 6574 4974 656d 2830   table.setItem(0
-00008310: 2c20 322c 2069 7465 6d29 0a0a 2020 2020  , 2, item)..    
-00008320: 2020 2020 5154 6573 742e 7157 6169 7428      QTest.qWait(
-00008330: 3530 3029 0a0a 2020 2020 2020 2020 5154  500)..        QT
-00008340: 6573 742e 6d6f 7573 6543 6c69 636b 280a  est.mouseClick(.
-00008350: 2020 2020 2020 2020 2020 2020 6164 645f              add_
-00008360: 7461 672e 7465 7874 5f65 6469 745f 6465  tag.text_edit_de
-00008370: 6661 756c 745f 7661 6c75 652e 6c69 7374  fault_value.list
-00008380: 5f63 7265 6174 696f 6e2e 6f6b 5f62 7574  _creation.ok_but
-00008390: 746f 6e2c 0a20 2020 2020 2020 2020 2020  ton,.           
-000083a0: 2051 742e 4c65 6674 4275 7474 6f6e 2c0a   Qt.LeftButton,.
-000083b0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-000083c0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-000083d0: 616c 2861 6464 5f74 6167 2e74 6578 745f  al(add_tag.text_
-000083e0: 6564 6974 5f64 6566 6175 6c74 5f76 616c  edit_default_val
-000083f0: 7565 2e74 6578 7428 292c 2022 5b31 2c20  ue.text(), "[1, 
-00008400: 322c 2033 5d22 290a 2020 2020 2020 2020  2, 3]").        
-00008410: 5154 6573 742e 6d6f 7573 6543 6c69 636b  QTest.mouseClick
-00008420: 2861 6464 5f74 6167 2e70 7573 685f 6275  (add_tag.push_bu
-00008430: 7474 6f6e 5f6f 6b2c 2051 742e 4c65 6674  tton_ok, Qt.Left
-00008440: 4275 7474 6f6e 290a 0a20 2020 2020 2020  Button)..       
-00008450: 2074 6573 745f 6c69 7374 5f63 6f6c 756d   test_list_colum
-00008460: 6e20 3d20 280a 2020 2020 2020 2020 2020  n = (.          
-00008470: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
-00008480: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
-00008490: 7461 626c 655f 6461 7461 2e67 6574 5f74  table_data.get_t
-000084a0: 6167 5f63 6f6c 756d 6e28 0a20 2020 2020  ag_column(.     
-000084b0: 2020 2020 2020 2020 2020 2022 5465 7374             "Test
-000084c0: 5f6c 6973 7422 0a20 2020 2020 2020 2020  _list".         
-000084d0: 2020 2029 0a20 2020 2020 2020 2029 0a0a     ).        )..
-000084e0: 2020 2020 2020 2020 666f 7220 726f 7720          for row 
-000084f0: 696e 2072 616e 6765 280a 2020 2020 2020  in range(.      
-00008500: 2020 2020 2020 302c 2073 656c 662e 6d61        0, self.ma
-00008510: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
-00008520: 726f 7773 6572 2e74 6162 6c65 5f64 6174  rowser.table_dat
-00008530: 612e 726f 7743 6f75 6e74 2829 0a20 2020  a.rowCount().   
-00008540: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
-00008550: 2020 2020 6974 656d 203d 2073 656c 662e      item = self.
-00008560: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
-00008570: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
-00008580: 6174 612e 6974 656d 280a 2020 2020 2020  ata.item(.      
-00008590: 2020 2020 2020 2020 2020 726f 772c 2074            row, t
-000085a0: 6573 745f 6c69 7374 5f63 6f6c 756d 6e0a  est_list_column.
-000085b0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-000085c0: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
-000085d0: 7373 6572 7445 7175 616c 2869 7465 6d2e  ssertEqual(item.
-000085e0: 7465 7874 2829 2c20 225b 312c 2032 2c20  text(), "[1, 2, 
-000085f0: 335d 2229 0a0a 2020 2020 2020 2020 5141  3]")..        QA
-00008600: 7070 6c69 6361 7469 6f6e 2e70 726f 6365  pplication.proce
-00008610: 7373 4576 656e 7473 2829 0a0a 2020 2020  ssEvents()..    
-00008620: 6465 6620 7465 7374 5f61 6476 616e 6365  def test_advance
-00008630: 645f 7365 6172 6368 2873 656c 6629 3a0a  d_search(self):.
-00008640: 2020 2020 2020 2020 2222 2254 6573 7473          """Tests
-00008650: 2074 6865 2061 6476 616e 6365 6420 7365   the advanced se
-00008660: 6172 6368 2077 6964 6765 742e 2222 220a  arch widget.""".
-00008670: 0a20 2020 2020 2020 2070 726f 6a65 6374  .        project
-00008680: 5f38 5f70 6174 6820 3d20 7365 6c66 2e67  _8_path = self.g
-00008690: 6574 5f6e 6577 5f74 6573 745f 7072 6f6a  et_new_test_proj
-000086a0: 6563 7428 290a 2020 2020 2020 2020 7365  ect().        se
-000086b0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e73  lf.main_window.s
-000086c0: 7769 7463 685f 7072 6f6a 6563 7428 7072  witch_project(pr
-000086d0: 6f6a 6563 745f 385f 7061 7468 2c20 2270  oject_8_path, "p
-000086e0: 726f 6a65 6374 5f38 2229 0a0a 2020 2020  roject_8")..    
-000086f0: 2020 2020 7363 616e 735f 6469 7370 6c61      scans_displa
-00008700: 7965 6420 3d20 5b5d 0a0a 2020 2020 2020  yed = []..      
-00008710: 2020 666f 7220 726f 7720 696e 2072 616e    for row in ran
-00008720: 6765 280a 2020 2020 2020 2020 2020 2020  ge(.            
-00008730: 302c 2073 656c 662e 6d61 696e 5f77 696e  0, self.main_win
-00008740: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
-00008750: 2e74 6162 6c65 5f64 6174 612e 726f 7743  .table_data.rowC
-00008760: 6f75 6e74 2829 0a20 2020 2020 2020 2029  ount().        )
-00008770: 3a0a 2020 2020 2020 2020 2020 2020 6974  :.            it
-00008780: 656d 203d 2073 656c 662e 6d61 696e 5f77  em = self.main_w
-00008790: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
-000087a0: 6572 2e74 6162 6c65 5f64 6174 612e 6974  er.table_data.it
-000087b0: 656d 2872 6f77 2c20 3029 0a20 2020 2020  em(row, 0).     
-000087c0: 2020 2020 2020 2073 6361 6e5f 6e61 6d65         scan_name
-000087d0: 203d 2069 7465 6d2e 7465 7874 2829 0a0a   = item.text()..
-000087e0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-000087f0: 6f74 2073 656c 662e 6d61 696e 5f77 696e  ot self.main_win
-00008800: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
-00008810: 2e74 6162 6c65 5f64 6174 612e 6973 526f  .table_data.isRo
-00008820: 7748 6964 6465 6e28 726f 7729 3a0a 2020  wHidden(row):.  
-00008830: 2020 2020 2020 2020 2020 2020 2020 7363                sc
-00008840: 616e 735f 6469 7370 6c61 7965 642e 6170  ans_displayed.ap
-00008850: 7065 6e64 2873 6361 6e5f 6e61 6d65 290a  pend(scan_name).
-00008860: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00008870: 7365 7274 4571 7561 6c28 6c65 6e28 7363  sertEqual(len(sc
-00008880: 616e 735f 6469 7370 6c61 7965 6429 2c20  ans_displayed), 
-00008890: 3929 0a20 2020 2020 2020 2073 656c 662e  9).        self.
-000088a0: 6173 7365 7274 5472 7565 280a 2020 2020  assertTrue(.    
-000088b0: 2020 2020 2020 2020 2264 6174 612f 7261          "data/ra
-000088c0: 775f 6461 7461 2f47 7565 7262 6574 2d43  w_data/Guerbet-C
-000088d0: 362d 3230 3134 2d52 6174 2d4b 3532 2d54  6-2014-Rat-K52-T
-000088e0: 7562 6532 3722 0a20 2020 2020 2020 2020  ube27".         
-000088f0: 2020 2022 2d32 3031 342d 3032 2d31 3431     "-2014-02-141
-00008900: 3032 3331 372d 3031 2d47 315f 4775 6572  02317-01-G1_Guer
-00008910: 6265 745f 416e 6174 2d52 4152 4522 0a20  bet_Anat-RARE". 
-00008920: 2020 2020 2020 2020 2020 2022 7076 6d2d             "pvm-
-00008930: 3030 3032 3230 5f30 3030 2e6e 6969 2220  000220_000.nii" 
-00008940: 696e 2073 6361 6e73 5f64 6973 706c 6179  in scans_display
-00008950: 6564 0a20 2020 2020 2020 2029 0a20 2020  ed.        ).   
-00008960: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00008970: 5472 7565 280a 2020 2020 2020 2020 2020  True(.          
-00008980: 2020 2264 6174 612f 7261 775f 6461 7461    "data/raw_data
-00008990: 2f47 7565 7262 6574 2d43 362d 3230 3134  /Guerbet-C6-2014
-000089a0: 2d52 6174 2d4b 3532 2d54 7562 6532 3722  -Rat-K52-Tube27"
-000089b0: 0a20 2020 2020 2020 2020 2020 2022 2d32  .            "-2
-000089c0: 3031 342d 3032 2d31 3431 3032 3331 372d  014-02-14102317-
-000089d0: 3034 2d47 335f 4775 6572 6265 745f 4d44  04-G3_Guerbet_MD
-000089e0: 4546 542d 4d44 4546 5422 0a20 2020 2020  EFT-MDEFT".     
-000089f0: 2020 2020 2020 2022 7076 6d2d 3030 3039         "pvm-0009
-00008a00: 3430 5f38 3030 2e6e 6969 2220 696e 2073  40_800.nii" in s
-00008a10: 6361 6e73 5f64 6973 706c 6179 6564 0a20  cans_displayed. 
-00008a20: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00008a30: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
-00008a40: 280a 2020 2020 2020 2020 2020 2020 2264  (.            "d
-00008a50: 6174 612f 7261 775f 6461 7461 2f47 7565  ata/raw_data/Gue
-00008a60: 7262 6574 2d43 362d 3230 3134 2d52 6174  rbet-C6-2014-Rat
-00008a70: 2d4b 3532 2d54 7562 6532 3722 0a20 2020  -K52-Tube27".   
-00008a80: 2020 2020 2020 2020 2022 2d32 3031 342d           "-2014-
-00008a90: 3032 2d31 3431 3032 3331 372d 3035 2d47  02-14102317-05-G
-00008aa0: 345f 4775 6572 6265 745f 5431 5345 5f38  4_Guerbet_T1SE_8
-00008ab0: 3030 2d52 4152 4522 0a20 2020 2020 2020  00-RARE".       
-00008ac0: 2020 2020 2022 7076 6d2d 3030 3031 3432       "pvm-000142
-00008ad0: 5f34 3030 2e6e 6969 2220 696e 2073 6361  _400.nii" in sca
-00008ae0: 6e73 5f64 6973 706c 6179 6564 0a20 2020  ns_displayed.   
-00008af0: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
-00008b00: 656c 662e 6173 7365 7274 5472 7565 280a  elf.assertTrue(.
-00008b10: 2020 2020 2020 2020 2020 2020 2264 6174              "dat
-00008b20: 612f 7261 775f 6461 7461 2f47 7565 7262  a/raw_data/Guerb
-00008b30: 6574 2d43 362d 3230 3134 2d52 6174 2d4b  et-C6-2014-Rat-K
-00008b40: 3532 2d54 7562 6532 3722 0a20 2020 2020  52-Tube27".     
-00008b50: 2020 2020 2020 2022 2d32 3031 342d 3032         "-2014-02
-00008b60: 2d31 3431 3032 3331 372d 3036 2d47 345f  -14102317-06-G4_
-00008b70: 4775 6572 6265 745f 5431 5345 5f38 3030  Guerbet_T1SE_800
-00008b80: 2d52 4152 4522 0a20 2020 2020 2020 2020  -RARE".         
-00008b90: 2020 2022 7076 6d2d 3030 3031 3432 5f34     "pvm-000142_4
-00008ba0: 3030 2e6e 6969 2220 696e 2073 6361 6e73  00.nii" in scans
-00008bb0: 5f64 6973 706c 6179 6564 0a20 2020 2020  _displayed.     
-00008bc0: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
-00008bd0: 662e 6173 7365 7274 5472 7565 280a 2020  f.assertTrue(.  
-00008be0: 2020 2020 2020 2020 2020 2264 6174 612f            "data/
-00008bf0: 7261 775f 6461 7461 2f47 7565 7262 6574  raw_data/Guerbet
-00008c00: 2d43 362d 3230 3134 2d52 6174 2d4b 3532  -C6-2014-Rat-K52
-00008c10: 2d54 7562 6532 3722 0a20 2020 2020 2020  -Tube27".       
-00008c20: 2020 2020 2022 2d32 3031 342d 3032 2d31       "-2014-02-1
-00008c30: 3431 3032 3331 372d 3038 2d47 345f 4775  4102317-08-G4_Gu
-00008c40: 6572 6265 745f 5431 5345 5f38 3030 2d52  erbet_T1SE_800-R
-00008c50: 4152 4522 0a20 2020 2020 2020 2020 2020  ARE".           
-00008c60: 2022 7076 6d2d 3030 3031 3432 5f34 3030   "pvm-000142_400
-00008c70: 2e6e 6969 2220 696e 2073 6361 6e73 5f64  .nii" in scans_d
-00008c80: 6973 706c 6179 6564 0a20 2020 2020 2020  isplayed.       
-00008c90: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
-00008ca0: 6173 7365 7274 5472 7565 280a 2020 2020  assertTrue(.    
-00008cb0: 2020 2020 2020 2020 2264 6174 612f 7261          "data/ra
-00008cc0: 775f 6461 7461 2f47 7565 7262 6574 2d43  w_data/Guerbet-C
-00008cd0: 362d 3230 3134 2d52 6174 2d4b 3532 2d54  6-2014-Rat-K52-T
-00008ce0: 7562 6532 3722 0a20 2020 2020 2020 2020  ube27".         
-00008cf0: 2020 2022 2d32 3031 342d 3032 2d31 3431     "-2014-02-141
-00008d00: 3032 3331 372d 3039 2d47 345f 4775 6572  02317-09-G4_Guer
-00008d10: 6265 745f 5431 5345 5f38 3030 2d52 4152  bet_T1SE_800-RAR
-00008d20: 4522 0a20 2020 2020 2020 2020 2020 2022  E".            "
-00008d30: 7076 6d2d 3030 3031 3432 5f34 3030 2e6e  pvm-000142_400.n
-00008d40: 6969 2220 696e 2073 6361 6e73 5f64 6973  ii" in scans_dis
-00008d50: 706c 6179 6564 0a20 2020 2020 2020 2029  played.        )
-00008d60: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00008d70: 7365 7274 5472 7565 280a 2020 2020 2020  sertTrue(.      
-00008d80: 2020 2020 2020 2264 6174 612f 7261 775f        "data/raw_
-00008d90: 6461 7461 2f47 7565 7262 6574 2d43 362d  data/Guerbet-C6-
-00008da0: 3230 3134 2d52 6174 2d4b 3532 2d54 7562  2014-Rat-K52-Tub
-00008db0: 6532 3722 0a20 2020 2020 2020 2020 2020  e27".           
-00008dc0: 2022 2d32 3031 342d 3032 2d31 3431 3032   "-2014-02-14102
-00008dd0: 3331 372d 3130 2d47 335f 4775 6572 6265  317-10-G3_Guerbe
-00008de0: 745f 4d44 4546 542d 4d44 4546 5422 0a20  t_MDEFT-MDEFT". 
-00008df0: 2020 2020 2020 2020 2020 2022 7076 6d2d             "pvm-
-00008e00: 3030 3039 3430 5f38 3030 2e6e 6969 2220  000940_800.nii" 
-00008e10: 696e 2073 6361 6e73 5f64 6973 706c 6179  in scans_display
-00008e20: 6564 0a20 2020 2020 2020 2029 0a20 2020  ed.        ).   
-00008e30: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00008e40: 5472 7565 280a 2020 2020 2020 2020 2020  True(.          
-00008e50: 2020 2264 6174 612f 7261 775f 6461 7461    "data/raw_data
-00008e60: 2f47 7565 7262 6574 2d43 362d 3230 3134  /Guerbet-C6-2014
-00008e70: 2d52 6174 2d4b 3532 2d54 7562 6532 3722  -Rat-K52-Tube27"
-00008e80: 0a20 2020 2020 2020 2020 2020 2022 2d32  .            "-2
-00008e90: 3031 342d 3032 2d31 3431 3032 3331 372d  014-02-14102317-
-00008ea0: 3131 2d47 345f 4775 6572 6265 745f 5431  11-G4_Guerbet_T1
-00008eb0: 5345 5f38 3030 2d52 4152 4522 0a20 2020  SE_800-RARE".   
-00008ec0: 2020 2020 2020 2020 2022 7076 6d2d 3030           "pvm-00
-00008ed0: 3031 3432 5f34 3030 2e6e 6969 2220 696e  0142_400.nii" in
-00008ee0: 2073 6361 6e73 5f64 6973 706c 6179 6564   scans_displayed
-00008ef0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00008f00: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-00008f10: 7565 280a 2020 2020 2020 2020 2020 2020  ue(.            
-00008f20: 2264 6174 612f 6465 7269 7665 645f 6461  "data/derived_da
-00008f30: 7461 2f73 4775 6572 6265 742d 4336 2d32  ta/sGuerbet-C6-2
-00008f40: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
-00008f50: 3237 220a 2020 2020 2020 2020 2020 2020  27".            
-00008f60: 222d 3230 3134 2d30 322d 3134 3130 3233  "-2014-02-141023
-00008f70: 3137 2d30 312d 4731 5f47 7565 7262 6574  17-01-G1_Guerbet
-00008f80: 5f41 6e61 742d 5241 5245 220a 2020 2020  _Anat-RARE".    
-00008f90: 2020 2020 2020 2020 2270 766d 2d30 3030          "pvm-000
-00008fa0: 3232 305f 3030 302e 6e69 6922 2069 6e20  220_000.nii" in 
-00008fb0: 7363 616e 735f 6469 7370 6c61 7965 640a  scans_displayed.
-00008fc0: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-00008fd0: 2020 2051 5465 7374 2e6d 6f75 7365 436c     QTest.mouseCl
-00008fe0: 6963 6b28 0a20 2020 2020 2020 2020 2020  ick(.           
-00008ff0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-00009000: 772e 6461 7461 5f62 726f 7773 6572 2e61  w.data_browser.a
-00009010: 6476 616e 6365 645f 7365 6172 6368 5f62  dvanced_search_b
-00009020: 7574 746f 6e2c 2051 742e 4c65 6674 4275  utton, Qt.LeftBu
-00009030: 7474 6f6e 0a20 2020 2020 2020 2029 0a0a  tton.        )..
-00009040: 2020 2020 2020 2020 2320 5465 7374 696e          # Testin
-00009050: 6720 2d20 616e 6420 2b20 6275 7474 6f6e  g - and + button
-00009060: 730a 2020 2020 2020 2020 7365 6c66 2e61  s.        self.a
-00009070: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
-00009080: 2020 2020 2020 2020 312c 206c 656e 2873          1, len(s
-00009090: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-000090a0: 6461 7461 5f62 726f 7773 6572 2e61 6476  data_browser.adv
-000090b0: 616e 6365 645f 7365 6172 6368 2e72 6f77  anced_search.row
-000090c0: 7329 0a20 2020 2020 2020 2029 0a20 2020  s).        ).   
-000090d0: 2020 2020 2066 6972 7374 5f72 6f77 203d       first_row =
-000090e0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-000090f0: 772e 6461 7461 5f62 726f 7773 6572 2e61  w.data_browser.a
-00009100: 6476 616e 6365 645f 7365 6172 6368 2e72  dvanced_search.r
-00009110: 6f77 735b 305d 0a20 2020 2020 2020 2051  ows[0].        Q
-00009120: 5465 7374 2e6d 6f75 7365 436c 6963 6b28  Test.mouseClick(
-00009130: 6669 7273 745f 726f 775b 365d 2c20 5174  first_row[6], Qt
-00009140: 2e4c 6566 7442 7574 746f 6e29 0a20 2020  .LeftButton).   
-00009150: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00009160: 4571 7561 6c28 0a20 2020 2020 2020 2020  Equal(.         
-00009170: 2020 2032 2c20 6c65 6e28 7365 6c66 2e6d     2, len(self.m
-00009180: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
-00009190: 6272 6f77 7365 722e 6164 7661 6e63 6564  browser.advanced
-000091a0: 5f73 6561 7263 682e 726f 7773 290a 2020  _search.rows).  
-000091b0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-000091c0: 7365 636f 6e64 5f72 6f77 203d 2073 656c  second_row = sel
-000091d0: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
-000091e0: 7461 5f62 726f 7773 6572 2e61 6476 616e  ta_browser.advan
-000091f0: 6365 645f 7365 6172 6368 2e72 6f77 735b  ced_search.rows[
-00009200: 315d 0a20 2020 2020 2020 2051 5465 7374  1].        QTest
-00009210: 2e6d 6f75 7365 436c 6963 6b28 7365 636f  .mouseClick(seco
-00009220: 6e64 5f72 6f77 5b35 5d2c 2051 742e 4c65  nd_row[5], Qt.Le
-00009230: 6674 4275 7474 6f6e 290a 2020 2020 2020  ftButton).      
-00009240: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00009250: 616c 280a 2020 2020 2020 2020 2020 2020  al(.            
-00009260: 312c 206c 656e 2873 656c 662e 6d61 696e  1, len(self.main
-00009270: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
-00009280: 7773 6572 2e61 6476 616e 6365 645f 7365  wser.advanced_se
-00009290: 6172 6368 2e72 6f77 7329 0a20 2020 2020  arch.rows).     
-000092a0: 2020 2029 0a20 2020 2020 2020 2066 6972     ).        fir
-000092b0: 7374 5f72 6f77 203d 2073 656c 662e 6d61  st_row = self.ma
-000092c0: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
-000092d0: 726f 7773 6572 2e61 6476 616e 6365 645f  rowser.advanced_
-000092e0: 7365 6172 6368 2e72 6f77 735b 305d 0a20  search.rows[0]. 
-000092f0: 2020 2020 2020 2051 5465 7374 2e6d 6f75         QTest.mou
-00009300: 7365 436c 6963 6b28 6669 7273 745f 726f  seClick(first_ro
-00009310: 775b 355d 2c20 5174 2e4c 6566 7442 7574  w[5], Qt.LeftBut
-00009320: 746f 6e29 0a20 2020 2020 2020 2073 656c  ton).        sel
-00009330: 662e 6173 7365 7274 4571 7561 6c28 0a20  f.assertEqual(. 
-00009340: 2020 2020 2020 2020 2020 2031 2c20 6c65             1, le
-00009350: 6e28 7365 6c66 2e6d 6169 6e5f 7769 6e64  n(self.main_wind
-00009360: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
-00009370: 6164 7661 6e63 6564 5f73 6561 7263 682e  advanced_search.
-00009380: 726f 7773 290a 2020 2020 2020 2020 290a  rows).        ).
-00009390: 0a20 2020 2020 2020 2066 6965 6c64 203d  .        field =
-000093a0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-000093b0: 772e 6461 7461 5f62 726f 7773 6572 2e61  w.data_browser.a
-000093c0: 6476 616e 6365 645f 7365 6172 6368 2e72  dvanced_search.r
-000093d0: 6f77 735b 305d 5b32 5d0a 2020 2020 2020  ows[0][2].      
-000093e0: 2020 636f 6e64 6974 696f 6e20 3d20 7365    condition = se
-000093f0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
-00009400: 6174 615f 6272 6f77 7365 722e 6164 7661  ata_browser.adva
-00009410: 6e63 6564 5f73 6561 7263 682e 726f 7773  nced_search.rows
-00009420: 5b30 5d5b 335d 0a20 2020 2020 2020 2076  [0][3].        v
-00009430: 616c 7565 203d 2073 656c 662e 6d61 696e  alue = self.main
-00009440: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
-00009450: 7773 6572 2e61 6476 616e 6365 645f 7365  wser.advanced_se
-00009460: 6172 6368 2e72 6f77 735b 305d 5b34 5d0a  arch.rows[0][4].
-00009470: 2020 2020 2020 2020 6669 656c 645f 6669          field_fi
-00009480: 6c65 6e61 6d65 5f69 6e64 6578 203d 2066  lename_index = f
-00009490: 6965 6c64 2e66 696e 6454 6578 7428 5441  ield.findText(TA
-000094a0: 475f 4649 4c45 4e41 4d45 290a 2020 2020  G_FILENAME).    
-000094b0: 2020 2020 6669 656c 642e 7365 7443 7572      field.setCur
-000094c0: 7265 6e74 496e 6465 7828 6669 656c 645f  rentIndex(field_
-000094d0: 6669 6c65 6e61 6d65 5f69 6e64 6578 290a  filename_index).
-000094e0: 2020 2020 2020 2020 636f 6e64 6974 696f          conditio
-000094f0: 6e5f 636f 6e74 6169 6e73 5f69 6e64 6578  n_contains_index
-00009500: 203d 2063 6f6e 6469 7469 6f6e 2e66 696e   = condition.fin
-00009510: 6454 6578 7428 2243 4f4e 5441 494e 5322  dText("CONTAINS"
-00009520: 290a 2020 2020 2020 2020 636f 6e64 6974  ).        condit
-00009530: 696f 6e2e 7365 7443 7572 7265 6e74 496e  ion.setCurrentIn
-00009540: 6465 7828 636f 6e64 6974 696f 6e5f 636f  dex(condition_co
-00009550: 6e74 6169 6e73 5f69 6e64 6578 290a 2020  ntains_index).  
-00009560: 2020 2020 2020 7661 6c75 652e 7365 7454        value.setT
-00009570: 6578 7428 2247 3122 290a 2020 2020 2020  ext("G1").      
-00009580: 2020 5154 6573 742e 6d6f 7573 6543 6c69    QTest.mouseCli
-00009590: 636b 280a 2020 2020 2020 2020 2020 2020  ck(.            
-000095a0: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-000095b0: 2e64 6174 615f 6272 6f77 7365 722e 6164  .data_browser.ad
-000095c0: 7661 6e63 6564 5f73 6561 7263 682e 7365  vanced_search.se
-000095d0: 6172 6368 2c20 5174 2e4c 6566 7442 7574  arch, Qt.LeftBut
-000095e0: 746f 6e0a 2020 2020 2020 2020 290a 0a20  ton.        ).. 
-000095f0: 2020 2020 2020 2023 2054 6573 7469 6e67         # Testing
-00009600: 2074 6861 7420 6f6e 6c79 2047 3120 7363   that only G1 sc
-00009610: 616e 7320 6172 6520 6469 7370 6c61 7965  ans are displaye
-00009620: 6420 7769 7468 2074 6865 2066 696c 7465  d with the filte
-00009630: 7220 6170 706c 6965 640a 2020 2020 2020  r applied.      
-00009640: 2020 7363 616e 735f 6469 7370 6c61 7965    scans_displaye
-00009650: 6420 3d20 5b5d 0a0a 2020 2020 2020 2020  d = []..        
-00009660: 666f 7220 726f 7720 696e 2072 616e 6765  for row in range
-00009670: 280a 2020 2020 2020 2020 2020 2020 302c  (.            0,
-00009680: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-00009690: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
-000096a0: 6162 6c65 5f64 6174 612e 726f 7743 6f75  able_data.rowCou
-000096b0: 6e74 2829 0a20 2020 2020 2020 2029 3a0a  nt().        ):.
-000096c0: 2020 2020 2020 2020 2020 2020 6974 656d              item
-000096d0: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
-000096e0: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
-000096f0: 2e74 6162 6c65 5f64 6174 612e 6974 656d  .table_data.item
-00009700: 2872 6f77 2c20 3029 0a20 2020 2020 2020  (row, 0).       
-00009710: 2020 2020 2073 6361 6e5f 6e61 6d65 203d       scan_name =
-00009720: 2069 7465 6d2e 7465 7874 2829 0a0a 2020   item.text()..  
-00009730: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
-00009740: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-00009750: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
-00009760: 6162 6c65 5f64 6174 612e 6973 526f 7748  able_data.isRowH
-00009770: 6964 6465 6e28 726f 7729 3a0a 2020 2020  idden(row):.    
-00009780: 2020 2020 2020 2020 2020 2020 7363 616e              scan
-00009790: 735f 6469 7370 6c61 7965 642e 6170 7065  s_displayed.appe
-000097a0: 6e64 2873 6361 6e5f 6e61 6d65 290a 0a20  nd(scan_name).. 
-000097b0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-000097c0: 7274 4571 7561 6c28 6c65 6e28 7363 616e  rtEqual(len(scan
-000097d0: 735f 6469 7370 6c61 7965 6429 2c20 3229  s_displayed), 2)
-000097e0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-000097f0: 7365 7274 5472 7565 280a 2020 2020 2020  sertTrue(.      
-00009800: 2020 2020 2020 2264 6174 612f 7261 775f        "data/raw_
-00009810: 6461 7461 2f47 7565 7262 6574 2d43 362d  data/Guerbet-C6-
-00009820: 3230 3134 2d52 6174 2d4b 3532 2d54 7562  2014-Rat-K52-Tub
-00009830: 6532 3722 0a20 2020 2020 2020 2020 2020  e27".           
-00009840: 2022 2d32 3031 342d 3032 2d31 3431 3032   "-2014-02-14102
-00009850: 3331 372d 3031 2d47 315f 4775 6572 6265  317-01-G1_Guerbe
-00009860: 745f 416e 6174 2d52 4152 4522 0a20 2020  t_Anat-RARE".   
-00009870: 2020 2020 2020 2020 2022 7076 6d2d 3030           "pvm-00
-00009880: 3032 3230 5f30 3030 2e6e 6969 2220 696e  0220_000.nii" in
-00009890: 2073 6361 6e73 5f64 6973 706c 6179 6564   scans_displayed
-000098a0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-000098b0: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-000098c0: 7565 280a 2020 2020 2020 2020 2020 2020  ue(.            
-000098d0: 2264 6174 612f 6465 7269 7665 645f 6461  "data/derived_da
-000098e0: 7461 2f73 4775 6572 6265 742d 4336 2d32  ta/sGuerbet-C6-2
-000098f0: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
-00009900: 3237 220a 2020 2020 2020 2020 2020 2020  27".            
-00009910: 222d 3230 3134 2d30 322d 3134 3130 3233  "-2014-02-141023
-00009920: 3137 2d30 312d 4731 5f47 7565 7262 6574  17-01-G1_Guerbet
-00009930: 5f41 6e61 742d 5241 5245 220a 2020 2020  _Anat-RARE".    
-00009940: 2020 2020 2020 2020 2270 766d 2d30 3030          "pvm-000
-00009950: 3232 305f 3030 302e 6e69 6922 2069 6e20  220_000.nii" in 
-00009960: 7363 616e 735f 6469 7370 6c61 7965 640a  scans_displayed.
-00009970: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-00009980: 2020 2023 2054 6573 7469 6e67 2074 6861     # Testing tha
-00009990: 7420 6576 6572 7920 7363 616e 2069 7320  t every scan is 
-000099a0: 6261 636b 2077 6865 6e20 636c 6963 6b69  back when clicki
-000099b0: 6e67 2061 6761 696e 206f 6e20 6164 7661  ng again on adva
-000099c0: 6e63 6564 2073 6561 7263 680a 2020 2020  nced search.    
-000099d0: 2020 2020 5154 6573 742e 6d6f 7573 6543      QTest.mouseC
-000099e0: 6c69 636b 280a 2020 2020 2020 2020 2020  lick(.          
-000099f0: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
-00009a00: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
-00009a10: 6164 7661 6e63 6564 5f73 6561 7263 685f  advanced_search_
-00009a20: 6275 7474 6f6e 2c20 5174 2e4c 6566 7442  button, Qt.LeftB
-00009a30: 7574 746f 6e0a 2020 2020 2020 2020 290a  utton.        ).
-00009a40: 2020 2020 2020 2020 7363 616e 735f 6469          scans_di
-00009a50: 7370 6c61 7965 6420 3d20 5b5d 0a0a 2020  splayed = []..  
-00009a60: 2020 2020 2020 666f 7220 726f 7720 696e        for row in
-00009a70: 2072 616e 6765 280a 2020 2020 2020 2020   range(.        
-00009a80: 2020 2020 302c 2073 656c 662e 6d61 696e      0, self.main
-00009a90: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
-00009aa0: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
-00009ab0: 726f 7743 6f75 6e74 2829 0a20 2020 2020  rowCount().     
-00009ac0: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
-00009ad0: 2020 6974 656d 203d 2073 656c 662e 6d61    item = self.ma
-00009ae0: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
-00009af0: 726f 7773 6572 2e74 6162 6c65 5f64 6174  rowser.table_dat
-00009b00: 612e 6974 656d 2872 6f77 2c20 3029 0a20  a.item(row, 0). 
-00009b10: 2020 2020 2020 2020 2020 2073 6361 6e5f             scan_
-00009b20: 6e61 6d65 203d 2069 7465 6d2e 7465 7874  name = item.text
-00009b30: 2829 0a0a 2020 2020 2020 2020 2020 2020  ()..            
-00009b40: 6966 206e 6f74 2073 656c 662e 6d61 696e  if not self.main
-00009b50: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
-00009b60: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
-00009b70: 6973 526f 7748 6964 6465 6e28 726f 7729  isRowHidden(row)
-00009b80: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00009b90: 2020 7363 616e 735f 6469 7370 6c61 7965    scans_displaye
-00009ba0: 642e 6170 7065 6e64 2873 6361 6e5f 6e61  d.append(scan_na
-00009bb0: 6d65 290a 0a20 2020 2020 2020 2073 656c  me)..        sel
-00009bc0: 662e 6173 7365 7274 4571 7561 6c28 6c65  f.assertEqual(le
-00009bd0: 6e28 7363 616e 735f 6469 7370 6c61 7965  n(scans_displaye
-00009be0: 6429 2c20 3929 0a20 2020 2020 2020 2073  d), 9).        s
-00009bf0: 656c 662e 6173 7365 7274 5472 7565 280a  elf.assertTrue(.
-00009c00: 2020 2020 2020 2020 2020 2020 2264 6174              "dat
-00009c10: 612f 7261 775f 6461 7461 2f47 7565 7262  a/raw_data/Guerb
-00009c20: 6574 2d43 362d 3230 3134 2d52 6174 2d4b  et-C6-2014-Rat-K
-00009c30: 3532 2d54 7562 6532 3722 0a20 2020 2020  52-Tube27".     
-00009c40: 2020 2020 2020 2022 2d32 3031 342d 3032         "-2014-02
-00009c50: 2d31 3431 3032 3331 372d 3031 2d47 315f  -14102317-01-G1_
-00009c60: 4775 6572 6265 745f 416e 6174 2d52 4152  Guerbet_Anat-RAR
-00009c70: 4522 0a20 2020 2020 2020 2020 2020 2022  E".            "
-00009c80: 7076 6d2d 3030 3032 3230 5f30 3030 2e6e  pvm-000220_000.n
-00009c90: 6969 2220 696e 2073 6361 6e73 5f64 6973  ii" in scans_dis
-00009ca0: 706c 6179 6564 0a20 2020 2020 2020 2029  played.        )
-00009cb0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00009cc0: 7365 7274 5472 7565 280a 2020 2020 2020  sertTrue(.      
-00009cd0: 2020 2020 2020 2264 6174 612f 7261 775f        "data/raw_
-00009ce0: 6461 7461 2f47 7565 7262 6574 2d43 362d  data/Guerbet-C6-
-00009cf0: 3230 3134 2d52 6174 2d4b 3532 2d54 7562  2014-Rat-K52-Tub
-00009d00: 6532 3722 0a20 2020 2020 2020 2020 2020  e27".           
-00009d10: 2022 2d32 3031 342d 3032 2d31 3431 3032   "-2014-02-14102
-00009d20: 3331 372d 3034 2d47 335f 4775 6572 6265  317-04-G3_Guerbe
-00009d30: 745f 4d44 4546 542d 4d44 4546 5422 0a20  t_MDEFT-MDEFT". 
-00009d40: 2020 2020 2020 2020 2020 2022 7076 6d2d             "pvm-
-00009d50: 3030 3039 3430 5f38 3030 2e6e 6969 2220  000940_800.nii" 
-00009d60: 696e 2073 6361 6e73 5f64 6973 706c 6179  in scans_display
-00009d70: 6564 0a20 2020 2020 2020 2029 0a20 2020  ed.        ).   
-00009d80: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00009d90: 5472 7565 280a 2020 2020 2020 2020 2020  True(.          
-00009da0: 2020 2264 6174 612f 7261 775f 6461 7461    "data/raw_data
-00009db0: 2f47 7565 7262 6574 2d43 362d 3230 3134  /Guerbet-C6-2014
-00009dc0: 2d52 6174 2d4b 3532 2d54 7562 6532 3722  -Rat-K52-Tube27"
-00009dd0: 0a20 2020 2020 2020 2020 2020 2022 2d32  .            "-2
-00009de0: 3031 342d 3032 2d31 3431 3032 3331 372d  014-02-14102317-
-00009df0: 3035 2d47 345f 4775 6572 6265 745f 5431  05-G4_Guerbet_T1
-00009e00: 5345 5f38 3030 2d52 4152 4522 0a20 2020  SE_800-RARE".   
-00009e10: 2020 2020 2020 2020 2022 7076 6d2d 3030           "pvm-00
-00009e20: 3031 3432 5f34 3030 2e6e 6969 2220 696e  0142_400.nii" in
-00009e30: 2073 6361 6e73 5f64 6973 706c 6179 6564   scans_displayed
-00009e40: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00009e50: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-00009e60: 7565 280a 2020 2020 2020 2020 2020 2020  ue(.            
-00009e70: 2264 6174 612f 7261 775f 6461 7461 2f47  "data/raw_data/G
-00009e80: 7565 7262 6574 2d43 362d 3230 3134 2d52  uerbet-C6-2014-R
-00009e90: 6174 2d4b 3532 2d54 7562 6532 3722 0a20  at-K52-Tube27". 
-00009ea0: 2020 2020 2020 2020 2020 2022 2d32 3031             "-201
-00009eb0: 342d 3032 2d31 3431 3032 3331 372d 3036  4-02-14102317-06
-00009ec0: 2d47 345f 4775 6572 6265 745f 5431 5345  -G4_Guerbet_T1SE
-00009ed0: 5f38 3030 2d52 4152 4522 0a20 2020 2020  _800-RARE".     
-00009ee0: 2020 2020 2020 2022 7076 6d2d 3030 3031         "pvm-0001
-00009ef0: 3432 5f34 3030 2e6e 6969 2220 696e 2073  42_400.nii" in s
-00009f00: 6361 6e73 5f64 6973 706c 6179 6564 0a20  cans_displayed. 
-00009f10: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00009f20: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
-00009f30: 280a 2020 2020 2020 2020 2020 2020 2264  (.            "d
-00009f40: 6174 612f 7261 775f 6461 7461 2f47 7565  ata/raw_data/Gue
-00009f50: 7262 6574 2d43 362d 3230 3134 2d52 6174  rbet-C6-2014-Rat
-00009f60: 2d4b 3532 2d54 7562 6532 3722 0a20 2020  -K52-Tube27".   
-00009f70: 2020 2020 2020 2020 2022 2d32 3031 342d           "-2014-
-00009f80: 3032 2d31 3431 3032 3331 372d 3038 2d47  02-14102317-08-G
-00009f90: 345f 4775 6572 6265 745f 5431 5345 5f38  4_Guerbet_T1SE_8
-00009fa0: 3030 2d52 4152 4522 0a20 2020 2020 2020  00-RARE".       
-00009fb0: 2020 2020 2022 7076 6d2d 3030 3031 3432       "pvm-000142
-00009fc0: 5f34 3030 2e6e 6969 2220 696e 2073 6361  _400.nii" in sca
-00009fd0: 6e73 5f64 6973 706c 6179 6564 0a20 2020  ns_displayed.   
-00009fe0: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
-00009ff0: 656c 662e 6173 7365 7274 5472 7565 280a  elf.assertTrue(.
-0000a000: 2020 2020 2020 2020 2020 2020 2264 6174              "dat
-0000a010: 612f 7261 775f 6461 7461 2f47 7565 7262  a/raw_data/Guerb
-0000a020: 6574 2d43 362d 3230 3134 2d52 6174 2d4b  et-C6-2014-Rat-K
-0000a030: 3532 2d54 7562 6532 3722 0a20 2020 2020  52-Tube27".     
-0000a040: 2020 2020 2020 2022 2d32 3031 342d 3032         "-2014-02
-0000a050: 2d31 3431 3032 3331 372d 3039 2d47 345f  -14102317-09-G4_
-0000a060: 4775 6572 6265 745f 5431 5345 5f38 3030  Guerbet_T1SE_800
-0000a070: 2d52 4152 4522 0a20 2020 2020 2020 2020  -RARE".         
-0000a080: 2020 2022 7076 6d2d 3030 3031 3432 5f34     "pvm-000142_4
-0000a090: 3030 2e6e 6969 2220 696e 2073 6361 6e73  00.nii" in scans
-0000a0a0: 5f64 6973 706c 6179 6564 0a20 2020 2020  _displayed.     
-0000a0b0: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
-0000a0c0: 662e 6173 7365 7274 5472 7565 280a 2020  f.assertTrue(.  
-0000a0d0: 2020 2020 2020 2020 2020 2264 6174 612f            "data/
-0000a0e0: 7261 775f 6461 7461 2f47 7565 7262 6574  raw_data/Guerbet
-0000a0f0: 2d43 362d 3230 3134 2d52 6174 2d4b 3532  -C6-2014-Rat-K52
-0000a100: 2d54 7562 6532 3722 0a20 2020 2020 2020  -Tube27".       
-0000a110: 2020 2020 2022 2d32 3031 342d 3032 2d31       "-2014-02-1
-0000a120: 3431 3032 3331 372d 3130 2d47 335f 4775  4102317-10-G3_Gu
-0000a130: 6572 6265 745f 4d44 4546 542d 4d44 4546  erbet_MDEFT-MDEF
-0000a140: 5422 0a20 2020 2020 2020 2020 2020 2022  T".            "
-0000a150: 7076 6d2d 3030 3039 3430 5f38 3030 2e6e  pvm-000940_800.n
-0000a160: 6969 2220 696e 2073 6361 6e73 5f64 6973  ii" in scans_dis
-0000a170: 706c 6179 6564 0a20 2020 2020 2020 2029  played.        )
-0000a180: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0000a190: 7365 7274 5472 7565 280a 2020 2020 2020  sertTrue(.      
-0000a1a0: 2020 2020 2020 2264 6174 612f 7261 775f        "data/raw_
-0000a1b0: 6461 7461 2f47 7565 7262 6574 2d43 362d  data/Guerbet-C6-
-0000a1c0: 3230 3134 2d52 6174 2d4b 3532 2d54 7562  2014-Rat-K52-Tub
-0000a1d0: 6532 3722 0a20 2020 2020 2020 2020 2020  e27".           
-0000a1e0: 2022 2d32 3031 342d 3032 2d31 3431 3032   "-2014-02-14102
-0000a1f0: 3331 372d 3131 2d47 345f 4775 6572 6265  317-11-G4_Guerbe
-0000a200: 745f 5431 5345 5f38 3030 2d52 4152 4522  t_T1SE_800-RARE"
-0000a210: 0a20 2020 2020 2020 2020 2020 2022 7076  .            "pv
-0000a220: 6d2d 3030 3031 3432 5f34 3030 2e6e 6969  m-000142_400.nii
-0000a230: 2220 696e 2073 6361 6e73 5f64 6973 706c  " in scans_displ
-0000a240: 6179 6564 0a20 2020 2020 2020 2029 0a20  ayed.        ). 
-0000a250: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000a260: 7274 5472 7565 280a 2020 2020 2020 2020  rtTrue(.        
-0000a270: 2020 2020 2264 6174 612f 6465 7269 7665      "data/derive
-0000a280: 645f 6461 7461 2f73 4775 6572 6265 742d  d_data/sGuerbet-
-0000a290: 4336 2d32 3031 342d 5261 742d 4b35 322d  C6-2014-Rat-K52-
-0000a2a0: 5475 6265 3237 220a 2020 2020 2020 2020  Tube27".        
-0000a2b0: 2020 2020 222d 3230 3134 2d30 322d 3134      "-2014-02-14
-0000a2c0: 3130 3233 3137 2d30 312d 4731 5f47 7565  102317-01-G1_Gue
-0000a2d0: 7262 6574 5f41 6e61 742d 5241 5245 220a  rbet_Anat-RARE".
-0000a2e0: 2020 2020 2020 2020 2020 2020 2270 766d              "pvm
-0000a2f0: 2d30 3030 3232 305f 3030 302e 6e69 6922  -000220_000.nii"
-0000a300: 2069 6e20 7363 616e 735f 6469 7370 6c61   in scans_displa
-0000a310: 7965 640a 2020 2020 2020 2020 290a 0a20  yed.        ).. 
-0000a320: 2020 2064 6566 2074 6573 745f 6272 6963     def test_bric
-0000a330: 6b5f 6869 7374 6f72 7928 7365 6c66 293a  k_history(self):
-0000a340: 0a20 2020 2020 2020 2022 2222 5465 7374  .        """Test
-0000a350: 7320 7468 6520 6272 6963 6b20 6869 7374  s the brick hist
-0000a360: 6f72 7920 706f 7075 702e 2222 220a 0a20  ory popup.""".. 
-0000a370: 2020 2020 2020 2070 726f 6a65 6374 5f38         project_8
-0000a380: 5f70 6174 6820 3d20 7365 6c66 2e67 6574  _path = self.get
-0000a390: 5f6e 6577 5f74 6573 745f 7072 6f6a 6563  _new_test_projec
-0000a3a0: 7428 290a 2020 2020 2020 2020 7365 6c66  t().        self
-0000a3b0: 2e6d 6169 6e5f 7769 6e64 6f77 2e73 7769  .main_window.swi
-0000a3c0: 7463 685f 7072 6f6a 6563 7428 7072 6f6a  tch_project(proj
-0000a3d0: 6563 745f 385f 7061 7468 2c20 2270 726f  ect_8_path, "pro
-0000a3e0: 6a65 6374 5f38 2229 0a0a 2020 2020 2020  ject_8")..      
-0000a3f0: 2020 6272 6963 6b73 5f63 6f6c 756d 6e20    bricks_column 
-0000a400: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
-0000a410: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-0000a420: 2e64 6174 615f 6272 6f77 7365 722e 7461  .data_browser.ta
-0000a430: 626c 655f 6461 7461 2e67 6574 5f74 6167  ble_data.get_tag
-0000a440: 5f63 6f6c 756d 6e0a 2020 2020 2020 2020  _column.        
-0000a450: 2928 2248 6973 746f 7279 2229 0a20 2020  )("History").   
-0000a460: 2020 2020 2062 7269 636b 735f 7769 6467       bricks_widg
-0000a470: 6574 203d 2073 656c 662e 6d61 696e 5f77  et = self.main_w
-0000a480: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
-0000a490: 6572 2e74 6162 6c65 5f64 6174 612e 6365  er.table_data.ce
-0000a4a0: 6c6c 5769 6467 6574 280a 2020 2020 2020  llWidget(.      
-0000a4b0: 2020 2020 2020 302c 2062 7269 636b 735f        0, bricks_
-0000a4c0: 636f 6c75 6d6e 0a20 2020 2020 2020 2029  column.        )
-0000a4d0: 0a20 2020 2020 2020 2073 6d6f 6f74 685f  .        smooth_
-0000a4e0: 6275 7474 6f6e 203d 2062 7269 636b 735f  button = bricks_
-0000a4f0: 7769 6467 6574 2e6c 6179 6f75 7428 292e  widget.layout().
-0000a500: 6974 656d 4174 2830 292e 7769 6467 6574  itemAt(0).widget
-0000a510: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
-0000a520: 6173 7365 7274 4571 7561 6c28 736d 6f6f  assertEqual(smoo
-0000a530: 7468 5f62 7574 746f 6e2e 7465 7874 2829  th_button.text()
-0000a540: 2c20 2273 6d6f 6f74 685f 3122 290a 2020  , "smooth_1").  
-0000a550: 2020 2020 2020 5154 6573 742e 6d6f 7573        QTest.mous
-0000a560: 6543 6c69 636b 2873 6d6f 6f74 685f 6275  eClick(smooth_bu
-0000a570: 7474 6f6e 2c20 5174 2e4c 6566 7442 7574  tton, Qt.LeftBut
-0000a580: 746f 6e29 0a20 2020 2020 2020 2062 7269  ton).        bri
-0000a590: 636b 5f68 6973 746f 7279 203d 2028 0a20  ck_history = (. 
-0000a5a0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000a5b0: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
-0000a5c0: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
-0000a5d0: 6174 612e 6272 6963 6b5f 6869 7374 6f72  ata.brick_histor
-0000a5e0: 795f 706f 7075 700a 2020 2020 2020 2020  y_popup.        
-0000a5f0: 290a 2020 2020 2020 2020 6272 6963 6b5f  ).        brick_
-0000a600: 7461 626c 6520 3d20 6272 6963 6b5f 6869  table = brick_hi
-0000a610: 7374 6f72 792e 7461 626c 650a 2020 2020  story.table.    
-0000a620: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000a630: 7175 616c 2862 7269 636b 5f74 6162 6c65  qual(brick_table
-0000a640: 2e68 6f72 697a 6f6e 7461 6c48 6561 6465  .horizontalHeade
-0000a650: 7249 7465 6d28 3029 2e74 6578 7428 292c  rItem(0).text(),
-0000a660: 2022 4e61 6d65 2229 0a20 2020 2020 2020   "Name").       
-0000a670: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0000a680: 6c28 6272 6963 6b5f 7461 626c 652e 686f  l(brick_table.ho
-0000a690: 7269 7a6f 6e74 616c 4865 6164 6572 4974  rizontalHeaderIt
-0000a6a0: 656d 2831 292e 7465 7874 2829 2c20 2249  em(1).text(), "I
-0000a6b0: 6e69 7422 290a 2020 2020 2020 2020 7365  nit").        se
-0000a6c0: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
-0000a6d0: 2020 2020 2020 2020 2020 2020 6272 6963              bric
-0000a6e0: 6b5f 7461 626c 652e 686f 7269 7a6f 6e74  k_table.horizont
-0000a6f0: 616c 4865 6164 6572 4974 656d 2832 292e  alHeaderItem(2).
-0000a700: 7465 7874 2829 2c20 2249 6e69 7420 5469  text(), "Init Ti
-0000a710: 6d65 220a 2020 2020 2020 2020 290a 2020  me".        ).  
-0000a720: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000a730: 7445 7175 616c 2862 7269 636b 5f74 6162  tEqual(brick_tab
-0000a740: 6c65 2e68 6f72 697a 6f6e 7461 6c48 6561  le.horizontalHea
-0000a750: 6465 7249 7465 6d28 3329 2e74 6578 7428  derItem(3).text(
-0000a760: 292c 2022 4578 6563 2229 0a20 2020 2020  ), "Exec").     
-0000a770: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000a780: 7561 6c28 0a20 2020 2020 2020 2020 2020  ual(.           
-0000a790: 2062 7269 636b 5f74 6162 6c65 2e68 6f72   brick_table.hor
-0000a7a0: 697a 6f6e 7461 6c48 6561 6465 7249 7465  izontalHeaderIte
-0000a7b0: 6d28 3429 2e74 6578 7428 292c 2022 4578  m(4).text(), "Ex
-0000a7c0: 6563 2054 696d 6522 0a20 2020 2020 2020  ec Time".       
-0000a7d0: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
-0000a7e0: 6173 7365 7274 4571 7561 6c28 0a20 2020  assertEqual(.   
-0000a7f0: 2020 2020 2020 2020 2062 7269 636b 5f74           brick_t
-0000a800: 6162 6c65 2e68 6f72 697a 6f6e 7461 6c48  able.horizontalH
-0000a810: 6561 6465 7249 7465 6d28 3529 2e74 6578  eaderItem(5).tex
-0000a820: 7428 292c 2022 6461 7461 5f74 7970 6522  t(), "data_type"
-0000a830: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-0000a840: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000a850: 7561 6c28 6272 6963 6b5f 7461 626c 652e  ual(brick_table.
-0000a860: 686f 7269 7a6f 6e74 616c 4865 6164 6572  horizontalHeader
-0000a870: 4974 656d 2836 292e 7465 7874 2829 2c20  Item(6).text(), 
-0000a880: 2266 7768 6d22 290a 2020 2020 2020 2020  "fwhm").        
-0000a890: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-0000a8a0: 280a 2020 2020 2020 2020 2020 2020 6272  (.            br
-0000a8b0: 6963 6b5f 7461 626c 652e 686f 7269 7a6f  ick_table.horizo
-0000a8c0: 6e74 616c 4865 6164 6572 4974 656d 2837  ntalHeaderItem(7
-0000a8d0: 292e 7465 7874 2829 2c20 2269 6d70 6c69  ).text(), "impli
-0000a8e0: 6369 745f 6d61 736b 696e 6722 0a20 2020  cit_masking".   
-0000a8f0: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
-0000a900: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0000a910: 0a20 2020 2020 2020 2020 2020 2062 7269  .            bri
-0000a920: 636b 5f74 6162 6c65 2e68 6f72 697a 6f6e  ck_table.horizon
-0000a930: 7461 6c48 6561 6465 7249 7465 6d28 3829  talHeaderItem(8)
-0000a940: 2e74 6578 7428 292c 2022 696e 5f66 696c  .text(), "in_fil
-0000a950: 6573 220a 2020 2020 2020 2020 290a 2020  es".        ).  
-0000a960: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000a970: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
-0000a980: 2020 2020 6272 6963 6b5f 7461 626c 652e      brick_table.
-0000a990: 686f 7269 7a6f 6e74 616c 4865 6164 6572  horizontalHeader
-0000a9a0: 4974 656d 2839 292e 7465 7874 2829 2c20  Item(9).text(), 
-0000a9b0: 226d 6174 6c61 625f 636d 6422 0a20 2020  "matlab_cmd".   
-0000a9c0: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
-0000a9d0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0000a9e0: 6272 6963 6b5f 7461 626c 652e 686f 7269  brick_table.hori
-0000a9f0: 7a6f 6e74 616c 4865 6164 6572 4974 656d  zontalHeaderItem
-0000aa00: 2831 3029 2e74 6578 7428 292c 2022 6d66  (10).text(), "mf
-0000aa10: 696c 6522 290a 2020 2020 2020 2020 7365  ile").        se
-0000aa20: 6c66 2e61 7373 6572 7445 7175 616c 2862  lf.assertEqual(b
+00007980: 2029 2c0a 2020 2020 2020 2020 2020 2020   ),.            
+00007990: 2020 2020 2264 6566 5f76 616c 7565 222c      "def_value",
+000079a0: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
+000079b0: 2020 2020 2020 2020 666f 7220 646f 6375          for docu
+000079c0: 6d65 6e74 2069 6e20 7365 6c66 2e6d 6169  ment in self.mai
+000079d0: 6e5f 7769 6e64 6f77 2e70 726f 6a65 6374  n_window.project
+000079e0: 2e73 6573 7369 6f6e 2e67 6574 5f64 6f63  .session.get_doc
+000079f0: 756d 656e 7473 5f6e 616d 6573 280a 2020  uments_names(.  
+00007a00: 2020 2020 2020 2020 2020 434f 4c4c 4543            COLLEC
+00007a10: 5449 4f4e 5f49 4e49 5449 414c 0a20 2020  TION_INITIAL.   
+00007a20: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
+00007a30: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00007a40: 7175 616c 280a 2020 2020 2020 2020 2020  qual(.          
+00007a50: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
+00007a60: 7769 6e64 6f77 2e70 726f 6a65 6374 2e73  window.project.s
+00007a70: 6573 7369 6f6e 2e67 6574 5f76 616c 7565  ession.get_value
+00007a80: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00007a90: 2020 2020 2020 434f 4c4c 4543 5449 4f4e        COLLECTION
+00007aa0: 5f49 4e49 5449 414c 2c20 646f 6375 6d65  _INITIAL, docume
+00007ab0: 6e74 2c20 2254 6573 7422 0a20 2020 2020  nt, "Test".     
+00007ac0: 2020 2020 2020 2020 2020 2029 2c0a 2020             ),.  
+00007ad0: 2020 2020 2020 2020 2020 2020 2020 2264                "d
+00007ae0: 6566 5f76 616c 7565 222c 0a20 2020 2020  ef_value",.     
+00007af0: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+00007b00: 2020 7465 7374 5f63 6f6c 756d 6e20 3d20    test_column = 
+00007b10: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+00007b20: 2e64 6174 615f 6272 6f77 7365 722e 7461  .data_browser.ta
+00007b30: 626c 655f 6461 7461 2e67 6574 5f74 6167  ble_data.get_tag
+00007b40: 5f63 6f6c 756d 6e28 0a20 2020 2020 2020  _column(.       
+00007b50: 2020 2020 2022 5465 7374 220a 2020 2020       "Test".    
+00007b60: 2020 2020 290a 0a20 2020 2020 2020 2066      )..        f
+00007b70: 6f72 2072 6f77 2069 6e20 7261 6e67 6528  or row in range(
+00007b80: 0a20 2020 2020 2020 2020 2020 2030 2c20  .            0, 
+00007b90: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+00007ba0: 2e64 6174 615f 6272 6f77 7365 722e 7461  .data_browser.ta
+00007bb0: 626c 655f 6461 7461 2e72 6f77 436f 756e  ble_data.rowCoun
+00007bc0: 7428 290a 2020 2020 2020 2020 293a 0a20  t().        ):. 
+00007bd0: 2020 2020 2020 2020 2020 2069 7465 6d20             item 
+00007be0: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
+00007bf0: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
+00007c00: 7461 626c 655f 6461 7461 2e69 7465 6d28  table_data.item(
+00007c10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007c20: 2072 6f77 2c20 7465 7374 5f63 6f6c 756d   row, test_colum
+00007c30: 6e0a 2020 2020 2020 2020 2020 2020 290a  n.            ).
+00007c40: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00007c50: 2e61 7373 6572 7445 7175 616c 2869 7465  .assertEqual(ite
+00007c60: 6d2e 7465 7874 2829 2c20 2264 6566 5f76  m.text(), "def_v
+00007c70: 616c 7565 2229 0a0a 2020 2020 2020 2020  alue")..        
+00007c80: 5141 7070 6c69 6361 7469 6f6e 2e70 726f  QApplication.pro
+00007c90: 6365 7373 4576 656e 7473 2829 0a0a 2020  cessEvents()..  
+00007ca0: 2020 2020 2020 2320 5465 7374 696e 6720        # Testing 
+00007cb0: 7769 7468 206c 6973 7420 7479 7065 0a20  with list type. 
+00007cc0: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
+00007cd0: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
+00007ce0: 7773 6572 2e61 6464 5f74 6167 5f61 6374  wser.add_tag_act
+00007cf0: 696f 6e2e 7472 6967 6765 7228 290a 2020  ion.trigger().  
+00007d00: 2020 2020 2020 6164 645f 7461 6720 3d20        add_tag = 
+00007d10: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+00007d20: 2e64 6174 615f 6272 6f77 7365 722e 706f  .data_browser.po
+00007d30: 705f 7570 5f61 6464 5f74 6167 0a20 2020  p_up_add_tag.   
+00007d40: 2020 2020 2061 6464 5f74 6167 2e74 6578       add_tag.tex
+00007d50: 745f 6564 6974 5f74 6167 5f6e 616d 652e  t_edit_tag_name.
+00007d60: 7365 7454 6578 7428 2254 6573 745f 6c69  setText("Test_li
+00007d70: 7374 2229 0a0a 2020 2020 2020 2020 636f  st")..        co
+00007d80: 6d62 6f5f 626f 785f 7479 7065 7320 3d20  mbo_box_types = 
+00007d90: 5b0a 2020 2020 2020 2020 2020 2020 2253  [.            "S
+00007da0: 7472 696e 6722 2c0a 2020 2020 2020 2020  tring",.        
+00007db0: 2020 2020 2249 6e74 6567 6572 222c 0a20      "Integer",. 
+00007dc0: 2020 2020 2020 2020 2020 2022 466c 6f61             "Floa
+00007dd0: 7422 2c0a 2020 2020 2020 2020 2020 2020  t",.            
+00007de0: 2242 6f6f 6c65 616e 222c 0a20 2020 2020  "Boolean",.     
+00007df0: 2020 2020 2020 2022 4461 7465 222c 0a20         "Date",. 
+00007e00: 2020 2020 2020 2020 2020 2022 4461 7465             "Date
+00007e10: 7469 6d65 222c 0a20 2020 2020 2020 2020  time",.         
+00007e20: 2020 2022 5469 6d65 222c 0a20 2020 2020     "Time",.     
+00007e30: 2020 2020 2020 2022 5374 7269 6e67 204c         "String L
+00007e40: 6973 7422 2c0a 2020 2020 2020 2020 2020  ist",.          
+00007e50: 2020 2249 6e74 6567 6572 204c 6973 7422    "Integer List"
+00007e60: 2c0a 2020 2020 2020 2020 2020 2020 2246  ,.            "F
+00007e70: 6c6f 6174 204c 6973 7422 2c0a 2020 2020  loat List",.    
+00007e80: 2020 2020 2020 2020 2242 6f6f 6c65 616e          "Boolean
+00007e90: 204c 6973 7422 2c0a 2020 2020 2020 2020   List",.        
+00007ea0: 2020 2020 2244 6174 6520 4c69 7374 222c      "Date List",
+00007eb0: 0a20 2020 2020 2020 2020 2020 2022 4461  .            "Da
+00007ec0: 7465 7469 6d65 204c 6973 7422 2c0a 2020  tetime List",.  
+00007ed0: 2020 2020 2020 2020 2020 2254 696d 6520            "Time 
+00007ee0: 4c69 7374 222c 0a20 2020 2020 2020 205d  List",.        ]
+00007ef0: 0a0a 2020 2020 2020 2020 666f 7220 6461  ..        for da
+00007f00: 7461 5f74 7970 6520 696e 2063 6f6d 626f  ta_type in combo
+00007f10: 5f62 6f78 5f74 7970 6573 3a0a 2020 2020  _box_types:.    
+00007f20: 2020 2020 2020 2020 6164 645f 7461 672e          add_tag.
+00007f30: 636f 6d62 6f5f 626f 785f 7479 7065 2e73  combo_box_type.s
+00007f40: 6574 4375 7272 656e 7454 6578 7428 6461  etCurrentText(da
+00007f50: 7461 5f74 7970 6529 0a0a 2020 2020 2020  ta_type)..      
+00007f60: 2020 6164 645f 7461 672e 636f 6d62 6f5f    add_tag.combo_
+00007f70: 626f 785f 7479 7065 2e73 6574 4375 7272  box_type.setCurr
+00007f80: 656e 7454 6578 7428 2249 6e74 6567 6572  entText("Integer
+00007f90: 204c 6973 7422 290a 2020 2020 2020 2020   List").        
+00007fa0: 5154 6573 742e 6d6f 7573 6543 6c69 636b  QTest.mouseClick
+00007fb0: 2861 6464 5f74 6167 2e74 6578 745f 6564  (add_tag.text_ed
+00007fc0: 6974 5f64 6566 6175 6c74 5f76 616c 7565  it_default_value
+00007fd0: 2c20 5174 2e4c 6566 7442 7574 746f 6e29  , Qt.LeftButton)
+00007fe0: 0a20 2020 2020 2020 2051 5465 7374 2e6d  .        QTest.m
+00007ff0: 6f75 7365 436c 6963 6b28 0a20 2020 2020  ouseClick(.     
+00008000: 2020 2020 2020 2061 6464 5f74 6167 2e74         add_tag.t
+00008010: 6578 745f 6564 6974 5f64 6566 6175 6c74  ext_edit_default
+00008020: 5f76 616c 7565 2e6c 6973 745f 6372 6561  _value.list_crea
+00008030: 7469 6f6e 2e61 6464 5f65 6c65 6d65 6e74  tion.add_element
+00008040: 5f6c 6162 656c 2c0a 2020 2020 2020 2020  _label,.        
+00008050: 2020 2020 5174 2e4c 6566 7442 7574 746f      Qt.LeftButto
+00008060: 6e2c 0a20 2020 2020 2020 2029 0a20 2020  n,.        ).   
+00008070: 2020 2020 2074 6162 6c65 203d 2061 6464       table = add
+00008080: 5f74 6167 2e74 6578 745f 6564 6974 5f64  _tag.text_edit_d
+00008090: 6566 6175 6c74 5f76 616c 7565 2e6c 6973  efault_value.lis
+000080a0: 745f 6372 6561 7469 6f6e 2e74 6162 6c65  t_creation.table
+000080b0: 0a20 2020 2020 2020 2069 7465 6d20 3d20  .        item = 
+000080c0: 5154 6162 6c65 5769 6467 6574 4974 656d  QTableWidgetItem
+000080d0: 2829 0a20 2020 2020 2020 2069 7465 6d2e  ().        item.
+000080e0: 7365 7454 6578 7428 7374 7228 3129 290a  setText(str(1)).
+000080f0: 2020 2020 2020 2020 7461 626c 652e 7365          table.se
+00008100: 7449 7465 6d28 302c 2030 2c20 6974 656d  tItem(0, 0, item
+00008110: 290a 2020 2020 2020 2020 6974 656d 203d  ).        item =
+00008120: 2051 5461 626c 6557 6964 6765 7449 7465   QTableWidgetIte
+00008130: 6d28 290a 2020 2020 2020 2020 6974 656d  m().        item
+00008140: 2e73 6574 5465 7874 2873 7472 2832 2929  .setText(str(2))
+00008150: 0a20 2020 2020 2020 2074 6162 6c65 2e73  .        table.s
+00008160: 6574 4974 656d 2830 2c20 312c 2069 7465  etItem(0, 1, ite
+00008170: 6d29 0a20 2020 2020 2020 2069 7465 6d20  m).        item 
+00008180: 3d20 5154 6162 6c65 5769 6467 6574 4974  = QTableWidgetIt
+00008190: 656d 2829 0a20 2020 2020 2020 2069 7465  em().        ite
+000081a0: 6d2e 7365 7454 6578 7428 7374 7228 3329  m.setText(str(3)
+000081b0: 290a 2020 2020 2020 2020 7461 626c 652e  ).        table.
+000081c0: 7365 7449 7465 6d28 302c 2032 2c20 6974  setItem(0, 2, it
+000081d0: 656d 290a 0a20 2020 2020 2020 2051 5465  em)..        QTe
+000081e0: 7374 2e71 5761 6974 2835 3030 290a 0a20  st.qWait(500).. 
+000081f0: 2020 2020 2020 2051 5465 7374 2e6d 6f75         QTest.mou
+00008200: 7365 436c 6963 6b28 0a20 2020 2020 2020  seClick(.       
+00008210: 2020 2020 2061 6464 5f74 6167 2e74 6578       add_tag.tex
+00008220: 745f 6564 6974 5f64 6566 6175 6c74 5f76  t_edit_default_v
+00008230: 616c 7565 2e6c 6973 745f 6372 6561 7469  alue.list_creati
+00008240: 6f6e 2e6f 6b5f 6275 7474 6f6e 2c0a 2020  on.ok_button,.  
+00008250: 2020 2020 2020 2020 2020 5174 2e4c 6566            Qt.Lef
+00008260: 7442 7574 746f 6e2c 0a20 2020 2020 2020  tButton,.       
+00008270: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
+00008280: 6173 7365 7274 4571 7561 6c28 6164 645f  assertEqual(add_
+00008290: 7461 672e 7465 7874 5f65 6469 745f 6465  tag.text_edit_de
+000082a0: 6661 756c 745f 7661 6c75 652e 7465 7874  fault_value.text
+000082b0: 2829 2c20 225b 312c 2032 2c20 335d 2229  (), "[1, 2, 3]")
+000082c0: 0a20 2020 2020 2020 2051 5465 7374 2e6d  .        QTest.m
+000082d0: 6f75 7365 436c 6963 6b28 6164 645f 7461  ouseClick(add_ta
+000082e0: 672e 7075 7368 5f62 7574 746f 6e5f 6f6b  g.push_button_ok
+000082f0: 2c20 5174 2e4c 6566 7442 7574 746f 6e29  , Qt.LeftButton)
+00008300: 0a0a 2020 2020 2020 2020 7465 7374 5f6c  ..        test_l
+00008310: 6973 745f 636f 6c75 6d6e 203d 2028 0a20  ist_column = (. 
+00008320: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00008330: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
+00008340: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
+00008350: 6174 612e 6765 745f 7461 675f 636f 6c75  ata.get_tag_colu
+00008360: 6d6e 280a 2020 2020 2020 2020 2020 2020  mn(.            
+00008370: 2020 2020 2254 6573 745f 6c69 7374 220a      "Test_list".
+00008380: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+00008390: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+000083a0: 2066 6f72 2072 6f77 2069 6e20 7261 6e67   for row in rang
+000083b0: 6528 0a20 2020 2020 2020 2020 2020 2030  e(.            0
+000083c0: 2c20 7365 6c66 2e6d 6169 6e5f 7769 6e64  , self.main_wind
+000083d0: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
+000083e0: 7461 626c 655f 6461 7461 2e72 6f77 436f  table_data.rowCo
+000083f0: 756e 7428 290a 2020 2020 2020 2020 293a  unt().        ):
+00008400: 0a20 2020 2020 2020 2020 2020 2069 7465  .            ite
+00008410: 6d20 3d20 7365 6c66 2e6d 6169 6e5f 7769  m = self.main_wi
+00008420: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
+00008430: 722e 7461 626c 655f 6461 7461 2e69 7465  r.table_data.ite
+00008440: 6d28 0a20 2020 2020 2020 2020 2020 2020  m(.             
+00008450: 2020 2072 6f77 2c20 7465 7374 5f6c 6973     row, test_lis
+00008460: 745f 636f 6c75 6d6e 0a20 2020 2020 2020  t_column.       
+00008470: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+00008480: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00008490: 7561 6c28 6974 656d 2e74 6578 7428 292c  ual(item.text(),
+000084a0: 2022 5b31 2c20 322c 2033 5d22 290a 0a20   "[1, 2, 3]").. 
+000084b0: 2020 2020 2020 2051 4170 706c 6963 6174         QApplicat
+000084c0: 696f 6e2e 7072 6f63 6573 7345 7665 6e74  ion.processEvent
+000084d0: 7328 290a 0a20 2020 2064 6566 2074 6573  s()..    def tes
+000084e0: 745f 6164 7661 6e63 6564 5f73 6561 7263  t_advanced_searc
+000084f0: 6828 7365 6c66 293a 0a20 2020 2020 2020  h(self):.       
+00008500: 2022 2222 5465 7374 7320 7468 6520 6164   """Tests the ad
+00008510: 7661 6e63 6564 2073 6561 7263 6820 7769  vanced search wi
+00008520: 6467 6574 2e22 2222 0a0a 2020 2020 2020  dget."""..      
+00008530: 2020 7072 6f6a 6563 745f 385f 7061 7468    project_8_path
+00008540: 203d 2073 656c 662e 6765 745f 6e65 775f   = self.get_new_
+00008550: 7465 7374 5f70 726f 6a65 6374 2829 0a20  test_project(). 
+00008560: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
+00008570: 5f77 696e 646f 772e 7377 6974 6368 5f70  _window.switch_p
+00008580: 726f 6a65 6374 2870 726f 6a65 6374 5f38  roject(project_8
+00008590: 5f70 6174 682c 2022 7072 6f6a 6563 745f  _path, "project_
+000085a0: 3822 290a 0a20 2020 2020 2020 2073 6361  8")..        sca
+000085b0: 6e73 5f64 6973 706c 6179 6564 203d 205b  ns_displayed = [
+000085c0: 5d0a 0a20 2020 2020 2020 2066 6f72 2072  ]..        for r
+000085d0: 6f77 2069 6e20 7261 6e67 6528 0a20 2020  ow in range(.   
+000085e0: 2020 2020 2020 2020 2030 2c20 7365 6c66           0, self
+000085f0: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
+00008600: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
+00008610: 6461 7461 2e72 6f77 436f 756e 7428 290a  data.rowCount().
+00008620: 2020 2020 2020 2020 293a 0a20 2020 2020          ):.     
+00008630: 2020 2020 2020 2069 7465 6d20 3d20 7365         item = se
+00008640: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
+00008650: 6174 615f 6272 6f77 7365 722e 7461 626c  ata_browser.tabl
+00008660: 655f 6461 7461 2e69 7465 6d28 726f 772c  e_data.item(row,
+00008670: 2030 290a 2020 2020 2020 2020 2020 2020   0).            
+00008680: 7363 616e 5f6e 616d 6520 3d20 6974 656d  scan_name = item
+00008690: 2e74 6578 7428 290a 0a20 2020 2020 2020  .text()..       
+000086a0: 2020 2020 2069 6620 6e6f 7420 7365 6c66       if not self
+000086b0: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
+000086c0: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
+000086d0: 6461 7461 2e69 7352 6f77 4869 6464 656e  data.isRowHidden
+000086e0: 2872 6f77 293a 0a20 2020 2020 2020 2020  (row):.         
+000086f0: 2020 2020 2020 2073 6361 6e73 5f64 6973         scans_dis
+00008700: 706c 6179 6564 2e61 7070 656e 6428 7363  played.append(sc
+00008710: 616e 5f6e 616d 6529 0a0a 2020 2020 2020  an_name)..      
+00008720: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00008730: 616c 286c 656e 2873 6361 6e73 5f64 6973  al(len(scans_dis
+00008740: 706c 6179 6564 292c 2039 290a 2020 2020  played), 9).    
+00008750: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
+00008760: 7275 6528 0a20 2020 2020 2020 2020 2020  rue(.           
+00008770: 2022 6461 7461 2f72 6177 5f64 6174 612f   "data/raw_data/
+00008780: 4775 6572 6265 742d 4336 2d32 3031 342d  Guerbet-C6-2014-
+00008790: 5261 742d 4b35 322d 5475 6265 3237 220a  Rat-K52-Tube27".
+000087a0: 2020 2020 2020 2020 2020 2020 222d 3230              "-20
+000087b0: 3134 2d30 322d 3134 3130 3233 3137 2d30  14-02-14102317-0
+000087c0: 312d 4731 5f47 7565 7262 6574 5f41 6e61  1-G1_Guerbet_Ana
+000087d0: 742d 5241 5245 220a 2020 2020 2020 2020  t-RARE".        
+000087e0: 2020 2020 2270 766d 2d30 3030 3232 305f      "pvm-000220_
+000087f0: 3030 302e 6e69 6922 2069 6e20 7363 616e  000.nii" in scan
+00008800: 735f 6469 7370 6c61 7965 640a 2020 2020  s_displayed.    
+00008810: 2020 2020 290a 2020 2020 2020 2020 7365      ).        se
+00008820: 6c66 2e61 7373 6572 7454 7275 6528 0a20  lf.assertTrue(. 
+00008830: 2020 2020 2020 2020 2020 2022 6461 7461             "data
+00008840: 2f72 6177 5f64 6174 612f 4775 6572 6265  /raw_data/Guerbe
+00008850: 742d 4336 2d32 3031 342d 5261 742d 4b35  t-C6-2014-Rat-K5
+00008860: 322d 5475 6265 3237 220a 2020 2020 2020  2-Tube27".      
+00008870: 2020 2020 2020 222d 3230 3134 2d30 322d        "-2014-02-
+00008880: 3134 3130 3233 3137 2d30 342d 4733 5f47  14102317-04-G3_G
+00008890: 7565 7262 6574 5f4d 4445 4654 2d4d 4445  uerbet_MDEFT-MDE
+000088a0: 4654 220a 2020 2020 2020 2020 2020 2020  FT".            
+000088b0: 2270 766d 2d30 3030 3934 305f 3830 302e  "pvm-000940_800.
+000088c0: 6e69 6922 2069 6e20 7363 616e 735f 6469  nii" in scans_di
+000088d0: 7370 6c61 7965 640a 2020 2020 2020 2020  splayed.        
+000088e0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+000088f0: 7373 6572 7454 7275 6528 0a20 2020 2020  ssertTrue(.     
+00008900: 2020 2020 2020 2022 6461 7461 2f72 6177         "data/raw
+00008910: 5f64 6174 612f 4775 6572 6265 742d 4336  _data/Guerbet-C6
+00008920: 2d32 3031 342d 5261 742d 4b35 322d 5475  -2014-Rat-K52-Tu
+00008930: 6265 3237 220a 2020 2020 2020 2020 2020  be27".          
+00008940: 2020 222d 3230 3134 2d30 322d 3134 3130    "-2014-02-1410
+00008950: 3233 3137 2d30 352d 4734 5f47 7565 7262  2317-05-G4_Guerb
+00008960: 6574 5f54 3153 455f 3830 302d 5241 5245  et_T1SE_800-RARE
+00008970: 220a 2020 2020 2020 2020 2020 2020 2270  ".            "p
+00008980: 766d 2d30 3030 3134 325f 3430 302e 6e69  vm-000142_400.ni
+00008990: 6922 2069 6e20 7363 616e 735f 6469 7370  i" in scans_disp
+000089a0: 6c61 7965 640a 2020 2020 2020 2020 290a  layed.        ).
+000089b0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+000089c0: 6572 7454 7275 6528 0a20 2020 2020 2020  ertTrue(.       
+000089d0: 2020 2020 2022 6461 7461 2f72 6177 5f64       "data/raw_d
+000089e0: 6174 612f 4775 6572 6265 742d 4336 2d32  ata/Guerbet-C6-2
+000089f0: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
+00008a00: 3237 220a 2020 2020 2020 2020 2020 2020  27".            
+00008a10: 222d 3230 3134 2d30 322d 3134 3130 3233  "-2014-02-141023
+00008a20: 3137 2d30 362d 4734 5f47 7565 7262 6574  17-06-G4_Guerbet
+00008a30: 5f54 3153 455f 3830 302d 5241 5245 220a  _T1SE_800-RARE".
+00008a40: 2020 2020 2020 2020 2020 2020 2270 766d              "pvm
+00008a50: 2d30 3030 3134 325f 3430 302e 6e69 6922  -000142_400.nii"
+00008a60: 2069 6e20 7363 616e 735f 6469 7370 6c61   in scans_displa
+00008a70: 7965 640a 2020 2020 2020 2020 290a 2020  yed.        ).  
+00008a80: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00008a90: 7454 7275 6528 0a20 2020 2020 2020 2020  tTrue(.         
+00008aa0: 2020 2022 6461 7461 2f72 6177 5f64 6174     "data/raw_dat
+00008ab0: 612f 4775 6572 6265 742d 4336 2d32 3031  a/Guerbet-C6-201
+00008ac0: 342d 5261 742d 4b35 322d 5475 6265 3237  4-Rat-K52-Tube27
+00008ad0: 220a 2020 2020 2020 2020 2020 2020 222d  ".            "-
+00008ae0: 3230 3134 2d30 322d 3134 3130 3233 3137  2014-02-14102317
+00008af0: 2d30 382d 4734 5f47 7565 7262 6574 5f54  -08-G4_Guerbet_T
+00008b00: 3153 455f 3830 302d 5241 5245 220a 2020  1SE_800-RARE".  
+00008b10: 2020 2020 2020 2020 2020 2270 766d 2d30            "pvm-0
+00008b20: 3030 3134 325f 3430 302e 6e69 6922 2069  00142_400.nii" i
+00008b30: 6e20 7363 616e 735f 6469 7370 6c61 7965  n scans_displaye
+00008b40: 640a 2020 2020 2020 2020 290a 2020 2020  d.        ).    
+00008b50: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
+00008b60: 7275 6528 0a20 2020 2020 2020 2020 2020  rue(.           
+00008b70: 2022 6461 7461 2f72 6177 5f64 6174 612f   "data/raw_data/
+00008b80: 4775 6572 6265 742d 4336 2d32 3031 342d  Guerbet-C6-2014-
+00008b90: 5261 742d 4b35 322d 5475 6265 3237 220a  Rat-K52-Tube27".
+00008ba0: 2020 2020 2020 2020 2020 2020 222d 3230              "-20
+00008bb0: 3134 2d30 322d 3134 3130 3233 3137 2d30  14-02-14102317-0
+00008bc0: 392d 4734 5f47 7565 7262 6574 5f54 3153  9-G4_Guerbet_T1S
+00008bd0: 455f 3830 302d 5241 5245 220a 2020 2020  E_800-RARE".    
+00008be0: 2020 2020 2020 2020 2270 766d 2d30 3030          "pvm-000
+00008bf0: 3134 325f 3430 302e 6e69 6922 2069 6e20  142_400.nii" in 
+00008c00: 7363 616e 735f 6469 7370 6c61 7965 640a  scans_displayed.
+00008c10: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00008c20: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+00008c30: 6528 0a20 2020 2020 2020 2020 2020 2022  e(.            "
+00008c40: 6461 7461 2f72 6177 5f64 6174 612f 4775  data/raw_data/Gu
+00008c50: 6572 6265 742d 4336 2d32 3031 342d 5261  erbet-C6-2014-Ra
+00008c60: 742d 4b35 322d 5475 6265 3237 220a 2020  t-K52-Tube27".  
+00008c70: 2020 2020 2020 2020 2020 222d 3230 3134            "-2014
+00008c80: 2d30 322d 3134 3130 3233 3137 2d31 302d  -02-14102317-10-
+00008c90: 4733 5f47 7565 7262 6574 5f4d 4445 4654  G3_Guerbet_MDEFT
+00008ca0: 2d4d 4445 4654 220a 2020 2020 2020 2020  -MDEFT".        
+00008cb0: 2020 2020 2270 766d 2d30 3030 3934 305f      "pvm-000940_
+00008cc0: 3830 302e 6e69 6922 2069 6e20 7363 616e  800.nii" in scan
+00008cd0: 735f 6469 7370 6c61 7965 640a 2020 2020  s_displayed.    
+00008ce0: 2020 2020 290a 2020 2020 2020 2020 7365      ).        se
+00008cf0: 6c66 2e61 7373 6572 7454 7275 6528 0a20  lf.assertTrue(. 
+00008d00: 2020 2020 2020 2020 2020 2022 6461 7461             "data
+00008d10: 2f72 6177 5f64 6174 612f 4775 6572 6265  /raw_data/Guerbe
+00008d20: 742d 4336 2d32 3031 342d 5261 742d 4b35  t-C6-2014-Rat-K5
+00008d30: 322d 5475 6265 3237 220a 2020 2020 2020  2-Tube27".      
+00008d40: 2020 2020 2020 222d 3230 3134 2d30 322d        "-2014-02-
+00008d50: 3134 3130 3233 3137 2d31 312d 4734 5f47  14102317-11-G4_G
+00008d60: 7565 7262 6574 5f54 3153 455f 3830 302d  uerbet_T1SE_800-
+00008d70: 5241 5245 220a 2020 2020 2020 2020 2020  RARE".          
+00008d80: 2020 2270 766d 2d30 3030 3134 325f 3430    "pvm-000142_40
+00008d90: 302e 6e69 6922 2069 6e20 7363 616e 735f  0.nii" in scans_
+00008da0: 6469 7370 6c61 7965 640a 2020 2020 2020  displayed.      
+00008db0: 2020 290a 2020 2020 2020 2020 7365 6c66    ).        self
+00008dc0: 2e61 7373 6572 7454 7275 6528 0a20 2020  .assertTrue(.   
+00008dd0: 2020 2020 2020 2020 2022 6461 7461 2f64           "data/d
+00008de0: 6572 6976 6564 5f64 6174 612f 7347 7565  erived_data/sGue
+00008df0: 7262 6574 2d43 362d 3230 3134 2d52 6174  rbet-C6-2014-Rat
+00008e00: 2d4b 3532 2d54 7562 6532 3722 0a20 2020  -K52-Tube27".   
+00008e10: 2020 2020 2020 2020 2022 2d32 3031 342d           "-2014-
+00008e20: 3032 2d31 3431 3032 3331 372d 3031 2d47  02-14102317-01-G
+00008e30: 315f 4775 6572 6265 745f 416e 6174 2d52  1_Guerbet_Anat-R
+00008e40: 4152 4522 0a20 2020 2020 2020 2020 2020  ARE".           
+00008e50: 2022 7076 6d2d 3030 3032 3230 5f30 3030   "pvm-000220_000
+00008e60: 2e6e 6969 2220 696e 2073 6361 6e73 5f64  .nii" in scans_d
+00008e70: 6973 706c 6179 6564 0a20 2020 2020 2020  isplayed.       
+00008e80: 2029 0a0a 2020 2020 2020 2020 5154 6573   )..        QTes
+00008e90: 742e 6d6f 7573 6543 6c69 636b 280a 2020  t.mouseClick(.  
+00008ea0: 2020 2020 2020 2020 2020 7365 6c66 2e6d            self.m
+00008eb0: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
+00008ec0: 6272 6f77 7365 722e 6164 7661 6e63 6564  browser.advanced
+00008ed0: 5f73 6561 7263 685f 6275 7474 6f6e 2c20  _search_button, 
+00008ee0: 5174 2e4c 6566 7442 7574 746f 6e0a 2020  Qt.LeftButton.  
+00008ef0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+00008f00: 2023 2054 6573 7469 6e67 202d 2061 6e64   # Testing - and
+00008f10: 202b 2062 7574 746f 6e73 0a20 2020 2020   + buttons.     
+00008f20: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00008f30: 7561 6c28 0a20 2020 2020 2020 2020 2020  ual(.           
+00008f40: 2031 2c20 6c65 6e28 7365 6c66 2e6d 6169   1, len(self.mai
+00008f50: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
+00008f60: 6f77 7365 722e 6164 7661 6e63 6564 5f73  owser.advanced_s
+00008f70: 6561 7263 682e 726f 7773 290a 2020 2020  earch.rows).    
+00008f80: 2020 2020 290a 2020 2020 2020 2020 6669      ).        fi
+00008f90: 7273 745f 726f 7720 3d20 7365 6c66 2e6d  rst_row = self.m
+00008fa0: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
+00008fb0: 6272 6f77 7365 722e 6164 7661 6e63 6564  browser.advanced
+00008fc0: 5f73 6561 7263 682e 726f 7773 5b30 5d0a  _search.rows[0].
+00008fd0: 2020 2020 2020 2020 5154 6573 742e 6d6f          QTest.mo
+00008fe0: 7573 6543 6c69 636b 2866 6972 7374 5f72  useClick(first_r
+00008ff0: 6f77 5b36 5d2c 2051 742e 4c65 6674 4275  ow[6], Qt.LeftBu
+00009000: 7474 6f6e 290a 2020 2020 2020 2020 7365  tton).        se
+00009010: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
+00009020: 2020 2020 2020 2020 2020 2020 322c 206c              2, l
+00009030: 656e 2873 656c 662e 6d61 696e 5f77 696e  en(self.main_win
+00009040: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
+00009050: 2e61 6476 616e 6365 645f 7365 6172 6368  .advanced_search
+00009060: 2e72 6f77 7329 0a20 2020 2020 2020 2029  .rows).        )
+00009070: 0a20 2020 2020 2020 2073 6563 6f6e 645f  .        second_
+00009080: 726f 7720 3d20 7365 6c66 2e6d 6169 6e5f  row = self.main_
+00009090: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
+000090a0: 7365 722e 6164 7661 6e63 6564 5f73 6561  ser.advanced_sea
+000090b0: 7263 682e 726f 7773 5b31 5d0a 2020 2020  rch.rows[1].    
+000090c0: 2020 2020 5154 6573 742e 6d6f 7573 6543      QTest.mouseC
+000090d0: 6c69 636b 2873 6563 6f6e 645f 726f 775b  lick(second_row[
+000090e0: 355d 2c20 5174 2e4c 6566 7442 7574 746f  5], Qt.LeftButto
+000090f0: 6e29 0a20 2020 2020 2020 2073 656c 662e  n).        self.
+00009100: 6173 7365 7274 4571 7561 6c28 0a20 2020  assertEqual(.   
+00009110: 2020 2020 2020 2020 2031 2c20 6c65 6e28           1, len(
+00009120: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+00009130: 2e64 6174 615f 6272 6f77 7365 722e 6164  .data_browser.ad
+00009140: 7661 6e63 6564 5f73 6561 7263 682e 726f  vanced_search.ro
+00009150: 7773 290a 2020 2020 2020 2020 290a 2020  ws).        ).  
+00009160: 2020 2020 2020 6669 7273 745f 726f 7720        first_row 
+00009170: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
+00009180: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
+00009190: 6164 7661 6e63 6564 5f73 6561 7263 682e  advanced_search.
+000091a0: 726f 7773 5b30 5d0a 2020 2020 2020 2020  rows[0].        
+000091b0: 5154 6573 742e 6d6f 7573 6543 6c69 636b  QTest.mouseClick
+000091c0: 2866 6972 7374 5f72 6f77 5b35 5d2c 2051  (first_row[5], Q
+000091d0: 742e 4c65 6674 4275 7474 6f6e 290a 2020  t.LeftButton).  
+000091e0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+000091f0: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
+00009200: 2020 2020 312c 206c 656e 2873 656c 662e      1, len(self.
+00009210: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
+00009220: 5f62 726f 7773 6572 2e61 6476 616e 6365  _browser.advance
+00009230: 645f 7365 6172 6368 2e72 6f77 7329 0a20  d_search.rows). 
+00009240: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+00009250: 2020 6669 656c 6420 3d20 7365 6c66 2e6d    field = self.m
+00009260: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
+00009270: 6272 6f77 7365 722e 6164 7661 6e63 6564  browser.advanced
+00009280: 5f73 6561 7263 682e 726f 7773 5b30 5d5b  _search.rows[0][
+00009290: 325d 0a20 2020 2020 2020 2063 6f6e 6469  2].        condi
+000092a0: 7469 6f6e 203d 2073 656c 662e 6d61 696e  tion = self.main
+000092b0: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
+000092c0: 7773 6572 2e61 6476 616e 6365 645f 7365  wser.advanced_se
+000092d0: 6172 6368 2e72 6f77 735b 305d 5b33 5d0a  arch.rows[0][3].
+000092e0: 2020 2020 2020 2020 7661 6c75 6520 3d20          value = 
+000092f0: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+00009300: 2e64 6174 615f 6272 6f77 7365 722e 6164  .data_browser.ad
+00009310: 7661 6e63 6564 5f73 6561 7263 682e 726f  vanced_search.ro
+00009320: 7773 5b30 5d5b 345d 0a20 2020 2020 2020  ws[0][4].       
+00009330: 2066 6965 6c64 5f66 696c 656e 616d 655f   field_filename_
+00009340: 696e 6465 7820 3d20 6669 656c 642e 6669  index = field.fi
+00009350: 6e64 5465 7874 2854 4147 5f46 494c 454e  ndText(TAG_FILEN
+00009360: 414d 4529 0a20 2020 2020 2020 2066 6965  AME).        fie
+00009370: 6c64 2e73 6574 4375 7272 656e 7449 6e64  ld.setCurrentInd
+00009380: 6578 2866 6965 6c64 5f66 696c 656e 616d  ex(field_filenam
+00009390: 655f 696e 6465 7829 0a20 2020 2020 2020  e_index).       
+000093a0: 2063 6f6e 6469 7469 6f6e 5f63 6f6e 7461   condition_conta
+000093b0: 696e 735f 696e 6465 7820 3d20 636f 6e64  ins_index = cond
+000093c0: 6974 696f 6e2e 6669 6e64 5465 7874 2822  ition.findText("
+000093d0: 434f 4e54 4149 4e53 2229 0a20 2020 2020  CONTAINS").     
+000093e0: 2020 2063 6f6e 6469 7469 6f6e 2e73 6574     condition.set
+000093f0: 4375 7272 656e 7449 6e64 6578 2863 6f6e  CurrentIndex(con
+00009400: 6469 7469 6f6e 5f63 6f6e 7461 696e 735f  dition_contains_
+00009410: 696e 6465 7829 0a20 2020 2020 2020 2076  index).        v
+00009420: 616c 7565 2e73 6574 5465 7874 2822 4731  alue.setText("G1
+00009430: 2229 0a20 2020 2020 2020 2051 5465 7374  ").        QTest
+00009440: 2e6d 6f75 7365 436c 6963 6b28 0a20 2020  .mouseClick(.   
+00009450: 2020 2020 2020 2020 2073 656c 662e 6d61           self.ma
+00009460: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
+00009470: 726f 7773 6572 2e61 6476 616e 6365 645f  rowser.advanced_
+00009480: 7365 6172 6368 2e73 6561 7263 682c 2051  search.search, Q
+00009490: 742e 4c65 6674 4275 7474 6f6e 0a20 2020  t.LeftButton.   
+000094a0: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+000094b0: 2320 5465 7374 696e 6720 7468 6174 206f  # Testing that o
+000094c0: 6e6c 7920 4731 2073 6361 6e73 2061 7265  nly G1 scans are
+000094d0: 2064 6973 706c 6179 6564 2077 6974 6820   displayed with 
+000094e0: 7468 6520 6669 6c74 6572 2061 7070 6c69  the filter appli
+000094f0: 6564 0a20 2020 2020 2020 2073 6361 6e73  ed.        scans
+00009500: 5f64 6973 706c 6179 6564 203d 205b 5d0a  _displayed = [].
+00009510: 0a20 2020 2020 2020 2066 6f72 2072 6f77  .        for row
+00009520: 2069 6e20 7261 6e67 6528 0a20 2020 2020   in range(.     
+00009530: 2020 2020 2020 2030 2c20 7365 6c66 2e6d         0, self.m
+00009540: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
+00009550: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
+00009560: 7461 2e72 6f77 436f 756e 7428 290a 2020  ta.rowCount().  
+00009570: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
+00009580: 2020 2020 2069 7465 6d20 3d20 7365 6c66       item = self
+00009590: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
+000095a0: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
+000095b0: 6461 7461 2e69 7465 6d28 726f 772c 2030  data.item(row, 0
+000095c0: 290a 2020 2020 2020 2020 2020 2020 7363  ).            sc
+000095d0: 616e 5f6e 616d 6520 3d20 6974 656d 2e74  an_name = item.t
+000095e0: 6578 7428 290a 0a20 2020 2020 2020 2020  ext()..         
+000095f0: 2020 2069 6620 6e6f 7420 7365 6c66 2e6d     if not self.m
+00009600: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
+00009610: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
+00009620: 7461 2e69 7352 6f77 4869 6464 656e 2872  ta.isRowHidden(r
+00009630: 6f77 293a 0a20 2020 2020 2020 2020 2020  ow):.           
+00009640: 2020 2020 2073 6361 6e73 5f64 6973 706c       scans_displ
+00009650: 6179 6564 2e61 7070 656e 6428 7363 616e  ayed.append(scan
+00009660: 5f6e 616d 6529 0a0a 2020 2020 2020 2020  _name)..        
+00009670: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00009680: 286c 656e 2873 6361 6e73 5f64 6973 706c  (len(scans_displ
+00009690: 6179 6564 292c 2032 290a 2020 2020 2020  ayed), 2).      
+000096a0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+000096b0: 6528 0a20 2020 2020 2020 2020 2020 2022  e(.            "
+000096c0: 6461 7461 2f72 6177 5f64 6174 612f 4775  data/raw_data/Gu
+000096d0: 6572 6265 742d 4336 2d32 3031 342d 5261  erbet-C6-2014-Ra
+000096e0: 742d 4b35 322d 5475 6265 3237 220a 2020  t-K52-Tube27".  
+000096f0: 2020 2020 2020 2020 2020 222d 3230 3134            "-2014
+00009700: 2d30 322d 3134 3130 3233 3137 2d30 312d  -02-14102317-01-
+00009710: 4731 5f47 7565 7262 6574 5f41 6e61 742d  G1_Guerbet_Anat-
+00009720: 5241 5245 220a 2020 2020 2020 2020 2020  RARE".          
+00009730: 2020 2270 766d 2d30 3030 3232 305f 3030    "pvm-000220_00
+00009740: 302e 6e69 6922 2069 6e20 7363 616e 735f  0.nii" in scans_
+00009750: 6469 7370 6c61 7965 640a 2020 2020 2020  displayed.      
+00009760: 2020 290a 2020 2020 2020 2020 7365 6c66    ).        self
+00009770: 2e61 7373 6572 7454 7275 6528 0a20 2020  .assertTrue(.   
+00009780: 2020 2020 2020 2020 2022 6461 7461 2f64           "data/d
+00009790: 6572 6976 6564 5f64 6174 612f 7347 7565  erived_data/sGue
+000097a0: 7262 6574 2d43 362d 3230 3134 2d52 6174  rbet-C6-2014-Rat
+000097b0: 2d4b 3532 2d54 7562 6532 3722 0a20 2020  -K52-Tube27".   
+000097c0: 2020 2020 2020 2020 2022 2d32 3031 342d           "-2014-
+000097d0: 3032 2d31 3431 3032 3331 372d 3031 2d47  02-14102317-01-G
+000097e0: 315f 4775 6572 6265 745f 416e 6174 2d52  1_Guerbet_Anat-R
+000097f0: 4152 4522 0a20 2020 2020 2020 2020 2020  ARE".           
+00009800: 2022 7076 6d2d 3030 3032 3230 5f30 3030   "pvm-000220_000
+00009810: 2e6e 6969 2220 696e 2073 6361 6e73 5f64  .nii" in scans_d
+00009820: 6973 706c 6179 6564 0a20 2020 2020 2020  isplayed.       
+00009830: 2029 0a0a 2020 2020 2020 2020 2320 5465   )..        # Te
+00009840: 7374 696e 6720 7468 6174 2065 7665 7279  sting that every
+00009850: 2073 6361 6e20 6973 2062 6163 6b20 7768   scan is back wh
+00009860: 656e 2063 6c69 636b 696e 6720 6167 6169  en clicking agai
+00009870: 6e20 6f6e 0a20 2020 2020 2020 2023 2061  n on.        # a
+00009880: 6476 616e 6365 6420 7365 6172 6368 0a20  dvanced search. 
+00009890: 2020 2020 2020 2051 5465 7374 2e6d 6f75         QTest.mou
+000098a0: 7365 436c 6963 6b28 0a20 2020 2020 2020  seClick(.       
+000098b0: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
+000098c0: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
+000098d0: 6572 2e61 6476 616e 6365 645f 7365 6172  er.advanced_sear
+000098e0: 6368 5f62 7574 746f 6e2c 2051 742e 4c65  ch_button, Qt.Le
+000098f0: 6674 4275 7474 6f6e 0a20 2020 2020 2020  ftButton.       
+00009900: 2029 0a20 2020 2020 2020 2073 6361 6e73   ).        scans
+00009910: 5f64 6973 706c 6179 6564 203d 205b 5d0a  _displayed = [].
+00009920: 0a20 2020 2020 2020 2066 6f72 2072 6f77  .        for row
+00009930: 2069 6e20 7261 6e67 6528 0a20 2020 2020   in range(.     
+00009940: 2020 2020 2020 2030 2c20 7365 6c66 2e6d         0, self.m
+00009950: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
+00009960: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
+00009970: 7461 2e72 6f77 436f 756e 7428 290a 2020  ta.rowCount().  
+00009980: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
+00009990: 2020 2020 2069 7465 6d20 3d20 7365 6c66       item = self
+000099a0: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
+000099b0: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
+000099c0: 6461 7461 2e69 7465 6d28 726f 772c 2030  data.item(row, 0
+000099d0: 290a 2020 2020 2020 2020 2020 2020 7363  ).            sc
+000099e0: 616e 5f6e 616d 6520 3d20 6974 656d 2e74  an_name = item.t
+000099f0: 6578 7428 290a 0a20 2020 2020 2020 2020  ext()..         
+00009a00: 2020 2069 6620 6e6f 7420 7365 6c66 2e6d     if not self.m
+00009a10: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
+00009a20: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
+00009a30: 7461 2e69 7352 6f77 4869 6464 656e 2872  ta.isRowHidden(r
+00009a40: 6f77 293a 0a20 2020 2020 2020 2020 2020  ow):.           
+00009a50: 2020 2020 2073 6361 6e73 5f64 6973 706c       scans_displ
+00009a60: 6179 6564 2e61 7070 656e 6428 7363 616e  ayed.append(scan
+00009a70: 5f6e 616d 6529 0a0a 2020 2020 2020 2020  _name)..        
+00009a80: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00009a90: 286c 656e 2873 6361 6e73 5f64 6973 706c  (len(scans_displ
+00009aa0: 6179 6564 292c 2039 290a 2020 2020 2020  ayed), 9).      
+00009ab0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+00009ac0: 6528 0a20 2020 2020 2020 2020 2020 2022  e(.            "
+00009ad0: 6461 7461 2f72 6177 5f64 6174 612f 4775  data/raw_data/Gu
+00009ae0: 6572 6265 742d 4336 2d32 3031 342d 5261  erbet-C6-2014-Ra
+00009af0: 742d 4b35 322d 5475 6265 3237 220a 2020  t-K52-Tube27".  
+00009b00: 2020 2020 2020 2020 2020 222d 3230 3134            "-2014
+00009b10: 2d30 322d 3134 3130 3233 3137 2d30 312d  -02-14102317-01-
+00009b20: 4731 5f47 7565 7262 6574 5f41 6e61 742d  G1_Guerbet_Anat-
+00009b30: 5241 5245 220a 2020 2020 2020 2020 2020  RARE".          
+00009b40: 2020 2270 766d 2d30 3030 3232 305f 3030    "pvm-000220_00
+00009b50: 302e 6e69 6922 2069 6e20 7363 616e 735f  0.nii" in scans_
+00009b60: 6469 7370 6c61 7965 640a 2020 2020 2020  displayed.      
+00009b70: 2020 290a 2020 2020 2020 2020 7365 6c66    ).        self
+00009b80: 2e61 7373 6572 7454 7275 6528 0a20 2020  .assertTrue(.   
+00009b90: 2020 2020 2020 2020 2022 6461 7461 2f72           "data/r
+00009ba0: 6177 5f64 6174 612f 4775 6572 6265 742d  aw_data/Guerbet-
+00009bb0: 4336 2d32 3031 342d 5261 742d 4b35 322d  C6-2014-Rat-K52-
+00009bc0: 5475 6265 3237 220a 2020 2020 2020 2020  Tube27".        
+00009bd0: 2020 2020 222d 3230 3134 2d30 322d 3134      "-2014-02-14
+00009be0: 3130 3233 3137 2d30 342d 4733 5f47 7565  102317-04-G3_Gue
+00009bf0: 7262 6574 5f4d 4445 4654 2d4d 4445 4654  rbet_MDEFT-MDEFT
+00009c00: 220a 2020 2020 2020 2020 2020 2020 2270  ".            "p
+00009c10: 766d 2d30 3030 3934 305f 3830 302e 6e69  vm-000940_800.ni
+00009c20: 6922 2069 6e20 7363 616e 735f 6469 7370  i" in scans_disp
+00009c30: 6c61 7965 640a 2020 2020 2020 2020 290a  layed.        ).
+00009c40: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00009c50: 6572 7454 7275 6528 0a20 2020 2020 2020  ertTrue(.       
+00009c60: 2020 2020 2022 6461 7461 2f72 6177 5f64       "data/raw_d
+00009c70: 6174 612f 4775 6572 6265 742d 4336 2d32  ata/Guerbet-C6-2
+00009c80: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
+00009c90: 3237 220a 2020 2020 2020 2020 2020 2020  27".            
+00009ca0: 222d 3230 3134 2d30 322d 3134 3130 3233  "-2014-02-141023
+00009cb0: 3137 2d30 352d 4734 5f47 7565 7262 6574  17-05-G4_Guerbet
+00009cc0: 5f54 3153 455f 3830 302d 5241 5245 220a  _T1SE_800-RARE".
+00009cd0: 2020 2020 2020 2020 2020 2020 2270 766d              "pvm
+00009ce0: 2d30 3030 3134 325f 3430 302e 6e69 6922  -000142_400.nii"
+00009cf0: 2069 6e20 7363 616e 735f 6469 7370 6c61   in scans_displa
+00009d00: 7965 640a 2020 2020 2020 2020 290a 2020  yed.        ).  
+00009d10: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00009d20: 7454 7275 6528 0a20 2020 2020 2020 2020  tTrue(.         
+00009d30: 2020 2022 6461 7461 2f72 6177 5f64 6174     "data/raw_dat
+00009d40: 612f 4775 6572 6265 742d 4336 2d32 3031  a/Guerbet-C6-201
+00009d50: 342d 5261 742d 4b35 322d 5475 6265 3237  4-Rat-K52-Tube27
+00009d60: 220a 2020 2020 2020 2020 2020 2020 222d  ".            "-
+00009d70: 3230 3134 2d30 322d 3134 3130 3233 3137  2014-02-14102317
+00009d80: 2d30 362d 4734 5f47 7565 7262 6574 5f54  -06-G4_Guerbet_T
+00009d90: 3153 455f 3830 302d 5241 5245 220a 2020  1SE_800-RARE".  
+00009da0: 2020 2020 2020 2020 2020 2270 766d 2d30            "pvm-0
+00009db0: 3030 3134 325f 3430 302e 6e69 6922 2069  00142_400.nii" i
+00009dc0: 6e20 7363 616e 735f 6469 7370 6c61 7965  n scans_displaye
+00009dd0: 640a 2020 2020 2020 2020 290a 2020 2020  d.        ).    
+00009de0: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
+00009df0: 7275 6528 0a20 2020 2020 2020 2020 2020  rue(.           
+00009e00: 2022 6461 7461 2f72 6177 5f64 6174 612f   "data/raw_data/
+00009e10: 4775 6572 6265 742d 4336 2d32 3031 342d  Guerbet-C6-2014-
+00009e20: 5261 742d 4b35 322d 5475 6265 3237 220a  Rat-K52-Tube27".
+00009e30: 2020 2020 2020 2020 2020 2020 222d 3230              "-20
+00009e40: 3134 2d30 322d 3134 3130 3233 3137 2d30  14-02-14102317-0
+00009e50: 382d 4734 5f47 7565 7262 6574 5f54 3153  8-G4_Guerbet_T1S
+00009e60: 455f 3830 302d 5241 5245 220a 2020 2020  E_800-RARE".    
+00009e70: 2020 2020 2020 2020 2270 766d 2d30 3030          "pvm-000
+00009e80: 3134 325f 3430 302e 6e69 6922 2069 6e20  142_400.nii" in 
+00009e90: 7363 616e 735f 6469 7370 6c61 7965 640a  scans_displayed.
+00009ea0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00009eb0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+00009ec0: 6528 0a20 2020 2020 2020 2020 2020 2022  e(.            "
+00009ed0: 6461 7461 2f72 6177 5f64 6174 612f 4775  data/raw_data/Gu
+00009ee0: 6572 6265 742d 4336 2d32 3031 342d 5261  erbet-C6-2014-Ra
+00009ef0: 742d 4b35 322d 5475 6265 3237 220a 2020  t-K52-Tube27".  
+00009f00: 2020 2020 2020 2020 2020 222d 3230 3134            "-2014
+00009f10: 2d30 322d 3134 3130 3233 3137 2d30 392d  -02-14102317-09-
+00009f20: 4734 5f47 7565 7262 6574 5f54 3153 455f  G4_Guerbet_T1SE_
+00009f30: 3830 302d 5241 5245 220a 2020 2020 2020  800-RARE".      
+00009f40: 2020 2020 2020 2270 766d 2d30 3030 3134        "pvm-00014
+00009f50: 325f 3430 302e 6e69 6922 2069 6e20 7363  2_400.nii" in sc
+00009f60: 616e 735f 6469 7370 6c61 7965 640a 2020  ans_displayed.  
+00009f70: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00009f80: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
+00009f90: 0a20 2020 2020 2020 2020 2020 2022 6461  .            "da
+00009fa0: 7461 2f72 6177 5f64 6174 612f 4775 6572  ta/raw_data/Guer
+00009fb0: 6265 742d 4336 2d32 3031 342d 5261 742d  bet-C6-2014-Rat-
+00009fc0: 4b35 322d 5475 6265 3237 220a 2020 2020  K52-Tube27".    
+00009fd0: 2020 2020 2020 2020 222d 3230 3134 2d30          "-2014-0
+00009fe0: 322d 3134 3130 3233 3137 2d31 302d 4733  2-14102317-10-G3
+00009ff0: 5f47 7565 7262 6574 5f4d 4445 4654 2d4d  _Guerbet_MDEFT-M
+0000a000: 4445 4654 220a 2020 2020 2020 2020 2020  DEFT".          
+0000a010: 2020 2270 766d 2d30 3030 3934 305f 3830    "pvm-000940_80
+0000a020: 302e 6e69 6922 2069 6e20 7363 616e 735f  0.nii" in scans_
+0000a030: 6469 7370 6c61 7965 640a 2020 2020 2020  displayed.      
+0000a040: 2020 290a 2020 2020 2020 2020 7365 6c66    ).        self
+0000a050: 2e61 7373 6572 7454 7275 6528 0a20 2020  .assertTrue(.   
+0000a060: 2020 2020 2020 2020 2022 6461 7461 2f72           "data/r
+0000a070: 6177 5f64 6174 612f 4775 6572 6265 742d  aw_data/Guerbet-
+0000a080: 4336 2d32 3031 342d 5261 742d 4b35 322d  C6-2014-Rat-K52-
+0000a090: 5475 6265 3237 220a 2020 2020 2020 2020  Tube27".        
+0000a0a0: 2020 2020 222d 3230 3134 2d30 322d 3134      "-2014-02-14
+0000a0b0: 3130 3233 3137 2d31 312d 4734 5f47 7565  102317-11-G4_Gue
+0000a0c0: 7262 6574 5f54 3153 455f 3830 302d 5241  rbet_T1SE_800-RA
+0000a0d0: 5245 220a 2020 2020 2020 2020 2020 2020  RE".            
+0000a0e0: 2270 766d 2d30 3030 3134 325f 3430 302e  "pvm-000142_400.
+0000a0f0: 6e69 6922 2069 6e20 7363 616e 735f 6469  nii" in scans_di
+0000a100: 7370 6c61 7965 640a 2020 2020 2020 2020  splayed.        
+0000a110: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0000a120: 7373 6572 7454 7275 6528 0a20 2020 2020  ssertTrue(.     
+0000a130: 2020 2020 2020 2022 6461 7461 2f64 6572         "data/der
+0000a140: 6976 6564 5f64 6174 612f 7347 7565 7262  ived_data/sGuerb
+0000a150: 6574 2d43 362d 3230 3134 2d52 6174 2d4b  et-C6-2014-Rat-K
+0000a160: 3532 2d54 7562 6532 3722 0a20 2020 2020  52-Tube27".     
+0000a170: 2020 2020 2020 2022 2d32 3031 342d 3032         "-2014-02
+0000a180: 2d31 3431 3032 3331 372d 3031 2d47 315f  -14102317-01-G1_
+0000a190: 4775 6572 6265 745f 416e 6174 2d52 4152  Guerbet_Anat-RAR
+0000a1a0: 4522 0a20 2020 2020 2020 2020 2020 2022  E".            "
+0000a1b0: 7076 6d2d 3030 3032 3230 5f30 3030 2e6e  pvm-000220_000.n
+0000a1c0: 6969 2220 696e 2073 6361 6e73 5f64 6973  ii" in scans_dis
+0000a1d0: 706c 6179 6564 0a20 2020 2020 2020 2029  played.        )
+0000a1e0: 0a0a 2020 2020 6465 6620 7465 7374 5f62  ..    def test_b
+0000a1f0: 7269 636b 5f68 6973 746f 7279 2873 656c  rick_history(sel
+0000a200: 6629 3a0a 2020 2020 2020 2020 2222 2254  f):.        """T
+0000a210: 6573 7473 2074 6865 2062 7269 636b 2068  ests the brick h
+0000a220: 6973 746f 7279 2070 6f70 7570 2e22 2222  istory popup."""
+0000a230: 0a0a 2020 2020 2020 2020 7072 6f6a 6563  ..        projec
+0000a240: 745f 385f 7061 7468 203d 2073 656c 662e  t_8_path = self.
+0000a250: 6765 745f 6e65 775f 7465 7374 5f70 726f  get_new_test_pro
+0000a260: 6a65 6374 2829 0a20 2020 2020 2020 2073  ject().        s
+0000a270: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+0000a280: 7377 6974 6368 5f70 726f 6a65 6374 2870  switch_project(p
+0000a290: 726f 6a65 6374 5f38 5f70 6174 682c 2022  roject_8_path, "
+0000a2a0: 7072 6f6a 6563 745f 3822 290a 0a20 2020  project_8")..   
+0000a2b0: 2020 2020 2062 7269 636b 735f 636f 6c75       bricks_colu
+0000a2c0: 6d6e 203d 2028 0a20 2020 2020 2020 2020  mn = (.         
+0000a2d0: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
+0000a2e0: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
+0000a2f0: 2e74 6162 6c65 5f64 6174 612e 6765 745f  .table_data.get_
+0000a300: 7461 675f 636f 6c75 6d6e 0a20 2020 2020  tag_column.     
+0000a310: 2020 2029 2822 4869 7374 6f72 7922 290a     )("History").
+0000a320: 2020 2020 2020 2020 6272 6963 6b73 5f77          bricks_w
+0000a330: 6964 6765 7420 3d20 7365 6c66 2e6d 6169  idget = self.mai
+0000a340: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
+0000a350: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
+0000a360: 2e63 656c 6c57 6964 6765 7428 0a20 2020  .cellWidget(.   
+0000a370: 2020 2020 2020 2020 2030 2c20 6272 6963           0, bric
+0000a380: 6b73 5f63 6f6c 756d 6e0a 2020 2020 2020  ks_column.      
+0000a390: 2020 290a 2020 2020 2020 2020 736d 6f6f    ).        smoo
+0000a3a0: 7468 5f62 7574 746f 6e20 3d20 6272 6963  th_button = bric
+0000a3b0: 6b73 5f77 6964 6765 742e 6c61 796f 7574  ks_widget.layout
+0000a3c0: 2829 2e69 7465 6d41 7428 3029 2e77 6964  ().itemAt(0).wid
+0000a3d0: 6765 7428 290a 2020 2020 2020 2020 7365  get().        se
+0000a3e0: 6c66 2e61 7373 6572 7445 7175 616c 2873  lf.assertEqual(s
+0000a3f0: 6d6f 6f74 685f 6275 7474 6f6e 2e74 6578  mooth_button.tex
+0000a400: 7428 292c 2022 736d 6f6f 7468 5f31 2229  t(), "smooth_1")
+0000a410: 0a20 2020 2020 2020 2051 5465 7374 2e6d  .        QTest.m
+0000a420: 6f75 7365 436c 6963 6b28 736d 6f6f 7468  ouseClick(smooth
+0000a430: 5f62 7574 746f 6e2c 2051 742e 4c65 6674  _button, Qt.Left
+0000a440: 4275 7474 6f6e 290a 2020 2020 2020 2020  Button).        
+0000a450: 6272 6963 6b5f 6869 7374 6f72 7920 3d20  brick_history = 
+0000a460: 280a 2020 2020 2020 2020 2020 2020 7365  (.            se
+0000a470: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
+0000a480: 6174 615f 6272 6f77 7365 722e 7461 626c  ata_browser.tabl
+0000a490: 655f 6461 7461 2e62 7269 636b 5f68 6973  e_data.brick_his
+0000a4a0: 746f 7279 5f70 6f70 7570 0a20 2020 2020  tory_popup.     
+0000a4b0: 2020 2029 0a20 2020 2020 2020 2062 7269     ).        bri
+0000a4c0: 636b 5f74 6162 6c65 203d 2062 7269 636b  ck_table = brick
+0000a4d0: 5f68 6973 746f 7279 2e74 6162 6c65 0a20  _history.table. 
+0000a4e0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0000a4f0: 7274 4571 7561 6c28 6272 6963 6b5f 7461  rtEqual(brick_ta
+0000a500: 626c 652e 686f 7269 7a6f 6e74 616c 4865  ble.horizontalHe
+0000a510: 6164 6572 4974 656d 2830 292e 7465 7874  aderItem(0).text
+0000a520: 2829 2c20 224e 616d 6522 290a 2020 2020  (), "Name").    
+0000a530: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0000a540: 7175 616c 2862 7269 636b 5f74 6162 6c65  qual(brick_table
+0000a550: 2e68 6f72 697a 6f6e 7461 6c48 6561 6465  .horizontalHeade
+0000a560: 7249 7465 6d28 3129 2e74 6578 7428 292c  rItem(1).text(),
+0000a570: 2022 496e 6974 2229 0a20 2020 2020 2020   "Init").       
+0000a580: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000a590: 6c28 0a20 2020 2020 2020 2020 2020 2062  l(.            b
+0000a5a0: 7269 636b 5f74 6162 6c65 2e68 6f72 697a  rick_table.horiz
+0000a5b0: 6f6e 7461 6c48 6561 6465 7249 7465 6d28  ontalHeaderItem(
+0000a5c0: 3229 2e74 6578 7428 292c 2022 496e 6974  2).text(), "Init
+0000a5d0: 2054 696d 6522 0a20 2020 2020 2020 2029   Time".        )
+0000a5e0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000a5f0: 7365 7274 4571 7561 6c28 6272 6963 6b5f  sertEqual(brick_
+0000a600: 7461 626c 652e 686f 7269 7a6f 6e74 616c  table.horizontal
+0000a610: 4865 6164 6572 4974 656d 2833 292e 7465  HeaderItem(3).te
+0000a620: 7874 2829 2c20 2245 7865 6322 290a 2020  xt(), "Exec").  
+0000a630: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000a640: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
+0000a650: 2020 2020 6272 6963 6b5f 7461 626c 652e      brick_table.
+0000a660: 686f 7269 7a6f 6e74 616c 4865 6164 6572  horizontalHeader
+0000a670: 4974 656d 2834 292e 7465 7874 2829 2c20  Item(4).text(), 
+0000a680: 2245 7865 6320 5469 6d65 220a 2020 2020  "Exec Time".    
+0000a690: 2020 2020 290a 2020 2020 2020 2020 7365      ).        se
+0000a6a0: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
+0000a6b0: 2020 2020 2020 2020 2020 2020 6272 6963              bric
+0000a6c0: 6b5f 7461 626c 652e 686f 7269 7a6f 6e74  k_table.horizont
+0000a6d0: 616c 4865 6164 6572 4974 656d 2835 292e  alHeaderItem(5).
+0000a6e0: 7465 7874 2829 2c20 2264 6174 615f 7479  text(), "data_ty
+0000a6f0: 7065 220a 2020 2020 2020 2020 290a 2020  pe".        ).  
+0000a700: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000a710: 7445 7175 616c 2862 7269 636b 5f74 6162  tEqual(brick_tab
+0000a720: 6c65 2e68 6f72 697a 6f6e 7461 6c48 6561  le.horizontalHea
+0000a730: 6465 7249 7465 6d28 3629 2e74 6578 7428  derItem(6).text(
+0000a740: 292c 2022 6677 686d 2229 0a20 2020 2020  ), "fwhm").     
+0000a750: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+0000a760: 7561 6c28 0a20 2020 2020 2020 2020 2020  ual(.           
+0000a770: 2062 7269 636b 5f74 6162 6c65 2e68 6f72   brick_table.hor
+0000a780: 697a 6f6e 7461 6c48 6561 6465 7249 7465  izontalHeaderIte
+0000a790: 6d28 3729 2e74 6578 7428 292c 2022 696d  m(7).text(), "im
+0000a7a0: 706c 6963 6974 5f6d 6173 6b69 6e67 220a  plicit_masking".
+0000a7b0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0000a7c0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0000a7d0: 616c 280a 2020 2020 2020 2020 2020 2020  al(.            
+0000a7e0: 6272 6963 6b5f 7461 626c 652e 686f 7269  brick_table.hori
+0000a7f0: 7a6f 6e74 616c 4865 6164 6572 4974 656d  zontalHeaderItem
+0000a800: 2838 292e 7465 7874 2829 2c20 2269 6e5f  (8).text(), "in_
+0000a810: 6669 6c65 7322 0a20 2020 2020 2020 2029  files".        )
+0000a820: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000a830: 7365 7274 4571 7561 6c28 0a20 2020 2020  sertEqual(.     
+0000a840: 2020 2020 2020 2062 7269 636b 5f74 6162         brick_tab
+0000a850: 6c65 2e68 6f72 697a 6f6e 7461 6c48 6561  le.horizontalHea
+0000a860: 6465 7249 7465 6d28 3929 2e74 6578 7428  derItem(9).text(
+0000a870: 292c 2022 6d61 746c 6162 5f63 6d64 220a  ), "matlab_cmd".
+0000a880: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0000a890: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0000a8a0: 616c 2862 7269 636b 5f74 6162 6c65 2e68  al(brick_table.h
+0000a8b0: 6f72 697a 6f6e 7461 6c48 6561 6465 7249  orizontalHeaderI
+0000a8c0: 7465 6d28 3130 292e 7465 7874 2829 2c20  tem(10).text(), 
+0000a8d0: 226d 6669 6c65 2229 0a20 2020 2020 2020  "mfile").       
+0000a8e0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000a8f0: 6c28 6272 6963 6b5f 7461 626c 652e 6974  l(brick_table.it
+0000a900: 656d 2830 2c20 3029 2e74 6578 7428 292c  em(0, 0).text(),
+0000a910: 2022 736d 6f6f 7468 5f31 2229 0a20 2020   "smooth_1").   
+0000a920: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000a930: 4571 7561 6c28 6272 6963 6b5f 7461 626c  Equal(brick_tabl
+0000a940: 652e 6974 656d 2830 2c20 3129 2e74 6578  e.item(0, 1).tex
+0000a950: 7428 292c 2022 446f 6e65 2229 0a20 2020  t(), "Done").   
+0000a960: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000a970: 4571 7561 6c28 0a20 2020 2020 2020 2020  Equal(.         
+0000a980: 2020 2062 7269 636b 5f74 6162 6c65 2e69     brick_table.i
+0000a990: 7465 6d28 302c 2032 292e 7465 7874 2829  tem(0, 2).text()
+0000a9a0: 2c20 2232 3032 322d 3034 2d30 3520 3134  , "2022-04-05 14
+0000a9b0: 3a32 323a 3330 2e32 3938 3034 3322 0a20  :22:30.298043". 
+0000a9c0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0000a9d0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000a9e0: 6c28 6272 6963 6b5f 7461 626c 652e 6974  l(brick_table.it
+0000a9f0: 656d 2830 2c20 3329 2e74 6578 7428 292c  em(0, 3).text(),
+0000aa00: 2022 446f 6e65 2229 0a20 2020 2020 2020   "Done").       
+0000aa10: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000aa20: 6c28 0a20 2020 2020 2020 2020 2020 2062  l(.            b
 0000aa30: 7269 636b 5f74 6162 6c65 2e69 7465 6d28  rick_table.item(
-0000aa40: 302c 2030 292e 7465 7874 2829 2c20 2273  0, 0).text(), "s
-0000aa50: 6d6f 6f74 685f 3122 290a 2020 2020 2020  mooth_1").      
-0000aa60: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0000aa70: 616c 2862 7269 636b 5f74 6162 6c65 2e69  al(brick_table.i
-0000aa80: 7465 6d28 302c 2031 292e 7465 7874 2829  tem(0, 1).text()
-0000aa90: 2c20 2244 6f6e 6522 290a 2020 2020 2020  , "Done").      
-0000aaa0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0000aab0: 616c 280a 2020 2020 2020 2020 2020 2020  al(.            
-0000aac0: 6272 6963 6b5f 7461 626c 652e 6974 656d  brick_table.item
-0000aad0: 2830 2c20 3229 2e74 6578 7428 292c 2022  (0, 2).text(), "
-0000aae0: 3230 3232 2d30 342d 3035 2031 343a 3232  2022-04-05 14:22
-0000aaf0: 3a33 302e 3239 3830 3433 220a 2020 2020  :30.298043".    
-0000ab00: 2020 2020 290a 2020 2020 2020 2020 7365      ).        se
-0000ab10: 6c66 2e61 7373 6572 7445 7175 616c 2862  lf.assertEqual(b
-0000ab20: 7269 636b 5f74 6162 6c65 2e69 7465 6d28  rick_table.item(
-0000ab30: 302c 2033 292e 7465 7874 2829 2c20 2244  0, 3).text(), "D
-0000ab40: 6f6e 6522 290a 2020 2020 2020 2020 7365  one").        se
-0000ab50: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
-0000ab60: 2020 2020 2020 2020 2020 2020 6272 6963              bric
-0000ab70: 6b5f 7461 626c 652e 6974 656d 2830 2c20  k_table.item(0, 
-0000ab80: 3429 2e74 6578 7428 292c 2022 3230 3232  4).text(), "2022
-0000ab90: 2d30 342d 3035 2031 343a 3232 3a33 302e  -04-05 14:22:30.
-0000aba0: 3239 3830 3433 220a 2020 2020 2020 2020  298043".        
-0000abb0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-0000abc0: 7373 6572 7445 7175 616c 2862 7269 636b  ssertEqual(brick
-0000abd0: 5f74 6162 6c65 2e69 7465 6d28 302c 2035  _table.item(0, 5
-0000abe0: 292e 7465 7874 2829 2c20 2230 2229 0a20  ).text(), "0"). 
-0000abf0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000ac00: 7274 4571 7561 6c28 6272 6963 6b5f 7461  rtEqual(brick_ta
-0000ac10: 626c 652e 6974 656d 2830 2c20 3629 2e74  ble.item(0, 6).t
-0000ac20: 6578 7428 292c 2022 5b36 2e30 2c20 362e  ext(), "[6.0, 6.
-0000ac30: 302c 2036 2e30 5d22 290a 2020 2020 2020  0, 6.0]").      
-0000ac40: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0000ac50: 616c 2862 7269 636b 5f74 6162 6c65 2e69  al(brick_table.i
-0000ac60: 7465 6d28 302c 2037 292e 7465 7874 2829  tem(0, 7).text()
-0000ac70: 2c20 2246 616c 7365 2229 0a20 2020 2020  , "False").     
-0000ac80: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000ac90: 7561 6c28 0a20 2020 2020 2020 2020 2020  ual(.           
-0000aca0: 2062 7269 636b 5f74 6162 6c65 2e63 656c   brick_table.cel
-0000acb0: 6c57 6964 6765 7428 302c 2038 292e 6368  lWidget(0, 8).ch
-0000acc0: 696c 6472 656e 2829 5b31 5d2e 7465 7874  ildren()[1].text
-0000acd0: 2829 2c0a 2020 2020 2020 2020 2020 2020  (),.            
-0000ace0: 2264 6174 612f 7261 775f 6461 7461 2f47  "data/raw_data/G
-0000acf0: 7565 7262 6574 2d43 362d 3230 3134 2d52  uerbet-C6-2014-R
-0000ad00: 6174 2d4b 3532 2d54 7562 6532 3722 0a20  at-K52-Tube27". 
-0000ad10: 2020 2020 2020 2020 2020 2022 2d32 3031             "-201
-0000ad20: 342d 3032 2d31 3431 3032 3331 372d 3031  4-02-14102317-01
-0000ad30: 2d47 315f 4775 6572 6265 745f 416e 6174  -G1_Guerbet_Anat
-0000ad40: 2d52 4152 4522 0a20 2020 2020 2020 2020  -RARE".         
-0000ad50: 2020 2022 7076 6d2d 3030 3032 3230 5f30     "pvm-000220_0
-0000ad60: 3030 2e6e 6969 222c 0a20 2020 2020 2020  00.nii",.       
-0000ad70: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
-0000ad80: 6173 7365 7274 4571 7561 6c28 0a20 2020  assertEqual(.   
-0000ad90: 2020 2020 2020 2020 2062 7269 636b 5f74           brick_t
-0000ada0: 6162 6c65 2e69 7465 6d28 302c 2039 292e  able.item(0, 9).
-0000adb0: 7465 7874 2829 2c0a 2020 2020 2020 2020  text(),.        
-0000adc0: 2020 2020 222f 7573 722f 6c6f 6361 6c2f      "/usr/local/
-0000add0: 5350 4d2f 7370 6d31 325f 7374 616e 6461  SPM/spm12_standa
-0000ade0: 6c6f 6e65 2f72 756e 5f73 706d 3132 2e73  lone/run_spm12.s
-0000adf0: 6820 220a 2020 2020 2020 2020 2020 2020  h ".            
-0000ae00: 222f 7573 722f 6c6f 6361 6c2f 4d41 544c  "/usr/local/MATL
-0000ae10: 4142 2f4d 4154 4c41 425f 5275 6e74 696d  AB/MATLAB_Runtim
-0000ae20: 652f 7639 3520 7363 7269 7074 222c 0a20  e/v95 script",. 
-0000ae30: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0000ae40: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0000ae50: 6c28 6272 6963 6b5f 7461 626c 652e 6974  l(brick_table.it
-0000ae60: 656d 2830 2c20 3130 292e 7465 7874 2829  em(0, 10).text()
-0000ae70: 2c20 2254 7275 6522 290a 0a20 2020 2064  , "True")..    d
-0000ae80: 6566 2074 6573 745f 636c 6561 725f 6365  ef test_clear_ce
-0000ae90: 6c6c 2873 656c 6629 3a0a 2020 2020 2020  ll(self):.      
-0000aea0: 2020 2222 2254 6573 7473 2074 6865 206d    """Tests the m
-0000aeb0: 6574 686f 6420 636c 6561 7269 6e67 2063  ethod clearing c
-0000aec0: 656c 6c73 2e22 2222 0a0a 2020 2020 2020  ells."""..      
-0000aed0: 2020 7072 6f6a 6563 745f 385f 7061 7468    project_8_path
-0000aee0: 203d 2073 656c 662e 6765 745f 6e65 775f   = self.get_new_
-0000aef0: 7465 7374 5f70 726f 6a65 6374 2829 0a20  test_project(). 
-0000af00: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
-0000af10: 5f77 696e 646f 772e 7377 6974 6368 5f70  _window.switch_p
-0000af20: 726f 6a65 6374 2870 726f 6a65 6374 5f38  roject(project_8
-0000af30: 5f70 6174 682c 2022 7072 6f6a 6563 745f  _path, "project_
-0000af40: 3822 290a 0a20 2020 2020 2020 2023 2053  8")..        # S
-0000af50: 656c 6563 7469 6e67 2061 2063 656c 6c0a  electing a cell.
-0000af60: 2020 2020 2020 2020 6277 5f63 6f6c 756d          bw_colum
-0000af70: 6e20 3d20 7365 6c66 2e6d 6169 6e5f 7769  n = self.main_wi
-0000af80: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
-0000af90: 722e 7461 626c 655f 6461 7461 2e67 6574  r.table_data.get
-0000afa0: 5f74 6167 5f63 6f6c 756d 6e28 0a20 2020  _tag_column(.   
-0000afb0: 2020 2020 2020 2020 2022 4261 6e64 5769           "BandWi
-0000afc0: 6474 6822 0a20 2020 2020 2020 2029 0a20  dth".        ). 
-0000afd0: 2020 2020 2020 2062 775f 6974 656d 203d         bw_item =
-0000afe0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-0000aff0: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
-0000b000: 6162 6c65 5f64 6174 612e 6974 656d 2830  able_data.item(0
-0000b010: 2c20 6277 5f63 6f6c 756d 6e29 0a20 2020  , bw_column).   
-0000b020: 2020 2020 2062 775f 6974 656d 2e73 6574       bw_item.set
-0000b030: 5365 6c65 6374 6564 2854 7275 6529 0a20  Selected(True). 
-0000b040: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000b050: 7274 4571 7561 6c28 666c 6f61 7428 6277  rtEqual(float(bw
-0000b060: 5f69 7465 6d2e 7465 7874 2829 5b31 3a2d  _item.text()[1:-
-0000b070: 315d 292c 2035 3030 3030 2e30 290a 2020  1]), 50000.0).  
-0000b080: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000b090: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
-0000b0a0: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
-0000b0b0: 6e64 6f77 2e70 726f 6a65 6374 2e73 6573  ndow.project.ses
-0000b0c0: 7369 6f6e 2e67 6574 5f76 616c 7565 280a  sion.get_value(.
-0000b0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b0e0: 434f 4c4c 4543 5449 4f4e 5f43 5552 5245  COLLECTION_CURRE
-0000b0f0: 4e54 2c0a 2020 2020 2020 2020 2020 2020  NT,.            
-0000b100: 2020 2020 2264 6174 612f 6465 7269 7665      "data/derive
-0000b110: 645f 6461 7461 2f73 4775 6572 6265 742d  d_data/sGuerbet-
-0000b120: 4336 2d32 3031 342d 5261 742d 4b35 322d  C6-2014-Rat-K52-
-0000b130: 5475 6265 3237 220a 2020 2020 2020 2020  Tube27".        
-0000b140: 2020 2020 2020 2020 222d 3230 3134 2d30          "-2014-0
-0000b150: 322d 3134 3130 3233 3137 2d30 312d 4731  2-14102317-01-G1
-0000b160: 5f47 7565 7262 6574 5f41 6e61 742d 5241  _Guerbet_Anat-RA
-0000b170: 5245 220a 2020 2020 2020 2020 2020 2020  RE".            
-0000b180: 2020 2020 2270 766d 2d30 3030 3232 305f      "pvm-000220_
-0000b190: 3030 302e 6e69 6922 2c0a 2020 2020 2020  000.nii",.      
-0000b1a0: 2020 2020 2020 2020 2020 2242 616e 6457            "BandW
-0000b1b0: 6964 7468 222c 0a20 2020 2020 2020 2020  idth",.         
-0000b1c0: 2020 2029 2c0a 2020 2020 2020 2020 2020     ),.          
-0000b1d0: 2020 5b35 3030 3030 2e30 5d2c 0a20 2020    [50000.0],.   
-0000b1e0: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-0000b1f0: 2320 436c 6561 7269 6e67 2074 6865 2063  # Clearing the c
-0000b200: 656c 6c0a 2020 2020 2020 2020 6277 5f69  ell.        bw_i
-0000b210: 7465 6d20 3d20 7365 6c66 2e6d 6169 6e5f  tem = self.main_
-0000b220: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
-0000b230: 7365 722e 7461 626c 655f 6461 7461 2e69  ser.table_data.i
-0000b240: 7465 6d28 302c 2062 775f 636f 6c75 6d6e  tem(0, bw_column
-0000b250: 290a 2020 2020 2020 2020 6277 5f69 7465  ).        bw_ite
-0000b260: 6d2e 7365 7453 656c 6563 7465 6428 5472  m.setSelected(Tr
-0000b270: 7565 290a 2020 2020 2020 2020 7365 6c66  ue).        self
-0000b280: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
-0000b290: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
-0000b2a0: 6461 7461 2e69 7465 6d43 6861 6e67 6564  data.itemChanged
-0000b2b0: 2e64 6973 636f 6e6e 6563 7428 290a 2020  .disconnect().  
-0000b2c0: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-0000b2d0: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
-0000b2e0: 7365 722e 7461 626c 655f 6461 7461 2e63  ser.table_data.c
-0000b2f0: 6c65 6172 5f63 656c 6c28 290a 2020 2020  lear_cell().    
-0000b300: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
-0000b310: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
-0000b320: 722e 7461 626c 655f 6461 7461 2e69 7465  r.table_data.ite
-0000b330: 6d43 6861 6e67 6564 2e63 6f6e 6e65 6374  mChanged.connect
-0000b340: 280a 2020 2020 2020 2020 2020 2020 7365  (.            se
-0000b350: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
-0000b360: 6174 615f 6272 6f77 7365 722e 7461 626c  ata_browser.tabl
-0000b370: 655f 6461 7461 2e63 6861 6e67 655f 6365  e_data.change_ce
-0000b380: 6c6c 5f63 6f6c 6f72 0a20 2020 2020 2020  ll_color.       
-0000b390: 2029 0a0a 2020 2020 2020 2020 2320 4368   )..        # Ch
-0000b3a0: 6563 6b69 6e67 2074 6861 7420 6974 2773  ecking that it's
-0000b3b0: 2065 6d70 7479 0a20 2020 2020 2020 2062   empty.        b
-0000b3c0: 775f 6974 656d 203d 2073 656c 662e 6d61  w_item = self.ma
-0000b3d0: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
-0000b3e0: 726f 7773 6572 2e74 6162 6c65 5f64 6174  rowser.table_dat
-0000b3f0: 612e 6974 656d 2830 2c20 6277 5f63 6f6c  a.item(0, bw_col
-0000b400: 756d 6e29 0a20 2020 2020 2020 2073 656c  umn).        sel
-0000b410: 662e 6173 7365 7274 4571 7561 6c28 6277  f.assertEqual(bw
-0000b420: 5f69 7465 6d2e 7465 7874 2829 2c20 222a  _item.text(), "*
-0000b430: 4e6f 7420 4465 6669 6e65 642a 2229 0a20  Not Defined*"). 
-0000b440: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000b450: 7274 4973 4e6f 6e65 280a 2020 2020 2020  rtIsNone(.      
-0000b460: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-0000b470: 7769 6e64 6f77 2e70 726f 6a65 6374 2e73  window.project.s
-0000b480: 6573 7369 6f6e 2e67 6574 5f76 616c 7565  ession.get_value
-0000b490: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0000b4a0: 2020 434f 4c4c 4543 5449 4f4e 5f43 5552    COLLECTION_CUR
-0000b4b0: 5245 4e54 2c0a 2020 2020 2020 2020 2020  RENT,.          
-0000b4c0: 2020 2020 2020 2264 6174 612f 6465 7269        "data/deri
-0000b4d0: 7665 645f 6461 7461 2f73 4775 6572 6265  ved_data/sGuerbe
-0000b4e0: 742d 4336 2d32 3031 342d 5261 742d 4b35  t-C6-2014-Rat-K5
-0000b4f0: 322d 5475 6265 3237 220a 2020 2020 2020  2-Tube27".      
-0000b500: 2020 2020 2020 2020 2020 222d 3230 3134            "-2014
-0000b510: 2d30 322d 3134 3130 3233 3137 2d30 312d  -02-14102317-01-
-0000b520: 4731 5f47 7565 7262 6574 5f41 6e61 742d  G1_Guerbet_Anat-
-0000b530: 5241 5245 220a 2020 2020 2020 2020 2020  RARE".          
-0000b540: 2020 2020 2020 2270 766d 2d30 3030 3232        "pvm-00022
-0000b550: 305f 3030 302e 6e69 6922 2c0a 2020 2020  0_000.nii",.    
-0000b560: 2020 2020 2020 2020 2020 2020 2242 616e              "Ban
-0000b570: 6457 6964 7468 222c 0a20 2020 2020 2020  dWidth",.       
-0000b580: 2020 2020 2029 0a20 2020 2020 2020 2029       ).        )
-0000b590: 0a0a 2020 2020 6465 6620 7465 7374 5f63  ..    def test_c
-0000b5a0: 6c6f 6e65 5f74 6167 2873 656c 6629 3a0a  lone_tag(self):.
-0000b5b0: 2020 2020 2020 2020 2222 2254 6573 7473          """Tests
-0000b5c0: 2074 6865 2070 6f70 2075 7020 636c 6f6e   the pop up clon
-0000b5d0: 696e 6720 6120 7461 672e 2222 220a 0a20  ing a tag.""".. 
-0000b5e0: 2020 2020 2020 2070 726f 6a65 6374 5f38         project_8
-0000b5f0: 5f70 6174 6820 3d20 7365 6c66 2e67 6574  _path = self.get
-0000b600: 5f6e 6577 5f74 6573 745f 7072 6f6a 6563  _new_test_projec
-0000b610: 7428 290a 2020 2020 2020 2020 7365 6c66  t().        self
-0000b620: 2e6d 6169 6e5f 7769 6e64 6f77 2e73 7769  .main_window.swi
-0000b630: 7463 685f 7072 6f6a 6563 7428 7072 6f6a  tch_project(proj
-0000b640: 6563 745f 385f 7061 7468 2c20 2270 726f  ect_8_path, "pro
-0000b650: 6a65 6374 5f38 2229 0a0a 2020 2020 2020  ject_8")..      
-0000b660: 2020 2320 5465 7374 696e 6720 7769 7468    # Testing with
-0000b670: 6f75 7420 6e65 7720 7461 6720 6e61 6d65  out new tag name
-0000b680: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
-0000b690: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
-0000b6a0: 726f 7773 6572 2e63 6c6f 6e65 5f74 6167  rowser.clone_tag
-0000b6b0: 5f61 6374 696f 6e2e 7472 6967 6765 7228  _action.trigger(
-0000b6c0: 290a 2020 2020 2020 2020 636c 6f6e 655f  ).        clone_
-0000b6d0: 7461 6720 3d20 7365 6c66 2e6d 6169 6e5f  tag = self.main_
-0000b6e0: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
-0000b6f0: 7365 722e 706f 705f 7570 5f63 6c6f 6e65  ser.pop_up_clone
-0000b700: 5f74 6167 0a20 2020 2020 2020 2051 5465  _tag.        QTe
-0000b710: 7374 2e6d 6f75 7365 436c 6963 6b28 636c  st.mouseClick(cl
-0000b720: 6f6e 655f 7461 672e 7075 7368 5f62 7574  one_tag.push_but
-0000b730: 746f 6e5f 6f6b 2c20 5174 2e4c 6566 7442  ton_ok, Qt.LeftB
-0000b740: 7574 746f 6e29 0a20 2020 2020 2020 2073  utton).        s
-0000b750: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0000b760: 636c 6f6e 655f 7461 672e 6d73 672e 7465  clone_tag.msg.te
-0000b770: 7874 2829 2c20 2254 6865 2074 6167 206e  xt(), "The tag n
-0000b780: 616d 6520 6361 6e27 7420 6265 2065 6d70  ame can't be emp
-0000b790: 7479 2229 0a0a 2020 2020 2020 2020 2320  ty")..        # 
-0000b7a0: 5465 7374 696e 6720 7769 7468 6f75 7420  Testing without 
-0000b7b0: 616e 7920 7461 6720 7365 6c65 6374 6564  any tag selected
-0000b7c0: 2074 6f20 636c 6f6e 650a 2020 2020 2020   to clone.      
-0000b7d0: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
-0000b7e0: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
-0000b7f0: 636c 6f6e 655f 7461 675f 6163 7469 6f6e  clone_tag_action
-0000b800: 2e74 7269 6767 6572 2829 0a20 2020 2020  .trigger().     
-0000b810: 2020 2063 6c6f 6e65 5f74 6167 203d 2073     clone_tag = s
-0000b820: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-0000b830: 6461 7461 5f62 726f 7773 6572 2e70 6f70  data_browser.pop
-0000b840: 5f75 705f 636c 6f6e 655f 7461 670a 2020  _up_clone_tag.  
-0000b850: 2020 2020 2020 636c 6f6e 655f 7461 672e        clone_tag.
-0000b860: 6c69 6e65 5f65 6469 745f 6e65 775f 7461  line_edit_new_ta
-0000b870: 675f 6e61 6d65 2e73 6574 5465 7874 2822  g_name.setText("
-0000b880: 5465 7374 2229 0a20 2020 2020 2020 2051  Test").        Q
-0000b890: 5465 7374 2e6d 6f75 7365 436c 6963 6b28  Test.mouseClick(
-0000b8a0: 636c 6f6e 655f 7461 672e 7075 7368 5f62  clone_tag.push_b
-0000b8b0: 7574 746f 6e5f 6f6b 2c20 5174 2e4c 6566  utton_ok, Qt.Lef
-0000b8c0: 7442 7574 746f 6e29 0a20 2020 2020 2020  tButton).       
-0000b8d0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0000b8e0: 6c28 0a20 2020 2020 2020 2020 2020 2063  l(.            c
-0000b8f0: 6c6f 6e65 5f74 6167 2e6d 7367 2e74 6578  lone_tag.msg.tex
-0000b900: 7428 292c 2022 5468 6520 7461 6720 746f  t(), "The tag to
-0000b910: 2063 6c6f 6e65 206d 7573 7420 6265 2073   clone must be s
-0000b920: 656c 6563 7465 6422 0a20 2020 2020 2020  elected".       
-0000b930: 2029 0a0a 2020 2020 2020 2020 2320 5465   )..        # Te
-0000b940: 7374 696e 6720 7769 7468 2074 6167 206e  sting with tag n
-0000b950: 616d 6520 616c 7265 6164 7920 6578 6973  ame already exis
-0000b960: 7469 6e67 0a20 2020 2020 2020 2073 656c  ting.        sel
-0000b970: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
-0000b980: 7461 5f62 726f 7773 6572 2e63 6c6f 6e65  ta_browser.clone
-0000b990: 5f74 6167 5f61 6374 696f 6e2e 7472 6967  _tag_action.trig
-0000b9a0: 6765 7228 290a 2020 2020 2020 2020 636c  ger().        cl
-0000b9b0: 6f6e 655f 7461 6720 3d20 7365 6c66 2e6d  one_tag = self.m
-0000b9c0: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
-0000b9d0: 6272 6f77 7365 722e 706f 705f 7570 5f63  browser.pop_up_c
-0000b9e0: 6c6f 6e65 5f74 6167 0a20 2020 2020 2020  lone_tag.       
-0000b9f0: 2063 6c6f 6e65 5f74 6167 2e6c 696e 655f   clone_tag.line_
-0000ba00: 6564 6974 5f6e 6577 5f74 6167 5f6e 616d  edit_new_tag_nam
-0000ba10: 652e 7365 7454 6578 7428 2254 7970 6522  e.setText("Type"
-0000ba20: 290a 2020 2020 2020 2020 5154 6573 742e  ).        QTest.
-0000ba30: 6d6f 7573 6543 6c69 636b 2863 6c6f 6e65  mouseClick(clone
-0000ba40: 5f74 6167 2e70 7573 685f 6275 7474 6f6e  _tag.push_button
-0000ba50: 5f6f 6b2c 2051 742e 4c65 6674 4275 7474  _ok, Qt.LeftButt
-0000ba60: 6f6e 290a 2020 2020 2020 2020 7365 6c66  on).        self
-0000ba70: 2e61 7373 6572 7445 7175 616c 2863 6c6f  .assertEqual(clo
-0000ba80: 6e65 5f74 6167 2e6d 7367 2e74 6578 7428  ne_tag.msg.text(
-0000ba90: 292c 2022 5468 6973 2074 6167 206e 616d  ), "This tag nam
-0000baa0: 6520 616c 7265 6164 7920 6578 6973 7473  e already exists
-0000bab0: 2229 0a0a 2020 2020 2020 2020 7365 6c66  ")..        self
-0000bac0: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
-0000bad0: 615f 6272 6f77 7365 722e 636c 6f6e 655f  a_browser.clone_
-0000bae0: 7461 675f 6163 7469 6f6e 2e74 7269 6767  tag_action.trigg
-0000baf0: 6572 2829 0a20 2020 2020 2020 2063 6c6f  er().        clo
-0000bb00: 6e65 5f74 6167 203d 2073 656c 662e 6d61  ne_tag = self.ma
-0000bb10: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
-0000bb20: 726f 7773 6572 2e70 6f70 5f75 705f 636c  rowser.pop_up_cl
-0000bb30: 6f6e 655f 7461 670a 2020 2020 2020 2020  one_tag.        
-0000bb40: 636c 6f6e 655f 7461 672e 6c69 6e65 5f65  clone_tag.line_e
-0000bb50: 6469 745f 6e65 775f 7461 675f 6e61 6d65  dit_new_tag_name
-0000bb60: 2e73 6574 5465 7874 2822 5465 7374 2229  .setText("Test")
-0000bb70: 0a20 2020 2020 2020 2063 6c6f 6e65 5f74  .        clone_t
-0000bb80: 6167 2e73 6561 7263 685f 6261 722e 7365  ag.search_bar.se
-0000bb90: 7454 6578 7428 2242 616e 6457 6964 7468  tText("BandWidth
-0000bba0: 2229 0a20 2020 2020 2020 2063 6c6f 6e65  ").        clone
-0000bbb0: 5f74 6167 2e6c 6973 745f 7769 6467 6574  _tag.list_widget
-0000bbc0: 5f74 6167 732e 7365 7443 7572 7265 6e74  _tags.setCurrent
-0000bbd0: 526f 7728 3029 2020 2320 4261 6e64 5769  Row(0)  # BandWi
-0000bbe0: 6474 6820 7461 6720 7365 6c65 6374 6564  dth tag selected
-0000bbf0: 0a20 2020 2020 2020 2051 5465 7374 2e6d  .        QTest.m
-0000bc00: 6f75 7365 436c 6963 6b28 636c 6f6e 655f  ouseClick(clone_
-0000bc10: 7461 672e 7075 7368 5f62 7574 746f 6e5f  tag.push_button_
-0000bc20: 6f6b 2c20 5174 2e4c 6566 7442 7574 746f  ok, Qt.LeftButto
-0000bc30: 6e29 0a20 2020 2020 2020 2073 656c 662e  n).        self.
-0000bc40: 6173 7365 7274 5472 7565 280a 2020 2020  assertTrue(.    
-0000bc50: 2020 2020 2020 2020 2254 6573 7422 0a20          "Test". 
-0000bc60: 2020 2020 2020 2020 2020 2069 6e20 7365             in se
-0000bc70: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
-0000bc80: 726f 6a65 6374 2e73 6573 7369 6f6e 2e67  roject.session.g
-0000bc90: 6574 5f66 6965 6c64 735f 6e61 6d65 7328  et_fields_names(
-0000bca0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000bcb0: 2043 4f4c 4c45 4354 494f 4e5f 4355 5252   COLLECTION_CURR
-0000bcc0: 454e 540a 2020 2020 2020 2020 2020 2020  ENT.            
-0000bcd0: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
-0000bce0: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
-0000bcf0: 7275 6528 0a20 2020 2020 2020 2020 2020  rue(.           
-0000bd00: 2022 5465 7374 220a 2020 2020 2020 2020   "Test".        
-0000bd10: 2020 2020 696e 2073 656c 662e 6d61 696e      in self.main
-0000bd20: 5f77 696e 646f 772e 7072 6f6a 6563 742e  _window.project.
-0000bd30: 7365 7373 696f 6e2e 6765 745f 6669 656c  session.get_fiel
-0000bd40: 6473 5f6e 616d 6573 280a 2020 2020 2020  ds_names(.      
-0000bd50: 2020 2020 2020 2020 2020 434f 4c4c 4543            COLLEC
-0000bd60: 5449 4f4e 5f49 4e49 5449 414c 0a20 2020  TION_INITIAL.   
-0000bd70: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-0000bd80: 2020 2029 0a20 2020 2020 2020 2074 6573     ).        tes
-0000bd90: 745f 726f 7720 3d20 7365 6c66 2e6d 6169  t_row = self.mai
-0000bda0: 6e5f 7769 6e64 6f77 2e70 726f 6a65 6374  n_window.project
-0000bdb0: 2e73 6573 7369 6f6e 2e67 6574 5f66 6965  .session.get_fie
-0000bdc0: 6c64 280a 2020 2020 2020 2020 2020 2020  ld(.            
-0000bdd0: 434f 4c4c 4543 5449 4f4e 5f43 5552 5245  COLLECTION_CURRE
-0000bde0: 4e54 2c20 2254 6573 7422 0a20 2020 2020  NT, "Test".     
-0000bdf0: 2020 2029 0a20 2020 2020 2020 2062 616e     ).        ban
-0000be00: 6477 6964 7468 5f72 6f77 203d 2073 656c  dwidth_row = sel
-0000be10: 662e 6d61 696e 5f77 696e 646f 772e 7072  f.main_window.pr
-0000be20: 6f6a 6563 742e 7365 7373 696f 6e2e 6765  oject.session.ge
-0000be30: 745f 6669 656c 6428 0a20 2020 2020 2020  t_field(.       
-0000be40: 2020 2020 2043 4f4c 4c45 4354 494f 4e5f       COLLECTION_
-0000be50: 4355 5252 454e 542c 2022 4261 6e64 5769  CURRENT, "BandWi
-0000be60: 6474 6822 0a20 2020 2020 2020 2029 0a20  dth".        ). 
-0000be70: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000be80: 7274 4571 7561 6c28 7465 7374 5f72 6f77  rtEqual(test_row
-0000be90: 2e64 6573 6372 6970 7469 6f6e 2c20 6261  .description, ba
-0000bea0: 6e64 7769 6474 685f 726f 772e 6465 7363  ndwidth_row.desc
-0000beb0: 7269 7074 696f 6e29 0a20 2020 2020 2020  ription).       
-0000bec0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0000bed0: 6c28 7465 7374 5f72 6f77 2e75 6e69 742c  l(test_row.unit,
-0000bee0: 2062 616e 6477 6964 7468 5f72 6f77 2e75   bandwidth_row.u
-0000bef0: 6e69 7429 0a20 2020 2020 2020 2073 656c  nit).        sel
-0000bf00: 662e 6173 7365 7274 4571 7561 6c28 7465  f.assertEqual(te
-0000bf10: 7374 5f72 6f77 2e64 6566 6175 6c74 5f76  st_row.default_v
-0000bf20: 616c 7565 2c20 6261 6e64 7769 6474 685f  alue, bandwidth_
-0000bf30: 726f 772e 6465 6661 756c 745f 7661 6c75  row.default_valu
-0000bf40: 6529 0a20 2020 2020 2020 2073 656c 662e  e).        self.
-0000bf50: 6173 7365 7274 4571 7561 6c28 7465 7374  assertEqual(test
-0000bf60: 5f72 6f77 2e66 6965 6c64 5f74 7970 652c  _row.field_type,
-0000bf70: 2062 616e 6477 6964 7468 5f72 6f77 2e66   bandwidth_row.f
-0000bf80: 6965 6c64 5f74 7970 6529 0a20 2020 2020  ield_type).     
-0000bf90: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000bfa0: 7561 6c28 7465 7374 5f72 6f77 2e6f 7269  ual(test_row.ori
-0000bfb0: 6769 6e2c 2054 4147 5f4f 5249 4749 4e5f  gin, TAG_ORIGIN_
-0000bfc0: 5553 4552 290a 2020 2020 2020 2020 7365  USER).        se
-0000bfd0: 6c66 2e61 7373 6572 7445 7175 616c 2874  lf.assertEqual(t
-0000bfe0: 6573 745f 726f 772e 7669 7369 6269 6c69  est_row.visibili
-0000bff0: 7479 2c20 5472 7565 290a 2020 2020 2020  ty, True).      
-0000c000: 2020 7465 7374 5f72 6f77 203d 2073 656c    test_row = sel
-0000c010: 662e 6d61 696e 5f77 696e 646f 772e 7072  f.main_window.pr
-0000c020: 6f6a 6563 742e 7365 7373 696f 6e2e 6765  oject.session.ge
-0000c030: 745f 6669 656c 6428 0a20 2020 2020 2020  t_field(.       
-0000c040: 2020 2020 2043 4f4c 4c45 4354 494f 4e5f       COLLECTION_
-0000c050: 494e 4954 4941 4c2c 2022 5465 7374 220a  INITIAL, "Test".
-0000c060: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0000c070: 2020 6261 6e64 7769 6474 685f 726f 7720    bandwidth_row 
-0000c080: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
-0000c090: 6f77 2e70 726f 6a65 6374 2e73 6573 7369  ow.project.sessi
-0000c0a0: 6f6e 2e67 6574 5f66 6965 6c64 280a 2020  on.get_field(.  
-0000c0b0: 2020 2020 2020 2020 2020 434f 4c4c 4543            COLLEC
-0000c0c0: 5449 4f4e 5f49 4e49 5449 414c 2c20 2242  TION_INITIAL, "B
-0000c0d0: 616e 6457 6964 7468 220a 2020 2020 2020  andWidth".      
-0000c0e0: 2020 290a 2020 2020 2020 2020 7365 6c66    ).        self
-0000c0f0: 2e61 7373 6572 7445 7175 616c 2874 6573  .assertEqual(tes
-0000c100: 745f 726f 772e 6465 7363 7269 7074 696f  t_row.descriptio
-0000c110: 6e2c 2062 616e 6477 6964 7468 5f72 6f77  n, bandwidth_row
-0000c120: 2e64 6573 6372 6970 7469 6f6e 290a 2020  .description).  
-0000c130: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000c140: 7445 7175 616c 2874 6573 745f 726f 772e  tEqual(test_row.
-0000c150: 756e 6974 2c20 6261 6e64 7769 6474 685f  unit, bandwidth_
-0000c160: 726f 772e 756e 6974 290a 2020 2020 2020  row.unit).      
-0000c170: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0000c180: 616c 2874 6573 745f 726f 772e 6465 6661  al(test_row.defa
-0000c190: 756c 745f 7661 6c75 652c 2062 616e 6477  ult_value, bandw
-0000c1a0: 6964 7468 5f72 6f77 2e64 6566 6175 6c74  idth_row.default
-0000c1b0: 5f76 616c 7565 290a 2020 2020 2020 2020  _value).        
-0000c1c0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-0000c1d0: 2874 6573 745f 726f 772e 6669 656c 645f  (test_row.field_
-0000c1e0: 7479 7065 2c20 6261 6e64 7769 6474 685f  type, bandwidth_
-0000c1f0: 726f 772e 6669 656c 645f 7479 7065 290a  row.field_type).
-0000c200: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000c210: 6572 7445 7175 616c 2874 6573 745f 726f  ertEqual(test_ro
-0000c220: 772e 6f72 6967 696e 2c20 5441 475f 4f52  w.origin, TAG_OR
-0000c230: 4947 494e 5f55 5345 5229 0a20 2020 2020  IGIN_USER).     
-0000c240: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000c250: 7561 6c28 7465 7374 5f72 6f77 2e76 6973  ual(test_row.vis
-0000c260: 6962 696c 6974 792c 2054 7275 6529 0a0a  ibility, True)..
-0000c270: 2020 2020 2020 2020 666f 7220 646f 6375          for docu
-0000c280: 6d65 6e74 2069 6e20 7365 6c66 2e6d 6169  ment in self.mai
-0000c290: 6e5f 7769 6e64 6f77 2e70 726f 6a65 6374  n_window.project
-0000c2a0: 2e73 6573 7369 6f6e 2e67 6574 5f64 6f63  .session.get_doc
-0000c2b0: 756d 656e 7473 5f6e 616d 6573 280a 2020  uments_names(.  
-0000c2c0: 2020 2020 2020 2020 2020 434f 4c4c 4543            COLLEC
-0000c2d0: 5449 4f4e 5f43 5552 5245 4e54 0a20 2020  TION_CURRENT.   
-0000c2e0: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
-0000c2f0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000c300: 7175 616c 280a 2020 2020 2020 2020 2020  qual(.          
-0000c310: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-0000c320: 7769 6e64 6f77 2e70 726f 6a65 6374 2e73  window.project.s
-0000c330: 6573 7369 6f6e 2e67 6574 5f76 616c 7565  ession.get_value
-0000c340: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0000c350: 2020 2020 2020 434f 4c4c 4543 5449 4f4e        COLLECTION
-0000c360: 5f43 5552 5245 4e54 2c20 646f 6375 6d65  _CURRENT, docume
-0000c370: 6e74 2c20 2254 6573 7422 0a20 2020 2020  nt, "Test".     
-0000c380: 2020 2020 2020 2020 2020 2029 2c0a 2020             ),.  
-0000c390: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0000c3a0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
-0000c3b0: 726f 6a65 6374 2e73 6573 7369 6f6e 2e67  roject.session.g
-0000c3c0: 6574 5f76 616c 7565 280a 2020 2020 2020  et_value(.      
-0000c3d0: 2020 2020 2020 2020 2020 2020 2020 434f                CO
-0000c3e0: 4c4c 4543 5449 4f4e 5f43 5552 5245 4e54  LLECTION_CURRENT
-0000c3f0: 2c20 646f 6375 6d65 6e74 2c20 2242 616e  , document, "Ban
-0000c400: 6457 6964 7468 220a 2020 2020 2020 2020  dWidth".        
-0000c410: 2020 2020 2020 2020 292c 0a20 2020 2020          ),.     
-0000c420: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-0000c430: 2020 666f 7220 646f 6375 6d65 6e74 2069    for document i
-0000c440: 6e20 7365 6c66 2e6d 6169 6e5f 7769 6e64  n self.main_wind
-0000c450: 6f77 2e70 726f 6a65 6374 2e73 6573 7369  ow.project.sessi
-0000c460: 6f6e 2e67 6574 5f64 6f63 756d 656e 7473  on.get_documents
-0000c470: 5f6e 616d 6573 280a 2020 2020 2020 2020  _names(.        
-0000c480: 2020 2020 434f 4c4c 4543 5449 4f4e 5f49      COLLECTION_I
-0000c490: 4e49 5449 414c 0a20 2020 2020 2020 2029  NITIAL.        )
-0000c4a0: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
-0000c4b0: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
-0000c4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c4d0: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-0000c4e0: 2e70 726f 6a65 6374 2e73 6573 7369 6f6e  .project.session
-0000c4f0: 2e67 6574 5f76 616c 7565 280a 2020 2020  .get_value(.    
-0000c500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c510: 434f 4c4c 4543 5449 4f4e 5f49 4e49 5449  COLLECTION_INITI
-0000c520: 414c 2c20 646f 6375 6d65 6e74 2c20 2254  AL, document, "T
-0000c530: 6573 7422 0a20 2020 2020 2020 2020 2020  est".           
-0000c540: 2020 2020 2029 2c0a 2020 2020 2020 2020       ),.        
-0000c550: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
-0000c560: 6e5f 7769 6e64 6f77 2e70 726f 6a65 6374  n_window.project
-0000c570: 2e73 6573 7369 6f6e 2e67 6574 5f76 616c  .session.get_val
-0000c580: 7565 280a 2020 2020 2020 2020 2020 2020  ue(.            
-0000c590: 2020 2020 2020 2020 434f 4c4c 4543 5449          COLLECTI
-0000c5a0: 4f4e 5f49 4e49 5449 414c 2c20 646f 6375  ON_INITIAL, docu
-0000c5b0: 6d65 6e74 2c20 2242 616e 6457 6964 7468  ment, "BandWidth
-0000c5c0: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-0000c5d0: 2020 292c 0a20 2020 2020 2020 2020 2020    ),.           
-0000c5e0: 2029 0a0a 2020 2020 2020 2020 7465 7374   )..        test
-0000c5f0: 5f63 6f6c 756d 6e20 3d20 7365 6c66 2e6d  _column = self.m
-0000c600: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
-0000c610: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
-0000c620: 7461 2e67 6574 5f74 6167 5f63 6f6c 756d  ta.get_tag_colum
-0000c630: 6e28 0a20 2020 2020 2020 2020 2020 2022  n(.            "
-0000c640: 5465 7374 220a 2020 2020 2020 2020 290a  Test".        ).
-0000c650: 2020 2020 2020 2020 6277 5f63 6f6c 756d          bw_colum
-0000c660: 6e20 3d20 7365 6c66 2e6d 6169 6e5f 7769  n = self.main_wi
-0000c670: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
-0000c680: 722e 7461 626c 655f 6461 7461 2e67 6574  r.table_data.get
-0000c690: 5f74 6167 5f63 6f6c 756d 6e28 0a20 2020  _tag_column(.   
-0000c6a0: 2020 2020 2020 2020 2022 4261 6e64 5769           "BandWi
-0000c6b0: 6474 6822 0a20 2020 2020 2020 2029 0a0a  dth".        )..
-0000c6c0: 2020 2020 2020 2020 666f 7220 726f 7720          for row 
-0000c6d0: 696e 2072 616e 6765 280a 2020 2020 2020  in range(.      
-0000c6e0: 2020 2020 2020 302c 2073 656c 662e 6d61        0, self.ma
-0000c6f0: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
-0000c700: 726f 7773 6572 2e74 6162 6c65 5f64 6174  rowser.table_dat
-0000c710: 612e 726f 7743 6f75 6e74 2829 0a20 2020  a.rowCount().   
-0000c720: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
-0000c730: 2020 2020 6974 656d 5f62 7720 3d20 7365      item_bw = se
-0000c740: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
-0000c750: 6174 615f 6272 6f77 7365 722e 7461 626c  ata_browser.tabl
-0000c760: 655f 6461 7461 2e69 7465 6d28 0a20 2020  e_data.item(.   
-0000c770: 2020 2020 2020 2020 2020 2020 2072 6f77               row
-0000c780: 2c20 6277 5f63 6f6c 756d 6e0a 2020 2020  , bw_column.    
-0000c790: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0000c7a0: 2020 2020 2020 6974 656d 5f74 6573 7420        item_test 
-0000c7b0: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
-0000c7c0: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
-0000c7d0: 7461 626c 655f 6461 7461 2e69 7465 6d28  table_data.item(
-0000c7e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000c7f0: 2072 6f77 2c20 7465 7374 5f63 6f6c 756d   row, test_colum
-0000c800: 6e0a 2020 2020 2020 2020 2020 2020 290a  n.            ).
-0000c810: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000c820: 2e61 7373 6572 7445 7175 616c 2869 7465  .assertEqual(ite
-0000c830: 6d5f 6277 2e74 6578 7428 292c 2069 7465  m_bw.text(), ite
-0000c840: 6d5f 7465 7374 2e74 6578 7428 2929 0a0a  m_test.text())..
-0000c850: 2020 2020 6465 6620 7465 7374 5f63 6f75      def test_cou
-0000c860: 6e74 5f74 6162 6c65 2873 656c 6629 3a0a  nt_table(self):.
-0000c870: 2020 2020 2020 2020 2222 2254 6573 7473          """Tests
-0000c880: 2074 6865 2063 6f75 6e74 2074 6162 6c65   the count table
-0000c890: 2070 6f70 7570 2e22 2222 0a0a 2020 2020   popup."""..    
-0000c8a0: 2020 2020 7072 6f6a 6563 745f 385f 7061      project_8_pa
-0000c8b0: 7468 203d 2073 656c 662e 6765 745f 6e65  th = self.get_ne
-0000c8c0: 775f 7465 7374 5f70 726f 6a65 6374 2829  w_test_project()
-0000c8d0: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
-0000c8e0: 696e 5f77 696e 646f 772e 7377 6974 6368  in_window.switch
-0000c8f0: 5f70 726f 6a65 6374 2870 726f 6a65 6374  _project(project
-0000c900: 5f38 5f70 6174 682c 2022 7072 6f6a 6563  _8_path, "projec
-0000c910: 745f 3822 290a 0a20 2020 2020 2020 2051  t_8")..        Q
-0000c920: 5465 7374 2e6d 6f75 7365 436c 6963 6b28  Test.mouseClick(
-0000c930: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0000c940: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
-0000c950: 7461 5f62 726f 7773 6572 2e63 6f75 6e74  ta_browser.count
-0000c960: 5f74 6162 6c65 5f62 7574 746f 6e2c 2051  _table_button, Q
-0000c970: 742e 4c65 6674 4275 7474 6f6e 0a20 2020  t.LeftButton.   
-0000c980: 2020 2020 2029 0a20 2020 2020 2020 2063       ).        c
-0000c990: 6f75 6e74 5f74 6162 6c65 203d 2073 656c  ount_table = sel
-0000c9a0: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
-0000c9b0: 7461 5f62 726f 7773 6572 2e63 6f75 6e74  ta_browser.count
-0000c9c0: 5f74 6162 6c65 5f70 6f70 5f75 700a 2020  _table_pop_up.  
-0000c9d0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000c9e0: 7445 7175 616c 286c 656e 2863 6f75 6e74  tEqual(len(count
-0000c9f0: 5f74 6162 6c65 2e70 7573 685f 6275 7474  _table.push_butt
-0000ca00: 6f6e 7329 2c20 3229 0a0a 2020 2020 2020  ons), 2)..      
-0000ca10: 2020 636f 756e 745f 7461 626c 652e 7075    count_table.pu
-0000ca20: 7368 5f62 7574 746f 6e73 5b30 5d2e 7365  sh_buttons[0].se
-0000ca30: 7454 6578 7428 2242 616e 6457 6964 7468  tText("BandWidth
-0000ca40: 2229 0a20 2020 2020 2020 2063 6f75 6e74  ").        count
-0000ca50: 5f74 6162 6c65 2e66 696c 6c5f 7661 6c75  _table.fill_valu
-0000ca60: 6573 2830 290a 2020 2020 2020 2020 636f  es(0).        co
-0000ca70: 756e 745f 7461 626c 652e 7075 7368 5f62  unt_table.push_b
-0000ca80: 7574 746f 6e73 5b31 5d2e 7365 7454 6578  uttons[1].setTex
-0000ca90: 7428 2245 6368 6f54 696d 6522 290a 2020  t("EchoTime").  
-0000caa0: 2020 2020 2020 636f 756e 745f 7461 626c        count_tabl
-0000cab0: 652e 6669 6c6c 5f76 616c 7565 7328 3129  e.fill_values(1)
-0000cac0: 0a20 2020 2020 2020 2051 5465 7374 2e6d  .        QTest.m
-0000cad0: 6f75 7365 436c 6963 6b28 636f 756e 745f  ouseClick(count_
-0000cae0: 7461 626c 652e 7075 7368 5f62 7574 746f  table.push_butto
-0000caf0: 6e5f 636f 756e 742c 2051 742e 4c65 6674  n_count, Qt.Left
-0000cb00: 4275 7474 6f6e 290a 0a20 2020 2020 2020  Button)..       
-0000cb10: 2023 2054 7279 696e 6720 746f 2061 6464   # Trying to add
-0000cb20: 2061 6e64 2072 656d 6f76 6520 7461 6720   and remove tag 
-0000cb30: 6275 7474 6f6e 730a 2020 2020 2020 2020  buttons.        
-0000cb40: 5154 6573 742e 6d6f 7573 6543 6c69 636b  QTest.mouseClick
-0000cb50: 2863 6f75 6e74 5f74 6162 6c65 2e61 6464  (count_table.add
-0000cb60: 5f74 6167 5f6c 6162 656c 2c20 5174 2e4c  _tag_label, Qt.L
-0000cb70: 6566 7442 7574 746f 6e29 0a20 2020 2020  eftButton).     
-0000cb80: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000cb90: 7561 6c28 6c65 6e28 636f 756e 745f 7461  ual(len(count_ta
-0000cba0: 626c 652e 7075 7368 5f62 7574 746f 6e73  ble.push_buttons
-0000cbb0: 292c 2033 290a 2020 2020 2020 2020 5154  ), 3).        QT
-0000cbc0: 6573 742e 6d6f 7573 6543 6c69 636b 2863  est.mouseClick(c
-0000cbd0: 6f75 6e74 5f74 6162 6c65 2e72 656d 6f76  ount_table.remov
-0000cbe0: 655f 7461 675f 6c61 6265 6c2c 2051 742e  e_tag_label, Qt.
-0000cbf0: 4c65 6674 4275 7474 6f6e 290a 2020 2020  LeftButton).    
-0000cc00: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000cc10: 7175 616c 286c 656e 2863 6f75 6e74 5f74  qual(len(count_t
-0000cc20: 6162 6c65 2e70 7573 685f 6275 7474 6f6e  able.push_button
-0000cc30: 7329 2c20 3229 0a0a 2020 2020 2020 2020  s), 2)..        
-0000cc40: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-0000cc50: 2863 6f75 6e74 5f74 6162 6c65 2e70 7573  (count_table.pus
-0000cc60: 685f 6275 7474 6f6e 735b 305d 2e74 6578  h_buttons[0].tex
-0000cc70: 7428 292c 2022 4261 6e64 5769 6474 6822  t(), "BandWidth"
-0000cc80: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-0000cc90: 7373 6572 7445 7175 616c 2863 6f75 6e74  ssertEqual(count
-0000cca0: 5f74 6162 6c65 2e70 7573 685f 6275 7474  _table.push_butt
-0000ccb0: 6f6e 735b 315d 2e74 6578 7428 292c 2022  ons[1].text(), "
-0000ccc0: 4563 686f 5469 6d65 2229 0a0a 2020 2020  EchoTime")..    
-0000ccd0: 2020 2020 5141 7070 6c69 6361 7469 6f6e      QApplication
-0000cce0: 2e70 726f 6365 7373 4576 656e 7473 2829  .processEvents()
-0000ccf0: 0a0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-0000cd00: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
-0000cd10: 2020 2020 2020 2020 636f 756e 745f 7461          count_ta
-0000cd20: 626c 652e 7461 626c 652e 686f 7269 7a6f  ble.table.horizo
-0000cd30: 6e74 616c 4865 6164 6572 4974 656d 2830  ntalHeaderItem(0
-0000cd40: 292e 7465 7874 2829 2c20 2242 616e 6457  ).text(), "BandW
-0000cd50: 6964 7468 220a 2020 2020 2020 2020 290a  idth".        ).
-0000cd60: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000cd70: 6572 7445 7175 616c 280a 2020 2020 2020  ertEqual(.      
-0000cd80: 2020 2020 2020 636f 756e 745f 7461 626c        count_tabl
-0000cd90: 652e 7461 626c 652e 686f 7269 7a6f 6e74  e.table.horizont
-0000cda0: 616c 4865 6164 6572 4974 656d 2831 292e  alHeaderItem(1).
-0000cdb0: 7465 7874 2829 5b31 3a2d 315d 2c20 2237  text()[1:-1], "7
-0000cdc0: 352e 3022 0a20 2020 2020 2020 2029 0a20  5.0".        ). 
-0000cdd0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000cde0: 7274 416c 6d6f 7374 4571 7561 6c28 0a20  rtAlmostEqual(. 
-0000cdf0: 2020 2020 2020 2020 2020 2066 6c6f 6174             float
-0000ce00: 2863 6f75 6e74 5f74 6162 6c65 2e74 6162  (count_table.tab
-0000ce10: 6c65 2e68 6f72 697a 6f6e 7461 6c48 6561  le.horizontalHea
-0000ce20: 6465 7249 7465 6d28 3229 2e74 6578 7428  derItem(2).text(
-0000ce30: 295b 313a 2d31 5d29 2c0a 2020 2020 2020  )[1:-1]),.      
-0000ce40: 2020 2020 2020 352e 3832 3339 3932 332c        5.8239923,
-0000ce50: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-0000ce60: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000ce70: 7561 6c28 0a20 2020 2020 2020 2020 2020  ual(.           
-0000ce80: 2063 6f75 6e74 5f74 6162 6c65 2e74 6162   count_table.tab
-0000ce90: 6c65 2e68 6f72 697a 6f6e 7461 6c48 6561  le.horizontalHea
-0000cea0: 6465 7249 7465 6d28 3329 2e74 6578 7428  derItem(3).text(
-0000ceb0: 295b 313a 2d31 5d2c 2022 352e 3022 0a20  )[1:-1], "5.0". 
-0000cec0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0000ced0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0000cee0: 6c28 0a20 2020 2020 2020 2020 2020 2063  l(.            c
-0000cef0: 6f75 6e74 5f74 6162 6c65 2e74 6162 6c65  ount_table.table
-0000cf00: 2e76 6572 7469 6361 6c48 6561 6465 7249  .verticalHeaderI
-0000cf10: 7465 6d28 3329 2e74 6578 7428 292c 2022  tem(3).text(), "
-0000cf20: 546f 7461 6c22 0a20 2020 2020 2020 2029  Total".        )
-0000cf30: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0000cf40: 7365 7274 4571 7561 6c28 636f 756e 745f  sertEqual(count_
-0000cf50: 7461 626c 652e 7461 626c 652e 6974 656d  table.table.item
-0000cf60: 2830 2c20 3029 2e74 6578 7428 295b 313a  (0, 0).text()[1:
-0000cf70: 2d31 5d2c 2022 3530 3030 302e 3022 290a  -1], "50000.0").
-0000cf80: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000cf90: 6572 7445 7175 616c 2863 6f75 6e74 5f74  ertEqual(count_t
-0000cfa0: 6162 6c65 2e74 6162 6c65 2e69 7465 6d28  able.table.item(
-0000cfb0: 312c 2030 292e 7465 7874 2829 5b31 3a2d  1, 0).text()[1:-
-0000cfc0: 315d 2c20 2232 3530 3030 2e30 2229 0a20  1], "25000.0"). 
-0000cfd0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000cfe0: 7274 416c 6d6f 7374 4571 7561 6c28 0a20  rtAlmostEqual(. 
-0000cff0: 2020 2020 2020 2020 2020 2066 6c6f 6174             float
-0000d000: 2863 6f75 6e74 5f74 6162 6c65 2e74 6162  (count_table.tab
-0000d010: 6c65 2e69 7465 6d28 322c 2030 292e 7465  le.item(2, 0).te
-0000d020: 7874 2829 5b31 3a2d 315d 292c 2036 3537  xt()[1:-1]), 657
-0000d030: 3839 2e34 380a 2020 2020 2020 2020 290a  89.48.        ).
-0000d040: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000d050: 6572 7445 7175 616c 2863 6f75 6e74 5f74  ertEqual(count_t
-0000d060: 6162 6c65 2e74 6162 6c65 2e69 7465 6d28  able.table.item(
-0000d070: 332c 2030 292e 7465 7874 2829 2c20 2233  3, 0).text(), "3
-0000d080: 2229 0a20 2020 2020 2020 2073 656c 662e  ").        self.
-0000d090: 6173 7365 7274 4571 7561 6c28 636f 756e  assertEqual(coun
-0000d0a0: 745f 7461 626c 652e 7461 626c 652e 6974  t_table.table.it
-0000d0b0: 656d 2830 2c20 3129 2e74 6578 7428 292c  em(0, 1).text(),
-0000d0c0: 2022 3222 290a 2020 2020 2020 2020 7365   "2").        se
-0000d0d0: 6c66 2e61 7373 6572 7445 7175 616c 2863  lf.assertEqual(c
-0000d0e0: 6f75 6e74 5f74 6162 6c65 2e74 6162 6c65  ount_table.table
-0000d0f0: 2e69 7465 6d28 312c 2031 292e 7465 7874  .item(1, 1).text
-0000d100: 2829 2c20 2222 290a 2020 2020 2020 2020  (), "").        
-0000d110: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-0000d120: 2863 6f75 6e74 5f74 6162 6c65 2e74 6162  (count_table.tab
-0000d130: 6c65 2e69 7465 6d28 322c 2031 292e 7465  le.item(2, 1).te
-0000d140: 7874 2829 2c20 2222 290a 2020 2020 2020  xt(), "").      
-0000d150: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0000d160: 616c 2863 6f75 6e74 5f74 6162 6c65 2e74  al(count_table.t
-0000d170: 6162 6c65 2e69 7465 6d28 332c 2031 292e  able.item(3, 1).
-0000d180: 7465 7874 2829 2c20 2232 2229 0a20 2020  text(), "2").   
-0000d190: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0000d1a0: 4571 7561 6c28 636f 756e 745f 7461 626c  Equal(count_tabl
-0000d1b0: 652e 7461 626c 652e 6974 656d 2830 2c20  e.table.item(0, 
-0000d1c0: 3229 2e74 6578 7428 292c 2022 2229 0a20  2).text(), ""). 
-0000d1d0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000d1e0: 7274 4571 7561 6c28 636f 756e 745f 7461  rtEqual(count_ta
-0000d1f0: 626c 652e 7461 626c 652e 6974 656d 2831  ble.table.item(1
-0000d200: 2c20 3229 2e74 6578 7428 292c 2022 3222  , 2).text(), "2"
-0000d210: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-0000d220: 7373 6572 7445 7175 616c 2863 6f75 6e74  ssertEqual(count
-0000d230: 5f74 6162 6c65 2e74 6162 6c65 2e69 7465  _table.table.ite
-0000d240: 6d28 322c 2032 292e 7465 7874 2829 2c20  m(2, 2).text(), 
-0000d250: 2222 290a 2020 2020 2020 2020 7365 6c66  "").        self
-0000d260: 2e61 7373 6572 7445 7175 616c 2863 6f75  .assertEqual(cou
-0000d270: 6e74 5f74 6162 6c65 2e74 6162 6c65 2e69  nt_table.table.i
-0000d280: 7465 6d28 332c 2032 292e 7465 7874 2829  tem(3, 2).text()
-0000d290: 2c20 2232 2229 0a20 2020 2020 2020 2073  , "2").        s
-0000d2a0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0000d2b0: 636f 756e 745f 7461 626c 652e 7461 626c  count_table.tabl
-0000d2c0: 652e 6974 656d 2830 2c20 3329 2e74 6578  e.item(0, 3).tex
-0000d2d0: 7428 292c 2022 2229 0a20 2020 2020 2020  t(), "").       
-0000d2e0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0000d2f0: 6c28 636f 756e 745f 7461 626c 652e 7461  l(count_table.ta
-0000d300: 626c 652e 6974 656d 2831 2c20 3329 2e74  ble.item(1, 3).t
-0000d310: 6578 7428 292c 2022 2229 0a20 2020 2020  ext(), "").     
+0000aa40: 302c 2034 292e 7465 7874 2829 2c20 2232  0, 4).text(), "2
+0000aa50: 3032 322d 3034 2d30 3520 3134 3a32 323a  022-04-05 14:22:
+0000aa60: 3330 2e32 3938 3034 3322 0a20 2020 2020  30.298043".     
+0000aa70: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
+0000aa80: 662e 6173 7365 7274 4571 7561 6c28 6272  f.assertEqual(br
+0000aa90: 6963 6b5f 7461 626c 652e 6974 656d 2830  ick_table.item(0
+0000aaa0: 2c20 3529 2e74 6578 7428 292c 2022 3022  , 5).text(), "0"
+0000aab0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0000aac0: 7373 6572 7445 7175 616c 2862 7269 636b  ssertEqual(brick
+0000aad0: 5f74 6162 6c65 2e69 7465 6d28 302c 2036  _table.item(0, 6
+0000aae0: 292e 7465 7874 2829 2c20 225b 362e 302c  ).text(), "[6.0,
+0000aaf0: 2036 2e30 2c20 362e 305d 2229 0a20 2020   6.0, 6.0]").   
+0000ab00: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000ab10: 4571 7561 6c28 6272 6963 6b5f 7461 626c  Equal(brick_tabl
+0000ab20: 652e 6974 656d 2830 2c20 3729 2e74 6578  e.item(0, 7).tex
+0000ab30: 7428 292c 2022 4661 6c73 6522 290a 2020  t(), "False").  
+0000ab40: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000ab50: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
+0000ab60: 2020 2020 6272 6963 6b5f 7461 626c 652e      brick_table.
+0000ab70: 6365 6c6c 5769 6467 6574 2830 2c20 3829  cellWidget(0, 8)
+0000ab80: 2e63 6869 6c64 7265 6e28 295b 315d 2e74  .children()[1].t
+0000ab90: 6578 7428 292c 0a20 2020 2020 2020 2020  ext(),.         
+0000aba0: 2020 2022 6461 7461 2f72 6177 5f64 6174     "data/raw_dat
+0000abb0: 612f 4775 6572 6265 742d 4336 2d32 3031  a/Guerbet-C6-201
+0000abc0: 342d 5261 742d 4b35 322d 5475 6265 3237  4-Rat-K52-Tube27
+0000abd0: 220a 2020 2020 2020 2020 2020 2020 222d  ".            "-
+0000abe0: 3230 3134 2d30 322d 3134 3130 3233 3137  2014-02-14102317
+0000abf0: 2d30 312d 4731 5f47 7565 7262 6574 5f41  -01-G1_Guerbet_A
+0000ac00: 6e61 742d 5241 5245 220a 2020 2020 2020  nat-RARE".      
+0000ac10: 2020 2020 2020 2270 766d 2d30 3030 3232        "pvm-00022
+0000ac20: 305f 3030 302e 6e69 6922 2c0a 2020 2020  0_000.nii",.    
+0000ac30: 2020 2020 290a 2020 2020 2020 2020 7365      ).        se
+0000ac40: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
+0000ac50: 2020 2020 2020 2020 2020 2020 6272 6963              bric
+0000ac60: 6b5f 7461 626c 652e 6974 656d 2830 2c20  k_table.item(0, 
+0000ac70: 3929 2e74 6578 7428 292c 0a20 2020 2020  9).text(),.     
+0000ac80: 2020 2020 2020 2022 2f75 7372 2f6c 6f63         "/usr/loc
+0000ac90: 616c 2f53 504d 2f73 706d 3132 5f73 7461  al/SPM/spm12_sta
+0000aca0: 6e64 616c 6f6e 652f 7275 6e5f 7370 6d31  ndalone/run_spm1
+0000acb0: 322e 7368 2022 0a20 2020 2020 2020 2020  2.sh ".         
+0000acc0: 2020 2022 2f75 7372 2f6c 6f63 616c 2f4d     "/usr/local/M
+0000acd0: 4154 4c41 422f 4d41 544c 4142 5f52 756e  ATLAB/MATLAB_Run
+0000ace0: 7469 6d65 2f76 3935 2073 6372 6970 7422  time/v95 script"
+0000acf0: 2c0a 2020 2020 2020 2020 290a 2020 2020  ,.        ).    
+0000ad00: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0000ad10: 7175 616c 2862 7269 636b 5f74 6162 6c65  qual(brick_table
+0000ad20: 2e69 7465 6d28 302c 2031 3029 2e74 6578  .item(0, 10).tex
+0000ad30: 7428 292c 2022 5472 7565 2229 0a0a 2020  t(), "True")..  
+0000ad40: 2020 6465 6620 7465 7374 5f63 6c65 6172    def test_clear
+0000ad50: 5f63 656c 6c28 7365 6c66 293a 0a20 2020  _cell(self):.   
+0000ad60: 2020 2020 2022 2222 5465 7374 7320 7468       """Tests th
+0000ad70: 6520 6d65 7468 6f64 2063 6c65 6172 696e  e method clearin
+0000ad80: 6720 6365 6c6c 732e 2222 220a 0a20 2020  g cells."""..   
+0000ad90: 2020 2020 2070 726f 6a65 6374 5f38 5f70       project_8_p
+0000ada0: 6174 6820 3d20 7365 6c66 2e67 6574 5f6e  ath = self.get_n
+0000adb0: 6577 5f74 6573 745f 7072 6f6a 6563 7428  ew_test_project(
+0000adc0: 290a 2020 2020 2020 2020 7365 6c66 2e6d  ).        self.m
+0000add0: 6169 6e5f 7769 6e64 6f77 2e73 7769 7463  ain_window.switc
+0000ade0: 685f 7072 6f6a 6563 7428 7072 6f6a 6563  h_project(projec
+0000adf0: 745f 385f 7061 7468 2c20 2270 726f 6a65  t_8_path, "proje
+0000ae00: 6374 5f38 2229 0a0a 2020 2020 2020 2020  ct_8")..        
+0000ae10: 2320 5365 6c65 6374 696e 6720 6120 6365  # Selecting a ce
+0000ae20: 6c6c 0a20 2020 2020 2020 2062 775f 636f  ll.        bw_co
+0000ae30: 6c75 6d6e 203d 2073 656c 662e 6d61 696e  lumn = self.main
+0000ae40: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
+0000ae50: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
+0000ae60: 6765 745f 7461 675f 636f 6c75 6d6e 280a  get_tag_column(.
+0000ae70: 2020 2020 2020 2020 2020 2020 2242 616e              "Ban
+0000ae80: 6457 6964 7468 220a 2020 2020 2020 2020  dWidth".        
+0000ae90: 290a 2020 2020 2020 2020 6277 5f69 7465  ).        bw_ite
+0000aea0: 6d20 3d20 7365 6c66 2e6d 6169 6e5f 7769  m = self.main_wi
+0000aeb0: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
+0000aec0: 722e 7461 626c 655f 6461 7461 2e69 7465  r.table_data.ite
+0000aed0: 6d28 302c 2062 775f 636f 6c75 6d6e 290a  m(0, bw_column).
+0000aee0: 2020 2020 2020 2020 6277 5f69 7465 6d2e          bw_item.
+0000aef0: 7365 7453 656c 6563 7465 6428 5472 7565  setSelected(True
+0000af00: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0000af10: 7373 6572 7445 7175 616c 2866 6c6f 6174  ssertEqual(float
+0000af20: 2862 775f 6974 656d 2e74 6578 7428 295b  (bw_item.text()[
+0000af30: 313a 2d31 5d29 2c20 3530 3030 302e 3029  1:-1]), 50000.0)
+0000af40: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000af50: 7365 7274 4571 7561 6c28 0a20 2020 2020  sertEqual(.     
+0000af60: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
+0000af70: 5f77 696e 646f 772e 7072 6f6a 6563 742e  _window.project.
+0000af80: 7365 7373 696f 6e2e 6765 745f 7661 6c75  session.get_valu
+0000af90: 6528 0a20 2020 2020 2020 2020 2020 2020  e(.             
+0000afa0: 2020 2043 4f4c 4c45 4354 494f 4e5f 4355     COLLECTION_CU
+0000afb0: 5252 454e 542c 0a20 2020 2020 2020 2020  RRENT,.         
+0000afc0: 2020 2020 2020 2022 6461 7461 2f64 6572         "data/der
+0000afd0: 6976 6564 5f64 6174 612f 7347 7565 7262  ived_data/sGuerb
+0000afe0: 6574 2d43 362d 3230 3134 2d52 6174 2d4b  et-C6-2014-Rat-K
+0000aff0: 3532 2d54 7562 6532 3722 0a20 2020 2020  52-Tube27".     
+0000b000: 2020 2020 2020 2020 2020 2022 2d32 3031             "-201
+0000b010: 342d 3032 2d31 3431 3032 3331 372d 3031  4-02-14102317-01
+0000b020: 2d47 315f 4775 6572 6265 745f 416e 6174  -G1_Guerbet_Anat
+0000b030: 2d52 4152 4522 0a20 2020 2020 2020 2020  -RARE".         
+0000b040: 2020 2020 2020 2022 7076 6d2d 3030 3032         "pvm-0002
+0000b050: 3230 5f30 3030 2e6e 6969 222c 0a20 2020  20_000.nii",.   
+0000b060: 2020 2020 2020 2020 2020 2020 2022 4261               "Ba
+0000b070: 6e64 5769 6474 6822 2c0a 2020 2020 2020  ndWidth",.      
+0000b080: 2020 2020 2020 292c 0a20 2020 2020 2020        ),.       
+0000b090: 2020 2020 205b 3530 3030 302e 305d 2c0a       [50000.0],.
+0000b0a0: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+0000b0b0: 2020 2023 2043 6c65 6172 696e 6720 7468     # Clearing th
+0000b0c0: 6520 6365 6c6c 0a20 2020 2020 2020 2062  e cell.        b
+0000b0d0: 775f 6974 656d 203d 2073 656c 662e 6d61  w_item = self.ma
+0000b0e0: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
+0000b0f0: 726f 7773 6572 2e74 6162 6c65 5f64 6174  rowser.table_dat
+0000b100: 612e 6974 656d 2830 2c20 6277 5f63 6f6c  a.item(0, bw_col
+0000b110: 756d 6e29 0a20 2020 2020 2020 2062 775f  umn).        bw_
+0000b120: 6974 656d 2e73 6574 5365 6c65 6374 6564  item.setSelected
+0000b130: 2854 7275 6529 0a20 2020 2020 2020 2073  (True).        s
+0000b140: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+0000b150: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
+0000b160: 6c65 5f64 6174 612e 6974 656d 4368 616e  le_data.itemChan
+0000b170: 6765 642e 6469 7363 6f6e 6e65 6374 2829  ged.disconnect()
+0000b180: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+0000b190: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
+0000b1a0: 726f 7773 6572 2e74 6162 6c65 5f64 6174  rowser.table_dat
+0000b1b0: 612e 636c 6561 725f 6365 6c6c 2829 0a20  a.clear_cell(). 
+0000b1c0: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
+0000b1d0: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
+0000b1e0: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
+0000b1f0: 6974 656d 4368 616e 6765 642e 636f 6e6e  itemChanged.conn
+0000b200: 6563 7428 0a20 2020 2020 2020 2020 2020  ect(.           
+0000b210: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+0000b220: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
+0000b230: 6162 6c65 5f64 6174 612e 6368 616e 6765  able_data.change
+0000b240: 5f63 656c 6c5f 636f 6c6f 720a 2020 2020  _cell_color.    
+0000b250: 2020 2020 290a 0a20 2020 2020 2020 2023      )..        #
+0000b260: 2043 6865 636b 696e 6720 7468 6174 2069   Checking that i
+0000b270: 7427 7320 656d 7074 790a 2020 2020 2020  t's empty.      
+0000b280: 2020 6277 5f69 7465 6d20 3d20 7365 6c66    bw_item = self
+0000b290: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
+0000b2a0: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
+0000b2b0: 6461 7461 2e69 7465 6d28 302c 2062 775f  data.item(0, bw_
+0000b2c0: 636f 6c75 6d6e 290a 2020 2020 2020 2020  column).        
+0000b2d0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+0000b2e0: 2862 775f 6974 656d 2e74 6578 7428 292c  (bw_item.text(),
+0000b2f0: 2022 2a4e 6f74 2044 6566 696e 6564 2a22   "*Not Defined*"
+0000b300: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0000b310: 7373 6572 7449 734e 6f6e 6528 0a20 2020  ssertIsNone(.   
+0000b320: 2020 2020 2020 2020 2073 656c 662e 6d61           self.ma
+0000b330: 696e 5f77 696e 646f 772e 7072 6f6a 6563  in_window.projec
+0000b340: 742e 7365 7373 696f 6e2e 6765 745f 7661  t.session.get_va
+0000b350: 6c75 6528 0a20 2020 2020 2020 2020 2020  lue(.           
+0000b360: 2020 2020 2043 4f4c 4c45 4354 494f 4e5f       COLLECTION_
+0000b370: 4355 5252 454e 542c 0a20 2020 2020 2020  CURRENT,.       
+0000b380: 2020 2020 2020 2020 2022 6461 7461 2f64           "data/d
+0000b390: 6572 6976 6564 5f64 6174 612f 7347 7565  erived_data/sGue
+0000b3a0: 7262 6574 2d43 362d 3230 3134 2d52 6174  rbet-C6-2014-Rat
+0000b3b0: 2d4b 3532 2d54 7562 6532 3722 0a20 2020  -K52-Tube27".   
+0000b3c0: 2020 2020 2020 2020 2020 2020 2022 2d32               "-2
+0000b3d0: 3031 342d 3032 2d31 3431 3032 3331 372d  014-02-14102317-
+0000b3e0: 3031 2d47 315f 4775 6572 6265 745f 416e  01-G1_Guerbet_An
+0000b3f0: 6174 2d52 4152 4522 0a20 2020 2020 2020  at-RARE".       
+0000b400: 2020 2020 2020 2020 2022 7076 6d2d 3030           "pvm-00
+0000b410: 3032 3230 5f30 3030 2e6e 6969 222c 0a20  0220_000.nii",. 
+0000b420: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0000b430: 4261 6e64 5769 6474 6822 2c0a 2020 2020  BandWidth",.    
+0000b440: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0000b450: 2020 290a 0a20 2020 2064 6566 2074 6573    )..    def tes
+0000b460: 745f 636c 6f6e 655f 7461 6728 7365 6c66  t_clone_tag(self
+0000b470: 293a 0a20 2020 2020 2020 2022 2222 5465  ):.        """Te
+0000b480: 7374 7320 7468 6520 706f 7020 7570 2063  sts the pop up c
+0000b490: 6c6f 6e69 6e67 2061 2074 6167 2e22 2222  loning a tag."""
+0000b4a0: 0a0a 2020 2020 2020 2020 7072 6f6a 6563  ..        projec
+0000b4b0: 745f 385f 7061 7468 203d 2073 656c 662e  t_8_path = self.
+0000b4c0: 6765 745f 6e65 775f 7465 7374 5f70 726f  get_new_test_pro
+0000b4d0: 6a65 6374 2829 0a20 2020 2020 2020 2073  ject().        s
+0000b4e0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+0000b4f0: 7377 6974 6368 5f70 726f 6a65 6374 2870  switch_project(p
+0000b500: 726f 6a65 6374 5f38 5f70 6174 682c 2022  roject_8_path, "
+0000b510: 7072 6f6a 6563 745f 3822 290a 0a20 2020  project_8")..   
+0000b520: 2020 2020 2023 2054 6573 7469 6e67 2077       # Testing w
+0000b530: 6974 686f 7574 206e 6577 2074 6167 206e  ithout new tag n
+0000b540: 616d 650a 2020 2020 2020 2020 7365 6c66  ame.        self
+0000b550: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
+0000b560: 615f 6272 6f77 7365 722e 636c 6f6e 655f  a_browser.clone_
+0000b570: 7461 675f 6163 7469 6f6e 2e74 7269 6767  tag_action.trigg
+0000b580: 6572 2829 0a20 2020 2020 2020 2063 6c6f  er().        clo
+0000b590: 6e65 5f74 6167 203d 2073 656c 662e 6d61  ne_tag = self.ma
+0000b5a0: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
+0000b5b0: 726f 7773 6572 2e70 6f70 5f75 705f 636c  rowser.pop_up_cl
+0000b5c0: 6f6e 655f 7461 670a 2020 2020 2020 2020  one_tag.        
+0000b5d0: 5154 6573 742e 6d6f 7573 6543 6c69 636b  QTest.mouseClick
+0000b5e0: 2863 6c6f 6e65 5f74 6167 2e70 7573 685f  (clone_tag.push_
+0000b5f0: 6275 7474 6f6e 5f6f 6b2c 2051 742e 4c65  button_ok, Qt.Le
+0000b600: 6674 4275 7474 6f6e 290a 2020 2020 2020  ftButton).      
+0000b610: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0000b620: 616c 2863 6c6f 6e65 5f74 6167 2e6d 7367  al(clone_tag.msg
+0000b630: 2e74 6578 7428 292c 2022 5468 6520 7461  .text(), "The ta
+0000b640: 6720 6e61 6d65 2063 616e 2774 2062 6520  g name can't be 
+0000b650: 656d 7074 7922 290a 0a20 2020 2020 2020  empty")..       
+0000b660: 2023 2054 6573 7469 6e67 2077 6974 686f   # Testing witho
+0000b670: 7574 2061 6e79 2074 6167 2073 656c 6563  ut any tag selec
+0000b680: 7465 6420 746f 2063 6c6f 6e65 0a20 2020  ted to clone.   
+0000b690: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
+0000b6a0: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
+0000b6b0: 6572 2e63 6c6f 6e65 5f74 6167 5f61 6374  er.clone_tag_act
+0000b6c0: 696f 6e2e 7472 6967 6765 7228 290a 2020  ion.trigger().  
+0000b6d0: 2020 2020 2020 636c 6f6e 655f 7461 6720        clone_tag 
+0000b6e0: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
+0000b6f0: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
+0000b700: 706f 705f 7570 5f63 6c6f 6e65 5f74 6167  pop_up_clone_tag
+0000b710: 0a20 2020 2020 2020 2063 6c6f 6e65 5f74  .        clone_t
+0000b720: 6167 2e6c 696e 655f 6564 6974 5f6e 6577  ag.line_edit_new
+0000b730: 5f74 6167 5f6e 616d 652e 7365 7454 6578  _tag_name.setTex
+0000b740: 7428 2254 6573 7422 290a 2020 2020 2020  t("Test").      
+0000b750: 2020 5154 6573 742e 6d6f 7573 6543 6c69    QTest.mouseCli
+0000b760: 636b 2863 6c6f 6e65 5f74 6167 2e70 7573  ck(clone_tag.pus
+0000b770: 685f 6275 7474 6f6e 5f6f 6b2c 2051 742e  h_button_ok, Qt.
+0000b780: 4c65 6674 4275 7474 6f6e 290a 2020 2020  LeftButton).    
+0000b790: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0000b7a0: 7175 616c 280a 2020 2020 2020 2020 2020  qual(.          
+0000b7b0: 2020 636c 6f6e 655f 7461 672e 6d73 672e    clone_tag.msg.
+0000b7c0: 7465 7874 2829 2c20 2254 6865 2074 6167  text(), "The tag
+0000b7d0: 2074 6f20 636c 6f6e 6520 6d75 7374 2062   to clone must b
+0000b7e0: 6520 7365 6c65 6374 6564 220a 2020 2020  e selected".    
+0000b7f0: 2020 2020 290a 0a20 2020 2020 2020 2023      )..        #
+0000b800: 2054 6573 7469 6e67 2077 6974 6820 7461   Testing with ta
+0000b810: 6720 6e61 6d65 2061 6c72 6561 6479 2065  g name already e
+0000b820: 7869 7374 696e 670a 2020 2020 2020 2020  xisting.        
+0000b830: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+0000b840: 2e64 6174 615f 6272 6f77 7365 722e 636c  .data_browser.cl
+0000b850: 6f6e 655f 7461 675f 6163 7469 6f6e 2e74  one_tag_action.t
+0000b860: 7269 6767 6572 2829 0a20 2020 2020 2020  rigger().       
+0000b870: 2063 6c6f 6e65 5f74 6167 203d 2073 656c   clone_tag = sel
+0000b880: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
+0000b890: 7461 5f62 726f 7773 6572 2e70 6f70 5f75  ta_browser.pop_u
+0000b8a0: 705f 636c 6f6e 655f 7461 670a 2020 2020  p_clone_tag.    
+0000b8b0: 2020 2020 636c 6f6e 655f 7461 672e 6c69      clone_tag.li
+0000b8c0: 6e65 5f65 6469 745f 6e65 775f 7461 675f  ne_edit_new_tag_
+0000b8d0: 6e61 6d65 2e73 6574 5465 7874 2822 5479  name.setText("Ty
+0000b8e0: 7065 2229 0a20 2020 2020 2020 2051 5465  pe").        QTe
+0000b8f0: 7374 2e6d 6f75 7365 436c 6963 6b28 636c  st.mouseClick(cl
+0000b900: 6f6e 655f 7461 672e 7075 7368 5f62 7574  one_tag.push_but
+0000b910: 746f 6e5f 6f6b 2c20 5174 2e4c 6566 7442  ton_ok, Qt.LeftB
+0000b920: 7574 746f 6e29 0a20 2020 2020 2020 2073  utton).        s
+0000b930: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000b940: 636c 6f6e 655f 7461 672e 6d73 672e 7465  clone_tag.msg.te
+0000b950: 7874 2829 2c20 2254 6869 7320 7461 6720  xt(), "This tag 
+0000b960: 6e61 6d65 2061 6c72 6561 6479 2065 7869  name already exi
+0000b970: 7374 7322 290a 0a20 2020 2020 2020 2073  sts")..        s
+0000b980: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+0000b990: 6461 7461 5f62 726f 7773 6572 2e63 6c6f  data_browser.clo
+0000b9a0: 6e65 5f74 6167 5f61 6374 696f 6e2e 7472  ne_tag_action.tr
+0000b9b0: 6967 6765 7228 290a 2020 2020 2020 2020  igger().        
+0000b9c0: 636c 6f6e 655f 7461 6720 3d20 7365 6c66  clone_tag = self
+0000b9d0: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
+0000b9e0: 615f 6272 6f77 7365 722e 706f 705f 7570  a_browser.pop_up
+0000b9f0: 5f63 6c6f 6e65 5f74 6167 0a20 2020 2020  _clone_tag.     
+0000ba00: 2020 2063 6c6f 6e65 5f74 6167 2e6c 696e     clone_tag.lin
+0000ba10: 655f 6564 6974 5f6e 6577 5f74 6167 5f6e  e_edit_new_tag_n
+0000ba20: 616d 652e 7365 7454 6578 7428 2254 6573  ame.setText("Tes
+0000ba30: 7422 290a 2020 2020 2020 2020 636c 6f6e  t").        clon
+0000ba40: 655f 7461 672e 7365 6172 6368 5f62 6172  e_tag.search_bar
+0000ba50: 2e73 6574 5465 7874 2822 4261 6e64 5769  .setText("BandWi
+0000ba60: 6474 6822 290a 2020 2020 2020 2020 636c  dth").        cl
+0000ba70: 6f6e 655f 7461 672e 6c69 7374 5f77 6964  one_tag.list_wid
+0000ba80: 6765 745f 7461 6773 2e73 6574 4375 7272  get_tags.setCurr
+0000ba90: 656e 7452 6f77 2830 2920 2023 2042 616e  entRow(0)  # Ban
+0000baa0: 6457 6964 7468 2074 6167 2073 656c 6563  dWidth tag selec
+0000bab0: 7465 640a 2020 2020 2020 2020 5154 6573  ted.        QTes
+0000bac0: 742e 6d6f 7573 6543 6c69 636b 2863 6c6f  t.mouseClick(clo
+0000bad0: 6e65 5f74 6167 2e70 7573 685f 6275 7474  ne_tag.push_butt
+0000bae0: 6f6e 5f6f 6b2c 2051 742e 4c65 6674 4275  on_ok, Qt.LeftBu
+0000baf0: 7474 6f6e 290a 2020 2020 2020 2020 7365  tton).        se
+0000bb00: 6c66 2e61 7373 6572 7454 7275 6528 0a20  lf.assertTrue(. 
+0000bb10: 2020 2020 2020 2020 2020 2022 5465 7374             "Test
+0000bb20: 220a 2020 2020 2020 2020 2020 2020 696e  ".            in
+0000bb30: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+0000bb40: 772e 7072 6f6a 6563 742e 7365 7373 696f  w.project.sessio
+0000bb50: 6e2e 6765 745f 6669 656c 6473 5f6e 616d  n.get_fields_nam
+0000bb60: 6573 280a 2020 2020 2020 2020 2020 2020  es(.            
+0000bb70: 2020 2020 434f 4c4c 4543 5449 4f4e 5f43      COLLECTION_C
+0000bb80: 5552 5245 4e54 0a20 2020 2020 2020 2020  URRENT.         
+0000bb90: 2020 2029 0a20 2020 2020 2020 2029 0a20     ).        ). 
+0000bba0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0000bbb0: 7274 5472 7565 280a 2020 2020 2020 2020  rtTrue(.        
+0000bbc0: 2020 2020 2254 6573 7422 0a20 2020 2020      "Test".     
+0000bbd0: 2020 2020 2020 2069 6e20 7365 6c66 2e6d         in self.m
+0000bbe0: 6169 6e5f 7769 6e64 6f77 2e70 726f 6a65  ain_window.proje
+0000bbf0: 6374 2e73 6573 7369 6f6e 2e67 6574 5f66  ct.session.get_f
+0000bc00: 6965 6c64 735f 6e61 6d65 7328 0a20 2020  ields_names(.   
+0000bc10: 2020 2020 2020 2020 2020 2020 2043 4f4c               COL
+0000bc20: 4c45 4354 494f 4e5f 494e 4954 4941 4c0a  LECTION_INITIAL.
+0000bc30: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0000bc40: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0000bc50: 7465 7374 5f72 6f77 203d 2073 656c 662e  test_row = self.
+0000bc60: 6d61 696e 5f77 696e 646f 772e 7072 6f6a  main_window.proj
+0000bc70: 6563 742e 7365 7373 696f 6e2e 6765 745f  ect.session.get_
+0000bc80: 6669 656c 6428 0a20 2020 2020 2020 2020  field(.         
+0000bc90: 2020 2043 4f4c 4c45 4354 494f 4e5f 4355     COLLECTION_CU
+0000bca0: 5252 454e 542c 2022 5465 7374 220a 2020  RRENT, "Test".  
+0000bcb0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0000bcc0: 6261 6e64 7769 6474 685f 726f 7720 3d20  bandwidth_row = 
+0000bcd0: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+0000bce0: 2e70 726f 6a65 6374 2e73 6573 7369 6f6e  .project.session
+0000bcf0: 2e67 6574 5f66 6965 6c64 280a 2020 2020  .get_field(.    
+0000bd00: 2020 2020 2020 2020 434f 4c4c 4543 5449          COLLECTI
+0000bd10: 4f4e 5f43 5552 5245 4e54 2c20 2242 616e  ON_CURRENT, "Ban
+0000bd20: 6457 6964 7468 220a 2020 2020 2020 2020  dWidth".        
+0000bd30: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0000bd40: 7373 6572 7445 7175 616c 2874 6573 745f  ssertEqual(test_
+0000bd50: 726f 772e 6465 7363 7269 7074 696f 6e2c  row.description,
+0000bd60: 2062 616e 6477 6964 7468 5f72 6f77 2e64   bandwidth_row.d
+0000bd70: 6573 6372 6970 7469 6f6e 290a 2020 2020  escription).    
+0000bd80: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0000bd90: 7175 616c 2874 6573 745f 726f 772e 756e  qual(test_row.un
+0000bda0: 6974 2c20 6261 6e64 7769 6474 685f 726f  it, bandwidth_ro
+0000bdb0: 772e 756e 6974 290a 2020 2020 2020 2020  w.unit).        
+0000bdc0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+0000bdd0: 2874 6573 745f 726f 772e 6465 6661 756c  (test_row.defaul
+0000bde0: 745f 7661 6c75 652c 2062 616e 6477 6964  t_value, bandwid
+0000bdf0: 7468 5f72 6f77 2e64 6566 6175 6c74 5f76  th_row.default_v
+0000be00: 616c 7565 290a 2020 2020 2020 2020 7365  alue).        se
+0000be10: 6c66 2e61 7373 6572 7445 7175 616c 2874  lf.assertEqual(t
+0000be20: 6573 745f 726f 772e 6669 656c 645f 7479  est_row.field_ty
+0000be30: 7065 2c20 6261 6e64 7769 6474 685f 726f  pe, bandwidth_ro
+0000be40: 772e 6669 656c 645f 7479 7065 290a 2020  w.field_type).  
+0000be50: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000be60: 7445 7175 616c 2874 6573 745f 726f 772e  tEqual(test_row.
+0000be70: 6f72 6967 696e 2c20 5441 475f 4f52 4947  origin, TAG_ORIG
+0000be80: 494e 5f55 5345 5229 0a20 2020 2020 2020  IN_USER).       
+0000be90: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000bea0: 6c28 7465 7374 5f72 6f77 2e76 6973 6962  l(test_row.visib
+0000beb0: 696c 6974 792c 2054 7275 6529 0a20 2020  ility, True).   
+0000bec0: 2020 2020 2074 6573 745f 726f 7720 3d20       test_row = 
+0000bed0: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+0000bee0: 2e70 726f 6a65 6374 2e73 6573 7369 6f6e  .project.session
+0000bef0: 2e67 6574 5f66 6965 6c64 280a 2020 2020  .get_field(.    
+0000bf00: 2020 2020 2020 2020 434f 4c4c 4543 5449          COLLECTI
+0000bf10: 4f4e 5f49 4e49 5449 414c 2c20 2254 6573  ON_INITIAL, "Tes
+0000bf20: 7422 0a20 2020 2020 2020 2029 0a20 2020  t".        ).   
+0000bf30: 2020 2020 2062 616e 6477 6964 7468 5f72       bandwidth_r
+0000bf40: 6f77 203d 2073 656c 662e 6d61 696e 5f77  ow = self.main_w
+0000bf50: 696e 646f 772e 7072 6f6a 6563 742e 7365  indow.project.se
+0000bf60: 7373 696f 6e2e 6765 745f 6669 656c 6428  ssion.get_field(
+0000bf70: 0a20 2020 2020 2020 2020 2020 2043 4f4c  .            COL
+0000bf80: 4c45 4354 494f 4e5f 494e 4954 4941 4c2c  LECTION_INITIAL,
+0000bf90: 2022 4261 6e64 5769 6474 6822 0a20 2020   "BandWidth".   
+0000bfa0: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
+0000bfb0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000bfc0: 7465 7374 5f72 6f77 2e64 6573 6372 6970  test_row.descrip
+0000bfd0: 7469 6f6e 2c20 6261 6e64 7769 6474 685f  tion, bandwidth_
+0000bfe0: 726f 772e 6465 7363 7269 7074 696f 6e29  row.description)
+0000bff0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000c000: 7365 7274 4571 7561 6c28 7465 7374 5f72  sertEqual(test_r
+0000c010: 6f77 2e75 6e69 742c 2062 616e 6477 6964  ow.unit, bandwid
+0000c020: 7468 5f72 6f77 2e75 6e69 7429 0a20 2020  th_row.unit).   
+0000c030: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000c040: 4571 7561 6c28 7465 7374 5f72 6f77 2e64  Equal(test_row.d
+0000c050: 6566 6175 6c74 5f76 616c 7565 2c20 6261  efault_value, ba
+0000c060: 6e64 7769 6474 685f 726f 772e 6465 6661  ndwidth_row.defa
+0000c070: 756c 745f 7661 6c75 6529 0a20 2020 2020  ult_value).     
+0000c080: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+0000c090: 7561 6c28 7465 7374 5f72 6f77 2e66 6965  ual(test_row.fie
+0000c0a0: 6c64 5f74 7970 652c 2062 616e 6477 6964  ld_type, bandwid
+0000c0b0: 7468 5f72 6f77 2e66 6965 6c64 5f74 7970  th_row.field_typ
+0000c0c0: 6529 0a20 2020 2020 2020 2073 656c 662e  e).        self.
+0000c0d0: 6173 7365 7274 4571 7561 6c28 7465 7374  assertEqual(test
+0000c0e0: 5f72 6f77 2e6f 7269 6769 6e2c 2054 4147  _row.origin, TAG
+0000c0f0: 5f4f 5249 4749 4e5f 5553 4552 290a 2020  _ORIGIN_USER).  
+0000c100: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000c110: 7445 7175 616c 2874 6573 745f 726f 772e  tEqual(test_row.
+0000c120: 7669 7369 6269 6c69 7479 2c20 5472 7565  visibility, True
+0000c130: 290a 0a20 2020 2020 2020 2066 6f72 2064  )..        for d
+0000c140: 6f63 756d 656e 7420 696e 2073 656c 662e  ocument in self.
+0000c150: 6d61 696e 5f77 696e 646f 772e 7072 6f6a  main_window.proj
+0000c160: 6563 742e 7365 7373 696f 6e2e 6765 745f  ect.session.get_
+0000c170: 646f 6375 6d65 6e74 735f 6e61 6d65 7328  documents_names(
+0000c180: 0a20 2020 2020 2020 2020 2020 2043 4f4c  .            COL
+0000c190: 4c45 4354 494f 4e5f 4355 5252 454e 540a  LECTION_CURRENT.
+0000c1a0: 2020 2020 2020 2020 293a 0a20 2020 2020          ):.     
+0000c1b0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0000c1c0: 7274 4571 7561 6c28 0a20 2020 2020 2020  rtEqual(.       
+0000c1d0: 2020 2020 2020 2020 2073 656c 662e 6d61           self.ma
+0000c1e0: 696e 5f77 696e 646f 772e 7072 6f6a 6563  in_window.projec
+0000c1f0: 742e 7365 7373 696f 6e2e 6765 745f 7661  t.session.get_va
+0000c200: 6c75 6528 0a20 2020 2020 2020 2020 2020  lue(.           
+0000c210: 2020 2020 2020 2020 2043 4f4c 4c45 4354           COLLECT
+0000c220: 494f 4e5f 4355 5252 454e 542c 2064 6f63  ION_CURRENT, doc
+0000c230: 756d 656e 742c 2022 5465 7374 220a 2020  ument, "Test".  
+0000c240: 2020 2020 2020 2020 2020 2020 2020 292c                ),
+0000c250: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c260: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+0000c270: 772e 7072 6f6a 6563 742e 7365 7373 696f  w.project.sessio
+0000c280: 6e2e 6765 745f 7661 6c75 6528 0a20 2020  n.get_value(.   
+0000c290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c2a0: 2043 4f4c 4c45 4354 494f 4e5f 4355 5252   COLLECTION_CURR
+0000c2b0: 454e 542c 2064 6f63 756d 656e 742c 2022  ENT, document, "
+0000c2c0: 4261 6e64 5769 6474 6822 0a20 2020 2020  BandWidth".     
+0000c2d0: 2020 2020 2020 2020 2020 2029 2c0a 2020             ),.  
+0000c2e0: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
+0000c2f0: 2020 2020 2066 6f72 2064 6f63 756d 656e       for documen
+0000c300: 7420 696e 2073 656c 662e 6d61 696e 5f77  t in self.main_w
+0000c310: 696e 646f 772e 7072 6f6a 6563 742e 7365  indow.project.se
+0000c320: 7373 696f 6e2e 6765 745f 646f 6375 6d65  ssion.get_docume
+0000c330: 6e74 735f 6e61 6d65 7328 0a20 2020 2020  nts_names(.     
+0000c340: 2020 2020 2020 2043 4f4c 4c45 4354 494f         COLLECTIO
+0000c350: 4e5f 494e 4954 4941 4c0a 2020 2020 2020  N_INITIAL.      
+0000c360: 2020 293a 0a20 2020 2020 2020 2020 2020    ):.           
+0000c370: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000c380: 6c28 0a20 2020 2020 2020 2020 2020 2020  l(.             
+0000c390: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
+0000c3a0: 646f 772e 7072 6f6a 6563 742e 7365 7373  dow.project.sess
+0000c3b0: 696f 6e2e 6765 745f 7661 6c75 6528 0a20  ion.get_value(. 
+0000c3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c3d0: 2020 2043 4f4c 4c45 4354 494f 4e5f 494e     COLLECTION_IN
+0000c3e0: 4954 4941 4c2c 2064 6f63 756d 656e 742c  ITIAL, document,
+0000c3f0: 2022 5465 7374 220a 2020 2020 2020 2020   "Test".        
+0000c400: 2020 2020 2020 2020 292c 0a20 2020 2020          ),.     
+0000c410: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000c420: 6d61 696e 5f77 696e 646f 772e 7072 6f6a  main_window.proj
+0000c430: 6563 742e 7365 7373 696f 6e2e 6765 745f  ect.session.get_
+0000c440: 7661 6c75 6528 0a20 2020 2020 2020 2020  value(.         
+0000c450: 2020 2020 2020 2020 2020 2043 4f4c 4c45             COLLE
+0000c460: 4354 494f 4e5f 494e 4954 4941 4c2c 2064  CTION_INITIAL, d
+0000c470: 6f63 756d 656e 742c 2022 4261 6e64 5769  ocument, "BandWi
+0000c480: 6474 6822 0a20 2020 2020 2020 2020 2020  dth".           
+0000c490: 2020 2020 2029 2c0a 2020 2020 2020 2020       ),.        
+0000c4a0: 2020 2020 290a 0a20 2020 2020 2020 2074      )..        t
+0000c4b0: 6573 745f 636f 6c75 6d6e 203d 2073 656c  est_column = sel
+0000c4c0: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
+0000c4d0: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
+0000c4e0: 5f64 6174 612e 6765 745f 7461 675f 636f  _data.get_tag_co
+0000c4f0: 6c75 6d6e 280a 2020 2020 2020 2020 2020  lumn(.          
+0000c500: 2020 2254 6573 7422 0a20 2020 2020 2020    "Test".       
+0000c510: 2029 0a20 2020 2020 2020 2062 775f 636f   ).        bw_co
+0000c520: 6c75 6d6e 203d 2073 656c 662e 6d61 696e  lumn = self.main
+0000c530: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
+0000c540: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
+0000c550: 6765 745f 7461 675f 636f 6c75 6d6e 280a  get_tag_column(.
+0000c560: 2020 2020 2020 2020 2020 2020 2242 616e              "Ban
+0000c570: 6457 6964 7468 220a 2020 2020 2020 2020  dWidth".        
+0000c580: 290a 0a20 2020 2020 2020 2066 6f72 2072  )..        for r
+0000c590: 6f77 2069 6e20 7261 6e67 6528 0a20 2020  ow in range(.   
+0000c5a0: 2020 2020 2020 2020 2030 2c20 7365 6c66           0, self
+0000c5b0: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
+0000c5c0: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
+0000c5d0: 6461 7461 2e72 6f77 436f 756e 7428 290a  data.rowCount().
+0000c5e0: 2020 2020 2020 2020 293a 0a20 2020 2020          ):.     
+0000c5f0: 2020 2020 2020 2069 7465 6d5f 6277 203d         item_bw =
+0000c600: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+0000c610: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
+0000c620: 6162 6c65 5f64 6174 612e 6974 656d 280a  able_data.item(.
+0000c630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c640: 726f 772c 2062 775f 636f 6c75 6d6e 0a20  row, bw_column. 
+0000c650: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+0000c660: 2020 2020 2020 2020 2069 7465 6d5f 7465           item_te
+0000c670: 7374 203d 2073 656c 662e 6d61 696e 5f77  st = self.main_w
+0000c680: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
+0000c690: 6572 2e74 6162 6c65 5f64 6174 612e 6974  er.table_data.it
+0000c6a0: 656d 280a 2020 2020 2020 2020 2020 2020  em(.            
+0000c6b0: 2020 2020 726f 772c 2074 6573 745f 636f      row, test_co
+0000c6c0: 6c75 6d6e 0a20 2020 2020 2020 2020 2020  lumn.           
+0000c6d0: 2029 0a20 2020 2020 2020 2020 2020 2073   ).            s
+0000c6e0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000c6f0: 6974 656d 5f62 772e 7465 7874 2829 2c20  item_bw.text(), 
+0000c700: 6974 656d 5f74 6573 742e 7465 7874 2829  item_test.text()
+0000c710: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
+0000c720: 636f 756e 745f 7461 626c 6528 7365 6c66  count_table(self
+0000c730: 293a 0a20 2020 2020 2020 2022 2222 5465  ):.        """Te
+0000c740: 7374 7320 7468 6520 636f 756e 7420 7461  sts the count ta
+0000c750: 626c 6520 706f 7075 702e 2222 220a 0a20  ble popup.""".. 
+0000c760: 2020 2020 2020 2070 726f 6a65 6374 5f38         project_8
+0000c770: 5f70 6174 6820 3d20 7365 6c66 2e67 6574  _path = self.get
+0000c780: 5f6e 6577 5f74 6573 745f 7072 6f6a 6563  _new_test_projec
+0000c790: 7428 290a 2020 2020 2020 2020 7365 6c66  t().        self
+0000c7a0: 2e6d 6169 6e5f 7769 6e64 6f77 2e73 7769  .main_window.swi
+0000c7b0: 7463 685f 7072 6f6a 6563 7428 7072 6f6a  tch_project(proj
+0000c7c0: 6563 745f 385f 7061 7468 2c20 2270 726f  ect_8_path, "pro
+0000c7d0: 6a65 6374 5f38 2229 0a0a 2020 2020 2020  ject_8")..      
+0000c7e0: 2020 5154 6573 742e 6d6f 7573 6543 6c69    QTest.mouseCli
+0000c7f0: 636b 280a 2020 2020 2020 2020 2020 2020  ck(.            
+0000c800: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+0000c810: 2e64 6174 615f 6272 6f77 7365 722e 636f  .data_browser.co
+0000c820: 756e 745f 7461 626c 655f 6275 7474 6f6e  unt_table_button
+0000c830: 2c20 5174 2e4c 6566 7442 7574 746f 6e0a  , Qt.LeftButton.
+0000c840: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0000c850: 2020 636f 756e 745f 7461 626c 6520 3d20    count_table = 
+0000c860: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+0000c870: 2e64 6174 615f 6272 6f77 7365 722e 636f  .data_browser.co
+0000c880: 756e 745f 7461 626c 655f 706f 705f 7570  unt_table_pop_up
+0000c890: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000c8a0: 7365 7274 4571 7561 6c28 6c65 6e28 636f  sertEqual(len(co
+0000c8b0: 756e 745f 7461 626c 652e 7075 7368 5f62  unt_table.push_b
+0000c8c0: 7574 746f 6e73 292c 2032 290a 0a20 2020  uttons), 2)..   
+0000c8d0: 2020 2020 2063 6f75 6e74 5f74 6162 6c65       count_table
+0000c8e0: 2e70 7573 685f 6275 7474 6f6e 735b 305d  .push_buttons[0]
+0000c8f0: 2e73 6574 5465 7874 2822 4261 6e64 5769  .setText("BandWi
+0000c900: 6474 6822 290a 2020 2020 2020 2020 636f  dth").        co
+0000c910: 756e 745f 7461 626c 652e 6669 6c6c 5f76  unt_table.fill_v
+0000c920: 616c 7565 7328 3029 0a20 2020 2020 2020  alues(0).       
+0000c930: 2063 6f75 6e74 5f74 6162 6c65 2e70 7573   count_table.pus
+0000c940: 685f 6275 7474 6f6e 735b 315d 2e73 6574  h_buttons[1].set
+0000c950: 5465 7874 2822 4563 686f 5469 6d65 2229  Text("EchoTime")
+0000c960: 0a20 2020 2020 2020 2063 6f75 6e74 5f74  .        count_t
+0000c970: 6162 6c65 2e66 696c 6c5f 7661 6c75 6573  able.fill_values
+0000c980: 2831 290a 2020 2020 2020 2020 5154 6573  (1).        QTes
+0000c990: 742e 6d6f 7573 6543 6c69 636b 2863 6f75  t.mouseClick(cou
+0000c9a0: 6e74 5f74 6162 6c65 2e70 7573 685f 6275  nt_table.push_bu
+0000c9b0: 7474 6f6e 5f63 6f75 6e74 2c20 5174 2e4c  tton_count, Qt.L
+0000c9c0: 6566 7442 7574 746f 6e29 0a0a 2020 2020  eftButton)..    
+0000c9d0: 2020 2020 2320 5472 7969 6e67 2074 6f20      # Trying to 
+0000c9e0: 6164 6420 616e 6420 7265 6d6f 7665 2074  add and remove t
+0000c9f0: 6167 2062 7574 746f 6e73 0a20 2020 2020  ag buttons.     
+0000ca00: 2020 2051 5465 7374 2e6d 6f75 7365 436c     QTest.mouseCl
+0000ca10: 6963 6b28 636f 756e 745f 7461 626c 652e  ick(count_table.
+0000ca20: 6164 645f 7461 675f 6c61 6265 6c2c 2051  add_tag_label, Q
+0000ca30: 742e 4c65 6674 4275 7474 6f6e 290a 2020  t.LeftButton).  
+0000ca40: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000ca50: 7445 7175 616c 286c 656e 2863 6f75 6e74  tEqual(len(count
+0000ca60: 5f74 6162 6c65 2e70 7573 685f 6275 7474  _table.push_butt
+0000ca70: 6f6e 7329 2c20 3329 0a20 2020 2020 2020  ons), 3).       
+0000ca80: 2051 5465 7374 2e6d 6f75 7365 436c 6963   QTest.mouseClic
+0000ca90: 6b28 636f 756e 745f 7461 626c 652e 7265  k(count_table.re
+0000caa0: 6d6f 7665 5f74 6167 5f6c 6162 656c 2c20  move_tag_label, 
+0000cab0: 5174 2e4c 6566 7442 7574 746f 6e29 0a20  Qt.LeftButton). 
+0000cac0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0000cad0: 7274 4571 7561 6c28 6c65 6e28 636f 756e  rtEqual(len(coun
+0000cae0: 745f 7461 626c 652e 7075 7368 5f62 7574  t_table.push_but
+0000caf0: 746f 6e73 292c 2032 290a 0a20 2020 2020  tons), 2)..     
+0000cb00: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+0000cb10: 7561 6c28 636f 756e 745f 7461 626c 652e  ual(count_table.
+0000cb20: 7075 7368 5f62 7574 746f 6e73 5b30 5d2e  push_buttons[0].
+0000cb30: 7465 7874 2829 2c20 2242 616e 6457 6964  text(), "BandWid
+0000cb40: 7468 2229 0a20 2020 2020 2020 2073 656c  th").        sel
+0000cb50: 662e 6173 7365 7274 4571 7561 6c28 636f  f.assertEqual(co
+0000cb60: 756e 745f 7461 626c 652e 7075 7368 5f62  unt_table.push_b
+0000cb70: 7574 746f 6e73 5b31 5d2e 7465 7874 2829  uttons[1].text()
+0000cb80: 2c20 2245 6368 6f54 696d 6522 290a 0a20  , "EchoTime").. 
+0000cb90: 2020 2020 2020 2051 4170 706c 6963 6174         QApplicat
+0000cba0: 696f 6e2e 7072 6f63 6573 7345 7665 6e74  ion.processEvent
+0000cbb0: 7328 290a 0a20 2020 2020 2020 2073 656c  s()..        sel
+0000cbc0: 662e 6173 7365 7274 4571 7561 6c28 0a20  f.assertEqual(. 
+0000cbd0: 2020 2020 2020 2020 2020 2063 6f75 6e74             count
+0000cbe0: 5f74 6162 6c65 2e74 6162 6c65 2e68 6f72  _table.table.hor
+0000cbf0: 697a 6f6e 7461 6c48 6561 6465 7249 7465  izontalHeaderIte
+0000cc00: 6d28 3029 2e74 6578 7428 292c 2022 4261  m(0).text(), "Ba
+0000cc10: 6e64 5769 6474 6822 0a20 2020 2020 2020  ndWidth".       
+0000cc20: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
+0000cc30: 6173 7365 7274 4571 7561 6c28 0a20 2020  assertEqual(.   
+0000cc40: 2020 2020 2020 2020 2063 6f75 6e74 5f74           count_t
+0000cc50: 6162 6c65 2e74 6162 6c65 2e68 6f72 697a  able.table.horiz
+0000cc60: 6f6e 7461 6c48 6561 6465 7249 7465 6d28  ontalHeaderItem(
+0000cc70: 3129 2e74 6578 7428 295b 313a 2d31 5d2c  1).text()[1:-1],
+0000cc80: 2022 3735 2e30 220a 2020 2020 2020 2020   "75.0".        
+0000cc90: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0000cca0: 7373 6572 7441 6c6d 6f73 7445 7175 616c  ssertAlmostEqual
+0000ccb0: 280a 2020 2020 2020 2020 2020 2020 666c  (.            fl
+0000ccc0: 6f61 7428 636f 756e 745f 7461 626c 652e  oat(count_table.
+0000ccd0: 7461 626c 652e 686f 7269 7a6f 6e74 616c  table.horizontal
+0000cce0: 4865 6164 6572 4974 656d 2832 292e 7465  HeaderItem(2).te
+0000ccf0: 7874 2829 5b31 3a2d 315d 292c 0a20 2020  xt()[1:-1]),.   
+0000cd00: 2020 2020 2020 2020 2035 2e38 3233 3939           5.82399
+0000cd10: 3233 2c0a 2020 2020 2020 2020 290a 2020  23,.        ).  
+0000cd20: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000cd30: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
+0000cd40: 2020 2020 636f 756e 745f 7461 626c 652e      count_table.
+0000cd50: 7461 626c 652e 686f 7269 7a6f 6e74 616c  table.horizontal
+0000cd60: 4865 6164 6572 4974 656d 2833 292e 7465  HeaderItem(3).te
+0000cd70: 7874 2829 5b31 3a2d 315d 2c20 2235 2e30  xt()[1:-1], "5.0
+0000cd80: 220a 2020 2020 2020 2020 290a 2020 2020  ".        ).    
+0000cd90: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0000cda0: 7175 616c 280a 2020 2020 2020 2020 2020  qual(.          
+0000cdb0: 2020 636f 756e 745f 7461 626c 652e 7461    count_table.ta
+0000cdc0: 626c 652e 7665 7274 6963 616c 4865 6164  ble.verticalHead
+0000cdd0: 6572 4974 656d 2833 292e 7465 7874 2829  erItem(3).text()
+0000cde0: 2c20 2254 6f74 616c 220a 2020 2020 2020  , "Total".      
+0000cdf0: 2020 290a 2020 2020 2020 2020 7365 6c66    ).        self
+0000ce00: 2e61 7373 6572 7445 7175 616c 2863 6f75  .assertEqual(cou
+0000ce10: 6e74 5f74 6162 6c65 2e74 6162 6c65 2e69  nt_table.table.i
+0000ce20: 7465 6d28 302c 2030 292e 7465 7874 2829  tem(0, 0).text()
+0000ce30: 5b31 3a2d 315d 2c20 2235 3030 3030 2e30  [1:-1], "50000.0
+0000ce40: 2229 0a20 2020 2020 2020 2073 656c 662e  ").        self.
+0000ce50: 6173 7365 7274 4571 7561 6c28 636f 756e  assertEqual(coun
+0000ce60: 745f 7461 626c 652e 7461 626c 652e 6974  t_table.table.it
+0000ce70: 656d 2831 2c20 3029 2e74 6578 7428 295b  em(1, 0).text()[
+0000ce80: 313a 2d31 5d2c 2022 3235 3030 302e 3022  1:-1], "25000.0"
+0000ce90: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0000cea0: 7373 6572 7441 6c6d 6f73 7445 7175 616c  ssertAlmostEqual
+0000ceb0: 280a 2020 2020 2020 2020 2020 2020 666c  (.            fl
+0000cec0: 6f61 7428 636f 756e 745f 7461 626c 652e  oat(count_table.
+0000ced0: 7461 626c 652e 6974 656d 2832 2c20 3029  table.item(2, 0)
+0000cee0: 2e74 6578 7428 295b 313a 2d31 5d29 2c20  .text()[1:-1]), 
+0000cef0: 3635 3738 392e 3438 0a20 2020 2020 2020  65789.48.       
+0000cf00: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
+0000cf10: 6173 7365 7274 4571 7561 6c28 636f 756e  assertEqual(coun
+0000cf20: 745f 7461 626c 652e 7461 626c 652e 6974  t_table.table.it
+0000cf30: 656d 2833 2c20 3029 2e74 6578 7428 292c  em(3, 0).text(),
+0000cf40: 2022 3322 290a 2020 2020 2020 2020 7365   "3").        se
+0000cf50: 6c66 2e61 7373 6572 7445 7175 616c 2863  lf.assertEqual(c
+0000cf60: 6f75 6e74 5f74 6162 6c65 2e74 6162 6c65  ount_table.table
+0000cf70: 2e69 7465 6d28 302c 2031 292e 7465 7874  .item(0, 1).text
+0000cf80: 2829 2c20 2232 2229 0a20 2020 2020 2020  (), "2").       
+0000cf90: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000cfa0: 6c28 636f 756e 745f 7461 626c 652e 7461  l(count_table.ta
+0000cfb0: 626c 652e 6974 656d 2831 2c20 3129 2e74  ble.item(1, 1).t
+0000cfc0: 6578 7428 292c 2022 2229 0a20 2020 2020  ext(), "").     
+0000cfd0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+0000cfe0: 7561 6c28 636f 756e 745f 7461 626c 652e  ual(count_table.
+0000cff0: 7461 626c 652e 6974 656d 2832 2c20 3129  table.item(2, 1)
+0000d000: 2e74 6578 7428 292c 2022 2229 0a20 2020  .text(), "").   
+0000d010: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000d020: 4571 7561 6c28 636f 756e 745f 7461 626c  Equal(count_tabl
+0000d030: 652e 7461 626c 652e 6974 656d 2833 2c20  e.table.item(3, 
+0000d040: 3129 2e74 6578 7428 292c 2022 3222 290a  1).text(), "2").
+0000d050: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+0000d060: 6572 7445 7175 616c 2863 6f75 6e74 5f74  ertEqual(count_t
+0000d070: 6162 6c65 2e74 6162 6c65 2e69 7465 6d28  able.table.item(
+0000d080: 302c 2032 292e 7465 7874 2829 2c20 2222  0, 2).text(), ""
+0000d090: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0000d0a0: 7373 6572 7445 7175 616c 2863 6f75 6e74  ssertEqual(count
+0000d0b0: 5f74 6162 6c65 2e74 6162 6c65 2e69 7465  _table.table.ite
+0000d0c0: 6d28 312c 2032 292e 7465 7874 2829 2c20  m(1, 2).text(), 
+0000d0d0: 2232 2229 0a20 2020 2020 2020 2073 656c  "2").        sel
+0000d0e0: 662e 6173 7365 7274 4571 7561 6c28 636f  f.assertEqual(co
+0000d0f0: 756e 745f 7461 626c 652e 7461 626c 652e  unt_table.table.
+0000d100: 6974 656d 2832 2c20 3229 2e74 6578 7428  item(2, 2).text(
+0000d110: 292c 2022 2229 0a20 2020 2020 2020 2073  ), "").        s
+0000d120: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000d130: 636f 756e 745f 7461 626c 652e 7461 626c  count_table.tabl
+0000d140: 652e 6974 656d 2833 2c20 3229 2e74 6578  e.item(3, 2).tex
+0000d150: 7428 292c 2022 3222 290a 2020 2020 2020  t(), "2").      
+0000d160: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0000d170: 616c 2863 6f75 6e74 5f74 6162 6c65 2e74  al(count_table.t
+0000d180: 6162 6c65 2e69 7465 6d28 302c 2033 292e  able.item(0, 3).
+0000d190: 7465 7874 2829 2c20 2222 290a 2020 2020  text(), "").    
+0000d1a0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0000d1b0: 7175 616c 2863 6f75 6e74 5f74 6162 6c65  qual(count_table
+0000d1c0: 2e74 6162 6c65 2e69 7465 6d28 312c 2033  .table.item(1, 3
+0000d1d0: 292e 7465 7874 2829 2c20 2222 290a 2020  ).text(), "").  
+0000d1e0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000d1f0: 7445 7175 616c 2863 6f75 6e74 5f74 6162  tEqual(count_tab
+0000d200: 6c65 2e74 6162 6c65 2e69 7465 6d28 322c  le.table.item(2,
+0000d210: 2033 292e 7465 7874 2829 2c20 2235 2229   3).text(), "5")
+0000d220: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000d230: 7365 7274 4571 7561 6c28 636f 756e 745f  sertEqual(count_
+0000d240: 7461 626c 652e 7461 626c 652e 6974 656d  table.table.item
+0000d250: 2833 2c20 3329 2e74 6578 7428 292c 2022  (3, 3).text(), "
+0000d260: 3522 290a 0a20 2020 2064 6566 2074 6573  5")..    def tes
+0000d270: 745f 6d69 615f 7072 6566 6572 656e 6365  t_mia_preference
+0000d280: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
+0000d290: 2022 2222 5465 7374 7320 7468 6520 4d49   """Tests the MI
+0000d2a0: 4120 7072 6566 6572 656e 6365 7320 706f  A preferences po
+0000d2b0: 7075 702e 2222 220a 0a20 2020 2020 2020  pup."""..       
+0000d2c0: 2063 6f6e 6669 6720 3d20 436f 6e66 6967   config = Config
+0000d2d0: 2863 6f6e 6669 675f 7061 7468 3d73 656c  (config_path=sel
+0000d2e0: 662e 636f 6e66 6967 5f70 6174 6829 0a20  f.config_path). 
+0000d2f0: 2020 2020 2020 206f 6c64 5f61 7574 6f5f         old_auto_
+0000d300: 7361 7665 203d 2063 6f6e 6669 672e 6973  save = config.is
+0000d310: 4175 746f 5361 7665 2829 0a20 2020 2020  AutoSave().     
 0000d320: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000d330: 7561 6c28 636f 756e 745f 7461 626c 652e  ual(count_table.
-0000d340: 7461 626c 652e 6974 656d 2832 2c20 3329  table.item(2, 3)
-0000d350: 2e74 6578 7428 292c 2022 3522 290a 2020  .text(), "5").  
-0000d360: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000d370: 7445 7175 616c 2863 6f75 6e74 5f74 6162  tEqual(count_tab
-0000d380: 6c65 2e74 6162 6c65 2e69 7465 6d28 332c  le.table.item(3,
-0000d390: 2033 292e 7465 7874 2829 2c20 2235 2229   3).text(), "5")
-0000d3a0: 0a0a 2020 2020 6465 6620 7465 7374 5f6d  ..    def test_m
-0000d3b0: 6961 5f70 7265 6665 7265 6e63 6573 2873  ia_preferences(s
-0000d3c0: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
-0000d3d0: 2254 6573 7473 2074 6865 204d 4941 2070  "Tests the MIA p
-0000d3e0: 7265 6665 7265 6e63 6573 2070 6f70 7570  references popup
-0000d3f0: 2e22 2222 0a0a 2020 2020 2020 2020 636f  ."""..        co
-0000d400: 6e66 6967 203d 2043 6f6e 6669 6728 636f  nfig = Config(co
-0000d410: 6e66 6967 5f70 6174 683d 7365 6c66 2e63  nfig_path=self.c
-0000d420: 6f6e 6669 675f 7061 7468 290a 2020 2020  onfig_path).    
-0000d430: 2020 2020 6f6c 645f 6175 746f 5f73 6176      old_auto_sav
-0000d440: 6520 3d20 636f 6e66 6967 2e69 7341 7574  e = config.isAut
-0000d450: 6f53 6176 6528 290a 2020 2020 2020 2020  oSave().        
-0000d460: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-0000d470: 286f 6c64 5f61 7574 6f5f 7361 7665 2c20  (old_auto_save, 
-0000d480: 4661 6c73 6529 0a0a 2020 2020 2020 2020  False)..        
-0000d490: 2320 4175 746f 2073 6176 6520 6163 7469  # Auto save acti
-0000d4a0: 7661 7465 640a 2020 2020 2020 2020 7365  vated.        se
-0000d4b0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e61  lf.main_window.a
-0000d4c0: 6374 696f 6e5f 736f 6674 7761 7265 5f70  ction_software_p
-0000d4d0: 7265 6665 7265 6e63 6573 2e74 7269 6767  references.trigg
-0000d4e0: 6572 2829 0a20 2020 2020 2020 2070 726f  er().        pro
-0000d4f0: 7065 7274 6965 7320 3d20 7365 6c66 2e6d  perties = self.m
-0000d500: 6169 6e5f 7769 6e64 6f77 2e70 6f70 5f75  ain_window.pop_u
-0000d510: 705f 7072 6566 6572 656e 6365 730a 2020  p_preferences.  
-0000d520: 2020 2020 2020 7072 6f70 6572 7469 6573        properties
-0000d530: 2e70 726f 6a65 6374 735f 7361 7665 5f70  .projects_save_p
-0000d540: 6174 685f 6c69 6e65 5f65 6469 742e 7365  ath_line_edit.se
-0000d550: 7454 6578 7428 0a20 2020 2020 2020 2020  tText(.         
-0000d560: 2020 2074 656d 7066 696c 652e 6d6b 6474     tempfile.mkdt
-0000d570: 656d 7028 7072 6566 6978 3d22 7072 6f6a  emp(prefix="proj
-0000d580: 6563 7473 5f74 6573 7473 2229 0a20 2020  ects_tests").   
-0000d590: 2020 2020 2029 0a20 2020 2020 2020 2070       ).        p
-0000d5a0: 726f 7065 7274 6965 732e 7461 625f 7769  roperties.tab_wi
-0000d5b0: 6467 6574 2e73 6574 4375 7272 656e 7449  dget.setCurrentI
-0000d5c0: 6e64 6578 2831 290a 2020 2020 2020 2020  ndex(1).        
-0000d5d0: 7072 6f70 6572 7469 6573 2e73 6176 655f  properties.save_
-0000d5e0: 6368 6563 6b62 6f78 2e73 6574 4368 6563  checkbox.setChec
-0000d5f0: 6b65 6428 5472 7565 290a 2020 2020 2020  ked(True).      
-0000d600: 2020 5154 6573 742e 6d6f 7573 6543 6c69    QTest.mouseCli
-0000d610: 636b 2870 726f 7065 7274 6965 732e 7075  ck(properties.pu
-0000d620: 7368 5f62 7574 746f 6e5f 6f6b 2c20 5174  sh_button_ok, Qt
-0000d630: 2e4c 6566 7442 7574 746f 6e29 0a20 2020  .LeftButton).   
-0000d640: 2020 2020 2051 5465 7374 2e71 5761 6974       QTest.qWait
-0000d650: 2835 3030 290a 2020 2020 2020 2020 7365  (500).        se
-0000d660: 6c66 2e65 7865 6375 7465 5f51 4d65 7373  lf.execute_QMess
-0000d670: 6167 6542 6f78 5f63 6c69 636b 4f6b 2829  ageBox_clickOk()
-0000d680: 0a0a 2020 2020 2020 2020 636f 6e66 6967  ..        config
-0000d690: 203d 2043 6f6e 6669 6728 636f 6e66 6967   = Config(config
-0000d6a0: 5f70 6174 683d 7365 6c66 2e63 6f6e 6669  _path=self.confi
-0000d6b0: 675f 7061 7468 290a 2020 2020 2020 2020  g_path).        
-0000d6c0: 6e65 775f 6175 746f 5f73 6176 6520 3d20  new_auto_save = 
-0000d6d0: 636f 6e66 6967 2e69 7341 7574 6f53 6176  config.isAutoSav
-0000d6e0: 6528 290a 2020 2020 2020 2020 7365 6c66  e().        self
-0000d6f0: 2e61 7373 6572 7445 7175 616c 286e 6577  .assertEqual(new
-0000d700: 5f61 7574 6f5f 7361 7665 2c20 5472 7565  _auto_save, True
-0000d710: 290a 0a20 2020 2020 2020 2023 2041 7574  )..        # Aut
-0000d720: 6f20 7361 7665 2064 6973 6162 6c65 6420  o save disabled 
-0000d730: 6167 6169 6e0a 2020 2020 2020 2020 7365  again.        se
-0000d740: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e61  lf.main_window.a
-0000d750: 6374 696f 6e5f 736f 6674 7761 7265 5f70  ction_software_p
-0000d760: 7265 6665 7265 6e63 6573 2e74 7269 6767  references.trigg
-0000d770: 6572 2829 0a20 2020 2020 2020 2070 726f  er().        pro
-0000d780: 7065 7274 6965 7320 3d20 7365 6c66 2e6d  perties = self.m
-0000d790: 6169 6e5f 7769 6e64 6f77 2e70 6f70 5f75  ain_window.pop_u
-0000d7a0: 705f 7072 6566 6572 656e 6365 730a 2020  p_preferences.  
-0000d7b0: 2020 2020 2020 7072 6f70 6572 7469 6573        properties
-0000d7c0: 2e74 6162 5f77 6964 6765 742e 7365 7443  .tab_widget.setC
-0000d7d0: 7572 7265 6e74 496e 6465 7828 3129 0a20  urrentIndex(1). 
-0000d7e0: 2020 2020 2020 2070 726f 7065 7274 6965         propertie
-0000d7f0: 732e 7361 7665 5f63 6865 636b 626f 782e  s.save_checkbox.
-0000d800: 7365 7443 6865 636b 6564 2846 616c 7365  setChecked(False
-0000d810: 290a 2020 2020 2020 2020 5154 6573 742e  ).        QTest.
-0000d820: 6d6f 7573 6543 6c69 636b 2870 726f 7065  mouseClick(prope
-0000d830: 7274 6965 732e 7075 7368 5f62 7574 746f  rties.push_butto
-0000d840: 6e5f 6f6b 2c20 5174 2e4c 6566 7442 7574  n_ok, Qt.LeftBut
-0000d850: 746f 6e29 0a20 2020 2020 2020 2051 5465  ton).        QTe
-0000d860: 7374 2e71 5761 6974 2835 3030 290a 2020  st.qWait(500).  
-0000d870: 2020 2020 2020 7365 6c66 2e65 7865 6375        self.execu
-0000d880: 7465 5f51 4d65 7373 6167 6542 6f78 5f63  te_QMessageBox_c
-0000d890: 6c69 636b 4f6b 2829 0a20 2020 2020 2020  lickOk().       
-0000d8a0: 2063 6f6e 6669 6720 3d20 436f 6e66 6967   config = Config
-0000d8b0: 2863 6f6e 6669 675f 7061 7468 3d73 656c  (config_path=sel
-0000d8c0: 662e 636f 6e66 6967 5f70 6174 6829 0a20  f.config_path). 
-0000d8d0: 2020 2020 2020 2072 6570 7574 5f61 7574         reput_aut
-0000d8e0: 6f5f 7361 7665 203d 2063 6f6e 6669 672e  o_save = config.
-0000d8f0: 6973 4175 746f 5361 7665 2829 0a20 2020  isAutoSave().   
-0000d900: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0000d910: 4571 7561 6c28 7265 7075 745f 6175 746f  Equal(reput_auto
-0000d920: 5f73 6176 652c 2046 616c 7365 290a 0a20  _save, False).. 
-0000d930: 2020 2020 2020 2023 2043 6865 636b 696e         # Checkin
-0000d940: 6720 7468 6174 2074 6865 2063 6861 6e67  g that the chang
-0000d950: 6573 2061 7265 206e 6f74 2065 6666 6563  es are not effec
-0000d960: 7469 7665 2069 6620 6361 6e63 656c 2069  tive if cancel i
-0000d970: 7320 636c 6963 6b65 640a 2020 2020 2020  s clicked.      
-0000d980: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
-0000d990: 6f77 2e61 6374 696f 6e5f 736f 6674 7761  ow.action_softwa
-0000d9a0: 7265 5f70 7265 6665 7265 6e63 6573 2e74  re_preferences.t
-0000d9b0: 7269 6767 6572 2829 0a20 2020 2020 2020  rigger().       
-0000d9c0: 2070 726f 7065 7274 6965 7320 3d20 7365   properties = se
-0000d9d0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
-0000d9e0: 6f70 5f75 705f 7072 6566 6572 656e 6365  op_up_preference
-0000d9f0: 730a 2020 2020 2020 2020 7072 6f70 6572  s.        proper
-0000da00: 7469 6573 2e74 6162 5f77 6964 6765 742e  ties.tab_widget.
-0000da10: 7365 7443 7572 7265 6e74 496e 6465 7828  setCurrentIndex(
-0000da20: 3129 0a20 2020 2020 2020 2070 726f 7065  1).        prope
-0000da30: 7274 6965 732e 7361 7665 5f63 6865 636b  rties.save_check
-0000da40: 626f 782e 7365 7443 6865 636b 6564 2854  box.setChecked(T
-0000da50: 7275 6529 0a20 2020 2020 2020 2051 5465  rue).        QTe
-0000da60: 7374 2e6d 6f75 7365 436c 6963 6b28 7072  st.mouseClick(pr
-0000da70: 6f70 6572 7469 6573 2e70 7573 685f 6275  operties.push_bu
-0000da80: 7474 6f6e 5f63 616e 6365 6c2c 2051 742e  tton_cancel, Qt.
-0000da90: 4c65 6674 4275 7474 6f6e 290a 2020 2020  LeftButton).    
-0000daa0: 2020 2020 5154 6573 742e 7157 6169 7428      QTest.qWait(
-0000dab0: 3530 3029 0a20 2020 2020 2020 2073 656c  500).        sel
-0000dac0: 662e 6578 6563 7574 655f 514d 6573 7361  f.execute_QMessa
-0000dad0: 6765 426f 785f 636c 6963 6b4f 6b28 290a  geBox_clickOk().
-0000dae0: 2020 2020 2020 2020 636f 6e66 6967 203d          config =
-0000daf0: 2043 6f6e 6669 6728 636f 6e66 6967 5f70   Config(config_p
-0000db00: 6174 683d 7365 6c66 2e63 6f6e 6669 675f  ath=self.config_
-0000db10: 7061 7468 290a 2020 2020 2020 2020 2320  path).        # 
-0000db20: 636c 6561 7220 636f 6e66 6967 202d 3e20  clear config -> 
-0000db30: 7573 6572 5f6d 6f64 6520 6265 636f 6d65  user_mode become
-0000db40: 2054 7275 6520 210a 2020 2020 2020 2020   True !.        
-0000db50: 636f 6e66 6967 2e63 6f6e 6669 6720 3d20  config.config = 
-0000db60: 7b7d 0a20 2020 2020 2020 2061 7574 6f5f  {}.        auto_
-0000db70: 7361 7665 203d 2063 6f6e 6669 672e 6973  save = config.is
-0000db80: 4175 746f 5361 7665 2829 0a20 2020 2020  AutoSave().     
-0000db90: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000dba0: 7561 6c28 6175 746f 5f73 6176 652c 2046  ual(auto_save, F
-0000dbb0: 616c 7365 290a 0a20 2020 2020 2020 2023  alse)..        #
-0000dbc0: 2043 6865 636b 696e 6720 7468 6174 2074   Checking that t
-0000dbd0: 6865 2076 616c 7565 7320 666f 7220 7468  he values for th
-0000dbe0: 6520 2250 726f 6a65 6374 7320 7072 6566  e "Projects pref
-0000dbf0: 6572 656e 6365 7322 2061 7265 2077 656c  erences" are wel
-0000dc00: 6c20 7365 740a 2020 2020 2020 2020 7365  l set.        se
-0000dc10: 6c66 2e61 7373 6572 7445 7175 616c 2863  lf.assertEqual(c
-0000dc20: 6f6e 6669 672e 6765 745f 6d61 785f 7072  onfig.get_max_pr
-0000dc30: 6f6a 6563 7473 2829 2c20 3529 0a20 2020  ojects(), 5).   
-0000dc40: 2020 2020 2063 6f6e 6669 672e 7365 745f       config.set_
-0000dc50: 6d61 785f 7072 6f6a 6563 7473 2837 290a  max_projects(7).
-0000dc60: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000dc70: 6572 7445 7175 616c 2863 6f6e 6669 672e  ertEqual(config.
-0000dc80: 6765 745f 6d61 785f 7072 6f6a 6563 7473  get_max_projects
-0000dc90: 2829 2c20 3729 0a20 2020 2020 2020 2063  (), 7).        c
-0000dca0: 6f6e 6669 672e 7365 745f 6d61 785f 7072  onfig.set_max_pr
-0000dcb0: 6f6a 6563 7473 2835 290a 0a20 2020 2020  ojects(5)..     
-0000dcc0: 2020 206d 6961 5f70 6174 6820 3d20 6f73     mia_path = os
-0000dcd0: 2e70 6174 682e 6a6f 696e 280a 2020 2020  .path.join(.    
-0000dce0: 2020 2020 2020 2020 636f 6e66 6967 2e67          config.g
-0000dcf0: 6574 5f6d 6961 5f70 6174 6828 292c 2022  et_mia_path(), "
-0000dd00: 7072 6f70 6572 7469 6573 222c 2022 636f  properties", "co
-0000dd10: 6e66 6967 2e79 6d6c 220a 2020 2020 2020  nfig.yml".      
-0000dd20: 2020 290a 2020 2020 2020 2020 7365 6c66    ).        self
-0000dd30: 2e61 7373 6572 7445 7175 616c 286f 732e  .assertEqual(os.
-0000dd40: 7061 7468 2e65 7869 7374 7328 6d69 615f  path.exists(mia_
-0000dd50: 7061 7468 292c 2054 7275 6529 0a0a 2020  path), True)..  
-0000dd60: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000dd70: 7445 7175 616c 2863 6f6e 6669 672e 6765  tEqual(config.ge
-0000dd80: 745f 7573 6572 5f6d 6f64 6528 292c 2054  t_user_mode(), T
-0000dd90: 7275 6529 0a20 2020 2020 2020 2063 6f6e  rue).        con
-0000dda0: 6669 672e 7365 745f 7573 6572 5f6d 6f64  fig.set_user_mod
-0000ddb0: 6528 4661 6c73 6529 0a20 2020 2020 2020  e(False).       
-0000ddc0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0000ddd0: 6c28 636f 6e66 6967 2e67 6574 5f75 7365  l(config.get_use
-0000dde0: 725f 6d6f 6465 2829 2c20 4661 6c73 6529  r_mode(), False)
-0000ddf0: 0a0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-0000de00: 7373 6572 7445 7175 616c 2863 6f6e 6669  ssertEqual(confi
-0000de10: 672e 6765 745f 6d72 695f 636f 6e76 5f70  g.get_mri_conv_p
-0000de20: 6174 6828 292c 2022 2229 0a0a 2020 2020  ath(), "")..    
-0000de30: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000de40: 7175 616c 2863 6f6e 6669 672e 6765 745f  qual(config.get_
-0000de50: 6d61 746c 6162 5f63 6f6d 6d61 6e64 2829  matlab_command()
-0000de60: 2c20 4e6f 6e65 290a 2020 2020 2020 2020  , None).        
-0000de70: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-0000de80: 2863 6f6e 6669 672e 6765 745f 6d61 746c  (config.get_matl
-0000de90: 6162 5f70 6174 6828 292c 204e 6f6e 6529  ab_path(), None)
-0000dea0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0000deb0: 7365 7274 4571 7561 6c28 636f 6e66 6967  sertEqual(config
-0000dec0: 2e67 6574 5f6d 6174 6c61 625f 7374 616e  .get_matlab_stan
-0000ded0: 6461 6c6f 6e65 5f70 6174 6828 292c 2022  dalone_path(), "
-0000dee0: 2229 0a20 2020 2020 2020 2073 656c 662e  ").        self.
-0000def0: 6173 7365 7274 4571 7561 6c28 636f 6e66  assertEqual(conf
-0000df00: 6967 2e67 6574 5f73 706d 5f70 6174 6828  ig.get_spm_path(
-0000df10: 292c 2022 2229 0a20 2020 2020 2020 2073  ), "").        s
-0000df20: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0000df30: 636f 6e66 6967 2e67 6574 5f73 706d 5f73  config.get_spm_s
-0000df40: 7461 6e64 616c 6f6e 655f 7061 7468 2829  tandalone_path()
-0000df50: 2c20 2222 290a 2020 2020 2020 2020 7365  , "").        se
-0000df60: 6c66 2e61 7373 6572 7445 7175 616c 2863  lf.assertEqual(c
-0000df70: 6f6e 6669 672e 6765 745f 7573 655f 6d61  onfig.get_use_ma
-0000df80: 746c 6162 2829 2c20 4661 6c73 6529 0a20  tlab(), False). 
-0000df90: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000dfa0: 7274 4571 7561 6c28 636f 6e66 6967 2e67  rtEqual(config.g
-0000dfb0: 6574 5f75 7365 5f73 706d 2829 2c20 4661  et_use_spm(), Fa
-0000dfc0: 6c73 6529 0a20 2020 2020 2020 2073 656c  lse).        sel
-0000dfd0: 662e 6173 7365 7274 4571 7561 6c28 636f  f.assertEqual(co
-0000dfe0: 6e66 6967 2e67 6574 5f75 7365 5f73 706d  nfig.get_use_spm
-0000dff0: 5f73 7461 6e64 616c 6f6e 6528 292c 2046  _standalone(), F
-0000e000: 616c 7365 290a 2020 2020 2020 2020 7365  alse).        se
-0000e010: 6c66 2e61 7373 6572 7445 7175 616c 2863  lf.assertEqual(c
-0000e020: 6f6e 6669 672e 6765 7442 6163 6b67 726f  onfig.getBackgro
-0000e030: 756e 6443 6f6c 6f72 2829 2c20 2222 290a  undColor(), "").
-0000e040: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000e050: 6572 7445 7175 616c 2863 6f6e 6669 672e  ertEqual(config.
-0000e060: 6765 7443 6861 696e 4375 7273 6f72 7328  getChainCursors(
-0000e070: 292c 2046 616c 7365 290a 2020 2020 2020  ), False).      
-0000e080: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0000e090: 616c 2863 6f6e 6669 672e 6765 744e 6241  al(config.getNbA
-0000e0a0: 6c6c 536c 6963 6573 4d61 7828 292c 2031  llSlicesMax(), 1
-0000e0b0: 3029 0a20 2020 2020 2020 2073 656c 662e  0).        self.
-0000e0c0: 6173 7365 7274 4571 7561 6c28 636f 6e66  assertEqual(conf
-0000e0d0: 6967 2e67 6574 5368 6f77 416c 6c53 6c69  ig.getShowAllSli
-0000e0e0: 6365 7328 292c 2046 616c 7365 290a 2020  ces(), False).  
-0000e0f0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000e100: 7445 7175 616c 2863 6f6e 6669 672e 6765  tEqual(config.ge
-0000e110: 7454 6578 7443 6f6c 6f72 2829 2c20 2222  tTextColor(), ""
-0000e120: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-0000e130: 7373 6572 7445 7175 616c 2863 6f6e 6669  ssertEqual(confi
-0000e140: 672e 6765 7454 6875 6d62 6e61 696c 5461  g.getThumbnailTa
-0000e150: 6728 292c 2022 5365 7175 656e 6365 4e61  g(), "SequenceNa
-0000e160: 6d65 2229 0a0a 2020 2020 2020 2020 7365  me")..        se
-0000e170: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
-0000e180: 2020 2020 2020 2020 2020 2020 4661 6c73              Fals
-0000e190: 652c 2076 6572 7369 6f6e 2e70 6172 7365  e, version.parse
-0000e1a0: 2879 616d 6c2e 5f5f 7665 7273 696f 6e5f  (yaml.__version_
-0000e1b0: 5f29 203e 2076 6572 7369 6f6e 2e70 6172  _) > version.par
-0000e1c0: 7365 2822 392e 3122 290a 2020 2020 2020  se("9.1").      
-0000e1d0: 2020 290a 2020 2020 2020 2020 7365 6c66    ).        self
-0000e1e0: 2e61 7373 6572 7445 7175 616c 280a 2020  .assertEqual(.  
-0000e1f0: 2020 2020 2020 2020 2020 5472 7565 2c20            True, 
-0000e200: 7665 7273 696f 6e2e 7061 7273 6528 7961  version.parse(ya
-0000e210: 6d6c 2e5f 5f76 6572 7369 6f6e 5f5f 2920  ml.__version__) 
-0000e220: 3c20 7665 7273 696f 6e2e 7061 7273 6528  < version.parse(
-0000e230: 2239 2e31 2229 0a20 2020 2020 2020 2029  "9.1").        )
-0000e240: 0a0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-0000e250: 7373 6572 7445 7175 616c 2863 6f6e 6669  ssertEqual(confi
-0000e260: 672e 6765 745f 7072 6f6a 6563 7473 5f73  g.get_projects_s
-0000e270: 6176 655f 7061 7468 2829 2c20 2222 290a  ave_path(), "").
-0000e280: 0a20 2020 2064 6566 2074 6573 745f 6d69  .    def test_mi
-0000e290: 6e69 5f76 6965 7765 7228 7365 6c66 293a  ni_viewer(self):
-0000e2a0: 0a20 2020 2020 2020 2022 2222 5365 6c65  .        """Sele
-0000e2b0: 6374 7320 7363 616e 7320 616e 6420 6469  cts scans and di
-0000e2c0: 7370 6c61 7920 7468 656d 2069 6e20 7468  splay them in th
-0000e2d0: 6520 6d69 6e69 2076 6965 7765 722e 0a0a  e mini viewer...
-0000e2e0: 2020 2020 2020 2020 2d20 5465 7374 7320          - Tests 
-0000e2f0: 4d69 6e69 5669 6577 6572 2e0a 2020 2020  MiniViewer..    
-0000e300: 2020 2020 2d20 5468 6520 6d69 6e69 2076      - The mini v
-0000e310: 6965 7765 7220 6469 7370 6c61 7973 2069  iewer displays i
-0000e320: 6e66 6f72 6d61 7469 6f6e 206f 6620 7468  nformation of th
-0000e330: 6520 7365 6c65 6374 6564 2073 6361 6e20  e selected scan 
-0000e340: 696e 2061 0a20 2020 2020 2020 2020 2062  in a.          b
-0000e350: 6f78 2075 6e64 6572 2074 6865 2073 6361  ox under the sca
-0000e360: 6e73 206c 6973 742c 2069 6e20 7468 6520  ns list, in the 
-0000e370: 6461 7461 2062 726f 7773 6572 2074 6162  data browser tab
-0000e380: 2e0a 2020 2020 2020 2020 2222 220a 0a20  ..        """.. 
-0000e390: 2020 2020 2020 2023 2043 7265 6174 6573         # Creates
-0000e3a0: 2061 206e 6577 2070 726f 6a65 6374 2066   a new project f
-0000e3b0: 6f6c 6465 7220 616e 6420 7377 6974 6368  older and switch
-0000e3c0: 6573 2074 6f20 6974 0a20 2020 2020 2020  es to it.       
-0000e3d0: 206e 6577 5f70 726f 6a5f 7061 7468 203d   new_proj_path =
-0000e3e0: 2073 656c 662e 6765 745f 6e65 775f 7465   self.get_new_te
-0000e3f0: 7374 5f70 726f 6a65 6374 286c 6967 6874  st_project(light
-0000e400: 3d54 7275 6529 0a20 2020 2020 2020 2073  =True).        s
-0000e410: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-0000e420: 7377 6974 6368 5f70 726f 6a65 6374 286e  switch_project(n
-0000e430: 6577 5f70 726f 6a5f 7061 7468 2c20 2274  ew_proj_path, "t
-0000e440: 6573 745f 6c69 6768 745f 7072 6f6a 6563  est_light_projec
-0000e450: 7422 290a 0a20 2020 2020 2020 2023 2053  t")..        # S
-0000e460: 6574 7320 7368 6f72 7463 7574 7320 666f  ets shortcuts fo
-0000e470: 7220 6f62 6a65 6374 7320 7468 6174 2061  r objects that a
-0000e480: 7265 206f 6674 656e 2075 7365 640a 2020  re often used.  
-0000e490: 2020 2020 2020 6461 7461 5f62 726f 7773        data_brows
-0000e4a0: 6572 203d 2073 656c 662e 6d61 696e 5f77  er = self.main_w
-0000e4b0: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
-0000e4c0: 6572 0a20 2020 2020 2020 2076 6965 7765  er.        viewe
-0000e4d0: 7220 3d20 7365 6c66 2e6d 6169 6e5f 7769  r = self.main_wi
-0000e4e0: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
-0000e4f0: 722e 7669 6577 6572 0a0a 2020 2020 2020  r.viewer..      
-0000e500: 2020 2320 5365 6c65 6374 7320 7468 6520    # Selects the 
-0000e510: 6669 7273 7420 7363 616e 0a20 2020 2020  first scan.     
-0000e520: 2020 2064 6174 615f 6272 6f77 7365 722e     data_browser.
-0000e530: 7461 626c 655f 6461 7461 2e69 7465 6d28  table_data.item(
-0000e540: 302c 2030 292e 7365 7453 656c 6563 7465  0, 0).setSelecte
-0000e550: 6428 5472 7565 290a 0a20 2020 2020 2020  d(True)..       
-0000e560: 2023 2047 6574 7320 7468 6520 3344 2073   # Gets the 3D s
-0000e570: 6c69 6465 7220 7261 6e67 650a 2020 2020  lider range.    
-0000e580: 2020 2020 736c 6964 6572 5f33 445f 7261      slider_3D_ra
-0000e590: 6e67 6520 3d20 7669 6577 6572 2e73 6c69  nge = viewer.sli
-0000e5a0: 6465 725f 3344 5b30 5d2e 6d61 7869 6d75  der_3D[0].maximu
-0000e5b0: 6d28 290a 0a20 2020 2020 2020 2023 204d  m()..        # M
-0000e5c0: 6f76 6573 2074 6865 2033 4420 736c 6964  oves the 3D slid
-0000e5d0: 6520 746f 2074 6865 206d 6964 646c 6520  e to the middle 
-0000e5e0: 6f66 2074 6865 2072 616e 6765 0a20 2020  of the range.   
-0000e5f0: 2020 2020 2076 6965 7765 722e 736c 6964       viewer.slid
-0000e600: 6572 5f33 445b 305d 2e73 6574 5661 6c75  er_3D[0].setValu
-0000e610: 6528 696e 7428 736c 6964 6572 5f33 445f  e(int(slider_3D_
-0000e620: 7261 6e67 6520 2f20 3229 290a 0a20 2020  range / 2))..   
-0000e630: 2020 2020 2023 2053 686f 7773 2061 6c6c       # Shows all
-0000e640: 2073 6c69 6365 730a 2020 2020 2020 2020   slices.        
-0000e650: 7669 6577 6572 2e63 6865 636b 5f62 6f78  viewer.check_box
-0000e660: 5f73 6c69 6365 732e 7365 7443 6865 636b  _slices.setCheck
-0000e670: 5374 6174 6528 5174 2e43 6865 636b 6564  State(Qt.Checked
-0000e680: 290a 0a20 2020 2020 2020 2023 2055 6e63  )..        # Unc
-0000e690: 6865 636b 7320 7368 6f77 2061 6c6c 2073  hecks show all s
-0000e6a0: 6c69 6365 730a 2020 2020 2020 2020 7669  lices.        vi
-0000e6b0: 6577 6572 2e63 6865 636b 5f62 6f78 5f73  ewer.check_box_s
-0000e6c0: 6c69 6365 732e 7365 7443 6865 636b 5374  lices.setCheckSt
-0000e6d0: 6174 6528 5174 2e43 6865 636b 6564 290a  ate(Qt.Checked).
-0000e6e0: 0a20 2020 2020 2020 2023 2043 6865 636b  .        # Check
-0000e6f0: 7320 7468 6520 6368 6169 6e20 6375 7273  s the chain curs
-0000e700: 6f72 730a 2020 2020 2020 2020 7669 6577  ors.        view
-0000e710: 6572 2e63 6865 636b 5f62 6f78 5f63 7572  er.check_box_cur
-0000e720: 736f 7273 2e73 6574 4368 6563 6b53 7461  sors.setCheckSta
-0000e730: 7465 2851 742e 4368 6563 6b65 6429 0a0a  te(Qt.Checked)..
-0000e740: 2020 2020 2020 2020 2320 5365 6c65 6374          # Select
-0000e750: 7320 7468 6520 7365 636f 6e64 2073 6361  s the second sca
-0000e760: 6e0a 2020 2020 2020 2020 6461 7461 5f62  n.        data_b
-0000e770: 726f 7773 6572 2e74 6162 6c65 5f64 6174  rowser.table_dat
-0000e780: 612e 6974 656d 2831 2c20 3029 2e73 6574  a.item(1, 0).set
-0000e790: 5365 6c65 6374 6564 2854 7275 6529 0a0a  Selected(True)..
-0000e7a0: 2020 2020 2020 2020 2320 4d6f 7665 7320          # Moves 
-0000e7b0: 7468 6520 3344 2073 6c69 6465 7320 746f  the 3D slides to
-0000e7c0: 2074 6865 206c 6f77 6572 206c 696d 6974   the lower limit
-0000e7d0: 0a20 2020 2020 2020 2076 6965 7765 722e  .        viewer.
-0000e7e0: 736c 6964 6572 5f33 445b 305d 2e73 6574  slider_3D[0].set
-0000e7f0: 5661 6c75 6528 3029 0a0a 2020 2020 2020  Value(0)..      
-0000e800: 2020 2320 4d6f 7665 7320 7468 6520 3344    # Moves the 3D
-0000e810: 2073 6c69 6465 7320 746f 2074 6865 206d   slides to the m
-0000e820: 6964 646c 6520 6f66 2074 6865 2072 616e  iddle of the ran
-0000e830: 6765 0a20 2020 2020 2020 2076 6965 7765  ge.        viewe
-0000e840: 722e 736c 6964 6572 5f33 445b 305d 2e73  r.slider_3D[0].s
-0000e850: 6574 5661 6c75 6528 696e 7428 736c 6964  etValue(int(slid
-0000e860: 6572 5f33 445f 7261 6e67 6520 2f20 3229  er_3D_range / 2)
-0000e870: 290a 0a20 2020 2020 2020 2023 204d 6f76  )..        # Mov
-0000e880: 6573 2074 6865 2033 4420 736c 6964 6573  es the 3D slides
-0000e890: 2074 6f20 7468 6520 6d69 6464 6c65 206f   to the middle o
-0000e8a0: 6620 7468 6520 7261 6e67 650a 2020 2020  f the range.    
-0000e8b0: 2020 2020 7669 6577 6572 2e73 6c69 6465      viewer.slide
-0000e8c0: 725f 3344 5b30 5d2e 7365 7456 616c 7565  r_3D[0].setValue
-0000e8d0: 2873 6c69 6465 725f 3344 5f72 616e 6765  (slider_3D_range
-0000e8e0: 290a 0a20 2020 2020 2020 2023 2055 6e63  )..        # Unc
-0000e8f0: 6865 636b 7320 7468 6520 6368 6169 6e20  hecks the chain 
-0000e900: 6375 7273 6f72 730a 2020 2020 2020 2020  cursors.        
-0000e910: 7669 6577 6572 2e63 6865 636b 5f62 6f78  viewer.check_box
-0000e920: 5f63 7572 736f 7273 2e73 6574 4368 6563  _cursors.setChec
-0000e930: 6b53 7461 7465 2851 742e 556e 6368 6563  kState(Qt.Unchec
-0000e940: 6b65 6429 0a0a 2020 2020 2020 2020 7669  ked)..        vi
-0000e950: 6577 6572 2e75 7064 6174 655f 6e62 5f73  ewer.update_nb_s
-0000e960: 6c69 6365 7328 290a 0a20 2020 2064 6566  lices()..    def
-0000e970: 2074 6573 745f 6d6f 6469 6679 5f74 6162   test_modify_tab
-0000e980: 6c65 2873 656c 6629 3a0a 2020 2020 2020  le(self):.      
-0000e990: 2020 2222 2254 6573 7420 7468 6520 6d6f    """Test the mo
-0000e9a0: 6469 6679 5f74 6162 6c65 206d 6f64 756c  dify_table modul
-0000e9b0: 652e 2222 220a 0a20 2020 2020 2020 2070  e."""..        p
-0000e9c0: 726f 6a65 6374 5f38 5f70 6174 6820 3d20  roject_8_path = 
-0000e9d0: 7365 6c66 2e67 6574 5f6e 6577 5f74 6573  self.get_new_tes
-0000e9e0: 745f 7072 6f6a 6563 7428 290a 2020 2020  t_project().    
-0000e9f0: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
-0000ea00: 6e64 6f77 2e73 7769 7463 685f 7072 6f6a  ndow.switch_proj
-0000ea10: 6563 7428 7072 6f6a 6563 745f 385f 7061  ect(project_8_pa
-0000ea20: 7468 2c20 2270 726f 6a65 6374 5f38 2229  th, "project_8")
-0000ea30: 0a20 2020 2020 2020 2073 6361 6e73 5f64  .        scans_d
-0000ea40: 6973 706c 6179 6564 203d 205b 5d0a 2020  isplayed = [].  
-0000ea50: 2020 2020 2020 6974 656d 203d 2073 656c        item = sel
-0000ea60: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
-0000ea70: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
-0000ea80: 5f64 6174 612e 6974 656d 2830 2c20 3029  _data.item(0, 0)
-0000ea90: 0a20 2020 2020 2020 2073 6361 6e5f 6e61  .        scan_na
-0000eaa0: 6d65 203d 2069 7465 6d2e 7465 7874 2829  me = item.text()
-0000eab0: 0a0a 2020 2020 2020 2020 2320 5465 7374  ..        # Test
-0000eac0: 2076 616c 7565 7320 6f66 2061 206c 6973   values of a lis
-0000ead0: 7420 6f66 2066 6c6f 6174 730a 2020 2020  t of floats.    
-0000eae0: 2020 2020 7661 6c75 6520 3d20 5b35 2e30      value = [5.0
-0000eaf0: 2c20 332e 305d 0a20 2020 2020 2020 2074  , 3.0].        t
-0000eb00: 6167 5f6e 616d 6520 3d20 5b22 464f 5622  ag_name = ["FOV"
-0000eb10: 5d0a 2020 2020 2020 2020 6966 206e 6f74  ].        if not
-0000eb20: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-0000eb30: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
-0000eb40: 6162 6c65 5f64 6174 612e 6973 526f 7748  able_data.isRowH
-0000eb50: 6964 6465 6e28 3029 3a0a 2020 2020 2020  idden(0):.      
-0000eb60: 2020 2020 2020 7363 616e 735f 6469 7370        scans_disp
-0000eb70: 6c61 7965 642e 6170 7065 6e64 2873 6361  layed.append(sca
-0000eb80: 6e5f 6e61 6d65 290a 0a20 2020 2020 2020  n_name)..       
-0000eb90: 2023 2054 6573 7420 7468 6174 2074 6865   # Test that the
-0000eba0: 2076 616c 7565 2077 696c 6c20 6e6f 7420   value will not 
-0000ebb0: 6368 616e 6765 2069 6620 7468 6520 7461  change if the ta
-0000ebc0: 6727 7320 7479 7065 2069 7320 696e 636f  g's type is inco
-0000ebd0: 7272 6563 740a 2020 2020 2020 2020 6f6c  rrect.        ol
-0000ebe0: 645f 7661 6c75 6520 3d20 7365 6c66 2e6d  d_value = self.m
-0000ebf0: 6169 6e5f 7769 6e64 6f77 2e70 726f 6a65  ain_window.proje
-0000ec00: 6374 2e73 6573 7369 6f6e 2e67 6574 5f76  ct.session.get_v
-0000ec10: 616c 7565 280a 2020 2020 2020 2020 2020  alue(.          
-0000ec20: 2020 434f 4c4c 4543 5449 4f4e 5f43 5552    COLLECTION_CUR
-0000ec30: 5245 4e54 2c20 7363 616e 735f 6469 7370  RENT, scans_disp
-0000ec40: 6c61 7965 645b 305d 2c20 2246 4f56 220a  layed[0], "FOV".
-0000ec50: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-0000ec60: 2020 206d 6f64 203d 204d 6f64 6966 7954     mod = ModifyT
-0000ec70: 6162 6c65 280a 2020 2020 2020 2020 2020  able(.          
-0000ec80: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
-0000ec90: 6f77 2e70 726f 6a65 6374 2c0a 2020 2020  ow.project,.    
-0000eca0: 2020 2020 2020 2020 7661 6c75 652c 0a20          value,. 
-0000ecb0: 2020 2020 2020 2020 2020 205b 7479 7065             [type
-0000ecc0: 2822 7374 7269 6e67 2229 5d2c 0a20 2020  ("string")],.   
-0000ecd0: 2020 2020 2020 2020 2073 6361 6e73 5f64           scans_d
-0000ece0: 6973 706c 6179 6564 2c0a 2020 2020 2020  isplayed,.      
-0000ecf0: 2020 2020 2020 7461 675f 6e61 6d65 2c0a        tag_name,.
-0000ed00: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0000ed10: 2020 6d6f 642e 7570 6461 7465 5f74 6162    mod.update_tab
-0000ed20: 6c65 5f76 616c 7565 7328 5472 7565 290a  le_values(True).
-0000ed30: 2020 2020 2020 2020 6e65 775f 7661 6c75          new_valu
-0000ed40: 6520 3d20 7365 6c66 2e6d 6169 6e5f 7769  e = self.main_wi
-0000ed50: 6e64 6f77 2e70 726f 6a65 6374 2e73 6573  ndow.project.ses
-0000ed60: 7369 6f6e 2e67 6574 5f76 616c 7565 280a  sion.get_value(.
-0000ed70: 2020 2020 2020 2020 2020 2020 434f 4c4c              COLL
-0000ed80: 4543 5449 4f4e 5f43 5552 5245 4e54 2c20  ECTION_CURRENT, 
-0000ed90: 7363 616e 735f 6469 7370 6c61 7965 645b  scans_displayed[
-0000eda0: 305d 2c20 2246 4f56 220a 2020 2020 2020  0], "FOV".      
-0000edb0: 2020 290a 2020 2020 2020 2020 7365 6c66    ).        self
-0000edc0: 2e61 7373 6572 7445 7175 616c 286f 6c64  .assertEqual(old
-0000edd0: 5f76 616c 7565 2c20 6e65 775f 7661 6c75  _value, new_valu
-0000ede0: 6529 0a0a 2020 2020 2020 2020 2320 5465  e)..        # Te
-0000edf0: 7374 2074 6861 7420 7468 6520 7661 6c75  st that the valu
-0000ee00: 6520 7769 6c6c 2063 6861 6e67 6520 7768  e will change wh
-0000ee10: 656e 2061 6c6c 2070 6172 616d 6574 6572  en all parameter
-0000ee20: 7320 6172 6520 636f 7272 6563 740a 2020  s are correct.  
-0000ee30: 2020 2020 2020 7461 675f 6f62 6a65 6374        tag_object
-0000ee40: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
-0000ee50: 646f 772e 7072 6f6a 6563 742e 7365 7373  dow.project.sess
-0000ee60: 696f 6e2e 6765 745f 6669 656c 6428 0a20  ion.get_field(. 
-0000ee70: 2020 2020 2020 2020 2020 2043 4f4c 4c45             COLLE
-0000ee80: 4354 494f 4e5f 4355 5252 454e 542c 2022  CTION_CURRENT, "
-0000ee90: 464f 5622 0a20 2020 2020 2020 2029 0a20  FOV".        ). 
-0000eea0: 2020 2020 2020 206d 6f64 203d 204d 6f64         mod = Mod
-0000eeb0: 6966 7954 6162 6c65 280a 2020 2020 2020  ifyTable(.      
-0000eec0: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-0000eed0: 7769 6e64 6f77 2e70 726f 6a65 6374 2c0a  window.project,.
-0000eee0: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
-0000eef0: 652c 0a20 2020 2020 2020 2020 2020 205b  e,.            [
-0000ef00: 7461 675f 6f62 6a65 6374 2e66 6965 6c64  tag_object.field
-0000ef10: 5f74 7970 655d 2c0a 2020 2020 2020 2020  _type],.        
-0000ef20: 2020 2020 7363 616e 735f 6469 7370 6c61      scans_displa
-0000ef30: 7965 642c 0a20 2020 2020 2020 2020 2020  yed,.           
-0000ef40: 2074 6167 5f6e 616d 652c 0a20 2020 2020   tag_name,.     
-0000ef50: 2020 2029 0a20 2020 2020 2020 206d 6f64     ).        mod
-0000ef60: 2e75 7064 6174 655f 7461 626c 655f 7661  .update_table_va
-0000ef70: 6c75 6573 2854 7275 6529 0a20 2020 2020  lues(True).     
-0000ef80: 2020 206e 6577 5f76 616c 7565 203d 2073     new_value = s
-0000ef90: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-0000efa0: 7072 6f6a 6563 742e 7365 7373 696f 6e2e  project.session.
-0000efb0: 6765 745f 7661 6c75 6528 0a20 2020 2020  get_value(.     
-0000efc0: 2020 2020 2020 2043 4f4c 4c45 4354 494f         COLLECTIO
-0000efd0: 4e5f 4355 5252 454e 542c 2073 6361 6e73  N_CURRENT, scans
-0000efe0: 5f64 6973 706c 6179 6564 5b30 5d2c 2022  _displayed[0], "
-0000eff0: 464f 5622 0a20 2020 2020 2020 2029 0a20  FOV".        ). 
-0000f000: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000f010: 7274 4571 7561 6c28 6d6f 642e 7461 626c  rtEqual(mod.tabl
-0000f020: 652e 636f 6c75 6d6e 436f 756e 7428 292c  e.columnCount(),
-0000f030: 2032 290a 2020 2020 2020 2020 7365 6c66   2).        self
-0000f040: 2e61 7373 6572 7445 7175 616c 2876 616c  .assertEqual(val
-0000f050: 7565 2c20 6e65 775f 7661 6c75 6529 0a0a  ue, new_value)..
-0000f060: 2020 2020 6465 6620 7465 7374 5f6d 756c      def test_mul
-0000f070: 7469 706c 655f 736f 7274 2873 656c 6629  tiple_sort(self)
-0000f080: 3a0a 2020 2020 2020 2020 2222 2254 6573  :.        """Tes
-0000f090: 7473 2074 6865 206d 756c 7469 706c 6520  ts the multiple 
-0000f0a0: 736f 7274 2070 6f70 7570 2e22 2222 0a0a  sort popup."""..
-0000f0b0: 2020 2020 2020 2020 7072 6f6a 6563 745f          project_
-0000f0c0: 385f 7061 7468 203d 2073 656c 662e 6765  8_path = self.ge
-0000f0d0: 745f 6e65 775f 7465 7374 5f70 726f 6a65  t_new_test_proje
-0000f0e0: 6374 2829 0a20 2020 2020 2020 2073 656c  ct().        sel
-0000f0f0: 662e 6d61 696e 5f77 696e 646f 772e 7377  f.main_window.sw
-0000f100: 6974 6368 5f70 726f 6a65 6374 2870 726f  itch_project(pro
-0000f110: 6a65 6374 5f38 5f70 6174 682c 2022 7072  ject_8_path, "pr
-0000f120: 6f6a 6563 745f 3822 290a 0a20 2020 2020  oject_8")..     
-0000f130: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
-0000f140: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
-0000f150: 2e74 6162 6c65 5f64 6174 612e 6974 656d  .table_data.item
-0000f160: 4368 616e 6765 642e 6469 7363 6f6e 6e65  Changed.disconne
-0000f170: 6374 2829 0a20 2020 2020 2020 2073 656c  ct().        sel
-0000f180: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
-0000f190: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
-0000f1a0: 5f64 6174 612e 6d75 6c74 6970 6c65 5f73  _data.multiple_s
-0000f1b0: 6f72 745f 706f 705f 7570 2829 0a20 2020  ort_pop_up().   
-0000f1c0: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
-0000f1d0: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
-0000f1e0: 6572 2e74 6162 6c65 5f64 6174 612e 6974  er.table_data.it
-0000f1f0: 656d 4368 616e 6765 642e 636f 6e6e 6563  emChanged.connec
-0000f200: 7428 0a20 2020 2020 2020 2020 2020 2073  t(.            s
-0000f210: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-0000f220: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
-0000f230: 6c65 5f64 6174 612e 6368 616e 6765 5f63  le_data.change_c
-0000f240: 656c 6c5f 636f 6c6f 720a 2020 2020 2020  ell_color.      
-0000f250: 2020 290a 2020 2020 2020 2020 6d75 6c74    ).        mult
-0000f260: 6970 6c65 5f73 6f72 7420 3d20 7365 6c66  iple_sort = self
-0000f270: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
-0000f280: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
-0000f290: 6461 7461 2e70 6f70 5f75 700a 0a20 2020  data.pop_up..   
-0000f2a0: 2020 2020 206d 756c 7469 706c 655f 736f       multiple_so
-0000f2b0: 7274 2e70 7573 685f 6275 7474 6f6e 735b  rt.push_buttons[
-0000f2c0: 305d 2e73 6574 5465 7874 2822 4261 6e64  0].setText("Band
-0000f2d0: 5769 6474 6822 290a 2020 2020 2020 2020  Width").        
-0000f2e0: 6d75 6c74 6970 6c65 5f73 6f72 742e 6669  multiple_sort.fi
-0000f2f0: 6c6c 5f76 616c 7565 7328 3029 0a20 2020  ll_values(0).   
-0000f300: 2020 2020 206d 756c 7469 706c 655f 736f       multiple_so
-0000f310: 7274 2e70 7573 685f 6275 7474 6f6e 735b  rt.push_buttons[
-0000f320: 315d 2e73 6574 5465 7874 2822 4578 7020  1].setText("Exp 
-0000f330: 5479 7065 2229 0a20 2020 2020 2020 206d  Type").        m
-0000f340: 756c 7469 706c 655f 736f 7274 2e66 696c  ultiple_sort.fil
-0000f350: 6c5f 7661 6c75 6573 2831 290a 2020 2020  l_values(1).    
-0000f360: 2020 2020 5154 6573 742e 6d6f 7573 6543      QTest.mouseC
-0000f370: 6c69 636b 286d 756c 7469 706c 655f 736f  lick(multiple_so
-0000f380: 7274 2e70 7573 685f 6275 7474 6f6e 5f73  rt.push_button_s
-0000f390: 6f72 742c 2051 742e 4c65 6674 4275 7474  ort, Qt.LeftButt
-0000f3a0: 6f6e 290a 0a20 2020 2020 2020 2073 6361  on)..        sca
-0000f3b0: 6e20 3d20 7365 6c66 2e6d 6169 6e5f 7769  n = self.main_wi
-0000f3c0: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
-0000f3d0: 722e 7461 626c 655f 6461 7461 2e69 7465  r.table_data.ite
-0000f3e0: 6d28 302c 2030 292e 7465 7874 2829 0a20  m(0, 0).text(). 
-0000f3f0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000f400: 7274 4571 7561 6c28 0a20 2020 2020 2020  rtEqual(.       
-0000f410: 2020 2020 2073 6361 6e2c 0a20 2020 2020       scan,.     
-0000f420: 2020 2020 2020 2022 6461 7461 2f72 6177         "data/raw
-0000f430: 5f64 6174 612f 4775 6572 6265 742d 4336  _data/Guerbet-C6
-0000f440: 2d32 3031 342d 5261 742d 4b35 322d 5475  -2014-Rat-K52-Tu
-0000f450: 6265 3237 2d32 3031 3422 0a20 2020 2020  be27-2014".     
-0000f460: 2020 2020 2020 2022 2d30 322d 3134 3130         "-02-1410
-0000f470: 3233 3137 2d31 302d 4733 5f47 7565 7262  2317-10-G3_Guerb
-0000f480: 6574 5f4d 4445 4654 2d4d 4445 4654 7076  et_MDEFT-MDEFTpv
-0000f490: 6d2d 3030 3039 3430 220a 2020 2020 2020  m-000940".      
-0000f4a0: 2020 2020 2020 225f 3830 302e 6e69 6922        "_800.nii"
-0000f4b0: 2c0a 2020 2020 2020 2020 290a 2020 2020  ,.        ).    
-0000f4c0: 2020 2020 7363 616e 203d 2073 656c 662e      scan = self.
-0000f4d0: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
-0000f4e0: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
-0000f4f0: 6174 612e 6974 656d 2831 2c20 3029 2e74  ata.item(1, 0).t
-0000f500: 6578 7428 290a 2020 2020 2020 2020 7365  ext().        se
-0000f510: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
-0000f520: 2020 2020 2020 2020 2020 2020 7363 616e              scan
-0000f530: 2c0a 2020 2020 2020 2020 2020 2020 2264  ,.            "d
-0000f540: 6174 612f 7261 775f 6461 7461 2f47 7565  ata/raw_data/Gue
-0000f550: 7262 6574 2d43 362d 3230 3134 2d52 6174  rbet-C6-2014-Rat
-0000f560: 2d4b 3532 2d54 7562 6532 372d 3230 3134  -K52-Tube27-2014
-0000f570: 220a 2020 2020 2020 2020 2020 2020 222d  ".            "-
-0000f580: 3032 2d31 3431 3032 3331 372d 3034 2d47  02-14102317-04-G
-0000f590: 335f 4775 6572 6265 745f 4d44 4546 542d  3_Guerbet_MDEFT-
-0000f5a0: 4d44 4546 5470 766d 2d30 3030 3934 3022  MDEFTpvm-000940"
-0000f5b0: 0a20 2020 2020 2020 2020 2020 2022 5f38  .            "_8
-0000f5c0: 3030 2e6e 6969 222c 0a20 2020 2020 2020  00.nii",.       
-0000f5d0: 2029 0a20 2020 2020 2020 2073 6361 6e20   ).        scan 
-0000f5e0: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
-0000f5f0: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
-0000f600: 7461 626c 655f 6461 7461 2e69 7465 6d28  table_data.item(
-0000f610: 322c 2030 292e 7465 7874 2829 0a20 2020  2, 0).text().   
-0000f620: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0000f630: 4571 7561 6c28 0a20 2020 2020 2020 2020  Equal(.         
-0000f640: 2020 2073 6361 6e2c 0a20 2020 2020 2020     scan,.       
-0000f650: 2020 2020 2022 6461 7461 2f72 6177 5f64       "data/raw_d
-0000f660: 6174 612f 4775 6572 6265 742d 4336 2d32  ata/Guerbet-C6-2
-0000f670: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
-0000f680: 3237 220a 2020 2020 2020 2020 2020 2020  27".            
-0000f690: 222d 3230 3134 2d30 322d 3134 3130 3233  "-2014-02-141023
-0000f6a0: 3137 2d30 312d 4731 5f47 7565 7262 6574  17-01-G1_Guerbet
-0000f6b0: 5f41 6e61 742d 5241 5245 7076 6d22 0a20  _Anat-RAREpvm". 
-0000f6c0: 2020 2020 2020 2020 2020 2022 2d30 3030             "-000
-0000f6d0: 3232 305f 3030 302e 6e69 6922 2c0a 2020  220_000.nii",.  
-0000f6e0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0000f6f0: 7363 616e 203d 2073 656c 662e 6d61 696e  scan = self.main
-0000f700: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
-0000f710: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
-0000f720: 6974 656d 2833 2c20 3029 2e74 6578 7428  item(3, 0).text(
-0000f730: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-0000f740: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
-0000f750: 2020 2020 2020 2020 7363 616e 2c0a 2020          scan,.  
-0000f760: 2020 2020 2020 2020 2020 2264 6174 612f            "data/
-0000f770: 6465 7269 7665 645f 6461 7461 2f73 4775  derived_data/sGu
-0000f780: 6572 6265 742d 4336 2d32 3031 342d 5261  erbet-C6-2014-Ra
-0000f790: 742d 4b35 322d 5475 6265 3237 220a 2020  t-K52-Tube27".  
-0000f7a0: 2020 2020 2020 2020 2020 222d 3230 3134            "-2014
-0000f7b0: 2d30 322d 3134 3130 3233 3137 2d30 312d  -02-14102317-01-
-0000f7c0: 4731 5f47 7565 7262 6574 5f41 6e61 742d  G1_Guerbet_Anat-
-0000f7d0: 5241 5245 7076 6d22 0a20 2020 2020 2020  RAREpvm".       
-0000f7e0: 2020 2020 2022 2d30 3030 3232 305f 3030       "-000220_00
-0000f7f0: 302e 6e69 6922 2c0a 2020 2020 2020 2020  0.nii",.        
-0000f800: 290a 2020 2020 2020 2020 7363 616e 203d  ).        scan =
-0000f810: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-0000f820: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
-0000f830: 6162 6c65 5f64 6174 612e 6974 656d 2834  able_data.item(4
-0000f840: 2c20 3029 2e74 6578 7428 290a 2020 2020  , 0).text().    
-0000f850: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000f860: 7175 616c 280a 2020 2020 2020 2020 2020  qual(.          
-0000f870: 2020 7363 616e 2c0a 2020 2020 2020 2020    scan,.        
-0000f880: 2020 2020 2264 6174 612f 7261 775f 6461      "data/raw_da
-0000f890: 7461 2f47 7565 7262 6574 2d43 362d 3230  ta/Guerbet-C6-20
-0000f8a0: 3134 2d52 6174 2d4b 3532 2d54 7562 6532  14-Rat-K52-Tube2
-0000f8b0: 3722 0a20 2020 2020 2020 2020 2020 2022  7".            "
-0000f8c0: 2d32 3031 342d 3032 2d31 3431 3032 3331  -2014-02-1410231
-0000f8d0: 372d 3131 2d47 345f 4775 6572 6265 745f  7-11-G4_Guerbet_
-0000f8e0: 5431 5345 5f38 3030 2d52 4152 4570 766d  T1SE_800-RAREpvm
-0000f8f0: 220a 2020 2020 2020 2020 2020 2020 222d  ".            "-
-0000f900: 3030 3031 3432 5f34 3030 2e6e 6969 222c  000142_400.nii",
-0000f910: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-0000f920: 2020 2073 6361 6e20 3d20 7365 6c66 2e6d     scan = self.m
-0000f930: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
-0000f940: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
-0000f950: 7461 2e69 7465 6d28 352c 2030 292e 7465  ta.item(5, 0).te
-0000f960: 7874 2829 0a20 2020 2020 2020 2073 656c  xt().        sel
-0000f970: 662e 6173 7365 7274 4571 7561 6c28 0a20  f.assertEqual(. 
-0000f980: 2020 2020 2020 2020 2020 2073 6361 6e2c             scan,
-0000f990: 0a20 2020 2020 2020 2020 2020 2022 6461  .            "da
-0000f9a0: 7461 2f72 6177 5f64 6174 612f 4775 6572  ta/raw_data/Guer
-0000f9b0: 6265 742d 4336 2d32 3031 342d 5261 742d  bet-C6-2014-Rat-
-0000f9c0: 4b35 322d 5475 6265 3237 220a 2020 2020  K52-Tube27".    
-0000f9d0: 2020 2020 2020 2020 222d 3230 3134 2d30          "-2014-0
-0000f9e0: 322d 3134 3130 3233 3137 2d30 392d 4734  2-14102317-09-G4
-0000f9f0: 5f47 7565 7262 6574 5f54 3153 455f 3830  _Guerbet_T1SE_80
-0000fa00: 302d 5241 5245 7076 6d22 0a20 2020 2020  0-RAREpvm".     
-0000fa10: 2020 2020 2020 2022 2d30 3030 3134 325f         "-000142_
-0000fa20: 3430 302e 6e69 6922 2c0a 2020 2020 2020  400.nii",.      
-0000fa30: 2020 290a 2020 2020 2020 2020 7363 616e    ).        scan
-0000fa40: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
-0000fa50: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
-0000fa60: 2e74 6162 6c65 5f64 6174 612e 6974 656d  .table_data.item
-0000fa70: 2836 2c20 3029 2e74 6578 7428 290a 2020  (6, 0).text().  
-0000fa80: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000fa90: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
-0000faa0: 2020 2020 7363 616e 2c0a 2020 2020 2020      scan,.      
-0000fab0: 2020 2020 2020 2264 6174 612f 7261 775f        "data/raw_
-0000fac0: 6461 7461 2f47 7565 7262 6574 2d43 362d  data/Guerbet-C6-
-0000fad0: 3230 3134 2d52 6174 2d4b 3532 2d54 7562  2014-Rat-K52-Tub
-0000fae0: 6532 3722 0a20 2020 2020 2020 2020 2020  e27".           
-0000faf0: 2022 2d32 3031 342d 3032 2d31 3431 3032   "-2014-02-14102
-0000fb00: 3331 372d 3038 2d47 345f 4775 6572 6265  317-08-G4_Guerbe
-0000fb10: 745f 5431 5345 5f38 3030 2d52 4152 4570  t_T1SE_800-RAREp
-0000fb20: 766d 220a 2020 2020 2020 2020 2020 2020  vm".            
-0000fb30: 222d 3030 3031 3432 5f34 3030 2e6e 6969  "-000142_400.nii
-0000fb40: 222c 0a20 2020 2020 2020 2029 0a20 2020  ",.        ).   
-0000fb50: 2020 2020 2073 6361 6e20 3d20 7365 6c66       scan = self
-0000fb60: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
-0000fb70: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
-0000fb80: 6461 7461 2e69 7465 6d28 372c 2030 292e  data.item(7, 0).
-0000fb90: 7465 7874 2829 0a20 2020 2020 2020 2073  text().        s
-0000fba0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0000fbb0: 0a20 2020 2020 2020 2020 2020 2073 6361  .            sca
-0000fbc0: 6e2c 0a20 2020 2020 2020 2020 2020 2022  n,.            "
-0000fbd0: 6461 7461 2f72 6177 5f64 6174 612f 4775  data/raw_data/Gu
-0000fbe0: 6572 6265 742d 4336 2d32 3031 342d 5261  erbet-C6-2014-Ra
-0000fbf0: 742d 4b35 322d 5475 6265 3237 220a 2020  t-K52-Tube27".  
-0000fc00: 2020 2020 2020 2020 2020 222d 3230 3134            "-2014
-0000fc10: 2d30 322d 3134 3130 3233 3137 2d30 362d  -02-14102317-06-
-0000fc20: 4734 5f47 7565 7262 6574 5f54 3153 455f  G4_Guerbet_T1SE_
-0000fc30: 3830 302d 5241 5245 7076 6d22 0a20 2020  800-RAREpvm".   
-0000fc40: 2020 2020 2020 2020 2022 2d30 3030 3134           "-00014
-0000fc50: 325f 3430 302e 6e69 6922 2c0a 2020 2020  2_400.nii",.    
-0000fc60: 2020 2020 290a 2020 2020 2020 2020 7363      ).        sc
-0000fc70: 616e 203d 2073 656c 662e 6d61 696e 5f77  an = self.main_w
-0000fc80: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
-0000fc90: 6572 2e74 6162 6c65 5f64 6174 612e 6974  er.table_data.it
-0000fca0: 656d 2838 2c20 3029 2e74 6578 7428 290a  em(8, 0).text().
-0000fcb0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000fcc0: 6572 7445 7175 616c 280a 2020 2020 2020  ertEqual(.      
-0000fcd0: 2020 2020 2020 7363 616e 2c0a 2020 2020        scan,.    
-0000fce0: 2020 2020 2020 2020 2264 6174 612f 7261          "data/ra
-0000fcf0: 775f 6461 7461 2f47 7565 7262 6574 2d43  w_data/Guerbet-C
-0000fd00: 362d 3230 3134 2d52 6174 2d4b 3532 2d54  6-2014-Rat-K52-T
-0000fd10: 7562 6532 3722 0a20 2020 2020 2020 2020  ube27".         
-0000fd20: 2020 2022 2d32 3031 342d 3032 2d31 3431     "-2014-02-141
-0000fd30: 3032 3331 372d 3035 2d47 345f 4775 6572  02317-05-G4_Guer
-0000fd40: 6265 745f 5431 5345 5f38 3030 2d52 4152  bet_T1SE_800-RAR
-0000fd50: 4570 766d 220a 2020 2020 2020 2020 2020  Epvm".          
-0000fd60: 2020 222d 3030 3031 3432 5f34 3030 2e6e    "-000142_400.n
-0000fd70: 6969 222c 0a20 2020 2020 2020 2029 0a0a  ii",.        )..
-0000fd80: 2020 2020 6465 6620 7465 7374 5f6d 756c      def test_mul
-0000fd90: 7469 706c 655f 736f 7274 5f61 7070 656e  tiple_sort_appen
-0000fda0: 6469 7828 7365 6c66 293a 0a20 2020 2020  dix(self):.     
-0000fdb0: 2020 2022 2222 4164 6473 2061 6e64 2072     """Adds and r
-0000fdc0: 656d 6f76 6573 2074 6167 7320 696e 2074  emoves tags in t
-0000fdd0: 6865 2064 6174 6120 6272 6f77 7365 722e  he data browser.
-0000fde0: 0a0a 2020 2020 2020 2020 2d20 5465 7374  ..        - Test
-0000fdf0: 733a 2050 6f70 5570 4d75 6c74 6970 6c65  s: PopUpMultiple
-0000fe00: 536f 7274 0a0a 2020 2020 2020 2020 2d20  Sort..        - 
-0000fe10: 4d6f 636b 733a 2050 6f70 5570 5365 6c65  Mocks: PopUpSele
-0000fe20: 6374 5461 6743 6f75 6e74 5461 626c 652e  ctTagCountTable.
-0000fe30: 6578 6563 5f0a 2020 2020 2020 2020 2222  exec_.        ""
-0000fe40: 220a 0a20 2020 2020 2020 2074 6162 6c65  "..        table
-0000fe50: 5f64 6174 6120 3d20 7365 6c66 2e6d 6169  _data = self.mai
-0000fe60: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
-0000fe70: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
-0000fe80: 0a0a 2020 2020 2020 2020 7461 626c 655f  ..        table_
-0000fe90: 6461 7461 2e6d 756c 7469 706c 655f 736f  data.multiple_so
-0000fea0: 7274 5f70 6f70 5f75 7028 290a 2020 2020  rt_pop_up().    
-0000feb0: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
-0000fec0: 7275 6528 6861 7361 7474 7228 7461 626c  rue(hasattr(tabl
-0000fed0: 655f 6461 7461 2c20 2270 6f70 5f75 7022  e_data, "pop_up"
-0000fee0: 2929 0a0a 2020 2020 2020 2020 2320 4164  ))..        # Ad
-0000fef0: 6473 2061 2033 7264 2074 6167 2074 6f20  ds a 3rd tag to 
-0000ff00: 7468 6520 706f 702d 7570 0a20 2020 2020  the pop-up.     
-0000ff10: 2020 2074 6162 6c65 5f64 6174 612e 706f     table_data.po
-0000ff20: 705f 7570 2e61 6464 5f74 6167 5f6c 6162  p_up.add_tag_lab
-0000ff30: 656c 2e63 6c69 636b 6564 2e65 6d69 7428  el.clicked.emit(
-0000ff40: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-0000ff50: 7373 6572 7445 7175 616c 286c 656e 2874  ssertEqual(len(t
-0000ff60: 6162 6c65 5f64 6174 612e 706f 705f 7570  able_data.pop_up
-0000ff70: 2e70 7573 685f 6275 7474 6f6e 7329 2c20  .push_buttons), 
-0000ff80: 3329 0a0a 2020 2020 2020 2020 2320 5265  3)..        # Re
-0000ff90: 6d6f 7665 7320 7468 6520 7461 670a 2020  moves the tag.  
-0000ffa0: 2020 2020 2020 7461 626c 655f 6461 7461        table_data
-0000ffb0: 2e70 6f70 5f75 702e 7265 6d6f 7665 5f74  .pop_up.remove_t
-0000ffc0: 6167 5f6c 6162 656c 2e63 6c69 636b 6564  ag_label.clicked
-0000ffd0: 2e65 6d69 7428 290a 2020 2020 2020 2020  .emit().        
-0000ffe0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-0000fff0: 286c 656e 2874 6162 6c65 5f64 6174 612e  (len(table_data.
-00010000: 706f 705f 7570 2e70 7573 685f 6275 7474  pop_up.push_butt
-00010010: 6f6e 7329 2c20 3229 0a0a 2020 2020 2020  ons), 2)..      
-00010020: 2020 2320 4d6f 636b 7320 7468 6520 6578    # Mocks the ex
-00010030: 6563 7574 696f 6e20 6f66 2027 506f 7055  ecution of 'PopU
-00010040: 7053 656c 6563 7454 6167 436f 756e 7454  pSelectTagCountT
-00010050: 6162 6c65 270a 2020 2020 2020 2020 6465  able'.        de
-00010060: 6620 6d6f 636b 5f73 656c 6563 745f 7461  f mock_select_ta
-00010070: 6773 2873 656c 6629 3a0a 2020 2020 2020  gs(self):.      
-00010080: 2020 2020 2020 7365 6c66 2e73 656c 6563        self.selec
-00010090: 7465 645f 7461 6720 3d20 2245 7870 2054  ted_tag = "Exp T
-000100a0: 7970 6522 0a20 2020 2020 2020 2020 2020  ype".           
-000100b0: 2072 6574 7572 6e20 5472 7565 0a0a 2020   return True..  
-000100c0: 2020 2020 2020 506f 7055 7053 656c 6563        PopUpSelec
-000100d0: 7454 6167 436f 756e 7454 6162 6c65 2e65  tTagCountTable.e
-000100e0: 7865 635f 203d 206d 6f63 6b5f 7365 6c65  xec_ = mock_sele
-000100f0: 6374 5f74 6167 730a 0a20 2020 2020 2020  ct_tags..       
-00010100: 2074 6162 6c65 5f64 6174 612e 706f 705f   table_data.pop_
-00010110: 7570 2e73 656c 6563 745f 7461 6728 3029  up.select_tag(0)
-00010120: 0a0a 2020 2020 2020 2020 2320 4164 6473  ..        # Adds
-00010130: 2061 2074 6167 2069 6e20 706c 6163 6520   a tag in place 
-00010140: 6f66 2027 5461 6720 6e31 270a 2020 2020  of 'Tag n1'.    
-00010150: 2020 2020 7461 626c 655f 6461 7461 2e70      table_data.p
-00010160: 6f70 5f75 702e 7365 6c65 6374 5f74 6167  op_up.select_tag
-00010170: 2830 290a 0a20 2020 2020 2020 2023 2043  (0)..        # C
-00010180: 6c6f 7365 7320 7468 6520 706f 702d 7570  loses the pop-up
-00010190: 0a20 2020 2020 2020 2074 6162 6c65 5f64  .        table_d
-000101a0: 6174 612e 706f 705f 7570 2e63 6c6f 7365  ata.pop_up.close
-000101b0: 2829 0a0a 2020 2020 6465 6620 7465 7374  ()..    def test
-000101c0: 5f6f 7065 6e54 6167 7350 6f70 5570 2873  _openTagsPopUp(s
-000101d0: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
-000101e0: 224f 7065 6e73 2061 2064 6f63 756d 656e  "Opens a documen
-000101f0: 7420 696e 2064 6174 6120 7669 6577 6572  t in data viewer
-00010200: 2061 6e64 206f 7065 6e73 2061 2070 6f70   and opens a pop
-00010210: 2d75 7020 746f 2073 656c 6563 7420 7468  -up to select th
-00010220: 650a 2020 2020 2020 2020 6c65 6765 6e64  e.        legend
-00010230: 206f 6620 7468 6520 7468 756d 626e 6169   of the thumbnai
-00010240: 6c73 2e0a 0a20 2020 2020 2020 202d 2054  ls...        - T
-00010250: 6573 7473 204d 696e 6956 6965 7765 722e  ests MiniViewer.
-00010260: 6f70 656e 5461 6773 506f 7055 702e 0a20  openTagsPopUp.. 
-00010270: 2020 2020 2020 202d 2049 6e64 6972 6563         - Indirec
-00010280: 746c 7920 7465 7374 7320 506f 7055 7053  tly tests PopUpS
-00010290: 656c 6563 7454 6167 2e0a 2020 2020 2020  electTag..      
-000102a0: 2020 2222 220a 0a20 2020 2020 2020 2023    """..        #
-000102b0: 2053 6574 7320 7368 6f72 7463 7574 7320   Sets shortcuts 
-000102c0: 666f 7220 6f62 6a65 6374 7320 7468 6174  for objects that
-000102d0: 2061 7265 206f 6674 656e 2075 7365 640a   are often used.
-000102e0: 2020 2020 2020 2020 6461 7461 5f62 726f          data_bro
-000102f0: 7773 6572 203d 2073 656c 662e 6d61 696e  wser = self.main
-00010300: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
-00010310: 7773 6572 0a20 2020 2020 2020 2076 6965  wser.        vie
-00010320: 7765 7220 3d20 6461 7461 5f62 726f 7773  wer = data_brows
-00010330: 6572 2e76 6965 7765 720a 0a20 2020 2020  er.viewer..     
-00010340: 2020 2023 2047 6574 7320 6120 646f 6375     # Gets a docu
-00010350: 6d65 6e74 2066 696c 6570 6174 680a 2020  ment filepath.  
-00010360: 2020 2020 2020 636f 6e66 6967 203d 2043        config = C
-00010370: 6f6e 6669 6728 636f 6e66 6967 5f70 6174  onfig(config_pat
-00010380: 683d 7365 6c66 2e63 6f6e 6669 675f 7061  h=self.config_pa
-00010390: 7468 290a 2020 2020 2020 2020 666f 6c64  th).        fold
-000103a0: 6572 203d 206f 732e 7061 7468 2e61 6273  er = os.path.abs
-000103b0: 7061 7468 280a 2020 2020 2020 2020 2020  path(.          
-000103c0: 2020 6f73 2e70 6174 682e 6a6f 696e 280a    os.path.join(.
-000103d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000103e0: 636f 6e66 6967 2e67 6574 5f6d 6961 5f70  config.get_mia_p
-000103f0: 6174 6828 292c 0a20 2020 2020 2020 2020  ath(),.         
-00010400: 2020 2020 2020 2022 6d69 6175 7464 6174         "miautdat
-00010410: 6122 2c0a 2020 2020 2020 2020 2020 2020  a",.            
-00010420: 2020 2020 2272 6573 6f75 7263 6573 222c      "resources",
-00010430: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010440: 2022 6d69 6122 2c0a 2020 2020 2020 2020   "mia",.        
-00010450: 2020 2020 2020 2020 2270 726f 6a65 6374          "project
-00010460: 5f38 222c 0a20 2020 2020 2020 2020 2020  _8",.           
-00010470: 2020 2020 2022 6461 7461 222c 0a20 2020       "data",.   
-00010480: 2020 2020 2020 2020 2020 2020 2022 7261               "ra
-00010490: 775f 6461 7461 222c 0a20 2020 2020 2020  w_data",.       
-000104a0: 2020 2020 2029 0a20 2020 2020 2020 2029       ).        )
-000104b0: 0a20 2020 2020 2020 204e 4949 5f46 494c  .        NII_FIL
-000104c0: 455f 3120 3d20 280a 2020 2020 2020 2020  E_1 = (.        
-000104d0: 2020 2020 2247 7565 7262 6574 2d43 362d      "Guerbet-C6-
-000104e0: 3230 3134 2d52 6174 2d4b 3532 2d54 7562  2014-Rat-K52-Tub
-000104f0: 6532 372d 3230 3134 2d30 322d 3134 3130  e27-2014-02-1410
-00010500: 3233 3137 2d30 342d 4733 5f22 0a20 2020  2317-04-G3_".   
-00010510: 2020 2020 2020 2020 2022 4775 6572 6265           "Guerbe
-00010520: 745f 4d44 4546 542d 4d44 4546 5470 766d  t_MDEFT-MDEFTpvm
-00010530: 2d30 3030 3934 305f 3830 302e 6e69 6922  -000940_800.nii"
-00010540: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00010550: 2020 2044 4f43 554d 454e 545f 3120 3d20     DOCUMENT_1 = 
-00010560: 6f73 2e70 6174 682e 6162 7370 6174 6828  os.path.abspath(
-00010570: 6f73 2e70 6174 682e 6a6f 696e 2866 6f6c  os.path.join(fol
-00010580: 6465 722c 204e 4949 5f46 494c 455f 3129  der, NII_FILE_1)
-00010590: 290a 0a20 2020 2020 2020 2023 2041 6464  )..        # Add
-000105a0: 7320 7468 6520 646f 6375 6d65 6e74 2074  s the document t
-000105b0: 6f20 7468 6520 6461 7461 2062 726f 7773  o the data brows
-000105c0: 6572 0a20 2020 2020 2020 2061 6464 5061  er.        addPa
-000105d0: 7468 203d 2050 6f70 5570 4164 6450 6174  th = PopUpAddPat
-000105e0: 6828 6461 7461 5f62 726f 7773 6572 2e70  h(data_browser.p
-000105f0: 726f 6a65 6374 2c20 6461 7461 5f62 726f  roject, data_bro
-00010600: 7773 6572 290a 2020 2020 2020 2020 6164  wser).        ad
-00010610: 6450 6174 682e 6669 6c65 5f6c 696e 655f  dPath.file_line_
-00010620: 6564 6974 2e73 6574 5465 7874 2844 4f43  edit.setText(DOC
-00010630: 554d 454e 545f 3129 0a20 2020 2020 2020  UMENT_1).       
-00010640: 2061 6464 5061 7468 2e73 6176 655f 7061   addPath.save_pa
-00010650: 7468 2829 0a0a 2020 2020 2020 2020 2320  th()..        # 
-00010660: 5365 6c65 6374 7320 7468 6520 646f 6375  Selects the docu
-00010670: 6d65 6e74 2069 6e20 7468 6520 6461 7461  ment in the data
-00010680: 2062 726f 7773 6572 0a20 2020 2020 2020   browser.       
-00010690: 2064 6174 615f 6272 6f77 7365 722e 7461   data_browser.ta
-000106a0: 626c 655f 6461 7461 2e69 7465 6d28 302c  ble_data.item(0,
-000106b0: 2030 292e 7365 7453 656c 6563 7465 6428   0).setSelected(
-000106c0: 5472 7565 290a 0a20 2020 2020 2020 2023  True)..        #
-000106d0: 204d 6f63 6b73 2074 6865 2065 7865 6375   Mocks the execu
-000106e0: 7469 6f6e 206f 6620 7468 6520 6469 616c  tion of the dial
-000106f0: 6f67 2077 696e 646f 770a 2020 2020 2020  og window.      
-00010700: 2020 506f 7055 7053 656c 6563 7454 6167    PopUpSelectTag
-00010710: 2e65 7865 635f 203d 204d 6f63 6b28 7265  .exec_ = Mock(re
-00010720: 7475 726e 5f76 616c 7565 3d54 7275 6529  turn_value=True)
-00010730: 0a0a 2020 2020 2020 2020 2320 4f70 656e  ..        # Open
-00010740: 7320 7468 6520 7461 6773 2070 6f70 2d75  s the tags pop-u
-00010750: 7020 616e 6420 6361 6e63 656c 2069 740a  p and cancel it.
-00010760: 2020 2020 2020 2020 7669 6577 6572 2e6f          viewer.o
-00010770: 7065 6e54 6167 7350 6f70 5570 2829 0a20  penTagsPopUp(). 
-00010780: 2020 2020 2020 2076 6965 7765 722e 706f         viewer.po
-00010790: 7055 702e 6361 6e63 656c 5f63 6c69 636b  pUp.cancel_click
-000107a0: 6564 2829 0a0a 2020 2020 2020 2020 2320  ed()..        # 
-000107b0: 4f70 656e 7320 7468 6520 7461 6773 2070  Opens the tags p
-000107c0: 6f70 2d75 700a 2020 2020 2020 2020 7669  op-up.        vi
-000107d0: 6577 6572 2e6f 7065 6e54 6167 7350 6f70  ewer.openTagsPop
-000107e0: 5570 2829 0a0a 2020 2020 2020 2020 2320  Up()..        # 
-000107f0: 5365 6172 6368 6573 2066 6f72 2061 6e20  Searches for an 
-00010800: 656d 7074 7920 7374 7269 6e67 0a20 2020  empty string.   
-00010810: 2020 2020 2076 6965 7765 722e 706f 7055       viewer.popU
-00010820: 702e 7365 6172 6368 5f73 7472 2822 2229  p.search_str("")
-00010830: 0a0a 2020 2020 2020 2020 2320 4173 7365  ..        # Asse
-00010840: 7274 7320 7468 6174 2062 6f74 6820 7468  rts that both th
-00010850: 6520 6669 7273 7420 616e 6420 7365 636f  e first and seco
-00010860: 6e64 2074 6167 7320 6172 6520 6e6f 7420  nd tags are not 
-00010870: 6869 6464 656e 0a20 2020 2020 2020 2073  hidden.        s
-00010880: 656c 662e 6173 7365 7274 4661 6c73 6528  elf.assertFalse(
-00010890: 7669 6577 6572 2e70 6f70 5570 2e6c 6973  viewer.popUp.lis
-000108a0: 745f 7769 6467 6574 5f74 6167 732e 6974  t_widget_tags.it
-000108b0: 656d 2830 292e 6973 4869 6464 656e 2829  em(0).isHidden()
-000108c0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-000108d0: 7373 6572 7446 616c 7365 2876 6965 7765  ssertFalse(viewe
-000108e0: 722e 706f 7055 702e 6c69 7374 5f77 6964  r.popUp.list_wid
-000108f0: 6765 745f 7461 6773 2e69 7465 6d28 3129  get_tags.item(1)
-00010900: 2e69 7348 6964 6465 6e28 2929 0a0a 2020  .isHidden())..  
-00010910: 2020 2020 2020 2320 5365 6172 6368 6573        # Searches
-00010920: 2066 6f72 2074 6865 2074 6167 2027 4578   for the tag 'Ex
-00010930: 7020 5479 7065 270a 2020 2020 2020 2020  p Type'.        
-00010940: 6461 7461 5f62 726f 7773 6572 2e76 6965  data_browser.vie
-00010950: 7765 722e 706f 7055 702e 7365 6172 6368  wer.popUp.search
-00010960: 5f73 7472 2822 4578 7020 5479 7065 2229  _str("Exp Type")
-00010970: 0a0a 2020 2020 2020 2020 2320 4173 7365  ..        # Asse
-00010980: 7274 7320 7468 6174 2074 6865 2073 6563  rts that the sec
-00010990: 6f6e 6420 7461 6720 6973 2068 6964 6465  ond tag is hidde
-000109a0: 6e2c 2074 6865 2066 6972 7374 2069 7320  n, the first is 
-000109b0: 6e6f 740a 2020 2020 2020 2020 7365 6c66  not.        self
-000109c0: 2e61 7373 6572 7446 616c 7365 2876 6965  .assertFalse(vie
-000109d0: 7765 722e 706f 7055 702e 6c69 7374 5f77  wer.popUp.list_w
-000109e0: 6964 6765 745f 7461 6773 2e69 7465 6d28  idget_tags.item(
-000109f0: 3029 2e69 7348 6964 6465 6e28 2929 0a20  0).isHidden()). 
-00010a00: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00010a10: 7274 5472 7565 2876 6965 7765 722e 706f  rtTrue(viewer.po
-00010a20: 7055 702e 6c69 7374 5f77 6964 6765 745f  pUp.list_widget_
-00010a30: 7461 6773 2e69 7465 6d28 3129 2e69 7348  tags.item(1).isH
-00010a40: 6964 6465 6e28 2929 0a0a 2020 2020 2020  idden())..      
-00010a50: 2020 2320 5365 6c65 6374 7320 6f6e 6520    # Selects one 
-00010a60: 7461 620a 2020 2020 2020 2020 6974 656d  tab.        item
-00010a70: 5f30 203d 2076 6965 7765 722e 706f 7055  _0 = viewer.popU
-00010a80: 702e 6c69 7374 5f77 6964 6765 745f 7461  p.list_widget_ta
-00010a90: 6773 2e69 7465 6d28 3029 0a20 2020 2020  gs.item(0).     
-00010aa0: 2020 2076 6965 7765 722e 706f 7055 702e     viewer.popUp.
-00010ab0: 6c69 7374 5f77 6964 6765 745f 7461 6773  list_widget_tags
-00010ac0: 2e69 7465 6d43 6c69 636b 6564 2e65 6d69  .itemClicked.emi
-00010ad0: 7428 6974 656d 5f30 290a 0a20 2020 2020  t(item_0)..     
-00010ae0: 2020 2076 6965 7765 722e 706f 7055 702e     viewer.popUp.
-00010af0: 6c69 7374 5f77 6964 6765 745f 7461 6773  list_widget_tags
-00010b00: 2e69 7465 6d28 3029 2e73 6574 4368 6563  .item(0).setChec
-00010b10: 6b53 7461 7465 2851 742e 4368 6563 6b65  kState(Qt.Checke
-00010b20: 6429 0a20 2020 2020 2020 2076 6965 7765  d).        viewe
-00010b30: 722e 706f 7055 702e 6f6b 5f63 6c69 636b  r.popUp.ok_click
-00010b40: 6564 2829 0a0a 2020 2020 6465 6620 7465  ed()..    def te
-00010b50: 7374 5f6f 7065 6e5f 7072 6f6a 6563 7428  st_open_project(
-00010b60: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
-00010b70: 2222 5465 7374 7320 7072 6f6a 6563 7420  ""Tests project 
-00010b80: 6f70 656e 696e 672e 2222 220a 0a20 2020  opening."""..   
-00010b90: 2020 2020 2070 726f 6a65 6374 5f38 5f70       project_8_p
-00010ba0: 6174 6820 3d20 7365 6c66 2e67 6574 5f6e  ath = self.get_n
-00010bb0: 6577 5f74 6573 745f 7072 6f6a 6563 7428  ew_test_project(
-00010bc0: 6e61 6d65 3d22 7072 6f6a 6563 745f 3822  name="project_8"
-00010bd0: 290a 2020 2020 2020 2020 7365 6c66 2e6d  ).        self.m
-00010be0: 6169 6e5f 7769 6e64 6f77 2e73 7769 7463  ain_window.switc
-00010bf0: 685f 7072 6f6a 6563 7428 7072 6f6a 6563  h_project(projec
-00010c00: 745f 385f 7061 7468 2c20 2270 726f 6a65  t_8_path, "proje
-00010c10: 6374 5f38 2229 0a0a 2020 2020 2020 2020  ct_8")..        
-00010c20: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00010c30: 2873 656c 662e 6d61 696e 5f77 696e 646f  (self.main_windo
-00010c40: 772e 7072 6f6a 6563 742e 6765 744e 616d  w.project.getNam
-00010c50: 6528 292c 2022 7072 6f6a 6563 745f 3822  e(), "project_8"
-00010c60: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-00010c70: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
-00010c80: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
-00010c90: 6e5f 7769 6e64 6f77 2e77 696e 646f 7754  n_window.windowT
-00010ca0: 6974 6c65 2829 2c0a 2020 2020 2020 2020  itle(),.        
-00010cb0: 2020 2020 224d 4941 202d 204d 756c 7469      "MIA - Multi
-00010cc0: 7061 7261 6d65 7472 6963 2049 6d61 6765  parametric Image
-00010cd0: 2041 6e61 6c79 7369 7322 2022 2028 4164   Analysis" " (Ad
-00010ce0: 6d69 6e20 6d6f 6465 2920 2d20 7072 6f6a  min mode) - proj
-00010cf0: 6563 745f 3822 2c0a 2020 2020 2020 2020  ect_8",.        
-00010d00: 290a 0a20 2020 2020 2020 2064 6f63 756d  )..        docum
-00010d10: 656e 7473 203d 2073 656c 662e 6d61 696e  ents = self.main
-00010d20: 5f77 696e 646f 772e 7072 6f6a 6563 742e  _window.project.
-00010d30: 7365 7373 696f 6e2e 6765 745f 646f 6375  session.get_docu
-00010d40: 6d65 6e74 735f 6e61 6d65 7328 0a20 2020  ments_names(.   
-00010d50: 2020 2020 2020 2020 2043 4f4c 4c45 4354           COLLECT
-00010d60: 494f 4e5f 4355 5252 454e 540a 2020 2020  ION_CURRENT.    
-00010d70: 2020 2020 290a 0a20 2020 2020 2020 2073      )..        s
-00010d80: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00010d90: 6c65 6e28 646f 6375 6d65 6e74 7329 2c20  len(documents), 
-00010da0: 3929 0a20 2020 2020 2020 2073 656c 662e  9).        self.
-00010db0: 6173 7365 7274 5472 7565 280a 2020 2020  assertTrue(.    
-00010dc0: 2020 2020 2020 2020 2264 6174 612f 7261          "data/ra
-00010dd0: 775f 6461 7461 2f47 7565 7262 6574 2d43  w_data/Guerbet-C
-00010de0: 362d 3230 3134 2d52 6174 2d4b 3532 2d54  6-2014-Rat-K52-T
-00010df0: 7562 6532 3722 0a20 2020 2020 2020 2020  ube27".         
-00010e00: 2020 2022 2d32 3031 342d 3032 2d31 3431     "-2014-02-141
-00010e10: 3032 3331 372d 3031 2d47 315f 4775 6572  02317-01-G1_Guer
-00010e20: 6265 745f 416e 6174 2d52 4152 4522 0a20  bet_Anat-RARE". 
-00010e30: 2020 2020 2020 2020 2020 2022 7076 6d2d             "pvm-
-00010e40: 3030 3032 3230 5f30 3030 2e6e 6969 2220  000220_000.nii" 
-00010e50: 696e 2064 6f63 756d 656e 7473 0a20 2020  in documents.   
-00010e60: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
-00010e70: 656c 662e 6173 7365 7274 5472 7565 280a  elf.assertTrue(.
-00010e80: 2020 2020 2020 2020 2020 2020 2264 6174              "dat
-00010e90: 612f 7261 775f 6461 7461 2f47 7565 7262  a/raw_data/Guerb
-00010ea0: 6574 2d43 362d 3230 3134 2d52 6174 2d4b  et-C6-2014-Rat-K
-00010eb0: 3532 2d54 7562 6532 3722 0a20 2020 2020  52-Tube27".     
-00010ec0: 2020 2020 2020 2022 2d32 3031 342d 3032         "-2014-02
-00010ed0: 2d31 3431 3032 3331 372d 3034 2d47 335f  -14102317-04-G3_
-00010ee0: 4775 6572 6265 745f 4d44 4546 542d 4d44  Guerbet_MDEFT-MD
-00010ef0: 4546 5422 0a20 2020 2020 2020 2020 2020  EFT".           
-00010f00: 2022 7076 6d2d 3030 3039 3430 5f38 3030   "pvm-000940_800
-00010f10: 2e6e 6969 2220 696e 2064 6f63 756d 656e  .nii" in documen
-00010f20: 7473 0a20 2020 2020 2020 2029 0a20 2020  ts.        ).   
-00010f30: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00010f40: 5472 7565 280a 2020 2020 2020 2020 2020  True(.          
-00010f50: 2020 2264 6174 612f 7261 775f 6461 7461    "data/raw_data
-00010f60: 2f47 7565 7262 6574 2d43 362d 3230 3134  /Guerbet-C6-2014
-00010f70: 2d52 6174 2d4b 3532 2d54 7562 6532 3722  -Rat-K52-Tube27"
-00010f80: 0a20 2020 2020 2020 2020 2020 2022 2d32  .            "-2
-00010f90: 3031 342d 3032 2d31 3431 3032 3331 372d  014-02-14102317-
-00010fa0: 3035 2d47 345f 4775 6572 6265 745f 5431  05-G4_Guerbet_T1
-00010fb0: 5345 5f38 3030 2d52 4152 4522 0a20 2020  SE_800-RARE".   
-00010fc0: 2020 2020 2020 2020 2022 7076 6d2d 3030           "pvm-00
-00010fd0: 3031 3432 5f34 3030 2e6e 6969 2220 696e  0142_400.nii" in
-00010fe0: 2064 6f63 756d 656e 7473 0a20 2020 2020   documents.     
-00010ff0: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
-00011000: 662e 6173 7365 7274 5472 7565 280a 2020  f.assertTrue(.  
-00011010: 2020 2020 2020 2020 2020 2264 6174 612f            "data/
-00011020: 7261 775f 6461 7461 2f47 7565 7262 6574  raw_data/Guerbet
-00011030: 2d43 362d 3230 3134 2d52 6174 2d4b 3532  -C6-2014-Rat-K52
-00011040: 2d54 7562 6532 3722 0a20 2020 2020 2020  -Tube27".       
-00011050: 2020 2020 2022 2d32 3031 342d 3032 2d31       "-2014-02-1
-00011060: 3431 3032 3331 372d 3036 2d47 345f 4775  4102317-06-G4_Gu
-00011070: 6572 6265 745f 5431 5345 5f38 3030 2d52  erbet_T1SE_800-R
-00011080: 4152 4522 0a20 2020 2020 2020 2020 2020  ARE".           
-00011090: 2022 7076 6d2d 3030 3031 3432 5f34 3030   "pvm-000142_400
-000110a0: 2e6e 6969 2220 696e 2064 6f63 756d 656e  .nii" in documen
-000110b0: 7473 0a20 2020 2020 2020 2029 0a20 2020  ts.        ).   
-000110c0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-000110d0: 5472 7565 280a 2020 2020 2020 2020 2020  True(.          
-000110e0: 2020 2264 6174 612f 7261 775f 6461 7461    "data/raw_data
-000110f0: 2f47 7565 7262 6574 2d43 362d 3230 3134  /Guerbet-C6-2014
-00011100: 2d52 6174 2d4b 3532 2d54 7562 6532 3722  -Rat-K52-Tube27"
-00011110: 0a20 2020 2020 2020 2020 2020 2022 2d32  .            "-2
-00011120: 3031 342d 3032 2d31 3431 3032 3331 372d  014-02-14102317-
-00011130: 3038 2d47 345f 4775 6572 6265 745f 5431  08-G4_Guerbet_T1
-00011140: 5345 5f38 3030 2d52 4152 4522 0a20 2020  SE_800-RARE".   
-00011150: 2020 2020 2020 2020 2022 7076 6d2d 3030           "pvm-00
-00011160: 3031 3432 5f34 3030 2e6e 6969 2220 696e  0142_400.nii" in
-00011170: 2064 6f63 756d 656e 7473 0a20 2020 2020   documents.     
-00011180: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
-00011190: 662e 6173 7365 7274 5472 7565 280a 2020  f.assertTrue(.  
-000111a0: 2020 2020 2020 2020 2020 2264 6174 612f            "data/
-000111b0: 7261 775f 6461 7461 2f47 7565 7262 6574  raw_data/Guerbet
-000111c0: 2d43 362d 3230 3134 2d52 6174 2d4b 3532  -C6-2014-Rat-K52
-000111d0: 2d54 7562 6532 3722 0a20 2020 2020 2020  -Tube27".       
-000111e0: 2020 2020 2022 2d32 3031 342d 3032 2d31       "-2014-02-1
-000111f0: 3431 3032 3331 372d 3039 2d47 345f 4775  4102317-09-G4_Gu
-00011200: 6572 6265 745f 5431 5345 5f38 3030 2d52  erbet_T1SE_800-R
-00011210: 4152 4522 0a20 2020 2020 2020 2020 2020  ARE".           
-00011220: 2022 7076 6d2d 3030 3031 3432 5f34 3030   "pvm-000142_400
-00011230: 2e6e 6969 2220 696e 2064 6f63 756d 656e  .nii" in documen
-00011240: 7473 0a20 2020 2020 2020 2029 0a20 2020  ts.        ).   
-00011250: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00011260: 5472 7565 280a 2020 2020 2020 2020 2020  True(.          
-00011270: 2020 2264 6174 612f 7261 775f 6461 7461    "data/raw_data
-00011280: 2f47 7565 7262 6574 2d43 362d 3230 3134  /Guerbet-C6-2014
-00011290: 2d52 6174 2d4b 3532 2d54 7562 6532 3722  -Rat-K52-Tube27"
-000112a0: 0a20 2020 2020 2020 2020 2020 2022 2d32  .            "-2
-000112b0: 3031 342d 3032 2d31 3431 3032 3331 372d  014-02-14102317-
-000112c0: 3130 2d47 335f 4775 6572 6265 745f 4d44  10-G3_Guerbet_MD
-000112d0: 4546 542d 4d44 4546 5422 0a20 2020 2020  EFT-MDEFT".     
-000112e0: 2020 2020 2020 2022 7076 6d2d 3030 3039         "pvm-0009
-000112f0: 3430 5f38 3030 2e6e 6969 2220 696e 2064  40_800.nii" in d
-00011300: 6f63 756d 656e 7473 0a20 2020 2020 2020  ocuments.       
-00011310: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
-00011320: 6173 7365 7274 5472 7565 280a 2020 2020  assertTrue(.    
-00011330: 2020 2020 2020 2020 2264 6174 612f 7261          "data/ra
-00011340: 775f 6461 7461 2f47 7565 7262 6574 2d43  w_data/Guerbet-C
-00011350: 362d 3230 3134 2d52 6174 2d4b 3532 2d54  6-2014-Rat-K52-T
-00011360: 7562 6532 3722 0a20 2020 2020 2020 2020  ube27".         
-00011370: 2020 2022 2d32 3031 342d 3032 2d31 3431     "-2014-02-141
-00011380: 3032 3331 372d 3131 2d47 345f 4775 6572  02317-11-G4_Guer
-00011390: 6265 745f 5431 5345 5f38 3030 2d52 4152  bet_T1SE_800-RAR
-000113a0: 4522 0a20 2020 2020 2020 2020 2020 2022  E".            "
-000113b0: 7076 6d2d 3030 3031 3432 5f34 3030 2e6e  pvm-000142_400.n
-000113c0: 6969 2220 696e 2064 6f63 756d 656e 7473  ii" in documents
-000113d0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-000113e0: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-000113f0: 7565 280a 2020 2020 2020 2020 2020 2020  ue(.            
-00011400: 2264 6174 612f 6465 7269 7665 645f 6461  "data/derived_da
-00011410: 7461 2f73 4775 6572 6265 742d 4336 2d32  ta/sGuerbet-C6-2
-00011420: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
-00011430: 3237 220a 2020 2020 2020 2020 2020 2020  27".            
-00011440: 222d 3230 3134 2d30 322d 3134 3130 3233  "-2014-02-141023
-00011450: 3137 2d30 312d 4731 5f47 7565 7262 6574  17-01-G1_Guerbet
-00011460: 5f41 6e61 742d 5241 5245 220a 2020 2020  _Anat-RARE".    
-00011470: 2020 2020 2020 2020 2270 766d 2d30 3030          "pvm-000
-00011480: 3232 305f 3030 302e 6e69 6922 2069 6e20  220_000.nii" in 
-00011490: 646f 6375 6d65 6e74 730a 2020 2020 2020  documents.      
-000114a0: 2020 290a 2020 2020 2020 2020 646f 6375    ).        docu
-000114b0: 6d65 6e74 7320 3d20 7365 6c66 2e6d 6169  ments = self.mai
-000114c0: 6e5f 7769 6e64 6f77 2e70 726f 6a65 6374  n_window.project
-000114d0: 2e73 6573 7369 6f6e 2e67 6574 5f64 6f63  .session.get_doc
-000114e0: 756d 656e 7473 5f6e 616d 6573 280a 2020  uments_names(.  
-000114f0: 2020 2020 2020 2020 2020 434f 4c4c 4543            COLLEC
-00011500: 5449 4f4e 5f49 4e49 5449 414c 0a20 2020  TION_INITIAL.   
-00011510: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
-00011520: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00011530: 6c65 6e28 646f 6375 6d65 6e74 7329 2c20  len(documents), 
-00011540: 3929 0a20 2020 2020 2020 2073 656c 662e  9).        self.
-00011550: 6173 7365 7274 5472 7565 280a 2020 2020  assertTrue(.    
-00011560: 2020 2020 2020 2020 2264 6174 612f 7261          "data/ra
-00011570: 775f 6461 7461 2f47 7565 7262 6574 2d43  w_data/Guerbet-C
-00011580: 362d 3230 3134 2d52 6174 2d4b 3532 2d54  6-2014-Rat-K52-T
-00011590: 7562 6532 3722 0a20 2020 2020 2020 2020  ube27".         
-000115a0: 2020 2022 2d32 3031 342d 3032 2d31 3431     "-2014-02-141
-000115b0: 3032 3331 372d 3031 2d47 315f 4775 6572  02317-01-G1_Guer
-000115c0: 6265 745f 416e 6174 2d52 4152 4522 0a20  bet_Anat-RARE". 
-000115d0: 2020 2020 2020 2020 2020 2022 7076 6d2d             "pvm-
-000115e0: 3030 3032 3230 5f30 3030 2e6e 6969 2220  000220_000.nii" 
-000115f0: 696e 2064 6f63 756d 656e 7473 0a20 2020  in documents.   
-00011600: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
-00011610: 656c 662e 6173 7365 7274 5472 7565 280a  elf.assertTrue(.
-00011620: 2020 2020 2020 2020 2020 2020 2264 6174              "dat
-00011630: 612f 7261 775f 6461 7461 2f47 7565 7262  a/raw_data/Guerb
-00011640: 6574 2d43 362d 3230 3134 2d52 6174 2d4b  et-C6-2014-Rat-K
-00011650: 3532 2d54 7562 6532 3722 0a20 2020 2020  52-Tube27".     
-00011660: 2020 2020 2020 2022 2d32 3031 342d 3032         "-2014-02
-00011670: 2d31 3431 3032 3331 372d 3034 2d47 335f  -14102317-04-G3_
-00011680: 4775 6572 6265 745f 4d44 4546 542d 4d44  Guerbet_MDEFT-MD
-00011690: 4546 5422 0a20 2020 2020 2020 2020 2020  EFT".           
-000116a0: 2022 7076 6d2d 3030 3039 3430 5f38 3030   "pvm-000940_800
-000116b0: 2e6e 6969 2220 696e 2064 6f63 756d 656e  .nii" in documen
-000116c0: 7473 0a20 2020 2020 2020 2029 0a20 2020  ts.        ).   
-000116d0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-000116e0: 5472 7565 280a 2020 2020 2020 2020 2020  True(.          
-000116f0: 2020 2264 6174 612f 7261 775f 6461 7461    "data/raw_data
-00011700: 2f47 7565 7262 6574 2d43 362d 3230 3134  /Guerbet-C6-2014
-00011710: 2d52 6174 2d4b 3532 2d54 7562 6532 3722  -Rat-K52-Tube27"
-00011720: 0a20 2020 2020 2020 2020 2020 2022 2d32  .            "-2
-00011730: 3031 342d 3032 2d31 3431 3032 3331 372d  014-02-14102317-
-00011740: 3035 2d47 345f 4775 6572 6265 745f 5431  05-G4_Guerbet_T1
-00011750: 5345 5f38 3030 2d52 4152 4522 0a20 2020  SE_800-RARE".   
-00011760: 2020 2020 2020 2020 2022 7076 6d2d 3030           "pvm-00
-00011770: 3031 3432 5f34 3030 2e6e 6969 2220 696e  0142_400.nii" in
-00011780: 2064 6f63 756d 656e 7473 0a20 2020 2020   documents.     
-00011790: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
-000117a0: 662e 6173 7365 7274 5472 7565 280a 2020  f.assertTrue(.  
-000117b0: 2020 2020 2020 2020 2020 2264 6174 612f            "data/
-000117c0: 7261 775f 6461 7461 2f47 7565 7262 6574  raw_data/Guerbet
-000117d0: 2d43 362d 3230 3134 2d52 6174 2d4b 3532  -C6-2014-Rat-K52
-000117e0: 2d54 7562 6532 3722 0a20 2020 2020 2020  -Tube27".       
-000117f0: 2020 2020 2022 2d32 3031 342d 3032 2d31       "-2014-02-1
-00011800: 3431 3032 3331 372d 3036 2d47 345f 4775  4102317-06-G4_Gu
-00011810: 6572 6265 745f 5431 5345 5f38 3030 2d52  erbet_T1SE_800-R
-00011820: 4152 4522 0a20 2020 2020 2020 2020 2020  ARE".           
-00011830: 2022 7076 6d2d 3030 3031 3432 5f34 3030   "pvm-000142_400
-00011840: 2e6e 6969 2220 696e 2064 6f63 756d 656e  .nii" in documen
-00011850: 7473 0a20 2020 2020 2020 2029 0a20 2020  ts.        ).   
-00011860: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00011870: 5472 7565 280a 2020 2020 2020 2020 2020  True(.          
-00011880: 2020 2264 6174 612f 7261 775f 6461 7461    "data/raw_data
-00011890: 2f47 7565 7262 6574 2d43 362d 3230 3134  /Guerbet-C6-2014
-000118a0: 2d52 6174 2d4b 3532 2d54 7562 6532 3722  -Rat-K52-Tube27"
-000118b0: 0a20 2020 2020 2020 2020 2020 2022 2d32  .            "-2
-000118c0: 3031 342d 3032 2d31 3431 3032 3331 372d  014-02-14102317-
-000118d0: 3038 2d47 345f 4775 6572 6265 745f 5431  08-G4_Guerbet_T1
-000118e0: 5345 5f38 3030 2d52 4152 4522 0a20 2020  SE_800-RARE".   
-000118f0: 2020 2020 2020 2020 2022 7076 6d2d 3030           "pvm-00
-00011900: 3031 3432 5f34 3030 2e6e 6969 2220 696e  0142_400.nii" in
-00011910: 2064 6f63 756d 656e 7473 0a20 2020 2020   documents.     
-00011920: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
-00011930: 662e 6173 7365 7274 5472 7565 280a 2020  f.assertTrue(.  
-00011940: 2020 2020 2020 2020 2020 2264 6174 612f            "data/
-00011950: 7261 775f 6461 7461 2f47 7565 7262 6574  raw_data/Guerbet
-00011960: 2d43 362d 3230 3134 2d52 6174 2d4b 3532  -C6-2014-Rat-K52
-00011970: 2d54 7562 6532 3722 0a20 2020 2020 2020  -Tube27".       
-00011980: 2020 2020 2022 2d32 3031 342d 3032 2d31       "-2014-02-1
-00011990: 3431 3032 3331 372d 3039 2d47 345f 4775  4102317-09-G4_Gu
-000119a0: 6572 6265 745f 5431 5345 5f38 3030 2d52  erbet_T1SE_800-R
-000119b0: 4152 4522 0a20 2020 2020 2020 2020 2020  ARE".           
-000119c0: 2022 7076 6d2d 3030 3031 3432 5f34 3030   "pvm-000142_400
-000119d0: 2e6e 6969 2220 696e 2064 6f63 756d 656e  .nii" in documen
-000119e0: 7473 0a20 2020 2020 2020 2029 0a20 2020  ts.        ).   
-000119f0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00011a00: 5472 7565 280a 2020 2020 2020 2020 2020  True(.          
-00011a10: 2020 2264 6174 612f 7261 775f 6461 7461    "data/raw_data
-00011a20: 2f47 7565 7262 6574 2d43 362d 3230 3134  /Guerbet-C6-2014
-00011a30: 2d52 6174 2d4b 3532 2d54 7562 6532 3722  -Rat-K52-Tube27"
-00011a40: 0a20 2020 2020 2020 2020 2020 2022 2d32  .            "-2
-00011a50: 3031 342d 3032 2d31 3431 3032 3331 372d  014-02-14102317-
-00011a60: 3130 2d47 335f 4775 6572 6265 745f 4d44  10-G3_Guerbet_MD
-00011a70: 4546 542d 4d44 4546 5422 0a20 2020 2020  EFT-MDEFT".     
-00011a80: 2020 2020 2020 2022 7076 6d2d 3030 3039         "pvm-0009
-00011a90: 3430 5f38 3030 2e6e 6969 2220 696e 2064  40_800.nii" in d
-00011aa0: 6f63 756d 656e 7473 0a20 2020 2020 2020  ocuments.       
-00011ab0: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
-00011ac0: 6173 7365 7274 5472 7565 280a 2020 2020  assertTrue(.    
-00011ad0: 2020 2020 2020 2020 2264 6174 612f 7261          "data/ra
-00011ae0: 775f 6461 7461 2f47 7565 7262 6574 2d43  w_data/Guerbet-C
-00011af0: 362d 3230 3134 2d52 6174 2d4b 3532 2d54  6-2014-Rat-K52-T
-00011b00: 7562 6532 3722 0a20 2020 2020 2020 2020  ube27".         
-00011b10: 2020 2022 2d32 3031 342d 3032 2d31 3431     "-2014-02-141
-00011b20: 3032 3331 372d 3131 2d47 345f 4775 6572  02317-11-G4_Guer
-00011b30: 6265 745f 5431 5345 5f38 3030 2d52 4152  bet_T1SE_800-RAR
-00011b40: 4522 0a20 2020 2020 2020 2020 2020 2022  E".            "
-00011b50: 7076 6d2d 3030 3031 3432 5f34 3030 2e6e  pvm-000142_400.n
-00011b60: 6969 2220 696e 2064 6f63 756d 656e 7473  ii" in documents
-00011b70: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00011b80: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-00011b90: 7565 280a 2020 2020 2020 2020 2020 2020  ue(.            
-00011ba0: 2264 6174 612f 6465 7269 7665 645f 6461  "data/derived_da
-00011bb0: 7461 2f73 4775 6572 6265 742d 4336 2d32  ta/sGuerbet-C6-2
-00011bc0: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
-00011bd0: 3237 220a 2020 2020 2020 2020 2020 2020  27".            
-00011be0: 222d 3230 3134 2d30 322d 3134 3130 3233  "-2014-02-141023
-00011bf0: 3137 2d30 312d 4731 5f47 7565 7262 6574  17-01-G1_Guerbet
-00011c00: 5f41 6e61 742d 5241 5245 220a 2020 2020  _Anat-RARE".    
-00011c10: 2020 2020 2020 2020 2270 766d 2d30 3030          "pvm-000
-00011c20: 3232 305f 3030 302e 6e69 6922 2069 6e20  220_000.nii" in 
-00011c30: 646f 6375 6d65 6e74 730a 2020 2020 2020  documents.      
-00011c40: 2020 290a 0a20 2020 2064 6566 2074 6573    )..    def tes
-00011c50: 745f 7072 6f6a 6563 745f 6669 6c74 6572  t_project_filter
-00011c60: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-00011c70: 2222 2243 7265 6174 6573 2061 2070 726f  """Creates a pro
-00011c80: 6a65 6374 2c20 7361 7665 7320 6120 6669  ject, saves a fi
-00011c90: 6c74 6572 2061 6e64 206f 7065 6e73 2069  lter and opens i
-00011ca0: 742e 0a0a 2020 2020 2020 2020 2d20 5465  t...        - Te
-00011cb0: 7374 733a 0a20 2020 2020 2020 2020 2020  sts:.           
-00011cc0: 202d 2044 6174 6142 726f 7773 6572 2e6f   - DataBrowser.o
-00011cd0: 7065 6e5f 706f 7075 700a 2020 2020 2020  pen_popup.      
-00011ce0: 2020 2020 2020 2d20 5072 6f6a 6563 742e        - Project.
-00011cf0: 7361 7665 5f63 7572 7265 6e74 5f66 696c  save_current_fil
-00011d00: 7465 720a 0a20 2020 2020 2020 202d 204d  ter..        - M
-00011d10: 6f63 6b73 3a0a 2020 2020 2020 2020 2020  ocks:.          
-00011d20: 202d 2051 4d65 7373 6167 6542 6f78 2e65   - QMessageBox.e
-00011d30: 7865 630a 2020 2020 2020 2020 2020 202d  xec.           -
-00011d40: 2051 496e 7075 7444 6961 6c6f 672e 6765   QInputDialog.ge
-00011d50: 7454 6578 740a 2020 2020 2020 2020 2222  tText.        ""
-00011d60: 220a 0a20 2020 2020 2020 2074 6573 745f  "..        test_
-00011d70: 7072 6f6a 6563 745f 7061 7468 203d 2073  project_path = s
-00011d80: 656c 662e 6765 745f 6e65 775f 7465 7374  elf.get_new_test
-00011d90: 5f70 726f 6a65 6374 286c 6967 6874 3d54  _project(light=T
-00011da0: 7275 6529 0a20 2020 2020 2020 2073 656c  rue).        sel
-00011db0: 662e 6d61 696e 5f77 696e 646f 772e 7377  f.main_window.sw
-00011dc0: 6974 6368 5f70 726f 6a65 6374 2874 6573  itch_project(tes
-00011dd0: 745f 7072 6f6a 6563 745f 7061 7468 2c20  t_project_path, 
-00011de0: 2274 6573 745f 7072 6f6a 6563 7422 290a  "test_project").
-00011df0: 0a20 2020 2020 2020 2023 204d 6f63 6b73  .        # Mocks
-00011e00: 2074 6865 2065 7865 6375 7469 6f6e 206f   the execution o
-00011e10: 6620 6120 6469 616c 6f67 2062 6f78 0a20  f a dialog box. 
-00011e20: 2020 2020 2020 2051 4d65 7373 6167 6542         QMessageB
-00011e30: 6f78 2e65 7865 6320 3d20 6c61 6d62 6461  ox.exec = lambda
-00011e40: 202a 6172 673a 204e 6f6e 650a 0a20 2020   *arg: None..   
-00011e50: 2020 2020 2023 2053 6176 6573 2074 6865       # Saves the
-00011e60: 2063 7572 7265 6e74 2066 696c 7465 7220   current filter 
-00011e70: 6173 2027 6669 6c74 6572 5f31 270a 2020  as 'filter_1'.  
-00011e80: 2020 2020 2020 5149 6e70 7574 4469 616c        QInputDial
-00011e90: 6f67 2e67 6574 5465 7874 203d 206c 616d  og.getText = lam
-00011ea0: 6264 6120 2a61 7267 763a 2028 2266 696c  bda *argv: ("fil
-00011eb0: 7465 725f 3122 2c20 5472 7565 290a 2020  ter_1", True).  
-00011ec0: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-00011ed0: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
-00011ee0: 7365 722e 7361 7665 5f66 696c 7465 725f  ser.save_filter_
-00011ef0: 6163 7469 6f6e 2e74 7269 6767 6572 2829  action.trigger()
-00011f00: 0a0a 2020 2020 2020 2020 2320 5472 6965  ..        # Trie
-00011f10: 7320 746f 2073 6176 6520 6974 2061 6761  s to save it aga
-00011f20: 696e 2062 7920 7468 6520 7361 6d65 206e  in by the same n
-00011f30: 616d 650a 2020 2020 2020 2020 7365 6c66  ame.        self
-00011f40: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
-00011f50: 615f 6272 6f77 7365 722e 7361 7665 5f66  a_browser.save_f
-00011f60: 696c 7465 725f 6163 7469 6f6e 2e74 7269  ilter_action.tri
-00011f70: 6767 6572 2829 0a0a 2020 2020 2020 2020  gger()..        
-00011f80: 2320 4f70 656e 7320 7468 6520 7361 7665  # Opens the save
-00011f90: 6420 6669 6c74 6572 7320 706f 702d 7570  d filters pop-up
-00011fa0: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
-00011fb0: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
-00011fc0: 726f 7773 6572 2e6f 7065 6e5f 6669 6c74  rowser.open_filt
-00011fd0: 6572 5f61 6374 696f 6e2e 7472 6967 6765  er_action.trigge
-00011fe0: 7228 290a 2020 2020 2020 2020 6f70 656e  r().        open
-00011ff0: 5f70 6f70 7570 203d 2073 656c 662e 6d61  _popup = self.ma
-00012000: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
-00012010: 726f 7773 6572 2e70 6f70 5570 0a0a 2020  rowser.popUp..  
-00012020: 2020 2020 2020 2320 436c 6f73 6573 2074        # Closes t
-00012030: 6865 2070 6f70 2d75 7020 616e 6420 7265  he pop-up and re
-00012040: 2d6f 7065 6e73 2069 740a 2020 2020 2020  -opens it.      
-00012050: 2020 6f70 656e 5f70 6f70 7570 2e63 616e    open_popup.can
-00012060: 6365 6c5f 636c 6963 6b65 6428 290a 2020  cel_clicked().  
-00012070: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-00012080: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
-00012090: 7365 722e 6f70 656e 5f66 696c 7465 725f  ser.open_filter_
-000120a0: 6163 7469 6f6e 2e74 7269 6767 6572 2829  action.trigger()
-000120b0: 0a0a 2020 2020 2020 2020 2320 5472 6965  ..        # Trie
-000120c0: 7320 746f 2073 6561 7263 6820 666f 7220  s to search for 
-000120d0: 616e 2065 6d70 7479 2073 7472 696e 670a  an empty string.
-000120e0: 2020 2020 2020 2020 6f70 656e 5f70 6f70          open_pop
-000120f0: 7570 2e73 6561 7263 685f 7374 7228 2222  up.search_str(""
-00012100: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-00012110: 7373 6572 7446 616c 7365 286f 7065 6e5f  ssertFalse(open_
-00012120: 706f 7075 702e 6c69 7374 5f77 6964 6765  popup.list_widge
-00012130: 745f 6669 6c74 6572 732e 6974 656d 2830  t_filters.item(0
-00012140: 292e 6973 4869 6464 656e 2829 290a 0a20  ).isHidden()).. 
-00012150: 2020 2020 2020 2023 2054 7269 6573 2074         # Tries t
-00012160: 6f20 7365 6172 6368 2066 6f72 2061 206e  o search for a n
-00012170: 6f6e 2d65 7869 7374 656e 7420 6669 6c74  on-existent filt
-00012180: 6572 0a20 2020 2020 2020 206f 7065 6e5f  er.        open_
-00012190: 706f 7075 702e 7365 6172 6368 5f73 7472  popup.search_str
-000121a0: 2822 6669 6c74 6572 5f32 2229 0a20 2020  ("filter_2").   
-000121b0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-000121c0: 5472 7565 286f 7065 6e5f 706f 7075 702e  True(open_popup.
-000121d0: 6c69 7374 5f77 6964 6765 745f 6669 6c74  list_widget_filt
-000121e0: 6572 732e 6974 656d 2830 292e 6973 4869  ers.item(0).isHi
-000121f0: 6464 656e 2829 290a 0a20 2020 2020 2020  dden())..       
-00012200: 2023 2054 7269 6573 2074 6f20 7365 6172   # Tries to sear
-00012210: 6368 2066 6f72 2061 6e20 6578 6973 7469  ch for an existi
-00012220: 6e67 2066 696c 7465 720a 2020 2020 2020  ng filter.      
-00012230: 2020 6f70 656e 5f70 6f70 7570 2e73 6561    open_popup.sea
-00012240: 7263 685f 7374 7228 2266 696c 7465 725f  rch_str("filter_
-00012250: 3122 290a 2020 2020 2020 2020 7365 6c66  1").        self
-00012260: 2e61 7373 6572 7446 616c 7365 286f 7065  .assertFalse(ope
-00012270: 6e5f 706f 7075 702e 6c69 7374 5f77 6964  n_popup.list_wid
-00012280: 6765 745f 6669 6c74 6572 732e 6974 656d  get_filters.item
-00012290: 2830 292e 6973 4869 6464 656e 2829 290a  (0).isHidden()).
-000122a0: 0a20 2020 2020 2020 206f 7065 6e5f 706f  .        open_po
-000122b0: 7075 702e 6c69 7374 5f77 6964 6765 745f  pup.list_widget_
-000122c0: 6669 6c74 6572 732e 6974 656d 2830 292e  filters.item(0).
-000122d0: 7365 7453 656c 6563 7465 6428 5472 7565  setSelected(True
-000122e0: 290a 2020 2020 2020 2020 2320 5154 6573  ).        # QTes
-000122f0: 742e 6d6f 7573 6543 6c69 636b 286f 7065  t.mouseClick(ope
-00012300: 6e5f 706f 7075 702e 7075 7368 5f62 7574  n_popup.push_but
-00012310: 746f 6e5f 6f6b 2c20 5174 2e4c 6566 7442  ton_ok, Qt.LeftB
-00012320: 7574 746f 6e29 0a20 2020 2020 2020 206f  utton).        o
-00012330: 7065 6e5f 706f 7075 702e 7075 7368 5f62  pen_popup.push_b
-00012340: 7574 746f 6e5f 6f6b 2e63 6c69 636b 6564  utton_ok.clicked
-00012350: 2e65 6d69 7428 290a 0a20 2020 2020 2020  .emit()..       
-00012360: 2073 6361 6e73 5f64 6973 706c 6179 6564   scans_displayed
-00012370: 203d 205b 5d0a 0a20 2020 2020 2020 2066   = []..        f
-00012380: 6f72 2072 6f77 2069 6e20 7261 6e67 6528  or row in range(
-00012390: 0a20 2020 2020 2020 2020 2020 2030 2c20  .            0, 
-000123a0: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-000123b0: 2e64 6174 615f 6272 6f77 7365 722e 7461  .data_browser.ta
-000123c0: 626c 655f 6461 7461 2e72 6f77 436f 756e  ble_data.rowCoun
-000123d0: 7428 290a 2020 2020 2020 2020 293a 0a20  t().        ):. 
-000123e0: 2020 2020 2020 2020 2020 2069 7465 6d20             item 
-000123f0: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
-00012400: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
-00012410: 7461 626c 655f 6461 7461 2e69 7465 6d28  table_data.item(
-00012420: 726f 772c 2030 290a 2020 2020 2020 2020  row, 0).        
-00012430: 2020 2020 7363 616e 5f6e 616d 6520 3d20      scan_name = 
-00012440: 6974 656d 2e74 6578 7428 290a 0a20 2020  item.text()..   
-00012450: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-00012460: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00012470: 2e64 6174 615f 6272 6f77 7365 722e 7461  .data_browser.ta
-00012480: 626c 655f 6461 7461 2e69 7352 6f77 4869  ble_data.isRowHi
-00012490: 6464 656e 2872 6f77 293a 0a20 2020 2020  dden(row):.     
-000124a0: 2020 2020 2020 2020 2020 2073 6361 6e73             scans
-000124b0: 5f64 6973 706c 6179 6564 2e61 7070 656e  _displayed.appen
-000124c0: 6428 7363 616e 5f6e 616d 6529 0a0a 2020  d(scan_name)..  
-000124d0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-000124e0: 7445 7175 616c 286c 656e 2873 6361 6e73  tEqual(len(scans
-000124f0: 5f64 6973 706c 6179 6564 292c 2033 290a  _displayed), 3).
-00012500: 0a20 2020 2064 6566 2074 6573 745f 7072  .    def test_pr
-00012510: 6f6a 6563 745f 7072 6f70 6572 7469 6573  oject_properties
-00012520: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-00012530: 2222 2254 6573 7473 2073 6176 6564 2070  """Tests saved p
-00012540: 726f 6a65 6374 7320 6164 6469 7469 6f6e  rojects addition
-00012550: 2061 6e64 2072 656d 6f76 616c 2e22 2222   and removal."""
-00012560: 0a0a 2020 2020 2020 2020 7361 7665 645f  ..        saved_
-00012570: 7072 6f6a 6563 7473 203d 2073 656c 662e  projects = self.
-00012580: 6d61 696e 5f77 696e 646f 772e 7361 7665  main_window.save
-00012590: 645f 7072 6f6a 6563 7473 0a20 2020 2020  d_projects.     
-000125a0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-000125b0: 7561 6c28 7361 7665 645f 7072 6f6a 6563  ual(saved_projec
-000125c0: 7473 2e70 6174 6873 4c69 7374 2c20 5b5d  ts.pathsList, []
-000125d0: 290a 0a20 2020 2020 2020 2063 6f6e 6669  )..        confi
-000125e0: 6720 3d20 436f 6e66 6967 2863 6f6e 6669  g = Config(confi
-000125f0: 675f 7061 7468 3d73 656c 662e 636f 6e66  g_path=self.conf
-00012600: 6967 5f70 6174 6829 0a20 2020 2020 2020  ig_path).       
-00012610: 2070 726f 6a65 6374 5f38 5f70 6174 6820   project_8_path 
-00012620: 3d20 7365 6c66 2e67 6574 5f6e 6577 5f74  = self.get_new_t
-00012630: 6573 745f 7072 6f6a 6563 7428 290a 0a20  est_project().. 
-00012640: 2020 2020 2020 206f 732e 7265 6d6f 7665         os.remove
-00012650: 286f 732e 7061 7468 2e6a 6f69 6e28 636f  (os.path.join(co
-00012660: 6e66 6967 2e67 6574 5f63 6f6e 6669 675f  nfig.get_config_
-00012670: 7061 7468 2829 2c20 2273 6176 6564 5f70  path(), "saved_p
-00012680: 726f 6a65 6374 732e 796d 6c22 2929 0a0a  rojects.yml"))..
-00012690: 2020 2020 2020 2020 7361 7665 645f 7072          saved_pr
-000126a0: 6f6a 6563 7473 203d 2053 6176 6564 5072  ojects = SavedPr
-000126b0: 6f6a 6563 7473 2829 0a20 2020 2020 2020  ojects().       
-000126c0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-000126d0: 6c28 7361 7665 645f 7072 6f6a 6563 7473  l(saved_projects
-000126e0: 2e70 6174 6873 4c69 7374 2c20 5b5d 290a  .pathsList, []).
-000126f0: 0a20 2020 2020 2020 2073 6176 6564 5f70  .        saved_p
-00012700: 726f 6a65 6374 732e 6164 6453 6176 6564  rojects.addSaved
-00012710: 5072 6f6a 6563 7428 7072 6f6a 6563 745f  Project(project_
-00012720: 385f 7061 7468 290a 2020 2020 2020 2020  8_path).        
-00012730: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00012740: 2873 6176 6564 5f70 726f 6a65 6374 732e  (saved_projects.
-00012750: 7061 7468 734c 6973 742c 205b 7072 6f6a  pathsList, [proj
-00012760: 6563 745f 385f 7061 7468 5d29 0a0a 2020  ect_8_path])..  
-00012770: 2020 2020 2020 7361 7665 645f 7072 6f6a        saved_proj
-00012780: 6563 7473 2e61 6464 5361 7665 6450 726f  ects.addSavedPro
-00012790: 6a65 6374 2822 2f68 6f6d 6522 290a 2020  ject("/home").  
-000127a0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-000127b0: 7445 7175 616c 2873 6176 6564 5f70 726f  tEqual(saved_pro
-000127c0: 6a65 6374 732e 7061 7468 734c 6973 742c  jects.pathsList,
-000127d0: 205b 222f 686f 6d65 222c 2070 726f 6a65   ["/home", proje
-000127e0: 6374 5f38 5f70 6174 685d 290a 0a20 2020  ct_8_path])..   
-000127f0: 2020 2020 2073 6176 6564 5f70 726f 6a65       saved_proje
-00012800: 6374 732e 6164 6453 6176 6564 5072 6f6a  cts.addSavedProj
-00012810: 6563 7428 7072 6f6a 6563 745f 385f 7061  ect(project_8_pa
-00012820: 7468 290a 2020 2020 2020 2020 7365 6c66  th).        self
-00012830: 2e61 7373 6572 7445 7175 616c 2873 6176  .assertEqual(sav
-00012840: 6564 5f70 726f 6a65 6374 732e 7061 7468  ed_projects.path
-00012850: 734c 6973 742c 205b 7072 6f6a 6563 745f  sList, [project_
-00012860: 385f 7061 7468 2c20 222f 686f 6d65 225d  8_path, "/home"]
-00012870: 290a 0a20 2020 2020 2020 2073 6176 6564  )..        saved
-00012880: 5f70 726f 6a65 6374 732e 7265 6d6f 7665  _projects.remove
-00012890: 5361 7665 6450 726f 6a65 6374 2870 726f  SavedProject(pro
-000128a0: 6a65 6374 5f38 5f70 6174 6829 0a20 2020  ject_8_path).   
-000128b0: 2020 2020 2073 6176 6564 5f70 726f 6a65       saved_proje
-000128c0: 6374 732e 7265 6d6f 7665 5361 7665 6450  cts.removeSavedP
-000128d0: 726f 6a65 6374 2822 2f68 6f6d 6522 290a  roject("/home").
-000128e0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-000128f0: 6572 7445 7175 616c 2873 6176 6564 5f70  ertEqual(saved_p
-00012900: 726f 6a65 6374 732e 7061 7468 734c 6973  rojects.pathsLis
-00012910: 742c 205b 5d29 0a0a 2020 2020 2020 2020  t, [])..        
-00012920: 5361 7665 6450 726f 6a65 6374 732e 6c6f  SavedProjects.lo
-00012930: 6164 5361 7665 6450 726f 6a65 6374 7320  adSavedProjects 
-00012940: 3d20 6c61 6d62 6461 2061 3a20 5472 7565  = lambda a: True
-00012950: 0a20 2020 2020 2020 2073 6176 6564 5f70  .        saved_p
-00012960: 726f 6a65 6374 7320 3d20 5361 7665 6450  rojects = SavedP
-00012970: 726f 6a65 6374 7328 290a 2020 2020 2020  rojects().      
-00012980: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00012990: 616c 2873 6176 6564 5f70 726f 6a65 6374  al(saved_project
-000129a0: 732e 7061 7468 734c 6973 742c 205b 5d29  s.pathsList, [])
-000129b0: 0a0a 2020 2020 6465 6620 7465 7374 5f70  ..    def test_p
-000129c0: 726f 6a5f 7265 6d6f 765f 6672 6f6d 5f63  roj_remov_from_c
-000129d0: 7572 5f70 726f 6a28 7365 6c66 293a 0a20  ur_proj(self):. 
-000129e0: 2020 2020 2020 2022 2222 5465 7374 7320         """Tests 
-000129f0: 7468 6174 2074 6865 2070 726f 6a65 6374  that the project
-00012a00: 7320 6172 6520 7265 6d6f 7665 6420 6672  s are removed fr
-00012a10: 6f6d 2074 6865 206c 6973 7420 6f66 2063  om the list of c
-00012a20: 7572 7265 6e74 0a20 2020 2020 2020 2070  urrent.        p
-00012a30: 726f 6a65 6374 732e 0a20 2020 2020 2020  rojects..       
-00012a40: 2022 2222 0a0a 2020 2020 2020 2020 636f   """..        co
-00012a50: 6e66 6967 203d 2043 6f6e 6669 6728 636f  nfig = Config(co
-00012a60: 6e66 6967 5f70 6174 683d 7365 6c66 2e63  nfig_path=self.c
-00012a70: 6f6e 6669 675f 7061 7468 290a 2020 2020  onfig_path).    
-00012a80: 2020 2020 7072 6f6a 6563 7473 203d 2063      projects = c
-00012a90: 6f6e 6669 672e 6765 745f 6f70 656e 6564  onfig.get_opened
-00012aa0: 5f70 726f 6a65 6374 7328 290a 2020 2020  _projects().    
-00012ab0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-00012ac0: 7175 616c 286c 656e 2870 726f 6a65 6374  qual(len(project
-00012ad0: 7329 2c20 3129 0a20 2020 2020 2020 2073  s), 1).        s
-00012ae0: 656c 662e 6173 7365 7274 5472 7565 2873  elf.assertTrue(s
-00012af0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00012b00: 7072 6f6a 6563 742e 666f 6c64 6572 2069  project.folder i
-00012b10: 6e20 7072 6f6a 6563 7473 290a 0a20 2020  n projects)..   
-00012b20: 2064 6566 2074 6573 745f 7261 7069 645f   def test_rapid_
-00012b30: 7365 6172 6368 2873 656c 6629 3a0a 2020  search(self):.  
-00012b40: 2020 2020 2020 2222 2254 6573 7473 2074        """Tests t
-00012b50: 6865 2072 6170 6964 2073 6561 7263 6820  he rapid search 
-00012b60: 6261 722e 2222 220a 0a20 2020 2020 2020  bar."""..       
-00012b70: 2070 726f 6a65 6374 5f38 5f70 6174 6820   project_8_path 
-00012b80: 3d20 7365 6c66 2e67 6574 5f6e 6577 5f74  = self.get_new_t
-00012b90: 6573 745f 7072 6f6a 6563 7428 290a 2020  est_project().  
-00012ba0: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-00012bb0: 7769 6e64 6f77 2e73 7769 7463 685f 7072  window.switch_pr
-00012bc0: 6f6a 6563 7428 7072 6f6a 6563 745f 385f  oject(project_8_
-00012bd0: 7061 7468 2c20 2270 726f 6a65 6374 5f38  path, "project_8
-00012be0: 2229 0a0a 2020 2020 2020 2020 2320 4368  ")..        # Ch
-00012bf0: 6563 6b69 6e67 2074 6861 7420 7468 6520  ecking that the 
-00012c00: 3920 7363 616e 7320 6172 6520 7368 6f77  9 scans are show
-00012c10: 6e20 696e 2074 6865 2044 6174 6142 726f  n in the DataBro
-00012c20: 7773 6572 0a20 2020 2020 2020 2073 656c  wser.        sel
-00012c30: 662e 6173 7365 7274 4571 7561 6c28 0a20  f.assertEqual(. 
-00012c40: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00012c50: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
-00012c60: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
-00012c70: 6174 612e 726f 7743 6f75 6e74 2829 2c20  ata.rowCount(), 
-00012c80: 390a 2020 2020 2020 2020 290a 2020 2020  9.        ).    
-00012c90: 2020 2020 7363 616e 735f 6469 7370 6c61      scans_displa
-00012ca0: 7965 6420 3d20 5b5d 0a0a 2020 2020 2020  yed = []..      
-00012cb0: 2020 666f 7220 726f 7720 696e 2072 616e    for row in ran
-00012cc0: 6765 280a 2020 2020 2020 2020 2020 2020  ge(.            
-00012cd0: 302c 2073 656c 662e 6d61 696e 5f77 696e  0, self.main_win
-00012ce0: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
-00012cf0: 2e74 6162 6c65 5f64 6174 612e 726f 7743  .table_data.rowC
-00012d00: 6f75 6e74 2829 0a20 2020 2020 2020 2029  ount().        )
-00012d10: 3a0a 2020 2020 2020 2020 2020 2020 6974  :.            it
-00012d20: 656d 203d 2073 656c 662e 6d61 696e 5f77  em = self.main_w
-00012d30: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
-00012d40: 6572 2e74 6162 6c65 5f64 6174 612e 6974  er.table_data.it
-00012d50: 656d 2872 6f77 2c20 3029 0a20 2020 2020  em(row, 0).     
-00012d60: 2020 2020 2020 2073 6361 6e5f 6e61 6d65         scan_name
-00012d70: 203d 2069 7465 6d2e 7465 7874 2829 0a0a   = item.text()..
-00012d80: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-00012d90: 6f74 2073 656c 662e 6d61 696e 5f77 696e  ot self.main_win
-00012da0: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
-00012db0: 2e74 6162 6c65 5f64 6174 612e 6973 526f  .table_data.isRo
-00012dc0: 7748 6964 6465 6e28 726f 7729 3a0a 2020  wHidden(row):.  
-00012dd0: 2020 2020 2020 2020 2020 2020 2020 7363                sc
-00012de0: 616e 735f 6469 7370 6c61 7965 642e 6170  ans_displayed.ap
-00012df0: 7065 6e64 2873 6361 6e5f 6e61 6d65 290a  pend(scan_name).
-00012e00: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00012e10: 7365 7274 4571 7561 6c28 6c65 6e28 7363  sertEqual(len(sc
-00012e20: 616e 735f 6469 7370 6c61 7965 6429 2c20  ans_displayed), 
-00012e30: 3929 0a20 2020 2020 2020 2073 656c 662e  9).        self.
-00012e40: 6173 7365 7274 5472 7565 280a 2020 2020  assertTrue(.    
-00012e50: 2020 2020 2020 2020 2264 6174 612f 7261          "data/ra
-00012e60: 775f 6461 7461 2f47 7565 7262 6574 2d43  w_data/Guerbet-C
-00012e70: 362d 3230 3134 2d52 6174 2d4b 3532 2d54  6-2014-Rat-K52-T
-00012e80: 7562 6532 3722 0a20 2020 2020 2020 2020  ube27".         
-00012e90: 2020 2022 2d32 3031 342d 3032 2d31 3431     "-2014-02-141
-00012ea0: 3032 3331 372d 3031 2d47 315f 4775 6572  02317-01-G1_Guer
-00012eb0: 6265 745f 416e 6174 2d52 4152 4522 0a20  bet_Anat-RARE". 
-00012ec0: 2020 2020 2020 2020 2020 2022 7076 6d2d             "pvm-
-00012ed0: 3030 3032 3230 5f30 3030 2e6e 6969 2220  000220_000.nii" 
-00012ee0: 696e 2073 6361 6e73 5f64 6973 706c 6179  in scans_display
-00012ef0: 6564 0a20 2020 2020 2020 2029 0a20 2020  ed.        ).   
-00012f00: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00012f10: 5472 7565 280a 2020 2020 2020 2020 2020  True(.          
-00012f20: 2020 2264 6174 612f 7261 775f 6461 7461    "data/raw_data
-00012f30: 2f47 7565 7262 6574 2d43 362d 3230 3134  /Guerbet-C6-2014
-00012f40: 2d52 6174 2d4b 3532 2d54 7562 6532 3722  -Rat-K52-Tube27"
-00012f50: 0a20 2020 2020 2020 2020 2020 2022 2d32  .            "-2
-00012f60: 3031 342d 3032 2d31 3431 3032 3331 372d  014-02-14102317-
-00012f70: 3034 2d47 335f 4775 6572 6265 745f 4d44  04-G3_Guerbet_MD
-00012f80: 4546 542d 4d44 4546 5422 0a20 2020 2020  EFT-MDEFT".     
-00012f90: 2020 2020 2020 2022 7076 6d2d 3030 3039         "pvm-0009
-00012fa0: 3430 5f38 3030 2e6e 6969 2220 696e 2073  40_800.nii" in s
-00012fb0: 6361 6e73 5f64 6973 706c 6179 6564 0a20  cans_displayed. 
-00012fc0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00012fd0: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
-00012fe0: 280a 2020 2020 2020 2020 2020 2020 2264  (.            "d
-00012ff0: 6174 612f 7261 775f 6461 7461 2f47 7565  ata/raw_data/Gue
-00013000: 7262 6574 2d43 362d 3230 3134 2d52 6174  rbet-C6-2014-Rat
-00013010: 2d4b 3532 2d54 7562 6532 3722 0a20 2020  -K52-Tube27".   
-00013020: 2020 2020 2020 2020 2022 2d32 3031 342d           "-2014-
-00013030: 3032 2d31 3431 3032 3331 372d 3035 2d47  02-14102317-05-G
-00013040: 345f 4775 6572 6265 745f 5431 5345 5f38  4_Guerbet_T1SE_8
-00013050: 3030 2d52 4152 4522 0a20 2020 2020 2020  00-RARE".       
-00013060: 2020 2020 2022 7076 6d2d 3030 3031 3432       "pvm-000142
-00013070: 5f34 3030 2e6e 6969 2220 696e 2073 6361  _400.nii" in sca
-00013080: 6e73 5f64 6973 706c 6179 6564 0a20 2020  ns_displayed.   
-00013090: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
-000130a0: 656c 662e 6173 7365 7274 5472 7565 280a  elf.assertTrue(.
-000130b0: 2020 2020 2020 2020 2020 2020 2264 6174              "dat
-000130c0: 612f 7261 775f 6461 7461 2f47 7565 7262  a/raw_data/Guerb
-000130d0: 6574 2d43 362d 3230 3134 2d52 6174 2d4b  et-C6-2014-Rat-K
-000130e0: 3532 2d54 7562 6532 3722 0a20 2020 2020  52-Tube27".     
-000130f0: 2020 2020 2020 2022 2d32 3031 342d 3032         "-2014-02
-00013100: 2d31 3431 3032 3331 372d 3036 2d47 345f  -14102317-06-G4_
-00013110: 4775 6572 6265 745f 5431 5345 5f38 3030  Guerbet_T1SE_800
-00013120: 2d52 4152 4522 0a20 2020 2020 2020 2020  -RARE".         
-00013130: 2020 2022 7076 6d2d 3030 3031 3432 5f34     "pvm-000142_4
-00013140: 3030 2e6e 6969 2220 696e 2073 6361 6e73  00.nii" in scans
-00013150: 5f64 6973 706c 6179 6564 0a20 2020 2020  _displayed.     
-00013160: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
-00013170: 662e 6173 7365 7274 5472 7565 280a 2020  f.assertTrue(.  
-00013180: 2020 2020 2020 2020 2020 2264 6174 612f            "data/
-00013190: 7261 775f 6461 7461 2f47 7565 7262 6574  raw_data/Guerbet
-000131a0: 2d43 362d 3230 3134 2d52 6174 2d4b 3532  -C6-2014-Rat-K52
-000131b0: 2d54 7562 6532 3722 0a20 2020 2020 2020  -Tube27".       
-000131c0: 2020 2020 2022 2d32 3031 342d 3032 2d31       "-2014-02-1
-000131d0: 3431 3032 3331 372d 3038 2d47 345f 4775  4102317-08-G4_Gu
-000131e0: 6572 6265 745f 5431 5345 5f38 3030 2d52  erbet_T1SE_800-R
-000131f0: 4152 4522 0a20 2020 2020 2020 2020 2020  ARE".           
-00013200: 2022 7076 6d2d 3030 3031 3432 5f34 3030   "pvm-000142_400
-00013210: 2e6e 6969 2220 696e 2073 6361 6e73 5f64  .nii" in scans_d
-00013220: 6973 706c 6179 6564 0a20 2020 2020 2020  isplayed.       
-00013230: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
-00013240: 6173 7365 7274 5472 7565 280a 2020 2020  assertTrue(.    
-00013250: 2020 2020 2020 2020 2264 6174 612f 7261          "data/ra
-00013260: 775f 6461 7461 2f47 7565 7262 6574 2d43  w_data/Guerbet-C
-00013270: 362d 3230 3134 2d52 6174 2d4b 3532 2d54  6-2014-Rat-K52-T
-00013280: 7562 6532 3722 0a20 2020 2020 2020 2020  ube27".         
-00013290: 2020 2022 2d32 3031 342d 3032 2d31 3431     "-2014-02-141
-000132a0: 3032 3331 372d 3039 2d47 345f 4775 6572  02317-09-G4_Guer
-000132b0: 6265 745f 5431 5345 5f38 3030 2d52 4152  bet_T1SE_800-RAR
-000132c0: 4522 0a20 2020 2020 2020 2020 2020 2022  E".            "
-000132d0: 7076 6d2d 3030 3031 3432 5f34 3030 2e6e  pvm-000142_400.n
-000132e0: 6969 2220 696e 2073 6361 6e73 5f64 6973  ii" in scans_dis
-000132f0: 706c 6179 6564 0a20 2020 2020 2020 2029  played.        )
-00013300: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00013310: 7365 7274 5472 7565 280a 2020 2020 2020  sertTrue(.      
-00013320: 2020 2020 2020 2264 6174 612f 7261 775f        "data/raw_
-00013330: 6461 7461 2f47 7565 7262 6574 2d43 362d  data/Guerbet-C6-
-00013340: 3230 3134 2d52 6174 2d4b 3532 2d54 7562  2014-Rat-K52-Tub
-00013350: 6532 3722 0a20 2020 2020 2020 2020 2020  e27".           
-00013360: 2022 2d32 3031 342d 3032 2d31 3431 3032   "-2014-02-14102
-00013370: 3331 372d 3130 2d47 335f 4775 6572 6265  317-10-G3_Guerbe
-00013380: 745f 4d44 4546 542d 4d44 4546 5422 0a20  t_MDEFT-MDEFT". 
-00013390: 2020 2020 2020 2020 2020 2022 7076 6d2d             "pvm-
-000133a0: 3030 3039 3430 5f38 3030 2e6e 6969 2220  000940_800.nii" 
-000133b0: 696e 2073 6361 6e73 5f64 6973 706c 6179  in scans_display
-000133c0: 6564 0a20 2020 2020 2020 2029 0a20 2020  ed.        ).   
-000133d0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-000133e0: 5472 7565 280a 2020 2020 2020 2020 2020  True(.          
-000133f0: 2020 2264 6174 612f 7261 775f 6461 7461    "data/raw_data
-00013400: 2f47 7565 7262 6574 2d43 362d 3230 3134  /Guerbet-C6-2014
-00013410: 2d52 6174 2d4b 3532 2d54 7562 6532 3722  -Rat-K52-Tube27"
-00013420: 0a20 2020 2020 2020 2020 2020 2022 2d32  .            "-2
-00013430: 3031 342d 3032 2d31 3431 3032 3331 372d  014-02-14102317-
-00013440: 3131 2d47 345f 4775 6572 6265 745f 5431  11-G4_Guerbet_T1
-00013450: 5345 5f38 3030 2d52 4152 4522 0a20 2020  SE_800-RARE".   
-00013460: 2020 2020 2020 2020 2022 7076 6d2d 3030           "pvm-00
-00013470: 3031 3432 5f34 3030 2e6e 6969 2220 696e  0142_400.nii" in
-00013480: 2073 6361 6e73 5f64 6973 706c 6179 6564   scans_displayed
-00013490: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-000134a0: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-000134b0: 7565 280a 2020 2020 2020 2020 2020 2020  ue(.            
-000134c0: 2264 6174 612f 6465 7269 7665 645f 6461  "data/derived_da
-000134d0: 7461 2f73 4775 6572 6265 742d 4336 2d32  ta/sGuerbet-C6-2
-000134e0: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
-000134f0: 3237 220a 2020 2020 2020 2020 2020 2020  27".            
-00013500: 222d 3230 3134 2d30 322d 3134 3130 3233  "-2014-02-141023
-00013510: 3137 2d30 312d 4731 5f47 7565 7262 6574  17-01-G1_Guerbet
-00013520: 5f41 6e61 742d 5241 5245 220a 2020 2020  _Anat-RARE".    
-00013530: 2020 2020 2020 2020 2270 766d 2d30 3030          "pvm-000
-00013540: 3232 305f 3030 302e 6e69 6922 2069 6e20  220_000.nii" in 
-00013550: 7363 616e 735f 6469 7370 6c61 7965 640a  scans_displayed.
-00013560: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-00013570: 2020 2023 2054 6573 7469 6e67 2047 3120     # Testing G1 
-00013580: 7261 7069 6420 7365 6172 6368 0a20 2020  rapid search.   
-00013590: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
-000135a0: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
-000135b0: 6572 2e73 6561 7263 685f 6261 722e 7365  er.search_bar.se
-000135c0: 7454 6578 7428 2247 3122 290a 2020 2020  tText("G1").    
-000135d0: 2020 2020 7363 616e 735f 6469 7370 6c61      scans_displa
-000135e0: 7965 6420 3d20 5b5d 0a0a 2020 2020 2020  yed = []..      
-000135f0: 2020 666f 7220 726f 7720 696e 2072 616e    for row in ran
-00013600: 6765 280a 2020 2020 2020 2020 2020 2020  ge(.            
-00013610: 302c 2073 656c 662e 6d61 696e 5f77 696e  0, self.main_win
-00013620: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
-00013630: 2e74 6162 6c65 5f64 6174 612e 726f 7743  .table_data.rowC
-00013640: 6f75 6e74 2829 0a20 2020 2020 2020 2029  ount().        )
-00013650: 3a0a 2020 2020 2020 2020 2020 2020 6974  :.            it
-00013660: 656d 203d 2073 656c 662e 6d61 696e 5f77  em = self.main_w
-00013670: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
-00013680: 6572 2e74 6162 6c65 5f64 6174 612e 6974  er.table_data.it
-00013690: 656d 2872 6f77 2c20 3029 0a20 2020 2020  em(row, 0).     
-000136a0: 2020 2020 2020 2073 6361 6e5f 6e61 6d65         scan_name
-000136b0: 203d 2069 7465 6d2e 7465 7874 2829 0a0a   = item.text()..
-000136c0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-000136d0: 6f74 2073 656c 662e 6d61 696e 5f77 696e  ot self.main_win
-000136e0: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
-000136f0: 2e74 6162 6c65 5f64 6174 612e 6973 526f  .table_data.isRo
-00013700: 7748 6964 6465 6e28 726f 7729 3a0a 2020  wHidden(row):.  
-00013710: 2020 2020 2020 2020 2020 2020 2020 7363                sc
-00013720: 616e 735f 6469 7370 6c61 7965 642e 6170  ans_displayed.ap
-00013730: 7065 6e64 2873 6361 6e5f 6e61 6d65 290a  pend(scan_name).
-00013740: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00013750: 7365 7274 4571 7561 6c28 6c65 6e28 7363  sertEqual(len(sc
-00013760: 616e 735f 6469 7370 6c61 7965 6429 2c20  ans_displayed), 
-00013770: 3229 0a20 2020 2020 2020 2073 656c 662e  2).        self.
-00013780: 6173 7365 7274 5472 7565 280a 2020 2020  assertTrue(.    
-00013790: 2020 2020 2020 2020 2264 6174 612f 7261          "data/ra
-000137a0: 775f 6461 7461 2f47 7565 7262 6574 2d43  w_data/Guerbet-C
-000137b0: 362d 3230 3134 2d52 6174 2d4b 3532 2d54  6-2014-Rat-K52-T
-000137c0: 7562 6532 3722 0a20 2020 2020 2020 2020  ube27".         
-000137d0: 2020 2022 2d32 3031 342d 3032 2d31 3431     "-2014-02-141
-000137e0: 3032 3331 372d 3031 2d47 315f 4775 6572  02317-01-G1_Guer
-000137f0: 6265 745f 416e 6174 2d52 4152 4522 0a20  bet_Anat-RARE". 
-00013800: 2020 2020 2020 2020 2020 2022 7076 6d2d             "pvm-
-00013810: 3030 3032 3230 5f30 3030 2e6e 6969 2220  000220_000.nii" 
-00013820: 696e 2073 6361 6e73 5f64 6973 706c 6179  in scans_display
-00013830: 6564 0a20 2020 2020 2020 2029 0a20 2020  ed.        ).   
-00013840: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00013850: 5472 7565 280a 2020 2020 2020 2020 2020  True(.          
-00013860: 2020 2264 6174 612f 6465 7269 7665 645f    "data/derived_
-00013870: 6461 7461 2f73 4775 6572 6265 742d 4336  data/sGuerbet-C6
-00013880: 2d32 3031 342d 5261 742d 4b35 322d 5475  -2014-Rat-K52-Tu
-00013890: 6265 3237 220a 2020 2020 2020 2020 2020  be27".          
-000138a0: 2020 222d 3230 3134 2d30 322d 3134 3130    "-2014-02-1410
-000138b0: 3233 3137 2d30 312d 4731 5f47 7565 7262  2317-01-G1_Guerb
-000138c0: 6574 5f41 6e61 742d 5241 5245 220a 2020  et_Anat-RARE".  
-000138d0: 2020 2020 2020 2020 2020 2270 766d 2d30            "pvm-0
-000138e0: 3030 3232 305f 3030 302e 6e69 6922 2069  00220_000.nii" i
-000138f0: 6e20 7363 616e 735f 6469 7370 6c61 7965  n scans_displaye
-00013900: 640a 2020 2020 2020 2020 290a 0a20 2020  d.        )..   
-00013910: 2020 2020 2023 2054 6573 7469 6e67 2074       # Testing t
-00013920: 6861 7420 616c 6c20 7468 6520 7363 616e  hat all the scan
-00013930: 7320 6172 6520 6261 636b 2077 6865 6e20  s are back when 
-00013940: 636c 6963 6b69 6e67 206f 6e20 7468 6520  clicking on the 
-00013950: 6372 6f73 730a 2020 2020 2020 2020 5154  cross.        QT
-00013960: 6573 742e 6d6f 7573 6543 6c69 636b 280a  est.mouseClick(.
-00013970: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00013980: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
-00013990: 615f 6272 6f77 7365 722e 6275 7474 6f6e  a_browser.button
-000139a0: 5f63 726f 7373 2c20 5174 2e4c 6566 7442  _cross, Qt.LeftB
-000139b0: 7574 746f 6e0a 2020 2020 2020 2020 290a  utton.        ).
-000139c0: 2020 2020 2020 2020 7363 616e 735f 6469          scans_di
-000139d0: 7370 6c61 7965 6420 3d20 5b5d 0a0a 2020  splayed = []..  
-000139e0: 2020 2020 2020 666f 7220 726f 7720 696e        for row in
-000139f0: 2072 616e 6765 280a 2020 2020 2020 2020   range(.        
-00013a00: 2020 2020 302c 2073 656c 662e 6d61 696e      0, self.main
-00013a10: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
-00013a20: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
-00013a30: 726f 7743 6f75 6e74 2829 0a20 2020 2020  rowCount().     
-00013a40: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
-00013a50: 2020 6974 656d 203d 2073 656c 662e 6d61    item = self.ma
-00013a60: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
-00013a70: 726f 7773 6572 2e74 6162 6c65 5f64 6174  rowser.table_dat
-00013a80: 612e 6974 656d 2872 6f77 2c20 3029 0a20  a.item(row, 0). 
-00013a90: 2020 2020 2020 2020 2020 2073 6361 6e5f             scan_
-00013aa0: 6e61 6d65 203d 2069 7465 6d2e 7465 7874  name = item.text
-00013ab0: 2829 0a0a 2020 2020 2020 2020 2020 2020  ()..            
-00013ac0: 6966 206e 6f74 2073 656c 662e 6d61 696e  if not self.main
-00013ad0: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
-00013ae0: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
-00013af0: 6973 526f 7748 6964 6465 6e28 726f 7729  isRowHidden(row)
-00013b00: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00013b10: 2020 7363 616e 735f 6469 7370 6c61 7965    scans_displaye
-00013b20: 642e 6170 7065 6e64 2873 6361 6e5f 6e61  d.append(scan_na
-00013b30: 6d65 290a 0a20 2020 2020 2020 2073 656c  me)..        sel
-00013b40: 662e 6173 7365 7274 4571 7561 6c28 6c65  f.assertEqual(le
-00013b50: 6e28 7363 616e 735f 6469 7370 6c61 7965  n(scans_displaye
-00013b60: 6429 2c20 3929 0a20 2020 2020 2020 2073  d), 9).        s
-00013b70: 656c 662e 6173 7365 7274 5472 7565 280a  elf.assertTrue(.
-00013b80: 2020 2020 2020 2020 2020 2020 2264 6174              "dat
-00013b90: 612f 7261 775f 6461 7461 2f47 7565 7262  a/raw_data/Guerb
-00013ba0: 6574 2d43 362d 3230 3134 2d52 6174 2d4b  et-C6-2014-Rat-K
-00013bb0: 3532 2d54 7562 6532 3722 0a20 2020 2020  52-Tube27".     
-00013bc0: 2020 2020 2020 2022 2d32 3031 342d 3032         "-2014-02
-00013bd0: 2d31 3431 3032 3331 372d 3031 2d47 315f  -14102317-01-G1_
-00013be0: 4775 6572 6265 745f 416e 6174 2d52 4152  Guerbet_Anat-RAR
-00013bf0: 4570 766d 220a 2020 2020 2020 2020 2020  Epvm".          
-00013c00: 2020 222d 3030 3032 3230 5f30 3030 2e6e    "-000220_000.n
-00013c10: 6969 2220 696e 2073 6361 6e73 5f64 6973  ii" in scans_dis
-00013c20: 706c 6179 6564 0a20 2020 2020 2020 2029  played.        )
-00013c30: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00013c40: 7365 7274 5472 7565 280a 2020 2020 2020  sertTrue(.      
-00013c50: 2020 2020 2020 2264 6174 612f 7261 775f        "data/raw_
-00013c60: 6461 7461 2f47 7565 7262 6574 2d43 362d  data/Guerbet-C6-
-00013c70: 3230 3134 2d52 6174 2d4b 3532 2d54 7562  2014-Rat-K52-Tub
-00013c80: 6532 3722 0a20 2020 2020 2020 2020 2020  e27".           
-00013c90: 2022 2d32 3031 342d 3032 2d31 3431 3032   "-2014-02-14102
-00013ca0: 3331 372d 3034 2d47 335f 4775 6572 6265  317-04-G3_Guerbe
-00013cb0: 745f 4d44 4546 542d 4d44 4546 5422 0a20  t_MDEFT-MDEFT". 
-00013cc0: 2020 2020 2020 2020 2020 2022 7076 6d2d             "pvm-
-00013cd0: 3030 3039 3430 5f38 3030 2e6e 6969 2220  000940_800.nii" 
-00013ce0: 696e 2073 6361 6e73 5f64 6973 706c 6179  in scans_display
-00013cf0: 6564 0a20 2020 2020 2020 2029 0a20 2020  ed.        ).   
-00013d00: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00013d10: 5472 7565 280a 2020 2020 2020 2020 2020  True(.          
-00013d20: 2020 2264 6174 612f 7261 775f 6461 7461    "data/raw_data
-00013d30: 2f47 7565 7262 6574 2d43 362d 3230 3134  /Guerbet-C6-2014
-00013d40: 2d52 6174 2d4b 3532 2d54 7562 6532 3722  -Rat-K52-Tube27"
-00013d50: 0a20 2020 2020 2020 2020 2020 2022 2d32  .            "-2
-00013d60: 3031 342d 3032 2d31 3431 3032 3331 372d  014-02-14102317-
-00013d70: 3035 2d47 345f 4775 6572 6265 745f 5431  05-G4_Guerbet_T1
-00013d80: 5345 5f38 3030 2d52 4152 4522 0a20 2020  SE_800-RARE".   
-00013d90: 2020 2020 2020 2020 2022 7076 6d2d 3030           "pvm-00
-00013da0: 3031 3432 5f34 3030 2e6e 6969 2220 696e  0142_400.nii" in
-00013db0: 2073 6361 6e73 5f64 6973 706c 6179 6564   scans_displayed
-00013dc0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00013dd0: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-00013de0: 7565 280a 2020 2020 2020 2020 2020 2020  ue(.            
-00013df0: 2264 6174 612f 7261 775f 6461 7461 2f47  "data/raw_data/G
-00013e00: 7565 7262 6574 2d43 362d 3230 3134 2d52  uerbet-C6-2014-R
-00013e10: 6174 2d4b 3532 2d54 7562 6532 3722 0a20  at-K52-Tube27". 
-00013e20: 2020 2020 2020 2020 2020 2022 2d32 3031             "-201
-00013e30: 342d 3032 2d31 3431 3032 3331 372d 3036  4-02-14102317-06
-00013e40: 2d47 345f 4775 6572 6265 745f 5431 5345  -G4_Guerbet_T1SE
-00013e50: 5f38 3030 2d52 4152 4522 0a20 2020 2020  _800-RARE".     
-00013e60: 2020 2020 2020 2022 7076 6d2d 3030 3031         "pvm-0001
-00013e70: 3432 5f34 3030 2e6e 6969 2220 696e 2073  42_400.nii" in s
-00013e80: 6361 6e73 5f64 6973 706c 6179 6564 0a20  cans_displayed. 
-00013e90: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00013ea0: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
-00013eb0: 280a 2020 2020 2020 2020 2020 2020 2264  (.            "d
-00013ec0: 6174 612f 7261 775f 6461 7461 2f47 7565  ata/raw_data/Gue
-00013ed0: 7262 6574 2d43 362d 3230 3134 2d52 6174  rbet-C6-2014-Rat
-00013ee0: 2d4b 3532 2d54 7562 6532 3722 0a20 2020  -K52-Tube27".   
-00013ef0: 2020 2020 2020 2020 2022 2d32 3031 342d           "-2014-
-00013f00: 3032 2d31 3431 3032 3331 372d 3038 2d47  02-14102317-08-G
-00013f10: 345f 4775 6572 6265 745f 5431 5345 5f38  4_Guerbet_T1SE_8
-00013f20: 3030 2d52 4152 4522 0a20 2020 2020 2020  00-RARE".       
-00013f30: 2020 2020 2022 7076 6d2d 3030 3031 3432       "pvm-000142
-00013f40: 5f34 3030 2e6e 6969 2220 696e 2073 6361  _400.nii" in sca
-00013f50: 6e73 5f64 6973 706c 6179 6564 0a20 2020  ns_displayed.   
-00013f60: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
-00013f70: 656c 662e 6173 7365 7274 5472 7565 280a  elf.assertTrue(.
-00013f80: 2020 2020 2020 2020 2020 2020 2264 6174              "dat
-00013f90: 612f 7261 775f 6461 7461 2f47 7565 7262  a/raw_data/Guerb
-00013fa0: 6574 2d43 362d 3230 3134 2d52 6174 2d4b  et-C6-2014-Rat-K
-00013fb0: 3532 2d54 7562 6532 3722 0a20 2020 2020  52-Tube27".     
-00013fc0: 2020 2020 2020 2022 2d32 3031 342d 3032         "-2014-02
-00013fd0: 2d31 3431 3032 3331 372d 3039 2d47 345f  -14102317-09-G4_
-00013fe0: 4775 6572 6265 745f 5431 5345 5f38 3030  Guerbet_T1SE_800
-00013ff0: 2d52 4152 4522 0a20 2020 2020 2020 2020  -RARE".         
-00014000: 2020 2022 7076 6d2d 3030 3031 3432 5f34     "pvm-000142_4
-00014010: 3030 2e6e 6969 2220 696e 2073 6361 6e73  00.nii" in scans
-00014020: 5f64 6973 706c 6179 6564 0a20 2020 2020  _displayed.     
-00014030: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
-00014040: 662e 6173 7365 7274 5472 7565 280a 2020  f.assertTrue(.  
-00014050: 2020 2020 2020 2020 2020 2264 6174 612f            "data/
-00014060: 7261 775f 6461 7461 2f47 7565 7262 6574  raw_data/Guerbet
-00014070: 2d43 362d 3230 3134 2d52 6174 2d4b 3532  -C6-2014-Rat-K52
-00014080: 2d54 7562 6532 3722 0a20 2020 2020 2020  -Tube27".       
-00014090: 2020 2020 2022 2d32 3031 342d 3032 2d31       "-2014-02-1
-000140a0: 3431 3032 3331 372d 3130 2d47 335f 4775  4102317-10-G3_Gu
-000140b0: 6572 6265 745f 4d44 4546 542d 4d44 4546  erbet_MDEFT-MDEF
-000140c0: 5470 766d 220a 2020 2020 2020 2020 2020  Tpvm".          
-000140d0: 2020 222d 3030 3039 3430 5f38 3030 2e6e    "-000940_800.n
-000140e0: 6969 2220 696e 2073 6361 6e73 5f64 6973  ii" in scans_dis
-000140f0: 706c 6179 6564 0a20 2020 2020 2020 2029  played.        )
-00014100: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00014110: 7365 7274 5472 7565 280a 2020 2020 2020  sertTrue(.      
-00014120: 2020 2020 2020 2264 6174 612f 7261 775f        "data/raw_
-00014130: 6461 7461 2f47 7565 7262 6574 2d43 362d  data/Guerbet-C6-
-00014140: 3230 3134 2d52 6174 2d4b 3532 2d54 7562  2014-Rat-K52-Tub
-00014150: 6532 3722 0a20 2020 2020 2020 2020 2020  e27".           
-00014160: 2022 2d32 3031 342d 3032 2d31 3431 3032   "-2014-02-14102
-00014170: 3331 372d 3131 2d47 345f 4775 6572 6265  317-11-G4_Guerbe
-00014180: 745f 5431 5345 5f38 3030 2d52 4152 4570  t_T1SE_800-RAREp
-00014190: 766d 220a 2020 2020 2020 2020 2020 2020  vm".            
-000141a0: 222d 3030 3031 3432 5f34 3030 2e6e 6969  "-000142_400.nii
-000141b0: 2220 696e 2073 6361 6e73 5f64 6973 706c  " in scans_displ
-000141c0: 6179 6564 0a20 2020 2020 2020 2029 0a20  ayed.        ). 
-000141d0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-000141e0: 7274 5472 7565 280a 2020 2020 2020 2020  rtTrue(.        
-000141f0: 2020 2020 2264 6174 612f 6465 7269 7665      "data/derive
-00014200: 645f 6461 7461 2f73 4775 6572 6265 742d  d_data/sGuerbet-
-00014210: 4336 2d32 3031 342d 5261 742d 4b35 322d  C6-2014-Rat-K52-
-00014220: 5475 6265 3237 220a 2020 2020 2020 2020  Tube27".        
-00014230: 2020 2020 222d 3230 3134 2d30 322d 3134      "-2014-02-14
-00014240: 3130 3233 3137 2d30 312d 4731 5f47 7565  102317-01-G1_Gue
-00014250: 7262 6574 5f41 6e61 742d 5241 5245 7076  rbet_Anat-RAREpv
-00014260: 6d22 0a20 2020 2020 2020 2020 2020 2022  m".            "
-00014270: 2d30 3030 3232 305f 3030 302e 6e69 6922  -000220_000.nii"
-00014280: 2069 6e20 7363 616e 735f 6469 7370 6c61   in scans_displa
-00014290: 7965 640a 2020 2020 2020 2020 290a 0a20  yed.        ).. 
-000142a0: 2020 2020 2020 2023 2054 6573 7469 6e67         # Testing
-000142b0: 206e 6f74 2064 6566 696e 6564 2076 616c   not defined val
-000142c0: 7565 730a 2020 2020 2020 2020 5154 6573  ues.        QTes
-000142d0: 742e 6d6f 7573 6543 6c69 636b 280a 2020  t.mouseClick(.  
-000142e0: 2020 2020 2020 2020 2020 7365 6c66 2e6d            self.m
-000142f0: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
-00014300: 6272 6f77 7365 722e 6275 7474 6f6e 5f63  browser.button_c
-00014310: 726f 7373 2c20 5174 2e4c 6566 7442 7574  ross, Qt.LeftBut
-00014320: 746f 6e0a 2020 2020 2020 2020 290a 2020  ton.        ).  
-00014330: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-00014340: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
-00014350: 7365 722e 7365 6172 6368 5f62 6172 2e73  ser.search_bar.s
-00014360: 6574 5465 7874 2822 2a4e 6f74 2044 6566  etText("*Not Def
-00014370: 696e 6564 2a22 290a 2020 2020 2020 2020  ined*").        
-00014380: 7363 616e 735f 6469 7370 6c61 7965 6420  scans_displayed 
-00014390: 3d20 5b5d 0a0a 2020 2020 2020 2020 666f  = []..        fo
-000143a0: 7220 726f 7720 696e 2072 616e 6765 280a  r row in range(.
-000143b0: 2020 2020 2020 2020 2020 2020 302c 2073              0, s
-000143c0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-000143d0: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
-000143e0: 6c65 5f64 6174 612e 726f 7743 6f75 6e74  le_data.rowCount
-000143f0: 2829 0a20 2020 2020 2020 2029 3a0a 2020  ().        ):.  
-00014400: 2020 2020 2020 2020 2020 6974 656d 203d            item =
-00014410: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-00014420: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
-00014430: 6162 6c65 5f64 6174 612e 6974 656d 2872  able_data.item(r
-00014440: 6f77 2c20 3029 0a20 2020 2020 2020 2020  ow, 0).         
-00014450: 2020 2073 6361 6e5f 6e61 6d65 203d 2069     scan_name = i
-00014460: 7465 6d2e 7465 7874 2829 0a0a 2020 2020  tem.text()..    
-00014470: 2020 2020 2020 2020 6966 206e 6f74 2073          if not s
-00014480: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00014490: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
-000144a0: 6c65 5f64 6174 612e 6973 526f 7748 6964  le_data.isRowHid
-000144b0: 6465 6e28 726f 7729 3a0a 2020 2020 2020  den(row):.      
-000144c0: 2020 2020 2020 2020 2020 7363 616e 735f            scans_
-000144d0: 6469 7370 6c61 7965 642e 6170 7065 6e64  displayed.append
-000144e0: 2873 6361 6e5f 6e61 6d65 290a 0a20 2020  (scan_name)..   
-000144f0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00014500: 4571 7561 6c28 0a20 2020 2020 2020 2020  Equal(.         
-00014510: 2020 2073 6361 6e73 5f64 6973 706c 6179     scans_display
-00014520: 6564 2c0a 2020 2020 2020 2020 2020 2020  ed,.            
-00014530: 5b0a 2020 2020 2020 2020 2020 2020 2020  [.              
-00014540: 2020 2264 6174 612f 7261 775f 6461 7461    "data/raw_data
-00014550: 2f47 7565 7262 6574 2d43 362d 3230 3134  /Guerbet-C6-2014
-00014560: 2d52 6174 2d4b 3532 2d54 7562 6532 3722  -Rat-K52-Tube27"
-00014570: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014580: 2022 2d32 3031 342d 3032 2d31 3431 3032   "-2014-02-14102
-00014590: 3331 372d 3131 2d47 345f 4775 6572 6265  317-11-G4_Guerbe
-000145a0: 745f 5431 5345 5f38 3030 2d52 4152 4522  t_T1SE_800-RARE"
-000145b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000145c0: 2022 7076 6d2d 3030 3031 3432 5f34 3030   "pvm-000142_400
-000145d0: 2e6e 6969 220a 2020 2020 2020 2020 2020  .nii".          
-000145e0: 2020 5d2c 0a20 2020 2020 2020 2029 0a0a    ],.        )..
-000145f0: 2020 2020 6465 6620 7465 7374 5f72 656d      def test_rem
-00014600: 6f76 655f 7363 616e 2873 656c 6629 3a0a  ove_scan(self):.
-00014610: 2020 2020 2020 2020 2222 2243 7265 6174          """Creat
-00014620: 6573 2061 206e 6577 2070 726f 6a65 6374  es a new project
-00014630: 2c20 6164 6473 2073 6361 6e73 2074 6f20  , adds scans to 
-00014640: 7468 6520 7365 7373 696f 6e20 616e 6420  the session and 
-00014650: 7265 6d6f 7665 2074 6865 6d2e 0a0a 2020  remove them...  
-00014660: 2020 2020 2020 2d20 5465 7374 733a 0a20        - Tests:. 
-00014670: 2020 2020 2020 2020 2020 202d 2050 6970             - Pip
-00014680: 656c 696e 654d 616e 6167 6572 5461 622e  elineManagerTab.
-00014690: 7265 6d6f 7665 5f73 6361 6e0a 2020 2020  remove_scan.    
-000146a0: 2020 2020 2020 2020 2d20 506f 7055 7052          - PopUpR
-000146b0: 656d 6f76 6553 6361 6e0a 0a20 2020 2020  emoveScan..     
-000146c0: 2020 202d 204d 6f63 6b73 3a0a 2020 2020     - Mocks:.    
-000146d0: 2020 2020 2020 2020 2d20 506f 7055 7052          - PopUpR
-000146e0: 656d 6f76 6553 6361 6e2e 6578 6563 0a20  emoveScan.exec. 
-000146f0: 2020 2020 2020 2022 2222 0a0a 2020 2020         """..    
-00014700: 2020 2020 2320 5365 7473 2073 686f 7274      # Sets short
-00014710: 6375 7473 2066 6f72 206f 626a 6563 7473  cuts for objects
-00014720: 2074 6861 7420 6172 6520 6f66 7465 6e20   that are often 
-00014730: 7573 6564 0a20 2020 2020 2020 2070 706c  used.        ppl
-00014740: 5f6d 616e 6167 6572 203d 2073 656c 662e  _manager = self.
-00014750: 6d61 696e 5f77 696e 646f 772e 7069 7065  main_window.pipe
-00014760: 6c69 6e65 5f6d 616e 6167 6572 0a20 2020  line_manager.   
-00014770: 2020 2020 2064 6174 615f 6272 6f77 7365       data_browse
-00014780: 7220 3d20 7365 6c66 2e6d 6169 6e5f 7769  r = self.main_wi
-00014790: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
-000147a0: 720a 2020 2020 2020 2020 7462 5f64 6174  r.        tb_dat
-000147b0: 6120 3d20 6461 7461 5f62 726f 7773 6572  a = data_browser
-000147c0: 2e74 6162 6c65 5f64 6174 610a 2020 2020  .table_data.    
-000147d0: 2020 2020 7365 7373 696f 6e20 3d20 7365      session = se
-000147e0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
-000147f0: 726f 6a65 6374 2e73 6573 7369 6f6e 0a0a  roject.session..
-00014800: 2020 2020 2020 2020 2320 4372 6561 7465          # Create
-00014810: 7320 6120 6e65 7720 7072 6f6a 6563 7420  s a new project 
-00014820: 666f 6c64 6572 0a20 2020 2020 2020 2070  folder.        p
-00014830: 726f 6a65 6374 5f38 5f70 6174 6820 3d20  roject_8_path = 
-00014840: 7365 6c66 2e67 6574 5f6e 6577 5f74 6573  self.get_new_tes
-00014850: 745f 7072 6f6a 6563 7428 290a 2020 2020  t_project().    
-00014860: 2020 2020 7070 6c5f 6d61 6e61 6765 722e      ppl_manager.
-00014870: 7072 6f6a 6563 742e 666f 6c64 6572 203d  project.folder =
-00014880: 2070 726f 6a65 6374 5f38 5f70 6174 680a   project_8_path.
-00014890: 2020 2020 2020 2020 666f 6c64 6572 203d          folder =
-000148a0: 206f 732e 7061 7468 2e6a 6f69 6e28 7072   os.path.join(pr
-000148b0: 6f6a 6563 745f 385f 7061 7468 2c20 2264  oject_8_path, "d
-000148c0: 6174 6122 2c20 2272 6177 5f64 6174 6122  ata", "raw_data"
-000148d0: 290a 0a20 2020 2020 2020 204e 4949 5f46  )..        NII_F
-000148e0: 494c 455f 3120 3d20 280a 2020 2020 2020  ILE_1 = (.      
-000148f0: 2020 2020 2020 2247 7565 7262 6574 2d43        "Guerbet-C
-00014900: 362d 3230 3134 2d52 6174 2d4b 3532 2d54  6-2014-Rat-K52-T
-00014910: 7562 6532 372d 3230 3134 2d30 322d 3134  ube27-2014-02-14
-00014920: 3130 3233 3137 2d30 342d 4733 5f22 0a20  102317-04-G3_". 
-00014930: 2020 2020 2020 2020 2020 2022 4775 6572             "Guer
-00014940: 6265 745f 4d44 4546 542d 4d44 4546 5470  bet_MDEFT-MDEFTp
-00014950: 766d 2d30 3030 3934 305f 3830 302e 6e69  vm-000940_800.ni
-00014960: 6922 0a20 2020 2020 2020 2029 0a20 2020  i".        ).   
-00014970: 2020 2020 204e 4949 5f46 494c 455f 3220       NII_FILE_2 
-00014980: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
-00014990: 2247 7565 7262 6574 2d43 362d 3230 3134  "Guerbet-C6-2014
-000149a0: 2d52 6174 2d4b 3532 2d54 7562 6532 372d  -Rat-K52-Tube27-
-000149b0: 3230 3134 2d30 322d 3134 3130 3233 3137  2014-02-14102317
-000149c0: 2d30 352d 4734 5f22 0a20 2020 2020 2020  -05-G4_".       
-000149d0: 2020 2020 2022 4775 6572 6265 745f 5431       "Guerbet_T1
-000149e0: 5345 5f38 3030 2d52 4152 4570 766d 2d30  SE_800-RAREpvm-0
-000149f0: 3030 3134 325f 3430 302e 6e69 6922 0a20  00142_400.nii". 
-00014a00: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00014a10: 2044 4f43 554d 454e 545f 3120 3d20 6f73   DOCUMENT_1 = os
-00014a20: 2e70 6174 682e 6162 7370 6174 6828 6f73  .path.abspath(os
-00014a30: 2e70 6174 682e 6a6f 696e 2866 6f6c 6465  .path.join(folde
-00014a40: 722c 204e 4949 5f46 494c 455f 3129 290a  r, NII_FILE_1)).
-00014a50: 2020 2020 2020 2020 444f 4355 4d45 4e54          DOCUMENT
-00014a60: 5f32 203d 206f 732e 7061 7468 2e61 6273  _2 = os.path.abs
-00014a70: 7061 7468 286f 732e 7061 7468 2e6a 6f69  path(os.path.joi
-00014a80: 6e28 666f 6c64 6572 2c20 4e49 495f 4649  n(folder, NII_FI
-00014a90: 4c45 5f32 2929 0a0a 2020 2020 2020 2020  LE_2))..        
-00014aa0: 2320 4164 6473 2032 2073 6361 6e73 2074  # Adds 2 scans t
-00014ab0: 6f20 7468 6520 6375 7272 656e 7420 7365  o the current se
-00014ac0: 7373 696f 6e0a 2020 2020 2020 2020 7365  ssion.        se
-00014ad0: 7373 696f 6e2e 6164 645f 646f 6375 6d65  ssion.add_docume
-00014ae0: 6e74 2843 4f4c 4c45 4354 494f 4e5f 4355  nt(COLLECTION_CU
-00014af0: 5252 454e 542c 2044 4f43 554d 454e 545f  RRENT, DOCUMENT_
-00014b00: 3129 0a20 2020 2020 2020 2073 6573 7369  1).        sessi
-00014b10: 6f6e 2e61 6464 5f64 6f63 756d 656e 7428  on.add_document(
-00014b20: 434f 4c4c 4543 5449 4f4e 5f49 4e49 5449  COLLECTION_INITI
-00014b30: 414c 2c20 444f 4355 4d45 4e54 5f31 290a  AL, DOCUMENT_1).
-00014b40: 2020 2020 2020 2020 7365 7373 696f 6e2e          session.
-00014b50: 6164 645f 646f 6375 6d65 6e74 2843 4f4c  add_document(COL
-00014b60: 4c45 4354 494f 4e5f 4355 5252 454e 542c  LECTION_CURRENT,
-00014b70: 2044 4f43 554d 454e 545f 3229 0a20 2020   DOCUMENT_2).   
-00014b80: 2020 2020 2073 6573 7369 6f6e 2e61 6464       session.add
-00014b90: 5f64 6f63 756d 656e 7428 434f 4c4c 4543  _document(COLLEC
-00014ba0: 5449 4f4e 5f49 4e49 5449 414c 2c20 444f  TION_INITIAL, DO
-00014bb0: 4355 4d45 4e54 5f32 290a 2020 2020 2020  CUMENT_2).      
-00014bc0: 2020 7070 6c5f 6d61 6e61 6765 722e 7363    ppl_manager.sc
-00014bd0: 616e 5f6c 6973 742e 6170 7065 6e64 2844  an_list.append(D
-00014be0: 4f43 554d 454e 545f 3129 0a20 2020 2020  OCUMENT_1).     
-00014bf0: 2020 2070 706c 5f6d 616e 6167 6572 2e73     ppl_manager.s
-00014c00: 6361 6e5f 6c69 7374 2e61 7070 656e 6428  can_list.append(
-00014c10: 444f 4355 4d45 4e54 5f32 290a 2020 2020  DOCUMENT_2).    
-00014c20: 2020 2020 6461 7461 5f62 726f 7773 6572      data_browser
-00014c30: 2e64 6174 615f 7365 6e74 203d 2054 7275  .data_sent = Tru
-00014c40: 650a 0a20 2020 2020 2020 2023 2052 6566  e..        # Ref
-00014c50: 7265 7368 6573 2074 6865 2064 6174 6120  reshes the data 
-00014c60: 6272 6f77 7365 7220 7461 620a 2020 2020  browser tab.    
-00014c70: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
-00014c80: 6e64 6f77 2e75 7064 6174 655f 7072 6f6a  ndow.update_proj
-00014c90: 6563 7428 7072 6f6a 6563 745f 385f 7061  ect(project_8_pa
-00014ca0: 7468 290a 0a20 2020 2020 2020 2023 2053  th)..        # S
-00014cb0: 656c 6563 7473 2061 6c6c 2073 6361 6e73  elects all scans
-00014cc0: 0a20 2020 2020 2020 2074 625f 6461 7461  .        tb_data
-00014cd0: 2e73 656c 6563 7443 6f6c 756d 6e28 3029  .selectColumn(0)
-00014ce0: 0a0a 2020 2020 2020 2020 2320 4361 6e63  ..        # Canc
-00014cf0: 656c 7320 7265 6d6f 7669 6e67 2062 6f74  els removing bot
-00014d00: 6820 7363 616e 730a 2020 2020 2020 2020  h scans.        
-00014d10: 506f 7055 7052 656d 6f76 6553 6361 6e2e  PopUpRemoveScan.
-00014d20: 6578 6563 203d 206c 616d 6264 6120 783a  exec = lambda x:
-00014d30: 2074 625f 6461 7461 2e70 6f70 2e63 616e   tb_data.pop.can
-00014d40: 6365 6c5f 636c 6963 6b65 6428 290a 2020  cel_clicked().  
-00014d50: 2020 2020 2020 6461 7461 5f62 726f 7773        data_brows
-00014d60: 6572 2e74 6162 6c65 5f64 6174 612e 7265  er.table_data.re
-00014d70: 6d6f 7665 5f73 6361 6e28 290a 0a20 2020  move_scan()..   
-00014d80: 2020 2020 2023 2052 656a 6563 7473 2072       # Rejects r
-00014d90: 656d 6f76 696e 6720 626f 7468 2073 6361  emoving both sca
-00014da0: 6e73 0a20 2020 2020 2020 2050 6f70 5570  ns.        PopUp
-00014db0: 5265 6d6f 7665 5363 616e 2e65 7865 6320  RemoveScan.exec 
-00014dc0: 3d20 6c61 6d62 6461 2078 3a20 7462 5f64  = lambda x: tb_d
-00014dd0: 6174 612e 706f 702e 6e6f 5f61 6c6c 5f63  ata.pop.no_all_c
-00014de0: 6c69 636b 6564 2829 0a20 2020 2020 2020  licked().       
-00014df0: 2064 6174 615f 6272 6f77 7365 722e 7461   data_browser.ta
-00014e00: 626c 655f 6461 7461 2e72 656d 6f76 655f  ble_data.remove_
-00014e10: 7363 616e 2829 0a0a 2020 2020 2020 2020  scan()..        
-00014e20: 2320 4173 7365 7274 7320 7468 6174 2074  # Asserts that t
-00014e30: 6865 2064 6174 6120 6272 6f77 7365 7220  he data browser 
-00014e40: 6b65 7074 2062 6f74 6820 7363 616e 730a  kept both scans.
-00014e50: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00014e60: 6572 7445 7175 616c 286c 656e 2874 625f  ertEqual(len(tb_
-00014e70: 6461 7461 2e73 6361 6e73 292c 2032 290a  data.scans), 2).
-00014e80: 0a20 2020 2020 2020 2023 2045 6666 6563  .        # Effec
-00014e90: 7469 7665 6c79 2072 656d 6f76 6573 2062  tively removes b
-00014ea0: 6f74 6820 7363 616e 730a 2020 2020 2020  oth scans.      
-00014eb0: 2020 506f 7055 7052 656d 6f76 6553 6361    PopUpRemoveSca
-00014ec0: 6e2e 6578 6563 203d 206c 616d 6264 6120  n.exec = lambda 
-00014ed0: 783a 2074 625f 6461 7461 2e70 6f70 2e79  x: tb_data.pop.y
-00014ee0: 6573 5f61 6c6c 5f63 6c69 636b 6564 2829  es_all_clicked()
-00014ef0: 0a20 2020 2020 2020 2064 6174 615f 6272  .        data_br
-00014f00: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
-00014f10: 2e72 656d 6f76 655f 7363 616e 2829 0a0a  .remove_scan()..
-00014f20: 2020 2020 2020 2020 2320 4173 7365 7274          # Assert
-00014f30: 7320 7468 6174 2074 6865 2073 6361 6e73  s that the scans
-00014f40: 2077 6572 6520 6465 6c65 7465 640a 2020   were deleted.  
-00014f50: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00014f60: 7445 7175 616c 286c 656e 2874 625f 6461  tEqual(len(tb_da
-00014f70: 7461 2e73 6361 6e73 292c 2030 290a 0a20  ta.scans), 0).. 
-00014f80: 2020 2020 2020 2023 2041 6464 7320 6f6e         # Adds on
-00014f90: 6520 7363 616e 2074 6f20 7468 6520 6375  e scan to the cu
-00014fa0: 7272 656e 7420 7365 7373 696f 6e0a 2020  rrent session.  
-00014fb0: 2020 2020 2020 7365 7373 696f 6e2e 6164        session.ad
-00014fc0: 645f 646f 6375 6d65 6e74 2843 4f4c 4c45  d_document(COLLE
-00014fd0: 4354 494f 4e5f 4355 5252 454e 542c 2044  CTION_CURRENT, D
-00014fe0: 4f43 554d 454e 545f 3129 0a20 2020 2020  OCUMENT_1).     
-00014ff0: 2020 2073 6573 7369 6f6e 2e61 6464 5f64     session.add_d
-00015000: 6f63 756d 656e 7428 434f 4c4c 4543 5449  ocument(COLLECTI
-00015010: 4f4e 5f49 4e49 5449 414c 2c20 444f 4355  ON_INITIAL, DOCU
-00015020: 4d45 4e54 5f31 290a 2020 2020 2020 2020  MENT_1).        
-00015030: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00015040: 2e75 7064 6174 655f 7072 6f6a 6563 7428  .update_project(
-00015050: 7072 6f6a 6563 745f 385f 7061 7468 290a  project_8_path).
-00015060: 2020 2020 2020 2020 7070 6c5f 6d61 6e61          ppl_mana
-00015070: 6765 722e 7363 616e 5f6c 6973 742e 6170  ger.scan_list.ap
-00015080: 7065 6e64 2844 4f43 554d 454e 545f 3129  pend(DOCUMENT_1)
-00015090: 0a0a 2020 2020 2020 2020 2320 5365 6c65  ..        # Sele
-000150a0: 6374 7320 7468 6520 7363 616e 0a20 2020  cts the scan.   
-000150b0: 2020 2020 2064 6174 615f 6272 6f77 7365       data_browse
-000150c0: 722e 7461 626c 655f 6461 7461 2e73 656c  r.table_data.sel
-000150d0: 6563 7443 6f6c 756d 6e28 3029 0a0a 2020  ectColumn(0)..  
-000150e0: 2020 2020 2020 2320 5265 6d6f 7665 7320        # Removes 
-000150f0: 7468 6520 7363 616e 0a20 2020 2020 2020  the scan.       
-00015100: 2050 6f70 5570 5265 6d6f 7665 5363 616e   PopUpRemoveScan
-00015110: 2e65 7865 6320 3d20 6c61 6d62 6461 2078  .exec = lambda x
-00015120: 3a20 7462 5f64 6174 612e 706f 702e 7965  : tb_data.pop.ye
-00015130: 735f 636c 6963 6b65 6428 290a 2020 2020  s_clicked().    
-00015140: 2020 2020 6461 7461 5f62 726f 7773 6572      data_browser
-00015150: 2e74 6162 6c65 5f64 6174 612e 7265 6d6f  .table_data.remo
-00015160: 7665 5f73 6361 6e28 290a 0a20 2020 2020  ve_scan()..     
-00015170: 2020 2023 2041 7373 6572 7473 2074 6861     # Asserts tha
-00015180: 7420 7468 6520 7363 616e 7320 7765 7265  t the scans were
-00015190: 2064 656c 6574 6564 0a20 2020 2020 2020   deleted.       
-000151a0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-000151b0: 6c28 6c65 6e28 7462 5f64 6174 612e 7363  l(len(tb_data.sc
-000151c0: 616e 7329 2c20 3029 0a0a 2020 2020 2020  ans), 0)..      
-000151d0: 2020 2320 7072 6f6a 6563 745f 385f 7061    # project_8_pa
-000151e0: 7468 203d 2073 656c 662e 6765 745f 6e65  th = self.get_ne
-000151f0: 775f 7465 7374 5f70 726f 6a65 6374 2829  w_test_project()
-00015200: 0a20 2020 2020 2020 2023 2073 656c 662e  .        # self.
-00015210: 6d61 696e 5f77 696e 646f 772e 7377 6974  main_window.swit
-00015220: 6368 5f70 726f 6a65 6374 2870 726f 6a65  ch_project(proje
-00015230: 6374 5f38 5f70 6174 682c 2022 7072 6f6a  ct_8_path, "proj
-00015240: 6563 745f 3822 290a 0a20 2020 2023 0a0a  ect_8")..    #..
-00015250: 2020 2020 2320 7363 616e 735f 6469 7370      # scans_disp
-00015260: 6c61 7965 6420 3d20 5b5d 0a20 2020 2023  layed = [].    #
-00015270: 0a20 2020 2023 2066 6f72 2072 6f77 2069  .    # for row i
-00015280: 6e20 7261 6e67 6528 302c 0a20 2020 2023  n range(0,.    #
-00015290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000152a0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-000152b0: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
-000152c0: 6162 6c65 5f64 6174 612e 726f 7743 6f75  able_data.rowCou
-000152d0: 6e74 2829 293a 0a20 2020 2023 2020 2020  nt()):.    #    
-000152e0: 6974 656d 203d 2073 656c 662e 6d61 696e  item = self.main
-000152f0: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
-00015300: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
-00015310: 6974 656d 2872 6f77 2c20 3029 0a20 2020  item(row, 0).   
-00015320: 2023 2020 2020 7363 616e 5f6e 616d 6520   #    scan_name 
-00015330: 3d20 6974 656d 2e74 6578 7428 290a 2020  = item.text().  
-00015340: 2020 230a 2020 2020 2320 2020 2069 6620    #.    #    if 
-00015350: 6e6f 7420 7365 6c66 2e6d 6169 6e5f 7769  not self.main_wi
-00015360: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
-00015370: 722e 7461 626c 655f 6461 7461 2e69 7352  r.table_data.isR
-00015380: 6f77 4869 6464 656e 2872 6f77 293a 0a20  owHidden(row):. 
-00015390: 2020 2023 2020 2020 2020 2020 7363 616e     #        scan
-000153a0: 735f 6469 7370 6c61 7965 642e 6170 7065  s_displayed.appe
-000153b0: 6e64 2873 6361 6e5f 6e61 6d65 290a 2020  nd(scan_name).  
-000153c0: 2020 230a 2020 2020 2320 7365 6c66 2e61    #.    # self.a
-000153d0: 7373 6572 7445 7175 616c 286c 656e 2873  ssertEqual(len(s
-000153e0: 6361 6e73 5f64 6973 706c 6179 6564 292c  cans_displayed),
-000153f0: 2039 290a 2020 2020 2320 7365 6c66 2e61   9).    # self.a
-00015400: 7373 6572 7454 7275 6528 2264 6174 612f  ssertTrue("data/
-00015410: 7261 775f 6461 7461 2f47 7565 7262 6574  raw_data/Guerbet
-00015420: 2d43 362d 3230 3134 2d52 6174 2d4b 3532  -C6-2014-Rat-K52
-00015430: 2d54 7562 6532 3722 0a20 2020 2023 2020  -Tube27".    #  
-00015440: 2020 2020 2020 2020 2020 2020 2020 222d                "-
-00015450: 3230 3134 2d30 322d 3134 3130 3233 3137  2014-02-14102317
-00015460: 2d30 312d 4731 5f47 7565 7262 6574 5f41  -01-G1_Guerbet_A
-00015470: 6e61 742d 5241 5245 7076 6d22 0a20 2020  nat-RAREpvm".   
-00015480: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00015490: 2020 222d 3030 3032 3230 5f30 3030 2e6e    "-000220_000.n
-000154a0: 6969 2220 696e 2073 6361 6e73 5f64 6973  ii" in scans_dis
-000154b0: 706c 6179 6564 290a 2020 2020 2320 7365  played).    # se
-000154c0: 6c66 2e61 7373 6572 7454 7275 6528 2264  lf.assertTrue("d
-000154d0: 6174 612f 7261 775f 6461 7461 2f47 7565  ata/raw_data/Gue
-000154e0: 7262 6574 2d43 362d 3230 3134 2d52 6174  rbet-C6-2014-Rat
-000154f0: 2d4b 3532 2d54 7562 6532 3722 0a20 2020  -K52-Tube27".   
-00015500: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00015510: 2020 222d 3230 3134 2d30 322d 3134 3130    "-2014-02-1410
-00015520: 3233 3137 2d30 342d 4733 5f47 7565 7262  2317-04-G3_Guerb
-00015530: 6574 5f4d 4445 4654 2d4d 4445 4654 7076  et_MDEFT-MDEFTpv
-00015540: 6d22 0a20 2020 2023 2020 2020 2020 2020  m".    #        
-00015550: 2020 2020 2020 2020 222d 3030 3039 3430          "-000940
-00015560: 5f38 3030 2e6e 6969 2220 696e 2073 6361  _800.nii" in sca
-00015570: 6e73 5f64 6973 706c 6179 6564 290a 2020  ns_displayed).  
-00015580: 2020 2320 7365 6c66 2e61 7373 6572 7454    # self.assertT
-00015590: 7275 6528 2264 6174 612f 7261 775f 6461  rue("data/raw_da
-000155a0: 7461 2f47 7565 7262 6574 2d43 362d 3230  ta/Guerbet-C6-20
-000155b0: 3134 2d52 6174 2d4b 3532 2d54 7562 6532  14-Rat-K52-Tube2
-000155c0: 3722 0a20 2020 2023 2020 2020 2020 2020  7".    #        
-000155d0: 2020 2020 2020 2020 222d 3230 3134 2d30          "-2014-0
-000155e0: 322d 3134 3130 3233 3137 2d30 352d 4734  2-14102317-05-G4
-000155f0: 5f47 7565 7262 6574 5f54 3153 455f 3830  _Guerbet_T1SE_80
-00015600: 302d 5241 5245 7076 6d22 0a20 2020 2023  0-RAREpvm".    #
-00015610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015620: 222d 3030 3031 3432 5f34 3030 2e6e 6969  "-000142_400.nii
-00015630: 2220 696e 2073 6361 6e73 5f64 6973 706c  " in scans_displ
-00015640: 6179 6564 290a 2020 2020 2320 7365 6c66  ayed).    # self
-00015650: 2e61 7373 6572 7454 7275 6528 2264 6174  .assertTrue("dat
-00015660: 612f 7261 775f 6461 7461 2f47 7565 7262  a/raw_data/Guerb
-00015670: 6574 2d43 362d 3230 3134 2d52 6174 2d4b  et-C6-2014-Rat-K
-00015680: 3532 2d54 7562 6532 3722 0a20 2020 2023  52-Tube27".    #
-00015690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000156a0: 222d 3230 3134 2d30 322d 3134 3130 3233  "-2014-02-141023
-000156b0: 3137 2d30 362d 4734 5f47 7565 7262 6574  17-06-G4_Guerbet
-000156c0: 5f54 3153 455f 3830 302d 5241 5245 7076  _T1SE_800-RAREpv
-000156d0: 6d22 0a20 2020 2023 2020 2020 2020 2020  m".    #        
-000156e0: 2020 2020 2020 2020 222d 3030 3031 3432          "-000142
-000156f0: 5f34 3030 2e6e 6969 2220 696e 2073 6361  _400.nii" in sca
-00015700: 6e73 5f64 6973 706c 6179 6564 290a 2020  ns_displayed).  
-00015710: 2020 2320 7365 6c66 2e61 7373 6572 7454    # self.assertT
-00015720: 7275 6528 2264 6174 612f 7261 775f 6461  rue("data/raw_da
-00015730: 7461 2f47 7565 7262 6574 2d43 362d 3230  ta/Guerbet-C6-20
-00015740: 3134 2d52 6174 2d4b 3532 2d54 7562 6532  14-Rat-K52-Tube2
-00015750: 3722 0a20 2020 2023 2020 2020 2020 2020  7".    #        
-00015760: 2020 2020 2020 2020 222d 3230 3134 2d30          "-2014-0
-00015770: 322d 3134 3130 3233 3137 2d30 382d 4734  2-14102317-08-G4
-00015780: 5f47 7565 7262 6574 5f54 3153 455f 3830  _Guerbet_T1SE_80
-00015790: 302d 5241 5245 7076 6d22 0a20 2020 2023  0-RAREpvm".    #
-000157a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000157b0: 222d 3030 3031 3432 5f34 3030 2e6e 6969  "-000142_400.nii
-000157c0: 2220 696e 2073 6361 6e73 5f64 6973 706c  " in scans_displ
-000157d0: 6179 6564 290a 2020 2020 2320 7365 6c66  ayed).    # self
-000157e0: 2e61 7373 6572 7454 7275 6528 2264 6174  .assertTrue("dat
-000157f0: 612f 7261 775f 6461 7461 2f47 7565 7262  a/raw_data/Guerb
-00015800: 6574 2d43 362d 3230 3134 2d52 6174 2d4b  et-C6-2014-Rat-K
-00015810: 3532 2d54 7562 6532 3722 0a20 2020 2023  52-Tube27".    #
-00015820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015830: 222d 3230 3134 2d30 322d 3134 3130 3233  "-2014-02-141023
-00015840: 3137 2d30 392d 4734 5f47 7565 7262 6574  17-09-G4_Guerbet
-00015850: 5f54 3153 455f 3830 302d 5241 5245 7076  _T1SE_800-RAREpv
-00015860: 6d22 0a20 2020 2023 2020 2020 2020 2020  m".    #        
-00015870: 2020 2020 2020 2020 222d 3030 3031 3432          "-000142
-00015880: 5f34 3030 2e6e 6969 2220 696e 2073 6361  _400.nii" in sca
-00015890: 6e73 5f64 6973 706c 6179 6564 290a 2020  ns_displayed).  
-000158a0: 2020 2320 7365 6c66 2e61 7373 6572 7454    # self.assertT
-000158b0: 7275 6528 2264 6174 612f 7261 775f 6461  rue("data/raw_da
-000158c0: 7461 2f47 7565 7262 6574 2d43 362d 3230  ta/Guerbet-C6-20
-000158d0: 3134 2d52 6174 2d4b 3532 2d54 7562 6532  14-Rat-K52-Tube2
-000158e0: 3722 0a20 2020 2023 2020 2020 2020 2020  7".    #        
-000158f0: 2020 2020 2020 2020 222d 3230 3134 2d30          "-2014-0
-00015900: 322d 3134 3130 3233 3137 2d31 302d 4733  2-14102317-10-G3
-00015910: 5f47 7565 7262 6574 5f4d 4445 4654 2d4d  _Guerbet_MDEFT-M
-00015920: 4445 4654 7076 6d22 0a20 2020 2023 2020  DEFTpvm".    #  
-00015930: 2020 2020 2020 2020 2020 2020 2020 222d                "-
-00015940: 3030 3039 3430 5f38 3030 2e6e 6969 2220  000940_800.nii" 
-00015950: 696e 2073 6361 6e73 5f64 6973 706c 6179  in scans_display
-00015960: 6564 290a 2020 2020 2320 7365 6c66 2e61  ed).    # self.a
-00015970: 7373 6572 7454 7275 6528 2264 6174 612f  ssertTrue("data/
-00015980: 7261 775f 6461 7461 2f47 7565 7262 6574  raw_data/Guerbet
-00015990: 2d43 362d 3230 3134 2d52 6174 2d4b 3532  -C6-2014-Rat-K52
-000159a0: 2d54 7562 6532 3722 0a20 2020 2023 2020  -Tube27".    #  
-000159b0: 2020 2020 2020 2020 2020 2020 2020 222d                "-
-000159c0: 3230 3134 2d30 322d 3134 3130 3233 3137  2014-02-14102317
-000159d0: 2d31 312d 4734 5f47 7565 7262 6574 5f54  -11-G4_Guerbet_T
-000159e0: 3153 455f 3830 302d 5241 5245 7076 6d22  1SE_800-RAREpvm"
-000159f0: 0a20 2020 2023 2020 2020 2020 2020 2020  .    #          
-00015a00: 2020 2020 2020 222d 3030 3031 3432 5f34        "-000142_4
-00015a10: 3030 2e6e 6969 2220 696e 2073 6361 6e73  00.nii" in scans
-00015a20: 5f64 6973 706c 6179 6564 290a 2020 2020  _displayed).    
-00015a30: 2320 7365 6c66 2e61 7373 6572 7454 7275  # self.assertTru
-00015a40: 6528 2264 6174 612f 6465 7269 7665 645f  e("data/derived_
-00015a50: 6461 7461 2f73 4775 6572 6265 742d 4336  data/sGuerbet-C6
-00015a60: 2d32 3031 342d 5261 742d 4b35 322d 5475  -2014-Rat-K52-Tu
-00015a70: 6265 3237 220a 2020 2020 2320 2020 2020  be27".    #     
-00015a80: 2020 2020 2020 2020 2020 2022 2d32 3031             "-201
-00015a90: 342d 3032 2d31 3431 3032 3331 372d 3031  4-02-14102317-01
-00015aa0: 2d47 315f 4775 6572 6265 745f 416e 6174  -G1_Guerbet_Anat
-00015ab0: 2d52 4152 4570 766d 220a 2020 2020 2320  -RAREpvm".    # 
-00015ac0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00015ad0: 2d30 3030 3232 305f 3030 302e 6e69 6922  -000220_000.nii"
-00015ae0: 2069 6e20 7363 616e 735f 6469 7370 6c61   in scans_displa
-00015af0: 7965 6429 0a20 2020 2023 0a20 2020 2023  yed).    #.    #
-00015b00: 2320 5472 7969 6e67 2074 6f20 7265 6d6f  # Trying to remo
-00015b10: 7665 2061 2073 6361 6e0a 2020 2020 2320  ve a scan.    # 
-00015b20: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00015b30: 2e64 6174 615f 6272 6f77 7365 722e 7461  .data_browser.ta
-00015b40: 626c 655f 6461 7461 2e73 656c 6563 7452  ble_data.selectR
-00015b50: 6f77 2830 290a 2020 2020 2320 7365 6c66  ow(0).    # self
-00015b60: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
-00015b70: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
-00015b80: 6461 7461 2e72 656d 6f76 655f 7363 616e  data.remove_scan
-00015b90: 2829 0a20 2020 2023 2073 6361 6e73 5f64  ().    # scans_d
-00015ba0: 6973 706c 6179 6564 203d 205b 5d0a 2020  isplayed = [].  
-00015bb0: 2020 230a 2020 2020 2320 666f 7220 726f    #.    # for ro
-00015bc0: 7720 696e 2072 616e 6765 2830 2c0a 2020  w in range(0,.  
-00015bd0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00015be0: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
-00015bf0: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
-00015c00: 722e 7461 626c 655f 6461 7461 2e72 6f77  r.table_data.row
-00015c10: 436f 756e 7428 2929 3a0a 2020 2020 2320  Count()):.    # 
-00015c20: 2020 2069 7465 6d20 3d20 7365 6c66 2e6d     item = self.m
-00015c30: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
-00015c40: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
-00015c50: 7461 2e69 7465 6d28 726f 772c 2030 290a  ta.item(row, 0).
-00015c60: 2020 2020 2320 2020 2073 6361 6e5f 6e61      #    scan_na
-00015c70: 6d65 203d 2069 7465 6d2e 7465 7874 2829  me = item.text()
-00015c80: 0a20 2020 2023 0a20 2020 2023 2020 2020  .    #.    #    
-00015c90: 6966 206e 6f74 2073 656c 662e 6d61 696e  if not self.main
-00015ca0: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
-00015cb0: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
-00015cc0: 6973 526f 7748 6964 6465 6e28 726f 7729  isRowHidden(row)
-00015cd0: 3a0a 2020 2020 2320 2020 2020 2020 2073  :.    #        s
-00015ce0: 6361 6e73 5f64 6973 706c 6179 6564 2e61  cans_displayed.a
-00015cf0: 7070 656e 6428 7363 616e 5f6e 616d 6529  ppend(scan_name)
-00015d00: 0a20 2020 2023 0a20 2020 2023 2073 656c  .    #.    # sel
-00015d10: 662e 6173 7365 7274 4571 7561 6c28 6c65  f.assertEqual(le
-00015d20: 6e28 7363 616e 735f 6469 7370 6c61 7965  n(scans_displaye
-00015d30: 6429 2c20 3829 0a20 2020 2023 2073 656c  d), 8).    # sel
-00015d40: 662e 6173 7365 7274 5472 7565 2822 6461  f.assertTrue("da
-00015d50: 7461 2f72 6177 5f64 6174 612f 4775 6572  ta/raw_data/Guer
-00015d60: 6265 742d 4336 2d32 3031 342d 5261 742d  bet-C6-2014-Rat-
-00015d70: 4b35 322d 5475 6265 3237 220a 2020 2020  K52-Tube27".    
-00015d80: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00015d90: 2022 2d32 3031 342d 3032 2d31 3431 3032   "-2014-02-14102
-00015da0: 3331 372d 3034 2d47 335f 4775 6572 6265  317-04-G3_Guerbe
-00015db0: 745f 4d44 4546 542d 4d44 4546 5470 766d  t_MDEFT-MDEFTpvm
-00015dc0: 220a 2020 2020 2320 2020 2020 2020 2020  ".    #         
-00015dd0: 2020 2020 2020 2022 2d30 3030 3934 305f         "-000940_
-00015de0: 3830 302e 6e69 6922 2069 6e20 7363 616e  800.nii" in scan
-00015df0: 735f 6469 7370 6c61 7965 6429 0a20 2020  s_displayed).   
-00015e00: 2023 2073 656c 662e 6173 7365 7274 5472   # self.assertTr
-00015e10: 7565 2822 6461 7461 2f72 6177 5f64 6174  ue("data/raw_dat
-00015e20: 612f 4775 6572 6265 742d 4336 2d32 3031  a/Guerbet-C6-201
-00015e30: 342d 5261 742d 4b35 322d 5475 6265 3237  4-Rat-K52-Tube27
-00015e40: 220a 2020 2020 2320 2020 2020 2020 2020  ".    #         
-00015e50: 2020 2020 2020 2022 2d32 3031 342d 3032         "-2014-02
-00015e60: 2d31 3431 3032 3331 372d 3035 2d47 345f  -14102317-05-G4_
-00015e70: 4775 6572 6265 745f 5431 5345 5f38 3030  Guerbet_T1SE_800
-00015e80: 2d52 4152 4570 766d 220a 2020 2020 2320  -RAREpvm".    # 
-00015e90: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00015ea0: 2d30 3030 3134 325f 3430 302e 6e69 6922  -000142_400.nii"
-00015eb0: 2069 6e20 7363 616e 735f 6469 7370 6c61   in scans_displa
-00015ec0: 7965 6429 0a20 2020 2023 2073 656c 662e  yed).    # self.
-00015ed0: 6173 7365 7274 5472 7565 2822 6461 7461  assertTrue("data
-00015ee0: 2f72 6177 5f64 6174 612f 4775 6572 6265  /raw_data/Guerbe
-00015ef0: 742d 4336 2d32 3031 342d 5261 742d 4b35  t-C6-2014-Rat-K5
-00015f00: 322d 5475 6265 3237 220a 2020 2020 2320  2-Tube27".    # 
-00015f10: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00015f20: 2d32 3031 342d 3032 2d31 3431 3032 3331  -2014-02-1410231
-00015f30: 372d 3036 2d47 345f 4775 6572 6265 745f  7-06-G4_Guerbet_
-00015f40: 5431 5345 5f38 3030 2d52 4152 4570 766d  T1SE_800-RAREpvm
-00015f50: 220a 2020 2020 2320 2020 2020 2020 2020  ".    #         
-00015f60: 2020 2020 2020 2022 2d30 3030 3134 325f         "-000142_
-00015f70: 3430 302e 6e69 6922 2069 6e20 7363 616e  400.nii" in scan
-00015f80: 735f 6469 7370 6c61 7965 6429 0a20 2020  s_displayed).   
-00015f90: 2023 2073 656c 662e 6173 7365 7274 5472   # self.assertTr
-00015fa0: 7565 2822 6461 7461 2f72 6177 5f64 6174  ue("data/raw_dat
-00015fb0: 612f 4775 6572 6265 742d 4336 2d32 3031  a/Guerbet-C6-201
-00015fc0: 342d 5261 742d 4b35 322d 5475 6265 3237  4-Rat-K52-Tube27
-00015fd0: 220a 2020 2020 2320 2020 2020 2020 2020  ".    #         
-00015fe0: 2020 2020 2020 2022 2d32 3031 342d 3032         "-2014-02
-00015ff0: 2d31 3431 3032 3331 372d 3038 2d47 345f  -14102317-08-G4_
-00016000: 4775 6572 6265 745f 5431 5345 5f38 3030  Guerbet_T1SE_800
-00016010: 2d52 4152 4570 766d 220a 2020 2020 2320  -RAREpvm".    # 
-00016020: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00016030: 2d30 3030 3134 325f 3430 302e 6e69 6922  -000142_400.nii"
-00016040: 2069 6e20 7363 616e 735f 6469 7370 6c61   in scans_displa
-00016050: 7965 6429 0a20 2020 2023 2073 656c 662e  yed).    # self.
-00016060: 6173 7365 7274 5472 7565 2822 6461 7461  assertTrue("data
-00016070: 2f72 6177 5f64 6174 612f 4775 6572 6265  /raw_data/Guerbe
-00016080: 742d 4336 2d32 3031 342d 5261 742d 4b35  t-C6-2014-Rat-K5
-00016090: 322d 5475 6265 3237 220a 2020 2020 2320  2-Tube27".    # 
-000160a0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000160b0: 2d32 3031 342d 3032 2d31 3431 3032 3331  -2014-02-1410231
-000160c0: 372d 3039 2d47 345f 4775 6572 6265 745f  7-09-G4_Guerbet_
-000160d0: 5431 5345 5f38 3030 2d52 4152 4570 766d  T1SE_800-RAREpvm
-000160e0: 220a 2020 2020 2320 2020 2020 2020 2020  ".    #         
-000160f0: 2020 2020 2020 2022 2d30 3030 3134 325f         "-000142_
-00016100: 3430 302e 6e69 6922 2069 6e20 7363 616e  400.nii" in scan
-00016110: 735f 6469 7370 6c61 7965 6429 0a20 2020  s_displayed).   
-00016120: 2023 2073 656c 662e 6173 7365 7274 5472   # self.assertTr
-00016130: 7565 2822 6461 7461 2f72 6177 5f64 6174  ue("data/raw_dat
-00016140: 612f 4775 6572 6265 742d 4336 2d32 3031  a/Guerbet-C6-201
-00016150: 342d 5261 742d 4b35 322d 5475 6265 3237  4-Rat-K52-Tube27
-00016160: 220a 2020 2020 2320 2020 2020 2020 2020  ".    #         
-00016170: 2020 2020 2020 2022 2d32 3031 342d 3032         "-2014-02
-00016180: 2d31 3431 3032 3331 372d 3130 2d47 335f  -14102317-10-G3_
-00016190: 4775 6572 6265 745f 4d44 4546 542d 4d44  Guerbet_MDEFT-MD
-000161a0: 4546 5470 766d 220a 2020 2020 2320 2020  EFTpvm".    #   
-000161b0: 2020 2020 2020 2020 2020 2020 2022 2d30               "-0
-000161c0: 3030 3934 305f 3830 302e 6e69 6922 2069  00940_800.nii" i
-000161d0: 6e20 7363 616e 735f 6469 7370 6c61 7965  n scans_displaye
-000161e0: 6429 0a20 2020 2023 2073 656c 662e 6173  d).    # self.as
-000161f0: 7365 7274 5472 7565 2822 6461 7461 2f72  sertTrue("data/r
-00016200: 6177 5f64 6174 612f 4775 6572 6265 742d  aw_data/Guerbet-
-00016210: 4336 2d32 3031 342d 5261 742d 4b35 322d  C6-2014-Rat-K52-
-00016220: 5475 6265 3237 220a 2020 2020 2320 2020  Tube27".    #   
-00016230: 2020 2020 2020 2020 2020 2020 2022 2d32               "-2
-00016240: 3031 342d 3032 2d31 3431 3032 3331 372d  014-02-14102317-
-00016250: 3131 2d47 345f 4775 6572 6265 745f 5431  11-G4_Guerbet_T1
-00016260: 5345 5f38 3030 2d52 4152 4570 766d 220a  SE_800-RAREpvm".
-00016270: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00016280: 2020 2020 2022 2d30 3030 3134 325f 3430       "-000142_40
-00016290: 302e 6e69 6922 2069 6e20 7363 616e 735f  0.nii" in scans_
-000162a0: 6469 7370 6c61 7965 6429 0a20 2020 2023  displayed).    #
-000162b0: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
-000162c0: 2822 6461 7461 2f72 6177 5f64 6174 612f  ("data/raw_data/
-000162d0: 4775 6572 6265 742d 4336 2d32 3031 342d  Guerbet-C6-2014-
-000162e0: 5261 742d 4b35 322d 5475 6265 3237 220a  Rat-K52-Tube27".
-000162f0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00016300: 2020 2020 2022 2d32 3031 342d 3032 2d31       "-2014-02-1
-00016310: 3431 3032 3331 372d 3031 2d47 315f 4775  4102317-01-G1_Gu
-00016320: 6572 6265 745f 416e 6174 2d52 4152 4570  erbet_Anat-RAREp
-00016330: 766d 220a 2020 2020 2320 2020 2020 2020  vm".    #       
-00016340: 2020 2020 2020 2020 2022 2d30 3030 3232           "-00022
-00016350: 305f 3030 302e 6e69 6922 2069 6e20 7363  0_000.nii" in sc
-00016360: 616e 735f 6469 7370 6c61 7965 6429 0a0a  ans_displayed)..
-00016370: 2020 2020 6465 6620 7465 7374 5f72 656d      def test_rem
-00016380: 6f76 655f 7461 6728 7365 6c66 293a 0a20  ove_tag(self):. 
-00016390: 2020 2020 2020 2022 2222 5465 7374 7320         """Tests 
-000163a0: 7468 6520 706f 7075 7020 7265 6d6f 7669  the popup removi
-000163b0: 6e67 2075 7365 7220 7461 6773 2e22 2222  ng user tags."""
-000163c0: 0a0a 2020 2020 2020 2020 2320 4164 6469  ..        # Addi
-000163d0: 6e67 2061 2074 6167 2022 5465 7374 220a  ng a tag "Test".
-000163e0: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
-000163f0: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
-00016400: 6f77 7365 722e 6164 645f 7461 675f 6163  owser.add_tag_ac
-00016410: 7469 6f6e 2e74 7269 6767 6572 2829 0a20  tion.trigger(). 
-00016420: 2020 2020 2020 2061 6464 5f74 6167 203d         add_tag =
-00016430: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-00016440: 772e 6461 7461 5f62 726f 7773 6572 2e70  w.data_browser.p
-00016450: 6f70 5f75 705f 6164 645f 7461 670a 2020  op_up_add_tag.  
-00016460: 2020 2020 2020 6164 645f 7461 672e 7465        add_tag.te
-00016470: 7874 5f65 6469 745f 7461 675f 6e61 6d65  xt_edit_tag_name
-00016480: 2e73 6574 5465 7874 2822 5465 7374 2229  .setText("Test")
-00016490: 0a20 2020 2020 2020 2051 5465 7374 2e6d  .        QTest.m
-000164a0: 6f75 7365 436c 6963 6b28 6164 645f 7461  ouseClick(add_ta
-000164b0: 672e 7075 7368 5f62 7574 746f 6e5f 6f6b  g.push_button_ok
-000164c0: 2c20 5174 2e4c 6566 7442 7574 746f 6e29  , Qt.LeftButton)
-000164d0: 0a20 2020 2020 2020 206f 6c64 5f74 6167  .        old_tag
-000164e0: 735f 6375 7272 656e 7420 3d20 7365 6c66  s_current = self
-000164f0: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 726f  .main_window.pro
-00016500: 6a65 6374 2e73 6573 7369 6f6e 2e67 6574  ject.session.get
-00016510: 5f66 6965 6c64 735f 6e61 6d65 7328 0a20  _fields_names(. 
-00016520: 2020 2020 2020 2020 2020 2043 4f4c 4c45             COLLE
-00016530: 4354 494f 4e5f 4355 5252 454e 540a 2020  CTION_CURRENT.  
-00016540: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00016550: 6f6c 645f 7461 6773 5f69 6e69 7469 616c  old_tags_initial
-00016560: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
-00016570: 646f 772e 7072 6f6a 6563 742e 7365 7373  dow.project.sess
-00016580: 696f 6e2e 6765 745f 6669 656c 6473 5f6e  ion.get_fields_n
-00016590: 616d 6573 280a 2020 2020 2020 2020 2020  ames(.          
-000165a0: 2020 434f 4c4c 4543 5449 4f4e 5f49 4e49    COLLECTION_INI
-000165b0: 5449 414c 0a20 2020 2020 2020 2029 0a0a  TIAL.        )..
-000165c0: 2020 2020 2020 2020 2320 4f70 656e 2074          # Open t
-000165d0: 6865 2022 5265 6d6f 7665 2061 2074 6167  he "Remove a tag
-000165e0: 2220 706f 702d 7570 2062 7574 2064 6f20  " pop-up but do 
-000165f0: 6e6f 7468 696e 670a 2020 2020 2020 2020  nothing.        
-00016600: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00016610: 2e64 6174 615f 6272 6f77 7365 722e 7265  .data_browser.re
-00016620: 6d6f 7665 5f74 6167 5f61 6374 696f 6e2e  move_tag_action.
-00016630: 7472 6967 6765 7228 290a 2020 2020 2020  trigger().      
-00016640: 2020 7265 6d6f 7665 5f74 6167 203d 2073    remove_tag = s
-00016650: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00016660: 6461 7461 5f62 726f 7773 6572 2e70 6f70  data_browser.pop
-00016670: 5f75 705f 7265 6d6f 7665 5f74 6167 0a20  _up_remove_tag. 
-00016680: 2020 2020 2020 2051 5465 7374 2e6d 6f75         QTest.mou
-00016690: 7365 436c 6963 6b28 7265 6d6f 7665 5f74  seClick(remove_t
-000166a0: 6167 2e70 7573 685f 6275 7474 6f6e 5f6f  ag.push_button_o
-000166b0: 6b2c 2051 742e 4c65 6674 4275 7474 6f6e  k, Qt.LeftButton
-000166c0: 290a 2020 2020 2020 2020 6e65 775f 7461  ).        new_ta
-000166d0: 6773 5f63 7572 7265 6e74 203d 2073 656c  gs_current = sel
-000166e0: 662e 6d61 696e 5f77 696e 646f 772e 7072  f.main_window.pr
-000166f0: 6f6a 6563 742e 7365 7373 696f 6e2e 6765  oject.session.ge
-00016700: 745f 6669 656c 6473 5f6e 616d 6573 280a  t_fields_names(.
-00016710: 2020 2020 2020 2020 2020 2020 434f 4c4c              COLL
-00016720: 4543 5449 4f4e 5f43 5552 5245 4e54 0a20  ECTION_CURRENT. 
-00016730: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00016740: 206e 6577 5f74 6167 735f 696e 6974 6961   new_tags_initia
-00016750: 6c20 3d20 7365 6c66 2e6d 6169 6e5f 7769  l = self.main_wi
-00016760: 6e64 6f77 2e70 726f 6a65 6374 2e73 6573  ndow.project.ses
-00016770: 7369 6f6e 2e67 6574 5f66 6965 6c64 735f  sion.get_fields_
-00016780: 6e61 6d65 7328 0a20 2020 2020 2020 2020  names(.         
-00016790: 2020 2043 4f4c 4c45 4354 494f 4e5f 494e     COLLECTION_IN
-000167a0: 4954 4941 4c0a 2020 2020 2020 2020 290a  ITIAL.        ).
-000167b0: 0a20 2020 2020 2020 2023 2043 6865 636b  .        # Check
-000167c0: 2074 6861 7420 7468 6520 6c69 7374 206f   that the list o
-000167d0: 6620 7461 6773 2068 6173 206e 6f74 2063  f tags has not c
-000167e0: 6861 6e67 6564 0a20 2020 2020 2020 2073  hanged.        s
-000167f0: 656c 662e 6173 7365 7274 5472 7565 286f  elf.assertTrue(o
-00016800: 6c64 5f74 6167 735f 6375 7272 656e 7420  ld_tags_current 
-00016810: 3d3d 206e 6577 5f74 6167 735f 6375 7272  == new_tags_curr
-00016820: 656e 7429 0a20 2020 2020 2020 2073 656c  ent).        sel
-00016830: 662e 6173 7365 7274 5472 7565 286f 6c64  f.assertTrue(old
-00016840: 5f74 6167 735f 696e 6974 6961 6c20 3d3d  _tags_initial ==
-00016850: 206e 6577 5f74 6167 735f 696e 6974 6961   new_tags_initia
-00016860: 6c29 0a0a 2020 2020 2020 2020 6f6c 645f  l)..        old_
-00016870: 7461 6773 5f63 7572 7265 6e74 203d 2073  tags_current = s
-00016880: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00016890: 7072 6f6a 6563 742e 7365 7373 696f 6e2e  project.session.
-000168a0: 6765 745f 6669 656c 6473 5f6e 616d 6573  get_fields_names
-000168b0: 280a 2020 2020 2020 2020 2020 2020 434f  (.            CO
-000168c0: 4c4c 4543 5449 4f4e 5f43 5552 5245 4e54  LLECTION_CURRENT
-000168d0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-000168e0: 2020 206f 6c64 5f74 6167 735f 696e 6974     old_tags_init
-000168f0: 6961 6c20 3d20 7365 6c66 2e6d 6169 6e5f  ial = self.main_
-00016900: 7769 6e64 6f77 2e70 726f 6a65 6374 2e73  window.project.s
-00016910: 6573 7369 6f6e 2e67 6574 5f66 6965 6c64  ession.get_field
-00016920: 735f 6e61 6d65 7328 0a20 2020 2020 2020  s_names(.       
-00016930: 2020 2020 2043 4f4c 4c45 4354 494f 4e5f       COLLECTION_
-00016940: 494e 4954 4941 4c0a 2020 2020 2020 2020  INITIAL.        
-00016950: 290a 2020 2020 2020 2020 2320 4368 6563  ).        # Chec
-00016960: 6b20 7468 6174 2022 5465 7374 2220 7461  k that "Test" ta
-00016970: 6720 6973 2069 6e20 7468 6520 6c69 7374  g is in the list
-00016980: 206f 6620 7461 6773 0a20 2020 2020 2020   of tags.       
-00016990: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
-000169a0: 2822 5465 7374 2220 696e 206f 6c64 5f74  ("Test" in old_t
-000169b0: 6167 735f 6375 7272 656e 7429 0a20 2020  ags_current).   
-000169c0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-000169d0: 5472 7565 2822 5465 7374 2220 696e 206f  True("Test" in o
-000169e0: 6c64 5f74 6167 735f 696e 6974 6961 6c29  ld_tags_initial)
-000169f0: 0a0a 2020 2020 2020 2020 2320 4f70 656e  ..        # Open
-00016a00: 2074 6865 2022 5265 6d6f 7665 2061 2074   the "Remove a t
-00016a10: 6167 2220 706f 702d 7570 2061 6e64 2072  ag" pop-up and r
-00016a20: 656d 6f76 6520 2254 6573 7422 2074 6167  emove "Test" tag
-00016a30: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
-00016a40: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
-00016a50: 726f 7773 6572 2e72 656d 6f76 655f 7461  rowser.remove_ta
-00016a60: 675f 6163 7469 6f6e 2e74 7269 6767 6572  g_action.trigger
-00016a70: 2829 0a20 2020 2020 2020 2072 656d 6f76  ().        remov
-00016a80: 655f 7461 6720 3d20 7365 6c66 2e6d 6169  e_tag = self.mai
-00016a90: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
-00016aa0: 6f77 7365 722e 706f 705f 7570 5f72 656d  owser.pop_up_rem
-00016ab0: 6f76 655f 7461 670a 2020 2020 2020 2020  ove_tag.        
-00016ac0: 7265 6d6f 7665 5f74 6167 2e6c 6973 745f  remove_tag.list_
-00016ad0: 7769 6467 6574 5f74 6167 732e 7365 7443  widget_tags.setC
-00016ae0: 7572 7265 6e74 526f 7728 3029 2020 2320  urrentRow(0)  # 
-00016af0: 5465 7374 2074 6167 2073 656c 6563 7465  Test tag selecte
-00016b00: 640a 2020 2020 2020 2020 5154 6573 742e  d.        QTest.
-00016b10: 6d6f 7573 6543 6c69 636b 2872 656d 6f76  mouseClick(remov
-00016b20: 655f 7461 672e 7075 7368 5f62 7574 746f  e_tag.push_butto
-00016b30: 6e5f 6f6b 2c20 5174 2e4c 6566 7442 7574  n_ok, Qt.LeftBut
-00016b40: 746f 6e29 0a20 2020 2020 2020 206e 6577  ton).        new
-00016b50: 5f74 6167 735f 6375 7272 656e 7420 3d20  _tags_current = 
-00016b60: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00016b70: 2e70 726f 6a65 6374 2e73 6573 7369 6f6e  .project.session
-00016b80: 2e67 6574 5f66 6965 6c64 735f 6e61 6d65  .get_fields_name
-00016b90: 7328 0a20 2020 2020 2020 2020 2020 2043  s(.            C
-00016ba0: 4f4c 4c45 4354 494f 4e5f 4355 5252 454e  OLLECTION_CURREN
-00016bb0: 540a 2020 2020 2020 2020 290a 2020 2020  T.        ).    
-00016bc0: 2020 2020 6e65 775f 7461 6773 5f69 6e69      new_tags_ini
-00016bd0: 7469 616c 203d 2073 656c 662e 6d61 696e  tial = self.main
-00016be0: 5f77 696e 646f 772e 7072 6f6a 6563 742e  _window.project.
-00016bf0: 7365 7373 696f 6e2e 6765 745f 6669 656c  session.get_fiel
-00016c00: 6473 5f6e 616d 6573 280a 2020 2020 2020  ds_names(.      
-00016c10: 2020 2020 2020 434f 4c4c 4543 5449 4f4e        COLLECTION
-00016c20: 5f49 4e49 5449 414c 0a20 2020 2020 2020  _INITIAL.       
-00016c30: 2029 0a20 2020 2020 2020 2023 2043 6865   ).        # Che
-00016c40: 636b 2074 6861 7420 2254 6573 7422 2074  ck that "Test" t
-00016c50: 6167 2069 7320 6e6f 206c 6f6e 6765 7220  ag is no longer 
-00016c60: 696e 2074 6865 206c 6973 7420 6f66 2074  in the list of t
-00016c70: 6167 730a 2020 2020 2020 2020 7365 6c66  ags.        self
-00016c80: 2e61 7373 6572 7454 7275 6528 2254 6573  .assertTrue("Tes
-00016c90: 7422 206e 6f74 2069 6e20 6e65 775f 7461  t" not in new_ta
-00016ca0: 6773 5f63 7572 7265 6e74 290a 2020 2020  gs_current).    
-00016cb0: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
-00016cc0: 7275 6528 2254 6573 7422 206e 6f74 2069  rue("Test" not i
-00016cd0: 6e20 6e65 775f 7461 6773 5f69 6e69 7469  n new_tags_initi
-00016ce0: 616c 290a 0a20 2020 2064 6566 2074 6573  al)..    def tes
-00016cf0: 745f 7265 7365 745f 6365 6c6c 2873 656c  t_reset_cell(sel
-00016d00: 6629 3a0a 2020 2020 2020 2020 2222 2254  f):.        """T
-00016d10: 6573 7473 2074 6865 206d 6574 686f 6420  ests the method 
-00016d20: 7265 7365 7474 696e 6720 7468 6520 7365  resetting the se
-00016d30: 6c65 6374 6564 2063 656c 6c73 2e22 2222  lected cells."""
-00016d40: 0a0a 2020 2020 2020 2020 7072 6f6a 6563  ..        projec
-00016d50: 745f 385f 7061 7468 203d 2073 656c 662e  t_8_path = self.
-00016d60: 6765 745f 6e65 775f 7465 7374 5f70 726f  get_new_test_pro
-00016d70: 6a65 6374 2829 0a20 2020 2020 2020 2073  ject().        s
-00016d80: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00016d90: 7377 6974 6368 5f70 726f 6a65 6374 2870  switch_project(p
-00016da0: 726f 6a65 6374 5f38 5f70 6174 682c 2022  roject_8_path, "
-00016db0: 7072 6f6a 6563 745f 3822 290a 0a20 2020  project_8")..   
-00016dc0: 2020 2020 2023 2073 6361 6e20 6e61 6d65       # scan name
-00016dd0: 0a20 2020 2020 2020 2069 7465 6d20 3d20  .        item = 
-00016de0: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00016df0: 2e64 6174 615f 6272 6f77 7365 722e 7461  .data_browser.ta
-00016e00: 626c 655f 6461 7461 2e69 7465 6d28 302c  ble_data.item(0,
-00016e10: 2030 290a 2020 2020 2020 2020 7363 616e   0).        scan
-00016e20: 5f6e 616d 6520 3d20 6974 656d 2e74 6578  _name = item.tex
-00016e30: 7428 290a 0a20 2020 2020 2020 2023 2323  t()..        ###
-00016e40: 2054 6573 7420 666f 7220 6120 6c69 7374   Test for a list
-00016e50: 3a0a 2020 2020 2020 2020 2320 5661 6c75  :.        # Valu
-00016e60: 6573 2069 6e20 7468 6520 6462 0a20 2020  es in the db.   
-00016e70: 2020 2020 2076 616c 7565 203d 2066 6c6f       value = flo
-00016e80: 6174 280a 2020 2020 2020 2020 2020 2020  at(.            
-00016e90: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00016ea0: 2e70 726f 6a65 6374 2e73 6573 7369 6f6e  .project.session
-00016eb0: 2e67 6574 5f76 616c 7565 280a 2020 2020  .get_value(.    
-00016ec0: 2020 2020 2020 2020 2020 2020 434f 4c4c              COLL
-00016ed0: 4543 5449 4f4e 5f43 5552 5245 4e54 2c20  ECTION_CURRENT, 
-00016ee0: 7363 616e 5f6e 616d 652c 2022 4261 6e64  scan_name, "Band
-00016ef0: 5769 6474 6822 0a20 2020 2020 2020 2020  Width".         
-00016f00: 2020 2029 5b30 5d0a 2020 2020 2020 2020     )[0].        
-00016f10: 290a 2020 2020 2020 2020 7661 6c75 655f  ).        value_
-00016f20: 696e 6974 6961 6c20 3d20 666c 6f61 7428  initial = float(
-00016f30: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00016f40: 662e 6d61 696e 5f77 696e 646f 772e 7072  f.main_window.pr
-00016f50: 6f6a 6563 742e 7365 7373 696f 6e2e 6765  oject.session.ge
-00016f60: 745f 7661 6c75 6528 0a20 2020 2020 2020  t_value(.       
-00016f70: 2020 2020 2020 2020 2043 4f4c 4c45 4354           COLLECT
-00016f80: 494f 4e5f 494e 4954 4941 4c2c 2073 6361  ION_INITIAL, sca
-00016f90: 6e5f 6e61 6d65 2c20 2242 616e 6457 6964  n_name, "BandWid
-00016fa0: 7468 220a 2020 2020 2020 2020 2020 2020  th".            
-00016fb0: 295b 305d 0a20 2020 2020 2020 2029 0a0a  )[0].        )..
-00016fc0: 2020 2020 2020 2020 2320 5661 6c75 6520          # Value 
-00016fd0: 696e 2074 6865 2044 6174 6142 726f 7773  in the DataBrows
-00016fe0: 6572 0a20 2020 2020 2020 2062 616e 6477  er.        bandw
-00016ff0: 6964 7468 5f63 6f6c 756d 6e20 3d20 280a  idth_column = (.
-00017000: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00017010: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
-00017020: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
-00017030: 6461 7461 2e67 6574 5f74 6167 5f63 6f6c  data.get_tag_col
-00017040: 756d 6e0a 2020 2020 2020 2020 2928 2242  umn.        )("B
-00017050: 616e 6457 6964 7468 2229 0a20 2020 2020  andWidth").     
-00017060: 2020 2069 7465 6d20 3d20 7365 6c66 2e6d     item = self.m
-00017070: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
-00017080: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
-00017090: 7461 2e69 7465 6d28 0a20 2020 2020 2020  ta.item(.       
-000170a0: 2020 2020 2030 2c20 6261 6e64 7769 6474       0, bandwidt
-000170b0: 685f 636f 6c75 6d6e 0a20 2020 2020 2020  h_column.       
-000170c0: 2029 0a20 2020 2020 2020 2064 6174 6162   ).        datab
-000170d0: 726f 7773 6572 203d 2066 6c6f 6174 2869  rowser = float(i
-000170e0: 7465 6d2e 7465 7874 2829 5b31 3a2d 315d  tem.text()[1:-1]
-000170f0: 290a 0a20 2020 2020 2020 2023 2043 6865  )..        # Che
-00017100: 636b 2065 7175 616c 6974 7920 6265 7477  ck equality betw
-00017110: 6565 6e20 4461 7461 4272 6f77 7365 7220  een DataBrowser 
-00017120: 616e 6420 6462 0a20 2020 2020 2020 2073  and db.        s
-00017130: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00017140: 7661 6c75 652c 2066 6c6f 6174 2835 3030  value, float(500
-00017150: 3030 2929 0a20 2020 2020 2020 2073 656c  00)).        sel
-00017160: 662e 6173 7365 7274 4571 7561 6c28 7661  f.assertEqual(va
-00017170: 6c75 652c 2064 6174 6162 726f 7773 6572  lue, databrowser
-00017180: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-00017190: 7373 6572 7445 7175 616c 2876 616c 7565  ssertEqual(value
-000171a0: 2c20 7661 6c75 655f 696e 6974 6961 6c29  , value_initial)
-000171b0: 0a0a 2020 2020 2020 2020 2320 4368 616e  ..        # Chan
-000171c0: 6765 2074 6865 2076 616c 7565 0a20 2020  ge the value.   
-000171d0: 2020 2020 2069 7465 6d2e 7365 7453 656c       item.setSel
-000171e0: 6563 7465 6428 5472 7565 290a 2020 2020  ected(True).    
-000171f0: 2020 2020 7468 7265 6164 696e 672e 5469      threading.Ti
-00017200: 6d65 7228 0a20 2020 2020 2020 2020 2020  mer(.           
-00017210: 2032 2c20 7061 7274 6961 6c28 7365 6c66   2, partial(self
-00017220: 2e65 6469 745f 6461 7461 6272 6f77 7365  .edit_databrowse
-00017230: 725f 6c69 7374 2c20 2232 3530 3030 2229  r_list, "25000")
-00017240: 0a20 2020 2020 2020 2029 2e73 7461 7274  .        ).start
-00017250: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
-00017260: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
-00017270: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
-00017280: 6174 612e 6564 6974 5f74 6162 6c65 5f64  ata.edit_table_d
-00017290: 6174 615f 7661 6c75 6573 2829 0a0a 2020  ata_values()..  
-000172a0: 2020 2020 2020 2320 4368 6563 6b20 6167        # Check ag
-000172b0: 6169 6e20 7468 6520 6571 7561 6c69 7479  ain the equality
-000172c0: 2062 6574 7765 656e 2044 6174 6142 726f   between DataBro
-000172d0: 7773 6572 2061 6e64 2064 620a 2020 2020  wser and db.    
-000172e0: 2020 2020 7661 6c75 6520 3d20 666c 6f61      value = floa
-000172f0: 7428 0a20 2020 2020 2020 2020 2020 2073  t(.            s
-00017300: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00017310: 7072 6f6a 6563 742e 7365 7373 696f 6e2e  project.session.
-00017320: 6765 745f 7661 6c75 6528 0a20 2020 2020  get_value(.     
-00017330: 2020 2020 2020 2020 2020 2043 4f4c 4c45             COLLE
-00017340: 4354 494f 4e5f 4355 5252 454e 542c 2073  CTION_CURRENT, s
-00017350: 6361 6e5f 6e61 6d65 2c20 2242 616e 6457  can_name, "BandW
-00017360: 6964 7468 220a 2020 2020 2020 2020 2020  idth".          
-00017370: 2020 295b 305d 0a20 2020 2020 2020 2029    )[0].        )
-00017380: 0a20 2020 2020 2020 2076 616c 7565 5f69  .        value_i
-00017390: 6e69 7469 616c 203d 2066 6c6f 6174 280a  nitial = float(.
-000173a0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000173b0: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 726f  .main_window.pro
-000173c0: 6a65 6374 2e73 6573 7369 6f6e 2e67 6574  ject.session.get
-000173d0: 5f76 616c 7565 280a 2020 2020 2020 2020  _value(.        
-000173e0: 2020 2020 2020 2020 434f 4c4c 4543 5449          COLLECTI
-000173f0: 4f4e 5f49 4e49 5449 414c 2c20 7363 616e  ON_INITIAL, scan
-00017400: 5f6e 616d 652c 2022 4261 6e64 5769 6474  _name, "BandWidt
-00017410: 6822 0a20 2020 2020 2020 2020 2020 2029  h".            )
-00017420: 5b30 5d0a 2020 2020 2020 2020 290a 2020  [0].        ).  
-00017430: 2020 2020 2020 6974 656d 203d 2073 656c        item = sel
-00017440: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
-00017450: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
-00017460: 5f64 6174 612e 6974 656d 280a 2020 2020  _data.item(.    
-00017470: 2020 2020 2020 2020 302c 2062 616e 6477          0, bandw
-00017480: 6964 7468 5f63 6f6c 756d 6e0a 2020 2020  idth_column.    
-00017490: 2020 2020 290a 2020 2020 2020 2020 6461      ).        da
-000174a0: 7461 6272 6f77 7365 7220 3d20 666c 6f61  tabrowser = floa
-000174b0: 7428 6974 656d 2e74 6578 7428 295b 313a  t(item.text()[1:
-000174c0: 2d31 5d29 0a20 2020 2020 2020 2073 656c  -1]).        sel
-000174d0: 662e 6173 7365 7274 4571 7561 6c28 7661  f.assertEqual(va
-000174e0: 6c75 652c 2066 6c6f 6174 2832 3530 3030  lue, float(25000
-000174f0: 2929 0a20 2020 2020 2020 2073 656c 662e  )).        self.
-00017500: 6173 7365 7274 4571 7561 6c28 7661 6c75  assertEqual(valu
-00017510: 652c 2064 6174 6162 726f 7773 6572 290a  e, databrowser).
-00017520: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00017530: 6572 7445 7175 616c 2876 616c 7565 5f69  ertEqual(value_i
-00017540: 6e69 7469 616c 2c20 666c 6f61 7428 3530  nitial, float(50
-00017550: 3030 3029 290a 0a20 2020 2020 2020 2023  000))..        #
-00017560: 2052 6573 6574 2074 6865 2063 7572 7265   Reset the curre
-00017570: 6e74 2076 616c 7565 2074 6f20 7468 6520  nt value to the 
-00017580: 696e 6974 6961 6c20 7661 6c75 650a 2020  initial value.  
-00017590: 2020 2020 2020 6974 656d 203d 2073 656c        item = sel
-000175a0: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
-000175b0: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
-000175c0: 5f64 6174 612e 6974 656d 280a 2020 2020  _data.item(.    
-000175d0: 2020 2020 2020 2020 302c 2062 616e 6477          0, bandw
-000175e0: 6964 7468 5f63 6f6c 756d 6e0a 2020 2020  idth_column.    
-000175f0: 2020 2020 290a 2020 2020 2020 2020 6974      ).        it
-00017600: 656d 2e73 6574 5365 6c65 6374 6564 2854  em.setSelected(T
-00017610: 7275 6529 0a20 2020 2020 2020 2073 656c  rue).        sel
-00017620: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
-00017630: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
-00017640: 5f64 6174 612e 6974 656d 4368 616e 6765  _data.itemChange
-00017650: 642e 6469 7363 6f6e 6e65 6374 2829 0a20  d.disconnect(). 
-00017660: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
-00017670: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
-00017680: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
-00017690: 7265 7365 745f 6365 6c6c 2829 0a20 2020  reset_cell().   
-000176a0: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
-000176b0: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
-000176c0: 6572 2e74 6162 6c65 5f64 6174 612e 6974  er.table_data.it
-000176d0: 656d 4368 616e 6765 642e 636f 6e6e 6563  emChanged.connec
-000176e0: 7428 0a20 2020 2020 2020 2020 2020 2073  t(.            s
-000176f0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00017700: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
-00017710: 6c65 5f64 6174 612e 6368 616e 6765 5f63  le_data.change_c
-00017720: 656c 6c5f 636f 6c6f 720a 2020 2020 2020  ell_color.      
-00017730: 2020 290a 2020 2020 2020 2020 6974 656d    ).        item
-00017740: 2e73 6574 5365 6c65 6374 6564 2846 616c  .setSelected(Fal
-00017750: 7365 290a 0a20 2020 2020 2020 2023 2043  se)..        # C
-00017760: 6865 636b 2077 6865 7468 6572 2074 6865  heck whether the
-00017770: 2064 6174 6120 6861 7320 6265 656e 2072   data has been r
-00017780: 6573 6574 0a20 2020 2020 2020 2076 616c  eset.        val
-00017790: 7565 203d 2066 6c6f 6174 280a 2020 2020  ue = float(.    
-000177a0: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
-000177b0: 6e5f 7769 6e64 6f77 2e70 726f 6a65 6374  n_window.project
-000177c0: 2e73 6573 7369 6f6e 2e67 6574 5f76 616c  .session.get_val
-000177d0: 7565 280a 2020 2020 2020 2020 2020 2020  ue(.            
-000177e0: 2020 2020 434f 4c4c 4543 5449 4f4e 5f43      COLLECTION_C
-000177f0: 5552 5245 4e54 2c20 7363 616e 5f6e 616d  URRENT, scan_nam
-00017800: 652c 2022 4261 6e64 5769 6474 6822 0a20  e, "BandWidth". 
-00017810: 2020 2020 2020 2020 2020 2029 5b30 5d0a             )[0].
-00017820: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00017830: 2020 7661 6c75 655f 696e 6974 6961 6c20    value_initial 
-00017840: 3d20 666c 6f61 7428 0a20 2020 2020 2020  = float(.       
-00017850: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
-00017860: 696e 646f 772e 7072 6f6a 6563 742e 7365  indow.project.se
-00017870: 7373 696f 6e2e 6765 745f 7661 6c75 6528  ssion.get_value(
-00017880: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00017890: 2043 4f4c 4c45 4354 494f 4e5f 494e 4954   COLLECTION_INIT
-000178a0: 4941 4c2c 2073 6361 6e5f 6e61 6d65 2c20  IAL, scan_name, 
-000178b0: 2242 616e 6457 6964 7468 220a 2020 2020  "BandWidth".    
-000178c0: 2020 2020 2020 2020 295b 305d 0a20 2020          )[0].   
-000178d0: 2020 2020 2029 0a20 2020 2020 2020 2069       ).        i
-000178e0: 7465 6d20 3d20 7365 6c66 2e6d 6169 6e5f  tem = self.main_
-000178f0: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
-00017900: 7365 722e 7461 626c 655f 6461 7461 2e69  ser.table_data.i
-00017910: 7465 6d28 0a20 2020 2020 2020 2020 2020  tem(.           
-00017920: 2030 2c20 6261 6e64 7769 6474 685f 636f   0, bandwidth_co
-00017930: 6c75 6d6e 0a20 2020 2020 2020 2029 0a20  lumn.        ). 
-00017940: 2020 2020 2020 2064 6174 6162 726f 7773         databrows
-00017950: 6572 203d 2066 6c6f 6174 2869 7465 6d2e  er = float(item.
-00017960: 7465 7874 2829 5b31 3a2d 315d 290a 2020  text()[1:-1]).  
-00017970: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00017980: 7445 7175 616c 2876 616c 7565 2c20 666c  tEqual(value, fl
-00017990: 6f61 7428 3530 3030 3029 290a 2020 2020  oat(50000)).    
-000179a0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-000179b0: 7175 616c 2876 616c 7565 2c20 6461 7461  qual(value, data
-000179c0: 6272 6f77 7365 7229 0a20 2020 2020 2020  browser).       
-000179d0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-000179e0: 6c28 7661 6c75 652c 2076 616c 7565 5f69  l(value, value_i
-000179f0: 6e69 7469 616c 290a 0a20 2020 2020 2020  nitial)..       
-00017a00: 2023 2323 2054 6573 7420 666f 7220 6120   ### Test for a 
-00017a10: 7374 7269 6e67 3a0a 2020 2020 2020 2020  string:.        
-00017a20: 2320 5661 6c75 6573 2069 6e20 7468 6520  # Values in the 
-00017a30: 6462 0a20 2020 2020 2020 2076 616c 7565  db.        value
-00017a40: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
-00017a50: 646f 772e 7072 6f6a 6563 742e 7365 7373  dow.project.sess
-00017a60: 696f 6e2e 6765 745f 7661 6c75 6528 0a20  ion.get_value(. 
-00017a70: 2020 2020 2020 2020 2020 2043 4f4c 4c45             COLLE
-00017a80: 4354 494f 4e5f 4355 5252 454e 542c 2073  CTION_CURRENT, s
-00017a90: 6361 6e5f 6e61 6d65 2c20 2254 7970 6522  can_name, "Type"
-00017aa0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00017ab0: 2020 2076 616c 7565 5f69 6e69 7469 616c     value_initial
-00017ac0: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
-00017ad0: 646f 772e 7072 6f6a 6563 742e 7365 7373  dow.project.sess
-00017ae0: 696f 6e2e 6765 745f 7661 6c75 6528 0a20  ion.get_value(. 
-00017af0: 2020 2020 2020 2020 2020 2043 4f4c 4c45             COLLE
-00017b00: 4354 494f 4e5f 494e 4954 4941 4c2c 2073  CTION_INITIAL, s
-00017b10: 6361 6e5f 6e61 6d65 2c20 2254 7970 6522  can_name, "Type"
-00017b20: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-00017b30: 2020 2020 2320 5661 6c75 6520 696e 2074      # Value in t
-00017b40: 6865 2044 6174 6142 726f 7773 6572 0a20  he DataBrowser. 
-00017b50: 2020 2020 2020 2074 7970 655f 636f 6c75         type_colu
-00017b60: 6d6e 203d 2028 0a20 2020 2020 2020 2020  mn = (.         
-00017b70: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
-00017b80: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
-00017b90: 2e74 6162 6c65 5f64 6174 612e 6765 745f  .table_data.get_
-00017ba0: 7461 675f 636f 6c75 6d6e 0a20 2020 2020  tag_column.     
-00017bb0: 2020 2029 2822 5479 7065 2229 0a20 2020     )("Type").   
-00017bc0: 2020 2020 2069 7465 6d20 3d20 7365 6c66       item = self
-00017bd0: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
-00017be0: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
-00017bf0: 6461 7461 2e69 7465 6d28 302c 2074 7970  data.item(0, typ
-00017c00: 655f 636f 6c75 6d6e 290a 2020 2020 2020  e_column).      
-00017c10: 2020 6461 7461 6272 6f77 7365 7220 3d20    databrowser = 
-00017c20: 6974 656d 2e74 6578 7428 290a 0a20 2020  item.text()..   
-00017c30: 2020 2020 2023 2043 6865 636b 2065 7175       # Check equ
-00017c40: 616c 6974 7920 6265 7477 6565 6e20 4461  ality between Da
-00017c50: 7461 4272 6f77 7365 7220 616e 6420 6462  taBrowser and db
-00017c60: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00017c70: 7365 7274 4571 7561 6c28 7661 6c75 652c  sertEqual(value,
-00017c80: 2022 5363 616e 2229 0a20 2020 2020 2020   "Scan").       
-00017c90: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00017ca0: 6c28 7661 6c75 652c 2064 6174 6162 726f  l(value, databro
-00017cb0: 7773 6572 290a 2020 2020 2020 2020 7365  wser).        se
-00017cc0: 6c66 2e61 7373 6572 7445 7175 616c 2876  lf.assertEqual(v
-00017cd0: 616c 7565 2c20 7661 6c75 655f 696e 6974  alue, value_init
-00017ce0: 6961 6c29 0a0a 2020 2020 2020 2020 2320  ial)..        # 
-00017cf0: 4368 616e 6765 2074 6865 2076 616c 7565  Change the value
-00017d00: 0a20 2020 2020 2020 2069 7465 6d2e 7365  .        item.se
-00017d10: 7453 656c 6563 7465 6428 5472 7565 290a  tSelected(True).
-00017d20: 2020 2020 2020 2020 6974 656d 2e73 6574          item.set
-00017d30: 5465 7874 2822 5465 7374 2229 0a20 2020  Text("Test").   
-00017d40: 2020 2020 2069 7465 6d2e 7365 7453 656c       item.setSel
-00017d50: 6563 7465 6428 4661 6c73 6529 0a0a 2020  ected(False)..  
-00017d60: 2020 2020 2020 2320 4368 6563 6b20 6167        # Check ag
-00017d70: 6169 6e20 7468 6520 6571 7561 6c69 7479  ain the equality
-00017d80: 2062 6574 7765 656e 2044 6174 6142 726f   between DataBro
-00017d90: 7773 6572 2061 6e64 2064 620a 2020 2020  wser and db.    
-00017da0: 2020 2020 7661 6c75 6520 3d20 7365 6c66      value = self
-00017db0: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 726f  .main_window.pro
-00017dc0: 6a65 6374 2e73 6573 7369 6f6e 2e67 6574  ject.session.get
-00017dd0: 5f76 616c 7565 280a 2020 2020 2020 2020  _value(.        
-00017de0: 2020 2020 434f 4c4c 4543 5449 4f4e 5f43      COLLECTION_C
-00017df0: 5552 5245 4e54 2c20 7363 616e 5f6e 616d  URRENT, scan_nam
-00017e00: 652c 2022 5479 7065 220a 2020 2020 2020  e, "Type".      
-00017e10: 2020 290a 2020 2020 2020 2020 7661 6c75    ).        valu
-00017e20: 655f 696e 6974 6961 6c20 3d20 7365 6c66  e_initial = self
-00017e30: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 726f  .main_window.pro
-00017e40: 6a65 6374 2e73 6573 7369 6f6e 2e67 6574  ject.session.get
-00017e50: 5f76 616c 7565 280a 2020 2020 2020 2020  _value(.        
-00017e60: 2020 2020 434f 4c4c 4543 5449 4f4e 5f49      COLLECTION_I
-00017e70: 4e49 5449 414c 2c20 7363 616e 5f6e 616d  NITIAL, scan_nam
-00017e80: 652c 2022 5479 7065 220a 2020 2020 2020  e, "Type".      
-00017e90: 2020 290a 2020 2020 2020 2020 6974 656d    ).        item
-00017ea0: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
-00017eb0: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
-00017ec0: 2e74 6162 6c65 5f64 6174 612e 6974 656d  .table_data.item
-00017ed0: 2830 2c20 7479 7065 5f63 6f6c 756d 6e29  (0, type_column)
-00017ee0: 0a0a 2020 2020 2020 2020 6461 7461 6272  ..        databr
-00017ef0: 6f77 7365 7220 3d20 6974 656d 2e74 6578  owser = item.tex
-00017f00: 7428 290a 0a20 2020 2020 2020 2073 656c  t()..        sel
-00017f10: 662e 6173 7365 7274 4571 7561 6c28 7661  f.assertEqual(va
-00017f20: 6c75 652c 2022 5465 7374 2229 0a20 2020  lue, "Test").   
-00017f30: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00017f40: 4571 7561 6c28 7661 6c75 652c 2064 6174  Equal(value, dat
-00017f50: 6162 726f 7773 6572 290a 2020 2020 2020  abrowser).      
-00017f60: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00017f70: 616c 2876 616c 7565 5f69 6e69 7469 616c  al(value_initial
-00017f80: 2c20 2253 6361 6e22 290a 0a20 2020 2020  , "Scan")..     
-00017f90: 2020 2023 2052 6573 6574 2074 6865 2063     # Reset the c
-00017fa0: 7572 7265 6e74 2076 616c 7565 2074 6f20  urrent value to 
-00017fb0: 7468 6520 696e 6974 6961 6c20 7661 6c75  the initial valu
-00017fc0: 650a 2020 2020 2020 2020 6974 656d 203d  e.        item =
-00017fd0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-00017fe0: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
-00017ff0: 6162 6c65 5f64 6174 612e 6974 656d 2830  able_data.item(0
-00018000: 2c20 7479 7065 5f63 6f6c 756d 6e29 0a20  , type_column). 
-00018010: 2020 2020 2020 2069 7465 6d2e 7365 7453         item.setS
-00018020: 656c 6563 7465 6428 5472 7565 290a 2020  elected(True).  
-00018030: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-00018040: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
-00018050: 7365 722e 7461 626c 655f 6461 7461 2e69  ser.table_data.i
-00018060: 7465 6d43 6861 6e67 6564 2e64 6973 636f  temChanged.disco
-00018070: 6e6e 6563 7428 290a 2020 2020 2020 2020  nnect().        
-00018080: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00018090: 2e64 6174 615f 6272 6f77 7365 722e 7461  .data_browser.ta
-000180a0: 626c 655f 6461 7461 2e72 6573 6574 5f63  ble_data.reset_c
-000180b0: 656c 6c28 290a 2020 2020 2020 2020 7365  ell().        se
-000180c0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
-000180d0: 6174 615f 6272 6f77 7365 722e 7461 626c  ata_browser.tabl
-000180e0: 655f 6461 7461 2e69 7465 6d43 6861 6e67  e_data.itemChang
-000180f0: 6564 2e63 6f6e 6e65 6374 280a 2020 2020  ed.connect(.    
-00018100: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
-00018110: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
-00018120: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
-00018130: 2e63 6861 6e67 655f 6365 6c6c 5f63 6f6c  .change_cell_col
-00018140: 6f72 0a20 2020 2020 2020 2029 0a20 2020  or.        ).   
-00018150: 2020 2020 2069 7465 6d2e 7365 7453 656c       item.setSel
-00018160: 6563 7465 6428 4661 6c73 6529 0a0a 2020  ected(False)..  
-00018170: 2020 2020 2020 2320 4368 6563 6b20 7768        # Check wh
-00018180: 6574 6865 7220 7468 6520 6461 7461 2068  ether the data h
-00018190: 6173 2062 6565 6e20 7265 7365 740a 2020  as been reset.  
-000181a0: 2020 2020 2020 7661 6c75 6520 3d20 7365        value = se
-000181b0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
-000181c0: 726f 6a65 6374 2e73 6573 7369 6f6e 2e67  roject.session.g
-000181d0: 6574 5f76 616c 7565 280a 2020 2020 2020  et_value(.      
-000181e0: 2020 2020 2020 434f 4c4c 4543 5449 4f4e        COLLECTION
-000181f0: 5f43 5552 5245 4e54 2c20 7363 616e 5f6e  _CURRENT, scan_n
-00018200: 616d 652c 2022 5479 7065 220a 2020 2020  ame, "Type".    
-00018210: 2020 2020 290a 2020 2020 2020 2020 7661      ).        va
-00018220: 6c75 655f 696e 6974 6961 6c20 3d20 7365  lue_initial = se
-00018230: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
-00018240: 726f 6a65 6374 2e73 6573 7369 6f6e 2e67  roject.session.g
-00018250: 6574 5f76 616c 7565 280a 2020 2020 2020  et_value(.      
-00018260: 2020 2020 2020 434f 4c4c 4543 5449 4f4e        COLLECTION
-00018270: 5f49 4e49 5449 414c 2c20 7363 616e 5f6e  _INITIAL, scan_n
-00018280: 616d 652c 2022 5479 7065 220a 2020 2020  ame, "Type".    
-00018290: 2020 2020 290a 2020 2020 2020 2020 6974      ).        it
-000182a0: 656d 203d 2073 656c 662e 6d61 696e 5f77  em = self.main_w
-000182b0: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
-000182c0: 6572 2e74 6162 6c65 5f64 6174 612e 6974  er.table_data.it
-000182d0: 656d 2830 2c20 7479 7065 5f63 6f6c 756d  em(0, type_colum
-000182e0: 6e29 0a20 2020 2020 2020 2064 6174 6162  n).        datab
-000182f0: 726f 7773 6572 203d 2069 7465 6d2e 7465  rowser = item.te
-00018300: 7874 2829 0a20 2020 2020 2020 2073 656c  xt().        sel
-00018310: 662e 6173 7365 7274 4571 7561 6c28 7661  f.assertEqual(va
-00018320: 6c75 652c 2022 5363 616e 2229 0a20 2020  lue, "Scan").   
-00018330: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00018340: 4571 7561 6c28 7661 6c75 652c 2064 6174  Equal(value, dat
-00018350: 6162 726f 7773 6572 290a 2020 2020 2020  abrowser).      
-00018360: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00018370: 616c 2876 616c 7565 2c20 7661 6c75 655f  al(value, value_
-00018380: 696e 6974 6961 6c29 0a0a 2020 2020 6465  initial)..    de
-00018390: 6620 7465 7374 5f72 6573 6574 5f63 6f6c  f test_reset_col
-000183a0: 756d 6e28 7365 6c66 293a 0a20 2020 2020  umn(self):.     
-000183b0: 2020 2022 2222 5465 7374 7320 7468 6520     """Tests the 
-000183c0: 6d65 7468 6f64 2072 6573 6574 7469 6e67  method resetting
-000183d0: 2074 6865 2063 6f6c 756d 6e73 2073 656c   the columns sel
-000183e0: 6563 7465 642e 2222 220a 0a20 2020 2020  ected."""..     
-000183f0: 2020 2070 726f 6a65 6374 5f38 5f70 6174     project_8_pat
-00018400: 6820 3d20 7365 6c66 2e67 6574 5f6e 6577  h = self.get_new
-00018410: 5f74 6573 745f 7072 6f6a 6563 7428 290a  _test_project().
-00018420: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
-00018430: 6e5f 7769 6e64 6f77 2e73 7769 7463 685f  n_window.switch_
-00018440: 7072 6f6a 6563 7428 7072 6f6a 6563 745f  project(project_
-00018450: 385f 7061 7468 2c20 2270 726f 6a65 6374  8_path, "project
-00018460: 5f38 2229 0a0a 2020 2020 2020 2020 2320  _8")..        # 
-00018470: 5365 636f 6e64 2064 6f63 756d 656e 743b  Second document;
-00018480: 2073 6361 6e20 6e61 6d65 0a20 2020 2020   scan name.     
-00018490: 2020 2069 7465 6d20 3d20 7365 6c66 2e6d     item = self.m
-000184a0: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
-000184b0: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
-000184c0: 7461 2e69 7465 6d28 312c 2030 290a 2020  ta.item(1, 0).  
-000184d0: 2020 2020 2020 7363 616e 5f6e 616d 6532        scan_name2
-000184e0: 203d 2069 7465 6d2e 7465 7874 2829 0a0a   = item.text()..
-000184f0: 2020 2020 2020 2020 2320 5365 636f 6e64          # Second
-00018500: 2064 6f63 756d 656e 743b 2076 616c 7565   document; value
-00018510: 7320 696e 2074 6865 2064 620a 2020 2020  s in the db.    
-00018520: 2020 2020 7661 6c75 6520 3d20 666c 6f61      value = floa
-00018530: 7428 0a20 2020 2020 2020 2020 2020 2073  t(.            s
-00018540: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00018550: 7072 6f6a 6563 742e 7365 7373 696f 6e2e  project.session.
-00018560: 6765 745f 7661 6c75 6528 0a20 2020 2020  get_value(.     
-00018570: 2020 2020 2020 2020 2020 2043 4f4c 4c45             COLLE
-00018580: 4354 494f 4e5f 4355 5252 454e 542c 2073  CTION_CURRENT, s
-00018590: 6361 6e5f 6e61 6d65 322c 2022 4261 6e64  can_name2, "Band
-000185a0: 5769 6474 6822 0a20 2020 2020 2020 2020  Width".         
-000185b0: 2020 2029 5b30 5d0a 2020 2020 2020 2020     )[0].        
-000185c0: 290a 2020 2020 2020 2020 7661 6c75 655f  ).        value_
-000185d0: 696e 6974 6961 6c20 3d20 666c 6f61 7428  initial = float(
-000185e0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-000185f0: 662e 6d61 696e 5f77 696e 646f 772e 7072  f.main_window.pr
-00018600: 6f6a 6563 742e 7365 7373 696f 6e2e 6765  oject.session.ge
-00018610: 745f 7661 6c75 6528 0a20 2020 2020 2020  t_value(.       
-00018620: 2020 2020 2020 2020 2043 4f4c 4c45 4354           COLLECT
-00018630: 494f 4e5f 494e 4954 4941 4c2c 2073 6361  ION_INITIAL, sca
-00018640: 6e5f 6e61 6d65 322c 2022 4261 6e64 5769  n_name2, "BandWi
-00018650: 6474 6822 0a20 2020 2020 2020 2020 2020  dth".           
-00018660: 2029 5b30 5d0a 2020 2020 2020 2020 290a   )[0].        ).
-00018670: 0a20 2020 2020 2020 2023 2053 6563 6f6e  .        # Secon
-00018680: 6420 646f 6375 6d65 6e74 3b20 7661 6c75  d document; valu
-00018690: 6520 696e 2074 6865 2044 6174 6142 726f  e in the DataBro
-000186a0: 7773 6572 0a20 2020 2020 2020 2062 616e  wser.        ban
-000186b0: 6477 6964 7468 5f63 6f6c 756d 6e20 3d20  dwidth_column = 
-000186c0: 280a 2020 2020 2020 2020 2020 2020 7365  (.            se
-000186d0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
-000186e0: 6174 615f 6272 6f77 7365 722e 7461 626c  ata_browser.tabl
-000186f0: 655f 6461 7461 2e67 6574 5f74 6167 5f63  e_data.get_tag_c
-00018700: 6f6c 756d 6e0a 2020 2020 2020 2020 2928  olumn.        )(
-00018710: 2242 616e 6457 6964 7468 2229 0a20 2020  "BandWidth").   
-00018720: 2020 2020 2069 7465 6d32 203d 2073 656c       item2 = sel
-00018730: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
-00018740: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
-00018750: 5f64 6174 612e 6974 656d 280a 2020 2020  _data.item(.    
-00018760: 2020 2020 2020 2020 312c 2062 616e 6477          1, bandw
-00018770: 6964 7468 5f63 6f6c 756d 6e0a 2020 2020  idth_column.    
-00018780: 2020 2020 290a 2020 2020 2020 2020 6461      ).        da
-00018790: 7461 6272 6f77 7365 7220 3d20 666c 6f61  tabrowser = floa
-000187a0: 7428 6974 656d 322e 7465 7874 2829 5b31  t(item2.text()[1
-000187b0: 3a2d 315d 290a 0a20 2020 2020 2020 2023  :-1])..        #
-000187c0: 2043 6865 636b 2065 7175 616c 6974 7920   Check equality 
-000187d0: 6265 7477 6565 6e20 4461 7461 4272 6f77  between DataBrow
-000187e0: 7365 7220 616e 6420 6462 2066 6f72 2073  ser and db for s
-000187f0: 6563 6f6e 6420 646f 6375 6d65 6e74 0a20  econd document. 
-00018800: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00018810: 7274 4571 7561 6c28 7661 6c75 652c 2066  rtEqual(value, f
-00018820: 6c6f 6174 2835 3030 3030 2929 0a20 2020  loat(50000)).   
-00018830: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00018840: 4571 7561 6c28 7661 6c75 652c 2064 6174  Equal(value, dat
-00018850: 6162 726f 7773 6572 290a 2020 2020 2020  abrowser).      
-00018860: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00018870: 616c 2876 616c 7565 2c20 7661 6c75 655f  al(value, value_
-00018880: 696e 6974 6961 6c29 0a20 2020 2020 2020  initial).       
-00018890: 2069 7465 6d32 2e73 6574 5365 6c65 6374   item2.setSelect
-000188a0: 6564 2854 7275 6529 0a0a 2020 2020 2020  ed(True)..      
-000188b0: 2020 2320 5468 6972 6420 646f 6375 6d65    # Third docume
-000188c0: 6e74 3b20 7363 616e 206e 616d 650a 2020  nt; scan name.  
-000188d0: 2020 2020 2020 6974 656d 203d 2073 656c        item = sel
-000188e0: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
-000188f0: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
-00018900: 5f64 6174 612e 6974 656d 2832 2c20 3029  _data.item(2, 0)
-00018910: 0a20 2020 2020 2020 2073 6361 6e5f 6e61  .        scan_na
-00018920: 6d65 3320 3d20 6974 656d 2e74 6578 7428  me3 = item.text(
-00018930: 290a 0a20 2020 2020 2020 2023 2054 6869  )..        # Thi
-00018940: 7264 2064 6f63 756d 656e 743b 2076 616c  rd document; val
-00018950: 7565 7320 696e 2074 6865 2064 620a 2020  ues in the db.  
-00018960: 2020 2020 2020 7661 6c75 6520 3d20 666c        value = fl
-00018970: 6f61 7428 0a20 2020 2020 2020 2020 2020  oat(.           
-00018980: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-00018990: 772e 7072 6f6a 6563 742e 7365 7373 696f  w.project.sessio
-000189a0: 6e2e 6765 745f 7661 6c75 6528 0a20 2020  n.get_value(.   
-000189b0: 2020 2020 2020 2020 2020 2020 2043 4f4c               COL
-000189c0: 4c45 4354 494f 4e5f 4355 5252 454e 542c  LECTION_CURRENT,
-000189d0: 2073 6361 6e5f 6e61 6d65 332c 2022 4261   scan_name3, "Ba
-000189e0: 6e64 5769 6474 6822 0a20 2020 2020 2020  ndWidth".       
-000189f0: 2020 2020 2029 5b30 5d0a 2020 2020 2020       )[0].      
-00018a00: 2020 290a 2020 2020 2020 2020 7661 6c75    ).        valu
-00018a10: 655f 696e 6974 6961 6c20 3d20 666c 6f61  e_initial = floa
-00018a20: 7428 0a20 2020 2020 2020 2020 2020 2073  t(.            s
-00018a30: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00018a40: 7072 6f6a 6563 742e 7365 7373 696f 6e2e  project.session.
-00018a50: 6765 745f 7661 6c75 6528 0a20 2020 2020  get_value(.     
-00018a60: 2020 2020 2020 2020 2020 2043 4f4c 4c45             COLLE
-00018a70: 4354 494f 4e5f 494e 4954 4941 4c2c 2073  CTION_INITIAL, s
-00018a80: 6361 6e5f 6e61 6d65 332c 2022 4261 6e64  can_name3, "Band
-00018a90: 5769 6474 6822 0a20 2020 2020 2020 2020  Width".         
-00018aa0: 2020 2029 5b30 5d0a 2020 2020 2020 2020     )[0].        
-00018ab0: 290a 0a20 2020 2020 2020 2023 2054 6869  )..        # Thi
-00018ac0: 7264 2064 6f63 756d 656e 743b 2076 616c  rd document; val
-00018ad0: 7565 2069 6e20 7468 6520 4461 7461 4272  ue in the DataBr
-00018ae0: 6f77 7365 720a 2020 2020 2020 2020 6974  owser.        it
-00018af0: 656d 3320 3d20 7365 6c66 2e6d 6169 6e5f  em3 = self.main_
-00018b00: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
-00018b10: 7365 722e 7461 626c 655f 6461 7461 2e69  ser.table_data.i
-00018b20: 7465 6d28 0a20 2020 2020 2020 2020 2020  tem(.           
-00018b30: 2032 2c20 6261 6e64 7769 6474 685f 636f   2, bandwidth_co
-00018b40: 6c75 6d6e 0a20 2020 2020 2020 2029 0a0a  lumn.        )..
-00018b50: 2020 2020 2020 2020 2320 4368 6563 6b20          # Check 
-00018b60: 6571 7561 6c69 7479 2062 6574 7765 656e  equality between
-00018b70: 2044 6174 6142 726f 7773 6572 2061 6e64   DataBrowser and
-00018b80: 2064 6220 666f 7220 7468 6972 6420 646f   db for third do
-00018b90: 6375 6d65 6e74 0a20 2020 2020 2020 2064  cument.        d
-00018ba0: 6174 6162 726f 7773 6572 203d 2066 6c6f  atabrowser = flo
-00018bb0: 6174 2869 7465 6d33 2e74 6578 7428 295b  at(item3.text()[
-00018bc0: 313a 2d31 5d29 0a20 2020 2020 2020 2073  1:-1]).        s
-00018bd0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00018be0: 7661 6c75 652c 2066 6c6f 6174 2832 3530  value, float(250
-00018bf0: 3030 2929 0a20 2020 2020 2020 2073 656c  00)).        sel
-00018c00: 662e 6173 7365 7274 4571 7561 6c28 7661  f.assertEqual(va
-00018c10: 6c75 652c 2064 6174 6162 726f 7773 6572  lue, databrowser
-00018c20: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-00018c30: 7373 6572 7445 7175 616c 2876 616c 7565  ssertEqual(value
-00018c40: 2c20 7661 6c75 655f 696e 6974 6961 6c29  , value_initial)
-00018c50: 0a20 2020 2020 2020 2069 7465 6d33 2e73  .        item3.s
-00018c60: 6574 5365 6c65 6374 6564 2854 7275 6529  etSelected(True)
-00018c70: 0a0a 2020 2020 2020 2020 2320 4368 616e  ..        # Chan
-00018c80: 6765 2074 6865 2076 616c 7565 2074 6f20  ge the value to 
-00018c90: 5b37 3030 3030 5d20 666f 7220 7468 6520  [70000] for the 
-00018ca0: 7468 6972 6420 616e 6420 7365 636f 6e64  third and second
-00018cb0: 2064 6f63 756d 656e 7473 0a20 2020 2020   documents.     
-00018cc0: 2020 2074 6872 6561 6469 6e67 2e54 696d     threading.Tim
-00018cd0: 6572 280a 2020 2020 2020 2020 2020 2020  er(.            
-00018ce0: 322c 2070 6172 7469 616c 2873 656c 662e  2, partial(self.
-00018cf0: 6564 6974 5f64 6174 6162 726f 7773 6572  edit_databrowser
-00018d00: 5f6c 6973 742c 2022 3730 3030 3022 290a  _list, "70000").
-00018d10: 2020 2020 2020 2020 292e 7374 6172 7428          ).start(
-00018d20: 290a 2020 2020 2020 2020 7365 6c66 2e6d  ).        self.m
-00018d30: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
-00018d40: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
-00018d50: 7461 2e65 6469 745f 7461 626c 655f 6461  ta.edit_table_da
-00018d60: 7461 5f76 616c 7565 7328 290a 0a20 2020  ta_values()..   
-00018d70: 2020 2020 2023 2053 6563 6f6e 6420 646f       # Second do
-00018d80: 6375 6d65 6e74 3b20 7661 6c75 6573 2069  cument; values i
-00018d90: 6e20 7468 6520 6462 0a20 2020 2020 2020  n the db.       
-00018da0: 2076 616c 7565 203d 2066 6c6f 6174 280a   value = float(.
-00018db0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00018dc0: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 726f  .main_window.pro
-00018dd0: 6a65 6374 2e73 6573 7369 6f6e 2e67 6574  ject.session.get
-00018de0: 5f76 616c 7565 280a 2020 2020 2020 2020  _value(.        
-00018df0: 2020 2020 2020 2020 434f 4c4c 4543 5449          COLLECTI
-00018e00: 4f4e 5f43 5552 5245 4e54 2c20 7363 616e  ON_CURRENT, scan
-00018e10: 5f6e 616d 6532 2c20 2242 616e 6457 6964  _name2, "BandWid
-00018e20: 7468 220a 2020 2020 2020 2020 2020 2020  th".            
-00018e30: 295b 305d 0a20 2020 2020 2020 2029 0a20  )[0].        ). 
-00018e40: 2020 2020 2020 2076 616c 7565 5f69 6e69         value_ini
-00018e50: 7469 616c 203d 2066 6c6f 6174 280a 2020  tial = float(.  
-00018e60: 2020 2020 2020 2020 2020 7365 6c66 2e6d            self.m
-00018e70: 6169 6e5f 7769 6e64 6f77 2e70 726f 6a65  ain_window.proje
-00018e80: 6374 2e73 6573 7369 6f6e 2e67 6574 5f76  ct.session.get_v
-00018e90: 616c 7565 280a 2020 2020 2020 2020 2020  alue(.          
-00018ea0: 2020 2020 2020 434f 4c4c 4543 5449 4f4e        COLLECTION
-00018eb0: 5f49 4e49 5449 414c 2c20 7363 616e 5f6e  _INITIAL, scan_n
-00018ec0: 616d 6532 2c20 2242 616e 6457 6964 7468  ame2, "BandWidth
-00018ed0: 220a 2020 2020 2020 2020 2020 2020 295b  ".            )[
-00018ee0: 305d 0a20 2020 2020 2020 2029 0a20 2020  0].        ).   
-00018ef0: 2020 2020 2023 2053 6563 6f6e 6420 646f       # Second do
-00018f00: 6375 6d65 6e74 3b20 7661 6c75 6520 696e  cument; value in
-00018f10: 2074 6865 2044 6174 6142 726f 7773 6572   the DataBrowser
-00018f20: 0a20 2020 2020 2020 2069 7465 6d32 203d  .        item2 =
-00018f30: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-00018f40: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
-00018f50: 6162 6c65 5f64 6174 612e 6974 656d 280a  able_data.item(.
-00018f60: 2020 2020 2020 2020 2020 2020 312c 2062              1, b
-00018f70: 616e 6477 6964 7468 5f63 6f6c 756d 6e0a  andwidth_column.
-00018f80: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00018f90: 2020 6461 7461 6272 6f77 7365 7220 3d20    databrowser = 
-00018fa0: 666c 6f61 7428 6974 656d 322e 7465 7874  float(item2.text
-00018fb0: 2829 5b31 3a2d 315d 290a 0a20 2020 2020  ()[1:-1])..     
-00018fc0: 2020 2023 2043 6865 636b 2065 7175 616c     # Check equal
-00018fd0: 6974 7920 6265 7477 6565 6e20 4461 7461  ity between Data
-00018fe0: 4272 6f77 7365 7220 616e 6420 6462 2066  Browser and db f
-00018ff0: 6f72 2073 6563 6f6e 6420 646f 6375 6d65  or second docume
-00019000: 6e74 0a20 2020 2020 2020 2073 656c 662e  nt.        self.
-00019010: 6173 7365 7274 4571 7561 6c28 7661 6c75  assertEqual(valu
-00019020: 652c 2066 6c6f 6174 2837 3030 3030 2929  e, float(70000))
-00019030: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00019040: 7365 7274 4571 7561 6c28 7661 6c75 652c  sertEqual(value,
-00019050: 2064 6174 6162 726f 7773 6572 290a 2020   databrowser).  
-00019060: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00019070: 7445 7175 616c 2866 6c6f 6174 2835 3030  tEqual(float(500
-00019080: 3030 292c 2076 616c 7565 5f69 6e69 7469  00), value_initi
-00019090: 616c 290a 2020 2020 2020 2020 6974 656d  al).        item
-000190a0: 322e 7365 7453 656c 6563 7465 6428 5472  2.setSelected(Tr
-000190b0: 7565 290a 0a20 2020 2020 2020 2023 2054  ue)..        # T
-000190c0: 6869 7264 2064 6f63 756d 656e 743b 2076  hird document; v
-000190d0: 616c 7565 7320 696e 2074 6865 2064 620a  alues in the db.
-000190e0: 2020 2020 2020 2020 7661 6c75 6520 3d20          value = 
-000190f0: 666c 6f61 7428 0a20 2020 2020 2020 2020  float(.         
-00019100: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
-00019110: 646f 772e 7072 6f6a 6563 742e 7365 7373  dow.project.sess
-00019120: 696f 6e2e 6765 745f 7661 6c75 6528 0a20  ion.get_value(. 
-00019130: 2020 2020 2020 2020 2020 2020 2020 2043                 C
-00019140: 4f4c 4c45 4354 494f 4e5f 4355 5252 454e  OLLECTION_CURREN
-00019150: 542c 2073 6361 6e5f 6e61 6d65 332c 2022  T, scan_name3, "
-00019160: 4261 6e64 5769 6474 6822 0a20 2020 2020  BandWidth".     
-00019170: 2020 2020 2020 2029 5b30 5d0a 2020 2020         )[0].    
-00019180: 2020 2020 290a 2020 2020 2020 2020 7661      ).        va
-00019190: 6c75 655f 696e 6974 6961 6c20 3d20 666c  lue_initial = fl
-000191a0: 6f61 7428 0a20 2020 2020 2020 2020 2020  oat(.           
-000191b0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-000191c0: 772e 7072 6f6a 6563 742e 7365 7373 696f  w.project.sessio
-000191d0: 6e2e 6765 745f 7661 6c75 6528 0a20 2020  n.get_value(.   
-000191e0: 2020 2020 2020 2020 2020 2020 2043 4f4c               COL
-000191f0: 4c45 4354 494f 4e5f 494e 4954 4941 4c2c  LECTION_INITIAL,
-00019200: 2073 6361 6e5f 6e61 6d65 332c 2022 4261   scan_name3, "Ba
-00019210: 6e64 5769 6474 6822 0a20 2020 2020 2020  ndWidth".       
-00019220: 2020 2020 2029 5b30 5d0a 2020 2020 2020       )[0].      
-00019230: 2020 290a 0a20 2020 2020 2020 2023 2054    )..        # T
-00019240: 6869 7264 2064 6f63 756d 656e 743b 2076  hird document; v
-00019250: 616c 7565 2069 6e20 7468 6520 4461 7461  alue in the Data
-00019260: 4272 6f77 7365 720a 2020 2020 2020 2020  Browser.        
-00019270: 6974 656d 3320 3d20 7365 6c66 2e6d 6169  item3 = self.mai
-00019280: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
-00019290: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
-000192a0: 2e69 7465 6d28 0a20 2020 2020 2020 2020  .item(.         
-000192b0: 2020 2032 2c20 6261 6e64 7769 6474 685f     2, bandwidth_
-000192c0: 636f 6c75 6d6e 0a20 2020 2020 2020 2029  column.        )
-000192d0: 0a20 2020 2020 2020 2064 6174 6162 726f  .        databro
-000192e0: 7773 6572 203d 2066 6c6f 6174 2869 7465  wser = float(ite
-000192f0: 6d33 2e74 6578 7428 295b 313a 2d31 5d29  m3.text()[1:-1])
-00019300: 0a0a 2020 2020 2020 2020 2320 4368 6563  ..        # Chec
-00019310: 6b20 7661 6c75 6520 696e 2064 6174 6162  k value in datab
-00019320: 6173 6520 666f 7220 7468 6520 7468 6972  ase for the thir
-00019330: 6420 646f 6375 6d65 6e74 0a20 2020 2020  d document.     
-00019340: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00019350: 7561 6c28 7661 6c75 652c 2066 6c6f 6174  ual(value, float
-00019360: 2837 3030 3030 2929 0a20 2020 2020 2020  (70000)).       
-00019370: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00019380: 6c28 7661 6c75 652c 2064 6174 6162 726f  l(value, databro
-00019390: 7773 6572 290a 2020 2020 2020 2020 7365  wser).        se
-000193a0: 6c66 2e61 7373 6572 7445 7175 616c 2876  lf.assertEqual(v
-000193b0: 616c 7565 5f69 6e69 7469 616c 2c20 666c  alue_initial, fl
-000193c0: 6f61 7428 3235 3030 3029 290a 2020 2020  oat(25000)).    
-000193d0: 2020 2020 6974 656d 332e 7365 7453 656c      item3.setSel
-000193e0: 6563 7465 6428 5472 7565 290a 0a20 2020  ected(True)..   
-000193f0: 2020 2020 2023 2052 6573 6574 2074 6865       # Reset the
-00019400: 2063 7572 7265 6e74 2076 616c 7565 2074   current value t
-00019410: 6f20 7468 6520 696e 6974 6961 6c20 7661  o the initial va
-00019420: 6c75 650a 2020 2020 2020 2020 7365 6c66  lue.        self
-00019430: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
-00019440: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
-00019450: 6461 7461 2e69 7465 6d43 6861 6e67 6564  data.itemChanged
-00019460: 2e64 6973 636f 6e6e 6563 7428 290a 2020  .disconnect().  
-00019470: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-00019480: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
-00019490: 7365 722e 7461 626c 655f 6461 7461 2e72  ser.table_data.r
-000194a0: 6573 6574 5f63 6f6c 756d 6e28 290a 2020  eset_column().  
-000194b0: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-000194c0: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
-000194d0: 7365 722e 7461 626c 655f 6461 7461 2e69  ser.table_data.i
-000194e0: 7465 6d43 6861 6e67 6564 2e63 6f6e 6e65  temChanged.conne
-000194f0: 6374 280a 2020 2020 2020 2020 2020 2020  ct(.            
-00019500: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00019510: 2e64 6174 615f 6272 6f77 7365 722e 7461  .data_browser.ta
-00019520: 626c 655f 6461 7461 2e63 6861 6e67 655f  ble_data.change_
-00019530: 6365 6c6c 5f63 6f6c 6f72 0a20 2020 2020  cell_color.     
-00019540: 2020 2029 0a0a 2020 2020 2020 2020 2320     )..        # 
-00019550: 4368 6563 6b20 7468 6520 7661 6c75 6520  Check the value 
-00019560: 696e 2074 6865 2064 6220 616e 6420 4461  in the db and Da
-00019570: 7461 4272 6f77 7365 7220 666f 7220 7468  taBrowser for th
-00019580: 6520 7365 636f 6e64 2064 6f63 756d 656e  e second documen
-00019590: 740a 2020 2020 2020 2020 2320 6861 7320  t.        # has 
-000195a0: 6265 656e 2072 6573 6574 0a20 2020 2020  been reset.     
-000195b0: 2020 2076 616c 7565 203d 2066 6c6f 6174     value = float
-000195c0: 280a 2020 2020 2020 2020 2020 2020 7365  (.            se
-000195d0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
-000195e0: 726f 6a65 6374 2e73 6573 7369 6f6e 2e67  roject.session.g
-000195f0: 6574 5f76 616c 7565 280a 2020 2020 2020  et_value(.      
-00019600: 2020 2020 2020 2020 2020 434f 4c4c 4543            COLLEC
-00019610: 5449 4f4e 5f43 5552 5245 4e54 2c20 7363  TION_CURRENT, sc
-00019620: 616e 5f6e 616d 6532 2c20 2242 616e 6457  an_name2, "BandW
-00019630: 6964 7468 220a 2020 2020 2020 2020 2020  idth".          
-00019640: 2020 295b 305d 0a20 2020 2020 2020 2029    )[0].        )
-00019650: 0a20 2020 2020 2020 2076 616c 7565 5f69  .        value_i
-00019660: 6e69 7469 616c 203d 2066 6c6f 6174 280a  nitial = float(.
-00019670: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00019680: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 726f  .main_window.pro
-00019690: 6a65 6374 2e73 6573 7369 6f6e 2e67 6574  ject.session.get
-000196a0: 5f76 616c 7565 280a 2020 2020 2020 2020  _value(.        
-000196b0: 2020 2020 2020 2020 434f 4c4c 4543 5449          COLLECTI
-000196c0: 4f4e 5f49 4e49 5449 414c 2c20 7363 616e  ON_INITIAL, scan
-000196d0: 5f6e 616d 6532 2c20 2242 616e 6457 6964  _name2, "BandWid
-000196e0: 7468 220a 2020 2020 2020 2020 2020 2020  th".            
-000196f0: 295b 305d 0a20 2020 2020 2020 2029 0a20  )[0].        ). 
-00019700: 2020 2020 2020 2069 7465 6d32 203d 2073         item2 = s
-00019710: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00019720: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
-00019730: 6c65 5f64 6174 612e 6974 656d 280a 2020  le_data.item(.  
-00019740: 2020 2020 2020 2020 2020 312c 2062 616e            1, ban
-00019750: 6477 6964 7468 5f63 6f6c 756d 6e0a 2020  dwidth_column.  
-00019760: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00019770: 6461 7461 6272 6f77 7365 7220 3d20 666c  databrowser = fl
-00019780: 6f61 7428 6974 656d 322e 7465 7874 2829  oat(item2.text()
-00019790: 5b31 3a2d 315d 290a 2020 2020 2020 2020  [1:-1]).        
-000197a0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-000197b0: 2876 616c 7565 2c20 666c 6f61 7428 3530  (value, float(50
-000197c0: 3030 3029 290a 2020 2020 2020 2020 7365  000)).        se
-000197d0: 6c66 2e61 7373 6572 7445 7175 616c 2876  lf.assertEqual(v
-000197e0: 616c 7565 2c20 6461 7461 6272 6f77 7365  alue, databrowse
-000197f0: 7229 0a20 2020 2020 2020 2073 656c 662e  r).        self.
-00019800: 6173 7365 7274 4571 7561 6c28 7661 6c75  assertEqual(valu
-00019810: 652c 2076 616c 7565 5f69 6e69 7469 616c  e, value_initial
-00019820: 290a 0a20 2020 2020 2020 2023 2043 6865  )..        # Che
-00019830: 636b 2074 6865 2076 616c 7565 2069 6e20  ck the value in 
-00019840: 7468 6520 6462 2061 6e64 2044 6174 6142  the db and DataB
-00019850: 726f 7773 6572 2066 6f72 2074 6865 2074  rowser for the t
-00019860: 6869 7264 2064 6f63 756d 656e 740a 2020  hird document.  
-00019870: 2020 2020 2020 2320 6861 7320 6265 656e        # has been
-00019880: 2072 6573 6574 0a20 2020 2020 2020 2076   reset.        v
-00019890: 616c 7565 203d 2066 6c6f 6174 280a 2020  alue = float(.  
-000198a0: 2020 2020 2020 2020 2020 7365 6c66 2e6d            self.m
-000198b0: 6169 6e5f 7769 6e64 6f77 2e70 726f 6a65  ain_window.proje
-000198c0: 6374 2e73 6573 7369 6f6e 2e67 6574 5f76  ct.session.get_v
-000198d0: 616c 7565 280a 2020 2020 2020 2020 2020  alue(.          
-000198e0: 2020 2020 2020 434f 4c4c 4543 5449 4f4e        COLLECTION
-000198f0: 5f43 5552 5245 4e54 2c20 7363 616e 5f6e  _CURRENT, scan_n
-00019900: 616d 6533 2c20 2242 616e 6457 6964 7468  ame3, "BandWidth
-00019910: 220a 2020 2020 2020 2020 2020 2020 295b  ".            )[
-00019920: 305d 0a20 2020 2020 2020 2029 0a20 2020  0].        ).   
-00019930: 2020 2020 2076 616c 7565 5f69 6e69 7469       value_initi
-00019940: 616c 203d 2066 6c6f 6174 280a 2020 2020  al = float(.    
-00019950: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
-00019960: 6e5f 7769 6e64 6f77 2e70 726f 6a65 6374  n_window.project
-00019970: 2e73 6573 7369 6f6e 2e67 6574 5f76 616c  .session.get_val
-00019980: 7565 280a 2020 2020 2020 2020 2020 2020  ue(.            
-00019990: 2020 2020 434f 4c4c 4543 5449 4f4e 5f49      COLLECTION_I
-000199a0: 4e49 5449 414c 2c20 7363 616e 5f6e 616d  NITIAL, scan_nam
-000199b0: 6533 2c20 2242 616e 6457 6964 7468 220a  e3, "BandWidth".
-000199c0: 2020 2020 2020 2020 2020 2020 295b 305d              )[0]
-000199d0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-000199e0: 2020 2069 7465 6d33 203d 2073 656c 662e     item3 = self.
-000199f0: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
-00019a00: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
-00019a10: 6174 612e 6974 656d 280a 2020 2020 2020  ata.item(.      
-00019a20: 2020 2020 2020 322c 2062 616e 6477 6964        2, bandwid
-00019a30: 7468 5f63 6f6c 756d 6e0a 2020 2020 2020  th_column.      
-00019a40: 2020 290a 2020 2020 2020 2020 6461 7461    ).        data
-00019a50: 6272 6f77 7365 7220 3d20 666c 6f61 7428  browser = float(
-00019a60: 6974 656d 332e 7465 7874 2829 5b31 3a2d  item3.text()[1:-
-00019a70: 315d 290a 2020 2020 2020 2020 7365 6c66  1]).        self
-00019a80: 2e61 7373 6572 7445 7175 616c 2876 616c  .assertEqual(val
-00019a90: 7565 2c20 666c 6f61 7428 3235 3030 3029  ue, float(25000)
-00019aa0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-00019ab0: 7373 6572 7445 7175 616c 2876 616c 7565  ssertEqual(value
-00019ac0: 2c20 6461 7461 6272 6f77 7365 7229 0a20  , databrowser). 
-00019ad0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00019ae0: 7274 4571 7561 6c28 7661 6c75 652c 2076  rtEqual(value, v
-00019af0: 616c 7565 5f69 6e69 7469 616c 290a 0a20  alue_initial).. 
-00019b00: 2020 2064 6566 2074 6573 745f 7265 7365     def test_rese
-00019b10: 745f 726f 7728 7365 6c66 293a 0a20 2020  t_row(self):.   
-00019b20: 2020 2020 2022 2222 5465 7374 7320 726f       """Tests ro
-00019b30: 7720 7265 7365 742e 2222 220a 0a20 2020  w reset."""..   
-00019b40: 2020 2020 2070 726f 6a65 6374 5f38 5f70       project_8_p
-00019b50: 6174 6820 3d20 7365 6c66 2e67 6574 5f6e  ath = self.get_n
-00019b60: 6577 5f74 6573 745f 7072 6f6a 6563 7428  ew_test_project(
-00019b70: 290a 2020 2020 2020 2020 7365 6c66 2e6d  ).        self.m
-00019b80: 6169 6e5f 7769 6e64 6f77 2e73 7769 7463  ain_window.switc
-00019b90: 685f 7072 6f6a 6563 7428 7072 6f6a 6563  h_project(projec
-00019ba0: 745f 385f 7061 7468 2c20 2270 726f 6a65  t_8_path, "proje
-00019bb0: 6374 5f38 2229 0a0a 2020 2020 2020 2020  ct_8")..        
-00019bc0: 2320 5661 6c75 6520 696e 2044 6174 6142  # Value in DataB
-00019bd0: 726f 7773 6572 2066 6f72 2074 6865 2073  rowser for the s
-00019be0: 6563 6f6e 6420 646f 6375 6d65 6e74 0a20  econd document. 
-00019bf0: 2020 2020 2020 2074 7970 655f 636f 6c75         type_colu
-00019c00: 6d6e 203d 2028 0a20 2020 2020 2020 2020  mn = (.         
-00019c10: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
-00019c20: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
-00019c30: 2e74 6162 6c65 5f64 6174 612e 6765 745f  .table_data.get_
-00019c40: 7461 675f 636f 6c75 6d6e 0a20 2020 2020  tag_column.     
-00019c50: 2020 2029 2822 5479 7065 2229 0a20 2020     )("Type").   
-00019c60: 2020 2020 2074 7970 655f 6974 656d 203d       type_item =
-00019c70: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-00019c80: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
-00019c90: 6162 6c65 5f64 6174 612e 6974 656d 280a  able_data.item(.
-00019ca0: 2020 2020 2020 2020 2020 2020 312c 2074              1, t
-00019cb0: 7970 655f 636f 6c75 6d6e 0a20 2020 2020  ype_column.     
-00019cc0: 2020 2029 0a20 2020 2020 2020 206f 6c64     ).        old
-00019cd0: 5f74 7970 6520 3d20 7479 7065 5f69 7465  _type = type_ite
-00019ce0: 6d2e 7465 7874 2829 0a0a 2020 2020 2020  m.text()..      
-00019cf0: 2020 2320 4368 6563 6b20 7661 6c75 6520    # Check value 
-00019d00: 696e 2044 6174 6142 726f 7773 6572 2066  in DataBrowser f
-00019d10: 6f72 2074 6865 2073 6563 6f6e 6420 646f  or the second do
-00019d20: 6375 6d65 6e74 0a20 2020 2020 2020 2073  cument.        s
-00019d30: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00019d40: 6f6c 645f 7479 7065 2c20 2253 6361 6e22  old_type, "Scan"
-00019d50: 290a 0a20 2020 2020 2020 2023 2043 6861  )..        # Cha
-00019d60: 6e67 6520 7468 6520 7661 6c75 650a 2020  nge the value.  
-00019d70: 2020 2020 2020 7479 7065 5f69 7465 6d2e        type_item.
-00019d80: 7365 7453 656c 6563 7465 6428 5472 7565  setSelected(True
-00019d90: 290a 2020 2020 2020 2020 7479 7065 5f69  ).        type_i
-00019da0: 7465 6d2e 7365 7454 6578 7428 2254 6573  tem.setText("Tes
-00019db0: 7422 290a 0a20 2020 2020 2020 2023 2043  t")..        # C
-00019dc0: 6865 636b 2069 6620 7661 6c75 6520 696e  heck if value in
-00019dd0: 2044 6174 6142 726f 7773 6572 2061 7320   DataBrowser as 
-00019de0: 6265 656e 2063 6861 6e67 6564 0a20 2020  been changed.   
-00019df0: 2020 2020 2073 6574 5f69 7465 6d20 3d20       set_item = 
-00019e00: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00019e10: 2e64 6174 615f 6272 6f77 7365 722e 7461  .data_browser.ta
-00019e20: 626c 655f 6461 7461 2e69 7465 6d28 0a20  ble_data.item(. 
-00019e30: 2020 2020 2020 2020 2020 2031 2c20 7479             1, ty
-00019e40: 7065 5f63 6f6c 756d 6e0a 2020 2020 2020  pe_column.      
-00019e50: 2020 290a 2020 2020 2020 2020 7365 745f    ).        set_
-00019e60: 7479 7065 203d 2073 6574 5f69 7465 6d2e  type = set_item.
-00019e70: 7465 7874 2829 0a20 2020 2020 2020 2073  text().        s
-00019e80: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00019e90: 7365 745f 7479 7065 2c20 2254 6573 7422  set_type, "Test"
-00019ea0: 290a 0a20 2020 2020 2020 2023 2052 6573  )..        # Res
-00019eb0: 6574 2072 6f77 2066 6f72 2073 6563 6f6e  et row for secon
-00019ec0: 6420 646f 6375 6d65 6e74 0a20 2020 2020  d document.     
-00019ed0: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
-00019ee0: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
-00019ef0: 2e74 6162 6c65 5f64 6174 612e 636c 6561  .table_data.clea
-00019f00: 7253 656c 6563 7469 6f6e 2829 0a20 2020  rSelection().   
-00019f10: 2020 2020 2069 7465 6d20 3d20 7365 6c66       item = self
-00019f20: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
-00019f30: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
-00019f40: 6461 7461 2e69 7465 6d28 312c 2030 290a  data.item(1, 0).
-00019f50: 2020 2020 2020 2020 6974 656d 2e73 6574          item.set
-00019f60: 5365 6c65 6374 6564 2854 7275 6529 0a20  Selected(True). 
-00019f70: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
-00019f80: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
-00019f90: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
-00019fa0: 6974 656d 4368 616e 6765 642e 6469 7363  itemChanged.disc
-00019fb0: 6f6e 6e65 6374 2829 0a20 2020 2020 2020  onnect().       
-00019fc0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-00019fd0: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
-00019fe0: 6162 6c65 5f64 6174 612e 7265 7365 745f  able_data.reset_
-00019ff0: 726f 7728 290a 2020 2020 2020 2020 7365  row().        se
-0001a000: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
-0001a010: 6174 615f 6272 6f77 7365 722e 7461 626c  ata_browser.tabl
-0001a020: 655f 6461 7461 2e69 7465 6d43 6861 6e67  e_data.itemChang
-0001a030: 6564 2e63 6f6e 6e65 6374 280a 2020 2020  ed.connect(.    
-0001a040: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
-0001a050: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
-0001a060: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
-0001a070: 2e63 6861 6e67 655f 6365 6c6c 5f63 6f6c  .change_cell_col
-0001a080: 6f72 0a20 2020 2020 2020 2029 0a0a 2020  or.        )..  
-0001a090: 2020 2020 2020 2320 4368 6563 6b20 6966        # Check if
-0001a0a0: 2076 616c 7565 2069 6e20 4461 7461 4272   value in DataBr
-0001a0b0: 6f77 7365 7220 6173 2062 6565 6e20 7265  owser as been re
-0001a0c0: 7365 740a 2020 2020 2020 2020 7479 7065  set.        type
-0001a0d0: 5f69 7465 6d20 3d20 7365 6c66 2e6d 6169  _item = self.mai
-0001a0e0: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
-0001a0f0: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
-0001a100: 2e69 7465 6d28 0a20 2020 2020 2020 2020  .item(.         
-0001a110: 2020 2031 2c20 7479 7065 5f63 6f6c 756d     1, type_colum
-0001a120: 6e0a 2020 2020 2020 2020 290a 2020 2020  n.        ).    
-0001a130: 2020 2020 6e65 775f 7479 7065 203d 2074      new_type = t
-0001a140: 7970 655f 6974 656d 2e74 6578 7428 290a  ype_item.text().
-0001a150: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0001a160: 6572 7445 7175 616c 286e 6577 5f74 7970  ertEqual(new_typ
-0001a170: 652c 2022 5363 616e 2229 0a0a 2020 2020  e, "Scan")..    
-0001a180: 6465 6620 7465 7374 5f73 6176 655f 7072  def test_save_pr
-0001a190: 6f6a 6563 7428 7365 6c66 293a 0a20 2020  oject(self):.   
-0001a1a0: 2020 2020 2022 2222 5465 7374 206f 7065       """Test ope
-0001a1b0: 6e69 6e67 2026 2073 6176 696e 6720 6f66  ning & saving of
-0001a1c0: 2061 2070 726f 6a65 6374 2e22 2222 0a0a   a project."""..
-0001a1d0: 2020 2020 2020 2020 636f 6e66 6967 203d          config =
-0001a1e0: 2043 6f6e 6669 6728 636f 6e66 6967 5f70   Config(config_p
-0001a1f0: 6174 683d 7365 6c66 2e63 6f6e 6669 675f  ath=self.config_
-0001a200: 7061 7468 290a 2020 2020 2020 2020 7072  path).        pr
-0001a210: 6f6a 6563 7473 5f64 6972 203d 206f 732e  ojects_dir = os.
-0001a220: 7061 7468 2e72 6561 6c70 6174 6828 0a20  path.realpath(. 
-0001a230: 2020 2020 2020 2020 2020 2074 656d 7066             tempf
-0001a240: 696c 652e 6d6b 6474 656d 7028 7072 6566  ile.mkdtemp(pref
-0001a250: 6978 3d22 7072 6f6a 6563 7473 5f74 6573  ix="projects_tes
-0001a260: 7473 2229 0a20 2020 2020 2020 2029 0a0a  ts").        )..
-0001a270: 2020 2020 2020 2020 2320 496e 7374 6561          # Instea
-0001a280: 6420 6f66 2065 7865 6375 7469 6e67 2074  d of executing t
-0001a290: 6865 2070 6f70 2d75 702c 206f 6e6c 7920  he pop-up, only 
-0001a2a0: 7368 6f77 7320 6974 0a20 2020 2020 2020  shows it.       
-0001a2b0: 2023 2054 6869 7320 7072 6576 656e 7473   # This prevents
-0001a2c0: 2074 6872 6561 6420 6465 6164 6c6f 636b   thread deadlock
-0001a2d0: 696e 670a 2020 2020 2020 2020 514d 6573  ing.        QMes
-0001a2e0: 7361 6765 426f 782e 6578 6563 203d 206c  sageBox.exec = l
-0001a2f0: 616d 6264 6120 7365 6c66 5f3a 2073 656c  ambda self_: sel
-0001a300: 665f 2e73 686f 7728 290a 0a20 2020 2020  f_.show()..     
-0001a310: 2020 2023 2054 7269 6573 2074 6f20 6f70     # Tries to op
-0001a320: 656e 2074 6865 2070 726f 6a65 6374 2070  en the project p
-0001a330: 6f70 2d75 7020 7769 7468 6f75 7420 7468  op-up without th
-0001a340: 6520 7072 6f6a 6563 7473 2073 6176 6520  e projects save 
-0001a350: 6469 720a 2020 2020 2020 2020 636f 6e66  dir.        conf
-0001a360: 6967 2e73 6574 5f70 726f 6a65 6374 735f  ig.set_projects_
-0001a370: 7361 7665 5f70 6174 6828 4e6f 6e65 290a  save_path(None).
-0001a380: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
-0001a390: 6e5f 7769 6e64 6f77 2e63 7265 6174 655f  n_window.create_
-0001a3a0: 7072 6f6a 6563 745f 706f 705f 7570 2829  project_pop_up()
-0001a3b0: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
-0001a3c0: 696e 5f77 696e 646f 772e 6d73 672e 6163  in_window.msg.ac
-0001a3d0: 6365 7074 2829 0a0a 2020 2020 2020 2020  cept()..        
-0001a3e0: 2320 5472 6965 7320 746f 2073 6176 6520  # Tries to save 
-0001a3f0: 7468 6520 7072 6f6a 6563 7420 2773 6f6d  the project 'som
-0001a400: 6574 6869 6e67 2720 7769 7468 6f75 7420  ething' without 
-0001a410: 7365 7474 696e 6720 7468 650a 2020 2020  setting the.    
-0001a420: 2020 2020 2320 7072 6f6a 6563 7473 2073      # projects s
-0001a430: 6176 6520 6469 7265 6374 6f72 790a 2020  ave directory.  
-0001a440: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-0001a450: 7769 6e64 6f77 2e73 6176 6543 686f 6963  window.saveChoic
-0001a460: 6528 290a 2020 2020 2020 2020 7365 6c66  e().        self
-0001a470: 2e6d 6169 6e5f 7769 6e64 6f77 2e6d 7367  .main_window.msg
-0001a480: 2e61 6363 6570 7428 290a 0a20 2020 2020  .accept()..     
-0001a490: 2020 2023 2053 6574 7320 7468 6520 7072     # Sets the pr
-0001a4a0: 6f6a 6563 7420 7361 7665 2064 6972 6563  oject save direc
-0001a4b0: 746f 7279 0a20 2020 2020 2020 2063 6f6e  tory.        con
-0001a4c0: 6669 672e 7365 745f 7072 6f6a 6563 7473  fig.set_projects
-0001a4d0: 5f73 6176 655f 7061 7468 2870 726f 6a65  _save_path(proje
-0001a4e0: 6374 735f 6469 7229 0a20 2020 2020 2020  cts_dir).       
-0001a4f0: 2073 6f6d 6574 6869 6e67 5f70 6174 6820   something_path 
-0001a500: 3d20 6f73 2e70 6174 682e 6a6f 696e 2870  = os.path.join(p
-0001a510: 726f 6a65 6374 735f 6469 722c 2022 736f  rojects_dir, "so
-0001a520: 6d65 7468 696e 6722 290a 2020 2020 2020  mething").      
-0001a530: 2020 7072 6f6a 6563 745f 385f 7061 7468    project_8_path
-0001a540: 203d 2073 656c 662e 6765 745f 6e65 775f   = self.get_new_
-0001a550: 7465 7374 5f70 726f 6a65 6374 286e 616d  test_project(nam
-0001a560: 653d 2270 726f 6a65 6374 5f38 2229 0a0a  e="project_8")..
-0001a570: 2020 2020 2020 2020 2320 5361 7665 7320          # Saves 
-0001a580: 7468 6520 7072 6f6a 6563 7420 2773 6f6d  the project 'som
-0001a590: 6574 6869 6e67 270a 2020 2020 2020 2020  ething'.        
-0001a5a0: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-0001a5b0: 2e73 6176 6543 686f 6963 6528 290a 2020  .saveChoice().  
-0001a5c0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0001a5d0: 7445 7175 616c 2873 656c 662e 6d61 696e  tEqual(self.main
-0001a5e0: 5f77 696e 646f 772e 7072 6f6a 6563 742e  _window.project.
-0001a5f0: 6765 744e 616d 6528 292c 2022 736f 6d65  getName(), "some
-0001a600: 7468 696e 6722 290a 2020 2020 2020 2020  thing").        
-0001a610: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-0001a620: 286f 732e 7061 7468 2e65 7869 7374 7328  (os.path.exists(
-0001a630: 736f 6d65 7468 696e 675f 7061 7468 292c  something_path),
-0001a640: 2054 7275 6529 0a0a 2020 2020 2020 2020   True)..        
-0001a650: 2320 5377 6974 6368 6573 2074 6f20 7072  # Switches to pr
-0001a660: 6f6a 6563 7420 2770 726f 6a65 6374 5f38  oject 'project_8
-0001a670: 270a 2020 2020 2020 2020 7365 6c66 2e6d  '.        self.m
-0001a680: 6169 6e5f 7769 6e64 6f77 2e73 7769 7463  ain_window.switc
-0001a690: 685f 7072 6f6a 6563 7428 7072 6f6a 6563  h_project(projec
-0001a6a0: 745f 385f 7061 7468 2c20 2270 726f 6a65  t_8_path, "proje
-0001a6b0: 6374 5f38 2229 0a20 2020 2020 2020 2073  ct_8").        s
-0001a6c0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0001a6d0: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-0001a6e0: 2e70 726f 6a65 6374 2e67 6574 4e61 6d65  .project.getName
-0001a6f0: 2829 2c20 2270 726f 6a65 6374 5f38 2229  (), "project_8")
-0001a700: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
-0001a710: 696e 5f77 696e 646f 772e 7361 7665 4368  in_window.saveCh
-0001a720: 6f69 6365 2829 2020 2320 5570 6461 7465  oice()  # Update
-0001a730: 7320 7468 6520 7072 6f6a 6563 7420 2770  s the project 'p
-0001a740: 726f 6a65 6374 5f38 270a 0a20 2020 2020  roject_8'..     
-0001a750: 2020 2023 2052 656d 6f76 6573 2074 6865     # Removes the
-0001a760: 2070 726f 6a65 6374 2027 736f 6d65 7468   project 'someth
-0001a770: 696e 6727 2066 696c 6520 7472 6565 0a20  ing' file tree. 
-0001a780: 2020 2020 2020 2073 6875 7469 6c2e 726d         shutil.rm
-0001a790: 7472 6565 2873 6f6d 6574 6869 6e67 5f70  tree(something_p
-0001a7a0: 6174 6829 0a0a 2020 2020 2020 2020 506f  ath)..        Po
-0001a7b0: 7055 704e 6577 5072 6f6a 6563 742e 6578  pUpNewProject.ex
-0001a7c0: 6563 203d 206c 616d 6264 6120 783a 2054  ec = lambda x: T
-0001a7d0: 7275 650a 2020 2020 2020 2020 506f 7055  rue.        PopU
-0001a7e0: 704e 6577 5072 6f6a 6563 742e 7365 6c65  pNewProject.sele
-0001a7f0: 6374 6564 4669 6c65 7320 3d20 6c61 6d62  ctedFiles = lamb
-0001a800: 6461 2078 3a20 5472 7565 0a20 2020 2020  da x: True.     
-0001a810: 2020 2050 6f70 5570 4e65 7750 726f 6a65     PopUpNewProje
-0001a820: 6374 2e67 6574 5f66 696c 656e 616d 6520  ct.get_filename 
-0001a830: 3d20 6c61 6d62 6461 2078 2c20 793a 2054  = lambda x, y: T
-0001a840: 7275 650a 2020 2020 2020 2020 506f 7055  rue.        PopU
-0001a850: 704e 6577 5072 6f6a 6563 742e 7265 6c61  pNewProject.rela
-0001a860: 7469 7665 5f70 6174 6820 3d20 736f 6d65  tive_path = some
-0001a870: 7468 696e 675f 7061 7468 0a0a 2020 2020  thing_path..    
-0001a880: 2020 2020 506f 7055 704f 7065 6e50 726f      PopUpOpenPro
-0001a890: 6a65 6374 2e65 7865 6320 3d20 6c61 6d62  ject.exec = lamb
-0001a8a0: 6461 2078 3a20 5472 7565 0a20 2020 2020  da x: True.     
-0001a8b0: 2020 2050 6f70 5570 4f70 656e 5072 6f6a     PopUpOpenProj
-0001a8c0: 6563 742e 7365 6c65 6374 6564 4669 6c65  ect.selectedFile
-0001a8d0: 7320 3d20 6c61 6d62 6461 2078 3a20 5472  s = lambda x: Tr
-0001a8e0: 7565 0a20 2020 2020 2020 2050 6f70 5570  ue.        PopUp
-0001a8f0: 4f70 656e 5072 6f6a 6563 742e 6765 745f  OpenProject.get_
-0001a900: 6669 6c65 6e61 6d65 203d 206c 616d 6264  filename = lambd
-0001a910: 6120 782c 2079 3a20 5472 7565 0a20 2020  a x, y: True.   
-0001a920: 2020 2020 2050 6f70 5570 4f70 656e 5072       PopUpOpenPr
-0001a930: 6f6a 6563 742e 7265 6c61 7469 7665 5f70  oject.relative_p
-0001a940: 6174 6820 3d20 736f 6d65 7468 696e 675f  ath = something_
-0001a950: 7061 7468 0a20 2020 2020 2020 2050 6f70  path.        Pop
-0001a960: 5570 4f70 656e 5072 6f6a 6563 742e 7061  UpOpenProject.pa
-0001a970: 7468 2c20 506f 7055 704f 7065 6e50 726f  th, PopUpOpenPro
-0001a980: 6a65 6374 2e6e 616d 6520 3d20 6f73 2e70  ject.name = os.p
-0001a990: 6174 682e 7370 6c69 7428 0a20 2020 2020  ath.split(.     
-0001a9a0: 2020 2020 2020 2073 6f6d 6574 6869 6e67         something
-0001a9b0: 5f70 6174 680a 2020 2020 2020 2020 290a  _path.        ).
-0001a9c0: 2020 2020 2020 2020 2320 4372 6561 7465          # Create
-0001a9d0: 7320 616e 6420 7361 7665 7320 7468 6520  s and saves the 
-0001a9e0: 7072 6f6a 6563 7420 2773 6f6d 6574 6869  project 'somethi
-0001a9f0: 6e67 270a 2020 2020 2020 2020 7365 6c66  ng'.        self
-0001aa00: 2e6d 6169 6e5f 7769 6e64 6f77 2e63 7265  .main_window.cre
-0001aa10: 6174 655f 7072 6f6a 6563 745f 706f 705f  ate_project_pop_
-0001aa20: 7570 2829 0a20 2020 2020 2020 2073 656c  up().        sel
-0001aa30: 662e 6173 7365 7274 4571 7561 6c28 7365  f.assertEqual(se
-0001aa40: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
-0001aa50: 726f 6a65 6374 2e67 6574 4e61 6d65 2829  roject.getName()
-0001aa60: 2c20 2273 6f6d 6574 6869 6e67 2229 0a20  , "something"). 
-0001aa70: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0001aa80: 7274 4571 7561 6c28 6f73 2e70 6174 682e  rtEqual(os.path.
-0001aa90: 6578 6973 7473 2873 6f6d 6574 6869 6e67  exists(something
-0001aaa0: 5f70 6174 6829 2c20 5472 7565 290a 0a20  _path), True).. 
-0001aab0: 2020 2020 2020 2023 2053 7769 7463 6865         # Switche
-0001aac0: 7320 746f 2061 6e6f 7468 6572 2070 726f  s to another pro
-0001aad0: 6a65 6374 2061 6e64 2076 6572 6966 6965  ject and verifie
-0001aae0: 7320 7468 6174 2070 726f 6a65 6374 0a20  s that project. 
-0001aaf0: 2020 2020 2020 2023 2027 736f 6d65 7468         # 'someth
-0001ab00: 696e 6727 2069 7320 7368 6f77 6e20 696e  ing' is shown in
-0001ab10: 2074 6865 2070 726f 6a65 6374 7320 706f   the projects po
-0001ab20: 702d 7570 0a20 2020 2020 2020 2073 656c  p-up.        sel
-0001ab30: 662e 6d61 696e 5f77 696e 646f 772e 7377  f.main_window.sw
-0001ab40: 6974 6368 5f70 726f 6a65 6374 2870 726f  itch_project(pro
-0001ab50: 6a65 6374 5f38 5f70 6174 682c 2022 7072  ject_8_path, "pr
-0001ab60: 6f6a 6563 745f 3822 290a 2020 2020 2020  oject_8").      
-0001ab70: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
-0001ab80: 6f77 2e6f 7065 6e5f 7072 6f6a 6563 745f  ow.open_project_
-0001ab90: 706f 705f 7570 2829 0a20 2020 2020 2020  pop_up().       
-0001aba0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0001abb0: 6c28 7365 6c66 2e6d 6169 6e5f 7769 6e64  l(self.main_wind
-0001abc0: 6f77 2e70 726f 6a65 6374 2e67 6574 4e61  ow.project.getNa
-0001abd0: 6d65 2829 2c20 2273 6f6d 6574 6869 6e67  me(), "something
-0001abe0: 2229 0a0a 2020 2020 2020 2020 2320 5265  ")..        # Re
-0001abf0: 6d6f 7665 7320 7468 6520 7072 6f6a 6563  moves the projec
-0001ac00: 7420 2773 6f6d 6574 6869 6e67 2720 7472  t 'something' tr
-0001ac10: 6565 0a20 2020 2020 2020 2073 656c 662e  ee.        self.
-0001ac20: 6d61 696e 5f77 696e 646f 772e 7377 6974  main_window.swit
-0001ac30: 6368 5f70 726f 6a65 6374 2870 726f 6a65  ch_project(proje
-0001ac40: 6374 5f38 5f70 6174 682c 2022 7072 6f6a  ct_8_path, "proj
-0001ac50: 6563 745f 3822 290a 2020 2020 2020 2020  ect_8").        
-0001ac60: 7368 7574 696c 2e72 6d74 7265 6528 736f  shutil.rmtree(so
-0001ac70: 6d65 7468 696e 675f 7061 7468 290a 0a20  mething_path).. 
-0001ac80: 2020 2064 6566 2074 6573 745f 7365 6e64     def test_send
-0001ac90: 5f64 6f63 5f74 6f5f 7069 7065 6c69 6e65  _doc_to_pipeline
-0001aca0: 5f6d 616e 6167 6572 2873 656c 6629 3a0a  _manager(self):.
-0001acb0: 2020 2020 2020 2020 2222 2254 6573 7473          """Tests
-0001acc0: 2074 6865 2070 6f70 7570 2073 656e 6469   the popup sendi
-0001acd0: 6e67 2074 6865 2064 6f63 756d 656e 7473  ng the documents
-0001ace0: 2074 6f20 7468 6520 7069 7065 6c69 6e65   to the pipeline
-0001acf0: 206d 616e 6167 6572 2e22 2222 0a0a 2020   manager."""..  
-0001ad00: 2020 2020 2020 7072 6f6a 6563 745f 385f        project_8_
-0001ad10: 7061 7468 203d 2073 656c 662e 6765 745f  path = self.get_
-0001ad20: 6e65 775f 7465 7374 5f70 726f 6a65 6374  new_test_project
-0001ad30: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
-0001ad40: 6d61 696e 5f77 696e 646f 772e 7377 6974  main_window.swit
-0001ad50: 6368 5f70 726f 6a65 6374 2870 726f 6a65  ch_project(proje
-0001ad60: 6374 5f38 5f70 6174 682c 2022 7072 6f6a  ct_8_path, "proj
-0001ad70: 6563 745f 3822 290a 0a20 2020 2020 2020  ect_8")..       
-0001ad80: 2023 2043 6865 636b 696e 6720 7468 6174   # Checking that
-0001ad90: 2074 6865 2070 6970 656c 696e 6520 6d61   the pipeline ma
-0001ada0: 6e61 6765 7220 6861 7320 616e 2065 6d70  nager has an emp
-0001adb0: 7479 206c 6973 7420 6174 2074 6865 2062  ty list at the b
-0001adc0: 6567 696e 6e69 6e67 0a20 2020 2020 2020  eginning.       
-0001add0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0001ade0: 6c28 7365 6c66 2e6d 6169 6e5f 7769 6e64  l(self.main_wind
-0001adf0: 6f77 2e70 6970 656c 696e 655f 6d61 6e61  ow.pipeline_mana
-0001ae00: 6765 722e 7363 616e 5f6c 6973 742c 205b  ger.scan_list, [
-0001ae10: 5d29 0a0a 2020 2020 2020 2020 2320 5365  ])..        # Se
-0001ae20: 6e64 696e 6720 7468 6520 7365 6c65 6374  nding the select
-0001ae30: 696f 6e20 2861 6c6c 2073 6361 6e73 292c  ion (all scans),
-0001ae40: 2062 7574 2063 6c6f 7369 6e67 2074 6865   but closing the
-0001ae50: 2070 6f70 7570 0a20 2020 2020 2020 2051   popup.        Q
-0001ae60: 5465 7374 2e6d 6f75 7365 436c 6963 6b28  Test.mouseClick(
-0001ae70: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0001ae80: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
-0001ae90: 7461 5f62 726f 7773 6572 2e73 656e 645f  ta_browser.send_
-0001aea0: 646f 6375 6d65 6e74 735f 746f 5f70 6970  documents_to_pip
-0001aeb0: 656c 696e 655f 6275 7474 6f6e 2c0a 2020  eline_button,.  
-0001aec0: 2020 2020 2020 2020 2020 5174 2e4c 6566            Qt.Lef
-0001aed0: 7442 7574 746f 6e2c 0a20 2020 2020 2020  tButton,.       
-0001aee0: 2029 0a20 2020 2020 2020 2073 656e 645f   ).        send_
-0001aef0: 706f 7075 7020 3d20 7365 6c66 2e6d 6169  popup = self.mai
-0001af00: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
-0001af10: 6f77 7365 722e 7368 6f77 5f73 656c 6563  owser.show_selec
-0001af20: 7469 6f6e 0a0a 2020 2020 2020 2020 5154  tion..        QT
-0001af30: 6573 742e 7157 6169 7428 3530 3029 0a0a  est.qWait(500)..
-0001af40: 2020 2020 2020 2020 7365 6e64 5f70 6f70          send_pop
-0001af50: 7570 2e63 6c6f 7365 2829 0a0a 2020 2020  up.close()..    
-0001af60: 2020 2020 2320 4368 6563 6b69 6e67 2074      # Checking t
-0001af70: 6861 7420 7468 6520 6c69 7374 2069 7320  hat the list is 
-0001af80: 7374 696c 6c20 656d 7074 790a 2020 2020  still empty.    
-0001af90: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0001afa0: 7175 616c 2873 656c 662e 6d61 696e 5f77  qual(self.main_w
-0001afb0: 696e 646f 772e 7069 7065 6c69 6e65 5f6d  indow.pipeline_m
-0001afc0: 616e 6167 6572 2e73 6361 6e5f 6c69 7374  anager.scan_list
-0001afd0: 2c20 5b5d 290a 0a20 2020 2020 2020 2023  , [])..        #
-0001afe0: 2053 656e 6469 6e67 2074 6865 2073 656c   Sending the sel
-0001aff0: 6563 7469 6f6e 2028 616c 6c20 7363 616e  ection (all scan
-0001b000: 7329 2c20 6275 7420 6869 7420 7468 6520  s), but hit the 
-0001b010: 224f 4b22 2062 7574 746f 6e0a 2020 2020  "OK" button.    
-0001b020: 2020 2020 5154 6573 742e 6d6f 7573 6543      QTest.mouseC
-0001b030: 6c69 636b 280a 2020 2020 2020 2020 2020  lick(.          
-0001b040: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
-0001b050: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
-0001b060: 7365 6e64 5f64 6f63 756d 656e 7473 5f74  send_documents_t
-0001b070: 6f5f 7069 7065 6c69 6e65 5f62 7574 746f  o_pipeline_butto
-0001b080: 6e2c 0a20 2020 2020 2020 2020 2020 2051  n,.            Q
-0001b090: 742e 4c65 6674 4275 7474 6f6e 2c0a 2020  t.LeftButton,.  
-0001b0a0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0001b0b0: 7365 6e64 5f70 6f70 7570 203d 2073 656c  send_popup = sel
-0001b0c0: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
-0001b0d0: 7461 5f62 726f 7773 6572 2e73 686f 775f  ta_browser.show_
-0001b0e0: 7365 6c65 6374 696f 6e0a 0a20 2020 2020  selection..     
-0001b0f0: 2020 2051 5465 7374 2e71 5761 6974 2835     QTest.qWait(5
-0001b100: 3030 290a 0a20 2020 2020 2020 2073 656e  00)..        sen
-0001b110: 645f 706f 7075 702e 6f6b 5f63 6c69 636b  d_popup.ok_click
-0001b120: 6564 2829 0a0a 2020 2020 2020 2020 2320  ed()..        # 
-0001b130: 4368 6563 6b69 6e67 2074 6861 7420 616c  Checking that al
-0001b140: 6c20 7363 616e 7320 6861 7665 2062 6565  l scans have bee
-0001b150: 6e20 7365 6e74 2074 6f20 7468 6520 7069  n sent to the pi
-0001b160: 7065 6c69 6e65 206d 616e 6167 6572 0a20  peline manager. 
-0001b170: 2020 2020 2020 2073 6361 6e73 203d 2073         scans = s
-0001b180: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-0001b190: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
-0001b1a0: 2e73 6361 6e5f 6c69 7374 0a20 2020 2020  .scan_list.     
-0001b1b0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0001b1c0: 7561 6c28 6c65 6e28 7363 616e 7329 2c20  ual(len(scans), 
-0001b1d0: 3929 0a20 2020 2020 2020 2073 656c 662e  9).        self.
-0001b1e0: 6173 7365 7274 5472 7565 280a 2020 2020  assertTrue(.    
-0001b1f0: 2020 2020 2020 2020 2264 6174 612f 7261          "data/ra
-0001b200: 775f 6461 7461 2f47 7565 7262 6574 2d43  w_data/Guerbet-C
-0001b210: 362d 3230 3134 2d52 6174 2d4b 3532 2d54  6-2014-Rat-K52-T
-0001b220: 7562 6532 3722 0a20 2020 2020 2020 2020  ube27".         
-0001b230: 2020 2022 2d32 3031 342d 3032 2d31 3431     "-2014-02-141
-0001b240: 3032 3331 372d 3031 2d47 315f 4775 6572  02317-01-G1_Guer
-0001b250: 6265 745f 416e 6174 2d52 4152 4522 0a20  bet_Anat-RARE". 
-0001b260: 2020 2020 2020 2020 2020 2022 7076 6d2d             "pvm-
-0001b270: 3030 3032 3230 5f30 3030 2e6e 6969 2220  000220_000.nii" 
-0001b280: 696e 2073 6361 6e73 0a20 2020 2020 2020  in scans.       
-0001b290: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
-0001b2a0: 6173 7365 7274 5472 7565 280a 2020 2020  assertTrue(.    
-0001b2b0: 2020 2020 2020 2020 2264 6174 612f 7261          "data/ra
-0001b2c0: 775f 6461 7461 2f47 7565 7262 6574 2d43  w_data/Guerbet-C
-0001b2d0: 362d 3230 3134 2d52 6174 2d4b 3532 2d54  6-2014-Rat-K52-T
-0001b2e0: 7562 6532 3722 0a20 2020 2020 2020 2020  ube27".         
-0001b2f0: 2020 2022 2d32 3031 342d 3032 2d31 3431     "-2014-02-141
-0001b300: 3032 3331 372d 3034 2d47 335f 4775 6572  02317-04-G3_Guer
-0001b310: 6265 745f 4d44 4546 542d 4d44 4546 5422  bet_MDEFT-MDEFT"
-0001b320: 0a20 2020 2020 2020 2020 2020 2022 7076  .            "pv
-0001b330: 6d2d 3030 3039 3430 5f38 3030 2e6e 6969  m-000940_800.nii
-0001b340: 2220 696e 2073 6361 6e73 0a20 2020 2020  " in scans.     
-0001b350: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
-0001b360: 662e 6173 7365 7274 5472 7565 280a 2020  f.assertTrue(.  
-0001b370: 2020 2020 2020 2020 2020 2264 6174 612f            "data/
-0001b380: 7261 775f 6461 7461 2f47 7565 7262 6574  raw_data/Guerbet
-0001b390: 2d43 362d 3230 3134 2d52 6174 2d4b 3532  -C6-2014-Rat-K52
-0001b3a0: 2d54 7562 6532 3722 0a20 2020 2020 2020  -Tube27".       
-0001b3b0: 2020 2020 2022 2d32 3031 342d 3032 2d31       "-2014-02-1
-0001b3c0: 3431 3032 3331 372d 3035 2d47 345f 4775  4102317-05-G4_Gu
-0001b3d0: 6572 6265 745f 5431 5345 5f38 3030 2d52  erbet_T1SE_800-R
-0001b3e0: 4152 4522 0a20 2020 2020 2020 2020 2020  ARE".           
-0001b3f0: 2022 7076 6d2d 3030 3031 3432 5f34 3030   "pvm-000142_400
-0001b400: 2e6e 6969 2220 696e 2073 6361 6e73 0a20  .nii" in scans. 
-0001b410: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0001b420: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
-0001b430: 280a 2020 2020 2020 2020 2020 2020 2264  (.            "d
-0001b440: 6174 612f 7261 775f 6461 7461 2f47 7565  ata/raw_data/Gue
-0001b450: 7262 6574 2d43 362d 3230 3134 2d52 6174  rbet-C6-2014-Rat
-0001b460: 2d4b 3532 2d54 7562 6532 3722 0a20 2020  -K52-Tube27".   
-0001b470: 2020 2020 2020 2020 2022 2d32 3031 342d           "-2014-
-0001b480: 3032 2d31 3431 3032 3331 372d 3036 2d47  02-14102317-06-G
-0001b490: 345f 4775 6572 6265 745f 5431 5345 5f38  4_Guerbet_T1SE_8
-0001b4a0: 3030 2d52 4152 4522 0a20 2020 2020 2020  00-RARE".       
-0001b4b0: 2020 2020 2022 7076 6d2d 3030 3031 3432       "pvm-000142
-0001b4c0: 5f34 3030 2e6e 6969 2220 696e 2073 6361  _400.nii" in sca
-0001b4d0: 6e73 0a20 2020 2020 2020 2029 0a20 2020  ns.        ).   
-0001b4e0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0001b4f0: 5472 7565 280a 2020 2020 2020 2020 2020  True(.          
-0001b500: 2020 2264 6174 612f 7261 775f 6461 7461    "data/raw_data
-0001b510: 2f47 7565 7262 6574 2d43 362d 3230 3134  /Guerbet-C6-2014
-0001b520: 2d52 6174 2d4b 3532 2d54 7562 6532 3722  -Rat-K52-Tube27"
-0001b530: 0a20 2020 2020 2020 2020 2020 2022 2d32  .            "-2
-0001b540: 3031 342d 3032 2d31 3431 3032 3331 372d  014-02-14102317-
-0001b550: 3038 2d47 345f 4775 6572 6265 745f 5431  08-G4_Guerbet_T1
-0001b560: 5345 5f38 3030 2d52 4152 4522 0a20 2020  SE_800-RARE".   
-0001b570: 2020 2020 2020 2020 2022 7076 6d2d 3030           "pvm-00
-0001b580: 3031 3432 5f34 3030 2e6e 6969 2220 696e  0142_400.nii" in
-0001b590: 2073 6361 6e73 0a20 2020 2020 2020 2029   scans.        )
-0001b5a0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0001b5b0: 7365 7274 5472 7565 280a 2020 2020 2020  sertTrue(.      
-0001b5c0: 2020 2020 2020 2264 6174 612f 7261 775f        "data/raw_
-0001b5d0: 6461 7461 2f47 7565 7262 6574 2d43 362d  data/Guerbet-C6-
-0001b5e0: 3230 3134 2d52 6174 2d4b 3532 2d54 7562  2014-Rat-K52-Tub
-0001b5f0: 6532 3722 0a20 2020 2020 2020 2020 2020  e27".           
-0001b600: 2022 2d32 3031 342d 3032 2d31 3431 3032   "-2014-02-14102
-0001b610: 3331 372d 3039 2d47 345f 4775 6572 6265  317-09-G4_Guerbe
-0001b620: 745f 5431 5345 5f38 3030 2d52 4152 4522  t_T1SE_800-RARE"
-0001b630: 0a20 2020 2020 2020 2020 2020 2022 7076  .            "pv
-0001b640: 6d2d 3030 3031 3432 5f34 3030 2e6e 6969  m-000142_400.nii
-0001b650: 2220 696e 2073 6361 6e73 0a20 2020 2020  " in scans.     
-0001b660: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
-0001b670: 662e 6173 7365 7274 5472 7565 280a 2020  f.assertTrue(.  
-0001b680: 2020 2020 2020 2020 2020 2264 6174 612f            "data/
-0001b690: 7261 775f 6461 7461 2f47 7565 7262 6574  raw_data/Guerbet
-0001b6a0: 2d43 362d 3230 3134 2d52 6174 2d4b 3532  -C6-2014-Rat-K52
-0001b6b0: 2d54 7562 6532 3722 0a20 2020 2020 2020  -Tube27".       
-0001b6c0: 2020 2020 2022 2d32 3031 342d 3032 2d31       "-2014-02-1
-0001b6d0: 3431 3032 3331 372d 3130 2d47 335f 4775  4102317-10-G3_Gu
-0001b6e0: 6572 6265 745f 4d44 4546 542d 4d44 4546  erbet_MDEFT-MDEF
-0001b6f0: 5422 0a20 2020 2020 2020 2020 2020 2022  T".            "
-0001b700: 7076 6d2d 3030 3039 3430 5f38 3030 2e6e  pvm-000940_800.n
-0001b710: 6969 2220 696e 2073 6361 6e73 0a20 2020  ii" in scans.   
-0001b720: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
-0001b730: 656c 662e 6173 7365 7274 5472 7565 280a  elf.assertTrue(.
-0001b740: 2020 2020 2020 2020 2020 2020 2264 6174              "dat
-0001b750: 612f 7261 775f 6461 7461 2f47 7565 7262  a/raw_data/Guerb
-0001b760: 6574 2d43 362d 3230 3134 2d52 6174 2d4b  et-C6-2014-Rat-K
-0001b770: 3532 2d54 7562 6532 3722 0a20 2020 2020  52-Tube27".     
-0001b780: 2020 2020 2020 2022 2d32 3031 342d 3032         "-2014-02
-0001b790: 2d31 3431 3032 3331 372d 3131 2d47 345f  -14102317-11-G4_
-0001b7a0: 4775 6572 6265 745f 5431 5345 5f38 3030  Guerbet_T1SE_800
-0001b7b0: 2d52 4152 4522 0a20 2020 2020 2020 2020  -RARE".         
-0001b7c0: 2020 2022 7076 6d2d 3030 3031 3432 5f34     "pvm-000142_4
-0001b7d0: 3030 2e6e 6969 2220 696e 2073 6361 6e73  00.nii" in scans
-0001b7e0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-0001b7f0: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-0001b800: 7565 280a 2020 2020 2020 2020 2020 2020  ue(.            
-0001b810: 2264 6174 612f 6465 7269 7665 645f 6461  "data/derived_da
-0001b820: 7461 2f73 4775 6572 6265 742d 4336 2d32  ta/sGuerbet-C6-2
-0001b830: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
-0001b840: 3237 220a 2020 2020 2020 2020 2020 2020  27".            
-0001b850: 222d 3230 3134 2d30 322d 3134 3130 3233  "-2014-02-141023
-0001b860: 3137 2d30 312d 4731 5f47 7565 7262 6574  17-01-G1_Guerbet
-0001b870: 5f41 6e61 742d 5241 5245 220a 2020 2020  _Anat-RARE".    
-0001b880: 2020 2020 2020 2020 2270 766d 2d30 3030          "pvm-000
-0001b890: 3232 305f 3030 302e 6e69 6922 2069 6e20  220_000.nii" in 
-0001b8a0: 7363 616e 730a 2020 2020 2020 2020 290a  scans.        ).
-0001b8b0: 0a20 2020 2020 2020 2023 2053 656c 6563  .        # Selec
-0001b8c0: 7469 6e67 2074 6865 2066 6972 7374 2032  ting the first 2
-0001b8d0: 2073 6361 6e73 0a20 2020 2020 2020 2069   scans.        i
-0001b8e0: 7465 6d31 203d 2073 656c 662e 6d61 696e  tem1 = self.main
-0001b8f0: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
-0001b900: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
-0001b910: 6974 656d 2830 2c20 3029 0a20 2020 2020  item(0, 0).     
-0001b920: 2020 2069 7465 6d31 2e73 6574 5365 6c65     item1.setSele
-0001b930: 6374 6564 2854 7275 6529 0a20 2020 2020  cted(True).     
-0001b940: 2020 2073 6361 6e31 203d 2069 7465 6d31     scan1 = item1
-0001b950: 2e74 6578 7428 290a 2020 2020 2020 2020  .text().        
-0001b960: 6974 656d 3220 3d20 7365 6c66 2e6d 6169  item2 = self.mai
-0001b970: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
-0001b980: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
-0001b990: 2e69 7465 6d28 312c 2030 290a 2020 2020  .item(1, 0).    
-0001b9a0: 2020 2020 6974 656d 322e 7365 7453 656c      item2.setSel
-0001b9b0: 6563 7465 6428 5472 7565 290a 2020 2020  ected(True).    
-0001b9c0: 2020 2020 7363 616e 3220 3d20 6974 656d      scan2 = item
-0001b9d0: 322e 7465 7874 2829 0a0a 2020 2020 2020  2.text()..      
-0001b9e0: 2020 2320 5365 6e64 696e 6720 7468 6520    # Sending the 
-0001b9f0: 7365 6c65 6374 696f 6e20 2866 6972 7374  selection (first
-0001ba00: 2032 2073 6361 6e73 290a 2020 2020 2020   2 scans).      
-0001ba10: 2020 5154 6573 742e 6d6f 7573 6543 6c69    QTest.mouseCli
-0001ba20: 636b 280a 2020 2020 2020 2020 2020 2020  ck(.            
-0001ba30: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-0001ba40: 2e64 6174 615f 6272 6f77 7365 722e 7365  .data_browser.se
-0001ba50: 6e64 5f64 6f63 756d 656e 7473 5f74 6f5f  nd_documents_to_
-0001ba60: 7069 7065 6c69 6e65 5f62 7574 746f 6e2c  pipeline_button,
-0001ba70: 0a20 2020 2020 2020 2020 2020 2051 742e  .            Qt.
-0001ba80: 4c65 6674 4275 7474 6f6e 2c0a 2020 2020  LeftButton,.    
-0001ba90: 2020 2020 290a 2020 2020 2020 2020 7365      ).        se
-0001baa0: 6e64 5f70 6f70 7570 203d 2073 656c 662e  nd_popup = self.
-0001bab0: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
-0001bac0: 5f62 726f 7773 6572 2e73 686f 775f 7365  _browser.show_se
-0001bad0: 6c65 6374 696f 6e0a 0a20 2020 2020 2020  lection..       
-0001bae0: 2051 5465 7374 2e71 5761 6974 2835 3030   QTest.qWait(500
-0001baf0: 290a 0a20 2020 2020 2020 2073 656e 645f  )..        send_
-0001bb00: 706f 7075 702e 6f6b 5f63 6c69 636b 6564  popup.ok_clicked
-0001bb10: 2829 0a0a 2020 2020 2020 2020 2320 4368  ()..        # Ch
-0001bb20: 6563 6b69 6e67 2074 6861 7420 7468 6520  ecking that the 
-0001bb30: 6669 7273 7420 3220 7363 616e 7320 6861  first 2 scans ha
-0001bb40: 7665 2062 6565 6e20 7365 6e74 2074 6f20  ve been sent to 
-0001bb50: 7468 6520 7069 7065 6c69 6e65 206d 616e  the pipeline man
-0001bb60: 6167 6572 0a20 2020 2020 2020 2073 6361  ager.        sca
-0001bb70: 6e73 203d 2073 656c 662e 6d61 696e 5f77  ns = self.main_w
-0001bb80: 696e 646f 772e 7069 7065 6c69 6e65 5f6d  indow.pipeline_m
-0001bb90: 616e 6167 6572 2e73 6361 6e5f 6c69 7374  anager.scan_list
-0001bba0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0001bbb0: 7365 7274 4571 7561 6c28 6c65 6e28 7363  sertEqual(len(sc
-0001bbc0: 616e 7329 2c20 3229 0a20 2020 2020 2020  ans), 2).       
-0001bbd0: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
-0001bbe0: 2873 6361 6e31 2069 6e20 7363 616e 7329  (scan1 in scans)
-0001bbf0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0001bc00: 7365 7274 5472 7565 2873 6361 6e32 2069  sertTrue(scan2 i
-0001bc10: 6e20 7363 616e 7329 0a0a 2020 2020 2020  n scans)..      
-0001bc20: 2020 2320 4368 6563 6b69 6e67 2077 6974    # Checking wit
-0001bc30: 6820 7468 6520 7261 7069 6420 7365 6172  h the rapid sear
-0001bc40: 6368 0a20 2020 2020 2020 2073 656c 662e  ch.        self.
-0001bc50: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
-0001bc60: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
-0001bc70: 6174 612e 636c 6561 7253 656c 6563 7469  ata.clearSelecti
-0001bc80: 6f6e 2829 0a20 2020 2020 2020 2073 656c  on().        sel
-0001bc90: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
-0001bca0: 7461 5f62 726f 7773 6572 2e73 6561 7263  ta_browser.searc
-0001bcb0: 685f 6261 722e 7365 7454 6578 7428 2247  h_bar.setText("G
-0001bcc0: 3322 290a 0a20 2020 2020 2020 2023 2053  3")..        # S
-0001bcd0: 656e 6469 6e67 2074 6865 2073 656c 6563  ending the selec
-0001bce0: 7469 6f6e 2028 4733 2073 6361 6e73 290a  tion (G3 scans).
-0001bcf0: 2020 2020 2020 2020 5154 6573 742e 6d6f          QTest.mo
-0001bd00: 7573 6543 6c69 636b 280a 2020 2020 2020  useClick(.      
-0001bd10: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-0001bd20: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
-0001bd30: 7365 722e 7365 6e64 5f64 6f63 756d 656e  ser.send_documen
-0001bd40: 7473 5f74 6f5f 7069 7065 6c69 6e65 5f62  ts_to_pipeline_b
-0001bd50: 7574 746f 6e2c 0a20 2020 2020 2020 2020  utton,.         
-0001bd60: 2020 2051 742e 4c65 6674 4275 7474 6f6e     Qt.LeftButton
-0001bd70: 2c0a 2020 2020 2020 2020 290a 2020 2020  ,.        ).    
-0001bd80: 2020 2020 7365 6e64 5f70 6f70 7570 203d      send_popup =
-0001bd90: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-0001bda0: 772e 6461 7461 5f62 726f 7773 6572 2e73  w.data_browser.s
-0001bdb0: 686f 775f 7365 6c65 6374 696f 6e0a 0a20  how_selection.. 
-0001bdc0: 2020 2020 2020 2051 5465 7374 2e71 5761         QTest.qWa
-0001bdd0: 6974 2835 3030 290a 0a20 2020 2020 2020  it(500)..       
-0001bde0: 2073 656e 645f 706f 7075 702e 6f6b 5f63   send_popup.ok_c
-0001bdf0: 6c69 636b 6564 2829 0a0a 2020 2020 2020  licked()..      
-0001be00: 2020 2320 4368 6563 6b69 6e67 2074 6861    # Checking tha
-0001be10: 7420 4733 2073 6361 6e73 2068 6176 6520  t G3 scans have 
-0001be20: 6265 656e 2073 656e 7420 746f 2074 6865  been sent to the
-0001be30: 2070 6970 656c 696e 6520 6d61 6e61 6765   pipeline manage
-0001be40: 720a 2020 2020 2020 2020 7363 616e 7320  r.        scans 
-0001be50: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
-0001be60: 6f77 2e70 6970 656c 696e 655f 6d61 6e61  ow.pipeline_mana
-0001be70: 6765 722e 7363 616e 5f6c 6973 740a 2020  ger.scan_list.  
-0001be80: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0001be90: 7445 7175 616c 286c 656e 2873 6361 6e73  tEqual(len(scans
-0001bea0: 292c 2032 290a 2020 2020 2020 2020 7365  ), 2).        se
-0001beb0: 6c66 2e61 7373 6572 7454 7275 6528 0a20  lf.assertTrue(. 
-0001bec0: 2020 2020 2020 2020 2020 2022 6461 7461             "data
-0001bed0: 2f72 6177 5f64 6174 612f 4775 6572 6265  /raw_data/Guerbe
-0001bee0: 742d 4336 2d32 3031 342d 5261 742d 4b35  t-C6-2014-Rat-K5
-0001bef0: 322d 5475 6265 3237 220a 2020 2020 2020  2-Tube27".      
-0001bf00: 2020 2020 2020 222d 3230 3134 2d30 322d        "-2014-02-
-0001bf10: 3134 3130 3233 3137 2d30 342d 4733 5f47  14102317-04-G3_G
-0001bf20: 7565 7262 6574 5f4d 4445 4654 2d4d 4445  uerbet_MDEFT-MDE
-0001bf30: 4654 220a 2020 2020 2020 2020 2020 2020  FT".            
-0001bf40: 2270 766d 2d30 3030 3934 305f 3830 302e  "pvm-000940_800.
-0001bf50: 6e69 6922 2069 6e20 7363 616e 730a 2020  nii" in scans.  
-0001bf60: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0001bf70: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
-0001bf80: 0a20 2020 2020 2020 2020 2020 2022 6461  .            "da
-0001bf90: 7461 2f72 6177 5f64 6174 612f 4775 6572  ta/raw_data/Guer
-0001bfa0: 6265 742d 4336 2d32 3031 342d 5261 742d  bet-C6-2014-Rat-
-0001bfb0: 4b35 322d 5475 6265 3237 220a 2020 2020  K52-Tube27".    
-0001bfc0: 2020 2020 2020 2020 222d 3230 3134 2d30          "-2014-0
-0001bfd0: 322d 3134 3130 3233 3137 2d31 302d 4733  2-14102317-10-G3
-0001bfe0: 5f47 7565 7262 6574 5f4d 4445 4654 2d4d  _Guerbet_MDEFT-M
-0001bff0: 4445 4654 220a 2020 2020 2020 2020 2020  DEFT".          
-0001c000: 2020 2270 766d 2d30 3030 3934 305f 3830    "pvm-000940_80
-0001c010: 302e 6e69 6922 2069 6e20 7363 616e 730a  0.nii" in scans.
-0001c020: 2020 2020 2020 2020 290a 0a20 2020 2064          )..    d
-0001c030: 6566 2074 6573 745f 7365 745f 7661 6c75  ef test_set_valu
-0001c040: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
-0001c050: 2022 2222 5465 7374 7320 7468 6520 7661   """Tests the va
-0001c060: 6c75 6573 206d 6f64 6966 6963 6174 696f  lues modificatio
-0001c070: 6e73 2e0a 0a20 2020 2020 2020 2054 6869  ns...        Thi
-0001c080: 7320 7465 7374 2069 7320 7265 6475 6e64  s test is redund
-0001c090: 616e 7420 7769 7468 2074 6865 2066 6972  ant with the fir
-0001c0a0: 7374 2070 6172 7420 6f66 2074 6573 745f  st part of test_
-0001c0b0: 7265 7365 745f 6365 6c6c 2e0a 2020 2020  reset_cell..    
-0001c0c0: 2020 2020 2222 220a 0a20 2020 2020 2020      """..       
-0001c0d0: 2070 726f 6a65 6374 5f38 5f70 6174 6820   project_8_path 
-0001c0e0: 3d20 7365 6c66 2e67 6574 5f6e 6577 5f74  = self.get_new_t
-0001c0f0: 6573 745f 7072 6f6a 6563 7428 290a 2020  est_project().  
-0001c100: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-0001c110: 7769 6e64 6f77 2e73 7769 7463 685f 7072  window.switch_pr
-0001c120: 6f6a 6563 7428 7072 6f6a 6563 745f 385f  oject(project_8_
-0001c130: 7061 7468 2c20 2270 726f 6a65 6374 5f38  path, "project_8
-0001c140: 2229 0a0a 2020 2020 2020 2020 2320 5363  ")..        # Sc
-0001c150: 616e 206e 616d 6520 666f 7220 7468 6520  an name for the 
-0001c160: 7365 636f 6e64 2064 6f63 756d 656e 740a  second document.
-0001c170: 2020 2020 2020 2020 6974 656d 203d 2073          item = s
-0001c180: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-0001c190: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
-0001c1a0: 6c65 5f64 6174 612e 6974 656d 2831 2c20  le_data.item(1, 
-0001c1b0: 3029 0a20 2020 2020 2020 2073 6361 6e5f  0).        scan_
-0001c1c0: 6e61 6d65 203d 2069 7465 6d2e 7465 7874  name = item.text
-0001c1d0: 2829 0a0a 2020 2020 2020 2020 2323 2320  ()..        ### 
-0001c1e0: 5465 7374 2066 6f72 2061 206c 6973 743a  Test for a list:
-0001c1f0: 0a20 2020 2020 2020 2023 2056 616c 7565  .        # Value
-0001c200: 7320 696e 2074 6865 2064 620a 2020 2020  s in the db.    
-0001c210: 2020 2020 7661 6c75 6520 3d20 666c 6f61      value = floa
-0001c220: 7428 0a20 2020 2020 2020 2020 2020 2073  t(.            s
-0001c230: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-0001c240: 7072 6f6a 6563 742e 7365 7373 696f 6e2e  project.session.
-0001c250: 6765 745f 7661 6c75 6528 0a20 2020 2020  get_value(.     
-0001c260: 2020 2020 2020 2020 2020 2043 4f4c 4c45             COLLE
-0001c270: 4354 494f 4e5f 4355 5252 454e 542c 2073  CTION_CURRENT, s
-0001c280: 6361 6e5f 6e61 6d65 2c20 2242 616e 6457  can_name, "BandW
-0001c290: 6964 7468 220a 2020 2020 2020 2020 2020  idth".          
-0001c2a0: 2020 295b 305d 0a20 2020 2020 2020 2029    )[0].        )
-0001c2b0: 0a20 2020 2020 2020 2076 616c 7565 5f69  .        value_i
-0001c2c0: 6e69 7469 616c 203d 2066 6c6f 6174 280a  nitial = float(.
-0001c2d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0001c2e0: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 726f  .main_window.pro
-0001c2f0: 6a65 6374 2e73 6573 7369 6f6e 2e67 6574  ject.session.get
-0001c300: 5f76 616c 7565 280a 2020 2020 2020 2020  _value(.        
-0001c310: 2020 2020 2020 2020 434f 4c4c 4543 5449          COLLECTI
-0001c320: 4f4e 5f49 4e49 5449 414c 2c20 7363 616e  ON_INITIAL, scan
-0001c330: 5f6e 616d 652c 2022 4261 6e64 5769 6474  _name, "BandWidt
-0001c340: 6822 0a20 2020 2020 2020 2020 2020 2029  h".            )
-0001c350: 5b30 5d0a 2020 2020 2020 2020 290a 0a20  [0].        ).. 
-0001c360: 2020 2020 2020 2023 2056 616c 7565 2069         # Value i
-0001c370: 6e20 7468 6520 4461 7461 4272 6f77 7365  n the DataBrowse
-0001c380: 720a 2020 2020 2020 2020 6261 6e64 7769  r.        bandwi
-0001c390: 6474 685f 636f 6c75 6d6e 203d 2028 0a20  dth_column = (. 
-0001c3a0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001c3b0: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
-0001c3c0: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
-0001c3d0: 6174 612e 6765 745f 7461 675f 636f 6c75  ata.get_tag_colu
-0001c3e0: 6d6e 0a20 2020 2020 2020 2029 2822 4261  mn.        )("Ba
-0001c3f0: 6e64 5769 6474 6822 290a 2020 2020 2020  ndWidth").      
-0001c400: 2020 6974 656d 203d 2073 656c 662e 6d61    item = self.ma
-0001c410: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
-0001c420: 726f 7773 6572 2e74 6162 6c65 5f64 6174  rowser.table_dat
-0001c430: 612e 6974 656d 280a 2020 2020 2020 2020  a.item(.        
-0001c440: 2020 2020 312c 2062 616e 6477 6964 7468      1, bandwidth
-0001c450: 5f63 6f6c 756d 6e0a 2020 2020 2020 2020  _column.        
-0001c460: 290a 2020 2020 2020 2020 6461 7461 6272  ).        databr
-0001c470: 6f77 7365 7220 3d20 666c 6f61 7428 6974  owser = float(it
-0001c480: 656d 2e74 6578 7428 295b 313a 2d31 5d29  em.text()[1:-1])
-0001c490: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0001c4a0: 7365 7274 4571 7561 6c28 7661 6c75 652c  sertEqual(value,
-0001c4b0: 2066 6c6f 6174 2835 3030 3030 2929 0a20   float(50000)). 
-0001c4c0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0001c4d0: 7274 4571 7561 6c28 7661 6c75 652c 2064  rtEqual(value, d
-0001c4e0: 6174 6162 726f 7773 6572 290a 2020 2020  atabrowser).    
-0001c4f0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0001c500: 7175 616c 2876 616c 7565 2c20 7661 6c75  qual(value, valu
-0001c510: 655f 696e 6974 6961 6c29 0a0a 2020 2020  e_initial)..    
-0001c520: 2020 2020 2320 4368 616e 6765 2074 6865      # Change the
-0001c530: 2076 616c 7565 0a20 2020 2020 2020 2069   value.        i
-0001c540: 7465 6d2e 7365 7453 656c 6563 7465 6428  tem.setSelected(
-0001c550: 5472 7565 290a 2020 2020 2020 2020 7468  True).        th
-0001c560: 7265 6164 696e 672e 5469 6d65 7228 0a20  reading.Timer(. 
-0001c570: 2020 2020 2020 2020 2020 2032 2c20 7061             2, pa
-0001c580: 7274 6961 6c28 7365 6c66 2e65 6469 745f  rtial(self.edit_
-0001c590: 6461 7461 6272 6f77 7365 725f 6c69 7374  databrowser_list
-0001c5a0: 2c20 2232 3530 3030 2229 0a20 2020 2020  , "25000").     
-0001c5b0: 2020 2029 2e73 7461 7274 2829 0a20 2020     ).start().   
-0001c5c0: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
-0001c5d0: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
-0001c5e0: 6572 2e74 6162 6c65 5f64 6174 612e 6564  er.table_data.ed
-0001c5f0: 6974 5f74 6162 6c65 5f64 6174 615f 7661  it_table_data_va
-0001c600: 6c75 6573 2829 0a0a 2020 2020 2020 2020  lues()..        
-0001c610: 2320 4368 6563 6b20 6966 2076 616c 7565  # Check if value
-0001c620: 2077 6173 2063 6861 6e67 6564 2069 6e20   was changed in 
-0001c630: 6462 2061 6e64 2044 6174 6142 726f 7773  db and DataBrows
-0001c640: 6572 0a20 2020 2020 2020 2076 616c 7565  er.        value
-0001c650: 203d 2066 6c6f 6174 280a 2020 2020 2020   = float(.      
-0001c660: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-0001c670: 7769 6e64 6f77 2e70 726f 6a65 6374 2e73  window.project.s
-0001c680: 6573 7369 6f6e 2e67 6574 5f76 616c 7565  ession.get_value
-0001c690: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0001c6a0: 2020 434f 4c4c 4543 5449 4f4e 5f43 5552    COLLECTION_CUR
-0001c6b0: 5245 4e54 2c20 7363 616e 5f6e 616d 652c  RENT, scan_name,
-0001c6c0: 2022 4261 6e64 5769 6474 6822 0a20 2020   "BandWidth".   
-0001c6d0: 2020 2020 2020 2020 2029 5b30 5d0a 2020           )[0].  
-0001c6e0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0001c6f0: 7661 6c75 655f 696e 6974 6961 6c20 3d20  value_initial = 
-0001c700: 666c 6f61 7428 0a20 2020 2020 2020 2020  float(.         
-0001c710: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
-0001c720: 646f 772e 7072 6f6a 6563 742e 7365 7373  dow.project.sess
-0001c730: 696f 6e2e 6765 745f 7661 6c75 6528 0a20  ion.get_value(. 
-0001c740: 2020 2020 2020 2020 2020 2020 2020 2043                 C
-0001c750: 4f4c 4c45 4354 494f 4e5f 494e 4954 4941  OLLECTION_INITIA
-0001c760: 4c2c 2073 6361 6e5f 6e61 6d65 2c20 2242  L, scan_name, "B
-0001c770: 616e 6457 6964 7468 220a 2020 2020 2020  andWidth".      
-0001c780: 2020 2020 2020 295b 305d 0a20 2020 2020        )[0].     
-0001c790: 2020 2029 0a20 2020 2020 2020 2069 7465     ).        ite
-0001c7a0: 6d20 3d20 7365 6c66 2e6d 6169 6e5f 7769  m = self.main_wi
-0001c7b0: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
-0001c7c0: 722e 7461 626c 655f 6461 7461 2e69 7465  r.table_data.ite
-0001c7d0: 6d28 0a20 2020 2020 2020 2020 2020 2031  m(.            1
-0001c7e0: 2c20 6261 6e64 7769 6474 685f 636f 6c75  , bandwidth_colu
-0001c7f0: 6d6e 0a20 2020 2020 2020 2029 0a20 2020  mn.        ).   
-0001c800: 2020 2020 2064 6174 6162 726f 7773 6572       databrowser
-0001c810: 203d 2066 6c6f 6174 2869 7465 6d2e 7465   = float(item.te
-0001c820: 7874 2829 5b31 3a2d 315d 290a 2020 2020  xt()[1:-1]).    
-0001c830: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0001c840: 7175 616c 2876 616c 7565 2c20 666c 6f61  qual(value, floa
-0001c850: 7428 3235 3030 3029 290a 2020 2020 2020  t(25000)).      
-0001c860: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0001c870: 616c 2876 616c 7565 2c20 6461 7461 6272  al(value, databr
-0001c880: 6f77 7365 7229 0a20 2020 2020 2020 2073  owser).        s
-0001c890: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0001c8a0: 7661 6c75 655f 696e 6974 6961 6c2c 2066  value_initial, f
-0001c8b0: 6c6f 6174 2835 3030 3030 2929 0a20 2020  loat(50000)).   
-0001c8c0: 2020 2020 2069 7465 6d2e 7365 7453 656c       item.setSel
-0001c8d0: 6563 7465 6428 4661 6c73 6529 0a0a 2020  ected(False)..  
-0001c8e0: 2020 2020 2020 2323 2320 5465 7374 2066        ### Test f
-0001c8f0: 6f72 2061 2073 7472 696e 673a 0a20 2020  or a string:.   
-0001c900: 2020 2020 2023 2056 616c 7565 7320 696e       # Values in
-0001c910: 2074 6865 2064 620a 2020 2020 2020 2020   the db.        
-0001c920: 7661 6c75 6520 3d20 7365 6c66 2e6d 6169  value = self.mai
-0001c930: 6e5f 7769 6e64 6f77 2e70 726f 6a65 6374  n_window.project
-0001c940: 2e73 6573 7369 6f6e 2e67 6574 5f76 616c  .session.get_val
-0001c950: 7565 280a 2020 2020 2020 2020 2020 2020  ue(.            
-0001c960: 434f 4c4c 4543 5449 4f4e 5f43 5552 5245  COLLECTION_CURRE
-0001c970: 4e54 2c20 7363 616e 5f6e 616d 652c 2022  NT, scan_name, "
-0001c980: 5479 7065 220a 2020 2020 2020 2020 290a  Type".        ).
-0001c990: 2020 2020 2020 2020 7661 6c75 655f 696e          value_in
-0001c9a0: 6974 6961 6c20 3d20 7365 6c66 2e6d 6169  itial = self.mai
-0001c9b0: 6e5f 7769 6e64 6f77 2e70 726f 6a65 6374  n_window.project
-0001c9c0: 2e73 6573 7369 6f6e 2e67 6574 5f76 616c  .session.get_val
-0001c9d0: 7565 280a 2020 2020 2020 2020 2020 2020  ue(.            
-0001c9e0: 434f 4c4c 4543 5449 4f4e 5f49 4e49 5449  COLLECTION_INITI
-0001c9f0: 414c 2c20 7363 616e 5f6e 616d 652c 2022  AL, scan_name, "
-0001ca00: 5479 7065 220a 2020 2020 2020 2020 290a  Type".        ).
-0001ca10: 0a20 2020 2020 2020 2023 2056 616c 7565  .        # Value
-0001ca20: 2069 6e20 7468 6520 4461 7461 4272 6f77   in the DataBrow
-0001ca30: 7365 720a 2020 2020 2020 2020 7479 7065  ser.        type
-0001ca40: 5f63 6f6c 756d 6e20 3d20 280a 2020 2020  _column = (.    
-0001ca50: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
-0001ca60: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
-0001ca70: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
-0001ca80: 2e67 6574 5f74 6167 5f63 6f6c 756d 6e0a  .get_tag_column.
-0001ca90: 2020 2020 2020 2020 2928 2254 7970 6522          )("Type"
-0001caa0: 290a 2020 2020 2020 2020 6974 656d 203d  ).        item =
-0001cab0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-0001cac0: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
-0001cad0: 6162 6c65 5f64 6174 612e 6974 656d 2831  able_data.item(1
-0001cae0: 2c20 7479 7065 5f63 6f6c 756d 6e29 0a20  , type_column). 
-0001caf0: 2020 2020 2020 2064 6174 6162 726f 7773         databrows
-0001cb00: 6572 203d 2069 7465 6d2e 7465 7874 2829  er = item.text()
-0001cb10: 0a0a 2020 2020 2020 2020 2320 4368 6563  ..        # Chec
-0001cb20: 6b20 6571 7561 6c69 7479 2062 6574 7765  k equality betwe
-0001cb30: 656e 2044 6174 6142 726f 7773 6572 2061  en DataBrowser a
-0001cb40: 6e64 2064 620a 2020 2020 2020 2020 7365  nd db.        se
-0001cb50: 6c66 2e61 7373 6572 7445 7175 616c 2876  lf.assertEqual(v
-0001cb60: 616c 7565 2c20 2253 6361 6e22 290a 2020  alue, "Scan").  
-0001cb70: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0001cb80: 7445 7175 616c 2876 616c 7565 2c20 6461  tEqual(value, da
-0001cb90: 7461 6272 6f77 7365 7229 0a20 2020 2020  tabrowser).     
-0001cba0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0001cbb0: 7561 6c28 7661 6c75 652c 2076 616c 7565  ual(value, value
-0001cbc0: 5f69 6e69 7469 616c 290a 0a20 2020 2020  _initial)..     
-0001cbd0: 2020 2023 2043 6861 6e67 6520 7468 6520     # Change the 
-0001cbe0: 7661 6c75 650a 2020 2020 2020 2020 6974  value.        it
-0001cbf0: 656d 2e73 6574 5365 6c65 6374 6564 2854  em.setSelected(T
-0001cc00: 7275 6529 0a20 2020 2020 2020 2069 7465  rue).        ite
-0001cc10: 6d2e 7365 7454 6578 7428 2254 6573 7422  m.setText("Test"
-0001cc20: 290a 2020 2020 2020 2020 6974 656d 2e73  ).        item.s
-0001cc30: 6574 5365 6c65 6374 6564 2846 616c 7365  etSelected(False
-0001cc40: 290a 0a20 2020 2020 2020 2023 2043 6865  )..        # Che
-0001cc50: 636b 2069 6620 7661 6c75 6520 696e 2044  ck if value in D
-0001cc60: 6174 6142 726f 7773 6572 2061 6e64 2064  ataBrowser and d
-0001cc70: 6220 6173 2062 6565 6e20 6368 616e 6765  b as been change
-0001cc80: 640a 2020 2020 2020 2020 7661 6c75 6520  d.        value 
-0001cc90: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
-0001cca0: 6f77 2e70 726f 6a65 6374 2e73 6573 7369  ow.project.sessi
-0001ccb0: 6f6e 2e67 6574 5f76 616c 7565 280a 2020  on.get_value(.  
-0001ccc0: 2020 2020 2020 2020 2020 434f 4c4c 4543            COLLEC
-0001ccd0: 5449 4f4e 5f43 5552 5245 4e54 2c20 7363  TION_CURRENT, sc
-0001cce0: 616e 5f6e 616d 652c 2022 5479 7065 220a  an_name, "Type".
-0001ccf0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0001cd00: 2020 7661 6c75 655f 696e 6974 6961 6c20    value_initial 
-0001cd10: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
-0001cd20: 6f77 2e70 726f 6a65 6374 2e73 6573 7369  ow.project.sessi
-0001cd30: 6f6e 2e67 6574 5f76 616c 7565 280a 2020  on.get_value(.  
-0001cd40: 2020 2020 2020 2020 2020 434f 4c4c 4543            COLLEC
-0001cd50: 5449 4f4e 5f49 4e49 5449 414c 2c20 7363  TION_INITIAL, sc
-0001cd60: 616e 5f6e 616d 652c 2022 5479 7065 220a  an_name, "Type".
-0001cd70: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0001cd80: 2020 6974 656d 203d 2073 656c 662e 6d61    item = self.ma
-0001cd90: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
-0001cda0: 726f 7773 6572 2e74 6162 6c65 5f64 6174  rowser.table_dat
-0001cdb0: 612e 6974 656d 2831 2c20 7479 7065 5f63  a.item(1, type_c
-0001cdc0: 6f6c 756d 6e29 0a20 2020 2020 2020 2064  olumn).        d
-0001cdd0: 6174 6162 726f 7773 6572 203d 2069 7465  atabrowser = ite
-0001cde0: 6d2e 7465 7874 2829 0a20 2020 2020 2020  m.text().       
-0001cdf0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0001ce00: 6c28 7661 6c75 652c 2022 5465 7374 2229  l(value, "Test")
-0001ce10: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0001ce20: 7365 7274 4571 7561 6c28 7661 6c75 652c  sertEqual(value,
-0001ce30: 2064 6174 6162 726f 7773 6572 290a 2020   databrowser).  
-0001ce40: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0001ce50: 7445 7175 616c 2876 616c 7565 5f69 6e69  tEqual(value_ini
-0001ce60: 7469 616c 2c20 2253 6361 6e22 290a 0a20  tial, "Scan").. 
-0001ce70: 2020 2064 6566 2074 6573 745f 7368 6f77     def test_show
-0001ce80: 5f62 7269 636b 5f68 6973 746f 7279 2873  _brick_history(s
-0001ce90: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
-0001cea0: 224f 7065 6e73 2074 6865 2068 6973 746f  "Opens the histo
-0001ceb0: 7279 2070 6f70 2d75 7020 666f 7220 7363  ry pop-up for sc
-0001cec0: 616e 7320 7769 7468 2068 6973 746f 7279  ans with history
-0001ced0: 2072 656c 6174 6564 2074 6f0a 2020 2020   related to.    
-0001cee0: 2020 2020 7374 616e 6461 7264 2062 7269      standard bri
-0001cef0: 636b 7320 616e 6420 6272 6963 6b73 2063  cks and bricks c
-0001cf00: 6f6e 7461 696e 6564 2062 7920 6120 7375  ontained by a su
-0001cf10: 622d 7069 7065 6c69 6e65 2e0a 0a20 2020  b-pipeline...   
-0001cf20: 2020 2020 202d 2054 6573 7473 0a20 2020       - Tests.   
-0001cf30: 2020 2020 2020 2020 202d 2054 6162 6c65           - Table
-0001cf40: 4461 7461 4272 6f77 7365 722e 7368 6f77  DataBrowser.show
-0001cf50: 5f62 7269 636b 5f68 6973 746f 7279 0a20  _brick_history. 
-0001cf60: 2020 2020 2020 2020 2020 202d 2050 6f70             - Pop
-0001cf70: 5570 5368 6f77 4869 7374 6f72 790a 2020  UpShowHistory.  
-0001cf80: 2020 2020 2020 2222 220a 0a20 2020 2020        """..     
-0001cf90: 2020 2023 2043 7265 6174 6573 2061 206e     # Creates a n
-0001cfa0: 6577 2070 726f 6a65 6374 2066 6f6c 6465  ew project folde
-0001cfb0: 7220 616e 6420 7377 6974 6368 6573 2074  r and switches t
-0001cfc0: 6f20 6974 0a20 2020 2020 2020 206e 6577  o it.        new
-0001cfd0: 5f70 726f 6a65 6374 5f70 6174 6820 3d20  _project_path = 
-0001cfe0: 7365 6c66 2e67 6574 5f6e 6577 5f74 6573  self.get_new_tes
-0001cff0: 745f 7072 6f6a 6563 7428 6c69 6768 743d  t_project(light=
-0001d000: 5472 7565 290a 2020 2020 2020 2020 7365  True).        se
-0001d010: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e73  lf.main_window.s
-0001d020: 7769 7463 685f 7072 6f6a 6563 7428 6e65  witch_project(ne
-0001d030: 775f 7072 6f6a 6563 745f 7061 7468 2c20  w_project_path, 
-0001d040: 226c 6967 6874 5f74 6573 745f 7072 6f6a  "light_test_proj
-0001d050: 6563 7422 290a 0a20 2020 2020 2020 2023  ect")..        #
-0001d060: 2053 6574 7320 7368 6f72 7463 7574 7320   Sets shortcuts 
-0001d070: 666f 7220 6f62 6a65 6374 7320 7468 6174  for objects that
-0001d080: 2061 7265 206f 6674 656e 2075 7365 640a   are often used.
-0001d090: 2020 2020 2020 2020 6461 7461 5f62 726f          data_bro
-0001d0a0: 7773 6572 203d 2073 656c 662e 6d61 696e  wser = self.main
-0001d0b0: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
-0001d0c0: 7773 6572 0a20 2020 2020 2020 2073 6573  wser.        ses
-0001d0d0: 7369 6f6e 203d 2073 656c 662e 6d61 696e  sion = self.main
-0001d0e0: 5f77 696e 646f 772e 7072 6f6a 6563 742e  _window.project.
-0001d0f0: 7365 7373 696f 6e0a 0a20 2020 2020 2020  session..       
-0001d100: 2023 2047 6574 7320 7468 6520 696e 7075   # Gets the inpu
-0001d110: 7420 6669 6c65 2070 6174 6820 6f66 2074  t file path of t
-0001d120: 6865 2069 6e70 7574 2073 6361 6e0a 2020  he input scan.  
-0001d130: 2020 2020 2020 494e 5055 545f 5343 414e        INPUT_SCAN
-0001d140: 203d 2073 6573 7369 6f6e 2e67 6574 5f64   = session.get_d
-0001d150: 6f63 756d 656e 7473 2843 4f4c 4c45 4354  ocuments(COLLECT
-0001d160: 494f 4e5f 4355 5252 454e 5429 5b30 5d5b  ION_CURRENT)[0][
-0001d170: 2246 696c 654e 616d 6522 5d0a 0a20 2020  "FileName"]..   
-0001d180: 2020 2020 2023 204f 7065 6e73 2074 6865       # Opens the
-0001d190: 2068 6973 746f 7279 2070 6f70 2d75 7020   history pop-up 
-0001d1a0: 666f 7220 7468 6520 7363 616e 2072 656c  for the scan rel
-0001d1b0: 6174 6564 2074 6f20 2773 6d6f 6f74 685f  ated to 'smooth_
-0001d1c0: 3127 0a20 2020 2020 2020 2068 6973 745f  1'.        hist_
-0001d1d0: 696e 6465 7820 3d20 6461 7461 5f62 726f  index = data_bro
-0001d1e0: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
-0001d1f0: 6765 745f 7461 675f 636f 6c75 6d6e 2822  get_tag_column("
-0001d200: 4869 7374 6f72 7922 290a 2020 2020 2020  History").      
-0001d210: 2020 6869 7374 5f62 7574 746f 6e20 3d20    hist_button = 
-0001d220: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
-0001d230: 6c65 5f64 6174 612e 6365 6c6c 5769 6467  le_data.cellWidg
-0001d240: 6574 280a 2020 2020 2020 2020 2020 2020  et(.            
-0001d250: 302c 2068 6973 745f 696e 6465 780a 2020  0, hist_index.  
-0001d260: 2020 2020 2020 292e 6368 696c 6472 656e        ).children
-0001d270: 2829 5b2d 315d 0a20 2020 2020 2020 2068  ()[-1].        h
-0001d280: 6973 745f 6275 7474 6f6e 2e63 6c69 636b  ist_button.click
-0001d290: 6564 2e65 6d69 7428 2920 2023 204f 7065  ed.emit()  # Ope
-0001d2a0: 6e73 2074 6865 2068 6973 746f 7279 2077  ns the history w
-0001d2b0: 696e 646f 770a 0a20 2020 2020 2020 2023  indow..        #
-0001d2c0: 2041 7373 6572 7473 2074 6861 7420 6120   Asserts that a 
-0001d2d0: 6869 7374 6f72 7920 706f 702d 7570 2077  history pop-up w
-0001d2e0: 6173 2063 7265 6174 6564 0a20 2020 2020  as created.     
-0001d2f0: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-0001d300: 7565 280a 2020 2020 2020 2020 2020 2020  ue(.            
-0001d310: 6861 7361 7474 7228 6461 7461 5f62 726f  hasattr(data_bro
-0001d320: 7773 6572 2e74 6162 6c65 5f64 6174 612c  wser.table_data,
-0001d330: 2022 6272 6963 6b5f 6869 7374 6f72 795f   "brick_history_
-0001d340: 706f 7075 7022 290a 2020 2020 2020 2020  popup").        
-0001d350: 290a 0a20 2020 2020 2020 2023 2043 6c69  )..        # Cli
-0001d360: 636b 7320 6f6e 2074 6865 2069 6e70 7574  cks on the input
-0001d370: 2062 7574 746f 6e20 6469 7370 6c61 7965   button displaye
-0001d380: 6420 6f6e 2074 6865 2068 6973 746f 7279  d on the history
-0001d390: 2070 6f70 2d75 702e 0a20 2020 2020 2020   pop-up..       
-0001d3a0: 2023 2054 6869 7320 7368 6f77 7320 7468   # This shows th
-0001d3b0: 6520 636f 7272 6573 706f 6e64 696e 6720  e corresponding 
-0001d3c0: 7363 616e 2069 6e20 7468 6520 6461 7461  scan in the data
-0001d3d0: 2062 726f 7773 6572 0a20 2020 2020 2020   browser.       
-0001d3e0: 2069 6e70 7574 5f62 7574 746f 6e20 3d20   input_button = 
-0001d3f0: 280a 2020 2020 2020 2020 2020 2020 6461  (.            da
-0001d400: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
-0001d410: 5f64 6174 612e 6272 6963 6b5f 6869 7374  _data.brick_hist
-0001d420: 6f72 795f 706f 7075 702e 7461 626c 652e  ory_popup.table.
-0001d430: 6365 6c6c 5769 6467 6574 280a 2020 2020  cellWidget(.    
-0001d440: 2020 2020 2020 2020 2020 2020 302c 2038              0, 8
-0001d450: 0a20 2020 2020 2020 2020 2020 2029 2e63  .            ).c
-0001d460: 6869 6c64 7265 6e28 295b 2d31 5d0a 2020  hildren()[-1].  
-0001d470: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
-0001d480: 2069 6e70 7574 5f62 7574 746f 6e2e 636c   input_button.cl
-0001d490: 6963 6b65 642e 656d 6974 2829 2020 2320  icked.emit()  # 
-0001d4a0: 436c 6963 6b73 206f 6e20 7468 6520 696e  Clicks on the in
-0001d4b0: 7075 7420 6275 7474 6f6e 0a0a 2020 2020  put button..    
-0001d4c0: 2020 2020 2320 4173 7365 7274 7320 7468      # Asserts th
-0001d4d0: 6174 2027 494e 5055 545f 5343 414e 2720  at 'INPUT_SCAN' 
-0001d4e0: 6869 7374 6f72 7920 706f 702d 7570 2077  history pop-up w
-0001d4f0: 6173 2063 7265 6174 6564 0a20 2020 2020  as created.     
-0001d500: 2020 2073 656c 662e 6173 7365 7274 4e6f     self.assertNo
-0001d510: 7445 7175 616c 2864 6174 615f 6272 6f77  tEqual(data_brow
-0001d520: 7365 722e 7461 626c 655f 6461 7461 2e73  ser.table_data.s
-0001d530: 656c 6563 7465 6449 7465 6d73 2829 2c20  electedItems(), 
-0001d540: 3029 0a20 2020 2020 2020 2073 656c 662e  0).        self.
-0001d550: 6173 7365 7274 4571 7561 6c28 0a20 2020  assertEqual(.   
-0001d560: 2020 2020 2020 2020 2064 6174 615f 6272           data_br
-0001d570: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
-0001d580: 2e73 656c 6563 7465 6449 7465 6d73 2829  .selectedItems()
-0001d590: 5b30 5d2e 7465 7874 2829 2c20 494e 5055  [0].text(), INPU
-0001d5a0: 545f 5343 414e 0a20 2020 2020 2020 2029  T_SCAN.        )
-0001d5b0: 0a0a 2020 2020 2020 2020 2320 4f70 656e  ..        # Open
-0001d5c0: 7320 7468 6520 6869 7374 6f72 7920 706f  s the history po
-0001d5d0: 702d 7570 2066 6f72 2074 6865 2073 6361  p-up for the sca
-0001d5e0: 6e20 7265 6c61 7465 6420 746f 2027 7175  n related to 'qu
-0001d5f0: 6164 5f73 6d6f 6f74 685f 3127 0a20 2020  ad_smooth_1'.   
-0001d600: 2020 2020 2068 6973 745f 6275 7474 6f6e       hist_button
-0001d610: 203d 2064 6174 615f 6272 6f77 7365 722e   = data_browser.
-0001d620: 7461 626c 655f 6461 7461 2e63 656c 6c57  table_data.cellW
-0001d630: 6964 6765 7428 0a20 2020 2020 2020 2020  idget(.         
-0001d640: 2020 2031 2c20 6869 7374 5f69 6e64 6578     1, hist_index
-0001d650: 0a20 2020 2020 2020 2029 2e63 6869 6c64  .        ).child
-0001d660: 7265 6e28 295b 2d31 5d0a 0a20 2020 2020  ren()[-1]..     
-0001d670: 2020 2068 6973 745f 6275 7474 6f6e 2e63     hist_button.c
-0001d680: 6c69 636b 6564 2e65 6d69 7428 2920 2023  licked.emit()  #
-0001d690: 204f 7065 6e73 2074 6865 2068 6973 746f   Opens the histo
-0001d6a0: 7279 2077 696e 646f 770a 2020 2020 2020  ry window.      
-0001d6b0: 2020 6869 7374 5f62 7574 746f 6e2e 636c    hist_button.cl
-0001d6c0: 6f73 6528 290a 0a20 2020 2064 6566 2074  ose()..    def t
-0001d6d0: 6573 745f 736f 7274 2873 656c 6629 3a0a  est_sort(self):.
-0001d6e0: 2020 2020 2020 2020 2222 2254 6573 7473          """Tests
-0001d6f0: 2074 6865 2073 6f72 7469 6e67 2069 6e20   the sorting in 
-0001d700: 7468 6520 4461 7461 4272 6f77 7365 722e  the DataBrowser.
-0001d710: 2222 220a 0a20 2020 2020 2020 2070 726f  """..        pro
-0001d720: 6a65 6374 5f38 5f70 6174 6820 3d20 7365  ject_8_path = se
-0001d730: 6c66 2e67 6574 5f6e 6577 5f74 6573 745f  lf.get_new_test_
-0001d740: 7072 6f6a 6563 7428 290a 2020 2020 2020  project().      
-0001d750: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
-0001d760: 6f77 2e73 7769 7463 685f 7072 6f6a 6563  ow.switch_projec
-0001d770: 7428 7072 6f6a 6563 745f 385f 7061 7468  t(project_8_path
-0001d780: 2c20 2270 726f 6a65 6374 5f38 2229 0a0a  , "project_8")..
-0001d790: 2020 2020 2020 2020 6d69 7865 645f 6261          mixed_ba
-0001d7a0: 6e64 7769 6474 6873 203d 205b 5d0a 0a20  ndwidths = [].. 
-0001d7b0: 2020 2020 2020 2066 6f72 2072 6f77 2069         for row i
-0001d7c0: 6e20 7261 6e67 6528 0a20 2020 2020 2020  n range(.       
-0001d7d0: 2020 2020 2030 2c20 7365 6c66 2e6d 6169       0, self.mai
-0001d7e0: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
-0001d7f0: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
-0001d800: 2e72 6f77 436f 756e 7428 290a 2020 2020  .rowCount().    
-0001d810: 2020 2020 293a 0a20 2020 2020 2020 2020      ):.         
-0001d820: 2020 2062 616e 6477 6964 7468 5f63 6f6c     bandwidth_col
-0001d830: 756d 6e20 3d20 280a 2020 2020 2020 2020  umn = (.        
-0001d840: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
-0001d850: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
-0001d860: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
-0001d870: 2e67 6574 5f74 6167 5f63 6f6c 756d 6e0a  .get_tag_column.
-0001d880: 2020 2020 2020 2020 2020 2020 2928 2242              )("B
-0001d890: 616e 6457 6964 7468 2229 0a20 2020 2020  andWidth").     
-0001d8a0: 2020 2020 2020 2069 7465 6d20 3d20 7365         item = se
-0001d8b0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
-0001d8c0: 6174 615f 6272 6f77 7365 722e 7461 626c  ata_browser.tabl
-0001d8d0: 655f 6461 7461 2e69 7465 6d28 0a20 2020  e_data.item(.   
-0001d8e0: 2020 2020 2020 2020 2020 2020 2072 6f77               row
-0001d8f0: 2c20 6261 6e64 7769 6474 685f 636f 6c75  , bandwidth_colu
-0001d900: 6d6e 0a20 2020 2020 2020 2020 2020 2029  mn.            )
-0001d910: 0a20 2020 2020 2020 2020 2020 2073 6361  .            sca
-0001d920: 6e5f 6e61 6d65 203d 2069 7465 6d2e 7465  n_name = item.te
-0001d930: 7874 2829 0a0a 2020 2020 2020 2020 2020  xt()..          
-0001d940: 2020 6966 206e 6f74 2073 656c 662e 6d61    if not self.ma
-0001d950: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
-0001d960: 726f 7773 6572 2e74 6162 6c65 5f64 6174  rowser.table_dat
-0001d970: 612e 6973 526f 7748 6964 6465 6e28 726f  a.isRowHidden(ro
-0001d980: 7729 3a0a 2020 2020 2020 2020 2020 2020  w):.            
-0001d990: 2020 2020 6d69 7865 645f 6261 6e64 7769      mixed_bandwi
-0001d9a0: 6474 6873 2e61 7070 656e 6428 7363 616e  dths.append(scan
-0001d9b0: 5f6e 616d 6529 0a0a 2020 2020 2020 2020  _name)..        
-0001d9c0: 280a 2020 2020 2020 2020 2020 2020 7365  (.            se
-0001d9d0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
-0001d9e0: 6174 615f 6272 6f77 7365 722e 7461 626c  ata_browser.tabl
-0001d9f0: 655f 6461 7461 2e68 6f72 697a 6f6e 7461  e_data.horizonta
-0001da00: 6c48 6561 6465 720a 2020 2020 2020 2020  lHeader.        
-0001da10: 2928 292e 7365 7453 6f72 7449 6e64 6963  )().setSortIndic
-0001da20: 6174 6f72 2862 616e 6477 6964 7468 5f63  ator(bandwidth_c
-0001da30: 6f6c 756d 6e2c 2030 290a 2020 2020 2020  olumn, 0).      
-0001da40: 2020 7570 5f62 616e 6477 6964 7468 7320    up_bandwidths 
-0001da50: 3d20 5b5d 0a0a 2020 2020 2020 2020 666f  = []..        fo
-0001da60: 7220 726f 7720 696e 2072 616e 6765 280a  r row in range(.
-0001da70: 2020 2020 2020 2020 2020 2020 302c 2073              0, s
-0001da80: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-0001da90: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
-0001daa0: 6c65 5f64 6174 612e 726f 7743 6f75 6e74  le_data.rowCount
-0001dab0: 2829 0a20 2020 2020 2020 2029 3a0a 2020  ().        ):.  
-0001dac0: 2020 2020 2020 2020 2020 6261 6e64 7769            bandwi
-0001dad0: 6474 685f 636f 6c75 6d6e 203d 2028 0a20  dth_column = (. 
-0001dae0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001daf0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-0001db00: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
-0001db10: 6c65 5f64 6174 612e 6765 745f 7461 675f  le_data.get_tag_
-0001db20: 636f 6c75 6d6e 0a20 2020 2020 2020 2020  column.         
-0001db30: 2020 2029 2822 4261 6e64 5769 6474 6822     )("BandWidth"
-0001db40: 290a 2020 2020 2020 2020 2020 2020 6974  ).            it
-0001db50: 656d 203d 2073 656c 662e 6d61 696e 5f77  em = self.main_w
-0001db60: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
-0001db70: 6572 2e74 6162 6c65 5f64 6174 612e 6974  er.table_data.it
-0001db80: 656d 280a 2020 2020 2020 2020 2020 2020  em(.            
-0001db90: 2020 2020 726f 772c 2062 616e 6477 6964      row, bandwid
-0001dba0: 7468 5f63 6f6c 756d 6e0a 2020 2020 2020  th_column.      
-0001dbb0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0001dbc0: 2020 2020 7363 616e 5f6e 616d 6520 3d20      scan_name = 
-0001dbd0: 6974 656d 2e74 6578 7428 290a 0a20 2020  item.text()..   
-0001dbe0: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-0001dbf0: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-0001dc00: 2e64 6174 615f 6272 6f77 7365 722e 7461  .data_browser.ta
-0001dc10: 626c 655f 6461 7461 2e69 7352 6f77 4869  ble_data.isRowHi
-0001dc20: 6464 656e 2872 6f77 293a 0a20 2020 2020  dden(row):.     
-0001dc30: 2020 2020 2020 2020 2020 2075 705f 6261             up_ba
-0001dc40: 6e64 7769 6474 6873 2e61 7070 656e 6428  ndwidths.append(
-0001dc50: 7363 616e 5f6e 616d 6529 0a0a 2020 2020  scan_name)..    
-0001dc60: 2020 2020 7365 6c66 2e61 7373 6572 744e      self.assertN
-0001dc70: 6f74 4571 7561 6c28 6d69 7865 645f 6261  otEqual(mixed_ba
-0001dc80: 6e64 7769 6474 6873 2c20 7570 5f62 616e  ndwidths, up_ban
-0001dc90: 6477 6964 7468 7329 0a20 2020 2020 2020  dwidths).       
-0001dca0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0001dcb0: 6c28 736f 7274 6564 286d 6978 6564 5f62  l(sorted(mixed_b
-0001dcc0: 616e 6477 6964 7468 7329 2c20 7570 5f62  andwidths), up_b
-0001dcd0: 616e 6477 6964 7468 7329 0a0a 2020 2020  andwidths)..    
-0001dce0: 2020 2020 280a 2020 2020 2020 2020 2020      (.          
-0001dcf0: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
-0001dd00: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
-0001dd10: 7461 626c 655f 6461 7461 2e68 6f72 697a  table_data.horiz
-0001dd20: 6f6e 7461 6c48 6561 6465 720a 2020 2020  ontalHeader.    
-0001dd30: 2020 2020 2928 292e 7365 7453 6f72 7449      )().setSortI
-0001dd40: 6e64 6963 6174 6f72 2862 616e 6477 6964  ndicator(bandwid
-0001dd50: 7468 5f63 6f6c 756d 6e2c 2031 290a 2020  th_column, 1).  
-0001dd60: 2020 2020 2020 646f 776e 5f62 616e 6477        down_bandw
-0001dd70: 6964 7468 7320 3d20 5b5d 0a0a 2020 2020  idths = []..    
-0001dd80: 2020 2020 666f 7220 726f 7720 696e 2072      for row in r
-0001dd90: 616e 6765 280a 2020 2020 2020 2020 2020  ange(.          
-0001dda0: 2020 302c 2073 656c 662e 6d61 696e 5f77    0, self.main_w
-0001ddb0: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
-0001ddc0: 6572 2e74 6162 6c65 5f64 6174 612e 726f  er.table_data.ro
-0001ddd0: 7743 6f75 6e74 2829 0a20 2020 2020 2020  wCount().       
-0001dde0: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
-0001ddf0: 6261 6e64 7769 6474 685f 636f 6c75 6d6e  bandwidth_column
-0001de00: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
-0001de10: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
-0001de20: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
-0001de30: 6572 2e74 6162 6c65 5f64 6174 612e 6765  er.table_data.ge
-0001de40: 745f 7461 675f 636f 6c75 6d6e 0a20 2020  t_tag_column.   
-0001de50: 2020 2020 2020 2020 2029 2822 4261 6e64           )("Band
-0001de60: 5769 6474 6822 290a 2020 2020 2020 2020  Width").        
-0001de70: 2020 2020 6974 656d 203d 2073 656c 662e      item = self.
-0001de80: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
-0001de90: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
-0001dea0: 6174 612e 6974 656d 280a 2020 2020 2020  ata.item(.      
-0001deb0: 2020 2020 2020 2020 2020 726f 772c 2062            row, b
-0001dec0: 616e 6477 6964 7468 5f63 6f6c 756d 6e0a  andwidth_column.
-0001ded0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-0001dee0: 2020 2020 2020 2020 2020 7363 616e 5f6e            scan_n
-0001def0: 616d 6520 3d20 6974 656d 2e74 6578 7428  ame = item.text(
-0001df00: 290a 0a20 2020 2020 2020 2020 2020 2069  )..            i
-0001df10: 6620 6e6f 7420 7365 6c66 2e6d 6169 6e5f  f not self.main_
-0001df20: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
-0001df30: 7365 722e 7461 626c 655f 6461 7461 2e69  ser.table_data.i
-0001df40: 7352 6f77 4869 6464 656e 2872 6f77 293a  sRowHidden(row):
-0001df50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001df60: 2064 6f77 6e5f 6261 6e64 7769 6474 6873   down_bandwidths
-0001df70: 2e61 7070 656e 6428 7363 616e 5f6e 616d  .append(scan_nam
-0001df80: 6529 0a0a 2020 2020 2020 2020 7365 6c66  e)..        self
-0001df90: 2e61 7373 6572 744e 6f74 4571 7561 6c28  .assertNotEqual(
-0001dfa0: 6d69 7865 645f 6261 6e64 7769 6474 6873  mixed_bandwidths
-0001dfb0: 2c20 646f 776e 5f62 616e 6477 6964 7468  , down_bandwidth
-0001dfc0: 7329 0a20 2020 2020 2020 2073 656c 662e  s).        self.
-0001dfd0: 6173 7365 7274 4571 7561 6c28 0a20 2020  assertEqual(.   
-0001dfe0: 2020 2020 2020 2020 2073 6f72 7465 6428           sorted(
-0001dff0: 6d69 7865 645f 6261 6e64 7769 6474 6873  mixed_bandwidths
-0001e000: 2c20 7265 7665 7273 653d 5472 7565 292c  , reverse=True),
-0001e010: 2064 6f77 6e5f 6261 6e64 7769 6474 6873   down_bandwidths
-0001e020: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-0001e030: 6465 6620 7465 7374 5f74 6162 6c65 5f64  def test_table_d
-0001e040: 6174 615f 6164 645f 636f 6c75 6d6e 7328  ata_add_columns(
-0001e050: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
-0001e060: 2222 4164 6473 2074 6167 2063 6f6c 756d  ""Adds tag colum
-0001e070: 6e73 2074 6f20 7468 6520 7461 626c 6520  ns to the table 
-0001e080: 6461 7461 2077 696e 646f 772e 0a0a 2020  data window...  
-0001e090: 2020 2020 2020 2d20 5465 7374 7320 5461        - Tests Ta
-0001e0a0: 626c 6544 6174 6142 726f 7773 6572 2e61  bleDataBrowser.a
-0001e0b0: 6464 5f63 6f6c 756d 6e73 2e0a 2020 2020  dd_columns..    
-0001e0c0: 2020 2020 2222 220a 0a20 2020 2020 2020      """..       
-0001e0d0: 2023 2043 7265 6174 6573 2061 206e 6577   # Creates a new
-0001e0e0: 2070 726f 6a65 6374 2066 6f6c 6465 7220   project folder 
-0001e0f0: 616e 6420 7377 6974 6368 6573 2074 6f20  and switches to 
-0001e100: 6974 0a20 2020 2020 2020 206e 6577 5f70  it.        new_p
-0001e110: 726f 6a5f 7061 7468 203d 2073 656c 662e  roj_path = self.
-0001e120: 6765 745f 6e65 775f 7465 7374 5f70 726f  get_new_test_pro
-0001e130: 6a65 6374 286c 6967 6874 3d54 7275 6529  ject(light=True)
-0001e140: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
-0001e150: 696e 5f77 696e 646f 772e 7377 6974 6368  in_window.switch
-0001e160: 5f70 726f 6a65 6374 286e 6577 5f70 726f  _project(new_pro
-0001e170: 6a5f 7061 7468 2c20 2274 6573 745f 6c69  j_path, "test_li
-0001e180: 6768 745f 7072 6f6a 6563 7422 290a 0a20  ght_project").. 
-0001e190: 2020 2020 2020 2023 2053 6574 7320 7368         # Sets sh
-0001e1a0: 6f72 7463 7574 7320 666f 7220 6f66 7465  ortcuts for ofte
-0001e1b0: 6e20 7573 6564 206f 626a 6563 7473 0a20  n used objects. 
-0001e1c0: 2020 2020 2020 2074 6162 6c65 5f64 6174         table_dat
-0001e1d0: 6120 3d20 7365 6c66 2e6d 6169 6e5f 7769  a = self.main_wi
-0001e1e0: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
-0001e1f0: 722e 7461 626c 655f 6461 7461 0a0a 2020  r.table_data..  
-0001e200: 2020 2020 2020 2320 4164 6473 2061 2074        # Adds a t
-0001e210: 6167 2c20 6f66 2074 6865 2074 7970 6573  ag, of the types
-0001e220: 2066 6c6f 6174 2c20 6461 7465 7469 6d65   float, datetime
-0001e230: 2c20 6461 7465 2061 6e64 2074 696d 652c  , date and time,
-0001e240: 2074 6f0a 2020 2020 2020 2020 2320 7468   to.        # th
-0001e250: 6520 7072 6f6a 6563 7420 7365 7373 696f  e project sessio
-0001e260: 6e0a 2020 2020 2020 2020 7461 6773 203d  n.        tags =
-0001e270: 205b 0a20 2020 2020 2020 2020 2020 2022   [.            "
-0001e280: 6d6f 636b 5f74 6167 5f66 6c6f 6174 222c  mock_tag_float",
-0001e290: 0a20 2020 2020 2020 2020 2020 2022 6d6f  .            "mo
-0001e2a0: 636b 5f74 6167 5f64 6174 6574 696d 6522  ck_tag_datetime"
-0001e2b0: 2c0a 2020 2020 2020 2020 2020 2020 226d  ,.            "m
-0001e2c0: 6f63 6b5f 7461 675f 6461 7465 222c 0a20  ock_tag_date",. 
-0001e2d0: 2020 2020 2020 2020 2020 2022 6d6f 636b             "mock
-0001e2e0: 5f74 6167 5f74 696d 6522 2c0a 2020 2020  _tag_time",.    
-0001e2f0: 2020 2020 5d0a 2020 2020 2020 2020 7479      ].        ty
-0001e300: 7065 7320 3d20 5b0a 2020 2020 2020 2020  pes = [.        
-0001e310: 2020 2020 4649 454c 445f 5459 5045 5f46      FIELD_TYPE_F
-0001e320: 4c4f 4154 2c0a 2020 2020 2020 2020 2020  LOAT,.          
-0001e330: 2020 4649 454c 445f 5459 5045 5f44 4154    FIELD_TYPE_DAT
-0001e340: 4554 494d 452c 0a20 2020 2020 2020 2020  ETIME,.         
-0001e350: 2020 2046 4945 4c44 5f54 5950 455f 4441     FIELD_TYPE_DA
-0001e360: 5445 2c0a 2020 2020 2020 2020 2020 2020  TE,.            
-0001e370: 4649 454c 445f 5459 5045 5f54 494d 452c  FIELD_TYPE_TIME,
-0001e380: 0a20 2020 2020 2020 205d 0a20 2020 2020  .        ].     
-0001e390: 2020 2066 6f72 2028 7461 672c 2074 6167     for (tag, tag
-0001e3a0: 5f74 7970 6529 2069 6e20 7a69 7028 7461  _type) in zip(ta
-0001e3b0: 6773 2c20 7479 7065 7329 3a0a 2020 2020  gs, types):.    
-0001e3c0: 2020 2020 2020 2020 7461 626c 655f 6461          table_da
-0001e3d0: 7461 2e70 726f 6a65 6374 2e73 6573 7369  ta.project.sessi
-0001e3e0: 6f6e 2e61 6464 5f66 6965 6c64 280a 2020  on.add_field(.  
-0001e3f0: 2020 2020 2020 2020 2020 2020 2020 434f                CO
-0001e400: 4c4c 4543 5449 4f4e 5f43 5552 5245 4e54  LLECTION_CURRENT
-0001e410: 2c20 7461 672c 2074 6167 5f74 7970 652c  , tag, tag_type,
-0001e420: 2022 222c 2054 7275 652c 2022 222c 2022   "", True, "", "
-0001e430: 222c 2022 220a 2020 2020 2020 2020 2020  ", "".          
-0001e440: 2020 290a 0a20 2020 2020 2020 2074 6162    )..        tab
-0001e450: 6c65 5f64 6174 612e 6164 645f 636f 6c75  le_data.add_colu
-0001e460: 6d6e 7328 2920 2023 2041 6464 7320 7468  mns()  # Adds th
-0001e470: 6520 7461 6773 2074 6f20 7461 626c 6520  e tags to table 
-0001e480: 7669 6577 0a0a 2020 2020 2020 2020 2320  view..        # 
-0001e490: 4173 7365 7274 7320 7468 6174 2074 6865  Asserts that the
-0001e4a0: 2074 6167 7320 7765 7265 2061 6464 6564   tags were added
-0001e4b0: 2074 6f20 7468 6520 7461 626c 6520 7669   to the table vi
-0001e4c0: 6577 0a20 2020 2020 2020 2066 6f72 2074  ew.        for t
-0001e4d0: 6167 2069 6e20 7461 6773 3a0a 2020 2020  ag in tags:.    
-0001e4e0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0001e4f0: 6572 7449 734e 6f74 4e6f 6e65 2874 6162  ertIsNotNone(tab
-0001e500: 6c65 5f64 6174 612e 6765 745f 7461 675f  le_data.get_tag_
-0001e510: 636f 6c75 6d6e 2874 6167 2929 0a0a 2020  column(tag))..  
-0001e520: 2020 6465 6620 7465 7374 5f74 6162 6c65    def test_table
-0001e530: 5f64 6174 615f 6170 7065 6e64 6978 2873  _data_appendix(s
-0001e540: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
-0001e550: 224f 7065 6e73 2061 2070 726f 6a65 6374  "Opens a project
-0001e560: 2061 6e64 2074 6573 7473 206d 6973 6365   and tests misce
-0001e570: 6c6c 616e 656f 7573 206d 6574 686f 6473  llaneous methods
-0001e580: 206f 6620 7468 6520 7461 626c 650a 2020   of the table.  
-0001e590: 2020 2020 2020 6461 7461 2076 6965 772c        data view,
-0001e5a0: 2069 6e20 7468 6520 6461 7461 2062 726f   in the data bro
-0001e5b0: 7773 6572 2e0a 0a20 2020 2020 2020 202d  wser...        -
-0001e5c0: 5465 7374 730a 2020 2020 2020 2020 2020  Tests.          
-0001e5d0: 2020 2d20 5461 626c 6544 6174 6142 726f    - TableDataBro
-0001e5e0: 7773 6572 2e63 6861 6e67 655f 6365 6c6c  wser.change_cell
-0001e5f0: 5f63 6f6c 6f72 0a20 2020 2020 2020 2020  _color.         
-0001e600: 2020 202d 2054 6162 6c65 4461 7461 4272     - TableDataBr
-0001e610: 6f77 7365 722e 7365 6374 696f 6e5f 6d6f  owser.section_mo
-0001e620: 7665 640a 2020 2020 2020 2020 2020 2020  ved.            
-0001e630: 2d20 5461 626c 6544 6174 6142 726f 7773  - TableDataBrows
-0001e640: 6572 2e73 656c 6563 7443 6f6c 756d 6e0a  er.selectColumn.
-0001e650: 2020 2020 2020 2020 2222 220a 0a20 2020          """..   
-0001e660: 2020 2020 2023 2043 7265 6174 6573 2061       # Creates a
-0001e670: 206e 6577 2070 726f 6a65 6374 2066 6f6c   new project fol
-0001e680: 6465 7220 616e 6420 7377 6974 6368 6573  der and switches
-0001e690: 2074 6f20 6974 0a20 2020 2020 2020 206e   to it.        n
-0001e6a0: 6577 5f70 726f 6a5f 7061 7468 203d 2073  ew_proj_path = s
-0001e6b0: 656c 662e 6765 745f 6e65 775f 7465 7374  elf.get_new_test
-0001e6c0: 5f70 726f 6a65 6374 286c 6967 6874 3d54  _project(light=T
-0001e6d0: 7275 6529 0a20 2020 2020 2020 2073 656c  rue).        sel
-0001e6e0: 662e 6d61 696e 5f77 696e 646f 772e 7377  f.main_window.sw
-0001e6f0: 6974 6368 5f70 726f 6a65 6374 286e 6577  itch_project(new
-0001e700: 5f70 726f 6a5f 7061 7468 2c20 2274 6573  _proj_path, "tes
-0001e710: 745f 6c69 6768 745f 7072 6f6a 6563 7422  t_light_project"
-0001e720: 290a 0a20 2020 2020 2020 2023 2053 6574  )..        # Set
-0001e730: 206f 6674 656e 2075 7365 6420 7368 6f72   often used shor
-0001e740: 7463 7574 730a 2020 2020 2020 2020 7461  tcuts.        ta
-0001e750: 626c 655f 6461 7461 203d 2073 656c 662e  ble_data = self.
-0001e760: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
-0001e770: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
-0001e780: 6174 610a 0a20 2020 2020 2020 2023 2323  ata..        ###
-0001e790: 2054 4553 5453 2043 4841 4e47 455f 4345   TESTS CHANGE_CE
-0001e7a0: 4c4c 5f43 4f4c 4f52 0a20 2020 2020 2020  LL_COLOR.       
-0001e7b0: 2023 2041 6464 7320 6120 6e65 7720 646f   # Adds a new do
-0001e7c0: 6375 6d65 6e74 2074 6f20 7468 6520 636f  cument to the co
-0001e7d0: 6c6c 6563 7469 6f6e 0a20 2020 2020 2020  llection.       
-0001e7e0: 204e 4557 5f44 4f43 203d 207b 2246 696c   NEW_DOC = {"Fil
-0001e7f0: 654e 616d 6522 3a20 226d 6f63 6b5f 6669  eName": "mock_fi
-0001e800: 6c65 5f6e 616d 6522 7d0a 2020 2020 2020  le_name"}.      
-0001e810: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
-0001e820: 6f77 2e70 726f 6a65 6374 2e73 6573 7369  ow.project.sessi
-0001e830: 6f6e 2e61 6464 5f64 6f63 756d 656e 7428  on.add_document(
-0001e840: 0a20 2020 2020 2020 2020 2020 2043 4f4c  .            COL
-0001e850: 4c45 4354 494f 4e5f 4355 5252 454e 542c  LECTION_CURRENT,
-0001e860: 204e 4557 5f44 4f43 0a20 2020 2020 2020   NEW_DOC.       
-0001e870: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
-0001e880: 6d61 696e 5f77 696e 646f 772e 7072 6f6a  main_window.proj
-0001e890: 6563 742e 7365 7373 696f 6e2e 6164 645f  ect.session.add_
-0001e8a0: 646f 6375 6d65 6e74 280a 2020 2020 2020  document(.      
-0001e8b0: 2020 2020 2020 434f 4c4c 4543 5449 4f4e        COLLECTION
-0001e8c0: 5f49 4e49 5449 414c 2c20 4e45 575f 444f  _INITIAL, NEW_DO
-0001e8d0: 430a 2020 2020 2020 2020 290a 0a20 2020  C.        )..   
-0001e8e0: 2020 2020 2023 2053 656c 6563 7473 2074       # Selects t
-0001e8f0: 6865 2027 4669 6c65 6e61 6d65 2720 6f66  he 'Filename' of
-0001e900: 2074 6865 2066 6972 7374 2073 6361 6e20   the first scan 
-0001e910: 616e 6420 6368 616e 6765 7320 6974 7320  and changes its 
-0001e920: 7661 6c75 650a 2020 2020 2020 2020 2320  value.        # 
-0001e930: 746f 2074 6869 7320 646f 6375 6d65 6e74  to this document
-0001e940: 2066 696c 656e 616d 650a 2020 2020 2020   filename.      
-0001e950: 2020 7461 626c 655f 6461 7461 2e69 7465    table_data.ite
-0001e960: 6d28 302c 2030 292e 7365 7453 656c 6563  m(0, 0).setSelec
-0001e970: 7465 6428 5472 7565 290a 2020 2020 2020  ted(True).      
-0001e980: 2020 7461 626c 655f 6461 7461 2e69 7465    table_data.ite
-0001e990: 6d28 302c 2030 292e 7365 7454 6578 7428  m(0, 0).setText(
-0001e9a0: 4e45 575f 444f 435b 2246 696c 654e 616d  NEW_DOC["FileNam
-0001e9b0: 6522 5d29 0a20 2020 2020 2020 2074 6162  e"]).        tab
-0001e9c0: 6c65 5f64 6174 612e 6974 656d 2830 2c20  le_data.item(0, 
-0001e9d0: 3029 2e73 6574 5365 6c65 6374 6564 2846  0).setSelected(F
-0001e9e0: 616c 7365 290a 0a20 2020 2020 2020 2023  alse)..        #
-0001e9f0: 2053 656c 6563 7473 2027 464f 5627 2061   Selects 'FOV' a
-0001ea00: 6e64 2063 6861 6e67 6573 2069 7473 2076  nd changes its v
-0001ea10: 616c 7565 0a20 2020 2020 2020 2074 6162  alue.        tab
-0001ea20: 6c65 5f64 6174 612e 6974 656d 2830 2c20  le_data.item(0, 
-0001ea30: 3329 2e73 6574 5365 6c65 6374 6564 2854  3).setSelected(T
-0001ea40: 7275 6529 0a20 2020 2020 2020 2074 6162  rue).        tab
-0001ea50: 6c65 5f64 6174 612e 6974 656d 2830 2c20  le_data.item(0, 
-0001ea60: 3329 2e73 6574 5465 7874 2822 5b34 2e30  3).setText("[4.0
-0001ea70: 2c20 342e 305d 2229 0a20 2020 2020 2020  , 4.0]").       
-0001ea80: 2074 6162 6c65 5f64 6174 612e 6974 656d   table_data.item
-0001ea90: 2830 2c20 3329 2e73 6574 5365 6c65 6374  (0, 3).setSelect
-0001eaa0: 6564 2846 616c 7365 290a 0a20 2020 2020  ed(False)..     
-0001eab0: 2020 2023 2043 7265 6174 6573 2061 2074     # Creates a t
-0001eac0: 6167 206f 6620 7479 7065 2066 6c6f 6174  ag of type float
-0001ead0: 2061 6e64 2073 656c 6563 7473 2069 740a   and selects it.
-0001eae0: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
-0001eaf0: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
-0001eb00: 6f77 7365 722e 6164 645f 7461 675f 696e  owser.add_tag_in
-0001eb10: 666f 7328 0a20 2020 2020 2020 2020 2020  fos(.           
-0001eb20: 2022 6d6f 636b 5f74 6167 222c 2030 2e30   "mock_tag", 0.0
-0001eb30: 2c20 4649 454c 445f 5459 5045 5f46 4c4f  , FIELD_TYPE_FLO
-0001eb40: 4154 2c20 2222 2c20 2222 0a20 2020 2020  AT, "", "".     
-0001eb50: 2020 2029 0a20 2020 2020 2020 2074 6162     ).        tab
-0001eb60: 6c65 5f64 6174 612e 6974 656d 2830 2c20  le_data.item(0, 
-0001eb70: 3629 2e73 6574 5365 6c65 6374 6564 2854  6).setSelected(T
-0001eb80: 7275 6529 0a0a 2020 2020 2020 2020 2320  rue)..        # 
-0001eb90: 4d6f 636b 7320 7468 6520 6578 6563 7574  Mocks the execut
-0001eba0: 696f 6e20 6f66 2061 2064 6961 6c6f 6720  ion of a dialog 
-0001ebb0: 626f 780a 2020 2020 2020 2020 514d 6573  box.        QMes
-0001ebc0: 7361 6765 426f 782e 6578 6563 203d 206c  sageBox.exec = l
-0001ebd0: 616d 6264 6120 2a61 7267 733a 204e 6f6e  ambda *args: Non
-0001ebe0: 650a 0a20 2020 2020 2020 2023 2054 7269  e..        # Tri
-0001ebf0: 6573 2073 6574 7469 6e67 2061 6e20 696e  es setting an in
-0001ec00: 7661 6c69 6420 7374 7269 6e67 2076 616c  valid string val
-0001ec10: 7565 2074 6f20 7468 6520 7461 670a 2020  ue to the tag.  
-0001ec20: 2020 2020 2020 7461 626c 655f 6461 7461        table_data
-0001ec30: 2e69 7465 6d28 302c 2036 292e 7365 7454  .item(0, 6).setT
-0001ec40: 6578 7428 2269 6e76 616c 6964 5f73 7472  ext("invalid_str
-0001ec50: 696e 6722 290a 2020 2020 2020 2020 7461  ing").        ta
-0001ec60: 626c 655f 6461 7461 2e69 7465 6d28 302c  ble_data.item(0,
-0001ec70: 2036 292e 7365 7453 656c 6563 7465 6428   6).setSelected(
-0001ec80: 4661 6c73 6529 0a0a 2020 2020 2020 2020  False)..        
-0001ec90: 2320 4372 6561 7465 7320 616e 6f74 6865  # Creates anothe
-0001eca0: 7220 7461 6720 6f66 2074 7970 6520 666c  r tag of type fl
-0001ecb0: 6f61 7420 616e 6420 7365 6c65 6374 7320  oat and selects 
-0001ecc0: 6974 0a20 2020 2020 2020 2073 656c 662e  it.        self.
-0001ecd0: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
-0001ece0: 5f62 726f 7773 6572 2e61 6464 5f74 6167  _browser.add_tag
-0001ecf0: 5f69 6e66 6f73 280a 2020 2020 2020 2020  _infos(.        
-0001ed00: 2020 2020 226d 6f63 6b5f 7461 675f 3122      "mock_tag_1"
-0001ed10: 2c20 302e 302c 2046 4945 4c44 5f54 5950  , 0.0, FIELD_TYP
-0001ed20: 455f 464c 4f41 542c 2022 222c 2022 220a  E_FLOAT, "", "".
-0001ed30: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0001ed40: 2020 7461 626c 655f 6461 7461 2e69 7465    table_data.ite
-0001ed50: 6d28 302c 2037 292e 7365 7453 656c 6563  m(0, 7).setSelec
-0001ed60: 7465 6428 5472 7565 290a 0a20 2020 2020  ted(True)..     
-0001ed70: 2020 2023 2053 6574 7320 6120 7661 6c69     # Sets a vali
-0001ed80: 6420 666c 6f61 7420 7661 6c75 6520 746f  d float value to
-0001ed90: 2074 6865 2074 6167 0a20 2020 2020 2020   the tag.       
-0001eda0: 2074 6162 6c65 5f64 6174 612e 6974 656d   table_data.item
-0001edb0: 2830 2c20 3729 2e73 6574 5465 7874 2822  (0, 7).setText("
-0001edc0: 302e 3022 290a 0a20 2020 2020 2020 2023  0.0")..        #
-0001edd0: 2043 6861 6e67 696e 6720 7468 6520 7361   Changing the sa
-0001ede0: 6d65 2074 6167 2064 6f65 7320 6e6f 7420  me tag does not 
-0001edf0: 7472 6967 6765 7220 7468 6520 2776 616c  trigger the 'val
-0001ee00: 7565 4368 616e 6765 6427 2061 6e64 0a20  ueChanged' and. 
-0001ee10: 2020 2020 2020 2023 2074 6875 7320 6e6f         # thus no
-0001ee20: 7420 7468 6520 2763 6861 6e67 655f 6365  t the 'change_ce
-0001ee30: 6c6c 5f63 6f6c 6f72 2720 6d65 7468 6f64  ll_color' method
-0001ee40: 0a20 2020 2020 2020 2074 6162 6c65 5f64  .        table_d
-0001ee50: 6174 612e 6974 656d 2830 2c20 3729 2e73  ata.item(0, 7).s
-0001ee60: 6574 5365 6c65 6374 6564 2846 616c 7365  etSelected(False
-0001ee70: 290a 0a20 2020 2020 2020 2023 2053 656c  )..        # Sel
-0001ee80: 6563 7473 2074 6865 2027 4578 7020 5479  ects the 'Exp Ty
-0001ee90: 7065 2720 616e 6420 2746 4f56 2720 6f66  pe' and 'FOV' of
-0001eea0: 2074 6865 2066 6972 7374 2073 6361 6e2c   the first scan,
-0001eeb0: 2077 6869 6368 2068 6176 650a 2020 2020   which have.    
-0001eec0: 2020 2020 2320 6469 7374 696e 6374 2064      # distinct d
-0001eed0: 6174 6120 7479 7065 730a 2020 2020 2020  ata types.      
-0001eee0: 2020 7461 626c 655f 6461 7461 2e69 7465    table_data.ite
-0001eef0: 6d28 302c 2032 292e 7365 7453 656c 6563  m(0, 2).setSelec
-0001ef00: 7465 6428 5472 7565 290a 2020 2020 2020  ted(True).      
-0001ef10: 2020 7461 626c 655f 6461 7461 2e69 7465    table_data.ite
-0001ef20: 6d28 302c 2033 292e 7365 7453 656c 6563  m(0, 3).setSelec
-0001ef30: 7465 6428 5472 7565 290a 0a20 2020 2020  ted(True)..     
-0001ef40: 2020 2023 2054 7269 6573 2063 6861 6e67     # Tries chang
-0001ef50: 696e 6720 7468 6520 7661 6c75 6520 6f66  ing the value of
-0001ef60: 2027 4578 7020 5479 7065 270a 2020 2020   'Exp Type'.    
-0001ef70: 2020 2020 7461 626c 655f 6461 7461 2e69      table_data.i
-0001ef80: 7465 6d28 302c 2032 292e 7365 7454 6578  tem(0, 2).setTex
-0001ef90: 7428 2252 4152 455f 4222 290a 0a20 2020  t("RARE_B")..   
-0001efa0: 2020 2020 2023 2041 7373 6572 7473 2074       # Asserts t
-0001efb0: 6861 7420 6f6e 6c79 2027 4578 7020 5479  hat only 'Exp Ty
-0001efc0: 7065 2720 6368 616e 6765 640a 2020 2020  pe' changed.    
-0001efd0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0001efe0: 7175 616c 2874 6162 6c65 5f64 6174 612e  qual(table_data.
-0001eff0: 6974 656d 2830 2c20 3229 2e74 6578 7428  item(0, 2).text(
-0001f000: 292c 2022 5241 5245 5f42 2229 0a20 2020  ), "RARE_B").   
-0001f010: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0001f020: 4e6f 7445 7175 616c 2874 6162 6c65 5f64  NotEqual(table_d
-0001f030: 6174 612e 6974 656d 2830 2c20 3329 2e74  ata.item(0, 3).t
-0001f040: 6578 7428 292c 2022 5241 5245 5f42 2229  ext(), "RARE_B")
-0001f050: 0a0a 2020 2020 2020 2020 2323 2320 5445  ..        ### TE
-0001f060: 5354 5320 5345 4c45 4354 494f 4e5f 4d4f  STS SELECTION_MO
-0001f070: 5645 440a 0a20 2020 2020 2020 2023 2053  VED..        # S
-0001f080: 7769 7463 6820 636f 6c75 6d6e 7320 6f66  witch columns of
-0001f090: 2074 6865 2032 2066 6972 7374 2074 6167   the 2 first tag
-0001f0a0: 730a 2020 2020 2020 2020 7461 626c 655f  s.        table_
-0001f0b0: 6461 7461 2e68 6f72 697a 6f6e 7461 6c48  data.horizontalH
-0001f0c0: 6561 6465 7228 292e 7365 6374 696f 6e4d  eader().sectionM
-0001f0d0: 6f76 6564 2e65 6d69 7428 302c 2030 2c20  oved.emit(0, 0, 
-0001f0e0: 3129 0a0a 2020 2020 2020 2020 2323 2320  1)..        ### 
-0001f0f0: 5345 4c45 4354 5f43 4f4c 554d 4e0a 2020  SELECT_COLUMN.  
-0001f100: 2020 2020 2020 2320 5365 6c65 6374 7320        # Selects 
-0001f110: 7468 6520 7768 6f6c 6520 6669 6c65 6e61  the whole filena
-0001f120: 6d65 2063 6f6c 756d 6e0a 2020 2020 2020  me column.      
-0001f130: 2020 7461 626c 655f 6461 7461 2e73 656c    table_data.sel
-0001f140: 6563 7443 6f6c 756d 6e28 3029 0a0a 2020  ectColumn(0)..  
-0001f150: 2020 2020 2020 2320 4173 7365 7274 7320        # Asserts 
-0001f160: 7468 6174 2069 7420 7761 7320 7365 6c65  that it was sele
-0001f170: 6374 6564 0a20 2020 2020 2020 2073 656c  cted.        sel
-0001f180: 6563 7465 645f 6974 656d 7320 3d20 7461  ected_items = ta
-0001f190: 626c 655f 6461 7461 2e73 656c 6563 7465  ble_data.selecte
-0001f1a0: 6449 7465 6d73 2829 0a20 2020 2020 2020  dItems().       
-0001f1b0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0001f1c0: 6c28 6c65 6e28 7365 6c65 6374 6564 5f69  l(len(selected_i
-0001f1d0: 7465 6d73 292c 206c 656e 2874 6162 6c65  tems), len(table
-0001f1e0: 5f64 6174 612e 7363 616e 7329 290a 2020  _data.scans)).  
-0001f1f0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0001f200: 7445 7175 616c 2873 656c 6563 7465 645f  tEqual(selected_
-0001f210: 6974 656d 735b 305d 2e74 6578 7428 292c  items[0].text(),
-0001f220: 2074 6162 6c65 5f64 6174 612e 7363 616e   table_data.scan
-0001f230: 735b 305d 5b30 5d29 0a0a 2020 2020 6465  s[0][0])..    de
-0001f240: 6620 7465 7374 5f74 6162 6c65 5f64 6174  f test_table_dat
-0001f250: 615f 636f 6e74 6578 745f 6d65 6e75 2873  a_context_menu(s
-0001f260: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
-0001f270: 2252 6967 6874 2d63 6c69 636b 206f 6e20  "Right-click on 
-0001f280: 6120 7363 616e 2074 6f20 6469 7370 6c61  a scan to displa
-0001f290: 7920 7468 6520 636f 6e74 6578 7420 6d65  y the context me
-0001f2a0: 6e75 2074 6162 6c65 2c20 616e 6420 6368  nu table, and ch
-0001f2b0: 6f6f 7365 0a20 2020 2020 2020 2061 6e20  oose.        an 
-0001f2c0: 6f70 7469 6f6e 2e0a 0a20 2020 2020 2020  option...       
-0001f2d0: 202d 2054 6573 7473 3a20 5461 626c 6544   - Tests: TableD
-0001f2e0: 6174 6142 726f 7773 6572 2e63 6f6e 7465  ataBrowser.conte
-0001f2f0: 7874 5f6d 656e 755f 7461 626c 650a 0a20  xt_menu_table.. 
-0001f300: 2020 2020 2020 202d 204d 6f63 6b73 3a0a         - Mocks:.
-0001f310: 2020 2020 2020 2020 2020 2020 2d20 514d              - QM
-0001f320: 656e 752e 6578 6563 5f0a 2020 2020 2020  enu.exec_.      
-0001f330: 2020 2020 2020 2d20 514d 6573 7361 6765        - QMessage
-0001f340: 426f 782e 6578 6563 0a20 2020 2020 2020  Box.exec.       
-0001f350: 2022 2222 0a0a 2020 2020 2020 2020 2320   """..        # 
-0001f360: 4372 6561 7465 7320 6120 6e65 7720 7072  Creates a new pr
-0001f370: 6f6a 6563 7420 666f 6c64 6572 2061 6e64  oject folder and
-0001f380: 2073 7769 7463 6865 7320 746f 2069 740a   switches to it.
-0001f390: 2020 2020 2020 2020 6e65 775f 7072 6f6a          new_proj
-0001f3a0: 5f70 6174 6820 3d20 7365 6c66 2e67 6574  _path = self.get
-0001f3b0: 5f6e 6577 5f74 6573 745f 7072 6f6a 6563  _new_test_projec
-0001f3c0: 7428 6c69 6768 743d 5472 7565 290a 2020  t(light=True).  
-0001f3d0: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-0001f3e0: 7769 6e64 6f77 2e73 7769 7463 685f 7072  window.switch_pr
-0001f3f0: 6f6a 6563 7428 6e65 775f 7072 6f6a 5f70  oject(new_proj_p
-0001f400: 6174 682c 2022 7465 7374 5f6c 6967 6874  ath, "test_light
-0001f410: 5f70 726f 6a65 6374 2229 0a0a 2020 2020  _project")..    
-0001f420: 2020 2020 2320 5365 7473 2073 686f 7274      # Sets short
-0001f430: 6375 7473 2066 6f72 206f 6674 656e 2075  cuts for often u
-0001f440: 7365 6420 6f62 6a65 6374 730a 2020 2020  sed objects.    
-0001f450: 2020 2020 7461 626c 655f 6461 7461 203d      table_data =
-0001f460: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-0001f470: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
-0001f480: 6162 6c65 5f64 6174 610a 0a20 2020 2020  able_data..     
-0001f490: 2020 2023 204d 6f63 6b73 2074 6865 2065     # Mocks the e
-0001f4a0: 7865 6375 7469 6f6e 206f 6620 6120 6469  xecution of a di
-0001f4b0: 616c 6f67 2062 6f78 0a20 2020 2020 2020  alog box.       
-0001f4c0: 2051 4d65 7373 6167 6542 6f78 2e65 7865   QMessageBox.exe
-0001f4d0: 6320 3d20 6c61 6d62 6461 202a 6172 6773  c = lambda *args
-0001f4e0: 3a20 4e6f 6e65 0a0a 2020 2020 2020 2020  : None..        
-0001f4f0: 2320 4f70 656e 7320 7468 6520 636f 6e74  # Opens the cont
-0001f500: 6578 7420 6d65 6e75 206f 6e65 2074 696d  ext menu one tim
-0001f510: 6520 6265 666f 7265 2063 7963 6c69 6e67  e before cycling
-0001f520: 2074 6872 6f75 6768 2074 6865 0a20 2020   through the.   
-0001f530: 2020 2020 2023 2061 6374 696f 6e73 0a20       # actions. 
-0001f540: 2020 2020 2020 2051 4d65 6e75 2e65 7865         QMenu.exe
-0001f550: 635f 203d 206c 616d 6264 6120 2a61 7267  c_ = lambda *arg
-0001f560: 733a 204e 6f6e 650a 2020 2020 2020 2020  s: None.        
-0001f570: 7461 626c 655f 6461 7461 2e63 6f6e 7465  table_data.conte
-0001f580: 7874 5f6d 656e 755f 7461 626c 6528 5150  xt_menu_table(QP
-0001f590: 6f69 6e74 2831 302c 2031 3029 290a 0a20  oint(10, 10)).. 
-0001f5a0: 2020 2020 2020 2023 2043 7963 6c65 7320         # Cycles 
-0001f5b0: 7468 726f 7567 6820 7468 6520 6163 7469  through the acti
-0001f5c0: 6f6e 7320 6279 206f 7065 6e69 6e67 2074  ons by opening t
-0001f5d0: 6865 2063 6f6e 7465 7874 206d 656e 7520  he context menu 
-0001f5e0: 616e 640a 2020 2020 2020 2020 2320 636c  and.        # cl
-0001f5f0: 6963 6b69 6e67 2069 6e20 6561 6368 206f  icking in each o
-0001f600: 6e65 206f 6620 7468 656d 0a20 2020 2020  ne of them.     
-0001f610: 2020 2061 6374 5f6e 616d 6573 203d 205b     act_names = [
-0001f620: 0a20 2020 2020 2020 2020 2020 2022 6163  .            "ac
-0001f630: 7469 6f6e 5f72 6573 6574 5f63 656c 6c22  tion_reset_cell"
-0001f640: 2c0a 2020 2020 2020 2020 2020 2020 2261  ,.            "a
-0001f650: 6374 696f 6e5f 7265 7365 745f 636f 6c75  ction_reset_colu
-0001f660: 6d6e 222c 0a20 2020 2020 2020 2020 2020  mn",.           
-0001f670: 2022 6163 7469 6f6e 5f72 6573 6574 5f72   "action_reset_r
-0001f680: 6f77 222c 0a20 2020 2020 2020 2020 2020  ow",.           
-0001f690: 2022 6163 7469 6f6e 5f63 6c65 6172 5f63   "action_clear_c
-0001f6a0: 656c 6c22 2c0a 2020 2020 2020 2020 2020  ell",.          
-0001f6b0: 2020 2261 6374 696f 6e5f 6164 645f 7363    "action_add_sc
-0001f6c0: 616e 222c 0a20 2020 2020 2020 2020 2020  an",.           
-0001f6d0: 2022 6163 7469 6f6e 5f72 656d 6f76 655f   "action_remove_
-0001f6e0: 7363 616e 222c 0a20 2020 2020 2020 2020  scan",.         
-0001f6f0: 2020 2022 6163 7469 6f6e 5f76 6973 7561     "action_visua
-0001f700: 6c69 7a65 645f 7461 6773 222c 0a20 2020  lized_tags",.   
-0001f710: 2020 2020 2020 2020 2022 6163 7469 6f6e           "action
-0001f720: 5f73 656c 6563 745f 636f 6c75 6d6e 222c  _select_column",
-0001f730: 0a20 2020 2020 2020 2020 2020 2022 6163  .            "ac
-0001f740: 7469 6f6e 5f6d 756c 7469 706c 655f 736f  tion_multiple_so
-0001f750: 7274 222c 0a20 2020 2020 2020 2020 2020  rt",.           
-0001f760: 2022 6163 7469 6f6e 5f73 656e 645f 646f   "action_send_do
-0001f770: 6375 6d65 6e74 735f 746f 5f70 6970 656c  cuments_to_pipel
-0001f780: 696e 6522 2c0a 2020 2020 2020 2020 2020  ine",.          
-0001f790: 2020 2261 6374 696f 6e5f 6469 7370 6c61    "action_displa
-0001f7a0: 795f 7064 665f 6669 6c65 222c 0a20 2020  y_pdf_file",.   
-0001f7b0: 2020 2020 205d 0a20 2020 2020 2020 2023       ].        #
-0001f7c0: 2049 6e63 6c75 6469 6e67 2027 6163 7469   Including 'acti
-0001f7d0: 6f6e 5f73 6f72 745f 636f 6c75 6d6e 2720  on_sort_column' 
-0001f7e0: 7769 6c6c 2063 7261 7368 2074 6865 2062  will crash the b
-0001f7f0: 7569 6c64 0a0a 2020 2020 2020 2020 666f  uild..        fo
-0001f800: 7220 6163 745f 6e61 6d65 2069 6e20 6163  r act_name in ac
-0001f810: 745f 6e61 6d65 733a 0a20 2020 2020 2020  t_names:.       
-0001f820: 2020 2020 2051 4d65 6e75 2e65 7865 635f       QMenu.exec_
-0001f830: 203d 206c 616d 6264 6120 2a61 7267 733a   = lambda *args:
-0001f840: 2067 6574 6174 7472 2874 6162 6c65 5f64   getattr(table_d
-0001f850: 6174 612c 2061 6374 5f6e 616d 6529 0a20  ata, act_name). 
-0001f860: 2020 2020 2020 2020 2020 2074 6162 6c65             table
-0001f870: 5f64 6174 612e 636f 6e74 6578 745f 6d65  _data.context_me
-0001f880: 6e75 5f74 6162 6c65 2851 506f 696e 7428  nu_table(QPoint(
-0001f890: 3130 2c20 3130 2929 0a0a 2020 2020 6465  10, 10))..    de
-0001f8a0: 6620 7465 7374 5f75 6e64 6f5f 7265 646f  f test_undo_redo
-0001f8b0: 5f64 6174 6162 726f 7773 6572 2873 656c  _databrowser(sel
-0001f8c0: 6629 3a0a 2020 2020 2020 2020 2222 2254  f):.        """T
-0001f8d0: 6573 7473 2074 6865 2044 6174 6142 726f  ests the DataBro
-0001f8e0: 7773 6572 2075 6e64 6f2f 7265 646f 2e22  wser undo/redo."
-0001f8f0: 2222 0a0a 2020 2020 2020 2020 7072 6f6a  ""..        proj
-0001f900: 6563 745f 385f 7061 7468 203d 2073 656c  ect_8_path = sel
-0001f910: 662e 6765 745f 6e65 775f 7465 7374 5f70  f.get_new_test_p
-0001f920: 726f 6a65 6374 2829 0a20 2020 2020 2020  roject().       
-0001f930: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-0001f940: 772e 7377 6974 6368 5f70 726f 6a65 6374  w.switch_project
-0001f950: 2870 726f 6a65 6374 5f38 5f70 6174 682c  (project_8_path,
-0001f960: 2022 7072 6f6a 6563 745f 3822 290a 0a20   "project_8").. 
-0001f970: 2020 2020 2020 2023 2031 2e20 5461 6720         # 1. Tag 
-0001f980: 7661 6c75 6520 286c 6973 7429 0a20 2020  value (list).   
-0001f990: 2020 2020 2023 2043 6865 636b 2075 6e64       # Check und
-0001f9a0: 6f73 2061 6e64 2072 6564 6f73 2061 7265  os and redos are
-0001f9b0: 2065 6d70 7479 0a20 2020 2020 2020 2073   empty.        s
-0001f9c0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0001f9d0: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-0001f9e0: 2e70 726f 6a65 6374 2e75 6e64 6f73 2c20  .project.undos, 
-0001f9f0: 5b5d 290a 2020 2020 2020 2020 7365 6c66  []).        self
-0001fa00: 2e61 7373 6572 7445 7175 616c 2873 656c  .assertEqual(sel
-0001fa10: 662e 6d61 696e 5f77 696e 646f 772e 7072  f.main_window.pr
-0001fa20: 6f6a 6563 742e 7265 646f 732c 205b 5d29  oject.redos, [])
-0001fa30: 0a0a 2020 2020 2020 2020 2320 4461 7461  ..        # Data
-0001fa40: 4272 6f77 7365 7220 7661 6c75 6520 666f  Browser value fo
-0001fa50: 7220 7365 636f 6e64 2064 6f63 756d 656e  r second documen
-0001fa60: 740a 2020 2020 2020 2020 6277 5f63 6f6c  t.        bw_col
-0001fa70: 756d 6e20 3d20 2873 656c 662e 6d61 696e  umn = (self.main
-0001fa80: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
-0001fa90: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
-0001faa0: 6765 745f 7461 675f 636f 6c75 6d6e 2928  get_tag_column)(
-0001fab0: 0a20 2020 2020 2020 2020 2020 2022 4261  .            "Ba
-0001fac0: 6e64 5769 6474 6822 0a20 2020 2020 2020  ndWidth".       
-0001fad0: 2029 0a20 2020 2020 2020 2062 775f 6974   ).        bw_it
-0001fae0: 656d 203d 2073 656c 662e 6d61 696e 5f77  em = self.main_w
-0001faf0: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
-0001fb00: 6572 2e74 6162 6c65 5f64 6174 612e 6974  er.table_data.it
-0001fb10: 656d 2831 2c20 6277 5f63 6f6c 756d 6e29  em(1, bw_column)
-0001fb20: 0a20 2020 2020 2020 2062 775f 6f6c 6420  .        bw_old 
-0001fb30: 3d20 6277 5f69 7465 6d2e 7465 7874 2829  = bw_item.text()
-0001fb40: 0a0a 2020 2020 2020 2020 2320 4368 6563  ..        # Chec
-0001fb50: 6b20 7468 6520 7661 6c75 6520 6973 2072  k the value is r
-0001fb60: 6561 6c6c 7920 3530 3030 300a 2020 2020  eally 50000.    
-0001fb70: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0001fb80: 7175 616c 2866 6c6f 6174 2862 775f 6f6c  qual(float(bw_ol
-0001fb90: 645b 313a 2d31 5d29 2c20 3530 3030 3029  d[1:-1]), 50000)
-0001fba0: 0a0a 2020 2020 2020 2020 2320 4368 616e  ..        # Chan
-0001fbb0: 6765 2074 6865 2076 616c 7565 0a20 2020  ge the value.   
-0001fbc0: 2020 2020 2062 775f 6974 656d 2e73 6574       bw_item.set
-0001fbd0: 5365 6c65 6374 6564 2854 7275 6529 0a20  Selected(True). 
-0001fbe0: 2020 2020 2020 2074 6872 6561 6469 6e67         threading
-0001fbf0: 2e54 696d 6572 2832 2c20 7061 7274 6961  .Timer(2, partia
-0001fc00: 6c28 7365 6c66 2e65 6469 745f 6461 7461  l(self.edit_data
-0001fc10: 6272 6f77 7365 725f 6c69 7374 2c20 2230  browser_list, "0
-0001fc20: 2e30 2229 292e 7374 6172 7428 290a 2020  .0")).start().  
-0001fc30: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-0001fc40: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
-0001fc50: 7365 722e 7461 626c 655f 6461 7461 2e65  ser.table_data.e
-0001fc60: 6469 745f 7461 626c 655f 6461 7461 5f76  dit_table_data_v
-0001fc70: 616c 7565 7328 290a 0a20 2020 2020 2020  alues()..       
-0001fc80: 2023 2043 6865 636b 2075 6e64 6f73 2061   # Check undos a
-0001fc90: 6e64 2072 6564 6f73 2068 6176 6520 7468  nd redos have th
-0001fca0: 6520 7269 6768 7420 7661 6c75 6573 2e0a  e right values..
-0001fcb0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0001fcc0: 6572 7445 7175 616c 280a 2020 2020 2020  ertEqual(.      
-0001fcd0: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-0001fce0: 7769 6e64 6f77 2e70 726f 6a65 6374 2e75  window.project.u
-0001fcf0: 6e64 6f73 2c0a 2020 2020 2020 2020 2020  ndos,.          
-0001fd00: 2020 5b0a 2020 2020 2020 2020 2020 2020    [.            
-0001fd10: 2020 2020 5b0a 2020 2020 2020 2020 2020      [.          
-0001fd20: 2020 2020 2020 2020 2020 226d 6f64 6966            "modif
-0001fd30: 6965 645f 7661 6c75 6573 222c 0a20 2020  ied_values",.   
-0001fd40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fd50: 205b 0a20 2020 2020 2020 2020 2020 2020   [.             
-0001fd60: 2020 2020 2020 2020 2020 205b 0a20 2020             [.   
-0001fd70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fd80: 2020 2020 2020 2020 2022 6461 7461 2f72           "data/r
-0001fd90: 6177 5f64 6174 612f 4775 6572 6265 742d  aw_data/Guerbet-
-0001fda0: 4336 2d32 3031 342d 5261 742d 4b35 322d  C6-2014-Rat-K52-
-0001fdb0: 5475 6265 3237 220a 2020 2020 2020 2020  Tube27".        
-0001fdc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fdd0: 2020 2020 222d 3230 3134 2d30 322d 3134      "-2014-02-14
-0001fde0: 3130 3233 3137 2d30 312d 4731 5f47 7565  102317-01-G1_Gue
-0001fdf0: 7262 6574 5f41 6e61 742d 5241 5245 220a  rbet_Anat-RARE".
-0001fe00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fe10: 2020 2020 2020 2020 2020 2020 2270 766d              "pvm
-0001fe20: 2d30 3030 3232 305f 3030 302e 6e69 6922  -000220_000.nii"
-0001fe30: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0001fe40: 2020 2020 2020 2020 2020 2020 2020 2242                "B
-0001fe50: 616e 6457 6964 7468 222c 0a20 2020 2020  andWidth",.     
-0001fe60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fe70: 2020 2020 2020 205b 3530 3030 302e 305d         [50000.0]
-0001fe80: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0001fe90: 2020 2020 2020 2020 2020 2020 2020 5b30                [0
-0001fea0: 2e30 5d2c 0a20 2020 2020 2020 2020 2020  .0],.           
-0001feb0: 2020 2020 2020 2020 2020 2020 205d 0a20               ]. 
-0001fec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fed0: 2020 205d 2c0a 2020 2020 2020 2020 2020     ],.          
-0001fee0: 2020 2020 2020 5d0a 2020 2020 2020 2020        ].        
-0001fef0: 2020 2020 5d2c 0a20 2020 2020 2020 2029      ],.        )
-0001ff00: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0001ff10: 7365 7274 4571 7561 6c28 7365 6c66 2e6d  sertEqual(self.m
-0001ff20: 6169 6e5f 7769 6e64 6f77 2e70 726f 6a65  ain_window.proje
-0001ff30: 6374 2e72 6564 6f73 2c20 5b5d 290a 0a20  ct.redos, []).. 
-0001ff40: 2020 2020 2020 2023 2043 6865 636b 2074         # Check t
-0001ff50: 6865 2076 616c 7565 2068 6173 2072 6561  he value has rea
-0001ff60: 6c6c 7920 6265 656e 2063 6861 6e67 6564  lly been changed
-0001ff70: 2074 6f20 302e 302e 0a20 2020 2020 2020   to 0.0..       
-0001ff80: 2062 775f 6974 656d 203d 2073 656c 662e   bw_item = self.
-0001ff90: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
-0001ffa0: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
-0001ffb0: 6174 612e 6974 656d 2831 2c20 6277 5f63  ata.item(1, bw_c
-0001ffc0: 6f6c 756d 6e29 0a20 2020 2020 2020 2062  olumn).        b
-0001ffd0: 775f 7365 7420 3d20 6277 5f69 7465 6d2e  w_set = bw_item.
-0001ffe0: 7465 7874 2829 0a20 2020 2020 2020 2073  text().        s
-0001fff0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00020000: 666c 6f61 7428 6277 5f73 6574 5b31 3a2d  float(bw_set[1:-
-00020010: 315d 292c 2030 290a 0a20 2020 2020 2020  1]), 0)..       
-00020020: 2023 2055 6e64 6f0a 2020 2020 2020 2020   # Undo.        
-00020030: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00020040: 2e61 6374 696f 6e5f 756e 646f 2e74 7269  .action_undo.tri
-00020050: 6767 6572 2829 0a0a 2020 2020 2020 2020  gger()..        
-00020060: 2320 4368 6563 6b20 7468 6520 7661 6c75  # Check the valu
-00020070: 6520 6861 7320 7265 616c 6c79 2062 6565  e has really bee
-00020080: 6e20 7265 7365 7420 746f 2035 3030 3030  n reset to 50000
-00020090: 0a20 2020 2020 2020 2062 775f 6974 656d  .        bw_item
-000200a0: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
-000200b0: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
-000200c0: 2e74 6162 6c65 5f64 6174 612e 6974 656d  .table_data.item
-000200d0: 2831 2c20 6277 5f63 6f6c 756d 6e29 0a20  (1, bw_column). 
-000200e0: 2020 2020 2020 2062 775f 756e 646f 203d         bw_undo =
-000200f0: 2062 775f 6974 656d 2e74 6578 7428 290a   bw_item.text().
-00020100: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00020110: 6572 7445 7175 616c 2866 6c6f 6174 2862  ertEqual(float(b
-00020120: 775f 756e 646f 5b31 3a2d 315d 292c 2035  w_undo[1:-1]), 5
-00020130: 3030 3030 290a 0a20 2020 2020 2020 2023  0000)..        #
-00020140: 2043 6865 636b 2075 6e64 6f73 202f 2072   Check undos / r
-00020150: 6564 6f73 2068 6176 6520 7468 6520 7269  edos have the ri
-00020160: 6768 7420 7661 6c75 6573 0a20 2020 2020  ght values.     
-00020170: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00020180: 7561 6c28 0a20 2020 2020 2020 2020 2020  ual(.           
-00020190: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-000201a0: 772e 7072 6f6a 6563 742e 7265 646f 732c  w.project.redos,
-000201b0: 0a20 2020 2020 2020 2020 2020 205b 0a20  .            [. 
-000201c0: 2020 2020 2020 2020 2020 2020 2020 205b                 [
-000201d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000201e0: 2020 2020 2022 6d6f 6469 6669 6564 5f76       "modified_v
-000201f0: 616c 7565 7322 2c0a 2020 2020 2020 2020  alues",.        
-00020200: 2020 2020 2020 2020 2020 2020 5b0a 2020              [.  
-00020210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020220: 2020 2020 2020 5b0a 2020 2020 2020 2020        [.        
-00020230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020240: 2020 2020 2264 6174 612f 7261 775f 6461      "data/raw_da
-00020250: 7461 2f47 7565 7262 6574 2d43 362d 3230  ta/Guerbet-C6-20
-00020260: 3134 2d52 6174 2d4b 3532 2d54 7562 6532  14-Rat-K52-Tube2
-00020270: 3722 0a20 2020 2020 2020 2020 2020 2020  7".             
-00020280: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00020290: 2d32 3031 342d 3032 2d31 3431 3032 3331  -2014-02-1410231
-000202a0: 372d 3031 2d47 315f 4775 6572 6265 745f  7-01-G1_Guerbet_
-000202b0: 416e 6174 2d52 4152 4522 0a20 2020 2020  Anat-RARE".     
-000202c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000202d0: 2020 2020 2020 2022 7076 6d2d 3030 3032         "pvm-0002
-000202e0: 3230 5f30 3030 2e6e 6969 222c 0a20 2020  20_000.nii",.   
-000202f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020300: 2020 2020 2020 2020 2022 4261 6e64 5769           "BandWi
-00020310: 6474 6822 2c0a 2020 2020 2020 2020 2020  dth",.          
-00020320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020330: 2020 5b35 3030 3030 2e30 5d2c 0a20 2020    [50000.0],.   
-00020340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020350: 2020 2020 2020 2020 205b 302e 305d 2c0a           [0.0],.
-00020360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020370: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
-00020380: 2020 2020 2020 2020 2020 2020 2020 5d2c                ],
-00020390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000203a0: 205d 0a20 2020 2020 2020 2020 2020 205d   ].            ]
-000203b0: 2c0a 2020 2020 2020 2020 290a 2020 2020  ,.        ).    
-000203c0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-000203d0: 7175 616c 2873 656c 662e 6d61 696e 5f77  qual(self.main_w
-000203e0: 696e 646f 772e 7072 6f6a 6563 742e 756e  indow.project.un
-000203f0: 646f 732c 205b 5d29 0a0a 2020 2020 2020  dos, [])..      
-00020400: 2020 2320 5265 646f 0a20 2020 2020 2020    # Redo.       
-00020410: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-00020420: 772e 6163 7469 6f6e 5f72 6564 6f2e 7472  w.action_redo.tr
-00020430: 6967 6765 7228 290a 0a20 2020 2020 2020  igger()..       
-00020440: 2023 2043 6865 636b 2074 6865 2076 616c   # Check the val
-00020450: 7565 2068 6173 2072 6561 6c6c 7920 6265  ue has really be
-00020460: 656e 2072 6573 6574 2074 6f20 302e 300a  en reset to 0.0.
-00020470: 2020 2020 2020 2020 6277 5f69 7465 6d20          bw_item 
-00020480: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
-00020490: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
-000204a0: 7461 626c 655f 6461 7461 2e69 7465 6d28  table_data.item(
-000204b0: 312c 2062 775f 636f 6c75 6d6e 290a 2020  1, bw_column).  
-000204c0: 2020 2020 2020 6277 5f72 6564 6f20 3d20        bw_redo = 
-000204d0: 6277 5f69 7465 6d2e 7465 7874 2829 0a20  bw_item.text(). 
-000204e0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-000204f0: 7274 4571 7561 6c28 666c 6f61 7428 6277  rtEqual(float(bw
-00020500: 5f72 6564 6f5b 313a 2d31 5d29 2c20 3029  _redo[1:-1]), 0)
-00020510: 0a0a 2020 2020 2020 2020 2320 7765 2074  ..        # we t
-00020520: 6573 7420 756e 646f 7320 2f20 7265 646f  est undos / redo
-00020530: 7320 6861 7665 2074 6865 2072 6967 6874  s have the right
-00020540: 2076 616c 7565 730a 2020 2020 2020 2020   values.        
-00020550: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00020560: 280a 2020 2020 2020 2020 2020 2020 7365  (.            se
-00020570: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
-00020580: 726f 6a65 6374 2e75 6e64 6f73 2c0a 2020  roject.undos,.  
-00020590: 2020 2020 2020 2020 2020 5b0a 2020 2020            [.    
-000205a0: 2020 2020 2020 2020 2020 2020 5b0a 2020              [.  
-000205b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000205c0: 2020 226d 6f64 6966 6965 645f 7661 6c75    "modified_valu
-000205d0: 6573 222c 0a20 2020 2020 2020 2020 2020  es",.           
-000205e0: 2020 2020 2020 2020 205b 0a20 2020 2020           [.     
-000205f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020600: 2020 205b 0a20 2020 2020 2020 2020 2020     [.           
-00020610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020620: 2022 6461 7461 2f72 6177 5f64 6174 612f   "data/raw_data/
-00020630: 4775 6572 6265 742d 4336 2d32 3031 342d  Guerbet-C6-2014-
-00020640: 5261 742d 4b35 322d 5475 6265 3237 220a  Rat-K52-Tube27".
-00020650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020660: 2020 2020 2020 2020 2020 2020 222d 3230              "-20
-00020670: 3134 2d30 322d 3134 3130 3233 3137 2d30  14-02-14102317-0
-00020680: 312d 4731 5f47 7565 7262 6574 5f41 6e61  1-G1_Guerbet_Ana
-00020690: 742d 5241 5245 220a 2020 2020 2020 2020  t-RARE".        
-000206a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000206b0: 2020 2020 2270 766d 2d30 3030 3232 305f      "pvm-000220_
-000206c0: 3030 302e 6e69 6922 2c0a 2020 2020 2020  000.nii",.      
-000206d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000206e0: 2020 2020 2020 2242 616e 6457 6964 7468        "BandWidth
-000206f0: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
-00020700: 2020 2020 2020 2020 2020 2020 2020 205b                 [
-00020710: 3530 3030 302e 305d 2c0a 2020 2020 2020  50000.0],.      
-00020720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020730: 2020 2020 2020 5b30 2e30 5d2c 0a20 2020        [0.0],.   
-00020740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020750: 2020 2020 205d 0a20 2020 2020 2020 2020       ].         
-00020760: 2020 2020 2020 2020 2020 205d 2c0a 2020             ],.  
-00020770: 2020 2020 2020 2020 2020 2020 2020 5d0a                ].
-00020780: 2020 2020 2020 2020 2020 2020 5d2c 0a20              ],. 
-00020790: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-000207a0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-000207b0: 6c28 7365 6c66 2e6d 6169 6e5f 7769 6e64  l(self.main_wind
-000207c0: 6f77 2e70 726f 6a65 6374 2e72 6564 6f73  ow.project.redos
-000207d0: 2c20 5b5d 290a 0a20 2020 2020 2020 2023  , [])..        #
-000207e0: 2032 2e20 5265 6d6f 7665 2061 2073 6361   2. Remove a sca
-000207f0: 6e20 2864 6f63 756d 656e 7429 0a20 2020  n (document).   
-00020800: 2020 2020 2023 2043 6865 636b 2074 6865       # Check the
-00020810: 7265 2061 7265 2039 2064 6f63 756d 656e  re are 9 documen
-00020820: 7473 2069 6e20 6462 2028 6375 7272 656e  ts in db (curren
-00020830: 7420 616e 6420 696e 6974 6961 6c29 0a20  t and initial). 
-00020840: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00020850: 7274 4571 7561 6c28 0a20 2020 2020 2020  rtEqual(.       
-00020860: 2020 2020 2039 2c0a 2020 2020 2020 2020       9,.        
-00020870: 2020 2020 6c65 6e28 0a20 2020 2020 2020      len(.       
-00020880: 2020 2020 2020 2020 2073 656c 662e 6d61           self.ma
-00020890: 696e 5f77 696e 646f 772e 7072 6f6a 6563  in_window.projec
-000208a0: 742e 7365 7373 696f 6e2e 6765 745f 646f  t.session.get_do
-000208b0: 6375 6d65 6e74 735f 6e61 6d65 7328 0a20  cuments_names(. 
-000208c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000208d0: 2020 2043 4f4c 4c45 4354 494f 4e5f 4355     COLLECTION_CU
-000208e0: 5252 454e 540a 2020 2020 2020 2020 2020  RRENT.          
-000208f0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00020900: 2020 2020 292c 0a20 2020 2020 2020 2029      ),.        )
-00020910: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00020920: 7365 7274 4571 7561 6c28 0a20 2020 2020  sertEqual(.     
-00020930: 2020 2020 2020 2039 2c0a 2020 2020 2020         9,.      
-00020940: 2020 2020 2020 6c65 6e28 0a20 2020 2020        len(.     
-00020950: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00020960: 6d61 696e 5f77 696e 646f 772e 7072 6f6a  main_window.proj
-00020970: 6563 742e 7365 7373 696f 6e2e 6765 745f  ect.session.get_
-00020980: 646f 6375 6d65 6e74 735f 6e61 6d65 7328  documents_names(
-00020990: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000209a0: 2020 2020 2043 4f4c 4c45 4354 494f 4e5f       COLLECTION_
-000209b0: 494e 4954 4941 4c0a 2020 2020 2020 2020  INITIAL.        
-000209c0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-000209d0: 2020 2020 2020 292c 0a20 2020 2020 2020        ),.       
-000209e0: 2029 0a0a 2020 2020 2020 2020 2320 5265   )..        # Re
-000209f0: 6d6f 7665 2074 6865 2065 6967 6874 6820  move the eighth 
-00020a00: 646f 6375 6d65 6e74 0a20 2020 2020 2020  document.       
-00020a10: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-00020a20: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
-00020a30: 6162 6c65 5f64 6174 612e 7365 6c65 6374  able_data.select
-00020a40: 526f 7728 3829 0a20 2020 2020 2020 2073  Row(8).        s
-00020a50: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00020a60: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
-00020a70: 6c65 5f64 6174 612e 7265 6d6f 7665 5f73  le_data.remove_s
-00020a80: 6361 6e28 290a 0a20 2020 2020 2020 2023  can()..        #
-00020a90: 2043 6865 636b 2069 6620 7468 6572 6520   Check if there 
-00020aa0: 6172 6520 6e6f 7720 3820 646f 6375 6d65  are now 8 docume
-00020ab0: 6e74 7320 696e 2064 6220 2863 7572 7265  nts in db (curre
-00020ac0: 6e74 2061 6e64 2069 6e69 7469 616c 290a  nt and initial).
-00020ad0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00020ae0: 6572 7445 7175 616c 280a 2020 2020 2020  ertEqual(.      
-00020af0: 2020 2020 2020 382c 0a20 2020 2020 2020        8,.       
-00020b00: 2020 2020 206c 656e 280a 2020 2020 2020       len(.      
-00020b10: 2020 2020 2020 2020 2020 7365 6c66 2e6d            self.m
-00020b20: 6169 6e5f 7769 6e64 6f77 2e70 726f 6a65  ain_window.proje
-00020b30: 6374 2e73 6573 7369 6f6e 2e67 6574 5f64  ct.session.get_d
-00020b40: 6f63 756d 656e 7473 5f6e 616d 6573 280a  ocuments_names(.
-00020b50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00020b60: 2020 2020 434f 4c4c 4543 5449 4f4e 5f43      COLLECTION_C
-00020b70: 5552 5245 4e54 0a20 2020 2020 2020 2020  URRENT.         
-00020b80: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00020b90: 2020 2020 2029 2c0a 2020 2020 2020 2020       ),.        
-00020ba0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-00020bb0: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
-00020bc0: 2020 2020 2020 2020 382c 0a20 2020 2020          8,.     
-00020bd0: 2020 2020 2020 206c 656e 280a 2020 2020         len(.    
-00020be0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00020bf0: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 726f  .main_window.pro
-00020c00: 6a65 6374 2e73 6573 7369 6f6e 2e67 6574  ject.session.get
-00020c10: 5f64 6f63 756d 656e 7473 5f6e 616d 6573  _documents_names
-00020c20: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00020c30: 2020 2020 2020 434f 4c4c 4543 5449 4f4e        COLLECTION
-00020c40: 5f49 4e49 5449 414c 0a20 2020 2020 2020  _INITIAL.       
-00020c50: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-00020c60: 2020 2020 2020 2029 2c0a 2020 2020 2020         ),.      
-00020c70: 2020 290a 0a20 2020 2020 2020 2023 2055    )..        # U
-00020c80: 6e64 6f0a 2020 2020 2020 2020 7365 6c66  ndo.        self
-00020c90: 2e6d 6169 6e5f 7769 6e64 6f77 2e61 6374  .main_window.act
-00020ca0: 696f 6e5f 756e 646f 2e74 7269 6767 6572  ion_undo.trigger
-00020cb0: 2829 0a0a 2020 2020 2020 2020 2320 4368  ()..        # Ch
-00020cc0: 6563 6b20 7468 6572 6520 6172 6520 7374  eck there are st
-00020cd0: 696c 6c20 6f6e 6c79 2038 2064 6f63 756d  ill only 8 docum
-00020ce0: 656e 7473 2069 6e20 7468 6520 6461 7461  ents in the data
-00020cf0: 6261 7365 0a20 2020 2020 2020 2023 2028  base.        # (
-00020d00: 6375 7272 656e 7420 616e 6420 696e 6974  current and init
-00020d10: 6961 6c29 2e20 496e 2066 6163 7420 7468  ial). In fact th
-00020d20: 6520 646f 6375 6d65 6e74 2068 6173 2062  e document has b
-00020d30: 6565 6e20 7065 726d 616e 656e 746c 790a  een permanently.
-00020d40: 2020 2020 2020 2020 2320 6465 6c65 7465          # delete
-00020d50: 6420 616e 6420 7765 2063 616e 6e6f 7420  d and we cannot 
-00020d60: 7265 636f 7665 7220 6974 2069 6e20 7468  recover it in th
-00020d70: 6973 2063 6173 650a 2020 2020 2020 2020  is case.        
-00020d80: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00020d90: 280a 2020 2020 2020 2020 2020 2020 382c  (.            8,
-00020da0: 0a20 2020 2020 2020 2020 2020 206c 656e  .            len
-00020db0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00020dc0: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
-00020dd0: 6f77 2e70 726f 6a65 6374 2e73 6573 7369  ow.project.sessi
-00020de0: 6f6e 2e67 6574 5f64 6f63 756d 656e 7473  on.get_documents
-00020df0: 5f6e 616d 6573 280a 2020 2020 2020 2020  _names(.        
-00020e00: 2020 2020 2020 2020 2020 2020 434f 4c4c              COLL
-00020e10: 4543 5449 4f4e 5f43 5552 5245 4e54 0a20  ECTION_CURRENT. 
-00020e20: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00020e30: 0a20 2020 2020 2020 2020 2020 2029 2c0a  .            ),.
-00020e40: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00020e50: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00020e60: 616c 280a 2020 2020 2020 2020 2020 2020  al(.            
-00020e70: 382c 0a20 2020 2020 2020 2020 2020 206c  8,.            l
-00020e80: 656e 280a 2020 2020 2020 2020 2020 2020  en(.            
-00020e90: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
-00020ea0: 6e64 6f77 2e70 726f 6a65 6374 2e73 6573  ndow.project.ses
-00020eb0: 7369 6f6e 2e67 6574 5f64 6f63 756d 656e  sion.get_documen
-00020ec0: 7473 5f6e 616d 6573 280a 2020 2020 2020  ts_names(.      
-00020ed0: 2020 2020 2020 2020 2020 2020 2020 434f                CO
-00020ee0: 4c4c 4543 5449 4f4e 5f49 4e49 5449 414c  LLECTION_INITIAL
-00020ef0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00020f00: 2029 0a20 2020 2020 2020 2020 2020 2029   ).            )
-00020f10: 2c0a 2020 2020 2020 2020 290a 0a20 2020  ,.        )..   
-00020f20: 2020 2020 2023 2033 2e20 4164 6420 6120       # 3. Add a 
-00020f30: 7461 670a 2020 2020 2020 2020 2320 4368  tag.        # Ch
-00020f40: 6563 6b20 7765 2064 6f6e 2774 2068 6176  eck we don't hav
-00020f50: 6520 2754 6573 7427 2074 6167 2069 6e20  e 'Test' tag in 
-00020f60: 7468 6520 6462 0a20 2020 2020 2020 2073  the db.        s
-00020f70: 656c 662e 6173 7365 7274 4661 6c73 6528  elf.assertFalse(
-00020f80: 0a20 2020 2020 2020 2020 2020 2022 5465  .            "Te
-00020f90: 7374 220a 2020 2020 2020 2020 2020 2020  st".            
-00020fa0: 696e 2073 656c 662e 6d61 696e 5f77 696e  in self.main_win
-00020fb0: 646f 772e 7072 6f6a 6563 742e 7365 7373  dow.project.sess
-00020fc0: 696f 6e2e 6765 745f 6669 656c 6473 5f6e  ion.get_fields_n
-00020fd0: 616d 6573 280a 2020 2020 2020 2020 2020  ames(.          
-00020fe0: 2020 2020 2020 434f 4c4c 4543 5449 4f4e        COLLECTION
-00020ff0: 5f43 5552 5245 4e54 0a20 2020 2020 2020  _CURRENT.       
-00021000: 2020 2020 2029 0a20 2020 2020 2020 2029       ).        )
-00021010: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00021020: 7365 7274 4661 6c73 6528 0a20 2020 2020  sertFalse(.     
-00021030: 2020 2020 2020 2022 5465 7374 220a 2020         "Test".  
-00021040: 2020 2020 2020 2020 2020 696e 2073 656c            in sel
-00021050: 662e 6d61 696e 5f77 696e 646f 772e 7072  f.main_window.pr
-00021060: 6f6a 6563 742e 7365 7373 696f 6e2e 6765  oject.session.ge
-00021070: 745f 6669 656c 6473 5f6e 616d 6573 280a  t_fields_names(.
-00021080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021090: 434f 4c4c 4543 5449 4f4e 5f49 4e49 5449  COLLECTION_INITI
-000210a0: 414c 0a20 2020 2020 2020 2020 2020 2029  AL.            )
-000210b0: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-000210c0: 2020 2020 2320 4164 6420 7468 6520 5465      # Add the Te
-000210d0: 7374 2074 6167 0a20 2020 2020 2020 2073  st tag.        s
-000210e0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-000210f0: 6461 7461 5f62 726f 7773 6572 2e61 6464  data_browser.add
-00021100: 5f74 6167 5f61 6374 696f 6e2e 7472 6967  _tag_action.trig
-00021110: 6765 7228 290a 2020 2020 2020 2020 6164  ger().        ad
-00021120: 645f 7461 6720 3d20 7365 6c66 2e6d 6169  d_tag = self.mai
-00021130: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
-00021140: 6f77 7365 722e 706f 705f 7570 5f61 6464  owser.pop_up_add
-00021150: 5f74 6167 0a20 2020 2020 2020 2061 6464  _tag.        add
-00021160: 5f74 6167 2e74 6578 745f 6564 6974 5f74  _tag.text_edit_t
-00021170: 6167 5f6e 616d 652e 7365 7454 6578 7428  ag_name.setText(
-00021180: 2254 6573 7422 290a 2020 2020 2020 2020  "Test").        
-00021190: 5154 6573 742e 6d6f 7573 6543 6c69 636b  QTest.mouseClick
-000211a0: 2861 6464 5f74 6167 2e70 7573 685f 6275  (add_tag.push_bu
-000211b0: 7474 6f6e 5f6f 6b2c 2051 742e 4c65 6674  tton_ok, Qt.Left
-000211c0: 4275 7474 6f6e 290a 0a20 2020 2020 2020  Button)..       
-000211d0: 2023 2043 6865 636b 2074 6865 2027 5465   # Check the 'Te
-000211e0: 7374 2720 7461 6720 6973 2069 6e20 7468  st' tag is in th
-000211f0: 6520 6462 0a20 2020 2020 2020 2073 656c  e db.        sel
-00021200: 662e 6173 7365 7274 5472 7565 280a 2020  f.assertTrue(.  
-00021210: 2020 2020 2020 2020 2020 2254 6573 7422            "Test"
-00021220: 0a20 2020 2020 2020 2020 2020 2069 6e20  .            in 
-00021230: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00021240: 2e70 726f 6a65 6374 2e73 6573 7369 6f6e  .project.session
-00021250: 2e67 6574 5f66 6965 6c64 735f 6e61 6d65  .get_fields_name
-00021260: 7328 0a20 2020 2020 2020 2020 2020 2020  s(.             
-00021270: 2020 2043 4f4c 4c45 4354 494f 4e5f 4355     COLLECTION_CU
-00021280: 5252 454e 540a 2020 2020 2020 2020 2020  RRENT.          
-00021290: 2020 290a 2020 2020 2020 2020 290a 2020    ).        ).  
-000212a0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-000212b0: 7454 7275 6528 0a20 2020 2020 2020 2020  tTrue(.         
-000212c0: 2020 2022 5465 7374 220a 2020 2020 2020     "Test".      
-000212d0: 2020 2020 2020 696e 2073 656c 662e 6d61        in self.ma
-000212e0: 696e 5f77 696e 646f 772e 7072 6f6a 6563  in_window.projec
-000212f0: 742e 7365 7373 696f 6e2e 6765 745f 6669  t.session.get_fi
-00021300: 656c 6473 5f6e 616d 6573 280a 2020 2020  elds_names(.    
-00021310: 2020 2020 2020 2020 2020 2020 434f 4c4c              COLL
-00021320: 4543 5449 4f4e 5f49 4e49 5449 414c 0a20  ECTION_INITIAL. 
-00021330: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-00021340: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-00021350: 2320 556e 646f 0a20 2020 2020 2020 2073  # Undo.        s
-00021360: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00021370: 6163 7469 6f6e 5f75 6e64 6f2e 7472 6967  action_undo.trig
-00021380: 6765 7228 290a 0a20 2020 2020 2020 2023  ger()..        #
-00021390: 2043 6865 636b 2027 5465 7374 2720 7461   Check 'Test' ta
-000213a0: 6720 6973 206e 6f74 2069 6e20 7468 6520  g is not in the 
-000213b0: 6462 0a20 2020 2020 2020 2073 656c 662e  db.        self.
-000213c0: 6173 7365 7274 4661 6c73 6528 0a20 2020  assertFalse(.   
-000213d0: 2020 2020 2020 2020 2022 5465 7374 220a           "Test".
-000213e0: 2020 2020 2020 2020 2020 2020 696e 2073              in s
-000213f0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00021400: 7072 6f6a 6563 742e 7365 7373 696f 6e2e  project.session.
-00021410: 6765 745f 6669 656c 6473 5f6e 616d 6573  get_fields_names
-00021420: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00021430: 2020 434f 4c4c 4543 5449 4f4e 5f43 5552    COLLECTION_CUR
-00021440: 5245 4e54 0a20 2020 2020 2020 2020 2020  RENT.           
-00021450: 2029 0a20 2020 2020 2020 2029 0a20 2020   ).        ).   
-00021460: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00021470: 4661 6c73 6528 0a20 2020 2020 2020 2020  False(.         
-00021480: 2020 2022 5465 7374 220a 2020 2020 2020     "Test".      
-00021490: 2020 2020 2020 696e 2073 656c 662e 6d61        in self.ma
-000214a0: 696e 5f77 696e 646f 772e 7072 6f6a 6563  in_window.projec
-000214b0: 742e 7365 7373 696f 6e2e 6765 745f 6669  t.session.get_fi
-000214c0: 656c 6473 5f6e 616d 6573 280a 2020 2020  elds_names(.    
-000214d0: 2020 2020 2020 2020 2020 2020 434f 4c4c              COLL
-000214e0: 4543 5449 4f4e 5f49 4e49 5449 414c 0a20  ECTION_INITIAL. 
-000214f0: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-00021500: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-00021510: 2320 5265 646f 0a20 2020 2020 2020 2073  # Redo.        s
-00021520: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00021530: 6163 7469 6f6e 5f72 6564 6f2e 7472 6967  action_redo.trig
-00021540: 6765 7228 290a 0a20 2020 2020 2020 2023  ger()..        #
-00021550: 2043 6865 636b 2074 6865 2027 5465 7374   Check the 'Test
-00021560: 2720 7461 6720 6973 2069 6e20 7468 6520  ' tag is in the 
-00021570: 6462 0a20 2020 2020 2020 2073 656c 662e  db.        self.
-00021580: 6173 7365 7274 5472 7565 280a 2020 2020  assertTrue(.    
-00021590: 2020 2020 2020 2020 2254 6573 7422 0a20          "Test". 
-000215a0: 2020 2020 2020 2020 2020 2069 6e20 7365             in se
-000215b0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
-000215c0: 726f 6a65 6374 2e73 6573 7369 6f6e 2e67  roject.session.g
-000215d0: 6574 5f66 6965 6c64 735f 6e61 6d65 7328  et_fields_names(
-000215e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000215f0: 2043 4f4c 4c45 4354 494f 4e5f 4355 5252   COLLECTION_CURR
-00021600: 454e 540a 2020 2020 2020 2020 2020 2020  ENT.            
-00021610: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
-00021620: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
-00021630: 7275 6528 0a20 2020 2020 2020 2020 2020  rue(.           
-00021640: 2022 5465 7374 220a 2020 2020 2020 2020   "Test".        
-00021650: 2020 2020 696e 2073 656c 662e 6d61 696e      in self.main
-00021660: 5f77 696e 646f 772e 7072 6f6a 6563 742e  _window.project.
-00021670: 7365 7373 696f 6e2e 6765 745f 6669 656c  session.get_fiel
-00021680: 6473 5f6e 616d 6573 280a 2020 2020 2020  ds_names(.      
-00021690: 2020 2020 2020 2020 2020 434f 4c4c 4543            COLLEC
-000216a0: 5449 4f4e 5f49 4e49 5449 414c 0a20 2020  TION_INITIAL.   
-000216b0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-000216c0: 2020 2029 0a0a 2020 2020 2020 2020 2320     )..        # 
-000216d0: 342e 2052 656d 6f76 6520 7461 670a 2020  4. Remove tag.  
-000216e0: 2020 2020 2020 2320 5265 6d6f 7665 2074        # Remove t
-000216f0: 6865 2027 5465 7374 2720 7461 670a 2020  he 'Test' tag.  
-00021700: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-00021710: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
-00021720: 7365 722e 7265 6d6f 7665 5f74 6167 5f61  ser.remove_tag_a
-00021730: 6374 696f 6e2e 7472 6967 6765 7228 290a  ction.trigger().
-00021740: 2020 2020 2020 2020 7265 6d6f 7665 5f74          remove_t
-00021750: 6167 203d 2073 656c 662e 6d61 696e 5f77  ag = self.main_w
-00021760: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
-00021770: 6572 2e70 6f70 5f75 705f 7265 6d6f 7665  er.pop_up_remove
-00021780: 5f74 6167 0a20 2020 2020 2020 2072 656d  _tag.        rem
-00021790: 6f76 655f 7461 672e 6c69 7374 5f77 6964  ove_tag.list_wid
-000217a0: 6765 745f 7461 6773 2e73 6574 4375 7272  get_tags.setCurr
-000217b0: 656e 7452 6f77 2830 2920 2023 2027 5465  entRow(0)  # 'Te
-000217c0: 7374 2720 7461 6720 7365 6c65 6374 6564  st' tag selected
-000217d0: 0a20 2020 2020 2020 2051 5465 7374 2e6d  .        QTest.m
-000217e0: 6f75 7365 436c 6963 6b28 7265 6d6f 7665  ouseClick(remove
-000217f0: 5f74 6167 2e70 7573 685f 6275 7474 6f6e  _tag.push_button
-00021800: 5f6f 6b2c 2051 742e 4c65 6674 4275 7474  _ok, Qt.LeftButt
-00021810: 6f6e 290a 0a20 2020 2020 2020 2023 2043  on)..        # C
-00021820: 6865 636b 2027 5465 7374 2720 7461 6720  heck 'Test' tag 
-00021830: 6973 206e 6f74 2069 6e20 7468 6520 6462  is not in the db
-00021840: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00021850: 7365 7274 4661 6c73 6528 0a20 2020 2020  sertFalse(.     
-00021860: 2020 2020 2020 2022 5465 7374 220a 2020         "Test".  
-00021870: 2020 2020 2020 2020 2020 696e 2073 656c            in sel
-00021880: 662e 6d61 696e 5f77 696e 646f 772e 7072  f.main_window.pr
-00021890: 6f6a 6563 742e 7365 7373 696f 6e2e 6765  oject.session.ge
-000218a0: 745f 6669 656c 6473 5f6e 616d 6573 280a  t_fields_names(.
-000218b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000218c0: 434f 4c4c 4543 5449 4f4e 5f43 5552 5245  COLLECTION_CURRE
-000218d0: 4e54 0a20 2020 2020 2020 2020 2020 2029  NT.            )
-000218e0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-000218f0: 2020 2073 656c 662e 6173 7365 7274 4661     self.assertFa
-00021900: 6c73 6528 0a20 2020 2020 2020 2020 2020  lse(.           
-00021910: 2022 5465 7374 220a 2020 2020 2020 2020   "Test".        
-00021920: 2020 2020 696e 2073 656c 662e 6d61 696e      in self.main
-00021930: 5f77 696e 646f 772e 7072 6f6a 6563 742e  _window.project.
-00021940: 7365 7373 696f 6e2e 6765 745f 6669 656c  session.get_fiel
-00021950: 6473 5f6e 616d 6573 280a 2020 2020 2020  ds_names(.      
-00021960: 2020 2020 2020 2020 2020 434f 4c4c 4543            COLLEC
-00021970: 5449 4f4e 5f49 4e49 5449 414c 0a20 2020  TION_INITIAL.   
-00021980: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-00021990: 2020 2029 0a0a 2020 2020 2020 2020 2320     )..        # 
-000219a0: 556e 646f 0a20 2020 2020 2020 2073 656c  Undo.        sel
-000219b0: 662e 6d61 696e 5f77 696e 646f 772e 6163  f.main_window.ac
-000219c0: 7469 6f6e 5f75 6e64 6f2e 7472 6967 6765  tion_undo.trigge
-000219d0: 7228 290a 0a20 2020 2020 2020 2023 2043  r()..        # C
-000219e0: 6865 636b 2027 5465 7374 2720 7461 6720  heck 'Test' tag 
-000219f0: 6973 2069 6e20 7468 6520 6462 0a20 2020  is in the db.   
-00021a00: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00021a10: 5472 7565 280a 2020 2020 2020 2020 2020  True(.          
-00021a20: 2020 2254 6573 7422 0a20 2020 2020 2020    "Test".       
-00021a30: 2020 2020 2069 6e20 7365 6c66 2e6d 6169       in self.mai
-00021a40: 6e5f 7769 6e64 6f77 2e70 726f 6a65 6374  n_window.project
-00021a50: 2e73 6573 7369 6f6e 2e67 6574 5f66 6965  .session.get_fie
-00021a60: 6c64 735f 6e61 6d65 7328 0a20 2020 2020  lds_names(.     
-00021a70: 2020 2020 2020 2020 2020 2043 4f4c 4c45             COLLE
-00021a80: 4354 494f 4e5f 4355 5252 454e 540a 2020  CTION_CURRENT.  
-00021a90: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00021aa0: 2020 2020 290a 2020 2020 2020 2020 7365      ).        se
-00021ab0: 6c66 2e61 7373 6572 7454 7275 6528 0a20  lf.assertTrue(. 
-00021ac0: 2020 2020 2020 2020 2020 2022 5465 7374             "Test
-00021ad0: 220a 2020 2020 2020 2020 2020 2020 696e  ".            in
-00021ae0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-00021af0: 772e 7072 6f6a 6563 742e 7365 7373 696f  w.project.sessio
-00021b00: 6e2e 6765 745f 6669 656c 6473 5f6e 616d  n.get_fields_nam
-00021b10: 6573 280a 2020 2020 2020 2020 2020 2020  es(.            
-00021b20: 2020 2020 434f 4c4c 4543 5449 4f4e 5f49      COLLECTION_I
-00021b30: 4e49 5449 414c 0a20 2020 2020 2020 2020  NITIAL.         
-00021b40: 2020 2029 0a20 2020 2020 2020 2029 0a0a     ).        )..
-00021b50: 2020 2020 2020 2020 2320 5265 646f 0a20          # Redo. 
-00021b60: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
-00021b70: 5f77 696e 646f 772e 6163 7469 6f6e 5f72  _window.action_r
-00021b80: 6564 6f2e 7472 6967 6765 7228 290a 0a20  edo.trigger().. 
-00021b90: 2020 2020 2020 2023 2043 6865 636b 2027         # Check '
-00021ba0: 5465 7374 2720 7461 6720 6973 206e 6f74  Test' tag is not
-00021bb0: 2069 6e20 7468 6520 6462 0a20 2020 2020   in the db.     
-00021bc0: 2020 2073 656c 662e 6173 7365 7274 4661     self.assertFa
-00021bd0: 6c73 6528 0a20 2020 2020 2020 2020 2020  lse(.           
-00021be0: 2022 5465 7374 220a 2020 2020 2020 2020   "Test".        
-00021bf0: 2020 2020 696e 2073 656c 662e 6d61 696e      in self.main
-00021c00: 5f77 696e 646f 772e 7072 6f6a 6563 742e  _window.project.
-00021c10: 7365 7373 696f 6e2e 6765 745f 6669 656c  session.get_fiel
-00021c20: 6473 5f6e 616d 6573 280a 2020 2020 2020  ds_names(.      
-00021c30: 2020 2020 2020 2020 2020 434f 4c4c 4543            COLLEC
-00021c40: 5449 4f4e 5f43 5552 5245 4e54 0a20 2020  TION_CURRENT.   
-00021c50: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-00021c60: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
-00021c70: 662e 6173 7365 7274 4661 6c73 6528 0a20  f.assertFalse(. 
-00021c80: 2020 2020 2020 2020 2020 2022 5465 7374             "Test
-00021c90: 220a 2020 2020 2020 2020 2020 2020 696e  ".            in
-00021ca0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-00021cb0: 772e 7072 6f6a 6563 742e 7365 7373 696f  w.project.sessio
-00021cc0: 6e2e 6765 745f 6669 656c 6473 5f6e 616d  n.get_fields_nam
-00021cd0: 6573 280a 2020 2020 2020 2020 2020 2020  es(.            
-00021ce0: 2020 2020 434f 4c4c 4543 5449 4f4e 5f49      COLLECTION_I
-00021cf0: 4e49 5449 414c 0a20 2020 2020 2020 2020  NITIAL.         
-00021d00: 2020 2029 0a20 2020 2020 2020 2029 0a0a     ).        )..
-00021d10: 2020 2020 2020 2020 2320 342e 2063 6c6f          # 4. clo
-00021d20: 6e65 2074 6167 0a20 2020 2020 2020 2073  ne tag.        s
-00021d30: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00021d40: 6461 7461 5f62 726f 7773 6572 2e63 6c6f  data_browser.clo
-00021d50: 6e65 5f74 6167 5f61 6374 696f 6e2e 7472  ne_tag_action.tr
-00021d60: 6967 6765 7228 290a 2020 2020 2020 2020  igger().        
-00021d70: 636c 6f6e 655f 7461 6720 3d20 7365 6c66  clone_tag = self
-00021d80: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
-00021d90: 615f 6272 6f77 7365 722e 706f 705f 7570  a_browser.pop_up
-00021da0: 5f63 6c6f 6e65 5f74 6167 0a0a 2020 2020  _clone_tag..    
-00021db0: 2020 2020 666f 7220 666f 765f 636f 6c75      for fov_colu
-00021dc0: 6d6e 2069 6e20 7261 6e67 6528 636c 6f6e  mn in range(clon
-00021dd0: 655f 7461 672e 6c69 7374 5f77 6964 6765  e_tag.list_widge
-00021de0: 745f 7461 6773 2e63 6f75 6e74 2829 293a  t_tags.count()):
-00021df0: 0a0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-00021e00: 2063 6c6f 6e65 5f74 6167 2e6c 6973 745f   clone_tag.list_
-00021e10: 7769 6467 6574 5f74 6167 732e 6974 656d  widget_tags.item
-00021e20: 2866 6f76 5f63 6f6c 756d 6e29 2e74 6578  (fov_column).tex
-00021e30: 7428 2920 3d3d 2022 464f 5622 3a0a 2020  t() == "FOV":.  
-00021e40: 2020 2020 2020 2020 2020 2020 2020 6272                br
-00021e50: 6561 6b0a 0a20 2020 2020 2020 2023 2027  eak..        # '
-00021e60: 464f 5627 2074 6167 2073 656c 6563 7465  FOV' tag selecte
-00021e70: 640a 2020 2020 2020 2020 636c 6f6e 655f  d.        clone_
-00021e80: 7461 672e 6c69 7374 5f77 6964 6765 745f  tag.list_widget_
-00021e90: 7461 6773 2e73 6574 4375 7272 656e 7452  tags.setCurrentR
-00021ea0: 6f77 2866 6f76 5f63 6f6c 756d 6e29 0a20  ow(fov_column). 
-00021eb0: 2020 2020 2020 2063 6c6f 6e65 5f74 6167         clone_tag
-00021ec0: 2e6c 696e 655f 6564 6974 5f6e 6577 5f74  .line_edit_new_t
-00021ed0: 6167 5f6e 616d 652e 7365 7454 6578 7428  ag_name.setText(
-00021ee0: 2254 6573 7422 290a 2020 2020 2020 2020  "Test").        
-00021ef0: 5154 6573 742e 6d6f 7573 6543 6c69 636b  QTest.mouseClick
-00021f00: 2863 6c6f 6e65 5f74 6167 2e70 7573 685f  (clone_tag.push_
-00021f10: 6275 7474 6f6e 5f6f 6b2c 2051 742e 4c65  button_ok, Qt.Le
-00021f20: 6674 4275 7474 6f6e 290a 0a20 2020 2020  ftButton)..     
-00021f30: 2020 2023 2043 6865 636b 2027 5465 7374     # Check 'Test
-00021f40: 2720 7461 6720 6973 2069 6e20 7468 6520  ' tag is in the 
-00021f50: 6462 0a20 2020 2020 2020 2073 656c 662e  db.        self.
-00021f60: 6173 7365 7274 5472 7565 280a 2020 2020  assertTrue(.    
-00021f70: 2020 2020 2020 2020 2254 6573 7422 0a20          "Test". 
-00021f80: 2020 2020 2020 2020 2020 2069 6e20 7365             in se
-00021f90: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
-00021fa0: 726f 6a65 6374 2e73 6573 7369 6f6e 2e67  roject.session.g
-00021fb0: 6574 5f66 6965 6c64 735f 6e61 6d65 7328  et_fields_names(
-00021fc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00021fd0: 2043 4f4c 4c45 4354 494f 4e5f 4355 5252   COLLECTION_CURR
-00021fe0: 454e 540a 2020 2020 2020 2020 2020 2020  ENT.            
-00021ff0: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
-00022000: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
-00022010: 7275 6528 0a20 2020 2020 2020 2020 2020  rue(.           
-00022020: 2022 5465 7374 220a 2020 2020 2020 2020   "Test".        
-00022030: 2020 2020 696e 2073 656c 662e 6d61 696e      in self.main
-00022040: 5f77 696e 646f 772e 7072 6f6a 6563 742e  _window.project.
-00022050: 7365 7373 696f 6e2e 6765 745f 6669 656c  session.get_fiel
-00022060: 6473 5f6e 616d 6573 280a 2020 2020 2020  ds_names(.      
-00022070: 2020 2020 2020 2020 2020 434f 4c4c 4543            COLLEC
-00022080: 5449 4f4e 5f49 4e49 5449 414c 0a20 2020  TION_INITIAL.   
-00022090: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-000220a0: 2020 2029 0a0a 2020 2020 2020 2020 2320     )..        # 
-000220b0: 5661 6c75 6520 696e 2074 6865 2064 620a  Value in the db.
-000220c0: 2020 2020 2020 2020 6974 656d 203d 2073          item = s
-000220d0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-000220e0: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
-000220f0: 6c65 5f64 6174 612e 6974 656d 2831 2c20  le_data.item(1, 
-00022100: 3029 0a20 2020 2020 2020 2073 6361 6e5f  0).        scan_
-00022110: 6e61 6d65 203d 2069 7465 6d2e 7465 7874  name = item.text
-00022120: 2829 0a20 2020 2020 2020 2076 616c 7565  ().        value
-00022130: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
-00022140: 646f 772e 7072 6f6a 6563 742e 7365 7373  dow.project.sess
-00022150: 696f 6e2e 6765 745f 7661 6c75 6528 0a20  ion.get_value(. 
-00022160: 2020 2020 2020 2020 2020 2043 4f4c 4c45             COLLE
-00022170: 4354 494f 4e5f 4355 5252 454e 542c 2073  CTION_CURRENT, s
-00022180: 6361 6e5f 6e61 6d65 2c20 2254 6573 7422  can_name, "Test"
-00022190: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-000221a0: 2020 2076 616c 7565 5f69 6e69 7469 616c     value_initial
-000221b0: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
-000221c0: 646f 772e 7072 6f6a 6563 742e 7365 7373  dow.project.sess
-000221d0: 696f 6e2e 6765 745f 7661 6c75 6528 0a20  ion.get_value(. 
-000221e0: 2020 2020 2020 2020 2020 2043 4f4c 4c45             COLLE
-000221f0: 4354 494f 4e5f 494e 4954 4941 4c2c 2073  CTION_INITIAL, s
-00022200: 6361 6e5f 6e61 6d65 2c20 2254 6573 7422  can_name, "Test"
-00022210: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-00022220: 2020 2020 2320 5661 6c75 6520 696e 2074      # Value in t
-00022230: 6865 2044 6174 6142 726f 7773 6572 0a20  he DataBrowser. 
-00022240: 2020 2020 2020 2074 6573 745f 636f 6c75         test_colu
-00022250: 6d6e 203d 2028 0a20 2020 2020 2020 2020  mn = (.         
-00022260: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
-00022270: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
-00022280: 2e74 6162 6c65 5f64 6174 612e 6765 745f  .table_data.get_
-00022290: 7461 675f 636f 6c75 6d6e 0a20 2020 2020  tag_column.     
-000222a0: 2020 2029 2822 5465 7374 2229 0a20 2020     )("Test").   
-000222b0: 2020 2020 2069 7465 6d20 3d20 7365 6c66       item = self
-000222c0: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
-000222d0: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
-000222e0: 6461 7461 2e69 7465 6d28 312c 2074 6573  data.item(1, tes
-000222f0: 745f 636f 6c75 6d6e 290a 2020 2020 2020  t_column).      
-00022300: 2020 6461 7461 6272 6f77 7365 7220 3d20    databrowser = 
-00022310: 6974 656d 2e74 6578 7428 290a 0a20 2020  item.text()..   
-00022320: 2020 2020 2023 2043 6865 636b 2065 7175       # Check equ
-00022330: 616c 6974 7920 6265 7477 6565 6e20 4461  ality between Da
-00022340: 7461 4272 6f77 7365 7220 616e 6420 6462  taBrowser and db
-00022350: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00022360: 7365 7274 4571 7561 6c28 7661 6c75 652c  sertEqual(value,
-00022370: 205b 332e 302c 2033 2e30 5d29 0a20 2020   [3.0, 3.0]).   
-00022380: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00022390: 4571 7561 6c28 7661 6c75 652c 2061 7374  Equal(value, ast
-000223a0: 2e6c 6974 6572 616c 5f65 7661 6c28 6461  .literal_eval(da
-000223b0: 7461 6272 6f77 7365 7229 290a 2020 2020  tabrowser)).    
-000223c0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-000223d0: 7175 616c 2876 616c 7565 2c20 7661 6c75  qual(value, valu
-000223e0: 655f 696e 6974 6961 6c29 0a0a 2020 2020  e_initial)..    
-000223f0: 2020 2020 2320 556e 646f 0a20 2020 2020      # Undo.     
-00022400: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
-00022410: 646f 772e 6163 7469 6f6e 5f75 6e64 6f2e  dow.action_undo.
-00022420: 7472 6967 6765 7228 290a 0a20 2020 2020  trigger()..     
-00022430: 2020 2023 2043 6865 636b 2027 5465 7374     # Check 'Test
-00022440: 2720 7461 6720 6973 206e 6f74 2069 6e20  ' tag is not in 
-00022450: 7468 6520 6462 2061 6e64 206e 6f74 2069  the db and not i
-00022460: 6e20 7468 6520 4461 7461 4272 6f77 7365  n the DataBrowse
-00022470: 720a 2020 2020 2020 2020 7365 6c66 2e61  r.        self.a
-00022480: 7373 6572 7446 616c 7365 280a 2020 2020  ssertFalse(.    
-00022490: 2020 2020 2020 2020 2254 6573 7422 0a20          "Test". 
-000224a0: 2020 2020 2020 2020 2020 2069 6e20 7365             in se
-000224b0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
-000224c0: 726f 6a65 6374 2e73 6573 7369 6f6e 2e67  roject.session.g
-000224d0: 6574 5f66 6965 6c64 735f 6e61 6d65 7328  et_fields_names(
-000224e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000224f0: 2043 4f4c 4c45 4354 494f 4e5f 4355 5252   COLLECTION_CURR
-00022500: 454e 540a 2020 2020 2020 2020 2020 2020  ENT.            
-00022510: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
-00022520: 2020 2020 7365 6c66 2e61 7373 6572 7446      self.assertF
-00022530: 616c 7365 280a 2020 2020 2020 2020 2020  alse(.          
-00022540: 2020 2254 6573 7422 0a20 2020 2020 2020    "Test".       
-00022550: 2020 2020 2069 6e20 7365 6c66 2e6d 6169       in self.mai
-00022560: 6e5f 7769 6e64 6f77 2e70 726f 6a65 6374  n_window.project
-00022570: 2e73 6573 7369 6f6e 2e67 6574 5f66 6965  .session.get_fie
-00022580: 6c64 735f 6e61 6d65 7328 0a20 2020 2020  lds_names(.     
-00022590: 2020 2020 2020 2020 2020 2043 4f4c 4c45             COLLE
-000225a0: 4354 494f 4e5f 494e 4954 4941 4c0a 2020  CTION_INITIAL.  
-000225b0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-000225c0: 2020 2020 290a 2020 2020 2020 2020 7365      ).        se
-000225d0: 6c66 2e61 7373 6572 7449 734e 6f6e 6528  lf.assertIsNone(
-000225e0: 0a20 2020 2020 2020 2020 2020 2028 7365  .            (se
-000225f0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
-00022600: 6174 615f 6272 6f77 7365 722e 7461 626c  ata_browser.tabl
-00022610: 655f 6461 7461 2e67 6574 5f74 6167 5f63  e_data.get_tag_c
-00022620: 6f6c 756d 6e29 2822 5465 7374 2229 0a20  olumn)("Test"). 
-00022630: 2020 2020 2020 2029 0a0a 2020 2020 6465         )..    de
-00022640: 6620 7465 7374 5f75 6e6e 616d 6564 5f70  f test_unnamed_p
-00022650: 726f 6a5f 736f 6674 5f6f 7065 6e28 7365  roj_soft_open(se
-00022660: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
-00022670: 5465 7374 7320 756e 6e61 6d65 6420 7072  Tests unnamed pr
-00022680: 6f6a 6563 7420 6372 6561 7469 6f6e 2061  oject creation a
-00022690: 7420 736f 6674 7761 7265 206f 7065 6e69  t software openi
-000226a0: 6e67 2e22 2222 0a0a 2020 2020 2020 2020  ng."""..        
-000226b0: 7365 6c66 2e61 7373 6572 7449 7349 6e73  self.assertIsIns
-000226c0: 7461 6e63 6528 7365 6c66 2e70 726f 6a65  tance(self.proje
-000226d0: 6374 2c20 5072 6f6a 6563 7429 0a20 2020  ct, Project).   
-000226e0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-000226f0: 4571 7561 6c28 7365 6c66 2e6d 6169 6e5f  Equal(self.main_
-00022700: 7769 6e64 6f77 2e70 726f 6a65 6374 2e67  window.project.g
-00022710: 6574 4e61 6d65 2829 2c20 2255 6e6e 616d  etName(), "Unnam
-00022720: 6564 2070 726f 6a65 6374 2229 0a20 2020  ed project").   
-00022730: 2020 2020 2074 6167 7320 3d20 7365 6c66       tags = self
-00022740: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 726f  .main_window.pro
-00022750: 6a65 6374 2e73 6573 7369 6f6e 2e67 6574  ject.session.get
-00022760: 5f66 6965 6c64 735f 6e61 6d65 7328 0a20  _fields_names(. 
-00022770: 2020 2020 2020 2020 2020 2043 4f4c 4c45             COLLE
-00022780: 4354 494f 4e5f 4355 5252 454e 540a 2020  CTION_CURRENT.  
-00022790: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-000227a0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-000227b0: 286c 656e 2874 6167 7329 2c20 3629 0a20  (len(tags), 6). 
-000227c0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-000227d0: 7274 5472 7565 2854 4147 5f43 4845 434b  rtTrue(TAG_CHECK
-000227e0: 5355 4d20 696e 2074 6167 7329 0a20 2020  SUM in tags).   
-000227f0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00022800: 5472 7565 2854 4147 5f46 494c 454e 414d  True(TAG_FILENAM
-00022810: 4520 696e 2074 6167 7329 0a20 2020 2020  E in tags).     
-00022820: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-00022830: 7565 2854 4147 5f54 5950 4520 696e 2074  ue(TAG_TYPE in t
-00022840: 6167 7329 0a20 2020 2020 2020 2073 656c  ags).        sel
-00022850: 662e 6173 7365 7274 5472 7565 2854 4147  f.assertTrue(TAG
-00022860: 5f45 5850 5f54 5950 4520 696e 2074 6167  _EXP_TYPE in tag
-00022870: 7329 0a20 2020 2020 2020 2073 656c 662e  s).        self.
-00022880: 6173 7365 7274 5472 7565 2854 4147 5f42  assertTrue(TAG_B
-00022890: 5249 434b 5320 696e 2074 6167 7329 0a20  RICKS in tags). 
-000228a0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-000228b0: 7274 5472 7565 2854 4147 5f48 4953 544f  rtTrue(TAG_HISTO
-000228c0: 5259 2069 6e20 7461 6773 290a 2020 2020  RY in tags).    
-000228d0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-000228e0: 7175 616c 280a 2020 2020 2020 2020 2020  qual(.          
-000228f0: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
-00022900: 6f77 2e70 726f 6a65 6374 2e73 6573 7369  ow.project.sessi
-00022910: 6f6e 2e67 6574 5f64 6f63 756d 656e 7473  on.get_documents
-00022920: 5f6e 616d 6573 280a 2020 2020 2020 2020  _names(.        
-00022930: 2020 2020 2020 2020 434f 4c4c 4543 5449          COLLECTI
-00022940: 4f4e 5f43 5552 5245 4e54 0a20 2020 2020  ON_CURRENT.     
-00022950: 2020 2020 2020 2029 2c0a 2020 2020 2020         ),.      
-00022960: 2020 2020 2020 5b5d 2c0a 2020 2020 2020        [],.      
-00022970: 2020 290a 2020 2020 2020 2020 7365 6c66    ).        self
-00022980: 2e61 7373 6572 7445 7175 616c 280a 2020  .assertEqual(.  
-00022990: 2020 2020 2020 2020 2020 7365 6c66 2e6d            self.m
-000229a0: 6169 6e5f 7769 6e64 6f77 2e70 726f 6a65  ain_window.proje
-000229b0: 6374 2e73 6573 7369 6f6e 2e67 6574 5f64  ct.session.get_d
-000229c0: 6f63 756d 656e 7473 5f6e 616d 6573 280a  ocuments_names(.
-000229d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000229e0: 434f 4c4c 4543 5449 4f4e 5f49 4e49 5449  COLLECTION_INITI
-000229f0: 414c 0a20 2020 2020 2020 2020 2020 2029  AL.            )
-00022a00: 2c0a 2020 2020 2020 2020 2020 2020 5b5d  ,.            []
-00022a10: 2c0a 2020 2020 2020 2020 290a 2020 2020  ,.        ).    
-00022a20: 2020 2020 636f 6c6c 6563 7469 6f6e 7320      collections 
-00022a30: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
-00022a40: 6f77 2e70 726f 6a65 6374 2e73 6573 7369  ow.project.sessi
-00022a50: 6f6e 2e67 6574 5f63 6f6c 6c65 6374 696f  on.get_collectio
-00022a60: 6e73 5f6e 616d 6573 2829 0a20 2020 2020  ns_names().     
-00022a70: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00022a80: 7561 6c28 6c65 6e28 636f 6c6c 6563 7469  ual(len(collecti
-00022a90: 6f6e 7329 2c20 3529 0a20 2020 2020 2020  ons), 5).       
-00022aa0: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
-00022ab0: 2843 4f4c 4c45 4354 494f 4e5f 494e 4954  (COLLECTION_INIT
-00022ac0: 4941 4c20 696e 2063 6f6c 6c65 6374 696f  IAL in collectio
-00022ad0: 6e73 290a 2020 2020 2020 2020 7365 6c66  ns).        self
-00022ae0: 2e61 7373 6572 7454 7275 6528 434f 4c4c  .assertTrue(COLL
-00022af0: 4543 5449 4f4e 5f43 5552 5245 4e54 2069  ECTION_CURRENT i
-00022b00: 6e20 636f 6c6c 6563 7469 6f6e 7329 0a20  n collections). 
-00022b10: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00022b20: 7274 5472 7565 2843 4f4c 4c45 4354 494f  rtTrue(COLLECTIO
-00022b30: 4e5f 4252 4943 4b20 696e 2063 6f6c 6c65  N_BRICK in colle
-00022b40: 6374 696f 6e73 290a 2020 2020 2020 2020  ctions).        
-00022b50: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
-00022b60: 434f 4c4c 4543 5449 4f4e 5f48 4953 544f  COLLECTION_HISTO
-00022b70: 5259 2069 6e20 636f 6c6c 6563 7469 6f6e  RY in collection
-00022b80: 7329 0a20 2020 2020 2020 2073 656c 662e  s).        self.
-00022b90: 6173 7365 7274 4571 7561 6c28 0a20 2020  assertEqual(.   
-00022ba0: 2020 2020 2020 2020 2073 656c 662e 6d61           self.ma
-00022bb0: 696e 5f77 696e 646f 772e 7769 6e64 6f77  in_window.window
-00022bc0: 5469 746c 6528 292c 0a20 2020 2020 2020  Title(),.       
-00022bd0: 2020 2020 2022 4d49 4120 2d20 4d75 6c74       "MIA - Mult
-00022be0: 6970 6172 616d 6574 7269 6320 496d 6167  iparametric Imag
-00022bf0: 6520 416e 616c 7973 6973 2022 0a20 2020  e Analysis ".   
-00022c00: 2020 2020 2020 2020 2022 2841 646d 696e           "(Admin
-00022c10: 206d 6f64 6529 202d 2055 6e6e 616d 6564   mode) - Unnamed
-00022c20: 2070 726f 6a65 6374 222c 0a20 2020 2020   project",.     
-00022c30: 2020 2029 0a0a 2020 2020 6465 6620 7465     )..    def te
-00022c40: 7374 5f75 7064 6174 655f 6461 7461 5f68  st_update_data_h
-00022c50: 6973 746f 7279 2873 656c 6629 3a0a 2020  istory(self):.  
-00022c60: 2020 2020 2020 2222 2255 7064 6174 6573        """Updates
-00022c70: 2074 6865 2068 6973 746f 7279 206f 6620   the history of 
-00022c80: 6461 7461 2074 6861 7420 6861 7665 2062  data that have b
-00022c90: 6565 6e20 7265 2d77 7269 7474 656e 2e0a  een re-written..
-00022ca0: 0a20 2020 2020 2020 202d 2054 6573 7473  .        - Tests
-00022cb0: 3a20 5072 6f6a 6563 742e 7570 6461 7465  : Project.update
-00022cc0: 5f64 6174 615f 6869 7374 6f72 790a 2020  _data_history.  
-00022cd0: 2020 2020 2020 2222 220a 0a20 2020 2020        """..     
-00022ce0: 2020 2023 2043 7265 6174 6573 2061 2074     # Creates a t
-00022cf0: 6573 7420 7072 6f6a 6563 740a 2020 2020  est project.    
-00022d00: 2020 2020 7465 7374 5f70 726f 6a5f 7061      test_proj_pa
-00022d10: 7468 203d 2073 656c 662e 6765 745f 6e65  th = self.get_ne
-00022d20: 775f 7465 7374 5f70 726f 6a65 6374 286c  w_test_project(l
-00022d30: 6967 6874 3d54 7275 6529 0a20 2020 2020  ight=True).     
-00022d40: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
-00022d50: 646f 772e 7377 6974 6368 5f70 726f 6a65  dow.switch_proje
-00022d60: 6374 2874 6573 745f 7072 6f6a 5f70 6174  ct(test_proj_pat
-00022d70: 682c 2022 7465 7374 5f70 726f 6a65 6374  h, "test_project
-00022d80: 2229 0a0a 2020 2020 2020 2020 2320 4765  ")..        # Ge
-00022d90: 7473 2061 2073 6361 6e20 7468 6174 2063  ts a scan that c
-00022da0: 6f6e 7461 696e 7320 6120 736d 6f6f 7468  ontains a smooth
-00022db0: 2062 7269 636b 2069 6e20 6974 7320 6869   brick in its hi
-00022dc0: 7374 6f72 790a 2020 2020 2020 2020 4e49  story.        NI
-00022dd0: 495f 4649 4c45 5f33 203d 2028 0a20 2020  I_FILE_3 = (.   
-00022de0: 2020 2020 2020 2020 2022 7347 7565 7262           "sGuerb
-00022df0: 6574 2d43 362d 3230 3134 2d52 6174 2d4b  et-C6-2014-Rat-K
-00022e00: 3532 2d54 7562 6532 372d 3230 3134 2d30  52-Tube27-2014-0
-00022e10: 322d 3134 3130 3233 3137 2d30 312d 4731  2-14102317-01-G1
-00022e20: 5f22 0a20 2020 2020 2020 2020 2020 2022  _".            "
-00022e30: 4775 6572 6265 745f 416e 6174 2d52 4152  Guerbet_Anat-RAR
-00022e40: 4570 766d 2d30 3030 3232 305f 3030 302e  Epvm-000220_000.
-00022e50: 6e69 6922 0a20 2020 2020 2020 2029 0a20  nii".        ). 
-00022e60: 2020 2020 2020 2044 4f43 554d 454e 545f         DOCUMENT_
-00022e70: 3320 3d20 6f73 2e70 6174 682e 6a6f 696e  3 = os.path.join
-00022e80: 2822 6461 7461 222c 2022 6465 7269 7665  ("data", "derive
-00022e90: 645f 6461 7461 222c 204e 4949 5f46 494c  d_data", NII_FIL
-00022ea0: 455f 3329 0a0a 2020 2020 2020 2020 2320  E_3)..        # 
-00022eb0: 436c 6561 6e75 7020 6561 726c 6965 7220  Cleanup earlier 
-00022ec0: 6869 7374 6f72 7920 616e 6420 6368 6563  history and chec
-00022ed0: 6b20 7468 6174 206e 6f20 6f62 736f 6c65  k that no obsole
-00022ee0: 7465 2062 7269 636b 7320 6973 2064 6574  te bricks is det
-00022ef0: 6563 7465 640a 2020 2020 2020 2020 6f62  ected.        ob
-00022f00: 736f 6c65 7465 5f62 7269 636b 7320 3d20  solete_bricks = 
-00022f10: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00022f20: 2e70 726f 6a65 6374 2e75 7064 6174 655f  .project.update_
-00022f30: 6461 7461 5f68 6973 746f 7279 280a 2020  data_history(.  
-00022f40: 2020 2020 2020 2020 2020 5b44 4f43 554d            [DOCUM
-00022f50: 454e 545f 335d 0a20 2020 2020 2020 2029  ENT_3].        )
-00022f60: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00022f70: 7365 7274 4571 7561 6c28 6f62 736f 6c65  sertEqual(obsole
-00022f80: 7465 5f62 7269 636b 732c 2073 6574 2829  te_bricks, set()
-00022f90: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
-00022fa0: 7570 6461 7465 5f64 6566 6175 6c74 5f76  update_default_v
-00022fb0: 616c 7565 2873 656c 6629 3a0a 2020 2020  alue(self):.    
-00022fc0: 2020 2020 2222 2255 7064 6174 6573 2074      """Updates t
-00022fd0: 6865 2076 616c 7565 7320 7768 656e 2061  he values when a
-00022fe0: 206c 6973 7420 6f66 2064 6566 6175 6c74   list of default
-00022ff0: 2076 616c 7565 7320 6973 2063 7265 6174   values is creat
-00023000: 6564 2e0a 0a20 2020 2020 2020 2054 6573  ed...        Tes
-00023010: 7473 3a20 4465 6661 756c 7456 616c 7565  ts: DefaultValue
-00023020: 4c69 7374 4372 6561 7469 6f6e 2e75 7064  ListCreation.upd
-00023030: 6174 655f 6465 6661 756c 745f 7661 6c75  ate_default_valu
-00023040: 650a 2020 2020 2020 2020 2222 220a 0a20  e.        """.. 
-00023050: 2020 2020 2020 2023 2053 6574 2073 686f         # Set sho
-00023060: 7274 6375 7473 2066 6f72 206f 626a 6563  rtcuts for objec
-00023070: 7473 2074 6861 7420 6172 6520 6f66 7465  ts that are ofte
-00023080: 6e20 7573 6564 0a20 2020 2020 2020 2064  n used.        d
-00023090: 6174 615f 6272 6f77 7365 7220 3d20 7365  ata_browser = se
-000230a0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
-000230b0: 6174 615f 6272 6f77 7365 720a 0a20 2020  ata_browser..   
-000230c0: 2020 2020 2023 2054 6865 206f 626a 6563       # The objec
-000230d0: 7473 2061 7265 2073 7563 6365 7373 6976  ts are successiv
-000230e0: 656c 7920 6372 6561 7465 6420 696e 2074  ely created in t
-000230f0: 6865 2066 6f6c 6c6f 7769 6e67 206f 7264  he following ord
-00023100: 6572 3a0a 2020 2020 2020 2020 2320 506f  er:.        # Po
-00023110: 7055 7041 6464 5461 6720 3e20 4465 6661  pUpAddTag > Defa
-00023120: 756c 7456 616c 7565 514c 696e 6545 6469  ultValueQLineEdi
-00023130: 7420 3e20 4465 6661 756c 7456 616c 7565  t > DefaultValue
-00023140: 4c69 7374 4372 6561 7469 6f6e 0a20 2020  ListCreation.   
-00023150: 2020 2020 2070 6f70 5f75 7020 3d20 506f       pop_up = Po
-00023160: 7055 7041 6464 5461 6728 6461 7461 5f62  pUpAddTag(data_b
-00023170: 726f 7773 6572 2c20 6461 7461 5f62 726f  rowser, data_bro
-00023180: 7773 6572 2e70 726f 6a65 6374 290a 2020  wser.project).  
-00023190: 2020 2020 2020 7465 7874 5f65 6474 203d        text_edt =
-000231a0: 2070 6f70 5f75 702e 7465 7874 5f65 6469   pop_up.text_edi
-000231b0: 745f 6465 6661 756c 745f 7661 6c75 650a  t_default_value.
-000231c0: 0a20 2020 2020 2020 2023 2041 7373 7572  .        # Assur
-000231d0: 6573 2074 6865 2069 6e73 7461 6e74 6961  es the instantia
-000231e0: 7469 6f6e 206f 6620 2744 6566 6175 6c74  tion of 'Default
-000231f0: 5661 6c75 654c 6973 7443 7265 6174 696f  ValueListCreatio
-00023200: 6e27 0a20 2020 2020 2020 2074 6578 745f  n'.        text_
-00023210: 6564 742e 7061 7265 6e74 2e74 7970 6520  edt.parent.type 
-00023220: 3d20 226c 6973 745f 220a 0a20 2020 2020  = "list_"..     
-00023230: 2020 2023 204d 6f63 6b73 2074 6865 2065     # Mocks the e
-00023240: 7865 6375 7469 6f6e 206f 6620 6120 6469  xecution of a di
-00023250: 616c 6f67 2077 696e 646f 770a 2020 2020  alog window.    
-00023260: 2020 2020 4465 6661 756c 7456 616c 7565      DefaultValue
-00023270: 4c69 7374 4372 6561 7469 6f6e 2e73 686f  ListCreation.sho
-00023280: 7720 3d20 4d6f 636b 2829 0a0a 2020 2020  w = Mock()..    
-00023290: 2020 2020 2320 2744 6566 6175 6c74 5661      # 'DefaultVa
-000232a0: 6c75 654c 6973 7443 7265 6174 696f 6e27  lueListCreation'
-000232b0: 2063 616e 2062 6520 696e 7374 616e 7469   can be instanti
-000232c0: 6174 6564 2077 6974 6820 616e 2065 6d70  ated with an emp
-000232d0: 7479 0a20 2020 2020 2020 2023 2073 7472  ty.        # str
-000232e0: 696e 672c 206e 6f6e 2d65 6d70 7479 2073  ing, non-empty s
-000232f0: 7472 696e 6720 6f72 206c 6973 740a 2020  tring or list.  
-00023300: 2020 2020 2020 2320 4f6e 6c79 2061 206c        # Only a l
-00023310: 6973 7420 6c65 6164 7320 746f 2074 6865  ist leads to the
-00023320: 2074 6162 6c65 2076 616c 7565 7320 6265   table values be
-00023330: 696e 6720 6669 6c6c 6564 0a20 2020 2020  ing filled.     
-00023340: 2020 2023 2045 6d70 7479 2073 7472 696e     # Empty strin
-00023350: 670a 2020 2020 2020 2020 7465 7874 5f65  g.        text_e
-00023360: 6474 2e73 6574 5465 7874 2822 2229 0a20  dt.setText(""). 
-00023370: 2020 2020 2020 2074 6578 745f 6564 742e         text_edt.
-00023380: 6d6f 7573 6550 7265 7373 4576 656e 7428  mousePressEvent(
-00023390: 4e6f 6e65 290a 0a20 2020 2020 2020 2023  None)..        #
-000233a0: 204e 6f6e 2d65 6d70 7479 2073 7472 696e   Non-empty strin
-000233b0: 670a 2020 2020 2020 2020 7465 7874 5f65  g.        text_e
-000233c0: 6474 2e73 6574 5465 7874 2822 6e6f 6e5f  dt.setText("non_
-000233d0: 656d 7074 7922 290a 2020 2020 2020 2020  empty").        
-000233e0: 7465 7874 5f65 6474 2e6d 6f75 7365 5072  text_edt.mousePr
-000233f0: 6573 7345 7665 6e74 284e 6f6e 6529 0a20  essEvent(None). 
-00023400: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00023410: 7274 4571 7561 6c28 7465 7874 5f65 6474  rtEqual(text_edt
-00023420: 2e6c 6973 745f 6372 6561 7469 6f6e 2e74  .list_creation.t
-00023430: 6162 6c65 2e69 7465 6d41 7428 302c 2030  able.itemAt(0, 0
-00023440: 292e 7465 7874 2829 2c20 2222 290a 0a20  ).text(), "").. 
-00023450: 2020 2020 2020 2023 204c 6973 7420 6f66         # List of
-00023460: 206c 656e 6774 6820 3d20 320a 2020 2020   length = 2.    
-00023470: 2020 2020 7465 7874 5f65 6474 2e73 6574      text_edt.set
-00023480: 5465 7874 2822 5b31 2c20 325d 2229 0a20  Text("[1, 2]"). 
-00023490: 2020 2020 2020 2074 6578 745f 6564 742e         text_edt.
-000234a0: 6d6f 7573 6550 7265 7373 4576 656e 7428  mousePressEvent(
-000234b0: 4e6f 6e65 290a 0a20 2020 2020 2020 2073  None)..        s
-000234c0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-000234d0: 7465 7874 5f65 6474 2e6c 6973 745f 6372  text_edt.list_cr
-000234e0: 6561 7469 6f6e 2e74 6162 6c65 2e69 7465  eation.table.ite
-000234f0: 6d28 302c 2030 292e 7465 7874 2829 2c20  m(0, 0).text(), 
-00023500: 2231 2229 0a20 2020 2020 2020 2073 656c  "1").        sel
-00023510: 662e 6173 7365 7274 4571 7561 6c28 7465  f.assertEqual(te
-00023520: 7874 5f65 6474 2e6c 6973 745f 6372 6561  xt_edt.list_crea
-00023530: 7469 6f6e 2e74 6162 6c65 2e69 7465 6d28  tion.table.item(
-00023540: 302c 2031 292e 7465 7874 2829 2c20 2232  0, 1).text(), "2
-00023550: 2229 0a20 2020 2020 2020 2073 656c 662e  ").        self.
-00023560: 6173 7365 7274 4571 7561 6c28 7465 7874  assertEqual(text
-00023570: 5f65 6474 2e6c 6973 745f 6372 6561 7469  _edt.list_creati
-00023580: 6f6e 2e74 6162 6c65 2e63 6f6c 756d 6e43  on.table.columnC
-00023590: 6f75 6e74 2829 2c20 3229 0a20 2020 2020  ount(), 2).     
-000235a0: 2020 2023 2027 275b 315d 2727 2077 696c     # ''[1]'' wil
-000235b0: 6c20 6265 636f 6d65 2027 5b31 5d27 2061  l become '[1]' a
-000235c0: 6674 6572 2062 6569 6e67 2070 6173 7365  fter being passe
-000235d0: 6420 7468 726f 7567 6820 730a 2020 2020  d through s.    
-000235e0: 2020 2020 2320 2761 7374 2e6c 6974 6572      # 'ast.liter
-000235f0: 616c 5f65 7661 6c28 2927 0a0a 2020 2020  al_eval()'..    
-00023600: 2020 2020 2320 4164 6473 206f 6e65 2065      # Adds one e
-00023610: 6c65 6d65 6e74 2074 6f20 7468 6520 7461  lement to the ta
-00023620: 626c 650a 2020 2020 2020 2020 7465 7874  ble.        text
-00023630: 5f65 6474 2e6c 6973 745f 6372 6561 7469  _edt.list_creati
-00023640: 6f6e 2e61 6464 5f65 6c65 6d65 6e74 2829  on.add_element()
-00023650: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00023660: 7365 7274 4571 7561 6c28 7465 7874 5f65  sertEqual(text_e
-00023670: 6474 2e6c 6973 745f 6372 6561 7469 6f6e  dt.list_creation
-00023680: 2e74 6162 6c65 2e63 6f6c 756d 6e43 6f75  .table.columnCou
-00023690: 6e74 2829 2c20 3329 0a0a 2020 2020 2020  nt(), 3)..      
-000236a0: 2020 2320 5265 6d6f 7665 7320 6f6e 6520    # Removes one 
-000236b0: 656c 656d 656e 7420 746f 2074 6865 2074  element to the t
-000236c0: 6162 6c65 0a20 2020 2020 2020 2074 6578  able.        tex
-000236d0: 745f 6564 742e 6c69 7374 5f63 7265 6174  t_edt.list_creat
-000236e0: 696f 6e2e 7265 6d6f 7665 5f65 6c65 6d65  ion.remove_eleme
-000236f0: 6e74 2829 0a20 2020 2020 2020 2073 656c  nt().        sel
-00023700: 662e 6173 7365 7274 4571 7561 6c28 7465  f.assertEqual(te
-00023710: 7874 5f65 6474 2e6c 6973 745f 6372 6561  xt_edt.list_crea
-00023720: 7469 6f6e 2e74 6162 6c65 2e63 6f6c 756d  tion.table.colum
-00023730: 6e43 6f75 6e74 2829 2c20 3229 0a0a 2020  nCount(), 2)..  
-00023740: 2020 2020 2020 2320 5265 7369 7a65 2074        # Resize t
-00023750: 6865 2074 6162 6c65 0a20 2020 2020 2020  he table.       
-00023760: 2074 6578 745f 6564 742e 6c69 7374 5f63   text_edt.list_c
-00023770: 7265 6174 696f 6e2e 7265 7369 7a65 5f74  reation.resize_t
-00023780: 6162 6c65 2829 0a0a 2020 2020 2020 2020  able()..        
-00023790: 2320 5265 7369 7a65 2074 6865 2074 6162  # Resize the tab
-000237a0: 6c65 2077 6869 6c65 206d 6f63 6b69 6e67  le while mocking
-000237b0: 2061 2063 6f6c 756d 6e20 7769 6474 6820   a column width 
-000237c0: 6f66 2039 3030 2065 6c65 6d65 6e74 730a  of 900 elements.
-000237d0: 2020 2020 2020 2020 7465 7874 5f65 6474          text_edt
-000237e0: 2e6c 6973 745f 6372 6561 7469 6f6e 2e74  .list_creation.t
-000237f0: 6162 6c65 2e73 6574 436f 6c75 6d6e 5769  able.setColumnWi
-00023800: 6474 6828 302c 2039 3030 290a 2020 2020  dth(0, 900).    
-00023810: 2020 2020 7465 7874 5f65 6474 2e6c 6973      text_edt.lis
-00023820: 745f 6372 6561 7469 6f6e 2e72 6573 697a  t_creation.resiz
-00023830: 655f 7461 626c 6528 290a 0a20 2020 2020  e_table()..     
-00023840: 2020 2023 2054 6865 2064 6566 6175 6c74     # The default
-00023850: 2076 616c 7565 2063 616e 2062 6520 7570   value can be up
-00023860: 6461 7465 6420 7769 7468 2073 6576 6572  dated with sever
-00023870: 616c 2074 7970 6573 206f 6620 6461 7461  al types of data
-00023880: 0a20 2020 2020 2020 2074 7970 6573 203d  .        types =
-00023890: 205b 0a20 2020 2020 2020 2020 2020 2046   [.            F
-000238a0: 4945 4c44 5f54 5950 455f 4c49 5354 5f49  IELD_TYPE_LIST_I
-000238b0: 4e54 4547 4552 2c0a 2020 2020 2020 2020  NTEGER,.        
-000238c0: 2020 2020 4649 454c 445f 5459 5045 5f4c      FIELD_TYPE_L
-000238d0: 4953 545f 464c 4f41 542c 0a20 2020 2020  IST_FLOAT,.     
-000238e0: 2020 2020 2020 2046 4945 4c44 5f54 5950         FIELD_TYP
-000238f0: 455f 4c49 5354 5f42 4f4f 4c45 414e 2c0a  E_LIST_BOOLEAN,.
-00023900: 2020 2020 2020 2020 2020 2020 4649 454c              FIEL
-00023910: 445f 5459 5045 5f4c 4953 545f 424f 4f4c  D_TYPE_LIST_BOOL
-00023920: 4541 4e2c 0a20 2020 2020 2020 2020 2020  EAN,.           
-00023930: 2046 4945 4c44 5f54 5950 455f 4c49 5354   FIELD_TYPE_LIST
-00023940: 5f53 5452 494e 472c 0a20 2020 2020 2020  _STRING,.       
-00023950: 2020 2020 2046 4945 4c44 5f54 5950 455f       FIELD_TYPE_
-00023960: 4c49 5354 5f44 4154 452c 0a20 2020 2020  LIST_DATE,.     
-00023970: 2020 2020 2020 2046 4945 4c44 5f54 5950         FIELD_TYP
-00023980: 455f 4c49 5354 5f44 4154 4554 494d 452c  E_LIST_DATETIME,
-00023990: 0a20 2020 2020 2020 2020 2020 2046 4945  .            FIE
-000239a0: 4c44 5f54 5950 455f 4c49 5354 5f54 494d  LD_TYPE_LIST_TIM
-000239b0: 452c 0a20 2020 2020 2020 205d 0a20 2020  E,.        ].   
-000239c0: 2020 2020 2076 616c 7565 7320 3d20 5b0a       values = [.
-000239d0: 2020 2020 2020 2020 2020 2020 225b 315d              "[1]
-000239e0: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-000239f0: 5b31 2e31 5d22 2c0a 2020 2020 2020 2020  [1.1]",.        
-00023a00: 2020 2020 225b 5472 7565 5d22 2c0a 2020      "[True]",.  
-00023a10: 2020 2020 2020 2020 2020 225b 4661 6c73            "[Fals
-00023a20: 655d 222c 0a20 2020 2020 2020 2020 2020  e]",.           
-00023a30: 2027 5b22 7374 7222 5d27 2c0a 2020 2020   '["str"]',.    
-00023a40: 2020 2020 2020 2020 275b 2231 312f 3131          '["11/11
-00023a50: 2f31 3131 3122 5d27 2c0a 2020 2020 2020  /1111"]',.      
-00023a60: 2020 2020 2020 275b 2231 312f 3131 2f31        '["11/11/1
-00023a70: 3131 3120 3131 3a31 313a 3131 2e31 3122  111 11:11:11.11"
-00023a80: 5d27 2c0a 2020 2020 2020 2020 2020 2020  ]',.            
-00023a90: 275b 2231 313a 3131 3a31 312e 3131 225d  '["11:11:11.11"]
-00023aa0: 272c 0a20 2020 2020 2020 205d 0a0a 2020  ',.        ]..  
-00023ab0: 2020 2020 2020 666f 7220 2874 7970 655f        for (type_
-00023ac0: 2c20 7661 6c75 6529 2069 6e20 7a69 7028  , value) in zip(
-00023ad0: 7479 7065 732c 2076 616c 7565 7329 3a0a  types, values):.
-00023ae0: 2020 2020 2020 2020 2020 2020 7465 7874              text
-00023af0: 5f65 6474 2e73 6574 5465 7874 2876 616c  _edt.setText(val
-00023b00: 7565 290a 2020 2020 2020 2020 2020 2020  ue).            
-00023b10: 7465 7874 5f65 6474 2e6d 6f75 7365 5072  text_edt.mousePr
-00023b20: 6573 7345 7665 6e74 284e 6f6e 6529 0a20  essEvent(None). 
-00023b30: 2020 2020 2020 2020 2020 2074 6578 745f             text_
-00023b40: 6564 742e 6c69 7374 5f63 7265 6174 696f  edt.list_creatio
-00023b50: 6e2e 7479 7065 203d 2074 7970 655f 0a20  n.type = type_. 
-00023b60: 2020 2020 2020 2020 2020 2074 6578 745f             text_
-00023b70: 6564 742e 6c69 7374 5f63 7265 6174 696f  edt.list_creatio
-00023b80: 6e2e 7570 6461 7465 5f64 6566 6175 6c74  n.update_default
-00023b90: 5f76 616c 7565 2829 0a0a 2020 2020 2020  _value()..      
-00023ba0: 2020 2320 496e 6475 6365 7320 6120 2756    # Induces a 'V
-00023bb0: 616c 7565 4572 726f 7227 2c20 6d6f 636b  alueError', mock
-00023bc0: 7320 7468 6520 6578 6563 7574 696f 6e20  s the execution 
-00023bd0: 6f66 2061 2064 6961 6c6f 6720 626f 780a  of a dialog box.
-00023be0: 2020 2020 2020 2020 514d 6573 7361 6765          QMessage
-00023bf0: 426f 782e 6578 6563 203d 204d 6f63 6b28  Box.exec = Mock(
-00023c00: 290a 2020 2020 2020 2020 7465 7874 5f65  ).        text_e
-00023c10: 6474 2e73 6574 5465 7874 2827 5b22 6e6f  dt.setText('["no
-00023c20: 745f 626f 6f6c 6561 6e22 5d27 290a 2020  t_boolean"]').  
-00023c30: 2020 2020 2020 7465 7874 5f65 6474 2e6d        text_edt.m
-00023c40: 6f75 7365 5072 6573 7345 7665 6e74 284e  ousePressEvent(N
-00023c50: 6f6e 6529 0a20 2020 2020 2020 2074 6578  one).        tex
-00023c60: 745f 6564 742e 6c69 7374 5f63 7265 6174  t_edt.list_creat
-00023c70: 696f 6e2e 7479 7065 203d 2046 4945 4c44  ion.type = FIELD
-00023c80: 5f54 5950 455f 4c49 5354 5f42 4f4f 4c45  _TYPE_LIST_BOOLE
-00023c90: 414e 0a20 2020 2020 2020 2074 6578 745f  AN.        text_
-00023ca0: 6564 742e 6c69 7374 5f63 7265 6174 696f  edt.list_creatio
-00023cb0: 6e2e 7570 6461 7465 5f64 6566 6175 6c74  n.update_default
-00023cc0: 5f76 616c 7565 2829 0a0a 2020 2020 6465  _value()..    de
-00023cd0: 6620 7465 7374 5f75 7469 6c73 2873 656c  f test_utils(sel
-00023ce0: 6629 3a0a 2020 2020 2020 2020 2222 2254  f):.        """T
-00023cf0: 6573 7420 7468 6520 7574 696c 7320 6675  est the utils fu
-00023d00: 6e63 7469 6f6e 732e 2222 220a 0a20 2020  nctions."""..   
-00023d10: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00023d20: 4571 7561 6c28 7461 626c 655f 746f 5f64  Equal(table_to_d
-00023d30: 6174 6162 6173 6528 5472 7565 2c20 4649  atabase(True, FI
-00023d40: 454c 445f 5459 5045 5f42 4f4f 4c45 414e  ELD_TYPE_BOOLEAN
-00023d50: 292c 2054 7275 6529 0a20 2020 2020 2020  ), True).       
-00023d60: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00023d70: 6c28 7461 626c 655f 746f 5f64 6174 6162  l(table_to_datab
-00023d80: 6173 6528 2246 616c 7365 222c 2046 4945  ase("False", FIE
-00023d90: 4c44 5f54 5950 455f 424f 4f4c 4541 4e29  LD_TYPE_BOOLEAN)
-00023da0: 2c20 4661 6c73 6529 0a0a 2020 2020 2020  , False)..      
-00023db0: 2020 666f 726d 6174 5f20 3d20 2225 642f    format_ = "%d/
-00023dc0: 256d 2f25 5922 0a20 2020 2020 2020 2076  %m/%Y".        v
-00023dd0: 616c 7565 203d 2064 6174 6574 696d 652e  alue = datetime.
-00023de0: 7374 7270 7469 6d65 2822 3031 2f30 312f  strptime("01/01/
-00023df0: 3230 3139 222c 2066 6f72 6d61 745f 292e  2019", format_).
-00023e00: 6461 7465 2829 0a20 2020 2020 2020 2073  date().        s
-00023e10: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00023e20: 6368 6563 6b5f 7661 6c75 655f 7479 7065  check_value_type
-00023e30: 2822 3031 2f30 312f 3230 3139 222c 2046  ("01/01/2019", F
-00023e40: 4945 4c44 5f54 5950 455f 4441 5445 292c  IELD_TYPE_DATE),
-00023e50: 2054 7275 6529 0a20 2020 2020 2020 2073   True).        s
-00023e60: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00023e70: 0a20 2020 2020 2020 2020 2020 2074 6162  .            tab
-00023e80: 6c65 5f74 6f5f 6461 7461 6261 7365 2822  le_to_database("
-00023e90: 3031 2f30 312f 3230 3139 222c 2046 4945  01/01/2019", FIE
-00023ea0: 4c44 5f54 5950 455f 4441 5445 292c 2076  LD_TYPE_DATE), v
-00023eb0: 616c 7565 0a20 2020 2020 2020 2029 0a0a  alue.        )..
-00023ec0: 2020 2020 2020 2020 666f 726d 6174 5f20          format_ 
-00023ed0: 3d20 2225 642f 256d 2f25 5920 2548 3a25  = "%d/%m/%Y %H:%
-00023ee0: 4d3a 2553 2e25 6622 0a20 2020 2020 2020  M:%S.%f".       
-00023ef0: 2076 616c 7565 203d 2064 6174 6574 696d   value = datetim
-00023f00: 652e 7374 7270 7469 6d65 2822 3135 2f37  e.strptime("15/7
-00023f10: 2f32 3031 3920 3136 3a31 363a 3535 2e37  /2019 16:16:55.7
-00023f20: 3839 3634 3322 2c20 666f 726d 6174 5f29  89643", format_)
-00023f30: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00023f40: 7365 7274 4571 7561 6c28 0a20 2020 2020  sertEqual(.     
-00023f50: 2020 2020 2020 2063 6865 636b 5f76 616c         check_val
-00023f60: 7565 5f74 7970 6528 2231 352f 372f 3230  ue_type("15/7/20
-00023f70: 3139 2031 363a 3136 3a35 352e 3738 3936  19 16:16:55.7896
-00023f80: 3433 222c 2046 4945 4c44 5f54 5950 455f  43", FIELD_TYPE_
-00023f90: 4441 5445 5449 4d45 292c 0a20 2020 2020  DATETIME),.     
-00023fa0: 2020 2020 2020 2054 7275 652c 0a20 2020         True,.   
-00023fb0: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
-00023fc0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00023fd0: 0a20 2020 2020 2020 2020 2020 2074 6162  .            tab
-00023fe0: 6c65 5f74 6f5f 6461 7461 6261 7365 280a  le_to_database(.
-00023ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024000: 2231 352f 372f 3230 3139 2031 363a 3136  "15/7/2019 16:16
-00024010: 3a35 352e 3738 3936 3433 222c 2046 4945  :55.789643", FIE
-00024020: 4c44 5f54 5950 455f 4441 5445 5449 4d45  LD_TYPE_DATETIME
-00024030: 0a20 2020 2020 2020 2020 2020 2029 2c0a  .            ),.
-00024040: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
-00024050: 652c 0a20 2020 2020 2020 2029 0a0a 2020  e,.        )..  
-00024060: 2020 2020 2020 666f 726d 6174 5f20 3d20        format_ = 
-00024070: 2225 483a 254d 3a25 532e 2566 220a 2020  "%H:%M:%S.%f".  
-00024080: 2020 2020 2020 7661 6c75 6520 3d20 6461        value = da
-00024090: 7465 7469 6d65 2e73 7472 7074 696d 6528  tetime.strptime(
-000240a0: 2231 363a 3136 3a35 352e 3738 3936 3433  "16:16:55.789643
-000240b0: 222c 2066 6f72 6d61 745f 292e 7469 6d65  ", format_).time
-000240c0: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
-000240d0: 6173 7365 7274 4571 7561 6c28 0a20 2020  assertEqual(.   
-000240e0: 2020 2020 2020 2020 2063 6865 636b 5f76           check_v
-000240f0: 616c 7565 5f74 7970 6528 2231 363a 3136  alue_type("16:16
-00024100: 3a35 352e 3738 3936 3433 222c 2046 4945  :55.789643", FIE
-00024110: 4c44 5f54 5950 455f 5449 4d45 292c 2054  LD_TYPE_TIME), T
-00024120: 7275 650a 2020 2020 2020 2020 290a 2020  rue.        ).  
-00024130: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00024140: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
-00024150: 2020 2020 7461 626c 655f 746f 5f64 6174      table_to_dat
-00024160: 6162 6173 6528 2231 363a 3136 3a35 352e  abase("16:16:55.
-00024170: 3738 3936 3433 222c 2046 4945 4c44 5f54  789643", FIELD_T
-00024180: 5950 455f 5449 4d45 292c 2076 616c 7565  YPE_TIME), value
-00024190: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-000241a0: 6465 6620 7465 7374 5f76 6973 7561 6c69  def test_visuali
-000241b0: 7a65 645f 7461 6773 2873 656c 6629 3a0a  zed_tags(self):.
-000241c0: 2020 2020 2020 2020 2222 2254 6573 7473          """Tests
-000241d0: 2074 6865 2070 6f70 7570 206d 6f64 6966   the popup modif
-000241e0: 7969 6e67 2074 6865 2076 6973 7561 6c69  ying the visuali
-000241f0: 7a65 6420 7461 6773 2e22 2222 0a0a 2020  zed tags."""..  
-00024200: 2020 2020 2020 2320 5465 7374 696e 6720        # Testing 
-00024210: 6465 6661 756c 7420 7461 6773 2076 6973  default tags vis
-00024220: 6962 696c 6974 790a 2020 2020 2020 2020  ibility.        
-00024230: 7669 7369 626c 6573 203d 2073 656c 662e  visibles = self.
-00024240: 6d61 696e 5f77 696e 646f 772e 7072 6f6a  main_window.proj
-00024250: 6563 742e 7365 7373 696f 6e2e 6765 745f  ect.session.get_
-00024260: 7368 6f77 6e5f 7461 6773 2829 0a20 2020  shown_tags().   
-00024270: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00024280: 4571 7561 6c28 6c65 6e28 7669 7369 626c  Equal(len(visibl
-00024290: 6573 292c 2034 290a 2020 2020 2020 2020  es), 4).        
-000242a0: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
-000242b0: 5441 475f 4649 4c45 4e41 4d45 2069 6e20  TAG_FILENAME in 
-000242c0: 7669 7369 626c 6573 290a 2020 2020 2020  visibles).      
-000242d0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
-000242e0: 6528 5441 475f 4252 4943 4b53 2069 6e20  e(TAG_BRICKS in 
-000242f0: 7669 7369 626c 6573 290a 2020 2020 2020  visibles).      
-00024300: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
-00024310: 6528 5441 475f 5459 5045 2069 6e20 7669  e(TAG_TYPE in vi
-00024320: 7369 626c 6573 290a 2020 2020 2020 2020  sibles).        
-00024330: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
-00024340: 5441 475f 4558 505f 5459 5045 2069 6e20  TAG_EXP_TYPE in 
-00024350: 7669 7369 626c 6573 290a 0a20 2020 2020  visibles)..     
-00024360: 2020 2023 2054 6573 7469 6e67 2063 6f6c     # Testing col
-00024370: 756d 6e73 2064 6973 706c 6179 6564 2069  umns displayed i
-00024380: 6e20 7468 6520 4461 7461 4272 6f77 7365  n the DataBrowse
-00024390: 720a 2020 2020 2020 2020 7365 6c66 2e61  r.        self.a
-000243a0: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
-000243b0: 2020 2020 2020 2020 342c 2073 656c 662e          4, self.
-000243c0: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
-000243d0: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
-000243e0: 6174 612e 636f 6c75 6d6e 436f 756e 7428  ata.columnCount(
-000243f0: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
-00024400: 2020 2020 636f 6c75 6d6e 735f 6469 7370      columns_disp
-00024410: 6c61 7965 6420 3d20 5b5d 0a0a 2020 2020  layed = []..    
-00024420: 2020 2020 666f 7220 636f 6c75 6d6e 2069      for column i
-00024430: 6e20 7261 6e67 6528 0a20 2020 2020 2020  n range(.       
-00024440: 2020 2020 2030 2c20 7365 6c66 2e6d 6169       0, self.mai
-00024450: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
-00024460: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
-00024470: 2e63 6f6c 756d 6e43 6f75 6e74 2829 0a20  .columnCount(). 
-00024480: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
-00024490: 2020 2020 2020 7461 675f 6469 7370 6c61        tag_displa
-000244a0: 7965 6420 3d20 280a 2020 2020 2020 2020  yed = (.        
-000244b0: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
-000244c0: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
-000244d0: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
-000244e0: 2e68 6f72 697a 6f6e 7461 6c48 6561 6465  .horizontalHeade
-000244f0: 7249 7465 6d0a 2020 2020 2020 2020 2020  rItem.          
-00024500: 2020 2928 636f 6c75 6d6e 292e 7465 7874    )(column).text
-00024510: 2829 0a0a 2020 2020 2020 2020 2020 2020  ()..            
-00024520: 6966 206e 6f74 2073 656c 662e 6d61 696e  if not self.main
-00024530: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
-00024540: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
-00024550: 6973 436f 6c75 6d6e 4869 6464 656e 280a  isColumnHidden(.
-00024560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024570: 636f 6c75 6d6e 0a20 2020 2020 2020 2020  column.         
-00024580: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
-00024590: 2020 2020 2020 636f 6c75 6d6e 735f 6469        columns_di
-000245a0: 7370 6c61 7965 642e 6170 7065 6e64 2874  splayed.append(t
-000245b0: 6167 5f64 6973 706c 6179 6564 290a 0a20  ag_displayed).. 
-000245c0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-000245d0: 7274 4571 7561 6c28 736f 7274 6564 2876  rtEqual(sorted(v
-000245e0: 6973 6962 6c65 7329 2c20 736f 7274 6564  isibles), sorted
-000245f0: 2863 6f6c 756d 6e73 5f64 6973 706c 6179  (columns_display
-00024600: 6564 2929 0a0a 2020 2020 2020 2020 2320  ed))..        # 
-00024610: 5465 7374 696e 6720 7468 6174 2046 696c  Testing that Fil
-00024620: 654e 616d 6520 7461 6720 6973 2074 6865  eName tag is the
-00024630: 2066 6972 7374 2063 6f6c 756d 6e0a 2020   first column.  
-00024640: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00024650: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
-00024660: 2020 2020 5441 475f 4649 4c45 4e41 4d45      TAG_FILENAME
-00024670: 2c0a 2020 2020 2020 2020 2020 2020 7365  ,.            se
-00024680: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
-00024690: 6174 615f 6272 6f77 7365 722e 7461 626c  ata_browser.tabl
-000246a0: 655f 6461 7461 2e68 6f72 697a 6f6e 7461  e_data.horizonta
-000246b0: 6c48 6561 6465 7249 7465 6d28 0a20 2020  lHeaderItem(.   
-000246c0: 2020 2020 2020 2020 2020 2020 2030 0a20               0. 
-000246d0: 2020 2020 2020 2020 2020 2029 2e74 6578             ).tex
-000246e0: 7428 292c 0a20 2020 2020 2020 2029 0a0a  t(),.        )..
-000246f0: 2020 2020 2020 2020 2320 5472 7969 6e67          # Trying
-00024700: 2074 6f20 7365 7420 7468 6520 7669 7369   to set the visi
-00024710: 626c 6573 2074 6167 730a 2020 2020 2020  bles tags.      
-00024720: 2020 5154 6573 742e 6d6f 7573 6543 6c69    QTest.mouseCli
-00024730: 636b 280a 2020 2020 2020 2020 2020 2020  ck(.            
-00024740: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00024750: 2e64 6174 615f 6272 6f77 7365 722e 7669  .data_browser.vi
-00024760: 7375 616c 697a 6564 5f74 6167 735f 6275  sualized_tags_bu
-00024770: 7474 6f6e 2c20 5174 2e4c 6566 7442 7574  tton, Qt.LeftBut
-00024780: 746f 6e0a 2020 2020 2020 2020 290a 2020  ton.        ).  
-00024790: 2020 2020 2020 7365 7474 696e 6773 203d        settings =
-000247a0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-000247b0: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
-000247c0: 6162 6c65 5f64 6174 612e 706f 705f 7570  able_data.pop_up
-000247d0: 0a0a 2020 2020 2020 2020 2320 5465 7374  ..        # Test
-000247e0: 696e 6720 7468 6174 2063 6865 636b 7375  ing that checksu
-000247f0: 6d20 7461 6720 6973 6e27 7420 6469 7370  m tag isn't disp
-00024800: 6c61 7965 640a 2020 2020 2020 2020 7365  layed.        se
-00024810: 7474 696e 6773 2e74 6162 5f74 6167 732e  ttings.tab_tags.
-00024820: 7365 6172 6368 5f62 6172 2e73 6574 5465  search_bar.setTe
-00024830: 7874 2854 4147 5f43 4845 434b 5355 4d29  xt(TAG_CHECKSUM)
-00024840: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00024850: 7365 7274 4571 7561 6c28 7365 7474 696e  sertEqual(settin
-00024860: 6773 2e74 6162 5f74 6167 732e 6c69 7374  gs.tab_tags.list
-00024870: 5f77 6964 6765 745f 7461 6773 2e63 6f75  _widget_tags.cou
-00024880: 6e74 2829 2c20 3029 0a0a 2020 2020 2020  nt(), 0)..      
-00024890: 2020 2320 5465 7374 696e 6720 7468 6174    # Testing that
-000248a0: 2068 6973 746f 7279 2075 7569 6420 7461   history uuid ta
-000248b0: 6720 6973 6e27 7420 6469 7370 6c61 7965  g isn't displaye
-000248c0: 640a 2020 2020 2020 2020 7365 7474 696e  d.        settin
-000248d0: 6773 2e74 6162 5f74 6167 732e 7365 6172  gs.tab_tags.sear
-000248e0: 6368 5f62 6172 2e73 6574 5465 7874 2854  ch_bar.setText(T
-000248f0: 4147 5f48 4953 544f 5259 290a 2020 2020  AG_HISTORY).    
-00024900: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-00024910: 7175 616c 2873 6574 7469 6e67 732e 7461  qual(settings.ta
-00024920: 625f 7461 6773 2e6c 6973 745f 7769 6467  b_tags.list_widg
-00024930: 6574 5f74 6167 732e 636f 756e 7428 292c  et_tags.count(),
-00024940: 2030 290a 0a20 2020 2020 2020 2023 2054   0)..        # T
-00024950: 6573 7469 6e67 2074 6861 7420 4669 6c65  esting that File
-00024960: 4e61 6d65 2069 7320 6e6f 7420 6469 7370  Name is not disp
-00024970: 6c61 7965 6420 696e 2074 6865 206c 6973  layed in the lis
-00024980: 7420 6f66 2076 6973 6962 6c65 2074 6167  t of visible tag
-00024990: 730a 2020 2020 2020 2020 7365 7474 696e  s.        settin
-000249a0: 6773 2e74 6162 5f74 6167 732e 7365 6172  gs.tab_tags.sear
-000249b0: 6368 5f62 6172 2e73 6574 5465 7874 2822  ch_bar.setText("
-000249c0: 2229 0a20 2020 2020 2020 2076 6973 6962  ").        visib
-000249d0: 6c65 5f74 6167 7320 3d20 5b5d 0a0a 2020  le_tags = []..  
-000249e0: 2020 2020 2020 666f 7220 726f 7720 696e        for row in
-000249f0: 2072 616e 6765 280a 2020 2020 2020 2020   range(.        
-00024a00: 2020 2020 302c 2073 6574 7469 6e67 732e      0, settings.
-00024a10: 7461 625f 7461 6773 2e6c 6973 745f 7769  tab_tags.list_wi
-00024a20: 6467 6574 5f73 656c 6563 7465 645f 7461  dget_selected_ta
-00024a30: 6773 2e63 6f75 6e74 2829 0a20 2020 2020  gs.count().     
-00024a40: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
-00024a50: 2020 6974 656d 203d 2073 6574 7469 6e67    item = setting
-00024a60: 732e 7461 625f 7461 6773 2e6c 6973 745f  s.tab_tags.list_
-00024a70: 7769 6467 6574 5f73 656c 6563 7465 645f  widget_selected_
-00024a80: 7461 6773 2e69 7465 6d28 726f 7729 2e74  tags.item(row).t
-00024a90: 6578 7428 290a 2020 2020 2020 2020 2020  ext().          
-00024aa0: 2020 7669 7369 626c 655f 7461 6773 2e61    visible_tags.a
-00024ab0: 7070 656e 6428 6974 656d 290a 0a20 2020  ppend(item)..   
-00024ac0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00024ad0: 4571 7561 6c28 6c65 6e28 7669 7369 626c  Equal(len(visibl
-00024ae0: 655f 7461 6773 292c 2033 290a 2020 2020  e_tags), 3).    
-00024af0: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
-00024b00: 7275 6528 5441 475f 4252 4943 4b53 2069  rue(TAG_BRICKS i
-00024b10: 6e20 7669 7369 626c 655f 7461 6773 290a  n visible_tags).
-00024b20: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00024b30: 6572 7454 7275 6528 5441 475f 4558 505f  ertTrue(TAG_EXP_
-00024b40: 5459 5045 2069 6e20 7669 7369 626c 655f  TYPE in visible_
-00024b50: 7461 6773 290a 2020 2020 2020 2020 7365  tags).        se
-00024b60: 6c66 2e61 7373 6572 7454 7275 6528 5441  lf.assertTrue(TA
-00024b70: 475f 5459 5045 2069 6e20 7669 7369 626c  G_TYPE in visibl
-00024b80: 655f 7461 6773 290a 0a20 2020 2020 2020  e_tags)..       
-00024b90: 2023 2323 2054 6573 7469 6e67 2077 6865   ### Testing whe
-00024ba0: 6e20 6869 6469 6e67 2061 2074 6167 0a20  n hiding a tag. 
-00024bb0: 2020 2020 2020 2023 2042 7269 636b 7320         # Bricks 
-00024bc0: 7461 6720 7365 6c65 6374 6564 0a20 2020  tag selected.   
-00024bd0: 2020 2020 2073 6574 7469 6e67 732e 7461       settings.ta
-00024be0: 625f 7461 6773 2e6c 6973 745f 7769 6467  b_tags.list_widg
-00024bf0: 6574 5f73 656c 6563 7465 645f 7461 6773  et_selected_tags
-00024c00: 2e69 7465 6d28 3229 2e73 6574 5365 6c65  .item(2).setSele
-00024c10: 6374 6564 2854 7275 6529 0a20 2020 2020  cted(True).     
-00024c20: 2020 2051 5465 7374 2e6d 6f75 7365 436c     QTest.mouseCl
-00024c30: 6963 6b28 0a20 2020 2020 2020 2020 2020  ick(.           
-00024c40: 2073 6574 7469 6e67 732e 7461 625f 7461   settings.tab_ta
-00024c50: 6773 2e70 7573 685f 6275 7474 6f6e 5f75  gs.push_button_u
-00024c60: 6e73 656c 6563 745f 7461 672c 2051 742e  nselect_tag, Qt.
-00024c70: 4c65 6674 4275 7474 6f6e 0a20 2020 2020  LeftButton.     
-00024c80: 2020 2029 0a20 2020 2020 2020 2076 6973     ).        vis
-00024c90: 6962 6c65 5f74 6167 7320 3d20 5b5d 0a0a  ible_tags = []..
-00024ca0: 2020 2020 2020 2020 666f 7220 726f 7720          for row 
-00024cb0: 696e 2072 616e 6765 280a 2020 2020 2020  in range(.      
-00024cc0: 2020 2020 2020 302c 2073 6574 7469 6e67        0, setting
-00024cd0: 732e 7461 625f 7461 6773 2e6c 6973 745f  s.tab_tags.list_
-00024ce0: 7769 6467 6574 5f73 656c 6563 7465 645f  widget_selected_
-00024cf0: 7461 6773 2e63 6f75 6e74 2829 0a20 2020  tags.count().   
-00024d00: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
-00024d10: 2020 2020 6974 656d 203d 2073 6574 7469      item = setti
-00024d20: 6e67 732e 7461 625f 7461 6773 2e6c 6973  ngs.tab_tags.lis
-00024d30: 745f 7769 6467 6574 5f73 656c 6563 7465  t_widget_selecte
-00024d40: 645f 7461 6773 2e69 7465 6d28 726f 7729  d_tags.item(row)
-00024d50: 2e74 6578 7428 290a 2020 2020 2020 2020  .text().        
-00024d60: 2020 2020 7669 7369 626c 655f 7461 6773      visible_tags
-00024d70: 2e61 7070 656e 6428 6974 656d 290a 0a20  .append(item).. 
-00024d80: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00024d90: 7274 4571 7561 6c28 6c65 6e28 7669 7369  rtEqual(len(visi
-00024da0: 626c 655f 7461 6773 292c 2032 290a 2020  ble_tags), 2).  
-00024db0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00024dc0: 7454 7275 6528 5441 475f 5459 5045 2069  tTrue(TAG_TYPE i
-00024dd0: 6e20 7669 7369 626c 655f 7461 6773 290a  n visible_tags).
-00024de0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00024df0: 6572 7454 7275 6528 5441 475f 4558 505f  ertTrue(TAG_EXP_
-00024e00: 5459 5045 2069 6e20 7669 7369 626c 655f  TYPE in visible_
-00024e10: 7461 6773 290a 2020 2020 2020 2020 5154  tags).        QT
-00024e20: 6573 742e 6d6f 7573 6543 6c69 636b 2873  est.mouseClick(s
-00024e30: 6574 7469 6e67 732e 7075 7368 5f62 7574  ettings.push_but
-00024e40: 746f 6e5f 6f6b 2c20 5174 2e4c 6566 7442  ton_ok, Qt.LeftB
-00024e50: 7574 746f 6e29 0a0a 2020 2020 2020 2020  utton)..        
-00024e60: 6e65 775f 7669 7369 626c 6573 203d 2073  new_visibles = s
-00024e70: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00024e80: 7072 6f6a 6563 742e 7365 7373 696f 6e2e  project.session.
-00024e90: 6765 745f 7368 6f77 6e5f 7461 6773 2829  get_shown_tags()
-00024ea0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00024eb0: 7365 7274 4571 7561 6c28 6c65 6e28 6e65  sertEqual(len(ne
-00024ec0: 775f 7669 7369 626c 6573 292c 2033 290a  w_visibles), 3).
-00024ed0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00024ee0: 6572 7454 7275 6528 5441 475f 4649 4c45  ertTrue(TAG_FILE
-00024ef0: 4e41 4d45 2069 6e20 6e65 775f 7669 7369  NAME in new_visi
-00024f00: 626c 6573 290a 2020 2020 2020 2020 7365  bles).        se
-00024f10: 6c66 2e61 7373 6572 7454 7275 6528 5441  lf.assertTrue(TA
-00024f20: 475f 4558 505f 5459 5045 2069 6e20 6e65  G_EXP_TYPE in ne
-00024f30: 775f 7669 7369 626c 6573 290a 2020 2020  w_visibles).    
-00024f40: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
-00024f50: 7275 6528 5441 475f 5459 5045 2069 6e20  rue(TAG_TYPE in 
-00024f60: 6e65 775f 7669 7369 626c 6573 290a 0a20  new_visibles).. 
-00024f70: 2020 2020 2020 2063 6f6c 756d 6e73 5f64         columns_d
-00024f80: 6973 706c 6179 6564 203d 205b 5d0a 0a20  isplayed = [].. 
-00024f90: 2020 2020 2020 2066 6f72 2063 6f6c 756d         for colum
-00024fa0: 6e20 696e 2072 616e 6765 280a 2020 2020  n in range(.    
-00024fb0: 2020 2020 2020 2020 302c 2073 656c 662e          0, self.
-00024fc0: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
-00024fd0: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
-00024fe0: 6174 612e 636f 6c75 6d6e 436f 756e 7428  ata.columnCount(
-00024ff0: 290a 2020 2020 2020 2020 293a 0a20 2020  ).        ):.   
-00025000: 2020 2020 2020 2020 2069 7465 6d20 3d20           item = 
-00025010: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00025020: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
-00025030: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
-00025040: 7461 626c 655f 6461 7461 2e68 6f72 697a  table_data.horiz
-00025050: 6f6e 7461 6c48 6561 6465 7249 7465 6d0a  ontalHeaderItem.
-00025060: 2020 2020 2020 2020 2020 2020 2928 636f              )(co
-00025070: 6c75 6d6e 290a 0a20 2020 2020 2020 2020  lumn)..         
-00025080: 2020 2069 6620 6e6f 7420 7365 6c66 2e6d     if not self.m
-00025090: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
-000250a0: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
-000250b0: 7461 2e69 7343 6f6c 756d 6e48 6964 6465  ta.isColumnHidde
-000250c0: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
-000250d0: 2020 2063 6f6c 756d 6e0a 2020 2020 2020     column.      
-000250e0: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
-000250f0: 2020 2020 2020 2020 2063 6f6c 756d 6e73           columns
-00025100: 5f64 6973 706c 6179 6564 2e61 7070 656e  _displayed.appen
-00025110: 6428 6974 656d 2e74 6578 7428 2929 0a0a  d(item.text())..
-00025120: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00025130: 6572 7445 7175 616c 286c 656e 2863 6f6c  ertEqual(len(col
-00025140: 756d 6e73 5f64 6973 706c 6179 6564 292c  umns_displayed),
-00025150: 2033 290a 2020 2020 2020 2020 7365 6c66   3).        self
-00025160: 2e61 7373 6572 7454 7275 6528 5441 475f  .assertTrue(TAG_
-00025170: 4649 4c45 4e41 4d45 2069 6e20 636f 6c75  FILENAME in colu
-00025180: 6d6e 735f 6469 7370 6c61 7965 6429 0a20  mns_displayed). 
-00025190: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-000251a0: 7274 5472 7565 2854 4147 5f45 5850 5f54  rtTrue(TAG_EXP_T
-000251b0: 5950 4520 696e 2063 6f6c 756d 6e73 5f64  YPE in columns_d
-000251c0: 6973 706c 6179 6564 290a 2020 2020 2020  isplayed).      
-000251d0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
-000251e0: 6528 5441 475f 5459 5045 2069 6e20 636f  e(TAG_TYPE in co
-000251f0: 6c75 6d6e 735f 6469 7370 6c61 7965 6429  lumns_displayed)
-00025200: 0a0a 2020 2020 2020 2020 2320 5465 7374  ..        # Test
-00025210: 696e 6720 7768 656e 2073 686f 7769 6e67  ing when showing
-00025220: 2061 206e 6577 2074 6167 0a20 2020 2020   a new tag.     
-00025230: 2020 2051 5465 7374 2e6d 6f75 7365 436c     QTest.mouseCl
-00025240: 6963 6b28 0a20 2020 2020 2020 2020 2020  ick(.           
-00025250: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-00025260: 772e 6461 7461 5f62 726f 7773 6572 2e76  w.data_browser.v
-00025270: 6973 7561 6c69 7a65 645f 7461 6773 5f62  isualized_tags_b
-00025280: 7574 746f 6e2c 2051 742e 4c65 6674 4275  utton, Qt.LeftBu
-00025290: 7474 6f6e 0a20 2020 2020 2020 2029 0a20  tton.        ). 
-000252a0: 2020 2020 2020 2073 6574 7469 6e67 7320         settings 
-000252b0: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
-000252c0: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
-000252d0: 7461 626c 655f 6461 7461 2e70 6f70 5f75  table_data.pop_u
-000252e0: 700a 2020 2020 2020 2020 7365 7474 696e  p.        settin
-000252f0: 6773 2e74 6162 5f74 6167 732e 7365 6172  gs.tab_tags.sear
-00025300: 6368 5f62 6172 2e73 6574 5465 7874 2854  ch_bar.setText(T
-00025310: 4147 5f42 5249 434b 5329 0a20 2020 2020  AG_BRICKS).     
-00025320: 2020 2073 6574 7469 6e67 732e 7461 625f     settings.tab_
-00025330: 7461 6773 2e6c 6973 745f 7769 6467 6574  tags.list_widget
-00025340: 5f74 6167 732e 6974 656d 2830 292e 7365  _tags.item(0).se
-00025350: 7453 656c 6563 7465 6428 5472 7565 290a  tSelected(True).
-00025360: 2020 2020 2020 2020 5154 6573 742e 6d6f          QTest.mo
-00025370: 7573 6543 6c69 636b 280a 2020 2020 2020  useClick(.      
-00025380: 2020 2020 2020 7365 7474 696e 6773 2e74        settings.t
-00025390: 6162 5f74 6167 732e 7075 7368 5f62 7574  ab_tags.push_but
-000253a0: 746f 6e5f 7365 6c65 6374 5f74 6167 2c20  ton_select_tag, 
-000253b0: 5174 2e4c 6566 7442 7574 746f 6e0a 2020  Qt.LeftButton.  
-000253c0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-000253d0: 5154 6573 742e 6d6f 7573 6543 6c69 636b  QTest.mouseClick
-000253e0: 2873 6574 7469 6e67 732e 7075 7368 5f62  (settings.push_b
-000253f0: 7574 746f 6e5f 6f6b 2c20 5174 2e4c 6566  utton_ok, Qt.Lef
-00025400: 7442 7574 746f 6e29 0a0a 2020 2020 2020  tButton)..      
-00025410: 2020 6e65 775f 7669 7369 626c 6573 203d    new_visibles =
-00025420: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-00025430: 772e 7072 6f6a 6563 742e 7365 7373 696f  w.project.sessio
-00025440: 6e2e 6765 745f 7368 6f77 6e5f 7461 6773  n.get_shown_tags
-00025450: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
-00025460: 6173 7365 7274 4571 7561 6c28 6c65 6e28  assertEqual(len(
-00025470: 6e65 775f 7669 7369 626c 6573 292c 2034  new_visibles), 4
-00025480: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-00025490: 7373 6572 7454 7275 6528 5441 475f 4649  ssertTrue(TAG_FI
-000254a0: 4c45 4e41 4d45 2069 6e20 6e65 775f 7669  LENAME in new_vi
-000254b0: 7369 626c 6573 290a 2020 2020 2020 2020  sibles).        
-000254c0: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
-000254d0: 5441 475f 4558 505f 5459 5045 2069 6e20  TAG_EXP_TYPE in 
-000254e0: 6e65 775f 7669 7369 626c 6573 290a 2020  new_visibles).  
-000254f0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00025500: 7454 7275 6528 5441 475f 5459 5045 2069  tTrue(TAG_TYPE i
-00025510: 6e20 6e65 775f 7669 7369 626c 6573 290a  n new_visibles).
-00025520: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00025530: 6572 7454 7275 6528 5441 475f 4252 4943  ertTrue(TAG_BRIC
-00025540: 4b53 2069 6e20 6e65 775f 7669 7369 626c  KS in new_visibl
-00025550: 6573 290a 0a20 2020 2020 2020 2063 6f6c  es)..        col
-00025560: 756d 6e73 5f64 6973 706c 6179 6564 203d  umns_displayed =
-00025570: 205b 5d0a 0a20 2020 2020 2020 2066 6f72   []..        for
-00025580: 2063 6f6c 756d 6e20 696e 2072 616e 6765   column in range
-00025590: 280a 2020 2020 2020 2020 2020 2020 302c  (.            0,
-000255a0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-000255b0: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
-000255c0: 6162 6c65 5f64 6174 612e 636f 6c75 6d6e  able_data.column
-000255d0: 436f 756e 7428 290a 2020 2020 2020 2020  Count().        
-000255e0: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
-000255f0: 7465 6d20 3d20 280a 2020 2020 2020 2020  tem = (.        
-00025600: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
-00025610: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
-00025620: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
-00025630: 2e68 6f72 697a 6f6e 7461 6c48 6561 6465  .horizontalHeade
-00025640: 7249 7465 6d0a 2020 2020 2020 2020 2020  rItem.          
-00025650: 2020 2928 636f 6c75 6d6e 290a 0a20 2020    )(column)..   
-00025660: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-00025670: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00025680: 2e64 6174 615f 6272 6f77 7365 722e 7461  .data_browser.ta
-00025690: 626c 655f 6461 7461 2e69 7343 6f6c 756d  ble_data.isColum
-000256a0: 6e48 6964 6465 6e28 0a20 2020 2020 2020  nHidden(.       
-000256b0: 2020 2020 2020 2020 2063 6f6c 756d 6e0a           column.
-000256c0: 2020 2020 2020 2020 2020 2020 293a 0a20              ):. 
-000256d0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-000256e0: 6f6c 756d 6e73 5f64 6973 706c 6179 6564  olumns_displayed
-000256f0: 2e61 7070 656e 6428 6974 656d 2e74 6578  .append(item.tex
-00025700: 7428 2929 0a0a 2020 2020 2020 2020 7365  t())..        se
-00025710: 6c66 2e61 7373 6572 7445 7175 616c 286c  lf.assertEqual(l
-00025720: 656e 2863 6f6c 756d 6e73 5f64 6973 706c  en(columns_displ
-00025730: 6179 6564 292c 2034 290a 2020 2020 2020  ayed), 4).      
-00025740: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
-00025750: 6528 5441 475f 4649 4c45 4e41 4d45 2069  e(TAG_FILENAME i
-00025760: 6e20 636f 6c75 6d6e 735f 6469 7370 6c61  n columns_displa
-00025770: 7965 6429 0a20 2020 2020 2020 2073 656c  yed).        sel
-00025780: 662e 6173 7365 7274 5472 7565 2854 4147  f.assertTrue(TAG
-00025790: 5f45 5850 5f54 5950 4520 696e 2063 6f6c  _EXP_TYPE in col
-000257a0: 756d 6e73 5f64 6973 706c 6179 6564 290a  umns_displayed).
-000257b0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-000257c0: 6572 7454 7275 6528 5441 475f 5459 5045  ertTrue(TAG_TYPE
-000257d0: 2069 6e20 636f 6c75 6d6e 735f 6469 7370   in columns_disp
-000257e0: 6c61 7965 6429 0a20 2020 2020 2020 2073  layed).        s
-000257f0: 656c 662e 6173 7365 7274 5472 7565 2854  elf.assertTrue(T
-00025800: 4147 5f42 5249 434b 5320 696e 2063 6f6c  AG_BRICKS in col
-00025810: 756d 6e73 5f64 6973 706c 6179 6564 290a  umns_displayed).
-00025820: 0a0a 636c 6173 7320 5465 7374 4d49 414d  ..class TestMIAM
-00025830: 6169 6e57 696e 646f 7728 5465 7374 4d49  ainWindow(TestMI
-00025840: 4143 6173 6529 3a0a 2020 2020 2222 2254  ACase):.    """T
-00025850: 6573 7473 2066 6f72 2074 6865 206d 6169  ests for the mai
-00025860: 6e20 7769 6e64 6f77 2063 6c61 7373 2028  n window class (
-00025870: 4d61 696e 5769 6e64 6f77 292e 0a0a 2020  MainWindow)...  
-00025880: 2020 3a43 6f6e 7461 696e 733a 0a20 2020    :Contains:.   
-00025890: 2020 2020 203a 4d65 7468 6f64 3a0a 2020       :Method:.  
-000258a0: 2020 2020 2020 2020 2020 2d20 7465 7374            - test
-000258b0: 5f63 6865 636b 5f64 6174 6162 6173 653a  _check_database:
-000258c0: 2063 6865 636b 7320 6966 2074 6865 2064   checks if the d
-000258d0: 6174 6162 6173 6520 6861 7320 6368 616e  atabase has chan
-000258e0: 6765 640a 2020 2020 2020 2020 2020 2020  ged.            
-000258f0: 2020 7369 6e63 6520 7468 6520 7363 616e    since the scan
-00025900: 7320 7765 7265 2066 6972 7374 2069 6d70  s were first imp
-00025910: 6f72 7465 640a 2020 2020 2020 2020 2020  orted.          
-00025920: 2020 2d20 7465 7374 5f63 6c6f 7365 4576    - test_closeEv
-00025930: 656e 743a 206f 7065 6e73 2061 2070 726f  ent: opens a pro
-00025940: 6a65 6374 2061 6e64 2063 6c6f 7365 7320  ject and closes 
-00025950: 7468 6520 6d61 696e 2077 696e 646f 770a  the main window.
-00025960: 2020 2020 2020 2020 2020 2020 2d20 7465              - te
-00025970: 7374 5f63 7265 6174 655f 7072 6f6a 6563  st_create_projec
-00025980: 745f 706f 705f 7570 3a20 7472 6965 7320  t_pop_up: tries 
-00025990: 746f 2063 7265 6174 6520 6120 6e65 7720  to create a new 
-000259a0: 7072 6f6a 6563 740a 2020 2020 2020 2020  project.        
-000259b0: 2020 2020 2020 7769 7468 2061 2070 726f        with a pro
-000259c0: 6a65 6374 2061 6c72 6561 6479 206f 7065  ject already ope
-000259d0: 6e2e 0a20 2020 2020 2020 2020 2020 202d  n..            -
-000259e0: 2074 6573 745f 6669 6c65 735f 696e 5f70   test_files_in_p
-000259f0: 726f 6a65 6374 3a20 7465 7374 7320 7768  roject: tests wh
-00025a00: 6574 6865 7220 6f72 206e 6f74 2061 2067  ether or not a g
-00025a10: 6976 656e 2066 696c 650a 2020 2020 2020  iven file.      
-00025a20: 2020 2020 2020 2020 6973 2070 6172 7420          is part 
-00025a30: 6f66 2074 6865 2070 726f 6a65 6374 2e0a  of the project..
-00025a40: 2020 2020 2020 2020 2020 2020 2d20 7465              - te
-00025a50: 7374 5f69 6d70 6f72 745f 6461 7461 3a20  st_import_data: 
-00025a60: 6f70 656e 7320 6120 7072 6f6a 6563 7420  opens a project 
-00025a70: 616e 6420 7369 6d75 6c61 7465 7320 696d  and simulates im
-00025a80: 706f 7274 696e 670a 2020 2020 2020 2020  porting.        
-00025a90: 2020 2020 2020 6120 6669 6c65 2066 726f        a file fro
-00025aa0: 6d20 7468 6520 4d72 6943 6f6e 7620 6a61  m the MriConv ja
-00025ab0: 7661 2065 7865 6375 7461 626c 650a 2020  va executable.  
-00025ac0: 2020 2020 2020 2020 2020 2d20 7465 7374            - test
-00025ad0: 5f6f 7065 6e5f 7072 6f6a 6563 745f 706f  _open_project_po
-00025ae0: 705f 7570 3a20 6372 6561 7465 7320 6120  p_up: creates a 
-00025af0: 7465 7374 2070 726f 6a65 6374 2061 6e64  test project and
-00025b00: 206f 7065 6e73 0a20 2020 2020 2020 2020   opens.         
-00025b10: 2020 2020 2061 2070 726f 6a65 6374 2c20       a project, 
-00025b20: 696e 636c 7564 696e 6720 756e 7361 7665  including unsave
-00025b30: 6420 6d6f 6469 6669 6361 7469 6f6e 732e  d modifications.
-00025b40: 0a20 2020 2020 2020 2020 2020 202d 2074  .            - t
-00025b50: 6573 745f 6f70 656e 5f72 6563 656e 745f  est_open_recent_
-00025b60: 7072 6f6a 6563 743a 2063 7265 6174 6573  project: creates
-00025b70: 2032 2074 6573 7420 7072 6f6a 6563 7473   2 test projects
-00025b80: 2061 6e64 0a20 2020 2020 2020 2020 2020   and.           
-00025b90: 2020 206f 7065 6e73 206f 6e65 2062 7920     opens one by 
-00025ba0: 7468 6520 7265 6365 6e74 2070 726f 6a65  the recent proje
-00025bb0: 6374 7320 6163 7469 6f6e 2e0a 2020 2020  cts action..    
-00025bc0: 2020 2020 2020 2020 2d20 7465 7374 5f6f          - test_o
-00025bd0: 7065 6e5f 7368 656c 6c3a 206f 7065 6e73  pen_shell: opens
-00025be0: 2051 7420 636f 6e73 6f6c 6520 616e 6420   Qt console and 
-00025bf0: 6b69 6c6c 2069 7420 6166 7465 7277 6172  kill it afterwar
-00025c00: 6473 2e0a 2020 2020 2020 2020 2020 2020  ds..            
-00025c10: 2d20 7465 7374 5f70 6163 6b61 6765 5f6c  - test_package_l
-00025c20: 6962 7261 7279 5f64 6961 6c6f 675f 6164  ibrary_dialog_ad
-00025c30: 645f 706b 673a 2063 7265 6174 6573 2061  d_pkg: creates a
-00025c40: 206e 6577 2070 726f 6a65 6374 0a20 2020   new project.   
-00025c50: 2020 2020 2020 2020 2020 2066 6f6c 6465             folde
-00025c60: 722c 206f 7065 6e73 2074 6865 2070 726f  r, opens the pro
-00025c70: 6365 7373 6573 206c 6962 7261 7279 2061  cesses library a
-00025c80: 6e64 2061 6464 7320 6120 7061 636b 6167  nd adds a packag
-00025c90: 652e 0a20 2020 2020 2020 2020 2020 202d  e..            -
-00025ca0: 2074 6573 745f 7061 636b 6167 655f 6c69   test_package_li
-00025cb0: 6272 6172 795f 6469 616c 6f67 5f64 656c  brary_dialog_del
-00025cc0: 5f70 6b67 3a20 6372 6561 7465 7320 6120  _pkg: creates a 
-00025cd0: 6e65 7720 7072 6f6a 6563 740a 2020 2020  new project.    
-00025ce0: 2020 2020 2020 2020 2020 666f 6c64 6572            folder
-00025cf0: 2c20 6f70 656e 7320 7468 6520 7072 6f63  , opens the proc
-00025d00: 6573 7365 7320 6c69 6272 6172 7920 616e  esses library an
-00025d10: 6420 6465 6c65 7465 7320 6120 7061 636b  d deletes a pack
-00025d20: 6167 652e 0a20 2020 2020 2020 2020 2020  age..           
-00025d30: 202d 2074 6573 745f 7061 636b 6167 655f   - test_package_
-00025d40: 6c69 6272 6172 795f 6469 616c 6f67 5f72  library_dialog_r
-00025d50: 6d76 5f70 6b67 3a20 6372 6561 7465 7320  mv_pkg: creates 
-00025d60: 6120 6e65 7720 7072 6f6a 6563 740a 2020  a new project.  
-00025d70: 2020 2020 2020 2020 2020 2020 666f 6c64              fold
-00025d80: 6572 2c20 6f70 656e 7320 7468 6520 7072  er, opens the pr
-00025d90: 6f63 6573 7365 7320 6c69 6272 6172 7920  ocesses library 
-00025da0: 616e 6420 7265 6d6f 7665 7320 6120 7061  and removes a pa
-00025db0: 636b 6167 652e 0a20 2020 2020 2020 2020  ckage..         
-00025dc0: 2020 202d 2074 6573 745f 7061 636b 6167     - test_packag
-00025dd0: 655f 6c69 6272 6172 795f 6f74 6865 7273  e_library_others
-00025de0: 3a20 4372 6561 7465 7320 6120 6e65 7720  : Creates a new 
-00025df0: 7072 6f6a 6563 7420 666f 6c64 6572 2c20  project folder, 
-00025e00: 6f70 656e 730a 2020 2020 2020 2020 2020  opens.          
-00025e10: 2020 2020 7468 6520 7072 6f63 6573 7365      the processe
-00025e20: 7320 6c69 6272 6172 7920 616e 6420 6164  s library and ad
-00025e30: 6473 2061 2070 6163 6b61 6765 2e0a 2020  ds a package..  
-00025e40: 2020 2020 2020 2020 2020 2d20 7465 7374            - test
-00025e50: 5f70 6f70 5570 4465 6c65 7465 6450 726f  _popUpDeletedPro
-00025e60: 6a65 6374 3a20 6164 6473 2061 2064 656c  ject: adds a del
-00025e70: 6574 6564 2070 726f 6a65 6374 7320 746f  eted projects to
-00025e80: 2074 6865 0a20 2020 2020 2020 2020 2020   the.           
-00025e90: 2020 2070 726f 6a65 6374 7320 6c69 7374     projects list
-00025ea0: 2061 6e64 206c 6175 6e63 6865 7320 6d69   and launches mi
-00025eb0: 612e 0a20 2020 2020 2020 2020 2020 202d  a..            -
-00025ec0: 2074 6573 745f 706f 7055 7044 656c 6574   test_popUpDelet
-00025ed0: 6550 726f 6a65 6374 3a20 6372 6561 7465  eProject: create
-00025ee0: 7320 6120 6e65 7720 7072 6f6a 6563 7420  s a new project 
-00025ef0: 616e 6420 6465 6c65 7465 730a 2020 2020  and deletes.    
-00025f00: 2020 2020 2020 2020 2020 6974 2e0a 2020            it..  
-00025f10: 2020 2020 2020 2020 2020 2d20 7465 7374            - test
-00025f20: 5f73 6565 5f61 6c6c 5f70 726f 6a65 6374  _see_all_project
-00025f30: 733a 2063 7265 6174 6573 2032 2070 726f  s: creates 2 pro
-00025f40: 6a65 6374 7320 616e 6420 7472 6965 7320  jects and tries 
-00025f50: 746f 0a20 2020 2020 2020 2020 2020 2020  to.             
-00025f60: 206f 7065 6e20 7468 656d 2074 6872 6f75   open them throu
-00025f70: 6768 2074 6865 2061 6c6c 2070 726f 6a65  gh the all proje
-00025f80: 6374 7320 706f 702d 7570 2e0a 2020 2020  cts pop-up..    
-00025f90: 2020 2020 2020 2020 2d20 7465 7374 5f73          - test_s
-00025fa0: 6f66 7477 6172 655f 7072 6566 6572 656e  oftware_preferen
-00025fb0: 6365 735f 706f 705f 7570 3a20 6f70 656e  ces_pop_up: open
-00025fc0: 7320 7468 6520 7072 6566 6572 656e 6365  s the preference
-00025fd0: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
-00025fe0: 706f 7020 7570 2061 6e64 2063 6861 6e67  pop up and chang
-00025ff0: 6573 2070 6172 616d 6574 6572 732e 0a20  es parameters.. 
-00026000: 2020 2020 2020 2020 2020 202d 2074 6573             - tes
-00026010: 745f 736f 6674 7761 7265 5f70 7265 6665  t_software_prefe
-00026020: 7265 6e63 6573 5f70 6f70 5f75 705f 636f  rences_pop_up_co
-00026030: 6e66 6967 5f66 696c 653a 206f 7065 6e73  nfig_file: opens
-00026040: 2074 6865 0a20 2020 2020 2020 2020 2020   the.           
-00026050: 2020 2070 7265 6665 7265 6e63 6573 2070     preferences p
-00026060: 6f70 2075 7020 616e 6420 6368 616e 6765  op up and change
-00026070: 7320 7061 7261 6d65 7465 7273 2e0a 2020  s parameters..  
-00026080: 2020 2020 2020 2020 2020 2d20 7465 7374            - test
-00026090: 5f73 6f66 7477 6172 655f 7072 6566 6572  _software_prefer
-000260a0: 656e 6365 735f 706f 705f 7570 5f6d 6f64  ences_pop_up_mod
-000260b0: 756c 6573 5f63 6f6e 6669 673a 2063 6861  ules_config: cha
-000260c0: 6e67 6573 0a20 2020 2020 2020 2020 2020  nges.           
-000260d0: 2020 2074 6865 2063 6f6e 6669 6775 7261     the configura
-000260e0: 7469 6f6e 206f 6620 4146 4e49 2c20 414e  tion of AFNI, AN
-000260f0: 5453 2c20 4653 4c2c 2053 504d 2061 6e64  TS, FSL, SPM and
-00026100: 204d 4154 4c41 422e 0a20 2020 2020 2020   MATLAB..       
-00026110: 2020 2020 202d 2074 6573 745f 736f 6674       - test_soft
-00026120: 7761 7265 5f70 7265 6665 7265 6e63 6573  ware_preferences
-00026130: 5f70 6f70 5f75 705f 7661 6c69 6461 7465  _pop_up_validate
-00026140: 3a20 6f70 656e 7320 7468 650a 2020 2020  : opens the.    
-00026150: 2020 2020 2020 2020 2020 7072 6566 6572            prefer
-00026160: 656e 6365 7320 706f 7020 7570 2066 6f72  ences pop up for
-00026170: 2041 464e 492c 2041 4e54 532c 2046 534c   AFNI, ANTS, FSL
-00026180: 2c20 5350 4d20 616e 6420 4d41 544c 4142  , SPM and MATLAB
-00026190: 2e0a 2020 2020 2020 2020 2020 2020 2d20  ..            - 
-000261a0: 7465 7374 5f73 7769 7463 685f 7072 6f6a  test_switch_proj
-000261b0: 6563 743a 2063 7265 6174 6520 7072 6f6a  ect: create proj
-000261c0: 6563 7420 616e 6420 7377 6974 6368 6573  ect and switches
-000261d0: 2074 6f20 6974 2e0a 2020 2020 2020 2020   to it..        
-000261e0: 2020 2020 2d20 7465 7374 5f74 6162 5f63      - test_tab_c
-000261f0: 6861 6e67 6564 3a20 7377 6974 6368 6573  hanged: switches
-00026200: 2062 6574 7765 656e 2064 6174 6120 6272   between data br
-00026210: 6f77 7365 722c 2064 6174 610a 2020 2020  owser, data.    
-00026220: 2020 2020 2020 2020 2020 7669 6577 6572            viewer
-00026230: 2061 6e64 2070 6970 656c 696e 6520 6d61   and pipeline ma
-00026240: 6e61 6765 722e 0a20 2020 2022 2222 0a0a  nager..    """..
-00026250: 2020 2020 6465 6620 7465 7374 5f63 6865      def test_che
-00026260: 636b 5f64 6174 6162 6173 6528 7365 6c66  ck_database(self
-00026270: 293a 0a20 2020 2020 2020 2022 2222 4368  ):.        """Ch
-00026280: 6563 6b73 2069 6620 7468 6520 6461 7461  ecks if the data
-00026290: 6261 7365 2068 6173 2063 6861 6e67 6564  base has changed
-000262a0: 2073 696e 6365 2074 6865 2073 6361 6e73   since the scans
-000262b0: 2077 6572 6520 6669 7273 740a 2020 2020   were first.    
-000262c0: 2020 2020 696d 706f 7274 6564 2e0a 0a20      imported... 
-000262d0: 2020 2020 2020 202d 2054 6573 7473 3a20         - Tests: 
-000262e0: 4d61 696e 5769 6e64 6f77 2e74 6573 745f  MainWindow.test_
-000262f0: 6368 6563 6b5f 6461 7461 6261 7365 0a0a  check_database..
-00026300: 2020 2020 2020 2020 2d20 4d6f 636b 7320          - Mocks 
-00026310: 514d 6573 7361 6765 426f 782e 6578 6563  QMessageBox.exec
-00026320: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
-00026330: 2020 2020 2020 2320 4372 6561 7465 7320        # Creates 
-00026340: 6120 6e65 7720 7072 6f6a 6563 7420 616e  a new project an
-00026350: 6420 7377 6974 6368 6573 2074 6f20 6974  d switches to it
-00026360: 0a20 2020 2020 2020 2074 6573 745f 7072  .        test_pr
-00026370: 6f6a 5f70 6174 6820 3d20 7365 6c66 2e67  oj_path = self.g
-00026380: 6574 5f6e 6577 5f74 6573 745f 7072 6f6a  et_new_test_proj
-00026390: 6563 7428 290a 2020 2020 2020 2020 7365  ect().        se
-000263a0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e73  lf.main_window.s
-000263b0: 7769 7463 685f 7072 6f6a 6563 7428 7465  witch_project(te
-000263c0: 7374 5f70 726f 6a5f 7061 7468 2c20 2274  st_proj_path, "t
-000263d0: 6573 745f 7072 6f6a 6563 7422 290a 0a20  est_project").. 
-000263e0: 2020 2020 2020 2023 2053 6574 7320 7368         # Sets sh
-000263f0: 6f72 7463 7574 7320 666f 7220 6f62 6a65  ortcuts for obje
-00026400: 6374 7320 7468 6174 2061 7265 206f 6674  cts that are oft
-00026410: 656e 2075 7365 640a 2020 2020 2020 2020  en used.        
-00026420: 7070 6c5f 6d61 6e61 6765 7220 3d20 7365  ppl_manager = se
-00026430: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
-00026440: 6970 656c 696e 655f 6d61 6e61 6765 720a  ipeline_manager.
-00026450: 0a20 2020 2020 2020 2023 204d 6f63 6b73  .        # Mocks
-00026460: 2074 6865 2065 7865 6375 7469 6f6e 206f   the execution o
-00026470: 6620 6120 6469 616c 6f67 2062 6f78 2062  f a dialog box b
-00026480: 7920 6163 6365 7074 696e 6720 6974 0a20  y accepting it. 
-00026490: 2020 2020 2020 2051 4d65 7373 6167 6542         QMessageB
-000264a0: 6f78 2e65 7865 6320 3d20 6c61 6d62 6461  ox.exec = lambda
-000264b0: 2073 656c 665f 2c20 2a61 7267 3a20 7365   self_, *arg: se
-000264c0: 6c66 5f2e 6163 6365 7074 2829 0a0a 2020  lf_.accept()..  
-000264d0: 2020 2020 2020 2320 4765 7473 2074 6865        # Gets the
-000264e0: 2066 696c 6520 7061 7468 0a20 2020 2020   file path.     
-000264f0: 2020 2070 706c 5f6d 616e 6167 6572 2e70     ppl_manager.p
-00026500: 726f 6a65 6374 2e66 6f6c 6465 7220 3d20  roject.folder = 
-00026510: 7465 7374 5f70 726f 6a5f 7061 7468 0a20  test_proj_path. 
-00026520: 2020 2020 2020 2066 6f6c 6465 7220 3d20         folder = 
-00026530: 6f73 2e70 6174 682e 6a6f 696e 2874 6573  os.path.join(tes
-00026540: 745f 7072 6f6a 5f70 6174 682c 2022 6461  t_proj_path, "da
-00026550: 7461 222c 2022 7261 775f 6461 7461 2229  ta", "raw_data")
-00026560: 0a20 2020 2020 2020 204e 4949 5f46 494c  .        NII_FIL
-00026570: 455f 3120 3d20 280a 2020 2020 2020 2020  E_1 = (.        
-00026580: 2020 2020 2247 7565 7262 6574 2d43 362d      "Guerbet-C6-
-00026590: 3230 3134 2d52 6174 2d4b 3532 2d54 7562  2014-Rat-K52-Tub
-000265a0: 6532 372d 3230 3134 2d30 322d 3134 3130  e27-2014-02-1410
-000265b0: 3233 3137 2d30 342d 4733 5f22 0a20 2020  2317-04-G3_".   
-000265c0: 2020 2020 2020 2020 2022 4775 6572 6265           "Guerbe
-000265d0: 745f 4d44 4546 542d 4d44 4546 5470 766d  t_MDEFT-MDEFTpvm
-000265e0: 2d30 3030 3934 305f 3830 302e 6e69 6922  -000940_800.nii"
-000265f0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00026600: 2020 2044 4f43 554d 454e 545f 3120 3d20     DOCUMENT_1 = 
-00026610: 6f73 2e70 6174 682e 6162 7370 6174 6828  os.path.abspath(
-00026620: 6f73 2e70 6174 682e 6a6f 696e 2866 6f6c  os.path.join(fol
-00026630: 6465 722c 204e 4949 5f46 494c 455f 3129  der, NII_FILE_1)
-00026640: 290a 0a20 2020 2020 2020 2023 2052 656d  )..        # Rem
-00026650: 6f76 6573 206f 6e65 2064 6f63 756d 656e  oves one documen
-00026660: 7420 6672 6f6d 2074 6865 2064 6174 6162  t from the datab
-00026670: 6173 650a 2020 2020 2020 2020 6f73 2e72  ase.        os.r
-00026680: 656d 6f76 6528 444f 4355 4d45 4e54 5f31  emove(DOCUMENT_1
-00026690: 290a 0a20 2020 2020 2020 2023 2043 6865  )..        # Che
-000266a0: 636b 2069 6620 7468 6520 6669 6c65 7320  ck if the files 
-000266b0: 6f66 2074 6865 2064 6174 6162 6173 6520  of the database 
-000266c0: 6861 7665 2062 6565 6e20 6d6f 6469 6669  have been modifi
-000266d0: 6564 0a20 2020 2020 2020 2023 2053 696e  ed.        # Sin
-000266e0: 6365 2051 4d65 7373 6167 6542 6f78 2e65  ce QMessageBox.e
-000266f0: 7865 6320 6973 206d 6f63 6b65 642c 2074  xec is mocked, t
-00026700: 6865 2051 4d65 7373 6167 6542 6f78 2773  he QMessageBox's
-00026710: 2074 6578 7420 6973 206e 6f74 0a20 2020   text is not.   
-00026720: 2020 2020 2023 206f 6273 6572 7665 640a       # observed.
-00026730: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
-00026740: 6e5f 7769 6e64 6f77 2e61 6374 696f 6e5f  n_window.action_
-00026750: 6368 6563 6b5f 6461 7461 6261 7365 2e74  check_database.t
-00026760: 7269 6767 6572 6564 2e65 6d69 7428 290a  riggered.emit().
-00026770: 0a20 2020 2064 6566 2074 6573 745f 636c  .    def test_cl
-00026780: 6f73 6545 7665 6e74 2873 656c 6629 3a0a  oseEvent(self):.
-00026790: 2020 2020 2020 2020 2222 224f 7065 6e73          """Opens
-000267a0: 2061 2070 726f 6a65 6374 2061 6e64 2063   a project and c
-000267b0: 6c6f 7365 7320 7468 6520 6d61 696e 2077  loses the main w
-000267c0: 696e 646f 772e 0a0a 2020 2020 2020 2020  indow...        
-000267d0: 2d20 5465 7374 733a 204d 6169 6e57 696e  - Tests: MainWin
-000267e0: 646f 772e 636c 6f73 6545 7665 6e74 0a20  dow.closeEvent. 
-000267f0: 2020 2020 2020 2022 2222 0a0a 2020 2020         """..    
-00026800: 2020 2020 2320 4649 584d 453a 2044 6f65      # FIXME: Doe
-00026810: 7320 7468 6973 2074 6573 7420 7265 616c  s this test real
-00026820: 6c79 2062 7269 6e67 2061 6e79 7468 696e  ly bring anythin
-00026830: 6720 6e65 7720 636f 6d70 6172 6564 2074  g new compared t
-00026840: 6f20 6f74 6865 720a 2020 2020 2020 2020  o other.        
-00026850: 2320 2020 2020 2020 2074 6573 7473 2061  #        tests a
-00026860: 6c72 6561 6479 2070 6572 666f 726d 6564  lready performed
-00026870: 3f0a 2020 2020 2020 2020 2320 4372 6561  ?.        # Crea
-00026880: 7465 7320 6120 6e65 7720 7072 6f6a 6563  tes a new projec
-00026890: 7420 666f 6c64 6572 2061 6e64 2073 7769  t folder and swi
-000268a0: 7463 6865 7320 746f 2069 740a 2020 2020  tches to it.    
-000268b0: 2020 2020 6e65 775f 7072 6f6a 5f70 6174      new_proj_pat
-000268c0: 6820 3d20 7365 6c66 2e67 6574 5f6e 6577  h = self.get_new
-000268d0: 5f74 6573 745f 7072 6f6a 6563 7428 6c69  _test_project(li
-000268e0: 6768 743d 5472 7565 290a 2020 2020 2020  ght=True).      
-000268f0: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
-00026900: 6f77 2e73 7769 7463 685f 7072 6f6a 6563  ow.switch_projec
-00026910: 7428 6e65 775f 7072 6f6a 5f70 6174 682c  t(new_proj_path,
-00026920: 2022 7465 7374 5f6c 6967 6874 5f70 726f   "test_light_pro
-00026930: 6a65 6374 2229 0a0a 2020 2020 2020 2020  ject")..        
-00026940: 2320 5365 7473 2073 686f 7274 6375 7473  # Sets shortcuts
-00026950: 2066 6f72 206f 626a 6563 7473 2074 6861   for objects tha
-00026960: 7420 6172 6520 6f66 7465 6e20 7573 6564  t are often used
-00026970: 0a20 2020 2020 2020 2070 706c 5f6d 616e  .        ppl_man
-00026980: 6167 6572 203d 2073 656c 662e 6d61 696e  ager = self.main
-00026990: 5f77 696e 646f 772e 7069 7065 6c69 6e65  _window.pipeline
-000269a0: 5f6d 616e 6167 6572 0a0a 2020 2020 2020  _manager..      
-000269b0: 2020 2320 4765 7473 2074 6865 2055 4944    # Gets the UID
-000269c0: 206f 6620 7468 6520 6669 7273 7420 6272   of the first br
-000269d0: 6963 6b20 696e 2074 6865 2062 7269 636b  ick in the brick
-000269e0: 2063 6f6c 6c65 6374 696f 6e2c 2077 6869   collection, whi
-000269f0: 6368 2069 730a 2020 2020 2020 2020 2320  ch is.        # 
-00026a00: 636f 6d70 6f73 6564 206f 6620 7468 6520  composed of the 
-00026a10: 6272 6963 6b73 2061 7070 6561 7269 6e67  bricks appearing
-00026a20: 2069 6e20 7468 6520 7363 616e 2068 6973   in the scan his
-00026a30: 746f 7279 2e0a 2020 2020 2020 2020 6272  tory..        br
-00026a40: 6963 6b73 5f63 6f6c 6c20 3d20 7070 6c5f  icks_coll = ppl_
-00026a50: 6d61 6e61 6765 722e 7072 6f6a 6563 742e  manager.project.
-00026a60: 7365 7373 696f 6e2e 6765 745f 646f 6375  session.get_docu
-00026a70: 6d65 6e74 7328 0a20 2020 2020 2020 2020  ments(.         
-00026a80: 2020 2043 4f4c 4c45 4354 494f 4e5f 4252     COLLECTION_BR
-00026a90: 4943 4b0a 2020 2020 2020 2020 290a 2020  ICK.        ).  
-00026aa0: 2020 2020 2020 6272 6963 6b20 3d20 6272        brick = br
-00026ab0: 6963 6b73 5f63 6f6c 6c5b 305d 0a0a 2020  icks_coll[0]..  
-00026ac0: 2020 2020 2020 2320 4170 7065 6e64 7320        # Appends 
-00026ad0: 6974 2074 6f20 7468 6520 2762 7269 636b  it to the 'brick
-00026ae0: 5f6c 6973 7427 0a20 2020 2020 2020 2070  _list'.        p
-00026af0: 706c 5f6d 616e 6167 6572 2e62 7269 636b  pl_manager.brick
-00026b00: 5f6c 6973 742e 6170 7065 6e64 2862 7269  _list.append(bri
-00026b10: 636b 2e49 4429 0a0a 2020 2020 2020 2020  ck.ID)..        
-00026b20: 2320 4d6f 636b 7320 6861 7669 6e67 2069  # Mocks having i
-00026b30: 6e69 7469 616c 697a 6564 2074 6865 2070  nitialized the p
-00026b40: 6970 656c 696e 650a 2020 2020 2020 2020  ipeline.        
-00026b50: 7070 6c5f 6d61 6e61 6765 722e 696e 6974  ppl_manager.init
-00026b60: 5f63 6c69 636b 6564 203d 2054 7275 650a  _clicked = True.
-00026b70: 0a20 2020 2020 2020 2023 2027 7365 6c66  .        # 'self
-00026b80: 2e6d 6169 6e5f 7769 6e64 6f77 2e63 6c6f  .main_window.clo
-00026b90: 7365 2829 2720 6973 2061 6c72 6561 6479  se()' is already
-00026ba0: 2063 616c 6c65 6420 6279 2027 7465 6172   called by 'tear
-00026bb0: 446f 776e 270a 2020 2020 2020 2020 2320  Down'.        # 
-00026bc0: 6166 7465 7220 6561 6368 2074 6573 740a  after each test.
-00026bd0: 0a20 2020 2020 2020 2023 204e 6f20 6173  .        # No as
-00026be0: 7365 7274 696f 6e20 6973 2070 6f73 7369  sertion is possi
-00026bf0: 626c 6520 7369 6e63 6520 7468 6520 2773  ble since the 's
-00026c00: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00026c10: 7072 6f6a 6563 7427 0a20 2020 2020 2020  project'.       
-00026c20: 2023 2077 6173 2064 656c 6574 6564 0a0a   # was deleted..
-00026c30: 2020 2020 2020 2020 7072 696e 7428 290a          print().
-00026c40: 0a20 2020 2064 6566 2074 6573 745f 6372  .    def test_cr
-00026c50: 6561 7465 5f70 726f 6a65 6374 5f70 6f70  eate_project_pop
-00026c60: 5f75 7028 7365 6c66 293a 0a20 2020 2020  _up(self):.     
-00026c70: 2020 2022 2222 5472 6965 7320 746f 2063     """Tries to c
-00026c80: 7265 6174 6520 6120 6e65 7720 7072 6f6a  reate a new proj
-00026c90: 6563 7420 7769 7468 2061 6e20 616c 7265  ect with an alre
-00026ca0: 6164 7920 6f70 656e 2070 726f 6a65 6374  ady open project
-00026cb0: 2c20 7769 7468 2061 6e64 0a20 2020 2020  , with and.     
-00026cc0: 2020 2077 6974 686f 7574 2073 6574 7469     without setti
-00026cd0: 6e67 2074 6865 2070 726f 6a65 6374 7320  ng the projects 
-00026ce0: 666f 6c64 6572 2070 6174 682e 0a0a 2020  folder path...  
-00026cf0: 2020 2020 2020 2d20 5465 7374 733a 0a20        - Tests:. 
-00026d00: 2020 2020 2020 2020 2020 202d 204d 6169             - Mai
-00026d10: 6e57 696e 646f 772e 6372 6561 7465 5f70  nWindow.create_p
-00026d20: 726f 6a65 6374 5f70 6f70 5f75 700a 2020  roject_pop_up.  
-00026d30: 2020 2020 2020 2020 2020 2d20 506f 7055            - PopU
-00026d40: 704e 6577 5072 6f6a 6563 740a 0a20 2020  pNewProject..   
-00026d50: 2020 2020 202d 204d 6f63 6b73 3a0a 2020       - Mocks:.  
-00026d60: 2020 2020 2020 2020 2020 2d20 506f 7055            - PopU
-00026d70: 7051 7569 742e 6578 6563 0a20 2020 2020  pQuit.exec.     
-00026d80: 2020 2020 2020 202d 2051 4d65 7373 6167         - QMessag
-00026d90: 6542 6f78 2e65 7865 630a 2020 2020 2020  eBox.exec.      
-00026da0: 2020 2020 2020 2d20 506f 7055 704e 6577        - PopUpNew
-00026db0: 5072 6f6a 6563 742e 6578 6563 0a20 2020  Project.exec.   
-00026dc0: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
-00026dd0: 2020 2320 5365 7473 2073 686f 7274 6375    # Sets shortcu
-00026de0: 7473 2066 6f72 206f 6674 656e 2075 7365  ts for often use
-00026df0: 6420 6f62 6a65 6374 730a 2020 2020 2020  d objects.      
-00026e00: 2020 7365 7373 696f 6e20 3d20 7365 6c66    session = self
-00026e10: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 726f  .main_window.pro
-00026e20: 6a65 6374 2e73 6573 7369 6f6e 0a0a 2020  ject.session..  
-00026e30: 2020 2020 2020 2320 4372 6561 7465 7320        # Creates 
-00026e40: 6120 6e65 7720 7072 6f6a 6563 7420 666f  a new project fo
-00026e50: 6c64 6572 2061 6e64 2073 7769 7463 6865  lder and switche
-00026e60: 7320 746f 2069 740a 2020 2020 2020 2020  s to it.        
-00026e70: 6e65 775f 7072 6f6a 5f70 6174 6820 3d20  new_proj_path = 
-00026e80: 7365 6c66 2e67 6574 5f6e 6577 5f74 6573  self.get_new_tes
-00026e90: 745f 7072 6f6a 6563 7428 6c69 6768 743d  t_project(light=
-00026ea0: 5472 7565 290a 2020 2020 2020 2020 666f  True).        fo
-00026eb0: 6c64 6572 203d 206f 732e 7061 7468 2e6a  lder = os.path.j
-00026ec0: 6f69 6e28 6e65 775f 7072 6f6a 5f70 6174  oin(new_proj_pat
-00026ed0: 682c 2022 6461 7461 222c 2022 646f 776e  h, "data", "down
-00026ee0: 6c6f 6164 6564 5f64 6174 6122 290a 2020  loaded_data").  
-00026ef0: 2020 2020 2020 4e49 495f 4649 4c45 5f31        NII_FILE_1
-00026f00: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
-00026f10: 2022 4775 6572 6265 742d 4336 2d32 3031   "Guerbet-C6-201
-00026f20: 342d 5261 742d 4b35 322d 5475 6265 3237  4-Rat-K52-Tube27
-00026f30: 2d32 3031 342d 3032 2d31 3431 3032 3331  -2014-02-1410231
-00026f40: 372d 3031 2d47 315f 220a 2020 2020 2020  7-01-G1_".      
-00026f50: 2020 2020 2020 2247 7565 7262 6574 5f41        "Guerbet_A
-00026f60: 6e61 742d 5241 5245 7076 6d2d 3030 3032  nat-RAREpvm-0002
-00026f70: 3230 5f30 3030 2e6e 6969 220a 2020 2020  20_000.nii".    
-00026f80: 2020 2020 290a 2020 2020 2020 2020 444f      ).        DO
-00026f90: 4355 4d45 4e54 5f31 203d 206f 732e 7061  CUMENT_1 = os.pa
-00026fa0: 7468 2e61 6273 7061 7468 286f 732e 7061  th.abspath(os.pa
-00026fb0: 7468 2e6a 6f69 6e28 666f 6c64 6572 2c20  th.join(folder, 
-00026fc0: 4e49 495f 4649 4c45 5f31 2929 0a0a 2020  NII_FILE_1))..  
-00026fd0: 2020 2020 2020 2320 4164 6473 2061 2064        # Adds a d
-00026fe0: 6f63 756d 656e 7420 746f 2074 6865 2063  ocument to the c
-00026ff0: 6f6c 6c65 6374 696f 6e0a 2020 2020 2020  ollection.      
-00027000: 2020 7365 7373 696f 6e2e 6164 645f 646f    session.add_do
-00027010: 6375 6d65 6e74 2843 4f4c 4c45 4354 494f  cument(COLLECTIO
-00027020: 4e5f 4355 5252 454e 542c 2044 4f43 554d  N_CURRENT, DOCUM
-00027030: 454e 545f 3129 0a0a 2020 2020 2020 2020  ENT_1)..        
-00027040: 2320 4d6f 636b 7320 7468 6520 6578 6563  # Mocks the exec
-00027050: 7574 696f 6e20 6f66 2074 6865 2070 6f70  ution of the pop
-00027060: 2d75 7020 7175 6974 0a20 2020 2020 2020  -up quit.       
-00027070: 2050 6f70 5570 5175 6974 2e65 7865 6320   PopUpQuit.exec 
-00027080: 3d20 6c61 6d62 6461 2073 656c 665f 2c20  = lambda self_, 
-00027090: 2a61 7267 733a 2073 656c 665f 2e73 686f  *args: self_.sho
-000270a0: 7728 290a 0a20 2020 2020 2020 2023 2054  w()..        # T
-000270b0: 7269 6573 2074 6f20 6372 6561 7465 2061  ries to create a
-000270c0: 2070 726f 6a65 6374 2077 6974 6820 756e   project with un
-000270d0: 7361 7665 6420 6d6f 6469 6669 6361 7469  saved modificati
-000270e0: 6f6e 730a 2020 2020 2020 2020 7365 6c66  ons.        self
-000270f0: 2e6d 6169 6e5f 7769 6e64 6f77 2e63 7265  .main_window.cre
-00027100: 6174 655f 7072 6f6a 6563 745f 706f 705f  ate_project_pop_
-00027110: 7570 2829 0a0a 2020 2020 2020 2020 2320  up()..        # 
-00027120: 436c 6f73 6573 2074 6865 2065 7272 6f72  Closes the error
-00027130: 2064 6961 6c6f 670a 2020 2020 2020 2020   dialog.        
-00027140: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
-00027150: 6861 7361 7474 7228 7365 6c66 2e6d 6169  hasattr(self.mai
-00027160: 6e5f 7769 6e64 6f77 2c20 2270 6f70 5f75  n_window, "pop_u
-00027170: 705f 636c 6f73 6522 2929 0a20 2020 2020  p_close")).     
-00027180: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
-00027190: 646f 772e 706f 705f 7570 5f63 6c6f 7365  dow.pop_up_close
-000271a0: 2e61 6363 6570 7428 290a 0a20 2020 2020  .accept()..     
-000271b0: 2020 2073 6573 7369 6f6e 2e72 656d 6f76     session.remov
-000271c0: 655f 646f 6375 6d65 6e74 2843 4f4c 4c45  e_document(COLLE
-000271d0: 4354 494f 4e5f 4355 5252 454e 542c 2044  CTION_CURRENT, D
-000271e0: 4f43 554d 454e 545f 3129 0a0a 2020 2020  OCUMENT_1)..    
-000271f0: 2020 2020 2320 4d6f 636b 7320 7468 6520      # Mocks the 
-00027200: 6578 6563 7574 696f 6e20 6f66 2061 2070  execution of a p
-00027210: 6f70 2d75 700a 2020 2020 2020 2020 514d  op-up.        QM
-00027220: 6573 7361 6765 426f 782e 6578 6563 203d  essageBox.exec =
-00027230: 206c 616d 6264 6120 7365 6c66 5f2c 202a   lambda self_, *
-00027240: 6172 6773 3a20 7365 6c66 5f2e 7368 6f77  args: self_.show
-00027250: 2829 0a0a 2020 2020 2020 2020 2320 5265  ()..        # Re
-00027260: 7365 7473 2074 6865 2070 726f 6a65 6374  sets the project
-00027270: 7320 666f 6c64 6572 0a20 2020 2020 2020  s folder.       
-00027280: 2063 6f6e 6669 6720 3d20 436f 6e66 6967   config = Config
-00027290: 2863 6f6e 6669 675f 7061 7468 3d73 656c  (config_path=sel
-000272a0: 662e 636f 6e66 6967 5f70 6174 6829 0a20  f.config_path). 
-000272b0: 2020 2020 2020 2063 6f6e 6669 672e 7365         config.se
-000272c0: 745f 7072 6f6a 6563 7473 5f73 6176 655f  t_projects_save_
-000272d0: 7061 7468 284e 6f6e 6529 0a0a 2020 2020  path(None)..    
-000272e0: 2020 2020 2320 5472 6965 7320 746f 2063      # Tries to c
-000272f0: 7265 6174 6520 6120 6e65 7720 7072 6f6a  reate a new proj
-00027300: 6563 7420 7769 7468 6f75 7420 7365 7474  ect without sett
-00027310: 696e 6720 7468 6520 7072 6f6a 6563 7473  ing the projects
-00027320: 2066 6f6c 6465 720a 2020 2020 2020 2020   folder.        
-00027330: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00027340: 2e63 7265 6174 655f 7072 6f6a 6563 745f  .create_project_
-00027350: 706f 705f 7570 2829 0a0a 2020 2020 2020  pop_up()..      
-00027360: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
-00027370: 6528 6861 7361 7474 7228 7365 6c66 2e6d  e(hasattr(self.m
-00027380: 6169 6e5f 7769 6e64 6f77 2c20 226d 7367  ain_window, "msg
-00027390: 2229 290a 2020 2020 2020 2020 7365 6c66  ")).        self
-000273a0: 2e6d 6169 6e5f 7769 6e64 6f77 2e6d 7367  .main_window.msg
-000273b0: 2e61 6363 6570 7428 290a 0a20 2020 2020  .accept()..     
-000273c0: 2020 2023 2053 6574 7320 7468 6520 7072     # Sets the pr
-000273d0: 6f6a 6563 7473 2066 6f6c 6465 7220 7061  ojects folder pa
-000273e0: 7468 0a20 2020 2020 2020 2070 726f 6a5f  th.        proj_
-000273f0: 666f 6c64 6572 203d 206f 732e 7061 7468  folder = os.path
-00027400: 2e73 706c 6974 286e 6577 5f70 726f 6a5f  .split(new_proj_
-00027410: 7061 7468 295b 305d 0a20 2020 2020 2020  path)[0].       
-00027420: 2063 6f6e 6669 6720 3d20 436f 6e66 6967   config = Config
-00027430: 2863 6f6e 6669 675f 7061 7468 3d73 656c  (config_path=sel
-00027440: 662e 636f 6e66 6967 5f70 6174 6829 0a20  f.config_path). 
-00027450: 2020 2020 2020 2063 6f6e 6669 672e 7365         config.se
-00027460: 745f 7072 6f6a 6563 7473 5f73 6176 655f  t_projects_save_
-00027470: 7061 7468 2870 726f 6a5f 666f 6c64 6572  path(proj_folder
-00027480: 290a 0a20 2020 2020 2020 2023 204d 6f63  )..        # Moc
-00027490: 6b73 2074 6865 2065 7865 6375 7469 6f6e  ks the execution
-000274a0: 206f 6620 2750 6f70 5570 4e65 7750 726f   of 'PopUpNewPro
-000274b0: 6a65 6374 0a20 2020 2020 2020 2050 6f70  ject.        Pop
-000274c0: 5570 4e65 7750 726f 6a65 6374 2e65 7865  UpNewProject.exe
-000274d0: 6320 3d20 6c61 6d62 6461 2073 656c 665f  c = lambda self_
-000274e0: 2c20 2a61 7267 733a 204e 6f6e 650a 0a20  , *args: None.. 
-000274f0: 2020 2020 2020 2023 204f 7065 6e73 2074         # Opens t
-00027500: 6865 2022 6372 6561 7465 2070 726f 6a65  he "create proje
-00027510: 6374 2220 706f 702d 7570 0a20 2020 2020  ct" pop-up.     
-00027520: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
-00027530: 646f 772e 6372 6561 7465 5f70 726f 6a65  dow.create_proje
-00027540: 6374 5f70 6f70 5f75 7028 290a 0a20 2020  ct_pop_up()..   
-00027550: 2020 2020 2023 204d 6f63 6b73 2074 6865       # Mocks the
-00027560: 2065 7865 6375 7469 6f6e 206f 6620 6120   execution of a 
-00027570: 706f 702d 7570 0a20 2020 2020 2020 2051  pop-up.        Q
-00027580: 4d65 7373 6167 6542 6f78 2e65 7865 6320  MessageBox.exec 
-00027590: 3d20 6c61 6d62 6461 202a 6172 6773 3a20  = lambda *args: 
-000275a0: 4e6f 6e65 0a0a 2020 2020 2020 2020 2320  None..        # 
-000275b0: 5472 6965 7320 746f 2063 7265 6174 6520  Tries to create 
-000275c0: 6120 6e65 7720 7072 6f6a 6563 7420 696e  a new project in
-000275d0: 2074 6865 2073 616d 6520 6469 7265 6374   the same direct
-000275e0: 6f72 7920 6f66 2061 6e0a 2020 2020 2020  ory of an.      
-000275f0: 2020 2320 6578 6973 7469 6e67 206f 6e65    # existing one
-00027600: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
-00027610: 696e 5f77 696e 646f 772e 6578 506f 7075  in_window.exPopu
-00027620: 702e 6765 745f 6669 6c65 6e61 6d65 280a  p.get_filename(.
-00027630: 2020 2020 2020 2020 2020 2020 286f 732e              (os.
-00027640: 7061 7468 2e6a 6f69 6e28 666f 6c64 6572  path.join(folder
-00027650: 2c20 4e49 495f 4649 4c45 5f31 292c 290a  , NII_FILE_1),).
-00027660: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-00027670: 2020 2023 2043 7265 6174 6573 2061 206e     # Creates a n
-00027680: 6577 2070 726f 6a65 6374 0a20 2020 2020  ew project.     
-00027690: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
-000276a0: 646f 772e 6578 506f 7075 702e 6765 745f  dow.exPopup.get_
-000276b0: 6669 6c65 6e61 6d65 280a 2020 2020 2020  filename(.      
-000276c0: 2020 2020 2020 286f 732e 7061 7468 2e6a        (os.path.j
-000276d0: 6f69 6e28 666f 6c64 6572 2c20 226e 6577  oin(folder, "new
-000276e0: 5f70 726f 6a65 6374 2229 2c29 0a20 2020  _project"),).   
-000276f0: 2020 2020 2029 0a0a 2020 2020 6465 6620       )..    def 
-00027700: 7465 7374 5f66 696c 6573 5f69 6e5f 7072  test_files_in_pr
-00027710: 6f6a 6563 7428 7365 6c66 293a 0a20 2020  oject(self):.   
-00027720: 2020 2020 2022 2222 5465 7374 7320 7768       """Tests wh
-00027730: 6574 6865 7220 6120 6769 7665 6e20 6669  ether a given fi
-00027740: 6c65 2069 7320 7061 7274 206f 6620 7468  le is part of th
-00027750: 6520 7072 6f6a 6563 742e 0a0a 2020 2020  e project...    
-00027760: 2020 2020 2d20 5465 7374 733a 204d 6169      - Tests: Mai
-00027770: 6e57 696e 646f 772e 6669 6c65 735f 696e  nWindow.files_in
-00027780: 5f70 726f 6a65 6374 0a20 2020 2020 2020  _project.       
-00027790: 2022 2222 0a0a 2020 2020 2020 2020 2320   """..        # 
-000277a0: 4372 6561 7465 7320 6120 6e6f 7720 7465  Creates a now te
-000277b0: 7374 2070 726f 6a65 6374 0a20 2020 2020  st project.     
-000277c0: 2020 2074 6573 745f 7072 6f6a 5f70 6174     test_proj_pat
-000277d0: 6820 3d20 7365 6c66 2e67 6574 5f6e 6577  h = self.get_new
-000277e0: 5f74 6573 745f 7072 6f6a 6563 7428 6c69  _test_project(li
-000277f0: 6768 743d 5472 7565 290a 2020 2020 2020  ght=True).      
-00027800: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
-00027810: 6f77 2e70 726f 6a65 6374 2e66 6f6c 6465  ow.project.folde
-00027820: 7220 3d20 7465 7374 5f70 726f 6a5f 7061  r = test_proj_pa
-00027830: 7468 0a0a 2020 2020 2020 2020 2320 4368  th..        # Ch
-00027840: 6563 6b73 2066 6f72 2061 2062 6f6f 6c20  ecks for a bool 
-00027850: 7479 7065 2061 7320 6120 6669 6c65 0a20  type as a file. 
-00027860: 2020 2020 2020 2072 6573 203d 2073 656c         res = sel
-00027870: 662e 6d61 696e 5f77 696e 646f 772e 7072  f.main_window.pr
-00027880: 6f6a 6563 742e 6669 6c65 735f 696e 5f70  oject.files_in_p
-00027890: 726f 6a65 6374 285b 7b22 6d6f 636b 5f6b  roject([{"mock_k
-000278a0: 6579 223a 2046 616c 7365 7d5d 290a 2020  ey": False}]).  
-000278b0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-000278c0: 7446 616c 7365 2872 6573 290a 0a20 2020  tFalse(res)..   
-000278d0: 2020 2020 2023 2043 6865 636b 7320 666f       # Checks fo
-000278e0: 7220 6120 7374 7220 7479 7065 2070 6174  r a str type pat
-000278f0: 6820 6c6f 6361 7465 6420 6f75 7420 6f66  h located out of
-00027900: 2074 6865 2070 726f 6a65 6374 0a20 2020   the project.   
-00027910: 2020 2020 2072 6573 203d 2073 656c 662e       res = self.
-00027920: 6d61 696e 5f77 696e 646f 772e 7072 6f6a  main_window.proj
-00027930: 6563 742e 6669 6c65 735f 696e 5f70 726f  ect.files_in_pro
-00027940: 6a65 6374 2822 2f6f 7574 5f6f 665f 7072  ject("/out_of_pr
-00027950: 6f6a 6563 7422 290a 2020 2020 2020 2020  oject").        
-00027960: 7365 6c66 2e61 7373 6572 7446 616c 7365  self.assertFalse
-00027970: 2872 6573 290a 0a20 2020 2020 2020 2023  (res)..        #
-00027980: 2043 6865 636b 7320 666f 7220 6120 7374   Checks for a st
-00027990: 7220 7479 7065 2070 6174 6820 7769 7468  r type path with
-000279a0: 696e 2074 6865 2070 726f 6a65 6374 0a20  in the project. 
-000279b0: 2020 2020 2020 2072 6573 203d 2073 656c         res = sel
-000279c0: 662e 6d61 696e 5f77 696e 646f 772e 7072  f.main_window.pr
-000279d0: 6f6a 6563 742e 6669 6c65 735f 696e 5f70  oject.files_in_p
-000279e0: 726f 6a65 6374 280a 2020 2020 2020 2020  roject(.        
-000279f0: 2020 2020 6f73 2e70 6174 682e 6a6f 696e      os.path.join
-00027a00: 2874 6573 745f 7072 6f6a 5f70 6174 682c  (test_proj_path,
-00027a10: 2022 6d6f 636b 5f66 696c 6522 290a 2020   "mock_file").  
-00027a20: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00027a30: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
-00027a40: 7265 7329 2020 2320 4173 7365 7274 7320  res)  # Asserts 
-00027a50: 6974 2069 7320 6e6f 7420 656d 7074 790a  it is not empty.
-00027a60: 0a20 2020 2064 6566 2074 6573 745f 696d  .    def test_im
-00027a70: 706f 7274 5f64 6174 6128 7365 6c66 293a  port_data(self):
-00027a80: 0a20 2020 2020 2020 2022 2222 4f70 656e  .        """Open
-00027a90: 7320 6120 7072 6f6a 6563 7420 616e 6420  s a project and 
-00027aa0: 7369 6d75 6c61 7465 7320 696d 706f 7274  simulates import
-00027ab0: 696e 6720 6120 6669 6c65 2066 726f 6d20  ing a file from 
-00027ac0: 7468 6520 6d72 695f 636f 6e76 0a20 2020  the mri_conv.   
-00027ad0: 2020 2020 206a 6176 6120 6578 6563 7574       java execut
-00027ae0: 6162 6c65 2e0a 0a20 2020 2020 2020 202d  able...        -
-00027af0: 2054 6573 7473 3a0a 2020 2020 2020 2020   Tests:.        
-00027b00: 2020 2020 2d20 7265 6164 5f6c 6f67 2028      - read_log (
-00027b10: 6461 7461 5f6c 6f61 6465 722e 7079 290a  data_loader.py).
-00027b20: 2020 2020 2020 2020 2020 2020 2d20 496d              - Im
-00027b30: 706f 7274 5072 6f67 7265 7373 0a0a 2020  portProgress..  
-00027b40: 2020 2020 2020 2d20 4d6f 636b 733a 0a20        - Mocks:. 
-00027b50: 2020 2020 2020 2020 2020 202d 2049 6d70             - Imp
-00027b60: 6f72 7457 6f72 6b65 722e 7374 6172 740a  ortWorker.start.
-00027b70: 2020 2020 2020 2020 2020 2020 2d20 496d              - Im
-00027b80: 706f 7274 5072 6f67 7265 7373 2e65 7865  portProgress.exe
-00027b90: 630a 2020 2020 2020 2020 2222 220a 0a20  c.        """.. 
-00027ba0: 2020 2020 2020 2023 204f 7065 6e73 2061         # Opens a
-00027bb0: 2074 6573 7420 7072 6f6a 6563 7420 616e   test project an
-00027bc0: 6420 7377 6974 6368 6573 2074 6f20 6974  d switches to it
-00027bd0: 0a20 2020 2020 2020 2074 6573 745f 7072  .        test_pr
-00027be0: 6f6a 5f70 6174 6820 3d20 7365 6c66 2e67  oj_path = self.g
-00027bf0: 6574 5f6e 6577 5f74 6573 745f 7072 6f6a  et_new_test_proj
-00027c00: 6563 7428 6c69 6768 743d 5472 7565 290a  ect(light=True).
-00027c10: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
-00027c20: 6e5f 7769 6e64 6f77 2e73 7769 7463 685f  n_window.switch_
-00027c30: 7072 6f6a 6563 7428 7465 7374 5f70 726f  project(test_pro
-00027c40: 6a5f 7061 7468 2c20 2274 6573 745f 7072  j_path, "test_pr
-00027c50: 6f6a 6563 7422 290a 0a20 2020 2020 2020  oject")..       
-00027c60: 2023 2043 7265 6174 6573 2061 206d 6f63   # Creates a moc
-00027c70: 6b65 6420 6a61 7661 2065 7865 6375 7461  ked java executa
-00027c80: 626c 650a 2020 2020 2020 2020 6d6f 636b  ble.        mock
-00027c90: 5f6d 7269 636f 6e76 5f70 6174 6820 3d20  _mriconv_path = 
-00027ca0: 6f73 2e70 6174 682e 6a6f 696e 280a 2020  os.path.join(.  
-00027cb0: 2020 2020 2020 2020 2020 7465 7374 5f70            test_p
-00027cc0: 726f 6a5f 7061 7468 2c20 226d 6f63 6b5f  roj_path, "mock_
-00027cd0: 6d72 6963 6f6e 7622 2c20 226d 6f63 6b61  mriconv", "mocka
-00027ce0: 7070 2e6a 6172 220a 2020 2020 2020 2020  pp.jar".        
-00027cf0: 290a 2020 2020 2020 2020 6f73 2e6d 6b64  ).        os.mkd
-00027d00: 6972 286f 732e 7061 7468 2e73 706c 6974  ir(os.path.split
-00027d10: 286d 6f63 6b5f 6d72 6963 6f6e 765f 7061  (mock_mriconv_pa
-00027d20: 7468 295b 305d 290a 2020 2020 2020 2020  th)[0]).        
-00027d30: 7265 7320 3d20 7365 6c66 2e63 7265 6174  res = self.creat
-00027d40: 655f 6d6f 636b 5f6a 6172 286d 6f63 6b5f  e_mock_jar(mock_
-00027d50: 6d72 6963 6f6e 765f 7061 7468 290a 2020  mriconv_path).  
-00027d60: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00027d70: 7445 7175 616c 2872 6573 2c20 3029 0a0a  tEqual(res, 0)..
-00027d80: 2020 2020 2020 2020 2320 5365 7473 2074          # Sets t
-00027d90: 6865 2027 4d52 494d 616e 6167 6572 2e6a  he 'MRIManager.j
-00027da0: 6172 2720 7061 7468 2074 6f20 6120 6d6f  ar' path to a mo
-00027db0: 636b 6564 206a 6176 6120 6578 6563 7574  cked java execut
-00027dc0: 6162 6c65 0a20 2020 2020 2020 2063 6f6e  able.        con
-00027dd0: 6669 6720 3d20 436f 6e66 6967 2829 0a20  fig = Config(). 
-00027de0: 2020 2020 2020 2063 6f6e 6669 672e 7365         config.se
-00027df0: 745f 6d72 695f 636f 6e76 5f70 6174 6828  t_mri_conv_path(
-00027e00: 6f73 2e70 6174 682e 6e6f 726d 7061 7468  os.path.normpath
-00027e10: 286d 6f63 6b5f 6d72 6963 6f6e 765f 7061  (mock_mriconv_pa
-00027e20: 7468 2929 0a0a 2020 2020 2020 2020 2320  th))..        # 
-00027e30: 4765 7473 2069 6e66 6f72 6d61 7469 6f6e  Gets information
-00027e40: 2072 6567 6172 6469 6e67 2074 6865 2066   regarding the f
-00027e50: 6973 7420 7363 616e 2c20 6c6f 6361 7465  ist scan, locate
-00027e60: 6420 696e 2074 6865 0a20 2020 2020 2020  d in the.       
-00027e70: 2023 2027 6465 7269 7665 645f 6461 7461   # 'derived_data
-00027e80: 2720 6f66 2074 6865 2070 726f 6a65 6374  ' of the project
-00027e90: 0a20 2020 2020 2020 2044 4f43 554d 454e  .        DOCUMEN
-00027ea0: 545f 3120 3d20 2873 656c 662e 6d61 696e  T_1 = (self.main
-00027eb0: 5f77 696e 646f 772e 7072 6f6a 6563 742e  _window.project.
-00027ec0: 7365 7373 696f 6e2e 6765 745f 646f 6375  session.get_docu
-00027ed0: 6d65 6e74 735f 6e61 6d65 7329 280a 2020  ments_names)(.  
-00027ee0: 2020 2020 2020 2020 2020 2263 7572 7265            "curre
-00027ef0: 6e74 220a 2020 2020 2020 2020 295b 305d  nt".        )[0]
-00027f00: 0a20 2020 2020 2020 2044 4f43 554d 454e  .        DOCUMEN
-00027f10: 545f 315f 4e41 4d45 203d 206f 732e 7061  T_1_NAME = os.pa
-00027f20: 7468 2e73 706c 6974 2844 4f43 554d 454e  th.split(DOCUMEN
-00027f30: 545f 3129 5b2d 315d 2e73 706c 6974 2822  T_1)[-1].split("
-00027f40: 2e22 295b 305d 0a0a 2020 2020 2020 2020  .")[0]..        
-00027f50: 2320 4765 7473 2074 6865 2027 7261 775f  # Gets the 'raw_
-00027f60: 6461 7461 2720 666f 6c64 6572 2070 6174  data' folder pat
-00027f70: 682c 2077 6865 7265 2074 6865 2073 6361  h, where the sca
-00027f80: 6e20 7769 6c6c 2062 6520 696d 706f 7274  n will be import
-00027f90: 0a20 2020 2020 2020 2052 4157 5f44 4154  .        RAW_DAT
-00027fa0: 415f 464c 4452 203d 206f 732e 7061 7468  A_FLDR = os.path
-00027fb0: 2e6a 6f69 6e28 7465 7374 5f70 726f 6a5f  .join(test_proj_
-00027fc0: 7061 7468 2c20 2264 6174 6122 2c20 2272  path, "data", "r
-00027fd0: 6177 5f64 6174 6122 290a 0a20 2020 2020  aw_data")..     
-00027fe0: 2020 2023 2043 6f70 6965 7320 6120 7363     # Copies a sc
-00027ff0: 616e 2074 6f20 7468 6520 7261 7720 6461  an to the raw da
-00028000: 7461 2066 6f6c 6465 720a 2020 2020 2020  ta folder.      
-00028010: 2020 7368 7574 696c 2e63 6f70 7928 0a20    shutil.copy(. 
-00028020: 2020 2020 2020 2020 2020 206f 732e 7061             os.pa
-00028030: 7468 2e6a 6f69 6e28 7465 7374 5f70 726f  th.join(test_pro
-00028040: 6a5f 7061 7468 2c20 444f 4355 4d45 4e54  j_path, DOCUMENT
-00028050: 5f31 292c 0a20 2020 2020 2020 2020 2020  _1),.           
-00028060: 206f 732e 7061 7468 2e6a 6f69 6e28 5241   os.path.join(RA
-00028070: 575f 4441 5441 5f46 4c44 522c 206f 732e  W_DATA_FLDR, os.
-00028080: 7061 7468 2e73 706c 6974 2844 4f43 554d  path.split(DOCUM
-00028090: 454e 545f 3129 5b2d 315d 292c 0a20 2020  ENT_1)[-1]),.   
-000280a0: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-000280b0: 2320 4372 6561 7465 7320 7468 6520 2e6a  # Creates the .j
-000280c0: 736f 6e20 7769 7468 2074 6865 2074 6167  son with the tag
-000280d0: 2076 616c 7565 732c 2069 6e20 7468 6520   values, in the 
-000280e0: 7261 7720 6461 7461 2066 6f6c 6465 720a  raw data folder.
-000280f0: 2020 2020 2020 2020 4a53 4f4e 5f54 4147          JSON_TAG
-00028100: 5f44 554d 5020 3d20 7b0a 2020 2020 2020  _DUMP = {.      
-00028110: 2020 2020 2020 2241 6371 7569 7369 7469        "Acquisiti
-00028120: 6f6e 5469 6d65 223a 207b 0a20 2020 2020  onTime": {.     
-00028130: 2020 2020 2020 2020 2020 2022 666f 726d             "form
-00028140: 6174 223a 2022 4848 3a6d 6d3a 7373 2e53  at": "HH:mm:ss.S
-00028150: 5353 222c 0a20 2020 2020 2020 2020 2020  SS",.           
-00028160: 2020 2020 2022 6465 7363 7269 7074 696f       "descriptio
-00028170: 6e22 3a20 2254 6865 2074 696d 6520 7468  n": "The time th
-00028180: 6520 6163 7175 6973 6974 696f 6e20 6f66  e acquisition of
-00028190: 2064 6174 612e 222c 0a20 2020 2020 2020   data.",.       
-000281a0: 2020 2020 2020 2020 2022 756e 6974 7322           "units"
-000281b0: 3a20 226d 6f63 6b5f 756e 6974 222c 0a20  : "mock_unit",. 
-000281c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000281d0: 7479 7065 223a 2022 7469 6d65 222c 0a20  type": "time",. 
-000281e0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000281f0: 7661 6c75 6522 3a20 5b22 3030 3a30 393a  value": ["00:09:
-00028200: 3430 2e38 3030 225d 2c0a 2020 2020 2020  40.800"],.      
-00028210: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
-00028220: 2020 2020 2022 4261 6e64 5769 6474 6822       "BandWidth"
-00028230: 3a20 7b0a 2020 2020 2020 2020 2020 2020  : {.            
-00028240: 2020 2020 2266 6f72 6d61 7422 3a20 4e6f      "format": No
-00028250: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-00028260: 2020 2020 2264 6573 6372 6970 7469 6f6e      "description
-00028270: 223a 2022 222c 0a20 2020 2020 2020 2020  ": "",.         
-00028280: 2020 2020 2020 2022 756e 6974 7322 3a20         "units": 
-00028290: 224d 487a 222c 0a20 2020 2020 2020 2020  "MHz",.         
-000282a0: 2020 2020 2020 2022 7479 7065 223a 2022         "type": "
-000282b0: 666c 6f61 7422 2c0a 2020 2020 2020 2020  float",.        
-000282c0: 2020 2020 2020 2020 2276 616c 7565 223a          "value":
-000282d0: 205b 5b35 3030 3030 2e30 5d5d 2c0a 2020   [[50000.0]],.  
-000282e0: 2020 2020 2020 2020 2020 7d2c 0a20 2020            },.   
-000282f0: 2020 2020 207d 0a20 2020 2020 2020 204a       }.        J
-00028300: 534f 4e5f 5441 4720 3d20 6f73 2e70 6174  SON_TAG = os.pat
-00028310: 682e 6a6f 696e 2852 4157 5f44 4154 415f  h.join(RAW_DATA_
-00028320: 464c 4452 2c20 444f 4355 4d45 4e54 5f31  FLDR, DOCUMENT_1
-00028330: 5f4e 414d 4520 2b20 222e 6a73 6f6e 2229  _NAME + ".json")
-00028340: 0a0a 2020 2020 2020 2020 7769 7468 206f  ..        with o
-00028350: 7065 6e28 4a53 4f4e 5f54 4147 2c20 2277  pen(JSON_TAG, "w
-00028360: 2229 2061 7320 6669 6c65 3a0a 2020 2020  ") as file:.    
-00028370: 2020 2020 2020 2020 6a73 6f6e 2e64 756d          json.dum
-00028380: 7028 4a53 4f4e 5f54 4147 5f44 554d 502c  p(JSON_TAG_DUMP,
-00028390: 2066 696c 6529 0a0a 2020 2020 2020 2020   file)..        
-000283a0: 2320 4372 6561 7465 7320 7468 6520 276c  # Creates the 'l
-000283b0: 6f67 4578 706f 7274 2a2e 6a73 6f6e 2720  ogExport*.json' 
-000283c0: 6669 6c65 2c20 696e 2074 6865 2072 6177  file, in the raw
-000283d0: 2064 6174 6120 666f 6c64 6572 0a20 2020   data folder.   
-000283e0: 2020 2020 204a 534f 4e5f 4558 504f 5254       JSON_EXPORT
-000283f0: 5f44 554d 5020 3d20 5b0a 2020 2020 2020  _DUMP = [.      
-00028400: 2020 2020 2020 7b22 5374 6174 7573 4578        {"StatusEx
-00028410: 706f 7274 223a 2022 4578 706f 7274 206f  port": "Export o
-00028420: 6b22 2c20 224e 616d 6546 696c 6522 3a20  k", "NameFile": 
-00028430: 444f 4355 4d45 4e54 5f31 5f4e 414d 457d  DOCUMENT_1_NAME}
-00028440: 0a20 2020 2020 2020 205d 0a20 2020 2020  .        ].     
-00028450: 2020 204a 534f 4e5f 4558 504f 5254 203d     JSON_EXPORT =
-00028460: 206f 732e 7061 7468 2e6a 6f69 6e28 0a20   os.path.join(. 
-00028470: 2020 2020 2020 2020 2020 2074 6573 745f             test_
-00028480: 7072 6f6a 5f70 6174 682c 2022 6461 7461  proj_path, "data
-00028490: 222c 2022 7261 775f 6461 7461 222c 2022  ", "raw_data", "
-000284a0: 6c6f 6745 7870 6f72 744d 6f63 6b2e 6a73  logExportMock.js
-000284b0: 6f6e 220a 2020 2020 2020 2020 290a 0a20  on".        ).. 
-000284c0: 2020 2020 2020 2077 6974 6820 6f70 656e         with open
-000284d0: 284a 534f 4e5f 4558 504f 5254 2c20 2277  (JSON_EXPORT, "w
-000284e0: 2229 2061 7320 6669 6c65 3a0a 2020 2020  ") as file:.    
-000284f0: 2020 2020 2020 2020 6a73 6f6e 2e64 756d          json.dum
-00028500: 7028 4a53 4f4e 5f45 5850 4f52 545f 4455  p(JSON_EXPORT_DU
-00028510: 4d50 2c20 6669 6c65 290a 0a20 2020 2020  MP, file)..     
-00028520: 2020 2023 204d 6f63 6b73 2074 6865 2074     # Mocks the t
-00028530: 6872 6561 6420 7374 6172 7420 746f 2061  hread start to a
-00028540: 766f 6964 2074 6872 6561 6420 6465 6164  void thread dead
-00028550: 6c6f 636b 696e 670a 2020 2020 2020 2020  locking.        
-00028560: 496d 706f 7274 576f 726b 6572 2e73 7461  ImportWorker.sta
-00028570: 7274 203d 206c 616d 6264 6120 7365 6c66  rt = lambda self
-00028580: 5f2c 202a 6172 6773 3a20 4e6f 6e65 0a20  _, *args: None. 
-00028590: 2020 2020 2020 2049 6d70 6f72 7450 726f         ImportPro
-000285a0: 6772 6573 732e 6578 6563 203d 206c 616d  gress.exec = lam
-000285b0: 6264 6120 7365 6c66 5f2c 202a 6172 6773  bda self_, *args
-000285c0: 3a20 7365 6c66 5f2e 776f 726b 6572 2e72  : self_.worker.r
-000285d0: 756e 2829 0a0a 2020 2020 2020 2020 2320  un()..        # 
-000285e0: 5265 6164 7320 7468 6520 7363 616e 7320  Reads the scans 
-000285f0: 6164 6465 6420 746f 2074 6865 2070 726f  added to the pro
-00028600: 6a65 6374 0a20 2020 2020 2020 2023 2046  ject.        # F
-00028610: 4958 4d45 3a20 5472 7920 756e 636f 6d6d  IXME: Try uncomm
-00028620: 656e 7469 6e67 2074 6865 2066 6f6c 6c6f  enting the follo
-00028630: 7769 6e67 206c 696e 650a 2020 2020 2020  wing line.      
-00028640: 2020 2320 7363 616e 735f 6164 6465 6420    # scans_added 
-00028650: 3d20 7265 6164 5f6c 6f67 2873 656c 662e  = read_log(self.
-00028660: 6d61 696e 5f77 696e 646f 772e 7072 6f6a  main_window.proj
-00028670: 6563 742c 2073 656c 662e 6d61 696e 5f77  ect, self.main_w
-00028680: 696e 646f 7729 0a0a 2020 2020 2020 2020  indow)..        
-00028690: 2320 4d6f 636b 7320 696d 706f 7274 696e  # Mocks importin
-000286a0: 6720 6120 7363 616e 2c20 7275 6e73 2061  g a scan, runs a
-000286b0: 206d 6f63 6b65 6420 6a61 7661 2065 7865   mocked java exe
-000286c0: 6375 7461 626c 6520 696e 7374 6561 640a  cutable instead.
-000286d0: 2020 2020 2020 2020 2320 6f66 2074 6865          # of the
-000286e0: 2027 4d52 494d 616e 6167 6572 2e6a 6172   'MRIManager.jar
-000286f0: 270a 2020 2020 2020 2020 7365 6c66 2e6d  '.        self.m
-00028700: 6169 6e5f 7769 6e64 6f77 2e69 6d70 6f72  ain_window.impor
-00028710: 745f 6461 7461 2829 0a0a 2020 2020 2020  t_data()..      
-00028720: 2020 6e65 775f 7363 616e 203d 206f 732e    new_scan = os.
-00028730: 7061 7468 2e6e 6f72 6d70 6174 6828 0a20  path.normpath(. 
-00028740: 2020 2020 2020 2020 2020 2044 4f43 554d             DOCUM
-00028750: 454e 545f 312e 7265 706c 6163 6528 2264  ENT_1.replace("d
-00028760: 6572 6976 6564 5f64 6174 6122 2c20 2272  erived_data", "r
-00028770: 6177 5f64 6174 6122 290a 2020 2020 2020  aw_data").      
-00028780: 2020 290a 2020 2020 2020 2020 7461 626c    ).        tabl
-00028790: 655f 6461 7461 5f73 6361 6e73 203d 2028  e_data_scans = (
-000287a0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-000287b0: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
-000287c0: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
-000287d0: 5f64 6174 612e 7363 616e 735f 746f 5f76  _data.scans_to_v
-000287e0: 6973 7561 6c69 7a65 0a20 2020 2020 2020  isualize.       
-000287f0: 2029 0a20 2020 2020 2020 2074 6162 6c65   ).        table
-00028800: 5f64 6174 615f 7363 616e 7320 3d20 5b0a  _data_scans = [.
-00028810: 2020 2020 2020 2020 2020 2020 6f73 2e70              os.p
-00028820: 6174 682e 6e6f 726d 7061 7468 2870 6174  ath.normpath(pat
-00028830: 6829 2066 6f72 2070 6174 6820 696e 2074  h) for path in t
-00028840: 6162 6c65 5f64 6174 615f 7363 616e 730a  able_data_scans.
-00028850: 2020 2020 2020 2020 5d0a 0a20 2020 2020          ]..     
-00028860: 2020 2023 2041 7373 6572 7473 2074 6861     # Asserts tha
-00028870: 7420 7468 6520 6669 7273 7420 7363 616e  t the first scan
-00028880: 2077 6173 2061 6464 6564 2074 6f20 7468   was added to th
-00028890: 6520 2772 6177 5f64 6174 6127 2066 6f6c  e 'raw_data' fol
-000288a0: 6465 720a 2020 2020 2020 2020 7365 6c66  der.        self
-000288b0: 2e61 7373 6572 7449 6e28 6e65 775f 7363  .assertIn(new_sc
-000288c0: 616e 2c20 7461 626c 655f 6461 7461 5f73  an, table_data_s
-000288d0: 6361 6e73 290a 0a20 2020 2064 6566 2074  cans)..    def t
-000288e0: 6573 745f 6f70 656e 5f70 726f 6a65 6374  est_open_project
-000288f0: 5f70 6f70 5f75 7028 7365 6c66 293a 0a20  _pop_up(self):. 
-00028900: 2020 2020 2020 2022 2222 4372 6561 7465         """Create
-00028910: 7320 6120 7465 7374 2070 726f 6a65 6374  s a test project
-00028920: 2061 6e64 206f 7065 6e73 2061 2070 726f   and opens a pro
-00028930: 6a65 6374 2c20 696e 636c 7564 696e 6720  ject, including 
-00028940: 756e 7361 7665 640a 2020 2020 2020 2020  unsaved.        
-00028950: 6d6f 6469 6669 6361 7469 6f6e 732e 0a0a  modifications...
-00028960: 2020 2020 2020 2020 2d20 5465 7374 733a          - Tests:
-00028970: 204d 6169 6e57 696e 646f 772e 6f70 656e   MainWindow.open
-00028980: 5f70 726f 6a65 6374 5f70 6f70 5f75 700a  _project_pop_up.
-00028990: 0a20 2020 2020 2020 202d 204d 6f63 6b73  .        - Mocks
-000289a0: 3a0a 2020 2020 2020 2020 2020 2020 2d20  :.            - 
-000289b0: 514d 6573 7361 6765 426f 782e 6578 6563  QMessageBox.exec
-000289c0: 0a20 2020 2020 2020 2020 2020 202d 2050  .            - P
-000289d0: 6f70 5570 4f70 656e 5072 6f6a 6563 742e  opUpOpenProject.
-000289e0: 6578 6563 0a20 2020 2020 2020 2020 2020  exec.           
-000289f0: 202d 2050 6f70 5570 5175 6974 2e65 7865   - PopUpQuit.exe
-00028a00: 630a 2020 2020 2020 2020 2222 220a 0a20  c.        """.. 
-00028a10: 2020 2020 2020 2023 2043 7265 6174 6573         # Creates
-00028a20: 2061 2074 6573 7420 7072 6f6a 6563 740a   a test project.
-00028a30: 2020 2020 2020 2020 7465 7374 5f70 726f          test_pro
-00028a40: 6a5f 7061 7468 203d 2073 656c 662e 6765  j_path = self.ge
-00028a50: 745f 6e65 775f 7465 7374 5f70 726f 6a65  t_new_test_proje
-00028a60: 6374 286c 6967 6874 3d54 7275 6529 0a20  ct(light=True). 
-00028a70: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
-00028a80: 5f77 696e 646f 772e 7377 6974 6368 5f70  _window.switch_p
-00028a90: 726f 6a65 6374 2874 6573 745f 7072 6f6a  roject(test_proj
-00028aa0: 5f70 6174 682c 2022 7465 7374 5f70 726f  _path, "test_pro
-00028ab0: 6a65 6374 2229 0a0a 2020 2020 2020 2020  ject")..        
-00028ac0: 2320 5365 7473 2073 686f 7274 6375 7473  # Sets shortcuts
-00028ad0: 2066 6f72 206f 626a 6563 7473 2074 6861   for objects tha
-00028ae0: 7420 6172 6520 6f66 7465 6e20 7573 6564  t are often used
-00028af0: 0a20 2020 2020 2020 2064 6174 615f 6272  .        data_br
-00028b00: 6f77 7365 7220 3d20 7365 6c66 2e6d 6169  owser = self.mai
-00028b10: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
-00028b20: 6f77 7365 720a 0a20 2020 2020 2020 2051  owser..        Q
-00028b30: 4d65 7373 6167 6542 6f78 2e65 7865 6320  MessageBox.exec 
-00028b40: 3d20 6c61 6d62 6461 2073 656c 665f 2c20  = lambda self_, 
-00028b50: 2a61 7267 3a20 7365 6c66 5f2e 7368 6f77  *arg: self_.show
-00028b60: 2829 0a0a 2020 2020 2020 2020 2320 5265  ()..        # Re
-00028b70: 7365 7473 2074 6865 2070 726f 6a65 6374  sets the project
-00028b80: 7320 7361 7665 2064 6972 6563 746f 7279  s save directory
-00028b90: 0a20 2020 2020 2020 2043 6f6e 6669 6728  .        Config(
-00028ba0: 292e 7365 745f 7072 6f6a 6563 7473 5f73  ).set_projects_s
-00028bb0: 6176 655f 7061 7468 284e 6f6e 6529 0a0a  ave_path(None)..
-00028bc0: 2020 2020 2020 2020 2320 5472 6965 7320          # Tries 
-00028bd0: 746f 206f 7065 6e20 6120 7072 6f6a 6563  to open a projec
-00028be0: 7420 7769 7468 6f75 7420 7365 7474 696e  t without settin
-00028bf0: 6720 7468 6520 7072 6f6a 6563 7473 2073  g the projects s
-00028c00: 6176 6520 6469 720a 2020 2020 2020 2020  ave dir.        
-00028c10: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00028c20: 2e6f 7065 6e5f 7072 6f6a 6563 745f 706f  .open_project_po
-00028c30: 705f 7570 2829 0a20 2020 2020 2020 2073  p_up().        s
-00028c40: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00028c50: 6d73 672e 6163 6365 7074 2829 0a0a 2020  msg.accept()..  
-00028c60: 2020 2020 2020 2320 5365 7473 2074 6865        # Sets the
-00028c70: 2070 726f 6a65 6374 7320 7361 7665 2064   projects save d
-00028c80: 6972 0a20 2020 2020 2020 2063 6f6e 6669  ir.        confi
-00028c90: 6720 3d20 436f 6e66 6967 2863 6f6e 6669  g = Config(confi
-00028ca0: 675f 7061 7468 3d73 656c 662e 636f 6e66  g_path=self.conf
-00028cb0: 6967 5f70 6174 6829 0a20 2020 2020 2020  ig_path).       
-00028cc0: 2063 6f6e 6669 672e 7365 745f 7072 6f6a   config.set_proj
-00028cd0: 6563 7473 5f73 6176 655f 7061 7468 286f  ects_save_path(o
-00028ce0: 732e 7061 7468 2e73 706c 6974 2874 6573  s.path.split(tes
-00028cf0: 745f 7072 6f6a 5f70 6174 6829 5b30 5d29  t_proj_path)[0])
-00028d00: 0a0a 2020 2020 2020 2020 506f 7055 704f  ..        PopUpO
-00028d10: 7065 6e50 726f 6a65 6374 2e65 7865 6320  penProject.exec 
-00028d20: 3d20 6c61 6d62 6461 2073 656c 665f 2c20  = lambda self_, 
-00028d30: 2a61 7267 3a20 7365 6c66 5f2e 7368 6f77  *arg: self_.show
-00028d40: 2829 0a0a 2020 2020 2020 2020 2320 4f70  ()..        # Op
-00028d50: 656e 7320 6120 7072 6f6a 6563 740a 2020  ens a project.  
-00028d60: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-00028d70: 7769 6e64 6f77 2e6f 7065 6e5f 7072 6f6a  window.open_proj
-00028d80: 6563 745f 706f 705f 7570 2829 0a0a 2020  ect_pop_up()..  
-00028d90: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-00028da0: 7769 6e64 6f77 2e65 7850 6f70 7570 2e67  window.exPopup.g
-00028db0: 6574 5f66 696c 656e 616d 6528 2874 6573  et_filename((tes
-00028dc0: 745f 7072 6f6a 5f70 6174 682c 2929 0a0a  t_proj_path,))..
-00028dd0: 2020 2020 2020 2020 2320 4465 6c65 7465          # Delete
-00028de0: 7320 6120 7363 616e 2066 726f 6d20 6461  s a scan from da
-00028df0: 7461 2062 726f 7773 6572 0a20 2020 2020  ta browser.     
-00028e00: 2020 2064 6174 615f 6272 6f77 7365 722e     data_browser.
-00028e10: 7461 626c 655f 6461 7461 2e73 656c 6563  table_data.selec
-00028e20: 7452 6f77 2830 290a 2020 2020 2020 2020  tRow(0).        
-00028e30: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00028e40: 2e64 6174 615f 6272 6f77 7365 722e 7461  .data_browser.ta
-00028e50: 626c 655f 6461 7461 2e72 656d 6f76 655f  ble_data.remove_
-00028e60: 7363 616e 2829 0a0a 2020 2020 2020 2020  scan()..        
-00028e70: 2320 4173 7365 7274 7320 7468 6174 2074  # Asserts that t
-00028e80: 6865 7265 2061 7265 2075 6e73 6176 6564  here are unsaved
-00028e90: 206d 6f64 6966 6963 6174 696f 6e0a 2020   modification.  
-00028ea0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00028eb0: 7454 7275 6528 7365 6c66 2e6d 6169 6e5f  tTrue(self.main_
-00028ec0: 7769 6e64 6f77 2e63 6865 636b 5f75 6e73  window.check_uns
-00028ed0: 6176 6564 5f6d 6f64 6966 6963 6174 696f  aved_modificatio
-00028ee0: 6e73 2829 290a 0a20 2020 2020 2020 2050  ns())..        P
-00028ef0: 6f70 5570 5175 6974 2e65 7865 6320 3d20  opUpQuit.exec = 
-00028f00: 6c61 6d62 6461 2073 656c 665f 3a20 7365  lambda self_: se
-00028f10: 6c66 5f2e 7368 6f77 2829 0a0a 2020 2020  lf_.show()..    
-00028f20: 2020 2020 2320 5472 6965 7320 746f 206f      # Tries to o
-00028f30: 7065 6e20 6120 7072 6f6a 6563 7420 7769  pen a project wi
-00028f40: 7468 2075 6e73 6176 6564 206d 6f64 6966  th unsaved modif
-00028f50: 6963 6174 696f 6e73 0a20 2020 2020 2020  ications.       
-00028f60: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-00028f70: 772e 6f70 656e 5f70 726f 6a65 6374 5f70  w.open_project_p
-00028f80: 6f70 5f75 7028 290a 2020 2020 2020 2020  op_up().        
-00028f90: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00028fa0: 2e70 6f70 5f75 705f 636c 6f73 652e 6163  .pop_up_close.ac
-00028fb0: 6365 7074 2829 0a0a 2020 2020 6465 6620  cept()..    def 
-00028fc0: 7465 7374 5f6f 7065 6e5f 7265 6365 6e74  test_open_recent
-00028fd0: 5f70 726f 6a65 6374 2873 656c 6629 3a0a  _project(self):.
-00028fe0: 2020 2020 2020 2020 2222 2243 7265 6174          """Creat
-00028ff0: 6573 2032 2074 6573 7420 7072 6f6a 6563  es 2 test projec
-00029000: 7473 2061 6e64 206f 7065 6e73 206f 6e65  ts and opens one
-00029010: 2062 7920 7468 6520 7265 6365 6e74 2070   by the recent p
-00029020: 726f 6a65 6374 7320 6163 7469 6f6e 2e0a  rojects action..
-00029030: 0a20 2020 2020 2020 202d 2054 6573 7473  .        - Tests
-00029040: 3a20 4d61 696e 5769 6e64 6f77 2e6f 7065  : MainWindow.ope
-00029050: 6e5f 7265 6365 6e74 5f70 726f 6a65 6374  n_recent_project
-00029060: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
-00029070: 2020 2020 2020 2320 4372 6561 7465 7320        # Creates 
-00029080: 3220 7465 7374 2070 726f 6a65 6374 730a  2 test projects.
-00029090: 2020 2020 2020 2020 7072 6f6a 5f74 6573          proj_tes
-000290a0: 745f 315f 7061 7468 203d 2073 656c 662e  t_1_path = self.
-000290b0: 6765 745f 6e65 775f 7465 7374 5f70 726f  get_new_test_pro
-000290c0: 6a65 6374 280a 2020 2020 2020 2020 2020  ject(.          
-000290d0: 2020 6e61 6d65 3d22 7465 7374 5f70 726f    name="test_pro
-000290e0: 6a65 6374 5f31 222c 206c 6967 6874 3d54  ject_1", light=T
-000290f0: 7275 650a 2020 2020 2020 2020 290a 2020  rue.        ).  
-00029100: 2020 2020 2020 7072 6f6a 5f74 6573 745f        proj_test_
-00029110: 325f 7061 7468 203d 2073 656c 662e 6765  2_path = self.ge
-00029120: 745f 6e65 775f 7465 7374 5f70 726f 6a65  t_new_test_proje
-00029130: 6374 280a 2020 2020 2020 2020 2020 2020  ct(.            
-00029140: 6e61 6d65 3d22 7465 7374 5f70 726f 6a65  name="test_proje
-00029150: 6374 5f32 222c 206c 6967 6874 3d54 7275  ct_2", light=Tru
-00029160: 650a 2020 2020 2020 2020 290a 0a20 2020  e.        )..   
-00029170: 2020 2020 2023 2053 7769 7463 6865 7320       # Switches 
-00029180: 746f 2074 6865 2066 6972 7374 206f 6e65  to the first one
+0000d330: 7561 6c28 6f6c 645f 6175 746f 5f73 6176  ual(old_auto_sav
+0000d340: 652c 2046 616c 7365 290a 0a20 2020 2020  e, False)..     
+0000d350: 2020 2023 2041 7574 6f20 7361 7665 2061     # Auto save a
+0000d360: 6374 6976 6174 6564 0a20 2020 2020 2020  ctivated.       
+0000d370: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+0000d380: 772e 6163 7469 6f6e 5f73 6f66 7477 6172  w.action_softwar
+0000d390: 655f 7072 6566 6572 656e 6365 732e 7472  e_preferences.tr
+0000d3a0: 6967 6765 7228 290a 2020 2020 2020 2020  igger().        
+0000d3b0: 7072 6f70 6572 7469 6573 203d 2073 656c  properties = sel
+0000d3c0: 662e 6d61 696e 5f77 696e 646f 772e 706f  f.main_window.po
+0000d3d0: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
+0000d3e0: 0a20 2020 2020 2020 2070 726f 7065 7274  .        propert
+0000d3f0: 6965 732e 7072 6f6a 6563 7473 5f73 6176  ies.projects_sav
+0000d400: 655f 7061 7468 5f6c 696e 655f 6564 6974  e_path_line_edit
+0000d410: 2e73 6574 5465 7874 280a 2020 2020 2020  .setText(.      
+0000d420: 2020 2020 2020 7465 6d70 6669 6c65 2e6d        tempfile.m
+0000d430: 6b64 7465 6d70 2870 7265 6669 783d 2270  kdtemp(prefix="p
+0000d440: 726f 6a65 6374 735f 7465 7374 7322 290a  rojects_tests").
+0000d450: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0000d460: 2020 7072 6f70 6572 7469 6573 2e74 6162    properties.tab
+0000d470: 5f77 6964 6765 742e 7365 7443 7572 7265  _widget.setCurre
+0000d480: 6e74 496e 6465 7828 3129 0a20 2020 2020  ntIndex(1).     
+0000d490: 2020 2070 726f 7065 7274 6965 732e 7361     properties.sa
+0000d4a0: 7665 5f63 6865 636b 626f 782e 7365 7443  ve_checkbox.setC
+0000d4b0: 6865 636b 6564 2854 7275 6529 0a20 2020  hecked(True).   
+0000d4c0: 2020 2020 2051 5465 7374 2e6d 6f75 7365       QTest.mouse
+0000d4d0: 436c 6963 6b28 7072 6f70 6572 7469 6573  Click(properties
+0000d4e0: 2e70 7573 685f 6275 7474 6f6e 5f6f 6b2c  .push_button_ok,
+0000d4f0: 2051 742e 4c65 6674 4275 7474 6f6e 290a   Qt.LeftButton).
+0000d500: 2020 2020 2020 2020 5154 6573 742e 7157          QTest.qW
+0000d510: 6169 7428 3530 3029 0a20 2020 2020 2020  ait(500).       
+0000d520: 2073 656c 662e 6578 6563 7574 655f 514d   self.execute_QM
+0000d530: 6573 7361 6765 426f 785f 636c 6963 6b4f  essageBox_clickO
+0000d540: 6b28 290a 0a20 2020 2020 2020 2063 6f6e  k()..        con
+0000d550: 6669 6720 3d20 436f 6e66 6967 2863 6f6e  fig = Config(con
+0000d560: 6669 675f 7061 7468 3d73 656c 662e 636f  fig_path=self.co
+0000d570: 6e66 6967 5f70 6174 6829 0a20 2020 2020  nfig_path).     
+0000d580: 2020 206e 6577 5f61 7574 6f5f 7361 7665     new_auto_save
+0000d590: 203d 2063 6f6e 6669 672e 6973 4175 746f   = config.isAuto
+0000d5a0: 5361 7665 2829 0a20 2020 2020 2020 2073  Save().        s
+0000d5b0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000d5c0: 6e65 775f 6175 746f 5f73 6176 652c 2054  new_auto_save, T
+0000d5d0: 7275 6529 0a0a 2020 2020 2020 2020 2320  rue)..        # 
+0000d5e0: 4175 746f 2073 6176 6520 6469 7361 626c  Auto save disabl
+0000d5f0: 6564 2061 6761 696e 0a20 2020 2020 2020  ed again.       
+0000d600: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+0000d610: 772e 6163 7469 6f6e 5f73 6f66 7477 6172  w.action_softwar
+0000d620: 655f 7072 6566 6572 656e 6365 732e 7472  e_preferences.tr
+0000d630: 6967 6765 7228 290a 2020 2020 2020 2020  igger().        
+0000d640: 7072 6f70 6572 7469 6573 203d 2073 656c  properties = sel
+0000d650: 662e 6d61 696e 5f77 696e 646f 772e 706f  f.main_window.po
+0000d660: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
+0000d670: 0a20 2020 2020 2020 2070 726f 7065 7274  .        propert
+0000d680: 6965 732e 7461 625f 7769 6467 6574 2e73  ies.tab_widget.s
+0000d690: 6574 4375 7272 656e 7449 6e64 6578 2831  etCurrentIndex(1
+0000d6a0: 290a 2020 2020 2020 2020 7072 6f70 6572  ).        proper
+0000d6b0: 7469 6573 2e73 6176 655f 6368 6563 6b62  ties.save_checkb
+0000d6c0: 6f78 2e73 6574 4368 6563 6b65 6428 4661  ox.setChecked(Fa
+0000d6d0: 6c73 6529 0a20 2020 2020 2020 2051 5465  lse).        QTe
+0000d6e0: 7374 2e6d 6f75 7365 436c 6963 6b28 7072  st.mouseClick(pr
+0000d6f0: 6f70 6572 7469 6573 2e70 7573 685f 6275  operties.push_bu
+0000d700: 7474 6f6e 5f6f 6b2c 2051 742e 4c65 6674  tton_ok, Qt.Left
+0000d710: 4275 7474 6f6e 290a 2020 2020 2020 2020  Button).        
+0000d720: 5154 6573 742e 7157 6169 7428 3530 3029  QTest.qWait(500)
+0000d730: 0a20 2020 2020 2020 2073 656c 662e 6578  .        self.ex
+0000d740: 6563 7574 655f 514d 6573 7361 6765 426f  ecute_QMessageBo
+0000d750: 785f 636c 6963 6b4f 6b28 290a 2020 2020  x_clickOk().    
+0000d760: 2020 2020 636f 6e66 6967 203d 2043 6f6e      config = Con
+0000d770: 6669 6728 636f 6e66 6967 5f70 6174 683d  fig(config_path=
+0000d780: 7365 6c66 2e63 6f6e 6669 675f 7061 7468  self.config_path
+0000d790: 290a 2020 2020 2020 2020 7265 7075 745f  ).        reput_
+0000d7a0: 6175 746f 5f73 6176 6520 3d20 636f 6e66  auto_save = conf
+0000d7b0: 6967 2e69 7341 7574 6f53 6176 6528 290a  ig.isAutoSave().
+0000d7c0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+0000d7d0: 6572 7445 7175 616c 2872 6570 7574 5f61  ertEqual(reput_a
+0000d7e0: 7574 6f5f 7361 7665 2c20 4661 6c73 6529  uto_save, False)
+0000d7f0: 0a0a 2020 2020 2020 2020 2320 4368 6563  ..        # Chec
+0000d800: 6b69 6e67 2074 6861 7420 7468 6520 6368  king that the ch
+0000d810: 616e 6765 7320 6172 6520 6e6f 7420 6566  anges are not ef
+0000d820: 6665 6374 6976 6520 6966 2063 616e 6365  fective if cance
+0000d830: 6c20 6973 2063 6c69 636b 6564 0a20 2020  l is clicked.   
+0000d840: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
+0000d850: 696e 646f 772e 6163 7469 6f6e 5f73 6f66  indow.action_sof
+0000d860: 7477 6172 655f 7072 6566 6572 656e 6365  tware_preference
+0000d870: 732e 7472 6967 6765 7228 290a 2020 2020  s.trigger().    
+0000d880: 2020 2020 7072 6f70 6572 7469 6573 203d      properties =
+0000d890: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+0000d8a0: 772e 706f 705f 7570 5f70 7265 6665 7265  w.pop_up_prefere
+0000d8b0: 6e63 6573 0a20 2020 2020 2020 2070 726f  nces.        pro
+0000d8c0: 7065 7274 6965 732e 7461 625f 7769 6467  perties.tab_widg
+0000d8d0: 6574 2e73 6574 4375 7272 656e 7449 6e64  et.setCurrentInd
+0000d8e0: 6578 2831 290a 2020 2020 2020 2020 7072  ex(1).        pr
+0000d8f0: 6f70 6572 7469 6573 2e73 6176 655f 6368  operties.save_ch
+0000d900: 6563 6b62 6f78 2e73 6574 4368 6563 6b65  eckbox.setChecke
+0000d910: 6428 5472 7565 290a 2020 2020 2020 2020  d(True).        
+0000d920: 5154 6573 742e 6d6f 7573 6543 6c69 636b  QTest.mouseClick
+0000d930: 2870 726f 7065 7274 6965 732e 7075 7368  (properties.push
+0000d940: 5f62 7574 746f 6e5f 6361 6e63 656c 2c20  _button_cancel, 
+0000d950: 5174 2e4c 6566 7442 7574 746f 6e29 0a20  Qt.LeftButton). 
+0000d960: 2020 2020 2020 2051 5465 7374 2e71 5761         QTest.qWa
+0000d970: 6974 2835 3030 290a 2020 2020 2020 2020  it(500).        
+0000d980: 7365 6c66 2e65 7865 6375 7465 5f51 4d65  self.execute_QMe
+0000d990: 7373 6167 6542 6f78 5f63 6c69 636b 4f6b  ssageBox_clickOk
+0000d9a0: 2829 0a20 2020 2020 2020 2063 6f6e 6669  ().        confi
+0000d9b0: 6720 3d20 436f 6e66 6967 2863 6f6e 6669  g = Config(confi
+0000d9c0: 675f 7061 7468 3d73 656c 662e 636f 6e66  g_path=self.conf
+0000d9d0: 6967 5f70 6174 6829 0a20 2020 2020 2020  ig_path).       
+0000d9e0: 2023 2063 6c65 6172 2063 6f6e 6669 6720   # clear config 
+0000d9f0: 2d3e 2075 7365 725f 6d6f 6465 2062 6563  -> user_mode bec
+0000da00: 6f6d 6520 5472 7565 2021 0a20 2020 2020  ome True !.     
+0000da10: 2020 2063 6f6e 6669 672e 636f 6e66 6967     config.config
+0000da20: 203d 207b 7d0a 2020 2020 2020 2020 6175   = {}.        au
+0000da30: 746f 5f73 6176 6520 3d20 636f 6e66 6967  to_save = config
+0000da40: 2e69 7341 7574 6f53 6176 6528 290a 2020  .isAutoSave().  
+0000da50: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000da60: 7445 7175 616c 2861 7574 6f5f 7361 7665  tEqual(auto_save
+0000da70: 2c20 4661 6c73 6529 0a0a 2020 2020 2020  , False)..      
+0000da80: 2020 2320 4368 6563 6b69 6e67 2074 6861    # Checking tha
+0000da90: 7420 7468 6520 7661 6c75 6573 2066 6f72  t the values for
+0000daa0: 2074 6865 2022 5072 6f6a 6563 7473 2070   the "Projects p
+0000dab0: 7265 6665 7265 6e63 6573 2220 6172 6520  references" are 
+0000dac0: 7765 6c6c 2073 6574 0a20 2020 2020 2020  well set.       
+0000dad0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000dae0: 6c28 636f 6e66 6967 2e67 6574 5f6d 6178  l(config.get_max
+0000daf0: 5f70 726f 6a65 6374 7328 292c 2035 290a  _projects(), 5).
+0000db00: 2020 2020 2020 2020 636f 6e66 6967 2e73          config.s
+0000db10: 6574 5f6d 6178 5f70 726f 6a65 6374 7328  et_max_projects(
+0000db20: 3729 0a20 2020 2020 2020 2073 656c 662e  7).        self.
+0000db30: 6173 7365 7274 4571 7561 6c28 636f 6e66  assertEqual(conf
+0000db40: 6967 2e67 6574 5f6d 6178 5f70 726f 6a65  ig.get_max_proje
+0000db50: 6374 7328 292c 2037 290a 2020 2020 2020  cts(), 7).      
+0000db60: 2020 636f 6e66 6967 2e73 6574 5f6d 6178    config.set_max
+0000db70: 5f70 726f 6a65 6374 7328 3529 0a0a 2020  _projects(5)..  
+0000db80: 2020 2020 2020 6d69 615f 7061 7468 203d        mia_path =
+0000db90: 206f 732e 7061 7468 2e6a 6f69 6e28 0a20   os.path.join(. 
+0000dba0: 2020 2020 2020 2020 2020 2063 6f6e 6669             confi
+0000dbb0: 672e 6765 745f 6d69 615f 7061 7468 2829  g.get_mia_path()
+0000dbc0: 2c20 2270 726f 7065 7274 6965 7322 2c20  , "properties", 
+0000dbd0: 2263 6f6e 6669 672e 796d 6c22 0a20 2020  "config.yml".   
+0000dbe0: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
+0000dbf0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000dc00: 6f73 2e70 6174 682e 6578 6973 7473 286d  os.path.exists(m
+0000dc10: 6961 5f70 6174 6829 2c20 5472 7565 290a  ia_path), True).
+0000dc20: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000dc30: 7365 7274 4571 7561 6c28 636f 6e66 6967  sertEqual(config
+0000dc40: 2e67 6574 5f75 7365 725f 6d6f 6465 2829  .get_user_mode()
+0000dc50: 2c20 5472 7565 290a 2020 2020 2020 2020  , True).        
+0000dc60: 636f 6e66 6967 2e73 6574 5f75 7365 725f  config.set_user_
+0000dc70: 6d6f 6465 2846 616c 7365 290a 2020 2020  mode(False).    
+0000dc80: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0000dc90: 7175 616c 2863 6f6e 6669 672e 6765 745f  qual(config.get_
+0000dca0: 7573 6572 5f6d 6f64 6528 292c 2046 616c  user_mode(), Fal
+0000dcb0: 7365 290a 0a20 2020 2020 2020 2073 656c  se)..        sel
+0000dcc0: 662e 6173 7365 7274 4571 7561 6c28 636f  f.assertEqual(co
+0000dcd0: 6e66 6967 2e67 6574 5f6d 7269 5f63 6f6e  nfig.get_mri_con
+0000dce0: 765f 7061 7468 2829 2c20 2222 290a 0a20  v_path(), "").. 
+0000dcf0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0000dd00: 7274 4571 7561 6c28 636f 6e66 6967 2e67  rtEqual(config.g
+0000dd10: 6574 5f6d 6174 6c61 625f 636f 6d6d 616e  et_matlab_comman
+0000dd20: 6428 292c 204e 6f6e 6529 0a20 2020 2020  d(), None).     
+0000dd30: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+0000dd40: 7561 6c28 636f 6e66 6967 2e67 6574 5f6d  ual(config.get_m
+0000dd50: 6174 6c61 625f 7061 7468 2829 2c20 4e6f  atlab_path(), No
+0000dd60: 6e65 290a 2020 2020 2020 2020 7365 6c66  ne).        self
+0000dd70: 2e61 7373 6572 7445 7175 616c 2863 6f6e  .assertEqual(con
+0000dd80: 6669 672e 6765 745f 6d61 746c 6162 5f73  fig.get_matlab_s
+0000dd90: 7461 6e64 616c 6f6e 655f 7061 7468 2829  tandalone_path()
+0000dda0: 2c20 2222 290a 2020 2020 2020 2020 7365  , "").        se
+0000ddb0: 6c66 2e61 7373 6572 7445 7175 616c 2863  lf.assertEqual(c
+0000ddc0: 6f6e 6669 672e 6765 745f 7370 6d5f 7061  onfig.get_spm_pa
+0000ddd0: 7468 2829 2c20 2222 290a 2020 2020 2020  th(), "").      
+0000dde0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0000ddf0: 616c 2863 6f6e 6669 672e 6765 745f 7370  al(config.get_sp
+0000de00: 6d5f 7374 616e 6461 6c6f 6e65 5f70 6174  m_standalone_pat
+0000de10: 6828 292c 2022 2229 0a20 2020 2020 2020  h(), "").       
+0000de20: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000de30: 6c28 636f 6e66 6967 2e67 6574 5f75 7365  l(config.get_use
+0000de40: 5f6d 6174 6c61 6228 292c 2046 616c 7365  _matlab(), False
+0000de50: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0000de60: 7373 6572 7445 7175 616c 2863 6f6e 6669  ssertEqual(confi
+0000de70: 672e 6765 745f 7573 655f 7370 6d28 292c  g.get_use_spm(),
+0000de80: 2046 616c 7365 290a 2020 2020 2020 2020   False).        
+0000de90: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+0000dea0: 2863 6f6e 6669 672e 6765 745f 7573 655f  (config.get_use_
+0000deb0: 7370 6d5f 7374 616e 6461 6c6f 6e65 2829  spm_standalone()
+0000dec0: 2c20 4661 6c73 6529 0a20 2020 2020 2020  , False).       
+0000ded0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000dee0: 6c28 636f 6e66 6967 2e67 6574 4261 636b  l(config.getBack
+0000def0: 6772 6f75 6e64 436f 6c6f 7228 292c 2022  groundColor(), "
+0000df00: 2229 0a20 2020 2020 2020 2073 656c 662e  ").        self.
+0000df10: 6173 7365 7274 4571 7561 6c28 636f 6e66  assertEqual(conf
+0000df20: 6967 2e67 6574 4368 6169 6e43 7572 736f  ig.getChainCurso
+0000df30: 7273 2829 2c20 4661 6c73 6529 0a20 2020  rs(), False).   
+0000df40: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000df50: 4571 7561 6c28 636f 6e66 6967 2e67 6574  Equal(config.get
+0000df60: 4e62 416c 6c53 6c69 6365 734d 6178 2829  NbAllSlicesMax()
+0000df70: 2c20 3130 290a 2020 2020 2020 2020 7365  , 10).        se
+0000df80: 6c66 2e61 7373 6572 7445 7175 616c 2863  lf.assertEqual(c
+0000df90: 6f6e 6669 672e 6765 7453 686f 7741 6c6c  onfig.getShowAll
+0000dfa0: 536c 6963 6573 2829 2c20 4661 6c73 6529  Slices(), False)
+0000dfb0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000dfc0: 7365 7274 4571 7561 6c28 636f 6e66 6967  sertEqual(config
+0000dfd0: 2e67 6574 5465 7874 436f 6c6f 7228 292c  .getTextColor(),
+0000dfe0: 2022 2229 0a20 2020 2020 2020 2073 656c   "").        sel
+0000dff0: 662e 6173 7365 7274 4571 7561 6c28 636f  f.assertEqual(co
+0000e000: 6e66 6967 2e67 6574 5468 756d 626e 6169  nfig.getThumbnai
+0000e010: 6c54 6167 2829 2c20 2253 6571 7565 6e63  lTag(), "Sequenc
+0000e020: 654e 616d 6522 290a 0a20 2020 2020 2020  eName")..       
+0000e030: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000e040: 6c28 0a20 2020 2020 2020 2020 2020 2046  l(.            F
+0000e050: 616c 7365 2c20 7665 7273 696f 6e2e 7061  alse, version.pa
+0000e060: 7273 6528 7961 6d6c 2e5f 5f76 6572 7369  rse(yaml.__versi
+0000e070: 6f6e 5f5f 2920 3e20 7665 7273 696f 6e2e  on__) > version.
+0000e080: 7061 7273 6528 2239 2e31 2229 0a20 2020  parse("9.1").   
+0000e090: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
+0000e0a0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000e0b0: 0a20 2020 2020 2020 2020 2020 2054 7275  .            Tru
+0000e0c0: 652c 2076 6572 7369 6f6e 2e70 6172 7365  e, version.parse
+0000e0d0: 2879 616d 6c2e 5f5f 7665 7273 696f 6e5f  (yaml.__version_
+0000e0e0: 5f29 203c 2076 6572 7369 6f6e 2e70 6172  _) < version.par
+0000e0f0: 7365 2822 392e 3122 290a 2020 2020 2020  se("9.1").      
+0000e100: 2020 290a 0a20 2020 2020 2020 2073 656c    )..        sel
+0000e110: 662e 6173 7365 7274 4571 7561 6c28 636f  f.assertEqual(co
+0000e120: 6e66 6967 2e67 6574 5f70 726f 6a65 6374  nfig.get_project
+0000e130: 735f 7361 7665 5f70 6174 6828 292c 2022  s_save_path(), "
+0000e140: 2229 0a0a 2020 2020 6465 6620 7465 7374  ")..    def test
+0000e150: 5f6d 696e 695f 7669 6577 6572 2873 656c  _mini_viewer(sel
+0000e160: 6629 3a0a 2020 2020 2020 2020 2222 2253  f):.        """S
+0000e170: 656c 6563 7473 2073 6361 6e73 2061 6e64  elects scans and
+0000e180: 2064 6973 706c 6179 2074 6865 6d20 696e   display them in
+0000e190: 2074 6865 206d 696e 6920 7669 6577 6572   the mini viewer
+0000e1a0: 2e0a 0a20 2020 2020 2020 202d 2054 6573  ...        - Tes
+0000e1b0: 7473 204d 696e 6956 6965 7765 722e 0a20  ts MiniViewer.. 
+0000e1c0: 2020 2020 2020 202d 2054 6865 206d 696e         - The min
+0000e1d0: 6920 7669 6577 6572 2064 6973 706c 6179  i viewer display
+0000e1e0: 7320 696e 666f 726d 6174 696f 6e20 6f66  s information of
+0000e1f0: 2074 6865 2073 656c 6563 7465 6420 7363   the selected sc
+0000e200: 616e 2069 6e20 610a 2020 2020 2020 2020  an in a.        
+0000e210: 2020 626f 7820 756e 6465 7220 7468 6520    box under the 
+0000e220: 7363 616e 7320 6c69 7374 2c20 696e 2074  scans list, in t
+0000e230: 6865 2064 6174 6120 6272 6f77 7365 7220  he data browser 
+0000e240: 7461 622e 0a20 2020 2020 2020 2022 2222  tab..        """
+0000e250: 0a0a 2020 2020 2020 2020 2320 4372 6561  ..        # Crea
+0000e260: 7465 7320 6120 6e65 7720 7072 6f6a 6563  tes a new projec
+0000e270: 7420 666f 6c64 6572 2061 6e64 2073 7769  t folder and swi
+0000e280: 7463 6865 7320 746f 2069 740a 2020 2020  tches to it.    
+0000e290: 2020 2020 6e65 775f 7072 6f6a 5f70 6174      new_proj_pat
+0000e2a0: 6820 3d20 7365 6c66 2e67 6574 5f6e 6577  h = self.get_new
+0000e2b0: 5f74 6573 745f 7072 6f6a 6563 7428 6c69  _test_project(li
+0000e2c0: 6768 743d 5472 7565 290a 2020 2020 2020  ght=True).      
+0000e2d0: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
+0000e2e0: 6f77 2e73 7769 7463 685f 7072 6f6a 6563  ow.switch_projec
+0000e2f0: 7428 6e65 775f 7072 6f6a 5f70 6174 682c  t(new_proj_path,
+0000e300: 2022 7465 7374 5f6c 6967 6874 5f70 726f   "test_light_pro
+0000e310: 6a65 6374 2229 0a0a 2020 2020 2020 2020  ject")..        
+0000e320: 2320 5365 7473 2073 686f 7274 6375 7473  # Sets shortcuts
+0000e330: 2066 6f72 206f 626a 6563 7473 2074 6861   for objects tha
+0000e340: 7420 6172 6520 6f66 7465 6e20 7573 6564  t are often used
+0000e350: 0a20 2020 2020 2020 2064 6174 615f 6272  .        data_br
+0000e360: 6f77 7365 7220 3d20 7365 6c66 2e6d 6169  owser = self.mai
+0000e370: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
+0000e380: 6f77 7365 720a 2020 2020 2020 2020 7669  owser.        vi
+0000e390: 6577 6572 203d 2073 656c 662e 6d61 696e  ewer = self.main
+0000e3a0: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
+0000e3b0: 7773 6572 2e76 6965 7765 720a 0a20 2020  wser.viewer..   
+0000e3c0: 2020 2020 2023 2053 656c 6563 7473 2074       # Selects t
+0000e3d0: 6865 2066 6972 7374 2073 6361 6e0a 2020  he first scan.  
+0000e3e0: 2020 2020 2020 6461 7461 5f62 726f 7773        data_brows
+0000e3f0: 6572 2e74 6162 6c65 5f64 6174 612e 6974  er.table_data.it
+0000e400: 656d 2830 2c20 3029 2e73 6574 5365 6c65  em(0, 0).setSele
+0000e410: 6374 6564 2854 7275 6529 0a0a 2020 2020  cted(True)..    
+0000e420: 2020 2020 2320 4765 7473 2074 6865 2033      # Gets the 3
+0000e430: 4420 736c 6964 6572 2072 616e 6765 0a20  D slider range. 
+0000e440: 2020 2020 2020 2073 6c69 6465 725f 3344         slider_3D
+0000e450: 5f72 616e 6765 203d 2076 6965 7765 722e  _range = viewer.
+0000e460: 736c 6964 6572 5f33 445b 305d 2e6d 6178  slider_3D[0].max
+0000e470: 696d 756d 2829 0a0a 2020 2020 2020 2020  imum()..        
+0000e480: 2320 4d6f 7665 7320 7468 6520 3344 2073  # Moves the 3D s
+0000e490: 6c69 6465 2074 6f20 7468 6520 6d69 6464  lide to the midd
+0000e4a0: 6c65 206f 6620 7468 6520 7261 6e67 650a  le of the range.
+0000e4b0: 2020 2020 2020 2020 7669 6577 6572 2e73          viewer.s
+0000e4c0: 6c69 6465 725f 3344 5b30 5d2e 7365 7456  lider_3D[0].setV
+0000e4d0: 616c 7565 2869 6e74 2873 6c69 6465 725f  alue(int(slider_
+0000e4e0: 3344 5f72 616e 6765 202f 2032 2929 0a0a  3D_range / 2))..
+0000e4f0: 2020 2020 2020 2020 2320 5368 6f77 7320          # Shows 
+0000e500: 616c 6c20 736c 6963 6573 0a20 2020 2020  all slices.     
+0000e510: 2020 2076 6965 7765 722e 6368 6563 6b5f     viewer.check_
+0000e520: 626f 785f 736c 6963 6573 2e73 6574 4368  box_slices.setCh
+0000e530: 6563 6b53 7461 7465 2851 742e 4368 6563  eckState(Qt.Chec
+0000e540: 6b65 6429 0a0a 2020 2020 2020 2020 2320  ked)..        # 
+0000e550: 556e 6368 6563 6b73 2073 686f 7720 616c  Unchecks show al
+0000e560: 6c20 736c 6963 6573 0a20 2020 2020 2020  l slices.       
+0000e570: 2076 6965 7765 722e 6368 6563 6b5f 626f   viewer.check_bo
+0000e580: 785f 736c 6963 6573 2e73 6574 4368 6563  x_slices.setChec
+0000e590: 6b53 7461 7465 2851 742e 4368 6563 6b65  kState(Qt.Checke
+0000e5a0: 6429 0a0a 2020 2020 2020 2020 2320 4368  d)..        # Ch
+0000e5b0: 6563 6b73 2074 6865 2063 6861 696e 2063  ecks the chain c
+0000e5c0: 7572 736f 7273 0a20 2020 2020 2020 2076  ursors.        v
+0000e5d0: 6965 7765 722e 6368 6563 6b5f 626f 785f  iewer.check_box_
+0000e5e0: 6375 7273 6f72 732e 7365 7443 6865 636b  cursors.setCheck
+0000e5f0: 5374 6174 6528 5174 2e43 6865 636b 6564  State(Qt.Checked
+0000e600: 290a 0a20 2020 2020 2020 2023 2053 656c  )..        # Sel
+0000e610: 6563 7473 2074 6865 2073 6563 6f6e 6420  ects the second 
+0000e620: 7363 616e 0a20 2020 2020 2020 2064 6174  scan.        dat
+0000e630: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
+0000e640: 6461 7461 2e69 7465 6d28 312c 2030 292e  data.item(1, 0).
+0000e650: 7365 7453 656c 6563 7465 6428 5472 7565  setSelected(True
+0000e660: 290a 0a20 2020 2020 2020 2023 204d 6f76  )..        # Mov
+0000e670: 6573 2074 6865 2033 4420 736c 6964 6573  es the 3D slides
+0000e680: 2074 6f20 7468 6520 6c6f 7765 7220 6c69   to the lower li
+0000e690: 6d69 740a 2020 2020 2020 2020 7669 6577  mit.        view
+0000e6a0: 6572 2e73 6c69 6465 725f 3344 5b30 5d2e  er.slider_3D[0].
+0000e6b0: 7365 7456 616c 7565 2830 290a 0a20 2020  setValue(0)..   
+0000e6c0: 2020 2020 2023 204d 6f76 6573 2074 6865       # Moves the
+0000e6d0: 2033 4420 736c 6964 6573 2074 6f20 7468   3D slides to th
+0000e6e0: 6520 6d69 6464 6c65 206f 6620 7468 6520  e middle of the 
+0000e6f0: 7261 6e67 650a 2020 2020 2020 2020 7669  range.        vi
+0000e700: 6577 6572 2e73 6c69 6465 725f 3344 5b30  ewer.slider_3D[0
+0000e710: 5d2e 7365 7456 616c 7565 2869 6e74 2873  ].setValue(int(s
+0000e720: 6c69 6465 725f 3344 5f72 616e 6765 202f  lider_3D_range /
+0000e730: 2032 2929 0a0a 2020 2020 2020 2020 2320   2))..        # 
+0000e740: 4d6f 7665 7320 7468 6520 3344 2073 6c69  Moves the 3D sli
+0000e750: 6465 7320 746f 2074 6865 206d 6964 646c  des to the middl
+0000e760: 6520 6f66 2074 6865 2072 616e 6765 0a20  e of the range. 
+0000e770: 2020 2020 2020 2076 6965 7765 722e 736c         viewer.sl
+0000e780: 6964 6572 5f33 445b 305d 2e73 6574 5661  ider_3D[0].setVa
+0000e790: 6c75 6528 736c 6964 6572 5f33 445f 7261  lue(slider_3D_ra
+0000e7a0: 6e67 6529 0a0a 2020 2020 2020 2020 2320  nge)..        # 
+0000e7b0: 556e 6368 6563 6b73 2074 6865 2063 6861  Unchecks the cha
+0000e7c0: 696e 2063 7572 736f 7273 0a20 2020 2020  in cursors.     
+0000e7d0: 2020 2076 6965 7765 722e 6368 6563 6b5f     viewer.check_
+0000e7e0: 626f 785f 6375 7273 6f72 732e 7365 7443  box_cursors.setC
+0000e7f0: 6865 636b 5374 6174 6528 5174 2e55 6e63  heckState(Qt.Unc
+0000e800: 6865 636b 6564 290a 0a20 2020 2020 2020  hecked)..       
+0000e810: 2076 6965 7765 722e 7570 6461 7465 5f6e   viewer.update_n
+0000e820: 625f 736c 6963 6573 2829 0a0a 2020 2020  b_slices()..    
+0000e830: 6465 6620 7465 7374 5f6d 6f64 6966 795f  def test_modify_
+0000e840: 7461 626c 6528 7365 6c66 293a 0a20 2020  table(self):.   
+0000e850: 2020 2020 2022 2222 5465 7374 2074 6865       """Test the
+0000e860: 206d 6f64 6966 795f 7461 626c 6520 6d6f   modify_table mo
+0000e870: 6475 6c65 2e22 2222 0a0a 2020 2020 2020  dule."""..      
+0000e880: 2020 7072 6f6a 6563 745f 385f 7061 7468    project_8_path
+0000e890: 203d 2073 656c 662e 6765 745f 6e65 775f   = self.get_new_
+0000e8a0: 7465 7374 5f70 726f 6a65 6374 2829 0a20  test_project(). 
+0000e8b0: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
+0000e8c0: 5f77 696e 646f 772e 7377 6974 6368 5f70  _window.switch_p
+0000e8d0: 726f 6a65 6374 2870 726f 6a65 6374 5f38  roject(project_8
+0000e8e0: 5f70 6174 682c 2022 7072 6f6a 6563 745f  _path, "project_
+0000e8f0: 3822 290a 2020 2020 2020 2020 7363 616e  8").        scan
+0000e900: 735f 6469 7370 6c61 7965 6420 3d20 5b5d  s_displayed = []
+0000e910: 0a20 2020 2020 2020 2069 7465 6d20 3d20  .        item = 
+0000e920: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+0000e930: 2e64 6174 615f 6272 6f77 7365 722e 7461  .data_browser.ta
+0000e940: 626c 655f 6461 7461 2e69 7465 6d28 302c  ble_data.item(0,
+0000e950: 2030 290a 2020 2020 2020 2020 7363 616e   0).        scan
+0000e960: 5f6e 616d 6520 3d20 6974 656d 2e74 6578  _name = item.tex
+0000e970: 7428 290a 0a20 2020 2020 2020 2023 2054  t()..        # T
+0000e980: 6573 7420 7661 6c75 6573 206f 6620 6120  est values of a 
+0000e990: 6c69 7374 206f 6620 666c 6f61 7473 0a20  list of floats. 
+0000e9a0: 2020 2020 2020 2076 616c 7565 203d 205b         value = [
+0000e9b0: 352e 302c 2033 2e30 5d0a 2020 2020 2020  5.0, 3.0].      
+0000e9c0: 2020 7461 675f 6e61 6d65 203d 205b 2246    tag_name = ["F
+0000e9d0: 4f56 225d 0a20 2020 2020 2020 2069 6620  OV"].        if 
+0000e9e0: 6e6f 7420 7365 6c66 2e6d 6169 6e5f 7769  not self.main_wi
+0000e9f0: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
+0000ea00: 722e 7461 626c 655f 6461 7461 2e69 7352  r.table_data.isR
+0000ea10: 6f77 4869 6464 656e 2830 293a 0a20 2020  owHidden(0):.   
+0000ea20: 2020 2020 2020 2020 2073 6361 6e73 5f64           scans_d
+0000ea30: 6973 706c 6179 6564 2e61 7070 656e 6428  isplayed.append(
+0000ea40: 7363 616e 5f6e 616d 6529 0a0a 2020 2020  scan_name)..    
+0000ea50: 2020 2020 2320 5465 7374 2074 6861 7420      # Test that 
+0000ea60: 7468 6520 7661 6c75 6520 7769 6c6c 206e  the value will n
+0000ea70: 6f74 2063 6861 6e67 6520 6966 2074 6865  ot change if the
+0000ea80: 2074 6167 2773 2074 7970 6520 6973 2069   tag's type is i
+0000ea90: 6e63 6f72 7265 6374 0a20 2020 2020 2020  ncorrect.       
+0000eaa0: 206f 6c64 5f76 616c 7565 203d 2073 656c   old_value = sel
+0000eab0: 662e 6d61 696e 5f77 696e 646f 772e 7072  f.main_window.pr
+0000eac0: 6f6a 6563 742e 7365 7373 696f 6e2e 6765  oject.session.ge
+0000ead0: 745f 7661 6c75 6528 0a20 2020 2020 2020  t_value(.       
+0000eae0: 2020 2020 2043 4f4c 4c45 4354 494f 4e5f       COLLECTION_
+0000eaf0: 4355 5252 454e 542c 2073 6361 6e73 5f64  CURRENT, scans_d
+0000eb00: 6973 706c 6179 6564 5b30 5d2c 2022 464f  isplayed[0], "FO
+0000eb10: 5622 0a20 2020 2020 2020 2029 0a0a 2020  V".        )..  
+0000eb20: 2020 2020 2020 6d6f 6420 3d20 4d6f 6469        mod = Modi
+0000eb30: 6679 5461 626c 6528 0a20 2020 2020 2020  fyTable(.       
+0000eb40: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
+0000eb50: 696e 646f 772e 7072 6f6a 6563 742c 0a20  indow.project,. 
+0000eb60: 2020 2020 2020 2020 2020 2076 616c 7565             value
+0000eb70: 2c0a 2020 2020 2020 2020 2020 2020 5b74  ,.            [t
+0000eb80: 7970 6528 2273 7472 696e 6722 295d 2c0a  ype("string")],.
+0000eb90: 2020 2020 2020 2020 2020 2020 7363 616e              scan
+0000eba0: 735f 6469 7370 6c61 7965 642c 0a20 2020  s_displayed,.   
+0000ebb0: 2020 2020 2020 2020 2074 6167 5f6e 616d           tag_nam
+0000ebc0: 652c 0a20 2020 2020 2020 2029 0a20 2020  e,.        ).   
+0000ebd0: 2020 2020 206d 6f64 2e75 7064 6174 655f       mod.update_
+0000ebe0: 7461 626c 655f 7661 6c75 6573 2854 7275  table_values(Tru
+0000ebf0: 6529 0a20 2020 2020 2020 206e 6577 5f76  e).        new_v
+0000ec00: 616c 7565 203d 2073 656c 662e 6d61 696e  alue = self.main
+0000ec10: 5f77 696e 646f 772e 7072 6f6a 6563 742e  _window.project.
+0000ec20: 7365 7373 696f 6e2e 6765 745f 7661 6c75  session.get_valu
+0000ec30: 6528 0a20 2020 2020 2020 2020 2020 2043  e(.            C
+0000ec40: 4f4c 4c45 4354 494f 4e5f 4355 5252 454e  OLLECTION_CURREN
+0000ec50: 542c 2073 6361 6e73 5f64 6973 706c 6179  T, scans_display
+0000ec60: 6564 5b30 5d2c 2022 464f 5622 0a20 2020  ed[0], "FOV".   
+0000ec70: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
+0000ec80: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000ec90: 6f6c 645f 7661 6c75 652c 206e 6577 5f76  old_value, new_v
+0000eca0: 616c 7565 290a 0a20 2020 2020 2020 2023  alue)..        #
+0000ecb0: 2054 6573 7420 7468 6174 2074 6865 2076   Test that the v
+0000ecc0: 616c 7565 2077 696c 6c20 6368 616e 6765  alue will change
+0000ecd0: 2077 6865 6e20 616c 6c20 7061 7261 6d65   when all parame
+0000ece0: 7465 7273 2061 7265 2063 6f72 7265 6374  ters are correct
+0000ecf0: 0a20 2020 2020 2020 2074 6167 5f6f 626a  .        tag_obj
+0000ed00: 6563 7420 3d20 7365 6c66 2e6d 6169 6e5f  ect = self.main_
+0000ed10: 7769 6e64 6f77 2e70 726f 6a65 6374 2e73  window.project.s
+0000ed20: 6573 7369 6f6e 2e67 6574 5f66 6965 6c64  ession.get_field
+0000ed30: 280a 2020 2020 2020 2020 2020 2020 434f  (.            CO
+0000ed40: 4c4c 4543 5449 4f4e 5f43 5552 5245 4e54  LLECTION_CURRENT
+0000ed50: 2c20 2246 4f56 220a 2020 2020 2020 2020  , "FOV".        
+0000ed60: 290a 2020 2020 2020 2020 6d6f 6420 3d20  ).        mod = 
+0000ed70: 4d6f 6469 6679 5461 626c 6528 0a20 2020  ModifyTable(.   
+0000ed80: 2020 2020 2020 2020 2073 656c 662e 6d61           self.ma
+0000ed90: 696e 5f77 696e 646f 772e 7072 6f6a 6563  in_window.projec
+0000eda0: 742c 0a20 2020 2020 2020 2020 2020 2076  t,.            v
+0000edb0: 616c 7565 2c0a 2020 2020 2020 2020 2020  alue,.          
+0000edc0: 2020 5b74 6167 5f6f 626a 6563 742e 6669    [tag_object.fi
+0000edd0: 656c 645f 7479 7065 5d2c 0a20 2020 2020  eld_type],.     
+0000ede0: 2020 2020 2020 2073 6361 6e73 5f64 6973         scans_dis
+0000edf0: 706c 6179 6564 2c0a 2020 2020 2020 2020  played,.        
+0000ee00: 2020 2020 7461 675f 6e61 6d65 2c0a 2020      tag_name,.  
+0000ee10: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0000ee20: 6d6f 642e 7570 6461 7465 5f74 6162 6c65  mod.update_table
+0000ee30: 5f76 616c 7565 7328 5472 7565 290a 2020  _values(True).  
+0000ee40: 2020 2020 2020 6e65 775f 7661 6c75 6520        new_value 
+0000ee50: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
+0000ee60: 6f77 2e70 726f 6a65 6374 2e73 6573 7369  ow.project.sessi
+0000ee70: 6f6e 2e67 6574 5f76 616c 7565 280a 2020  on.get_value(.  
+0000ee80: 2020 2020 2020 2020 2020 434f 4c4c 4543            COLLEC
+0000ee90: 5449 4f4e 5f43 5552 5245 4e54 2c20 7363  TION_CURRENT, sc
+0000eea0: 616e 735f 6469 7370 6c61 7965 645b 305d  ans_displayed[0]
+0000eeb0: 2c20 2246 4f56 220a 2020 2020 2020 2020  , "FOV".        
+0000eec0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0000eed0: 7373 6572 7445 7175 616c 286d 6f64 2e74  ssertEqual(mod.t
+0000eee0: 6162 6c65 2e63 6f6c 756d 6e43 6f75 6e74  able.columnCount
+0000eef0: 2829 2c20 3229 0a20 2020 2020 2020 2073  (), 2).        s
+0000ef00: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000ef10: 7661 6c75 652c 206e 6577 5f76 616c 7565  value, new_value
+0000ef20: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
+0000ef30: 6d75 6c74 6970 6c65 5f73 6f72 7428 7365  multiple_sort(se
+0000ef40: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
+0000ef50: 5465 7374 7320 7468 6520 6d75 6c74 6970  Tests the multip
+0000ef60: 6c65 2073 6f72 7420 706f 7075 702e 2222  le sort popup.""
+0000ef70: 220a 0a20 2020 2020 2020 2070 726f 6a65  "..        proje
+0000ef80: 6374 5f38 5f70 6174 6820 3d20 7365 6c66  ct_8_path = self
+0000ef90: 2e67 6574 5f6e 6577 5f74 6573 745f 7072  .get_new_test_pr
+0000efa0: 6f6a 6563 7428 290a 2020 2020 2020 2020  oject().        
+0000efb0: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+0000efc0: 2e73 7769 7463 685f 7072 6f6a 6563 7428  .switch_project(
+0000efd0: 7072 6f6a 6563 745f 385f 7061 7468 2c20  project_8_path, 
+0000efe0: 2270 726f 6a65 6374 5f38 2229 0a0a 2020  "project_8")..  
+0000eff0: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
+0000f000: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
+0000f010: 7365 722e 7461 626c 655f 6461 7461 2e69  ser.table_data.i
+0000f020: 7465 6d43 6861 6e67 6564 2e64 6973 636f  temChanged.disco
+0000f030: 6e6e 6563 7428 290a 2020 2020 2020 2020  nnect().        
+0000f040: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+0000f050: 2e64 6174 615f 6272 6f77 7365 722e 7461  .data_browser.ta
+0000f060: 626c 655f 6461 7461 2e6d 756c 7469 706c  ble_data.multipl
+0000f070: 655f 736f 7274 5f70 6f70 5f75 7028 290a  e_sort_pop_up().
+0000f080: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
+0000f090: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
+0000f0a0: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
+0000f0b0: 2e69 7465 6d43 6861 6e67 6564 2e63 6f6e  .itemChanged.con
+0000f0c0: 6e65 6374 280a 2020 2020 2020 2020 2020  nect(.          
+0000f0d0: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
+0000f0e0: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
+0000f0f0: 7461 626c 655f 6461 7461 2e63 6861 6e67  table_data.chang
+0000f100: 655f 6365 6c6c 5f63 6f6c 6f72 0a20 2020  e_cell_color.   
+0000f110: 2020 2020 2029 0a20 2020 2020 2020 206d       ).        m
+0000f120: 756c 7469 706c 655f 736f 7274 203d 2073  ultiple_sort = s
+0000f130: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+0000f140: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
+0000f150: 6c65 5f64 6174 612e 706f 705f 7570 0a0a  le_data.pop_up..
+0000f160: 2020 2020 2020 2020 6d75 6c74 6970 6c65          multiple
+0000f170: 5f73 6f72 742e 7075 7368 5f62 7574 746f  _sort.push_butto
+0000f180: 6e73 5b30 5d2e 7365 7454 6578 7428 2242  ns[0].setText("B
+0000f190: 616e 6457 6964 7468 2229 0a20 2020 2020  andWidth").     
+0000f1a0: 2020 206d 756c 7469 706c 655f 736f 7274     multiple_sort
+0000f1b0: 2e66 696c 6c5f 7661 6c75 6573 2830 290a  .fill_values(0).
+0000f1c0: 2020 2020 2020 2020 6d75 6c74 6970 6c65          multiple
+0000f1d0: 5f73 6f72 742e 7075 7368 5f62 7574 746f  _sort.push_butto
+0000f1e0: 6e73 5b31 5d2e 7365 7454 6578 7428 2245  ns[1].setText("E
+0000f1f0: 7870 2054 7970 6522 290a 2020 2020 2020  xp Type").      
+0000f200: 2020 6d75 6c74 6970 6c65 5f73 6f72 742e    multiple_sort.
+0000f210: 6669 6c6c 5f76 616c 7565 7328 3129 0a20  fill_values(1). 
+0000f220: 2020 2020 2020 2051 5465 7374 2e6d 6f75         QTest.mou
+0000f230: 7365 436c 6963 6b28 6d75 6c74 6970 6c65  seClick(multiple
+0000f240: 5f73 6f72 742e 7075 7368 5f62 7574 746f  _sort.push_butto
+0000f250: 6e5f 736f 7274 2c20 5174 2e4c 6566 7442  n_sort, Qt.LeftB
+0000f260: 7574 746f 6e29 0a0a 2020 2020 2020 2020  utton)..        
+0000f270: 7363 616e 203d 2073 656c 662e 6d61 696e  scan = self.main
+0000f280: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
+0000f290: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
+0000f2a0: 6974 656d 2830 2c20 3029 2e74 6578 7428  item(0, 0).text(
+0000f2b0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0000f2c0: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
+0000f2d0: 2020 2020 2020 2020 7363 616e 2c0a 2020          scan,.  
+0000f2e0: 2020 2020 2020 2020 2020 2264 6174 612f            "data/
+0000f2f0: 7261 775f 6461 7461 2f47 7565 7262 6574  raw_data/Guerbet
+0000f300: 2d43 362d 3230 3134 2d52 6174 2d4b 3532  -C6-2014-Rat-K52
+0000f310: 2d54 7562 6532 372d 3230 3134 220a 2020  -Tube27-2014".  
+0000f320: 2020 2020 2020 2020 2020 222d 3032 2d31            "-02-1
+0000f330: 3431 3032 3331 372d 3130 2d47 335f 4775  4102317-10-G3_Gu
+0000f340: 6572 6265 745f 4d44 4546 542d 4d44 4546  erbet_MDEFT-MDEF
+0000f350: 5470 766d 2d30 3030 3934 3022 0a20 2020  Tpvm-000940".   
+0000f360: 2020 2020 2020 2020 2022 5f38 3030 2e6e           "_800.n
+0000f370: 6969 222c 0a20 2020 2020 2020 2029 0a20  ii",.        ). 
+0000f380: 2020 2020 2020 2073 6361 6e20 3d20 7365         scan = se
+0000f390: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
+0000f3a0: 6174 615f 6272 6f77 7365 722e 7461 626c  ata_browser.tabl
+0000f3b0: 655f 6461 7461 2e69 7465 6d28 312c 2030  e_data.item(1, 0
+0000f3c0: 292e 7465 7874 2829 0a20 2020 2020 2020  ).text().       
+0000f3d0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000f3e0: 6c28 0a20 2020 2020 2020 2020 2020 2073  l(.            s
+0000f3f0: 6361 6e2c 0a20 2020 2020 2020 2020 2020  can,.           
+0000f400: 2022 6461 7461 2f72 6177 5f64 6174 612f   "data/raw_data/
+0000f410: 4775 6572 6265 742d 4336 2d32 3031 342d  Guerbet-C6-2014-
+0000f420: 5261 742d 4b35 322d 5475 6265 3237 2d32  Rat-K52-Tube27-2
+0000f430: 3031 3422 0a20 2020 2020 2020 2020 2020  014".           
+0000f440: 2022 2d30 322d 3134 3130 3233 3137 2d30   "-02-14102317-0
+0000f450: 342d 4733 5f47 7565 7262 6574 5f4d 4445  4-G3_Guerbet_MDE
+0000f460: 4654 2d4d 4445 4654 7076 6d2d 3030 3039  FT-MDEFTpvm-0009
+0000f470: 3430 220a 2020 2020 2020 2020 2020 2020  40".            
+0000f480: 225f 3830 302e 6e69 6922 2c0a 2020 2020  "_800.nii",.    
+0000f490: 2020 2020 290a 2020 2020 2020 2020 7363      ).        sc
+0000f4a0: 616e 203d 2073 656c 662e 6d61 696e 5f77  an = self.main_w
+0000f4b0: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
+0000f4c0: 6572 2e74 6162 6c65 5f64 6174 612e 6974  er.table_data.it
+0000f4d0: 656d 2832 2c20 3029 2e74 6578 7428 290a  em(2, 0).text().
+0000f4e0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+0000f4f0: 6572 7445 7175 616c 280a 2020 2020 2020  ertEqual(.      
+0000f500: 2020 2020 2020 7363 616e 2c0a 2020 2020        scan,.    
+0000f510: 2020 2020 2020 2020 2264 6174 612f 7261          "data/ra
+0000f520: 775f 6461 7461 2f47 7565 7262 6574 2d43  w_data/Guerbet-C
+0000f530: 362d 3230 3134 2d52 6174 2d4b 3532 2d54  6-2014-Rat-K52-T
+0000f540: 7562 6532 3722 0a20 2020 2020 2020 2020  ube27".         
+0000f550: 2020 2022 2d32 3031 342d 3032 2d31 3431     "-2014-02-141
+0000f560: 3032 3331 372d 3031 2d47 315f 4775 6572  02317-01-G1_Guer
+0000f570: 6265 745f 416e 6174 2d52 4152 4570 766d  bet_Anat-RAREpvm
+0000f580: 220a 2020 2020 2020 2020 2020 2020 222d  ".            "-
+0000f590: 3030 3032 3230 5f30 3030 2e6e 6969 222c  000220_000.nii",
+0000f5a0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+0000f5b0: 2020 2073 6361 6e20 3d20 7365 6c66 2e6d     scan = self.m
+0000f5c0: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
+0000f5d0: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
+0000f5e0: 7461 2e69 7465 6d28 332c 2030 292e 7465  ta.item(3, 0).te
+0000f5f0: 7874 2829 0a20 2020 2020 2020 2073 656c  xt().        sel
+0000f600: 662e 6173 7365 7274 4571 7561 6c28 0a20  f.assertEqual(. 
+0000f610: 2020 2020 2020 2020 2020 2073 6361 6e2c             scan,
+0000f620: 0a20 2020 2020 2020 2020 2020 2022 6461  .            "da
+0000f630: 7461 2f64 6572 6976 6564 5f64 6174 612f  ta/derived_data/
+0000f640: 7347 7565 7262 6574 2d43 362d 3230 3134  sGuerbet-C6-2014
+0000f650: 2d52 6174 2d4b 3532 2d54 7562 6532 3722  -Rat-K52-Tube27"
+0000f660: 0a20 2020 2020 2020 2020 2020 2022 2d32  .            "-2
+0000f670: 3031 342d 3032 2d31 3431 3032 3331 372d  014-02-14102317-
+0000f680: 3031 2d47 315f 4775 6572 6265 745f 416e  01-G1_Guerbet_An
+0000f690: 6174 2d52 4152 4570 766d 220a 2020 2020  at-RAREpvm".    
+0000f6a0: 2020 2020 2020 2020 222d 3030 3032 3230          "-000220
+0000f6b0: 5f30 3030 2e6e 6969 222c 0a20 2020 2020  _000.nii",.     
+0000f6c0: 2020 2029 0a20 2020 2020 2020 2073 6361     ).        sca
+0000f6d0: 6e20 3d20 7365 6c66 2e6d 6169 6e5f 7769  n = self.main_wi
+0000f6e0: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
+0000f6f0: 722e 7461 626c 655f 6461 7461 2e69 7465  r.table_data.ite
+0000f700: 6d28 342c 2030 292e 7465 7874 2829 0a20  m(4, 0).text(). 
+0000f710: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0000f720: 7274 4571 7561 6c28 0a20 2020 2020 2020  rtEqual(.       
+0000f730: 2020 2020 2073 6361 6e2c 0a20 2020 2020       scan,.     
+0000f740: 2020 2020 2020 2022 6461 7461 2f72 6177         "data/raw
+0000f750: 5f64 6174 612f 4775 6572 6265 742d 4336  _data/Guerbet-C6
+0000f760: 2d32 3031 342d 5261 742d 4b35 322d 5475  -2014-Rat-K52-Tu
+0000f770: 6265 3237 220a 2020 2020 2020 2020 2020  be27".          
+0000f780: 2020 222d 3230 3134 2d30 322d 3134 3130    "-2014-02-1410
+0000f790: 3233 3137 2d31 312d 4734 5f47 7565 7262  2317-11-G4_Guerb
+0000f7a0: 6574 5f54 3153 455f 3830 302d 5241 5245  et_T1SE_800-RARE
+0000f7b0: 7076 6d22 0a20 2020 2020 2020 2020 2020  pvm".           
+0000f7c0: 2022 2d30 3030 3134 325f 3430 302e 6e69   "-000142_400.ni
+0000f7d0: 6922 2c0a 2020 2020 2020 2020 290a 2020  i",.        ).  
+0000f7e0: 2020 2020 2020 7363 616e 203d 2073 656c        scan = sel
+0000f7f0: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
+0000f800: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
+0000f810: 5f64 6174 612e 6974 656d 2835 2c20 3029  _data.item(5, 0)
+0000f820: 2e74 6578 7428 290a 2020 2020 2020 2020  .text().        
+0000f830: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+0000f840: 280a 2020 2020 2020 2020 2020 2020 7363  (.            sc
+0000f850: 616e 2c0a 2020 2020 2020 2020 2020 2020  an,.            
+0000f860: 2264 6174 612f 7261 775f 6461 7461 2f47  "data/raw_data/G
+0000f870: 7565 7262 6574 2d43 362d 3230 3134 2d52  uerbet-C6-2014-R
+0000f880: 6174 2d4b 3532 2d54 7562 6532 3722 0a20  at-K52-Tube27". 
+0000f890: 2020 2020 2020 2020 2020 2022 2d32 3031             "-201
+0000f8a0: 342d 3032 2d31 3431 3032 3331 372d 3039  4-02-14102317-09
+0000f8b0: 2d47 345f 4775 6572 6265 745f 5431 5345  -G4_Guerbet_T1SE
+0000f8c0: 5f38 3030 2d52 4152 4570 766d 220a 2020  _800-RAREpvm".  
+0000f8d0: 2020 2020 2020 2020 2020 222d 3030 3031            "-0001
+0000f8e0: 3432 5f34 3030 2e6e 6969 222c 0a20 2020  42_400.nii",.   
+0000f8f0: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
+0000f900: 6361 6e20 3d20 7365 6c66 2e6d 6169 6e5f  can = self.main_
+0000f910: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
+0000f920: 7365 722e 7461 626c 655f 6461 7461 2e69  ser.table_data.i
+0000f930: 7465 6d28 362c 2030 292e 7465 7874 2829  tem(6, 0).text()
+0000f940: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000f950: 7365 7274 4571 7561 6c28 0a20 2020 2020  sertEqual(.     
+0000f960: 2020 2020 2020 2073 6361 6e2c 0a20 2020         scan,.   
+0000f970: 2020 2020 2020 2020 2022 6461 7461 2f72           "data/r
+0000f980: 6177 5f64 6174 612f 4775 6572 6265 742d  aw_data/Guerbet-
+0000f990: 4336 2d32 3031 342d 5261 742d 4b35 322d  C6-2014-Rat-K52-
+0000f9a0: 5475 6265 3237 220a 2020 2020 2020 2020  Tube27".        
+0000f9b0: 2020 2020 222d 3230 3134 2d30 322d 3134      "-2014-02-14
+0000f9c0: 3130 3233 3137 2d30 382d 4734 5f47 7565  102317-08-G4_Gue
+0000f9d0: 7262 6574 5f54 3153 455f 3830 302d 5241  rbet_T1SE_800-RA
+0000f9e0: 5245 7076 6d22 0a20 2020 2020 2020 2020  REpvm".         
+0000f9f0: 2020 2022 2d30 3030 3134 325f 3430 302e     "-000142_400.
+0000fa00: 6e69 6922 2c0a 2020 2020 2020 2020 290a  nii",.        ).
+0000fa10: 2020 2020 2020 2020 7363 616e 203d 2073          scan = s
+0000fa20: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+0000fa30: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
+0000fa40: 6c65 5f64 6174 612e 6974 656d 2837 2c20  le_data.item(7, 
+0000fa50: 3029 2e74 6578 7428 290a 2020 2020 2020  0).text().      
+0000fa60: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0000fa70: 616c 280a 2020 2020 2020 2020 2020 2020  al(.            
+0000fa80: 7363 616e 2c0a 2020 2020 2020 2020 2020  scan,.          
+0000fa90: 2020 2264 6174 612f 7261 775f 6461 7461    "data/raw_data
+0000faa0: 2f47 7565 7262 6574 2d43 362d 3230 3134  /Guerbet-C6-2014
+0000fab0: 2d52 6174 2d4b 3532 2d54 7562 6532 3722  -Rat-K52-Tube27"
+0000fac0: 0a20 2020 2020 2020 2020 2020 2022 2d32  .            "-2
+0000fad0: 3031 342d 3032 2d31 3431 3032 3331 372d  014-02-14102317-
+0000fae0: 3036 2d47 345f 4775 6572 6265 745f 5431  06-G4_Guerbet_T1
+0000faf0: 5345 5f38 3030 2d52 4152 4570 766d 220a  SE_800-RAREpvm".
+0000fb00: 2020 2020 2020 2020 2020 2020 222d 3030              "-00
+0000fb10: 3031 3432 5f34 3030 2e6e 6969 222c 0a20  0142_400.nii",. 
+0000fb20: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0000fb30: 2073 6361 6e20 3d20 7365 6c66 2e6d 6169   scan = self.mai
+0000fb40: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
+0000fb50: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
+0000fb60: 2e69 7465 6d28 382c 2030 292e 7465 7874  .item(8, 0).text
+0000fb70: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
+0000fb80: 6173 7365 7274 4571 7561 6c28 0a20 2020  assertEqual(.   
+0000fb90: 2020 2020 2020 2020 2073 6361 6e2c 0a20           scan,. 
+0000fba0: 2020 2020 2020 2020 2020 2022 6461 7461             "data
+0000fbb0: 2f72 6177 5f64 6174 612f 4775 6572 6265  /raw_data/Guerbe
+0000fbc0: 742d 4336 2d32 3031 342d 5261 742d 4b35  t-C6-2014-Rat-K5
+0000fbd0: 322d 5475 6265 3237 220a 2020 2020 2020  2-Tube27".      
+0000fbe0: 2020 2020 2020 222d 3230 3134 2d30 322d        "-2014-02-
+0000fbf0: 3134 3130 3233 3137 2d30 352d 4734 5f47  14102317-05-G4_G
+0000fc00: 7565 7262 6574 5f54 3153 455f 3830 302d  uerbet_T1SE_800-
+0000fc10: 5241 5245 7076 6d22 0a20 2020 2020 2020  RAREpvm".       
+0000fc20: 2020 2020 2022 2d30 3030 3134 325f 3430       "-000142_40
+0000fc30: 302e 6e69 6922 2c0a 2020 2020 2020 2020  0.nii",.        
+0000fc40: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
+0000fc50: 6d75 6c74 6970 6c65 5f73 6f72 745f 6170  multiple_sort_ap
+0000fc60: 7065 6e64 6978 2873 656c 6629 3a0a 2020  pendix(self):.  
+0000fc70: 2020 2020 2020 2222 2241 6464 7320 616e        """Adds an
+0000fc80: 6420 7265 6d6f 7665 7320 7461 6773 2069  d removes tags i
+0000fc90: 6e20 7468 6520 6461 7461 2062 726f 7773  n the data brows
+0000fca0: 6572 2e0a 0a20 2020 2020 2020 202d 2054  er...        - T
+0000fcb0: 6573 7473 3a20 506f 7055 704d 756c 7469  ests: PopUpMulti
+0000fcc0: 706c 6553 6f72 740a 0a20 2020 2020 2020  pleSort..       
+0000fcd0: 202d 204d 6f63 6b73 3a20 506f 7055 7053   - Mocks: PopUpS
+0000fce0: 656c 6563 7454 6167 436f 756e 7454 6162  electTagCountTab
+0000fcf0: 6c65 2e65 7865 635f 0a20 2020 2020 2020  le.exec_.       
+0000fd00: 2022 2222 0a0a 2020 2020 2020 2020 7461   """..        ta
+0000fd10: 626c 655f 6461 7461 203d 2073 656c 662e  ble_data = self.
+0000fd20: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
+0000fd30: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
+0000fd40: 6174 610a 0a20 2020 2020 2020 2074 6162  ata..        tab
+0000fd50: 6c65 5f64 6174 612e 6d75 6c74 6970 6c65  le_data.multiple
+0000fd60: 5f73 6f72 745f 706f 705f 7570 2829 0a20  _sort_pop_up(). 
+0000fd70: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0000fd80: 7274 5472 7565 2868 6173 6174 7472 2874  rtTrue(hasattr(t
+0000fd90: 6162 6c65 5f64 6174 612c 2022 706f 705f  able_data, "pop_
+0000fda0: 7570 2229 290a 0a20 2020 2020 2020 2023  up"))..        #
+0000fdb0: 2041 6464 7320 6120 3372 6420 7461 6720   Adds a 3rd tag 
+0000fdc0: 746f 2074 6865 2070 6f70 2d75 700a 2020  to the pop-up.  
+0000fdd0: 2020 2020 2020 7461 626c 655f 6461 7461        table_data
+0000fde0: 2e70 6f70 5f75 702e 6164 645f 7461 675f  .pop_up.add_tag_
+0000fdf0: 6c61 6265 6c2e 636c 6963 6b65 642e 656d  label.clicked.em
+0000fe00: 6974 2829 0a20 2020 2020 2020 2073 656c  it().        sel
+0000fe10: 662e 6173 7365 7274 4571 7561 6c28 6c65  f.assertEqual(le
+0000fe20: 6e28 7461 626c 655f 6461 7461 2e70 6f70  n(table_data.pop
+0000fe30: 5f75 702e 7075 7368 5f62 7574 746f 6e73  _up.push_buttons
+0000fe40: 292c 2033 290a 0a20 2020 2020 2020 2023  ), 3)..        #
+0000fe50: 2052 656d 6f76 6573 2074 6865 2074 6167   Removes the tag
+0000fe60: 0a20 2020 2020 2020 2074 6162 6c65 5f64  .        table_d
+0000fe70: 6174 612e 706f 705f 7570 2e72 656d 6f76  ata.pop_up.remov
+0000fe80: 655f 7461 675f 6c61 6265 6c2e 636c 6963  e_tag_label.clic
+0000fe90: 6b65 642e 656d 6974 2829 0a20 2020 2020  ked.emit().     
+0000fea0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+0000feb0: 7561 6c28 6c65 6e28 7461 626c 655f 6461  ual(len(table_da
+0000fec0: 7461 2e70 6f70 5f75 702e 7075 7368 5f62  ta.pop_up.push_b
+0000fed0: 7574 746f 6e73 292c 2032 290a 0a20 2020  uttons), 2)..   
+0000fee0: 2020 2020 2023 204d 6f63 6b73 2074 6865       # Mocks the
+0000fef0: 2065 7865 6375 7469 6f6e 206f 6620 2750   execution of 'P
+0000ff00: 6f70 5570 5365 6c65 6374 5461 6743 6f75  opUpSelectTagCou
+0000ff10: 6e74 5461 626c 6527 0a20 2020 2020 2020  ntTable'.       
+0000ff20: 2064 6566 206d 6f63 6b5f 7365 6c65 6374   def mock_select
+0000ff30: 5f74 6167 7328 7365 6c66 293a 0a20 2020  _tags(self):.   
+0000ff40: 2020 2020 2020 2020 2022 2222 626c 6162           """blab
+0000ff50: 6c61 2222 220a 2020 2020 2020 2020 2020  la""".          
+0000ff60: 2020 7365 6c66 2e73 656c 6563 7465 645f    self.selected_
+0000ff70: 7461 6720 3d20 2245 7870 2054 7970 6522  tag = "Exp Type"
+0000ff80: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0000ff90: 7572 6e20 5472 7565 0a0a 2020 2020 2020  urn True..      
+0000ffa0: 2020 506f 7055 7053 656c 6563 7454 6167    PopUpSelectTag
+0000ffb0: 436f 756e 7454 6162 6c65 2e65 7865 635f  CountTable.exec_
+0000ffc0: 203d 206d 6f63 6b5f 7365 6c65 6374 5f74   = mock_select_t
+0000ffd0: 6167 730a 0a20 2020 2020 2020 2074 6162  ags..        tab
+0000ffe0: 6c65 5f64 6174 612e 706f 705f 7570 2e73  le_data.pop_up.s
+0000fff0: 656c 6563 745f 7461 6728 3029 0a0a 2020  elect_tag(0)..  
+00010000: 2020 2020 2020 2320 4164 6473 2061 2074        # Adds a t
+00010010: 6167 2069 6e20 706c 6163 6520 6f66 2027  ag in place of '
+00010020: 5461 6720 6e31 270a 2020 2020 2020 2020  Tag n1'.        
+00010030: 7461 626c 655f 6461 7461 2e70 6f70 5f75  table_data.pop_u
+00010040: 702e 7365 6c65 6374 5f74 6167 2830 290a  p.select_tag(0).
+00010050: 0a20 2020 2020 2020 2023 2043 6c6f 7365  .        # Close
+00010060: 7320 7468 6520 706f 702d 7570 0a20 2020  s the pop-up.   
+00010070: 2020 2020 2074 6162 6c65 5f64 6174 612e       table_data.
+00010080: 706f 705f 7570 2e63 6c6f 7365 2829 0a0a  pop_up.close()..
+00010090: 2020 2020 6465 6620 7465 7374 5f6f 7065      def test_ope
+000100a0: 6e54 6167 7350 6f70 5570 2873 656c 6629  nTagsPopUp(self)
+000100b0: 3a0a 2020 2020 2020 2020 2222 224f 7065  :.        """Ope
+000100c0: 6e73 2061 2064 6f63 756d 656e 7420 696e  ns a document in
+000100d0: 2064 6174 6120 7669 6577 6572 2061 6e64   data viewer and
+000100e0: 206f 7065 6e73 2061 2070 6f70 2d75 7020   opens a pop-up 
+000100f0: 746f 2073 656c 6563 7420 7468 650a 2020  to select the.  
+00010100: 2020 2020 2020 6c65 6765 6e64 206f 6620        legend of 
+00010110: 7468 6520 7468 756d 626e 6169 6c73 2e0a  the thumbnails..
+00010120: 0a20 2020 2020 2020 202d 2054 6573 7473  .        - Tests
+00010130: 204d 696e 6956 6965 7765 722e 6f70 656e   MiniViewer.open
+00010140: 5461 6773 506f 7055 702e 0a20 2020 2020  TagsPopUp..     
+00010150: 2020 202d 2049 6e64 6972 6563 746c 7920     - Indirectly 
+00010160: 7465 7374 7320 506f 7055 7053 656c 6563  tests PopUpSelec
+00010170: 7454 6167 2e0a 2020 2020 2020 2020 2222  tTag..        ""
+00010180: 220a 0a20 2020 2020 2020 2023 2053 6574  "..        # Set
+00010190: 7320 7368 6f72 7463 7574 7320 666f 7220  s shortcuts for 
+000101a0: 6f62 6a65 6374 7320 7468 6174 2061 7265  objects that are
+000101b0: 206f 6674 656e 2075 7365 640a 2020 2020   often used.    
+000101c0: 2020 2020 6461 7461 5f62 726f 7773 6572      data_browser
+000101d0: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
+000101e0: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
+000101f0: 0a20 2020 2020 2020 2076 6965 7765 7220  .        viewer 
+00010200: 3d20 6461 7461 5f62 726f 7773 6572 2e76  = data_browser.v
+00010210: 6965 7765 720a 0a20 2020 2020 2020 2023  iewer..        #
+00010220: 2047 6574 7320 6120 646f 6375 6d65 6e74   Gets a document
+00010230: 2066 696c 6570 6174 680a 2020 2020 2020   filepath.      
+00010240: 2020 636f 6e66 6967 203d 2043 6f6e 6669    config = Confi
+00010250: 6728 636f 6e66 6967 5f70 6174 683d 7365  g(config_path=se
+00010260: 6c66 2e63 6f6e 6669 675f 7061 7468 290a  lf.config_path).
+00010270: 2020 2020 2020 2020 666f 6c64 6572 203d          folder =
+00010280: 206f 732e 7061 7468 2e61 6273 7061 7468   os.path.abspath
+00010290: 280a 2020 2020 2020 2020 2020 2020 6f73  (.            os
+000102a0: 2e70 6174 682e 6a6f 696e 280a 2020 2020  .path.join(.    
+000102b0: 2020 2020 2020 2020 2020 2020 636f 6e66              conf
+000102c0: 6967 2e67 6574 5f6d 6961 5f70 6174 6828  ig.get_mia_path(
+000102d0: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
+000102e0: 2020 2022 6d69 6175 7464 6174 6122 2c0a     "miautdata",.
+000102f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010300: 2272 6573 6f75 7263 6573 222c 0a20 2020  "resources",.   
+00010310: 2020 2020 2020 2020 2020 2020 2022 6d69               "mi
+00010320: 6122 2c0a 2020 2020 2020 2020 2020 2020  a",.            
+00010330: 2020 2020 2270 726f 6a65 6374 5f38 222c      "project_8",
+00010340: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010350: 2022 6461 7461 222c 0a20 2020 2020 2020   "data",.       
+00010360: 2020 2020 2020 2020 2022 7261 775f 6461           "raw_da
+00010370: 7461 222c 0a20 2020 2020 2020 2020 2020  ta",.           
+00010380: 2029 0a20 2020 2020 2020 2029 0a20 2020   ).        ).   
+00010390: 2020 2020 204e 4949 5f46 494c 455f 3120       NII_FILE_1 
+000103a0: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
+000103b0: 2247 7565 7262 6574 2d43 362d 3230 3134  "Guerbet-C6-2014
+000103c0: 2d52 6174 2d4b 3532 2d54 7562 6532 372d  -Rat-K52-Tube27-
+000103d0: 3230 3134 2d30 322d 3134 3130 3233 3137  2014-02-14102317
+000103e0: 2d30 342d 4733 5f22 0a20 2020 2020 2020  -04-G3_".       
+000103f0: 2020 2020 2022 4775 6572 6265 745f 4d44       "Guerbet_MD
+00010400: 4546 542d 4d44 4546 5470 766d 2d30 3030  EFT-MDEFTpvm-000
+00010410: 3934 305f 3830 302e 6e69 6922 0a20 2020  940_800.nii".   
+00010420: 2020 2020 2029 0a20 2020 2020 2020 2044       ).        D
+00010430: 4f43 554d 454e 545f 3120 3d20 6f73 2e70  OCUMENT_1 = os.p
+00010440: 6174 682e 6162 7370 6174 6828 6f73 2e70  ath.abspath(os.p
+00010450: 6174 682e 6a6f 696e 2866 6f6c 6465 722c  ath.join(folder,
+00010460: 204e 4949 5f46 494c 455f 3129 290a 0a20   NII_FILE_1)).. 
+00010470: 2020 2020 2020 2023 2041 6464 7320 7468         # Adds th
+00010480: 6520 646f 6375 6d65 6e74 2074 6f20 7468  e document to th
+00010490: 6520 6461 7461 2062 726f 7773 6572 0a20  e data browser. 
+000104a0: 2020 2020 2020 2061 6464 5061 7468 203d         addPath =
+000104b0: 2050 6f70 5570 4164 6450 6174 6828 6461   PopUpAddPath(da
+000104c0: 7461 5f62 726f 7773 6572 2e70 726f 6a65  ta_browser.proje
+000104d0: 6374 2c20 6461 7461 5f62 726f 7773 6572  ct, data_browser
+000104e0: 290a 2020 2020 2020 2020 6164 6450 6174  ).        addPat
+000104f0: 682e 6669 6c65 5f6c 696e 655f 6564 6974  h.file_line_edit
+00010500: 2e73 6574 5465 7874 2873 7472 285b 444f  .setText(str([DO
+00010510: 4355 4d45 4e54 5f31 5d29 290a 2020 2020  CUMENT_1])).    
+00010520: 2020 2020 6164 6450 6174 682e 7361 7665      addPath.save
+00010530: 5f70 6174 6828 290a 0a20 2020 2020 2020  _path()..       
+00010540: 2023 2053 656c 6563 7473 2074 6865 2064   # Selects the d
+00010550: 6f63 756d 656e 7420 696e 2074 6865 2064  ocument in the d
+00010560: 6174 6120 6272 6f77 7365 720a 2020 2020  ata browser.    
+00010570: 2020 2020 6461 7461 5f62 726f 7773 6572      data_browser
+00010580: 2e74 6162 6c65 5f64 6174 612e 6974 656d  .table_data.item
+00010590: 2830 2c20 3029 2e73 6574 5365 6c65 6374  (0, 0).setSelect
+000105a0: 6564 2854 7275 6529 0a0a 2020 2020 2020  ed(True)..      
+000105b0: 2020 2320 4d6f 636b 7320 7468 6520 6578    # Mocks the ex
+000105c0: 6563 7574 696f 6e20 6f66 2074 6865 2064  ecution of the d
+000105d0: 6961 6c6f 6720 7769 6e64 6f77 0a20 2020  ialog window.   
+000105e0: 2020 2020 2050 6f70 5570 5365 6c65 6374       PopUpSelect
+000105f0: 5461 672e 6578 6563 5f20 3d20 4d6f 636b  Tag.exec_ = Mock
+00010600: 2872 6574 7572 6e5f 7661 6c75 653d 5472  (return_value=Tr
+00010610: 7565 290a 0a20 2020 2020 2020 2023 204f  ue)..        # O
+00010620: 7065 6e73 2074 6865 2074 6167 7320 706f  pens the tags po
+00010630: 702d 7570 2061 6e64 2063 616e 6365 6c20  p-up and cancel 
+00010640: 6974 0a20 2020 2020 2020 2076 6965 7765  it.        viewe
+00010650: 722e 6f70 656e 5461 6773 506f 7055 7028  r.openTagsPopUp(
+00010660: 290a 2020 2020 2020 2020 7669 6577 6572  ).        viewer
+00010670: 2e70 6f70 5570 2e63 616e 6365 6c5f 636c  .popUp.cancel_cl
+00010680: 6963 6b65 6428 290a 0a20 2020 2020 2020  icked()..       
+00010690: 2023 204f 7065 6e73 2074 6865 2074 6167   # Opens the tag
+000106a0: 7320 706f 702d 7570 0a20 2020 2020 2020  s pop-up.       
+000106b0: 2076 6965 7765 722e 6f70 656e 5461 6773   viewer.openTags
+000106c0: 506f 7055 7028 290a 0a20 2020 2020 2020  PopUp()..       
+000106d0: 2023 2053 6561 7263 6865 7320 666f 7220   # Searches for 
+000106e0: 616e 2065 6d70 7479 2073 7472 696e 670a  an empty string.
+000106f0: 2020 2020 2020 2020 7669 6577 6572 2e70          viewer.p
+00010700: 6f70 5570 2e73 6561 7263 685f 7374 7228  opUp.search_str(
+00010710: 2222 290a 0a20 2020 2020 2020 2023 2041  "")..        # A
+00010720: 7373 6572 7473 2074 6861 7420 626f 7468  sserts that both
+00010730: 2074 6865 2066 6972 7374 2061 6e64 2073   the first and s
+00010740: 6563 6f6e 6420 7461 6773 2061 7265 206e  econd tags are n
+00010750: 6f74 2068 6964 6465 6e0a 2020 2020 2020  ot hidden.      
+00010760: 2020 7365 6c66 2e61 7373 6572 7446 616c    self.assertFal
+00010770: 7365 2876 6965 7765 722e 706f 7055 702e  se(viewer.popUp.
+00010780: 6c69 7374 5f77 6964 6765 745f 7461 6773  list_widget_tags
+00010790: 2e69 7465 6d28 3029 2e69 7348 6964 6465  .item(0).isHidde
+000107a0: 6e28 2929 0a20 2020 2020 2020 2073 656c  n()).        sel
+000107b0: 662e 6173 7365 7274 4661 6c73 6528 7669  f.assertFalse(vi
+000107c0: 6577 6572 2e70 6f70 5570 2e6c 6973 745f  ewer.popUp.list_
+000107d0: 7769 6467 6574 5f74 6167 732e 6974 656d  widget_tags.item
+000107e0: 2831 292e 6973 4869 6464 656e 2829 290a  (1).isHidden()).
+000107f0: 0a20 2020 2020 2020 2023 2053 6561 7263  .        # Searc
+00010800: 6865 7320 666f 7220 7468 6520 7461 6720  hes for the tag 
+00010810: 2745 7870 2054 7970 6527 0a20 2020 2020  'Exp Type'.     
+00010820: 2020 2064 6174 615f 6272 6f77 7365 722e     data_browser.
+00010830: 7669 6577 6572 2e70 6f70 5570 2e73 6561  viewer.popUp.sea
+00010840: 7263 685f 7374 7228 2245 7870 2054 7970  rch_str("Exp Typ
+00010850: 6522 290a 0a20 2020 2020 2020 2023 2041  e")..        # A
+00010860: 7373 6572 7473 2074 6861 7420 7468 6520  sserts that the 
+00010870: 7365 636f 6e64 2074 6167 2069 7320 6869  second tag is hi
+00010880: 6464 656e 2c20 7468 6520 6669 7273 7420  dden, the first 
+00010890: 6973 206e 6f74 0a20 2020 2020 2020 2073  is not.        s
+000108a0: 656c 662e 6173 7365 7274 4661 6c73 6528  elf.assertFalse(
+000108b0: 7669 6577 6572 2e70 6f70 5570 2e6c 6973  viewer.popUp.lis
+000108c0: 745f 7769 6467 6574 5f74 6167 732e 6974  t_widget_tags.it
+000108d0: 656d 2830 292e 6973 4869 6464 656e 2829  em(0).isHidden()
+000108e0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+000108f0: 7373 6572 7454 7275 6528 7669 6577 6572  ssertTrue(viewer
+00010900: 2e70 6f70 5570 2e6c 6973 745f 7769 6467  .popUp.list_widg
+00010910: 6574 5f74 6167 732e 6974 656d 2831 292e  et_tags.item(1).
+00010920: 6973 4869 6464 656e 2829 290a 0a20 2020  isHidden())..   
+00010930: 2020 2020 2023 2053 656c 6563 7473 206f       # Selects o
+00010940: 6e65 2074 6162 0a20 2020 2020 2020 2069  ne tab.        i
+00010950: 7465 6d5f 3020 3d20 7669 6577 6572 2e70  tem_0 = viewer.p
+00010960: 6f70 5570 2e6c 6973 745f 7769 6467 6574  opUp.list_widget
+00010970: 5f74 6167 732e 6974 656d 2830 290a 2020  _tags.item(0).  
+00010980: 2020 2020 2020 7669 6577 6572 2e70 6f70        viewer.pop
+00010990: 5570 2e6c 6973 745f 7769 6467 6574 5f74  Up.list_widget_t
+000109a0: 6167 732e 6974 656d 436c 6963 6b65 642e  ags.itemClicked.
+000109b0: 656d 6974 2869 7465 6d5f 3029 0a0a 2020  emit(item_0)..  
+000109c0: 2020 2020 2020 7669 6577 6572 2e70 6f70        viewer.pop
+000109d0: 5570 2e6c 6973 745f 7769 6467 6574 5f74  Up.list_widget_t
+000109e0: 6167 732e 6974 656d 2830 292e 7365 7443  ags.item(0).setC
+000109f0: 6865 636b 5374 6174 6528 5174 2e43 6865  heckState(Qt.Che
+00010a00: 636b 6564 290a 2020 2020 2020 2020 7669  cked).        vi
+00010a10: 6577 6572 2e70 6f70 5570 2e6f 6b5f 636c  ewer.popUp.ok_cl
+00010a20: 6963 6b65 6428 290a 0a20 2020 2064 6566  icked()..    def
+00010a30: 2074 6573 745f 6f70 656e 5f70 726f 6a65   test_open_proje
+00010a40: 6374 2873 656c 6629 3a0a 2020 2020 2020  ct(self):.      
+00010a50: 2020 2222 2254 6573 7473 2070 726f 6a65    """Tests proje
+00010a60: 6374 206f 7065 6e69 6e67 2e22 2222 0a0a  ct opening."""..
+00010a70: 2020 2020 2020 2020 7072 6f6a 6563 745f          project_
+00010a80: 385f 7061 7468 203d 2073 656c 662e 6765  8_path = self.ge
+00010a90: 745f 6e65 775f 7465 7374 5f70 726f 6a65  t_new_test_proje
+00010aa0: 6374 286e 616d 653d 2270 726f 6a65 6374  ct(name="project
+00010ab0: 5f38 2229 0a20 2020 2020 2020 2073 656c  _8").        sel
+00010ac0: 662e 6d61 696e 5f77 696e 646f 772e 7377  f.main_window.sw
+00010ad0: 6974 6368 5f70 726f 6a65 6374 2870 726f  itch_project(pro
+00010ae0: 6a65 6374 5f38 5f70 6174 682c 2022 7072  ject_8_path, "pr
+00010af0: 6f6a 6563 745f 3822 290a 0a20 2020 2020  oject_8")..     
+00010b00: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00010b10: 7561 6c28 7365 6c66 2e6d 6169 6e5f 7769  ual(self.main_wi
+00010b20: 6e64 6f77 2e70 726f 6a65 6374 2e67 6574  ndow.project.get
+00010b30: 4e61 6d65 2829 2c20 2270 726f 6a65 6374  Name(), "project
+00010b40: 5f38 2229 0a20 2020 2020 2020 2073 656c  _8").        sel
+00010b50: 662e 6173 7365 7274 4571 7561 6c28 0a20  f.assertEqual(. 
+00010b60: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00010b70: 6d61 696e 5f77 696e 646f 772e 7769 6e64  main_window.wind
+00010b80: 6f77 5469 746c 6528 292c 0a20 2020 2020  owTitle(),.     
+00010b90: 2020 2020 2020 2022 4d49 4120 2d20 4d75         "MIA - Mu
+00010ba0: 6c74 6970 6172 616d 6574 7269 6320 496d  ltiparametric Im
+00010bb0: 6167 6520 416e 616c 7973 6973 2220 2220  age Analysis" " 
+00010bc0: 2841 646d 696e 206d 6f64 6529 202d 2070  (Admin mode) - p
+00010bd0: 726f 6a65 6374 5f38 222c 0a20 2020 2020  roject_8",.     
+00010be0: 2020 2029 0a0a 2020 2020 2020 2020 646f     )..        do
+00010bf0: 6375 6d65 6e74 7320 3d20 7365 6c66 2e6d  cuments = self.m
+00010c00: 6169 6e5f 7769 6e64 6f77 2e70 726f 6a65  ain_window.proje
+00010c10: 6374 2e73 6573 7369 6f6e 2e67 6574 5f64  ct.session.get_d
+00010c20: 6f63 756d 656e 7473 5f6e 616d 6573 280a  ocuments_names(.
+00010c30: 2020 2020 2020 2020 2020 2020 434f 4c4c              COLL
+00010c40: 4543 5449 4f4e 5f43 5552 5245 4e54 0a20  ECTION_CURRENT. 
+00010c50: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+00010c60: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00010c70: 616c 286c 656e 2864 6f63 756d 656e 7473  al(len(documents
+00010c80: 292c 2039 290a 2020 2020 2020 2020 7365  ), 9).        se
+00010c90: 6c66 2e61 7373 6572 7454 7275 6528 0a20  lf.assertTrue(. 
+00010ca0: 2020 2020 2020 2020 2020 2022 6461 7461             "data
+00010cb0: 2f72 6177 5f64 6174 612f 4775 6572 6265  /raw_data/Guerbe
+00010cc0: 742d 4336 2d32 3031 342d 5261 742d 4b35  t-C6-2014-Rat-K5
+00010cd0: 322d 5475 6265 3237 220a 2020 2020 2020  2-Tube27".      
+00010ce0: 2020 2020 2020 222d 3230 3134 2d30 322d        "-2014-02-
+00010cf0: 3134 3130 3233 3137 2d30 312d 4731 5f47  14102317-01-G1_G
+00010d00: 7565 7262 6574 5f41 6e61 742d 5241 5245  uerbet_Anat-RARE
+00010d10: 220a 2020 2020 2020 2020 2020 2020 2270  ".            "p
+00010d20: 766d 2d30 3030 3232 305f 3030 302e 6e69  vm-000220_000.ni
+00010d30: 6922 2069 6e20 646f 6375 6d65 6e74 730a  i" in documents.
+00010d40: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00010d50: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+00010d60: 6528 0a20 2020 2020 2020 2020 2020 2022  e(.            "
+00010d70: 6461 7461 2f72 6177 5f64 6174 612f 4775  data/raw_data/Gu
+00010d80: 6572 6265 742d 4336 2d32 3031 342d 5261  erbet-C6-2014-Ra
+00010d90: 742d 4b35 322d 5475 6265 3237 220a 2020  t-K52-Tube27".  
+00010da0: 2020 2020 2020 2020 2020 222d 3230 3134            "-2014
+00010db0: 2d30 322d 3134 3130 3233 3137 2d30 342d  -02-14102317-04-
+00010dc0: 4733 5f47 7565 7262 6574 5f4d 4445 4654  G3_Guerbet_MDEFT
+00010dd0: 2d4d 4445 4654 220a 2020 2020 2020 2020  -MDEFT".        
+00010de0: 2020 2020 2270 766d 2d30 3030 3934 305f      "pvm-000940_
+00010df0: 3830 302e 6e69 6922 2069 6e20 646f 6375  800.nii" in docu
+00010e00: 6d65 6e74 730a 2020 2020 2020 2020 290a  ments.        ).
+00010e10: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00010e20: 6572 7454 7275 6528 0a20 2020 2020 2020  ertTrue(.       
+00010e30: 2020 2020 2022 6461 7461 2f72 6177 5f64       "data/raw_d
+00010e40: 6174 612f 4775 6572 6265 742d 4336 2d32  ata/Guerbet-C6-2
+00010e50: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
+00010e60: 3237 220a 2020 2020 2020 2020 2020 2020  27".            
+00010e70: 222d 3230 3134 2d30 322d 3134 3130 3233  "-2014-02-141023
+00010e80: 3137 2d30 352d 4734 5f47 7565 7262 6574  17-05-G4_Guerbet
+00010e90: 5f54 3153 455f 3830 302d 5241 5245 220a  _T1SE_800-RARE".
+00010ea0: 2020 2020 2020 2020 2020 2020 2270 766d              "pvm
+00010eb0: 2d30 3030 3134 325f 3430 302e 6e69 6922  -000142_400.nii"
+00010ec0: 2069 6e20 646f 6375 6d65 6e74 730a 2020   in documents.  
+00010ed0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00010ee0: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
+00010ef0: 0a20 2020 2020 2020 2020 2020 2022 6461  .            "da
+00010f00: 7461 2f72 6177 5f64 6174 612f 4775 6572  ta/raw_data/Guer
+00010f10: 6265 742d 4336 2d32 3031 342d 5261 742d  bet-C6-2014-Rat-
+00010f20: 4b35 322d 5475 6265 3237 220a 2020 2020  K52-Tube27".    
+00010f30: 2020 2020 2020 2020 222d 3230 3134 2d30          "-2014-0
+00010f40: 322d 3134 3130 3233 3137 2d30 362d 4734  2-14102317-06-G4
+00010f50: 5f47 7565 7262 6574 5f54 3153 455f 3830  _Guerbet_T1SE_80
+00010f60: 302d 5241 5245 220a 2020 2020 2020 2020  0-RARE".        
+00010f70: 2020 2020 2270 766d 2d30 3030 3134 325f      "pvm-000142_
+00010f80: 3430 302e 6e69 6922 2069 6e20 646f 6375  400.nii" in docu
+00010f90: 6d65 6e74 730a 2020 2020 2020 2020 290a  ments.        ).
+00010fa0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00010fb0: 6572 7454 7275 6528 0a20 2020 2020 2020  ertTrue(.       
+00010fc0: 2020 2020 2022 6461 7461 2f72 6177 5f64       "data/raw_d
+00010fd0: 6174 612f 4775 6572 6265 742d 4336 2d32  ata/Guerbet-C6-2
+00010fe0: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
+00010ff0: 3237 220a 2020 2020 2020 2020 2020 2020  27".            
+00011000: 222d 3230 3134 2d30 322d 3134 3130 3233  "-2014-02-141023
+00011010: 3137 2d30 382d 4734 5f47 7565 7262 6574  17-08-G4_Guerbet
+00011020: 5f54 3153 455f 3830 302d 5241 5245 220a  _T1SE_800-RARE".
+00011030: 2020 2020 2020 2020 2020 2020 2270 766d              "pvm
+00011040: 2d30 3030 3134 325f 3430 302e 6e69 6922  -000142_400.nii"
+00011050: 2069 6e20 646f 6375 6d65 6e74 730a 2020   in documents.  
+00011060: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00011070: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
+00011080: 0a20 2020 2020 2020 2020 2020 2022 6461  .            "da
+00011090: 7461 2f72 6177 5f64 6174 612f 4775 6572  ta/raw_data/Guer
+000110a0: 6265 742d 4336 2d32 3031 342d 5261 742d  bet-C6-2014-Rat-
+000110b0: 4b35 322d 5475 6265 3237 220a 2020 2020  K52-Tube27".    
+000110c0: 2020 2020 2020 2020 222d 3230 3134 2d30          "-2014-0
+000110d0: 322d 3134 3130 3233 3137 2d30 392d 4734  2-14102317-09-G4
+000110e0: 5f47 7565 7262 6574 5f54 3153 455f 3830  _Guerbet_T1SE_80
+000110f0: 302d 5241 5245 220a 2020 2020 2020 2020  0-RARE".        
+00011100: 2020 2020 2270 766d 2d30 3030 3134 325f      "pvm-000142_
+00011110: 3430 302e 6e69 6922 2069 6e20 646f 6375  400.nii" in docu
+00011120: 6d65 6e74 730a 2020 2020 2020 2020 290a  ments.        ).
+00011130: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00011140: 6572 7454 7275 6528 0a20 2020 2020 2020  ertTrue(.       
+00011150: 2020 2020 2022 6461 7461 2f72 6177 5f64       "data/raw_d
+00011160: 6174 612f 4775 6572 6265 742d 4336 2d32  ata/Guerbet-C6-2
+00011170: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
+00011180: 3237 220a 2020 2020 2020 2020 2020 2020  27".            
+00011190: 222d 3230 3134 2d30 322d 3134 3130 3233  "-2014-02-141023
+000111a0: 3137 2d31 302d 4733 5f47 7565 7262 6574  17-10-G3_Guerbet
+000111b0: 5f4d 4445 4654 2d4d 4445 4654 220a 2020  _MDEFT-MDEFT".  
+000111c0: 2020 2020 2020 2020 2020 2270 766d 2d30            "pvm-0
+000111d0: 3030 3934 305f 3830 302e 6e69 6922 2069  00940_800.nii" i
+000111e0: 6e20 646f 6375 6d65 6e74 730a 2020 2020  n documents.    
+000111f0: 2020 2020 290a 2020 2020 2020 2020 7365      ).        se
+00011200: 6c66 2e61 7373 6572 7454 7275 6528 0a20  lf.assertTrue(. 
+00011210: 2020 2020 2020 2020 2020 2022 6461 7461             "data
+00011220: 2f72 6177 5f64 6174 612f 4775 6572 6265  /raw_data/Guerbe
+00011230: 742d 4336 2d32 3031 342d 5261 742d 4b35  t-C6-2014-Rat-K5
+00011240: 322d 5475 6265 3237 220a 2020 2020 2020  2-Tube27".      
+00011250: 2020 2020 2020 222d 3230 3134 2d30 322d        "-2014-02-
+00011260: 3134 3130 3233 3137 2d31 312d 4734 5f47  14102317-11-G4_G
+00011270: 7565 7262 6574 5f54 3153 455f 3830 302d  uerbet_T1SE_800-
+00011280: 5241 5245 220a 2020 2020 2020 2020 2020  RARE".          
+00011290: 2020 2270 766d 2d30 3030 3134 325f 3430    "pvm-000142_40
+000112a0: 302e 6e69 6922 2069 6e20 646f 6375 6d65  0.nii" in docume
+000112b0: 6e74 730a 2020 2020 2020 2020 290a 2020  nts.        ).  
+000112c0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+000112d0: 7454 7275 6528 0a20 2020 2020 2020 2020  tTrue(.         
+000112e0: 2020 2022 6461 7461 2f64 6572 6976 6564     "data/derived
+000112f0: 5f64 6174 612f 7347 7565 7262 6574 2d43  _data/sGuerbet-C
+00011300: 362d 3230 3134 2d52 6174 2d4b 3532 2d54  6-2014-Rat-K52-T
+00011310: 7562 6532 3722 0a20 2020 2020 2020 2020  ube27".         
+00011320: 2020 2022 2d32 3031 342d 3032 2d31 3431     "-2014-02-141
+00011330: 3032 3331 372d 3031 2d47 315f 4775 6572  02317-01-G1_Guer
+00011340: 6265 745f 416e 6174 2d52 4152 4522 0a20  bet_Anat-RARE". 
+00011350: 2020 2020 2020 2020 2020 2022 7076 6d2d             "pvm-
+00011360: 3030 3032 3230 5f30 3030 2e6e 6969 2220  000220_000.nii" 
+00011370: 696e 2064 6f63 756d 656e 7473 0a20 2020  in documents.   
+00011380: 2020 2020 2029 0a20 2020 2020 2020 2064       ).        d
+00011390: 6f63 756d 656e 7473 203d 2073 656c 662e  ocuments = self.
+000113a0: 6d61 696e 5f77 696e 646f 772e 7072 6f6a  main_window.proj
+000113b0: 6563 742e 7365 7373 696f 6e2e 6765 745f  ect.session.get_
+000113c0: 646f 6375 6d65 6e74 735f 6e61 6d65 7328  documents_names(
+000113d0: 0a20 2020 2020 2020 2020 2020 2043 4f4c  .            COL
+000113e0: 4c45 4354 494f 4e5f 494e 4954 4941 4c0a  LECTION_INITIAL.
+000113f0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00011400: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00011410: 616c 286c 656e 2864 6f63 756d 656e 7473  al(len(documents
+00011420: 292c 2039 290a 2020 2020 2020 2020 7365  ), 9).        se
+00011430: 6c66 2e61 7373 6572 7454 7275 6528 0a20  lf.assertTrue(. 
+00011440: 2020 2020 2020 2020 2020 2022 6461 7461             "data
+00011450: 2f72 6177 5f64 6174 612f 4775 6572 6265  /raw_data/Guerbe
+00011460: 742d 4336 2d32 3031 342d 5261 742d 4b35  t-C6-2014-Rat-K5
+00011470: 322d 5475 6265 3237 220a 2020 2020 2020  2-Tube27".      
+00011480: 2020 2020 2020 222d 3230 3134 2d30 322d        "-2014-02-
+00011490: 3134 3130 3233 3137 2d30 312d 4731 5f47  14102317-01-G1_G
+000114a0: 7565 7262 6574 5f41 6e61 742d 5241 5245  uerbet_Anat-RARE
+000114b0: 220a 2020 2020 2020 2020 2020 2020 2270  ".            "p
+000114c0: 766d 2d30 3030 3232 305f 3030 302e 6e69  vm-000220_000.ni
+000114d0: 6922 2069 6e20 646f 6375 6d65 6e74 730a  i" in documents.
+000114e0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+000114f0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+00011500: 6528 0a20 2020 2020 2020 2020 2020 2022  e(.            "
+00011510: 6461 7461 2f72 6177 5f64 6174 612f 4775  data/raw_data/Gu
+00011520: 6572 6265 742d 4336 2d32 3031 342d 5261  erbet-C6-2014-Ra
+00011530: 742d 4b35 322d 5475 6265 3237 220a 2020  t-K52-Tube27".  
+00011540: 2020 2020 2020 2020 2020 222d 3230 3134            "-2014
+00011550: 2d30 322d 3134 3130 3233 3137 2d30 342d  -02-14102317-04-
+00011560: 4733 5f47 7565 7262 6574 5f4d 4445 4654  G3_Guerbet_MDEFT
+00011570: 2d4d 4445 4654 220a 2020 2020 2020 2020  -MDEFT".        
+00011580: 2020 2020 2270 766d 2d30 3030 3934 305f      "pvm-000940_
+00011590: 3830 302e 6e69 6922 2069 6e20 646f 6375  800.nii" in docu
+000115a0: 6d65 6e74 730a 2020 2020 2020 2020 290a  ments.        ).
+000115b0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+000115c0: 6572 7454 7275 6528 0a20 2020 2020 2020  ertTrue(.       
+000115d0: 2020 2020 2022 6461 7461 2f72 6177 5f64       "data/raw_d
+000115e0: 6174 612f 4775 6572 6265 742d 4336 2d32  ata/Guerbet-C6-2
+000115f0: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
+00011600: 3237 220a 2020 2020 2020 2020 2020 2020  27".            
+00011610: 222d 3230 3134 2d30 322d 3134 3130 3233  "-2014-02-141023
+00011620: 3137 2d30 352d 4734 5f47 7565 7262 6574  17-05-G4_Guerbet
+00011630: 5f54 3153 455f 3830 302d 5241 5245 220a  _T1SE_800-RARE".
+00011640: 2020 2020 2020 2020 2020 2020 2270 766d              "pvm
+00011650: 2d30 3030 3134 325f 3430 302e 6e69 6922  -000142_400.nii"
+00011660: 2069 6e20 646f 6375 6d65 6e74 730a 2020   in documents.  
+00011670: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00011680: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
+00011690: 0a20 2020 2020 2020 2020 2020 2022 6461  .            "da
+000116a0: 7461 2f72 6177 5f64 6174 612f 4775 6572  ta/raw_data/Guer
+000116b0: 6265 742d 4336 2d32 3031 342d 5261 742d  bet-C6-2014-Rat-
+000116c0: 4b35 322d 5475 6265 3237 220a 2020 2020  K52-Tube27".    
+000116d0: 2020 2020 2020 2020 222d 3230 3134 2d30          "-2014-0
+000116e0: 322d 3134 3130 3233 3137 2d30 362d 4734  2-14102317-06-G4
+000116f0: 5f47 7565 7262 6574 5f54 3153 455f 3830  _Guerbet_T1SE_80
+00011700: 302d 5241 5245 220a 2020 2020 2020 2020  0-RARE".        
+00011710: 2020 2020 2270 766d 2d30 3030 3134 325f      "pvm-000142_
+00011720: 3430 302e 6e69 6922 2069 6e20 646f 6375  400.nii" in docu
+00011730: 6d65 6e74 730a 2020 2020 2020 2020 290a  ments.        ).
+00011740: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00011750: 6572 7454 7275 6528 0a20 2020 2020 2020  ertTrue(.       
+00011760: 2020 2020 2022 6461 7461 2f72 6177 5f64       "data/raw_d
+00011770: 6174 612f 4775 6572 6265 742d 4336 2d32  ata/Guerbet-C6-2
+00011780: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
+00011790: 3237 220a 2020 2020 2020 2020 2020 2020  27".            
+000117a0: 222d 3230 3134 2d30 322d 3134 3130 3233  "-2014-02-141023
+000117b0: 3137 2d30 382d 4734 5f47 7565 7262 6574  17-08-G4_Guerbet
+000117c0: 5f54 3153 455f 3830 302d 5241 5245 220a  _T1SE_800-RARE".
+000117d0: 2020 2020 2020 2020 2020 2020 2270 766d              "pvm
+000117e0: 2d30 3030 3134 325f 3430 302e 6e69 6922  -000142_400.nii"
+000117f0: 2069 6e20 646f 6375 6d65 6e74 730a 2020   in documents.  
+00011800: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00011810: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
+00011820: 0a20 2020 2020 2020 2020 2020 2022 6461  .            "da
+00011830: 7461 2f72 6177 5f64 6174 612f 4775 6572  ta/raw_data/Guer
+00011840: 6265 742d 4336 2d32 3031 342d 5261 742d  bet-C6-2014-Rat-
+00011850: 4b35 322d 5475 6265 3237 220a 2020 2020  K52-Tube27".    
+00011860: 2020 2020 2020 2020 222d 3230 3134 2d30          "-2014-0
+00011870: 322d 3134 3130 3233 3137 2d30 392d 4734  2-14102317-09-G4
+00011880: 5f47 7565 7262 6574 5f54 3153 455f 3830  _Guerbet_T1SE_80
+00011890: 302d 5241 5245 220a 2020 2020 2020 2020  0-RARE".        
+000118a0: 2020 2020 2270 766d 2d30 3030 3134 325f      "pvm-000142_
+000118b0: 3430 302e 6e69 6922 2069 6e20 646f 6375  400.nii" in docu
+000118c0: 6d65 6e74 730a 2020 2020 2020 2020 290a  ments.        ).
+000118d0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+000118e0: 6572 7454 7275 6528 0a20 2020 2020 2020  ertTrue(.       
+000118f0: 2020 2020 2022 6461 7461 2f72 6177 5f64       "data/raw_d
+00011900: 6174 612f 4775 6572 6265 742d 4336 2d32  ata/Guerbet-C6-2
+00011910: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
+00011920: 3237 220a 2020 2020 2020 2020 2020 2020  27".            
+00011930: 222d 3230 3134 2d30 322d 3134 3130 3233  "-2014-02-141023
+00011940: 3137 2d31 302d 4733 5f47 7565 7262 6574  17-10-G3_Guerbet
+00011950: 5f4d 4445 4654 2d4d 4445 4654 220a 2020  _MDEFT-MDEFT".  
+00011960: 2020 2020 2020 2020 2020 2270 766d 2d30            "pvm-0
+00011970: 3030 3934 305f 3830 302e 6e69 6922 2069  00940_800.nii" i
+00011980: 6e20 646f 6375 6d65 6e74 730a 2020 2020  n documents.    
+00011990: 2020 2020 290a 2020 2020 2020 2020 7365      ).        se
+000119a0: 6c66 2e61 7373 6572 7454 7275 6528 0a20  lf.assertTrue(. 
+000119b0: 2020 2020 2020 2020 2020 2022 6461 7461             "data
+000119c0: 2f72 6177 5f64 6174 612f 4775 6572 6265  /raw_data/Guerbe
+000119d0: 742d 4336 2d32 3031 342d 5261 742d 4b35  t-C6-2014-Rat-K5
+000119e0: 322d 5475 6265 3237 220a 2020 2020 2020  2-Tube27".      
+000119f0: 2020 2020 2020 222d 3230 3134 2d30 322d        "-2014-02-
+00011a00: 3134 3130 3233 3137 2d31 312d 4734 5f47  14102317-11-G4_G
+00011a10: 7565 7262 6574 5f54 3153 455f 3830 302d  uerbet_T1SE_800-
+00011a20: 5241 5245 220a 2020 2020 2020 2020 2020  RARE".          
+00011a30: 2020 2270 766d 2d30 3030 3134 325f 3430    "pvm-000142_40
+00011a40: 302e 6e69 6922 2069 6e20 646f 6375 6d65  0.nii" in docume
+00011a50: 6e74 730a 2020 2020 2020 2020 290a 2020  nts.        ).  
+00011a60: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00011a70: 7454 7275 6528 0a20 2020 2020 2020 2020  tTrue(.         
+00011a80: 2020 2022 6461 7461 2f64 6572 6976 6564     "data/derived
+00011a90: 5f64 6174 612f 7347 7565 7262 6574 2d43  _data/sGuerbet-C
+00011aa0: 362d 3230 3134 2d52 6174 2d4b 3532 2d54  6-2014-Rat-K52-T
+00011ab0: 7562 6532 3722 0a20 2020 2020 2020 2020  ube27".         
+00011ac0: 2020 2022 2d32 3031 342d 3032 2d31 3431     "-2014-02-141
+00011ad0: 3032 3331 372d 3031 2d47 315f 4775 6572  02317-01-G1_Guer
+00011ae0: 6265 745f 416e 6174 2d52 4152 4522 0a20  bet_Anat-RARE". 
+00011af0: 2020 2020 2020 2020 2020 2022 7076 6d2d             "pvm-
+00011b00: 3030 3032 3230 5f30 3030 2e6e 6969 2220  000220_000.nii" 
+00011b10: 696e 2064 6f63 756d 656e 7473 0a20 2020  in documents.   
+00011b20: 2020 2020 2029 0a0a 2020 2020 6465 6620       )..    def 
+00011b30: 7465 7374 5f70 726f 6a65 6374 5f66 696c  test_project_fil
+00011b40: 7465 7228 7365 6c66 293a 0a20 2020 2020  ter(self):.     
+00011b50: 2020 2022 2222 4372 6561 7465 7320 6120     """Creates a 
+00011b60: 7072 6f6a 6563 742c 2073 6176 6573 2061  project, saves a
+00011b70: 2066 696c 7465 7220 616e 6420 6f70 656e   filter and open
+00011b80: 7320 6974 2e0a 0a20 2020 2020 2020 202d  s it...        -
+00011b90: 2054 6573 7473 3a0a 2020 2020 2020 2020   Tests:.        
+00011ba0: 2020 2020 2d20 4461 7461 4272 6f77 7365      - DataBrowse
+00011bb0: 722e 6f70 656e 5f70 6f70 7570 0a20 2020  r.open_popup.   
+00011bc0: 2020 2020 2020 2020 202d 2050 726f 6a65           - Proje
+00011bd0: 6374 2e73 6176 655f 6375 7272 656e 745f  ct.save_current_
+00011be0: 6669 6c74 6572 0a0a 2020 2020 2020 2020  filter..        
+00011bf0: 2d20 4d6f 636b 733a 0a20 2020 2020 2020  - Mocks:.       
+00011c00: 2020 2020 2d20 514d 6573 7361 6765 426f      - QMessageBo
+00011c10: 782e 6578 6563 0a20 2020 2020 2020 2020  x.exec.         
+00011c20: 2020 2d20 5149 6e70 7574 4469 616c 6f67    - QInputDialog
+00011c30: 2e67 6574 5465 7874 0a20 2020 2020 2020  .getText.       
+00011c40: 2022 2222 0a0a 2020 2020 2020 2020 7465   """..        te
+00011c50: 7374 5f70 726f 6a65 6374 5f70 6174 6820  st_project_path 
+00011c60: 3d20 7365 6c66 2e67 6574 5f6e 6577 5f74  = self.get_new_t
+00011c70: 6573 745f 7072 6f6a 6563 7428 6c69 6768  est_project(ligh
+00011c80: 743d 5472 7565 290a 2020 2020 2020 2020  t=True).        
+00011c90: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+00011ca0: 2e73 7769 7463 685f 7072 6f6a 6563 7428  .switch_project(
+00011cb0: 7465 7374 5f70 726f 6a65 6374 5f70 6174  test_project_pat
+00011cc0: 682c 2022 7465 7374 5f70 726f 6a65 6374  h, "test_project
+00011cd0: 2229 0a0a 2020 2020 2020 2020 2320 4d6f  ")..        # Mo
+00011ce0: 636b 7320 7468 6520 6578 6563 7574 696f  cks the executio
+00011cf0: 6e20 6f66 2061 2064 6961 6c6f 6720 626f  n of a dialog bo
+00011d00: 780a 2020 2020 2020 2020 514d 6573 7361  x.        QMessa
+00011d10: 6765 426f 782e 6578 6563 203d 206c 616d  geBox.exec = lam
+00011d20: 6264 6120 2a61 7267 3a20 4e6f 6e65 0a0a  bda *arg: None..
+00011d30: 2020 2020 2020 2020 2320 5361 7665 7320          # Saves 
+00011d40: 7468 6520 6375 7272 656e 7420 6669 6c74  the current filt
+00011d50: 6572 2061 7320 2766 696c 7465 725f 3127  er as 'filter_1'
+00011d60: 0a20 2020 2020 2020 2051 496e 7075 7444  .        QInputD
+00011d70: 6961 6c6f 672e 6765 7454 6578 7420 3d20  ialog.getText = 
+00011d80: 6c61 6d62 6461 202a 6172 6776 3a20 2822  lambda *argv: ("
+00011d90: 6669 6c74 6572 5f31 222c 2054 7275 6529  filter_1", True)
+00011da0: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+00011db0: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
+00011dc0: 726f 7773 6572 2e73 6176 655f 6669 6c74  rowser.save_filt
+00011dd0: 6572 5f61 6374 696f 6e2e 7472 6967 6765  er_action.trigge
+00011de0: 7228 290a 0a20 2020 2020 2020 2023 2054  r()..        # T
+00011df0: 7269 6573 2074 6f20 7361 7665 2069 7420  ries to save it 
+00011e00: 6167 6169 6e20 6279 2074 6865 2073 616d  again by the sam
+00011e10: 6520 6e61 6d65 0a20 2020 2020 2020 2073  e name.        s
+00011e20: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00011e30: 6461 7461 5f62 726f 7773 6572 2e73 6176  data_browser.sav
+00011e40: 655f 6669 6c74 6572 5f61 6374 696f 6e2e  e_filter_action.
+00011e50: 7472 6967 6765 7228 290a 0a20 2020 2020  trigger()..     
+00011e60: 2020 2023 204f 7065 6e73 2074 6865 2073     # Opens the s
+00011e70: 6176 6564 2066 696c 7465 7273 2070 6f70  aved filters pop
+00011e80: 2d75 700a 2020 2020 2020 2020 7365 6c66  -up.        self
+00011e90: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
+00011ea0: 615f 6272 6f77 7365 722e 6f70 656e 5f66  a_browser.open_f
+00011eb0: 696c 7465 725f 6163 7469 6f6e 2e74 7269  ilter_action.tri
+00011ec0: 6767 6572 2829 0a20 2020 2020 2020 206f  gger().        o
+00011ed0: 7065 6e5f 706f 7075 7020 3d20 7365 6c66  pen_popup = self
+00011ee0: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
+00011ef0: 615f 6272 6f77 7365 722e 706f 7055 700a  a_browser.popUp.
+00011f00: 0a20 2020 2020 2020 2023 2043 6c6f 7365  .        # Close
+00011f10: 7320 7468 6520 706f 702d 7570 2061 6e64  s the pop-up and
+00011f20: 2072 652d 6f70 656e 7320 6974 0a20 2020   re-opens it.   
+00011f30: 2020 2020 206f 7065 6e5f 706f 7075 702e       open_popup.
+00011f40: 6361 6e63 656c 5f63 6c69 636b 6564 2829  cancel_clicked()
+00011f50: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+00011f60: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
+00011f70: 726f 7773 6572 2e6f 7065 6e5f 6669 6c74  rowser.open_filt
+00011f80: 6572 5f61 6374 696f 6e2e 7472 6967 6765  er_action.trigge
+00011f90: 7228 290a 0a20 2020 2020 2020 2023 2054  r()..        # T
+00011fa0: 7269 6573 2074 6f20 7365 6172 6368 2066  ries to search f
+00011fb0: 6f72 2061 6e20 656d 7074 7920 7374 7269  or an empty stri
+00011fc0: 6e67 0a20 2020 2020 2020 206f 7065 6e5f  ng.        open_
+00011fd0: 706f 7075 702e 7365 6172 6368 5f73 7472  popup.search_str
+00011fe0: 2822 2229 0a20 2020 2020 2020 2073 656c  ("").        sel
+00011ff0: 662e 6173 7365 7274 4661 6c73 6528 6f70  f.assertFalse(op
+00012000: 656e 5f70 6f70 7570 2e6c 6973 745f 7769  en_popup.list_wi
+00012010: 6467 6574 5f66 696c 7465 7273 2e69 7465  dget_filters.ite
+00012020: 6d28 3029 2e69 7348 6964 6465 6e28 2929  m(0).isHidden())
+00012030: 0a0a 2020 2020 2020 2020 2320 5472 6965  ..        # Trie
+00012040: 7320 746f 2073 6561 7263 6820 666f 7220  s to search for 
+00012050: 6120 6e6f 6e2d 6578 6973 7465 6e74 2066  a non-existent f
+00012060: 696c 7465 720a 2020 2020 2020 2020 6f70  ilter.        op
+00012070: 656e 5f70 6f70 7570 2e73 6561 7263 685f  en_popup.search_
+00012080: 7374 7228 2266 696c 7465 725f 3222 290a  str("filter_2").
+00012090: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+000120a0: 6572 7454 7275 6528 6f70 656e 5f70 6f70  ertTrue(open_pop
+000120b0: 7570 2e6c 6973 745f 7769 6467 6574 5f66  up.list_widget_f
+000120c0: 696c 7465 7273 2e69 7465 6d28 3029 2e69  ilters.item(0).i
+000120d0: 7348 6964 6465 6e28 2929 0a0a 2020 2020  sHidden())..    
+000120e0: 2020 2020 2320 5472 6965 7320 746f 2073      # Tries to s
+000120f0: 6561 7263 6820 666f 7220 616e 2065 7869  earch for an exi
+00012100: 7374 696e 6720 6669 6c74 6572 0a20 2020  sting filter.   
+00012110: 2020 2020 206f 7065 6e5f 706f 7075 702e       open_popup.
+00012120: 7365 6172 6368 5f73 7472 2822 6669 6c74  search_str("filt
+00012130: 6572 5f31 2229 0a20 2020 2020 2020 2073  er_1").        s
+00012140: 656c 662e 6173 7365 7274 4661 6c73 6528  elf.assertFalse(
+00012150: 6f70 656e 5f70 6f70 7570 2e6c 6973 745f  open_popup.list_
+00012160: 7769 6467 6574 5f66 696c 7465 7273 2e69  widget_filters.i
+00012170: 7465 6d28 3029 2e69 7348 6964 6465 6e28  tem(0).isHidden(
+00012180: 2929 0a0a 2020 2020 2020 2020 6f70 656e  ))..        open
+00012190: 5f70 6f70 7570 2e6c 6973 745f 7769 6467  _popup.list_widg
+000121a0: 6574 5f66 696c 7465 7273 2e69 7465 6d28  et_filters.item(
+000121b0: 3029 2e73 6574 5365 6c65 6374 6564 2854  0).setSelected(T
+000121c0: 7275 6529 0a20 2020 2020 2020 2023 2051  rue).        # Q
+000121d0: 5465 7374 2e6d 6f75 7365 436c 6963 6b28  Test.mouseClick(
+000121e0: 6f70 656e 5f70 6f70 7570 2e70 7573 685f  open_popup.push_
+000121f0: 6275 7474 6f6e 5f6f 6b2c 2051 742e 4c65  button_ok, Qt.Le
+00012200: 6674 4275 7474 6f6e 290a 2020 2020 2020  ftButton).      
+00012210: 2020 6f70 656e 5f70 6f70 7570 2e70 7573    open_popup.pus
+00012220: 685f 6275 7474 6f6e 5f6f 6b2e 636c 6963  h_button_ok.clic
+00012230: 6b65 642e 656d 6974 2829 0a0a 2020 2020  ked.emit()..    
+00012240: 2020 2020 7363 616e 735f 6469 7370 6c61      scans_displa
+00012250: 7965 6420 3d20 5b5d 0a0a 2020 2020 2020  yed = []..      
+00012260: 2020 666f 7220 726f 7720 696e 2072 616e    for row in ran
+00012270: 6765 280a 2020 2020 2020 2020 2020 2020  ge(.            
+00012280: 302c 2073 656c 662e 6d61 696e 5f77 696e  0, self.main_win
+00012290: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
+000122a0: 2e74 6162 6c65 5f64 6174 612e 726f 7743  .table_data.rowC
+000122b0: 6f75 6e74 2829 0a20 2020 2020 2020 2029  ount().        )
+000122c0: 3a0a 2020 2020 2020 2020 2020 2020 6974  :.            it
+000122d0: 656d 203d 2073 656c 662e 6d61 696e 5f77  em = self.main_w
+000122e0: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
+000122f0: 6572 2e74 6162 6c65 5f64 6174 612e 6974  er.table_data.it
+00012300: 656d 2872 6f77 2c20 3029 0a20 2020 2020  em(row, 0).     
+00012310: 2020 2020 2020 2073 6361 6e5f 6e61 6d65         scan_name
+00012320: 203d 2069 7465 6d2e 7465 7874 2829 0a0a   = item.text()..
+00012330: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00012340: 6f74 2073 656c 662e 6d61 696e 5f77 696e  ot self.main_win
+00012350: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
+00012360: 2e74 6162 6c65 5f64 6174 612e 6973 526f  .table_data.isRo
+00012370: 7748 6964 6465 6e28 726f 7729 3a0a 2020  wHidden(row):.  
+00012380: 2020 2020 2020 2020 2020 2020 2020 7363                sc
+00012390: 616e 735f 6469 7370 6c61 7965 642e 6170  ans_displayed.ap
+000123a0: 7065 6e64 2873 6361 6e5f 6e61 6d65 290a  pend(scan_name).
+000123b0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+000123c0: 7365 7274 4571 7561 6c28 6c65 6e28 7363  sertEqual(len(sc
+000123d0: 616e 735f 6469 7370 6c61 7965 6429 2c20  ans_displayed), 
+000123e0: 3329 0a0a 2020 2020 6465 6620 7465 7374  3)..    def test
+000123f0: 5f70 726f 6a65 6374 5f70 726f 7065 7274  _project_propert
+00012400: 6965 7328 7365 6c66 293a 0a20 2020 2020  ies(self):.     
+00012410: 2020 2022 2222 5465 7374 7320 7361 7665     """Tests save
+00012420: 6420 7072 6f6a 6563 7473 2061 6464 6974  d projects addit
+00012430: 696f 6e20 616e 6420 7265 6d6f 7661 6c2e  ion and removal.
+00012440: 2222 220a 0a20 2020 2020 2020 2073 6176  """..        sav
+00012450: 6564 5f70 726f 6a65 6374 7320 3d20 7365  ed_projects = se
+00012460: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e73  lf.main_window.s
+00012470: 6176 6564 5f70 726f 6a65 6374 730a 2020  aved_projects.  
+00012480: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00012490: 7445 7175 616c 2873 6176 6564 5f70 726f  tEqual(saved_pro
+000124a0: 6a65 6374 732e 7061 7468 734c 6973 742c  jects.pathsList,
+000124b0: 205b 5d29 0a0a 2020 2020 2020 2020 636f   [])..        co
+000124c0: 6e66 6967 203d 2043 6f6e 6669 6728 636f  nfig = Config(co
+000124d0: 6e66 6967 5f70 6174 683d 7365 6c66 2e63  nfig_path=self.c
+000124e0: 6f6e 6669 675f 7061 7468 290a 2020 2020  onfig_path).    
+000124f0: 2020 2020 7072 6f6a 6563 745f 385f 7061      project_8_pa
+00012500: 7468 203d 2073 656c 662e 6765 745f 6e65  th = self.get_ne
+00012510: 775f 7465 7374 5f70 726f 6a65 6374 2829  w_test_project()
+00012520: 0a0a 2020 2020 2020 2020 6f73 2e72 656d  ..        os.rem
+00012530: 6f76 6528 6f73 2e70 6174 682e 6a6f 696e  ove(os.path.join
+00012540: 2863 6f6e 6669 672e 6765 745f 636f 6e66  (config.get_conf
+00012550: 6967 5f70 6174 6828 292c 2022 7361 7665  ig_path(), "save
+00012560: 645f 7072 6f6a 6563 7473 2e79 6d6c 2229  d_projects.yml")
+00012570: 290a 0a20 2020 2020 2020 2073 6176 6564  )..        saved
+00012580: 5f70 726f 6a65 6374 7320 3d20 5361 7665  _projects = Save
+00012590: 6450 726f 6a65 6374 7328 290a 2020 2020  dProjects().    
+000125a0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+000125b0: 7175 616c 2873 6176 6564 5f70 726f 6a65  qual(saved_proje
+000125c0: 6374 732e 7061 7468 734c 6973 742c 205b  cts.pathsList, [
+000125d0: 5d29 0a0a 2020 2020 2020 2020 7361 7665  ])..        save
+000125e0: 645f 7072 6f6a 6563 7473 2e61 6464 5361  d_projects.addSa
+000125f0: 7665 6450 726f 6a65 6374 2870 726f 6a65  vedProject(proje
+00012600: 6374 5f38 5f70 6174 6829 0a20 2020 2020  ct_8_path).     
+00012610: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00012620: 7561 6c28 7361 7665 645f 7072 6f6a 6563  ual(saved_projec
+00012630: 7473 2e70 6174 6873 4c69 7374 2c20 5b70  ts.pathsList, [p
+00012640: 726f 6a65 6374 5f38 5f70 6174 685d 290a  roject_8_path]).
+00012650: 0a20 2020 2020 2020 2073 6176 6564 5f70  .        saved_p
+00012660: 726f 6a65 6374 732e 6164 6453 6176 6564  rojects.addSaved
+00012670: 5072 6f6a 6563 7428 222f 686f 6d65 2229  Project("/home")
+00012680: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00012690: 7365 7274 4571 7561 6c28 7361 7665 645f  sertEqual(saved_
+000126a0: 7072 6f6a 6563 7473 2e70 6174 6873 4c69  projects.pathsLi
+000126b0: 7374 2c20 5b22 2f68 6f6d 6522 2c20 7072  st, ["/home", pr
+000126c0: 6f6a 6563 745f 385f 7061 7468 5d29 0a0a  oject_8_path])..
+000126d0: 2020 2020 2020 2020 7361 7665 645f 7072          saved_pr
+000126e0: 6f6a 6563 7473 2e61 6464 5361 7665 6450  ojects.addSavedP
+000126f0: 726f 6a65 6374 2870 726f 6a65 6374 5f38  roject(project_8
+00012700: 5f70 6174 6829 0a20 2020 2020 2020 2073  _path).        s
+00012710: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00012720: 7361 7665 645f 7072 6f6a 6563 7473 2e70  saved_projects.p
+00012730: 6174 6873 4c69 7374 2c20 5b70 726f 6a65  athsList, [proje
+00012740: 6374 5f38 5f70 6174 682c 2022 2f68 6f6d  ct_8_path, "/hom
+00012750: 6522 5d29 0a0a 2020 2020 2020 2020 7361  e"])..        sa
+00012760: 7665 645f 7072 6f6a 6563 7473 2e72 656d  ved_projects.rem
+00012770: 6f76 6553 6176 6564 5072 6f6a 6563 7428  oveSavedProject(
+00012780: 7072 6f6a 6563 745f 385f 7061 7468 290a  project_8_path).
+00012790: 2020 2020 2020 2020 7361 7665 645f 7072          saved_pr
+000127a0: 6f6a 6563 7473 2e72 656d 6f76 6553 6176  ojects.removeSav
+000127b0: 6564 5072 6f6a 6563 7428 222f 686f 6d65  edProject("/home
+000127c0: 2229 0a20 2020 2020 2020 2073 656c 662e  ").        self.
+000127d0: 6173 7365 7274 4571 7561 6c28 7361 7665  assertEqual(save
+000127e0: 645f 7072 6f6a 6563 7473 2e70 6174 6873  d_projects.paths
+000127f0: 4c69 7374 2c20 5b5d 290a 0a20 2020 2020  List, [])..     
+00012800: 2020 2053 6176 6564 5072 6f6a 6563 7473     SavedProjects
+00012810: 2e6c 6f61 6453 6176 6564 5072 6f6a 6563  .loadSavedProjec
+00012820: 7473 203d 206c 616d 6264 6120 613a 2054  ts = lambda a: T
+00012830: 7275 650a 2020 2020 2020 2020 7361 7665  rue.        save
+00012840: 645f 7072 6f6a 6563 7473 203d 2053 6176  d_projects = Sav
+00012850: 6564 5072 6f6a 6563 7473 2829 0a20 2020  edProjects().   
+00012860: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00012870: 4571 7561 6c28 7361 7665 645f 7072 6f6a  Equal(saved_proj
+00012880: 6563 7473 2e70 6174 6873 4c69 7374 2c20  ects.pathsList, 
+00012890: 5b5d 290a 0a20 2020 2064 6566 2074 6573  [])..    def tes
+000128a0: 745f 7072 6f6a 5f72 656d 6f76 5f66 726f  t_proj_remov_fro
+000128b0: 6d5f 6375 725f 7072 6f6a 2873 656c 6629  m_cur_proj(self)
+000128c0: 3a0a 2020 2020 2020 2020 2222 2254 6573  :.        """Tes
+000128d0: 7473 2074 6861 7420 7468 6520 7072 6f6a  ts that the proj
+000128e0: 6563 7473 2061 7265 2072 656d 6f76 6564  ects are removed
+000128f0: 2066 726f 6d20 7468 6520 6c69 7374 206f   from the list o
+00012900: 6620 6375 7272 656e 740a 2020 2020 2020  f current.      
+00012910: 2020 7072 6f6a 6563 7473 2e0a 2020 2020    projects..    
+00012920: 2020 2020 2222 220a 0a20 2020 2020 2020      """..       
+00012930: 2063 6f6e 6669 6720 3d20 436f 6e66 6967   config = Config
+00012940: 2863 6f6e 6669 675f 7061 7468 3d73 656c  (config_path=sel
+00012950: 662e 636f 6e66 6967 5f70 6174 6829 0a20  f.config_path). 
+00012960: 2020 2020 2020 2070 726f 6a65 6374 7320         projects 
+00012970: 3d20 636f 6e66 6967 2e67 6574 5f6f 7065  = config.get_ope
+00012980: 6e65 645f 7072 6f6a 6563 7473 2829 0a20  ned_projects(). 
+00012990: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+000129a0: 7274 4571 7561 6c28 6c65 6e28 7072 6f6a  rtEqual(len(proj
+000129b0: 6563 7473 292c 2031 290a 2020 2020 2020  ects), 1).      
+000129c0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+000129d0: 6528 7365 6c66 2e6d 6169 6e5f 7769 6e64  e(self.main_wind
+000129e0: 6f77 2e70 726f 6a65 6374 2e66 6f6c 6465  ow.project.folde
+000129f0: 7220 696e 2070 726f 6a65 6374 7329 0a0a  r in projects)..
+00012a00: 2020 2020 6465 6620 7465 7374 5f72 6170      def test_rap
+00012a10: 6964 5f73 6561 7263 6828 7365 6c66 293a  id_search(self):
+00012a20: 0a20 2020 2020 2020 2022 2222 5465 7374  .        """Test
+00012a30: 7320 7468 6520 7261 7069 6420 7365 6172  s the rapid sear
+00012a40: 6368 2062 6172 2e22 2222 0a0a 2020 2020  ch bar."""..    
+00012a50: 2020 2020 7072 6f6a 6563 745f 385f 7061      project_8_pa
+00012a60: 7468 203d 2073 656c 662e 6765 745f 6e65  th = self.get_ne
+00012a70: 775f 7465 7374 5f70 726f 6a65 6374 2829  w_test_project()
+00012a80: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+00012a90: 696e 5f77 696e 646f 772e 7377 6974 6368  in_window.switch
+00012aa0: 5f70 726f 6a65 6374 2870 726f 6a65 6374  _project(project
+00012ab0: 5f38 5f70 6174 682c 2022 7072 6f6a 6563  _8_path, "projec
+00012ac0: 745f 3822 290a 0a20 2020 2020 2020 2023  t_8")..        #
+00012ad0: 2043 6865 636b 696e 6720 7468 6174 2074   Checking that t
+00012ae0: 6865 2039 2073 6361 6e73 2061 7265 2073  he 9 scans are s
+00012af0: 686f 776e 2069 6e20 7468 6520 4461 7461  hown in the Data
+00012b00: 4272 6f77 7365 720a 2020 2020 2020 2020  Browser.        
+00012b10: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00012b20: 280a 2020 2020 2020 2020 2020 2020 7365  (.            se
+00012b30: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
+00012b40: 6174 615f 6272 6f77 7365 722e 7461 626c  ata_browser.tabl
+00012b50: 655f 6461 7461 2e72 6f77 436f 756e 7428  e_data.rowCount(
+00012b60: 292c 2039 0a20 2020 2020 2020 2029 0a20  ), 9.        ). 
+00012b70: 2020 2020 2020 2073 6361 6e73 5f64 6973         scans_dis
+00012b80: 706c 6179 6564 203d 205b 5d0a 0a20 2020  played = []..   
+00012b90: 2020 2020 2066 6f72 2072 6f77 2069 6e20       for row in 
+00012ba0: 7261 6e67 6528 0a20 2020 2020 2020 2020  range(.         
+00012bb0: 2020 2030 2c20 7365 6c66 2e6d 6169 6e5f     0, self.main_
+00012bc0: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
+00012bd0: 7365 722e 7461 626c 655f 6461 7461 2e72  ser.table_data.r
+00012be0: 6f77 436f 756e 7428 290a 2020 2020 2020  owCount().      
+00012bf0: 2020 293a 0a20 2020 2020 2020 2020 2020    ):.           
+00012c00: 2069 7465 6d20 3d20 7365 6c66 2e6d 6169   item = self.mai
+00012c10: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
+00012c20: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
+00012c30: 2e69 7465 6d28 726f 772c 2030 290a 2020  .item(row, 0).  
+00012c40: 2020 2020 2020 2020 2020 7363 616e 5f6e            scan_n
+00012c50: 616d 6520 3d20 6974 656d 2e74 6578 7428  ame = item.text(
+00012c60: 290a 0a20 2020 2020 2020 2020 2020 2069  )..            i
+00012c70: 6620 6e6f 7420 7365 6c66 2e6d 6169 6e5f  f not self.main_
+00012c80: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
+00012c90: 7365 722e 7461 626c 655f 6461 7461 2e69  ser.table_data.i
+00012ca0: 7352 6f77 4869 6464 656e 2872 6f77 293a  sRowHidden(row):
+00012cb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012cc0: 2073 6361 6e73 5f64 6973 706c 6179 6564   scans_displayed
+00012cd0: 2e61 7070 656e 6428 7363 616e 5f6e 616d  .append(scan_nam
+00012ce0: 6529 0a0a 2020 2020 2020 2020 7365 6c66  e)..        self
+00012cf0: 2e61 7373 6572 7445 7175 616c 286c 656e  .assertEqual(len
+00012d00: 2873 6361 6e73 5f64 6973 706c 6179 6564  (scans_displayed
+00012d10: 292c 2039 290a 2020 2020 2020 2020 7365  ), 9).        se
+00012d20: 6c66 2e61 7373 6572 7454 7275 6528 0a20  lf.assertTrue(. 
+00012d30: 2020 2020 2020 2020 2020 2022 6461 7461             "data
+00012d40: 2f72 6177 5f64 6174 612f 4775 6572 6265  /raw_data/Guerbe
+00012d50: 742d 4336 2d32 3031 342d 5261 742d 4b35  t-C6-2014-Rat-K5
+00012d60: 322d 5475 6265 3237 220a 2020 2020 2020  2-Tube27".      
+00012d70: 2020 2020 2020 222d 3230 3134 2d30 322d        "-2014-02-
+00012d80: 3134 3130 3233 3137 2d30 312d 4731 5f47  14102317-01-G1_G
+00012d90: 7565 7262 6574 5f41 6e61 742d 5241 5245  uerbet_Anat-RARE
+00012da0: 220a 2020 2020 2020 2020 2020 2020 2270  ".            "p
+00012db0: 766d 2d30 3030 3232 305f 3030 302e 6e69  vm-000220_000.ni
+00012dc0: 6922 2069 6e20 7363 616e 735f 6469 7370  i" in scans_disp
+00012dd0: 6c61 7965 640a 2020 2020 2020 2020 290a  layed.        ).
+00012de0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00012df0: 6572 7454 7275 6528 0a20 2020 2020 2020  ertTrue(.       
+00012e00: 2020 2020 2022 6461 7461 2f72 6177 5f64       "data/raw_d
+00012e10: 6174 612f 4775 6572 6265 742d 4336 2d32  ata/Guerbet-C6-2
+00012e20: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
+00012e30: 3237 220a 2020 2020 2020 2020 2020 2020  27".            
+00012e40: 222d 3230 3134 2d30 322d 3134 3130 3233  "-2014-02-141023
+00012e50: 3137 2d30 342d 4733 5f47 7565 7262 6574  17-04-G3_Guerbet
+00012e60: 5f4d 4445 4654 2d4d 4445 4654 220a 2020  _MDEFT-MDEFT".  
+00012e70: 2020 2020 2020 2020 2020 2270 766d 2d30            "pvm-0
+00012e80: 3030 3934 305f 3830 302e 6e69 6922 2069  00940_800.nii" i
+00012e90: 6e20 7363 616e 735f 6469 7370 6c61 7965  n scans_displaye
+00012ea0: 640a 2020 2020 2020 2020 290a 2020 2020  d.        ).    
+00012eb0: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
+00012ec0: 7275 6528 0a20 2020 2020 2020 2020 2020  rue(.           
+00012ed0: 2022 6461 7461 2f72 6177 5f64 6174 612f   "data/raw_data/
+00012ee0: 4775 6572 6265 742d 4336 2d32 3031 342d  Guerbet-C6-2014-
+00012ef0: 5261 742d 4b35 322d 5475 6265 3237 220a  Rat-K52-Tube27".
+00012f00: 2020 2020 2020 2020 2020 2020 222d 3230              "-20
+00012f10: 3134 2d30 322d 3134 3130 3233 3137 2d30  14-02-14102317-0
+00012f20: 352d 4734 5f47 7565 7262 6574 5f54 3153  5-G4_Guerbet_T1S
+00012f30: 455f 3830 302d 5241 5245 220a 2020 2020  E_800-RARE".    
+00012f40: 2020 2020 2020 2020 2270 766d 2d30 3030          "pvm-000
+00012f50: 3134 325f 3430 302e 6e69 6922 2069 6e20  142_400.nii" in 
+00012f60: 7363 616e 735f 6469 7370 6c61 7965 640a  scans_displayed.
+00012f70: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00012f80: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+00012f90: 6528 0a20 2020 2020 2020 2020 2020 2022  e(.            "
+00012fa0: 6461 7461 2f72 6177 5f64 6174 612f 4775  data/raw_data/Gu
+00012fb0: 6572 6265 742d 4336 2d32 3031 342d 5261  erbet-C6-2014-Ra
+00012fc0: 742d 4b35 322d 5475 6265 3237 220a 2020  t-K52-Tube27".  
+00012fd0: 2020 2020 2020 2020 2020 222d 3230 3134            "-2014
+00012fe0: 2d30 322d 3134 3130 3233 3137 2d30 362d  -02-14102317-06-
+00012ff0: 4734 5f47 7565 7262 6574 5f54 3153 455f  G4_Guerbet_T1SE_
+00013000: 3830 302d 5241 5245 220a 2020 2020 2020  800-RARE".      
+00013010: 2020 2020 2020 2270 766d 2d30 3030 3134        "pvm-00014
+00013020: 325f 3430 302e 6e69 6922 2069 6e20 7363  2_400.nii" in sc
+00013030: 616e 735f 6469 7370 6c61 7965 640a 2020  ans_displayed.  
+00013040: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00013050: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
+00013060: 0a20 2020 2020 2020 2020 2020 2022 6461  .            "da
+00013070: 7461 2f72 6177 5f64 6174 612f 4775 6572  ta/raw_data/Guer
+00013080: 6265 742d 4336 2d32 3031 342d 5261 742d  bet-C6-2014-Rat-
+00013090: 4b35 322d 5475 6265 3237 220a 2020 2020  K52-Tube27".    
+000130a0: 2020 2020 2020 2020 222d 3230 3134 2d30          "-2014-0
+000130b0: 322d 3134 3130 3233 3137 2d30 382d 4734  2-14102317-08-G4
+000130c0: 5f47 7565 7262 6574 5f54 3153 455f 3830  _Guerbet_T1SE_80
+000130d0: 302d 5241 5245 220a 2020 2020 2020 2020  0-RARE".        
+000130e0: 2020 2020 2270 766d 2d30 3030 3134 325f      "pvm-000142_
+000130f0: 3430 302e 6e69 6922 2069 6e20 7363 616e  400.nii" in scan
+00013100: 735f 6469 7370 6c61 7965 640a 2020 2020  s_displayed.    
+00013110: 2020 2020 290a 2020 2020 2020 2020 7365      ).        se
+00013120: 6c66 2e61 7373 6572 7454 7275 6528 0a20  lf.assertTrue(. 
+00013130: 2020 2020 2020 2020 2020 2022 6461 7461             "data
+00013140: 2f72 6177 5f64 6174 612f 4775 6572 6265  /raw_data/Guerbe
+00013150: 742d 4336 2d32 3031 342d 5261 742d 4b35  t-C6-2014-Rat-K5
+00013160: 322d 5475 6265 3237 220a 2020 2020 2020  2-Tube27".      
+00013170: 2020 2020 2020 222d 3230 3134 2d30 322d        "-2014-02-
+00013180: 3134 3130 3233 3137 2d30 392d 4734 5f47  14102317-09-G4_G
+00013190: 7565 7262 6574 5f54 3153 455f 3830 302d  uerbet_T1SE_800-
+000131a0: 5241 5245 220a 2020 2020 2020 2020 2020  RARE".          
+000131b0: 2020 2270 766d 2d30 3030 3134 325f 3430    "pvm-000142_40
+000131c0: 302e 6e69 6922 2069 6e20 7363 616e 735f  0.nii" in scans_
+000131d0: 6469 7370 6c61 7965 640a 2020 2020 2020  displayed.      
+000131e0: 2020 290a 2020 2020 2020 2020 7365 6c66    ).        self
+000131f0: 2e61 7373 6572 7454 7275 6528 0a20 2020  .assertTrue(.   
+00013200: 2020 2020 2020 2020 2022 6461 7461 2f72           "data/r
+00013210: 6177 5f64 6174 612f 4775 6572 6265 742d  aw_data/Guerbet-
+00013220: 4336 2d32 3031 342d 5261 742d 4b35 322d  C6-2014-Rat-K52-
+00013230: 5475 6265 3237 220a 2020 2020 2020 2020  Tube27".        
+00013240: 2020 2020 222d 3230 3134 2d30 322d 3134      "-2014-02-14
+00013250: 3130 3233 3137 2d31 302d 4733 5f47 7565  102317-10-G3_Gue
+00013260: 7262 6574 5f4d 4445 4654 2d4d 4445 4654  rbet_MDEFT-MDEFT
+00013270: 220a 2020 2020 2020 2020 2020 2020 2270  ".            "p
+00013280: 766d 2d30 3030 3934 305f 3830 302e 6e69  vm-000940_800.ni
+00013290: 6922 2069 6e20 7363 616e 735f 6469 7370  i" in scans_disp
+000132a0: 6c61 7965 640a 2020 2020 2020 2020 290a  layed.        ).
+000132b0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+000132c0: 6572 7454 7275 6528 0a20 2020 2020 2020  ertTrue(.       
+000132d0: 2020 2020 2022 6461 7461 2f72 6177 5f64       "data/raw_d
+000132e0: 6174 612f 4775 6572 6265 742d 4336 2d32  ata/Guerbet-C6-2
+000132f0: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
+00013300: 3237 220a 2020 2020 2020 2020 2020 2020  27".            
+00013310: 222d 3230 3134 2d30 322d 3134 3130 3233  "-2014-02-141023
+00013320: 3137 2d31 312d 4734 5f47 7565 7262 6574  17-11-G4_Guerbet
+00013330: 5f54 3153 455f 3830 302d 5241 5245 220a  _T1SE_800-RARE".
+00013340: 2020 2020 2020 2020 2020 2020 2270 766d              "pvm
+00013350: 2d30 3030 3134 325f 3430 302e 6e69 6922  -000142_400.nii"
+00013360: 2069 6e20 7363 616e 735f 6469 7370 6c61   in scans_displa
+00013370: 7965 640a 2020 2020 2020 2020 290a 2020  yed.        ).  
+00013380: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00013390: 7454 7275 6528 0a20 2020 2020 2020 2020  tTrue(.         
+000133a0: 2020 2022 6461 7461 2f64 6572 6976 6564     "data/derived
+000133b0: 5f64 6174 612f 7347 7565 7262 6574 2d43  _data/sGuerbet-C
+000133c0: 362d 3230 3134 2d52 6174 2d4b 3532 2d54  6-2014-Rat-K52-T
+000133d0: 7562 6532 3722 0a20 2020 2020 2020 2020  ube27".         
+000133e0: 2020 2022 2d32 3031 342d 3032 2d31 3431     "-2014-02-141
+000133f0: 3032 3331 372d 3031 2d47 315f 4775 6572  02317-01-G1_Guer
+00013400: 6265 745f 416e 6174 2d52 4152 4522 0a20  bet_Anat-RARE". 
+00013410: 2020 2020 2020 2020 2020 2022 7076 6d2d             "pvm-
+00013420: 3030 3032 3230 5f30 3030 2e6e 6969 2220  000220_000.nii" 
+00013430: 696e 2073 6361 6e73 5f64 6973 706c 6179  in scans_display
+00013440: 6564 0a20 2020 2020 2020 2029 0a0a 2020  ed.        )..  
+00013450: 2020 2020 2020 2320 5465 7374 696e 6720        # Testing 
+00013460: 4731 2072 6170 6964 2073 6561 7263 680a  G1 rapid search.
+00013470: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
+00013480: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
+00013490: 6f77 7365 722e 7365 6172 6368 5f62 6172  owser.search_bar
+000134a0: 2e73 6574 5465 7874 2822 4731 2229 0a20  .setText("G1"). 
+000134b0: 2020 2020 2020 2073 6361 6e73 5f64 6973         scans_dis
+000134c0: 706c 6179 6564 203d 205b 5d0a 0a20 2020  played = []..   
+000134d0: 2020 2020 2066 6f72 2072 6f77 2069 6e20       for row in 
+000134e0: 7261 6e67 6528 0a20 2020 2020 2020 2020  range(.         
+000134f0: 2020 2030 2c20 7365 6c66 2e6d 6169 6e5f     0, self.main_
+00013500: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
+00013510: 7365 722e 7461 626c 655f 6461 7461 2e72  ser.table_data.r
+00013520: 6f77 436f 756e 7428 290a 2020 2020 2020  owCount().      
+00013530: 2020 293a 0a20 2020 2020 2020 2020 2020    ):.           
+00013540: 2069 7465 6d20 3d20 7365 6c66 2e6d 6169   item = self.mai
+00013550: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
+00013560: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
+00013570: 2e69 7465 6d28 726f 772c 2030 290a 2020  .item(row, 0).  
+00013580: 2020 2020 2020 2020 2020 7363 616e 5f6e            scan_n
+00013590: 616d 6520 3d20 6974 656d 2e74 6578 7428  ame = item.text(
+000135a0: 290a 0a20 2020 2020 2020 2020 2020 2069  )..            i
+000135b0: 6620 6e6f 7420 7365 6c66 2e6d 6169 6e5f  f not self.main_
+000135c0: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
+000135d0: 7365 722e 7461 626c 655f 6461 7461 2e69  ser.table_data.i
+000135e0: 7352 6f77 4869 6464 656e 2872 6f77 293a  sRowHidden(row):
+000135f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013600: 2073 6361 6e73 5f64 6973 706c 6179 6564   scans_displayed
+00013610: 2e61 7070 656e 6428 7363 616e 5f6e 616d  .append(scan_nam
+00013620: 6529 0a0a 2020 2020 2020 2020 7365 6c66  e)..        self
+00013630: 2e61 7373 6572 7445 7175 616c 286c 656e  .assertEqual(len
+00013640: 2873 6361 6e73 5f64 6973 706c 6179 6564  (scans_displayed
+00013650: 292c 2032 290a 2020 2020 2020 2020 7365  ), 2).        se
+00013660: 6c66 2e61 7373 6572 7454 7275 6528 0a20  lf.assertTrue(. 
+00013670: 2020 2020 2020 2020 2020 2022 6461 7461             "data
+00013680: 2f72 6177 5f64 6174 612f 4775 6572 6265  /raw_data/Guerbe
+00013690: 742d 4336 2d32 3031 342d 5261 742d 4b35  t-C6-2014-Rat-K5
+000136a0: 322d 5475 6265 3237 220a 2020 2020 2020  2-Tube27".      
+000136b0: 2020 2020 2020 222d 3230 3134 2d30 322d        "-2014-02-
+000136c0: 3134 3130 3233 3137 2d30 312d 4731 5f47  14102317-01-G1_G
+000136d0: 7565 7262 6574 5f41 6e61 742d 5241 5245  uerbet_Anat-RARE
+000136e0: 220a 2020 2020 2020 2020 2020 2020 2270  ".            "p
+000136f0: 766d 2d30 3030 3232 305f 3030 302e 6e69  vm-000220_000.ni
+00013700: 6922 2069 6e20 7363 616e 735f 6469 7370  i" in scans_disp
+00013710: 6c61 7965 640a 2020 2020 2020 2020 290a  layed.        ).
+00013720: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00013730: 6572 7454 7275 6528 0a20 2020 2020 2020  ertTrue(.       
+00013740: 2020 2020 2022 6461 7461 2f64 6572 6976       "data/deriv
+00013750: 6564 5f64 6174 612f 7347 7565 7262 6574  ed_data/sGuerbet
+00013760: 2d43 362d 3230 3134 2d52 6174 2d4b 3532  -C6-2014-Rat-K52
+00013770: 2d54 7562 6532 3722 0a20 2020 2020 2020  -Tube27".       
+00013780: 2020 2020 2022 2d32 3031 342d 3032 2d31       "-2014-02-1
+00013790: 3431 3032 3331 372d 3031 2d47 315f 4775  4102317-01-G1_Gu
+000137a0: 6572 6265 745f 416e 6174 2d52 4152 4522  erbet_Anat-RARE"
+000137b0: 0a20 2020 2020 2020 2020 2020 2022 7076  .            "pv
+000137c0: 6d2d 3030 3032 3230 5f30 3030 2e6e 6969  m-000220_000.nii
+000137d0: 2220 696e 2073 6361 6e73 5f64 6973 706c  " in scans_displ
+000137e0: 6179 6564 0a20 2020 2020 2020 2029 0a0a  ayed.        )..
+000137f0: 2020 2020 2020 2020 2320 5465 7374 696e          # Testin
+00013800: 6720 7468 6174 2061 6c6c 2074 6865 2073  g that all the s
+00013810: 6361 6e73 2061 7265 2062 6163 6b20 7768  cans are back wh
+00013820: 656e 2063 6c69 636b 696e 6720 6f6e 2074  en clicking on t
+00013830: 6865 2063 726f 7373 0a20 2020 2020 2020  he cross.       
+00013840: 2051 5465 7374 2e6d 6f75 7365 436c 6963   QTest.mouseClic
+00013850: 6b28 0a20 2020 2020 2020 2020 2020 2073  k(.            s
+00013860: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00013870: 6461 7461 5f62 726f 7773 6572 2e62 7574  data_browser.but
+00013880: 746f 6e5f 6372 6f73 732c 2051 742e 4c65  ton_cross, Qt.Le
+00013890: 6674 4275 7474 6f6e 0a20 2020 2020 2020  ftButton.       
+000138a0: 2029 0a20 2020 2020 2020 2073 6361 6e73   ).        scans
+000138b0: 5f64 6973 706c 6179 6564 203d 205b 5d0a  _displayed = [].
+000138c0: 0a20 2020 2020 2020 2066 6f72 2072 6f77  .        for row
+000138d0: 2069 6e20 7261 6e67 6528 0a20 2020 2020   in range(.     
+000138e0: 2020 2020 2020 2030 2c20 7365 6c66 2e6d         0, self.m
+000138f0: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
+00013900: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
+00013910: 7461 2e72 6f77 436f 756e 7428 290a 2020  ta.rowCount().  
+00013920: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
+00013930: 2020 2020 2069 7465 6d20 3d20 7365 6c66       item = self
+00013940: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
+00013950: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
+00013960: 6461 7461 2e69 7465 6d28 726f 772c 2030  data.item(row, 0
+00013970: 290a 2020 2020 2020 2020 2020 2020 7363  ).            sc
+00013980: 616e 5f6e 616d 6520 3d20 6974 656d 2e74  an_name = item.t
+00013990: 6578 7428 290a 0a20 2020 2020 2020 2020  ext()..         
+000139a0: 2020 2069 6620 6e6f 7420 7365 6c66 2e6d     if not self.m
+000139b0: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
+000139c0: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
+000139d0: 7461 2e69 7352 6f77 4869 6464 656e 2872  ta.isRowHidden(r
+000139e0: 6f77 293a 0a20 2020 2020 2020 2020 2020  ow):.           
+000139f0: 2020 2020 2073 6361 6e73 5f64 6973 706c       scans_displ
+00013a00: 6179 6564 2e61 7070 656e 6428 7363 616e  ayed.append(scan
+00013a10: 5f6e 616d 6529 0a0a 2020 2020 2020 2020  _name)..        
+00013a20: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00013a30: 286c 656e 2873 6361 6e73 5f64 6973 706c  (len(scans_displ
+00013a40: 6179 6564 292c 2039 290a 2020 2020 2020  ayed), 9).      
+00013a50: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+00013a60: 6528 0a20 2020 2020 2020 2020 2020 2022  e(.            "
+00013a70: 6461 7461 2f72 6177 5f64 6174 612f 4775  data/raw_data/Gu
+00013a80: 6572 6265 742d 4336 2d32 3031 342d 5261  erbet-C6-2014-Ra
+00013a90: 742d 4b35 322d 5475 6265 3237 220a 2020  t-K52-Tube27".  
+00013aa0: 2020 2020 2020 2020 2020 222d 3230 3134            "-2014
+00013ab0: 2d30 322d 3134 3130 3233 3137 2d30 312d  -02-14102317-01-
+00013ac0: 4731 5f47 7565 7262 6574 5f41 6e61 742d  G1_Guerbet_Anat-
+00013ad0: 5241 5245 7076 6d22 0a20 2020 2020 2020  RAREpvm".       
+00013ae0: 2020 2020 2022 2d30 3030 3232 305f 3030       "-000220_00
+00013af0: 302e 6e69 6922 2069 6e20 7363 616e 735f  0.nii" in scans_
+00013b00: 6469 7370 6c61 7965 640a 2020 2020 2020  displayed.      
+00013b10: 2020 290a 2020 2020 2020 2020 7365 6c66    ).        self
+00013b20: 2e61 7373 6572 7454 7275 6528 0a20 2020  .assertTrue(.   
+00013b30: 2020 2020 2020 2020 2022 6461 7461 2f72           "data/r
+00013b40: 6177 5f64 6174 612f 4775 6572 6265 742d  aw_data/Guerbet-
+00013b50: 4336 2d32 3031 342d 5261 742d 4b35 322d  C6-2014-Rat-K52-
+00013b60: 5475 6265 3237 220a 2020 2020 2020 2020  Tube27".        
+00013b70: 2020 2020 222d 3230 3134 2d30 322d 3134      "-2014-02-14
+00013b80: 3130 3233 3137 2d30 342d 4733 5f47 7565  102317-04-G3_Gue
+00013b90: 7262 6574 5f4d 4445 4654 2d4d 4445 4654  rbet_MDEFT-MDEFT
+00013ba0: 220a 2020 2020 2020 2020 2020 2020 2270  ".            "p
+00013bb0: 766d 2d30 3030 3934 305f 3830 302e 6e69  vm-000940_800.ni
+00013bc0: 6922 2069 6e20 7363 616e 735f 6469 7370  i" in scans_disp
+00013bd0: 6c61 7965 640a 2020 2020 2020 2020 290a  layed.        ).
+00013be0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00013bf0: 6572 7454 7275 6528 0a20 2020 2020 2020  ertTrue(.       
+00013c00: 2020 2020 2022 6461 7461 2f72 6177 5f64       "data/raw_d
+00013c10: 6174 612f 4775 6572 6265 742d 4336 2d32  ata/Guerbet-C6-2
+00013c20: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
+00013c30: 3237 220a 2020 2020 2020 2020 2020 2020  27".            
+00013c40: 222d 3230 3134 2d30 322d 3134 3130 3233  "-2014-02-141023
+00013c50: 3137 2d30 352d 4734 5f47 7565 7262 6574  17-05-G4_Guerbet
+00013c60: 5f54 3153 455f 3830 302d 5241 5245 220a  _T1SE_800-RARE".
+00013c70: 2020 2020 2020 2020 2020 2020 2270 766d              "pvm
+00013c80: 2d30 3030 3134 325f 3430 302e 6e69 6922  -000142_400.nii"
+00013c90: 2069 6e20 7363 616e 735f 6469 7370 6c61   in scans_displa
+00013ca0: 7965 640a 2020 2020 2020 2020 290a 2020  yed.        ).  
+00013cb0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00013cc0: 7454 7275 6528 0a20 2020 2020 2020 2020  tTrue(.         
+00013cd0: 2020 2022 6461 7461 2f72 6177 5f64 6174     "data/raw_dat
+00013ce0: 612f 4775 6572 6265 742d 4336 2d32 3031  a/Guerbet-C6-201
+00013cf0: 342d 5261 742d 4b35 322d 5475 6265 3237  4-Rat-K52-Tube27
+00013d00: 220a 2020 2020 2020 2020 2020 2020 222d  ".            "-
+00013d10: 3230 3134 2d30 322d 3134 3130 3233 3137  2014-02-14102317
+00013d20: 2d30 362d 4734 5f47 7565 7262 6574 5f54  -06-G4_Guerbet_T
+00013d30: 3153 455f 3830 302d 5241 5245 220a 2020  1SE_800-RARE".  
+00013d40: 2020 2020 2020 2020 2020 2270 766d 2d30            "pvm-0
+00013d50: 3030 3134 325f 3430 302e 6e69 6922 2069  00142_400.nii" i
+00013d60: 6e20 7363 616e 735f 6469 7370 6c61 7965  n scans_displaye
+00013d70: 640a 2020 2020 2020 2020 290a 2020 2020  d.        ).    
+00013d80: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
+00013d90: 7275 6528 0a20 2020 2020 2020 2020 2020  rue(.           
+00013da0: 2022 6461 7461 2f72 6177 5f64 6174 612f   "data/raw_data/
+00013db0: 4775 6572 6265 742d 4336 2d32 3031 342d  Guerbet-C6-2014-
+00013dc0: 5261 742d 4b35 322d 5475 6265 3237 220a  Rat-K52-Tube27".
+00013dd0: 2020 2020 2020 2020 2020 2020 222d 3230              "-20
+00013de0: 3134 2d30 322d 3134 3130 3233 3137 2d30  14-02-14102317-0
+00013df0: 382d 4734 5f47 7565 7262 6574 5f54 3153  8-G4_Guerbet_T1S
+00013e00: 455f 3830 302d 5241 5245 220a 2020 2020  E_800-RARE".    
+00013e10: 2020 2020 2020 2020 2270 766d 2d30 3030          "pvm-000
+00013e20: 3134 325f 3430 302e 6e69 6922 2069 6e20  142_400.nii" in 
+00013e30: 7363 616e 735f 6469 7370 6c61 7965 640a  scans_displayed.
+00013e40: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00013e50: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+00013e60: 6528 0a20 2020 2020 2020 2020 2020 2022  e(.            "
+00013e70: 6461 7461 2f72 6177 5f64 6174 612f 4775  data/raw_data/Gu
+00013e80: 6572 6265 742d 4336 2d32 3031 342d 5261  erbet-C6-2014-Ra
+00013e90: 742d 4b35 322d 5475 6265 3237 220a 2020  t-K52-Tube27".  
+00013ea0: 2020 2020 2020 2020 2020 222d 3230 3134            "-2014
+00013eb0: 2d30 322d 3134 3130 3233 3137 2d30 392d  -02-14102317-09-
+00013ec0: 4734 5f47 7565 7262 6574 5f54 3153 455f  G4_Guerbet_T1SE_
+00013ed0: 3830 302d 5241 5245 220a 2020 2020 2020  800-RARE".      
+00013ee0: 2020 2020 2020 2270 766d 2d30 3030 3134        "pvm-00014
+00013ef0: 325f 3430 302e 6e69 6922 2069 6e20 7363  2_400.nii" in sc
+00013f00: 616e 735f 6469 7370 6c61 7965 640a 2020  ans_displayed.  
+00013f10: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00013f20: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
+00013f30: 0a20 2020 2020 2020 2020 2020 2022 6461  .            "da
+00013f40: 7461 2f72 6177 5f64 6174 612f 4775 6572  ta/raw_data/Guer
+00013f50: 6265 742d 4336 2d32 3031 342d 5261 742d  bet-C6-2014-Rat-
+00013f60: 4b35 322d 5475 6265 3237 220a 2020 2020  K52-Tube27".    
+00013f70: 2020 2020 2020 2020 222d 3230 3134 2d30          "-2014-0
+00013f80: 322d 3134 3130 3233 3137 2d31 302d 4733  2-14102317-10-G3
+00013f90: 5f47 7565 7262 6574 5f4d 4445 4654 2d4d  _Guerbet_MDEFT-M
+00013fa0: 4445 4654 7076 6d22 0a20 2020 2020 2020  DEFTpvm".       
+00013fb0: 2020 2020 2022 2d30 3030 3934 305f 3830       "-000940_80
+00013fc0: 302e 6e69 6922 2069 6e20 7363 616e 735f  0.nii" in scans_
+00013fd0: 6469 7370 6c61 7965 640a 2020 2020 2020  displayed.      
+00013fe0: 2020 290a 2020 2020 2020 2020 7365 6c66    ).        self
+00013ff0: 2e61 7373 6572 7454 7275 6528 0a20 2020  .assertTrue(.   
+00014000: 2020 2020 2020 2020 2022 6461 7461 2f72           "data/r
+00014010: 6177 5f64 6174 612f 4775 6572 6265 742d  aw_data/Guerbet-
+00014020: 4336 2d32 3031 342d 5261 742d 4b35 322d  C6-2014-Rat-K52-
+00014030: 5475 6265 3237 220a 2020 2020 2020 2020  Tube27".        
+00014040: 2020 2020 222d 3230 3134 2d30 322d 3134      "-2014-02-14
+00014050: 3130 3233 3137 2d31 312d 4734 5f47 7565  102317-11-G4_Gue
+00014060: 7262 6574 5f54 3153 455f 3830 302d 5241  rbet_T1SE_800-RA
+00014070: 5245 7076 6d22 0a20 2020 2020 2020 2020  REpvm".         
+00014080: 2020 2022 2d30 3030 3134 325f 3430 302e     "-000142_400.
+00014090: 6e69 6922 2069 6e20 7363 616e 735f 6469  nii" in scans_di
+000140a0: 7370 6c61 7965 640a 2020 2020 2020 2020  splayed.        
+000140b0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+000140c0: 7373 6572 7454 7275 6528 0a20 2020 2020  ssertTrue(.     
+000140d0: 2020 2020 2020 2022 6461 7461 2f64 6572         "data/der
+000140e0: 6976 6564 5f64 6174 612f 7347 7565 7262  ived_data/sGuerb
+000140f0: 6574 2d43 362d 3230 3134 2d52 6174 2d4b  et-C6-2014-Rat-K
+00014100: 3532 2d54 7562 6532 3722 0a20 2020 2020  52-Tube27".     
+00014110: 2020 2020 2020 2022 2d32 3031 342d 3032         "-2014-02
+00014120: 2d31 3431 3032 3331 372d 3031 2d47 315f  -14102317-01-G1_
+00014130: 4775 6572 6265 745f 416e 6174 2d52 4152  Guerbet_Anat-RAR
+00014140: 4570 766d 220a 2020 2020 2020 2020 2020  Epvm".          
+00014150: 2020 222d 3030 3032 3230 5f30 3030 2e6e    "-000220_000.n
+00014160: 6969 2220 696e 2073 6361 6e73 5f64 6973  ii" in scans_dis
+00014170: 706c 6179 6564 0a20 2020 2020 2020 2029  played.        )
+00014180: 0a0a 2020 2020 2020 2020 2320 5465 7374  ..        # Test
+00014190: 696e 6720 6e6f 7420 6465 6669 6e65 6420  ing not defined 
+000141a0: 7661 6c75 6573 0a20 2020 2020 2020 2051  values.        Q
+000141b0: 5465 7374 2e6d 6f75 7365 436c 6963 6b28  Test.mouseClick(
+000141c0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+000141d0: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
+000141e0: 7461 5f62 726f 7773 6572 2e62 7574 746f  ta_browser.butto
+000141f0: 6e5f 6372 6f73 732c 2051 742e 4c65 6674  n_cross, Qt.Left
+00014200: 4275 7474 6f6e 0a20 2020 2020 2020 2029  Button.        )
+00014210: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+00014220: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
+00014230: 726f 7773 6572 2e73 6561 7263 685f 6261  rowser.search_ba
+00014240: 722e 7365 7454 6578 7428 222a 4e6f 7420  r.setText("*Not 
+00014250: 4465 6669 6e65 642a 2229 0a20 2020 2020  Defined*").     
+00014260: 2020 2073 6361 6e73 5f64 6973 706c 6179     scans_display
+00014270: 6564 203d 205b 5d0a 0a20 2020 2020 2020  ed = []..       
+00014280: 2066 6f72 2072 6f77 2069 6e20 7261 6e67   for row in rang
+00014290: 6528 0a20 2020 2020 2020 2020 2020 2030  e(.            0
+000142a0: 2c20 7365 6c66 2e6d 6169 6e5f 7769 6e64  , self.main_wind
+000142b0: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
+000142c0: 7461 626c 655f 6461 7461 2e72 6f77 436f  table_data.rowCo
+000142d0: 756e 7428 290a 2020 2020 2020 2020 293a  unt().        ):
+000142e0: 0a20 2020 2020 2020 2020 2020 2069 7465  .            ite
+000142f0: 6d20 3d20 7365 6c66 2e6d 6169 6e5f 7769  m = self.main_wi
+00014300: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
+00014310: 722e 7461 626c 655f 6461 7461 2e69 7465  r.table_data.ite
+00014320: 6d28 726f 772c 2030 290a 2020 2020 2020  m(row, 0).      
+00014330: 2020 2020 2020 7363 616e 5f6e 616d 6520        scan_name 
+00014340: 3d20 6974 656d 2e74 6578 7428 290a 0a20  = item.text().. 
+00014350: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+00014360: 7420 7365 6c66 2e6d 6169 6e5f 7769 6e64  t self.main_wind
+00014370: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
+00014380: 7461 626c 655f 6461 7461 2e69 7352 6f77  table_data.isRow
+00014390: 4869 6464 656e 2872 6f77 293a 0a20 2020  Hidden(row):.   
+000143a0: 2020 2020 2020 2020 2020 2020 2073 6361               sca
+000143b0: 6e73 5f64 6973 706c 6179 6564 2e61 7070  ns_displayed.app
+000143c0: 656e 6428 7363 616e 5f6e 616d 6529 0a0a  end(scan_name)..
+000143d0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+000143e0: 6572 7445 7175 616c 280a 2020 2020 2020  ertEqual(.      
+000143f0: 2020 2020 2020 7363 616e 735f 6469 7370        scans_disp
+00014400: 6c61 7965 642c 0a20 2020 2020 2020 2020  layed,.         
+00014410: 2020 205b 0a20 2020 2020 2020 2020 2020     [.           
+00014420: 2020 2020 2022 6461 7461 2f72 6177 5f64       "data/raw_d
+00014430: 6174 612f 4775 6572 6265 742d 4336 2d32  ata/Guerbet-C6-2
+00014440: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
+00014450: 3237 220a 2020 2020 2020 2020 2020 2020  27".            
+00014460: 2020 2020 222d 3230 3134 2d30 322d 3134      "-2014-02-14
+00014470: 3130 3233 3137 2d31 312d 4734 5f47 7565  102317-11-G4_Gue
+00014480: 7262 6574 5f54 3153 455f 3830 302d 5241  rbet_T1SE_800-RA
+00014490: 5245 220a 2020 2020 2020 2020 2020 2020  RE".            
+000144a0: 2020 2020 2270 766d 2d30 3030 3134 325f      "pvm-000142_
+000144b0: 3430 302e 6e69 6922 0a20 2020 2020 2020  400.nii".       
+000144c0: 2020 2020 205d 2c0a 2020 2020 2020 2020       ],.        
+000144d0: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
+000144e0: 7265 6d6f 7665 5f73 6361 6e28 7365 6c66  remove_scan(self
+000144f0: 293a 0a20 2020 2020 2020 2022 2222 4372  ):.        """Cr
+00014500: 6561 7465 7320 6120 6e65 7720 7072 6f6a  eates a new proj
+00014510: 6563 742c 2061 6464 7320 7363 616e 7320  ect, adds scans 
+00014520: 746f 2074 6865 2073 6573 7369 6f6e 2061  to the session a
+00014530: 6e64 2072 656d 6f76 6520 7468 656d 2e0a  nd remove them..
+00014540: 0a20 2020 2020 2020 202d 2054 6573 7473  .        - Tests
+00014550: 3a0a 2020 2020 2020 2020 2020 2020 2d20  :.            - 
+00014560: 5069 7065 6c69 6e65 4d61 6e61 6765 7254  PipelineManagerT
+00014570: 6162 2e72 656d 6f76 655f 7363 616e 0a20  ab.remove_scan. 
+00014580: 2020 2020 2020 2020 2020 202d 2050 6f70             - Pop
+00014590: 5570 5265 6d6f 7665 5363 616e 0a0a 2020  UpRemoveScan..  
+000145a0: 2020 2020 2020 2d20 4d6f 636b 733a 0a20        - Mocks:. 
+000145b0: 2020 2020 2020 2020 2020 202d 2050 6f70             - Pop
+000145c0: 5570 5265 6d6f 7665 5363 616e 2e65 7865  UpRemoveScan.exe
+000145d0: 630a 2020 2020 2020 2020 2222 220a 0a20  c.        """.. 
+000145e0: 2020 2020 2020 2023 2053 6574 7320 7368         # Sets sh
+000145f0: 6f72 7463 7574 7320 666f 7220 6f62 6a65  ortcuts for obje
+00014600: 6374 7320 7468 6174 2061 7265 206f 6674  cts that are oft
+00014610: 656e 2075 7365 640a 2020 2020 2020 2020  en used.        
+00014620: 7070 6c5f 6d61 6e61 6765 7220 3d20 7365  ppl_manager = se
+00014630: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
+00014640: 6970 656c 696e 655f 6d61 6e61 6765 720a  ipeline_manager.
+00014650: 2020 2020 2020 2020 6461 7461 5f62 726f          data_bro
+00014660: 7773 6572 203d 2073 656c 662e 6d61 696e  wser = self.main
+00014670: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
+00014680: 7773 6572 0a20 2020 2020 2020 2074 625f  wser.        tb_
+00014690: 6461 7461 203d 2064 6174 615f 6272 6f77  data = data_brow
+000146a0: 7365 722e 7461 626c 655f 6461 7461 0a20  ser.table_data. 
+000146b0: 2020 2020 2020 2073 6573 7369 6f6e 203d         session =
+000146c0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+000146d0: 772e 7072 6f6a 6563 742e 7365 7373 696f  w.project.sessio
+000146e0: 6e0a 0a20 2020 2020 2020 2023 2043 7265  n..        # Cre
+000146f0: 6174 6573 2061 206e 6577 2070 726f 6a65  ates a new proje
+00014700: 6374 2066 6f6c 6465 720a 2020 2020 2020  ct folder.      
+00014710: 2020 7072 6f6a 6563 745f 385f 7061 7468    project_8_path
+00014720: 203d 2073 656c 662e 6765 745f 6e65 775f   = self.get_new_
+00014730: 7465 7374 5f70 726f 6a65 6374 2829 0a20  test_project(). 
+00014740: 2020 2020 2020 2070 706c 5f6d 616e 6167         ppl_manag
+00014750: 6572 2e70 726f 6a65 6374 2e66 6f6c 6465  er.project.folde
+00014760: 7220 3d20 7072 6f6a 6563 745f 385f 7061  r = project_8_pa
+00014770: 7468 0a20 2020 2020 2020 2066 6f6c 6465  th.        folde
+00014780: 7220 3d20 6f73 2e70 6174 682e 6a6f 696e  r = os.path.join
+00014790: 2870 726f 6a65 6374 5f38 5f70 6174 682c  (project_8_path,
+000147a0: 2022 6461 7461 222c 2022 7261 775f 6461   "data", "raw_da
+000147b0: 7461 2229 0a0a 2020 2020 2020 2020 4e49  ta")..        NI
+000147c0: 495f 4649 4c45 5f31 203d 2028 0a20 2020  I_FILE_1 = (.   
+000147d0: 2020 2020 2020 2020 2022 4775 6572 6265           "Guerbe
+000147e0: 742d 4336 2d32 3031 342d 5261 742d 4b35  t-C6-2014-Rat-K5
+000147f0: 322d 5475 6265 3237 2d32 3031 342d 3032  2-Tube27-2014-02
+00014800: 2d31 3431 3032 3331 372d 3034 2d47 335f  -14102317-04-G3_
+00014810: 220a 2020 2020 2020 2020 2020 2020 2247  ".            "G
+00014820: 7565 7262 6574 5f4d 4445 4654 2d4d 4445  uerbet_MDEFT-MDE
+00014830: 4654 7076 6d2d 3030 3039 3430 5f38 3030  FTpvm-000940_800
+00014840: 2e6e 6969 220a 2020 2020 2020 2020 290a  .nii".        ).
+00014850: 2020 2020 2020 2020 4e49 495f 4649 4c45          NII_FILE
+00014860: 5f32 203d 2028 0a20 2020 2020 2020 2020  _2 = (.         
+00014870: 2020 2022 4775 6572 6265 742d 4336 2d32     "Guerbet-C6-2
+00014880: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
+00014890: 3237 2d32 3031 342d 3032 2d31 3431 3032  27-2014-02-14102
+000148a0: 3331 372d 3035 2d47 345f 220a 2020 2020  317-05-G4_".    
+000148b0: 2020 2020 2020 2020 2247 7565 7262 6574          "Guerbet
+000148c0: 5f54 3153 455f 3830 302d 5241 5245 7076  _T1SE_800-RAREpv
+000148d0: 6d2d 3030 3031 3432 5f34 3030 2e6e 6969  m-000142_400.nii
+000148e0: 220a 2020 2020 2020 2020 290a 2020 2020  ".        ).    
+000148f0: 2020 2020 444f 4355 4d45 4e54 5f31 203d      DOCUMENT_1 =
+00014900: 206f 732e 7061 7468 2e61 6273 7061 7468   os.path.abspath
+00014910: 286f 732e 7061 7468 2e6a 6f69 6e28 666f  (os.path.join(fo
+00014920: 6c64 6572 2c20 4e49 495f 4649 4c45 5f31  lder, NII_FILE_1
+00014930: 2929 0a20 2020 2020 2020 2044 4f43 554d  )).        DOCUM
+00014940: 454e 545f 3220 3d20 6f73 2e70 6174 682e  ENT_2 = os.path.
+00014950: 6162 7370 6174 6828 6f73 2e70 6174 682e  abspath(os.path.
+00014960: 6a6f 696e 2866 6f6c 6465 722c 204e 4949  join(folder, NII
+00014970: 5f46 494c 455f 3229 290a 0a20 2020 2020  _FILE_2))..     
+00014980: 2020 2023 2041 6464 7320 3220 7363 616e     # Adds 2 scan
+00014990: 7320 746f 2074 6865 2063 7572 7265 6e74  s to the current
+000149a0: 2073 6573 7369 6f6e 0a20 2020 2020 2020   session.       
+000149b0: 2073 6573 7369 6f6e 2e61 6464 5f64 6f63   session.add_doc
+000149c0: 756d 656e 7428 434f 4c4c 4543 5449 4f4e  ument(COLLECTION
+000149d0: 5f43 5552 5245 4e54 2c20 444f 4355 4d45  _CURRENT, DOCUME
+000149e0: 4e54 5f31 290a 2020 2020 2020 2020 7365  NT_1).        se
+000149f0: 7373 696f 6e2e 6164 645f 646f 6375 6d65  ssion.add_docume
+00014a00: 6e74 2843 4f4c 4c45 4354 494f 4e5f 494e  nt(COLLECTION_IN
+00014a10: 4954 4941 4c2c 2044 4f43 554d 454e 545f  ITIAL, DOCUMENT_
+00014a20: 3129 0a20 2020 2020 2020 2073 6573 7369  1).        sessi
+00014a30: 6f6e 2e61 6464 5f64 6f63 756d 656e 7428  on.add_document(
+00014a40: 434f 4c4c 4543 5449 4f4e 5f43 5552 5245  COLLECTION_CURRE
+00014a50: 4e54 2c20 444f 4355 4d45 4e54 5f32 290a  NT, DOCUMENT_2).
+00014a60: 2020 2020 2020 2020 7365 7373 696f 6e2e          session.
+00014a70: 6164 645f 646f 6375 6d65 6e74 2843 4f4c  add_document(COL
+00014a80: 4c45 4354 494f 4e5f 494e 4954 4941 4c2c  LECTION_INITIAL,
+00014a90: 2044 4f43 554d 454e 545f 3229 0a20 2020   DOCUMENT_2).   
+00014aa0: 2020 2020 2070 706c 5f6d 616e 6167 6572       ppl_manager
+00014ab0: 2e73 6361 6e5f 6c69 7374 2e61 7070 656e  .scan_list.appen
+00014ac0: 6428 444f 4355 4d45 4e54 5f31 290a 2020  d(DOCUMENT_1).  
+00014ad0: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
+00014ae0: 722e 7363 616e 5f6c 6973 742e 6170 7065  r.scan_list.appe
+00014af0: 6e64 2844 4f43 554d 454e 545f 3229 0a20  nd(DOCUMENT_2). 
+00014b00: 2020 2020 2020 2064 6174 615f 6272 6f77         data_brow
+00014b10: 7365 722e 6461 7461 5f73 656e 7420 3d20  ser.data_sent = 
+00014b20: 5472 7565 0a0a 2020 2020 2020 2020 2320  True..        # 
+00014b30: 5265 6672 6573 6865 7320 7468 6520 6461  Refreshes the da
+00014b40: 7461 2062 726f 7773 6572 2074 6162 0a20  ta browser tab. 
+00014b50: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
+00014b60: 5f77 696e 646f 772e 7570 6461 7465 5f70  _window.update_p
+00014b70: 726f 6a65 6374 2870 726f 6a65 6374 5f38  roject(project_8
+00014b80: 5f70 6174 6829 0a0a 2020 2020 2020 2020  _path)..        
+00014b90: 2320 5365 6c65 6374 7320 616c 6c20 7363  # Selects all sc
+00014ba0: 616e 730a 2020 2020 2020 2020 7462 5f64  ans.        tb_d
+00014bb0: 6174 612e 7365 6c65 6374 436f 6c75 6d6e  ata.selectColumn
+00014bc0: 2830 290a 0a20 2020 2020 2020 2023 2043  (0)..        # C
+00014bd0: 616e 6365 6c73 2072 656d 6f76 696e 6720  ancels removing 
+00014be0: 626f 7468 2073 6361 6e73 0a20 2020 2020  both scans.     
+00014bf0: 2020 2050 6f70 5570 5265 6d6f 7665 5363     PopUpRemoveSc
+00014c00: 616e 2e65 7865 6320 3d20 6c61 6d62 6461  an.exec = lambda
+00014c10: 2078 3a20 7462 5f64 6174 612e 706f 702e   x: tb_data.pop.
+00014c20: 6361 6e63 656c 5f63 6c69 636b 6564 2829  cancel_clicked()
+00014c30: 0a20 2020 2020 2020 2064 6174 615f 6272  .        data_br
+00014c40: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
+00014c50: 2e72 656d 6f76 655f 7363 616e 2829 0a0a  .remove_scan()..
+00014c60: 2020 2020 2020 2020 2320 5265 6a65 6374          # Reject
+00014c70: 7320 7265 6d6f 7669 6e67 2062 6f74 6820  s removing both 
+00014c80: 7363 616e 730a 2020 2020 2020 2020 506f  scans.        Po
+00014c90: 7055 7052 656d 6f76 6553 6361 6e2e 6578  pUpRemoveScan.ex
+00014ca0: 6563 203d 206c 616d 6264 6120 783a 2074  ec = lambda x: t
+00014cb0: 625f 6461 7461 2e70 6f70 2e6e 6f5f 616c  b_data.pop.no_al
+00014cc0: 6c5f 636c 6963 6b65 6428 290a 2020 2020  l_clicked().    
+00014cd0: 2020 2020 6461 7461 5f62 726f 7773 6572      data_browser
+00014ce0: 2e74 6162 6c65 5f64 6174 612e 7265 6d6f  .table_data.remo
+00014cf0: 7665 5f73 6361 6e28 290a 0a20 2020 2020  ve_scan()..     
+00014d00: 2020 2023 2041 7373 6572 7473 2074 6861     # Asserts tha
+00014d10: 7420 7468 6520 6461 7461 2062 726f 7773  t the data brows
+00014d20: 6572 206b 6570 7420 626f 7468 2073 6361  er kept both sca
+00014d30: 6e73 0a20 2020 2020 2020 2073 656c 662e  ns.        self.
+00014d40: 6173 7365 7274 4571 7561 6c28 6c65 6e28  assertEqual(len(
+00014d50: 7462 5f64 6174 612e 7363 616e 7329 2c20  tb_data.scans), 
+00014d60: 3229 0a0a 2020 2020 2020 2020 2320 4566  2)..        # Ef
+00014d70: 6665 6374 6976 656c 7920 7265 6d6f 7665  fectively remove
+00014d80: 7320 626f 7468 2073 6361 6e73 0a20 2020  s both scans.   
+00014d90: 2020 2020 2050 6f70 5570 5265 6d6f 7665       PopUpRemove
+00014da0: 5363 616e 2e65 7865 6320 3d20 6c61 6d62  Scan.exec = lamb
+00014db0: 6461 2078 3a20 7462 5f64 6174 612e 706f  da x: tb_data.po
+00014dc0: 702e 7965 735f 616c 6c5f 636c 6963 6b65  p.yes_all_clicke
+00014dd0: 6428 290a 2020 2020 2020 2020 6461 7461  d().        data
+00014de0: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
+00014df0: 6174 612e 7265 6d6f 7665 5f73 6361 6e28  ata.remove_scan(
+00014e00: 290a 0a20 2020 2020 2020 2023 2041 7373  )..        # Ass
+00014e10: 6572 7473 2074 6861 7420 7468 6520 7363  erts that the sc
+00014e20: 616e 7320 7765 7265 2064 656c 6574 6564  ans were deleted
+00014e30: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00014e40: 7365 7274 4571 7561 6c28 6c65 6e28 7462  sertEqual(len(tb
+00014e50: 5f64 6174 612e 7363 616e 7329 2c20 3029  _data.scans), 0)
+00014e60: 0a0a 2020 2020 2020 2020 2320 4164 6473  ..        # Adds
+00014e70: 206f 6e65 2073 6361 6e20 746f 2074 6865   one scan to the
+00014e80: 2063 7572 7265 6e74 2073 6573 7369 6f6e   current session
+00014e90: 0a20 2020 2020 2020 2073 6573 7369 6f6e  .        session
+00014ea0: 2e61 6464 5f64 6f63 756d 656e 7428 434f  .add_document(CO
+00014eb0: 4c4c 4543 5449 4f4e 5f43 5552 5245 4e54  LLECTION_CURRENT
+00014ec0: 2c20 444f 4355 4d45 4e54 5f31 290a 2020  , DOCUMENT_1).  
+00014ed0: 2020 2020 2020 7365 7373 696f 6e2e 6164        session.ad
+00014ee0: 645f 646f 6375 6d65 6e74 2843 4f4c 4c45  d_document(COLLE
+00014ef0: 4354 494f 4e5f 494e 4954 4941 4c2c 2044  CTION_INITIAL, D
+00014f00: 4f43 554d 454e 545f 3129 0a20 2020 2020  OCUMENT_1).     
+00014f10: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
+00014f20: 646f 772e 7570 6461 7465 5f70 726f 6a65  dow.update_proje
+00014f30: 6374 2870 726f 6a65 6374 5f38 5f70 6174  ct(project_8_pat
+00014f40: 6829 0a20 2020 2020 2020 2070 706c 5f6d  h).        ppl_m
+00014f50: 616e 6167 6572 2e73 6361 6e5f 6c69 7374  anager.scan_list
+00014f60: 2e61 7070 656e 6428 444f 4355 4d45 4e54  .append(DOCUMENT
+00014f70: 5f31 290a 0a20 2020 2020 2020 2023 2053  _1)..        # S
+00014f80: 656c 6563 7473 2074 6865 2073 6361 6e0a  elects the scan.
+00014f90: 2020 2020 2020 2020 6461 7461 5f62 726f          data_bro
+00014fa0: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
+00014fb0: 7365 6c65 6374 436f 6c75 6d6e 2830 290a  selectColumn(0).
+00014fc0: 0a20 2020 2020 2020 2023 2052 656d 6f76  .        # Remov
+00014fd0: 6573 2074 6865 2073 6361 6e0a 2020 2020  es the scan.    
+00014fe0: 2020 2020 506f 7055 7052 656d 6f76 6553      PopUpRemoveS
+00014ff0: 6361 6e2e 6578 6563 203d 206c 616d 6264  can.exec = lambd
+00015000: 6120 783a 2074 625f 6461 7461 2e70 6f70  a x: tb_data.pop
+00015010: 2e79 6573 5f63 6c69 636b 6564 2829 0a20  .yes_clicked(). 
+00015020: 2020 2020 2020 2064 6174 615f 6272 6f77         data_brow
+00015030: 7365 722e 7461 626c 655f 6461 7461 2e72  ser.table_data.r
+00015040: 656d 6f76 655f 7363 616e 2829 0a0a 2020  emove_scan()..  
+00015050: 2020 2020 2020 2320 4173 7365 7274 7320        # Asserts 
+00015060: 7468 6174 2074 6865 2073 6361 6e73 2077  that the scans w
+00015070: 6572 6520 6465 6c65 7465 640a 2020 2020  ere deleted.    
+00015080: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00015090: 7175 616c 286c 656e 2874 625f 6461 7461  qual(len(tb_data
+000150a0: 2e73 6361 6e73 292c 2030 290a 0a20 2020  .scans), 0)..   
+000150b0: 2020 2020 2023 2070 726f 6a65 6374 5f38       # project_8
+000150c0: 5f70 6174 6820 3d20 7365 6c66 2e67 6574  _path = self.get
+000150d0: 5f6e 6577 5f74 6573 745f 7072 6f6a 6563  _new_test_projec
+000150e0: 7428 290a 2020 2020 2020 2020 2320 7365  t().        # se
+000150f0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e73  lf.main_window.s
+00015100: 7769 7463 685f 7072 6f6a 6563 7428 7072  witch_project(pr
+00015110: 6f6a 6563 745f 385f 7061 7468 2c20 2270  oject_8_path, "p
+00015120: 726f 6a65 6374 5f38 2229 0a0a 2020 2020  roject_8")..    
+00015130: 230a 0a20 2020 2023 2073 6361 6e73 5f64  #..    # scans_d
+00015140: 6973 706c 6179 6564 203d 205b 5d0a 2020  isplayed = [].  
+00015150: 2020 230a 2020 2020 2320 666f 7220 726f    #.    # for ro
+00015160: 7720 696e 2072 616e 6765 2830 2c0a 2020  w in range(0,.  
+00015170: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00015180: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
+00015190: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
+000151a0: 722e 7461 626c 655f 6461 7461 2e72 6f77  r.table_data.row
+000151b0: 436f 756e 7428 2929 3a0a 2020 2020 2320  Count()):.    # 
+000151c0: 2020 2069 7465 6d20 3d20 7365 6c66 2e6d     item = self.m
+000151d0: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
+000151e0: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
+000151f0: 7461 2e69 7465 6d28 726f 772c 2030 290a  ta.item(row, 0).
+00015200: 2020 2020 2320 2020 2073 6361 6e5f 6e61      #    scan_na
+00015210: 6d65 203d 2069 7465 6d2e 7465 7874 2829  me = item.text()
+00015220: 0a20 2020 2023 0a20 2020 2023 2020 2020  .    #.    #    
+00015230: 6966 206e 6f74 2073 656c 662e 6d61 696e  if not self.main
+00015240: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
+00015250: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
+00015260: 6973 526f 7748 6964 6465 6e28 726f 7729  isRowHidden(row)
+00015270: 3a0a 2020 2020 2320 2020 2020 2020 2073  :.    #        s
+00015280: 6361 6e73 5f64 6973 706c 6179 6564 2e61  cans_displayed.a
+00015290: 7070 656e 6428 7363 616e 5f6e 616d 6529  ppend(scan_name)
+000152a0: 0a20 2020 2023 0a20 2020 2023 2073 656c  .    #.    # sel
+000152b0: 662e 6173 7365 7274 4571 7561 6c28 6c65  f.assertEqual(le
+000152c0: 6e28 7363 616e 735f 6469 7370 6c61 7965  n(scans_displaye
+000152d0: 6429 2c20 3929 0a20 2020 2023 2073 656c  d), 9).    # sel
+000152e0: 662e 6173 7365 7274 5472 7565 2822 6461  f.assertTrue("da
+000152f0: 7461 2f72 6177 5f64 6174 612f 4775 6572  ta/raw_data/Guer
+00015300: 6265 742d 4336 2d32 3031 342d 5261 742d  bet-C6-2014-Rat-
+00015310: 4b35 322d 5475 6265 3237 220a 2020 2020  K52-Tube27".    
+00015320: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00015330: 2022 2d32 3031 342d 3032 2d31 3431 3032   "-2014-02-14102
+00015340: 3331 372d 3031 2d47 315f 4775 6572 6265  317-01-G1_Guerbe
+00015350: 745f 416e 6174 2d52 4152 4570 766d 220a  t_Anat-RAREpvm".
+00015360: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00015370: 2020 2020 2022 2d30 3030 3232 305f 3030       "-000220_00
+00015380: 302e 6e69 6922 2069 6e20 7363 616e 735f  0.nii" in scans_
+00015390: 6469 7370 6c61 7965 6429 0a20 2020 2023  displayed).    #
+000153a0: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
+000153b0: 2822 6461 7461 2f72 6177 5f64 6174 612f  ("data/raw_data/
+000153c0: 4775 6572 6265 742d 4336 2d32 3031 342d  Guerbet-C6-2014-
+000153d0: 5261 742d 4b35 322d 5475 6265 3237 220a  Rat-K52-Tube27".
+000153e0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000153f0: 2020 2020 2022 2d32 3031 342d 3032 2d31       "-2014-02-1
+00015400: 3431 3032 3331 372d 3034 2d47 335f 4775  4102317-04-G3_Gu
+00015410: 6572 6265 745f 4d44 4546 542d 4d44 4546  erbet_MDEFT-MDEF
+00015420: 5470 766d 220a 2020 2020 2320 2020 2020  Tpvm".    #     
+00015430: 2020 2020 2020 2020 2020 2022 2d30 3030             "-000
+00015440: 3934 305f 3830 302e 6e69 6922 2069 6e20  940_800.nii" in 
+00015450: 7363 616e 735f 6469 7370 6c61 7965 6429  scans_displayed)
+00015460: 0a20 2020 2023 2073 656c 662e 6173 7365  .    # self.asse
+00015470: 7274 5472 7565 2822 6461 7461 2f72 6177  rtTrue("data/raw
+00015480: 5f64 6174 612f 4775 6572 6265 742d 4336  _data/Guerbet-C6
+00015490: 2d32 3031 342d 5261 742d 4b35 322d 5475  -2014-Rat-K52-Tu
+000154a0: 6265 3237 220a 2020 2020 2320 2020 2020  be27".    #     
+000154b0: 2020 2020 2020 2020 2020 2022 2d32 3031             "-201
+000154c0: 342d 3032 2d31 3431 3032 3331 372d 3035  4-02-14102317-05
+000154d0: 2d47 345f 4775 6572 6265 745f 5431 5345  -G4_Guerbet_T1SE
+000154e0: 5f38 3030 2d52 4152 4570 766d 220a 2020  _800-RAREpvm".  
+000154f0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00015500: 2020 2022 2d30 3030 3134 325f 3430 302e     "-000142_400.
+00015510: 6e69 6922 2069 6e20 7363 616e 735f 6469  nii" in scans_di
+00015520: 7370 6c61 7965 6429 0a20 2020 2023 2073  splayed).    # s
+00015530: 656c 662e 6173 7365 7274 5472 7565 2822  elf.assertTrue("
+00015540: 6461 7461 2f72 6177 5f64 6174 612f 4775  data/raw_data/Gu
+00015550: 6572 6265 742d 4336 2d32 3031 342d 5261  erbet-C6-2014-Ra
+00015560: 742d 4b35 322d 5475 6265 3237 220a 2020  t-K52-Tube27".  
+00015570: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00015580: 2020 2022 2d32 3031 342d 3032 2d31 3431     "-2014-02-141
+00015590: 3032 3331 372d 3036 2d47 345f 4775 6572  02317-06-G4_Guer
+000155a0: 6265 745f 5431 5345 5f38 3030 2d52 4152  bet_T1SE_800-RAR
+000155b0: 4570 766d 220a 2020 2020 2320 2020 2020  Epvm".    #     
+000155c0: 2020 2020 2020 2020 2020 2022 2d30 3030             "-000
+000155d0: 3134 325f 3430 302e 6e69 6922 2069 6e20  142_400.nii" in 
+000155e0: 7363 616e 735f 6469 7370 6c61 7965 6429  scans_displayed)
+000155f0: 0a20 2020 2023 2073 656c 662e 6173 7365  .    # self.asse
+00015600: 7274 5472 7565 2822 6461 7461 2f72 6177  rtTrue("data/raw
+00015610: 5f64 6174 612f 4775 6572 6265 742d 4336  _data/Guerbet-C6
+00015620: 2d32 3031 342d 5261 742d 4b35 322d 5475  -2014-Rat-K52-Tu
+00015630: 6265 3237 220a 2020 2020 2320 2020 2020  be27".    #     
+00015640: 2020 2020 2020 2020 2020 2022 2d32 3031             "-201
+00015650: 342d 3032 2d31 3431 3032 3331 372d 3038  4-02-14102317-08
+00015660: 2d47 345f 4775 6572 6265 745f 5431 5345  -G4_Guerbet_T1SE
+00015670: 5f38 3030 2d52 4152 4570 766d 220a 2020  _800-RAREpvm".  
+00015680: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00015690: 2020 2022 2d30 3030 3134 325f 3430 302e     "-000142_400.
+000156a0: 6e69 6922 2069 6e20 7363 616e 735f 6469  nii" in scans_di
+000156b0: 7370 6c61 7965 6429 0a20 2020 2023 2073  splayed).    # s
+000156c0: 656c 662e 6173 7365 7274 5472 7565 2822  elf.assertTrue("
+000156d0: 6461 7461 2f72 6177 5f64 6174 612f 4775  data/raw_data/Gu
+000156e0: 6572 6265 742d 4336 2d32 3031 342d 5261  erbet-C6-2014-Ra
+000156f0: 742d 4b35 322d 5475 6265 3237 220a 2020  t-K52-Tube27".  
+00015700: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00015710: 2020 2022 2d32 3031 342d 3032 2d31 3431     "-2014-02-141
+00015720: 3032 3331 372d 3039 2d47 345f 4775 6572  02317-09-G4_Guer
+00015730: 6265 745f 5431 5345 5f38 3030 2d52 4152  bet_T1SE_800-RAR
+00015740: 4570 766d 220a 2020 2020 2320 2020 2020  Epvm".    #     
+00015750: 2020 2020 2020 2020 2020 2022 2d30 3030             "-000
+00015760: 3134 325f 3430 302e 6e69 6922 2069 6e20  142_400.nii" in 
+00015770: 7363 616e 735f 6469 7370 6c61 7965 6429  scans_displayed)
+00015780: 0a20 2020 2023 2073 656c 662e 6173 7365  .    # self.asse
+00015790: 7274 5472 7565 2822 6461 7461 2f72 6177  rtTrue("data/raw
+000157a0: 5f64 6174 612f 4775 6572 6265 742d 4336  _data/Guerbet-C6
+000157b0: 2d32 3031 342d 5261 742d 4b35 322d 5475  -2014-Rat-K52-Tu
+000157c0: 6265 3237 220a 2020 2020 2320 2020 2020  be27".    #     
+000157d0: 2020 2020 2020 2020 2020 2022 2d32 3031             "-201
+000157e0: 342d 3032 2d31 3431 3032 3331 372d 3130  4-02-14102317-10
+000157f0: 2d47 335f 4775 6572 6265 745f 4d44 4546  -G3_Guerbet_MDEF
+00015800: 542d 4d44 4546 5470 766d 220a 2020 2020  T-MDEFTpvm".    
+00015810: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00015820: 2022 2d30 3030 3934 305f 3830 302e 6e69   "-000940_800.ni
+00015830: 6922 2069 6e20 7363 616e 735f 6469 7370  i" in scans_disp
+00015840: 6c61 7965 6429 0a20 2020 2023 2073 656c  layed).    # sel
+00015850: 662e 6173 7365 7274 5472 7565 2822 6461  f.assertTrue("da
+00015860: 7461 2f72 6177 5f64 6174 612f 4775 6572  ta/raw_data/Guer
+00015870: 6265 742d 4336 2d32 3031 342d 5261 742d  bet-C6-2014-Rat-
+00015880: 4b35 322d 5475 6265 3237 220a 2020 2020  K52-Tube27".    
+00015890: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000158a0: 2022 2d32 3031 342d 3032 2d31 3431 3032   "-2014-02-14102
+000158b0: 3331 372d 3131 2d47 345f 4775 6572 6265  317-11-G4_Guerbe
+000158c0: 745f 5431 5345 5f38 3030 2d52 4152 4570  t_T1SE_800-RAREp
+000158d0: 766d 220a 2020 2020 2320 2020 2020 2020  vm".    #       
+000158e0: 2020 2020 2020 2020 2022 2d30 3030 3134           "-00014
+000158f0: 325f 3430 302e 6e69 6922 2069 6e20 7363  2_400.nii" in sc
+00015900: 616e 735f 6469 7370 6c61 7965 6429 0a20  ans_displayed). 
+00015910: 2020 2023 2073 656c 662e 6173 7365 7274     # self.assert
+00015920: 5472 7565 2822 6461 7461 2f64 6572 6976  True("data/deriv
+00015930: 6564 5f64 6174 612f 7347 7565 7262 6574  ed_data/sGuerbet
+00015940: 2d43 362d 3230 3134 2d52 6174 2d4b 3532  -C6-2014-Rat-K52
+00015950: 2d54 7562 6532 3722 0a20 2020 2023 2020  -Tube27".    #  
+00015960: 2020 2020 2020 2020 2020 2020 2020 222d                "-
+00015970: 3230 3134 2d30 322d 3134 3130 3233 3137  2014-02-14102317
+00015980: 2d30 312d 4731 5f47 7565 7262 6574 5f41  -01-G1_Guerbet_A
+00015990: 6e61 742d 5241 5245 7076 6d22 0a20 2020  nat-RAREpvm".   
+000159a0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+000159b0: 2020 222d 3030 3032 3230 5f30 3030 2e6e    "-000220_000.n
+000159c0: 6969 2220 696e 2073 6361 6e73 5f64 6973  ii" in scans_dis
+000159d0: 706c 6179 6564 290a 2020 2020 230a 2020  played).    #.  
+000159e0: 2020 2320 5472 7969 6e67 2074 6f20 7265    # Trying to re
+000159f0: 6d6f 7665 2061 2073 6361 6e0a 2020 2020  move a scan.    
+00015a00: 2320 7365 6c66 2e6d 6169 6e5f 7769 6e64  # self.main_wind
+00015a10: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
+00015a20: 7461 626c 655f 6461 7461 2e73 656c 6563  table_data.selec
+00015a30: 7452 6f77 2830 290a 2020 2020 2320 7365  tRow(0).    # se
+00015a40: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
+00015a50: 6174 615f 6272 6f77 7365 722e 7461 626c  ata_browser.tabl
+00015a60: 655f 6461 7461 2e72 656d 6f76 655f 7363  e_data.remove_sc
+00015a70: 616e 2829 0a20 2020 2023 2073 6361 6e73  an().    # scans
+00015a80: 5f64 6973 706c 6179 6564 203d 205b 5d0a  _displayed = [].
+00015a90: 2020 2020 230a 2020 2020 2320 666f 7220      #.    # for 
+00015aa0: 726f 7720 696e 2072 616e 6765 2830 2c0a  row in range(0,.
+00015ab0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00015ac0: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
+00015ad0: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
+00015ae0: 7365 722e 7461 626c 655f 6461 7461 2e72  ser.table_data.r
+00015af0: 6f77 436f 756e 7428 2929 3a0a 2020 2020  owCount()):.    
+00015b00: 2320 2020 2069 7465 6d20 3d20 7365 6c66  #    item = self
+00015b10: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
+00015b20: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
+00015b30: 6461 7461 2e69 7465 6d28 726f 772c 2030  data.item(row, 0
+00015b40: 290a 2020 2020 2320 2020 2073 6361 6e5f  ).    #    scan_
+00015b50: 6e61 6d65 203d 2069 7465 6d2e 7465 7874  name = item.text
+00015b60: 2829 0a20 2020 2023 0a20 2020 2023 2020  ().    #.    #  
+00015b70: 2020 6966 206e 6f74 2073 656c 662e 6d61    if not self.ma
+00015b80: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
+00015b90: 726f 7773 6572 2e74 6162 6c65 5f64 6174  rowser.table_dat
+00015ba0: 612e 6973 526f 7748 6964 6465 6e28 726f  a.isRowHidden(ro
+00015bb0: 7729 3a0a 2020 2020 2320 2020 2020 2020  w):.    #       
+00015bc0: 2073 6361 6e73 5f64 6973 706c 6179 6564   scans_displayed
+00015bd0: 2e61 7070 656e 6428 7363 616e 5f6e 616d  .append(scan_nam
+00015be0: 6529 0a20 2020 2023 0a20 2020 2023 2073  e).    #.    # s
+00015bf0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00015c00: 6c65 6e28 7363 616e 735f 6469 7370 6c61  len(scans_displa
+00015c10: 7965 6429 2c20 3829 0a20 2020 2023 2073  yed), 8).    # s
+00015c20: 656c 662e 6173 7365 7274 5472 7565 2822  elf.assertTrue("
+00015c30: 6461 7461 2f72 6177 5f64 6174 612f 4775  data/raw_data/Gu
+00015c40: 6572 6265 742d 4336 2d32 3031 342d 5261  erbet-C6-2014-Ra
+00015c50: 742d 4b35 322d 5475 6265 3237 220a 2020  t-K52-Tube27".  
+00015c60: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00015c70: 2020 2022 2d32 3031 342d 3032 2d31 3431     "-2014-02-141
+00015c80: 3032 3331 372d 3034 2d47 335f 4775 6572  02317-04-G3_Guer
+00015c90: 6265 745f 4d44 4546 542d 4d44 4546 5470  bet_MDEFT-MDEFTp
+00015ca0: 766d 220a 2020 2020 2320 2020 2020 2020  vm".    #       
+00015cb0: 2020 2020 2020 2020 2022 2d30 3030 3934           "-00094
+00015cc0: 305f 3830 302e 6e69 6922 2069 6e20 7363  0_800.nii" in sc
+00015cd0: 616e 735f 6469 7370 6c61 7965 6429 0a20  ans_displayed). 
+00015ce0: 2020 2023 2073 656c 662e 6173 7365 7274     # self.assert
+00015cf0: 5472 7565 2822 6461 7461 2f72 6177 5f64  True("data/raw_d
+00015d00: 6174 612f 4775 6572 6265 742d 4336 2d32  ata/Guerbet-C6-2
+00015d10: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
+00015d20: 3237 220a 2020 2020 2320 2020 2020 2020  27".    #       
+00015d30: 2020 2020 2020 2020 2022 2d32 3031 342d           "-2014-
+00015d40: 3032 2d31 3431 3032 3331 372d 3035 2d47  02-14102317-05-G
+00015d50: 345f 4775 6572 6265 745f 5431 5345 5f38  4_Guerbet_T1SE_8
+00015d60: 3030 2d52 4152 4570 766d 220a 2020 2020  00-RAREpvm".    
+00015d70: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00015d80: 2022 2d30 3030 3134 325f 3430 302e 6e69   "-000142_400.ni
+00015d90: 6922 2069 6e20 7363 616e 735f 6469 7370  i" in scans_disp
+00015da0: 6c61 7965 6429 0a20 2020 2023 2073 656c  layed).    # sel
+00015db0: 662e 6173 7365 7274 5472 7565 2822 6461  f.assertTrue("da
+00015dc0: 7461 2f72 6177 5f64 6174 612f 4775 6572  ta/raw_data/Guer
+00015dd0: 6265 742d 4336 2d32 3031 342d 5261 742d  bet-C6-2014-Rat-
+00015de0: 4b35 322d 5475 6265 3237 220a 2020 2020  K52-Tube27".    
+00015df0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00015e00: 2022 2d32 3031 342d 3032 2d31 3431 3032   "-2014-02-14102
+00015e10: 3331 372d 3036 2d47 345f 4775 6572 6265  317-06-G4_Guerbe
+00015e20: 745f 5431 5345 5f38 3030 2d52 4152 4570  t_T1SE_800-RAREp
+00015e30: 766d 220a 2020 2020 2320 2020 2020 2020  vm".    #       
+00015e40: 2020 2020 2020 2020 2022 2d30 3030 3134           "-00014
+00015e50: 325f 3430 302e 6e69 6922 2069 6e20 7363  2_400.nii" in sc
+00015e60: 616e 735f 6469 7370 6c61 7965 6429 0a20  ans_displayed). 
+00015e70: 2020 2023 2073 656c 662e 6173 7365 7274     # self.assert
+00015e80: 5472 7565 2822 6461 7461 2f72 6177 5f64  True("data/raw_d
+00015e90: 6174 612f 4775 6572 6265 742d 4336 2d32  ata/Guerbet-C6-2
+00015ea0: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
+00015eb0: 3237 220a 2020 2020 2320 2020 2020 2020  27".    #       
+00015ec0: 2020 2020 2020 2020 2022 2d32 3031 342d           "-2014-
+00015ed0: 3032 2d31 3431 3032 3331 372d 3038 2d47  02-14102317-08-G
+00015ee0: 345f 4775 6572 6265 745f 5431 5345 5f38  4_Guerbet_T1SE_8
+00015ef0: 3030 2d52 4152 4570 766d 220a 2020 2020  00-RAREpvm".    
+00015f00: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00015f10: 2022 2d30 3030 3134 325f 3430 302e 6e69   "-000142_400.ni
+00015f20: 6922 2069 6e20 7363 616e 735f 6469 7370  i" in scans_disp
+00015f30: 6c61 7965 6429 0a20 2020 2023 2073 656c  layed).    # sel
+00015f40: 662e 6173 7365 7274 5472 7565 2822 6461  f.assertTrue("da
+00015f50: 7461 2f72 6177 5f64 6174 612f 4775 6572  ta/raw_data/Guer
+00015f60: 6265 742d 4336 2d32 3031 342d 5261 742d  bet-C6-2014-Rat-
+00015f70: 4b35 322d 5475 6265 3237 220a 2020 2020  K52-Tube27".    
+00015f80: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00015f90: 2022 2d32 3031 342d 3032 2d31 3431 3032   "-2014-02-14102
+00015fa0: 3331 372d 3039 2d47 345f 4775 6572 6265  317-09-G4_Guerbe
+00015fb0: 745f 5431 5345 5f38 3030 2d52 4152 4570  t_T1SE_800-RAREp
+00015fc0: 766d 220a 2020 2020 2320 2020 2020 2020  vm".    #       
+00015fd0: 2020 2020 2020 2020 2022 2d30 3030 3134           "-00014
+00015fe0: 325f 3430 302e 6e69 6922 2069 6e20 7363  2_400.nii" in sc
+00015ff0: 616e 735f 6469 7370 6c61 7965 6429 0a20  ans_displayed). 
+00016000: 2020 2023 2073 656c 662e 6173 7365 7274     # self.assert
+00016010: 5472 7565 2822 6461 7461 2f72 6177 5f64  True("data/raw_d
+00016020: 6174 612f 4775 6572 6265 742d 4336 2d32  ata/Guerbet-C6-2
+00016030: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
+00016040: 3237 220a 2020 2020 2320 2020 2020 2020  27".    #       
+00016050: 2020 2020 2020 2020 2022 2d32 3031 342d           "-2014-
+00016060: 3032 2d31 3431 3032 3331 372d 3130 2d47  02-14102317-10-G
+00016070: 335f 4775 6572 6265 745f 4d44 4546 542d  3_Guerbet_MDEFT-
+00016080: 4d44 4546 5470 766d 220a 2020 2020 2320  MDEFTpvm".    # 
+00016090: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000160a0: 2d30 3030 3934 305f 3830 302e 6e69 6922  -000940_800.nii"
+000160b0: 2069 6e20 7363 616e 735f 6469 7370 6c61   in scans_displa
+000160c0: 7965 6429 0a20 2020 2023 2073 656c 662e  yed).    # self.
+000160d0: 6173 7365 7274 5472 7565 2822 6461 7461  assertTrue("data
+000160e0: 2f72 6177 5f64 6174 612f 4775 6572 6265  /raw_data/Guerbe
+000160f0: 742d 4336 2d32 3031 342d 5261 742d 4b35  t-C6-2014-Rat-K5
+00016100: 322d 5475 6265 3237 220a 2020 2020 2320  2-Tube27".    # 
+00016110: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00016120: 2d32 3031 342d 3032 2d31 3431 3032 3331  -2014-02-1410231
+00016130: 372d 3131 2d47 345f 4775 6572 6265 745f  7-11-G4_Guerbet_
+00016140: 5431 5345 5f38 3030 2d52 4152 4570 766d  T1SE_800-RAREpvm
+00016150: 220a 2020 2020 2320 2020 2020 2020 2020  ".    #         
+00016160: 2020 2020 2020 2022 2d30 3030 3134 325f         "-000142_
+00016170: 3430 302e 6e69 6922 2069 6e20 7363 616e  400.nii" in scan
+00016180: 735f 6469 7370 6c61 7965 6429 0a20 2020  s_displayed).   
+00016190: 2023 2073 656c 662e 6173 7365 7274 5472   # self.assertTr
+000161a0: 7565 2822 6461 7461 2f72 6177 5f64 6174  ue("data/raw_dat
+000161b0: 612f 4775 6572 6265 742d 4336 2d32 3031  a/Guerbet-C6-201
+000161c0: 342d 5261 742d 4b35 322d 5475 6265 3237  4-Rat-K52-Tube27
+000161d0: 220a 2020 2020 2320 2020 2020 2020 2020  ".    #         
+000161e0: 2020 2020 2020 2022 2d32 3031 342d 3032         "-2014-02
+000161f0: 2d31 3431 3032 3331 372d 3031 2d47 315f  -14102317-01-G1_
+00016200: 4775 6572 6265 745f 416e 6174 2d52 4152  Guerbet_Anat-RAR
+00016210: 4570 766d 220a 2020 2020 2320 2020 2020  Epvm".    #     
+00016220: 2020 2020 2020 2020 2020 2022 2d30 3030             "-000
+00016230: 3232 305f 3030 302e 6e69 6922 2069 6e20  220_000.nii" in 
+00016240: 7363 616e 735f 6469 7370 6c61 7965 6429  scans_displayed)
+00016250: 0a0a 2020 2020 6465 6620 7465 7374 5f72  ..    def test_r
+00016260: 656d 6f76 655f 7461 6728 7365 6c66 293a  emove_tag(self):
+00016270: 0a20 2020 2020 2020 2022 2222 5465 7374  .        """Test
+00016280: 7320 7468 6520 706f 7075 7020 7265 6d6f  s the popup remo
+00016290: 7669 6e67 2075 7365 7220 7461 6773 2e22  ving user tags."
+000162a0: 2222 0a0a 2020 2020 2020 2020 2320 4164  ""..        # Ad
+000162b0: 6469 6e67 2061 2074 6167 2022 5465 7374  ding a tag "Test
+000162c0: 220a 2020 2020 2020 2020 7365 6c66 2e6d  ".        self.m
+000162d0: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
+000162e0: 6272 6f77 7365 722e 6164 645f 7461 675f  browser.add_tag_
+000162f0: 6163 7469 6f6e 2e74 7269 6767 6572 2829  action.trigger()
+00016300: 0a20 2020 2020 2020 2061 6464 5f74 6167  .        add_tag
+00016310: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
+00016320: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
+00016330: 2e70 6f70 5f75 705f 6164 645f 7461 670a  .pop_up_add_tag.
+00016340: 2020 2020 2020 2020 6164 645f 7461 672e          add_tag.
+00016350: 7465 7874 5f65 6469 745f 7461 675f 6e61  text_edit_tag_na
+00016360: 6d65 2e73 6574 5465 7874 2822 5465 7374  me.setText("Test
+00016370: 2229 0a20 2020 2020 2020 2051 5465 7374  ").        QTest
+00016380: 2e6d 6f75 7365 436c 6963 6b28 6164 645f  .mouseClick(add_
+00016390: 7461 672e 7075 7368 5f62 7574 746f 6e5f  tag.push_button_
+000163a0: 6f6b 2c20 5174 2e4c 6566 7442 7574 746f  ok, Qt.LeftButto
+000163b0: 6e29 0a20 2020 2020 2020 206f 6c64 5f74  n).        old_t
+000163c0: 6167 735f 6375 7272 656e 7420 3d20 7365  ags_current = se
+000163d0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
+000163e0: 726f 6a65 6374 2e73 6573 7369 6f6e 2e67  roject.session.g
+000163f0: 6574 5f66 6965 6c64 735f 6e61 6d65 7328  et_fields_names(
+00016400: 0a20 2020 2020 2020 2020 2020 2043 4f4c  .            COL
+00016410: 4c45 4354 494f 4e5f 4355 5252 454e 540a  LECTION_CURRENT.
+00016420: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00016430: 2020 6f6c 645f 7461 6773 5f69 6e69 7469    old_tags_initi
+00016440: 616c 203d 2073 656c 662e 6d61 696e 5f77  al = self.main_w
+00016450: 696e 646f 772e 7072 6f6a 6563 742e 7365  indow.project.se
+00016460: 7373 696f 6e2e 6765 745f 6669 656c 6473  ssion.get_fields
+00016470: 5f6e 616d 6573 280a 2020 2020 2020 2020  _names(.        
+00016480: 2020 2020 434f 4c4c 4543 5449 4f4e 5f49      COLLECTION_I
+00016490: 4e49 5449 414c 0a20 2020 2020 2020 2029  NITIAL.        )
+000164a0: 0a0a 2020 2020 2020 2020 2320 4f70 656e  ..        # Open
+000164b0: 2074 6865 2022 5265 6d6f 7665 2061 2074   the "Remove a t
+000164c0: 6167 2220 706f 702d 7570 2062 7574 2064  ag" pop-up but d
+000164d0: 6f20 6e6f 7468 696e 670a 2020 2020 2020  o nothing.      
+000164e0: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
+000164f0: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
+00016500: 7265 6d6f 7665 5f74 6167 5f61 6374 696f  remove_tag_actio
+00016510: 6e2e 7472 6967 6765 7228 290a 2020 2020  n.trigger().    
+00016520: 2020 2020 7265 6d6f 7665 5f74 6167 203d      remove_tag =
+00016530: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+00016540: 772e 6461 7461 5f62 726f 7773 6572 2e70  w.data_browser.p
+00016550: 6f70 5f75 705f 7265 6d6f 7665 5f74 6167  op_up_remove_tag
+00016560: 0a20 2020 2020 2020 2051 5465 7374 2e6d  .        QTest.m
+00016570: 6f75 7365 436c 6963 6b28 7265 6d6f 7665  ouseClick(remove
+00016580: 5f74 6167 2e70 7573 685f 6275 7474 6f6e  _tag.push_button
+00016590: 5f6f 6b2c 2051 742e 4c65 6674 4275 7474  _ok, Qt.LeftButt
+000165a0: 6f6e 290a 2020 2020 2020 2020 6e65 775f  on).        new_
+000165b0: 7461 6773 5f63 7572 7265 6e74 203d 2073  tags_current = s
+000165c0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+000165d0: 7072 6f6a 6563 742e 7365 7373 696f 6e2e  project.session.
+000165e0: 6765 745f 6669 656c 6473 5f6e 616d 6573  get_fields_names
+000165f0: 280a 2020 2020 2020 2020 2020 2020 434f  (.            CO
+00016600: 4c4c 4543 5449 4f4e 5f43 5552 5245 4e54  LLECTION_CURRENT
+00016610: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00016620: 2020 206e 6577 5f74 6167 735f 696e 6974     new_tags_init
+00016630: 6961 6c20 3d20 7365 6c66 2e6d 6169 6e5f  ial = self.main_
+00016640: 7769 6e64 6f77 2e70 726f 6a65 6374 2e73  window.project.s
+00016650: 6573 7369 6f6e 2e67 6574 5f66 6965 6c64  ession.get_field
+00016660: 735f 6e61 6d65 7328 0a20 2020 2020 2020  s_names(.       
+00016670: 2020 2020 2043 4f4c 4c45 4354 494f 4e5f       COLLECTION_
+00016680: 494e 4954 4941 4c0a 2020 2020 2020 2020  INITIAL.        
+00016690: 290a 0a20 2020 2020 2020 2023 2043 6865  )..        # Che
+000166a0: 636b 2074 6861 7420 7468 6520 6c69 7374  ck that the list
+000166b0: 206f 6620 7461 6773 2068 6173 206e 6f74   of tags has not
+000166c0: 2063 6861 6e67 6564 0a20 2020 2020 2020   changed.       
+000166d0: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
+000166e0: 286f 6c64 5f74 6167 735f 6375 7272 656e  (old_tags_curren
+000166f0: 7420 3d3d 206e 6577 5f74 6167 735f 6375  t == new_tags_cu
+00016700: 7272 656e 7429 0a20 2020 2020 2020 2073  rrent).        s
+00016710: 656c 662e 6173 7365 7274 5472 7565 286f  elf.assertTrue(o
+00016720: 6c64 5f74 6167 735f 696e 6974 6961 6c20  ld_tags_initial 
+00016730: 3d3d 206e 6577 5f74 6167 735f 696e 6974  == new_tags_init
+00016740: 6961 6c29 0a0a 2020 2020 2020 2020 6f6c  ial)..        ol
+00016750: 645f 7461 6773 5f63 7572 7265 6e74 203d  d_tags_current =
+00016760: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+00016770: 772e 7072 6f6a 6563 742e 7365 7373 696f  w.project.sessio
+00016780: 6e2e 6765 745f 6669 656c 6473 5f6e 616d  n.get_fields_nam
+00016790: 6573 280a 2020 2020 2020 2020 2020 2020  es(.            
+000167a0: 434f 4c4c 4543 5449 4f4e 5f43 5552 5245  COLLECTION_CURRE
+000167b0: 4e54 0a20 2020 2020 2020 2029 0a20 2020  NT.        ).   
+000167c0: 2020 2020 206f 6c64 5f74 6167 735f 696e       old_tags_in
+000167d0: 6974 6961 6c20 3d20 7365 6c66 2e6d 6169  itial = self.mai
+000167e0: 6e5f 7769 6e64 6f77 2e70 726f 6a65 6374  n_window.project
+000167f0: 2e73 6573 7369 6f6e 2e67 6574 5f66 6965  .session.get_fie
+00016800: 6c64 735f 6e61 6d65 7328 0a20 2020 2020  lds_names(.     
+00016810: 2020 2020 2020 2043 4f4c 4c45 4354 494f         COLLECTIO
+00016820: 4e5f 494e 4954 4941 4c0a 2020 2020 2020  N_INITIAL.      
+00016830: 2020 290a 2020 2020 2020 2020 2320 4368    ).        # Ch
+00016840: 6563 6b20 7468 6174 2022 5465 7374 2220  eck that "Test" 
+00016850: 7461 6720 6973 2069 6e20 7468 6520 6c69  tag is in the li
+00016860: 7374 206f 6620 7461 6773 0a20 2020 2020  st of tags.     
+00016870: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
+00016880: 7565 2822 5465 7374 2220 696e 206f 6c64  ue("Test" in old
+00016890: 5f74 6167 735f 6375 7272 656e 7429 0a20  _tags_current). 
+000168a0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+000168b0: 7274 5472 7565 2822 5465 7374 2220 696e  rtTrue("Test" in
+000168c0: 206f 6c64 5f74 6167 735f 696e 6974 6961   old_tags_initia
+000168d0: 6c29 0a0a 2020 2020 2020 2020 2320 4f70  l)..        # Op
+000168e0: 656e 2074 6865 2022 5265 6d6f 7665 2061  en the "Remove a
+000168f0: 2074 6167 2220 706f 702d 7570 2061 6e64   tag" pop-up and
+00016900: 2072 656d 6f76 6520 2254 6573 7422 2074   remove "Test" t
+00016910: 6167 0a20 2020 2020 2020 2073 656c 662e  ag.        self.
+00016920: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
+00016930: 5f62 726f 7773 6572 2e72 656d 6f76 655f  _browser.remove_
+00016940: 7461 675f 6163 7469 6f6e 2e74 7269 6767  tag_action.trigg
+00016950: 6572 2829 0a20 2020 2020 2020 2072 656d  er().        rem
+00016960: 6f76 655f 7461 6720 3d20 7365 6c66 2e6d  ove_tag = self.m
+00016970: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
+00016980: 6272 6f77 7365 722e 706f 705f 7570 5f72  browser.pop_up_r
+00016990: 656d 6f76 655f 7461 670a 2020 2020 2020  emove_tag.      
+000169a0: 2020 7265 6d6f 7665 5f74 6167 2e6c 6973    remove_tag.lis
+000169b0: 745f 7769 6467 6574 5f74 6167 732e 7365  t_widget_tags.se
+000169c0: 7443 7572 7265 6e74 526f 7728 3029 2020  tCurrentRow(0)  
+000169d0: 2320 5465 7374 2074 6167 2073 656c 6563  # Test tag selec
+000169e0: 7465 640a 2020 2020 2020 2020 5154 6573  ted.        QTes
+000169f0: 742e 6d6f 7573 6543 6c69 636b 2872 656d  t.mouseClick(rem
+00016a00: 6f76 655f 7461 672e 7075 7368 5f62 7574  ove_tag.push_but
+00016a10: 746f 6e5f 6f6b 2c20 5174 2e4c 6566 7442  ton_ok, Qt.LeftB
+00016a20: 7574 746f 6e29 0a20 2020 2020 2020 206e  utton).        n
+00016a30: 6577 5f74 6167 735f 6375 7272 656e 7420  ew_tags_current 
+00016a40: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
+00016a50: 6f77 2e70 726f 6a65 6374 2e73 6573 7369  ow.project.sessi
+00016a60: 6f6e 2e67 6574 5f66 6965 6c64 735f 6e61  on.get_fields_na
+00016a70: 6d65 7328 0a20 2020 2020 2020 2020 2020  mes(.           
+00016a80: 2043 4f4c 4c45 4354 494f 4e5f 4355 5252   COLLECTION_CURR
+00016a90: 454e 540a 2020 2020 2020 2020 290a 2020  ENT.        ).  
+00016aa0: 2020 2020 2020 6e65 775f 7461 6773 5f69        new_tags_i
+00016ab0: 6e69 7469 616c 203d 2073 656c 662e 6d61  nitial = self.ma
+00016ac0: 696e 5f77 696e 646f 772e 7072 6f6a 6563  in_window.projec
+00016ad0: 742e 7365 7373 696f 6e2e 6765 745f 6669  t.session.get_fi
+00016ae0: 656c 6473 5f6e 616d 6573 280a 2020 2020  elds_names(.    
+00016af0: 2020 2020 2020 2020 434f 4c4c 4543 5449          COLLECTI
+00016b00: 4f4e 5f49 4e49 5449 414c 0a20 2020 2020  ON_INITIAL.     
+00016b10: 2020 2029 0a20 2020 2020 2020 2023 2043     ).        # C
+00016b20: 6865 636b 2074 6861 7420 2254 6573 7422  heck that "Test"
+00016b30: 2074 6167 2069 7320 6e6f 206c 6f6e 6765   tag is no longe
+00016b40: 7220 696e 2074 6865 206c 6973 7420 6f66  r in the list of
+00016b50: 2074 6167 730a 2020 2020 2020 2020 7365   tags.        se
+00016b60: 6c66 2e61 7373 6572 7454 7275 6528 2254  lf.assertTrue("T
+00016b70: 6573 7422 206e 6f74 2069 6e20 6e65 775f  est" not in new_
+00016b80: 7461 6773 5f63 7572 7265 6e74 290a 2020  tags_current).  
+00016b90: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00016ba0: 7454 7275 6528 2254 6573 7422 206e 6f74  tTrue("Test" not
+00016bb0: 2069 6e20 6e65 775f 7461 6773 5f69 6e69   in new_tags_ini
+00016bc0: 7469 616c 290a 0a20 2020 2064 6566 2074  tial)..    def t
+00016bd0: 6573 745f 7265 7365 745f 6365 6c6c 2873  est_reset_cell(s
+00016be0: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+00016bf0: 2254 6573 7473 2074 6865 206d 6574 686f  "Tests the metho
+00016c00: 6420 7265 7365 7474 696e 6720 7468 6520  d resetting the 
+00016c10: 7365 6c65 6374 6564 2063 656c 6c73 2e22  selected cells."
+00016c20: 2222 0a0a 2020 2020 2020 2020 7072 6f6a  ""..        proj
+00016c30: 6563 745f 385f 7061 7468 203d 2073 656c  ect_8_path = sel
+00016c40: 662e 6765 745f 6e65 775f 7465 7374 5f70  f.get_new_test_p
+00016c50: 726f 6a65 6374 2829 0a20 2020 2020 2020  roject().       
+00016c60: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+00016c70: 772e 7377 6974 6368 5f70 726f 6a65 6374  w.switch_project
+00016c80: 2870 726f 6a65 6374 5f38 5f70 6174 682c  (project_8_path,
+00016c90: 2022 7072 6f6a 6563 745f 3822 290a 0a20   "project_8").. 
+00016ca0: 2020 2020 2020 2023 2073 6361 6e20 6e61         # scan na
+00016cb0: 6d65 0a20 2020 2020 2020 2069 7465 6d20  me.        item 
+00016cc0: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
+00016cd0: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
+00016ce0: 7461 626c 655f 6461 7461 2e69 7465 6d28  table_data.item(
+00016cf0: 302c 2030 290a 2020 2020 2020 2020 7363  0, 0).        sc
+00016d00: 616e 5f6e 616d 6520 3d20 6974 656d 2e74  an_name = item.t
+00016d10: 6578 7428 290a 0a20 2020 2020 2020 2023  ext()..        #
+00016d20: 2054 6573 7420 666f 7220 6120 6c69 7374   Test for a list
+00016d30: 3a0a 2020 2020 2020 2020 2320 5661 6c75  :.        # Valu
+00016d40: 6573 2069 6e20 7468 6520 6462 0a20 2020  es in the db.   
+00016d50: 2020 2020 2076 616c 7565 203d 2066 6c6f       value = flo
+00016d60: 6174 280a 2020 2020 2020 2020 2020 2020  at(.            
+00016d70: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+00016d80: 2e70 726f 6a65 6374 2e73 6573 7369 6f6e  .project.session
+00016d90: 2e67 6574 5f76 616c 7565 280a 2020 2020  .get_value(.    
+00016da0: 2020 2020 2020 2020 2020 2020 434f 4c4c              COLL
+00016db0: 4543 5449 4f4e 5f43 5552 5245 4e54 2c20  ECTION_CURRENT, 
+00016dc0: 7363 616e 5f6e 616d 652c 2022 4261 6e64  scan_name, "Band
+00016dd0: 5769 6474 6822 0a20 2020 2020 2020 2020  Width".         
+00016de0: 2020 2029 5b30 5d0a 2020 2020 2020 2020     )[0].        
+00016df0: 290a 2020 2020 2020 2020 7661 6c75 655f  ).        value_
+00016e00: 696e 6974 6961 6c20 3d20 666c 6f61 7428  initial = float(
+00016e10: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00016e20: 662e 6d61 696e 5f77 696e 646f 772e 7072  f.main_window.pr
+00016e30: 6f6a 6563 742e 7365 7373 696f 6e2e 6765  oject.session.ge
+00016e40: 745f 7661 6c75 6528 0a20 2020 2020 2020  t_value(.       
+00016e50: 2020 2020 2020 2020 2043 4f4c 4c45 4354           COLLECT
+00016e60: 494f 4e5f 494e 4954 4941 4c2c 2073 6361  ION_INITIAL, sca
+00016e70: 6e5f 6e61 6d65 2c20 2242 616e 6457 6964  n_name, "BandWid
+00016e80: 7468 220a 2020 2020 2020 2020 2020 2020  th".            
+00016e90: 295b 305d 0a20 2020 2020 2020 2029 0a0a  )[0].        )..
+00016ea0: 2020 2020 2020 2020 2320 5661 6c75 6520          # Value 
+00016eb0: 696e 2074 6865 2044 6174 6142 726f 7773  in the DataBrows
+00016ec0: 6572 0a20 2020 2020 2020 2062 616e 6477  er.        bandw
+00016ed0: 6964 7468 5f63 6f6c 756d 6e20 3d20 280a  idth_column = (.
+00016ee0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00016ef0: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
+00016f00: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
+00016f10: 6461 7461 2e67 6574 5f74 6167 5f63 6f6c  data.get_tag_col
+00016f20: 756d 6e0a 2020 2020 2020 2020 2928 2242  umn.        )("B
+00016f30: 616e 6457 6964 7468 2229 0a20 2020 2020  andWidth").     
+00016f40: 2020 2069 7465 6d20 3d20 7365 6c66 2e6d     item = self.m
+00016f50: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
+00016f60: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
+00016f70: 7461 2e69 7465 6d28 0a20 2020 2020 2020  ta.item(.       
+00016f80: 2020 2020 2030 2c20 6261 6e64 7769 6474       0, bandwidt
+00016f90: 685f 636f 6c75 6d6e 0a20 2020 2020 2020  h_column.       
+00016fa0: 2029 0a20 2020 2020 2020 2064 6174 6162   ).        datab
+00016fb0: 726f 7773 6572 203d 2066 6c6f 6174 2869  rowser = float(i
+00016fc0: 7465 6d2e 7465 7874 2829 5b31 3a2d 315d  tem.text()[1:-1]
+00016fd0: 290a 0a20 2020 2020 2020 2023 2043 6865  )..        # Che
+00016fe0: 636b 2065 7175 616c 6974 7920 6265 7477  ck equality betw
+00016ff0: 6565 6e20 4461 7461 4272 6f77 7365 7220  een DataBrowser 
+00017000: 616e 6420 6462 0a20 2020 2020 2020 2073  and db.        s
+00017010: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00017020: 7661 6c75 652c 2066 6c6f 6174 2835 3030  value, float(500
+00017030: 3030 2929 0a20 2020 2020 2020 2073 656c  00)).        sel
+00017040: 662e 6173 7365 7274 4571 7561 6c28 7661  f.assertEqual(va
+00017050: 6c75 652c 2064 6174 6162 726f 7773 6572  lue, databrowser
+00017060: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00017070: 7373 6572 7445 7175 616c 2876 616c 7565  ssertEqual(value
+00017080: 2c20 7661 6c75 655f 696e 6974 6961 6c29  , value_initial)
+00017090: 0a0a 2020 2020 2020 2020 2320 4368 616e  ..        # Chan
+000170a0: 6765 2074 6865 2076 616c 7565 0a20 2020  ge the value.   
+000170b0: 2020 2020 2069 7465 6d2e 7365 7453 656c       item.setSel
+000170c0: 6563 7465 6428 5472 7565 290a 2020 2020  ected(True).    
+000170d0: 2020 2020 7468 7265 6164 696e 672e 5469      threading.Ti
+000170e0: 6d65 7228 0a20 2020 2020 2020 2020 2020  mer(.           
+000170f0: 2032 2c20 7061 7274 6961 6c28 7365 6c66   2, partial(self
+00017100: 2e65 6469 745f 6461 7461 6272 6f77 7365  .edit_databrowse
+00017110: 725f 6c69 7374 2c20 2232 3530 3030 2229  r_list, "25000")
+00017120: 0a20 2020 2020 2020 2029 2e73 7461 7274  .        ).start
+00017130: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
+00017140: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
+00017150: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
+00017160: 6174 612e 6564 6974 5f74 6162 6c65 5f64  ata.edit_table_d
+00017170: 6174 615f 7661 6c75 6573 2829 0a0a 2020  ata_values()..  
+00017180: 2020 2020 2020 2320 4368 6563 6b20 6167        # Check ag
+00017190: 6169 6e20 7468 6520 6571 7561 6c69 7479  ain the equality
+000171a0: 2062 6574 7765 656e 2044 6174 6142 726f   between DataBro
+000171b0: 7773 6572 2061 6e64 2064 620a 2020 2020  wser and db.    
+000171c0: 2020 2020 7661 6c75 6520 3d20 666c 6f61      value = floa
+000171d0: 7428 0a20 2020 2020 2020 2020 2020 2073  t(.            s
+000171e0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+000171f0: 7072 6f6a 6563 742e 7365 7373 696f 6e2e  project.session.
+00017200: 6765 745f 7661 6c75 6528 0a20 2020 2020  get_value(.     
+00017210: 2020 2020 2020 2020 2020 2043 4f4c 4c45             COLLE
+00017220: 4354 494f 4e5f 4355 5252 454e 542c 2073  CTION_CURRENT, s
+00017230: 6361 6e5f 6e61 6d65 2c20 2242 616e 6457  can_name, "BandW
+00017240: 6964 7468 220a 2020 2020 2020 2020 2020  idth".          
+00017250: 2020 295b 305d 0a20 2020 2020 2020 2029    )[0].        )
+00017260: 0a20 2020 2020 2020 2076 616c 7565 5f69  .        value_i
+00017270: 6e69 7469 616c 203d 2066 6c6f 6174 280a  nitial = float(.
+00017280: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00017290: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 726f  .main_window.pro
+000172a0: 6a65 6374 2e73 6573 7369 6f6e 2e67 6574  ject.session.get
+000172b0: 5f76 616c 7565 280a 2020 2020 2020 2020  _value(.        
+000172c0: 2020 2020 2020 2020 434f 4c4c 4543 5449          COLLECTI
+000172d0: 4f4e 5f49 4e49 5449 414c 2c20 7363 616e  ON_INITIAL, scan
+000172e0: 5f6e 616d 652c 2022 4261 6e64 5769 6474  _name, "BandWidt
+000172f0: 6822 0a20 2020 2020 2020 2020 2020 2029  h".            )
+00017300: 5b30 5d0a 2020 2020 2020 2020 290a 2020  [0].        ).  
+00017310: 2020 2020 2020 6974 656d 203d 2073 656c        item = sel
+00017320: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
+00017330: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
+00017340: 5f64 6174 612e 6974 656d 280a 2020 2020  _data.item(.    
+00017350: 2020 2020 2020 2020 302c 2062 616e 6477          0, bandw
+00017360: 6964 7468 5f63 6f6c 756d 6e0a 2020 2020  idth_column.    
+00017370: 2020 2020 290a 2020 2020 2020 2020 6461      ).        da
+00017380: 7461 6272 6f77 7365 7220 3d20 666c 6f61  tabrowser = floa
+00017390: 7428 6974 656d 2e74 6578 7428 295b 313a  t(item.text()[1:
+000173a0: 2d31 5d29 0a20 2020 2020 2020 2073 656c  -1]).        sel
+000173b0: 662e 6173 7365 7274 4571 7561 6c28 7661  f.assertEqual(va
+000173c0: 6c75 652c 2066 6c6f 6174 2832 3530 3030  lue, float(25000
+000173d0: 2929 0a20 2020 2020 2020 2073 656c 662e  )).        self.
+000173e0: 6173 7365 7274 4571 7561 6c28 7661 6c75  assertEqual(valu
+000173f0: 652c 2064 6174 6162 726f 7773 6572 290a  e, databrowser).
+00017400: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00017410: 6572 7445 7175 616c 2876 616c 7565 5f69  ertEqual(value_i
+00017420: 6e69 7469 616c 2c20 666c 6f61 7428 3530  nitial, float(50
+00017430: 3030 3029 290a 0a20 2020 2020 2020 2023  000))..        #
+00017440: 2052 6573 6574 2074 6865 2063 7572 7265   Reset the curre
+00017450: 6e74 2076 616c 7565 2074 6f20 7468 6520  nt value to the 
+00017460: 696e 6974 6961 6c20 7661 6c75 650a 2020  initial value.  
+00017470: 2020 2020 2020 6974 656d 203d 2073 656c        item = sel
+00017480: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
+00017490: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
+000174a0: 5f64 6174 612e 6974 656d 280a 2020 2020  _data.item(.    
+000174b0: 2020 2020 2020 2020 302c 2062 616e 6477          0, bandw
+000174c0: 6964 7468 5f63 6f6c 756d 6e0a 2020 2020  idth_column.    
+000174d0: 2020 2020 290a 2020 2020 2020 2020 6974      ).        it
+000174e0: 656d 2e73 6574 5365 6c65 6374 6564 2854  em.setSelected(T
+000174f0: 7275 6529 0a20 2020 2020 2020 2073 656c  rue).        sel
+00017500: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
+00017510: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
+00017520: 5f64 6174 612e 6974 656d 4368 616e 6765  _data.itemChange
+00017530: 642e 6469 7363 6f6e 6e65 6374 2829 0a20  d.disconnect(). 
+00017540: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
+00017550: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
+00017560: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
+00017570: 7265 7365 745f 6365 6c6c 2829 0a20 2020  reset_cell().   
+00017580: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
+00017590: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
+000175a0: 6572 2e74 6162 6c65 5f64 6174 612e 6974  er.table_data.it
+000175b0: 656d 4368 616e 6765 642e 636f 6e6e 6563  emChanged.connec
+000175c0: 7428 0a20 2020 2020 2020 2020 2020 2073  t(.            s
+000175d0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+000175e0: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
+000175f0: 6c65 5f64 6174 612e 6368 616e 6765 5f63  le_data.change_c
+00017600: 656c 6c5f 636f 6c6f 720a 2020 2020 2020  ell_color.      
+00017610: 2020 290a 2020 2020 2020 2020 6974 656d    ).        item
+00017620: 2e73 6574 5365 6c65 6374 6564 2846 616c  .setSelected(Fal
+00017630: 7365 290a 0a20 2020 2020 2020 2023 2043  se)..        # C
+00017640: 6865 636b 2077 6865 7468 6572 2074 6865  heck whether the
+00017650: 2064 6174 6120 6861 7320 6265 656e 2072   data has been r
+00017660: 6573 6574 0a20 2020 2020 2020 2076 616c  eset.        val
+00017670: 7565 203d 2066 6c6f 6174 280a 2020 2020  ue = float(.    
+00017680: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
+00017690: 6e5f 7769 6e64 6f77 2e70 726f 6a65 6374  n_window.project
+000176a0: 2e73 6573 7369 6f6e 2e67 6574 5f76 616c  .session.get_val
+000176b0: 7565 280a 2020 2020 2020 2020 2020 2020  ue(.            
+000176c0: 2020 2020 434f 4c4c 4543 5449 4f4e 5f43      COLLECTION_C
+000176d0: 5552 5245 4e54 2c20 7363 616e 5f6e 616d  URRENT, scan_nam
+000176e0: 652c 2022 4261 6e64 5769 6474 6822 0a20  e, "BandWidth". 
+000176f0: 2020 2020 2020 2020 2020 2029 5b30 5d0a             )[0].
+00017700: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00017710: 2020 7661 6c75 655f 696e 6974 6961 6c20    value_initial 
+00017720: 3d20 666c 6f61 7428 0a20 2020 2020 2020  = float(.       
+00017730: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
+00017740: 696e 646f 772e 7072 6f6a 6563 742e 7365  indow.project.se
+00017750: 7373 696f 6e2e 6765 745f 7661 6c75 6528  ssion.get_value(
+00017760: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00017770: 2043 4f4c 4c45 4354 494f 4e5f 494e 4954   COLLECTION_INIT
+00017780: 4941 4c2c 2073 6361 6e5f 6e61 6d65 2c20  IAL, scan_name, 
+00017790: 2242 616e 6457 6964 7468 220a 2020 2020  "BandWidth".    
+000177a0: 2020 2020 2020 2020 295b 305d 0a20 2020          )[0].   
+000177b0: 2020 2020 2029 0a20 2020 2020 2020 2069       ).        i
+000177c0: 7465 6d20 3d20 7365 6c66 2e6d 6169 6e5f  tem = self.main_
+000177d0: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
+000177e0: 7365 722e 7461 626c 655f 6461 7461 2e69  ser.table_data.i
+000177f0: 7465 6d28 0a20 2020 2020 2020 2020 2020  tem(.           
+00017800: 2030 2c20 6261 6e64 7769 6474 685f 636f   0, bandwidth_co
+00017810: 6c75 6d6e 0a20 2020 2020 2020 2029 0a20  lumn.        ). 
+00017820: 2020 2020 2020 2064 6174 6162 726f 7773         databrows
+00017830: 6572 203d 2066 6c6f 6174 2869 7465 6d2e  er = float(item.
+00017840: 7465 7874 2829 5b31 3a2d 315d 290a 2020  text()[1:-1]).  
+00017850: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00017860: 7445 7175 616c 2876 616c 7565 2c20 666c  tEqual(value, fl
+00017870: 6f61 7428 3530 3030 3029 290a 2020 2020  oat(50000)).    
+00017880: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00017890: 7175 616c 2876 616c 7565 2c20 6461 7461  qual(value, data
+000178a0: 6272 6f77 7365 7229 0a20 2020 2020 2020  browser).       
+000178b0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+000178c0: 6c28 7661 6c75 652c 2076 616c 7565 5f69  l(value, value_i
+000178d0: 6e69 7469 616c 290a 0a20 2020 2020 2020  nitial)..       
+000178e0: 2023 2054 6573 7420 666f 7220 6120 7374   # Test for a st
+000178f0: 7269 6e67 3a0a 2020 2020 2020 2020 2320  ring:.        # 
+00017900: 5661 6c75 6573 2069 6e20 7468 6520 6462  Values in the db
+00017910: 0a20 2020 2020 2020 2076 616c 7565 203d  .        value =
+00017920: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+00017930: 772e 7072 6f6a 6563 742e 7365 7373 696f  w.project.sessio
+00017940: 6e2e 6765 745f 7661 6c75 6528 0a20 2020  n.get_value(.   
+00017950: 2020 2020 2020 2020 2043 4f4c 4c45 4354           COLLECT
+00017960: 494f 4e5f 4355 5252 454e 542c 2073 6361  ION_CURRENT, sca
+00017970: 6e5f 6e61 6d65 2c20 2254 7970 6522 0a20  n_name, "Type". 
+00017980: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00017990: 2076 616c 7565 5f69 6e69 7469 616c 203d   value_initial =
+000179a0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+000179b0: 772e 7072 6f6a 6563 742e 7365 7373 696f  w.project.sessio
+000179c0: 6e2e 6765 745f 7661 6c75 6528 0a20 2020  n.get_value(.   
+000179d0: 2020 2020 2020 2020 2043 4f4c 4c45 4354           COLLECT
+000179e0: 494f 4e5f 494e 4954 4941 4c2c 2073 6361  ION_INITIAL, sca
+000179f0: 6e5f 6e61 6d65 2c20 2254 7970 6522 0a20  n_name, "Type". 
+00017a00: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+00017a10: 2020 2320 5661 6c75 6520 696e 2074 6865    # Value in the
+00017a20: 2044 6174 6142 726f 7773 6572 0a20 2020   DataBrowser.   
+00017a30: 2020 2020 2074 7970 655f 636f 6c75 6d6e       type_column
+00017a40: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
+00017a50: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+00017a60: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
+00017a70: 6162 6c65 5f64 6174 612e 6765 745f 7461  able_data.get_ta
+00017a80: 675f 636f 6c75 6d6e 0a20 2020 2020 2020  g_column.       
+00017a90: 2029 2822 5479 7065 2229 0a20 2020 2020   )("Type").     
+00017aa0: 2020 2069 7465 6d20 3d20 7365 6c66 2e6d     item = self.m
+00017ab0: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
+00017ac0: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
+00017ad0: 7461 2e69 7465 6d28 302c 2074 7970 655f  ta.item(0, type_
+00017ae0: 636f 6c75 6d6e 290a 2020 2020 2020 2020  column).        
+00017af0: 6461 7461 6272 6f77 7365 7220 3d20 6974  databrowser = it
+00017b00: 656d 2e74 6578 7428 290a 0a20 2020 2020  em.text()..     
+00017b10: 2020 2023 2043 6865 636b 2065 7175 616c     # Check equal
+00017b20: 6974 7920 6265 7477 6565 6e20 4461 7461  ity between Data
+00017b30: 4272 6f77 7365 7220 616e 6420 6462 0a20  Browser and db. 
+00017b40: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00017b50: 7274 4571 7561 6c28 7661 6c75 652c 2022  rtEqual(value, "
+00017b60: 5363 616e 2229 0a20 2020 2020 2020 2073  Scan").        s
+00017b70: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00017b80: 7661 6c75 652c 2064 6174 6162 726f 7773  value, databrows
+00017b90: 6572 290a 2020 2020 2020 2020 7365 6c66  er).        self
+00017ba0: 2e61 7373 6572 7445 7175 616c 2876 616c  .assertEqual(val
+00017bb0: 7565 2c20 7661 6c75 655f 696e 6974 6961  ue, value_initia
+00017bc0: 6c29 0a0a 2020 2020 2020 2020 2320 4368  l)..        # Ch
+00017bd0: 616e 6765 2074 6865 2076 616c 7565 0a20  ange the value. 
+00017be0: 2020 2020 2020 2069 7465 6d2e 7365 7453         item.setS
+00017bf0: 656c 6563 7465 6428 5472 7565 290a 2020  elected(True).  
+00017c00: 2020 2020 2020 6974 656d 2e73 6574 5465        item.setTe
+00017c10: 7874 2822 5465 7374 2229 0a20 2020 2020  xt("Test").     
+00017c20: 2020 2069 7465 6d2e 7365 7453 656c 6563     item.setSelec
+00017c30: 7465 6428 4661 6c73 6529 0a0a 2020 2020  ted(False)..    
+00017c40: 2020 2020 2320 4368 6563 6b20 6167 6169      # Check agai
+00017c50: 6e20 7468 6520 6571 7561 6c69 7479 2062  n the equality b
+00017c60: 6574 7765 656e 2044 6174 6142 726f 7773  etween DataBrows
+00017c70: 6572 2061 6e64 2064 620a 2020 2020 2020  er and db.      
+00017c80: 2020 7661 6c75 6520 3d20 7365 6c66 2e6d    value = self.m
+00017c90: 6169 6e5f 7769 6e64 6f77 2e70 726f 6a65  ain_window.proje
+00017ca0: 6374 2e73 6573 7369 6f6e 2e67 6574 5f76  ct.session.get_v
+00017cb0: 616c 7565 280a 2020 2020 2020 2020 2020  alue(.          
+00017cc0: 2020 434f 4c4c 4543 5449 4f4e 5f43 5552    COLLECTION_CUR
+00017cd0: 5245 4e54 2c20 7363 616e 5f6e 616d 652c  RENT, scan_name,
+00017ce0: 2022 5479 7065 220a 2020 2020 2020 2020   "Type".        
+00017cf0: 290a 2020 2020 2020 2020 7661 6c75 655f  ).        value_
+00017d00: 696e 6974 6961 6c20 3d20 7365 6c66 2e6d  initial = self.m
+00017d10: 6169 6e5f 7769 6e64 6f77 2e70 726f 6a65  ain_window.proje
+00017d20: 6374 2e73 6573 7369 6f6e 2e67 6574 5f76  ct.session.get_v
+00017d30: 616c 7565 280a 2020 2020 2020 2020 2020  alue(.          
+00017d40: 2020 434f 4c4c 4543 5449 4f4e 5f49 4e49    COLLECTION_INI
+00017d50: 5449 414c 2c20 7363 616e 5f6e 616d 652c  TIAL, scan_name,
+00017d60: 2022 5479 7065 220a 2020 2020 2020 2020   "Type".        
+00017d70: 290a 2020 2020 2020 2020 6974 656d 203d  ).        item =
+00017d80: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+00017d90: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
+00017da0: 6162 6c65 5f64 6174 612e 6974 656d 2830  able_data.item(0
+00017db0: 2c20 7479 7065 5f63 6f6c 756d 6e29 0a0a  , type_column)..
+00017dc0: 2020 2020 2020 2020 6461 7461 6272 6f77          databrow
+00017dd0: 7365 7220 3d20 6974 656d 2e74 6578 7428  ser = item.text(
+00017de0: 290a 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00017df0: 6173 7365 7274 4571 7561 6c28 7661 6c75  assertEqual(valu
+00017e00: 652c 2022 5465 7374 2229 0a20 2020 2020  e, "Test").     
+00017e10: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00017e20: 7561 6c28 7661 6c75 652c 2064 6174 6162  ual(value, datab
+00017e30: 726f 7773 6572 290a 2020 2020 2020 2020  rowser).        
+00017e40: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00017e50: 2876 616c 7565 5f69 6e69 7469 616c 2c20  (value_initial, 
+00017e60: 2253 6361 6e22 290a 0a20 2020 2020 2020  "Scan")..       
+00017e70: 2023 2052 6573 6574 2074 6865 2063 7572   # Reset the cur
+00017e80: 7265 6e74 2076 616c 7565 2074 6f20 7468  rent value to th
+00017e90: 6520 696e 6974 6961 6c20 7661 6c75 650a  e initial value.
+00017ea0: 2020 2020 2020 2020 6974 656d 203d 2073          item = s
+00017eb0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00017ec0: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
+00017ed0: 6c65 5f64 6174 612e 6974 656d 2830 2c20  le_data.item(0, 
+00017ee0: 7479 7065 5f63 6f6c 756d 6e29 0a20 2020  type_column).   
+00017ef0: 2020 2020 2069 7465 6d2e 7365 7453 656c       item.setSel
+00017f00: 6563 7465 6428 5472 7565 290a 2020 2020  ected(True).    
+00017f10: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
+00017f20: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
+00017f30: 722e 7461 626c 655f 6461 7461 2e69 7465  r.table_data.ite
+00017f40: 6d43 6861 6e67 6564 2e64 6973 636f 6e6e  mChanged.disconn
+00017f50: 6563 7428 290a 2020 2020 2020 2020 7365  ect().        se
+00017f60: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
+00017f70: 6174 615f 6272 6f77 7365 722e 7461 626c  ata_browser.tabl
+00017f80: 655f 6461 7461 2e72 6573 6574 5f63 656c  e_data.reset_cel
+00017f90: 6c28 290a 2020 2020 2020 2020 7365 6c66  l().        self
+00017fa0: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
+00017fb0: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
+00017fc0: 6461 7461 2e69 7465 6d43 6861 6e67 6564  data.itemChanged
+00017fd0: 2e63 6f6e 6e65 6374 280a 2020 2020 2020  .connect(.      
+00017fe0: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
+00017ff0: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
+00018000: 7365 722e 7461 626c 655f 6461 7461 2e63  ser.table_data.c
+00018010: 6861 6e67 655f 6365 6c6c 5f63 6f6c 6f72  hange_cell_color
+00018020: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00018030: 2020 2069 7465 6d2e 7365 7453 656c 6563     item.setSelec
+00018040: 7465 6428 4661 6c73 6529 0a0a 2020 2020  ted(False)..    
+00018050: 2020 2020 2320 4368 6563 6b20 7768 6574      # Check whet
+00018060: 6865 7220 7468 6520 6461 7461 2068 6173  her the data has
+00018070: 2062 6565 6e20 7265 7365 740a 2020 2020   been reset.    
+00018080: 2020 2020 7661 6c75 6520 3d20 7365 6c66      value = self
+00018090: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 726f  .main_window.pro
+000180a0: 6a65 6374 2e73 6573 7369 6f6e 2e67 6574  ject.session.get
+000180b0: 5f76 616c 7565 280a 2020 2020 2020 2020  _value(.        
+000180c0: 2020 2020 434f 4c4c 4543 5449 4f4e 5f43      COLLECTION_C
+000180d0: 5552 5245 4e54 2c20 7363 616e 5f6e 616d  URRENT, scan_nam
+000180e0: 652c 2022 5479 7065 220a 2020 2020 2020  e, "Type".      
+000180f0: 2020 290a 2020 2020 2020 2020 7661 6c75    ).        valu
+00018100: 655f 696e 6974 6961 6c20 3d20 7365 6c66  e_initial = self
+00018110: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 726f  .main_window.pro
+00018120: 6a65 6374 2e73 6573 7369 6f6e 2e67 6574  ject.session.get
+00018130: 5f76 616c 7565 280a 2020 2020 2020 2020  _value(.        
+00018140: 2020 2020 434f 4c4c 4543 5449 4f4e 5f49      COLLECTION_I
+00018150: 4e49 5449 414c 2c20 7363 616e 5f6e 616d  NITIAL, scan_nam
+00018160: 652c 2022 5479 7065 220a 2020 2020 2020  e, "Type".      
+00018170: 2020 290a 2020 2020 2020 2020 6974 656d    ).        item
+00018180: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
+00018190: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
+000181a0: 2e74 6162 6c65 5f64 6174 612e 6974 656d  .table_data.item
+000181b0: 2830 2c20 7479 7065 5f63 6f6c 756d 6e29  (0, type_column)
+000181c0: 0a20 2020 2020 2020 2064 6174 6162 726f  .        databro
+000181d0: 7773 6572 203d 2069 7465 6d2e 7465 7874  wser = item.text
+000181e0: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
+000181f0: 6173 7365 7274 4571 7561 6c28 7661 6c75  assertEqual(valu
+00018200: 652c 2022 5363 616e 2229 0a20 2020 2020  e, "Scan").     
+00018210: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00018220: 7561 6c28 7661 6c75 652c 2064 6174 6162  ual(value, datab
+00018230: 726f 7773 6572 290a 2020 2020 2020 2020  rowser).        
+00018240: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00018250: 2876 616c 7565 2c20 7661 6c75 655f 696e  (value, value_in
+00018260: 6974 6961 6c29 0a0a 2020 2020 6465 6620  itial)..    def 
+00018270: 7465 7374 5f72 6573 6574 5f63 6f6c 756d  test_reset_colum
+00018280: 6e28 7365 6c66 293a 0a20 2020 2020 2020  n(self):.       
+00018290: 2022 2222 5465 7374 7320 7468 6520 6d65   """Tests the me
+000182a0: 7468 6f64 2072 6573 6574 7469 6e67 2074  thod resetting t
+000182b0: 6865 2063 6f6c 756d 6e73 2073 656c 6563  he columns selec
+000182c0: 7465 642e 2222 220a 0a20 2020 2020 2020  ted."""..       
+000182d0: 2070 726f 6a65 6374 5f38 5f70 6174 6820   project_8_path 
+000182e0: 3d20 7365 6c66 2e67 6574 5f6e 6577 5f74  = self.get_new_t
+000182f0: 6573 745f 7072 6f6a 6563 7428 290a 2020  est_project().  
+00018300: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
+00018310: 7769 6e64 6f77 2e73 7769 7463 685f 7072  window.switch_pr
+00018320: 6f6a 6563 7428 7072 6f6a 6563 745f 385f  oject(project_8_
+00018330: 7061 7468 2c20 2270 726f 6a65 6374 5f38  path, "project_8
+00018340: 2229 0a0a 2020 2020 2020 2020 2320 5365  ")..        # Se
+00018350: 636f 6e64 2064 6f63 756d 656e 743b 2073  cond document; s
+00018360: 6361 6e20 6e61 6d65 0a20 2020 2020 2020  can name.       
+00018370: 2069 7465 6d20 3d20 7365 6c66 2e6d 6169   item = self.mai
+00018380: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
+00018390: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
+000183a0: 2e69 7465 6d28 312c 2030 290a 2020 2020  .item(1, 0).    
+000183b0: 2020 2020 7363 616e 5f6e 616d 6532 203d      scan_name2 =
+000183c0: 2069 7465 6d2e 7465 7874 2829 0a0a 2020   item.text()..  
+000183d0: 2020 2020 2020 2320 5365 636f 6e64 2064        # Second d
+000183e0: 6f63 756d 656e 743b 2076 616c 7565 7320  ocument; values 
+000183f0: 696e 2074 6865 2064 620a 2020 2020 2020  in the db.      
+00018400: 2020 7661 6c75 6520 3d20 666c 6f61 7428    value = float(
+00018410: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00018420: 662e 6d61 696e 5f77 696e 646f 772e 7072  f.main_window.pr
+00018430: 6f6a 6563 742e 7365 7373 696f 6e2e 6765  oject.session.ge
+00018440: 745f 7661 6c75 6528 0a20 2020 2020 2020  t_value(.       
+00018450: 2020 2020 2020 2020 2043 4f4c 4c45 4354           COLLECT
+00018460: 494f 4e5f 4355 5252 454e 542c 2073 6361  ION_CURRENT, sca
+00018470: 6e5f 6e61 6d65 322c 2022 4261 6e64 5769  n_name2, "BandWi
+00018480: 6474 6822 0a20 2020 2020 2020 2020 2020  dth".           
+00018490: 2029 5b30 5d0a 2020 2020 2020 2020 290a   )[0].        ).
+000184a0: 2020 2020 2020 2020 7661 6c75 655f 696e          value_in
+000184b0: 6974 6961 6c20 3d20 666c 6f61 7428 0a20  itial = float(. 
+000184c0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+000184d0: 6d61 696e 5f77 696e 646f 772e 7072 6f6a  main_window.proj
+000184e0: 6563 742e 7365 7373 696f 6e2e 6765 745f  ect.session.get_
+000184f0: 7661 6c75 6528 0a20 2020 2020 2020 2020  value(.         
+00018500: 2020 2020 2020 2043 4f4c 4c45 4354 494f         COLLECTIO
+00018510: 4e5f 494e 4954 4941 4c2c 2073 6361 6e5f  N_INITIAL, scan_
+00018520: 6e61 6d65 322c 2022 4261 6e64 5769 6474  name2, "BandWidt
+00018530: 6822 0a20 2020 2020 2020 2020 2020 2029  h".            )
+00018540: 5b30 5d0a 2020 2020 2020 2020 290a 0a20  [0].        ).. 
+00018550: 2020 2020 2020 2023 2053 6563 6f6e 6420         # Second 
+00018560: 646f 6375 6d65 6e74 3b20 7661 6c75 6520  document; value 
+00018570: 696e 2074 6865 2044 6174 6142 726f 7773  in the DataBrows
+00018580: 6572 0a20 2020 2020 2020 2062 616e 6477  er.        bandw
+00018590: 6964 7468 5f63 6f6c 756d 6e20 3d20 280a  idth_column = (.
+000185a0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000185b0: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
+000185c0: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
+000185d0: 6461 7461 2e67 6574 5f74 6167 5f63 6f6c  data.get_tag_col
+000185e0: 756d 6e0a 2020 2020 2020 2020 2928 2242  umn.        )("B
+000185f0: 616e 6457 6964 7468 2229 0a20 2020 2020  andWidth").     
+00018600: 2020 2069 7465 6d32 203d 2073 656c 662e     item2 = self.
+00018610: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
+00018620: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
+00018630: 6174 612e 6974 656d 280a 2020 2020 2020  ata.item(.      
+00018640: 2020 2020 2020 312c 2062 616e 6477 6964        1, bandwid
+00018650: 7468 5f63 6f6c 756d 6e0a 2020 2020 2020  th_column.      
+00018660: 2020 290a 2020 2020 2020 2020 6461 7461    ).        data
+00018670: 6272 6f77 7365 7220 3d20 666c 6f61 7428  browser = float(
+00018680: 6974 656d 322e 7465 7874 2829 5b31 3a2d  item2.text()[1:-
+00018690: 315d 290a 0a20 2020 2020 2020 2023 2043  1])..        # C
+000186a0: 6865 636b 2065 7175 616c 6974 7920 6265  heck equality be
+000186b0: 7477 6565 6e20 4461 7461 4272 6f77 7365  tween DataBrowse
+000186c0: 7220 616e 6420 6462 2066 6f72 2073 6563  r and db for sec
+000186d0: 6f6e 6420 646f 6375 6d65 6e74 0a20 2020  ond document.   
+000186e0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+000186f0: 4571 7561 6c28 7661 6c75 652c 2066 6c6f  Equal(value, flo
+00018700: 6174 2835 3030 3030 2929 0a20 2020 2020  at(50000)).     
+00018710: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00018720: 7561 6c28 7661 6c75 652c 2064 6174 6162  ual(value, datab
+00018730: 726f 7773 6572 290a 2020 2020 2020 2020  rowser).        
+00018740: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00018750: 2876 616c 7565 2c20 7661 6c75 655f 696e  (value, value_in
+00018760: 6974 6961 6c29 0a20 2020 2020 2020 2069  itial).        i
+00018770: 7465 6d32 2e73 6574 5365 6c65 6374 6564  tem2.setSelected
+00018780: 2854 7275 6529 0a0a 2020 2020 2020 2020  (True)..        
+00018790: 2320 5468 6972 6420 646f 6375 6d65 6e74  # Third document
+000187a0: 3b20 7363 616e 206e 616d 650a 2020 2020  ; scan name.    
+000187b0: 2020 2020 6974 656d 203d 2073 656c 662e      item = self.
+000187c0: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
+000187d0: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
+000187e0: 6174 612e 6974 656d 2832 2c20 3029 0a20  ata.item(2, 0). 
+000187f0: 2020 2020 2020 2073 6361 6e5f 6e61 6d65         scan_name
+00018800: 3320 3d20 6974 656d 2e74 6578 7428 290a  3 = item.text().
+00018810: 0a20 2020 2020 2020 2023 2054 6869 7264  .        # Third
+00018820: 2064 6f63 756d 656e 743b 2076 616c 7565   document; value
+00018830: 7320 696e 2074 6865 2064 620a 2020 2020  s in the db.    
+00018840: 2020 2020 7661 6c75 6520 3d20 666c 6f61      value = floa
+00018850: 7428 0a20 2020 2020 2020 2020 2020 2073  t(.            s
+00018860: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00018870: 7072 6f6a 6563 742e 7365 7373 696f 6e2e  project.session.
+00018880: 6765 745f 7661 6c75 6528 0a20 2020 2020  get_value(.     
+00018890: 2020 2020 2020 2020 2020 2043 4f4c 4c45             COLLE
+000188a0: 4354 494f 4e5f 4355 5252 454e 542c 2073  CTION_CURRENT, s
+000188b0: 6361 6e5f 6e61 6d65 332c 2022 4261 6e64  can_name3, "Band
+000188c0: 5769 6474 6822 0a20 2020 2020 2020 2020  Width".         
+000188d0: 2020 2029 5b30 5d0a 2020 2020 2020 2020     )[0].        
+000188e0: 290a 2020 2020 2020 2020 7661 6c75 655f  ).        value_
+000188f0: 696e 6974 6961 6c20 3d20 666c 6f61 7428  initial = float(
+00018900: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00018910: 662e 6d61 696e 5f77 696e 646f 772e 7072  f.main_window.pr
+00018920: 6f6a 6563 742e 7365 7373 696f 6e2e 6765  oject.session.ge
+00018930: 745f 7661 6c75 6528 0a20 2020 2020 2020  t_value(.       
+00018940: 2020 2020 2020 2020 2043 4f4c 4c45 4354           COLLECT
+00018950: 494f 4e5f 494e 4954 4941 4c2c 2073 6361  ION_INITIAL, sca
+00018960: 6e5f 6e61 6d65 332c 2022 4261 6e64 5769  n_name3, "BandWi
+00018970: 6474 6822 0a20 2020 2020 2020 2020 2020  dth".           
+00018980: 2029 5b30 5d0a 2020 2020 2020 2020 290a   )[0].        ).
+00018990: 0a20 2020 2020 2020 2023 2054 6869 7264  .        # Third
+000189a0: 2064 6f63 756d 656e 743b 2076 616c 7565   document; value
+000189b0: 2069 6e20 7468 6520 4461 7461 4272 6f77   in the DataBrow
+000189c0: 7365 720a 2020 2020 2020 2020 6974 656d  ser.        item
+000189d0: 3320 3d20 7365 6c66 2e6d 6169 6e5f 7769  3 = self.main_wi
+000189e0: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
+000189f0: 722e 7461 626c 655f 6461 7461 2e69 7465  r.table_data.ite
+00018a00: 6d28 0a20 2020 2020 2020 2020 2020 2032  m(.            2
+00018a10: 2c20 6261 6e64 7769 6474 685f 636f 6c75  , bandwidth_colu
+00018a20: 6d6e 0a20 2020 2020 2020 2029 0a0a 2020  mn.        )..  
+00018a30: 2020 2020 2020 2320 4368 6563 6b20 6571        # Check eq
+00018a40: 7561 6c69 7479 2062 6574 7765 656e 2044  uality between D
+00018a50: 6174 6142 726f 7773 6572 2061 6e64 2064  ataBrowser and d
+00018a60: 6220 666f 7220 7468 6972 6420 646f 6375  b for third docu
+00018a70: 6d65 6e74 0a20 2020 2020 2020 2064 6174  ment.        dat
+00018a80: 6162 726f 7773 6572 203d 2066 6c6f 6174  abrowser = float
+00018a90: 2869 7465 6d33 2e74 6578 7428 295b 313a  (item3.text()[1:
+00018aa0: 2d31 5d29 0a20 2020 2020 2020 2073 656c  -1]).        sel
+00018ab0: 662e 6173 7365 7274 4571 7561 6c28 7661  f.assertEqual(va
+00018ac0: 6c75 652c 2066 6c6f 6174 2832 3530 3030  lue, float(25000
+00018ad0: 2929 0a20 2020 2020 2020 2073 656c 662e  )).        self.
+00018ae0: 6173 7365 7274 4571 7561 6c28 7661 6c75  assertEqual(valu
+00018af0: 652c 2064 6174 6162 726f 7773 6572 290a  e, databrowser).
+00018b00: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00018b10: 6572 7445 7175 616c 2876 616c 7565 2c20  ertEqual(value, 
+00018b20: 7661 6c75 655f 696e 6974 6961 6c29 0a20  value_initial). 
+00018b30: 2020 2020 2020 2069 7465 6d33 2e73 6574         item3.set
+00018b40: 5365 6c65 6374 6564 2854 7275 6529 0a0a  Selected(True)..
+00018b50: 2020 2020 2020 2020 2320 4368 616e 6765          # Change
+00018b60: 2074 6865 2076 616c 7565 2074 6f20 5b37   the value to [7
+00018b70: 3030 3030 5d20 666f 7220 7468 6520 7468  0000] for the th
+00018b80: 6972 6420 616e 6420 7365 636f 6e64 2064  ird and second d
+00018b90: 6f63 756d 656e 7473 0a20 2020 2020 2020  ocuments.       
+00018ba0: 2074 6872 6561 6469 6e67 2e54 696d 6572   threading.Timer
+00018bb0: 280a 2020 2020 2020 2020 2020 2020 322c  (.            2,
+00018bc0: 2070 6172 7469 616c 2873 656c 662e 6564   partial(self.ed
+00018bd0: 6974 5f64 6174 6162 726f 7773 6572 5f6c  it_databrowser_l
+00018be0: 6973 742c 2022 3730 3030 3022 290a 2020  ist, "70000").  
+00018bf0: 2020 2020 2020 292e 7374 6172 7428 290a        ).start().
+00018c00: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
+00018c10: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
+00018c20: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
+00018c30: 2e65 6469 745f 7461 626c 655f 6461 7461  .edit_table_data
+00018c40: 5f76 616c 7565 7328 290a 0a20 2020 2020  _values()..     
+00018c50: 2020 2023 2053 6563 6f6e 6420 646f 6375     # Second docu
+00018c60: 6d65 6e74 3b20 7661 6c75 6573 2069 6e20  ment; values in 
+00018c70: 7468 6520 6462 0a20 2020 2020 2020 2076  the db.        v
+00018c80: 616c 7565 203d 2066 6c6f 6174 280a 2020  alue = float(.  
+00018c90: 2020 2020 2020 2020 2020 7365 6c66 2e6d            self.m
+00018ca0: 6169 6e5f 7769 6e64 6f77 2e70 726f 6a65  ain_window.proje
+00018cb0: 6374 2e73 6573 7369 6f6e 2e67 6574 5f76  ct.session.get_v
+00018cc0: 616c 7565 280a 2020 2020 2020 2020 2020  alue(.          
+00018cd0: 2020 2020 2020 434f 4c4c 4543 5449 4f4e        COLLECTION
+00018ce0: 5f43 5552 5245 4e54 2c20 7363 616e 5f6e  _CURRENT, scan_n
+00018cf0: 616d 6532 2c20 2242 616e 6457 6964 7468  ame2, "BandWidth
+00018d00: 220a 2020 2020 2020 2020 2020 2020 295b  ".            )[
+00018d10: 305d 0a20 2020 2020 2020 2029 0a20 2020  0].        ).   
+00018d20: 2020 2020 2076 616c 7565 5f69 6e69 7469       value_initi
+00018d30: 616c 203d 2066 6c6f 6174 280a 2020 2020  al = float(.    
+00018d40: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
+00018d50: 6e5f 7769 6e64 6f77 2e70 726f 6a65 6374  n_window.project
+00018d60: 2e73 6573 7369 6f6e 2e67 6574 5f76 616c  .session.get_val
+00018d70: 7565 280a 2020 2020 2020 2020 2020 2020  ue(.            
+00018d80: 2020 2020 434f 4c4c 4543 5449 4f4e 5f49      COLLECTION_I
+00018d90: 4e49 5449 414c 2c20 7363 616e 5f6e 616d  NITIAL, scan_nam
+00018da0: 6532 2c20 2242 616e 6457 6964 7468 220a  e2, "BandWidth".
+00018db0: 2020 2020 2020 2020 2020 2020 295b 305d              )[0]
+00018dc0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00018dd0: 2020 2023 2053 6563 6f6e 6420 646f 6375     # Second docu
+00018de0: 6d65 6e74 3b20 7661 6c75 6520 696e 2074  ment; value in t
+00018df0: 6865 2044 6174 6142 726f 7773 6572 0a20  he DataBrowser. 
+00018e00: 2020 2020 2020 2069 7465 6d32 203d 2073         item2 = s
+00018e10: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00018e20: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
+00018e30: 6c65 5f64 6174 612e 6974 656d 280a 2020  le_data.item(.  
+00018e40: 2020 2020 2020 2020 2020 312c 2062 616e            1, ban
+00018e50: 6477 6964 7468 5f63 6f6c 756d 6e0a 2020  dwidth_column.  
+00018e60: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00018e70: 6461 7461 6272 6f77 7365 7220 3d20 666c  databrowser = fl
+00018e80: 6f61 7428 6974 656d 322e 7465 7874 2829  oat(item2.text()
+00018e90: 5b31 3a2d 315d 290a 0a20 2020 2020 2020  [1:-1])..       
+00018ea0: 2023 2043 6865 636b 2065 7175 616c 6974   # Check equalit
+00018eb0: 7920 6265 7477 6565 6e20 4461 7461 4272  y between DataBr
+00018ec0: 6f77 7365 7220 616e 6420 6462 2066 6f72  owser and db for
+00018ed0: 2073 6563 6f6e 6420 646f 6375 6d65 6e74   second document
+00018ee0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00018ef0: 7365 7274 4571 7561 6c28 7661 6c75 652c  sertEqual(value,
+00018f00: 2066 6c6f 6174 2837 3030 3030 2929 0a20   float(70000)). 
+00018f10: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00018f20: 7274 4571 7561 6c28 7661 6c75 652c 2064  rtEqual(value, d
+00018f30: 6174 6162 726f 7773 6572 290a 2020 2020  atabrowser).    
+00018f40: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00018f50: 7175 616c 2866 6c6f 6174 2835 3030 3030  qual(float(50000
+00018f60: 292c 2076 616c 7565 5f69 6e69 7469 616c  ), value_initial
+00018f70: 290a 2020 2020 2020 2020 6974 656d 322e  ).        item2.
+00018f80: 7365 7453 656c 6563 7465 6428 5472 7565  setSelected(True
+00018f90: 290a 0a20 2020 2020 2020 2023 2054 6869  )..        # Thi
+00018fa0: 7264 2064 6f63 756d 656e 743b 2076 616c  rd document; val
+00018fb0: 7565 7320 696e 2074 6865 2064 620a 2020  ues in the db.  
+00018fc0: 2020 2020 2020 7661 6c75 6520 3d20 666c        value = fl
+00018fd0: 6f61 7428 0a20 2020 2020 2020 2020 2020  oat(.           
+00018fe0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+00018ff0: 772e 7072 6f6a 6563 742e 7365 7373 696f  w.project.sessio
+00019000: 6e2e 6765 745f 7661 6c75 6528 0a20 2020  n.get_value(.   
+00019010: 2020 2020 2020 2020 2020 2020 2043 4f4c               COL
+00019020: 4c45 4354 494f 4e5f 4355 5252 454e 542c  LECTION_CURRENT,
+00019030: 2073 6361 6e5f 6e61 6d65 332c 2022 4261   scan_name3, "Ba
+00019040: 6e64 5769 6474 6822 0a20 2020 2020 2020  ndWidth".       
+00019050: 2020 2020 2029 5b30 5d0a 2020 2020 2020       )[0].      
+00019060: 2020 290a 2020 2020 2020 2020 7661 6c75    ).        valu
+00019070: 655f 696e 6974 6961 6c20 3d20 666c 6f61  e_initial = floa
+00019080: 7428 0a20 2020 2020 2020 2020 2020 2073  t(.            s
+00019090: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+000190a0: 7072 6f6a 6563 742e 7365 7373 696f 6e2e  project.session.
+000190b0: 6765 745f 7661 6c75 6528 0a20 2020 2020  get_value(.     
+000190c0: 2020 2020 2020 2020 2020 2043 4f4c 4c45             COLLE
+000190d0: 4354 494f 4e5f 494e 4954 4941 4c2c 2073  CTION_INITIAL, s
+000190e0: 6361 6e5f 6e61 6d65 332c 2022 4261 6e64  can_name3, "Band
+000190f0: 5769 6474 6822 0a20 2020 2020 2020 2020  Width".         
+00019100: 2020 2029 5b30 5d0a 2020 2020 2020 2020     )[0].        
+00019110: 290a 0a20 2020 2020 2020 2023 2054 6869  )..        # Thi
+00019120: 7264 2064 6f63 756d 656e 743b 2076 616c  rd document; val
+00019130: 7565 2069 6e20 7468 6520 4461 7461 4272  ue in the DataBr
+00019140: 6f77 7365 720a 2020 2020 2020 2020 6974  owser.        it
+00019150: 656d 3320 3d20 7365 6c66 2e6d 6169 6e5f  em3 = self.main_
+00019160: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
+00019170: 7365 722e 7461 626c 655f 6461 7461 2e69  ser.table_data.i
+00019180: 7465 6d28 0a20 2020 2020 2020 2020 2020  tem(.           
+00019190: 2032 2c20 6261 6e64 7769 6474 685f 636f   2, bandwidth_co
+000191a0: 6c75 6d6e 0a20 2020 2020 2020 2029 0a20  lumn.        ). 
+000191b0: 2020 2020 2020 2064 6174 6162 726f 7773         databrows
+000191c0: 6572 203d 2066 6c6f 6174 2869 7465 6d33  er = float(item3
+000191d0: 2e74 6578 7428 295b 313a 2d31 5d29 0a0a  .text()[1:-1])..
+000191e0: 2020 2020 2020 2020 2320 4368 6563 6b20          # Check 
+000191f0: 7661 6c75 6520 696e 2064 6174 6162 6173  value in databas
+00019200: 6520 666f 7220 7468 6520 7468 6972 6420  e for the third 
+00019210: 646f 6375 6d65 6e74 0a20 2020 2020 2020  document.       
+00019220: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00019230: 6c28 7661 6c75 652c 2066 6c6f 6174 2837  l(value, float(7
+00019240: 3030 3030 2929 0a20 2020 2020 2020 2073  0000)).        s
+00019250: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00019260: 7661 6c75 652c 2064 6174 6162 726f 7773  value, databrows
+00019270: 6572 290a 2020 2020 2020 2020 7365 6c66  er).        self
+00019280: 2e61 7373 6572 7445 7175 616c 2876 616c  .assertEqual(val
+00019290: 7565 5f69 6e69 7469 616c 2c20 666c 6f61  ue_initial, floa
+000192a0: 7428 3235 3030 3029 290a 2020 2020 2020  t(25000)).      
+000192b0: 2020 6974 656d 332e 7365 7453 656c 6563    item3.setSelec
+000192c0: 7465 6428 5472 7565 290a 0a20 2020 2020  ted(True)..     
+000192d0: 2020 2023 2052 6573 6574 2074 6865 2063     # Reset the c
+000192e0: 7572 7265 6e74 2076 616c 7565 2074 6f20  urrent value to 
+000192f0: 7468 6520 696e 6974 6961 6c20 7661 6c75  the initial valu
+00019300: 650a 2020 2020 2020 2020 7365 6c66 2e6d  e.        self.m
+00019310: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
+00019320: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
+00019330: 7461 2e69 7465 6d43 6861 6e67 6564 2e64  ta.itemChanged.d
+00019340: 6973 636f 6e6e 6563 7428 290a 2020 2020  isconnect().    
+00019350: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
+00019360: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
+00019370: 722e 7461 626c 655f 6461 7461 2e72 6573  r.table_data.res
+00019380: 6574 5f63 6f6c 756d 6e28 290a 2020 2020  et_column().    
+00019390: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
+000193a0: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
+000193b0: 722e 7461 626c 655f 6461 7461 2e69 7465  r.table_data.ite
+000193c0: 6d43 6861 6e67 6564 2e63 6f6e 6e65 6374  mChanged.connect
+000193d0: 280a 2020 2020 2020 2020 2020 2020 7365  (.            se
+000193e0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
+000193f0: 6174 615f 6272 6f77 7365 722e 7461 626c  ata_browser.tabl
+00019400: 655f 6461 7461 2e63 6861 6e67 655f 6365  e_data.change_ce
+00019410: 6c6c 5f63 6f6c 6f72 0a20 2020 2020 2020  ll_color.       
+00019420: 2029 0a0a 2020 2020 2020 2020 2320 4368   )..        # Ch
+00019430: 6563 6b20 7468 6520 7661 6c75 6520 696e  eck the value in
+00019440: 2074 6865 2064 6220 616e 6420 4461 7461   the db and Data
+00019450: 4272 6f77 7365 7220 666f 7220 7468 6520  Browser for the 
+00019460: 7365 636f 6e64 2064 6f63 756d 656e 740a  second document.
+00019470: 2020 2020 2020 2020 2320 6861 7320 6265          # has be
+00019480: 656e 2072 6573 6574 0a20 2020 2020 2020  en reset.       
+00019490: 2076 616c 7565 203d 2066 6c6f 6174 280a   value = float(.
+000194a0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000194b0: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 726f  .main_window.pro
+000194c0: 6a65 6374 2e73 6573 7369 6f6e 2e67 6574  ject.session.get
+000194d0: 5f76 616c 7565 280a 2020 2020 2020 2020  _value(.        
+000194e0: 2020 2020 2020 2020 434f 4c4c 4543 5449          COLLECTI
+000194f0: 4f4e 5f43 5552 5245 4e54 2c20 7363 616e  ON_CURRENT, scan
+00019500: 5f6e 616d 6532 2c20 2242 616e 6457 6964  _name2, "BandWid
+00019510: 7468 220a 2020 2020 2020 2020 2020 2020  th".            
+00019520: 295b 305d 0a20 2020 2020 2020 2029 0a20  )[0].        ). 
+00019530: 2020 2020 2020 2076 616c 7565 5f69 6e69         value_ini
+00019540: 7469 616c 203d 2066 6c6f 6174 280a 2020  tial = float(.  
+00019550: 2020 2020 2020 2020 2020 7365 6c66 2e6d            self.m
+00019560: 6169 6e5f 7769 6e64 6f77 2e70 726f 6a65  ain_window.proje
+00019570: 6374 2e73 6573 7369 6f6e 2e67 6574 5f76  ct.session.get_v
+00019580: 616c 7565 280a 2020 2020 2020 2020 2020  alue(.          
+00019590: 2020 2020 2020 434f 4c4c 4543 5449 4f4e        COLLECTION
+000195a0: 5f49 4e49 5449 414c 2c20 7363 616e 5f6e  _INITIAL, scan_n
+000195b0: 616d 6532 2c20 2242 616e 6457 6964 7468  ame2, "BandWidth
+000195c0: 220a 2020 2020 2020 2020 2020 2020 295b  ".            )[
+000195d0: 305d 0a20 2020 2020 2020 2029 0a20 2020  0].        ).   
+000195e0: 2020 2020 2069 7465 6d32 203d 2073 656c       item2 = sel
+000195f0: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
+00019600: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
+00019610: 5f64 6174 612e 6974 656d 280a 2020 2020  _data.item(.    
+00019620: 2020 2020 2020 2020 312c 2062 616e 6477          1, bandw
+00019630: 6964 7468 5f63 6f6c 756d 6e0a 2020 2020  idth_column.    
+00019640: 2020 2020 290a 2020 2020 2020 2020 6461      ).        da
+00019650: 7461 6272 6f77 7365 7220 3d20 666c 6f61  tabrowser = floa
+00019660: 7428 6974 656d 322e 7465 7874 2829 5b31  t(item2.text()[1
+00019670: 3a2d 315d 290a 2020 2020 2020 2020 7365  :-1]).        se
+00019680: 6c66 2e61 7373 6572 7445 7175 616c 2876  lf.assertEqual(v
+00019690: 616c 7565 2c20 666c 6f61 7428 3530 3030  alue, float(5000
+000196a0: 3029 290a 2020 2020 2020 2020 7365 6c66  0)).        self
+000196b0: 2e61 7373 6572 7445 7175 616c 2876 616c  .assertEqual(val
+000196c0: 7565 2c20 6461 7461 6272 6f77 7365 7229  ue, databrowser)
+000196d0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+000196e0: 7365 7274 4571 7561 6c28 7661 6c75 652c  sertEqual(value,
+000196f0: 2076 616c 7565 5f69 6e69 7469 616c 290a   value_initial).
+00019700: 0a20 2020 2020 2020 2023 2043 6865 636b  .        # Check
+00019710: 2074 6865 2076 616c 7565 2069 6e20 7468   the value in th
+00019720: 6520 6462 2061 6e64 2044 6174 6142 726f  e db and DataBro
+00019730: 7773 6572 2066 6f72 2074 6865 2074 6869  wser for the thi
+00019740: 7264 2064 6f63 756d 656e 740a 2020 2020  rd document.    
+00019750: 2020 2020 2320 6861 7320 6265 656e 2072      # has been r
+00019760: 6573 6574 0a20 2020 2020 2020 2076 616c  eset.        val
+00019770: 7565 203d 2066 6c6f 6174 280a 2020 2020  ue = float(.    
+00019780: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
+00019790: 6e5f 7769 6e64 6f77 2e70 726f 6a65 6374  n_window.project
+000197a0: 2e73 6573 7369 6f6e 2e67 6574 5f76 616c  .session.get_val
+000197b0: 7565 280a 2020 2020 2020 2020 2020 2020  ue(.            
+000197c0: 2020 2020 434f 4c4c 4543 5449 4f4e 5f43      COLLECTION_C
+000197d0: 5552 5245 4e54 2c20 7363 616e 5f6e 616d  URRENT, scan_nam
+000197e0: 6533 2c20 2242 616e 6457 6964 7468 220a  e3, "BandWidth".
+000197f0: 2020 2020 2020 2020 2020 2020 295b 305d              )[0]
+00019800: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00019810: 2020 2076 616c 7565 5f69 6e69 7469 616c     value_initial
+00019820: 203d 2066 6c6f 6174 280a 2020 2020 2020   = float(.      
+00019830: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
+00019840: 7769 6e64 6f77 2e70 726f 6a65 6374 2e73  window.project.s
+00019850: 6573 7369 6f6e 2e67 6574 5f76 616c 7565  ession.get_value
+00019860: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00019870: 2020 434f 4c4c 4543 5449 4f4e 5f49 4e49    COLLECTION_INI
+00019880: 5449 414c 2c20 7363 616e 5f6e 616d 6533  TIAL, scan_name3
+00019890: 2c20 2242 616e 6457 6964 7468 220a 2020  , "BandWidth".  
+000198a0: 2020 2020 2020 2020 2020 295b 305d 0a20            )[0]. 
+000198b0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+000198c0: 2069 7465 6d33 203d 2073 656c 662e 6d61   item3 = self.ma
+000198d0: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
+000198e0: 726f 7773 6572 2e74 6162 6c65 5f64 6174  rowser.table_dat
+000198f0: 612e 6974 656d 280a 2020 2020 2020 2020  a.item(.        
+00019900: 2020 2020 322c 2062 616e 6477 6964 7468      2, bandwidth
+00019910: 5f63 6f6c 756d 6e0a 2020 2020 2020 2020  _column.        
+00019920: 290a 2020 2020 2020 2020 6461 7461 6272  ).        databr
+00019930: 6f77 7365 7220 3d20 666c 6f61 7428 6974  owser = float(it
+00019940: 656d 332e 7465 7874 2829 5b31 3a2d 315d  em3.text()[1:-1]
+00019950: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00019960: 7373 6572 7445 7175 616c 2876 616c 7565  ssertEqual(value
+00019970: 2c20 666c 6f61 7428 3235 3030 3029 290a  , float(25000)).
+00019980: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00019990: 6572 7445 7175 616c 2876 616c 7565 2c20  ertEqual(value, 
+000199a0: 6461 7461 6272 6f77 7365 7229 0a20 2020  databrowser).   
+000199b0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+000199c0: 4571 7561 6c28 7661 6c75 652c 2076 616c  Equal(value, val
+000199d0: 7565 5f69 6e69 7469 616c 290a 0a20 2020  ue_initial)..   
+000199e0: 2064 6566 2074 6573 745f 7265 7365 745f   def test_reset_
+000199f0: 726f 7728 7365 6c66 293a 0a20 2020 2020  row(self):.     
+00019a00: 2020 2022 2222 5465 7374 7320 726f 7720     """Tests row 
+00019a10: 7265 7365 742e 2222 220a 0a20 2020 2020  reset."""..     
+00019a20: 2020 2070 726f 6a65 6374 5f38 5f70 6174     project_8_pat
+00019a30: 6820 3d20 7365 6c66 2e67 6574 5f6e 6577  h = self.get_new
+00019a40: 5f74 6573 745f 7072 6f6a 6563 7428 290a  _test_project().
+00019a50: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
+00019a60: 6e5f 7769 6e64 6f77 2e73 7769 7463 685f  n_window.switch_
+00019a70: 7072 6f6a 6563 7428 7072 6f6a 6563 745f  project(project_
+00019a80: 385f 7061 7468 2c20 2270 726f 6a65 6374  8_path, "project
+00019a90: 5f38 2229 0a0a 2020 2020 2020 2020 2320  _8")..        # 
+00019aa0: 5661 6c75 6520 696e 2044 6174 6142 726f  Value in DataBro
+00019ab0: 7773 6572 2066 6f72 2074 6865 2073 6563  wser for the sec
+00019ac0: 6f6e 6420 646f 6375 6d65 6e74 0a20 2020  ond document.   
+00019ad0: 2020 2020 2074 7970 655f 636f 6c75 6d6e       type_column
+00019ae0: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
+00019af0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+00019b00: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
+00019b10: 6162 6c65 5f64 6174 612e 6765 745f 7461  able_data.get_ta
+00019b20: 675f 636f 6c75 6d6e 0a20 2020 2020 2020  g_column.       
+00019b30: 2029 2822 5479 7065 2229 0a20 2020 2020   )("Type").     
+00019b40: 2020 2074 7970 655f 6974 656d 203d 2073     type_item = s
+00019b50: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00019b60: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
+00019b70: 6c65 5f64 6174 612e 6974 656d 280a 2020  le_data.item(.  
+00019b80: 2020 2020 2020 2020 2020 312c 2074 7970            1, typ
+00019b90: 655f 636f 6c75 6d6e 0a20 2020 2020 2020  e_column.       
+00019ba0: 2029 0a20 2020 2020 2020 206f 6c64 5f74   ).        old_t
+00019bb0: 7970 6520 3d20 7479 7065 5f69 7465 6d2e  ype = type_item.
+00019bc0: 7465 7874 2829 0a0a 2020 2020 2020 2020  text()..        
+00019bd0: 2320 4368 6563 6b20 7661 6c75 6520 696e  # Check value in
+00019be0: 2044 6174 6142 726f 7773 6572 2066 6f72   DataBrowser for
+00019bf0: 2074 6865 2073 6563 6f6e 6420 646f 6375   the second docu
+00019c00: 6d65 6e74 0a20 2020 2020 2020 2073 656c  ment.        sel
+00019c10: 662e 6173 7365 7274 4571 7561 6c28 6f6c  f.assertEqual(ol
+00019c20: 645f 7479 7065 2c20 2253 6361 6e22 290a  d_type, "Scan").
+00019c30: 0a20 2020 2020 2020 2023 2043 6861 6e67  .        # Chang
+00019c40: 6520 7468 6520 7661 6c75 650a 2020 2020  e the value.    
+00019c50: 2020 2020 7479 7065 5f69 7465 6d2e 7365      type_item.se
+00019c60: 7453 656c 6563 7465 6428 5472 7565 290a  tSelected(True).
+00019c70: 2020 2020 2020 2020 7479 7065 5f69 7465          type_ite
+00019c80: 6d2e 7365 7454 6578 7428 2254 6573 7422  m.setText("Test"
+00019c90: 290a 0a20 2020 2020 2020 2023 2043 6865  )..        # Che
+00019ca0: 636b 2069 6620 7661 6c75 6520 696e 2044  ck if value in D
+00019cb0: 6174 6142 726f 7773 6572 2061 7320 6265  ataBrowser as be
+00019cc0: 656e 2063 6861 6e67 6564 0a20 2020 2020  en changed.     
+00019cd0: 2020 2073 6574 5f69 7465 6d20 3d20 7365     set_item = se
+00019ce0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
+00019cf0: 6174 615f 6272 6f77 7365 722e 7461 626c  ata_browser.tabl
+00019d00: 655f 6461 7461 2e69 7465 6d28 0a20 2020  e_data.item(.   
+00019d10: 2020 2020 2020 2020 2031 2c20 7479 7065           1, type
+00019d20: 5f63 6f6c 756d 6e0a 2020 2020 2020 2020  _column.        
+00019d30: 290a 2020 2020 2020 2020 7365 745f 7479  ).        set_ty
+00019d40: 7065 203d 2073 6574 5f69 7465 6d2e 7465  pe = set_item.te
+00019d50: 7874 2829 0a20 2020 2020 2020 2073 656c  xt().        sel
+00019d60: 662e 6173 7365 7274 4571 7561 6c28 7365  f.assertEqual(se
+00019d70: 745f 7479 7065 2c20 2254 6573 7422 290a  t_type, "Test").
+00019d80: 0a20 2020 2020 2020 2023 2052 6573 6574  .        # Reset
+00019d90: 2072 6f77 2066 6f72 2073 6563 6f6e 6420   row for second 
+00019da0: 646f 6375 6d65 6e74 0a20 2020 2020 2020  document.       
+00019db0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+00019dc0: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
+00019dd0: 6162 6c65 5f64 6174 612e 636c 6561 7253  able_data.clearS
+00019de0: 656c 6563 7469 6f6e 2829 0a20 2020 2020  election().     
+00019df0: 2020 2069 7465 6d20 3d20 7365 6c66 2e6d     item = self.m
+00019e00: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
+00019e10: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
+00019e20: 7461 2e69 7465 6d28 312c 2030 290a 2020  ta.item(1, 0).  
+00019e30: 2020 2020 2020 6974 656d 2e73 6574 5365        item.setSe
+00019e40: 6c65 6374 6564 2854 7275 6529 0a20 2020  lected(True).   
+00019e50: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
+00019e60: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
+00019e70: 6572 2e74 6162 6c65 5f64 6174 612e 6974  er.table_data.it
+00019e80: 656d 4368 616e 6765 642e 6469 7363 6f6e  emChanged.discon
+00019e90: 6e65 6374 2829 0a20 2020 2020 2020 2073  nect().        s
+00019ea0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00019eb0: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
+00019ec0: 6c65 5f64 6174 612e 7265 7365 745f 726f  le_data.reset_ro
+00019ed0: 7728 290a 2020 2020 2020 2020 7365 6c66  w().        self
+00019ee0: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
+00019ef0: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
+00019f00: 6461 7461 2e69 7465 6d43 6861 6e67 6564  data.itemChanged
+00019f10: 2e63 6f6e 6e65 6374 280a 2020 2020 2020  .connect(.      
+00019f20: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
+00019f30: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
+00019f40: 7365 722e 7461 626c 655f 6461 7461 2e63  ser.table_data.c
+00019f50: 6861 6e67 655f 6365 6c6c 5f63 6f6c 6f72  hange_cell_color
+00019f60: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+00019f70: 2020 2020 2320 4368 6563 6b20 6966 2076      # Check if v
+00019f80: 616c 7565 2069 6e20 4461 7461 4272 6f77  alue in DataBrow
+00019f90: 7365 7220 6173 2062 6565 6e20 7265 7365  ser as been rese
+00019fa0: 740a 2020 2020 2020 2020 7479 7065 5f69  t.        type_i
+00019fb0: 7465 6d20 3d20 7365 6c66 2e6d 6169 6e5f  tem = self.main_
+00019fc0: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
+00019fd0: 7365 722e 7461 626c 655f 6461 7461 2e69  ser.table_data.i
+00019fe0: 7465 6d28 0a20 2020 2020 2020 2020 2020  tem(.           
+00019ff0: 2031 2c20 7479 7065 5f63 6f6c 756d 6e0a   1, type_column.
+0001a000: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0001a010: 2020 6e65 775f 7479 7065 203d 2074 7970    new_type = typ
+0001a020: 655f 6974 656d 2e74 6578 7428 290a 2020  e_item.text().  
+0001a030: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0001a040: 7445 7175 616c 286e 6577 5f74 7970 652c  tEqual(new_type,
+0001a050: 2022 5363 616e 2229 0a0a 2020 2020 6465   "Scan")..    de
+0001a060: 6620 7465 7374 5f73 6176 655f 7072 6f6a  f test_save_proj
+0001a070: 6563 7428 7365 6c66 293a 0a20 2020 2020  ect(self):.     
+0001a080: 2020 2022 2222 5465 7374 206f 7065 6e69     """Test openi
+0001a090: 6e67 2026 2073 6176 696e 6720 6f66 2061  ng & saving of a
+0001a0a0: 2070 726f 6a65 6374 2e22 2222 0a0a 2020   project."""..  
+0001a0b0: 2020 2020 2020 636f 6e66 6967 203d 2043        config = C
+0001a0c0: 6f6e 6669 6728 636f 6e66 6967 5f70 6174  onfig(config_pat
+0001a0d0: 683d 7365 6c66 2e63 6f6e 6669 675f 7061  h=self.config_pa
+0001a0e0: 7468 290a 2020 2020 2020 2020 7072 6f6a  th).        proj
+0001a0f0: 6563 7473 5f64 6972 203d 206f 732e 7061  ects_dir = os.pa
+0001a100: 7468 2e72 6561 6c70 6174 6828 0a20 2020  th.realpath(.   
+0001a110: 2020 2020 2020 2020 2074 656d 7066 696c           tempfil
+0001a120: 652e 6d6b 6474 656d 7028 7072 6566 6978  e.mkdtemp(prefix
+0001a130: 3d22 7072 6f6a 6563 7473 5f74 6573 7473  ="projects_tests
+0001a140: 2229 0a20 2020 2020 2020 2029 0a0a 2020  ").        )..  
+0001a150: 2020 2020 2020 2320 496e 7374 6561 6420        # Instead 
+0001a160: 6f66 2065 7865 6375 7469 6e67 2074 6865  of executing the
+0001a170: 2070 6f70 2d75 702c 206f 6e6c 7920 7368   pop-up, only sh
+0001a180: 6f77 7320 6974 0a20 2020 2020 2020 2023  ows it.        #
+0001a190: 2054 6869 7320 7072 6576 656e 7473 2074   This prevents t
+0001a1a0: 6872 6561 6420 6465 6164 6c6f 636b 696e  hread deadlockin
+0001a1b0: 670a 2020 2020 2020 2020 514d 6573 7361  g.        QMessa
+0001a1c0: 6765 426f 782e 6578 6563 203d 206c 616d  geBox.exec = lam
+0001a1d0: 6264 6120 7365 6c66 5f3a 2073 656c 665f  bda self_: self_
+0001a1e0: 2e73 686f 7728 290a 0a20 2020 2020 2020  .show()..       
+0001a1f0: 2023 2054 7269 6573 2074 6f20 6f70 656e   # Tries to open
+0001a200: 2074 6865 2070 726f 6a65 6374 2070 6f70   the project pop
+0001a210: 2d75 7020 7769 7468 6f75 7420 7468 6520  -up without the 
+0001a220: 7072 6f6a 6563 7473 2073 6176 6520 6469  projects save di
+0001a230: 720a 2020 2020 2020 2020 636f 6e66 6967  r.        config
+0001a240: 2e73 6574 5f70 726f 6a65 6374 735f 7361  .set_projects_sa
+0001a250: 7665 5f70 6174 6828 4e6f 6e65 290a 2020  ve_path(None).  
+0001a260: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
+0001a270: 7769 6e64 6f77 2e63 7265 6174 655f 7072  window.create_pr
+0001a280: 6f6a 6563 745f 706f 705f 7570 2829 0a20  oject_pop_up(). 
+0001a290: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
+0001a2a0: 5f77 696e 646f 772e 6d73 672e 6163 6365  _window.msg.acce
+0001a2b0: 7074 2829 0a0a 2020 2020 2020 2020 2320  pt()..        # 
+0001a2c0: 5472 6965 7320 746f 2073 6176 6520 7468  Tries to save th
+0001a2d0: 6520 7072 6f6a 6563 7420 2773 6f6d 6574  e project 'somet
+0001a2e0: 6869 6e67 2720 7769 7468 6f75 7420 7365  hing' without se
+0001a2f0: 7474 696e 6720 7468 650a 2020 2020 2020  tting the.      
+0001a300: 2020 2320 7072 6f6a 6563 7473 2073 6176    # projects sav
+0001a310: 6520 6469 7265 6374 6f72 790a 2020 2020  e directory.    
+0001a320: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
+0001a330: 6e64 6f77 2e73 6176 6543 686f 6963 6528  ndow.saveChoice(
+0001a340: 290a 2020 2020 2020 2020 7365 6c66 2e6d  ).        self.m
+0001a350: 6169 6e5f 7769 6e64 6f77 2e6d 7367 2e61  ain_window.msg.a
+0001a360: 6363 6570 7428 290a 0a20 2020 2020 2020  ccept()..       
+0001a370: 2023 2053 6574 7320 7468 6520 7072 6f6a   # Sets the proj
+0001a380: 6563 7420 7361 7665 2064 6972 6563 746f  ect save directo
+0001a390: 7279 0a20 2020 2020 2020 2063 6f6e 6669  ry.        confi
+0001a3a0: 672e 7365 745f 7072 6f6a 6563 7473 5f73  g.set_projects_s
+0001a3b0: 6176 655f 7061 7468 2870 726f 6a65 6374  ave_path(project
+0001a3c0: 735f 6469 7229 0a20 2020 2020 2020 2073  s_dir).        s
+0001a3d0: 6f6d 6574 6869 6e67 5f70 6174 6820 3d20  omething_path = 
+0001a3e0: 6f73 2e70 6174 682e 6a6f 696e 2870 726f  os.path.join(pro
+0001a3f0: 6a65 6374 735f 6469 722c 2022 736f 6d65  jects_dir, "some
+0001a400: 7468 696e 6722 290a 2020 2020 2020 2020  thing").        
+0001a410: 7072 6f6a 6563 745f 385f 7061 7468 203d  project_8_path =
+0001a420: 2073 656c 662e 6765 745f 6e65 775f 7465   self.get_new_te
+0001a430: 7374 5f70 726f 6a65 6374 286e 616d 653d  st_project(name=
+0001a440: 2270 726f 6a65 6374 5f38 2229 0a0a 2020  "project_8")..  
+0001a450: 2020 2020 2020 2320 5361 7665 7320 7468        # Saves th
+0001a460: 6520 7072 6f6a 6563 7420 2773 6f6d 6574  e project 'somet
+0001a470: 6869 6e67 270a 2020 2020 2020 2020 7365  hing'.        se
+0001a480: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e73  lf.main_window.s
+0001a490: 6176 6543 686f 6963 6528 290a 2020 2020  aveChoice().    
+0001a4a0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0001a4b0: 7175 616c 2873 656c 662e 6d61 696e 5f77  qual(self.main_w
+0001a4c0: 696e 646f 772e 7072 6f6a 6563 742e 6765  indow.project.ge
+0001a4d0: 744e 616d 6528 292c 2022 736f 6d65 7468  tName(), "someth
+0001a4e0: 696e 6722 290a 2020 2020 2020 2020 7365  ing").        se
+0001a4f0: 6c66 2e61 7373 6572 7445 7175 616c 286f  lf.assertEqual(o
+0001a500: 732e 7061 7468 2e65 7869 7374 7328 736f  s.path.exists(so
+0001a510: 6d65 7468 696e 675f 7061 7468 292c 2054  mething_path), T
+0001a520: 7275 6529 0a0a 2020 2020 2020 2020 2320  rue)..        # 
+0001a530: 5377 6974 6368 6573 2074 6f20 7072 6f6a  Switches to proj
+0001a540: 6563 7420 2770 726f 6a65 6374 5f38 270a  ect 'project_8'.
+0001a550: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
+0001a560: 6e5f 7769 6e64 6f77 2e73 7769 7463 685f  n_window.switch_
+0001a570: 7072 6f6a 6563 7428 7072 6f6a 6563 745f  project(project_
+0001a580: 385f 7061 7468 2c20 2270 726f 6a65 6374  8_path, "project
+0001a590: 5f38 2229 0a20 2020 2020 2020 2073 656c  _8").        sel
+0001a5a0: 662e 6173 7365 7274 4571 7561 6c28 7365  f.assertEqual(se
+0001a5b0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
+0001a5c0: 726f 6a65 6374 2e67 6574 4e61 6d65 2829  roject.getName()
+0001a5d0: 2c20 2270 726f 6a65 6374 5f38 2229 0a20  , "project_8"). 
+0001a5e0: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
+0001a5f0: 5f77 696e 646f 772e 7361 7665 4368 6f69  _window.saveChoi
+0001a600: 6365 2829 2020 2320 5570 6461 7465 7320  ce()  # Updates 
+0001a610: 7468 6520 7072 6f6a 6563 7420 2770 726f  the project 'pro
+0001a620: 6a65 6374 5f38 270a 0a20 2020 2020 2020  ject_8'..       
+0001a630: 2023 2052 656d 6f76 6573 2074 6865 2070   # Removes the p
+0001a640: 726f 6a65 6374 2027 736f 6d65 7468 696e  roject 'somethin
+0001a650: 6727 2066 696c 6520 7472 6565 0a20 2020  g' file tree.   
+0001a660: 2020 2020 2073 6875 7469 6c2e 726d 7472       shutil.rmtr
+0001a670: 6565 2873 6f6d 6574 6869 6e67 5f70 6174  ee(something_pat
+0001a680: 6829 0a0a 2020 2020 2020 2020 506f 7055  h)..        PopU
+0001a690: 704e 6577 5072 6f6a 6563 742e 6578 6563  pNewProject.exec
+0001a6a0: 203d 206c 616d 6264 6120 783a 2054 7275   = lambda x: Tru
+0001a6b0: 650a 2020 2020 2020 2020 506f 7055 704e  e.        PopUpN
+0001a6c0: 6577 5072 6f6a 6563 742e 7365 6c65 6374  ewProject.select
+0001a6d0: 6564 4669 6c65 7320 3d20 6c61 6d62 6461  edFiles = lambda
+0001a6e0: 2078 3a20 5472 7565 0a20 2020 2020 2020   x: True.       
+0001a6f0: 2050 6f70 5570 4e65 7750 726f 6a65 6374   PopUpNewProject
+0001a700: 2e67 6574 5f66 696c 656e 616d 6520 3d20  .get_filename = 
+0001a710: 6c61 6d62 6461 2078 2c20 793a 2054 7275  lambda x, y: Tru
+0001a720: 650a 2020 2020 2020 2020 506f 7055 704e  e.        PopUpN
+0001a730: 6577 5072 6f6a 6563 742e 7265 6c61 7469  ewProject.relati
+0001a740: 7665 5f70 6174 6820 3d20 736f 6d65 7468  ve_path = someth
+0001a750: 696e 675f 7061 7468 0a0a 2020 2020 2020  ing_path..      
+0001a760: 2020 506f 7055 704f 7065 6e50 726f 6a65    PopUpOpenProje
+0001a770: 6374 2e65 7865 6320 3d20 6c61 6d62 6461  ct.exec = lambda
+0001a780: 2078 3a20 5472 7565 0a20 2020 2020 2020   x: True.       
+0001a790: 2050 6f70 5570 4f70 656e 5072 6f6a 6563   PopUpOpenProjec
+0001a7a0: 742e 7365 6c65 6374 6564 4669 6c65 7320  t.selectedFiles 
+0001a7b0: 3d20 6c61 6d62 6461 2078 3a20 5472 7565  = lambda x: True
+0001a7c0: 0a20 2020 2020 2020 2050 6f70 5570 4f70  .        PopUpOp
+0001a7d0: 656e 5072 6f6a 6563 742e 6765 745f 6669  enProject.get_fi
+0001a7e0: 6c65 6e61 6d65 203d 206c 616d 6264 6120  lename = lambda 
+0001a7f0: 782c 2079 3a20 5472 7565 0a20 2020 2020  x, y: True.     
+0001a800: 2020 2050 6f70 5570 4f70 656e 5072 6f6a     PopUpOpenProj
+0001a810: 6563 742e 7265 6c61 7469 7665 5f70 6174  ect.relative_pat
+0001a820: 6820 3d20 736f 6d65 7468 696e 675f 7061  h = something_pa
+0001a830: 7468 0a20 2020 2020 2020 2050 6f70 5570  th.        PopUp
+0001a840: 4f70 656e 5072 6f6a 6563 742e 7061 7468  OpenProject.path
+0001a850: 2c20 506f 7055 704f 7065 6e50 726f 6a65  , PopUpOpenProje
+0001a860: 6374 2e6e 616d 6520 3d20 6f73 2e70 6174  ct.name = os.pat
+0001a870: 682e 7370 6c69 7428 0a20 2020 2020 2020  h.split(.       
+0001a880: 2020 2020 2073 6f6d 6574 6869 6e67 5f70       something_p
+0001a890: 6174 680a 2020 2020 2020 2020 290a 2020  ath.        ).  
+0001a8a0: 2020 2020 2020 2320 4372 6561 7465 7320        # Creates 
+0001a8b0: 616e 6420 7361 7665 7320 7468 6520 7072  and saves the pr
+0001a8c0: 6f6a 6563 7420 2773 6f6d 6574 6869 6e67  oject 'something
+0001a8d0: 270a 2020 2020 2020 2020 7365 6c66 2e6d  '.        self.m
+0001a8e0: 6169 6e5f 7769 6e64 6f77 2e63 7265 6174  ain_window.creat
+0001a8f0: 655f 7072 6f6a 6563 745f 706f 705f 7570  e_project_pop_up
+0001a900: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
+0001a910: 6173 7365 7274 4571 7561 6c28 7365 6c66  assertEqual(self
+0001a920: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 726f  .main_window.pro
+0001a930: 6a65 6374 2e67 6574 4e61 6d65 2829 2c20  ject.getName(), 
+0001a940: 2273 6f6d 6574 6869 6e67 2229 0a20 2020  "something").   
+0001a950: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0001a960: 4571 7561 6c28 6f73 2e70 6174 682e 6578  Equal(os.path.ex
+0001a970: 6973 7473 2873 6f6d 6574 6869 6e67 5f70  ists(something_p
+0001a980: 6174 6829 2c20 5472 7565 290a 0a20 2020  ath), True)..   
+0001a990: 2020 2020 2023 2053 7769 7463 6865 7320       # Switches 
+0001a9a0: 746f 2061 6e6f 7468 6572 2070 726f 6a65  to another proje
+0001a9b0: 6374 2061 6e64 2076 6572 6966 6965 7320  ct and verifies 
+0001a9c0: 7468 6174 2070 726f 6a65 6374 0a20 2020  that project.   
+0001a9d0: 2020 2020 2023 2027 736f 6d65 7468 696e       # 'somethin
+0001a9e0: 6727 2069 7320 7368 6f77 6e20 696e 2074  g' is shown in t
+0001a9f0: 6865 2070 726f 6a65 6374 7320 706f 702d  he projects pop-
+0001aa00: 7570 0a20 2020 2020 2020 2073 656c 662e  up.        self.
+0001aa10: 6d61 696e 5f77 696e 646f 772e 7377 6974  main_window.swit
+0001aa20: 6368 5f70 726f 6a65 6374 2870 726f 6a65  ch_project(proje
+0001aa30: 6374 5f38 5f70 6174 682c 2022 7072 6f6a  ct_8_path, "proj
+0001aa40: 6563 745f 3822 290a 2020 2020 2020 2020  ect_8").        
+0001aa50: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+0001aa60: 2e6f 7065 6e5f 7072 6f6a 6563 745f 706f  .open_project_po
+0001aa70: 705f 7570 2829 0a20 2020 2020 2020 2073  p_up().        s
+0001aa80: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0001aa90: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+0001aaa0: 2e70 726f 6a65 6374 2e67 6574 4e61 6d65  .project.getName
+0001aab0: 2829 2c20 2273 6f6d 6574 6869 6e67 2229  (), "something")
+0001aac0: 0a0a 2020 2020 2020 2020 2320 5265 6d6f  ..        # Remo
+0001aad0: 7665 7320 7468 6520 7072 6f6a 6563 7420  ves the project 
+0001aae0: 2773 6f6d 6574 6869 6e67 2720 7472 6565  'something' tree
+0001aaf0: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+0001ab00: 696e 5f77 696e 646f 772e 7377 6974 6368  in_window.switch
+0001ab10: 5f70 726f 6a65 6374 2870 726f 6a65 6374  _project(project
+0001ab20: 5f38 5f70 6174 682c 2022 7072 6f6a 6563  _8_path, "projec
+0001ab30: 745f 3822 290a 2020 2020 2020 2020 7368  t_8").        sh
+0001ab40: 7574 696c 2e72 6d74 7265 6528 736f 6d65  util.rmtree(some
+0001ab50: 7468 696e 675f 7061 7468 290a 0a20 2020  thing_path)..   
+0001ab60: 2064 6566 2074 6573 745f 7365 6e64 5f64   def test_send_d
+0001ab70: 6f63 5f74 6f5f 7069 7065 6c69 6e65 5f6d  oc_to_pipeline_m
+0001ab80: 616e 6167 6572 2873 656c 6629 3a0a 2020  anager(self):.  
+0001ab90: 2020 2020 2020 2222 2254 6573 7473 2074        """Tests t
+0001aba0: 6865 2070 6f70 7570 2073 656e 6469 6e67  he popup sending
+0001abb0: 2074 6865 2064 6f63 756d 656e 7473 2074   the documents t
+0001abc0: 6f20 7468 6520 7069 7065 6c69 6e65 206d  o the pipeline m
+0001abd0: 616e 6167 6572 2e22 2222 0a0a 2020 2020  anager."""..    
+0001abe0: 2020 2020 7072 6f6a 6563 745f 385f 7061      project_8_pa
+0001abf0: 7468 203d 2073 656c 662e 6765 745f 6e65  th = self.get_ne
+0001ac00: 775f 7465 7374 5f70 726f 6a65 6374 2829  w_test_project()
+0001ac10: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+0001ac20: 696e 5f77 696e 646f 772e 7377 6974 6368  in_window.switch
+0001ac30: 5f70 726f 6a65 6374 2870 726f 6a65 6374  _project(project
+0001ac40: 5f38 5f70 6174 682c 2022 7072 6f6a 6563  _8_path, "projec
+0001ac50: 745f 3822 290a 0a20 2020 2020 2020 2023  t_8")..        #
+0001ac60: 2043 6865 636b 696e 6720 7468 6174 2074   Checking that t
+0001ac70: 6865 2070 6970 656c 696e 6520 6d61 6e61  he pipeline mana
+0001ac80: 6765 7220 6861 7320 616e 2065 6d70 7479  ger has an empty
+0001ac90: 206c 6973 7420 6174 2074 6865 2062 6567   list at the beg
+0001aca0: 696e 6e69 6e67 0a20 2020 2020 2020 2073  inning.        s
+0001acb0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0001acc0: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+0001acd0: 2e70 6970 656c 696e 655f 6d61 6e61 6765  .pipeline_manage
+0001ace0: 722e 7363 616e 5f6c 6973 742c 205b 5d29  r.scan_list, [])
+0001acf0: 0a0a 2020 2020 2020 2020 2320 5365 6e64  ..        # Send
+0001ad00: 696e 6720 7468 6520 7365 6c65 6374 696f  ing the selectio
+0001ad10: 6e20 2861 6c6c 2073 6361 6e73 292c 2062  n (all scans), b
+0001ad20: 7574 2063 6c6f 7369 6e67 2074 6865 2070  ut closing the p
+0001ad30: 6f70 7570 0a20 2020 2020 2020 2051 5465  opup.        QTe
+0001ad40: 7374 2e6d 6f75 7365 436c 6963 6b28 0a20  st.mouseClick(. 
+0001ad50: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0001ad60: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
+0001ad70: 5f62 726f 7773 6572 2e73 656e 645f 646f  _browser.send_do
+0001ad80: 6375 6d65 6e74 735f 746f 5f70 6970 656c  cuments_to_pipel
+0001ad90: 696e 655f 6275 7474 6f6e 2c0a 2020 2020  ine_button,.    
+0001ada0: 2020 2020 2020 2020 5174 2e4c 6566 7442          Qt.LeftB
+0001adb0: 7574 746f 6e2c 0a20 2020 2020 2020 2029  utton,.        )
+0001adc0: 0a20 2020 2020 2020 2073 656e 645f 706f  .        send_po
+0001add0: 7075 7020 3d20 7365 6c66 2e6d 6169 6e5f  pup = self.main_
+0001ade0: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
+0001adf0: 7365 722e 7368 6f77 5f73 656c 6563 7469  ser.show_selecti
+0001ae00: 6f6e 0a0a 2020 2020 2020 2020 5154 6573  on..        QTes
+0001ae10: 742e 7157 6169 7428 3530 3029 0a0a 2020  t.qWait(500)..  
+0001ae20: 2020 2020 2020 7365 6e64 5f70 6f70 7570        send_popup
+0001ae30: 2e63 6c6f 7365 2829 0a0a 2020 2020 2020  .close()..      
+0001ae40: 2020 2320 4368 6563 6b69 6e67 2074 6861    # Checking tha
+0001ae50: 7420 7468 6520 6c69 7374 2069 7320 7374  t the list is st
+0001ae60: 696c 6c20 656d 7074 790a 2020 2020 2020  ill empty.      
+0001ae70: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0001ae80: 616c 2873 656c 662e 6d61 696e 5f77 696e  al(self.main_win
+0001ae90: 646f 772e 7069 7065 6c69 6e65 5f6d 616e  dow.pipeline_man
+0001aea0: 6167 6572 2e73 6361 6e5f 6c69 7374 2c20  ager.scan_list, 
+0001aeb0: 5b5d 290a 0a20 2020 2020 2020 2023 2053  [])..        # S
+0001aec0: 656e 6469 6e67 2074 6865 2073 656c 6563  ending the selec
+0001aed0: 7469 6f6e 2028 616c 6c20 7363 616e 7329  tion (all scans)
+0001aee0: 2c20 6275 7420 6869 7420 7468 6520 224f  , but hit the "O
+0001aef0: 4b22 2062 7574 746f 6e0a 2020 2020 2020  K" button.      
+0001af00: 2020 5154 6573 742e 6d6f 7573 6543 6c69    QTest.mouseCli
+0001af10: 636b 280a 2020 2020 2020 2020 2020 2020  ck(.            
+0001af20: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+0001af30: 2e64 6174 615f 6272 6f77 7365 722e 7365  .data_browser.se
+0001af40: 6e64 5f64 6f63 756d 656e 7473 5f74 6f5f  nd_documents_to_
+0001af50: 7069 7065 6c69 6e65 5f62 7574 746f 6e2c  pipeline_button,
+0001af60: 0a20 2020 2020 2020 2020 2020 2051 742e  .            Qt.
+0001af70: 4c65 6674 4275 7474 6f6e 2c0a 2020 2020  LeftButton,.    
+0001af80: 2020 2020 290a 2020 2020 2020 2020 7365      ).        se
+0001af90: 6e64 5f70 6f70 7570 203d 2073 656c 662e  nd_popup = self.
+0001afa0: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
+0001afb0: 5f62 726f 7773 6572 2e73 686f 775f 7365  _browser.show_se
+0001afc0: 6c65 6374 696f 6e0a 0a20 2020 2020 2020  lection..       
+0001afd0: 2051 5465 7374 2e71 5761 6974 2835 3030   QTest.qWait(500
+0001afe0: 290a 0a20 2020 2020 2020 2073 656e 645f  )..        send_
+0001aff0: 706f 7075 702e 6f6b 5f63 6c69 636b 6564  popup.ok_clicked
+0001b000: 2829 0a0a 2020 2020 2020 2020 2320 4368  ()..        # Ch
+0001b010: 6563 6b69 6e67 2074 6861 7420 616c 6c20  ecking that all 
+0001b020: 7363 616e 7320 6861 7665 2062 6565 6e20  scans have been 
+0001b030: 7365 6e74 2074 6f20 7468 6520 7069 7065  sent to the pipe
+0001b040: 6c69 6e65 206d 616e 6167 6572 0a20 2020  line manager.   
+0001b050: 2020 2020 2073 6361 6e73 203d 2073 656c       scans = sel
+0001b060: 662e 6d61 696e 5f77 696e 646f 772e 7069  f.main_window.pi
+0001b070: 7065 6c69 6e65 5f6d 616e 6167 6572 2e73  peline_manager.s
+0001b080: 6361 6e5f 6c69 7374 0a20 2020 2020 2020  can_list.       
+0001b090: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0001b0a0: 6c28 6c65 6e28 7363 616e 7329 2c20 3929  l(len(scans), 9)
+0001b0b0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0001b0c0: 7365 7274 5472 7565 280a 2020 2020 2020  sertTrue(.      
+0001b0d0: 2020 2020 2020 2264 6174 612f 7261 775f        "data/raw_
+0001b0e0: 6461 7461 2f47 7565 7262 6574 2d43 362d  data/Guerbet-C6-
+0001b0f0: 3230 3134 2d52 6174 2d4b 3532 2d54 7562  2014-Rat-K52-Tub
+0001b100: 6532 3722 0a20 2020 2020 2020 2020 2020  e27".           
+0001b110: 2022 2d32 3031 342d 3032 2d31 3431 3032   "-2014-02-14102
+0001b120: 3331 372d 3031 2d47 315f 4775 6572 6265  317-01-G1_Guerbe
+0001b130: 745f 416e 6174 2d52 4152 4522 0a20 2020  t_Anat-RARE".   
+0001b140: 2020 2020 2020 2020 2022 7076 6d2d 3030           "pvm-00
+0001b150: 3032 3230 5f30 3030 2e6e 6969 2220 696e  0220_000.nii" in
+0001b160: 2073 6361 6e73 0a20 2020 2020 2020 2029   scans.        )
+0001b170: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0001b180: 7365 7274 5472 7565 280a 2020 2020 2020  sertTrue(.      
+0001b190: 2020 2020 2020 2264 6174 612f 7261 775f        "data/raw_
+0001b1a0: 6461 7461 2f47 7565 7262 6574 2d43 362d  data/Guerbet-C6-
+0001b1b0: 3230 3134 2d52 6174 2d4b 3532 2d54 7562  2014-Rat-K52-Tub
+0001b1c0: 6532 3722 0a20 2020 2020 2020 2020 2020  e27".           
+0001b1d0: 2022 2d32 3031 342d 3032 2d31 3431 3032   "-2014-02-14102
+0001b1e0: 3331 372d 3034 2d47 335f 4775 6572 6265  317-04-G3_Guerbe
+0001b1f0: 745f 4d44 4546 542d 4d44 4546 5422 0a20  t_MDEFT-MDEFT". 
+0001b200: 2020 2020 2020 2020 2020 2022 7076 6d2d             "pvm-
+0001b210: 3030 3039 3430 5f38 3030 2e6e 6969 2220  000940_800.nii" 
+0001b220: 696e 2073 6361 6e73 0a20 2020 2020 2020  in scans.       
+0001b230: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
+0001b240: 6173 7365 7274 5472 7565 280a 2020 2020  assertTrue(.    
+0001b250: 2020 2020 2020 2020 2264 6174 612f 7261          "data/ra
+0001b260: 775f 6461 7461 2f47 7565 7262 6574 2d43  w_data/Guerbet-C
+0001b270: 362d 3230 3134 2d52 6174 2d4b 3532 2d54  6-2014-Rat-K52-T
+0001b280: 7562 6532 3722 0a20 2020 2020 2020 2020  ube27".         
+0001b290: 2020 2022 2d32 3031 342d 3032 2d31 3431     "-2014-02-141
+0001b2a0: 3032 3331 372d 3035 2d47 345f 4775 6572  02317-05-G4_Guer
+0001b2b0: 6265 745f 5431 5345 5f38 3030 2d52 4152  bet_T1SE_800-RAR
+0001b2c0: 4522 0a20 2020 2020 2020 2020 2020 2022  E".            "
+0001b2d0: 7076 6d2d 3030 3031 3432 5f34 3030 2e6e  pvm-000142_400.n
+0001b2e0: 6969 2220 696e 2073 6361 6e73 0a20 2020  ii" in scans.   
+0001b2f0: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
+0001b300: 656c 662e 6173 7365 7274 5472 7565 280a  elf.assertTrue(.
+0001b310: 2020 2020 2020 2020 2020 2020 2264 6174              "dat
+0001b320: 612f 7261 775f 6461 7461 2f47 7565 7262  a/raw_data/Guerb
+0001b330: 6574 2d43 362d 3230 3134 2d52 6174 2d4b  et-C6-2014-Rat-K
+0001b340: 3532 2d54 7562 6532 3722 0a20 2020 2020  52-Tube27".     
+0001b350: 2020 2020 2020 2022 2d32 3031 342d 3032         "-2014-02
+0001b360: 2d31 3431 3032 3331 372d 3036 2d47 345f  -14102317-06-G4_
+0001b370: 4775 6572 6265 745f 5431 5345 5f38 3030  Guerbet_T1SE_800
+0001b380: 2d52 4152 4522 0a20 2020 2020 2020 2020  -RARE".         
+0001b390: 2020 2022 7076 6d2d 3030 3031 3432 5f34     "pvm-000142_4
+0001b3a0: 3030 2e6e 6969 2220 696e 2073 6361 6e73  00.nii" in scans
+0001b3b0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+0001b3c0: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
+0001b3d0: 7565 280a 2020 2020 2020 2020 2020 2020  ue(.            
+0001b3e0: 2264 6174 612f 7261 775f 6461 7461 2f47  "data/raw_data/G
+0001b3f0: 7565 7262 6574 2d43 362d 3230 3134 2d52  uerbet-C6-2014-R
+0001b400: 6174 2d4b 3532 2d54 7562 6532 3722 0a20  at-K52-Tube27". 
+0001b410: 2020 2020 2020 2020 2020 2022 2d32 3031             "-201
+0001b420: 342d 3032 2d31 3431 3032 3331 372d 3038  4-02-14102317-08
+0001b430: 2d47 345f 4775 6572 6265 745f 5431 5345  -G4_Guerbet_T1SE
+0001b440: 5f38 3030 2d52 4152 4522 0a20 2020 2020  _800-RARE".     
+0001b450: 2020 2020 2020 2022 7076 6d2d 3030 3031         "pvm-0001
+0001b460: 3432 5f34 3030 2e6e 6969 2220 696e 2073  42_400.nii" in s
+0001b470: 6361 6e73 0a20 2020 2020 2020 2029 0a20  cans.        ). 
+0001b480: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0001b490: 7274 5472 7565 280a 2020 2020 2020 2020  rtTrue(.        
+0001b4a0: 2020 2020 2264 6174 612f 7261 775f 6461      "data/raw_da
+0001b4b0: 7461 2f47 7565 7262 6574 2d43 362d 3230  ta/Guerbet-C6-20
+0001b4c0: 3134 2d52 6174 2d4b 3532 2d54 7562 6532  14-Rat-K52-Tube2
+0001b4d0: 3722 0a20 2020 2020 2020 2020 2020 2022  7".            "
+0001b4e0: 2d32 3031 342d 3032 2d31 3431 3032 3331  -2014-02-1410231
+0001b4f0: 372d 3039 2d47 345f 4775 6572 6265 745f  7-09-G4_Guerbet_
+0001b500: 5431 5345 5f38 3030 2d52 4152 4522 0a20  T1SE_800-RARE". 
+0001b510: 2020 2020 2020 2020 2020 2022 7076 6d2d             "pvm-
+0001b520: 3030 3031 3432 5f34 3030 2e6e 6969 2220  000142_400.nii" 
+0001b530: 696e 2073 6361 6e73 0a20 2020 2020 2020  in scans.       
+0001b540: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
+0001b550: 6173 7365 7274 5472 7565 280a 2020 2020  assertTrue(.    
+0001b560: 2020 2020 2020 2020 2264 6174 612f 7261          "data/ra
+0001b570: 775f 6461 7461 2f47 7565 7262 6574 2d43  w_data/Guerbet-C
+0001b580: 362d 3230 3134 2d52 6174 2d4b 3532 2d54  6-2014-Rat-K52-T
+0001b590: 7562 6532 3722 0a20 2020 2020 2020 2020  ube27".         
+0001b5a0: 2020 2022 2d32 3031 342d 3032 2d31 3431     "-2014-02-141
+0001b5b0: 3032 3331 372d 3130 2d47 335f 4775 6572  02317-10-G3_Guer
+0001b5c0: 6265 745f 4d44 4546 542d 4d44 4546 5422  bet_MDEFT-MDEFT"
+0001b5d0: 0a20 2020 2020 2020 2020 2020 2022 7076  .            "pv
+0001b5e0: 6d2d 3030 3039 3430 5f38 3030 2e6e 6969  m-000940_800.nii
+0001b5f0: 2220 696e 2073 6361 6e73 0a20 2020 2020  " in scans.     
+0001b600: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
+0001b610: 662e 6173 7365 7274 5472 7565 280a 2020  f.assertTrue(.  
+0001b620: 2020 2020 2020 2020 2020 2264 6174 612f            "data/
+0001b630: 7261 775f 6461 7461 2f47 7565 7262 6574  raw_data/Guerbet
+0001b640: 2d43 362d 3230 3134 2d52 6174 2d4b 3532  -C6-2014-Rat-K52
+0001b650: 2d54 7562 6532 3722 0a20 2020 2020 2020  -Tube27".       
+0001b660: 2020 2020 2022 2d32 3031 342d 3032 2d31       "-2014-02-1
+0001b670: 3431 3032 3331 372d 3131 2d47 345f 4775  4102317-11-G4_Gu
+0001b680: 6572 6265 745f 5431 5345 5f38 3030 2d52  erbet_T1SE_800-R
+0001b690: 4152 4522 0a20 2020 2020 2020 2020 2020  ARE".           
+0001b6a0: 2022 7076 6d2d 3030 3031 3432 5f34 3030   "pvm-000142_400
+0001b6b0: 2e6e 6969 2220 696e 2073 6361 6e73 0a20  .nii" in scans. 
+0001b6c0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0001b6d0: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
+0001b6e0: 280a 2020 2020 2020 2020 2020 2020 2264  (.            "d
+0001b6f0: 6174 612f 6465 7269 7665 645f 6461 7461  ata/derived_data
+0001b700: 2f73 4775 6572 6265 742d 4336 2d32 3031  /sGuerbet-C6-201
+0001b710: 342d 5261 742d 4b35 322d 5475 6265 3237  4-Rat-K52-Tube27
+0001b720: 220a 2020 2020 2020 2020 2020 2020 222d  ".            "-
+0001b730: 3230 3134 2d30 322d 3134 3130 3233 3137  2014-02-14102317
+0001b740: 2d30 312d 4731 5f47 7565 7262 6574 5f41  -01-G1_Guerbet_A
+0001b750: 6e61 742d 5241 5245 220a 2020 2020 2020  nat-RARE".      
+0001b760: 2020 2020 2020 2270 766d 2d30 3030 3232        "pvm-00022
+0001b770: 305f 3030 302e 6e69 6922 2069 6e20 7363  0_000.nii" in sc
+0001b780: 616e 730a 2020 2020 2020 2020 290a 0a20  ans.        ).. 
+0001b790: 2020 2020 2020 2023 2053 656c 6563 7469         # Selecti
+0001b7a0: 6e67 2074 6865 2066 6972 7374 2032 2073  ng the first 2 s
+0001b7b0: 6361 6e73 0a20 2020 2020 2020 2069 7465  cans.        ite
+0001b7c0: 6d31 203d 2073 656c 662e 6d61 696e 5f77  m1 = self.main_w
+0001b7d0: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
+0001b7e0: 6572 2e74 6162 6c65 5f64 6174 612e 6974  er.table_data.it
+0001b7f0: 656d 2830 2c20 3029 0a20 2020 2020 2020  em(0, 0).       
+0001b800: 2069 7465 6d31 2e73 6574 5365 6c65 6374   item1.setSelect
+0001b810: 6564 2854 7275 6529 0a20 2020 2020 2020  ed(True).       
+0001b820: 2073 6361 6e31 203d 2069 7465 6d31 2e74   scan1 = item1.t
+0001b830: 6578 7428 290a 2020 2020 2020 2020 6974  ext().        it
+0001b840: 656d 3220 3d20 7365 6c66 2e6d 6169 6e5f  em2 = self.main_
+0001b850: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
+0001b860: 7365 722e 7461 626c 655f 6461 7461 2e69  ser.table_data.i
+0001b870: 7465 6d28 312c 2030 290a 2020 2020 2020  tem(1, 0).      
+0001b880: 2020 6974 656d 322e 7365 7453 656c 6563    item2.setSelec
+0001b890: 7465 6428 5472 7565 290a 2020 2020 2020  ted(True).      
+0001b8a0: 2020 7363 616e 3220 3d20 6974 656d 322e    scan2 = item2.
+0001b8b0: 7465 7874 2829 0a0a 2020 2020 2020 2020  text()..        
+0001b8c0: 2320 5365 6e64 696e 6720 7468 6520 7365  # Sending the se
+0001b8d0: 6c65 6374 696f 6e20 2866 6972 7374 2032  lection (first 2
+0001b8e0: 2073 6361 6e73 290a 2020 2020 2020 2020   scans).        
+0001b8f0: 5154 6573 742e 6d6f 7573 6543 6c69 636b  QTest.mouseClick
+0001b900: 280a 2020 2020 2020 2020 2020 2020 7365  (.            se
+0001b910: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
+0001b920: 6174 615f 6272 6f77 7365 722e 7365 6e64  ata_browser.send
+0001b930: 5f64 6f63 756d 656e 7473 5f74 6f5f 7069  _documents_to_pi
+0001b940: 7065 6c69 6e65 5f62 7574 746f 6e2c 0a20  peline_button,. 
+0001b950: 2020 2020 2020 2020 2020 2051 742e 4c65             Qt.Le
+0001b960: 6674 4275 7474 6f6e 2c0a 2020 2020 2020  ftButton,.      
+0001b970: 2020 290a 2020 2020 2020 2020 7365 6e64    ).        send
+0001b980: 5f70 6f70 7570 203d 2073 656c 662e 6d61  _popup = self.ma
+0001b990: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
+0001b9a0: 726f 7773 6572 2e73 686f 775f 7365 6c65  rowser.show_sele
+0001b9b0: 6374 696f 6e0a 0a20 2020 2020 2020 2051  ction..        Q
+0001b9c0: 5465 7374 2e71 5761 6974 2835 3030 290a  Test.qWait(500).
+0001b9d0: 0a20 2020 2020 2020 2073 656e 645f 706f  .        send_po
+0001b9e0: 7075 702e 6f6b 5f63 6c69 636b 6564 2829  pup.ok_clicked()
+0001b9f0: 0a0a 2020 2020 2020 2020 2320 4368 6563  ..        # Chec
+0001ba00: 6b69 6e67 2074 6861 7420 7468 6520 6669  king that the fi
+0001ba10: 7273 7420 3220 7363 616e 7320 6861 7665  rst 2 scans have
+0001ba20: 2062 6565 6e20 7365 6e74 2074 6f20 7468   been sent to th
+0001ba30: 650a 2020 2020 2020 2020 2320 7069 7065  e.        # pipe
+0001ba40: 6c69 6e65 206d 616e 6167 6572 0a20 2020  line manager.   
+0001ba50: 2020 2020 2073 6361 6e73 203d 2073 656c       scans = sel
+0001ba60: 662e 6d61 696e 5f77 696e 646f 772e 7069  f.main_window.pi
+0001ba70: 7065 6c69 6e65 5f6d 616e 6167 6572 2e73  peline_manager.s
+0001ba80: 6361 6e5f 6c69 7374 0a20 2020 2020 2020  can_list.       
+0001ba90: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0001baa0: 6c28 6c65 6e28 7363 616e 7329 2c20 3229  l(len(scans), 2)
+0001bab0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0001bac0: 7365 7274 5472 7565 2873 6361 6e31 2069  sertTrue(scan1 i
+0001bad0: 6e20 7363 616e 7329 0a20 2020 2020 2020  n scans).       
+0001bae0: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
+0001baf0: 2873 6361 6e32 2069 6e20 7363 616e 7329  (scan2 in scans)
+0001bb00: 0a0a 2020 2020 2020 2020 2320 4368 6563  ..        # Chec
+0001bb10: 6b69 6e67 2077 6974 6820 7468 6520 7261  king with the ra
+0001bb20: 7069 6420 7365 6172 6368 0a20 2020 2020  pid search.     
+0001bb30: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
+0001bb40: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
+0001bb50: 2e74 6162 6c65 5f64 6174 612e 636c 6561  .table_data.clea
+0001bb60: 7253 656c 6563 7469 6f6e 2829 0a20 2020  rSelection().   
+0001bb70: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
+0001bb80: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
+0001bb90: 6572 2e73 6561 7263 685f 6261 722e 7365  er.search_bar.se
+0001bba0: 7454 6578 7428 2247 3322 290a 0a20 2020  tText("G3")..   
+0001bbb0: 2020 2020 2023 2053 656e 6469 6e67 2074       # Sending t
+0001bbc0: 6865 2073 656c 6563 7469 6f6e 2028 4733  he selection (G3
+0001bbd0: 2073 6361 6e73 290a 2020 2020 2020 2020   scans).        
+0001bbe0: 5154 6573 742e 6d6f 7573 6543 6c69 636b  QTest.mouseClick
+0001bbf0: 280a 2020 2020 2020 2020 2020 2020 7365  (.            se
+0001bc00: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
+0001bc10: 6174 615f 6272 6f77 7365 722e 7365 6e64  ata_browser.send
+0001bc20: 5f64 6f63 756d 656e 7473 5f74 6f5f 7069  _documents_to_pi
+0001bc30: 7065 6c69 6e65 5f62 7574 746f 6e2c 0a20  peline_button,. 
+0001bc40: 2020 2020 2020 2020 2020 2051 742e 4c65             Qt.Le
+0001bc50: 6674 4275 7474 6f6e 2c0a 2020 2020 2020  ftButton,.      
+0001bc60: 2020 290a 2020 2020 2020 2020 7365 6e64    ).        send
+0001bc70: 5f70 6f70 7570 203d 2073 656c 662e 6d61  _popup = self.ma
+0001bc80: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
+0001bc90: 726f 7773 6572 2e73 686f 775f 7365 6c65  rowser.show_sele
+0001bca0: 6374 696f 6e0a 0a20 2020 2020 2020 2051  ction..        Q
+0001bcb0: 5465 7374 2e71 5761 6974 2835 3030 290a  Test.qWait(500).
+0001bcc0: 0a20 2020 2020 2020 2073 656e 645f 706f  .        send_po
+0001bcd0: 7075 702e 6f6b 5f63 6c69 636b 6564 2829  pup.ok_clicked()
+0001bce0: 0a0a 2020 2020 2020 2020 2320 4368 6563  ..        # Chec
+0001bcf0: 6b69 6e67 2074 6861 7420 4733 2073 6361  king that G3 sca
+0001bd00: 6e73 2068 6176 6520 6265 656e 2073 656e  ns have been sen
+0001bd10: 7420 746f 2074 6865 2070 6970 656c 696e  t to the pipelin
+0001bd20: 6520 6d61 6e61 6765 720a 2020 2020 2020  e manager.      
+0001bd30: 2020 7363 616e 7320 3d20 7365 6c66 2e6d    scans = self.m
+0001bd40: 6169 6e5f 7769 6e64 6f77 2e70 6970 656c  ain_window.pipel
+0001bd50: 696e 655f 6d61 6e61 6765 722e 7363 616e  ine_manager.scan
+0001bd60: 5f6c 6973 740a 2020 2020 2020 2020 7365  _list.        se
+0001bd70: 6c66 2e61 7373 6572 7445 7175 616c 286c  lf.assertEqual(l
+0001bd80: 656e 2873 6361 6e73 292c 2032 290a 2020  en(scans), 2).  
+0001bd90: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0001bda0: 7454 7275 6528 0a20 2020 2020 2020 2020  tTrue(.         
+0001bdb0: 2020 2022 6461 7461 2f72 6177 5f64 6174     "data/raw_dat
+0001bdc0: 612f 4775 6572 6265 742d 4336 2d32 3031  a/Guerbet-C6-201
+0001bdd0: 342d 5261 742d 4b35 322d 5475 6265 3237  4-Rat-K52-Tube27
+0001bde0: 220a 2020 2020 2020 2020 2020 2020 222d  ".            "-
+0001bdf0: 3230 3134 2d30 322d 3134 3130 3233 3137  2014-02-14102317
+0001be00: 2d30 342d 4733 5f47 7565 7262 6574 5f4d  -04-G3_Guerbet_M
+0001be10: 4445 4654 2d4d 4445 4654 220a 2020 2020  DEFT-MDEFT".    
+0001be20: 2020 2020 2020 2020 2270 766d 2d30 3030          "pvm-000
+0001be30: 3934 305f 3830 302e 6e69 6922 2069 6e20  940_800.nii" in 
+0001be40: 7363 616e 730a 2020 2020 2020 2020 290a  scans.        ).
+0001be50: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+0001be60: 6572 7454 7275 6528 0a20 2020 2020 2020  ertTrue(.       
+0001be70: 2020 2020 2022 6461 7461 2f72 6177 5f64       "data/raw_d
+0001be80: 6174 612f 4775 6572 6265 742d 4336 2d32  ata/Guerbet-C6-2
+0001be90: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
+0001bea0: 3237 220a 2020 2020 2020 2020 2020 2020  27".            
+0001beb0: 222d 3230 3134 2d30 322d 3134 3130 3233  "-2014-02-141023
+0001bec0: 3137 2d31 302d 4733 5f47 7565 7262 6574  17-10-G3_Guerbet
+0001bed0: 5f4d 4445 4654 2d4d 4445 4654 220a 2020  _MDEFT-MDEFT".  
+0001bee0: 2020 2020 2020 2020 2020 2270 766d 2d30            "pvm-0
+0001bef0: 3030 3934 305f 3830 302e 6e69 6922 2069  00940_800.nii" i
+0001bf00: 6e20 7363 616e 730a 2020 2020 2020 2020  n scans.        
+0001bf10: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
+0001bf20: 7365 745f 7661 6c75 6528 7365 6c66 293a  set_value(self):
+0001bf30: 0a20 2020 2020 2020 2022 2222 5465 7374  .        """Test
+0001bf40: 7320 7468 6520 7661 6c75 6573 206d 6f64  s the values mod
+0001bf50: 6966 6963 6174 696f 6e73 2e0a 0a20 2020  ifications...   
+0001bf60: 2020 2020 2054 6869 7320 7465 7374 2069       This test i
+0001bf70: 7320 7265 6475 6e64 616e 7420 7769 7468  s redundant with
+0001bf80: 2074 6865 2066 6972 7374 2070 6172 7420   the first part 
+0001bf90: 6f66 2074 6573 745f 7265 7365 745f 6365  of test_reset_ce
+0001bfa0: 6c6c 2e0a 2020 2020 2020 2020 2222 220a  ll..        """.
+0001bfb0: 0a20 2020 2020 2020 2070 726f 6a65 6374  .        project
+0001bfc0: 5f38 5f70 6174 6820 3d20 7365 6c66 2e67  _8_path = self.g
+0001bfd0: 6574 5f6e 6577 5f74 6573 745f 7072 6f6a  et_new_test_proj
+0001bfe0: 6563 7428 290a 2020 2020 2020 2020 7365  ect().        se
+0001bff0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e73  lf.main_window.s
+0001c000: 7769 7463 685f 7072 6f6a 6563 7428 7072  witch_project(pr
+0001c010: 6f6a 6563 745f 385f 7061 7468 2c20 2270  oject_8_path, "p
+0001c020: 726f 6a65 6374 5f38 2229 0a0a 2020 2020  roject_8")..    
+0001c030: 2020 2020 2320 5363 616e 206e 616d 6520      # Scan name 
+0001c040: 666f 7220 7468 6520 7365 636f 6e64 2064  for the second d
+0001c050: 6f63 756d 656e 740a 2020 2020 2020 2020  ocument.        
+0001c060: 6974 656d 203d 2073 656c 662e 6d61 696e  item = self.main
+0001c070: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
+0001c080: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
+0001c090: 6974 656d 2831 2c20 3029 0a20 2020 2020  item(1, 0).     
+0001c0a0: 2020 2073 6361 6e5f 6e61 6d65 203d 2069     scan_name = i
+0001c0b0: 7465 6d2e 7465 7874 2829 0a0a 2020 2020  tem.text()..    
+0001c0c0: 2020 2020 2320 5465 7374 2066 6f72 2061      # Test for a
+0001c0d0: 206c 6973 743a 0a20 2020 2020 2020 2023   list:.        #
+0001c0e0: 2056 616c 7565 7320 696e 2074 6865 2064   Values in the d
+0001c0f0: 620a 2020 2020 2020 2020 7661 6c75 6520  b.        value 
+0001c100: 3d20 666c 6f61 7428 0a20 2020 2020 2020  = float(.       
+0001c110: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
+0001c120: 696e 646f 772e 7072 6f6a 6563 742e 7365  indow.project.se
+0001c130: 7373 696f 6e2e 6765 745f 7661 6c75 6528  ssion.get_value(
+0001c140: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001c150: 2043 4f4c 4c45 4354 494f 4e5f 4355 5252   COLLECTION_CURR
+0001c160: 454e 542c 2073 6361 6e5f 6e61 6d65 2c20  ENT, scan_name, 
+0001c170: 2242 616e 6457 6964 7468 220a 2020 2020  "BandWidth".    
+0001c180: 2020 2020 2020 2020 295b 305d 0a20 2020          )[0].   
+0001c190: 2020 2020 2029 0a20 2020 2020 2020 2076       ).        v
+0001c1a0: 616c 7565 5f69 6e69 7469 616c 203d 2066  alue_initial = f
+0001c1b0: 6c6f 6174 280a 2020 2020 2020 2020 2020  loat(.          
+0001c1c0: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
+0001c1d0: 6f77 2e70 726f 6a65 6374 2e73 6573 7369  ow.project.sessi
+0001c1e0: 6f6e 2e67 6574 5f76 616c 7565 280a 2020  on.get_value(.  
+0001c1f0: 2020 2020 2020 2020 2020 2020 2020 434f                CO
+0001c200: 4c4c 4543 5449 4f4e 5f49 4e49 5449 414c  LLECTION_INITIAL
+0001c210: 2c20 7363 616e 5f6e 616d 652c 2022 4261  , scan_name, "Ba
+0001c220: 6e64 5769 6474 6822 0a20 2020 2020 2020  ndWidth".       
+0001c230: 2020 2020 2029 5b30 5d0a 2020 2020 2020       )[0].      
+0001c240: 2020 290a 0a20 2020 2020 2020 2023 2056    )..        # V
+0001c250: 616c 7565 2069 6e20 7468 6520 4461 7461  alue in the Data
+0001c260: 4272 6f77 7365 720a 2020 2020 2020 2020  Browser.        
+0001c270: 6261 6e64 7769 6474 685f 636f 6c75 6d6e  bandwidth_column
+0001c280: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
+0001c290: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+0001c2a0: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
+0001c2b0: 6162 6c65 5f64 6174 612e 6765 745f 7461  able_data.get_ta
+0001c2c0: 675f 636f 6c75 6d6e 0a20 2020 2020 2020  g_column.       
+0001c2d0: 2029 2822 4261 6e64 5769 6474 6822 290a   )("BandWidth").
+0001c2e0: 2020 2020 2020 2020 6974 656d 203d 2073          item = s
+0001c2f0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+0001c300: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
+0001c310: 6c65 5f64 6174 612e 6974 656d 280a 2020  le_data.item(.  
+0001c320: 2020 2020 2020 2020 2020 312c 2062 616e            1, ban
+0001c330: 6477 6964 7468 5f63 6f6c 756d 6e0a 2020  dwidth_column.  
+0001c340: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0001c350: 6461 7461 6272 6f77 7365 7220 3d20 666c  databrowser = fl
+0001c360: 6f61 7428 6974 656d 2e74 6578 7428 295b  oat(item.text()[
+0001c370: 313a 2d31 5d29 0a20 2020 2020 2020 2073  1:-1]).        s
+0001c380: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0001c390: 7661 6c75 652c 2066 6c6f 6174 2835 3030  value, float(500
+0001c3a0: 3030 2929 0a20 2020 2020 2020 2073 656c  00)).        sel
+0001c3b0: 662e 6173 7365 7274 4571 7561 6c28 7661  f.assertEqual(va
+0001c3c0: 6c75 652c 2064 6174 6162 726f 7773 6572  lue, databrowser
+0001c3d0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0001c3e0: 7373 6572 7445 7175 616c 2876 616c 7565  ssertEqual(value
+0001c3f0: 2c20 7661 6c75 655f 696e 6974 6961 6c29  , value_initial)
+0001c400: 0a0a 2020 2020 2020 2020 2320 4368 616e  ..        # Chan
+0001c410: 6765 2074 6865 2076 616c 7565 0a20 2020  ge the value.   
+0001c420: 2020 2020 2069 7465 6d2e 7365 7453 656c       item.setSel
+0001c430: 6563 7465 6428 5472 7565 290a 2020 2020  ected(True).    
+0001c440: 2020 2020 7468 7265 6164 696e 672e 5469      threading.Ti
+0001c450: 6d65 7228 0a20 2020 2020 2020 2020 2020  mer(.           
+0001c460: 2032 2c20 7061 7274 6961 6c28 7365 6c66   2, partial(self
+0001c470: 2e65 6469 745f 6461 7461 6272 6f77 7365  .edit_databrowse
+0001c480: 725f 6c69 7374 2c20 2232 3530 3030 2229  r_list, "25000")
+0001c490: 0a20 2020 2020 2020 2029 2e73 7461 7274  .        ).start
+0001c4a0: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
+0001c4b0: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
+0001c4c0: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
+0001c4d0: 6174 612e 6564 6974 5f74 6162 6c65 5f64  ata.edit_table_d
+0001c4e0: 6174 615f 7661 6c75 6573 2829 0a0a 2020  ata_values()..  
+0001c4f0: 2020 2020 2020 2320 4368 6563 6b20 6966        # Check if
+0001c500: 2076 616c 7565 2077 6173 2063 6861 6e67   value was chang
+0001c510: 6564 2069 6e20 6462 2061 6e64 2044 6174  ed in db and Dat
+0001c520: 6142 726f 7773 6572 0a20 2020 2020 2020  aBrowser.       
+0001c530: 2076 616c 7565 203d 2066 6c6f 6174 280a   value = float(.
+0001c540: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0001c550: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 726f  .main_window.pro
+0001c560: 6a65 6374 2e73 6573 7369 6f6e 2e67 6574  ject.session.get
+0001c570: 5f76 616c 7565 280a 2020 2020 2020 2020  _value(.        
+0001c580: 2020 2020 2020 2020 434f 4c4c 4543 5449          COLLECTI
+0001c590: 4f4e 5f43 5552 5245 4e54 2c20 7363 616e  ON_CURRENT, scan
+0001c5a0: 5f6e 616d 652c 2022 4261 6e64 5769 6474  _name, "BandWidt
+0001c5b0: 6822 0a20 2020 2020 2020 2020 2020 2029  h".            )
+0001c5c0: 5b30 5d0a 2020 2020 2020 2020 290a 2020  [0].        ).  
+0001c5d0: 2020 2020 2020 7661 6c75 655f 696e 6974        value_init
+0001c5e0: 6961 6c20 3d20 666c 6f61 7428 0a20 2020  ial = float(.   
+0001c5f0: 2020 2020 2020 2020 2073 656c 662e 6d61           self.ma
+0001c600: 696e 5f77 696e 646f 772e 7072 6f6a 6563  in_window.projec
+0001c610: 742e 7365 7373 696f 6e2e 6765 745f 7661  t.session.get_va
+0001c620: 6c75 6528 0a20 2020 2020 2020 2020 2020  lue(.           
+0001c630: 2020 2020 2043 4f4c 4c45 4354 494f 4e5f       COLLECTION_
+0001c640: 494e 4954 4941 4c2c 2073 6361 6e5f 6e61  INITIAL, scan_na
+0001c650: 6d65 2c20 2242 616e 6457 6964 7468 220a  me, "BandWidth".
+0001c660: 2020 2020 2020 2020 2020 2020 295b 305d              )[0]
+0001c670: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+0001c680: 2020 2069 7465 6d20 3d20 7365 6c66 2e6d     item = self.m
+0001c690: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
+0001c6a0: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
+0001c6b0: 7461 2e69 7465 6d28 0a20 2020 2020 2020  ta.item(.       
+0001c6c0: 2020 2020 2031 2c20 6261 6e64 7769 6474       1, bandwidt
+0001c6d0: 685f 636f 6c75 6d6e 0a20 2020 2020 2020  h_column.       
+0001c6e0: 2029 0a20 2020 2020 2020 2064 6174 6162   ).        datab
+0001c6f0: 726f 7773 6572 203d 2066 6c6f 6174 2869  rowser = float(i
+0001c700: 7465 6d2e 7465 7874 2829 5b31 3a2d 315d  tem.text()[1:-1]
+0001c710: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0001c720: 7373 6572 7445 7175 616c 2876 616c 7565  ssertEqual(value
+0001c730: 2c20 666c 6f61 7428 3235 3030 3029 290a  , float(25000)).
+0001c740: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+0001c750: 6572 7445 7175 616c 2876 616c 7565 2c20  ertEqual(value, 
+0001c760: 6461 7461 6272 6f77 7365 7229 0a20 2020  databrowser).   
+0001c770: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0001c780: 4571 7561 6c28 7661 6c75 655f 696e 6974  Equal(value_init
+0001c790: 6961 6c2c 2066 6c6f 6174 2835 3030 3030  ial, float(50000
+0001c7a0: 2929 0a20 2020 2020 2020 2069 7465 6d2e  )).        item.
+0001c7b0: 7365 7453 656c 6563 7465 6428 4661 6c73  setSelected(Fals
+0001c7c0: 6529 0a0a 2020 2020 2020 2020 2320 5465  e)..        # Te
+0001c7d0: 7374 2066 6f72 2061 2073 7472 696e 673a  st for a string:
+0001c7e0: 0a20 2020 2020 2020 2023 2056 616c 7565  .        # Value
+0001c7f0: 7320 696e 2074 6865 2064 620a 2020 2020  s in the db.    
+0001c800: 2020 2020 7661 6c75 6520 3d20 7365 6c66      value = self
+0001c810: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 726f  .main_window.pro
+0001c820: 6a65 6374 2e73 6573 7369 6f6e 2e67 6574  ject.session.get
+0001c830: 5f76 616c 7565 280a 2020 2020 2020 2020  _value(.        
+0001c840: 2020 2020 434f 4c4c 4543 5449 4f4e 5f43      COLLECTION_C
+0001c850: 5552 5245 4e54 2c20 7363 616e 5f6e 616d  URRENT, scan_nam
+0001c860: 652c 2022 5479 7065 220a 2020 2020 2020  e, "Type".      
+0001c870: 2020 290a 2020 2020 2020 2020 7661 6c75    ).        valu
+0001c880: 655f 696e 6974 6961 6c20 3d20 7365 6c66  e_initial = self
+0001c890: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 726f  .main_window.pro
+0001c8a0: 6a65 6374 2e73 6573 7369 6f6e 2e67 6574  ject.session.get
+0001c8b0: 5f76 616c 7565 280a 2020 2020 2020 2020  _value(.        
+0001c8c0: 2020 2020 434f 4c4c 4543 5449 4f4e 5f49      COLLECTION_I
+0001c8d0: 4e49 5449 414c 2c20 7363 616e 5f6e 616d  NITIAL, scan_nam
+0001c8e0: 652c 2022 5479 7065 220a 2020 2020 2020  e, "Type".      
+0001c8f0: 2020 290a 0a20 2020 2020 2020 2023 2056    )..        # V
+0001c900: 616c 7565 2069 6e20 7468 6520 4461 7461  alue in the Data
+0001c910: 4272 6f77 7365 720a 2020 2020 2020 2020  Browser.        
+0001c920: 7479 7065 5f63 6f6c 756d 6e20 3d20 280a  type_column = (.
+0001c930: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0001c940: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
+0001c950: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
+0001c960: 6461 7461 2e67 6574 5f74 6167 5f63 6f6c  data.get_tag_col
+0001c970: 756d 6e0a 2020 2020 2020 2020 2928 2254  umn.        )("T
+0001c980: 7970 6522 290a 2020 2020 2020 2020 6974  ype").        it
+0001c990: 656d 203d 2073 656c 662e 6d61 696e 5f77  em = self.main_w
+0001c9a0: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
+0001c9b0: 6572 2e74 6162 6c65 5f64 6174 612e 6974  er.table_data.it
+0001c9c0: 656d 2831 2c20 7479 7065 5f63 6f6c 756d  em(1, type_colum
+0001c9d0: 6e29 0a20 2020 2020 2020 2064 6174 6162  n).        datab
+0001c9e0: 726f 7773 6572 203d 2069 7465 6d2e 7465  rowser = item.te
+0001c9f0: 7874 2829 0a0a 2020 2020 2020 2020 2320  xt()..        # 
+0001ca00: 4368 6563 6b20 6571 7561 6c69 7479 2062  Check equality b
+0001ca10: 6574 7765 656e 2044 6174 6142 726f 7773  etween DataBrows
+0001ca20: 6572 2061 6e64 2064 620a 2020 2020 2020  er and db.      
+0001ca30: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0001ca40: 616c 2876 616c 7565 2c20 2253 6361 6e22  al(value, "Scan"
+0001ca50: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0001ca60: 7373 6572 7445 7175 616c 2876 616c 7565  ssertEqual(value
+0001ca70: 2c20 6461 7461 6272 6f77 7365 7229 0a20  , databrowser). 
+0001ca80: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0001ca90: 7274 4571 7561 6c28 7661 6c75 652c 2076  rtEqual(value, v
+0001caa0: 616c 7565 5f69 6e69 7469 616c 290a 0a20  alue_initial).. 
+0001cab0: 2020 2020 2020 2023 2043 6861 6e67 6520         # Change 
+0001cac0: 7468 6520 7661 6c75 650a 2020 2020 2020  the value.      
+0001cad0: 2020 6974 656d 2e73 6574 5365 6c65 6374    item.setSelect
+0001cae0: 6564 2854 7275 6529 0a20 2020 2020 2020  ed(True).       
+0001caf0: 2069 7465 6d2e 7365 7454 6578 7428 2254   item.setText("T
+0001cb00: 6573 7422 290a 2020 2020 2020 2020 6974  est").        it
+0001cb10: 656d 2e73 6574 5365 6c65 6374 6564 2846  em.setSelected(F
+0001cb20: 616c 7365 290a 0a20 2020 2020 2020 2023  alse)..        #
+0001cb30: 2043 6865 636b 2069 6620 7661 6c75 6520   Check if value 
+0001cb40: 696e 2044 6174 6142 726f 7773 6572 2061  in DataBrowser a
+0001cb50: 6e64 2064 6220 6173 2062 6565 6e20 6368  nd db as been ch
+0001cb60: 616e 6765 640a 2020 2020 2020 2020 7661  anged.        va
+0001cb70: 6c75 6520 3d20 7365 6c66 2e6d 6169 6e5f  lue = self.main_
+0001cb80: 7769 6e64 6f77 2e70 726f 6a65 6374 2e73  window.project.s
+0001cb90: 6573 7369 6f6e 2e67 6574 5f76 616c 7565  ession.get_value
+0001cba0: 280a 2020 2020 2020 2020 2020 2020 434f  (.            CO
+0001cbb0: 4c4c 4543 5449 4f4e 5f43 5552 5245 4e54  LLECTION_CURRENT
+0001cbc0: 2c20 7363 616e 5f6e 616d 652c 2022 5479  , scan_name, "Ty
+0001cbd0: 7065 220a 2020 2020 2020 2020 290a 2020  pe".        ).  
+0001cbe0: 2020 2020 2020 7661 6c75 655f 696e 6974        value_init
+0001cbf0: 6961 6c20 3d20 7365 6c66 2e6d 6169 6e5f  ial = self.main_
+0001cc00: 7769 6e64 6f77 2e70 726f 6a65 6374 2e73  window.project.s
+0001cc10: 6573 7369 6f6e 2e67 6574 5f76 616c 7565  ession.get_value
+0001cc20: 280a 2020 2020 2020 2020 2020 2020 434f  (.            CO
+0001cc30: 4c4c 4543 5449 4f4e 5f49 4e49 5449 414c  LLECTION_INITIAL
+0001cc40: 2c20 7363 616e 5f6e 616d 652c 2022 5479  , scan_name, "Ty
+0001cc50: 7065 220a 2020 2020 2020 2020 290a 2020  pe".        ).  
+0001cc60: 2020 2020 2020 6974 656d 203d 2073 656c        item = sel
+0001cc70: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
+0001cc80: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
+0001cc90: 5f64 6174 612e 6974 656d 2831 2c20 7479  _data.item(1, ty
+0001cca0: 7065 5f63 6f6c 756d 6e29 0a20 2020 2020  pe_column).     
+0001ccb0: 2020 2064 6174 6162 726f 7773 6572 203d     databrowser =
+0001ccc0: 2069 7465 6d2e 7465 7874 2829 0a20 2020   item.text().   
+0001ccd0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0001cce0: 4571 7561 6c28 7661 6c75 652c 2022 5465  Equal(value, "Te
+0001ccf0: 7374 2229 0a20 2020 2020 2020 2073 656c  st").        sel
+0001cd00: 662e 6173 7365 7274 4571 7561 6c28 7661  f.assertEqual(va
+0001cd10: 6c75 652c 2064 6174 6162 726f 7773 6572  lue, databrowser
+0001cd20: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0001cd30: 7373 6572 7445 7175 616c 2876 616c 7565  ssertEqual(value
+0001cd40: 5f69 6e69 7469 616c 2c20 2253 6361 6e22  _initial, "Scan"
+0001cd50: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
+0001cd60: 7368 6f77 5f62 7269 636b 5f68 6973 746f  show_brick_histo
+0001cd70: 7279 2873 656c 6629 3a0a 2020 2020 2020  ry(self):.      
+0001cd80: 2020 2222 224f 7065 6e73 2074 6865 2068    """Opens the h
+0001cd90: 6973 746f 7279 2070 6f70 2d75 7020 666f  istory pop-up fo
+0001cda0: 7220 7363 616e 7320 7769 7468 2068 6973  r scans with his
+0001cdb0: 746f 7279 2072 656c 6174 6564 2074 6f0a  tory related to.
+0001cdc0: 2020 2020 2020 2020 7374 616e 6461 7264          standard
+0001cdd0: 2062 7269 636b 7320 616e 6420 6272 6963   bricks and bric
+0001cde0: 6b73 2063 6f6e 7461 696e 6564 2062 7920  ks contained by 
+0001cdf0: 6120 7375 622d 7069 7065 6c69 6e65 2e0a  a sub-pipeline..
+0001ce00: 0a20 2020 2020 2020 202d 2054 6573 7473  .        - Tests
+0001ce10: 0a20 2020 2020 2020 2020 2020 202d 2054  .            - T
+0001ce20: 6162 6c65 4461 7461 4272 6f77 7365 722e  ableDataBrowser.
+0001ce30: 7368 6f77 5f62 7269 636b 5f68 6973 746f  show_brick_histo
+0001ce40: 7279 0a20 2020 2020 2020 2020 2020 202d  ry.            -
+0001ce50: 2050 6f70 5570 5368 6f77 4869 7374 6f72   PopUpShowHistor
+0001ce60: 790a 2020 2020 2020 2020 2222 220a 0a20  y.        """.. 
+0001ce70: 2020 2020 2020 2023 2043 7265 6174 6573         # Creates
+0001ce80: 2061 206e 6577 2070 726f 6a65 6374 2066   a new project f
+0001ce90: 6f6c 6465 7220 616e 6420 7377 6974 6368  older and switch
+0001cea0: 6573 2074 6f20 6974 0a20 2020 2020 2020  es to it.       
+0001ceb0: 206e 6577 5f70 726f 6a65 6374 5f70 6174   new_project_pat
+0001cec0: 6820 3d20 7365 6c66 2e67 6574 5f6e 6577  h = self.get_new
+0001ced0: 5f74 6573 745f 7072 6f6a 6563 7428 6c69  _test_project(li
+0001cee0: 6768 743d 5472 7565 290a 2020 2020 2020  ght=True).      
+0001cef0: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
+0001cf00: 6f77 2e73 7769 7463 685f 7072 6f6a 6563  ow.switch_projec
+0001cf10: 7428 6e65 775f 7072 6f6a 6563 745f 7061  t(new_project_pa
+0001cf20: 7468 2c20 226c 6967 6874 5f74 6573 745f  th, "light_test_
+0001cf30: 7072 6f6a 6563 7422 290a 0a20 2020 2020  project")..     
+0001cf40: 2020 2023 2053 6574 7320 7368 6f72 7463     # Sets shortc
+0001cf50: 7574 7320 666f 7220 6f62 6a65 6374 7320  uts for objects 
+0001cf60: 7468 6174 2061 7265 206f 6674 656e 2075  that are often u
+0001cf70: 7365 640a 2020 2020 2020 2020 6461 7461  sed.        data
+0001cf80: 5f62 726f 7773 6572 203d 2073 656c 662e  _browser = self.
+0001cf90: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
+0001cfa0: 5f62 726f 7773 6572 0a20 2020 2020 2020  _browser.       
+0001cfb0: 2073 6573 7369 6f6e 203d 2073 656c 662e   session = self.
+0001cfc0: 6d61 696e 5f77 696e 646f 772e 7072 6f6a  main_window.proj
+0001cfd0: 6563 742e 7365 7373 696f 6e0a 0a20 2020  ect.session..   
+0001cfe0: 2020 2020 2023 2047 6574 7320 7468 6520       # Gets the 
+0001cff0: 696e 7075 7420 6669 6c65 2070 6174 6820  input file path 
+0001d000: 6f66 2074 6865 2069 6e70 7574 2073 6361  of the input sca
+0001d010: 6e0a 2020 2020 2020 2020 494e 5055 545f  n.        INPUT_
+0001d020: 5343 414e 203d 2073 6573 7369 6f6e 2e67  SCAN = session.g
+0001d030: 6574 5f64 6f63 756d 656e 7473 2843 4f4c  et_documents(COL
+0001d040: 4c45 4354 494f 4e5f 4355 5252 454e 5429  LECTION_CURRENT)
+0001d050: 5b30 5d5b 2246 696c 654e 616d 6522 5d0a  [0]["FileName"].
+0001d060: 0a20 2020 2020 2020 2023 204f 7065 6e73  .        # Opens
+0001d070: 2074 6865 2068 6973 746f 7279 2070 6f70   the history pop
+0001d080: 2d75 7020 666f 7220 7468 6520 7363 616e  -up for the scan
+0001d090: 2072 656c 6174 6564 2074 6f20 2773 6d6f   related to 'smo
+0001d0a0: 6f74 685f 3127 0a20 2020 2020 2020 2068  oth_1'.        h
+0001d0b0: 6973 745f 696e 6465 7820 3d20 6461 7461  ist_index = data
+0001d0c0: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
+0001d0d0: 6174 612e 6765 745f 7461 675f 636f 6c75  ata.get_tag_colu
+0001d0e0: 6d6e 2822 4869 7374 6f72 7922 290a 2020  mn("History").  
+0001d0f0: 2020 2020 2020 6869 7374 5f62 7574 746f        hist_butto
+0001d100: 6e20 3d20 6461 7461 5f62 726f 7773 6572  n = data_browser
+0001d110: 2e74 6162 6c65 5f64 6174 612e 6365 6c6c  .table_data.cell
+0001d120: 5769 6467 6574 280a 2020 2020 2020 2020  Widget(.        
+0001d130: 2020 2020 302c 2068 6973 745f 696e 6465      0, hist_inde
+0001d140: 780a 2020 2020 2020 2020 292e 6368 696c  x.        ).chil
+0001d150: 6472 656e 2829 5b2d 315d 0a20 2020 2020  dren()[-1].     
+0001d160: 2020 2068 6973 745f 6275 7474 6f6e 2e63     hist_button.c
+0001d170: 6c69 636b 6564 2e65 6d69 7428 2920 2023  licked.emit()  #
+0001d180: 204f 7065 6e73 2074 6865 2068 6973 746f   Opens the histo
+0001d190: 7279 2077 696e 646f 770a 0a20 2020 2020  ry window..     
+0001d1a0: 2020 2023 2041 7373 6572 7473 2074 6861     # Asserts tha
+0001d1b0: 7420 6120 6869 7374 6f72 7920 706f 702d  t a history pop-
+0001d1c0: 7570 2077 6173 2063 7265 6174 6564 0a20  up was created. 
+0001d1d0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0001d1e0: 7274 5472 7565 280a 2020 2020 2020 2020  rtTrue(.        
+0001d1f0: 2020 2020 6861 7361 7474 7228 6461 7461      hasattr(data
+0001d200: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
+0001d210: 6174 612c 2022 6272 6963 6b5f 6869 7374  ata, "brick_hist
+0001d220: 6f72 795f 706f 7075 7022 290a 2020 2020  ory_popup").    
+0001d230: 2020 2020 290a 0a20 2020 2020 2020 2023      )..        #
+0001d240: 2043 6c69 636b 7320 6f6e 2074 6865 2069   Clicks on the i
+0001d250: 6e70 7574 2062 7574 746f 6e20 6469 7370  nput button disp
+0001d260: 6c61 7965 6420 6f6e 2074 6865 2068 6973  layed on the his
+0001d270: 746f 7279 2070 6f70 2d75 702e 0a20 2020  tory pop-up..   
+0001d280: 2020 2020 2023 2054 6869 7320 7368 6f77       # This show
+0001d290: 7320 7468 6520 636f 7272 6573 706f 6e64  s the correspond
+0001d2a0: 696e 6720 7363 616e 2069 6e20 7468 6520  ing scan in the 
+0001d2b0: 6461 7461 2062 726f 7773 6572 0a20 2020  data browser.   
+0001d2c0: 2020 2020 2069 6e70 7574 5f62 7574 746f       input_butto
+0001d2d0: 6e20 3d20 280a 2020 2020 2020 2020 2020  n = (.          
+0001d2e0: 2020 6461 7461 5f62 726f 7773 6572 2e74    data_browser.t
+0001d2f0: 6162 6c65 5f64 6174 612e 6272 6963 6b5f  able_data.brick_
+0001d300: 6869 7374 6f72 795f 706f 7075 702e 7461  history_popup.ta
+0001d310: 626c 652e 6365 6c6c 5769 6467 6574 280a  ble.cellWidget(.
+0001d320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d330: 302c 2038 0a20 2020 2020 2020 2020 2020  0, 8.           
+0001d340: 2029 2e63 6869 6c64 7265 6e28 295b 2d31   ).children()[-1
+0001d350: 5d0a 2020 2020 2020 2020 290a 0a20 2020  ].        )..   
+0001d360: 2020 2020 2069 6e70 7574 5f62 7574 746f       input_butto
+0001d370: 6e2e 636c 6963 6b65 642e 656d 6974 2829  n.clicked.emit()
+0001d380: 2020 2320 436c 6963 6b73 206f 6e20 7468    # Clicks on th
+0001d390: 6520 696e 7075 7420 6275 7474 6f6e 0a0a  e input button..
+0001d3a0: 2020 2020 2020 2020 2320 4173 7365 7274          # Assert
+0001d3b0: 7320 7468 6174 2027 494e 5055 545f 5343  s that 'INPUT_SC
+0001d3c0: 414e 2720 6869 7374 6f72 7920 706f 702d  AN' history pop-
+0001d3d0: 7570 2077 6173 2063 7265 6174 6564 0a20  up was created. 
+0001d3e0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0001d3f0: 7274 4e6f 7445 7175 616c 2864 6174 615f  rtNotEqual(data_
+0001d400: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
+0001d410: 7461 2e73 656c 6563 7465 6449 7465 6d73  ta.selectedItems
+0001d420: 2829 2c20 3029 0a20 2020 2020 2020 2073  (), 0).        s
+0001d430: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0001d440: 0a20 2020 2020 2020 2020 2020 2064 6174  .            dat
+0001d450: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
+0001d460: 6461 7461 2e73 656c 6563 7465 6449 7465  data.selectedIte
+0001d470: 6d73 2829 5b30 5d2e 7465 7874 2829 2c20  ms()[0].text(), 
+0001d480: 494e 5055 545f 5343 414e 0a20 2020 2020  INPUT_SCAN.     
+0001d490: 2020 2029 0a0a 2020 2020 2020 2020 2320     )..        # 
+0001d4a0: 4f70 656e 7320 7468 6520 6869 7374 6f72  Opens the histor
+0001d4b0: 7920 706f 702d 7570 2066 6f72 2074 6865  y pop-up for the
+0001d4c0: 2073 6361 6e20 7265 6c61 7465 6420 746f   scan related to
+0001d4d0: 2027 7175 6164 5f73 6d6f 6f74 685f 3127   'quad_smooth_1'
+0001d4e0: 0a20 2020 2020 2020 2068 6973 745f 6275  .        hist_bu
+0001d4f0: 7474 6f6e 203d 2064 6174 615f 6272 6f77  tton = data_brow
+0001d500: 7365 722e 7461 626c 655f 6461 7461 2e63  ser.table_data.c
+0001d510: 656c 6c57 6964 6765 7428 0a20 2020 2020  ellWidget(.     
+0001d520: 2020 2020 2020 2031 2c20 6869 7374 5f69         1, hist_i
+0001d530: 6e64 6578 0a20 2020 2020 2020 2029 2e63  ndex.        ).c
+0001d540: 6869 6c64 7265 6e28 295b 2d31 5d0a 0a20  hildren()[-1].. 
+0001d550: 2020 2020 2020 2068 6973 745f 6275 7474         hist_butt
+0001d560: 6f6e 2e63 6c69 636b 6564 2e65 6d69 7428  on.clicked.emit(
+0001d570: 2920 2023 204f 7065 6e73 2074 6865 2068  )  # Opens the h
+0001d580: 6973 746f 7279 2077 696e 646f 770a 2020  istory window.  
+0001d590: 2020 2020 2020 6869 7374 5f62 7574 746f        hist_butto
+0001d5a0: 6e2e 636c 6f73 6528 290a 0a20 2020 2064  n.close()..    d
+0001d5b0: 6566 2074 6573 745f 736f 7274 2873 656c  ef test_sort(sel
+0001d5c0: 6629 3a0a 2020 2020 2020 2020 2222 2254  f):.        """T
+0001d5d0: 6573 7473 2074 6865 2073 6f72 7469 6e67  ests the sorting
+0001d5e0: 2069 6e20 7468 6520 4461 7461 4272 6f77   in the DataBrow
+0001d5f0: 7365 722e 2222 220a 0a20 2020 2020 2020  ser."""..       
+0001d600: 2070 726f 6a65 6374 5f38 5f70 6174 6820   project_8_path 
+0001d610: 3d20 7365 6c66 2e67 6574 5f6e 6577 5f74  = self.get_new_t
+0001d620: 6573 745f 7072 6f6a 6563 7428 290a 2020  est_project().  
+0001d630: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
+0001d640: 7769 6e64 6f77 2e73 7769 7463 685f 7072  window.switch_pr
+0001d650: 6f6a 6563 7428 7072 6f6a 6563 745f 385f  oject(project_8_
+0001d660: 7061 7468 2c20 2270 726f 6a65 6374 5f38  path, "project_8
+0001d670: 2229 0a0a 2020 2020 2020 2020 6d69 7865  ")..        mixe
+0001d680: 645f 6261 6e64 7769 6474 6873 203d 205b  d_bandwidths = [
+0001d690: 5d0a 0a20 2020 2020 2020 2066 6f72 2072  ]..        for r
+0001d6a0: 6f77 2069 6e20 7261 6e67 6528 0a20 2020  ow in range(.   
+0001d6b0: 2020 2020 2020 2020 2030 2c20 7365 6c66           0, self
+0001d6c0: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
+0001d6d0: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
+0001d6e0: 6461 7461 2e72 6f77 436f 756e 7428 290a  data.rowCount().
+0001d6f0: 2020 2020 2020 2020 293a 0a20 2020 2020          ):.     
+0001d700: 2020 2020 2020 2062 616e 6477 6964 7468         bandwidth
+0001d710: 5f63 6f6c 756d 6e20 3d20 280a 2020 2020  _column = (.    
+0001d720: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0001d730: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
+0001d740: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
+0001d750: 6461 7461 2e67 6574 5f74 6167 5f63 6f6c  data.get_tag_col
+0001d760: 756d 6e0a 2020 2020 2020 2020 2020 2020  umn.            
+0001d770: 2928 2242 616e 6457 6964 7468 2229 0a20  )("BandWidth"). 
+0001d780: 2020 2020 2020 2020 2020 2069 7465 6d20             item 
+0001d790: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
+0001d7a0: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
+0001d7b0: 7461 626c 655f 6461 7461 2e69 7465 6d28  table_data.item(
+0001d7c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d7d0: 2072 6f77 2c20 6261 6e64 7769 6474 685f   row, bandwidth_
+0001d7e0: 636f 6c75 6d6e 0a20 2020 2020 2020 2020  column.         
+0001d7f0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+0001d800: 2073 6361 6e5f 6e61 6d65 203d 2069 7465   scan_name = ite
+0001d810: 6d2e 7465 7874 2829 0a0a 2020 2020 2020  m.text()..      
+0001d820: 2020 2020 2020 6966 206e 6f74 2073 656c        if not sel
+0001d830: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
+0001d840: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
+0001d850: 5f64 6174 612e 6973 526f 7748 6964 6465  _data.isRowHidde
+0001d860: 6e28 726f 7729 3a0a 2020 2020 2020 2020  n(row):.        
+0001d870: 2020 2020 2020 2020 6d69 7865 645f 6261          mixed_ba
+0001d880: 6e64 7769 6474 6873 2e61 7070 656e 6428  ndwidths.append(
+0001d890: 7363 616e 5f6e 616d 6529 0a0a 2020 2020  scan_name)..    
+0001d8a0: 2020 2020 280a 2020 2020 2020 2020 2020      (.          
+0001d8b0: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
+0001d8c0: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
+0001d8d0: 7461 626c 655f 6461 7461 2e68 6f72 697a  table_data.horiz
+0001d8e0: 6f6e 7461 6c48 6561 6465 720a 2020 2020  ontalHeader.    
+0001d8f0: 2020 2020 2928 292e 7365 7453 6f72 7449      )().setSortI
+0001d900: 6e64 6963 6174 6f72 2862 616e 6477 6964  ndicator(bandwid
+0001d910: 7468 5f63 6f6c 756d 6e2c 2030 290a 2020  th_column, 0).  
+0001d920: 2020 2020 2020 7570 5f62 616e 6477 6964        up_bandwid
+0001d930: 7468 7320 3d20 5b5d 0a0a 2020 2020 2020  ths = []..      
+0001d940: 2020 666f 7220 726f 7720 696e 2072 616e    for row in ran
+0001d950: 6765 280a 2020 2020 2020 2020 2020 2020  ge(.            
+0001d960: 302c 2073 656c 662e 6d61 696e 5f77 696e  0, self.main_win
+0001d970: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
+0001d980: 2e74 6162 6c65 5f64 6174 612e 726f 7743  .table_data.rowC
+0001d990: 6f75 6e74 2829 0a20 2020 2020 2020 2029  ount().        )
+0001d9a0: 3a0a 2020 2020 2020 2020 2020 2020 6261  :.            ba
+0001d9b0: 6e64 7769 6474 685f 636f 6c75 6d6e 203d  ndwidth_column =
+0001d9c0: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
+0001d9d0: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
+0001d9e0: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
+0001d9f0: 2e74 6162 6c65 5f64 6174 612e 6765 745f  .table_data.get_
+0001da00: 7461 675f 636f 6c75 6d6e 0a20 2020 2020  tag_column.     
+0001da10: 2020 2020 2020 2029 2822 4261 6e64 5769         )("BandWi
+0001da20: 6474 6822 290a 2020 2020 2020 2020 2020  dth").          
+0001da30: 2020 6974 656d 203d 2073 656c 662e 6d61    item = self.ma
+0001da40: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
+0001da50: 726f 7773 6572 2e74 6162 6c65 5f64 6174  rowser.table_dat
+0001da60: 612e 6974 656d 280a 2020 2020 2020 2020  a.item(.        
+0001da70: 2020 2020 2020 2020 726f 772c 2062 616e          row, ban
+0001da80: 6477 6964 7468 5f63 6f6c 756d 6e0a 2020  dwidth_column.  
+0001da90: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+0001daa0: 2020 2020 2020 2020 7363 616e 5f6e 616d          scan_nam
+0001dab0: 6520 3d20 6974 656d 2e74 6578 7428 290a  e = item.text().
+0001dac0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0001dad0: 6e6f 7420 7365 6c66 2e6d 6169 6e5f 7769  not self.main_wi
+0001dae0: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
+0001daf0: 722e 7461 626c 655f 6461 7461 2e69 7352  r.table_data.isR
+0001db00: 6f77 4869 6464 656e 2872 6f77 293a 0a20  owHidden(row):. 
+0001db10: 2020 2020 2020 2020 2020 2020 2020 2075                 u
+0001db20: 705f 6261 6e64 7769 6474 6873 2e61 7070  p_bandwidths.app
+0001db30: 656e 6428 7363 616e 5f6e 616d 6529 0a0a  end(scan_name)..
+0001db40: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+0001db50: 6572 744e 6f74 4571 7561 6c28 6d69 7865  ertNotEqual(mixe
+0001db60: 645f 6261 6e64 7769 6474 6873 2c20 7570  d_bandwidths, up
+0001db70: 5f62 616e 6477 6964 7468 7329 0a20 2020  _bandwidths).   
+0001db80: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0001db90: 4571 7561 6c28 736f 7274 6564 286d 6978  Equal(sorted(mix
+0001dba0: 6564 5f62 616e 6477 6964 7468 7329 2c20  ed_bandwidths), 
+0001dbb0: 7570 5f62 616e 6477 6964 7468 7329 0a0a  up_bandwidths)..
+0001dbc0: 2020 2020 2020 2020 280a 2020 2020 2020          (.      
+0001dbd0: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
+0001dbe0: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
+0001dbf0: 7365 722e 7461 626c 655f 6461 7461 2e68  ser.table_data.h
+0001dc00: 6f72 697a 6f6e 7461 6c48 6561 6465 720a  orizontalHeader.
+0001dc10: 2020 2020 2020 2020 2928 292e 7365 7453          )().setS
+0001dc20: 6f72 7449 6e64 6963 6174 6f72 2862 616e  ortIndicator(ban
+0001dc30: 6477 6964 7468 5f63 6f6c 756d 6e2c 2031  dwidth_column, 1
+0001dc40: 290a 2020 2020 2020 2020 646f 776e 5f62  ).        down_b
+0001dc50: 616e 6477 6964 7468 7320 3d20 5b5d 0a0a  andwidths = []..
+0001dc60: 2020 2020 2020 2020 666f 7220 726f 7720          for row 
+0001dc70: 696e 2072 616e 6765 280a 2020 2020 2020  in range(.      
+0001dc80: 2020 2020 2020 302c 2073 656c 662e 6d61        0, self.ma
+0001dc90: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
+0001dca0: 726f 7773 6572 2e74 6162 6c65 5f64 6174  rowser.table_dat
+0001dcb0: 612e 726f 7743 6f75 6e74 2829 0a20 2020  a.rowCount().   
+0001dcc0: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
+0001dcd0: 2020 2020 6261 6e64 7769 6474 685f 636f      bandwidth_co
+0001dce0: 6c75 6d6e 203d 2028 0a20 2020 2020 2020  lumn = (.       
+0001dcf0: 2020 2020 2020 2020 2073 656c 662e 6d61           self.ma
+0001dd00: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
+0001dd10: 726f 7773 6572 2e74 6162 6c65 5f64 6174  rowser.table_dat
+0001dd20: 612e 6765 745f 7461 675f 636f 6c75 6d6e  a.get_tag_column
+0001dd30: 0a20 2020 2020 2020 2020 2020 2029 2822  .            )("
+0001dd40: 4261 6e64 5769 6474 6822 290a 2020 2020  BandWidth").    
+0001dd50: 2020 2020 2020 2020 6974 656d 203d 2073          item = s
+0001dd60: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+0001dd70: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
+0001dd80: 6c65 5f64 6174 612e 6974 656d 280a 2020  le_data.item(.  
+0001dd90: 2020 2020 2020 2020 2020 2020 2020 726f                ro
+0001dda0: 772c 2062 616e 6477 6964 7468 5f63 6f6c  w, bandwidth_col
+0001ddb0: 756d 6e0a 2020 2020 2020 2020 2020 2020  umn.            
+0001ddc0: 290a 2020 2020 2020 2020 2020 2020 7363  ).            sc
+0001ddd0: 616e 5f6e 616d 6520 3d20 6974 656d 2e74  an_name = item.t
+0001dde0: 6578 7428 290a 0a20 2020 2020 2020 2020  ext()..         
+0001ddf0: 2020 2069 6620 6e6f 7420 7365 6c66 2e6d     if not self.m
+0001de00: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
+0001de10: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
+0001de20: 7461 2e69 7352 6f77 4869 6464 656e 2872  ta.isRowHidden(r
+0001de30: 6f77 293a 0a20 2020 2020 2020 2020 2020  ow):.           
+0001de40: 2020 2020 2064 6f77 6e5f 6261 6e64 7769       down_bandwi
+0001de50: 6474 6873 2e61 7070 656e 6428 7363 616e  dths.append(scan
+0001de60: 5f6e 616d 6529 0a0a 2020 2020 2020 2020  _name)..        
+0001de70: 7365 6c66 2e61 7373 6572 744e 6f74 4571  self.assertNotEq
+0001de80: 7561 6c28 6d69 7865 645f 6261 6e64 7769  ual(mixed_bandwi
+0001de90: 6474 6873 2c20 646f 776e 5f62 616e 6477  dths, down_bandw
+0001dea0: 6964 7468 7329 0a20 2020 2020 2020 2073  idths).        s
+0001deb0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0001dec0: 0a20 2020 2020 2020 2020 2020 2073 6f72  .            sor
+0001ded0: 7465 6428 6d69 7865 645f 6261 6e64 7769  ted(mixed_bandwi
+0001dee0: 6474 6873 2c20 7265 7665 7273 653d 5472  dths, reverse=Tr
+0001def0: 7565 292c 2064 6f77 6e5f 6261 6e64 7769  ue), down_bandwi
+0001df00: 6474 6873 0a20 2020 2020 2020 2029 0a0a  dths.        )..
+0001df10: 2020 2020 6465 6620 7465 7374 5f74 6162      def test_tab
+0001df20: 6c65 5f64 6174 615f 6164 645f 636f 6c75  le_data_add_colu
+0001df30: 6d6e 7328 7365 6c66 293a 0a20 2020 2020  mns(self):.     
+0001df40: 2020 2022 2222 4164 6473 2074 6167 2063     """Adds tag c
+0001df50: 6f6c 756d 6e73 2074 6f20 7468 6520 7461  olumns to the ta
+0001df60: 626c 6520 6461 7461 2077 696e 646f 772e  ble data window.
+0001df70: 0a0a 2020 2020 2020 2020 2d20 5465 7374  ..        - Test
+0001df80: 7320 5461 626c 6544 6174 6142 726f 7773  s TableDataBrows
+0001df90: 6572 2e61 6464 5f63 6f6c 756d 6e73 2e0a  er.add_columns..
+0001dfa0: 2020 2020 2020 2020 2222 220a 0a20 2020          """..   
+0001dfb0: 2020 2020 2023 2043 7265 6174 6573 2061       # Creates a
+0001dfc0: 206e 6577 2070 726f 6a65 6374 2066 6f6c   new project fol
+0001dfd0: 6465 7220 616e 6420 7377 6974 6368 6573  der and switches
+0001dfe0: 2074 6f20 6974 0a20 2020 2020 2020 206e   to it.        n
+0001dff0: 6577 5f70 726f 6a5f 7061 7468 203d 2073  ew_proj_path = s
+0001e000: 656c 662e 6765 745f 6e65 775f 7465 7374  elf.get_new_test
+0001e010: 5f70 726f 6a65 6374 286c 6967 6874 3d54  _project(light=T
+0001e020: 7275 6529 0a20 2020 2020 2020 2073 656c  rue).        sel
+0001e030: 662e 6d61 696e 5f77 696e 646f 772e 7377  f.main_window.sw
+0001e040: 6974 6368 5f70 726f 6a65 6374 286e 6577  itch_project(new
+0001e050: 5f70 726f 6a5f 7061 7468 2c20 2274 6573  _proj_path, "tes
+0001e060: 745f 6c69 6768 745f 7072 6f6a 6563 7422  t_light_project"
+0001e070: 290a 0a20 2020 2020 2020 2023 2053 6574  )..        # Set
+0001e080: 7320 7368 6f72 7463 7574 7320 666f 7220  s shortcuts for 
+0001e090: 6f66 7465 6e20 7573 6564 206f 626a 6563  often used objec
+0001e0a0: 7473 0a20 2020 2020 2020 2074 6162 6c65  ts.        table
+0001e0b0: 5f64 6174 6120 3d20 7365 6c66 2e6d 6169  _data = self.mai
+0001e0c0: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
+0001e0d0: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
+0001e0e0: 0a0a 2020 2020 2020 2020 2320 4164 6473  ..        # Adds
+0001e0f0: 2061 2074 6167 2c20 6f66 2074 6865 2074   a tag, of the t
+0001e100: 7970 6573 2066 6c6f 6174 2c20 6461 7465  ypes float, date
+0001e110: 7469 6d65 2c20 6461 7465 2061 6e64 2074  time, date and t
+0001e120: 696d 652c 2074 6f0a 2020 2020 2020 2020  ime, to.        
+0001e130: 2320 7468 6520 7072 6f6a 6563 7420 7365  # the project se
+0001e140: 7373 696f 6e0a 2020 2020 2020 2020 7461  ssion.        ta
+0001e150: 6773 203d 205b 0a20 2020 2020 2020 2020  gs = [.         
+0001e160: 2020 2022 6d6f 636b 5f74 6167 5f66 6c6f     "mock_tag_flo
+0001e170: 6174 222c 0a20 2020 2020 2020 2020 2020  at",.           
+0001e180: 2022 6d6f 636b 5f74 6167 5f64 6174 6574   "mock_tag_datet
+0001e190: 696d 6522 2c0a 2020 2020 2020 2020 2020  ime",.          
+0001e1a0: 2020 226d 6f63 6b5f 7461 675f 6461 7465    "mock_tag_date
+0001e1b0: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+0001e1c0: 6d6f 636b 5f74 6167 5f74 696d 6522 2c0a  mock_tag_time",.
+0001e1d0: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
+0001e1e0: 2020 7479 7065 7320 3d20 5b0a 2020 2020    types = [.    
+0001e1f0: 2020 2020 2020 2020 4649 454c 445f 5459          FIELD_TY
+0001e200: 5045 5f46 4c4f 4154 2c0a 2020 2020 2020  PE_FLOAT,.      
+0001e210: 2020 2020 2020 4649 454c 445f 5459 5045        FIELD_TYPE
+0001e220: 5f44 4154 4554 494d 452c 0a20 2020 2020  _DATETIME,.     
+0001e230: 2020 2020 2020 2046 4945 4c44 5f54 5950         FIELD_TYP
+0001e240: 455f 4441 5445 2c0a 2020 2020 2020 2020  E_DATE,.        
+0001e250: 2020 2020 4649 454c 445f 5459 5045 5f54      FIELD_TYPE_T
+0001e260: 494d 452c 0a20 2020 2020 2020 205d 0a20  IME,.        ]. 
+0001e270: 2020 2020 2020 2066 6f72 2074 6167 2c20         for tag, 
+0001e280: 7461 675f 7479 7065 2069 6e20 7a69 7028  tag_type in zip(
+0001e290: 7461 6773 2c20 7479 7065 7329 3a0a 2020  tags, types):.  
+0001e2a0: 2020 2020 2020 2020 2020 7461 626c 655f            table_
+0001e2b0: 6461 7461 2e70 726f 6a65 6374 2e73 6573  data.project.ses
+0001e2c0: 7369 6f6e 2e61 6464 5f66 6965 6c64 280a  sion.add_field(.
+0001e2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e2e0: 434f 4c4c 4543 5449 4f4e 5f43 5552 5245  COLLECTION_CURRE
+0001e2f0: 4e54 2c20 7461 672c 2074 6167 5f74 7970  NT, tag, tag_typ
+0001e300: 652c 2022 222c 2054 7275 652c 2022 222c  e, "", True, "",
+0001e310: 2022 222c 2022 220a 2020 2020 2020 2020   "", "".        
+0001e320: 2020 2020 290a 0a20 2020 2020 2020 2074      )..        t
+0001e330: 6162 6c65 5f64 6174 612e 6164 645f 636f  able_data.add_co
+0001e340: 6c75 6d6e 7328 2920 2023 2041 6464 7320  lumns()  # Adds 
+0001e350: 7468 6520 7461 6773 2074 6f20 7461 626c  the tags to tabl
+0001e360: 6520 7669 6577 0a0a 2020 2020 2020 2020  e view..        
+0001e370: 2320 4173 7365 7274 7320 7468 6174 2074  # Asserts that t
+0001e380: 6865 2074 6167 7320 7765 7265 2061 6464  he tags were add
+0001e390: 6564 2074 6f20 7468 6520 7461 626c 6520  ed to the table 
+0001e3a0: 7669 6577 0a20 2020 2020 2020 2066 6f72  view.        for
+0001e3b0: 2074 6167 2069 6e20 7461 6773 3a0a 2020   tag in tags:.  
+0001e3c0: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
+0001e3d0: 7373 6572 7449 734e 6f74 4e6f 6e65 2874  ssertIsNotNone(t
+0001e3e0: 6162 6c65 5f64 6174 612e 6765 745f 7461  able_data.get_ta
+0001e3f0: 675f 636f 6c75 6d6e 2874 6167 2929 0a0a  g_column(tag))..
+0001e400: 2020 2020 6465 6620 7465 7374 5f74 6162      def test_tab
+0001e410: 6c65 5f64 6174 615f 6170 7065 6e64 6978  le_data_appendix
+0001e420: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+0001e430: 2222 224f 7065 6e73 2061 2070 726f 6a65  """Opens a proje
+0001e440: 6374 2061 6e64 2074 6573 7473 206d 6973  ct and tests mis
+0001e450: 6365 6c6c 616e 656f 7573 206d 6574 686f  cellaneous metho
+0001e460: 6473 206f 6620 7468 6520 7461 626c 650a  ds of the table.
+0001e470: 2020 2020 2020 2020 6461 7461 2076 6965          data vie
+0001e480: 772c 2069 6e20 7468 6520 6461 7461 2062  w, in the data b
+0001e490: 726f 7773 6572 2e0a 0a20 2020 2020 2020  rowser...       
+0001e4a0: 202d 5465 7374 730a 2020 2020 2020 2020   -Tests.        
+0001e4b0: 2020 2020 2d20 5461 626c 6544 6174 6142      - TableDataB
+0001e4c0: 726f 7773 6572 2e63 6861 6e67 655f 6365  rowser.change_ce
+0001e4d0: 6c6c 5f63 6f6c 6f72 0a20 2020 2020 2020  ll_color.       
+0001e4e0: 2020 2020 202d 2054 6162 6c65 4461 7461       - TableData
+0001e4f0: 4272 6f77 7365 722e 7365 6374 696f 6e5f  Browser.section_
+0001e500: 6d6f 7665 640a 2020 2020 2020 2020 2020  moved.          
+0001e510: 2020 2d20 5461 626c 6544 6174 6142 726f    - TableDataBro
+0001e520: 7773 6572 2e73 656c 6563 7443 6f6c 756d  wser.selectColum
+0001e530: 6e0a 2020 2020 2020 2020 2222 220a 0a20  n.        """.. 
+0001e540: 2020 2020 2020 2023 2043 7265 6174 6573         # Creates
+0001e550: 2061 206e 6577 2070 726f 6a65 6374 2066   a new project f
+0001e560: 6f6c 6465 7220 616e 6420 7377 6974 6368  older and switch
+0001e570: 6573 2074 6f20 6974 0a20 2020 2020 2020  es to it.       
+0001e580: 206e 6577 5f70 726f 6a5f 7061 7468 203d   new_proj_path =
+0001e590: 2073 656c 662e 6765 745f 6e65 775f 7465   self.get_new_te
+0001e5a0: 7374 5f70 726f 6a65 6374 286c 6967 6874  st_project(light
+0001e5b0: 3d54 7275 6529 0a20 2020 2020 2020 2073  =True).        s
+0001e5c0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+0001e5d0: 7377 6974 6368 5f70 726f 6a65 6374 286e  switch_project(n
+0001e5e0: 6577 5f70 726f 6a5f 7061 7468 2c20 2274  ew_proj_path, "t
+0001e5f0: 6573 745f 6c69 6768 745f 7072 6f6a 6563  est_light_projec
+0001e600: 7422 290a 0a20 2020 2020 2020 2023 2053  t")..        # S
+0001e610: 6574 206f 6674 656e 2075 7365 6420 7368  et often used sh
+0001e620: 6f72 7463 7574 730a 2020 2020 2020 2020  ortcuts.        
+0001e630: 7461 626c 655f 6461 7461 203d 2073 656c  table_data = sel
+0001e640: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
+0001e650: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
+0001e660: 5f64 6174 610a 0a20 2020 2020 2020 2023  _data..        #
+0001e670: 2054 4553 5453 2043 4841 4e47 455f 4345   TESTS CHANGE_CE
+0001e680: 4c4c 5f43 4f4c 4f52 0a20 2020 2020 2020  LL_COLOR.       
+0001e690: 2023 2041 6464 7320 6120 6e65 7720 646f   # Adds a new do
+0001e6a0: 6375 6d65 6e74 2074 6f20 7468 6520 636f  cument to the co
+0001e6b0: 6c6c 6563 7469 6f6e 0a20 2020 2020 2020  llection.       
+0001e6c0: 204e 4557 5f44 4f43 203d 207b 2246 696c   NEW_DOC = {"Fil
+0001e6d0: 654e 616d 6522 3a20 226d 6f63 6b5f 6669  eName": "mock_fi
+0001e6e0: 6c65 5f6e 616d 6522 7d0a 2020 2020 2020  le_name"}.      
+0001e6f0: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
+0001e700: 6f77 2e70 726f 6a65 6374 2e73 6573 7369  ow.project.sessi
+0001e710: 6f6e 2e61 6464 5f64 6f63 756d 656e 7428  on.add_document(
+0001e720: 0a20 2020 2020 2020 2020 2020 2043 4f4c  .            COL
+0001e730: 4c45 4354 494f 4e5f 4355 5252 454e 542c  LECTION_CURRENT,
+0001e740: 204e 4557 5f44 4f43 0a20 2020 2020 2020   NEW_DOC.       
+0001e750: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
+0001e760: 6d61 696e 5f77 696e 646f 772e 7072 6f6a  main_window.proj
+0001e770: 6563 742e 7365 7373 696f 6e2e 6164 645f  ect.session.add_
+0001e780: 646f 6375 6d65 6e74 280a 2020 2020 2020  document(.      
+0001e790: 2020 2020 2020 434f 4c4c 4543 5449 4f4e        COLLECTION
+0001e7a0: 5f49 4e49 5449 414c 2c20 4e45 575f 444f  _INITIAL, NEW_DO
+0001e7b0: 430a 2020 2020 2020 2020 290a 0a20 2020  C.        )..   
+0001e7c0: 2020 2020 2023 2053 656c 6563 7473 2074       # Selects t
+0001e7d0: 6865 2027 4669 6c65 6e61 6d65 2720 6f66  he 'Filename' of
+0001e7e0: 2074 6865 2066 6972 7374 2073 6361 6e20   the first scan 
+0001e7f0: 616e 6420 6368 616e 6765 7320 6974 7320  and changes its 
+0001e800: 7661 6c75 650a 2020 2020 2020 2020 2320  value.        # 
+0001e810: 746f 2074 6869 7320 646f 6375 6d65 6e74  to this document
+0001e820: 2066 696c 656e 616d 650a 2020 2020 2020   filename.      
+0001e830: 2020 7461 626c 655f 6461 7461 2e69 7465    table_data.ite
+0001e840: 6d28 302c 2030 292e 7365 7453 656c 6563  m(0, 0).setSelec
+0001e850: 7465 6428 5472 7565 290a 2020 2020 2020  ted(True).      
+0001e860: 2020 7461 626c 655f 6461 7461 2e69 7465    table_data.ite
+0001e870: 6d28 302c 2030 292e 7365 7454 6578 7428  m(0, 0).setText(
+0001e880: 4e45 575f 444f 435b 2246 696c 654e 616d  NEW_DOC["FileNam
+0001e890: 6522 5d29 0a20 2020 2020 2020 2074 6162  e"]).        tab
+0001e8a0: 6c65 5f64 6174 612e 6974 656d 2830 2c20  le_data.item(0, 
+0001e8b0: 3029 2e73 6574 5365 6c65 6374 6564 2846  0).setSelected(F
+0001e8c0: 616c 7365 290a 0a20 2020 2020 2020 2023  alse)..        #
+0001e8d0: 2053 656c 6563 7473 2027 464f 5627 2061   Selects 'FOV' a
+0001e8e0: 6e64 2063 6861 6e67 6573 2069 7473 2076  nd changes its v
+0001e8f0: 616c 7565 0a20 2020 2020 2020 2074 6162  alue.        tab
+0001e900: 6c65 5f64 6174 612e 6974 656d 2830 2c20  le_data.item(0, 
+0001e910: 3329 2e73 6574 5365 6c65 6374 6564 2854  3).setSelected(T
+0001e920: 7275 6529 0a20 2020 2020 2020 2074 6162  rue).        tab
+0001e930: 6c65 5f64 6174 612e 6974 656d 2830 2c20  le_data.item(0, 
+0001e940: 3329 2e73 6574 5465 7874 2822 5b34 2e30  3).setText("[4.0
+0001e950: 2c20 342e 305d 2229 0a20 2020 2020 2020  , 4.0]").       
+0001e960: 2074 6162 6c65 5f64 6174 612e 6974 656d   table_data.item
+0001e970: 2830 2c20 3329 2e73 6574 5365 6c65 6374  (0, 3).setSelect
+0001e980: 6564 2846 616c 7365 290a 0a20 2020 2020  ed(False)..     
+0001e990: 2020 2023 2043 7265 6174 6573 2061 2074     # Creates a t
+0001e9a0: 6167 206f 6620 7479 7065 2066 6c6f 6174  ag of type float
+0001e9b0: 2061 6e64 2073 656c 6563 7473 2069 740a   and selects it.
+0001e9c0: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
+0001e9d0: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
+0001e9e0: 6f77 7365 722e 6164 645f 7461 675f 696e  owser.add_tag_in
+0001e9f0: 666f 7328 0a20 2020 2020 2020 2020 2020  fos(.           
+0001ea00: 2022 6d6f 636b 5f74 6167 222c 2030 2e30   "mock_tag", 0.0
+0001ea10: 2c20 4649 454c 445f 5459 5045 5f46 4c4f  , FIELD_TYPE_FLO
+0001ea20: 4154 2c20 2222 2c20 2222 0a20 2020 2020  AT, "", "".     
+0001ea30: 2020 2029 0a20 2020 2020 2020 2074 6162     ).        tab
+0001ea40: 6c65 5f64 6174 612e 6974 656d 2830 2c20  le_data.item(0, 
+0001ea50: 3629 2e73 6574 5365 6c65 6374 6564 2854  6).setSelected(T
+0001ea60: 7275 6529 0a0a 2020 2020 2020 2020 2320  rue)..        # 
+0001ea70: 4d6f 636b 7320 7468 6520 6578 6563 7574  Mocks the execut
+0001ea80: 696f 6e20 6f66 2061 2064 6961 6c6f 6720  ion of a dialog 
+0001ea90: 626f 780a 2020 2020 2020 2020 514d 6573  box.        QMes
+0001eaa0: 7361 6765 426f 782e 6578 6563 203d 206c  sageBox.exec = l
+0001eab0: 616d 6264 6120 2a61 7267 733a 204e 6f6e  ambda *args: Non
+0001eac0: 650a 0a20 2020 2020 2020 2023 2054 7269  e..        # Tri
+0001ead0: 6573 2073 6574 7469 6e67 2061 6e20 696e  es setting an in
+0001eae0: 7661 6c69 6420 7374 7269 6e67 2076 616c  valid string val
+0001eaf0: 7565 2074 6f20 7468 6520 7461 670a 2020  ue to the tag.  
+0001eb00: 2020 2020 2020 7461 626c 655f 6461 7461        table_data
+0001eb10: 2e69 7465 6d28 302c 2036 292e 7365 7454  .item(0, 6).setT
+0001eb20: 6578 7428 2269 6e76 616c 6964 5f73 7472  ext("invalid_str
+0001eb30: 696e 6722 290a 2020 2020 2020 2020 7461  ing").        ta
+0001eb40: 626c 655f 6461 7461 2e69 7465 6d28 302c  ble_data.item(0,
+0001eb50: 2036 292e 7365 7453 656c 6563 7465 6428   6).setSelected(
+0001eb60: 4661 6c73 6529 0a0a 2020 2020 2020 2020  False)..        
+0001eb70: 2320 4372 6561 7465 7320 616e 6f74 6865  # Creates anothe
+0001eb80: 7220 7461 6720 6f66 2074 7970 6520 666c  r tag of type fl
+0001eb90: 6f61 7420 616e 6420 7365 6c65 6374 7320  oat and selects 
+0001eba0: 6974 0a20 2020 2020 2020 2073 656c 662e  it.        self.
+0001ebb0: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
+0001ebc0: 5f62 726f 7773 6572 2e61 6464 5f74 6167  _browser.add_tag
+0001ebd0: 5f69 6e66 6f73 280a 2020 2020 2020 2020  _infos(.        
+0001ebe0: 2020 2020 226d 6f63 6b5f 7461 675f 3122      "mock_tag_1"
+0001ebf0: 2c20 302e 302c 2046 4945 4c44 5f54 5950  , 0.0, FIELD_TYP
+0001ec00: 455f 464c 4f41 542c 2022 222c 2022 220a  E_FLOAT, "", "".
+0001ec10: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0001ec20: 2020 7461 626c 655f 6461 7461 2e69 7465    table_data.ite
+0001ec30: 6d28 302c 2037 292e 7365 7453 656c 6563  m(0, 7).setSelec
+0001ec40: 7465 6428 5472 7565 290a 0a20 2020 2020  ted(True)..     
+0001ec50: 2020 2023 2053 6574 7320 6120 7661 6c69     # Sets a vali
+0001ec60: 6420 666c 6f61 7420 7661 6c75 6520 746f  d float value to
+0001ec70: 2074 6865 2074 6167 0a20 2020 2020 2020   the tag.       
+0001ec80: 2074 6162 6c65 5f64 6174 612e 6974 656d   table_data.item
+0001ec90: 2830 2c20 3729 2e73 6574 5465 7874 2822  (0, 7).setText("
+0001eca0: 302e 3022 290a 0a20 2020 2020 2020 2023  0.0")..        #
+0001ecb0: 2043 6861 6e67 696e 6720 7468 6520 7361   Changing the sa
+0001ecc0: 6d65 2074 6167 2064 6f65 7320 6e6f 7420  me tag does not 
+0001ecd0: 7472 6967 6765 7220 7468 6520 2776 616c  trigger the 'val
+0001ece0: 7565 4368 616e 6765 6427 2061 6e64 0a20  ueChanged' and. 
+0001ecf0: 2020 2020 2020 2023 2074 6875 7320 6e6f         # thus no
+0001ed00: 7420 7468 6520 2763 6861 6e67 655f 6365  t the 'change_ce
+0001ed10: 6c6c 5f63 6f6c 6f72 2720 6d65 7468 6f64  ll_color' method
+0001ed20: 0a20 2020 2020 2020 2074 6162 6c65 5f64  .        table_d
+0001ed30: 6174 612e 6974 656d 2830 2c20 3729 2e73  ata.item(0, 7).s
+0001ed40: 6574 5365 6c65 6374 6564 2846 616c 7365  etSelected(False
+0001ed50: 290a 0a20 2020 2020 2020 2023 2053 656c  )..        # Sel
+0001ed60: 6563 7473 2074 6865 2027 4578 7020 5479  ects the 'Exp Ty
+0001ed70: 7065 2720 616e 6420 2746 4f56 2720 6f66  pe' and 'FOV' of
+0001ed80: 2074 6865 2066 6972 7374 2073 6361 6e2c   the first scan,
+0001ed90: 2077 6869 6368 2068 6176 650a 2020 2020   which have.    
+0001eda0: 2020 2020 2320 6469 7374 696e 6374 2064      # distinct d
+0001edb0: 6174 6120 7479 7065 730a 2020 2020 2020  ata types.      
+0001edc0: 2020 7461 626c 655f 6461 7461 2e69 7465    table_data.ite
+0001edd0: 6d28 302c 2032 292e 7365 7453 656c 6563  m(0, 2).setSelec
+0001ede0: 7465 6428 5472 7565 290a 2020 2020 2020  ted(True).      
+0001edf0: 2020 7461 626c 655f 6461 7461 2e69 7465    table_data.ite
+0001ee00: 6d28 302c 2033 292e 7365 7453 656c 6563  m(0, 3).setSelec
+0001ee10: 7465 6428 5472 7565 290a 0a20 2020 2020  ted(True)..     
+0001ee20: 2020 2023 2054 7269 6573 2063 6861 6e67     # Tries chang
+0001ee30: 696e 6720 7468 6520 7661 6c75 6520 6f66  ing the value of
+0001ee40: 2027 4578 7020 5479 7065 270a 2020 2020   'Exp Type'.    
+0001ee50: 2020 2020 7461 626c 655f 6461 7461 2e69      table_data.i
+0001ee60: 7465 6d28 302c 2032 292e 7365 7454 6578  tem(0, 2).setTex
+0001ee70: 7428 2252 4152 455f 4222 290a 0a20 2020  t("RARE_B")..   
+0001ee80: 2020 2020 2023 2041 7373 6572 7473 2074       # Asserts t
+0001ee90: 6861 7420 6f6e 6c79 2027 4578 7020 5479  hat only 'Exp Ty
+0001eea0: 7065 2720 6368 616e 6765 640a 2020 2020  pe' changed.    
+0001eeb0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0001eec0: 7175 616c 2874 6162 6c65 5f64 6174 612e  qual(table_data.
+0001eed0: 6974 656d 2830 2c20 3229 2e74 6578 7428  item(0, 2).text(
+0001eee0: 292c 2022 5241 5245 5f42 2229 0a20 2020  ), "RARE_B").   
+0001eef0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0001ef00: 4e6f 7445 7175 616c 2874 6162 6c65 5f64  NotEqual(table_d
+0001ef10: 6174 612e 6974 656d 2830 2c20 3329 2e74  ata.item(0, 3).t
+0001ef20: 6578 7428 292c 2022 5241 5245 5f42 2229  ext(), "RARE_B")
+0001ef30: 0a0a 2020 2020 2020 2020 2320 5445 5354  ..        # TEST
+0001ef40: 5320 5345 4c45 4354 494f 4e5f 4d4f 5645  S SELECTION_MOVE
+0001ef50: 440a 0a20 2020 2020 2020 2023 2053 7769  D..        # Swi
+0001ef60: 7463 6820 636f 6c75 6d6e 7320 6f66 2074  tch columns of t
+0001ef70: 6865 2032 2066 6972 7374 2074 6167 730a  he 2 first tags.
+0001ef80: 2020 2020 2020 2020 7461 626c 655f 6461          table_da
+0001ef90: 7461 2e68 6f72 697a 6f6e 7461 6c48 6561  ta.horizontalHea
+0001efa0: 6465 7228 292e 7365 6374 696f 6e4d 6f76  der().sectionMov
+0001efb0: 6564 2e65 6d69 7428 302c 2030 2c20 3129  ed.emit(0, 0, 1)
+0001efc0: 0a0a 2020 2020 2020 2020 2320 5345 4c45  ..        # SELE
+0001efd0: 4354 5f43 4f4c 554d 4e0a 2020 2020 2020  CT_COLUMN.      
+0001efe0: 2020 2320 5365 6c65 6374 7320 7468 6520    # Selects the 
+0001eff0: 7768 6f6c 6520 6669 6c65 6e61 6d65 2063  whole filename c
+0001f000: 6f6c 756d 6e0a 2020 2020 2020 2020 7461  olumn.        ta
+0001f010: 626c 655f 6461 7461 2e73 656c 6563 7443  ble_data.selectC
+0001f020: 6f6c 756d 6e28 3029 0a0a 2020 2020 2020  olumn(0)..      
+0001f030: 2020 2320 4173 7365 7274 7320 7468 6174    # Asserts that
+0001f040: 2069 7420 7761 7320 7365 6c65 6374 6564   it was selected
+0001f050: 0a20 2020 2020 2020 2073 656c 6563 7465  .        selecte
+0001f060: 645f 6974 656d 7320 3d20 7461 626c 655f  d_items = table_
+0001f070: 6461 7461 2e73 656c 6563 7465 6449 7465  data.selectedIte
+0001f080: 6d73 2829 0a20 2020 2020 2020 2073 656c  ms().        sel
+0001f090: 662e 6173 7365 7274 4571 7561 6c28 6c65  f.assertEqual(le
+0001f0a0: 6e28 7365 6c65 6374 6564 5f69 7465 6d73  n(selected_items
+0001f0b0: 292c 206c 656e 2874 6162 6c65 5f64 6174  ), len(table_dat
+0001f0c0: 612e 7363 616e 7329 290a 2020 2020 2020  a.scans)).      
+0001f0d0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0001f0e0: 616c 2873 656c 6563 7465 645f 6974 656d  al(selected_item
+0001f0f0: 735b 305d 2e74 6578 7428 292c 2074 6162  s[0].text(), tab
+0001f100: 6c65 5f64 6174 612e 7363 616e 735b 305d  le_data.scans[0]
+0001f110: 5b30 5d29 0a0a 2020 2020 6465 6620 7465  [0])..    def te
+0001f120: 7374 5f74 6162 6c65 5f64 6174 615f 636f  st_table_data_co
+0001f130: 6e74 6578 745f 6d65 6e75 2873 656c 6629  ntext_menu(self)
+0001f140: 3a0a 2020 2020 2020 2020 2222 2252 6967  :.        """Rig
+0001f150: 6874 2d63 6c69 636b 206f 6e20 6120 7363  ht-click on a sc
+0001f160: 616e 2074 6f20 6469 7370 6c61 7920 7468  an to display th
+0001f170: 6520 636f 6e74 6578 7420 6d65 6e75 2074  e context menu t
+0001f180: 6162 6c65 2c20 616e 6420 6368 6f6f 7365  able, and choose
+0001f190: 0a20 2020 2020 2020 2061 6e20 6f70 7469  .        an opti
+0001f1a0: 6f6e 2e0a 0a20 2020 2020 2020 202d 2054  on...        - T
+0001f1b0: 6573 7473 3a20 5461 626c 6544 6174 6142  ests: TableDataB
+0001f1c0: 726f 7773 6572 2e63 6f6e 7465 7874 5f6d  rowser.context_m
+0001f1d0: 656e 755f 7461 626c 650a 0a20 2020 2020  enu_table..     
+0001f1e0: 2020 202d 204d 6f63 6b73 3a0a 2020 2020     - Mocks:.    
+0001f1f0: 2020 2020 2020 2020 2d20 514d 656e 752e          - QMenu.
+0001f200: 6578 6563 5f0a 2020 2020 2020 2020 2020  exec_.          
+0001f210: 2020 2d20 514d 6573 7361 6765 426f 782e    - QMessageBox.
+0001f220: 6578 6563 0a20 2020 2020 2020 2022 2222  exec.        """
+0001f230: 0a0a 2020 2020 2020 2020 2320 4372 6561  ..        # Crea
+0001f240: 7465 7320 6120 6e65 7720 7072 6f6a 6563  tes a new projec
+0001f250: 7420 666f 6c64 6572 2061 6e64 2073 7769  t folder and swi
+0001f260: 7463 6865 7320 746f 2069 740a 2020 2020  tches to it.    
+0001f270: 2020 2020 6e65 775f 7072 6f6a 5f70 6174      new_proj_pat
+0001f280: 6820 3d20 7365 6c66 2e67 6574 5f6e 6577  h = self.get_new
+0001f290: 5f74 6573 745f 7072 6f6a 6563 7428 6c69  _test_project(li
+0001f2a0: 6768 743d 5472 7565 290a 2020 2020 2020  ght=True).      
+0001f2b0: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
+0001f2c0: 6f77 2e73 7769 7463 685f 7072 6f6a 6563  ow.switch_projec
+0001f2d0: 7428 6e65 775f 7072 6f6a 5f70 6174 682c  t(new_proj_path,
+0001f2e0: 2022 7465 7374 5f6c 6967 6874 5f70 726f   "test_light_pro
+0001f2f0: 6a65 6374 2229 0a0a 2020 2020 2020 2020  ject")..        
+0001f300: 2320 5365 7473 2073 686f 7274 6375 7473  # Sets shortcuts
+0001f310: 2066 6f72 206f 6674 656e 2075 7365 6420   for often used 
+0001f320: 6f62 6a65 6374 730a 2020 2020 2020 2020  objects.        
+0001f330: 7461 626c 655f 6461 7461 203d 2073 656c  table_data = sel
+0001f340: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
+0001f350: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
+0001f360: 5f64 6174 610a 0a20 2020 2020 2020 2023  _data..        #
+0001f370: 204d 6f63 6b73 2074 6865 2065 7865 6375   Mocks the execu
+0001f380: 7469 6f6e 206f 6620 6120 6469 616c 6f67  tion of a dialog
+0001f390: 2062 6f78 0a20 2020 2020 2020 2051 4d65   box.        QMe
+0001f3a0: 7373 6167 6542 6f78 2e65 7865 6320 3d20  ssageBox.exec = 
+0001f3b0: 6c61 6d62 6461 202a 6172 6773 3a20 4e6f  lambda *args: No
+0001f3c0: 6e65 0a0a 2020 2020 2020 2020 2320 4f70  ne..        # Op
+0001f3d0: 656e 7320 7468 6520 636f 6e74 6578 7420  ens the context 
+0001f3e0: 6d65 6e75 206f 6e65 2074 696d 6520 6265  menu one time be
+0001f3f0: 666f 7265 2063 7963 6c69 6e67 2074 6872  fore cycling thr
+0001f400: 6f75 6768 2074 6865 0a20 2020 2020 2020  ough the.       
+0001f410: 2023 2061 6374 696f 6e73 0a20 2020 2020   # actions.     
+0001f420: 2020 2051 4d65 6e75 2e65 7865 635f 203d     QMenu.exec_ =
+0001f430: 206c 616d 6264 6120 2a61 7267 733a 204e   lambda *args: N
+0001f440: 6f6e 650a 2020 2020 2020 2020 7461 626c  one.        tabl
+0001f450: 655f 6461 7461 2e63 6f6e 7465 7874 5f6d  e_data.context_m
+0001f460: 656e 755f 7461 626c 6528 5150 6f69 6e74  enu_table(QPoint
+0001f470: 2831 302c 2031 3029 290a 0a20 2020 2020  (10, 10))..     
+0001f480: 2020 2023 2043 7963 6c65 7320 7468 726f     # Cycles thro
+0001f490: 7567 6820 7468 6520 6163 7469 6f6e 7320  ugh the actions 
+0001f4a0: 6279 206f 7065 6e69 6e67 2074 6865 2063  by opening the c
+0001f4b0: 6f6e 7465 7874 206d 656e 7520 616e 640a  ontext menu and.
+0001f4c0: 2020 2020 2020 2020 2320 636c 6963 6b69          # clicki
+0001f4d0: 6e67 2069 6e20 6561 6368 206f 6e65 206f  ng in each one o
+0001f4e0: 6620 7468 656d 0a20 2020 2020 2020 2061  f them.        a
+0001f4f0: 6374 5f6e 616d 6573 203d 205b 0a20 2020  ct_names = [.   
+0001f500: 2020 2020 2020 2020 2022 6163 7469 6f6e           "action
+0001f510: 5f72 6573 6574 5f63 656c 6c22 2c0a 2020  _reset_cell",.  
+0001f520: 2020 2020 2020 2020 2020 2261 6374 696f            "actio
+0001f530: 6e5f 7265 7365 745f 636f 6c75 6d6e 222c  n_reset_column",
+0001f540: 0a20 2020 2020 2020 2020 2020 2022 6163  .            "ac
+0001f550: 7469 6f6e 5f72 6573 6574 5f72 6f77 222c  tion_reset_row",
+0001f560: 0a20 2020 2020 2020 2020 2020 2022 6163  .            "ac
+0001f570: 7469 6f6e 5f63 6c65 6172 5f63 656c 6c22  tion_clear_cell"
+0001f580: 2c0a 2020 2020 2020 2020 2020 2020 2261  ,.            "a
+0001f590: 6374 696f 6e5f 6164 645f 7363 616e 222c  ction_add_scan",
+0001f5a0: 0a20 2020 2020 2020 2020 2020 2022 6163  .            "ac
+0001f5b0: 7469 6f6e 5f72 656d 6f76 655f 7363 616e  tion_remove_scan
+0001f5c0: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
+0001f5d0: 6163 7469 6f6e 5f76 6973 7561 6c69 7a65  action_visualize
+0001f5e0: 645f 7461 6773 222c 0a20 2020 2020 2020  d_tags",.       
+0001f5f0: 2020 2020 2022 6163 7469 6f6e 5f73 656c       "action_sel
+0001f600: 6563 745f 636f 6c75 6d6e 222c 0a20 2020  ect_column",.   
+0001f610: 2020 2020 2020 2020 2022 6163 7469 6f6e           "action
+0001f620: 5f6d 756c 7469 706c 655f 736f 7274 222c  _multiple_sort",
+0001f630: 0a20 2020 2020 2020 2020 2020 2022 6163  .            "ac
+0001f640: 7469 6f6e 5f73 656e 645f 646f 6375 6d65  tion_send_docume
+0001f650: 6e74 735f 746f 5f70 6970 656c 696e 6522  nts_to_pipeline"
+0001f660: 2c0a 2020 2020 2020 2020 2020 2020 2261  ,.            "a
+0001f670: 6374 696f 6e5f 6469 7370 6c61 795f 6669  ction_display_fi
+0001f680: 6c65 222c 0a20 2020 2020 2020 205d 0a20  le",.        ]. 
+0001f690: 2020 2020 2020 2023 2049 6e63 6c75 6469         # Includi
+0001f6a0: 6e67 2027 6163 7469 6f6e 5f73 6f72 745f  ng 'action_sort_
+0001f6b0: 636f 6c75 6d6e 2720 7769 6c6c 2063 7261  column' will cra
+0001f6c0: 7368 2074 6865 2062 7569 6c64 0a0a 2020  sh the build..  
+0001f6d0: 2020 2020 2020 666f 7220 6163 745f 6e61        for act_na
+0001f6e0: 6d65 2069 6e20 6163 745f 6e61 6d65 733a  me in act_names:
+0001f6f0: 0a20 2020 2020 2020 2020 2020 2051 4d65  .            QMe
+0001f700: 6e75 2e65 7865 635f 203d 206c 616d 6264  nu.exec_ = lambd
+0001f710: 6120 2a61 7267 733a 2067 6574 6174 7472  a *args: getattr
+0001f720: 2874 6162 6c65 5f64 6174 612c 2061 6374  (table_data, act
+0001f730: 5f6e 616d 6529 0a20 2020 2020 2020 2020  _name).         
+0001f740: 2020 2074 6162 6c65 5f64 6174 612e 636f     table_data.co
+0001f750: 6e74 6578 745f 6d65 6e75 5f74 6162 6c65  ntext_menu_table
+0001f760: 2851 506f 696e 7428 3130 2c20 3130 2929  (QPoint(10, 10))
+0001f770: 0a0a 2020 2020 6465 6620 7465 7374 5f75  ..    def test_u
+0001f780: 6e64 6f5f 7265 646f 5f64 6174 6162 726f  ndo_redo_databro
+0001f790: 7773 6572 2873 656c 6629 3a0a 2020 2020  wser(self):.    
+0001f7a0: 2020 2020 2222 2254 6573 7473 2074 6865      """Tests the
+0001f7b0: 2044 6174 6142 726f 7773 6572 2075 6e64   DataBrowser und
+0001f7c0: 6f2f 7265 646f 2e22 2222 0a0a 2020 2020  o/redo."""..    
+0001f7d0: 2020 2020 7072 6f6a 6563 745f 385f 7061      project_8_pa
+0001f7e0: 7468 203d 2073 656c 662e 6765 745f 6e65  th = self.get_ne
+0001f7f0: 775f 7465 7374 5f70 726f 6a65 6374 2829  w_test_project()
+0001f800: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+0001f810: 696e 5f77 696e 646f 772e 7377 6974 6368  in_window.switch
+0001f820: 5f70 726f 6a65 6374 2870 726f 6a65 6374  _project(project
+0001f830: 5f38 5f70 6174 682c 2022 7072 6f6a 6563  _8_path, "projec
+0001f840: 745f 3822 290a 0a20 2020 2020 2020 2023  t_8")..        #
+0001f850: 2031 2e20 5461 6720 7661 6c75 6520 286c   1. Tag value (l
+0001f860: 6973 7429 0a20 2020 2020 2020 2023 2043  ist).        # C
+0001f870: 6865 636b 2075 6e64 6f73 2061 6e64 2072  heck undos and r
+0001f880: 6564 6f73 2061 7265 2065 6d70 7479 0a20  edos are empty. 
+0001f890: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0001f8a0: 7274 4571 7561 6c28 7365 6c66 2e6d 6169  rtEqual(self.mai
+0001f8b0: 6e5f 7769 6e64 6f77 2e70 726f 6a65 6374  n_window.project
+0001f8c0: 2e75 6e64 6f73 2c20 5b5d 290a 2020 2020  .undos, []).    
+0001f8d0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0001f8e0: 7175 616c 2873 656c 662e 6d61 696e 5f77  qual(self.main_w
+0001f8f0: 696e 646f 772e 7072 6f6a 6563 742e 7265  indow.project.re
+0001f900: 646f 732c 205b 5d29 0a0a 2020 2020 2020  dos, [])..      
+0001f910: 2020 2320 4461 7461 4272 6f77 7365 7220    # DataBrowser 
+0001f920: 7661 6c75 6520 666f 7220 7365 636f 6e64  value for second
+0001f930: 2064 6f63 756d 656e 740a 2020 2020 2020   document.      
+0001f940: 2020 6277 5f63 6f6c 756d 6e20 3d20 2873    bw_column = (s
+0001f950: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+0001f960: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
+0001f970: 6c65 5f64 6174 612e 6765 745f 7461 675f  le_data.get_tag_
+0001f980: 636f 6c75 6d6e 2928 0a20 2020 2020 2020  column)(.       
+0001f990: 2020 2020 2022 4261 6e64 5769 6474 6822       "BandWidth"
+0001f9a0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+0001f9b0: 2020 2062 775f 6974 656d 203d 2073 656c     bw_item = sel
+0001f9c0: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
+0001f9d0: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
+0001f9e0: 5f64 6174 612e 6974 656d 2831 2c20 6277  _data.item(1, bw
+0001f9f0: 5f63 6f6c 756d 6e29 0a20 2020 2020 2020  _column).       
+0001fa00: 2062 775f 6f6c 6420 3d20 6277 5f69 7465   bw_old = bw_ite
+0001fa10: 6d2e 7465 7874 2829 0a0a 2020 2020 2020  m.text()..      
+0001fa20: 2020 2320 4368 6563 6b20 7468 6520 7661    # Check the va
+0001fa30: 6c75 6520 6973 2072 6561 6c6c 7920 3530  lue is really 50
+0001fa40: 3030 300a 2020 2020 2020 2020 7365 6c66  000.        self
+0001fa50: 2e61 7373 6572 7445 7175 616c 2866 6c6f  .assertEqual(flo
+0001fa60: 6174 2862 775f 6f6c 645b 313a 2d31 5d29  at(bw_old[1:-1])
+0001fa70: 2c20 3530 3030 3029 0a0a 2020 2020 2020  , 50000)..      
+0001fa80: 2020 2320 4368 616e 6765 2074 6865 2076    # Change the v
+0001fa90: 616c 7565 0a20 2020 2020 2020 2062 775f  alue.        bw_
+0001faa0: 6974 656d 2e73 6574 5365 6c65 6374 6564  item.setSelected
+0001fab0: 2854 7275 6529 0a20 2020 2020 2020 2074  (True).        t
+0001fac0: 6872 6561 6469 6e67 2e54 696d 6572 2832  hreading.Timer(2
+0001fad0: 2c20 7061 7274 6961 6c28 7365 6c66 2e65  , partial(self.e
+0001fae0: 6469 745f 6461 7461 6272 6f77 7365 725f  dit_databrowser_
+0001faf0: 6c69 7374 2c20 2230 2e30 2229 292e 7374  list, "0.0")).st
+0001fb00: 6172 7428 290a 2020 2020 2020 2020 7365  art().        se
+0001fb10: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
+0001fb20: 6174 615f 6272 6f77 7365 722e 7461 626c  ata_browser.tabl
+0001fb30: 655f 6461 7461 2e65 6469 745f 7461 626c  e_data.edit_tabl
+0001fb40: 655f 6461 7461 5f76 616c 7565 7328 290a  e_data_values().
+0001fb50: 0a20 2020 2020 2020 2023 2043 6865 636b  .        # Check
+0001fb60: 2075 6e64 6f73 2061 6e64 2072 6564 6f73   undos and redos
+0001fb70: 2068 6176 6520 7468 6520 7269 6768 7420   have the right 
+0001fb80: 7661 6c75 6573 2e0a 2020 2020 2020 2020  values..        
+0001fb90: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+0001fba0: 280a 2020 2020 2020 2020 2020 2020 7365  (.            se
+0001fbb0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
+0001fbc0: 726f 6a65 6374 2e75 6e64 6f73 2c0a 2020  roject.undos,.  
+0001fbd0: 2020 2020 2020 2020 2020 5b0a 2020 2020            [.    
+0001fbe0: 2020 2020 2020 2020 2020 2020 5b0a 2020              [.  
+0001fbf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fc00: 2020 226d 6f64 6966 6965 645f 7661 6c75    "modified_valu
+0001fc10: 6573 222c 0a20 2020 2020 2020 2020 2020  es",.           
+0001fc20: 2020 2020 2020 2020 205b 0a20 2020 2020           [.     
+0001fc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fc40: 2020 205b 0a20 2020 2020 2020 2020 2020     [.           
+0001fc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fc60: 2022 6461 7461 2f72 6177 5f64 6174 612f   "data/raw_data/
+0001fc70: 4775 6572 6265 742d 4336 2d32 3031 342d  Guerbet-C6-2014-
+0001fc80: 5261 742d 4b35 322d 5475 6265 3237 220a  Rat-K52-Tube27".
+0001fc90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fca0: 2020 2020 2020 2020 2020 2020 222d 3230              "-20
+0001fcb0: 3134 2d30 322d 3134 3130 3233 3137 2d30  14-02-14102317-0
+0001fcc0: 312d 4731 5f47 7565 7262 6574 5f41 6e61  1-G1_Guerbet_Ana
+0001fcd0: 742d 5241 5245 220a 2020 2020 2020 2020  t-RARE".        
+0001fce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fcf0: 2020 2020 2270 766d 2d30 3030 3232 305f      "pvm-000220_
+0001fd00: 3030 302e 6e69 6922 2c0a 2020 2020 2020  000.nii",.      
+0001fd10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fd20: 2020 2020 2020 2242 616e 6457 6964 7468        "BandWidth
+0001fd30: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+0001fd40: 2020 2020 2020 2020 2020 2020 2020 205b                 [
+0001fd50: 3530 3030 302e 305d 2c0a 2020 2020 2020  50000.0],.      
+0001fd60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fd70: 2020 2020 2020 5b30 2e30 5d2c 0a20 2020        [0.0],.   
+0001fd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fd90: 2020 2020 205d 0a20 2020 2020 2020 2020       ].         
+0001fda0: 2020 2020 2020 2020 2020 205d 2c0a 2020             ],.  
+0001fdb0: 2020 2020 2020 2020 2020 2020 2020 5d0a                ].
+0001fdc0: 2020 2020 2020 2020 2020 2020 5d2c 0a20              ],. 
+0001fdd0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0001fde0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0001fdf0: 6c28 7365 6c66 2e6d 6169 6e5f 7769 6e64  l(self.main_wind
+0001fe00: 6f77 2e70 726f 6a65 6374 2e72 6564 6f73  ow.project.redos
+0001fe10: 2c20 5b5d 290a 0a20 2020 2020 2020 2023  , [])..        #
+0001fe20: 2043 6865 636b 2074 6865 2076 616c 7565   Check the value
+0001fe30: 2068 6173 2072 6561 6c6c 7920 6265 656e   has really been
+0001fe40: 2063 6861 6e67 6564 2074 6f20 302e 302e   changed to 0.0.
+0001fe50: 0a20 2020 2020 2020 2062 775f 6974 656d  .        bw_item
+0001fe60: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
+0001fe70: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
+0001fe80: 2e74 6162 6c65 5f64 6174 612e 6974 656d  .table_data.item
+0001fe90: 2831 2c20 6277 5f63 6f6c 756d 6e29 0a20  (1, bw_column). 
+0001fea0: 2020 2020 2020 2062 775f 7365 7420 3d20         bw_set = 
+0001feb0: 6277 5f69 7465 6d2e 7465 7874 2829 0a20  bw_item.text(). 
+0001fec0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0001fed0: 7274 4571 7561 6c28 666c 6f61 7428 6277  rtEqual(float(bw
+0001fee0: 5f73 6574 5b31 3a2d 315d 292c 2030 290a  _set[1:-1]), 0).
+0001fef0: 0a20 2020 2020 2020 2023 2055 6e64 6f0a  .        # Undo.
+0001ff00: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
+0001ff10: 6e5f 7769 6e64 6f77 2e61 6374 696f 6e5f  n_window.action_
+0001ff20: 756e 646f 2e74 7269 6767 6572 2829 0a0a  undo.trigger()..
+0001ff30: 2020 2020 2020 2020 2320 4368 6563 6b20          # Check 
+0001ff40: 7468 6520 7661 6c75 6520 6861 7320 7265  the value has re
+0001ff50: 616c 6c79 2062 6565 6e20 7265 7365 7420  ally been reset 
+0001ff60: 746f 2035 3030 3030 0a20 2020 2020 2020  to 50000.       
+0001ff70: 2062 775f 6974 656d 203d 2073 656c 662e   bw_item = self.
+0001ff80: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
+0001ff90: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
+0001ffa0: 6174 612e 6974 656d 2831 2c20 6277 5f63  ata.item(1, bw_c
+0001ffb0: 6f6c 756d 6e29 0a20 2020 2020 2020 2062  olumn).        b
+0001ffc0: 775f 756e 646f 203d 2062 775f 6974 656d  w_undo = bw_item
+0001ffd0: 2e74 6578 7428 290a 2020 2020 2020 2020  .text().        
+0001ffe0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+0001fff0: 2866 6c6f 6174 2862 775f 756e 646f 5b31  (float(bw_undo[1
+00020000: 3a2d 315d 292c 2035 3030 3030 290a 0a20  :-1]), 50000).. 
+00020010: 2020 2020 2020 2023 2043 6865 636b 2075         # Check u
+00020020: 6e64 6f73 202f 2072 6564 6f73 2068 6176  ndos / redos hav
+00020030: 6520 7468 6520 7269 6768 7420 7661 6c75  e the right valu
+00020040: 6573 0a20 2020 2020 2020 2073 656c 662e  es.        self.
+00020050: 6173 7365 7274 4571 7561 6c28 0a20 2020  assertEqual(.   
+00020060: 2020 2020 2020 2020 2073 656c 662e 6d61           self.ma
+00020070: 696e 5f77 696e 646f 772e 7072 6f6a 6563  in_window.projec
+00020080: 742e 7265 646f 732c 0a20 2020 2020 2020  t.redos,.       
+00020090: 2020 2020 205b 0a20 2020 2020 2020 2020       [.         
+000200a0: 2020 2020 2020 205b 0a20 2020 2020 2020         [.       
+000200b0: 2020 2020 2020 2020 2020 2020 2022 6d6f               "mo
+000200c0: 6469 6669 6564 5f76 616c 7565 7322 2c0a  dified_values",.
+000200d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000200e0: 2020 2020 5b0a 2020 2020 2020 2020 2020      [.          
+000200f0: 2020 2020 2020 2020 2020 2020 2020 5b0a                [.
+00020100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020110: 2020 2020 2020 2020 2020 2020 2264 6174              "dat
+00020120: 612f 7261 775f 6461 7461 2f47 7565 7262  a/raw_data/Guerb
+00020130: 6574 2d43 362d 3230 3134 2d52 6174 2d4b  et-C6-2014-Rat-K
+00020140: 3532 2d54 7562 6532 3722 0a20 2020 2020  52-Tube27".     
+00020150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020160: 2020 2020 2020 2022 2d32 3031 342d 3032         "-2014-02
+00020170: 2d31 3431 3032 3331 372d 3031 2d47 315f  -14102317-01-G1_
+00020180: 4775 6572 6265 745f 416e 6174 2d52 4152  Guerbet_Anat-RAR
+00020190: 4522 0a20 2020 2020 2020 2020 2020 2020  E".             
+000201a0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000201b0: 7076 6d2d 3030 3032 3230 5f30 3030 2e6e  pvm-000220_000.n
+000201c0: 6969 222c 0a20 2020 2020 2020 2020 2020  ii",.           
+000201d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000201e0: 2022 4261 6e64 5769 6474 6822 2c0a 2020   "BandWidth",.  
+000201f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020200: 2020 2020 2020 2020 2020 5b35 3030 3030            [50000
+00020210: 2e30 5d2c 0a20 2020 2020 2020 2020 2020  .0],.           
+00020220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020230: 205b 302e 305d 2c0a 2020 2020 2020 2020   [0.0],.        
+00020240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020250: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
+00020260: 2020 2020 2020 5d2c 0a20 2020 2020 2020        ],.       
+00020270: 2020 2020 2020 2020 205d 0a20 2020 2020           ].     
+00020280: 2020 2020 2020 205d 2c0a 2020 2020 2020         ],.      
+00020290: 2020 290a 2020 2020 2020 2020 7365 6c66    ).        self
+000202a0: 2e61 7373 6572 7445 7175 616c 2873 656c  .assertEqual(sel
+000202b0: 662e 6d61 696e 5f77 696e 646f 772e 7072  f.main_window.pr
+000202c0: 6f6a 6563 742e 756e 646f 732c 205b 5d29  oject.undos, [])
+000202d0: 0a0a 2020 2020 2020 2020 2320 5265 646f  ..        # Redo
+000202e0: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+000202f0: 696e 5f77 696e 646f 772e 6163 7469 6f6e  in_window.action
+00020300: 5f72 6564 6f2e 7472 6967 6765 7228 290a  _redo.trigger().
+00020310: 0a20 2020 2020 2020 2023 2043 6865 636b  .        # Check
+00020320: 2074 6865 2076 616c 7565 2068 6173 2072   the value has r
+00020330: 6561 6c6c 7920 6265 656e 2072 6573 6574  eally been reset
+00020340: 2074 6f20 302e 300a 2020 2020 2020 2020   to 0.0.        
+00020350: 6277 5f69 7465 6d20 3d20 7365 6c66 2e6d  bw_item = self.m
+00020360: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
+00020370: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
+00020380: 7461 2e69 7465 6d28 312c 2062 775f 636f  ta.item(1, bw_co
+00020390: 6c75 6d6e 290a 2020 2020 2020 2020 6277  lumn).        bw
+000203a0: 5f72 6564 6f20 3d20 6277 5f69 7465 6d2e  _redo = bw_item.
+000203b0: 7465 7874 2829 0a20 2020 2020 2020 2073  text().        s
+000203c0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+000203d0: 666c 6f61 7428 6277 5f72 6564 6f5b 313a  float(bw_redo[1:
+000203e0: 2d31 5d29 2c20 3029 0a0a 2020 2020 2020  -1]), 0)..      
+000203f0: 2020 2320 7765 2074 6573 7420 756e 646f    # we test undo
+00020400: 7320 2f20 7265 646f 7320 6861 7665 2074  s / redos have t
+00020410: 6865 2072 6967 6874 2076 616c 7565 730a  he right values.
+00020420: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00020430: 6572 7445 7175 616c 280a 2020 2020 2020  ertEqual(.      
+00020440: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
+00020450: 7769 6e64 6f77 2e70 726f 6a65 6374 2e75  window.project.u
+00020460: 6e64 6f73 2c0a 2020 2020 2020 2020 2020  ndos,.          
+00020470: 2020 5b0a 2020 2020 2020 2020 2020 2020    [.            
+00020480: 2020 2020 5b0a 2020 2020 2020 2020 2020      [.          
+00020490: 2020 2020 2020 2020 2020 226d 6f64 6966            "modif
+000204a0: 6965 645f 7661 6c75 6573 222c 0a20 2020  ied_values",.   
+000204b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000204c0: 205b 0a20 2020 2020 2020 2020 2020 2020   [.             
+000204d0: 2020 2020 2020 2020 2020 205b 0a20 2020             [.   
+000204e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000204f0: 2020 2020 2020 2020 2022 6461 7461 2f72           "data/r
+00020500: 6177 5f64 6174 612f 4775 6572 6265 742d  aw_data/Guerbet-
+00020510: 4336 2d32 3031 342d 5261 742d 4b35 322d  C6-2014-Rat-K52-
+00020520: 5475 6265 3237 220a 2020 2020 2020 2020  Tube27".        
+00020530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020540: 2020 2020 222d 3230 3134 2d30 322d 3134      "-2014-02-14
+00020550: 3130 3233 3137 2d30 312d 4731 5f47 7565  102317-01-G1_Gue
+00020560: 7262 6574 5f41 6e61 742d 5241 5245 220a  rbet_Anat-RARE".
+00020570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020580: 2020 2020 2020 2020 2020 2020 2270 766d              "pvm
+00020590: 2d30 3030 3232 305f 3030 302e 6e69 6922  -000220_000.nii"
+000205a0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000205b0: 2020 2020 2020 2020 2020 2020 2020 2242                "B
+000205c0: 616e 6457 6964 7468 222c 0a20 2020 2020  andWidth",.     
+000205d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000205e0: 2020 2020 2020 205b 3530 3030 302e 305d         [50000.0]
+000205f0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00020600: 2020 2020 2020 2020 2020 2020 2020 5b30                [0
+00020610: 2e30 5d2c 0a20 2020 2020 2020 2020 2020  .0],.           
+00020620: 2020 2020 2020 2020 2020 2020 205d 0a20               ]. 
+00020630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020640: 2020 205d 2c0a 2020 2020 2020 2020 2020     ],.          
+00020650: 2020 2020 2020 5d0a 2020 2020 2020 2020        ].        
+00020660: 2020 2020 5d2c 0a20 2020 2020 2020 2029      ],.        )
+00020670: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00020680: 7365 7274 4571 7561 6c28 7365 6c66 2e6d  sertEqual(self.m
+00020690: 6169 6e5f 7769 6e64 6f77 2e70 726f 6a65  ain_window.proje
+000206a0: 6374 2e72 6564 6f73 2c20 5b5d 290a 0a20  ct.redos, []).. 
+000206b0: 2020 2020 2020 2023 2032 2e20 5265 6d6f         # 2. Remo
+000206c0: 7665 2061 2073 6361 6e20 2864 6f63 756d  ve a scan (docum
+000206d0: 656e 7429 0a20 2020 2020 2020 2023 2043  ent).        # C
+000206e0: 6865 636b 2074 6865 7265 2061 7265 2039  heck there are 9
+000206f0: 2064 6f63 756d 656e 7473 2069 6e20 6462   documents in db
+00020700: 2028 6375 7272 656e 7420 616e 6420 696e   (current and in
+00020710: 6974 6961 6c29 0a20 2020 2020 2020 2073  itial).        s
+00020720: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00020730: 0a20 2020 2020 2020 2020 2020 2039 2c0a  .            9,.
+00020740: 2020 2020 2020 2020 2020 2020 6c65 6e28              len(
+00020750: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020760: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+00020770: 772e 7072 6f6a 6563 742e 7365 7373 696f  w.project.sessio
+00020780: 6e2e 6765 745f 646f 6375 6d65 6e74 735f  n.get_documents_
+00020790: 6e61 6d65 7328 0a20 2020 2020 2020 2020  names(.         
+000207a0: 2020 2020 2020 2020 2020 2043 4f4c 4c45             COLLE
+000207b0: 4354 494f 4e5f 4355 5252 454e 540a 2020  CTION_CURRENT.  
+000207c0: 2020 2020 2020 2020 2020 2020 2020 290a                ).
+000207d0: 2020 2020 2020 2020 2020 2020 292c 0a20              ),. 
+000207e0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+000207f0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00020800: 6c28 0a20 2020 2020 2020 2020 2020 2039  l(.            9
+00020810: 2c0a 2020 2020 2020 2020 2020 2020 6c65  ,.            le
+00020820: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
+00020830: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
+00020840: 646f 772e 7072 6f6a 6563 742e 7365 7373  dow.project.sess
+00020850: 696f 6e2e 6765 745f 646f 6375 6d65 6e74  ion.get_document
+00020860: 735f 6e61 6d65 7328 0a20 2020 2020 2020  s_names(.       
+00020870: 2020 2020 2020 2020 2020 2020 2043 4f4c               COL
+00020880: 4c45 4354 494f 4e5f 494e 4954 4941 4c0a  LECTION_INITIAL.
+00020890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000208a0: 290a 2020 2020 2020 2020 2020 2020 292c  ).            ),
+000208b0: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+000208c0: 2020 2020 2320 5265 6d6f 7665 2074 6865      # Remove the
+000208d0: 2065 6967 6874 6820 646f 6375 6d65 6e74   eighth document
+000208e0: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+000208f0: 696e 5f77 696e 646f 772e 6461 7461 5f62  in_window.data_b
+00020900: 726f 7773 6572 2e74 6162 6c65 5f64 6174  rowser.table_dat
+00020910: 612e 7365 6c65 6374 526f 7728 3829 0a20  a.selectRow(8). 
+00020920: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
+00020930: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
+00020940: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
+00020950: 7265 6d6f 7665 5f73 6361 6e28 290a 0a20  remove_scan().. 
+00020960: 2020 2020 2020 2023 2043 6865 636b 2069         # Check i
+00020970: 6620 7468 6572 6520 6172 6520 6e6f 7720  f there are now 
+00020980: 3820 646f 6375 6d65 6e74 7320 696e 2064  8 documents in d
+00020990: 6220 2863 7572 7265 6e74 2061 6e64 2069  b (current and i
+000209a0: 6e69 7469 616c 290a 2020 2020 2020 2020  nitial).        
+000209b0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+000209c0: 280a 2020 2020 2020 2020 2020 2020 382c  (.            8,
+000209d0: 0a20 2020 2020 2020 2020 2020 206c 656e  .            len
+000209e0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000209f0: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
+00020a00: 6f77 2e70 726f 6a65 6374 2e73 6573 7369  ow.project.sessi
+00020a10: 6f6e 2e67 6574 5f64 6f63 756d 656e 7473  on.get_documents
+00020a20: 5f6e 616d 6573 280a 2020 2020 2020 2020  _names(.        
+00020a30: 2020 2020 2020 2020 2020 2020 434f 4c4c              COLL
+00020a40: 4543 5449 4f4e 5f43 5552 5245 4e54 0a20  ECTION_CURRENT. 
+00020a50: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00020a60: 0a20 2020 2020 2020 2020 2020 2029 2c0a  .            ),.
+00020a70: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00020a80: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00020a90: 616c 280a 2020 2020 2020 2020 2020 2020  al(.            
+00020aa0: 382c 0a20 2020 2020 2020 2020 2020 206c  8,.            l
+00020ab0: 656e 280a 2020 2020 2020 2020 2020 2020  en(.            
+00020ac0: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
+00020ad0: 6e64 6f77 2e70 726f 6a65 6374 2e73 6573  ndow.project.ses
+00020ae0: 7369 6f6e 2e67 6574 5f64 6f63 756d 656e  sion.get_documen
+00020af0: 7473 5f6e 616d 6573 280a 2020 2020 2020  ts_names(.      
+00020b00: 2020 2020 2020 2020 2020 2020 2020 434f                CO
+00020b10: 4c4c 4543 5449 4f4e 5f49 4e49 5449 414c  LLECTION_INITIAL
+00020b20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020b30: 2029 0a20 2020 2020 2020 2020 2020 2029   ).            )
+00020b40: 2c0a 2020 2020 2020 2020 290a 0a20 2020  ,.        )..   
+00020b50: 2020 2020 2023 2055 6e64 6f0a 2020 2020       # Undo.    
+00020b60: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
+00020b70: 6e64 6f77 2e61 6374 696f 6e5f 756e 646f  ndow.action_undo
+00020b80: 2e74 7269 6767 6572 2829 0a0a 2020 2020  .trigger()..    
+00020b90: 2020 2020 2320 4368 6563 6b20 7468 6572      # Check ther
+00020ba0: 6520 6172 6520 7374 696c 6c20 6f6e 6c79  e are still only
+00020bb0: 2038 2064 6f63 756d 656e 7473 2069 6e20   8 documents in 
+00020bc0: 7468 6520 6461 7461 6261 7365 0a20 2020  the database.   
+00020bd0: 2020 2020 2023 2028 6375 7272 656e 7420       # (current 
+00020be0: 616e 6420 696e 6974 6961 6c29 2e20 496e  and initial). In
+00020bf0: 2066 6163 7420 7468 6520 646f 6375 6d65   fact the docume
+00020c00: 6e74 2068 6173 2062 6565 6e20 7065 726d  nt has been perm
+00020c10: 616e 656e 746c 790a 2020 2020 2020 2020  anently.        
+00020c20: 2320 6465 6c65 7465 6420 616e 6420 7765  # deleted and we
+00020c30: 2063 616e 6e6f 7420 7265 636f 7665 7220   cannot recover 
+00020c40: 6974 2069 6e20 7468 6973 2063 6173 650a  it in this case.
+00020c50: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00020c60: 6572 7445 7175 616c 280a 2020 2020 2020  ertEqual(.      
+00020c70: 2020 2020 2020 382c 0a20 2020 2020 2020        8,.       
+00020c80: 2020 2020 206c 656e 280a 2020 2020 2020       len(.      
+00020c90: 2020 2020 2020 2020 2020 7365 6c66 2e6d            self.m
+00020ca0: 6169 6e5f 7769 6e64 6f77 2e70 726f 6a65  ain_window.proje
+00020cb0: 6374 2e73 6573 7369 6f6e 2e67 6574 5f64  ct.session.get_d
+00020cc0: 6f63 756d 656e 7473 5f6e 616d 6573 280a  ocuments_names(.
+00020cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020ce0: 2020 2020 434f 4c4c 4543 5449 4f4e 5f43      COLLECTION_C
+00020cf0: 5552 5245 4e54 0a20 2020 2020 2020 2020  URRENT.         
+00020d00: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00020d10: 2020 2020 2029 2c0a 2020 2020 2020 2020       ),.        
+00020d20: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00020d30: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
+00020d40: 2020 2020 2020 2020 382c 0a20 2020 2020          8,.     
+00020d50: 2020 2020 2020 206c 656e 280a 2020 2020         len(.    
+00020d60: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00020d70: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 726f  .main_window.pro
+00020d80: 6a65 6374 2e73 6573 7369 6f6e 2e67 6574  ject.session.get
+00020d90: 5f64 6f63 756d 656e 7473 5f6e 616d 6573  _documents_names
+00020da0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00020db0: 2020 2020 2020 434f 4c4c 4543 5449 4f4e        COLLECTION
+00020dc0: 5f49 4e49 5449 414c 0a20 2020 2020 2020  _INITIAL.       
+00020dd0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+00020de0: 2020 2020 2020 2029 2c0a 2020 2020 2020         ),.      
+00020df0: 2020 290a 0a20 2020 2020 2020 2023 2033    )..        # 3
+00020e00: 2e20 4164 6420 6120 7461 670a 2020 2020  . Add a tag.    
+00020e10: 2020 2020 2320 4368 6563 6b20 7765 2064      # Check we d
+00020e20: 6f6e 2774 2068 6176 6520 2754 6573 7427  on't have 'Test'
+00020e30: 2074 6167 2069 6e20 7468 6520 6462 0a20   tag in the db. 
+00020e40: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00020e50: 7274 4661 6c73 6528 0a20 2020 2020 2020  rtFalse(.       
+00020e60: 2020 2020 2022 5465 7374 220a 2020 2020       "Test".    
+00020e70: 2020 2020 2020 2020 696e 2073 656c 662e          in self.
+00020e80: 6d61 696e 5f77 696e 646f 772e 7072 6f6a  main_window.proj
+00020e90: 6563 742e 7365 7373 696f 6e2e 6765 745f  ect.session.get_
+00020ea0: 6669 656c 6473 5f6e 616d 6573 280a 2020  fields_names(.  
+00020eb0: 2020 2020 2020 2020 2020 2020 2020 434f                CO
+00020ec0: 4c4c 4543 5449 4f4e 5f43 5552 5245 4e54  LLECTION_CURRENT
+00020ed0: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
+00020ee0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00020ef0: 2073 656c 662e 6173 7365 7274 4661 6c73   self.assertFals
+00020f00: 6528 0a20 2020 2020 2020 2020 2020 2022  e(.            "
+00020f10: 5465 7374 220a 2020 2020 2020 2020 2020  Test".          
+00020f20: 2020 696e 2073 656c 662e 6d61 696e 5f77    in self.main_w
+00020f30: 696e 646f 772e 7072 6f6a 6563 742e 7365  indow.project.se
+00020f40: 7373 696f 6e2e 6765 745f 6669 656c 6473  ssion.get_fields
+00020f50: 5f6e 616d 6573 280a 2020 2020 2020 2020  _names(.        
+00020f60: 2020 2020 2020 2020 434f 4c4c 4543 5449          COLLECTI
+00020f70: 4f4e 5f49 4e49 5449 414c 0a20 2020 2020  ON_INITIAL.     
+00020f80: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00020f90: 2029 0a0a 2020 2020 2020 2020 2320 4164   )..        # Ad
+00020fa0: 6420 7468 6520 5465 7374 2074 6167 0a20  d the Test tag. 
+00020fb0: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
+00020fc0: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
+00020fd0: 7773 6572 2e61 6464 5f74 6167 5f61 6374  wser.add_tag_act
+00020fe0: 696f 6e2e 7472 6967 6765 7228 290a 2020  ion.trigger().  
+00020ff0: 2020 2020 2020 6164 645f 7461 6720 3d20        add_tag = 
+00021000: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+00021010: 2e64 6174 615f 6272 6f77 7365 722e 706f  .data_browser.po
+00021020: 705f 7570 5f61 6464 5f74 6167 0a20 2020  p_up_add_tag.   
+00021030: 2020 2020 2061 6464 5f74 6167 2e74 6578       add_tag.tex
+00021040: 745f 6564 6974 5f74 6167 5f6e 616d 652e  t_edit_tag_name.
+00021050: 7365 7454 6578 7428 2254 6573 7422 290a  setText("Test").
+00021060: 2020 2020 2020 2020 5154 6573 742e 6d6f          QTest.mo
+00021070: 7573 6543 6c69 636b 2861 6464 5f74 6167  useClick(add_tag
+00021080: 2e70 7573 685f 6275 7474 6f6e 5f6f 6b2c  .push_button_ok,
+00021090: 2051 742e 4c65 6674 4275 7474 6f6e 290a   Qt.LeftButton).
+000210a0: 0a20 2020 2020 2020 2023 2043 6865 636b  .        # Check
+000210b0: 2074 6865 2027 5465 7374 2720 7461 6720   the 'Test' tag 
+000210c0: 6973 2069 6e20 7468 6520 6462 0a20 2020  is in the db.   
+000210d0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+000210e0: 5472 7565 280a 2020 2020 2020 2020 2020  True(.          
+000210f0: 2020 2254 6573 7422 0a20 2020 2020 2020    "Test".       
+00021100: 2020 2020 2069 6e20 7365 6c66 2e6d 6169       in self.mai
+00021110: 6e5f 7769 6e64 6f77 2e70 726f 6a65 6374  n_window.project
+00021120: 2e73 6573 7369 6f6e 2e67 6574 5f66 6965  .session.get_fie
+00021130: 6c64 735f 6e61 6d65 7328 0a20 2020 2020  lds_names(.     
+00021140: 2020 2020 2020 2020 2020 2043 4f4c 4c45             COLLE
+00021150: 4354 494f 4e5f 4355 5252 454e 540a 2020  CTION_CURRENT.  
+00021160: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00021170: 2020 2020 290a 2020 2020 2020 2020 7365      ).        se
+00021180: 6c66 2e61 7373 6572 7454 7275 6528 0a20  lf.assertTrue(. 
+00021190: 2020 2020 2020 2020 2020 2022 5465 7374             "Test
+000211a0: 220a 2020 2020 2020 2020 2020 2020 696e  ".            in
+000211b0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+000211c0: 772e 7072 6f6a 6563 742e 7365 7373 696f  w.project.sessio
+000211d0: 6e2e 6765 745f 6669 656c 6473 5f6e 616d  n.get_fields_nam
+000211e0: 6573 280a 2020 2020 2020 2020 2020 2020  es(.            
+000211f0: 2020 2020 434f 4c4c 4543 5449 4f4e 5f49      COLLECTION_I
+00021200: 4e49 5449 414c 0a20 2020 2020 2020 2020  NITIAL.         
+00021210: 2020 2029 0a20 2020 2020 2020 2029 0a0a     ).        )..
+00021220: 2020 2020 2020 2020 2320 556e 646f 0a20          # Undo. 
+00021230: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
+00021240: 5f77 696e 646f 772e 6163 7469 6f6e 5f75  _window.action_u
+00021250: 6e64 6f2e 7472 6967 6765 7228 290a 0a20  ndo.trigger().. 
+00021260: 2020 2020 2020 2023 2043 6865 636b 2027         # Check '
+00021270: 5465 7374 2720 7461 6720 6973 206e 6f74  Test' tag is not
+00021280: 2069 6e20 7468 6520 6462 0a20 2020 2020   in the db.     
+00021290: 2020 2073 656c 662e 6173 7365 7274 4661     self.assertFa
+000212a0: 6c73 6528 0a20 2020 2020 2020 2020 2020  lse(.           
+000212b0: 2022 5465 7374 220a 2020 2020 2020 2020   "Test".        
+000212c0: 2020 2020 696e 2073 656c 662e 6d61 696e      in self.main
+000212d0: 5f77 696e 646f 772e 7072 6f6a 6563 742e  _window.project.
+000212e0: 7365 7373 696f 6e2e 6765 745f 6669 656c  session.get_fiel
+000212f0: 6473 5f6e 616d 6573 280a 2020 2020 2020  ds_names(.      
+00021300: 2020 2020 2020 2020 2020 434f 4c4c 4543            COLLEC
+00021310: 5449 4f4e 5f43 5552 5245 4e54 0a20 2020  TION_CURRENT.   
+00021320: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+00021330: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
+00021340: 662e 6173 7365 7274 4661 6c73 6528 0a20  f.assertFalse(. 
+00021350: 2020 2020 2020 2020 2020 2022 5465 7374             "Test
+00021360: 220a 2020 2020 2020 2020 2020 2020 696e  ".            in
+00021370: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+00021380: 772e 7072 6f6a 6563 742e 7365 7373 696f  w.project.sessio
+00021390: 6e2e 6765 745f 6669 656c 6473 5f6e 616d  n.get_fields_nam
+000213a0: 6573 280a 2020 2020 2020 2020 2020 2020  es(.            
+000213b0: 2020 2020 434f 4c4c 4543 5449 4f4e 5f49      COLLECTION_I
+000213c0: 4e49 5449 414c 0a20 2020 2020 2020 2020  NITIAL.         
+000213d0: 2020 2029 0a20 2020 2020 2020 2029 0a0a     ).        )..
+000213e0: 2020 2020 2020 2020 2320 5265 646f 0a20          # Redo. 
+000213f0: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
+00021400: 5f77 696e 646f 772e 6163 7469 6f6e 5f72  _window.action_r
+00021410: 6564 6f2e 7472 6967 6765 7228 290a 0a20  edo.trigger().. 
+00021420: 2020 2020 2020 2023 2043 6865 636b 2074         # Check t
+00021430: 6865 2027 5465 7374 2720 7461 6720 6973  he 'Test' tag is
+00021440: 2069 6e20 7468 6520 6462 0a20 2020 2020   in the db.     
+00021450: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
+00021460: 7565 280a 2020 2020 2020 2020 2020 2020  ue(.            
+00021470: 2254 6573 7422 0a20 2020 2020 2020 2020  "Test".         
+00021480: 2020 2069 6e20 7365 6c66 2e6d 6169 6e5f     in self.main_
+00021490: 7769 6e64 6f77 2e70 726f 6a65 6374 2e73  window.project.s
+000214a0: 6573 7369 6f6e 2e67 6574 5f66 6965 6c64  ession.get_field
+000214b0: 735f 6e61 6d65 7328 0a20 2020 2020 2020  s_names(.       
+000214c0: 2020 2020 2020 2020 2043 4f4c 4c45 4354           COLLECT
+000214d0: 494f 4e5f 4355 5252 454e 540a 2020 2020  ION_CURRENT.    
+000214e0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+000214f0: 2020 290a 2020 2020 2020 2020 7365 6c66    ).        self
+00021500: 2e61 7373 6572 7454 7275 6528 0a20 2020  .assertTrue(.   
+00021510: 2020 2020 2020 2020 2022 5465 7374 220a           "Test".
+00021520: 2020 2020 2020 2020 2020 2020 696e 2073              in s
+00021530: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00021540: 7072 6f6a 6563 742e 7365 7373 696f 6e2e  project.session.
+00021550: 6765 745f 6669 656c 6473 5f6e 616d 6573  get_fields_names
+00021560: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00021570: 2020 434f 4c4c 4543 5449 4f4e 5f49 4e49    COLLECTION_INI
+00021580: 5449 414c 0a20 2020 2020 2020 2020 2020  TIAL.           
+00021590: 2029 0a20 2020 2020 2020 2029 0a0a 2020   ).        )..  
+000215a0: 2020 2020 2020 2320 342e 2052 656d 6f76        # 4. Remov
+000215b0: 6520 7461 670a 2020 2020 2020 2020 2320  e tag.        # 
+000215c0: 5265 6d6f 7665 2074 6865 2027 5465 7374  Remove the 'Test
+000215d0: 2720 7461 670a 2020 2020 2020 2020 7365  ' tag.        se
+000215e0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
+000215f0: 6174 615f 6272 6f77 7365 722e 7265 6d6f  ata_browser.remo
+00021600: 7665 5f74 6167 5f61 6374 696f 6e2e 7472  ve_tag_action.tr
+00021610: 6967 6765 7228 290a 2020 2020 2020 2020  igger().        
+00021620: 7265 6d6f 7665 5f74 6167 203d 2073 656c  remove_tag = sel
+00021630: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
+00021640: 7461 5f62 726f 7773 6572 2e70 6f70 5f75  ta_browser.pop_u
+00021650: 705f 7265 6d6f 7665 5f74 6167 0a20 2020  p_remove_tag.   
+00021660: 2020 2020 2072 656d 6f76 655f 7461 672e       remove_tag.
+00021670: 6c69 7374 5f77 6964 6765 745f 7461 6773  list_widget_tags
+00021680: 2e73 6574 4375 7272 656e 7452 6f77 2830  .setCurrentRow(0
+00021690: 2920 2023 2027 5465 7374 2720 7461 6720  )  # 'Test' tag 
+000216a0: 7365 6c65 6374 6564 0a20 2020 2020 2020  selected.       
+000216b0: 2051 5465 7374 2e6d 6f75 7365 436c 6963   QTest.mouseClic
+000216c0: 6b28 7265 6d6f 7665 5f74 6167 2e70 7573  k(remove_tag.pus
+000216d0: 685f 6275 7474 6f6e 5f6f 6b2c 2051 742e  h_button_ok, Qt.
+000216e0: 4c65 6674 4275 7474 6f6e 290a 0a20 2020  LeftButton)..   
+000216f0: 2020 2020 2023 2043 6865 636b 2027 5465       # Check 'Te
+00021700: 7374 2720 7461 6720 6973 206e 6f74 2069  st' tag is not i
+00021710: 6e20 7468 6520 6462 0a20 2020 2020 2020  n the db.       
+00021720: 2073 656c 662e 6173 7365 7274 4661 6c73   self.assertFals
+00021730: 6528 0a20 2020 2020 2020 2020 2020 2022  e(.            "
+00021740: 5465 7374 220a 2020 2020 2020 2020 2020  Test".          
+00021750: 2020 696e 2073 656c 662e 6d61 696e 5f77    in self.main_w
+00021760: 696e 646f 772e 7072 6f6a 6563 742e 7365  indow.project.se
+00021770: 7373 696f 6e2e 6765 745f 6669 656c 6473  ssion.get_fields
+00021780: 5f6e 616d 6573 280a 2020 2020 2020 2020  _names(.        
+00021790: 2020 2020 2020 2020 434f 4c4c 4543 5449          COLLECTI
+000217a0: 4f4e 5f43 5552 5245 4e54 0a20 2020 2020  ON_CURRENT.     
+000217b0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+000217c0: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
+000217d0: 6173 7365 7274 4661 6c73 6528 0a20 2020  assertFalse(.   
+000217e0: 2020 2020 2020 2020 2022 5465 7374 220a           "Test".
+000217f0: 2020 2020 2020 2020 2020 2020 696e 2073              in s
+00021800: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00021810: 7072 6f6a 6563 742e 7365 7373 696f 6e2e  project.session.
+00021820: 6765 745f 6669 656c 6473 5f6e 616d 6573  get_fields_names
+00021830: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00021840: 2020 434f 4c4c 4543 5449 4f4e 5f49 4e49    COLLECTION_INI
+00021850: 5449 414c 0a20 2020 2020 2020 2020 2020  TIAL.           
+00021860: 2029 0a20 2020 2020 2020 2029 0a0a 2020   ).        )..  
+00021870: 2020 2020 2020 2320 556e 646f 0a20 2020        # Undo.   
+00021880: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
+00021890: 696e 646f 772e 6163 7469 6f6e 5f75 6e64  indow.action_und
+000218a0: 6f2e 7472 6967 6765 7228 290a 0a20 2020  o.trigger()..   
+000218b0: 2020 2020 2023 2043 6865 636b 2027 5465       # Check 'Te
+000218c0: 7374 2720 7461 6720 6973 2069 6e20 7468  st' tag is in th
+000218d0: 6520 6462 0a20 2020 2020 2020 2073 656c  e db.        sel
+000218e0: 662e 6173 7365 7274 5472 7565 280a 2020  f.assertTrue(.  
+000218f0: 2020 2020 2020 2020 2020 2254 6573 7422            "Test"
+00021900: 0a20 2020 2020 2020 2020 2020 2069 6e20  .            in 
+00021910: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+00021920: 2e70 726f 6a65 6374 2e73 6573 7369 6f6e  .project.session
+00021930: 2e67 6574 5f66 6965 6c64 735f 6e61 6d65  .get_fields_name
+00021940: 7328 0a20 2020 2020 2020 2020 2020 2020  s(.             
+00021950: 2020 2043 4f4c 4c45 4354 494f 4e5f 4355     COLLECTION_CU
+00021960: 5252 454e 540a 2020 2020 2020 2020 2020  RRENT.          
+00021970: 2020 290a 2020 2020 2020 2020 290a 2020    ).        ).  
+00021980: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00021990: 7454 7275 6528 0a20 2020 2020 2020 2020  tTrue(.         
+000219a0: 2020 2022 5465 7374 220a 2020 2020 2020     "Test".      
+000219b0: 2020 2020 2020 696e 2073 656c 662e 6d61        in self.ma
+000219c0: 696e 5f77 696e 646f 772e 7072 6f6a 6563  in_window.projec
+000219d0: 742e 7365 7373 696f 6e2e 6765 745f 6669  t.session.get_fi
+000219e0: 656c 6473 5f6e 616d 6573 280a 2020 2020  elds_names(.    
+000219f0: 2020 2020 2020 2020 2020 2020 434f 4c4c              COLL
+00021a00: 4543 5449 4f4e 5f49 4e49 5449 414c 0a20  ECTION_INITIAL. 
+00021a10: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00021a20: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+00021a30: 2320 5265 646f 0a20 2020 2020 2020 2073  # Redo.        s
+00021a40: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00021a50: 6163 7469 6f6e 5f72 6564 6f2e 7472 6967  action_redo.trig
+00021a60: 6765 7228 290a 0a20 2020 2020 2020 2023  ger()..        #
+00021a70: 2043 6865 636b 2027 5465 7374 2720 7461   Check 'Test' ta
+00021a80: 6720 6973 206e 6f74 2069 6e20 7468 6520  g is not in the 
+00021a90: 6462 0a20 2020 2020 2020 2073 656c 662e  db.        self.
+00021aa0: 6173 7365 7274 4661 6c73 6528 0a20 2020  assertFalse(.   
+00021ab0: 2020 2020 2020 2020 2022 5465 7374 220a           "Test".
+00021ac0: 2020 2020 2020 2020 2020 2020 696e 2073              in s
+00021ad0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00021ae0: 7072 6f6a 6563 742e 7365 7373 696f 6e2e  project.session.
+00021af0: 6765 745f 6669 656c 6473 5f6e 616d 6573  get_fields_names
+00021b00: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00021b10: 2020 434f 4c4c 4543 5449 4f4e 5f43 5552    COLLECTION_CUR
+00021b20: 5245 4e54 0a20 2020 2020 2020 2020 2020  RENT.           
+00021b30: 2029 0a20 2020 2020 2020 2029 0a20 2020   ).        ).   
+00021b40: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00021b50: 4661 6c73 6528 0a20 2020 2020 2020 2020  False(.         
+00021b60: 2020 2022 5465 7374 220a 2020 2020 2020     "Test".      
+00021b70: 2020 2020 2020 696e 2073 656c 662e 6d61        in self.ma
+00021b80: 696e 5f77 696e 646f 772e 7072 6f6a 6563  in_window.projec
+00021b90: 742e 7365 7373 696f 6e2e 6765 745f 6669  t.session.get_fi
+00021ba0: 656c 6473 5f6e 616d 6573 280a 2020 2020  elds_names(.    
+00021bb0: 2020 2020 2020 2020 2020 2020 434f 4c4c              COLL
+00021bc0: 4543 5449 4f4e 5f49 4e49 5449 414c 0a20  ECTION_INITIAL. 
+00021bd0: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00021be0: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+00021bf0: 2320 342e 2063 6c6f 6e65 2074 6167 0a20  # 4. clone tag. 
+00021c00: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
+00021c10: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
+00021c20: 7773 6572 2e63 6c6f 6e65 5f74 6167 5f61  wser.clone_tag_a
+00021c30: 6374 696f 6e2e 7472 6967 6765 7228 290a  ction.trigger().
+00021c40: 2020 2020 2020 2020 636c 6f6e 655f 7461          clone_ta
+00021c50: 6720 3d20 7365 6c66 2e6d 6169 6e5f 7769  g = self.main_wi
+00021c60: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
+00021c70: 722e 706f 705f 7570 5f63 6c6f 6e65 5f74  r.pop_up_clone_t
+00021c80: 6167 0a0a 2020 2020 2020 2020 666f 7220  ag..        for 
+00021c90: 666f 765f 636f 6c75 6d6e 2069 6e20 7261  fov_column in ra
+00021ca0: 6e67 6528 636c 6f6e 655f 7461 672e 6c69  nge(clone_tag.li
+00021cb0: 7374 5f77 6964 6765 745f 7461 6773 2e63  st_widget_tags.c
+00021cc0: 6f75 6e74 2829 293a 0a20 2020 2020 2020  ount()):.       
+00021cd0: 2020 2020 2069 6620 636c 6f6e 655f 7461       if clone_ta
+00021ce0: 672e 6c69 7374 5f77 6964 6765 745f 7461  g.list_widget_ta
+00021cf0: 6773 2e69 7465 6d28 666f 765f 636f 6c75  gs.item(fov_colu
+00021d00: 6d6e 292e 7465 7874 2829 203d 3d20 2246  mn).text() == "F
+00021d10: 4f56 223a 0a20 2020 2020 2020 2020 2020  OV":.           
+00021d20: 2020 2020 2062 7265 616b 0a0a 2020 2020       break..    
+00021d30: 2020 2020 2320 2746 4f56 2720 7461 6720      # 'FOV' tag 
+00021d40: 7365 6c65 6374 6564 0a20 2020 2020 2020  selected.       
+00021d50: 2063 6c6f 6e65 5f74 6167 2e6c 6973 745f   clone_tag.list_
+00021d60: 7769 6467 6574 5f74 6167 732e 7365 7443  widget_tags.setC
+00021d70: 7572 7265 6e74 526f 7728 666f 765f 636f  urrentRow(fov_co
+00021d80: 6c75 6d6e 290a 2020 2020 2020 2020 636c  lumn).        cl
+00021d90: 6f6e 655f 7461 672e 6c69 6e65 5f65 6469  one_tag.line_edi
+00021da0: 745f 6e65 775f 7461 675f 6e61 6d65 2e73  t_new_tag_name.s
+00021db0: 6574 5465 7874 2822 5465 7374 2229 0a20  etText("Test"). 
+00021dc0: 2020 2020 2020 2051 5465 7374 2e6d 6f75         QTest.mou
+00021dd0: 7365 436c 6963 6b28 636c 6f6e 655f 7461  seClick(clone_ta
+00021de0: 672e 7075 7368 5f62 7574 746f 6e5f 6f6b  g.push_button_ok
+00021df0: 2c20 5174 2e4c 6566 7442 7574 746f 6e29  , Qt.LeftButton)
+00021e00: 0a0a 2020 2020 2020 2020 2320 4368 6563  ..        # Chec
+00021e10: 6b20 2754 6573 7427 2074 6167 2069 7320  k 'Test' tag is 
+00021e20: 696e 2074 6865 2064 620a 2020 2020 2020  in the db.      
+00021e30: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+00021e40: 6528 0a20 2020 2020 2020 2020 2020 2022  e(.            "
+00021e50: 5465 7374 220a 2020 2020 2020 2020 2020  Test".          
+00021e60: 2020 696e 2073 656c 662e 6d61 696e 5f77    in self.main_w
+00021e70: 696e 646f 772e 7072 6f6a 6563 742e 7365  indow.project.se
+00021e80: 7373 696f 6e2e 6765 745f 6669 656c 6473  ssion.get_fields
+00021e90: 5f6e 616d 6573 280a 2020 2020 2020 2020  _names(.        
+00021ea0: 2020 2020 2020 2020 434f 4c4c 4543 5449          COLLECTI
+00021eb0: 4f4e 5f43 5552 5245 4e54 0a20 2020 2020  ON_CURRENT.     
+00021ec0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00021ed0: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
+00021ee0: 6173 7365 7274 5472 7565 280a 2020 2020  assertTrue(.    
+00021ef0: 2020 2020 2020 2020 2254 6573 7422 0a20          "Test". 
+00021f00: 2020 2020 2020 2020 2020 2069 6e20 7365             in se
+00021f10: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
+00021f20: 726f 6a65 6374 2e73 6573 7369 6f6e 2e67  roject.session.g
+00021f30: 6574 5f66 6965 6c64 735f 6e61 6d65 7328  et_fields_names(
+00021f40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00021f50: 2043 4f4c 4c45 4354 494f 4e5f 494e 4954   COLLECTION_INIT
+00021f60: 4941 4c0a 2020 2020 2020 2020 2020 2020  IAL.            
+00021f70: 290a 2020 2020 2020 2020 290a 0a20 2020  ).        )..   
+00021f80: 2020 2020 2023 2056 616c 7565 2069 6e20       # Value in 
+00021f90: 7468 6520 6462 0a20 2020 2020 2020 2069  the db.        i
+00021fa0: 7465 6d20 3d20 7365 6c66 2e6d 6169 6e5f  tem = self.main_
+00021fb0: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
+00021fc0: 7365 722e 7461 626c 655f 6461 7461 2e69  ser.table_data.i
+00021fd0: 7465 6d28 312c 2030 290a 2020 2020 2020  tem(1, 0).      
+00021fe0: 2020 7363 616e 5f6e 616d 6520 3d20 6974    scan_name = it
+00021ff0: 656d 2e74 6578 7428 290a 2020 2020 2020  em.text().      
+00022000: 2020 7661 6c75 6520 3d20 7365 6c66 2e6d    value = self.m
+00022010: 6169 6e5f 7769 6e64 6f77 2e70 726f 6a65  ain_window.proje
+00022020: 6374 2e73 6573 7369 6f6e 2e67 6574 5f76  ct.session.get_v
+00022030: 616c 7565 280a 2020 2020 2020 2020 2020  alue(.          
+00022040: 2020 434f 4c4c 4543 5449 4f4e 5f43 5552    COLLECTION_CUR
+00022050: 5245 4e54 2c20 7363 616e 5f6e 616d 652c  RENT, scan_name,
+00022060: 2022 5465 7374 220a 2020 2020 2020 2020   "Test".        
+00022070: 290a 2020 2020 2020 2020 7661 6c75 655f  ).        value_
+00022080: 696e 6974 6961 6c20 3d20 7365 6c66 2e6d  initial = self.m
+00022090: 6169 6e5f 7769 6e64 6f77 2e70 726f 6a65  ain_window.proje
+000220a0: 6374 2e73 6573 7369 6f6e 2e67 6574 5f76  ct.session.get_v
+000220b0: 616c 7565 280a 2020 2020 2020 2020 2020  alue(.          
+000220c0: 2020 434f 4c4c 4543 5449 4f4e 5f49 4e49    COLLECTION_INI
+000220d0: 5449 414c 2c20 7363 616e 5f6e 616d 652c  TIAL, scan_name,
+000220e0: 2022 5465 7374 220a 2020 2020 2020 2020   "Test".        
+000220f0: 290a 0a20 2020 2020 2020 2023 2056 616c  )..        # Val
+00022100: 7565 2069 6e20 7468 6520 4461 7461 4272  ue in the DataBr
+00022110: 6f77 7365 720a 2020 2020 2020 2020 7465  owser.        te
+00022120: 7374 5f63 6f6c 756d 6e20 3d20 280a 2020  st_column = (.  
+00022130: 2020 2020 2020 2020 2020 7365 6c66 2e6d            self.m
+00022140: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
+00022150: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
+00022160: 7461 2e67 6574 5f74 6167 5f63 6f6c 756d  ta.get_tag_colum
+00022170: 6e0a 2020 2020 2020 2020 2928 2254 6573  n.        )("Tes
+00022180: 7422 290a 2020 2020 2020 2020 6974 656d  t").        item
+00022190: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
+000221a0: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
+000221b0: 2e74 6162 6c65 5f64 6174 612e 6974 656d  .table_data.item
+000221c0: 2831 2c20 7465 7374 5f63 6f6c 756d 6e29  (1, test_column)
+000221d0: 0a20 2020 2020 2020 2064 6174 6162 726f  .        databro
+000221e0: 7773 6572 203d 2069 7465 6d2e 7465 7874  wser = item.text
+000221f0: 2829 0a0a 2020 2020 2020 2020 2320 4368  ()..        # Ch
+00022200: 6563 6b20 6571 7561 6c69 7479 2062 6574  eck equality bet
+00022210: 7765 656e 2044 6174 6142 726f 7773 6572  ween DataBrowser
+00022220: 2061 6e64 2064 620a 2020 2020 2020 2020   and db.        
+00022230: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00022240: 2876 616c 7565 2c20 5b33 2e30 2c20 332e  (value, [3.0, 3.
+00022250: 305d 290a 2020 2020 2020 2020 7365 6c66  0]).        self
+00022260: 2e61 7373 6572 7445 7175 616c 2876 616c  .assertEqual(val
+00022270: 7565 2c20 6173 742e 6c69 7465 7261 6c5f  ue, ast.literal_
+00022280: 6576 616c 2864 6174 6162 726f 7773 6572  eval(databrowser
+00022290: 2929 0a20 2020 2020 2020 2073 656c 662e  )).        self.
+000222a0: 6173 7365 7274 4571 7561 6c28 7661 6c75  assertEqual(valu
+000222b0: 652c 2076 616c 7565 5f69 6e69 7469 616c  e, value_initial
+000222c0: 290a 0a20 2020 2020 2020 2023 2055 6e64  )..        # Und
+000222d0: 6f0a 2020 2020 2020 2020 7365 6c66 2e6d  o.        self.m
+000222e0: 6169 6e5f 7769 6e64 6f77 2e61 6374 696f  ain_window.actio
+000222f0: 6e5f 756e 646f 2e74 7269 6767 6572 2829  n_undo.trigger()
+00022300: 0a0a 2020 2020 2020 2020 2320 4368 6563  ..        # Chec
+00022310: 6b20 2754 6573 7427 2074 6167 2069 7320  k 'Test' tag is 
+00022320: 6e6f 7420 696e 2074 6865 2064 6220 616e  not in the db an
+00022330: 6420 6e6f 7420 696e 2074 6865 2044 6174  d not in the Dat
+00022340: 6142 726f 7773 6572 0a20 2020 2020 2020  aBrowser.       
+00022350: 2073 656c 662e 6173 7365 7274 4661 6c73   self.assertFals
+00022360: 6528 0a20 2020 2020 2020 2020 2020 2022  e(.            "
+00022370: 5465 7374 220a 2020 2020 2020 2020 2020  Test".          
+00022380: 2020 696e 2073 656c 662e 6d61 696e 5f77    in self.main_w
+00022390: 696e 646f 772e 7072 6f6a 6563 742e 7365  indow.project.se
+000223a0: 7373 696f 6e2e 6765 745f 6669 656c 6473  ssion.get_fields
+000223b0: 5f6e 616d 6573 280a 2020 2020 2020 2020  _names(.        
+000223c0: 2020 2020 2020 2020 434f 4c4c 4543 5449          COLLECTI
+000223d0: 4f4e 5f43 5552 5245 4e54 0a20 2020 2020  ON_CURRENT.     
+000223e0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+000223f0: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
+00022400: 6173 7365 7274 4661 6c73 6528 0a20 2020  assertFalse(.   
+00022410: 2020 2020 2020 2020 2022 5465 7374 220a           "Test".
+00022420: 2020 2020 2020 2020 2020 2020 696e 2073              in s
+00022430: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00022440: 7072 6f6a 6563 742e 7365 7373 696f 6e2e  project.session.
+00022450: 6765 745f 6669 656c 6473 5f6e 616d 6573  get_fields_names
+00022460: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00022470: 2020 434f 4c4c 4543 5449 4f4e 5f49 4e49    COLLECTION_INI
+00022480: 5449 414c 0a20 2020 2020 2020 2020 2020  TIAL.           
+00022490: 2029 0a20 2020 2020 2020 2029 0a20 2020   ).        ).   
+000224a0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+000224b0: 4973 4e6f 6e65 280a 2020 2020 2020 2020  IsNone(.        
+000224c0: 2020 2020 2873 656c 662e 6d61 696e 5f77      (self.main_w
+000224d0: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
+000224e0: 6572 2e74 6162 6c65 5f64 6174 612e 6765  er.table_data.ge
+000224f0: 745f 7461 675f 636f 6c75 6d6e 2928 2254  t_tag_column)("T
+00022500: 6573 7422 290a 2020 2020 2020 2020 290a  est").        ).
+00022510: 0a20 2020 2064 6566 2074 6573 745f 756e  .    def test_un
+00022520: 6e61 6d65 645f 7072 6f6a 5f73 6f66 745f  named_proj_soft_
+00022530: 6f70 656e 2873 656c 6629 3a0a 2020 2020  open(self):.    
+00022540: 2020 2020 2222 2254 6573 7473 2075 6e6e      """Tests unn
+00022550: 616d 6564 2070 726f 6a65 6374 2063 7265  amed project cre
+00022560: 6174 696f 6e20 6174 2073 6f66 7477 6172  ation at softwar
+00022570: 6520 6f70 656e 696e 672e 2222 220a 0a20  e opening.""".. 
+00022580: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00022590: 7274 4973 496e 7374 616e 6365 2873 656c  rtIsInstance(sel
+000225a0: 662e 7072 6f6a 6563 742c 2050 726f 6a65  f.project, Proje
+000225b0: 6374 290a 2020 2020 2020 2020 7365 6c66  ct).        self
+000225c0: 2e61 7373 6572 7445 7175 616c 2873 656c  .assertEqual(sel
+000225d0: 662e 6d61 696e 5f77 696e 646f 772e 7072  f.main_window.pr
+000225e0: 6f6a 6563 742e 6765 744e 616d 6528 292c  oject.getName(),
+000225f0: 2022 556e 6e61 6d65 6420 7072 6f6a 6563   "Unnamed projec
+00022600: 7422 290a 2020 2020 2020 2020 7461 6773  t").        tags
+00022610: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
+00022620: 646f 772e 7072 6f6a 6563 742e 7365 7373  dow.project.sess
+00022630: 696f 6e2e 6765 745f 6669 656c 6473 5f6e  ion.get_fields_n
+00022640: 616d 6573 280a 2020 2020 2020 2020 2020  ames(.          
+00022650: 2020 434f 4c4c 4543 5449 4f4e 5f43 5552    COLLECTION_CUR
+00022660: 5245 4e54 0a20 2020 2020 2020 2029 0a20  RENT.        ). 
+00022670: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00022680: 7274 4571 7561 6c28 6c65 6e28 7461 6773  rtEqual(len(tags
+00022690: 292c 2036 290a 2020 2020 2020 2020 7365  ), 6).        se
+000226a0: 6c66 2e61 7373 6572 7454 7275 6528 5441  lf.assertTrue(TA
+000226b0: 475f 4348 4543 4b53 554d 2069 6e20 7461  G_CHECKSUM in ta
+000226c0: 6773 290a 2020 2020 2020 2020 7365 6c66  gs).        self
+000226d0: 2e61 7373 6572 7454 7275 6528 5441 475f  .assertTrue(TAG_
+000226e0: 4649 4c45 4e41 4d45 2069 6e20 7461 6773  FILENAME in tags
+000226f0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00022700: 7373 6572 7454 7275 6528 5441 475f 5459  ssertTrue(TAG_TY
+00022710: 5045 2069 6e20 7461 6773 290a 2020 2020  PE in tags).    
+00022720: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
+00022730: 7275 6528 5441 475f 4558 505f 5459 5045  rue(TAG_EXP_TYPE
+00022740: 2069 6e20 7461 6773 290a 2020 2020 2020   in tags).      
+00022750: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+00022760: 6528 5441 475f 4252 4943 4b53 2069 6e20  e(TAG_BRICKS in 
+00022770: 7461 6773 290a 2020 2020 2020 2020 7365  tags).        se
+00022780: 6c66 2e61 7373 6572 7454 7275 6528 5441  lf.assertTrue(TA
+00022790: 475f 4849 5354 4f52 5920 696e 2074 6167  G_HISTORY in tag
+000227a0: 7329 0a20 2020 2020 2020 2073 656c 662e  s).        self.
+000227b0: 6173 7365 7274 4571 7561 6c28 0a20 2020  assertEqual(.   
+000227c0: 2020 2020 2020 2020 2073 656c 662e 6d61           self.ma
+000227d0: 696e 5f77 696e 646f 772e 7072 6f6a 6563  in_window.projec
+000227e0: 742e 7365 7373 696f 6e2e 6765 745f 646f  t.session.get_do
+000227f0: 6375 6d65 6e74 735f 6e61 6d65 7328 0a20  cuments_names(. 
+00022800: 2020 2020 2020 2020 2020 2020 2020 2043                 C
+00022810: 4f4c 4c45 4354 494f 4e5f 4355 5252 454e  OLLECTION_CURREN
+00022820: 540a 2020 2020 2020 2020 2020 2020 292c  T.            ),
+00022830: 0a20 2020 2020 2020 2020 2020 205b 5d2c  .            [],
+00022840: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00022850: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00022860: 7561 6c28 0a20 2020 2020 2020 2020 2020  ual(.           
+00022870: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+00022880: 772e 7072 6f6a 6563 742e 7365 7373 696f  w.project.sessio
+00022890: 6e2e 6765 745f 646f 6375 6d65 6e74 735f  n.get_documents_
+000228a0: 6e61 6d65 7328 0a20 2020 2020 2020 2020  names(.         
+000228b0: 2020 2020 2020 2043 4f4c 4c45 4354 494f         COLLECTIO
+000228c0: 4e5f 494e 4954 4941 4c0a 2020 2020 2020  N_INITIAL.      
+000228d0: 2020 2020 2020 292c 0a20 2020 2020 2020        ),.       
+000228e0: 2020 2020 205b 5d2c 0a20 2020 2020 2020       [],.       
+000228f0: 2029 0a20 2020 2020 2020 2063 6f6c 6c65   ).        colle
+00022900: 6374 696f 6e73 203d 2073 656c 662e 6d61  ctions = self.ma
+00022910: 696e 5f77 696e 646f 772e 7072 6f6a 6563  in_window.projec
+00022920: 742e 7365 7373 696f 6e2e 6765 745f 636f  t.session.get_co
+00022930: 6c6c 6563 7469 6f6e 735f 6e61 6d65 7328  llections_names(
+00022940: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00022950: 7373 6572 7445 7175 616c 286c 656e 2863  ssertEqual(len(c
+00022960: 6f6c 6c65 6374 696f 6e73 292c 2035 290a  ollections), 5).
+00022970: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00022980: 6572 7454 7275 6528 434f 4c4c 4543 5449  ertTrue(COLLECTI
+00022990: 4f4e 5f49 4e49 5449 414c 2069 6e20 636f  ON_INITIAL in co
+000229a0: 6c6c 6563 7469 6f6e 7329 0a20 2020 2020  llections).     
+000229b0: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
+000229c0: 7565 2843 4f4c 4c45 4354 494f 4e5f 4355  ue(COLLECTION_CU
+000229d0: 5252 454e 5420 696e 2063 6f6c 6c65 6374  RRENT in collect
+000229e0: 696f 6e73 290a 2020 2020 2020 2020 7365  ions).        se
+000229f0: 6c66 2e61 7373 6572 7454 7275 6528 434f  lf.assertTrue(CO
+00022a00: 4c4c 4543 5449 4f4e 5f42 5249 434b 2069  LLECTION_BRICK i
+00022a10: 6e20 636f 6c6c 6563 7469 6f6e 7329 0a20  n collections). 
+00022a20: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00022a30: 7274 5472 7565 2843 4f4c 4c45 4354 494f  rtTrue(COLLECTIO
+00022a40: 4e5f 4849 5354 4f52 5920 696e 2063 6f6c  N_HISTORY in col
+00022a50: 6c65 6374 696f 6e73 290a 2020 2020 2020  lections).      
+00022a60: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00022a70: 616c 280a 2020 2020 2020 2020 2020 2020  al(.            
+00022a80: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+00022a90: 2e77 696e 646f 7754 6974 6c65 2829 2c0a  .windowTitle(),.
+00022aa0: 2020 2020 2020 2020 2020 2020 224d 4941              "MIA
+00022ab0: 202d 204d 756c 7469 7061 7261 6d65 7472   - Multiparametr
+00022ac0: 6963 2049 6d61 6765 2041 6e61 6c79 7369  ic Image Analysi
+00022ad0: 7320 220a 2020 2020 2020 2020 2020 2020  s ".            
+00022ae0: 2228 4164 6d69 6e20 6d6f 6465 2920 2d20  "(Admin mode) - 
+00022af0: 556e 6e61 6d65 6420 7072 6f6a 6563 7422  Unnamed project"
+00022b00: 2c0a 2020 2020 2020 2020 290a 0a20 2020  ,.        )..   
+00022b10: 2064 6566 2074 6573 745f 7570 6461 7465   def test_update
+00022b20: 5f64 6174 615f 6869 7374 6f72 7928 7365  _data_history(se
+00022b30: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
+00022b40: 5570 6461 7465 7320 7468 6520 6869 7374  Updates the hist
+00022b50: 6f72 7920 6f66 2064 6174 6120 7468 6174  ory of data that
+00022b60: 2068 6176 6520 6265 656e 2072 652d 7772   have been re-wr
+00022b70: 6974 7465 6e2e 0a0a 2020 2020 2020 2020  itten...        
+00022b80: 2d20 5465 7374 733a 2050 726f 6a65 6374  - Tests: Project
+00022b90: 2e75 7064 6174 655f 6461 7461 5f68 6973  .update_data_his
+00022ba0: 746f 7279 0a20 2020 2020 2020 2022 2222  tory.        """
+00022bb0: 0a0a 2020 2020 2020 2020 2320 4372 6561  ..        # Crea
+00022bc0: 7465 7320 6120 7465 7374 2070 726f 6a65  tes a test proje
+00022bd0: 6374 0a20 2020 2020 2020 2074 6573 745f  ct.        test_
+00022be0: 7072 6f6a 5f70 6174 6820 3d20 7365 6c66  proj_path = self
+00022bf0: 2e67 6574 5f6e 6577 5f74 6573 745f 7072  .get_new_test_pr
+00022c00: 6f6a 6563 7428 6c69 6768 743d 5472 7565  oject(light=True
+00022c10: 290a 2020 2020 2020 2020 7365 6c66 2e6d  ).        self.m
+00022c20: 6169 6e5f 7769 6e64 6f77 2e73 7769 7463  ain_window.switc
+00022c30: 685f 7072 6f6a 6563 7428 7465 7374 5f70  h_project(test_p
+00022c40: 726f 6a5f 7061 7468 2c20 2274 6573 745f  roj_path, "test_
+00022c50: 7072 6f6a 6563 7422 290a 0a20 2020 2020  project")..     
+00022c60: 2020 2023 2047 6574 7320 6120 7363 616e     # Gets a scan
+00022c70: 2074 6861 7420 636f 6e74 6169 6e73 2061   that contains a
+00022c80: 2073 6d6f 6f74 6820 6272 6963 6b20 696e   smooth brick in
+00022c90: 2069 7473 2068 6973 746f 7279 0a20 2020   its history.   
+00022ca0: 2020 2020 204e 4949 5f46 494c 455f 3320       NII_FILE_3 
+00022cb0: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
+00022cc0: 2273 4775 6572 6265 742d 4336 2d32 3031  "sGuerbet-C6-201
+00022cd0: 342d 5261 742d 4b35 322d 5475 6265 3237  4-Rat-K52-Tube27
+00022ce0: 2d32 3031 342d 3032 2d31 3431 3032 3331  -2014-02-1410231
+00022cf0: 372d 3031 2d47 315f 220a 2020 2020 2020  7-01-G1_".      
+00022d00: 2020 2020 2020 2247 7565 7262 6574 5f41        "Guerbet_A
+00022d10: 6e61 742d 5241 5245 7076 6d2d 3030 3032  nat-RAREpvm-0002
+00022d20: 3230 5f30 3030 2e6e 6969 220a 2020 2020  20_000.nii".    
+00022d30: 2020 2020 290a 2020 2020 2020 2020 444f      ).        DO
+00022d40: 4355 4d45 4e54 5f33 203d 206f 732e 7061  CUMENT_3 = os.pa
+00022d50: 7468 2e6a 6f69 6e28 2264 6174 6122 2c20  th.join("data", 
+00022d60: 2264 6572 6976 6564 5f64 6174 6122 2c20  "derived_data", 
+00022d70: 4e49 495f 4649 4c45 5f33 290a 0a20 2020  NII_FILE_3)..   
+00022d80: 2020 2020 2023 2043 6c65 616e 7570 2065       # Cleanup e
+00022d90: 6172 6c69 6572 2068 6973 746f 7279 2061  arlier history a
+00022da0: 6e64 2063 6865 636b 2074 6861 7420 6e6f  nd check that no
+00022db0: 206f 6273 6f6c 6574 6520 6272 6963 6b73   obsolete bricks
+00022dc0: 2069 7320 6465 7465 6374 6564 0a20 2020   is detected.   
+00022dd0: 2020 2020 206f 6273 6f6c 6574 655f 6272       obsolete_br
+00022de0: 6963 6b73 203d 2073 656c 662e 6d61 696e  icks = self.main
+00022df0: 5f77 696e 646f 772e 7072 6f6a 6563 742e  _window.project.
+00022e00: 7570 6461 7465 5f64 6174 615f 6869 7374  update_data_hist
+00022e10: 6f72 7928 0a20 2020 2020 2020 2020 2020  ory(.           
+00022e20: 205b 444f 4355 4d45 4e54 5f33 5d0a 2020   [DOCUMENT_3].  
+00022e30: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00022e40: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00022e50: 286f 6273 6f6c 6574 655f 6272 6963 6b73  (obsolete_bricks
+00022e60: 2c20 7365 7428 2929 0a0a 2020 2020 6465  , set())..    de
+00022e70: 6620 7465 7374 5f75 7064 6174 655f 6465  f test_update_de
+00022e80: 6661 756c 745f 7661 6c75 6528 7365 6c66  fault_value(self
+00022e90: 293a 0a20 2020 2020 2020 2022 2222 5570  ):.        """Up
+00022ea0: 6461 7465 7320 7468 6520 7661 6c75 6573  dates the values
+00022eb0: 2077 6865 6e20 6120 6c69 7374 206f 6620   when a list of 
+00022ec0: 6465 6661 756c 7420 7661 6c75 6573 2069  default values i
+00022ed0: 7320 6372 6561 7465 642e 0a0a 2020 2020  s created...    
+00022ee0: 2020 2020 5465 7374 733a 2044 6566 6175      Tests: Defau
+00022ef0: 6c74 5661 6c75 654c 6973 7443 7265 6174  ltValueListCreat
+00022f00: 696f 6e2e 7570 6461 7465 5f64 6566 6175  ion.update_defau
+00022f10: 6c74 5f76 616c 7565 0a20 2020 2020 2020  lt_value.       
+00022f20: 2022 2222 0a0a 2020 2020 2020 2020 2320   """..        # 
+00022f30: 5365 7420 7368 6f72 7463 7574 7320 666f  Set shortcuts fo
+00022f40: 7220 6f62 6a65 6374 7320 7468 6174 2061  r objects that a
+00022f50: 7265 206f 6674 656e 2075 7365 640a 2020  re often used.  
+00022f60: 2020 2020 2020 6461 7461 5f62 726f 7773        data_brows
+00022f70: 6572 203d 2073 656c 662e 6d61 696e 5f77  er = self.main_w
+00022f80: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
+00022f90: 6572 0a0a 2020 2020 2020 2020 2320 5468  er..        # Th
+00022fa0: 6520 6f62 6a65 6374 7320 6172 6520 7375  e objects are su
+00022fb0: 6363 6573 7369 7665 6c79 2063 7265 6174  ccessively creat
+00022fc0: 6564 2069 6e20 7468 6520 666f 6c6c 6f77  ed in the follow
+00022fd0: 696e 6720 6f72 6465 723a 0a20 2020 2020  ing order:.     
+00022fe0: 2020 2023 2050 6f70 5570 4164 6454 6167     # PopUpAddTag
+00022ff0: 203e 2044 6566 6175 6c74 5661 6c75 6551   > DefaultValueQ
+00023000: 4c69 6e65 4564 6974 203e 2044 6566 6175  LineEdit > Defau
+00023010: 6c74 5661 6c75 654c 6973 7443 7265 6174  ltValueListCreat
+00023020: 696f 6e0a 2020 2020 2020 2020 706f 705f  ion.        pop_
+00023030: 7570 203d 2050 6f70 5570 4164 6454 6167  up = PopUpAddTag
+00023040: 2864 6174 615f 6272 6f77 7365 722c 2064  (data_browser, d
+00023050: 6174 615f 6272 6f77 7365 722e 7072 6f6a  ata_browser.proj
+00023060: 6563 7429 0a20 2020 2020 2020 2074 6578  ect).        tex
+00023070: 745f 6564 7420 3d20 706f 705f 7570 2e74  t_edt = pop_up.t
+00023080: 6578 745f 6564 6974 5f64 6566 6175 6c74  ext_edit_default
+00023090: 5f76 616c 7565 0a0a 2020 2020 2020 2020  _value..        
+000230a0: 2320 4173 7375 7265 7320 7468 6520 696e  # Assures the in
+000230b0: 7374 616e 7469 6174 696f 6e20 6f66 2027  stantiation of '
+000230c0: 4465 6661 756c 7456 616c 7565 4c69 7374  DefaultValueList
+000230d0: 4372 6561 7469 6f6e 270a 2020 2020 2020  Creation'.      
+000230e0: 2020 7465 7874 5f65 6474 2e70 6172 656e    text_edt.paren
+000230f0: 742e 7479 7065 203d 2022 6c69 7374 5f22  t.type = "list_"
+00023100: 0a0a 2020 2020 2020 2020 2320 4d6f 636b  ..        # Mock
+00023110: 7320 7468 6520 6578 6563 7574 696f 6e20  s the execution 
+00023120: 6f66 2061 2064 6961 6c6f 6720 7769 6e64  of a dialog wind
+00023130: 6f77 0a20 2020 2020 2020 2044 6566 6175  ow.        Defau
+00023140: 6c74 5661 6c75 654c 6973 7443 7265 6174  ltValueListCreat
+00023150: 696f 6e2e 7368 6f77 203d 204d 6f63 6b28  ion.show = Mock(
+00023160: 290a 0a20 2020 2020 2020 2023 2027 4465  )..        # 'De
+00023170: 6661 756c 7456 616c 7565 4c69 7374 4372  faultValueListCr
+00023180: 6561 7469 6f6e 2720 6361 6e20 6265 2069  eation' can be i
+00023190: 6e73 7461 6e74 6961 7465 6420 7769 7468  nstantiated with
+000231a0: 2061 6e20 656d 7074 790a 2020 2020 2020   an empty.      
+000231b0: 2020 2320 7374 7269 6e67 2c20 6e6f 6e2d    # string, non-
+000231c0: 656d 7074 7920 7374 7269 6e67 206f 7220  empty string or 
+000231d0: 6c69 7374 0a20 2020 2020 2020 2023 204f  list.        # O
+000231e0: 6e6c 7920 6120 6c69 7374 206c 6561 6473  nly a list leads
+000231f0: 2074 6f20 7468 6520 7461 626c 6520 7661   to the table va
+00023200: 6c75 6573 2062 6569 6e67 2066 696c 6c65  lues being fille
+00023210: 640a 2020 2020 2020 2020 2320 456d 7074  d.        # Empt
+00023220: 7920 7374 7269 6e67 0a20 2020 2020 2020  y string.       
+00023230: 2074 6578 745f 6564 742e 7365 7454 6578   text_edt.setTex
+00023240: 7428 2222 290a 2020 2020 2020 2020 7465  t("").        te
+00023250: 7874 5f65 6474 2e6d 6f75 7365 5072 6573  xt_edt.mousePres
+00023260: 7345 7665 6e74 284e 6f6e 6529 0a0a 2020  sEvent(None)..  
+00023270: 2020 2020 2020 2320 4e6f 6e2d 656d 7074        # Non-empt
+00023280: 7920 7374 7269 6e67 0a20 2020 2020 2020  y string.       
+00023290: 2074 6578 745f 6564 742e 7365 7454 6578   text_edt.setTex
+000232a0: 7428 226e 6f6e 5f65 6d70 7479 2229 0a20  t("non_empty"). 
+000232b0: 2020 2020 2020 2074 6578 745f 6564 742e         text_edt.
+000232c0: 6d6f 7573 6550 7265 7373 4576 656e 7428  mousePressEvent(
+000232d0: 4e6f 6e65 290a 2020 2020 2020 2020 7365  None).        se
+000232e0: 6c66 2e61 7373 6572 7445 7175 616c 2874  lf.assertEqual(t
+000232f0: 6578 745f 6564 742e 6c69 7374 5f63 7265  ext_edt.list_cre
+00023300: 6174 696f 6e2e 7461 626c 652e 6974 656d  ation.table.item
+00023310: 4174 2830 2c20 3029 2e74 6578 7428 292c  At(0, 0).text(),
+00023320: 2022 2229 0a0a 2020 2020 2020 2020 2320   "")..        # 
+00023330: 4c69 7374 206f 6620 6c65 6e67 7468 203d  List of length =
+00023340: 2032 0a20 2020 2020 2020 2074 6578 745f   2.        text_
+00023350: 6564 742e 7365 7454 6578 7428 225b 312c  edt.setText("[1,
+00023360: 2032 5d22 290a 2020 2020 2020 2020 7465   2]").        te
+00023370: 7874 5f65 6474 2e6d 6f75 7365 5072 6573  xt_edt.mousePres
+00023380: 7345 7665 6e74 284e 6f6e 6529 0a0a 2020  sEvent(None)..  
+00023390: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+000233a0: 7445 7175 616c 2874 6578 745f 6564 742e  tEqual(text_edt.
+000233b0: 6c69 7374 5f63 7265 6174 696f 6e2e 7461  list_creation.ta
+000233c0: 626c 652e 6974 656d 2830 2c20 3029 2e74  ble.item(0, 0).t
+000233d0: 6578 7428 292c 2022 3122 290a 2020 2020  ext(), "1").    
+000233e0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+000233f0: 7175 616c 2874 6578 745f 6564 742e 6c69  qual(text_edt.li
+00023400: 7374 5f63 7265 6174 696f 6e2e 7461 626c  st_creation.tabl
+00023410: 652e 6974 656d 2830 2c20 3129 2e74 6578  e.item(0, 1).tex
+00023420: 7428 292c 2022 3222 290a 2020 2020 2020  t(), "2").      
+00023430: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00023440: 616c 2874 6578 745f 6564 742e 6c69 7374  al(text_edt.list
+00023450: 5f63 7265 6174 696f 6e2e 7461 626c 652e  _creation.table.
+00023460: 636f 6c75 6d6e 436f 756e 7428 292c 2032  columnCount(), 2
+00023470: 290a 2020 2020 2020 2020 2320 2727 5b31  ).        # ''[1
+00023480: 5d27 2720 7769 6c6c 2062 6563 6f6d 6520  ]'' will become 
+00023490: 275b 315d 2720 6166 7465 7220 6265 696e  '[1]' after bein
+000234a0: 6720 7061 7373 6564 2074 6872 6f75 6768  g passed through
+000234b0: 2073 0a20 2020 2020 2020 2023 2027 6173   s.        # 'as
+000234c0: 742e 6c69 7465 7261 6c5f 6576 616c 2829  t.literal_eval()
+000234d0: 270a 0a20 2020 2020 2020 2023 2041 6464  '..        # Add
+000234e0: 7320 6f6e 6520 656c 656d 656e 7420 746f  s one element to
+000234f0: 2074 6865 2074 6162 6c65 0a20 2020 2020   the table.     
+00023500: 2020 2074 6578 745f 6564 742e 6c69 7374     text_edt.list
+00023510: 5f63 7265 6174 696f 6e2e 6164 645f 656c  _creation.add_el
+00023520: 656d 656e 7428 290a 2020 2020 2020 2020  ement().        
+00023530: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00023540: 2874 6578 745f 6564 742e 6c69 7374 5f63  (text_edt.list_c
+00023550: 7265 6174 696f 6e2e 7461 626c 652e 636f  reation.table.co
+00023560: 6c75 6d6e 436f 756e 7428 292c 2033 290a  lumnCount(), 3).
+00023570: 0a20 2020 2020 2020 2023 2052 656d 6f76  .        # Remov
+00023580: 6573 206f 6e65 2065 6c65 6d65 6e74 2074  es one element t
+00023590: 6f20 7468 6520 7461 626c 650a 2020 2020  o the table.    
+000235a0: 2020 2020 7465 7874 5f65 6474 2e6c 6973      text_edt.lis
+000235b0: 745f 6372 6561 7469 6f6e 2e72 656d 6f76  t_creation.remov
+000235c0: 655f 656c 656d 656e 7428 290a 2020 2020  e_element().    
+000235d0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+000235e0: 7175 616c 2874 6578 745f 6564 742e 6c69  qual(text_edt.li
+000235f0: 7374 5f63 7265 6174 696f 6e2e 7461 626c  st_creation.tabl
+00023600: 652e 636f 6c75 6d6e 436f 756e 7428 292c  e.columnCount(),
+00023610: 2032 290a 0a20 2020 2020 2020 2023 2052   2)..        # R
+00023620: 6573 697a 6520 7468 6520 7461 626c 650a  esize the table.
+00023630: 2020 2020 2020 2020 7465 7874 5f65 6474          text_edt
+00023640: 2e6c 6973 745f 6372 6561 7469 6f6e 2e72  .list_creation.r
+00023650: 6573 697a 655f 7461 626c 6528 290a 0a20  esize_table().. 
+00023660: 2020 2020 2020 2023 2052 6573 697a 6520         # Resize 
+00023670: 7468 6520 7461 626c 6520 7768 696c 6520  the table while 
+00023680: 6d6f 636b 696e 6720 6120 636f 6c75 6d6e  mocking a column
+00023690: 2077 6964 7468 206f 6620 3930 3020 656c   width of 900 el
+000236a0: 656d 656e 7473 0a20 2020 2020 2020 2074  ements.        t
+000236b0: 6578 745f 6564 742e 6c69 7374 5f63 7265  ext_edt.list_cre
+000236c0: 6174 696f 6e2e 7461 626c 652e 7365 7443  ation.table.setC
+000236d0: 6f6c 756d 6e57 6964 7468 2830 2c20 3930  olumnWidth(0, 90
+000236e0: 3029 0a20 2020 2020 2020 2074 6578 745f  0).        text_
+000236f0: 6564 742e 6c69 7374 5f63 7265 6174 696f  edt.list_creatio
+00023700: 6e2e 7265 7369 7a65 5f74 6162 6c65 2829  n.resize_table()
+00023710: 0a0a 2020 2020 2020 2020 2320 5468 6520  ..        # The 
+00023720: 6465 6661 756c 7420 7661 6c75 6520 6361  default value ca
+00023730: 6e20 6265 2075 7064 6174 6564 2077 6974  n be updated wit
+00023740: 6820 7365 7665 7261 6c20 7479 7065 7320  h several types 
+00023750: 6f66 2064 6174 610a 2020 2020 2020 2020  of data.        
+00023760: 7479 7065 7320 3d20 5b0a 2020 2020 2020  types = [.      
+00023770: 2020 2020 2020 4649 454c 445f 5459 5045        FIELD_TYPE
+00023780: 5f4c 4953 545f 494e 5445 4745 522c 0a20  _LIST_INTEGER,. 
+00023790: 2020 2020 2020 2020 2020 2046 4945 4c44             FIELD
+000237a0: 5f54 5950 455f 4c49 5354 5f46 4c4f 4154  _TYPE_LIST_FLOAT
+000237b0: 2c0a 2020 2020 2020 2020 2020 2020 4649  ,.            FI
+000237c0: 454c 445f 5459 5045 5f4c 4953 545f 424f  ELD_TYPE_LIST_BO
+000237d0: 4f4c 4541 4e2c 0a20 2020 2020 2020 2020  OLEAN,.         
+000237e0: 2020 2046 4945 4c44 5f54 5950 455f 4c49     FIELD_TYPE_LI
+000237f0: 5354 5f42 4f4f 4c45 414e 2c0a 2020 2020  ST_BOOLEAN,.    
+00023800: 2020 2020 2020 2020 4649 454c 445f 5459          FIELD_TY
+00023810: 5045 5f4c 4953 545f 5354 5249 4e47 2c0a  PE_LIST_STRING,.
+00023820: 2020 2020 2020 2020 2020 2020 4649 454c              FIEL
+00023830: 445f 5459 5045 5f4c 4953 545f 4441 5445  D_TYPE_LIST_DATE
+00023840: 2c0a 2020 2020 2020 2020 2020 2020 4649  ,.            FI
+00023850: 454c 445f 5459 5045 5f4c 4953 545f 4441  ELD_TYPE_LIST_DA
+00023860: 5445 5449 4d45 2c0a 2020 2020 2020 2020  TETIME,.        
+00023870: 2020 2020 4649 454c 445f 5459 5045 5f4c      FIELD_TYPE_L
+00023880: 4953 545f 5449 4d45 2c0a 2020 2020 2020  IST_TIME,.      
+00023890: 2020 5d0a 2020 2020 2020 2020 7661 6c75    ].        valu
+000238a0: 6573 203d 205b 0a20 2020 2020 2020 2020  es = [.         
+000238b0: 2020 2022 5b31 5d22 2c0a 2020 2020 2020     "[1]",.      
+000238c0: 2020 2020 2020 225b 312e 315d 222c 0a20        "[1.1]",. 
+000238d0: 2020 2020 2020 2020 2020 2022 5b54 7275             "[Tru
+000238e0: 655d 222c 0a20 2020 2020 2020 2020 2020  e]",.           
+000238f0: 2022 5b46 616c 7365 5d22 2c0a 2020 2020   "[False]",.    
+00023900: 2020 2020 2020 2020 275b 2273 7472 225d          '["str"]
+00023910: 272c 0a20 2020 2020 2020 2020 2020 2027  ',.            '
+00023920: 5b22 3131 2f31 312f 3131 3131 225d 272c  ["11/11/1111"]',
+00023930: 0a20 2020 2020 2020 2020 2020 2027 5b22  .            '["
+00023940: 3131 2f31 312f 3131 3131 2031 313a 3131  11/11/1111 11:11
+00023950: 3a31 312e 3131 225d 272c 0a20 2020 2020  :11.11"]',.     
+00023960: 2020 2020 2020 2027 5b22 3131 3a31 313a         '["11:11:
+00023970: 3131 2e31 3122 5d27 2c0a 2020 2020 2020  11.11"]',.      
+00023980: 2020 5d0a 0a20 2020 2020 2020 2066 6f72    ]..        for
+00023990: 2074 7970 655f 2c20 7661 6c75 6520 696e   type_, value in
+000239a0: 207a 6970 2874 7970 6573 2c20 7661 6c75   zip(types, valu
+000239b0: 6573 293a 0a20 2020 2020 2020 2020 2020  es):.           
+000239c0: 2074 6578 745f 6564 742e 7365 7454 6578   text_edt.setTex
+000239d0: 7428 7661 6c75 6529 0a20 2020 2020 2020  t(value).       
+000239e0: 2020 2020 2074 6578 745f 6564 742e 6d6f       text_edt.mo
+000239f0: 7573 6550 7265 7373 4576 656e 7428 4e6f  usePressEvent(No
+00023a00: 6e65 290a 2020 2020 2020 2020 2020 2020  ne).            
+00023a10: 7465 7874 5f65 6474 2e6c 6973 745f 6372  text_edt.list_cr
+00023a20: 6561 7469 6f6e 2e74 7970 6520 3d20 7479  eation.type = ty
+00023a30: 7065 5f0a 2020 2020 2020 2020 2020 2020  pe_.            
+00023a40: 7465 7874 5f65 6474 2e6c 6973 745f 6372  text_edt.list_cr
+00023a50: 6561 7469 6f6e 2e75 7064 6174 655f 6465  eation.update_de
+00023a60: 6661 756c 745f 7661 6c75 6528 290a 0a20  fault_value().. 
+00023a70: 2020 2020 2020 2023 2049 6e64 7563 6573         # Induces
+00023a80: 2061 2027 5661 6c75 6545 7272 6f72 272c   a 'ValueError',
+00023a90: 206d 6f63 6b73 2074 6865 2065 7865 6375   mocks the execu
+00023aa0: 7469 6f6e 206f 6620 6120 6469 616c 6f67  tion of a dialog
+00023ab0: 2062 6f78 0a20 2020 2020 2020 2051 4d65   box.        QMe
+00023ac0: 7373 6167 6542 6f78 2e65 7865 6320 3d20  ssageBox.exec = 
+00023ad0: 4d6f 636b 2829 0a20 2020 2020 2020 2074  Mock().        t
+00023ae0: 6578 745f 6564 742e 7365 7454 6578 7428  ext_edt.setText(
+00023af0: 275b 226e 6f74 5f62 6f6f 6c65 616e 225d  '["not_boolean"]
+00023b00: 2729 0a20 2020 2020 2020 2074 6578 745f  ').        text_
+00023b10: 6564 742e 6d6f 7573 6550 7265 7373 4576  edt.mousePressEv
+00023b20: 656e 7428 4e6f 6e65 290a 2020 2020 2020  ent(None).      
+00023b30: 2020 7465 7874 5f65 6474 2e6c 6973 745f    text_edt.list_
+00023b40: 6372 6561 7469 6f6e 2e74 7970 6520 3d20  creation.type = 
+00023b50: 4649 454c 445f 5459 5045 5f4c 4953 545f  FIELD_TYPE_LIST_
+00023b60: 424f 4f4c 4541 4e0a 2020 2020 2020 2020  BOOLEAN.        
+00023b70: 7465 7874 5f65 6474 2e6c 6973 745f 6372  text_edt.list_cr
+00023b80: 6561 7469 6f6e 2e75 7064 6174 655f 6465  eation.update_de
+00023b90: 6661 756c 745f 7661 6c75 6528 290a 0a20  fault_value().. 
+00023ba0: 2020 2064 6566 2074 6573 745f 7574 696c     def test_util
+00023bb0: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
+00023bc0: 2022 2222 5465 7374 2074 6865 2075 7469   """Test the uti
+00023bd0: 6c73 2066 756e 6374 696f 6e73 2e22 2222  ls functions."""
+00023be0: 0a0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+00023bf0: 7373 6572 7445 7175 616c 2874 6162 6c65  ssertEqual(table
+00023c00: 5f74 6f5f 6461 7461 6261 7365 2854 7275  _to_database(Tru
+00023c10: 652c 2046 4945 4c44 5f54 5950 455f 424f  e, FIELD_TYPE_BO
+00023c20: 4f4c 4541 4e29 2c20 5472 7565 290a 2020  OLEAN), True).  
+00023c30: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00023c40: 7445 7175 616c 2874 6162 6c65 5f74 6f5f  tEqual(table_to_
+00023c50: 6461 7461 6261 7365 2822 4661 6c73 6522  database("False"
+00023c60: 2c20 4649 454c 445f 5459 5045 5f42 4f4f  , FIELD_TYPE_BOO
+00023c70: 4c45 414e 292c 2046 616c 7365 290a 0a20  LEAN), False).. 
+00023c80: 2020 2020 2020 2066 6f72 6d61 745f 203d         format_ =
+00023c90: 2022 2564 2f25 6d2f 2559 220a 2020 2020   "%d/%m/%Y".    
+00023ca0: 2020 2020 7661 6c75 6520 3d20 6461 7465      value = date
+00023cb0: 7469 6d65 2e73 7472 7074 696d 6528 2230  time.strptime("0
+00023cc0: 312f 3031 2f32 3031 3922 2c20 666f 726d  1/01/2019", form
+00023cd0: 6174 5f29 2e64 6174 6528 290a 2020 2020  at_).date().    
+00023ce0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00023cf0: 7175 616c 2863 6865 636b 5f76 616c 7565  qual(check_value
+00023d00: 5f74 7970 6528 2230 312f 3031 2f32 3031  _type("01/01/201
+00023d10: 3922 2c20 4649 454c 445f 5459 5045 5f44  9", FIELD_TYPE_D
+00023d20: 4154 4529 2c20 5472 7565 290a 2020 2020  ATE), True).    
+00023d30: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00023d40: 7175 616c 280a 2020 2020 2020 2020 2020  qual(.          
+00023d50: 2020 7461 626c 655f 746f 5f64 6174 6162    table_to_datab
+00023d60: 6173 6528 2230 312f 3031 2f32 3031 3922  ase("01/01/2019"
+00023d70: 2c20 4649 454c 445f 5459 5045 5f44 4154  , FIELD_TYPE_DAT
+00023d80: 4529 2c20 7661 6c75 650a 2020 2020 2020  E), value.      
+00023d90: 2020 290a 0a20 2020 2020 2020 2066 6f72    )..        for
+00023da0: 6d61 745f 203d 2022 2564 2f25 6d2f 2559  mat_ = "%d/%m/%Y
+00023db0: 2025 483a 254d 3a25 532e 2566 220a 2020   %H:%M:%S.%f".  
+00023dc0: 2020 2020 2020 7661 6c75 6520 3d20 6461        value = da
+00023dd0: 7465 7469 6d65 2e73 7472 7074 696d 6528  tetime.strptime(
+00023de0: 2231 352f 372f 3230 3139 2031 363a 3136  "15/7/2019 16:16
+00023df0: 3a35 352e 3738 3936 3433 222c 2066 6f72  :55.789643", for
+00023e00: 6d61 745f 290a 2020 2020 2020 2020 7365  mat_).        se
+00023e10: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
+00023e20: 2020 2020 2020 2020 2020 2020 6368 6563              chec
+00023e30: 6b5f 7661 6c75 655f 7479 7065 2822 3135  k_value_type("15
+00023e40: 2f37 2f32 3031 3920 3136 3a31 363a 3535  /7/2019 16:16:55
+00023e50: 2e37 3839 3634 3322 2c20 4649 454c 445f  .789643", FIELD_
+00023e60: 5459 5045 5f44 4154 4554 494d 4529 2c0a  TYPE_DATETIME),.
+00023e70: 2020 2020 2020 2020 2020 2020 5472 7565              True
+00023e80: 2c0a 2020 2020 2020 2020 290a 2020 2020  ,.        ).    
+00023e90: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00023ea0: 7175 616c 280a 2020 2020 2020 2020 2020  qual(.          
+00023eb0: 2020 7461 626c 655f 746f 5f64 6174 6162    table_to_datab
+00023ec0: 6173 6528 0a20 2020 2020 2020 2020 2020  ase(.           
+00023ed0: 2020 2020 2022 3135 2f37 2f32 3031 3920       "15/7/2019 
+00023ee0: 3136 3a31 363a 3535 2e37 3839 3634 3322  16:16:55.789643"
+00023ef0: 2c20 4649 454c 445f 5459 5045 5f44 4154  , FIELD_TYPE_DAT
+00023f00: 4554 494d 450a 2020 2020 2020 2020 2020  ETIME.          
+00023f10: 2020 292c 0a20 2020 2020 2020 2020 2020    ),.           
+00023f20: 2076 616c 7565 2c0a 2020 2020 2020 2020   value,.        
+00023f30: 290a 0a20 2020 2020 2020 2066 6f72 6d61  )..        forma
+00023f40: 745f 203d 2022 2548 3a25 4d3a 2553 2e25  t_ = "%H:%M:%S.%
+00023f50: 6622 0a20 2020 2020 2020 2076 616c 7565  f".        value
+00023f60: 203d 2064 6174 6574 696d 652e 7374 7270   = datetime.strp
+00023f70: 7469 6d65 2822 3136 3a31 363a 3535 2e37  time("16:16:55.7
+00023f80: 3839 3634 3322 2c20 666f 726d 6174 5f29  89643", format_)
+00023f90: 2e74 696d 6528 290a 2020 2020 2020 2020  .time().        
+00023fa0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00023fb0: 280a 2020 2020 2020 2020 2020 2020 6368  (.            ch
+00023fc0: 6563 6b5f 7661 6c75 655f 7479 7065 2822  eck_value_type("
+00023fd0: 3136 3a31 363a 3535 2e37 3839 3634 3322  16:16:55.789643"
+00023fe0: 2c20 4649 454c 445f 5459 5045 5f54 494d  , FIELD_TYPE_TIM
+00023ff0: 4529 2c20 5472 7565 0a20 2020 2020 2020  E), True.       
+00024000: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
+00024010: 6173 7365 7274 4571 7561 6c28 0a20 2020  assertEqual(.   
+00024020: 2020 2020 2020 2020 2074 6162 6c65 5f74           table_t
+00024030: 6f5f 6461 7461 6261 7365 2822 3136 3a31  o_database("16:1
+00024040: 363a 3535 2e37 3839 3634 3322 2c20 4649  6:55.789643", FI
+00024050: 454c 445f 5459 5045 5f54 494d 4529 2c20  ELD_TYPE_TIME), 
+00024060: 7661 6c75 650a 2020 2020 2020 2020 290a  value.        ).
+00024070: 0a20 2020 2064 6566 2074 6573 745f 7669  .    def test_vi
+00024080: 7375 616c 697a 6564 5f74 6167 7328 7365  sualized_tags(se
+00024090: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
+000240a0: 5465 7374 7320 7468 6520 706f 7075 7020  Tests the popup 
+000240b0: 6d6f 6469 6679 696e 6720 7468 6520 7669  modifying the vi
+000240c0: 7375 616c 697a 6564 2074 6167 732e 2222  sualized tags.""
+000240d0: 220a 0a20 2020 2020 2020 2023 2054 6573  "..        # Tes
+000240e0: 7469 6e67 2064 6566 6175 6c74 2074 6167  ting default tag
+000240f0: 7320 7669 7369 6269 6c69 7479 0a20 2020  s visibility.   
+00024100: 2020 2020 2076 6973 6962 6c65 7320 3d20       visibles = 
+00024110: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+00024120: 2e70 726f 6a65 6374 2e73 6573 7369 6f6e  .project.session
+00024130: 2e67 6574 5f73 686f 776e 5f74 6167 7328  .get_shown_tags(
+00024140: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00024150: 7373 6572 7445 7175 616c 286c 656e 2876  ssertEqual(len(v
+00024160: 6973 6962 6c65 7329 2c20 3429 0a20 2020  isibles), 4).   
+00024170: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00024180: 5472 7565 2854 4147 5f46 494c 454e 414d  True(TAG_FILENAM
+00024190: 4520 696e 2076 6973 6962 6c65 7329 0a20  E in visibles). 
+000241a0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+000241b0: 7274 5472 7565 2854 4147 5f42 5249 434b  rtTrue(TAG_BRICK
+000241c0: 5320 696e 2076 6973 6962 6c65 7329 0a20  S in visibles). 
+000241d0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+000241e0: 7274 5472 7565 2854 4147 5f54 5950 4520  rtTrue(TAG_TYPE 
+000241f0: 696e 2076 6973 6962 6c65 7329 0a20 2020  in visibles).   
+00024200: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00024210: 5472 7565 2854 4147 5f45 5850 5f54 5950  True(TAG_EXP_TYP
+00024220: 4520 696e 2076 6973 6962 6c65 7329 0a0a  E in visibles)..
+00024230: 2020 2020 2020 2020 2320 5465 7374 696e          # Testin
+00024240: 6720 636f 6c75 6d6e 7320 6469 7370 6c61  g columns displa
+00024250: 7965 6420 696e 2074 6865 2044 6174 6142  yed in the DataB
+00024260: 726f 7773 6572 0a20 2020 2020 2020 2073  rowser.        s
+00024270: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00024280: 0a20 2020 2020 2020 2020 2020 2034 2c20  .            4, 
+00024290: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+000242a0: 2e64 6174 615f 6272 6f77 7365 722e 7461  .data_browser.ta
+000242b0: 626c 655f 6461 7461 2e63 6f6c 756d 6e43  ble_data.columnC
+000242c0: 6f75 6e74 2829 0a20 2020 2020 2020 2029  ount().        )
+000242d0: 0a20 2020 2020 2020 2063 6f6c 756d 6e73  .        columns
+000242e0: 5f64 6973 706c 6179 6564 203d 205b 5d0a  _displayed = [].
+000242f0: 0a20 2020 2020 2020 2066 6f72 2063 6f6c  .        for col
+00024300: 756d 6e20 696e 2072 616e 6765 280a 2020  umn in range(.  
+00024310: 2020 2020 2020 2020 2020 302c 2073 656c            0, sel
+00024320: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
+00024330: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
+00024340: 5f64 6174 612e 636f 6c75 6d6e 436f 756e  _data.columnCoun
+00024350: 7428 290a 2020 2020 2020 2020 293a 0a20  t().        ):. 
+00024360: 2020 2020 2020 2020 2020 2074 6167 5f64             tag_d
+00024370: 6973 706c 6179 6564 203d 2028 0a20 2020  isplayed = (.   
+00024380: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+00024390: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
+000243a0: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
+000243b0: 5f64 6174 612e 686f 7269 7a6f 6e74 616c  _data.horizontal
+000243c0: 4865 6164 6572 4974 656d 0a20 2020 2020  HeaderItem.     
+000243d0: 2020 2020 2020 2029 2863 6f6c 756d 6e29         )(column)
+000243e0: 2e74 6578 7428 290a 0a20 2020 2020 2020  .text()..       
+000243f0: 2020 2020 2069 6620 6e6f 7420 7365 6c66       if not self
+00024400: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 6174  .main_window.dat
+00024410: 615f 6272 6f77 7365 722e 7461 626c 655f  a_browser.table_
+00024420: 6461 7461 2e69 7343 6f6c 756d 6e48 6964  data.isColumnHid
+00024430: 6465 6e28 0a20 2020 2020 2020 2020 2020  den(.           
+00024440: 2020 2020 2063 6f6c 756d 6e0a 2020 2020       column.    
+00024450: 2020 2020 2020 2020 293a 0a20 2020 2020          ):.     
+00024460: 2020 2020 2020 2020 2020 2063 6f6c 756d             colum
+00024470: 6e73 5f64 6973 706c 6179 6564 2e61 7070  ns_displayed.app
+00024480: 656e 6428 7461 675f 6469 7370 6c61 7965  end(tag_displaye
+00024490: 6429 0a0a 2020 2020 2020 2020 7365 6c66  d)..        self
+000244a0: 2e61 7373 6572 7445 7175 616c 2873 6f72  .assertEqual(sor
+000244b0: 7465 6428 7669 7369 626c 6573 292c 2073  ted(visibles), s
+000244c0: 6f72 7465 6428 636f 6c75 6d6e 735f 6469  orted(columns_di
+000244d0: 7370 6c61 7965 6429 290a 0a20 2020 2020  splayed))..     
+000244e0: 2020 2023 2054 6573 7469 6e67 2074 6861     # Testing tha
+000244f0: 7420 4669 6c65 4e61 6d65 2074 6167 2069  t FileName tag i
+00024500: 7320 7468 6520 6669 7273 7420 636f 6c75  s the first colu
+00024510: 6d6e 0a20 2020 2020 2020 2073 656c 662e  mn.        self.
+00024520: 6173 7365 7274 4571 7561 6c28 0a20 2020  assertEqual(.   
+00024530: 2020 2020 2020 2020 2054 4147 5f46 494c           TAG_FIL
+00024540: 454e 414d 452c 0a20 2020 2020 2020 2020  ENAME,.         
+00024550: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
+00024560: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
+00024570: 2e74 6162 6c65 5f64 6174 612e 686f 7269  .table_data.hori
+00024580: 7a6f 6e74 616c 4865 6164 6572 4974 656d  zontalHeaderItem
+00024590: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000245a0: 2020 300a 2020 2020 2020 2020 2020 2020    0.            
+000245b0: 292e 7465 7874 2829 2c0a 2020 2020 2020  ).text(),.      
+000245c0: 2020 290a 0a20 2020 2020 2020 2023 2054    )..        # T
+000245d0: 7279 696e 6720 746f 2073 6574 2074 6865  rying to set the
+000245e0: 2076 6973 6962 6c65 7320 7461 6773 0a20   visibles tags. 
+000245f0: 2020 2020 2020 2051 5465 7374 2e6d 6f75         QTest.mou
+00024600: 7365 436c 6963 6b28 0a20 2020 2020 2020  seClick(.       
+00024610: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
+00024620: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
+00024630: 6572 2e76 6973 7561 6c69 7a65 645f 7461  er.visualized_ta
+00024640: 6773 5f62 7574 746f 6e2c 2051 742e 4c65  gs_button, Qt.Le
+00024650: 6674 4275 7474 6f6e 0a20 2020 2020 2020  ftButton.       
+00024660: 2029 0a20 2020 2020 2020 2073 6574 7469   ).        setti
+00024670: 6e67 7320 3d20 7365 6c66 2e6d 6169 6e5f  ngs = self.main_
+00024680: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
+00024690: 7365 722e 7461 626c 655f 6461 7461 2e70  ser.table_data.p
+000246a0: 6f70 5f75 700a 0a20 2020 2020 2020 2023  op_up..        #
+000246b0: 2054 6573 7469 6e67 2074 6861 7420 6368   Testing that ch
+000246c0: 6563 6b73 756d 2074 6167 2069 736e 2774  ecksum tag isn't
+000246d0: 2064 6973 706c 6179 6564 0a20 2020 2020   displayed.     
+000246e0: 2020 2073 6574 7469 6e67 732e 7461 625f     settings.tab_
+000246f0: 7461 6773 2e73 6561 7263 685f 6261 722e  tags.search_bar.
+00024700: 7365 7454 6578 7428 5441 475f 4348 4543  setText(TAG_CHEC
+00024710: 4b53 554d 290a 2020 2020 2020 2020 7365  KSUM).        se
+00024720: 6c66 2e61 7373 6572 7445 7175 616c 2873  lf.assertEqual(s
+00024730: 6574 7469 6e67 732e 7461 625f 7461 6773  ettings.tab_tags
+00024740: 2e6c 6973 745f 7769 6467 6574 5f74 6167  .list_widget_tag
+00024750: 732e 636f 756e 7428 292c 2030 290a 0a20  s.count(), 0).. 
+00024760: 2020 2020 2020 2023 2054 6573 7469 6e67         # Testing
+00024770: 2074 6861 7420 6869 7374 6f72 7920 7575   that history uu
+00024780: 6964 2074 6167 2069 736e 2774 2064 6973  id tag isn't dis
+00024790: 706c 6179 6564 0a20 2020 2020 2020 2073  played.        s
+000247a0: 6574 7469 6e67 732e 7461 625f 7461 6773  ettings.tab_tags
+000247b0: 2e73 6561 7263 685f 6261 722e 7365 7454  .search_bar.setT
+000247c0: 6578 7428 5441 475f 4849 5354 4f52 5929  ext(TAG_HISTORY)
+000247d0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+000247e0: 7365 7274 4571 7561 6c28 7365 7474 696e  sertEqual(settin
+000247f0: 6773 2e74 6162 5f74 6167 732e 6c69 7374  gs.tab_tags.list
+00024800: 5f77 6964 6765 745f 7461 6773 2e63 6f75  _widget_tags.cou
+00024810: 6e74 2829 2c20 3029 0a0a 2020 2020 2020  nt(), 0)..      
+00024820: 2020 2320 5465 7374 696e 6720 7468 6174    # Testing that
+00024830: 2046 696c 654e 616d 6520 6973 206e 6f74   FileName is not
+00024840: 2064 6973 706c 6179 6564 2069 6e20 7468   displayed in th
+00024850: 6520 6c69 7374 206f 6620 7669 7369 626c  e list of visibl
+00024860: 6520 7461 6773 0a20 2020 2020 2020 2073  e tags.        s
+00024870: 6574 7469 6e67 732e 7461 625f 7461 6773  ettings.tab_tags
+00024880: 2e73 6561 7263 685f 6261 722e 7365 7454  .search_bar.setT
+00024890: 6578 7428 2222 290a 2020 2020 2020 2020  ext("").        
+000248a0: 7669 7369 626c 655f 7461 6773 203d 205b  visible_tags = [
+000248b0: 5d0a 0a20 2020 2020 2020 2066 6f72 2072  ]..        for r
+000248c0: 6f77 2069 6e20 7261 6e67 6528 0a20 2020  ow in range(.   
+000248d0: 2020 2020 2020 2020 2030 2c20 7365 7474           0, sett
+000248e0: 696e 6773 2e74 6162 5f74 6167 732e 6c69  ings.tab_tags.li
+000248f0: 7374 5f77 6964 6765 745f 7365 6c65 6374  st_widget_select
+00024900: 6564 5f74 6167 732e 636f 756e 7428 290a  ed_tags.count().
+00024910: 2020 2020 2020 2020 293a 0a20 2020 2020          ):.     
+00024920: 2020 2020 2020 2069 7465 6d20 3d20 7365         item = se
+00024930: 7474 696e 6773 2e74 6162 5f74 6167 732e  ttings.tab_tags.
+00024940: 6c69 7374 5f77 6964 6765 745f 7365 6c65  list_widget_sele
+00024950: 6374 6564 5f74 6167 732e 6974 656d 2872  cted_tags.item(r
+00024960: 6f77 292e 7465 7874 2829 0a20 2020 2020  ow).text().     
+00024970: 2020 2020 2020 2076 6973 6962 6c65 5f74         visible_t
+00024980: 6167 732e 6170 7065 6e64 2869 7465 6d29  ags.append(item)
+00024990: 0a0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+000249a0: 7373 6572 7445 7175 616c 286c 656e 2876  ssertEqual(len(v
+000249b0: 6973 6962 6c65 5f74 6167 7329 2c20 3329  isible_tags), 3)
+000249c0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+000249d0: 7365 7274 5472 7565 2854 4147 5f42 5249  sertTrue(TAG_BRI
+000249e0: 434b 5320 696e 2076 6973 6962 6c65 5f74  CKS in visible_t
+000249f0: 6167 7329 0a20 2020 2020 2020 2073 656c  ags).        sel
+00024a00: 662e 6173 7365 7274 5472 7565 2854 4147  f.assertTrue(TAG
+00024a10: 5f45 5850 5f54 5950 4520 696e 2076 6973  _EXP_TYPE in vis
+00024a20: 6962 6c65 5f74 6167 7329 0a20 2020 2020  ible_tags).     
+00024a30: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
+00024a40: 7565 2854 4147 5f54 5950 4520 696e 2076  ue(TAG_TYPE in v
+00024a50: 6973 6962 6c65 5f74 6167 7329 0a0a 2020  isible_tags)..  
+00024a60: 2020 2020 2020 2320 5465 7374 696e 6720        # Testing 
+00024a70: 7768 656e 2068 6964 696e 6720 6120 7461  when hiding a ta
+00024a80: 670a 2020 2020 2020 2020 2320 4272 6963  g.        # Bric
+00024a90: 6b73 2074 6167 2073 656c 6563 7465 640a  ks tag selected.
+00024aa0: 2020 2020 2020 2020 7365 7474 696e 6773          settings
+00024ab0: 2e74 6162 5f74 6167 732e 6c69 7374 5f77  .tab_tags.list_w
+00024ac0: 6964 6765 745f 7365 6c65 6374 6564 5f74  idget_selected_t
+00024ad0: 6167 732e 6974 656d 2832 292e 7365 7453  ags.item(2).setS
+00024ae0: 656c 6563 7465 6428 5472 7565 290a 2020  elected(True).  
+00024af0: 2020 2020 2020 5154 6573 742e 6d6f 7573        QTest.mous
+00024b00: 6543 6c69 636b 280a 2020 2020 2020 2020  eClick(.        
+00024b10: 2020 2020 7365 7474 696e 6773 2e74 6162      settings.tab
+00024b20: 5f74 6167 732e 7075 7368 5f62 7574 746f  _tags.push_butto
+00024b30: 6e5f 756e 7365 6c65 6374 5f74 6167 2c20  n_unselect_tag, 
+00024b40: 5174 2e4c 6566 7442 7574 746f 6e0a 2020  Qt.LeftButton.  
+00024b50: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00024b60: 7669 7369 626c 655f 7461 6773 203d 205b  visible_tags = [
+00024b70: 5d0a 0a20 2020 2020 2020 2066 6f72 2072  ]..        for r
+00024b80: 6f77 2069 6e20 7261 6e67 6528 0a20 2020  ow in range(.   
+00024b90: 2020 2020 2020 2020 2030 2c20 7365 7474           0, sett
+00024ba0: 696e 6773 2e74 6162 5f74 6167 732e 6c69  ings.tab_tags.li
+00024bb0: 7374 5f77 6964 6765 745f 7365 6c65 6374  st_widget_select
+00024bc0: 6564 5f74 6167 732e 636f 756e 7428 290a  ed_tags.count().
+00024bd0: 2020 2020 2020 2020 293a 0a20 2020 2020          ):.     
+00024be0: 2020 2020 2020 2069 7465 6d20 3d20 7365         item = se
+00024bf0: 7474 696e 6773 2e74 6162 5f74 6167 732e  ttings.tab_tags.
+00024c00: 6c69 7374 5f77 6964 6765 745f 7365 6c65  list_widget_sele
+00024c10: 6374 6564 5f74 6167 732e 6974 656d 2872  cted_tags.item(r
+00024c20: 6f77 292e 7465 7874 2829 0a20 2020 2020  ow).text().     
+00024c30: 2020 2020 2020 2076 6973 6962 6c65 5f74         visible_t
+00024c40: 6167 732e 6170 7065 6e64 2869 7465 6d29  ags.append(item)
+00024c50: 0a0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+00024c60: 7373 6572 7445 7175 616c 286c 656e 2876  ssertEqual(len(v
+00024c70: 6973 6962 6c65 5f74 6167 7329 2c20 3229  isible_tags), 2)
+00024c80: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00024c90: 7365 7274 5472 7565 2854 4147 5f54 5950  sertTrue(TAG_TYP
+00024ca0: 4520 696e 2076 6973 6962 6c65 5f74 6167  E in visible_tag
+00024cb0: 7329 0a20 2020 2020 2020 2073 656c 662e  s).        self.
+00024cc0: 6173 7365 7274 5472 7565 2854 4147 5f45  assertTrue(TAG_E
+00024cd0: 5850 5f54 5950 4520 696e 2076 6973 6962  XP_TYPE in visib
+00024ce0: 6c65 5f74 6167 7329 0a20 2020 2020 2020  le_tags).       
+00024cf0: 2051 5465 7374 2e6d 6f75 7365 436c 6963   QTest.mouseClic
+00024d00: 6b28 7365 7474 696e 6773 2e70 7573 685f  k(settings.push_
+00024d10: 6275 7474 6f6e 5f6f 6b2c 2051 742e 4c65  button_ok, Qt.Le
+00024d20: 6674 4275 7474 6f6e 290a 0a20 2020 2020  ftButton)..     
+00024d30: 2020 206e 6577 5f76 6973 6962 6c65 7320     new_visibles 
+00024d40: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
+00024d50: 6f77 2e70 726f 6a65 6374 2e73 6573 7369  ow.project.sessi
+00024d60: 6f6e 2e67 6574 5f73 686f 776e 5f74 6167  on.get_shown_tag
+00024d70: 7328 290a 2020 2020 2020 2020 7365 6c66  s().        self
+00024d80: 2e61 7373 6572 7445 7175 616c 286c 656e  .assertEqual(len
+00024d90: 286e 6577 5f76 6973 6962 6c65 7329 2c20  (new_visibles), 
+00024da0: 3329 0a20 2020 2020 2020 2073 656c 662e  3).        self.
+00024db0: 6173 7365 7274 5472 7565 2854 4147 5f46  assertTrue(TAG_F
+00024dc0: 494c 454e 414d 4520 696e 206e 6577 5f76  ILENAME in new_v
+00024dd0: 6973 6962 6c65 7329 0a20 2020 2020 2020  isibles).       
+00024de0: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
+00024df0: 2854 4147 5f45 5850 5f54 5950 4520 696e  (TAG_EXP_TYPE in
+00024e00: 206e 6577 5f76 6973 6962 6c65 7329 0a20   new_visibles). 
+00024e10: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00024e20: 7274 5472 7565 2854 4147 5f54 5950 4520  rtTrue(TAG_TYPE 
+00024e30: 696e 206e 6577 5f76 6973 6962 6c65 7329  in new_visibles)
+00024e40: 0a0a 2020 2020 2020 2020 636f 6c75 6d6e  ..        column
+00024e50: 735f 6469 7370 6c61 7965 6420 3d20 5b5d  s_displayed = []
+00024e60: 0a0a 2020 2020 2020 2020 666f 7220 636f  ..        for co
+00024e70: 6c75 6d6e 2069 6e20 7261 6e67 6528 0a20  lumn in range(. 
+00024e80: 2020 2020 2020 2020 2020 2030 2c20 7365             0, se
+00024e90: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e64  lf.main_window.d
+00024ea0: 6174 615f 6272 6f77 7365 722e 7461 626c  ata_browser.tabl
+00024eb0: 655f 6461 7461 2e63 6f6c 756d 6e43 6f75  e_data.columnCou
+00024ec0: 6e74 2829 0a20 2020 2020 2020 2029 3a0a  nt().        ):.
+00024ed0: 2020 2020 2020 2020 2020 2020 6974 656d              item
+00024ee0: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
+00024ef0: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
+00024f00: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
+00024f10: 6572 2e74 6162 6c65 5f64 6174 612e 686f  er.table_data.ho
+00024f20: 7269 7a6f 6e74 616c 4865 6164 6572 4974  rizontalHeaderIt
+00024f30: 656d 0a20 2020 2020 2020 2020 2020 2029  em.            )
+00024f40: 2863 6f6c 756d 6e29 0a0a 2020 2020 2020  (column)..      
+00024f50: 2020 2020 2020 6966 206e 6f74 2073 656c        if not sel
+00024f60: 662e 6d61 696e 5f77 696e 646f 772e 6461  f.main_window.da
+00024f70: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
+00024f80: 5f64 6174 612e 6973 436f 6c75 6d6e 4869  _data.isColumnHi
+00024f90: 6464 656e 280a 2020 2020 2020 2020 2020  dden(.          
+00024fa0: 2020 2020 2020 636f 6c75 6d6e 0a20 2020        column.   
+00024fb0: 2020 2020 2020 2020 2029 3a0a 2020 2020           ):.    
+00024fc0: 2020 2020 2020 2020 2020 2020 636f 6c75              colu
+00024fd0: 6d6e 735f 6469 7370 6c61 7965 642e 6170  mns_displayed.ap
+00024fe0: 7065 6e64 2869 7465 6d2e 7465 7874 2829  pend(item.text()
+00024ff0: 290a 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00025000: 6173 7365 7274 4571 7561 6c28 6c65 6e28  assertEqual(len(
+00025010: 636f 6c75 6d6e 735f 6469 7370 6c61 7965  columns_displaye
+00025020: 6429 2c20 3329 0a20 2020 2020 2020 2073  d), 3).        s
+00025030: 656c 662e 6173 7365 7274 5472 7565 2854  elf.assertTrue(T
+00025040: 4147 5f46 494c 454e 414d 4520 696e 2063  AG_FILENAME in c
+00025050: 6f6c 756d 6e73 5f64 6973 706c 6179 6564  olumns_displayed
+00025060: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00025070: 7373 6572 7454 7275 6528 5441 475f 4558  ssertTrue(TAG_EX
+00025080: 505f 5459 5045 2069 6e20 636f 6c75 6d6e  P_TYPE in column
+00025090: 735f 6469 7370 6c61 7965 6429 0a20 2020  s_displayed).   
+000250a0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+000250b0: 5472 7565 2854 4147 5f54 5950 4520 696e  True(TAG_TYPE in
+000250c0: 2063 6f6c 756d 6e73 5f64 6973 706c 6179   columns_display
+000250d0: 6564 290a 0a20 2020 2020 2020 2023 2054  ed)..        # T
+000250e0: 6573 7469 6e67 2077 6865 6e20 7368 6f77  esting when show
+000250f0: 696e 6720 6120 6e65 7720 7461 670a 2020  ing a new tag.  
+00025100: 2020 2020 2020 5154 6573 742e 6d6f 7573        QTest.mous
+00025110: 6543 6c69 636b 280a 2020 2020 2020 2020  eClick(.        
+00025120: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
+00025130: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
+00025140: 722e 7669 7375 616c 697a 6564 5f74 6167  r.visualized_tag
+00025150: 735f 6275 7474 6f6e 2c20 5174 2e4c 6566  s_button, Qt.Lef
+00025160: 7442 7574 746f 6e0a 2020 2020 2020 2020  tButton.        
+00025170: 290a 2020 2020 2020 2020 7365 7474 696e  ).        settin
+00025180: 6773 203d 2073 656c 662e 6d61 696e 5f77  gs = self.main_w
+00025190: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
+000251a0: 6572 2e74 6162 6c65 5f64 6174 612e 706f  er.table_data.po
+000251b0: 705f 7570 0a20 2020 2020 2020 2073 6574  p_up.        set
+000251c0: 7469 6e67 732e 7461 625f 7461 6773 2e73  tings.tab_tags.s
+000251d0: 6561 7263 685f 6261 722e 7365 7454 6578  earch_bar.setTex
+000251e0: 7428 5441 475f 4252 4943 4b53 290a 2020  t(TAG_BRICKS).  
+000251f0: 2020 2020 2020 7365 7474 696e 6773 2e74        settings.t
+00025200: 6162 5f74 6167 732e 6c69 7374 5f77 6964  ab_tags.list_wid
+00025210: 6765 745f 7461 6773 2e69 7465 6d28 3029  get_tags.item(0)
+00025220: 2e73 6574 5365 6c65 6374 6564 2854 7275  .setSelected(Tru
+00025230: 6529 0a20 2020 2020 2020 2051 5465 7374  e).        QTest
+00025240: 2e6d 6f75 7365 436c 6963 6b28 0a20 2020  .mouseClick(.   
+00025250: 2020 2020 2020 2020 2073 6574 7469 6e67           setting
+00025260: 732e 7461 625f 7461 6773 2e70 7573 685f  s.tab_tags.push_
+00025270: 6275 7474 6f6e 5f73 656c 6563 745f 7461  button_select_ta
+00025280: 672c 2051 742e 4c65 6674 4275 7474 6f6e  g, Qt.LeftButton
+00025290: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+000252a0: 2020 2051 5465 7374 2e6d 6f75 7365 436c     QTest.mouseCl
+000252b0: 6963 6b28 7365 7474 696e 6773 2e70 7573  ick(settings.pus
+000252c0: 685f 6275 7474 6f6e 5f6f 6b2c 2051 742e  h_button_ok, Qt.
+000252d0: 4c65 6674 4275 7474 6f6e 290a 0a20 2020  LeftButton)..   
+000252e0: 2020 2020 206e 6577 5f76 6973 6962 6c65       new_visible
+000252f0: 7320 3d20 7365 6c66 2e6d 6169 6e5f 7769  s = self.main_wi
+00025300: 6e64 6f77 2e70 726f 6a65 6374 2e73 6573  ndow.project.ses
+00025310: 7369 6f6e 2e67 6574 5f73 686f 776e 5f74  sion.get_shown_t
+00025320: 6167 7328 290a 2020 2020 2020 2020 7365  ags().        se
+00025330: 6c66 2e61 7373 6572 7445 7175 616c 286c  lf.assertEqual(l
+00025340: 656e 286e 6577 5f76 6973 6962 6c65 7329  en(new_visibles)
+00025350: 2c20 3429 0a20 2020 2020 2020 2073 656c  , 4).        sel
+00025360: 662e 6173 7365 7274 5472 7565 2854 4147  f.assertTrue(TAG
+00025370: 5f46 494c 454e 414d 4520 696e 206e 6577  _FILENAME in new
+00025380: 5f76 6973 6962 6c65 7329 0a20 2020 2020  _visibles).     
+00025390: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
+000253a0: 7565 2854 4147 5f45 5850 5f54 5950 4520  ue(TAG_EXP_TYPE 
+000253b0: 696e 206e 6577 5f76 6973 6962 6c65 7329  in new_visibles)
+000253c0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+000253d0: 7365 7274 5472 7565 2854 4147 5f54 5950  sertTrue(TAG_TYP
+000253e0: 4520 696e 206e 6577 5f76 6973 6962 6c65  E in new_visible
+000253f0: 7329 0a20 2020 2020 2020 2073 656c 662e  s).        self.
+00025400: 6173 7365 7274 5472 7565 2854 4147 5f42  assertTrue(TAG_B
+00025410: 5249 434b 5320 696e 206e 6577 5f76 6973  RICKS in new_vis
+00025420: 6962 6c65 7329 0a0a 2020 2020 2020 2020  ibles)..        
+00025430: 636f 6c75 6d6e 735f 6469 7370 6c61 7965  columns_displaye
+00025440: 6420 3d20 5b5d 0a0a 2020 2020 2020 2020  d = []..        
+00025450: 666f 7220 636f 6c75 6d6e 2069 6e20 7261  for column in ra
+00025460: 6e67 6528 0a20 2020 2020 2020 2020 2020  nge(.           
+00025470: 2030 2c20 7365 6c66 2e6d 6169 6e5f 7769   0, self.main_wi
+00025480: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
+00025490: 722e 7461 626c 655f 6461 7461 2e63 6f6c  r.table_data.col
+000254a0: 756d 6e43 6f75 6e74 2829 0a20 2020 2020  umnCount().     
+000254b0: 2020 2029 3a0a 2020 2020 2020 2020 2020     ):.          
+000254c0: 2020 6974 656d 203d 2028 0a20 2020 2020    item = (.     
+000254d0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+000254e0: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
+000254f0: 5f62 726f 7773 6572 2e74 6162 6c65 5f64  _browser.table_d
+00025500: 6174 612e 686f 7269 7a6f 6e74 616c 4865  ata.horizontalHe
+00025510: 6164 6572 4974 656d 0a20 2020 2020 2020  aderItem.       
+00025520: 2020 2020 2029 2863 6f6c 756d 6e29 0a0a       )(column)..
+00025530: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00025540: 6f74 2073 656c 662e 6d61 696e 5f77 696e  ot self.main_win
+00025550: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
+00025560: 2e74 6162 6c65 5f64 6174 612e 6973 436f  .table_data.isCo
+00025570: 6c75 6d6e 4869 6464 656e 280a 2020 2020  lumnHidden(.    
+00025580: 2020 2020 2020 2020 2020 2020 636f 6c75              colu
+00025590: 6d6e 0a20 2020 2020 2020 2020 2020 2029  mn.            )
+000255a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000255b0: 2020 636f 6c75 6d6e 735f 6469 7370 6c61    columns_displa
+000255c0: 7965 642e 6170 7065 6e64 2869 7465 6d2e  yed.append(item.
+000255d0: 7465 7874 2829 290a 0a20 2020 2020 2020  text())..       
+000255e0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+000255f0: 6c28 6c65 6e28 636f 6c75 6d6e 735f 6469  l(len(columns_di
+00025600: 7370 6c61 7965 6429 2c20 3429 0a20 2020  splayed), 4).   
+00025610: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00025620: 5472 7565 2854 4147 5f46 494c 454e 414d  True(TAG_FILENAM
+00025630: 4520 696e 2063 6f6c 756d 6e73 5f64 6973  E in columns_dis
+00025640: 706c 6179 6564 290a 2020 2020 2020 2020  played).        
+00025650: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
+00025660: 5441 475f 4558 505f 5459 5045 2069 6e20  TAG_EXP_TYPE in 
+00025670: 636f 6c75 6d6e 735f 6469 7370 6c61 7965  columns_displaye
+00025680: 6429 0a20 2020 2020 2020 2073 656c 662e  d).        self.
+00025690: 6173 7365 7274 5472 7565 2854 4147 5f54  assertTrue(TAG_T
+000256a0: 5950 4520 696e 2063 6f6c 756d 6e73 5f64  YPE in columns_d
+000256b0: 6973 706c 6179 6564 290a 2020 2020 2020  isplayed).      
+000256c0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+000256d0: 6528 5441 475f 4252 4943 4b53 2069 6e20  e(TAG_BRICKS in 
+000256e0: 636f 6c75 6d6e 735f 6469 7370 6c61 7965  columns_displaye
+000256f0: 6429 0a0a 0a63 6c61 7373 2054 6573 744d  d)...class TestM
+00025700: 4941 4d61 696e 5769 6e64 6f77 2854 6573  IAMainWindow(Tes
+00025710: 744d 4941 4361 7365 293a 0a20 2020 2022  tMIACase):.    "
+00025720: 2222 5465 7374 7320 666f 7220 7468 6520  ""Tests for the 
+00025730: 6d61 696e 2077 696e 646f 7720 636c 6173  main window clas
+00025740: 7320 284d 6169 6e57 696e 646f 7729 2e0a  s (MainWindow)..
+00025750: 0a20 2020 203a 436f 6e74 6169 6e73 3a0a  .    :Contains:.
+00025760: 2020 2020 2020 2020 3a4d 6574 686f 643a          :Method:
+00025770: 0a20 2020 2020 2020 2020 2020 202d 2074  .            - t
+00025780: 6573 745f 6368 6563 6b5f 6461 7461 6261  est_check_databa
+00025790: 7365 3a20 6368 6563 6b73 2069 6620 7468  se: checks if th
+000257a0: 6520 6461 7461 6261 7365 2068 6173 2063  e database has c
+000257b0: 6861 6e67 6564 0a20 2020 2020 2020 2020  hanged.         
+000257c0: 2020 2020 2073 696e 6365 2074 6865 2073       since the s
+000257d0: 6361 6e73 2077 6572 6520 6669 7273 7420  cans were first 
+000257e0: 696d 706f 7274 6564 0a20 2020 2020 2020  imported.       
+000257f0: 2020 2020 202d 2074 6573 745f 636c 6f73       - test_clos
+00025800: 6545 7665 6e74 3a20 6f70 656e 7320 6120  eEvent: opens a 
+00025810: 7072 6f6a 6563 7420 616e 6420 636c 6f73  project and clos
+00025820: 6573 2074 6865 206d 6169 6e20 7769 6e64  es the main wind
+00025830: 6f77 0a20 2020 2020 2020 2020 2020 202d  ow.            -
+00025840: 2074 6573 745f 6372 6561 7465 5f70 726f   test_create_pro
+00025850: 6a65 6374 5f70 6f70 5f75 703a 2074 7269  ject_pop_up: tri
+00025860: 6573 2074 6f20 6372 6561 7465 2061 206e  es to create a n
+00025870: 6577 2070 726f 6a65 6374 0a20 2020 2020  ew project.     
+00025880: 2020 2020 2020 2020 2077 6974 6820 6120           with a 
+00025890: 7072 6f6a 6563 7420 616c 7265 6164 7920  project already 
+000258a0: 6f70 656e 2e0a 2020 2020 2020 2020 2020  open..          
+000258b0: 2020 2d20 7465 7374 5f66 696c 6573 5f69    - test_files_i
+000258c0: 6e5f 7072 6f6a 6563 743a 2074 6573 7473  n_project: tests
+000258d0: 2077 6865 7468 6572 206f 7220 6e6f 7420   whether or not 
+000258e0: 6120 6769 7665 6e20 6669 6c65 0a20 2020  a given file.   
+000258f0: 2020 2020 2020 2020 2020 2069 7320 7061             is pa
+00025900: 7274 206f 6620 7468 6520 7072 6f6a 6563  rt of the projec
+00025910: 742e 0a20 2020 2020 2020 2020 2020 202d  t..            -
+00025920: 2074 6573 745f 696d 706f 7274 5f64 6174   test_import_dat
+00025930: 613a 206f 7065 6e73 2061 2070 726f 6a65  a: opens a proje
+00025940: 6374 2061 6e64 2073 696d 756c 6174 6573  ct and simulates
+00025950: 2069 6d70 6f72 7469 6e67 0a20 2020 2020   importing.     
+00025960: 2020 2020 2020 2020 2061 2066 696c 6520           a file 
+00025970: 6672 6f6d 2074 6865 204d 7269 436f 6e76  from the MriConv
+00025980: 206a 6176 6120 6578 6563 7574 6162 6c65   java executable
+00025990: 0a20 2020 2020 2020 2020 2020 202d 2074  .            - t
+000259a0: 6573 745f 6f70 656e 5f70 726f 6a65 6374  est_open_project
+000259b0: 5f70 6f70 5f75 703a 2063 7265 6174 6573  _pop_up: creates
+000259c0: 2061 2074 6573 7420 7072 6f6a 6563 7420   a test project 
+000259d0: 616e 6420 6f70 656e 730a 2020 2020 2020  and opens.      
+000259e0: 2020 2020 2020 2020 6120 7072 6f6a 6563          a projec
+000259f0: 742c 2069 6e63 6c75 6469 6e67 2075 6e73  t, including uns
+00025a00: 6176 6564 206d 6f64 6966 6963 6174 696f  aved modificatio
+00025a10: 6e73 2e0a 2020 2020 2020 2020 2020 2020  ns..            
+00025a20: 2d20 7465 7374 5f6f 7065 6e5f 7265 6365  - test_open_rece
+00025a30: 6e74 5f70 726f 6a65 6374 3a20 6372 6561  nt_project: crea
+00025a40: 7465 7320 3220 7465 7374 2070 726f 6a65  tes 2 test proje
+00025a50: 6374 7320 616e 640a 2020 2020 2020 2020  cts and.        
+00025a60: 2020 2020 2020 6f70 656e 7320 6f6e 6520        opens one 
+00025a70: 6279 2074 6865 2072 6563 656e 7420 7072  by the recent pr
+00025a80: 6f6a 6563 7473 2061 6374 696f 6e2e 0a20  ojects action.. 
+00025a90: 2020 2020 2020 2020 2020 202d 2074 6573             - tes
+00025aa0: 745f 6f70 656e 5f73 6865 6c6c 3a20 6f70  t_open_shell: op
+00025ab0: 656e 7320 5174 2063 6f6e 736f 6c65 2061  ens Qt console a
+00025ac0: 6e64 206b 696c 6c20 6974 2061 6674 6572  nd kill it after
+00025ad0: 7761 7264 732e 0a20 2020 2020 2020 2020  wards..         
+00025ae0: 2020 202d 2074 6573 745f 7061 636b 6167     - test_packag
+00025af0: 655f 6c69 6272 6172 795f 6469 616c 6f67  e_library_dialog
+00025b00: 5f61 6464 5f70 6b67 3a20 6372 6561 7465  _add_pkg: create
+00025b10: 7320 6120 6e65 7720 7072 6f6a 6563 740a  s a new project.
+00025b20: 2020 2020 2020 2020 2020 2020 2020 666f                fo
+00025b30: 6c64 6572 2c20 6f70 656e 7320 7468 6520  lder, opens the 
+00025b40: 7072 6f63 6573 7365 7320 6c69 6272 6172  processes librar
+00025b50: 7920 616e 6420 6164 6473 2061 2070 6163  y and adds a pac
+00025b60: 6b61 6765 2e0a 2020 2020 2020 2020 2020  kage..          
+00025b70: 2020 2d20 7465 7374 5f70 6163 6b61 6765    - test_package
+00025b80: 5f6c 6962 7261 7279 5f64 6961 6c6f 675f  _library_dialog_
+00025b90: 6465 6c5f 706b 673a 2063 7265 6174 6573  del_pkg: creates
+00025ba0: 2061 206e 6577 2070 726f 6a65 6374 0a20   a new project. 
+00025bb0: 2020 2020 2020 2020 2020 2020 2066 6f6c               fol
+00025bc0: 6465 722c 206f 7065 6e73 2074 6865 2070  der, opens the p
+00025bd0: 726f 6365 7373 6573 206c 6962 7261 7279  rocesses library
+00025be0: 2061 6e64 2064 656c 6574 6573 2061 2070   and deletes a p
+00025bf0: 6163 6b61 6765 2e0a 2020 2020 2020 2020  ackage..        
+00025c00: 2020 2020 2d20 7465 7374 5f70 6163 6b61      - test_packa
+00025c10: 6765 5f6c 6962 7261 7279 5f64 6961 6c6f  ge_library_dialo
+00025c20: 675f 726d 765f 706b 673a 2063 7265 6174  g_rmv_pkg: creat
+00025c30: 6573 2061 206e 6577 2070 726f 6a65 6374  es a new project
+00025c40: 0a20 2020 2020 2020 2020 2020 2020 2066  .              f
+00025c50: 6f6c 6465 722c 206f 7065 6e73 2074 6865  older, opens the
+00025c60: 2070 726f 6365 7373 6573 206c 6962 7261   processes libra
+00025c70: 7279 2061 6e64 2072 656d 6f76 6573 2061  ry and removes a
+00025c80: 2070 6163 6b61 6765 2e0a 2020 2020 2020   package..      
+00025c90: 2020 2020 2020 2d20 7465 7374 5f70 6163        - test_pac
+00025ca0: 6b61 6765 5f6c 6962 7261 7279 5f6f 7468  kage_library_oth
+00025cb0: 6572 733a 2043 7265 6174 6573 2061 206e  ers: Creates a n
+00025cc0: 6577 2070 726f 6a65 6374 2066 6f6c 6465  ew project folde
+00025cd0: 722c 206f 7065 6e73 0a20 2020 2020 2020  r, opens.       
+00025ce0: 2020 2020 2020 2074 6865 2070 726f 6365         the proce
+00025cf0: 7373 6573 206c 6962 7261 7279 2061 6e64  sses library and
+00025d00: 2061 6464 7320 6120 7061 636b 6167 652e   adds a package.
+00025d10: 0a20 2020 2020 2020 2020 2020 202d 2074  .            - t
+00025d20: 6573 745f 706f 7055 7044 656c 6574 6564  est_popUpDeleted
+00025d30: 5072 6f6a 6563 743a 2061 6464 7320 6120  Project: adds a 
+00025d40: 6465 6c65 7465 6420 7072 6f6a 6563 7473  deleted projects
+00025d50: 2074 6f20 7468 650a 2020 2020 2020 2020   to the.        
+00025d60: 2020 2020 2020 7072 6f6a 6563 7473 206c        projects l
+00025d70: 6973 7420 616e 6420 6c61 756e 6368 6573  ist and launches
+00025d80: 206d 6961 2e0a 2020 2020 2020 2020 2020   mia..          
+00025d90: 2020 2d20 7465 7374 5f70 6f70 5570 4465    - test_popUpDe
+00025da0: 6c65 7465 5072 6f6a 6563 743a 2063 7265  leteProject: cre
+00025db0: 6174 6573 2061 206e 6577 2070 726f 6a65  ates a new proje
+00025dc0: 6374 2061 6e64 2064 656c 6574 6573 0a20  ct and deletes. 
+00025dd0: 2020 2020 2020 2020 2020 2020 2069 742e               it.
+00025de0: 0a20 2020 2020 2020 2020 2020 202d 2074  .            - t
+00025df0: 6573 745f 7365 655f 616c 6c5f 7072 6f6a  est_see_all_proj
+00025e00: 6563 7473 3a20 6372 6561 7465 7320 3220  ects: creates 2 
+00025e10: 7072 6f6a 6563 7473 2061 6e64 2074 7269  projects and tri
+00025e20: 6573 2074 6f0a 2020 2020 2020 2020 2020  es to.          
+00025e30: 2020 2020 6f70 656e 2074 6865 6d20 7468      open them th
+00025e40: 726f 7567 6820 7468 6520 616c 6c20 7072  rough the all pr
+00025e50: 6f6a 6563 7473 2070 6f70 2d75 702e 0a20  ojects pop-up.. 
+00025e60: 2020 2020 2020 2020 2020 202d 2074 6573             - tes
+00025e70: 745f 736f 6674 7761 7265 5f70 7265 6665  t_software_prefe
+00025e80: 7265 6e63 6573 5f70 6f70 5f75 703a 206f  rences_pop_up: o
+00025e90: 7065 6e73 2074 6865 2070 7265 6665 7265  pens the prefere
+00025ea0: 6e63 6573 0a20 2020 2020 2020 2020 2020  nces.           
+00025eb0: 2020 2070 6f70 2075 7020 616e 6420 6368     pop up and ch
+00025ec0: 616e 6765 7320 7061 7261 6d65 7465 7273  anges parameters
+00025ed0: 2e0a 2020 2020 2020 2020 2020 2020 2d20  ..            - 
+00025ee0: 7465 7374 5f73 6f66 7477 6172 655f 7072  test_software_pr
+00025ef0: 6566 6572 656e 6365 735f 706f 705f 7570  eferences_pop_up
+00025f00: 5f63 6f6e 6669 675f 6669 6c65 3a20 6f70  _config_file: op
+00025f10: 656e 7320 7468 650a 2020 2020 2020 2020  ens the.        
+00025f20: 2020 2020 2020 7072 6566 6572 656e 6365        preference
+00025f30: 7320 706f 7020 7570 2061 6e64 2063 6861  s pop up and cha
+00025f40: 6e67 6573 2070 6172 616d 6574 6572 732e  nges parameters.
+00025f50: 0a20 2020 2020 2020 2020 2020 202d 2074  .            - t
+00025f60: 6573 745f 736f 6674 7761 7265 5f70 7265  est_software_pre
+00025f70: 6665 7265 6e63 6573 5f70 6f70 5f75 705f  ferences_pop_up_
+00025f80: 6d6f 6475 6c65 735f 636f 6e66 6967 3a20  modules_config: 
+00025f90: 6368 616e 6765 730a 2020 2020 2020 2020  changes.        
+00025fa0: 2020 2020 2020 7468 6520 636f 6e66 6967        the config
+00025fb0: 7572 6174 696f 6e20 6f66 2041 464e 492c  uration of AFNI,
+00025fc0: 2041 4e54 532c 2046 534c 2c20 5350 4d20   ANTS, FSL, SPM 
+00025fd0: 616e 6420 4d41 544c 4142 2e0a 2020 2020  and MATLAB..    
+00025fe0: 2020 2020 2020 2020 2d20 7465 7374 5f73          - test_s
+00025ff0: 6f66 7477 6172 655f 7072 6566 6572 656e  oftware_preferen
+00026000: 6365 735f 706f 705f 7570 5f76 616c 6964  ces_pop_up_valid
+00026010: 6174 653a 206f 7065 6e73 2074 6865 0a20  ate: opens the. 
+00026020: 2020 2020 2020 2020 2020 2020 2070 7265               pre
+00026030: 6665 7265 6e63 6573 2070 6f70 2075 7020  ferences pop up 
+00026040: 666f 7220 4146 4e49 2c20 414e 5453 2c20  for AFNI, ANTS, 
+00026050: 4653 4c2c 2053 504d 2061 6e64 204d 4154  FSL, SPM and MAT
+00026060: 4c41 422e 0a20 2020 2020 2020 2020 2020  LAB..           
+00026070: 202d 2074 6573 745f 7377 6974 6368 5f70   - test_switch_p
+00026080: 726f 6a65 6374 3a20 6372 6561 7465 2070  roject: create p
+00026090: 726f 6a65 6374 2061 6e64 2073 7769 7463  roject and switc
+000260a0: 6865 7320 746f 2069 742e 0a20 2020 2020  hes to it..     
+000260b0: 2020 2020 2020 202d 2074 6573 745f 7461         - test_ta
+000260c0: 625f 6368 616e 6765 643a 2073 7769 7463  b_changed: switc
+000260d0: 6865 7320 6265 7477 6565 6e20 6461 7461  hes between data
+000260e0: 2062 726f 7773 6572 2c20 6461 7461 0a20   browser, data. 
+000260f0: 2020 2020 2020 2020 2020 2020 2076 6965               vie
+00026100: 7765 7220 616e 6420 7069 7065 6c69 6e65  wer and pipeline
+00026110: 206d 616e 6167 6572 2e0a 2020 2020 2222   manager..    ""
+00026120: 220a 0a20 2020 2064 6566 2074 6573 745f  "..    def test_
+00026130: 6368 6563 6b5f 6461 7461 6261 7365 2873  check_database(s
+00026140: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+00026150: 2243 6865 636b 7320 6966 2074 6865 2064  "Checks if the d
+00026160: 6174 6162 6173 6520 6861 7320 6368 616e  atabase has chan
+00026170: 6765 6420 7369 6e63 6520 7468 6520 7363  ged since the sc
+00026180: 616e 7320 7765 7265 2066 6972 7374 0a20  ans were first. 
+00026190: 2020 2020 2020 2069 6d70 6f72 7465 642e         imported.
+000261a0: 0a0a 2020 2020 2020 2020 2d20 5465 7374  ..        - Test
+000261b0: 733a 204d 6169 6e57 696e 646f 772e 7465  s: MainWindow.te
+000261c0: 7374 5f63 6865 636b 5f64 6174 6162 6173  st_check_databas
+000261d0: 650a 0a20 2020 2020 2020 202d 204d 6f63  e..        - Moc
+000261e0: 6b73 2051 4d65 7373 6167 6542 6f78 2e65  ks QMessageBox.e
+000261f0: 7865 630a 2020 2020 2020 2020 2222 220a  xec.        """.
+00026200: 0a20 2020 2020 2020 2023 2043 7265 6174  .        # Creat
+00026210: 6573 2061 206e 6577 2070 726f 6a65 6374  es a new project
+00026220: 2061 6e64 2073 7769 7463 6865 7320 746f   and switches to
+00026230: 2069 740a 2020 2020 2020 2020 7465 7374   it.        test
+00026240: 5f70 726f 6a5f 7061 7468 203d 2073 656c  _proj_path = sel
+00026250: 662e 6765 745f 6e65 775f 7465 7374 5f70  f.get_new_test_p
+00026260: 726f 6a65 6374 2829 0a20 2020 2020 2020  roject().       
+00026270: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+00026280: 772e 7377 6974 6368 5f70 726f 6a65 6374  w.switch_project
+00026290: 2874 6573 745f 7072 6f6a 5f70 6174 682c  (test_proj_path,
+000262a0: 2022 7465 7374 5f70 726f 6a65 6374 2229   "test_project")
+000262b0: 0a0a 2020 2020 2020 2020 2320 5365 7473  ..        # Sets
+000262c0: 2073 686f 7274 6375 7473 2066 6f72 206f   shortcuts for o
+000262d0: 626a 6563 7473 2074 6861 7420 6172 6520  bjects that are 
+000262e0: 6f66 7465 6e20 7573 6564 0a20 2020 2020  often used.     
+000262f0: 2020 2070 706c 5f6d 616e 6167 6572 203d     ppl_manager =
+00026300: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+00026310: 772e 7069 7065 6c69 6e65 5f6d 616e 6167  w.pipeline_manag
+00026320: 6572 0a0a 2020 2020 2020 2020 2320 4d6f  er..        # Mo
+00026330: 636b 7320 7468 6520 6578 6563 7574 696f  cks the executio
+00026340: 6e20 6f66 2061 2064 6961 6c6f 6720 626f  n of a dialog bo
+00026350: 7820 6279 2061 6363 6570 7469 6e67 2069  x by accepting i
+00026360: 740a 2020 2020 2020 2020 514d 6573 7361  t.        QMessa
+00026370: 6765 426f 782e 6578 6563 203d 206c 616d  geBox.exec = lam
+00026380: 6264 6120 7365 6c66 5f2c 202a 6172 673a  bda self_, *arg:
+00026390: 2073 656c 665f 2e61 6363 6570 7428 290a   self_.accept().
+000263a0: 0a20 2020 2020 2020 2023 2047 6574 7320  .        # Gets 
+000263b0: 7468 6520 6669 6c65 2070 6174 680a 2020  the file path.  
+000263c0: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
+000263d0: 722e 7072 6f6a 6563 742e 666f 6c64 6572  r.project.folder
+000263e0: 203d 2074 6573 745f 7072 6f6a 5f70 6174   = test_proj_pat
+000263f0: 680a 2020 2020 2020 2020 666f 6c64 6572  h.        folder
+00026400: 203d 206f 732e 7061 7468 2e6a 6f69 6e28   = os.path.join(
+00026410: 7465 7374 5f70 726f 6a5f 7061 7468 2c20  test_proj_path, 
+00026420: 2264 6174 6122 2c20 2272 6177 5f64 6174  "data", "raw_dat
+00026430: 6122 290a 2020 2020 2020 2020 4e49 495f  a").        NII_
+00026440: 4649 4c45 5f31 203d 2028 0a20 2020 2020  FILE_1 = (.     
+00026450: 2020 2020 2020 2022 4775 6572 6265 742d         "Guerbet-
+00026460: 4336 2d32 3031 342d 5261 742d 4b35 322d  C6-2014-Rat-K52-
+00026470: 5475 6265 3237 2d32 3031 342d 3032 2d31  Tube27-2014-02-1
+00026480: 3431 3032 3331 372d 3034 2d47 335f 220a  4102317-04-G3_".
+00026490: 2020 2020 2020 2020 2020 2020 2247 7565              "Gue
+000264a0: 7262 6574 5f4d 4445 4654 2d4d 4445 4654  rbet_MDEFT-MDEFT
+000264b0: 7076 6d2d 3030 3039 3430 5f38 3030 2e6e  pvm-000940_800.n
+000264c0: 6969 220a 2020 2020 2020 2020 290a 2020  ii".        ).  
+000264d0: 2020 2020 2020 444f 4355 4d45 4e54 5f31        DOCUMENT_1
+000264e0: 203d 206f 732e 7061 7468 2e61 6273 7061   = os.path.abspa
+000264f0: 7468 286f 732e 7061 7468 2e6a 6f69 6e28  th(os.path.join(
+00026500: 666f 6c64 6572 2c20 4e49 495f 4649 4c45  folder, NII_FILE
+00026510: 5f31 2929 0a0a 2020 2020 2020 2020 2320  _1))..        # 
+00026520: 5265 6d6f 7665 7320 6f6e 6520 646f 6375  Removes one docu
+00026530: 6d65 6e74 2066 726f 6d20 7468 6520 6461  ment from the da
+00026540: 7461 6261 7365 0a20 2020 2020 2020 206f  tabase.        o
+00026550: 732e 7265 6d6f 7665 2844 4f43 554d 454e  s.remove(DOCUMEN
+00026560: 545f 3129 0a0a 2020 2020 2020 2020 2320  T_1)..        # 
+00026570: 4368 6563 6b20 6966 2074 6865 2066 696c  Check if the fil
+00026580: 6573 206f 6620 7468 6520 6461 7461 6261  es of the databa
+00026590: 7365 2068 6176 6520 6265 656e 206d 6f64  se have been mod
+000265a0: 6966 6965 640a 2020 2020 2020 2020 2320  ified.        # 
+000265b0: 5369 6e63 6520 514d 6573 7361 6765 426f  Since QMessageBo
+000265c0: 782e 6578 6563 2069 7320 6d6f 636b 6564  x.exec is mocked
+000265d0: 2c20 7468 6520 514d 6573 7361 6765 426f  , the QMessageBo
+000265e0: 7827 7320 7465 7874 2069 7320 6e6f 740a  x's text is not.
+000265f0: 2020 2020 2020 2020 2320 6f62 7365 7276          # observ
+00026600: 6564 0a20 2020 2020 2020 2073 656c 662e  ed.        self.
+00026610: 6d61 696e 5f77 696e 646f 772e 6163 7469  main_window.acti
+00026620: 6f6e 5f63 6865 636b 5f64 6174 6162 6173  on_check_databas
+00026630: 652e 7472 6967 6765 7265 642e 656d 6974  e.triggered.emit
+00026640: 2829 0a0a 2020 2020 6465 6620 7465 7374  ()..    def test
+00026650: 5f63 6c6f 7365 4576 656e 7428 7365 6c66  _closeEvent(self
+00026660: 293a 0a20 2020 2020 2020 2022 2222 4f70  ):.        """Op
+00026670: 656e 7320 6120 7072 6f6a 6563 7420 616e  ens a project an
+00026680: 6420 636c 6f73 6573 2074 6865 206d 6169  d closes the mai
+00026690: 6e20 7769 6e64 6f77 2e0a 0a20 2020 2020  n window...     
+000266a0: 2020 202d 2054 6573 7473 3a20 4d61 696e     - Tests: Main
+000266b0: 5769 6e64 6f77 2e63 6c6f 7365 4576 656e  Window.closeEven
+000266c0: 740a 2020 2020 2020 2020 2222 220a 0a20  t.        """.. 
+000266d0: 2020 2020 2020 2023 2046 4958 4d45 3a20         # FIXME: 
+000266e0: 446f 6573 2074 6869 7320 7465 7374 2072  Does this test r
+000266f0: 6561 6c6c 7920 6272 696e 6720 616e 7974  eally bring anyt
+00026700: 6869 6e67 206e 6577 2063 6f6d 7061 7265  hing new compare
+00026710: 6420 746f 206f 7468 6572 0a20 2020 2020  d to other.     
+00026720: 2020 2023 2020 2020 2020 2020 7465 7374     #        test
+00026730: 7320 616c 7265 6164 7920 7065 7266 6f72  s already perfor
+00026740: 6d65 643f 0a20 2020 2020 2020 2023 2043  med?.        # C
+00026750: 7265 6174 6573 2061 206e 6577 2070 726f  reates a new pro
+00026760: 6a65 6374 2066 6f6c 6465 7220 616e 6420  ject folder and 
+00026770: 7377 6974 6368 6573 2074 6f20 6974 0a20  switches to it. 
+00026780: 2020 2020 2020 206e 6577 5f70 726f 6a5f         new_proj_
+00026790: 7061 7468 203d 2073 656c 662e 6765 745f  path = self.get_
+000267a0: 6e65 775f 7465 7374 5f70 726f 6a65 6374  new_test_project
+000267b0: 286c 6967 6874 3d54 7275 6529 0a20 2020  (light=True).   
+000267c0: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
+000267d0: 696e 646f 772e 7377 6974 6368 5f70 726f  indow.switch_pro
+000267e0: 6a65 6374 286e 6577 5f70 726f 6a5f 7061  ject(new_proj_pa
+000267f0: 7468 2c20 2274 6573 745f 6c69 6768 745f  th, "test_light_
+00026800: 7072 6f6a 6563 7422 290a 0a20 2020 2020  project")..     
+00026810: 2020 2023 2053 6574 7320 7368 6f72 7463     # Sets shortc
+00026820: 7574 7320 666f 7220 6f62 6a65 6374 7320  uts for objects 
+00026830: 7468 6174 2061 7265 206f 6674 656e 2075  that are often u
+00026840: 7365 640a 2020 2020 2020 2020 7070 6c5f  sed.        ppl_
+00026850: 6d61 6e61 6765 7220 3d20 7365 6c66 2e6d  manager = self.m
+00026860: 6169 6e5f 7769 6e64 6f77 2e70 6970 656c  ain_window.pipel
+00026870: 696e 655f 6d61 6e61 6765 720a 0a20 2020  ine_manager..   
+00026880: 2020 2020 2023 2047 6574 7320 7468 6520       # Gets the 
+00026890: 5549 4420 6f66 2074 6865 2066 6972 7374  UID of the first
+000268a0: 2062 7269 636b 2069 6e20 7468 6520 6272   brick in the br
+000268b0: 6963 6b20 636f 6c6c 6563 7469 6f6e 2c20  ick collection, 
+000268c0: 7768 6963 6820 6973 0a20 2020 2020 2020  which is.       
+000268d0: 2023 2063 6f6d 706f 7365 6420 6f66 2074   # composed of t
+000268e0: 6865 2062 7269 636b 7320 6170 7065 6172  he bricks appear
+000268f0: 696e 6720 696e 2074 6865 2073 6361 6e20  ing in the scan 
+00026900: 6869 7374 6f72 792e 0a20 2020 2020 2020  history..       
+00026910: 2062 7269 636b 735f 636f 6c6c 203d 2070   bricks_coll = p
+00026920: 706c 5f6d 616e 6167 6572 2e70 726f 6a65  pl_manager.proje
+00026930: 6374 2e73 6573 7369 6f6e 2e67 6574 5f64  ct.session.get_d
+00026940: 6f63 756d 656e 7473 280a 2020 2020 2020  ocuments(.      
+00026950: 2020 2020 2020 434f 4c4c 4543 5449 4f4e        COLLECTION
+00026960: 5f42 5249 434b 0a20 2020 2020 2020 2029  _BRICK.        )
+00026970: 0a20 2020 2020 2020 2062 7269 636b 203d  .        brick =
+00026980: 2062 7269 636b 735f 636f 6c6c 5b30 5d0a   bricks_coll[0].
+00026990: 0a20 2020 2020 2020 2023 2041 7070 656e  .        # Appen
+000269a0: 6473 2069 7420 746f 2074 6865 2027 6272  ds it to the 'br
+000269b0: 6963 6b5f 6c69 7374 270a 2020 2020 2020  ick_list'.      
+000269c0: 2020 7070 6c5f 6d61 6e61 6765 722e 6272    ppl_manager.br
+000269d0: 6963 6b5f 6c69 7374 2e61 7070 656e 6428  ick_list.append(
+000269e0: 6272 6963 6b2e 4944 290a 0a20 2020 2020  brick.ID)..     
+000269f0: 2020 2023 204d 6f63 6b73 2068 6176 696e     # Mocks havin
+00026a00: 6720 696e 6974 6961 6c69 7a65 6420 7468  g initialized th
+00026a10: 6520 7069 7065 6c69 6e65 0a20 2020 2020  e pipeline.     
+00026a20: 2020 2070 706c 5f6d 616e 6167 6572 2e69     ppl_manager.i
+00026a30: 6e69 745f 636c 6963 6b65 6420 3d20 5472  nit_clicked = Tr
+00026a40: 7565 0a0a 2020 2020 2020 2020 2320 2773  ue..        # 's
+00026a50: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00026a60: 636c 6f73 6528 2927 2069 7320 616c 7265  close()' is alre
+00026a70: 6164 7920 6361 6c6c 6564 2062 7920 2774  ady called by 't
+00026a80: 6561 7244 6f77 6e27 0a20 2020 2020 2020  earDown'.       
+00026a90: 2023 2061 6674 6572 2065 6163 6820 7465   # after each te
+00026aa0: 7374 0a0a 2020 2020 2020 2020 2320 4e6f  st..        # No
+00026ab0: 2061 7373 6572 7469 6f6e 2069 7320 706f   assertion is po
+00026ac0: 7373 6962 6c65 2073 696e 6365 2074 6865  ssible since the
+00026ad0: 2027 7365 6c66 2e6d 6169 6e5f 7769 6e64   'self.main_wind
+00026ae0: 6f77 2e70 726f 6a65 6374 270a 2020 2020  ow.project'.    
+00026af0: 2020 2020 2320 7761 7320 6465 6c65 7465      # was delete
+00026b00: 640a 0a20 2020 2020 2020 2070 7269 6e74  d..        print
+00026b10: 2829 0a0a 2020 2020 6465 6620 7465 7374  ()..    def test
+00026b20: 5f63 7265 6174 655f 7072 6f6a 6563 745f  _create_project_
+00026b30: 706f 705f 7570 2873 656c 6629 3a0a 2020  pop_up(self):.  
+00026b40: 2020 2020 2020 2222 2254 7269 6573 2074        """Tries t
+00026b50: 6f20 6372 6561 7465 2061 206e 6577 2070  o create a new p
+00026b60: 726f 6a65 6374 2077 6974 6820 616e 2061  roject with an a
+00026b70: 6c72 6561 6479 206f 7065 6e20 7072 6f6a  lready open proj
+00026b80: 6563 742c 2077 6974 6820 616e 640a 2020  ect, with and.  
+00026b90: 2020 2020 2020 7769 7468 6f75 7420 7365        without se
+00026ba0: 7474 696e 6720 7468 6520 7072 6f6a 6563  tting the projec
+00026bb0: 7473 2066 6f6c 6465 7220 7061 7468 2e0a  ts folder path..
+00026bc0: 0a20 2020 2020 2020 202d 2054 6573 7473  .        - Tests
+00026bd0: 3a0a 2020 2020 2020 2020 2020 2020 2d20  :.            - 
+00026be0: 4d61 696e 5769 6e64 6f77 2e63 7265 6174  MainWindow.creat
+00026bf0: 655f 7072 6f6a 6563 745f 706f 705f 7570  e_project_pop_up
+00026c00: 0a20 2020 2020 2020 2020 2020 202d 2050  .            - P
+00026c10: 6f70 5570 4e65 7750 726f 6a65 6374 0a0a  opUpNewProject..
+00026c20: 2020 2020 2020 2020 2d20 4d6f 636b 733a          - Mocks:
+00026c30: 0a20 2020 2020 2020 2020 2020 202d 2050  .            - P
+00026c40: 6f70 5570 5175 6974 2e65 7865 630a 2020  opUpQuit.exec.  
+00026c50: 2020 2020 2020 2020 2020 2d20 514d 6573            - QMes
+00026c60: 7361 6765 426f 782e 6578 6563 0a20 2020  sageBox.exec.   
+00026c70: 2020 2020 2020 2020 202d 2050 6f70 5570           - PopUp
+00026c80: 4e65 7750 726f 6a65 6374 2e65 7865 630a  NewProject.exec.
+00026c90: 2020 2020 2020 2020 2222 220a 0a20 2020          """..   
+00026ca0: 2020 2020 2023 2053 6574 7320 7368 6f72       # Sets shor
+00026cb0: 7463 7574 7320 666f 7220 6f66 7465 6e20  tcuts for often 
+00026cc0: 7573 6564 206f 626a 6563 7473 0a20 2020  used objects.   
+00026cd0: 2020 2020 2073 6573 7369 6f6e 203d 2073       session = s
+00026ce0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00026cf0: 7072 6f6a 6563 742e 7365 7373 696f 6e0a  project.session.
+00026d00: 0a20 2020 2020 2020 2023 2043 7265 6174  .        # Creat
+00026d10: 6573 2061 206e 6577 2070 726f 6a65 6374  es a new project
+00026d20: 2066 6f6c 6465 7220 616e 6420 7377 6974   folder and swit
+00026d30: 6368 6573 2074 6f20 6974 0a20 2020 2020  ches to it.     
+00026d40: 2020 206e 6577 5f70 726f 6a5f 7061 7468     new_proj_path
+00026d50: 203d 2073 656c 662e 6765 745f 6e65 775f   = self.get_new_
+00026d60: 7465 7374 5f70 726f 6a65 6374 286c 6967  test_project(lig
+00026d70: 6874 3d54 7275 6529 0a20 2020 2020 2020  ht=True).       
+00026d80: 2066 6f6c 6465 7220 3d20 6f73 2e70 6174   folder = os.pat
+00026d90: 682e 6a6f 696e 286e 6577 5f70 726f 6a5f  h.join(new_proj_
+00026da0: 7061 7468 2c20 2264 6174 6122 2c20 2264  path, "data", "d
+00026db0: 6f77 6e6c 6f61 6465 645f 6461 7461 2229  ownloaded_data")
+00026dc0: 0a20 2020 2020 2020 204e 4949 5f46 494c  .        NII_FIL
+00026dd0: 455f 3120 3d20 280a 2020 2020 2020 2020  E_1 = (.        
+00026de0: 2020 2020 2247 7565 7262 6574 2d43 362d      "Guerbet-C6-
+00026df0: 3230 3134 2d52 6174 2d4b 3532 2d54 7562  2014-Rat-K52-Tub
+00026e00: 6532 372d 3230 3134 2d30 322d 3134 3130  e27-2014-02-1410
+00026e10: 3233 3137 2d30 312d 4731 5f22 0a20 2020  2317-01-G1_".   
+00026e20: 2020 2020 2020 2020 2022 4775 6572 6265           "Guerbe
+00026e30: 745f 416e 6174 2d52 4152 4570 766d 2d30  t_Anat-RAREpvm-0
+00026e40: 3030 3232 305f 3030 302e 6e69 6922 0a20  00220_000.nii". 
+00026e50: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00026e60: 2044 4f43 554d 454e 545f 3120 3d20 6f73   DOCUMENT_1 = os
+00026e70: 2e70 6174 682e 6162 7370 6174 6828 6f73  .path.abspath(os
+00026e80: 2e70 6174 682e 6a6f 696e 2866 6f6c 6465  .path.join(folde
+00026e90: 722c 204e 4949 5f46 494c 455f 3129 290a  r, NII_FILE_1)).
+00026ea0: 0a20 2020 2020 2020 2023 2041 6464 7320  .        # Adds 
+00026eb0: 6120 646f 6375 6d65 6e74 2074 6f20 7468  a document to th
+00026ec0: 6520 636f 6c6c 6563 7469 6f6e 0a20 2020  e collection.   
+00026ed0: 2020 2020 2073 6573 7369 6f6e 2e61 6464       session.add
+00026ee0: 5f64 6f63 756d 656e 7428 434f 4c4c 4543  _document(COLLEC
+00026ef0: 5449 4f4e 5f43 5552 5245 4e54 2c20 444f  TION_CURRENT, DO
+00026f00: 4355 4d45 4e54 5f31 290a 0a20 2020 2020  CUMENT_1)..     
+00026f10: 2020 2023 204d 6f63 6b73 2074 6865 2065     # Mocks the e
+00026f20: 7865 6375 7469 6f6e 206f 6620 7468 6520  xecution of the 
+00026f30: 706f 702d 7570 2071 7569 740a 2020 2020  pop-up quit.    
+00026f40: 2020 2020 506f 7055 7051 7569 742e 6578      PopUpQuit.ex
+00026f50: 6563 203d 206c 616d 6264 6120 7365 6c66  ec = lambda self
+00026f60: 5f2c 202a 6172 6773 3a20 7365 6c66 5f2e  _, *args: self_.
+00026f70: 7368 6f77 2829 0a0a 2020 2020 2020 2020  show()..        
+00026f80: 2320 5472 6965 7320 746f 2063 7265 6174  # Tries to creat
+00026f90: 6520 6120 7072 6f6a 6563 7420 7769 7468  e a project with
+00026fa0: 2075 6e73 6176 6564 206d 6f64 6966 6963   unsaved modific
+00026fb0: 6174 696f 6e73 0a20 2020 2020 2020 2073  ations.        s
+00026fc0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00026fd0: 6372 6561 7465 5f70 726f 6a65 6374 5f70  create_project_p
+00026fe0: 6f70 5f75 7028 290a 0a20 2020 2020 2020  op_up()..       
+00026ff0: 2023 2043 6c6f 7365 7320 7468 6520 6572   # Closes the er
+00027000: 726f 7220 6469 616c 6f67 0a20 2020 2020  ror dialog.     
+00027010: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
+00027020: 7565 2868 6173 6174 7472 2873 656c 662e  ue(hasattr(self.
+00027030: 6d61 696e 5f77 696e 646f 772c 2022 706f  main_window, "po
+00027040: 705f 7570 5f63 6c6f 7365 2229 290a 2020  p_up_close")).  
+00027050: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
+00027060: 7769 6e64 6f77 2e70 6f70 5f75 705f 636c  window.pop_up_cl
+00027070: 6f73 652e 6163 6365 7074 2829 0a0a 2020  ose.accept()..  
+00027080: 2020 2020 2020 7365 7373 696f 6e2e 7265        session.re
+00027090: 6d6f 7665 5f64 6f63 756d 656e 7428 434f  move_document(CO
+000270a0: 4c4c 4543 5449 4f4e 5f43 5552 5245 4e54  LLECTION_CURRENT
+000270b0: 2c20 444f 4355 4d45 4e54 5f31 290a 0a20  , DOCUMENT_1).. 
+000270c0: 2020 2020 2020 2023 204d 6f63 6b73 2074         # Mocks t
+000270d0: 6865 2065 7865 6375 7469 6f6e 206f 6620  he execution of 
+000270e0: 6120 706f 702d 7570 0a20 2020 2020 2020  a pop-up.       
+000270f0: 2051 4d65 7373 6167 6542 6f78 2e65 7865   QMessageBox.exe
+00027100: 6320 3d20 6c61 6d62 6461 2073 656c 665f  c = lambda self_
+00027110: 2c20 2a61 7267 733a 2073 656c 665f 2e73  , *args: self_.s
+00027120: 686f 7728 290a 0a20 2020 2020 2020 2023  how()..        #
+00027130: 2052 6573 6574 7320 7468 6520 7072 6f6a   Resets the proj
+00027140: 6563 7473 2066 6f6c 6465 720a 2020 2020  ects folder.    
+00027150: 2020 2020 636f 6e66 6967 203d 2043 6f6e      config = Con
+00027160: 6669 6728 636f 6e66 6967 5f70 6174 683d  fig(config_path=
+00027170: 7365 6c66 2e63 6f6e 6669 675f 7061 7468  self.config_path
+00027180: 290a 2020 2020 2020 2020 636f 6e66 6967  ).        config
+00027190: 2e73 6574 5f70 726f 6a65 6374 735f 7361  .set_projects_sa
+000271a0: 7665 5f70 6174 6828 4e6f 6e65 290a 0a20  ve_path(None).. 
+000271b0: 2020 2020 2020 2023 2054 7269 6573 2074         # Tries t
+000271c0: 6f20 6372 6561 7465 2061 206e 6577 2070  o create a new p
+000271d0: 726f 6a65 6374 2077 6974 686f 7574 2073  roject without s
+000271e0: 6574 7469 6e67 2074 6865 2070 726f 6a65  etting the proje
+000271f0: 6374 7320 666f 6c64 6572 0a20 2020 2020  cts folder.     
+00027200: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
+00027210: 646f 772e 6372 6561 7465 5f70 726f 6a65  dow.create_proje
+00027220: 6374 5f70 6f70 5f75 7028 290a 0a20 2020  ct_pop_up()..   
+00027230: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00027240: 5472 7565 2868 6173 6174 7472 2873 656c  True(hasattr(sel
+00027250: 662e 6d61 696e 5f77 696e 646f 772c 2022  f.main_window, "
+00027260: 6d73 6722 2929 0a20 2020 2020 2020 2073  msg")).        s
+00027270: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00027280: 6d73 672e 6163 6365 7074 2829 0a0a 2020  msg.accept()..  
+00027290: 2020 2020 2020 2320 5365 7473 2074 6865        # Sets the
+000272a0: 2070 726f 6a65 6374 7320 666f 6c64 6572   projects folder
+000272b0: 2070 6174 680a 2020 2020 2020 2020 7072   path.        pr
+000272c0: 6f6a 5f66 6f6c 6465 7220 3d20 6f73 2e70  oj_folder = os.p
+000272d0: 6174 682e 7370 6c69 7428 6e65 775f 7072  ath.split(new_pr
+000272e0: 6f6a 5f70 6174 6829 5b30 5d0a 2020 2020  oj_path)[0].    
+000272f0: 2020 2020 636f 6e66 6967 203d 2043 6f6e      config = Con
+00027300: 6669 6728 636f 6e66 6967 5f70 6174 683d  fig(config_path=
+00027310: 7365 6c66 2e63 6f6e 6669 675f 7061 7468  self.config_path
+00027320: 290a 2020 2020 2020 2020 636f 6e66 6967  ).        config
+00027330: 2e73 6574 5f70 726f 6a65 6374 735f 7361  .set_projects_sa
+00027340: 7665 5f70 6174 6828 7072 6f6a 5f66 6f6c  ve_path(proj_fol
+00027350: 6465 7229 0a0a 2020 2020 2020 2020 2320  der)..        # 
+00027360: 4d6f 636b 7320 7468 6520 6578 6563 7574  Mocks the execut
+00027370: 696f 6e20 6f66 2027 506f 7055 704e 6577  ion of 'PopUpNew
+00027380: 5072 6f6a 6563 740a 2020 2020 2020 2020  Project.        
+00027390: 506f 7055 704e 6577 5072 6f6a 6563 742e  PopUpNewProject.
+000273a0: 6578 6563 203d 206c 616d 6264 6120 7365  exec = lambda se
+000273b0: 6c66 5f2c 202a 6172 6773 3a20 4e6f 6e65  lf_, *args: None
+000273c0: 0a0a 2020 2020 2020 2020 2320 4f70 656e  ..        # Open
+000273d0: 7320 7468 6520 2263 7265 6174 6520 7072  s the "create pr
+000273e0: 6f6a 6563 7422 2070 6f70 2d75 700a 2020  oject" pop-up.  
+000273f0: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
+00027400: 7769 6e64 6f77 2e63 7265 6174 655f 7072  window.create_pr
+00027410: 6f6a 6563 745f 706f 705f 7570 2829 0a0a  oject_pop_up()..
+00027420: 2020 2020 2020 2020 2320 4d6f 636b 7320          # Mocks 
+00027430: 7468 6520 6578 6563 7574 696f 6e20 6f66  the execution of
+00027440: 2061 2070 6f70 2d75 700a 2020 2020 2020   a pop-up.      
+00027450: 2020 514d 6573 7361 6765 426f 782e 6578    QMessageBox.ex
+00027460: 6563 203d 206c 616d 6264 6120 2a61 7267  ec = lambda *arg
+00027470: 733a 204e 6f6e 650a 0a20 2020 2020 2020  s: None..       
+00027480: 2023 2054 7269 6573 2074 6f20 6372 6561   # Tries to crea
+00027490: 7465 2061 206e 6577 2070 726f 6a65 6374  te a new project
+000274a0: 2069 6e20 7468 6520 7361 6d65 2064 6972   in the same dir
+000274b0: 6563 746f 7279 206f 6620 616e 0a20 2020  ectory of an.   
+000274c0: 2020 2020 2023 2065 7869 7374 696e 6720       # existing 
+000274d0: 6f6e 650a 2020 2020 2020 2020 7365 6c66  one.        self
+000274e0: 2e6d 6169 6e5f 7769 6e64 6f77 2e65 7850  .main_window.exP
+000274f0: 6f70 7570 2e67 6574 5f66 696c 656e 616d  opup.get_filenam
+00027500: 6528 0a20 2020 2020 2020 2020 2020 2028  e(.            (
+00027510: 6f73 2e70 6174 682e 6a6f 696e 2866 6f6c  os.path.join(fol
+00027520: 6465 722c 204e 4949 5f46 494c 455f 3129  der, NII_FILE_1)
+00027530: 2c29 0a20 2020 2020 2020 2029 0a0a 2020  ,).        )..  
+00027540: 2020 2020 2020 2320 4372 6561 7465 7320        # Creates 
+00027550: 6120 6e65 7720 7072 6f6a 6563 740a 2020  a new project.  
+00027560: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
+00027570: 7769 6e64 6f77 2e65 7850 6f70 7570 2e67  window.exPopup.g
+00027580: 6574 5f66 696c 656e 616d 6528 0a20 2020  et_filename(.   
+00027590: 2020 2020 2020 2020 2028 6f73 2e70 6174           (os.pat
+000275a0: 682e 6a6f 696e 2866 6f6c 6465 722c 2022  h.join(folder, "
+000275b0: 6e65 775f 7072 6f6a 6563 7422 292c 290a  new_project"),).
+000275c0: 2020 2020 2020 2020 290a 0a20 2020 2064          )..    d
+000275d0: 6566 2074 6573 745f 6669 6c65 735f 696e  ef test_files_in
+000275e0: 5f70 726f 6a65 6374 2873 656c 6629 3a0a  _project(self):.
+000275f0: 2020 2020 2020 2020 2222 2254 6573 7473          """Tests
+00027600: 2077 6865 7468 6572 2061 2067 6976 656e   whether a given
+00027610: 2066 696c 6520 6973 2070 6172 7420 6f66   file is part of
+00027620: 2074 6865 2070 726f 6a65 6374 2e0a 0a20   the project... 
+00027630: 2020 2020 2020 202d 2054 6573 7473 3a20         - Tests: 
+00027640: 4d61 696e 5769 6e64 6f77 2e66 696c 6573  MainWindow.files
+00027650: 5f69 6e5f 7072 6f6a 6563 740a 2020 2020  _in_project.    
+00027660: 2020 2020 2222 220a 0a20 2020 2020 2020      """..       
+00027670: 2023 2043 7265 6174 6573 2061 206e 6f77   # Creates a now
+00027680: 2074 6573 7420 7072 6f6a 6563 740a 2020   test project.  
+00027690: 2020 2020 2020 7465 7374 5f70 726f 6a5f        test_proj_
+000276a0: 7061 7468 203d 2073 656c 662e 6765 745f  path = self.get_
+000276b0: 6e65 775f 7465 7374 5f70 726f 6a65 6374  new_test_project
+000276c0: 286c 6967 6874 3d54 7275 6529 0a20 2020  (light=True).   
+000276d0: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
+000276e0: 696e 646f 772e 7072 6f6a 6563 742e 666f  indow.project.fo
+000276f0: 6c64 6572 203d 2074 6573 745f 7072 6f6a  lder = test_proj
+00027700: 5f70 6174 680a 0a20 2020 2020 2020 2023  _path..        #
+00027710: 2043 6865 636b 7320 666f 7220 6120 626f   Checks for a bo
+00027720: 6f6c 2074 7970 6520 6173 2061 2066 696c  ol type as a fil
+00027730: 650a 2020 2020 2020 2020 7265 7320 3d20  e.        res = 
+00027740: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+00027750: 2e70 726f 6a65 6374 2e66 696c 6573 5f69  .project.files_i
+00027760: 6e5f 7072 6f6a 6563 7428 5b7b 226d 6f63  n_project([{"moc
+00027770: 6b5f 6b65 7922 3a20 4661 6c73 657d 5d29  k_key": False}])
+00027780: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00027790: 7365 7274 4661 6c73 6528 7265 7329 0a0a  sertFalse(res)..
+000277a0: 2020 2020 2020 2020 2320 4368 6563 6b73          # Checks
+000277b0: 2066 6f72 2061 2073 7472 2074 7970 6520   for a str type 
+000277c0: 7061 7468 206c 6f63 6174 6564 206f 7574  path located out
+000277d0: 206f 6620 7468 6520 7072 6f6a 6563 740a   of the project.
+000277e0: 2020 2020 2020 2020 7265 7320 3d20 7365          res = se
+000277f0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
+00027800: 726f 6a65 6374 2e66 696c 6573 5f69 6e5f  roject.files_in_
+00027810: 7072 6f6a 6563 7428 222f 6f75 745f 6f66  project("/out_of
+00027820: 5f70 726f 6a65 6374 2229 0a20 2020 2020  _project").     
+00027830: 2020 2073 656c 662e 6173 7365 7274 4661     self.assertFa
+00027840: 6c73 6528 7265 7329 0a0a 2020 2020 2020  lse(res)..      
+00027850: 2020 2320 4368 6563 6b73 2066 6f72 2061    # Checks for a
+00027860: 2073 7472 2074 7970 6520 7061 7468 2077   str type path w
+00027870: 6974 6869 6e20 7468 6520 7072 6f6a 6563  ithin the projec
+00027880: 740a 2020 2020 2020 2020 7265 7320 3d20  t.        res = 
+00027890: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+000278a0: 2e70 726f 6a65 6374 2e66 696c 6573 5f69  .project.files_i
+000278b0: 6e5f 7072 6f6a 6563 7428 0a20 2020 2020  n_project(.     
+000278c0: 2020 2020 2020 206f 732e 7061 7468 2e6a         os.path.j
+000278d0: 6f69 6e28 7465 7374 5f70 726f 6a5f 7061  oin(test_proj_pa
+000278e0: 7468 2c20 226d 6f63 6b5f 6669 6c65 2229  th, "mock_file")
+000278f0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00027900: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
+00027910: 7565 2872 6573 2920 2023 2041 7373 6572  ue(res)  # Asser
+00027920: 7473 2069 7420 6973 206e 6f74 2065 6d70  ts it is not emp
+00027930: 7479 0a0a 2020 2020 6465 6620 7465 7374  ty..    def test
+00027940: 5f69 6d70 6f72 745f 6461 7461 2873 656c  _import_data(sel
+00027950: 6629 3a0a 2020 2020 2020 2020 2222 224f  f):.        """O
+00027960: 7065 6e73 2061 2070 726f 6a65 6374 2061  pens a project a
+00027970: 6e64 2073 696d 756c 6174 6573 2069 6d70  nd simulates imp
+00027980: 6f72 7469 6e67 2061 2066 696c 6520 6672  orting a file fr
+00027990: 6f6d 2074 6865 206d 7269 5f63 6f6e 760a  om the mri_conv.
+000279a0: 2020 2020 2020 2020 6a61 7661 2065 7865          java exe
+000279b0: 6375 7461 626c 652e 0a0a 2020 2020 2020  cutable...      
+000279c0: 2020 2d20 5465 7374 733a 0a20 2020 2020    - Tests:.     
+000279d0: 2020 2020 2020 202d 2072 6561 645f 6c6f         - read_lo
+000279e0: 6720 2864 6174 615f 6c6f 6164 6572 2e70  g (data_loader.p
+000279f0: 7929 0a20 2020 2020 2020 2020 2020 202d  y).            -
+00027a00: 2049 6d70 6f72 7450 726f 6772 6573 730a   ImportProgress.
+00027a10: 0a20 2020 2020 2020 202d 204d 6f63 6b73  .        - Mocks
+00027a20: 3a0a 2020 2020 2020 2020 2020 2020 2d20  :.            - 
+00027a30: 496d 706f 7274 576f 726b 6572 2e73 7461  ImportWorker.sta
+00027a40: 7274 0a20 2020 2020 2020 2020 2020 202d  rt.            -
+00027a50: 2049 6d70 6f72 7450 726f 6772 6573 732e   ImportProgress.
+00027a60: 6578 6563 0a20 2020 2020 2020 2022 2222  exec.        """
+00027a70: 0a0a 2020 2020 2020 2020 2320 4f70 656e  ..        # Open
+00027a80: 7320 6120 7465 7374 2070 726f 6a65 6374  s a test project
+00027a90: 2061 6e64 2073 7769 7463 6865 7320 746f   and switches to
+00027aa0: 2069 740a 2020 2020 2020 2020 7465 7374   it.        test
+00027ab0: 5f70 726f 6a5f 7061 7468 203d 2073 656c  _proj_path = sel
+00027ac0: 662e 6765 745f 6e65 775f 7465 7374 5f70  f.get_new_test_p
+00027ad0: 726f 6a65 6374 286c 6967 6874 3d54 7275  roject(light=Tru
+00027ae0: 6529 0a20 2020 2020 2020 2073 656c 662e  e).        self.
+00027af0: 6d61 696e 5f77 696e 646f 772e 7377 6974  main_window.swit
+00027b00: 6368 5f70 726f 6a65 6374 2874 6573 745f  ch_project(test_
+00027b10: 7072 6f6a 5f70 6174 682c 2022 7465 7374  proj_path, "test
+00027b20: 5f70 726f 6a65 6374 2229 0a0a 2020 2020  _project")..    
+00027b30: 2020 2020 2320 4372 6561 7465 7320 6120      # Creates a 
+00027b40: 6d6f 636b 6564 206a 6176 6120 6578 6563  mocked java exec
+00027b50: 7574 6162 6c65 0a20 2020 2020 2020 206d  utable.        m
+00027b60: 6f63 6b5f 6d72 6963 6f6e 765f 7061 7468  ock_mriconv_path
+00027b70: 203d 206f 732e 7061 7468 2e6a 6f69 6e28   = os.path.join(
+00027b80: 0a20 2020 2020 2020 2020 2020 2074 6573  .            tes
+00027b90: 745f 7072 6f6a 5f70 6174 682c 2022 6d6f  t_proj_path, "mo
+00027ba0: 636b 5f6d 7269 636f 6e76 222c 2022 6d6f  ck_mriconv", "mo
+00027bb0: 636b 6170 702e 6a61 7222 0a20 2020 2020  ckapp.jar".     
+00027bc0: 2020 2029 0a20 2020 2020 2020 206f 732e     ).        os.
+00027bd0: 6d6b 6469 7228 6f73 2e70 6174 682e 7370  mkdir(os.path.sp
+00027be0: 6c69 7428 6d6f 636b 5f6d 7269 636f 6e76  lit(mock_mriconv
+00027bf0: 5f70 6174 6829 5b30 5d29 0a20 2020 2020  _path)[0]).     
+00027c00: 2020 2072 6573 203d 2073 656c 662e 6372     res = self.cr
+00027c10: 6561 7465 5f6d 6f63 6b5f 6a61 7228 6d6f  eate_mock_jar(mo
+00027c20: 636b 5f6d 7269 636f 6e76 5f70 6174 6829  ck_mriconv_path)
+00027c30: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00027c40: 7365 7274 4571 7561 6c28 7265 732c 2030  sertEqual(res, 0
+00027c50: 290a 0a20 2020 2020 2020 2023 2053 6574  )..        # Set
+00027c60: 7320 7468 6520 274d 5249 4d61 6e61 6765  s the 'MRIManage
+00027c70: 722e 6a61 7227 2070 6174 6820 746f 2061  r.jar' path to a
+00027c80: 206d 6f63 6b65 6420 6a61 7661 2065 7865   mocked java exe
+00027c90: 6375 7461 626c 650a 2020 2020 2020 2020  cutable.        
+00027ca0: 636f 6e66 6967 203d 2043 6f6e 6669 6728  config = Config(
+00027cb0: 290a 2020 2020 2020 2020 636f 6e66 6967  ).        config
+00027cc0: 2e73 6574 5f6d 7269 5f63 6f6e 765f 7061  .set_mri_conv_pa
+00027cd0: 7468 286f 732e 7061 7468 2e6e 6f72 6d70  th(os.path.normp
+00027ce0: 6174 6828 6d6f 636b 5f6d 7269 636f 6e76  ath(mock_mriconv
+00027cf0: 5f70 6174 6829 290a 0a20 2020 2020 2020  _path))..       
+00027d00: 2023 2047 6574 7320 696e 666f 726d 6174   # Gets informat
+00027d10: 696f 6e20 7265 6761 7264 696e 6720 7468  ion regarding th
+00027d20: 6520 6669 7374 2073 6361 6e2c 206c 6f63  e fist scan, loc
+00027d30: 6174 6564 2069 6e20 7468 650a 2020 2020  ated in the.    
+00027d40: 2020 2020 2320 2764 6572 6976 6564 5f64      # 'derived_d
+00027d50: 6174 6127 206f 6620 7468 6520 7072 6f6a  ata' of the proj
+00027d60: 6563 740a 2020 2020 2020 2020 444f 4355  ect.        DOCU
+00027d70: 4d45 4e54 5f31 203d 2028 7365 6c66 2e6d  MENT_1 = (self.m
+00027d80: 6169 6e5f 7769 6e64 6f77 2e70 726f 6a65  ain_window.proje
+00027d90: 6374 2e73 6573 7369 6f6e 2e67 6574 5f64  ct.session.get_d
+00027da0: 6f63 756d 656e 7473 5f6e 616d 6573 2928  ocuments_names)(
+00027db0: 0a20 2020 2020 2020 2020 2020 2022 6375  .            "cu
+00027dc0: 7272 656e 7422 0a20 2020 2020 2020 2029  rrent".        )
+00027dd0: 5b30 5d0a 2020 2020 2020 2020 444f 4355  [0].        DOCU
+00027de0: 4d45 4e54 5f31 5f4e 414d 4520 3d20 6f73  MENT_1_NAME = os
+00027df0: 2e70 6174 682e 7370 6c69 7428 444f 4355  .path.split(DOCU
+00027e00: 4d45 4e54 5f31 295b 2d31 5d2e 7370 6c69  MENT_1)[-1].spli
+00027e10: 7428 222e 2229 5b30 5d0a 0a20 2020 2020  t(".")[0]..     
+00027e20: 2020 2023 2047 6574 7320 7468 6520 2772     # Gets the 'r
+00027e30: 6177 5f64 6174 6127 2066 6f6c 6465 7220  aw_data' folder 
+00027e40: 7061 7468 2c20 7768 6572 6520 7468 6520  path, where the 
+00027e50: 7363 616e 2077 696c 6c20 6265 2069 6d70  scan will be imp
+00027e60: 6f72 740a 2020 2020 2020 2020 5241 575f  ort.        RAW_
+00027e70: 4441 5441 5f46 4c44 5220 3d20 6f73 2e70  DATA_FLDR = os.p
+00027e80: 6174 682e 6a6f 696e 2874 6573 745f 7072  ath.join(test_pr
+00027e90: 6f6a 5f70 6174 682c 2022 6461 7461 222c  oj_path, "data",
+00027ea0: 2022 7261 775f 6461 7461 2229 0a0a 2020   "raw_data")..  
+00027eb0: 2020 2020 2020 2320 436f 7069 6573 2061        # Copies a
+00027ec0: 2073 6361 6e20 746f 2074 6865 2072 6177   scan to the raw
+00027ed0: 2064 6174 6120 666f 6c64 6572 0a20 2020   data folder.   
+00027ee0: 2020 2020 2073 6875 7469 6c2e 636f 7079       shutil.copy
+00027ef0: 280a 2020 2020 2020 2020 2020 2020 6f73  (.            os
+00027f00: 2e70 6174 682e 6a6f 696e 2874 6573 745f  .path.join(test_
+00027f10: 7072 6f6a 5f70 6174 682c 2044 4f43 554d  proj_path, DOCUM
+00027f20: 454e 545f 3129 2c0a 2020 2020 2020 2020  ENT_1),.        
+00027f30: 2020 2020 6f73 2e70 6174 682e 6a6f 696e      os.path.join
+00027f40: 2852 4157 5f44 4154 415f 464c 4452 2c20  (RAW_DATA_FLDR, 
+00027f50: 6f73 2e70 6174 682e 7370 6c69 7428 444f  os.path.split(DO
+00027f60: 4355 4d45 4e54 5f31 295b 2d31 5d29 2c0a  CUMENT_1)[-1]),.
+00027f70: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+00027f80: 2020 2023 2043 7265 6174 6573 2074 6865     # Creates the
+00027f90: 202e 6a73 6f6e 2077 6974 6820 7468 6520   .json with the 
+00027fa0: 7461 6720 7661 6c75 6573 2c20 696e 2074  tag values, in t
+00027fb0: 6865 2072 6177 2064 6174 6120 666f 6c64  he raw data fold
+00027fc0: 6572 0a20 2020 2020 2020 204a 534f 4e5f  er.        JSON_
+00027fd0: 5441 475f 4455 4d50 203d 207b 0a20 2020  TAG_DUMP = {.   
+00027fe0: 2020 2020 2020 2020 2022 4163 7175 6973           "Acquis
+00027ff0: 6974 696f 6e54 696d 6522 3a20 7b0a 2020  itionTime": {.  
+00028000: 2020 2020 2020 2020 2020 2020 2020 2266                "f
+00028010: 6f72 6d61 7422 3a20 2248 483a 6d6d 3a73  ormat": "HH:mm:s
+00028020: 732e 5353 5322 2c0a 2020 2020 2020 2020  s.SSS",.        
+00028030: 2020 2020 2020 2020 2264 6573 6372 6970          "descrip
+00028040: 7469 6f6e 223a 2022 5468 6520 7469 6d65  tion": "The time
+00028050: 2074 6865 2061 6371 7569 7369 7469 6f6e   the acquisition
+00028060: 206f 6620 6461 7461 2e22 2c0a 2020 2020   of data.",.    
+00028070: 2020 2020 2020 2020 2020 2020 2275 6e69              "uni
+00028080: 7473 223a 2022 6d6f 636b 5f75 6e69 7422  ts": "mock_unit"
+00028090: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000280a0: 2020 2274 7970 6522 3a20 2274 696d 6522    "type": "time"
+000280b0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000280c0: 2020 2276 616c 7565 223a 205b 2230 303a    "value": ["00:
+000280d0: 3039 3a34 302e 3830 3022 5d2c 0a20 2020  09:40.800"],.   
+000280e0: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+000280f0: 2020 2020 2020 2020 2242 616e 6457 6964          "BandWid
+00028100: 7468 223a 207b 0a20 2020 2020 2020 2020  th": {.         
+00028110: 2020 2020 2020 2022 666f 726d 6174 223a         "format":
+00028120: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
+00028130: 2020 2020 2020 2022 6465 7363 7269 7074         "descript
+00028140: 696f 6e22 3a20 2222 2c0a 2020 2020 2020  ion": "",.      
+00028150: 2020 2020 2020 2020 2020 2275 6e69 7473            "units
+00028160: 223a 2022 4d48 7a22 2c0a 2020 2020 2020  ": "MHz",.      
+00028170: 2020 2020 2020 2020 2020 2274 7970 6522            "type"
+00028180: 3a20 2266 6c6f 6174 222c 0a20 2020 2020  : "float",.     
+00028190: 2020 2020 2020 2020 2020 2022 7661 6c75             "valu
+000281a0: 6522 3a20 5b5b 3530 3030 302e 305d 5d2c  e": [[50000.0]],
+000281b0: 0a20 2020 2020 2020 2020 2020 207d 2c0a  .            },.
+000281c0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+000281d0: 2020 4a53 4f4e 5f54 4147 203d 206f 732e    JSON_TAG = os.
+000281e0: 7061 7468 2e6a 6f69 6e28 5241 575f 4441  path.join(RAW_DA
+000281f0: 5441 5f46 4c44 522c 2044 4f43 554d 454e  TA_FLDR, DOCUMEN
+00028200: 545f 315f 4e41 4d45 202b 2022 2e6a 736f  T_1_NAME + ".jso
+00028210: 6e22 290a 0a20 2020 2020 2020 2077 6974  n")..        wit
+00028220: 6820 6f70 656e 284a 534f 4e5f 5441 472c  h open(JSON_TAG,
+00028230: 2022 7722 2920 6173 2066 696c 653a 0a20   "w") as file:. 
+00028240: 2020 2020 2020 2020 2020 206a 736f 6e2e             json.
+00028250: 6475 6d70 284a 534f 4e5f 5441 475f 4455  dump(JSON_TAG_DU
+00028260: 4d50 2c20 6669 6c65 290a 0a20 2020 2020  MP, file)..     
+00028270: 2020 2023 2043 7265 6174 6573 2074 6865     # Creates the
+00028280: 2027 6c6f 6745 7870 6f72 742a 2e6a 736f   'logExport*.jso
+00028290: 6e27 2066 696c 652c 2069 6e20 7468 6520  n' file, in the 
+000282a0: 7261 7720 6461 7461 2066 6f6c 6465 720a  raw data folder.
+000282b0: 2020 2020 2020 2020 4a53 4f4e 5f45 5850          JSON_EXP
+000282c0: 4f52 545f 4455 4d50 203d 205b 0a20 2020  ORT_DUMP = [.   
+000282d0: 2020 2020 2020 2020 207b 2253 7461 7475           {"Statu
+000282e0: 7345 7870 6f72 7422 3a20 2245 7870 6f72  sExport": "Expor
+000282f0: 7420 6f6b 222c 2022 4e61 6d65 4669 6c65  t ok", "NameFile
+00028300: 223a 2044 4f43 554d 454e 545f 315f 4e41  ": DOCUMENT_1_NA
+00028310: 4d45 7d0a 2020 2020 2020 2020 5d0a 2020  ME}.        ].  
+00028320: 2020 2020 2020 4a53 4f4e 5f45 5850 4f52        JSON_EXPOR
+00028330: 5420 3d20 6f73 2e70 6174 682e 6a6f 696e  T = os.path.join
+00028340: 280a 2020 2020 2020 2020 2020 2020 7465  (.            te
+00028350: 7374 5f70 726f 6a5f 7061 7468 2c20 2264  st_proj_path, "d
+00028360: 6174 6122 2c20 2272 6177 5f64 6174 6122  ata", "raw_data"
+00028370: 2c20 226c 6f67 4578 706f 7274 4d6f 636b  , "logExportMock
+00028380: 2e6a 736f 6e22 0a20 2020 2020 2020 2029  .json".        )
+00028390: 0a0a 2020 2020 2020 2020 7769 7468 206f  ..        with o
+000283a0: 7065 6e28 4a53 4f4e 5f45 5850 4f52 542c  pen(JSON_EXPORT,
+000283b0: 2022 7722 2920 6173 2066 696c 653a 0a20   "w") as file:. 
+000283c0: 2020 2020 2020 2020 2020 206a 736f 6e2e             json.
+000283d0: 6475 6d70 284a 534f 4e5f 4558 504f 5254  dump(JSON_EXPORT
+000283e0: 5f44 554d 502c 2066 696c 6529 0a0a 2020  _DUMP, file)..  
+000283f0: 2020 2020 2020 2320 4d6f 636b 7320 7468        # Mocks th
+00028400: 6520 7468 7265 6164 2073 7461 7274 2074  e thread start t
+00028410: 6f20 6176 6f69 6420 7468 7265 6164 2064  o avoid thread d
+00028420: 6561 646c 6f63 6b69 6e67 0a20 2020 2020  eadlocking.     
+00028430: 2020 2049 6d70 6f72 7457 6f72 6b65 722e     ImportWorker.
+00028440: 7374 6172 7420 3d20 6c61 6d62 6461 2073  start = lambda s
+00028450: 656c 665f 2c20 2a61 7267 733a 204e 6f6e  elf_, *args: Non
+00028460: 650a 2020 2020 2020 2020 496d 706f 7274  e.        Import
+00028470: 5072 6f67 7265 7373 2e65 7865 6320 3d20  Progress.exec = 
+00028480: 6c61 6d62 6461 2073 656c 665f 2c20 2a61  lambda self_, *a
+00028490: 7267 733a 2073 656c 665f 2e77 6f72 6b65  rgs: self_.worke
+000284a0: 722e 7275 6e28 290a 0a20 2020 2020 2020  r.run()..       
+000284b0: 2023 2052 6561 6473 2074 6865 2073 6361   # Reads the sca
+000284c0: 6e73 2061 6464 6564 2074 6f20 7468 6520  ns added to the 
+000284d0: 7072 6f6a 6563 740a 2020 2020 2020 2020  project.        
+000284e0: 2320 4649 584d 453a 2054 7279 2075 6e63  # FIXME: Try unc
+000284f0: 6f6d 6d65 6e74 696e 6720 7468 6520 666f  ommenting the fo
+00028500: 6c6c 6f77 696e 6720 6c69 6e65 0a20 2020  llowing line.   
+00028510: 2020 2020 2023 2073 6361 6e73 5f61 6464       # scans_add
+00028520: 6564 203d 2072 6561 645f 6c6f 6728 7365  ed = read_log(se
+00028530: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
+00028540: 726f 6a65 6374 2c20 7365 6c66 2e6d 6169  roject, self.mai
+00028550: 6e5f 7769 6e64 6f77 290a 0a20 2020 2020  n_window)..     
+00028560: 2020 2023 204d 6f63 6b73 2069 6d70 6f72     # Mocks impor
+00028570: 7469 6e67 2061 2073 6361 6e2c 2072 756e  ting a scan, run
+00028580: 7320 6120 6d6f 636b 6564 206a 6176 6120  s a mocked java 
+00028590: 6578 6563 7574 6162 6c65 2069 6e73 7465  executable inste
+000285a0: 6164 0a20 2020 2020 2020 2023 206f 6620  ad.        # of 
+000285b0: 7468 6520 274d 5249 4d61 6e61 6765 722e  the 'MRIManager.
+000285c0: 6a61 7227 0a20 2020 2020 2020 2073 656c  jar'.        sel
+000285d0: 662e 6d61 696e 5f77 696e 646f 772e 696d  f.main_window.im
+000285e0: 706f 7274 5f64 6174 6128 290a 0a20 2020  port_data()..   
+000285f0: 2020 2020 206e 6577 5f73 6361 6e20 3d20       new_scan = 
+00028600: 6f73 2e70 6174 682e 6e6f 726d 7061 7468  os.path.normpath
+00028610: 280a 2020 2020 2020 2020 2020 2020 444f  (.            DO
+00028620: 4355 4d45 4e54 5f31 2e72 6570 6c61 6365  CUMENT_1.replace
+00028630: 2822 6465 7269 7665 645f 6461 7461 222c  ("derived_data",
+00028640: 2022 7261 775f 6461 7461 2229 0a20 2020   "raw_data").   
+00028650: 2020 2020 2029 0a20 2020 2020 2020 2074       ).        t
+00028660: 6162 6c65 5f64 6174 615f 7363 616e 7320  able_data_scans 
+00028670: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
+00028680: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+00028690: 2e64 6174 615f 6272 6f77 7365 722e 7461  .data_browser.ta
+000286a0: 626c 655f 6461 7461 2e73 6361 6e73 5f74  ble_data.scans_t
+000286b0: 6f5f 7669 7375 616c 697a 650a 2020 2020  o_visualize.    
+000286c0: 2020 2020 290a 2020 2020 2020 2020 7461      ).        ta
+000286d0: 626c 655f 6461 7461 5f73 6361 6e73 203d  ble_data_scans =
+000286e0: 205b 0a20 2020 2020 2020 2020 2020 206f   [.            o
+000286f0: 732e 7061 7468 2e6e 6f72 6d70 6174 6828  s.path.normpath(
+00028700: 7061 7468 2920 666f 7220 7061 7468 2069  path) for path i
+00028710: 6e20 7461 626c 655f 6461 7461 5f73 6361  n table_data_sca
+00028720: 6e73 0a20 2020 2020 2020 205d 0a0a 2020  ns.        ]..  
+00028730: 2020 2020 2020 2320 4173 7365 7274 7320        # Asserts 
+00028740: 7468 6174 2074 6865 2066 6972 7374 2073  that the first s
+00028750: 6361 6e20 7761 7320 6164 6465 6420 746f  can was added to
+00028760: 2074 6865 2027 7261 775f 6461 7461 2720   the 'raw_data' 
+00028770: 666f 6c64 6572 0a20 2020 2020 2020 2073  folder.        s
+00028780: 656c 662e 6173 7365 7274 496e 286e 6577  elf.assertIn(new
+00028790: 5f73 6361 6e2c 2074 6162 6c65 5f64 6174  _scan, table_dat
+000287a0: 615f 7363 616e 7329 0a0a 2020 2020 6465  a_scans)..    de
+000287b0: 6620 7465 7374 5f6f 7065 6e5f 7072 6f6a  f test_open_proj
+000287c0: 6563 745f 706f 705f 7570 2873 656c 6629  ect_pop_up(self)
+000287d0: 3a0a 2020 2020 2020 2020 2222 2243 7265  :.        """Cre
+000287e0: 6174 6573 2061 2074 6573 7420 7072 6f6a  ates a test proj
+000287f0: 6563 7420 616e 6420 6f70 656e 7320 6120  ect and opens a 
+00028800: 7072 6f6a 6563 742c 2069 6e63 6c75 6469  project, includi
+00028810: 6e67 2075 6e73 6176 6564 0a20 2020 2020  ng unsaved.     
+00028820: 2020 206d 6f64 6966 6963 6174 696f 6e73     modifications
+00028830: 2e0a 0a20 2020 2020 2020 202d 2054 6573  ...        - Tes
+00028840: 7473 3a20 4d61 696e 5769 6e64 6f77 2e6f  ts: MainWindow.o
+00028850: 7065 6e5f 7072 6f6a 6563 745f 706f 705f  pen_project_pop_
+00028860: 7570 0a0a 2020 2020 2020 2020 2d20 4d6f  up..        - Mo
+00028870: 636b 733a 0a20 2020 2020 2020 2020 2020  cks:.           
+00028880: 202d 2051 4d65 7373 6167 6542 6f78 2e65   - QMessageBox.e
+00028890: 7865 630a 2020 2020 2020 2020 2020 2020  xec.            
+000288a0: 2d20 506f 7055 704f 7065 6e50 726f 6a65  - PopUpOpenProje
+000288b0: 6374 2e65 7865 630a 2020 2020 2020 2020  ct.exec.        
+000288c0: 2020 2020 2d20 506f 7055 7051 7569 742e      - PopUpQuit.
+000288d0: 6578 6563 0a20 2020 2020 2020 2022 2222  exec.        """
+000288e0: 0a0a 2020 2020 2020 2020 2320 4372 6561  ..        # Crea
+000288f0: 7465 7320 6120 7465 7374 2070 726f 6a65  tes a test proje
+00028900: 6374 0a20 2020 2020 2020 2074 6573 745f  ct.        test_
+00028910: 7072 6f6a 5f70 6174 6820 3d20 7365 6c66  proj_path = self
+00028920: 2e67 6574 5f6e 6577 5f74 6573 745f 7072  .get_new_test_pr
+00028930: 6f6a 6563 7428 6c69 6768 743d 5472 7565  oject(light=True
+00028940: 290a 2020 2020 2020 2020 7365 6c66 2e6d  ).        self.m
+00028950: 6169 6e5f 7769 6e64 6f77 2e73 7769 7463  ain_window.switc
+00028960: 685f 7072 6f6a 6563 7428 7465 7374 5f70  h_project(test_p
+00028970: 726f 6a5f 7061 7468 2c20 2274 6573 745f  roj_path, "test_
+00028980: 7072 6f6a 6563 7422 290a 0a20 2020 2020  project")..     
+00028990: 2020 2023 2053 6574 7320 7368 6f72 7463     # Sets shortc
+000289a0: 7574 7320 666f 7220 6f62 6a65 6374 7320  uts for objects 
+000289b0: 7468 6174 2061 7265 206f 6674 656e 2075  that are often u
+000289c0: 7365 640a 2020 2020 2020 2020 6461 7461  sed.        data
+000289d0: 5f62 726f 7773 6572 203d 2073 656c 662e  _browser = self.
+000289e0: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
+000289f0: 5f62 726f 7773 6572 0a0a 2020 2020 2020  _browser..      
+00028a00: 2020 514d 6573 7361 6765 426f 782e 6578    QMessageBox.ex
+00028a10: 6563 203d 206c 616d 6264 6120 7365 6c66  ec = lambda self
+00028a20: 5f2c 202a 6172 673a 2073 656c 665f 2e73  _, *arg: self_.s
+00028a30: 686f 7728 290a 0a20 2020 2020 2020 2023  how()..        #
+00028a40: 2052 6573 6574 7320 7468 6520 7072 6f6a   Resets the proj
+00028a50: 6563 7473 2073 6176 6520 6469 7265 6374  ects save direct
+00028a60: 6f72 790a 2020 2020 2020 2020 436f 6e66  ory.        Conf
+00028a70: 6967 2829 2e73 6574 5f70 726f 6a65 6374  ig().set_project
+00028a80: 735f 7361 7665 5f70 6174 6828 4e6f 6e65  s_save_path(None
+00028a90: 290a 0a20 2020 2020 2020 2023 2054 7269  )..        # Tri
+00028aa0: 6573 2074 6f20 6f70 656e 2061 2070 726f  es to open a pro
+00028ab0: 6a65 6374 2077 6974 686f 7574 2073 6574  ject without set
+00028ac0: 7469 6e67 2074 6865 2070 726f 6a65 6374  ting the project
+00028ad0: 7320 7361 7665 2064 6972 0a20 2020 2020  s save dir.     
+00028ae0: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
+00028af0: 646f 772e 6f70 656e 5f70 726f 6a65 6374  dow.open_project
+00028b00: 5f70 6f70 5f75 7028 290a 2020 2020 2020  _pop_up().      
+00028b10: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
+00028b20: 6f77 2e6d 7367 2e61 6363 6570 7428 290a  ow.msg.accept().
+00028b30: 0a20 2020 2020 2020 2023 2053 6574 7320  .        # Sets 
+00028b40: 7468 6520 7072 6f6a 6563 7473 2073 6176  the projects sav
+00028b50: 6520 6469 720a 2020 2020 2020 2020 636f  e dir.        co
+00028b60: 6e66 6967 203d 2043 6f6e 6669 6728 636f  nfig = Config(co
+00028b70: 6e66 6967 5f70 6174 683d 7365 6c66 2e63  nfig_path=self.c
+00028b80: 6f6e 6669 675f 7061 7468 290a 2020 2020  onfig_path).    
+00028b90: 2020 2020 636f 6e66 6967 2e73 6574 5f70      config.set_p
+00028ba0: 726f 6a65 6374 735f 7361 7665 5f70 6174  rojects_save_pat
+00028bb0: 6828 6f73 2e70 6174 682e 7370 6c69 7428  h(os.path.split(
+00028bc0: 7465 7374 5f70 726f 6a5f 7061 7468 295b  test_proj_path)[
+00028bd0: 305d 290a 0a20 2020 2020 2020 2050 6f70  0])..        Pop
+00028be0: 5570 4f70 656e 5072 6f6a 6563 742e 6578  UpOpenProject.ex
+00028bf0: 6563 203d 206c 616d 6264 6120 7365 6c66  ec = lambda self
+00028c00: 5f2c 202a 6172 673a 2073 656c 665f 2e73  _, *arg: self_.s
+00028c10: 686f 7728 290a 0a20 2020 2020 2020 2023  how()..        #
+00028c20: 204f 7065 6e73 2061 2070 726f 6a65 6374   Opens a project
+00028c30: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+00028c40: 696e 5f77 696e 646f 772e 6f70 656e 5f70  in_window.open_p
+00028c50: 726f 6a65 6374 5f70 6f70 5f75 7028 290a  roject_pop_up().
+00028c60: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+00028c70: 696e 5f77 696e 646f 772e 6578 506f 7075  in_window.exPopu
+00028c80: 702e 6765 745f 6669 6c65 6e61 6d65 2828  p.get_filename((
+00028c90: 7465 7374 5f70 726f 6a5f 7061 7468 2c29  test_proj_path,)
+00028ca0: 290a 0a20 2020 2020 2020 2023 2044 656c  )..        # Del
+00028cb0: 6574 6573 2061 2073 6361 6e20 6672 6f6d  etes a scan from
+00028cc0: 2064 6174 6120 6272 6f77 7365 720a 2020   data browser.  
+00028cd0: 2020 2020 2020 6461 7461 5f62 726f 7773        data_brows
+00028ce0: 6572 2e74 6162 6c65 5f64 6174 612e 7365  er.table_data.se
+00028cf0: 6c65 6374 526f 7728 3029 0a20 2020 2020  lectRow(0).     
+00028d00: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
+00028d10: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
+00028d20: 2e74 6162 6c65 5f64 6174 612e 7265 6d6f  .table_data.remo
+00028d30: 7665 5f73 6361 6e28 290a 0a20 2020 2020  ve_scan()..     
+00028d40: 2020 2023 2041 7373 6572 7473 2074 6861     # Asserts tha
+00028d50: 7420 7468 6572 6520 6172 6520 756e 7361  t there are unsa
+00028d60: 7665 6420 6d6f 6469 6669 6361 7469 6f6e  ved modification
+00028d70: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00028d80: 7365 7274 5472 7565 2873 656c 662e 6d61  sertTrue(self.ma
+00028d90: 696e 5f77 696e 646f 772e 6368 6563 6b5f  in_window.check_
+00028da0: 756e 7361 7665 645f 6d6f 6469 6669 6361  unsaved_modifica
+00028db0: 7469 6f6e 7328 2929 0a0a 2020 2020 2020  tions())..      
+00028dc0: 2020 506f 7055 7051 7569 742e 6578 6563    PopUpQuit.exec
+00028dd0: 203d 206c 616d 6264 6120 7365 6c66 5f3a   = lambda self_:
+00028de0: 2073 656c 665f 2e73 686f 7728 290a 0a20   self_.show().. 
+00028df0: 2020 2020 2020 2023 2054 7269 6573 2074         # Tries t
+00028e00: 6f20 6f70 656e 2061 2070 726f 6a65 6374  o open a project
+00028e10: 2077 6974 6820 756e 7361 7665 6420 6d6f   with unsaved mo
+00028e20: 6469 6669 6361 7469 6f6e 730a 2020 2020  difications.    
+00028e30: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
+00028e40: 6e64 6f77 2e6f 7065 6e5f 7072 6f6a 6563  ndow.open_projec
+00028e50: 745f 706f 705f 7570 2829 0a20 2020 2020  t_pop_up().     
+00028e60: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
+00028e70: 646f 772e 706f 705f 7570 5f63 6c6f 7365  dow.pop_up_close
+00028e80: 2e61 6363 6570 7428 290a 0a20 2020 2064  .accept()..    d
+00028e90: 6566 2074 6573 745f 6f70 656e 5f72 6563  ef test_open_rec
+00028ea0: 656e 745f 7072 6f6a 6563 7428 7365 6c66  ent_project(self
+00028eb0: 293a 0a20 2020 2020 2020 2022 2222 4372  ):.        """Cr
+00028ec0: 6561 7465 7320 3220 7465 7374 2070 726f  eates 2 test pro
+00028ed0: 6a65 6374 7320 616e 6420 6f70 656e 7320  jects and opens 
+00028ee0: 6f6e 6520 6279 2074 6865 2072 6563 656e  one by the recen
+00028ef0: 7420 7072 6f6a 6563 7473 2061 6374 696f  t projects actio
+00028f00: 6e2e 0a0a 2020 2020 2020 2020 2d20 5465  n...        - Te
+00028f10: 7374 733a 204d 6169 6e57 696e 646f 772e  sts: MainWindow.
+00028f20: 6f70 656e 5f72 6563 656e 745f 7072 6f6a  open_recent_proj
+00028f30: 6563 740a 2020 2020 2020 2020 2222 220a  ect.        """.
+00028f40: 0a20 2020 2020 2020 2023 2043 7265 6174  .        # Creat
+00028f50: 6573 2032 2074 6573 7420 7072 6f6a 6563  es 2 test projec
+00028f60: 7473 0a20 2020 2020 2020 2070 726f 6a5f  ts.        proj_
+00028f70: 7465 7374 5f31 5f70 6174 6820 3d20 7365  test_1_path = se
+00028f80: 6c66 2e67 6574 5f6e 6577 5f74 6573 745f  lf.get_new_test_
+00028f90: 7072 6f6a 6563 7428 0a20 2020 2020 2020  project(.       
+00028fa0: 2020 2020 206e 616d 653d 2274 6573 745f       name="test_
+00028fb0: 7072 6f6a 6563 745f 3122 2c20 6c69 6768  project_1", ligh
+00028fc0: 743d 5472 7565 0a20 2020 2020 2020 2029  t=True.        )
+00028fd0: 0a20 2020 2020 2020 2070 726f 6a5f 7465  .        proj_te
+00028fe0: 7374 5f32 5f70 6174 6820 3d20 7365 6c66  st_2_path = self
+00028ff0: 2e67 6574 5f6e 6577 5f74 6573 745f 7072  .get_new_test_pr
+00029000: 6f6a 6563 7428 0a20 2020 2020 2020 2020  oject(.         
+00029010: 2020 206e 616d 653d 2274 6573 745f 7072     name="test_pr
+00029020: 6f6a 6563 745f 3222 2c20 6c69 6768 743d  oject_2", light=
+00029030: 5472 7565 0a20 2020 2020 2020 2029 0a0a  True.        )..
+00029040: 2020 2020 2020 2020 2320 5377 6974 6368          # Switch
+00029050: 6573 2074 6f20 7468 6520 6669 7273 7420  es to the first 
+00029060: 6f6e 650a 2020 2020 2020 2020 7365 6c66  one.        self
+00029070: 2e6d 6169 6e5f 7769 6e64 6f77 2e73 7769  .main_window.swi
+00029080: 7463 685f 7072 6f6a 6563 7428 7072 6f6a  tch_project(proj
+00029090: 5f74 6573 745f 315f 7061 7468 2c20 2274  _test_1_path, "t
+000290a0: 6573 745f 7072 6f6a 6563 745f 3122 290a  est_project_1").
+000290b0: 2020 2020 2020 2020 636f 6e66 6967 203d          config =
+000290c0: 2043 6f6e 6669 6728 636f 6e66 6967 5f70   Config(config_p
+000290d0: 6174 683d 7365 6c66 2e63 6f6e 6669 675f  ath=self.config_
+000290e0: 7061 7468 290a 2020 2020 2020 2020 636f  path).        co
+000290f0: 6e66 6967 2e73 6574 5f70 726f 6a65 6374  nfig.set_project
+00029100: 735f 7361 7665 5f70 6174 6828 6f73 2e70  s_save_path(os.p
+00029110: 6174 682e 7370 6c69 7428 7072 6f6a 5f74  ath.split(proj_t
+00029120: 6573 745f 315f 7061 7468 295b 305d 290a  est_1_path)[0]).
+00029130: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
+00029140: 6e5f 7769 6e64 6f77 2e73 6176 6564 5f70  n_window.saved_p
+00029150: 726f 6a65 6374 735f 6c69 7374 2e61 7070  rojects_list.app
+00029160: 656e 6428 7072 6f6a 5f74 6573 745f 315f  end(proj_test_1_
+00029170: 7061 7468 290a 0a20 2020 2020 2020 2023  path)..        #
+00029180: 2053 6176 6573 2070 726f 6a65 6374 2031   Saves project 1
 00029190: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
-000291a0: 696e 5f77 696e 646f 772e 7377 6974 6368  in_window.switch
-000291b0: 5f70 726f 6a65 6374 2870 726f 6a5f 7465  _project(proj_te
-000291c0: 7374 5f31 5f70 6174 682c 2022 7465 7374  st_1_path, "test
-000291d0: 5f70 726f 6a65 6374 5f31 2229 0a20 2020  _project_1").   
-000291e0: 2020 2020 2063 6f6e 6669 6720 3d20 436f       config = Co
-000291f0: 6e66 6967 2863 6f6e 6669 675f 7061 7468  nfig(config_path
-00029200: 3d73 656c 662e 636f 6e66 6967 5f70 6174  =self.config_pat
-00029210: 6829 0a20 2020 2020 2020 2063 6f6e 6669  h).        confi
-00029220: 672e 7365 745f 7072 6f6a 6563 7473 5f73  g.set_projects_s
-00029230: 6176 655f 7061 7468 286f 732e 7061 7468  ave_path(os.path
-00029240: 2e73 706c 6974 2870 726f 6a5f 7465 7374  .split(proj_test
-00029250: 5f31 5f70 6174 6829 5b30 5d29 0a20 2020  _1_path)[0]).   
-00029260: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
-00029270: 696e 646f 772e 7361 7665 645f 7072 6f6a  indow.saved_proj
-00029280: 6563 7473 5f6c 6973 742e 6170 7065 6e64  ects_list.append
-00029290: 2870 726f 6a5f 7465 7374 5f31 5f70 6174  (proj_test_1_pat
-000292a0: 6829 0a0a 2020 2020 2020 2020 2320 5361  h)..        # Sa
-000292b0: 7665 7320 7072 6f6a 6563 7420 310a 2020  ves project 1.  
-000292c0: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-000292d0: 7769 6e64 6f77 2e73 6176 6543 686f 6963  window.saveChoic
-000292e0: 6528 290a 0a20 2020 2020 2020 2023 2053  e()..        # S
-000292f0: 7769 7463 6865 7320 746f 2070 726f 6a65  witches to proje
-00029300: 6374 2032 0a20 2020 2020 2020 2073 656c  ct 2.        sel
-00029310: 662e 6d61 696e 5f77 696e 646f 772e 7377  f.main_window.sw
-00029320: 6974 6368 5f70 726f 6a65 6374 2870 726f  itch_project(pro
-00029330: 6a5f 7465 7374 5f32 5f70 6174 682c 2022  j_test_2_path, "
-00029340: 7465 7374 5f70 726f 6a65 6374 5f32 2229  test_project_2")
-00029350: 0a0a 2020 2020 2020 2020 2320 4173 7365  ..        # Asse
-00029360: 7274 7320 7468 6174 2074 6573 7420 7072  rts that test pr
-00029370: 6f6a 6563 7420 3120 6973 2073 686f 776e  oject 1 is shown
-00029380: 2069 6e20 7265 6365 6e74 2070 726f 6a65   in recent proje
-00029390: 6374 730a 2020 2020 2020 2020 7365 6c66  cts.        self
-000293a0: 2e61 7373 6572 7454 7275 6528 7365 6c66  .assertTrue(self
-000293b0: 2e6d 6169 6e5f 7769 6e64 6f77 2e73 6176  .main_window.sav
-000293c0: 6564 5f70 726f 6a65 6374 735f 6163 7469  ed_projects_acti
-000293d0: 6f6e 735b 305d 2e69 7356 6973 6962 6c65  ons[0].isVisible
-000293e0: 2829 290a 0a20 2020 2020 2020 2023 2043  ())..        # C
-000293f0: 6c69 636b 7320 6f6e 2069 740a 2020 2020  licks on it.    
-00029400: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
-00029410: 6e64 6f77 2e73 6176 6564 5f70 726f 6a65  ndow.saved_proje
-00029420: 6374 735f 6163 7469 6f6e 735b 305d 2e74  cts_actions[0].t
-00029430: 7269 6767 6572 6564 2e65 6d69 7428 290a  riggered.emit().
-00029440: 0a20 2020 2020 2020 2023 2041 7373 6572  .        # Asser
-00029450: 7473 2074 6861 7420 6974 2069 7320 6e6f  ts that it is no
-00029460: 7720 7468 6520 6375 7272 656e 7420 7072  w the current pr
-00029470: 6f6a 6563 740a 2020 2020 2020 2020 636f  oject.        co
-00029480: 6e66 6967 203d 2043 6f6e 6669 6728 636f  nfig = Config(co
-00029490: 6e66 6967 5f70 6174 683d 7365 6c66 2e63  nfig_path=self.c
-000294a0: 6f6e 6669 675f 7061 7468 290a 2020 2020  onfig_path).    
-000294b0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-000294c0: 7175 616c 280a 2020 2020 2020 2020 2020  qual(.          
-000294d0: 2020 6f73 2e70 6174 682e 6162 7370 6174    os.path.abspat
-000294e0: 6828 636f 6e66 6967 2e67 6574 5f6f 7065  h(config.get_ope
-000294f0: 6e65 645f 7072 6f6a 6563 7473 2829 5b30  ned_projects()[0
-00029500: 5d29 2c20 7072 6f6a 5f74 6573 745f 315f  ]), proj_test_1_
-00029510: 7061 7468 0a20 2020 2020 2020 2029 0a0a  path.        )..
-00029520: 2020 2020 2020 2020 2320 4465 6c65 7465          # Delete
-00029530: 7320 6120 7363 616e 2066 726f 6d20 6461  s a scan from da
-00029540: 7461 2062 726f 7773 6572 0a20 2020 2020  ta browser.     
-00029550: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
-00029560: 646f 772e 6461 7461 5f62 726f 7773 6572  dow.data_browser
-00029570: 2e74 6162 6c65 5f64 6174 612e 7365 6c65  .table_data.sele
-00029580: 6374 526f 7728 3029 0a20 2020 2020 2020  ctRow(0).       
-00029590: 2023 2046 4958 4d45 3a20 666f 6c6c 6f77   # FIXME: follow
-000295a0: 696e 6720 6c69 6e65 2072 6169 7365 2065  ing line raise e
-000295b0: 7863 6570 7469 6f6e 2c20 6f6e 6c79 206f  xception, only o
-000295c0: 6e20 6d61 636f 7320 6275 696c 643a 0a20  n macos build:. 
-000295d0: 2020 2020 2020 2023 2323 5472 6163 6562         ###Traceb
-000295e0: 6163 6b20 286d 6f73 7420 7265 6365 6e74  ack (most recent
-000295f0: 2063 616c 6c20 6c61 7374 293a 0a20 2020   call last):.   
-00029600: 2020 2020 2023 2323 4669 6c65 2022 2f55       ###File "/U
-00029610: 7365 7273 2f61 7070 7665 796f 722f 7072  sers/appveyor/pr
-00029620: 6f6a 6563 7473 2f70 6f70 756c 7365 2d6d  ojects/populse-m
-00029630: 6961 2f70 7974 686f 6e2f 706f 7075 6c73  ia/python/populs
-00029640: 655f 6d69 612f 7465 7374 2e70 7922 2c20  e_mia/test.py", 
-00029650: 6c69 6e65 2033 3739 372c 2069 6e20 7465  line 3797, in te
-00029660: 7374 5f6f 7065 6e5f 7265 6365 6e74 5f70  st_open_recent_p
-00029670: 726f 6a65 6374 0a20 2020 2020 2020 2023  roject.        #
-00029680: 2323 7365 6c66 2e6d 6169 6e5f 7769 6e64  ##self.main_wind
-00029690: 6f77 2e64 6174 615f 6272 6f77 7365 722e  ow.data_browser.
-000296a0: 7461 626c 655f 6461 7461 2e72 656d 6f76  table_data.remov
-000296b0: 655f 7363 616e 2829 0a20 2020 2020 2020  e_scan().       
-000296c0: 2023 2323 4669 6c65 2022 2f55 7365 7273   ###File "/Users
-000296d0: 2f61 7070 7665 796f 722f 7072 6f6a 6563  /appveyor/projec
-000296e0: 7473 2f70 6f70 756c 7365 2d6d 6961 2f70  ts/populse-mia/p
-000296f0: 7974 686f 6e2f 706f 7075 6c73 655f 6d69  ython/populse_mi
-00029700: 612f 7573 6572 5f69 6e74 6572 6661 6365  a/user_interface
-00029710: 2f64 6174 615f 6272 6f77 7365 722f 6461  /data_browser/da
-00029720: 7461 5f62 726f 7773 6572 2e70 7922 2c20  ta_browser.py", 
-00029730: 6c69 6e65 2032 3035 352c 2069 6e20 7265  line 2055, in re
-00029740: 6d6f 7665 5f73 6361 6e0a 2020 2020 2020  move_scan.      
-00029750: 2020 2323 2373 6361 6e5f 7061 7468 290a    ###scan_path).
-00029760: 2020 2020 2020 2020 2323 2346 696c 6520          ###File 
-00029770: 222f 5573 6572 732f 6170 7076 6579 6f72  "/Users/appveyor
-00029780: 2f70 726f 6a65 6374 732f 706f 7075 6c73  /projects/populs
-00029790: 655f 6462 2f70 7974 686f 6e2f 706f 7075  e_db/python/popu
-000297a0: 6c73 655f 6462 2f64 6174 6162 6173 652e  lse_db/database.
-000297b0: 7079 222c 206c 696e 6520 3732 342c 2069  py", line 724, i
-000297c0: 6e20 7265 6d6f 7665 5f64 6f63 756d 656e  n remove_documen
-000297d0: 740a 2020 2020 2020 2020 2323 2373 656c  t.        ###sel
-000297e0: 662e 656e 6769 6e65 2e72 656d 6f76 655f  f.engine.remove_
-000297f0: 646f 6375 6d65 6e74 2863 6f6c 6c65 6374  document(collect
-00029800: 696f 6e2c 2064 6f63 756d 656e 745f 6964  ion, document_id
-00029810: 290a 2020 2020 2020 2020 2323 2346 696c  ).        ###Fil
-00029820: 6520 222f 5573 6572 732f 6170 7076 6579  e "/Users/appvey
-00029830: 6f72 2f70 726f 6a65 6374 732f 706f 7075  or/projects/popu
-00029840: 6c73 655f 6462 2f70 7974 686f 6e2f 706f  lse_db/python/po
-00029850: 7075 6c73 655f 6462 2f65 6e67 696e 652f  pulse_db/engine/
-00029860: 7371 6c69 7465 2e70 7922 2c20 6c69 6e65  sqlite.py", line
-00029870: 2036 3238 2c20 696e 2072 656d 6f76 655f   628, in remove_
-00029880: 646f 6375 6d65 6e74 0a20 2020 2020 2020  document.       
-00029890: 2023 2323 7365 6c66 2e72 656d 6f76 655f   ###self.remove_
-000298a0: 7661 6c75 6528 636f 6c6c 6563 7469 6f6e  value(collection
-000298b0: 2c20 646f 6375 6d65 6e74 5f69 642c 2066  , document_id, f
-000298c0: 6965 6c64 2e66 6965 6c64 5f6e 616d 6529  ield.field_name)
-000298d0: 0a20 2020 2020 2020 2023 2323 4669 6c65  .        ###File
-000298e0: 2022 2f55 7365 7273 2f61 7070 7665 796f   "/Users/appveyo
-000298f0: 722f 7072 6f6a 6563 7473 2f70 6f70 756c  r/projects/popul
-00029900: 7365 5f64 622f 7079 7468 6f6e 2f70 6f70  se_db/python/pop
-00029910: 756c 7365 5f64 622f 656e 6769 6e65 2f73  ulse_db/engine/s
-00029920: 716c 6974 652e 7079 222c 206c 696e 6520  qlite.py", line 
-00029930: 3631 322c 2069 6e20 7265 6d6f 7665 5f76  612, in remove_v
-00029940: 616c 7565 0a20 2020 2020 2020 2023 2323  alue.        ###
-00029950: 7365 6c66 2e63 7572 736f 722e 6578 6563  self.cursor.exec
-00029960: 7574 6528 7371 6c2c 205b 646f 6375 6d65  ute(sql, [docume
-00029970: 6e74 5f69 645d 290a 2020 2020 2020 2020  nt_id]).        
-00029980: 2323 2373 716c 6974 6533 2e4f 7065 7261  ###sqlite3.Opera
-00029990: 7469 6f6e 616c 4572 726f 723a 2061 7474  tionalError: att
-000299a0: 656d 7074 2074 6f20 7772 6974 6520 6120  empt to write a 
-000299b0: 7265 6164 6f6e 6c79 2064 6174 6162 6173  readonly databas
-000299c0: 650a 2020 2020 2020 2020 2320 5768 696c  e.        # Whil
-000299d0: 6520 7761 6974 696e 6720 746f 2069 6e76  e waiting to inv
-000299e0: 6573 7469 6765 7420 616e 6420 6669 6e64  estiget and find
-000299f0: 2061 2066 6978 2074 6865 206c 696e 6520   a fix the line 
-00029a00: 6973 2063 6f6d 6d65 6e74 6564 3a0a 2020  is commented:.  
-00029a10: 2020 2020 2020 2320 7365 6c66 2e6d 6169        # self.mai
-00029a20: 6e5f 7769 6e64 6f77 2e64 6174 615f 6272  n_window.data_br
-00029a30: 6f77 7365 722e 7461 626c 655f 6461 7461  owser.table_data
-00029a40: 2e72 656d 6f76 655f 7363 616e 2829 0a0a  .remove_scan()..
-00029a50: 2020 2020 2020 2020 2320 4173 7365 7274          # Assert
-00029a60: 7320 7468 6174 2074 6865 7265 2061 7265  s that there are
-00029a70: 2075 6e73 6176 6564 206d 6f64 6966 6963   unsaved modific
-00029a80: 6174 696f 6e0a 2020 2020 2020 2020 2320  ation.        # 
-00029a90: 4649 584d 453a 2042 7920 636f 6d6d 656e  FIXME: By commen
-00029aa0: 7469 6e67 2074 6865 2070 7265 7669 6f75  ting the previou
-00029ab0: 7320 6c69 6e65 2077 6520 6861 7665 2074  s line we have t
-00029ac0: 6f20 616c 736f 2063 6f6d 6d65 6e74 2074  o also comment t
-00029ad0: 6865 2066 6f6c 6c6f 7769 6e67 206c 696e  he following lin
-00029ae0: 653a 0a20 2020 2020 2020 2023 2073 656c  e:.        # sel
-00029af0: 662e 6173 7365 7274 5472 7565 2873 656c  f.assertTrue(sel
-00029b00: 662e 6d61 696e 5f77 696e 646f 772e 6368  f.main_window.ch
-00029b10: 6563 6b5f 756e 7361 7665 645f 6d6f 6469  eck_unsaved_modi
-00029b20: 6669 6361 7469 6f6e 7328 2929 0a0a 2020  fications())..  
-00029b30: 2020 2020 2020 506f 7055 7051 7569 742e        PopUpQuit.
-00029b40: 6578 6563 203d 206c 616d 6264 6120 7365  exec = lambda se
-00029b50: 6c66 5f3a 2073 656c 665f 2e73 686f 7728  lf_: self_.show(
-00029b60: 290a 0a20 2020 2020 2020 2023 2054 7269  )..        # Tri
-00029b70: 6573 2074 6f20 6f70 656e 2061 2070 726f  es to open a pro
-00029b80: 6a65 6374 2077 6974 6820 756e 7361 7665  ject with unsave
-00029b90: 6420 6d6f 6469 6669 6361 7469 6f6e 730a  d modifications.
-00029ba0: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
-00029bb0: 6e5f 7769 6e64 6f77 2e73 6176 6564 5f70  n_window.saved_p
-00029bc0: 726f 6a65 6374 735f 6163 7469 6f6e 735b  rojects_actions[
-00029bd0: 305d 2e74 7269 6767 6572 6564 2e65 6d69  0].triggered.emi
-00029be0: 7428 290a 0a20 2020 2020 2020 2070 7269  t()..        pri
-00029bf0: 6e74 2829 0a0a 2020 2020 4075 6e69 7474  nt()..    @unitt
-00029c00: 6573 742e 736b 6970 556e 6c65 7373 2873  est.skipUnless(s
-00029c10: 7973 2e70 6c61 7466 6f72 6d2e 7374 6172  ys.platform.star
-00029c20: 7473 7769 7468 2822 6c69 6e75 7822 292c  tswith("linux"),
-00029c30: 2022 7265 7175 6972 6573 206c 696e 7578   "requires linux
-00029c40: 2229 0a20 2020 2064 6566 2074 6573 745f  ").    def test_
-00029c50: 6f70 656e 5f73 6865 6c6c 2873 656c 6629  open_shell(self)
-00029c60: 3a0a 2020 2020 2020 2020 2222 224f 7065  :.        """Ope
-00029c70: 6e73 2061 2051 7420 636f 6e73 6f6c 6520  ns a Qt console 
-00029c80: 616e 6420 6b69 6c6c 2069 7420 6166 7465  and kill it afte
-00029c90: 7277 6172 6473 2e0a 0a20 2020 2020 2020  rwards...       
-00029ca0: 202d 5465 7374 733a 204d 6169 6e57 696e   -Tests: MainWin
-00029cb0: 646f 772e 6f70 656e 5f73 6865 6c6c 0a0a  dow.open_shell..
-00029cc0: 2020 2020 2020 2020 4375 7272 656e 746c          Currentl
-00029cd0: 792c 2074 6869 7320 7465 7374 2069 7320  y, this test is 
-00029ce0: 6f6e 6c79 2064 6f6e 6520 6f6e 206c 696e  only done on lin
-00029cf0: 7578 2e0a 2020 2020 2020 2020 2222 220a  ux..        """.
-00029d00: 0a20 2020 2020 2020 2023 204f 7065 6e73  .        # Opens
-00029d10: 2074 6865 2051 7420 636f 6e73 6f6c 650a   the Qt console.
-00029d20: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
-00029d30: 6e5f 7769 6e64 6f77 2e61 6374 696f 6e5f  n_window.action_
-00029d40: 6f70 656e 5f73 6865 6c6c 2e74 7269 6767  open_shell.trigg
-00029d50: 6572 6564 2e65 6d69 7428 290a 0a20 2020  ered.emit()..   
-00029d60: 2020 2020 2071 745f 636f 6e73 6f6c 655f       qt_console_
-00029d70: 7072 6f63 6573 7320 3d20 4e6f 6e65 0a20  process = None. 
-00029d80: 2020 2020 2020 2074 696d 655f 656c 6170         time_elap
-00029d90: 7365 6420 3d20 300a 0a20 2020 2020 2020  sed = 0..       
-00029da0: 2077 6869 6c65 2074 696d 655f 656c 6170   while time_elap
-00029db0: 7365 6420 3c20 353a 0a20 2020 2020 2020  sed < 5:.       
-00029dc0: 2020 2020 2023 2047 6574 7320 7468 6520       # Gets the 
-00029dd0: 6375 7272 656e 7420 7072 6f63 6573 730a  current process.
-00029de0: 2020 2020 2020 2020 2020 2020 6375 7272              curr
-00029df0: 656e 745f 7072 6f63 6573 7320 3d20 7073  ent_process = ps
-00029e00: 7574 696c 2e50 726f 6365 7373 2829 0a20  util.Process(). 
-00029e10: 2020 2020 2020 2020 2020 2063 6869 6c64             child
-00029e20: 7265 6e20 3d20 6375 7272 656e 745f 7072  ren = current_pr
-00029e30: 6f63 6573 732e 6368 696c 6472 656e 2872  ocess.children(r
-00029e40: 6563 7572 7369 7665 3d54 7275 6529 0a0a  ecursive=True)..
-00029e50: 2020 2020 2020 2020 2020 2020 2320 4966              # If
-00029e60: 2071 745f 636f 6e73 6f6c 655f 7072 6f63   qt_console_proc
-00029e70: 6573 7320 6973 206e 6f74 206e 6f6e 652c  ess is not none,
-00029e80: 2074 6865 2071 7420 636f 6e73 6f6c 6520   the qt console 
-00029e90: 7072 6f63 6573 730a 2020 2020 2020 2020  process.        
-00029ea0: 2020 2020 2320 7761 7320 666f 756e 640a      # was found.
-00029eb0: 2020 2020 2020 2020 2020 2020 6966 2071              if q
-00029ec0: 745f 636f 6e73 6f6c 655f 7072 6f63 6573  t_console_proces
-00029ed0: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
-00029ee0: 2020 2062 7265 616b 0a0a 2020 2020 2020     break..      
-00029ef0: 2020 2020 2020 6966 2063 6869 6c64 7265        if childre
-00029f00: 6e3a 0a0a 2020 2020 2020 2020 2020 2020  n:..            
-00029f10: 2020 2020 2320 4765 7473 2074 6865 2070      # Gets the p
-00029f20: 726f 6365 7373 2070 6964 2028 7072 6f63  rocess pid (proc
-00029f30: 6573 7320 6964 290a 2020 2020 2020 2020  ess id).        
-00029f40: 2020 2020 2020 2020 666f 7220 6368 696c          for chil
-00029f50: 6420 696e 2063 6869 6c64 7265 6e3a 0a0a  d in children:..
-00029f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029f70: 2020 2020 6966 2063 6869 6c64 2e6e 616d      if child.nam
-00029f80: 6528 2920 3d3d 2022 6a75 7079 7465 722d  e() == "jupyter-
-00029f90: 7174 636f 6e73 6f22 3a0a 2020 2020 2020  qtconso":.      
-00029fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00029fb0: 2020 7174 5f63 6f6e 736f 6c65 5f70 726f    qt_console_pro
-00029fc0: 6365 7373 203d 2063 6869 6c64 2e70 6964  cess = child.pid
-00029fd0: 0a0a 2020 2020 2020 2020 2020 2020 736c  ..            sl
-00029fe0: 6565 7028 3129 0a20 2020 2020 2020 2020  eep(1).         
-00029ff0: 2020 2074 696d 655f 656c 6170 7365 6420     time_elapsed 
-0002a000: 2b3d 2031 0a0a 2020 2020 2020 2020 6966  += 1..        if
-0002a010: 2071 745f 636f 6e73 6f6c 655f 7072 6f63   qt_console_proc
-0002a020: 6573 733a 0a20 2020 2020 2020 2020 2020  ess:.           
-0002a030: 2023 204b 696c 6c73 2074 6865 2051 7420   # Kills the Qt 
-0002a040: 636f 6e73 6f6c 650a 2020 2020 2020 2020  console.        
-0002a050: 2020 2020 6f73 2e6b 696c 6c28 7174 5f63      os.kill(qt_c
-0002a060: 6f6e 736f 6c65 5f70 726f 6365 7373 2c20  onsole_process, 
-0002a070: 3929 0a0a 2020 2020 2020 2020 656c 7365  9)..        else
-0002a080: 3a0a 2020 2020 2020 2020 2020 2020 7072  :.            pr
-0002a090: 696e 7428 2274 6865 2051 7420 636f 6e73  int("the Qt cons
-0002a0a0: 6f6c 6520 7072 6f63 6573 7320 7761 7320  ole process was 
-0002a0b0: 6e6f 7420 666f 756e 6422 290a 0a20 2020  not found")..   
-0002a0c0: 2064 6566 2074 6573 745f 7061 636b 6167   def test_packag
-0002a0d0: 655f 6c69 6272 6172 795f 6469 616c 6f67  e_library_dialog
-0002a0e0: 5f61 6464 5f70 6b67 2873 656c 6629 3a0a  _add_pkg(self):.
-0002a0f0: 2020 2020 2020 2020 2222 2243 7265 6174          """Creat
-0002a100: 6573 2061 206e 6577 2070 726f 6a65 6374  es a new project
-0002a110: 2066 6f6c 6465 722c 206f 7065 6e73 2074   folder, opens t
-0002a120: 6865 2070 726f 6365 7373 6573 206c 6962  he processes lib
-0002a130: 7261 7279 2061 6e64 0a20 2020 2020 2020  rary and.       
-0002a140: 2061 6464 7320 6120 7061 636b 6167 652e   adds a package.
-0002a150: 0a0a 2020 2020 2020 2020 2d20 5465 7374  ..        - Test
-0002a160: 733a 2050 6163 6b61 6765 4c69 6272 6172  s: PackageLibrar
-0002a170: 7944 6961 6c6f 670a 0a20 2020 2020 2020  yDialog..       
-0002a180: 202d 204d 6f63 6b73 3a0a 2020 2020 2020   - Mocks:.      
-0002a190: 2020 2020 2020 2d20 514d 6573 7361 6765        - QMessage
-0002a1a0: 426f 782e 6578 6563 0a20 2020 2020 2020  Box.exec.       
-0002a1b0: 2020 2020 202d 2051 4d65 7373 6167 6542       - QMessageB
-0002a1c0: 6f78 2e65 7865 635f 0a20 2020 2020 2020  ox.exec_.       
-0002a1d0: 2020 2020 202d 2051 4669 6c65 4469 616c       - QFileDial
-0002a1e0: 6f67 2e65 7865 635f 0a20 2020 2020 2020  og.exec_.       
-0002a1f0: 2022 2222 0a0a 2020 2020 2020 2020 504b   """..        PK
-0002a200: 4720 3d20 226e 6970 7970 652e 696e 7465  G = "nipype.inte
-0002a210: 7266 6163 6573 2e44 6174 6147 7261 6262  rfaces.DataGrabb
-0002a220: 6572 220a 0a20 2020 2020 2020 2023 2043  er"..        # C
-0002a230: 7265 6174 6573 2061 206e 6577 2070 726f  reates a new pro
-0002a240: 6a65 6374 2066 6f6c 6465 7220 616e 6420  ject folder and 
-0002a250: 7377 6974 6368 6573 2074 6f20 6974 0a20  switches to it. 
-0002a260: 2020 2020 2020 206e 6577 5f70 726f 6a5f         new_proj_
-0002a270: 7061 7468 203d 2073 656c 662e 6765 745f  path = self.get_
-0002a280: 6e65 775f 7465 7374 5f70 726f 6a65 6374  new_test_project
-0002a290: 286c 6967 6874 3d54 7275 6529 0a20 2020  (light=True).   
-0002a2a0: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
-0002a2b0: 696e 646f 772e 7377 6974 6368 5f70 726f  indow.switch_pro
-0002a2c0: 6a65 6374 286e 6577 5f70 726f 6a5f 7061  ject(new_proj_pa
-0002a2d0: 7468 2c20 2274 6573 745f 6c69 6768 745f  th, "test_light_
-0002a2e0: 7072 6f6a 6563 7422 290a 0a20 2020 2020  project")..     
-0002a2f0: 2020 2023 2053 6574 2073 686f 7274 6375     # Set shortcu
-0002a300: 7473 2066 6f72 206f 626a 6563 7473 2074  ts for objects t
-0002a310: 6861 7420 6172 6520 6f66 7465 6e20 7573  hat are often us
-0002a320: 6564 0a20 2020 2020 2020 2070 706c 5f6d  ed.        ppl_m
-0002a330: 616e 6167 6572 203d 2073 656c 662e 6d61  anager = self.ma
-0002a340: 696e 5f77 696e 646f 772e 7069 7065 6c69  in_window.pipeli
-0002a350: 6e65 5f6d 616e 6167 6572 0a20 2020 2020  ne_manager.     
-0002a360: 2020 2070 706c 5f65 6474 5f74 6162 7320     ppl_edt_tabs 
-0002a370: 3d20 7070 6c5f 6d61 6e61 6765 722e 7069  = ppl_manager.pi
-0002a380: 7065 6c69 6e65 4564 6974 6f72 5461 6273  pelineEditorTabs
-0002a390: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
-0002a3a0: 5f74 6162 203d 2070 706c 5f65 6474 5f74  _tab = ppl_edt_t
-0002a3b0: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
-0002a3c0: 6564 6974 6f72 2829 0a20 2020 2020 2020  editor().       
-0002a3d0: 2070 706c 203d 2070 706c 5f65 6474 5f74   ppl = ppl_edt_t
-0002a3e0: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
-0002a3f0: 7069 7065 6c69 6e65 2829 0a20 2020 2020  pipeline().     
-0002a400: 2020 2070 726f 635f 6c69 625f 7669 6577     proc_lib_view
-0002a410: 203d 2070 706c 5f6d 616e 6167 6572 2e70   = ppl_manager.p
-0002a420: 726f 6365 7373 4c69 6272 6172 792e 7072  rocessLibrary.pr
-0002a430: 6f63 6573 735f 6c69 6272 6172 790a 0a20  ocess_library.. 
-0002a440: 2020 2020 2020 2023 204f 7065 6e73 2074         # Opens t
-0002a450: 6865 2070 6163 6b61 6765 206c 6962 7261  he package libra
-0002a460: 7279 2070 6f70 2d75 700a 2020 2020 2020  ry pop-up.      
-0002a470: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
-0002a480: 6f77 2e70 6163 6b61 6765 5f6c 6962 7261  ow.package_libra
-0002a490: 7279 5f70 6f70 5f75 7028 290a 2020 2020  ry_pop_up().    
-0002a4a0: 2020 2020 706b 675f 6c69 625f 7769 6e64      pkg_lib_wind
-0002a4b0: 6f77 203d 2073 656c 662e 6d61 696e 5f77  ow = self.main_w
-0002a4c0: 696e 646f 772e 706f 705f 7570 5f70 6163  indow.pop_up_pac
-0002a4d0: 6b61 6765 5f6c 6962 7261 7279 0a0a 2020  kage_library..  
-0002a4e0: 2020 2020 2020 2320 436c 6963 6b73 206f        # Clicks o
-0002a4f0: 6e20 7468 6520 6164 6420 7061 636b 6167  n the add packag
-0002a500: 6520 6275 7474 6f6e 2077 6974 686f 7574  e button without
-0002a510: 2073 656c 6563 7469 6e67 2061 6e79 7468   selecting anyth
-0002a520: 696e 670a 2020 2020 2020 2020 514d 6573  ing.        QMes
-0002a530: 7361 6765 426f 782e 6578 6563 203d 206c  sageBox.exec = l
-0002a540: 616d 6264 6120 783a 204e 6f6e 650a 2020  ambda x: None.  
-0002a550: 2020 2020 2020 514d 6573 7361 6765 426f        QMessageBo
-0002a560: 782e 6578 6563 5f20 3d20 6c61 6d62 6461  x.exec_ = lambda
-0002a570: 2078 3a20 4e6f 6e65 0a20 2020 2020 2020   x: None.       
-0002a580: 2070 6b67 5f6c 6962 5f77 696e 646f 772e   pkg_lib_window.
-0002a590: 6c61 796f 7574 2829 2e63 6869 6c64 7265  layout().childre
-0002a5a0: 6e28 295b 305d 2e6c 6179 6f75 7428 292e  n()[0].layout().
-0002a5b0: 6368 696c 6472 656e 2829 5b33 5d2e 6974  children()[3].it
-0002a5c0: 656d 4174 280a 2020 2020 2020 2020 2020  emAt(.          
-0002a5d0: 2020 300a 2020 2020 2020 2020 292e 7769    0.        ).wi
-0002a5e0: 6467 6574 2829 2e63 6c69 636b 6564 2e65  dget().clicked.e
-0002a5f0: 6d69 7428 290a 0a20 2020 2020 2020 2023  mit()..        #
-0002a600: 204f 7065 6e20 6120 6272 6f77 7365 7220   Open a browser 
-0002a610: 746f 2073 656c 6563 7420 6120 7061 636b  to select a pack
-0002a620: 6167 650a 2020 2020 2020 2020 5146 696c  age.        QFil
-0002a630: 6544 6961 6c6f 672e 6578 6563 5f20 3d20  eDialog.exec_ = 
-0002a640: 6c61 6d62 6461 2078 3a20 5472 7565 0a20  lambda x: True. 
-0002a650: 2020 2020 2020 2070 726f 635f 6c69 625f         proc_lib_
-0002a660: 7669 6577 2e70 6b67 5f6c 6962 7261 7279  view.pkg_library
-0002a670: 2e62 726f 7773 655f 7061 636b 6167 6528  .browse_package(
-0002a680: 290a 0a20 2020 2020 2020 2023 2046 696c  )..        # Fil
-0002a690: 6c20 696e 2074 6865 206c 696e 6520 6564  l in the line ed
-0002a6a0: 6974 2074 6f20 2250 4b47 2220 7468 656e  it to "PKG" then
-0002a6b0: 2063 6c69 636b 206f 6e20 7468 6520 6164   click on the ad
-0002a6c0: 6420 7061 636b 6167 6520 6275 7474 6f6e  d package button
-0002a6d0: 0a20 2020 2020 2020 2070 6b67 5f6c 6962  .        pkg_lib
-0002a6e0: 5f77 696e 646f 772e 6c69 6e65 5f65 6469  _window.line_edi
-0002a6f0: 742e 7365 7454 6578 7428 504b 4729 0a20  t.setText(PKG). 
-0002a700: 2020 2020 2020 2070 726f 635f 6c69 625f         proc_lib_
-0002a710: 7669 6577 2e70 6b67 5f6c 6962 7261 7279  view.pkg_library
-0002a720: 2e69 735f 7061 7468 203d 2046 616c 7365  .is_path = False
-0002a730: 0a20 2020 2020 2020 2070 6b67 5f6c 6962  .        pkg_lib
-0002a740: 5f77 696e 646f 772e 6c61 796f 7574 2829  _window.layout()
-0002a750: 2e63 6869 6c64 7265 6e28 295b 305d 2e6c  .children()[0].l
-0002a760: 6179 6f75 7428 292e 6368 696c 6472 656e  ayout().children
-0002a770: 2829 5b33 5d2e 6974 656d 4174 280a 2020  ()[3].itemAt(.  
-0002a780: 2020 2020 2020 2020 2020 300a 2020 2020            0.    
-0002a790: 2020 2020 292e 7769 6467 6574 2829 2e63      ).widget().c
-0002a7a0: 6c69 636b 6564 2e65 6d69 7428 290a 0a20  licked.emit().. 
-0002a7b0: 2020 2020 2020 2023 2052 6573 6574 7320         # Resets 
-0002a7c0: 7468 6520 7072 6576 696f 7573 2061 6374  the previous act
-0002a7d0: 696f 6e0a 2020 2020 2020 2020 706b 675f  ion.        pkg_
-0002a7e0: 6c69 625f 7769 6e64 6f77 2e61 6464 5f6c  lib_window.add_l
-0002a7f0: 6973 742e 7365 6c65 6374 416c 6c28 290a  ist.selectAll().
-0002a800: 2020 2020 2020 2020 706b 675f 6c69 625f          pkg_lib_
-0002a810: 7769 6e64 6f77 2e6c 6179 6f75 7428 292e  window.layout().
-0002a820: 6368 696c 6472 656e 2829 5b30 5d2e 6c61  children()[0].la
-0002a830: 796f 7574 2829 2e69 7465 6d41 7428 0a20  yout().itemAt(. 
-0002a840: 2020 2020 2020 2020 2020 2038 0a20 2020             8.   
-0002a850: 2020 2020 2029 2e77 6964 6765 7428 292e       ).widget().
-0002a860: 6c61 796f 7574 2829 2e69 7465 6d41 7428  layout().itemAt(
-0002a870: 3129 2e77 6964 6765 7428 292e 636c 6963  1).widget().clic
-0002a880: 6b65 642e 656d 6974 2829 0a0a 2020 2020  ked.emit()..    
-0002a890: 2020 2020 2320 4170 706c 7920 6368 616e      # Apply chan
-0002a8a0: 6765 732c 2063 6c6f 7365 2074 6865 2070  ges, close the p
-0002a8b0: 6163 6b61 6765 206c 6962 7261 7279 2070  ackage library p
-0002a8c0: 6f70 2d75 700a 2020 2020 2020 2020 706b  op-up.        pk
-0002a8d0: 675f 6c69 625f 7769 6e64 6f77 2e6f 6b5f  g_lib_window.ok_
-0002a8e0: 636c 6963 6b65 6428 290a 0a20 2020 2020  clicked()..     
-0002a8f0: 2020 2023 204f 7065 6e73 2061 6761 696e     # Opens again
-0002a900: 2074 6865 2070 6163 6b61 6765 206c 6962   the package lib
-0002a910: 7261 7279 2070 6f70 2d75 700a 2020 2020  rary pop-up.    
-0002a920: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
-0002a930: 6e64 6f77 2e70 6163 6b61 6765 5f6c 6962  ndow.package_lib
-0002a940: 7261 7279 5f70 6f70 5f75 7028 290a 2020  rary_pop_up().  
-0002a950: 2020 2020 2020 706b 675f 6c69 625f 7769        pkg_lib_wi
-0002a960: 6e64 6f77 203d 2073 656c 662e 6d61 696e  ndow = self.main
-0002a970: 5f77 696e 646f 772e 706f 705f 7570 5f70  _window.pop_up_p
-0002a980: 6163 6b61 6765 5f6c 6962 7261 7279 0a0a  ackage_library..
-0002a990: 2020 2020 2020 2020 2320 5772 6974 6573          # Writes
-0002a9a0: 2074 6865 206e 616d 6520 6f66 2061 206e   the name of a n
-0002a9b0: 6f6e 2d65 7869 7374 656e 7420 7061 636b  on-existent pack
-0002a9c0: 6167 6520 6f6e 2074 6865 206c 696e 6520  age on the line 
-0002a9d0: 6564 6974 0a20 2020 2020 2020 2070 6b67  edit.        pkg
-0002a9e0: 5f6c 6962 5f77 696e 646f 772e 6c69 6e65  _lib_window.line
-0002a9f0: 5f65 6469 742e 7365 7454 6578 7428 226e  _edit.setText("n
-0002aa00: 6f6e 2d65 7869 7374 656e 7422 290a 0a20  on-existent").. 
-0002aa10: 2020 2020 2020 2023 2043 6c69 636b 7320         # Clicks 
-0002aa20: 6f6e 2074 6865 2061 6464 2070 6163 6b61  on the add packa
-0002aa30: 6765 2062 7574 746f 6e0a 2020 2020 2020  ge button.      
-0002aa40: 2020 706b 675f 6c69 625f 7769 6e64 6f77    pkg_lib_window
-0002aa50: 2e6c 6179 6f75 7428 292e 6368 696c 6472  .layout().childr
-0002aa60: 656e 2829 5b30 5d2e 6c61 796f 7574 2829  en()[0].layout()
-0002aa70: 2e63 6869 6c64 7265 6e28 295b 335d 2e69  .children()[3].i
-0002aa80: 7465 6d41 7428 0a20 2020 2020 2020 2020  temAt(.         
-0002aa90: 2020 2030 0a20 2020 2020 2020 2029 2e77     0.        ).w
-0002aaa0: 6964 6765 7428 292e 636c 6963 6b65 642e  idget().clicked.
-0002aab0: 656d 6974 2829 0a0a 2020 2020 2020 2020  emit()..        
-0002aac0: 2320 4170 706c 7920 6368 616e 6765 732c  # Apply changes,
-0002aad0: 2063 6c6f 7365 2074 6865 2070 6163 6b61   close the packa
-0002aae0: 6765 206c 6962 7261 7279 2070 6f70 2d75  ge library pop-u
-0002aaf0: 700a 2020 2020 2020 2020 706b 675f 6c69  p.        pkg_li
-0002ab00: 625f 7769 6e64 6f77 2e6f 6b5f 636c 6963  b_window.ok_clic
-0002ab10: 6b65 6428 290a 0a20 2020 2020 2020 2023  ked()..        #
-0002ab20: 204d 616b 6573 2061 206d 6f63 6b65 6420   Makes a mocked 
-0002ab30: 7072 6f63 6573 7320 666f 6c64 6572 2022  process folder "
-0002ab40: 4d6f 636b 5f70 726f 6365 7373 2220 696e  Mock_process" in
-0002ab50: 2074 6865 2074 656d 706f 7261 7279 0a20   the temporary. 
-0002ab60: 2020 2020 2020 2023 2070 726f 6a65 6374         # project
-0002ab70: 2070 6174 680a 2020 2020 2020 2020 6d6f   path.        mo
-0002ab80: 636b 5f70 726f 635f 666c 6472 203d 206f  ck_proc_fldr = o
-0002ab90: 732e 7061 7468 2e6a 6f69 6e28 0a20 2020  s.path.join(.   
-0002aba0: 2020 2020 2020 2020 206e 6577 5f70 726f           new_pro
-0002abb0: 6a5f 7061 7468 2c20 2270 726f 6365 7373  j_path, "process
-0002abc0: 6573 222c 2022 5554 735f 7072 6f63 6573  es", "UTs_proces
-0002abd0: 7365 7322 0a20 2020 2020 2020 2029 0a20  ses".        ). 
-0002abe0: 2020 2020 2020 206f 732e 6d61 6b65 6469         os.makedi
-0002abf0: 7273 286d 6f63 6b5f 7072 6f63 5f66 6c64  rs(mock_proc_fld
-0002ac00: 722c 2065 7869 7374 5f6f 6b3d 5472 7565  r, exist_ok=True
-0002ac10: 290a 0a20 2020 2020 2020 2023 204d 616b  )..        # Mak
-0002ac20: 6520 6120 275f 5f69 6e69 745f 5f2e 7079  e a '__init__.py
-0002ac30: 2720 696e 2074 6865 206d 6f63 6b5f 7072  ' in the mock_pr
-0002ac40: 6f63 5f66 6c64 7220 7468 6174 2072 6169  oc_fldr that rai
-0002ac50: 7365 2061 6e20 2749 6d70 6f72 7445 7272  se an 'ImportErr
-0002ac60: 6f72 270a 2020 2020 2020 2020 696e 6974  or'.        init
-0002ac70: 5f66 696c 6520 3d20 6f70 656e 286f 732e  _file = open(os.
-0002ac80: 7061 7468 2e6a 6f69 6e28 6d6f 636b 5f70  path.join(mock_p
-0002ac90: 726f 635f 666c 6472 2c20 225f 5f69 6e69  roc_fldr, "__ini
-0002aca0: 745f 5f2e 7079 2229 2c20 2277 2229 0a20  t__.py"), "w"). 
-0002acb0: 2020 2020 2020 2069 6e69 745f 6669 6c65         init_file
-0002acc0: 2e77 7269 7465 2822 7261 6973 6520 496d  .write("raise Im
-0002acd0: 706f 7274 4572 726f 7228 276d 6f63 6b5f  portError('mock_
-0002ace0: 696d 706f 7274 5f65 7272 6f72 2729 2229  import_error')")
-0002acf0: 0a20 2020 2020 2020 2069 6e69 745f 6669  .        init_fi
-0002ad00: 6c65 2e63 6c6f 7365 2829 0a0a 2020 2020  le.close()..    
-0002ad10: 2020 2020 2320 4d61 6b65 2061 2027 7465      # Make a 'te
-0002ad20: 7374 5f75 6e69 745f 7465 7374 5f31 2e70  st_unit_test_1.p
-0002ad30: 7927 2069 6e20 7468 6520 6d6f 636b 5f70  y' in the mock_p
-0002ad40: 726f 635f 666c 6472 2077 6974 6820 6120  roc_fldr with a 
-0002ad50: 7265 616c 2070 726f 6365 7373 0a20 2020  real process.   
-0002ad60: 2020 2020 2075 6e69 745f 7465 7374 203d       unit_test =
-0002ad70: 206f 7065 6e28 6f73 2e70 6174 682e 6a6f   open(os.path.jo
-0002ad80: 696e 286d 6f63 6b5f 7072 6f63 5f66 6c64  in(mock_proc_fld
-0002ad90: 722c 2022 756e 6974 5f74 6573 745f 312e  r, "unit_test_1.
-0002ada0: 7079 2229 2c20 2277 2229 0a20 2020 2020  py"), "w").     
-0002adb0: 2020 2075 6e69 745f 7465 7374 2e77 7269     unit_test.wri
-0002adc0: 7465 6c69 6e65 7328 0a20 2020 2020 2020  telines(.       
-0002add0: 2020 2020 205b 0a20 2020 2020 2020 2020       [.         
-0002ade0: 2020 2020 2020 2022 6672 6f6d 2063 6170         "from cap
-0002adf0: 7375 6c2e 6170 6920 696d 706f 7274 2050  sul.api import P
-0002ae00: 6970 656c 696e 655c 6e22 2c0a 2020 2020  ipeline\n",.    
-0002ae10: 2020 2020 2020 2020 2020 2020 2269 6d70              "imp
-0002ae20: 6f72 7420 7472 6169 7473 2e61 7069 2061  ort traits.api a
-0002ae30: 7320 7472 6169 7473 5c6e 222c 0a20 2020  s traits\n",.   
-0002ae40: 2020 2020 2020 2020 2020 2020 2022 636c               "cl
-0002ae50: 6173 7320 556e 6974 5f74 6573 745f 3128  ass Unit_test_1(
-0002ae60: 5069 7065 6c69 6e65 293a 5c6e 222c 0a20  Pipeline):\n",. 
-0002ae70: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0002ae80: 2020 2020 6465 6620 7069 7065 6c69 6e65      def pipeline
-0002ae90: 5f64 6566 696e 6974 696f 6e28 7365 6c66  _definition(self
-0002aea0: 293a 5c6e 222c 0a20 2020 2020 2020 2020  ):\n",.         
-0002aeb0: 2020 2020 2020 2022 2020 2020 2020 2020         "        
-0002aec0: 7365 6c66 2e61 6464 5f70 726f 6365 7373  self.add_process
-0002aed0: 2827 736d 6f6f 7468 5f31 272c 2027 6d69  ('smooth_1', 'mi
-0002aee0: 615f 7072 6f63 6573 7365 732e 6272 6963  a_processes.bric
-0002aef0: 6b73 2e70 7265 7072 6f63 6573 732e 7370  ks.preprocess.sp
-0002af00: 6d2e 220a 2020 2020 2020 2020 2020 2020  m.".            
-0002af10: 2020 2020 2273 7061 7469 616c 5f70 7265      "spatial_pre
-0002af20: 7072 6f63 6573 7369 6e67 2e53 6d6f 6f74  processing.Smoot
-0002af30: 6827 295c 6e22 2c0a 2020 2020 2020 2020  h')\n",.        
-0002af40: 2020 2020 2020 2020 2220 2020 2020 2020          "       
-0002af50: 2073 656c 662e 6578 706f 7274 5f70 6172   self.export_par
-0002af60: 616d 6574 6572 2827 736d 6f6f 7468 5f31  ameter('smooth_1
-0002af70: 272c 2027 696e 5f66 696c 6573 272c 2069  ', 'in_files', i
-0002af80: 735f 6f70 7469 6f6e 616c 3d46 616c 7365  s_optional=False
-0002af90: 295c 6e22 2c0a 2020 2020 2020 2020 2020  )\n",.          
-0002afa0: 2020 2020 2020 2220 2020 2020 2020 2073        "        s
-0002afb0: 656c 662e 6578 706f 7274 5f70 6172 616d  elf.export_param
-0002afc0: 6574 6572 2827 736d 6f6f 7468 5f31 272c  eter('smooth_1',
-0002afd0: 2027 6677 686d 272c 2069 735f 6f70 7469   'fwhm', is_opti
-0002afe0: 6f6e 616c 3d54 7275 6529 5c6e 222c 0a20  onal=True)\n",. 
-0002aff0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0002b000: 2020 2020 2020 2020 7365 6c66 2e65 7870          self.exp
-0002b010: 6f72 745f 7061 7261 6d65 7465 7228 2773  ort_parameter('s
-0002b020: 6d6f 6f74 685f 3127 2c20 2764 6174 615f  mooth_1', 'data_
-0002b030: 7479 7065 272c 2069 735f 6f70 7469 6f6e  type', is_option
-0002b040: 616c 3d54 7275 6529 5c6e 222c 0a20 2020  al=True)\n",.   
-0002b050: 2020 2020 2020 2020 2020 2020 2022 2020               "  
-0002b060: 2020 2020 2020 7365 6c66 2e65 7870 6f72        self.expor
-0002b070: 745f 7061 7261 6d65 7465 7228 2773 6d6f  t_parameter('smo
-0002b080: 6f74 685f 3127 2c20 2769 6d70 6c69 6369  oth_1', 'implici
-0002b090: 745f 6d61 736b 696e 6727 2c20 220a 2020  t_masking', ".  
-0002b0a0: 2020 2020 2020 2020 2020 2020 2020 2269                "i
-0002b0b0: 735f 6f70 7469 6f6e 616c 3d54 7275 6529  s_optional=True)
-0002b0c0: 5c6e 222c 0a20 2020 2020 2020 2020 2020  \n",.           
-0002b0d0: 2020 2020 2022 2020 2020 2020 2020 7365       "        se
-0002b0e0: 6c66 2e65 7870 6f72 745f 7061 7261 6d65  lf.export_parame
-0002b0f0: 7465 7228 2773 6d6f 6f74 685f 3127 2c20  ter('smooth_1', 
-0002b100: 276f 7574 5f70 7265 6669 7827 2c20 6973  'out_prefix', is
-0002b110: 5f6f 7074 696f 6e61 6c3d 5472 7565 295c  _optional=True)\
-0002b120: 6e22 2c0a 2020 2020 2020 2020 2020 2020  n",.            
-0002b130: 2020 2020 2220 2020 2020 2020 2073 656c      "        sel
-0002b140: 662e 6578 706f 7274 5f70 6172 616d 6574  f.export_paramet
-0002b150: 6572 2827 736d 6f6f 7468 5f31 272c 2027  er('smooth_1', '
-0002b160: 736d 6f6f 7468 6564 5f66 696c 6573 272c  smoothed_files',
-0002b170: 2022 0a20 2020 2020 2020 2020 2020 2020   ".             
-0002b180: 2020 2022 6973 5f6f 7074 696f 6e61 6c3d     "is_optional=
-0002b190: 4661 6c73 6529 5c6e 222c 0a20 2020 2020  False)\n",.     
-0002b1a0: 2020 2020 2020 2020 2020 2022 2020 2020             "    
-0002b1b0: 2020 2020 7365 6c66 2e72 656f 7264 6572      self.reorder
-0002b1c0: 5f74 7261 6974 7328 2827 696e 5f66 696c  _traits(('in_fil
-0002b1d0: 6573 272c 2027 6677 686d 272c 2027 6461  es', 'fwhm', 'da
-0002b1e0: 7461 5f74 7970 6527 2c20 220a 2020 2020  ta_type', ".    
-0002b1f0: 2020 2020 2020 2020 2020 2020 2227 696d              "'im
-0002b200: 706c 6963 6974 5f6d 6173 6b69 6e67 272c  plicit_masking',
-0002b210: 2027 6f75 745f 7072 6566 6978 272c 2027   'out_prefix', '
-0002b220: 736d 6f6f 7468 6564 5f66 696c 6573 2729  smoothed_files')
-0002b230: 295c 6e22 2c0a 2020 2020 2020 2020 2020  )\n",.          
-0002b240: 2020 2020 2020 2220 2020 2020 2020 2073        "        s
-0002b250: 656c 662e 6e6f 6465 5f70 6f73 6974 696f  elf.node_positio
-0002b260: 6e20 3d20 7b5c 6e22 2c0a 2020 2020 2020  n = {\n",.      
-0002b270: 2020 2020 2020 2020 2020 2220 2020 2020            "     
-0002b280: 2020 2020 2020 2027 736d 6f6f 7468 5f31         'smooth_1
-0002b290: 273a 2028 2d31 3139 2e30 2c20 2d37 332e  ': (-119.0, -73.
-0002b2a0: 3029 2c5c 6e22 2c0a 2020 2020 2020 2020  0),\n",.        
-0002b2b0: 2020 2020 2020 2020 2220 2020 2020 2020          "       
-0002b2c0: 2020 2020 2027 696e 7075 7473 273a 2028       'inputs': (
-0002b2d0: 2d33 3733 2e32 3635 3138 3433 3939 3636  -373.26518439966
-0002b2e0: 3434 362c 202d 3733 2e30 292c 5c6e 222c  446, -73.0),\n",
-0002b2f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002b300: 2022 2020 2020 2020 2020 2020 2020 276f   "            'o
-0002b310: 7574 7075 7473 273a 2028 3232 372e 3033  utputs': (227.03
-0002b320: 3430 3432 3931 3835 3537 3235 2c20 2d37  404291855725, -7
-0002b330: 332e 3029 2c5c 6e22 2c0a 2020 2020 2020  3.0),\n",.      
-0002b340: 2020 2020 2020 2020 2020 2220 2020 2020            "     
-0002b350: 2020 207d 5c6e 222c 0a20 2020 2020 2020     }\n",.       
-0002b360: 2020 2020 2020 2020 2022 2020 2020 2020           "      
-0002b370: 2020 7365 6c66 2e6e 6f64 655f 6469 6d65    self.node_dime
-0002b380: 6e73 696f 6e20 3d20 7b5c 6e22 2c0a 2020  nsion = {\n",.  
-0002b390: 2020 2020 2020 2020 2020 2020 2020 2220                " 
-0002b3a0: 2020 2020 2020 2020 2020 2027 736d 6f6f             'smoo
-0002b3b0: 7468 5f31 273a 2028 3232 312e 3034 3638  th_1': (221.0468
-0002b3c0: 3735 2c20 3231 352e 3029 2c5c 6e22 2c0a  75, 215.0),\n",.
-0002b3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002b3e0: 2220 2020 2020 2020 2020 2020 2027 696e  "            'in
-0002b3f0: 7075 7473 273a 2028 3133 372e 3331 3235  puts': (137.3125
-0002b400: 2c20 3136 312e 3029 2c5c 6e22 2c0a 2020  , 161.0),\n",.  
-0002b410: 2020 2020 2020 2020 2020 2020 2020 2220                " 
-0002b420: 2020 2020 2020 2020 2020 2027 6f75 7470             'outp
-0002b430: 7574 7327 3a20 2831 3131 2e32 3538 3637  uts': (111.25867
-0002b440: 3030 3339 3436 3331 372c 2036 312e 3029  003946317, 61.0)
-0002b450: 2c5c 6e22 2c0a 2020 2020 2020 2020 2020  ,\n",.          
-0002b460: 2020 2020 2020 2220 2020 2020 2020 207d        "        }
-0002b470: 5c6e 222c 0a20 2020 2020 2020 2020 2020  \n",.           
-0002b480: 2020 2020 2022 2020 2020 2020 2020 7365       "        se
-0002b490: 6c66 2e64 6f5f 6175 746f 6578 706f 7274  lf.do_autoexport
-0002b4a0: 5f6e 6f64 6573 5f70 6172 616d 6574 6572  _nodes_parameter
-0002b4b0: 7320 3d20 4661 6c73 655c 6e22 2c0a 2020  s = False\n",.  
-0002b4c0: 2020 2020 2020 2020 2020 5d0a 2020 2020            ].    
-0002b4d0: 2020 2020 290a 2020 2020 2020 2020 756e      ).        un
-0002b4e0: 6974 5f74 6573 742e 636c 6f73 6528 290a  it_test.close().
-0002b4f0: 0a20 2020 2020 2020 2023 204d 616b 6573  .        # Makes
-0002b500: 2061 2066 696c 6520 226d 6f63 6b5f 6669   a file "mock_fi
-0002b510: 6c65 5f70 6174 6822 2069 6e20 7468 6520  le_path" in the 
-0002b520: 7465 6d70 6f72 6172 7920 7072 6f6a 6563  temporary projec
-0002b530: 7473 2070 6174 680a 2020 2020 2020 2020  ts path.        
-0002b540: 6d6f 636b 5f66 696c 655f 7061 7468 203d  mock_file_path =
-0002b550: 206f 732e 7061 7468 2e6a 6f69 6e28 6e65   os.path.join(ne
-0002b560: 775f 7072 6f6a 5f70 6174 682c 2022 6d6f  w_proj_path, "mo
-0002b570: 636b 5f66 696c 6522 290a 2020 2020 2020  ck_file").      
-0002b580: 2020 6d6f 636b 5f66 696c 6520 3d20 6f70    mock_file = op
-0002b590: 656e 286d 6f63 6b5f 6669 6c65 5f70 6174  en(mock_file_pat
-0002b5a0: 682c 2022 7722 290a 2020 2020 2020 2020  h, "w").        
-0002b5b0: 6d6f 636b 5f66 696c 652e 636c 6f73 6528  mock_file.close(
-0002b5c0: 290a 0a20 2020 2020 2020 2023 204f 7065  )..        # Ope
-0002b5d0: 6e73 2061 6761 696e 2074 6865 2070 6163  ns again the pac
-0002b5e0: 6b61 6765 206c 6962 7261 7279 2070 6f70  kage library pop
-0002b5f0: 2d75 700a 2020 2020 2020 2020 7365 6c66  -up.        self
-0002b600: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 6163  .main_window.pac
-0002b610: 6b61 6765 5f6c 6962 7261 7279 5f70 6f70  kage_library_pop
-0002b620: 5f75 7028 290a 2020 2020 2020 2020 706b  _up().        pk
-0002b630: 675f 6c69 625f 7769 6e64 6f77 203d 2073  g_lib_window = s
-0002b640: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-0002b650: 706f 705f 7570 5f70 6163 6b61 6765 5f6c  pop_up_package_l
-0002b660: 6962 7261 7279 0a0a 2020 2020 2020 2020  ibrary..        
-0002b670: 2320 4f70 656e 7320 7468 6520 2269 6e73  # Opens the "ins
-0002b680: 7461 6c6c 6174 696f 6e20 7072 6f63 6573  tallation proces
-0002b690: 7365 7322 2028 6672 6f6d 2066 6f6c 6465  ses" (from folde
-0002b6a0: 7229 2070 6f70 2075 700a 2020 2020 2020  r) pop up.      
-0002b6b0: 2020 666f 6c64 6572 5f62 746e 203d 2028    folder_btn = (
-0002b6c0: 0a20 2020 2020 2020 2020 2020 2070 6b67  .            pkg
-0002b6d0: 5f6c 6962 5f77 696e 646f 772e 6c61 796f  _lib_window.layo
-0002b6e0: 7574 2829 0a20 2020 2020 2020 2020 2020  ut().           
-0002b6f0: 202e 6368 696c 6472 656e 2829 5b30 5d0a   .children()[0].
-0002b700: 2020 2020 2020 2020 2020 2020 2e6c 6179              .lay
-0002b710: 6f75 7428 290a 2020 2020 2020 2020 2020  out().          
-0002b720: 2020 2e69 7465 6d41 7428 3129 0a20 2020    .itemAt(1).   
-0002b730: 2020 2020 2020 2020 202e 6974 656d 4174           .itemAt
-0002b740: 2833 290a 2020 2020 2020 2020 2020 2020  (3).            
-0002b750: 2e77 6964 6765 7428 290a 2020 2020 2020  .widget().      
-0002b760: 2020 290a 2020 2020 2020 2020 666f 6c64    ).        fold
-0002b770: 6572 5f62 746e 2e63 6c69 636b 6564 2e65  er_btn.clicked.e
-0002b780: 6d69 7428 290a 0a20 2020 2020 2020 2023  mit()..        #
-0002b790: 2053 6574 7320 7468 6520 666f 6c64 6572   Sets the folder
-0002b7a0: 2074 6f20 6120 6e6f 6e2d 6578 6973 7465   to a non-existe
-0002b7b0: 6e74 2066 696c 6520 7061 7468 0a20 2020  nt file path.   
-0002b7c0: 2020 2020 2028 0a20 2020 2020 2020 2020       (.         
-0002b7d0: 2020 2070 6b67 5f6c 6962 5f77 696e 646f     pkg_lib_windo
-0002b7e0: 772e 706f 705f 7570 5f69 6e73 7461 6c6c  w.pop_up_install
-0002b7f0: 5f70 726f 6365 7373 6573 2e70 6174 685f  _processes.path_
-0002b800: 6564 6974 2e73 6574 5465 7874 280a 2020  edit.setText(.  
-0002b810: 2020 2020 2020 2020 2020 2020 2020 6d6f                mo
-0002b820: 636b 5f66 696c 655f 7061 7468 202b 2022  ck_file_path + "
-0002b830: 5f22 0a20 2020 2020 2020 2020 2020 2029  _".            )
-0002b840: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-0002b850: 2020 2020 2320 436c 6963 6b73 206f 6e20      # Clicks on 
-0002b860: 2269 6e73 7461 6c6c 2070 6163 6b61 6765  "install package
-0002b870: 2220 6275 7474 6f6e 206f 6620 2269 6e73  " button of "ins
-0002b880: 7461 6c6c 6174 696f 6e20 7072 6f63 6573  tallation proces
-0002b890: 7365 7322 2070 7570 2d75 700a 2020 2020  ses" pup-up.    
-0002b8a0: 2020 2020 696e 7374 6c5f 706b 675f 6274      instl_pkg_bt
-0002b8b0: 6e20 3d20 280a 2020 2020 2020 2020 2020  n = (.          
-0002b8c0: 2020 706b 675f 6c69 625f 7769 6e64 6f77    pkg_lib_window
-0002b8d0: 2e70 6f70 5f75 705f 696e 7374 616c 6c5f  .pop_up_install_
-0002b8e0: 7072 6f63 6573 7365 732e 6c61 796f 7574  processes.layout
-0002b8f0: 2829 0a20 2020 2020 2020 2020 2020 202e  ().            .
-0002b900: 6368 696c 6472 656e 2829 5b31 5d0a 2020  children()[1].  
-0002b910: 2020 2020 2020 2020 2020 2e69 7465 6d41            .itemA
-0002b920: 7428 3029 0a20 2020 2020 2020 2020 2020  t(0).           
-0002b930: 202e 7769 6467 6574 2829 0a20 2020 2020   .widget().     
-0002b940: 2020 2029 0a20 2020 2020 2020 2069 6e73     ).        ins
-0002b950: 746c 5f70 6b67 5f62 746e 2e63 6c69 636b  tl_pkg_btn.click
-0002b960: 6564 2e65 6d69 7428 2920 2023 2044 6973  ed.emit()  # Dis
-0002b970: 706c 6179 7320 616e 2065 7272 6f72 2064  plays an error d
-0002b980: 6961 6c6f 6720 626f 780a 0a20 2020 2020  ialog box..     
-0002b990: 2020 2023 2053 6574 7320 7468 6520 666f     # Sets the fo
-0002b9a0: 6c64 6572 2074 6f20 616e 2065 7869 7374  lder to an exist
-0002b9b0: 696e 6720 6669 6c65 2070 6174 680a 2020  ing file path.  
-0002b9c0: 2020 2020 2020 280a 2020 2020 2020 2020        (.        
-0002b9d0: 2020 2020 706b 675f 6c69 625f 7769 6e64      pkg_lib_wind
-0002b9e0: 6f77 2e70 6f70 5f75 705f 696e 7374 616c  ow.pop_up_instal
-0002b9f0: 6c5f 7072 6f63 6573 7365 732e 7061 7468  l_processes.path
-0002ba00: 5f65 6469 742e 7365 7454 6578 7428 0a20  _edit.setText(. 
-0002ba10: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-0002ba20: 6f63 6b5f 6669 6c65 5f70 6174 680a 2020  ock_file_path.  
-0002ba30: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-0002ba40: 2020 2020 290a 0a20 2020 2020 2020 2023      )..        #
-0002ba50: 2043 6c69 636b 7320 6f6e 2022 696e 7374   Clicks on "inst
-0002ba60: 616c 6c20 7061 636b 6167 6522 2062 7574  all package" but
-0002ba70: 746f 6e20 6f66 2022 696e 7374 616c 6c61  ton of "installa
-0002ba80: 7469 6f6e 2070 726f 6365 7373 6573 2220  tion processes" 
-0002ba90: 7075 702d 7570 0a20 2020 2020 2020 2069  pup-up.        i
-0002baa0: 6e73 746c 5f70 6b67 5f62 746e 2e63 6c69  nstl_pkg_btn.cli
-0002bab0: 636b 6564 2e65 6d69 7428 2920 2023 2044  cked.emit()  # D
-0002bac0: 6973 706c 6179 7320 616e 2065 7272 6f72  isplays an error
-0002bad0: 2064 6961 6c6f 6720 626f 780a 0a20 2020   dialog box..   
-0002bae0: 2020 2020 2023 2053 6574 7320 7468 6520       # Sets the 
-0002baf0: 666f 6c64 6572 2074 6f20 6265 2061 2076  folder to be a v
-0002bb00: 616c 6964 2070 6163 6b61 6765 0a20 2020  alid package.   
-0002bb10: 2020 2020 2028 0a20 2020 2020 2020 2020       (.         
-0002bb20: 2020 2070 6b67 5f6c 6962 5f77 696e 646f     pkg_lib_windo
-0002bb30: 772e 706f 705f 7570 5f69 6e73 7461 6c6c  w.pop_up_install
-0002bb40: 5f70 726f 6365 7373 6573 2e70 6174 685f  _processes.path_
-0002bb50: 6564 6974 2e73 6574 5465 7874 280a 2020  edit.setText(.  
-0002bb60: 2020 2020 2020 2020 2020 2020 2020 6d6f                mo
-0002bb70: 636b 5f70 726f 635f 666c 6472 0a20 2020  ck_proc_fldr.   
-0002bb80: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-0002bb90: 2020 2029 0a0a 2020 2020 2020 2020 2320     )..        # 
-0002bba0: 436c 6963 6b73 206f 6e20 2269 6e73 7461  Clicks on "insta
-0002bbb0: 6c6c 2070 6163 6b61 6765 2220 6275 7474  ll package" butt
-0002bbc0: 6f6e 206f 6620 2269 6e73 7461 6c6c 6174  on of "installat
-0002bbd0: 696f 6e20 7072 6f63 6573 7365 7322 2070  ion processes" p
-0002bbe0: 7570 2d75 700a 2020 2020 2020 2020 2320  up-up.        # 
-0002bbf0: 4469 7370 6c61 7973 2061 6e20 6572 726f  Displays an erro
-0002bc00: 7220 6469 616c 6f67 2062 6f78 2073 696e  r dialog box sin
-0002bc10: 6365 205f 5f69 6e69 745f 5f2e 7079 2072  ce __init__.py r
-0002bc20: 6169 7365 2049 6d70 6f72 7445 7272 6f72  aise ImportError
-0002bc30: 0a20 2020 2020 2020 2069 6e73 746c 5f70  .        instl_p
-0002bc40: 6b67 5f62 746e 2e63 6c69 636b 6564 2e65  kg_btn.clicked.e
-0002bc50: 6d69 7428 290a 0a20 2020 2020 2020 2023  mit()..        #
-0002bc60: 204d 616b 6520 6120 7072 6f70 6572 2027   Make a proper '
-0002bc70: 5f5f 696e 6974 5f5f 2e70 790a 2020 2020  __init__.py.    
-0002bc80: 2020 2020 696e 6974 5f66 696c 6520 3d20      init_file = 
-0002bc90: 6f70 656e 286f 732e 7061 7468 2e6a 6f69  open(os.path.joi
-0002bca0: 6e28 6d6f 636b 5f70 726f 635f 666c 6472  n(mock_proc_fldr
-0002bcb0: 2c20 225f 5f69 6e69 745f 5f2e 7079 2229  , "__init__.py")
-0002bcc0: 2c20 2277 2229 0a20 2020 2020 2020 2069  , "w").        i
-0002bcd0: 6e69 745f 6669 6c65 2e77 7269 7465 2822  nit_file.write("
-0002bce0: 6672 6f6d 202e 756e 6974 5f74 6573 745f  from .unit_test_
-0002bcf0: 3120 696d 706f 7274 2055 6e69 745f 7465  1 import Unit_te
-0002bd00: 7374 5f31 2229 0a20 2020 2020 2020 2069  st_1").        i
-0002bd10: 6e69 745f 6669 6c65 2e63 6c6f 7365 2829  nit_file.close()
-0002bd20: 0a0a 2020 2020 2020 2020 2320 436c 6963  ..        # Clic
-0002bd30: 6b73 2061 6761 696e 206f 6e20 2269 6e73  ks again on "ins
-0002bd40: 7461 6c6c 2070 6163 6b61 6765 2220 6275  tall package" bu
-0002bd50: 7474 6f6e 0a20 2020 2020 2020 2069 6e73  tton.        ins
-0002bd60: 746c 5f70 6b67 5f62 746e 2e63 6c69 636b  tl_pkg_btn.click
-0002bd70: 6564 2e65 6d69 7428 290a 0a20 2020 2020  ed.emit()..     
-0002bd80: 2020 2023 2043 6c6f 7365 7320 7468 6520     # Closes the 
-0002bd90: 2269 6e73 7461 6c6c 6174 696f 6e20 7072  "installation pr
-0002bda0: 6f63 6573 7365 7322 2028 6672 6f6d 2066  ocesses" (from f
-0002bdb0: 6f6c 6465 7229 2070 6f70 2075 700a 2020  older) pop up.  
+000291a0: 696e 5f77 696e 646f 772e 7361 7665 4368  in_window.saveCh
+000291b0: 6f69 6365 2829 0a0a 2020 2020 2020 2020  oice()..        
+000291c0: 2320 5377 6974 6368 6573 2074 6f20 7072  # Switches to pr
+000291d0: 6f6a 6563 7420 320a 2020 2020 2020 2020  oject 2.        
+000291e0: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+000291f0: 2e73 7769 7463 685f 7072 6f6a 6563 7428  .switch_project(
+00029200: 7072 6f6a 5f74 6573 745f 325f 7061 7468  proj_test_2_path
+00029210: 2c20 2274 6573 745f 7072 6f6a 6563 745f  , "test_project_
+00029220: 3222 290a 0a20 2020 2020 2020 2023 2041  2")..        # A
+00029230: 7373 6572 7473 2074 6861 7420 7465 7374  sserts that test
+00029240: 2070 726f 6a65 6374 2031 2069 7320 7368   project 1 is sh
+00029250: 6f77 6e20 696e 2072 6563 656e 7420 7072  own in recent pr
+00029260: 6f6a 6563 7473 0a20 2020 2020 2020 2073  ojects.        s
+00029270: 656c 662e 6173 7365 7274 5472 7565 2873  elf.assertTrue(s
+00029280: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00029290: 7361 7665 645f 7072 6f6a 6563 7473 5f61  saved_projects_a
+000292a0: 6374 696f 6e73 5b30 5d2e 6973 5669 7369  ctions[0].isVisi
+000292b0: 626c 6528 2929 0a0a 2020 2020 2020 2020  ble())..        
+000292c0: 2320 436c 6963 6b73 206f 6e20 6974 0a20  # Clicks on it. 
+000292d0: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
+000292e0: 5f77 696e 646f 772e 7361 7665 645f 7072  _window.saved_pr
+000292f0: 6f6a 6563 7473 5f61 6374 696f 6e73 5b30  ojects_actions[0
+00029300: 5d2e 7472 6967 6765 7265 642e 656d 6974  ].triggered.emit
+00029310: 2829 0a0a 2020 2020 2020 2020 2320 4173  ()..        # As
+00029320: 7365 7274 7320 7468 6174 2069 7420 6973  serts that it is
+00029330: 206e 6f77 2074 6865 2063 7572 7265 6e74   now the current
+00029340: 2070 726f 6a65 6374 0a20 2020 2020 2020   project.       
+00029350: 2063 6f6e 6669 6720 3d20 436f 6e66 6967   config = Config
+00029360: 2863 6f6e 6669 675f 7061 7468 3d73 656c  (config_path=sel
+00029370: 662e 636f 6e66 6967 5f70 6174 6829 0a20  f.config_path). 
+00029380: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00029390: 7274 4571 7561 6c28 0a20 2020 2020 2020  rtEqual(.       
+000293a0: 2020 2020 206f 732e 7061 7468 2e61 6273       os.path.abs
+000293b0: 7061 7468 2863 6f6e 6669 672e 6765 745f  path(config.get_
+000293c0: 6f70 656e 6564 5f70 726f 6a65 6374 7328  opened_projects(
+000293d0: 295b 305d 292c 2070 726f 6a5f 7465 7374  )[0]), proj_test
+000293e0: 5f31 5f70 6174 680a 2020 2020 2020 2020  _1_path.        
+000293f0: 290a 0a20 2020 2020 2020 2023 2044 656c  )..        # Del
+00029400: 6574 6573 2061 2073 6361 6e20 6672 6f6d  etes a scan from
+00029410: 2064 6174 6120 6272 6f77 7365 720a 2020   data browser.  
+00029420: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
+00029430: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
+00029440: 7365 722e 7461 626c 655f 6461 7461 2e73  ser.table_data.s
+00029450: 656c 6563 7452 6f77 2830 290a 2020 2020  electRow(0).    
+00029460: 2020 2020 2320 4649 584d 453a 2066 6f6c      # FIXME: fol
+00029470: 6c6f 7769 6e67 206c 696e 6520 7261 6973  lowing line rais
+00029480: 6520 6578 6365 7074 696f 6e2c 206f 6e6c  e exception, onl
+00029490: 7920 6f6e 206d 6163 6f73 2062 7569 6c64  y on macos build
+000294a0: 3a0a 2020 2020 2020 2020 2320 5472 6163  :.        # Trac
+000294b0: 6562 6163 6b20 286d 6f73 7420 7265 6365  eback (most rece
+000294c0: 6e74 2063 616c 6c20 6c61 7374 293a 0a20  nt call last):. 
+000294d0: 2020 2020 2020 2023 2046 696c 6520 222f         # File "/
+000294e0: 5573 6572 732f 6170 7076 6579 6f72 2f70  Users/appveyor/p
+000294f0: 726f 6a65 6374 732f 706f 7075 6c73 652d  rojects/populse-
+00029500: 6d69 612f 7079 7468 6f6e 2f70 6f70 756c  mia/python/popul
+00029510: 7365 5f6d 6961 2f0a 2020 2020 2020 2020  se_mia/.        
+00029520: 2320 7465 7374 2e70 7922 2c0a 2020 2020  # test.py",.    
+00029530: 2020 2020 2320 6c69 6e65 2033 3739 372c      # line 3797,
+00029540: 2069 6e20 7465 7374 5f6f 7065 6e5f 7265   in test_open_re
+00029550: 6365 6e74 5f70 726f 6a65 6374 0a20 2020  cent_project.   
+00029560: 2020 2020 2023 2073 656c 662e 6d61 696e       # self.main
+00029570: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
+00029580: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
+00029590: 7265 6d6f 7665 5f73 6361 6e28 290a 2020  remove_scan().  
+000295a0: 2020 2020 2020 2320 4669 6c65 2022 2f55        # File "/U
+000295b0: 7365 7273 2f61 7070 7665 796f 722f 7072  sers/appveyor/pr
+000295c0: 6f6a 6563 7473 2f70 6f70 756c 7365 2d6d  ojects/populse-m
+000295d0: 6961 2f70 7974 686f 6e2f 706f 7075 6c73  ia/python/populs
+000295e0: 655f 6d69 612f 0a20 2020 2020 2020 2023  e_mia/.        #
+000295f0: 2075 7365 725f 696e 7465 7266 6163 652f   user_interface/
+00029600: 6461 7461 5f62 726f 7773 6572 2f64 6174  data_browser/dat
+00029610: 615f 6272 6f77 7365 722e 7079 222c 206c  a_browser.py", l
+00029620: 696e 6520 3230 3535 2c20 696e 0a20 2020  ine 2055, in.   
+00029630: 2020 2020 2023 2072 656d 6f76 655f 7363       # remove_sc
+00029640: 616e 0a20 2020 2020 2020 2023 2073 6361  an.        # sca
+00029650: 6e5f 7061 7468 290a 2020 2020 2020 2020  n_path).        
+00029660: 2320 4669 6c65 2022 2f55 7365 7273 2f61  # File "/Users/a
+00029670: 7070 7665 796f 722f 7072 6f6a 6563 7473  ppveyor/projects
+00029680: 2f70 6f70 756c 7365 5f64 622f 7079 7468  /populse_db/pyth
+00029690: 6f6e 2f70 6f70 756c 7365 5f64 622f 0a20  on/populse_db/. 
+000296a0: 2020 2020 2020 2023 2064 6174 6162 6173         # databas
+000296b0: 652e 7079 222c 206c 696e 6520 3732 342c  e.py", line 724,
+000296c0: 2069 6e20 7265 6d6f 7665 5f64 6f63 756d   in remove_docum
+000296d0: 656e 740a 2020 2020 2020 2020 2320 7365  ent.        # se
+000296e0: 6c66 2e65 6e67 696e 652e 7265 6d6f 7665  lf.engine.remove
+000296f0: 5f64 6f63 756d 656e 7428 636f 6c6c 6563  _document(collec
+00029700: 7469 6f6e 2c20 646f 6375 6d65 6e74 5f69  tion, document_i
+00029710: 6429 0a20 2020 2020 2020 2023 2046 696c  d).        # Fil
+00029720: 6520 222f 5573 6572 732f 6170 7076 6579  e "/Users/appvey
+00029730: 6f72 2f70 726f 6a65 6374 732f 706f 7075  or/projects/popu
+00029740: 6c73 655f 6462 2f70 7974 686f 6e2f 706f  lse_db/python/po
+00029750: 7075 6c73 655f 6462 2f0a 2020 2020 2020  pulse_db/.      
+00029760: 2020 2320 656e 6769 6e65 2f73 716c 6974    # engine/sqlit
+00029770: 652e 7079 222c 206c 696e 6520 3632 382c  e.py", line 628,
+00029780: 2069 6e20 7265 6d6f 7665 5f64 6f63 756d   in remove_docum
+00029790: 656e 740a 2020 2020 2020 2020 2320 7365  ent.        # se
+000297a0: 6c66 2e72 656d 6f76 655f 7661 6c75 6528  lf.remove_value(
+000297b0: 636f 6c6c 6563 7469 6f6e 2c20 646f 6375  collection, docu
+000297c0: 6d65 6e74 5f69 642c 2066 6965 6c64 2e66  ment_id, field.f
+000297d0: 6965 6c64 5f6e 616d 6529 0a20 2020 2020  ield_name).     
+000297e0: 2020 2023 2046 696c 6520 222f 5573 6572     # File "/User
+000297f0: 732f 6170 7076 6579 6f72 2f70 726f 6a65  s/appveyor/proje
+00029800: 6374 732f 706f 7075 6c73 655f 6462 2f70  cts/populse_db/p
+00029810: 7974 686f 6e2f 706f 7075 6c73 655f 6462  ython/populse_db
+00029820: 2f0a 2020 2020 2020 2020 2320 656e 6769  /.        # engi
+00029830: 6e65 2f73 716c 6974 652e 7079 222c 206c  ne/sqlite.py", l
+00029840: 696e 6520 3631 322c 2069 6e20 7265 6d6f  ine 612, in remo
+00029850: 7665 5f76 616c 7565 0a20 2020 2020 2020  ve_value.       
+00029860: 2023 2073 656c 662e 6375 7273 6f72 2e65   # self.cursor.e
+00029870: 7865 6375 7465 2873 716c 2c20 5b64 6f63  xecute(sql, [doc
+00029880: 756d 656e 745f 6964 5d29 0a20 2020 2020  ument_id]).     
+00029890: 2020 2023 2073 716c 6974 6533 2e4f 7065     # sqlite3.Ope
+000298a0: 7261 7469 6f6e 616c 4572 726f 723a 2061  rationalError: a
+000298b0: 7474 656d 7074 2074 6f20 7772 6974 6520  ttempt to write 
+000298c0: 6120 7265 6164 6f6e 6c79 2064 6174 6162  a readonly datab
+000298d0: 6173 650a 2020 2020 2020 2020 2320 5768  ase.        # Wh
+000298e0: 696c 6520 7761 6974 696e 6720 746f 2069  ile waiting to i
+000298f0: 6e76 6573 7469 6765 7420 616e 6420 6669  nvestiget and fi
+00029900: 6e64 2061 2066 6978 2074 6865 206c 696e  nd a fix the lin
+00029910: 6520 6973 2063 6f6d 6d65 6e74 6564 3a0a  e is commented:.
+00029920: 2020 2020 2020 2020 2320 7365 6c66 2e6d          # self.m
+00029930: 6169 6e5f 7769 6e64 6f77 2e64 6174 615f  ain_window.data_
+00029940: 6272 6f77 7365 722e 7461 626c 655f 6461  browser.table_da
+00029950: 7461 2e72 656d 6f76 655f 7363 616e 2829  ta.remove_scan()
+00029960: 0a0a 2020 2020 2020 2020 2320 4173 7365  ..        # Asse
+00029970: 7274 7320 7468 6174 2074 6865 7265 2061  rts that there a
+00029980: 7265 2075 6e73 6176 6564 206d 6f64 6966  re unsaved modif
+00029990: 6963 6174 696f 6e0a 2020 2020 2020 2020  ication.        
+000299a0: 2320 4649 584d 453a 2042 7920 636f 6d6d  # FIXME: By comm
+000299b0: 656e 7469 6e67 2074 6865 2070 7265 7669  enting the previ
+000299c0: 6f75 7320 6c69 6e65 2077 6520 6861 7665  ous line we have
+000299d0: 2074 6f20 616c 736f 2063 6f6d 6d65 6e74   to also comment
+000299e0: 2074 6865 0a20 2020 2020 2020 2023 2066   the.        # f
+000299f0: 6f6c 6c6f 7769 6e67 206c 696e 653a 0a20  ollowing line:. 
+00029a00: 2020 2020 2020 2023 2073 656c 662e 6173         # self.as
+00029a10: 7365 7274 5472 7565 2873 656c 662e 6d61  sertTrue(self.ma
+00029a20: 696e 5f77 696e 646f 772e 6368 6563 6b5f  in_window.check_
+00029a30: 756e 7361 7665 645f 6d6f 6469 6669 6361  unsaved_modifica
+00029a40: 7469 6f6e 7328 2929 0a0a 2020 2020 2020  tions())..      
+00029a50: 2020 506f 7055 7051 7569 742e 6578 6563    PopUpQuit.exec
+00029a60: 203d 206c 616d 6264 6120 7365 6c66 5f3a   = lambda self_:
+00029a70: 2073 656c 665f 2e73 686f 7728 290a 0a20   self_.show().. 
+00029a80: 2020 2020 2020 2023 2054 7269 6573 2074         # Tries t
+00029a90: 6f20 6f70 656e 2061 2070 726f 6a65 6374  o open a project
+00029aa0: 2077 6974 6820 756e 7361 7665 6420 6d6f   with unsaved mo
+00029ab0: 6469 6669 6361 7469 6f6e 730a 2020 2020  difications.    
+00029ac0: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
+00029ad0: 6e64 6f77 2e73 6176 6564 5f70 726f 6a65  ndow.saved_proje
+00029ae0: 6374 735f 6163 7469 6f6e 735b 305d 2e74  cts_actions[0].t
+00029af0: 7269 6767 6572 6564 2e65 6d69 7428 290a  riggered.emit().
+00029b00: 0a20 2020 2020 2020 2070 7269 6e74 2829  .        print()
+00029b10: 0a0a 2020 2020 4075 6e69 7474 6573 742e  ..    @unittest.
+00029b20: 736b 6970 556e 6c65 7373 2873 7973 2e70  skipUnless(sys.p
+00029b30: 6c61 7466 6f72 6d2e 7374 6172 7473 7769  latform.startswi
+00029b40: 7468 2822 6c69 6e75 7822 292c 2022 7265  th("linux"), "re
+00029b50: 7175 6972 6573 206c 696e 7578 2229 0a20  quires linux"). 
+00029b60: 2020 2064 6566 2074 6573 745f 6f70 656e     def test_open
+00029b70: 5f73 6865 6c6c 2873 656c 6629 3a0a 2020  _shell(self):.  
+00029b80: 2020 2020 2020 2222 224f 7065 6e73 2061        """Opens a
+00029b90: 2051 7420 636f 6e73 6f6c 6520 616e 6420   Qt console and 
+00029ba0: 6b69 6c6c 2069 7420 6166 7465 7277 6172  kill it afterwar
+00029bb0: 6473 2e0a 0a20 2020 2020 2020 202d 5465  ds...        -Te
+00029bc0: 7374 733a 204d 6169 6e57 696e 646f 772e  sts: MainWindow.
+00029bd0: 6f70 656e 5f73 6865 6c6c 0a0a 2020 2020  open_shell..    
+00029be0: 2020 2020 4375 7272 656e 746c 792c 2074      Currently, t
+00029bf0: 6869 7320 7465 7374 2069 7320 6f6e 6c79  his test is only
+00029c00: 2064 6f6e 6520 6f6e 206c 696e 7578 2e0a   done on linux..
+00029c10: 2020 2020 2020 2020 2222 220a 0a20 2020          """..   
+00029c20: 2020 2020 2023 204f 7065 6e73 2074 6865       # Opens the
+00029c30: 2051 7420 636f 6e73 6f6c 650a 2020 2020   Qt console.    
+00029c40: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
+00029c50: 6e64 6f77 2e61 6374 696f 6e5f 6f70 656e  ndow.action_open
+00029c60: 5f73 6865 6c6c 2e74 7269 6767 6572 6564  _shell.triggered
+00029c70: 2e65 6d69 7428 290a 0a20 2020 2020 2020  .emit()..       
+00029c80: 2071 745f 636f 6e73 6f6c 655f 7072 6f63   qt_console_proc
+00029c90: 6573 7320 3d20 4e6f 6e65 0a20 2020 2020  ess = None.     
+00029ca0: 2020 2074 696d 655f 656c 6170 7365 6420     time_elapsed 
+00029cb0: 3d20 300a 0a20 2020 2020 2020 2077 6869  = 0..        whi
+00029cc0: 6c65 2074 696d 655f 656c 6170 7365 6420  le time_elapsed 
+00029cd0: 3c20 353a 0a20 2020 2020 2020 2020 2020  < 5:.           
+00029ce0: 2023 2047 6574 7320 7468 6520 6375 7272   # Gets the curr
+00029cf0: 656e 7420 7072 6f63 6573 730a 2020 2020  ent process.    
+00029d00: 2020 2020 2020 2020 6375 7272 656e 745f          current_
+00029d10: 7072 6f63 6573 7320 3d20 7073 7574 696c  process = psutil
+00029d20: 2e50 726f 6365 7373 2829 0a20 2020 2020  .Process().     
+00029d30: 2020 2020 2020 2063 6869 6c64 7265 6e20         children 
+00029d40: 3d20 6375 7272 656e 745f 7072 6f63 6573  = current_proces
+00029d50: 732e 6368 696c 6472 656e 2872 6563 7572  s.children(recur
+00029d60: 7369 7665 3d54 7275 6529 0a0a 2020 2020  sive=True)..    
+00029d70: 2020 2020 2020 2020 2320 4966 2071 745f          # If qt_
+00029d80: 636f 6e73 6f6c 655f 7072 6f63 6573 7320  console_process 
+00029d90: 6973 206e 6f74 206e 6f6e 652c 2074 6865  is not none, the
+00029da0: 2071 7420 636f 6e73 6f6c 6520 7072 6f63   qt console proc
+00029db0: 6573 730a 2020 2020 2020 2020 2020 2020  ess.            
+00029dc0: 2320 7761 7320 666f 756e 640a 2020 2020  # was found.    
+00029dd0: 2020 2020 2020 2020 6966 2071 745f 636f          if qt_co
+00029de0: 6e73 6f6c 655f 7072 6f63 6573 733a 0a20  nsole_process:. 
+00029df0: 2020 2020 2020 2020 2020 2020 2020 2062                 b
+00029e00: 7265 616b 0a0a 2020 2020 2020 2020 2020  reak..          
+00029e10: 2020 6966 2063 6869 6c64 7265 6e3a 0a20    if children:. 
+00029e20: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00029e30: 2047 6574 7320 7468 6520 7072 6f63 6573   Gets the proces
+00029e40: 7320 7069 6420 2870 726f 6365 7373 2069  s pid (process i
+00029e50: 6429 0a20 2020 2020 2020 2020 2020 2020  d).             
+00029e60: 2020 2066 6f72 2063 6869 6c64 2069 6e20     for child in 
+00029e70: 6368 696c 6472 656e 3a0a 2020 2020 2020  children:.      
+00029e80: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00029e90: 2063 6869 6c64 2e6e 616d 6528 2920 3d3d   child.name() ==
+00029ea0: 2022 6a75 7079 7465 722d 7174 636f 6e73   "jupyter-qtcons
+00029eb0: 6f22 3a0a 2020 2020 2020 2020 2020 2020  o":.            
+00029ec0: 2020 2020 2020 2020 2020 2020 7174 5f63              qt_c
+00029ed0: 6f6e 736f 6c65 5f70 726f 6365 7373 203d  onsole_process =
+00029ee0: 2063 6869 6c64 2e70 6964 0a0a 2020 2020   child.pid..    
+00029ef0: 2020 2020 2020 2020 736c 6565 7028 3129          sleep(1)
+00029f00: 0a20 2020 2020 2020 2020 2020 2074 696d  .            tim
+00029f10: 655f 656c 6170 7365 6420 2b3d 2031 0a0a  e_elapsed += 1..
+00029f20: 2020 2020 2020 2020 6966 2071 745f 636f          if qt_co
+00029f30: 6e73 6f6c 655f 7072 6f63 6573 733a 0a20  nsole_process:. 
+00029f40: 2020 2020 2020 2020 2020 2023 204b 696c             # Kil
+00029f50: 6c73 2074 6865 2051 7420 636f 6e73 6f6c  ls the Qt consol
+00029f60: 650a 2020 2020 2020 2020 2020 2020 6f73  e.            os
+00029f70: 2e6b 696c 6c28 7174 5f63 6f6e 736f 6c65  .kill(qt_console
+00029f80: 5f70 726f 6365 7373 2c20 3929 0a0a 2020  _process, 9)..  
+00029f90: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00029fa0: 2020 2020 2020 2020 7072 696e 7428 2274          print("t
+00029fb0: 6865 2051 7420 636f 6e73 6f6c 6520 7072  he Qt console pr
+00029fc0: 6f63 6573 7320 7761 7320 6e6f 7420 666f  ocess was not fo
+00029fd0: 756e 6422 290a 0a20 2020 2064 6566 2074  und")..    def t
+00029fe0: 6573 745f 7061 636b 6167 655f 6c69 6272  est_package_libr
+00029ff0: 6172 795f 6469 616c 6f67 5f61 6464 5f70  ary_dialog_add_p
+0002a000: 6b67 2873 656c 6629 3a0a 2020 2020 2020  kg(self):.      
+0002a010: 2020 2222 2243 7265 6174 6573 2061 206e    """Creates a n
+0002a020: 6577 2070 726f 6a65 6374 2066 6f6c 6465  ew project folde
+0002a030: 722c 206f 7065 6e73 2074 6865 2070 726f  r, opens the pro
+0002a040: 6365 7373 6573 206c 6962 7261 7279 2061  cesses library a
+0002a050: 6e64 0a20 2020 2020 2020 2061 6464 7320  nd.        adds 
+0002a060: 6120 7061 636b 6167 652e 0a0a 2020 2020  a package...    
+0002a070: 2020 2020 2d20 5465 7374 733a 2050 6163      - Tests: Pac
+0002a080: 6b61 6765 4c69 6272 6172 7944 6961 6c6f  kageLibraryDialo
+0002a090: 670a 0a20 2020 2020 2020 202d 204d 6f63  g..        - Moc
+0002a0a0: 6b73 3a0a 2020 2020 2020 2020 2020 2020  ks:.            
+0002a0b0: 2d20 514d 6573 7361 6765 426f 782e 6578  - QMessageBox.ex
+0002a0c0: 6563 0a20 2020 2020 2020 2020 2020 202d  ec.            -
+0002a0d0: 2051 4d65 7373 6167 6542 6f78 2e65 7865   QMessageBox.exe
+0002a0e0: 635f 0a20 2020 2020 2020 2020 2020 202d  c_.            -
+0002a0f0: 2051 4669 6c65 4469 616c 6f67 2e65 7865   QFileDialog.exe
+0002a100: 635f 0a20 2020 2020 2020 2022 2222 0a0a  c_.        """..
+0002a110: 2020 2020 2020 2020 504b 4720 3d20 226e          PKG = "n
+0002a120: 6970 7970 652e 696e 7465 7266 6163 6573  ipype.interfaces
+0002a130: 2e44 6174 6147 7261 6262 6572 220a 0a20  .DataGrabber".. 
+0002a140: 2020 2020 2020 2023 2043 7265 6174 6573         # Creates
+0002a150: 2061 206e 6577 2070 726f 6a65 6374 2066   a new project f
+0002a160: 6f6c 6465 7220 616e 6420 7377 6974 6368  older and switch
+0002a170: 6573 2074 6f20 6974 0a20 2020 2020 2020  es to it.       
+0002a180: 206e 6577 5f70 726f 6a5f 7061 7468 203d   new_proj_path =
+0002a190: 2073 656c 662e 6765 745f 6e65 775f 7465   self.get_new_te
+0002a1a0: 7374 5f70 726f 6a65 6374 286c 6967 6874  st_project(light
+0002a1b0: 3d54 7275 6529 0a20 2020 2020 2020 2073  =True).        s
+0002a1c0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+0002a1d0: 7377 6974 6368 5f70 726f 6a65 6374 286e  switch_project(n
+0002a1e0: 6577 5f70 726f 6a5f 7061 7468 2c20 2274  ew_proj_path, "t
+0002a1f0: 6573 745f 6c69 6768 745f 7072 6f6a 6563  est_light_projec
+0002a200: 7422 290a 0a20 2020 2020 2020 2023 2053  t")..        # S
+0002a210: 6574 2073 686f 7274 6375 7473 2066 6f72  et shortcuts for
+0002a220: 206f 626a 6563 7473 2074 6861 7420 6172   objects that ar
+0002a230: 6520 6f66 7465 6e20 7573 6564 0a20 2020  e often used.   
+0002a240: 2020 2020 2070 706c 5f6d 616e 6167 6572       ppl_manager
+0002a250: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
+0002a260: 646f 772e 7069 7065 6c69 6e65 5f6d 616e  dow.pipeline_man
+0002a270: 6167 6572 0a20 2020 2020 2020 2070 706c  ager.        ppl
+0002a280: 5f65 6474 5f74 6162 7320 3d20 7070 6c5f  _edt_tabs = ppl_
+0002a290: 6d61 6e61 6765 722e 7069 7065 6c69 6e65  manager.pipeline
+0002a2a0: 4564 6974 6f72 5461 6273 0a20 2020 2020  EditorTabs.     
+0002a2b0: 2020 2070 706c 5f65 6474 5f74 6162 203d     ppl_edt_tab =
+0002a2c0: 2070 706c 5f65 6474 5f74 6162 732e 6765   ppl_edt_tabs.ge
+0002a2d0: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
+0002a2e0: 2829 0a20 2020 2020 2020 2070 706c 203d  ().        ppl =
+0002a2f0: 2070 706c 5f65 6474 5f74 6162 732e 6765   ppl_edt_tabs.ge
+0002a300: 745f 6375 7272 656e 745f 7069 7065 6c69  t_current_pipeli
+0002a310: 6e65 2829 0a20 2020 2020 2020 2070 726f  ne().        pro
+0002a320: 635f 6c69 625f 7669 6577 203d 2070 706c  c_lib_view = ppl
+0002a330: 5f6d 616e 6167 6572 2e70 726f 6365 7373  _manager.process
+0002a340: 4c69 6272 6172 792e 7072 6f63 6573 735f  Library.process_
+0002a350: 6c69 6272 6172 790a 0a20 2020 2020 2020  library..       
+0002a360: 2023 204f 7065 6e73 2074 6865 2070 6163   # Opens the pac
+0002a370: 6b61 6765 206c 6962 7261 7279 2070 6f70  kage library pop
+0002a380: 2d75 700a 2020 2020 2020 2020 7365 6c66  -up.        self
+0002a390: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 6163  .main_window.pac
+0002a3a0: 6b61 6765 5f6c 6962 7261 7279 5f70 6f70  kage_library_pop
+0002a3b0: 5f75 7028 290a 2020 2020 2020 2020 706b  _up().        pk
+0002a3c0: 675f 6c69 625f 7769 6e64 6f77 203d 2073  g_lib_window = s
+0002a3d0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+0002a3e0: 706f 705f 7570 5f70 6163 6b61 6765 5f6c  pop_up_package_l
+0002a3f0: 6962 7261 7279 0a0a 2020 2020 2020 2020  ibrary..        
+0002a400: 2320 436c 6963 6b73 206f 6e20 7468 6520  # Clicks on the 
+0002a410: 6164 6420 7061 636b 6167 6520 6275 7474  add package butt
+0002a420: 6f6e 2077 6974 686f 7574 2073 656c 6563  on without selec
+0002a430: 7469 6e67 2061 6e79 7468 696e 670a 2020  ting anything.  
+0002a440: 2020 2020 2020 514d 6573 7361 6765 426f        QMessageBo
+0002a450: 782e 6578 6563 203d 206c 616d 6264 6120  x.exec = lambda 
+0002a460: 783a 204e 6f6e 650a 2020 2020 2020 2020  x: None.        
+0002a470: 514d 6573 7361 6765 426f 782e 6578 6563  QMessageBox.exec
+0002a480: 5f20 3d20 6c61 6d62 6461 2078 3a20 4e6f  _ = lambda x: No
+0002a490: 6e65 0a20 2020 2020 2020 2070 6b67 5f6c  ne.        pkg_l
+0002a4a0: 6962 5f77 696e 646f 772e 6c61 796f 7574  ib_window.layout
+0002a4b0: 2829 2e63 6869 6c64 7265 6e28 295b 305d  ().children()[0]
+0002a4c0: 2e6c 6179 6f75 7428 292e 6368 696c 6472  .layout().childr
+0002a4d0: 656e 2829 5b33 5d2e 6974 656d 4174 280a  en()[3].itemAt(.
+0002a4e0: 2020 2020 2020 2020 2020 2020 300a 2020              0.  
+0002a4f0: 2020 2020 2020 292e 7769 6467 6574 2829        ).widget()
+0002a500: 2e63 6c69 636b 6564 2e65 6d69 7428 290a  .clicked.emit().
+0002a510: 0a20 2020 2020 2020 2023 204f 7065 6e20  .        # Open 
+0002a520: 6120 6272 6f77 7365 7220 746f 2073 656c  a browser to sel
+0002a530: 6563 7420 6120 7061 636b 6167 650a 2020  ect a package.  
+0002a540: 2020 2020 2020 5146 696c 6544 6961 6c6f        QFileDialo
+0002a550: 672e 6578 6563 5f20 3d20 6c61 6d62 6461  g.exec_ = lambda
+0002a560: 2078 3a20 5472 7565 0a20 2020 2020 2020   x: True.       
+0002a570: 2070 726f 635f 6c69 625f 7669 6577 2e70   proc_lib_view.p
+0002a580: 6b67 5f6c 6962 7261 7279 2e62 726f 7773  kg_library.brows
+0002a590: 655f 7061 636b 6167 6528 290a 0a20 2020  e_package()..   
+0002a5a0: 2020 2020 2023 2046 696c 6c20 696e 2074       # Fill in t
+0002a5b0: 6865 206c 696e 6520 6564 6974 2074 6f20  he line edit to 
+0002a5c0: 2250 4b47 2220 7468 656e 2063 6c69 636b  "PKG" then click
+0002a5d0: 206f 6e20 7468 6520 6164 6420 7061 636b   on the add pack
+0002a5e0: 6167 6520 6275 7474 6f6e 0a20 2020 2020  age button.     
+0002a5f0: 2020 2070 6b67 5f6c 6962 5f77 696e 646f     pkg_lib_windo
+0002a600: 772e 6c69 6e65 5f65 6469 742e 7365 7454  w.line_edit.setT
+0002a610: 6578 7428 504b 4729 0a20 2020 2020 2020  ext(PKG).       
+0002a620: 2070 726f 635f 6c69 625f 7669 6577 2e70   proc_lib_view.p
+0002a630: 6b67 5f6c 6962 7261 7279 2e69 735f 7061  kg_library.is_pa
+0002a640: 7468 203d 2046 616c 7365 0a20 2020 2020  th = False.     
+0002a650: 2020 2070 6b67 5f6c 6962 5f77 696e 646f     pkg_lib_windo
+0002a660: 772e 6c61 796f 7574 2829 2e63 6869 6c64  w.layout().child
+0002a670: 7265 6e28 295b 305d 2e6c 6179 6f75 7428  ren()[0].layout(
+0002a680: 292e 6368 696c 6472 656e 2829 5b33 5d2e  ).children()[3].
+0002a690: 6974 656d 4174 280a 2020 2020 2020 2020  itemAt(.        
+0002a6a0: 2020 2020 300a 2020 2020 2020 2020 292e      0.        ).
+0002a6b0: 7769 6467 6574 2829 2e63 6c69 636b 6564  widget().clicked
+0002a6c0: 2e65 6d69 7428 290a 0a20 2020 2020 2020  .emit()..       
+0002a6d0: 2023 2052 6573 6574 7320 7468 6520 7072   # Resets the pr
+0002a6e0: 6576 696f 7573 2061 6374 696f 6e0a 2020  evious action.  
+0002a6f0: 2020 2020 2020 706b 675f 6c69 625f 7769        pkg_lib_wi
+0002a700: 6e64 6f77 2e61 6464 5f6c 6973 742e 7365  ndow.add_list.se
+0002a710: 6c65 6374 416c 6c28 290a 2020 2020 2020  lectAll().      
+0002a720: 2020 706b 675f 6c69 625f 7769 6e64 6f77    pkg_lib_window
+0002a730: 2e6c 6179 6f75 7428 292e 6368 696c 6472  .layout().childr
+0002a740: 656e 2829 5b30 5d2e 6c61 796f 7574 2829  en()[0].layout()
+0002a750: 2e69 7465 6d41 7428 0a20 2020 2020 2020  .itemAt(.       
+0002a760: 2020 2020 2038 0a20 2020 2020 2020 2029       8.        )
+0002a770: 2e77 6964 6765 7428 292e 6c61 796f 7574  .widget().layout
+0002a780: 2829 2e69 7465 6d41 7428 3129 2e77 6964  ().itemAt(1).wid
+0002a790: 6765 7428 292e 636c 6963 6b65 642e 656d  get().clicked.em
+0002a7a0: 6974 2829 0a0a 2020 2020 2020 2020 2320  it()..        # 
+0002a7b0: 4170 706c 7920 6368 616e 6765 732c 2063  Apply changes, c
+0002a7c0: 6c6f 7365 2074 6865 2070 6163 6b61 6765  lose the package
+0002a7d0: 206c 6962 7261 7279 2070 6f70 2d75 700a   library pop-up.
+0002a7e0: 2020 2020 2020 2020 706b 675f 6c69 625f          pkg_lib_
+0002a7f0: 7769 6e64 6f77 2e6f 6b5f 636c 6963 6b65  window.ok_clicke
+0002a800: 6428 290a 0a20 2020 2020 2020 2023 204f  d()..        # O
+0002a810: 7065 6e73 2061 6761 696e 2074 6865 2070  pens again the p
+0002a820: 6163 6b61 6765 206c 6962 7261 7279 2070  ackage library p
+0002a830: 6f70 2d75 700a 2020 2020 2020 2020 7365  op-up.        se
+0002a840: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
+0002a850: 6163 6b61 6765 5f6c 6962 7261 7279 5f70  ackage_library_p
+0002a860: 6f70 5f75 7028 290a 2020 2020 2020 2020  op_up().        
+0002a870: 706b 675f 6c69 625f 7769 6e64 6f77 203d  pkg_lib_window =
+0002a880: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+0002a890: 772e 706f 705f 7570 5f70 6163 6b61 6765  w.pop_up_package
+0002a8a0: 5f6c 6962 7261 7279 0a0a 2020 2020 2020  _library..      
+0002a8b0: 2020 2320 5772 6974 6573 2074 6865 206e    # Writes the n
+0002a8c0: 616d 6520 6f66 2061 206e 6f6e 2d65 7869  ame of a non-exi
+0002a8d0: 7374 656e 7420 7061 636b 6167 6520 6f6e  stent package on
+0002a8e0: 2074 6865 206c 696e 6520 6564 6974 0a20   the line edit. 
+0002a8f0: 2020 2020 2020 2070 6b67 5f6c 6962 5f77         pkg_lib_w
+0002a900: 696e 646f 772e 6c69 6e65 5f65 6469 742e  indow.line_edit.
+0002a910: 7365 7454 6578 7428 226e 6f6e 2d65 7869  setText("non-exi
+0002a920: 7374 656e 7422 290a 0a20 2020 2020 2020  stent")..       
+0002a930: 2023 2043 6c69 636b 7320 6f6e 2074 6865   # Clicks on the
+0002a940: 2061 6464 2070 6163 6b61 6765 2062 7574   add package but
+0002a950: 746f 6e0a 2020 2020 2020 2020 706b 675f  ton.        pkg_
+0002a960: 6c69 625f 7769 6e64 6f77 2e6c 6179 6f75  lib_window.layou
+0002a970: 7428 292e 6368 696c 6472 656e 2829 5b30  t().children()[0
+0002a980: 5d2e 6c61 796f 7574 2829 2e63 6869 6c64  ].layout().child
+0002a990: 7265 6e28 295b 335d 2e69 7465 6d41 7428  ren()[3].itemAt(
+0002a9a0: 0a20 2020 2020 2020 2020 2020 2030 0a20  .            0. 
+0002a9b0: 2020 2020 2020 2029 2e77 6964 6765 7428         ).widget(
+0002a9c0: 292e 636c 6963 6b65 642e 656d 6974 2829  ).clicked.emit()
+0002a9d0: 0a0a 2020 2020 2020 2020 2320 4170 706c  ..        # Appl
+0002a9e0: 7920 6368 616e 6765 732c 2063 6c6f 7365  y changes, close
+0002a9f0: 2074 6865 2070 6163 6b61 6765 206c 6962   the package lib
+0002aa00: 7261 7279 2070 6f70 2d75 700a 2020 2020  rary pop-up.    
+0002aa10: 2020 2020 706b 675f 6c69 625f 7769 6e64      pkg_lib_wind
+0002aa20: 6f77 2e6f 6b5f 636c 6963 6b65 6428 290a  ow.ok_clicked().
+0002aa30: 0a20 2020 2020 2020 2023 204d 616b 6573  .        # Makes
+0002aa40: 2061 206d 6f63 6b65 6420 7072 6f63 6573   a mocked proces
+0002aa50: 7320 666f 6c64 6572 2022 4d6f 636b 5f70  s folder "Mock_p
+0002aa60: 726f 6365 7373 2220 696e 2074 6865 2074  rocess" in the t
+0002aa70: 656d 706f 7261 7279 0a20 2020 2020 2020  emporary.       
+0002aa80: 2023 2070 726f 6a65 6374 2070 6174 680a   # project path.
+0002aa90: 2020 2020 2020 2020 6d6f 636b 5f70 726f          mock_pro
+0002aaa0: 635f 666c 6472 203d 206f 732e 7061 7468  c_fldr = os.path
+0002aab0: 2e6a 6f69 6e28 0a20 2020 2020 2020 2020  .join(.         
+0002aac0: 2020 206e 6577 5f70 726f 6a5f 7061 7468     new_proj_path
+0002aad0: 2c20 2270 726f 6365 7373 6573 222c 2022  , "processes", "
+0002aae0: 5554 735f 7072 6f63 6573 7365 7322 0a20  UTs_processes". 
+0002aaf0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0002ab00: 206f 732e 6d61 6b65 6469 7273 286d 6f63   os.makedirs(moc
+0002ab10: 6b5f 7072 6f63 5f66 6c64 722c 2065 7869  k_proc_fldr, exi
+0002ab20: 7374 5f6f 6b3d 5472 7565 290a 0a20 2020  st_ok=True)..   
+0002ab30: 2020 2020 2023 204d 616b 6520 6120 275f       # Make a '_
+0002ab40: 5f69 6e69 745f 5f2e 7079 2720 696e 2074  _init__.py' in t
+0002ab50: 6865 206d 6f63 6b5f 7072 6f63 5f66 6c64  he mock_proc_fld
+0002ab60: 7220 7468 6174 2072 6169 7365 0a20 2020  r that raise.   
+0002ab70: 2020 2020 2023 2061 6e20 2749 6d70 6f72       # an 'Impor
+0002ab80: 7445 7272 6f72 270a 2020 2020 2020 2020  tError'.        
+0002ab90: 696e 6974 5f66 696c 6520 3d20 6f70 656e  init_file = open
+0002aba0: 286f 732e 7061 7468 2e6a 6f69 6e28 6d6f  (os.path.join(mo
+0002abb0: 636b 5f70 726f 635f 666c 6472 2c20 225f  ck_proc_fldr, "_
+0002abc0: 5f69 6e69 745f 5f2e 7079 2229 2c20 2277  _init__.py"), "w
+0002abd0: 2229 0a20 2020 2020 2020 2069 6e69 745f  ").        init_
+0002abe0: 6669 6c65 2e77 7269 7465 2822 7261 6973  file.write("rais
+0002abf0: 6520 496d 706f 7274 4572 726f 7228 276d  e ImportError('m
+0002ac00: 6f63 6b5f 696d 706f 7274 5f65 7272 6f72  ock_import_error
+0002ac10: 2729 2229 0a20 2020 2020 2020 2069 6e69  ')").        ini
+0002ac20: 745f 6669 6c65 2e63 6c6f 7365 2829 0a0a  t_file.close()..
+0002ac30: 2020 2020 2020 2020 2320 4d61 6b65 2061          # Make a
+0002ac40: 2027 7465 7374 5f75 6e69 745f 7465 7374   'test_unit_test
+0002ac50: 5f31 2e70 7927 2069 6e20 7468 6520 6d6f  _1.py' in the mo
+0002ac60: 636b 5f70 726f 635f 666c 6472 2077 6974  ck_proc_fldr wit
+0002ac70: 6820 610a 2020 2020 2020 2020 2320 7265  h a.        # re
+0002ac80: 616c 2070 726f 6365 7373 0a20 2020 2020  al process.     
+0002ac90: 2020 2075 6e69 745f 7465 7374 203d 206f     unit_test = o
+0002aca0: 7065 6e28 6f73 2e70 6174 682e 6a6f 696e  pen(os.path.join
+0002acb0: 286d 6f63 6b5f 7072 6f63 5f66 6c64 722c  (mock_proc_fldr,
+0002acc0: 2022 756e 6974 5f74 6573 745f 312e 7079   "unit_test_1.py
+0002acd0: 2229 2c20 2277 2229 0a20 2020 2020 2020  "), "w").       
+0002ace0: 2075 6e69 745f 7465 7374 2e77 7269 7465   unit_test.write
+0002acf0: 6c69 6e65 7328 0a20 2020 2020 2020 2020  lines(.         
+0002ad00: 2020 205b 0a20 2020 2020 2020 2020 2020     [.           
+0002ad10: 2020 2020 2022 6672 6f6d 2063 6170 7375       "from capsu
+0002ad20: 6c2e 6170 6920 696d 706f 7274 2050 6970  l.api import Pip
+0002ad30: 656c 696e 655c 6e22 2c0a 2020 2020 2020  eline\n",.      
+0002ad40: 2020 2020 2020 2020 2020 2269 6d70 6f72            "impor
+0002ad50: 7420 7472 6169 7473 2e61 7069 2061 7320  t traits.api as 
+0002ad60: 7472 6169 7473 5c6e 222c 0a20 2020 2020  traits\n",.     
+0002ad70: 2020 2020 2020 2020 2020 2022 636c 6173             "clas
+0002ad80: 7320 556e 6974 5f74 6573 745f 3128 5069  s Unit_test_1(Pi
+0002ad90: 7065 6c69 6e65 293a 5c6e 222c 0a20 2020  peline):\n",.   
+0002ada0: 2020 2020 2020 2020 2020 2020 2022 2020               "  
+0002adb0: 2020 6465 6620 7069 7065 6c69 6e65 5f64    def pipeline_d
+0002adc0: 6566 696e 6974 696f 6e28 7365 6c66 293a  efinition(self):
+0002add0: 5c6e 222c 0a20 2020 2020 2020 2020 2020  \n",.           
+0002ade0: 2020 2020 2022 2020 2020 2020 2020 7365       "        se
+0002adf0: 6c66 2e61 6464 5f70 726f 6365 7373 2827  lf.add_process('
+0002ae00: 736d 6f6f 7468 5f31 272c 2022 0a20 2020  smooth_1', ".   
+0002ae10: 2020 2020 2020 2020 2020 2020 2022 276d               "'m
+0002ae20: 6961 5f70 726f 6365 7373 6573 2e62 7269  ia_processes.bri
+0002ae30: 636b 732e 7072 6570 726f 6365 7373 2e73  cks.preprocess.s
+0002ae40: 706d 2e73 7061 7469 616c 5f70 7265 7072  pm.spatial_prepr
+0002ae50: 6f63 6573 7369 6e67 2e22 0a20 2020 2020  ocessing.".     
+0002ae60: 2020 2020 2020 2020 2020 2022 536d 6f6f             "Smoo
+0002ae70: 7468 2729 5c6e 222c 0a20 2020 2020 2020  th')\n",.       
+0002ae80: 2020 2020 2020 2020 2022 2020 2020 2020           "      
+0002ae90: 2020 7365 6c66 2e65 7870 6f72 745f 7061    self.export_pa
+0002aea0: 7261 6d65 7465 7228 2773 6d6f 6f74 685f  rameter('smooth_
+0002aeb0: 3127 2c20 2769 6e5f 6669 6c65 7327 2c20  1', 'in_files', 
+0002aec0: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
+0002aed0: 2020 2269 735f 6f70 7469 6f6e 616c 3d46    "is_optional=F
+0002aee0: 616c 7365 295c 6e22 2c0a 2020 2020 2020  alse)\n",.      
+0002aef0: 2020 2020 2020 2020 2020 2220 2020 2020            "     
+0002af00: 2020 2073 656c 662e 6578 706f 7274 5f70     self.export_p
+0002af10: 6172 616d 6574 6572 2827 736d 6f6f 7468  arameter('smooth
+0002af20: 5f31 272c 2027 6677 686d 272c 2022 0a20  _1', 'fwhm', ". 
+0002af30: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0002af40: 6973 5f6f 7074 696f 6e61 6c3d 5472 7565  is_optional=True
+0002af50: 295c 6e22 2c0a 2020 2020 2020 2020 2020  )\n",.          
+0002af60: 2020 2020 2020 2220 2020 2020 2020 2073        "        s
+0002af70: 656c 662e 6578 706f 7274 5f70 6172 616d  elf.export_param
+0002af80: 6574 6572 2827 736d 6f6f 7468 5f31 272c  eter('smooth_1',
+0002af90: 2027 6461 7461 5f74 7970 6527 2c20 220a   'data_type', ".
+0002afa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002afb0: 2269 735f 6f70 7469 6f6e 616c 3d54 7275  "is_optional=Tru
+0002afc0: 6529 5c6e 222c 0a20 2020 2020 2020 2020  e)\n",.         
+0002afd0: 2020 2020 2020 2022 2020 2020 2020 2020         "        
+0002afe0: 7365 6c66 2e65 7870 6f72 745f 7061 7261  self.export_para
+0002aff0: 6d65 7465 7228 2773 6d6f 6f74 685f 3127  meter('smooth_1'
+0002b000: 2c20 2769 6d70 6c69 6369 745f 6d61 736b  , 'implicit_mask
+0002b010: 696e 6727 2c22 0a20 2020 2020 2020 2020  ing',".         
+0002b020: 2020 2020 2020 2022 2069 735f 6f70 7469         " is_opti
+0002b030: 6f6e 616c 3d54 7275 6529 5c6e 222c 0a20  onal=True)\n",. 
+0002b040: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0002b050: 2020 2020 2020 2020 7365 6c66 2e65 7870          self.exp
+0002b060: 6f72 745f 7061 7261 6d65 7465 7228 2773  ort_parameter('s
+0002b070: 6d6f 6f74 685f 3127 2c20 276f 7574 5f70  mooth_1', 'out_p
+0002b080: 7265 6669 7827 2c20 220a 2020 2020 2020  refix', ".      
+0002b090: 2020 2020 2020 2020 2020 2269 735f 6f70            "is_op
+0002b0a0: 7469 6f6e 616c 3d54 7275 6529 5c6e 222c  tional=True)\n",
+0002b0b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002b0c0: 2022 2020 2020 2020 2020 7365 6c66 2e65   "        self.e
+0002b0d0: 7870 6f72 745f 7061 7261 6d65 7465 7228  xport_parameter(
+0002b0e0: 2773 6d6f 6f74 685f 3127 2c20 2773 6d6f  'smooth_1', 'smo
+0002b0f0: 6f74 6865 645f 6669 6c65 7327 2c20 220a  othed_files', ".
+0002b100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002b110: 2269 735f 6f70 7469 6f6e 616c 3d46 616c  "is_optional=Fal
+0002b120: 7365 295c 6e22 2c0a 2020 2020 2020 2020  se)\n",.        
+0002b130: 2020 2020 2020 2020 2220 2020 2020 2020          "       
+0002b140: 2073 656c 662e 7265 6f72 6465 725f 7472   self.reorder_tr
+0002b150: 6169 7473 2828 2769 6e5f 6669 6c65 7327  aits(('in_files'
+0002b160: 2c20 2766 7768 6d27 2c20 2764 6174 615f  , 'fwhm', 'data_
+0002b170: 7479 7065 272c 220a 2020 2020 2020 2020  type',".        
+0002b180: 2020 2020 2020 2020 2220 2769 6d70 6c69          " 'impli
+0002b190: 6369 745f 6d61 736b 696e 6727 2c20 276f  cit_masking', 'o
+0002b1a0: 7574 5f70 7265 6669 7827 2c20 2773 6d6f  ut_prefix', 'smo
+0002b1b0: 6f74 6865 645f 6669 6c65 7327 2929 5c6e  othed_files'))\n
+0002b1c0: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+0002b1d0: 2020 2022 2020 2020 2020 2020 7365 6c66     "        self
+0002b1e0: 2e6e 6f64 655f 706f 7369 7469 6f6e 203d  .node_position =
+0002b1f0: 207b 5c6e 222c 0a20 2020 2020 2020 2020   {\n",.         
+0002b200: 2020 2020 2020 2022 2020 2020 2020 2020         "        
+0002b210: 2020 2020 2773 6d6f 6f74 685f 3127 3a20      'smooth_1': 
+0002b220: 282d 3131 392e 302c 202d 3733 2e30 292c  (-119.0, -73.0),
+0002b230: 5c6e 222c 0a20 2020 2020 2020 2020 2020  \n",.           
+0002b240: 2020 2020 2022 2020 2020 2020 2020 2020       "          
+0002b250: 2020 2769 6e70 7574 7327 3a20 282d 3337    'inputs': (-37
+0002b260: 332e 3236 3531 3834 3339 3936 3634 3436  3.26518439966446
+0002b270: 2c20 2d37 332e 3029 2c5c 6e22 2c0a 2020  , -73.0),\n",.  
+0002b280: 2020 2020 2020 2020 2020 2020 2020 2220                " 
+0002b290: 2020 2020 2020 2020 2020 2027 6f75 7470             'outp
+0002b2a0: 7574 7327 3a20 2832 3237 2e30 3334 3034  uts': (227.03404
+0002b2b0: 3239 3138 3535 3732 352c 202d 3733 2e30  291855725, -73.0
+0002b2c0: 292c 5c6e 222c 0a20 2020 2020 2020 2020  ),\n",.         
+0002b2d0: 2020 2020 2020 2022 2020 2020 2020 2020         "        
+0002b2e0: 7d5c 6e22 2c0a 2020 2020 2020 2020 2020  }\n",.          
+0002b2f0: 2020 2020 2020 2220 2020 2020 2020 2073        "        s
+0002b300: 656c 662e 6e6f 6465 5f64 696d 656e 7369  elf.node_dimensi
+0002b310: 6f6e 203d 207b 5c6e 222c 0a20 2020 2020  on = {\n",.     
+0002b320: 2020 2020 2020 2020 2020 2022 2020 2020             "    
+0002b330: 2020 2020 2020 2020 2773 6d6f 6f74 685f          'smooth_
+0002b340: 3127 3a20 2832 3231 2e30 3436 3837 352c  1': (221.046875,
+0002b350: 2032 3135 2e30 292c 5c6e 222c 0a20 2020   215.0),\n",.   
+0002b360: 2020 2020 2020 2020 2020 2020 2022 2020               "  
+0002b370: 2020 2020 2020 2020 2020 2769 6e70 7574            'input
+0002b380: 7327 3a20 2831 3337 2e33 3132 352c 2031  s': (137.3125, 1
+0002b390: 3631 2e30 292c 5c6e 222c 0a20 2020 2020  61.0),\n",.     
+0002b3a0: 2020 2020 2020 2020 2020 2022 2020 2020             "    
+0002b3b0: 2020 2020 2020 2020 276f 7574 7075 7473          'outputs
+0002b3c0: 273a 2028 3131 312e 3235 3836 3730 3033  ': (111.25867003
+0002b3d0: 3934 3633 3137 2c20 3631 2e30 292c 5c6e  946317, 61.0),\n
+0002b3e0: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+0002b3f0: 2020 2022 2020 2020 2020 2020 7d5c 6e22     "        }\n"
+0002b400: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0002b410: 2020 2220 2020 2020 2020 2073 656c 662e    "        self.
+0002b420: 646f 5f61 7574 6f65 7870 6f72 745f 6e6f  do_autoexport_no
+0002b430: 6465 735f 7061 7261 6d65 7465 7273 203d  des_parameters =
+0002b440: 2046 616c 7365 5c6e 222c 0a20 2020 2020   False\n",.     
+0002b450: 2020 2020 2020 205d 0a20 2020 2020 2020         ].       
+0002b460: 2029 0a20 2020 2020 2020 2075 6e69 745f   ).        unit_
+0002b470: 7465 7374 2e63 6c6f 7365 2829 0a0a 2020  test.close()..  
+0002b480: 2020 2020 2020 2320 4d61 6b65 7320 6120        # Makes a 
+0002b490: 6669 6c65 2022 6d6f 636b 5f66 696c 655f  file "mock_file_
+0002b4a0: 7061 7468 2220 696e 2074 6865 2074 656d  path" in the tem
+0002b4b0: 706f 7261 7279 2070 726f 6a65 6374 7320  porary projects 
+0002b4c0: 7061 7468 0a20 2020 2020 2020 206d 6f63  path.        moc
+0002b4d0: 6b5f 6669 6c65 5f70 6174 6820 3d20 6f73  k_file_path = os
+0002b4e0: 2e70 6174 682e 6a6f 696e 286e 6577 5f70  .path.join(new_p
+0002b4f0: 726f 6a5f 7061 7468 2c20 226d 6f63 6b5f  roj_path, "mock_
+0002b500: 6669 6c65 2229 0a20 2020 2020 2020 206d  file").        m
+0002b510: 6f63 6b5f 6669 6c65 203d 206f 7065 6e28  ock_file = open(
+0002b520: 6d6f 636b 5f66 696c 655f 7061 7468 2c20  mock_file_path, 
+0002b530: 2277 2229 0a20 2020 2020 2020 206d 6f63  "w").        moc
+0002b540: 6b5f 6669 6c65 2e63 6c6f 7365 2829 0a0a  k_file.close()..
+0002b550: 2020 2020 2020 2020 2320 4f70 656e 7320          # Opens 
+0002b560: 6167 6169 6e20 7468 6520 7061 636b 6167  again the packag
+0002b570: 6520 6c69 6272 6172 7920 706f 702d 7570  e library pop-up
+0002b580: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+0002b590: 696e 5f77 696e 646f 772e 7061 636b 6167  in_window.packag
+0002b5a0: 655f 6c69 6272 6172 795f 706f 705f 7570  e_library_pop_up
+0002b5b0: 2829 0a20 2020 2020 2020 2070 6b67 5f6c  ().        pkg_l
+0002b5c0: 6962 5f77 696e 646f 7720 3d20 7365 6c66  ib_window = self
+0002b5d0: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 6f70  .main_window.pop
+0002b5e0: 5f75 705f 7061 636b 6167 655f 6c69 6272  _up_package_libr
+0002b5f0: 6172 790a 0a20 2020 2020 2020 2023 204f  ary..        # O
+0002b600: 7065 6e73 2074 6865 2022 696e 7374 616c  pens the "instal
+0002b610: 6c61 7469 6f6e 2070 726f 6365 7373 6573  lation processes
+0002b620: 2220 2866 726f 6d20 666f 6c64 6572 2920  " (from folder) 
+0002b630: 706f 7020 7570 0a20 2020 2020 2020 2066  pop up.        f
+0002b640: 6f6c 6465 725f 6274 6e20 3d20 280a 2020  older_btn = (.  
+0002b650: 2020 2020 2020 2020 2020 706b 675f 6c69            pkg_li
+0002b660: 625f 7769 6e64 6f77 2e6c 6179 6f75 7428  b_window.layout(
+0002b670: 290a 2020 2020 2020 2020 2020 2020 2e63  ).            .c
+0002b680: 6869 6c64 7265 6e28 295b 305d 0a20 2020  hildren()[0].   
+0002b690: 2020 2020 2020 2020 202e 6c61 796f 7574           .layout
+0002b6a0: 2829 0a20 2020 2020 2020 2020 2020 202e  ().            .
+0002b6b0: 6974 656d 4174 2831 290a 2020 2020 2020  itemAt(1).      
+0002b6c0: 2020 2020 2020 2e69 7465 6d41 7428 3329        .itemAt(3)
+0002b6d0: 0a20 2020 2020 2020 2020 2020 202e 7769  .            .wi
+0002b6e0: 6467 6574 2829 0a20 2020 2020 2020 2029  dget().        )
+0002b6f0: 0a20 2020 2020 2020 2066 6f6c 6465 725f  .        folder_
+0002b700: 6274 6e2e 636c 6963 6b65 642e 656d 6974  btn.clicked.emit
+0002b710: 2829 0a0a 2020 2020 2020 2020 2320 5365  ()..        # Se
+0002b720: 7473 2074 6865 2066 6f6c 6465 7220 746f  ts the folder to
+0002b730: 2061 206e 6f6e 2d65 7869 7374 656e 7420   a non-existent 
+0002b740: 6669 6c65 2070 6174 680a 2020 2020 2020  file path.      
+0002b750: 2020 280a 2020 2020 2020 2020 2020 2020    (.            
+0002b760: 706b 675f 6c69 625f 7769 6e64 6f77 2e70  pkg_lib_window.p
+0002b770: 6f70 5f75 705f 696e 7374 616c 6c5f 7072  op_up_install_pr
+0002b780: 6f63 6573 7365 732e 7061 7468 5f65 6469  ocesses.path_edi
+0002b790: 742e 7365 7454 6578 7428 0a20 2020 2020  t.setText(.     
+0002b7a0: 2020 2020 2020 2020 2020 206d 6f63 6b5f             mock_
+0002b7b0: 6669 6c65 5f70 6174 6820 2b20 225f 220a  file_path + "_".
+0002b7c0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0002b7d0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+0002b7e0: 2023 2043 6c69 636b 7320 6f6e 2022 696e   # Clicks on "in
+0002b7f0: 7374 616c 6c20 7061 636b 6167 6522 2062  stall package" b
+0002b800: 7574 746f 6e20 6f66 2022 696e 7374 616c  utton of "instal
+0002b810: 6c61 7469 6f6e 2070 726f 6365 7373 6573  lation processes
+0002b820: 2220 7075 702d 7570 0a20 2020 2020 2020  " pup-up.       
+0002b830: 2069 6e73 746c 5f70 6b67 5f62 746e 203d   instl_pkg_btn =
+0002b840: 2028 0a20 2020 2020 2020 2020 2020 2070   (.            p
+0002b850: 6b67 5f6c 6962 5f77 696e 646f 772e 706f  kg_lib_window.po
+0002b860: 705f 7570 5f69 6e73 7461 6c6c 5f70 726f  p_up_install_pro
+0002b870: 6365 7373 6573 2e6c 6179 6f75 7428 290a  cesses.layout().
+0002b880: 2020 2020 2020 2020 2020 2020 2e63 6869              .chi
+0002b890: 6c64 7265 6e28 295b 315d 0a20 2020 2020  ldren()[1].     
+0002b8a0: 2020 2020 2020 202e 6974 656d 4174 2830         .itemAt(0
+0002b8b0: 290a 2020 2020 2020 2020 2020 2020 2e77  ).            .w
+0002b8c0: 6964 6765 7428 290a 2020 2020 2020 2020  idget().        
+0002b8d0: 290a 2020 2020 2020 2020 696e 7374 6c5f  ).        instl_
+0002b8e0: 706b 675f 6274 6e2e 636c 6963 6b65 642e  pkg_btn.clicked.
+0002b8f0: 656d 6974 2829 2020 2320 4469 7370 6c61  emit()  # Displa
+0002b900: 7973 2061 6e20 6572 726f 7220 6469 616c  ys an error dial
+0002b910: 6f67 2062 6f78 0a0a 2020 2020 2020 2020  og box..        
+0002b920: 2320 5365 7473 2074 6865 2066 6f6c 6465  # Sets the folde
+0002b930: 7220 746f 2061 6e20 6578 6973 7469 6e67  r to an existing
+0002b940: 2066 696c 6520 7061 7468 0a20 2020 2020   file path.     
+0002b950: 2020 2028 0a20 2020 2020 2020 2020 2020     (.           
+0002b960: 2070 6b67 5f6c 6962 5f77 696e 646f 772e   pkg_lib_window.
+0002b970: 706f 705f 7570 5f69 6e73 7461 6c6c 5f70  pop_up_install_p
+0002b980: 726f 6365 7373 6573 2e70 6174 685f 6564  rocesses.path_ed
+0002b990: 6974 2e73 6574 5465 7874 280a 2020 2020  it.setText(.    
+0002b9a0: 2020 2020 2020 2020 2020 2020 6d6f 636b              mock
+0002b9b0: 5f66 696c 655f 7061 7468 0a20 2020 2020  _file_path.     
+0002b9c0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0002b9d0: 2029 0a0a 2020 2020 2020 2020 2320 436c   )..        # Cl
+0002b9e0: 6963 6b73 206f 6e20 2269 6e73 7461 6c6c  icks on "install
+0002b9f0: 2070 6163 6b61 6765 2220 6275 7474 6f6e   package" button
+0002ba00: 206f 6620 2269 6e73 7461 6c6c 6174 696f   of "installatio
+0002ba10: 6e20 7072 6f63 6573 7365 7322 2070 7570  n processes" pup
+0002ba20: 2d75 700a 2020 2020 2020 2020 696e 7374  -up.        inst
+0002ba30: 6c5f 706b 675f 6274 6e2e 636c 6963 6b65  l_pkg_btn.clicke
+0002ba40: 642e 656d 6974 2829 2020 2320 4469 7370  d.emit()  # Disp
+0002ba50: 6c61 7973 2061 6e20 6572 726f 7220 6469  lays an error di
+0002ba60: 616c 6f67 2062 6f78 0a0a 2020 2020 2020  alog box..      
+0002ba70: 2020 2320 5365 7473 2074 6865 2066 6f6c    # Sets the fol
+0002ba80: 6465 7220 746f 2062 6520 6120 7661 6c69  der to be a vali
+0002ba90: 6420 7061 636b 6167 650a 2020 2020 2020  d package.      
+0002baa0: 2020 280a 2020 2020 2020 2020 2020 2020    (.            
+0002bab0: 706b 675f 6c69 625f 7769 6e64 6f77 2e70  pkg_lib_window.p
+0002bac0: 6f70 5f75 705f 696e 7374 616c 6c5f 7072  op_up_install_pr
+0002bad0: 6f63 6573 7365 732e 7061 7468 5f65 6469  ocesses.path_edi
+0002bae0: 742e 7365 7454 6578 7428 0a20 2020 2020  t.setText(.     
+0002baf0: 2020 2020 2020 2020 2020 206d 6f63 6b5f             mock_
+0002bb00: 7072 6f63 5f66 6c64 720a 2020 2020 2020  proc_fldr.      
+0002bb10: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0002bb20: 290a 0a20 2020 2020 2020 2023 2043 6c69  )..        # Cli
+0002bb30: 636b 7320 6f6e 2022 696e 7374 616c 6c20  cks on "install 
+0002bb40: 7061 636b 6167 6522 2062 7574 746f 6e20  package" button 
+0002bb50: 6f66 2022 696e 7374 616c 6c61 7469 6f6e  of "installation
+0002bb60: 2070 726f 6365 7373 6573 2220 7075 702d   processes" pup-
+0002bb70: 7570 0a20 2020 2020 2020 2023 2044 6973  up.        # Dis
+0002bb80: 706c 6179 7320 616e 2065 7272 6f72 2064  plays an error d
+0002bb90: 6961 6c6f 6720 626f 7820 7369 6e63 6520  ialog box since 
+0002bba0: 5f5f 696e 6974 5f5f 2e70 7920 7261 6973  __init__.py rais
+0002bbb0: 6520 496d 706f 7274 4572 726f 720a 2020  e ImportError.  
+0002bbc0: 2020 2020 2020 696e 7374 6c5f 706b 675f        instl_pkg_
+0002bbd0: 6274 6e2e 636c 6963 6b65 642e 656d 6974  btn.clicked.emit
+0002bbe0: 2829 0a0a 2020 2020 2020 2020 2320 4d61  ()..        # Ma
+0002bbf0: 6b65 2061 2070 726f 7065 7220 275f 5f69  ke a proper '__i
+0002bc00: 6e69 745f 5f2e 7079 0a20 2020 2020 2020  nit__.py.       
+0002bc10: 2069 6e69 745f 6669 6c65 203d 206f 7065   init_file = ope
+0002bc20: 6e28 6f73 2e70 6174 682e 6a6f 696e 286d  n(os.path.join(m
+0002bc30: 6f63 6b5f 7072 6f63 5f66 6c64 722c 2022  ock_proc_fldr, "
+0002bc40: 5f5f 696e 6974 5f5f 2e70 7922 292c 2022  __init__.py"), "
+0002bc50: 7722 290a 2020 2020 2020 2020 696e 6974  w").        init
+0002bc60: 5f66 696c 652e 7772 6974 6528 2266 726f  _file.write("fro
+0002bc70: 6d20 2e75 6e69 745f 7465 7374 5f31 2069  m .unit_test_1 i
+0002bc80: 6d70 6f72 7420 556e 6974 5f74 6573 745f  mport Unit_test_
+0002bc90: 3122 290a 2020 2020 2020 2020 696e 6974  1").        init
+0002bca0: 5f66 696c 652e 636c 6f73 6528 290a 0a20  _file.close().. 
+0002bcb0: 2020 2020 2020 2023 2043 6c69 636b 7320         # Clicks 
+0002bcc0: 6167 6169 6e20 6f6e 2022 696e 7374 616c  again on "instal
+0002bcd0: 6c20 7061 636b 6167 6522 2062 7574 746f  l package" butto
+0002bce0: 6e0a 2020 2020 2020 2020 696e 7374 6c5f  n.        instl_
+0002bcf0: 706b 675f 6274 6e2e 636c 6963 6b65 642e  pkg_btn.clicked.
+0002bd00: 656d 6974 2829 0a0a 2020 2020 2020 2020  emit()..        
+0002bd10: 2320 436c 6f73 6573 2074 6865 2022 696e  # Closes the "in
+0002bd20: 7374 616c 6c61 7469 6f6e 2070 726f 6365  stallation proce
+0002bd30: 7373 6573 2220 2866 726f 6d20 666f 6c64  sses" (from fold
+0002bd40: 6572 2920 706f 7020 7570 0a20 2020 2020  er) pop up.     
+0002bd50: 2020 2070 6b67 5f6c 6962 5f77 696e 646f     pkg_lib_windo
+0002bd60: 772e 706f 705f 7570 5f69 6e73 7461 6c6c  w.pop_up_install
+0002bd70: 5f70 726f 6365 7373 6573 2e63 6c6f 7365  _processes.close
+0002bd80: 2829 0a0a 2020 2020 2020 2020 2320 4170  ()..        # Ap
+0002bd90: 706c 7920 6368 616e 6765 732c 2063 6c6f  ply changes, clo
+0002bda0: 7365 2074 6865 2070 6163 6b61 6765 206c  se the package l
+0002bdb0: 6962 7261 7279 2070 6f70 2d75 700a 2020  ibrary pop-up.  
 0002bdc0: 2020 2020 2020 706b 675f 6c69 625f 7769        pkg_lib_wi
-0002bdd0: 6e64 6f77 2e70 6f70 5f75 705f 696e 7374  ndow.pop_up_inst
-0002bde0: 616c 6c5f 7072 6f63 6573 7365 732e 636c  all_processes.cl
-0002bdf0: 6f73 6528 290a 0a20 2020 2020 2020 2023  ose()..        #
-0002be00: 2041 7070 6c79 2063 6861 6e67 6573 2c20   Apply changes, 
-0002be10: 636c 6f73 6520 7468 6520 7061 636b 6167  close the packag
-0002be20: 6520 6c69 6272 6172 7920 706f 702d 7570  e library pop-up
-0002be30: 0a20 2020 2020 2020 2070 6b67 5f6c 6962  .        pkg_lib
-0002be40: 5f77 696e 646f 772e 6f6b 5f63 6c69 636b  _window.ok_click
-0002be50: 6564 2829 0a0a 2020 2020 2020 2020 2320  ed()..        # 
-0002be60: 5377 6974 6368 6573 2074 6f20 7468 6520  Switches to the 
-0002be70: 7069 7065 6c69 6e65 206d 616e 6167 6572  pipeline manager
-0002be80: 2074 6162 0a20 2020 2020 2020 2073 656c   tab.        sel
-0002be90: 662e 6d61 696e 5f77 696e 646f 772e 7461  f.main_window.ta
-0002bea0: 6273 2e73 6574 4375 7272 656e 7449 6e64  bs.setCurrentInd
-0002beb0: 6578 2832 290a 0a20 2020 2020 2020 2023  ex(2)..        #
-0002bec0: 2041 6464 7320 7468 6520 7072 6f63 6573   Adds the proces
-0002bed0: 7365 7320 5265 6e61 6d65 2c20 6372 6561  ses Rename, crea
-0002bee0: 7465 7320 7468 6520 2272 656e 616d 655f  tes the "rename_
-0002bef0: 3122 206e 6f64 650a 2020 2020 2020 2020  1" node.        
-0002bf00: 7070 6c5f 6564 745f 7461 622e 636c 6963  ppl_edt_tab.clic
-0002bf10: 6b5f 706f 7320 3d20 5150 6f69 6e74 2834  k_pos = QPoint(4
-0002bf20: 3530 2c20 3530 3029 0a20 2020 2020 2020  50, 500).       
-0002bf30: 2070 706c 5f65 6474 5f74 6162 2e61 6464   ppl_edt_tab.add
-0002bf40: 5f6e 616d 6564 5f70 726f 6365 7373 2852  _named_process(R
-0002bf50: 656e 616d 6529 0a0a 2020 2020 2020 2020  ename)..        
-0002bf60: 2320 4578 706f 7274 7320 7468 6520 6d61  # Exports the ma
-0002bf70: 6e64 6174 6f72 7920 696e 7075 7420 616e  ndatory input an
-0002bf80: 6420 6f75 7470 7574 2070 6c75 6773 2066  d output plugs f
-0002bf90: 6f72 2022 7265 6e61 6d65 5f31 220a 2020  or "rename_1".  
-0002bfa0: 2020 2020 2020 7070 6c5f 6564 745f 7461        ppl_edt_ta
-0002bfb0: 622e 6375 7272 656e 745f 6e6f 6465 5f6e  b.current_node_n
-0002bfc0: 616d 6520 3d20 2272 656e 616d 655f 3122  ame = "rename_1"
-0002bfd0: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
-0002bfe0: 5f74 6162 2e65 7870 6f72 745f 756e 636f  _tab.export_unco
-0002bff0: 6e6e 6563 7465 645f 6d61 6e64 6174 6f72  nnected_mandator
-0002c000: 795f 696e 7075 7473 2829 0a20 2020 2020  y_inputs().     
-0002c010: 2020 2070 706c 5f65 6474 5f74 6162 2e65     ppl_edt_tab.e
-0002c020: 7870 6f72 745f 616c 6c5f 756e 636f 6e6e  xport_all_unconn
-0002c030: 6563 7465 645f 6f75 7470 7574 7328 290a  ected_outputs().
-0002c040: 0a20 2020 2020 2020 2023 2053 6176 6573  .        # Saves
-0002c050: 2074 6865 2070 6970 656c 696e 6520 6173   the pipeline as
-0002c060: 2074 6865 2070 6163 6b61 6765 2027 556e   the package 'Un
-0002c070: 6974 5f74 6573 745f 7069 7065 6c69 6e65  it_test_pipeline
-0002c080: 2720 696e 0a20 2020 2020 2020 2023 2055  ' in.        # U
-0002c090: 7365 725f 7072 6f63 6573 7365 730a 2020  ser_processes.  
-0002c0a0: 2020 2020 2020 636f 6e66 6967 203d 2043        config = C
-0002c0b0: 6f6e 6669 6728 636f 6e66 6967 5f70 6174  onfig(config_pat
-0002c0c0: 683d 7365 6c66 2e63 6f6e 6669 675f 7061  h=self.config_pa
-0002c0d0: 7468 290a 2020 2020 2020 2020 6669 6c65  th).        file
-0002c0e0: 6e61 6d65 203d 206f 732e 7061 7468 2e6a  name = os.path.j
-0002c0f0: 6f69 6e28 0a20 2020 2020 2020 2020 2020  oin(.           
-0002c100: 2063 6f6e 6669 672e 6765 745f 6d69 615f   config.get_mia_
-0002c110: 7061 7468 2829 2c0a 2020 2020 2020 2020  path(),.        
-0002c120: 2020 2020 2270 726f 6365 7373 6573 222c      "processes",
-0002c130: 0a20 2020 2020 2020 2020 2020 2022 5573  .            "Us
-0002c140: 6572 5f70 726f 6365 7373 6573 222c 0a20  er_processes",. 
-0002c150: 2020 2020 2020 2020 2020 2022 756e 6974             "unit
-0002c160: 5f74 6573 745f 7069 7065 6c69 6e65 2e70  _test_pipeline.p
-0002c170: 7922 2c0a 2020 2020 2020 2020 290a 0a20  y",.        ).. 
-0002c180: 2020 2020 2020 2073 6176 655f 7069 7065         save_pipe
-0002c190: 6c69 6e65 2870 706c 2c20 6669 6c65 6e61  line(ppl, filena
-0002c1a0: 6d65 290a 2020 2020 2020 2020 7365 6c66  me).        self
-0002c1b0: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 6970  .main_window.pip
-0002c1c0: 656c 696e 655f 6d61 6e61 6765 722e 7570  eline_manager.up
-0002c1d0: 6461 7465 5072 6f63 6573 734c 6962 7261  dateProcessLibra
-0002c1e0: 7279 2866 696c 656e 616d 6529 0a0a 2020  ry(filename)..  
-0002c1f0: 2020 2020 2020 2320 436c 6561 6e69 6e67        # Cleaning
-0002c200: 2074 6865 2070 726f 6365 7373 206c 6962   the process lib
-0002c210: 7261 7279 2069 6e20 7069 7065 6c69 6e65  rary in pipeline
-0002c220: 206d 616e 6167 6572 2074 6162 2028 6465   manager tab (de
-0002c230: 6c65 7469 6e67 2074 6865 0a20 2020 2020  leting the.     
-0002c240: 2020 2023 2070 6163 6b61 6765 2061 6464     # package add
-0002c250: 6564 2069 6e20 7468 6973 2074 6573 742c  ed in this test,
-0002c260: 206f 7220 6f6c 6420 6f6e 6520 7374 696c   or old one stil
-0002c270: 6c20 6578 6973 7469 6e67 290a 2020 2020  l existing).    
-0002c280: 2020 2020 7365 6c66 2e63 6c65 616e 5f75      self.clean_u
-0002c290: 7473 5f70 6163 6b61 6765 7328 7072 6f63  ts_packages(proc
-0002c2a0: 5f6c 6962 5f76 6965 7729 0a0a 2020 2020  _lib_view)..    
-0002c2b0: 6465 6620 7465 7374 5f70 6163 6b61 6765  def test_package
-0002c2c0: 5f6c 6962 7261 7279 5f64 6961 6c6f 675f  _library_dialog_
-0002c2d0: 6465 6c5f 706b 6728 7365 6c66 293a 0a20  del_pkg(self):. 
-0002c2e0: 2020 2020 2020 2022 2222 4372 6561 7465         """Create
-0002c2f0: 7320 6120 6e65 7720 7072 6f6a 6563 7420  s a new project 
-0002c300: 666f 6c64 6572 2c20 6f70 656e 7320 7468  folder, opens th
-0002c310: 6520 7072 6f63 6573 7365 7320 6c69 6272  e processes libr
-0002c320: 6172 7920 616e 640a 2020 2020 2020 2020  ary and.        
-0002c330: 6465 6c65 7465 7320 6120 7061 636b 6167  deletes a packag
-0002c340: 652e 0a0a 2020 2020 2020 2020 2d20 5465  e...        - Te
-0002c350: 7374 733a 2050 6163 6b61 6765 4c69 6272  sts: PackageLibr
-0002c360: 6172 7944 6961 6c6f 670a 0a20 2020 2020  aryDialog..     
-0002c370: 2020 202d 204d 6f63 6b73 3a0a 2020 2020     - Mocks:.    
-0002c380: 2020 2020 2020 2020 2d20 514d 6573 7361          - QMessa
-0002c390: 6765 426f 782e 6578 6563 0a20 2020 2020  geBox.exec.     
-0002c3a0: 2020 2020 2020 202d 2051 4d65 7373 6167         - QMessag
-0002c3b0: 6542 6f78 2e71 7565 7374 696f 6e0a 2020  eBox.question.  
-0002c3c0: 2020 2020 2020 2222 220a 0a20 2020 2020        """..     
-0002c3d0: 2020 2050 4b47 203d 2022 6e69 7079 7065     PKG = "nipype
-0002c3e0: 2e69 6e74 6572 6661 6365 732e 4461 7461  .interfaces.Data
-0002c3f0: 4772 6162 6265 7222 0a0a 2020 2020 2020  Grabber"..      
-0002c400: 2020 2320 4372 6561 7465 7320 6120 6e65    # Creates a ne
-0002c410: 7720 7072 6f6a 6563 7420 666f 6c64 6572  w project folder
-0002c420: 2061 6e64 2073 7769 7463 6865 7320 746f   and switches to
-0002c430: 2069 740a 2020 2020 2020 2020 6e65 775f   it.        new_
-0002c440: 7072 6f6a 5f70 6174 6820 3d20 7365 6c66  proj_path = self
-0002c450: 2e67 6574 5f6e 6577 5f74 6573 745f 7072  .get_new_test_pr
-0002c460: 6f6a 6563 7428 6c69 6768 743d 5472 7565  oject(light=True
-0002c470: 290a 2020 2020 2020 2020 7365 6c66 2e6d  ).        self.m
-0002c480: 6169 6e5f 7769 6e64 6f77 2e73 7769 7463  ain_window.switc
-0002c490: 685f 7072 6f6a 6563 7428 6e65 775f 7072  h_project(new_pr
-0002c4a0: 6f6a 5f70 6174 682c 2022 7465 7374 5f6c  oj_path, "test_l
-0002c4b0: 6967 6874 5f70 726f 6a65 6374 2229 0a0a  ight_project")..
-0002c4c0: 2020 2020 2020 2020 2320 5365 7473 2073          # Sets s
-0002c4d0: 686f 7274 6375 7473 2066 6f72 206f 626a  hortcuts for obj
-0002c4e0: 6563 7473 2074 6861 7420 6172 6520 6f66  ects that are of
-0002c4f0: 7465 6e20 7573 6564 0a20 2020 2020 2020  ten used.       
-0002c500: 2070 706c 5f6d 616e 6167 6572 203d 2073   ppl_manager = s
-0002c510: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-0002c520: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
-0002c530: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
-0002c540: 5f74 6162 7320 3d20 7070 6c5f 6d61 6e61  _tabs = ppl_mana
-0002c550: 6765 722e 7069 7065 6c69 6e65 4564 6974  ger.pipelineEdit
-0002c560: 6f72 5461 6273 0a20 2020 2020 2020 2070  orTabs.        p
-0002c570: 706c 5f65 6474 5f74 6162 203d 2070 706c  pl_edt_tab = ppl
-0002c580: 5f65 6474 5f74 6162 732e 6765 745f 6375  _edt_tabs.get_cu
-0002c590: 7272 656e 745f 6564 6974 6f72 2829 0a20  rrent_editor(). 
-0002c5a0: 2020 2020 2020 2070 706c 203d 2070 706c         ppl = ppl
-0002c5b0: 5f65 6474 5f74 6162 732e 6765 745f 6375  _edt_tabs.get_cu
-0002c5c0: 7272 656e 745f 7069 7065 6c69 6e65 2829  rrent_pipeline()
-0002c5d0: 0a20 2020 2020 2020 2070 726f 635f 6c69  .        proc_li
-0002c5e0: 625f 7669 6577 203d 2070 706c 5f6d 616e  b_view = ppl_man
-0002c5f0: 6167 6572 2e70 726f 6365 7373 4c69 6272  ager.processLibr
-0002c600: 6172 792e 7072 6f63 6573 735f 6c69 6272  ary.process_libr
-0002c610: 6172 790a 0a20 2020 2020 2020 2023 2054  ary..        # T
-0002c620: 616b 6573 2074 6865 2069 6e69 7469 616c  akes the initial
-0002c630: 2073 7461 7465 206f 6620 6e69 7079 7065   state of nipype
-0002c640: 2070 726f 635f 6c69 625f 7669 6577 2061   proc_lib_view a
-0002c650: 6e64 206d 616b 6573 2073 7572 6520 7468  nd makes sure th
-0002c660: 6174 0a20 2020 2020 2020 2023 2050 4b47  at.        # PKG
-0002c670: 2069 7320 616c 7265 6164 7920 696e 7374   is already inst
-0002c680: 616c 6c65 640a 0a20 2020 2020 2020 2069  alled..        i
-0002c690: 6e69 745f 7374 6174 6520 3d20 7365 6c66  nit_state = self
-0002c6a0: 2e70 726f 636c 6962 7669 6577 5f6e 6970  .proclibview_nip
-0002c6b0: 7970 655f 7374 6174 6528 7072 6f63 5f6c  ype_state(proc_l
-0002c6c0: 6962 5f76 6965 7729 0a0a 2020 2020 2020  ib_view)..      
-0002c6d0: 2020 6966 2069 6e69 745f 7374 6174 6520    if init_state 
-0002c6e0: 213d 2022 7072 6f63 6573 735f 656e 6162  != "process_enab
-0002c6f0: 6c65 6422 3a0a 2020 2020 2020 2020 2020  led":.          
-0002c700: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
-0002c710: 6f77 2e70 6163 6b61 6765 5f6c 6962 7261  ow.package_libra
-0002c720: 7279 5f70 6f70 5f75 7028 290a 2020 2020  ry_pop_up().    
-0002c730: 2020 2020 2020 2020 706b 675f 6c69 625f          pkg_lib_
-0002c740: 7769 6e64 6f77 203d 2073 656c 662e 6d61  window = self.ma
-0002c750: 696e 5f77 696e 646f 772e 706f 705f 7570  in_window.pop_up
-0002c760: 5f70 6163 6b61 6765 5f6c 6962 7261 7279  _package_library
-0002c770: 0a20 2020 2020 2020 2020 2020 2070 6b67  .            pkg
-0002c780: 5f6c 6962 5f77 696e 646f 772e 6c69 6e65  _lib_window.line
-0002c790: 5f65 6469 742e 7365 7454 6578 7428 504b  _edit.setText(PK
-0002c7a0: 4729 0a20 2020 2020 2020 2020 2020 2028  G).            (
-0002c7b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c7c0: 2070 706c 5f6d 616e 6167 6572 2e70 726f   ppl_manager.pro
-0002c7d0: 6365 7373 4c69 6272 6172 792e 7072 6f63  cessLibrary.proc
-0002c7e0: 6573 735f 6c69 6272 6172 792e 706b 675f  ess_library.pkg_
-0002c7f0: 6c69 6272 6172 792e 6973 5f70 6174 680a  library.is_path.
-0002c800: 2020 2020 2020 2020 2020 2020 2920 3d20              ) = 
-0002c810: 4661 6c73 650a 2020 2020 2020 2020 2020  False.          
-0002c820: 2020 2320 436c 6963 6b73 206f 6e20 6164    # Clicks on ad
-0002c830: 6420 7061 636b 6167 650a 2020 2020 2020  d package.      
-0002c840: 2020 2020 2020 706b 675f 6c69 625f 7769        pkg_lib_wi
-0002c850: 6e64 6f77 2e6c 6179 6f75 7428 292e 6368  ndow.layout().ch
-0002c860: 696c 6472 656e 2829 5b30 5d2e 6c61 796f  ildren()[0].layo
-0002c870: 7574 2829 2e63 6869 6c64 7265 6e28 295b  ut().children()[
-0002c880: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002c890: 2033 0a20 2020 2020 2020 2020 2020 205d   3.            ]
-0002c8a0: 2e69 7465 6d41 7428 3029 2e77 6964 6765  .itemAt(0).widge
-0002c8b0: 7428 292e 636c 6963 6b65 642e 656d 6974  t().clicked.emit
-0002c8c0: 2829 0a20 2020 2020 2020 2020 2020 2070  ().            p
-0002c8d0: 6b67 5f6c 6962 5f77 696e 646f 772e 6f6b  kg_lib_window.ok
-0002c8e0: 5f63 6c69 636b 6564 2829 0a0a 2020 2020  _clicked()..    
-0002c8f0: 2020 2020 2320 4f70 656e 7320 7468 6520      # Opens the 
-0002c900: 7061 636b 6167 6520 6c69 6272 6172 7920  package library 
-0002c910: 706f 702d 7570 0a20 2020 2020 2020 2073  pop-up.        s
-0002c920: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-0002c930: 7061 636b 6167 655f 6c69 6272 6172 795f  package_library_
-0002c940: 706f 705f 7570 2829 0a20 2020 2020 2020  pop_up().       
-0002c950: 2070 6b67 5f6c 6962 5f77 696e 646f 7720   pkg_lib_window 
-0002c960: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
-0002c970: 6f77 2e70 6f70 5f75 705f 7061 636b 6167  ow.pop_up_packag
-0002c980: 655f 6c69 6272 6172 790a 0a20 2020 2020  e_library..     
-0002c990: 2020 2023 2054 7269 6573 2074 6f20 6465     # Tries to de
-0002c9a0: 6c65 7465 2050 4b47 0a20 2020 2020 2020  lete PKG.       
-0002c9b0: 2070 6b67 5f6c 6962 5f77 696e 646f 772e   pkg_lib_window.
-0002c9c0: 6c69 6e65 5f65 6469 742e 7365 7454 6578  line_edit.setTex
-0002c9d0: 7428 504b 4729 0a20 2020 2020 2020 2070  t(PKG).        p
-0002c9e0: 6b67 5f6c 6962 5f77 696e 646f 772e 6c61  kg_lib_window.la
-0002c9f0: 796f 7574 2829 2e63 6869 6c64 7265 6e28  yout().children(
-0002ca00: 295b 305d 2e6c 6179 6f75 7428 292e 6368  )[0].layout().ch
-0002ca10: 696c 6472 656e 2829 5b33 5d2e 6974 656d  ildren()[3].item
-0002ca20: 4174 280a 2020 2020 2020 2020 2020 2020  At(.            
-0002ca30: 320a 2020 2020 2020 2020 292e 7769 6467  2.        ).widg
-0002ca40: 6574 2829 2e63 6c69 636b 6564 2e65 6d69  et().clicked.emi
-0002ca50: 7428 2920 2023 2043 6c69 636b 7320 6f6e  t()  # Clicks on
-0002ca60: 2064 656c 6574 6520 7061 636b 6167 650a   delete package.
-0002ca70: 0a20 2020 2020 2020 2023 2052 6573 6574  .        # Reset
-0002ca80: 7320 7468 6520 7072 6576 696f 7573 2061  s the previous a
-0002ca90: 6374 696f 6e0a 2020 2020 2020 2020 706b  ction.        pk
-0002caa0: 675f 6c69 625f 7769 6e64 6f77 2e64 656c  g_lib_window.del
-0002cab0: 5f6c 6973 742e 7365 6c65 6374 416c 6c28  _list.selectAll(
-0002cac0: 290a 2020 2020 2020 2020 280a 2020 2020  ).        (.    
-0002cad0: 2020 2020 2020 2020 706b 675f 6c69 625f          pkg_lib_
-0002cae0: 7769 6e64 6f77 2e6c 6179 6f75 7428 290a  window.layout().
-0002caf0: 2020 2020 2020 2020 2020 2020 2e63 6869              .chi
-0002cb00: 6c64 7265 6e28 295b 305d 0a20 2020 2020  ldren()[0].     
-0002cb10: 2020 2020 2020 202e 6c61 796f 7574 2829         .layout()
-0002cb20: 0a20 2020 2020 2020 2020 2020 202e 6974  .            .it
-0002cb30: 656d 4174 2831 3229 0a20 2020 2020 2020  emAt(12).       
-0002cb40: 2020 2020 202e 7769 6467 6574 2829 0a20       .widget(). 
-0002cb50: 2020 2020 2020 2020 2020 202e 6c61 796f             .layo
-0002cb60: 7574 2829 0a20 2020 2020 2020 2020 2020  ut().           
-0002cb70: 202e 6974 656d 4174 2831 290a 2020 2020   .itemAt(1).    
-0002cb80: 2020 2020 2020 2020 2e77 6964 6765 7428          .widget(
-0002cb90: 290a 2020 2020 2020 2020 2020 2020 2e63  ).            .c
-0002cba0: 6c69 636b 6564 2e65 6d69 7428 290a 2020  licked.emit().  
-0002cbb0: 2020 2020 2020 2920 2023 2063 6c69 636b        )  # click
-0002cbc0: 7320 6f6e 2052 6573 6574 0a0a 2020 2020  s on Reset..    
-0002cbd0: 2020 2020 2320 5472 6965 7320 746f 2064      # Tries to d
-0002cbe0: 656c 6574 6520 6167 6169 6e20 504b 470a  elete again PKG.
-0002cbf0: 2020 2020 2020 2020 706b 675f 6c69 625f          pkg_lib_
-0002cc00: 7769 6e64 6f77 2e6c 6179 6f75 7428 292e  window.layout().
-0002cc10: 6368 696c 6472 656e 2829 5b30 5d2e 6c61  children()[0].la
-0002cc20: 796f 7574 2829 2e63 6869 6c64 7265 6e28  yout().children(
-0002cc30: 295b 335d 2e69 7465 6d41 7428 0a20 2020  )[3].itemAt(.   
-0002cc40: 2020 2020 2020 2020 2032 0a20 2020 2020           2.     
-0002cc50: 2020 2029 2e77 6964 6765 7428 292e 636c     ).widget().cl
-0002cc60: 6963 6b65 642e 656d 6974 2829 2020 2320  icked.emit()  # 
-0002cc70: 436c 6963 6b73 206f 6e20 6465 6c65 7465  Clicks on delete
-0002cc80: 2070 6163 6b61 6765 0a0a 2020 2020 2020   package..      
-0002cc90: 2020 2320 436c 6f73 6520 7468 6520 7061    # Close the pa
-0002cca0: 636b 6167 6520 6c69 6272 6172 7920 706f  ckage library po
-0002ccb0: 702d 7570 0a20 2020 2020 2020 2051 4d65  p-up.        QMe
-0002ccc0: 7373 6167 6542 6f78 2e71 7565 7374 696f  ssageBox.questio
-0002ccd0: 6e20 3d20 4d6f 636b 2872 6574 7572 6e5f  n = Mock(return_
-0002cce0: 7661 6c75 653d 514d 6573 7361 6765 426f  value=QMessageBo
-0002ccf0: 782e 4e6f 290a 2020 2020 2020 2020 706b  x.No).        pk
-0002cd00: 675f 6c69 625f 7769 6e64 6f77 2e6f 6b5f  g_lib_window.ok_
-0002cd10: 636c 6963 6b65 6428 2920 2023 2044 6f20  clicked()  # Do 
-0002cd20: 6e6f 7420 6170 706c 7920 7468 6520 6d6f  not apply the mo
-0002cd30: 6469 6669 6361 7469 6f6e 0a0a 2020 2020  dification..    
-0002cd40: 2020 2020 2320 4f70 656e 7320 6167 6169      # Opens agai
-0002cd50: 6e20 7468 6520 7061 636b 6167 6520 6c69  n the package li
-0002cd60: 6272 6172 7920 706f 702d 7570 0a20 2020  brary pop-up.   
-0002cd70: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
-0002cd80: 696e 646f 772e 7061 636b 6167 655f 6c69  indow.package_li
-0002cd90: 6272 6172 795f 706f 705f 7570 2829 0a20  brary_pop_up(). 
-0002cda0: 2020 2020 2020 2070 6b67 5f6c 6962 5f77         pkg_lib_w
-0002cdb0: 696e 646f 7720 3d20 7365 6c66 2e6d 6169  indow = self.mai
-0002cdc0: 6e5f 7769 6e64 6f77 2e70 6f70 5f75 705f  n_window.pop_up_
-0002cdd0: 7061 636b 6167 655f 6c69 6272 6172 790a  package_library.
-0002cde0: 0a20 2020 2020 2020 2023 2054 7269 6573  .        # Tries
-0002cdf0: 2074 6f20 6465 6c65 7465 2050 4b47 0a20   to delete PKG. 
-0002ce00: 2020 2020 2020 2070 6b67 5f6c 6962 5f77         pkg_lib_w
-0002ce10: 696e 646f 772e 6c69 6e65 5f65 6469 742e  indow.line_edit.
-0002ce20: 7365 7454 6578 7428 504b 4729 0a20 2020  setText(PKG).   
-0002ce30: 2020 2020 2070 6b67 5f6c 6962 5f77 696e       pkg_lib_win
-0002ce40: 646f 772e 6c61 796f 7574 2829 2e63 6869  dow.layout().chi
-0002ce50: 6c64 7265 6e28 295b 305d 2e6c 6179 6f75  ldren()[0].layou
-0002ce60: 7428 292e 6368 696c 6472 656e 2829 5b33  t().children()[3
-0002ce70: 5d2e 6974 656d 4174 280a 2020 2020 2020  ].itemAt(.      
-0002ce80: 2020 2020 2020 320a 2020 2020 2020 2020        2.        
-0002ce90: 292e 7769 6467 6574 2829 2e63 6c69 636b  ).widget().click
-0002cea0: 6564 2e65 6d69 7428 2920 2023 2043 6c69  ed.emit()  # Cli
-0002ceb0: 636b 7320 6f6e 2064 656c 6574 6520 7061  cks on delete pa
-0002cec0: 636b 6167 650a 0a20 2020 2020 2020 2023  ckage..        #
-0002ced0: 2043 6c6f 7365 2074 6865 2070 6163 6b61   Close the packa
-0002cee0: 6765 206c 6962 7261 7279 2070 6f70 2d75  ge library pop-u
-0002cef0: 702c 2061 7070 6c79 2063 6861 6e67 6573  p, apply changes
-0002cf00: 2066 6f72 2061 2070 6163 6b61 6765 2077   for a package w
-0002cf10: 6869 6368 0a20 2020 2020 2020 2023 2069  hich.        # i
-0002cf20: 7320 7061 7274 206f 6620 6e69 7079 7065  s part of nipype
-0002cf30: 2c20 7468 6520 7061 636b 6167 6520 6973  , the package is
-0002cf40: 206f 6e6c 7920 7265 6d6f 7665 642e 0a20   only removed.. 
-0002cf50: 2020 2020 2020 2051 4d65 7373 6167 6542         QMessageB
-0002cf60: 6f78 2e71 7565 7374 696f 6e20 3d20 4d6f  ox.question = Mo
-0002cf70: 636b 2872 6574 7572 6e5f 7661 6c75 653d  ck(return_value=
-0002cf80: 514d 6573 7361 6765 426f 782e 5965 7329  QMessageBox.Yes)
-0002cf90: 0a20 2020 2020 2020 2070 6b67 5f6c 6962  .        pkg_lib
-0002cfa0: 5f77 696e 646f 772e 6f6b 5f63 6c69 636b  _window.ok_click
-0002cfb0: 6564 2829 0a20 2020 2020 2020 2070 6b67  ed().        pkg
-0002cfc0: 5f6c 6962 5f77 696e 646f 772e 6d73 672e  _lib_window.msg.
-0002cfd0: 636c 6f73 6528 2920 2023 2043 6c6f 7365  close()  # Close
-0002cfe0: 7320 7468 6520 7761 726e 696e 6720 6d65  s the warning me
-0002cff0: 7373 6167 650a 0a20 2020 2020 2020 2023  ssage..        #
-0002d000: 2041 6464 2061 6761 696e 2050 4b47 0a20   Add again PKG. 
-0002d010: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
-0002d020: 5f77 696e 646f 772e 7061 636b 6167 655f  _window.package_
-0002d030: 6c69 6272 6172 795f 706f 705f 7570 2829  library_pop_up()
-0002d040: 0a20 2020 2020 2020 2070 6b67 5f6c 6962  .        pkg_lib
-0002d050: 5f77 696e 646f 7720 3d20 7365 6c66 2e6d  _window = self.m
-0002d060: 6169 6e5f 7769 6e64 6f77 2e70 6f70 5f75  ain_window.pop_u
-0002d070: 705f 7061 636b 6167 655f 6c69 6272 6172  p_package_librar
-0002d080: 790a 2020 2020 2020 2020 706b 675f 6c69  y.        pkg_li
-0002d090: 625f 7769 6e64 6f77 2e6c 696e 655f 6564  b_window.line_ed
-0002d0a0: 6974 2e73 6574 5465 7874 2850 4b47 290a  it.setText(PKG).
-0002d0b0: 2020 2020 2020 2020 706b 675f 6c69 625f          pkg_lib_
-0002d0c0: 7769 6e64 6f77 2e6c 6179 6f75 7428 292e  window.layout().
-0002d0d0: 6368 696c 6472 656e 2829 5b30 5d2e 6c61  children()[0].la
-0002d0e0: 796f 7574 2829 2e63 6869 6c64 7265 6e28  yout().children(
-0002d0f0: 295b 335d 2e69 7465 6d41 7428 0a20 2020  )[3].itemAt(.   
-0002d100: 2020 2020 2020 2020 2030 0a20 2020 2020           0.     
-0002d110: 2020 2029 2e77 6964 6765 7428 292e 636c     ).widget().cl
-0002d120: 6963 6b65 642e 656d 6974 2829 2020 2320  icked.emit()  # 
-0002d130: 2043 6c69 636b 7320 6f6e 2061 6464 2070   Clicks on add p
-0002d140: 6163 6b61 6765 0a20 2020 2020 2020 2070  ackage.        p
-0002d150: 6b67 5f6c 6962 5f77 696e 646f 772e 6f6b  kg_lib_window.ok
-0002d160: 5f63 6c69 636b 6564 2829 0a0a 2020 2020  _clicked()..    
-0002d170: 2020 2020 2320 5377 6974 6368 6573 2074      # Switches t
-0002d180: 6f20 7468 6520 7069 7065 6c69 6e65 206d  o the pipeline m
-0002d190: 616e 6167 6572 2074 6162 0a20 2020 2020  anager tab.     
-0002d1a0: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
-0002d1b0: 646f 772e 7461 6273 2e73 6574 4375 7272  dow.tabs.setCurr
-0002d1c0: 656e 7449 6e64 6578 2832 290a 0a20 2020  entIndex(2)..   
-0002d1d0: 2020 2020 2023 2053 656c 6563 7473 2074       # Selects t
-0002d1e0: 6865 2027 4461 7461 4772 6162 6265 7227  he 'DataGrabber'
-0002d1f0: 2070 6163 6b61 6765 2069 6e20 5069 7065   package in Pipe
-0002d200: 6c69 6e65 204d 616e 6167 6572 2074 6162  line Manager tab
-0002d210: 0a20 2020 2020 2020 2070 6b67 5f69 6e64  .        pkg_ind
-0002d220: 6578 203d 2073 656c 662e 6669 6e64 5f69  ex = self.find_i
-0002d230: 7465 6d5f 6279 5f64 6174 6128 7072 6f63  tem_by_data(proc
-0002d240: 5f6c 6962 5f76 6965 772c 2022 4461 7461  _lib_view, "Data
-0002d250: 4772 6162 6265 7222 290a 2020 2020 2020  Grabber").      
-0002d260: 2020 280a 2020 2020 2020 2020 2020 2020    (.            
-0002d270: 7072 6f63 5f6c 6962 5f76 6965 772e 7365  proc_lib_view.se
-0002d280: 6c65 6374 696f 6e4d 6f64 656c 2829 2e73  lectionModel().s
-0002d290: 656c 6563 7428 0a20 2020 2020 2020 2020  elect(.         
-0002d2a0: 2020 2020 2020 2070 6b67 5f69 6e64 6578         pkg_index
-0002d2b0: 2c20 5149 7465 6d53 656c 6563 7469 6f6e  , QItemSelection
-0002d2c0: 4d6f 6465 6c2e 5365 6c65 6374 4375 7272  Model.SelectCurr
-0002d2d0: 656e 740a 2020 2020 2020 2020 2020 2020  ent.            
-0002d2e0: 290a 2020 2020 2020 2020 290a 0a20 2020  ).        )..   
-0002d2f0: 2020 2020 2023 2054 7269 6573 2074 6f20       # Tries to 
-0002d300: 6465 6c65 7465 2061 2070 6163 6b61 6765  delete a package
-0002d310: 2074 6861 7420 6361 6e6e 6f74 2062 6520   that cannot be 
-0002d320: 6465 6c65 7465 6420 2869 7320 7061 7274  deleted (is part
-0002d330: 206f 6620 6e69 7079 7065 292c 0a20 2020   of nipype),.   
-0002d340: 2020 2020 2023 2073 656c 6563 7469 6e67       # selecting
-0002d350: 2069 7420 616e 6420 7072 6573 7369 6e67   it and pressing
-0002d360: 2074 6865 2064 656c 206b 6579 0a20 2020   the del key.   
-0002d370: 2020 2020 2065 7665 6e74 203d 204d 6f63       event = Moc
-0002d380: 6b28 290a 2020 2020 2020 2020 6576 656e  k().        even
-0002d390: 742e 6b65 7920 3d20 6c61 6d62 6461 3a20  t.key = lambda: 
-0002d3a0: 5174 2e4b 6579 5f44 656c 6574 650a 2020  Qt.Key_Delete.  
-0002d3b0: 2020 2020 2020 7072 6f63 5f6c 6962 5f76        proc_lib_v
-0002d3c0: 6965 772e 6b65 7950 7265 7373 4576 656e  iew.keyPressEven
-0002d3d0: 7428 6576 656e 7429 0a20 2020 2020 2020  t(event).       
-0002d3e0: 2070 726f 635f 6c69 625f 7669 6577 2e70   proc_lib_view.p
-0002d3f0: 6b67 5f6c 6962 7261 7279 2e6d 7367 2e63  kg_library.msg.c
-0002d400: 6c6f 7365 2829 0a0a 2020 2020 2020 2020  lose()..        
-0002d410: 2320 5472 6965 7320 746f 2064 656c 6574  # Tries to delet
-0002d420: 6520 6120 7061 636b 6167 6520 7468 6174  e a package that
-0002d430: 2063 616e 6e6f 7420 6265 2064 656c 6574   cannot be delet
-0002d440: 6564 2c20 6361 6c6c 696e 6720 7468 650a  ed, calling the.
-0002d450: 2020 2020 2020 2020 2320 6675 6e63 7469          # functi
-0002d460: 6f6e 0a20 2020 2020 2020 2070 6b67 5f6c  on.        pkg_l
-0002d470: 6962 5f77 696e 646f 772e 6465 6c65 7465  ib_window.delete
-0002d480: 5f70 6163 6b61 6765 2829 0a20 2020 2020  _package().     
-0002d490: 2020 2070 6b67 5f6c 6962 5f77 696e 646f     pkg_lib_windo
-0002d4a0: 772e 6d73 672e 636c 6f73 6528 2920 2023  w.msg.close()  #
-0002d4b0: 2043 6c6f 7365 7320 7468 6520 7761 726e   Closes the warn
-0002d4c0: 696e 6720 6d65 7373 6167 650a 0a20 2020  ing message..   
-0002d4d0: 2020 2020 2023 2054 7269 6573 2074 6f20       # Tries to 
-0002d4e0: 6465 6c65 7465 2061 2070 6163 6b61 6765  delete a package
-0002d4f0: 2063 6f72 7265 7370 6f6e 6469 6e67 2074   corresponding t
-0002d500: 6f20 616e 2065 6d70 7479 2073 7472 696e  o an empty strin
-0002d510: 670a 2020 2020 2020 2020 706b 675f 6c69  g.        pkg_li
-0002d520: 625f 7769 6e64 6f77 2e6c 696e 655f 6564  b_window.line_ed
-0002d530: 6974 2e73 6574 5465 7874 2822 2229 0a20  it.setText(""). 
-0002d540: 2020 2020 2020 2070 6b67 5f6c 6962 5f77         pkg_lib_w
-0002d550: 696e 646f 772e 6465 6c65 7465 5f70 6163  indow.delete_pac
-0002d560: 6b61 6765 2829 0a20 2020 2020 2020 2070  kage().        p
-0002d570: 6b67 5f6c 6962 5f77 696e 646f 772e 6d73  kg_lib_window.ms
-0002d580: 672e 636c 6f73 6528 2920 2023 2043 6c6f  g.close()  # Clo
-0002d590: 7365 7320 7468 6520 7761 726e 696e 6720  ses the warning 
-0002d5a0: 6d65 7373 6167 650a 0a20 2020 2020 2020  message..       
-0002d5b0: 2023 2041 6464 7320 7468 6520 7072 6f63   # Adds the proc
-0002d5c0: 6573 7365 7320 5265 6e61 6d65 2c20 6372  esses Rename, cr
-0002d5d0: 6561 7465 7320 7468 6520 2272 656e 616d  eates the "renam
-0002d5e0: 655f 3122 206e 6f64 650a 2020 2020 2020  e_1" node.      
-0002d5f0: 2020 7070 6c5f 6564 745f 7461 622e 636c    ppl_edt_tab.cl
-0002d600: 6963 6b5f 706f 7320 3d20 5150 6f69 6e74  ick_pos = QPoint
-0002d610: 2834 3530 2c20 3530 3029 0a20 2020 2020  (450, 500).     
-0002d620: 2020 2070 706c 5f65 6474 5f74 6162 2e61     ppl_edt_tab.a
-0002d630: 6464 5f6e 616d 6564 5f70 726f 6365 7373  dd_named_process
-0002d640: 2852 656e 616d 6529 0a0a 2020 2020 2020  (Rename)..      
-0002d650: 2020 2320 4578 706f 7274 7320 7468 6520    # Exports the 
-0002d660: 6d61 6e64 6174 6f72 7920 696e 7075 7420  mandatory input 
-0002d670: 616e 6420 6f75 7470 7574 2070 6c75 6773  and output plugs
-0002d680: 2066 6f72 2022 7265 6e61 6d65 5f31 220a   for "rename_1".
-0002d690: 2020 2020 2020 2020 7070 6c5f 6564 745f          ppl_edt_
-0002d6a0: 7461 622e 6375 7272 656e 745f 6e6f 6465  tab.current_node
-0002d6b0: 5f6e 616d 6520 3d20 2272 656e 616d 655f  _name = "rename_
-0002d6c0: 3122 0a20 2020 2020 2020 2070 706c 5f65  1".        ppl_e
-0002d6d0: 6474 5f74 6162 2e65 7870 6f72 745f 756e  dt_tab.export_un
-0002d6e0: 636f 6e6e 6563 7465 645f 6d61 6e64 6174  connected_mandat
-0002d6f0: 6f72 795f 696e 7075 7473 2829 0a20 2020  ory_inputs().   
-0002d700: 2020 2020 2070 706c 5f65 6474 5f74 6162       ppl_edt_tab
-0002d710: 2e65 7870 6f72 745f 616c 6c5f 756e 636f  .export_all_unco
-0002d720: 6e6e 6563 7465 645f 6f75 7470 7574 7328  nnected_outputs(
-0002d730: 290a 0a20 2020 2020 2020 2023 2053 6176  )..        # Sav
-0002d740: 6573 2074 6865 2070 6970 656c 696e 6520  es the pipeline 
-0002d750: 6173 2074 6865 2070 6163 6b61 6765 2027  as the package '
-0002d760: 556e 6974 5f74 6573 745f 7069 7065 6c69  Unit_test_pipeli
-0002d770: 6e65 2720 696e 0a20 2020 2020 2020 2023  ne' in.        #
-0002d780: 2055 7365 725f 7072 6f63 6573 7365 730a   User_processes.
-0002d790: 2020 2020 2020 2020 636f 6e66 6967 203d          config =
-0002d7a0: 2043 6f6e 6669 6728 636f 6e66 6967 5f70   Config(config_p
-0002d7b0: 6174 683d 7365 6c66 2e63 6f6e 6669 675f  ath=self.config_
-0002d7c0: 7061 7468 290a 2020 2020 2020 2020 6669  path).        fi
-0002d7d0: 6c65 6e61 6d65 203d 206f 732e 7061 7468  lename = os.path
-0002d7e0: 2e6a 6f69 6e28 0a20 2020 2020 2020 2020  .join(.         
-0002d7f0: 2020 2063 6f6e 6669 672e 6765 745f 6d69     config.get_mi
-0002d800: 615f 7061 7468 2829 2c0a 2020 2020 2020  a_path(),.      
-0002d810: 2020 2020 2020 2270 726f 6365 7373 6573        "processes
-0002d820: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-0002d830: 5573 6572 5f70 726f 6365 7373 6573 222c  User_processes",
-0002d840: 0a20 2020 2020 2020 2020 2020 2022 756e  .            "un
-0002d850: 6974 5f74 6573 745f 7069 7065 6c69 6e65  it_test_pipeline
-0002d860: 2e70 7922 2c0a 2020 2020 2020 2020 290a  .py",.        ).
-0002d870: 2020 2020 2020 2020 7361 7665 5f70 6970          save_pip
-0002d880: 656c 696e 6528 7070 6c2c 2066 696c 656e  eline(ppl, filen
-0002d890: 616d 6529 0a20 2020 2020 2020 2073 656c  ame).        sel
-0002d8a0: 662e 6d61 696e 5f77 696e 646f 772e 7069  f.main_window.pi
-0002d8b0: 7065 6c69 6e65 5f6d 616e 6167 6572 2e75  peline_manager.u
-0002d8c0: 7064 6174 6550 726f 6365 7373 4c69 6272  pdateProcessLibr
-0002d8d0: 6172 7928 6669 6c65 6e61 6d65 290a 0a20  ary(filename).. 
-0002d8e0: 2020 2020 2020 2023 204d 616b 6573 2061         # Makes a
-0002d8f0: 206d 6f63 6b65 6420 7072 6f63 6573 7320   mocked process 
-0002d900: 666f 6c64 6572 2022 4d6f 636b 5f70 726f  folder "Mock_pro
-0002d910: 6365 7373 2220 696e 2074 6865 2074 656d  cess" in the tem
-0002d920: 706f 7261 7279 0a20 2020 2020 2020 2023  porary.        #
-0002d930: 2070 726f 6a65 6374 2070 6174 680a 2020   project path.  
-0002d940: 2020 2020 2020 6d6f 636b 5f70 726f 635f        mock_proc_
-0002d950: 666c 6472 203d 206f 732e 7061 7468 2e6a  fldr = os.path.j
-0002d960: 6f69 6e28 0a20 2020 2020 2020 2020 2020  oin(.           
-0002d970: 206e 6577 5f70 726f 6a5f 7061 7468 2c20   new_proj_path, 
-0002d980: 2270 726f 6365 7373 6573 222c 2022 5554  "processes", "UT
-0002d990: 735f 7072 6f63 6573 7365 7322 0a20 2020  s_processes".   
-0002d9a0: 2020 2020 2029 0a20 2020 2020 2020 206f       ).        o
-0002d9b0: 732e 6d61 6b65 6469 7273 286d 6f63 6b5f  s.makedirs(mock_
-0002d9c0: 7072 6f63 5f66 6c64 722c 2065 7869 7374  proc_fldr, exist
-0002d9d0: 5f6f 6b3d 5472 7565 290a 0a20 2020 2020  _ok=True)..     
-0002d9e0: 2020 2069 6620 6f73 2e70 6174 682e 6578     if os.path.ex
-0002d9f0: 6973 7473 280a 2020 2020 2020 2020 2020  ists(.          
-0002da00: 2020 6f73 2e70 6174 682e 6a6f 696e 280a    os.path.join(.
-0002da10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002da20: 636f 6e66 6967 2e67 6574 5f6d 6961 5f70  config.get_mia_p
-0002da30: 6174 6828 292c 0a20 2020 2020 2020 2020  ath(),.         
-0002da40: 2020 2020 2020 2022 7072 6f63 6573 7365         "processe
-0002da50: 7322 2c0a 2020 2020 2020 2020 2020 2020  s",.            
-0002da60: 2020 2020 2255 7365 725f 7072 6f63 6573      "User_proces
-0002da70: 7365 7322 2c0a 2020 2020 2020 2020 2020  ses",.          
-0002da80: 2020 2020 2020 2275 6e69 745f 7465 7374        "unit_test
-0002da90: 5f70 6970 656c 696e 652e 7079 222c 0a20  _pipeline.py",. 
-0002daa0: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-0002dab0: 2020 2020 2029 3a0a 2020 2020 2020 2020       ):.        
-0002dac0: 2020 2020 7368 7574 696c 2e63 6f70 7928      shutil.copy(
-0002dad0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002dae0: 206f 732e 7061 7468 2e6a 6f69 6e28 0a20   os.path.join(. 
+0002bdd0: 6e64 6f77 2e6f 6b5f 636c 6963 6b65 6428  ndow.ok_clicked(
+0002bde0: 290a 0a20 2020 2020 2020 2023 2053 7769  )..        # Swi
+0002bdf0: 7463 6865 7320 746f 2074 6865 2070 6970  tches to the pip
+0002be00: 656c 696e 6520 6d61 6e61 6765 7220 7461  eline manager ta
+0002be10: 620a 2020 2020 2020 2020 7365 6c66 2e6d  b.        self.m
+0002be20: 6169 6e5f 7769 6e64 6f77 2e74 6162 732e  ain_window.tabs.
+0002be30: 7365 7443 7572 7265 6e74 496e 6465 7828  setCurrentIndex(
+0002be40: 3229 0a0a 2020 2020 2020 2020 2320 4164  2)..        # Ad
+0002be50: 6473 2074 6865 2070 726f 6365 7373 6573  ds the processes
+0002be60: 2052 656e 616d 652c 2063 7265 6174 6573   Rename, creates
+0002be70: 2074 6865 2022 7265 6e61 6d65 5f31 2220   the "rename_1" 
+0002be80: 6e6f 6465 0a20 2020 2020 2020 2070 706c  node.        ppl
+0002be90: 5f65 6474 5f74 6162 2e63 6c69 636b 5f70  _edt_tab.click_p
+0002bea0: 6f73 203d 2051 506f 696e 7428 3435 302c  os = QPoint(450,
+0002beb0: 2035 3030 290a 2020 2020 2020 2020 7070   500).        pp
+0002bec0: 6c5f 6564 745f 7461 622e 6164 645f 6e61  l_edt_tab.add_na
+0002bed0: 6d65 645f 7072 6f63 6573 7328 5265 6e61  med_process(Rena
+0002bee0: 6d65 290a 0a20 2020 2020 2020 2023 2045  me)..        # E
+0002bef0: 7870 6f72 7473 2074 6865 206d 616e 6461  xports the manda
+0002bf00: 746f 7279 2069 6e70 7574 2061 6e64 206f  tory input and o
+0002bf10: 7574 7075 7420 706c 7567 7320 666f 7220  utput plugs for 
+0002bf20: 2272 656e 616d 655f 3122 0a20 2020 2020  "rename_1".     
+0002bf30: 2020 2070 706c 5f65 6474 5f74 6162 2e63     ppl_edt_tab.c
+0002bf40: 7572 7265 6e74 5f6e 6f64 655f 6e61 6d65  urrent_node_name
+0002bf50: 203d 2022 7265 6e61 6d65 5f31 220a 2020   = "rename_1".  
+0002bf60: 2020 2020 2020 7070 6c5f 6564 745f 7461        ppl_edt_ta
+0002bf70: 622e 6578 706f 7274 5f75 6e63 6f6e 6e65  b.export_unconne
+0002bf80: 6374 6564 5f6d 616e 6461 746f 7279 5f69  cted_mandatory_i
+0002bf90: 6e70 7574 7328 290a 2020 2020 2020 2020  nputs().        
+0002bfa0: 7070 6c5f 6564 745f 7461 622e 6578 706f  ppl_edt_tab.expo
+0002bfb0: 7274 5f61 6c6c 5f75 6e63 6f6e 6e65 6374  rt_all_unconnect
+0002bfc0: 6564 5f6f 7574 7075 7473 2829 0a0a 2020  ed_outputs()..  
+0002bfd0: 2020 2020 2020 2320 5361 7665 7320 7468        # Saves th
+0002bfe0: 6520 7069 7065 6c69 6e65 2061 7320 7468  e pipeline as th
+0002bff0: 6520 7061 636b 6167 6520 2755 6e69 745f  e package 'Unit_
+0002c000: 7465 7374 5f70 6970 656c 696e 6527 2069  test_pipeline' i
+0002c010: 6e0a 2020 2020 2020 2020 2320 5573 6572  n.        # User
+0002c020: 5f70 726f 6365 7373 6573 0a20 2020 2020  _processes.     
+0002c030: 2020 2063 6f6e 6669 6720 3d20 436f 6e66     config = Conf
+0002c040: 6967 2863 6f6e 6669 675f 7061 7468 3d73  ig(config_path=s
+0002c050: 656c 662e 636f 6e66 6967 5f70 6174 6829  elf.config_path)
+0002c060: 0a20 2020 2020 2020 2066 696c 656e 616d  .        filenam
+0002c070: 6520 3d20 6f73 2e70 6174 682e 6a6f 696e  e = os.path.join
+0002c080: 280a 2020 2020 2020 2020 2020 2020 636f  (.            co
+0002c090: 6e66 6967 2e67 6574 5f6d 6961 5f70 6174  nfig.get_mia_pat
+0002c0a0: 6828 292c 0a20 2020 2020 2020 2020 2020  h(),.           
+0002c0b0: 2022 7072 6f63 6573 7365 7322 2c0a 2020   "processes",.  
+0002c0c0: 2020 2020 2020 2020 2020 2255 7365 725f            "User_
+0002c0d0: 7072 6f63 6573 7365 7322 2c0a 2020 2020  processes",.    
+0002c0e0: 2020 2020 2020 2020 2275 6e69 745f 7465          "unit_te
+0002c0f0: 7374 5f70 6970 656c 696e 652e 7079 222c  st_pipeline.py",
+0002c100: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+0002c110: 2020 2020 7361 7665 5f70 6970 656c 696e      save_pipelin
+0002c120: 6528 7070 6c2c 2066 696c 656e 616d 6529  e(ppl, filename)
+0002c130: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+0002c140: 696e 5f77 696e 646f 772e 7069 7065 6c69  in_window.pipeli
+0002c150: 6e65 5f6d 616e 6167 6572 2e75 7064 6174  ne_manager.updat
+0002c160: 6550 726f 6365 7373 4c69 6272 6172 7928  eProcessLibrary(
+0002c170: 6669 6c65 6e61 6d65 290a 0a20 2020 2020  filename)..     
+0002c180: 2020 2023 2043 6c65 616e 696e 6720 7468     # Cleaning th
+0002c190: 6520 7072 6f63 6573 7320 6c69 6272 6172  e process librar
+0002c1a0: 7920 696e 2070 6970 656c 696e 6520 6d61  y in pipeline ma
+0002c1b0: 6e61 6765 7220 7461 6220 2864 656c 6574  nager tab (delet
+0002c1c0: 696e 6720 7468 650a 2020 2020 2020 2020  ing the.        
+0002c1d0: 2320 7061 636b 6167 6520 6164 6465 6420  # package added 
+0002c1e0: 696e 2074 6869 7320 7465 7374 2c20 6f72  in this test, or
+0002c1f0: 206f 6c64 206f 6e65 2073 7469 6c6c 2065   old one still e
+0002c200: 7869 7374 696e 6729 0a20 2020 2020 2020  xisting).       
+0002c210: 2073 656c 662e 636c 6561 6e5f 7574 735f   self.clean_uts_
+0002c220: 7061 636b 6167 6573 2870 726f 635f 6c69  packages(proc_li
+0002c230: 625f 7669 6577 290a 0a20 2020 2064 6566  b_view)..    def
+0002c240: 2074 6573 745f 7061 636b 6167 655f 6c69   test_package_li
+0002c250: 6272 6172 795f 6469 616c 6f67 5f64 656c  brary_dialog_del
+0002c260: 5f70 6b67 2873 656c 6629 3a0a 2020 2020  _pkg(self):.    
+0002c270: 2020 2020 2222 2243 7265 6174 6573 2061      """Creates a
+0002c280: 206e 6577 2070 726f 6a65 6374 2066 6f6c   new project fol
+0002c290: 6465 722c 206f 7065 6e73 2074 6865 2070  der, opens the p
+0002c2a0: 726f 6365 7373 6573 206c 6962 7261 7279  rocesses library
+0002c2b0: 2061 6e64 0a20 2020 2020 2020 2064 656c   and.        del
+0002c2c0: 6574 6573 2061 2070 6163 6b61 6765 2e0a  etes a package..
+0002c2d0: 0a20 2020 2020 2020 202d 2054 6573 7473  .        - Tests
+0002c2e0: 3a20 5061 636b 6167 654c 6962 7261 7279  : PackageLibrary
+0002c2f0: 4469 616c 6f67 0a0a 2020 2020 2020 2020  Dialog..        
+0002c300: 2d20 4d6f 636b 733a 0a20 2020 2020 2020  - Mocks:.       
+0002c310: 2020 2020 202d 2051 4d65 7373 6167 6542       - QMessageB
+0002c320: 6f78 2e65 7865 630a 2020 2020 2020 2020  ox.exec.        
+0002c330: 2020 2020 2d20 514d 6573 7361 6765 426f      - QMessageBo
+0002c340: 782e 7175 6573 7469 6f6e 0a20 2020 2020  x.question.     
+0002c350: 2020 2022 2222 0a0a 2020 2020 2020 2020     """..        
+0002c360: 504b 4720 3d20 226e 6970 7970 652e 696e  PKG = "nipype.in
+0002c370: 7465 7266 6163 6573 2e44 6174 6147 7261  terfaces.DataGra
+0002c380: 6262 6572 220a 0a20 2020 2020 2020 2023  bber"..        #
+0002c390: 2043 7265 6174 6573 2061 206e 6577 2070   Creates a new p
+0002c3a0: 726f 6a65 6374 2066 6f6c 6465 7220 616e  roject folder an
+0002c3b0: 6420 7377 6974 6368 6573 2074 6f20 6974  d switches to it
+0002c3c0: 0a20 2020 2020 2020 206e 6577 5f70 726f  .        new_pro
+0002c3d0: 6a5f 7061 7468 203d 2073 656c 662e 6765  j_path = self.ge
+0002c3e0: 745f 6e65 775f 7465 7374 5f70 726f 6a65  t_new_test_proje
+0002c3f0: 6374 286c 6967 6874 3d54 7275 6529 0a20  ct(light=True). 
+0002c400: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
+0002c410: 5f77 696e 646f 772e 7377 6974 6368 5f70  _window.switch_p
+0002c420: 726f 6a65 6374 286e 6577 5f70 726f 6a5f  roject(new_proj_
+0002c430: 7061 7468 2c20 2274 6573 745f 6c69 6768  path, "test_ligh
+0002c440: 745f 7072 6f6a 6563 7422 290a 0a20 2020  t_project")..   
+0002c450: 2020 2020 2023 2053 6574 7320 7368 6f72       # Sets shor
+0002c460: 7463 7574 7320 666f 7220 6f62 6a65 6374  tcuts for object
+0002c470: 7320 7468 6174 2061 7265 206f 6674 656e  s that are often
+0002c480: 2075 7365 640a 2020 2020 2020 2020 7070   used.        pp
+0002c490: 6c5f 6d61 6e61 6765 7220 3d20 7365 6c66  l_manager = self
+0002c4a0: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 6970  .main_window.pip
+0002c4b0: 656c 696e 655f 6d61 6e61 6765 720a 2020  eline_manager.  
+0002c4c0: 2020 2020 2020 7070 6c5f 6564 745f 7461        ppl_edt_ta
+0002c4d0: 6273 203d 2070 706c 5f6d 616e 6167 6572  bs = ppl_manager
+0002c4e0: 2e70 6970 656c 696e 6545 6469 746f 7254  .pipelineEditorT
+0002c4f0: 6162 730a 2020 2020 2020 2020 7070 6c5f  abs.        ppl_
+0002c500: 6564 745f 7461 6220 3d20 7070 6c5f 6564  edt_tab = ppl_ed
+0002c510: 745f 7461 6273 2e67 6574 5f63 7572 7265  t_tabs.get_curre
+0002c520: 6e74 5f65 6469 746f 7228 290a 2020 2020  nt_editor().    
+0002c530: 2020 2020 7070 6c20 3d20 7070 6c5f 6564      ppl = ppl_ed
+0002c540: 745f 7461 6273 2e67 6574 5f63 7572 7265  t_tabs.get_curre
+0002c550: 6e74 5f70 6970 656c 696e 6528 290a 2020  nt_pipeline().  
+0002c560: 2020 2020 2020 7072 6f63 5f6c 6962 5f76        proc_lib_v
+0002c570: 6965 7720 3d20 7070 6c5f 6d61 6e61 6765  iew = ppl_manage
+0002c580: 722e 7072 6f63 6573 734c 6962 7261 7279  r.processLibrary
+0002c590: 2e70 726f 6365 7373 5f6c 6962 7261 7279  .process_library
+0002c5a0: 0a0a 2020 2020 2020 2020 2320 5461 6b65  ..        # Take
+0002c5b0: 7320 7468 6520 696e 6974 6961 6c20 7374  s the initial st
+0002c5c0: 6174 6520 6f66 206e 6970 7970 6520 7072  ate of nipype pr
+0002c5d0: 6f63 5f6c 6962 5f76 6965 7720 616e 6420  oc_lib_view and 
+0002c5e0: 6d61 6b65 7320 7375 7265 2074 6861 740a  makes sure that.
+0002c5f0: 2020 2020 2020 2020 2320 504b 4720 6973          # PKG is
+0002c600: 2061 6c72 6561 6479 2069 6e73 7461 6c6c   already install
+0002c610: 6564 0a0a 2020 2020 2020 2020 696e 6974  ed..        init
+0002c620: 5f73 7461 7465 203d 2073 656c 662e 7072  _state = self.pr
+0002c630: 6f63 6c69 6276 6965 775f 6e69 7079 7065  oclibview_nipype
+0002c640: 5f73 7461 7465 2870 726f 635f 6c69 625f  _state(proc_lib_
+0002c650: 7669 6577 290a 0a20 2020 2020 2020 2069  view)..        i
+0002c660: 6620 696e 6974 5f73 7461 7465 2021 3d20  f init_state != 
+0002c670: 2270 726f 6365 7373 5f65 6e61 626c 6564  "process_enabled
+0002c680: 223a 0a20 2020 2020 2020 2020 2020 2073  ":.            s
+0002c690: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+0002c6a0: 7061 636b 6167 655f 6c69 6272 6172 795f  package_library_
+0002c6b0: 706f 705f 7570 2829 0a20 2020 2020 2020  pop_up().       
+0002c6c0: 2020 2020 2070 6b67 5f6c 6962 5f77 696e       pkg_lib_win
+0002c6d0: 646f 7720 3d20 7365 6c66 2e6d 6169 6e5f  dow = self.main_
+0002c6e0: 7769 6e64 6f77 2e70 6f70 5f75 705f 7061  window.pop_up_pa
+0002c6f0: 636b 6167 655f 6c69 6272 6172 790a 2020  ckage_library.  
+0002c700: 2020 2020 2020 2020 2020 706b 675f 6c69            pkg_li
+0002c710: 625f 7769 6e64 6f77 2e6c 696e 655f 6564  b_window.line_ed
+0002c720: 6974 2e73 6574 5465 7874 2850 4b47 290a  it.setText(PKG).
+0002c730: 2020 2020 2020 2020 2020 2020 280a 2020              (.  
+0002c740: 2020 2020 2020 2020 2020 2020 2020 7070                pp
+0002c750: 6c5f 6d61 6e61 6765 722e 7072 6f63 6573  l_manager.proces
+0002c760: 734c 6962 7261 7279 2e70 726f 6365 7373  sLibrary.process
+0002c770: 5f6c 6962 7261 7279 2e70 6b67 5f6c 6962  _library.pkg_lib
+0002c780: 7261 7279 2e69 735f 7061 7468 0a20 2020  rary.is_path.   
+0002c790: 2020 2020 2020 2020 2029 203d 2046 616c           ) = Fal
+0002c7a0: 7365 0a20 2020 2020 2020 2020 2020 2023  se.            #
+0002c7b0: 2043 6c69 636b 7320 6f6e 2061 6464 2070   Clicks on add p
+0002c7c0: 6163 6b61 6765 0a20 2020 2020 2020 2020  ackage.         
+0002c7d0: 2020 2070 6b67 5f6c 6962 5f77 696e 646f     pkg_lib_windo
+0002c7e0: 772e 6c61 796f 7574 2829 2e63 6869 6c64  w.layout().child
+0002c7f0: 7265 6e28 295b 305d 2e6c 6179 6f75 7428  ren()[0].layout(
+0002c800: 292e 6368 696c 6472 656e 2829 5b0a 2020  ).children()[.  
+0002c810: 2020 2020 2020 2020 2020 2020 2020 330a                3.
+0002c820: 2020 2020 2020 2020 2020 2020 5d2e 6974              ].it
+0002c830: 656d 4174 2830 292e 7769 6467 6574 2829  emAt(0).widget()
+0002c840: 2e63 6c69 636b 6564 2e65 6d69 7428 290a  .clicked.emit().
+0002c850: 2020 2020 2020 2020 2020 2020 706b 675f              pkg_
+0002c860: 6c69 625f 7769 6e64 6f77 2e6f 6b5f 636c  lib_window.ok_cl
+0002c870: 6963 6b65 6428 290a 0a20 2020 2020 2020  icked()..       
+0002c880: 2023 204f 7065 6e73 2074 6865 2070 6163   # Opens the pac
+0002c890: 6b61 6765 206c 6962 7261 7279 2070 6f70  kage library pop
+0002c8a0: 2d75 700a 2020 2020 2020 2020 7365 6c66  -up.        self
+0002c8b0: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 6163  .main_window.pac
+0002c8c0: 6b61 6765 5f6c 6962 7261 7279 5f70 6f70  kage_library_pop
+0002c8d0: 5f75 7028 290a 2020 2020 2020 2020 706b  _up().        pk
+0002c8e0: 675f 6c69 625f 7769 6e64 6f77 203d 2073  g_lib_window = s
+0002c8f0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+0002c900: 706f 705f 7570 5f70 6163 6b61 6765 5f6c  pop_up_package_l
+0002c910: 6962 7261 7279 0a0a 2020 2020 2020 2020  ibrary..        
+0002c920: 2320 5472 6965 7320 746f 2064 656c 6574  # Tries to delet
+0002c930: 6520 504b 470a 2020 2020 2020 2020 706b  e PKG.        pk
+0002c940: 675f 6c69 625f 7769 6e64 6f77 2e6c 696e  g_lib_window.lin
+0002c950: 655f 6564 6974 2e73 6574 5465 7874 2850  e_edit.setText(P
+0002c960: 4b47 290a 2020 2020 2020 2020 706b 675f  KG).        pkg_
+0002c970: 6c69 625f 7769 6e64 6f77 2e6c 6179 6f75  lib_window.layou
+0002c980: 7428 292e 6368 696c 6472 656e 2829 5b30  t().children()[0
+0002c990: 5d2e 6c61 796f 7574 2829 2e63 6869 6c64  ].layout().child
+0002c9a0: 7265 6e28 295b 335d 2e69 7465 6d41 7428  ren()[3].itemAt(
+0002c9b0: 0a20 2020 2020 2020 2020 2020 2032 0a20  .            2. 
+0002c9c0: 2020 2020 2020 2029 2e77 6964 6765 7428         ).widget(
+0002c9d0: 292e 636c 6963 6b65 642e 656d 6974 2829  ).clicked.emit()
+0002c9e0: 2020 2320 436c 6963 6b73 206f 6e20 6465    # Clicks on de
+0002c9f0: 6c65 7465 2070 6163 6b61 6765 0a0a 2020  lete package..  
+0002ca00: 2020 2020 2020 2320 5265 7365 7473 2074        # Resets t
+0002ca10: 6865 2070 7265 7669 6f75 7320 6163 7469  he previous acti
+0002ca20: 6f6e 0a20 2020 2020 2020 2070 6b67 5f6c  on.        pkg_l
+0002ca30: 6962 5f77 696e 646f 772e 6465 6c5f 6c69  ib_window.del_li
+0002ca40: 7374 2e73 656c 6563 7441 6c6c 2829 0a20  st.selectAll(). 
+0002ca50: 2020 2020 2020 2028 0a20 2020 2020 2020         (.       
+0002ca60: 2020 2020 2070 6b67 5f6c 6962 5f77 696e       pkg_lib_win
+0002ca70: 646f 772e 6c61 796f 7574 2829 0a20 2020  dow.layout().   
+0002ca80: 2020 2020 2020 2020 202e 6368 696c 6472           .childr
+0002ca90: 656e 2829 5b30 5d0a 2020 2020 2020 2020  en()[0].        
+0002caa0: 2020 2020 2e6c 6179 6f75 7428 290a 2020      .layout().  
+0002cab0: 2020 2020 2020 2020 2020 2e69 7465 6d41            .itemA
+0002cac0: 7428 3132 290a 2020 2020 2020 2020 2020  t(12).          
+0002cad0: 2020 2e77 6964 6765 7428 290a 2020 2020    .widget().    
+0002cae0: 2020 2020 2020 2020 2e6c 6179 6f75 7428          .layout(
+0002caf0: 290a 2020 2020 2020 2020 2020 2020 2e69  ).            .i
+0002cb00: 7465 6d41 7428 3129 0a20 2020 2020 2020  temAt(1).       
+0002cb10: 2020 2020 202e 7769 6467 6574 2829 0a20       .widget(). 
+0002cb20: 2020 2020 2020 2020 2020 202e 636c 6963             .clic
+0002cb30: 6b65 642e 656d 6974 2829 0a20 2020 2020  ked.emit().     
+0002cb40: 2020 2029 2020 2320 636c 6963 6b73 206f     )  # clicks o
+0002cb50: 6e20 5265 7365 740a 0a20 2020 2020 2020  n Reset..       
+0002cb60: 2023 2054 7269 6573 2074 6f20 6465 6c65   # Tries to dele
+0002cb70: 7465 2061 6761 696e 2050 4b47 0a20 2020  te again PKG.   
+0002cb80: 2020 2020 2070 6b67 5f6c 6962 5f77 696e       pkg_lib_win
+0002cb90: 646f 772e 6c61 796f 7574 2829 2e63 6869  dow.layout().chi
+0002cba0: 6c64 7265 6e28 295b 305d 2e6c 6179 6f75  ldren()[0].layou
+0002cbb0: 7428 292e 6368 696c 6472 656e 2829 5b33  t().children()[3
+0002cbc0: 5d2e 6974 656d 4174 280a 2020 2020 2020  ].itemAt(.      
+0002cbd0: 2020 2020 2020 320a 2020 2020 2020 2020        2.        
+0002cbe0: 292e 7769 6467 6574 2829 2e63 6c69 636b  ).widget().click
+0002cbf0: 6564 2e65 6d69 7428 2920 2023 2043 6c69  ed.emit()  # Cli
+0002cc00: 636b 7320 6f6e 2064 656c 6574 6520 7061  cks on delete pa
+0002cc10: 636b 6167 650a 0a20 2020 2020 2020 2023  ckage..        #
+0002cc20: 2043 6c6f 7365 2074 6865 2070 6163 6b61   Close the packa
+0002cc30: 6765 206c 6962 7261 7279 2070 6f70 2d75  ge library pop-u
+0002cc40: 700a 2020 2020 2020 2020 514d 6573 7361  p.        QMessa
+0002cc50: 6765 426f 782e 7175 6573 7469 6f6e 203d  geBox.question =
+0002cc60: 204d 6f63 6b28 7265 7475 726e 5f76 616c   Mock(return_val
+0002cc70: 7565 3d51 4d65 7373 6167 6542 6f78 2e4e  ue=QMessageBox.N
+0002cc80: 6f29 0a20 2020 2020 2020 2070 6b67 5f6c  o).        pkg_l
+0002cc90: 6962 5f77 696e 646f 772e 6f6b 5f63 6c69  ib_window.ok_cli
+0002cca0: 636b 6564 2829 2020 2320 446f 206e 6f74  cked()  # Do not
+0002ccb0: 2061 7070 6c79 2074 6865 206d 6f64 6966   apply the modif
+0002ccc0: 6963 6174 696f 6e0a 0a20 2020 2020 2020  ication..       
+0002ccd0: 2023 204f 7065 6e73 2061 6761 696e 2074   # Opens again t
+0002cce0: 6865 2070 6163 6b61 6765 206c 6962 7261  he package libra
+0002ccf0: 7279 2070 6f70 2d75 700a 2020 2020 2020  ry pop-up.      
+0002cd00: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
+0002cd10: 6f77 2e70 6163 6b61 6765 5f6c 6962 7261  ow.package_libra
+0002cd20: 7279 5f70 6f70 5f75 7028 290a 2020 2020  ry_pop_up().    
+0002cd30: 2020 2020 706b 675f 6c69 625f 7769 6e64      pkg_lib_wind
+0002cd40: 6f77 203d 2073 656c 662e 6d61 696e 5f77  ow = self.main_w
+0002cd50: 696e 646f 772e 706f 705f 7570 5f70 6163  indow.pop_up_pac
+0002cd60: 6b61 6765 5f6c 6962 7261 7279 0a0a 2020  kage_library..  
+0002cd70: 2020 2020 2020 2320 5472 6965 7320 746f        # Tries to
+0002cd80: 2064 656c 6574 6520 504b 470a 2020 2020   delete PKG.    
+0002cd90: 2020 2020 706b 675f 6c69 625f 7769 6e64      pkg_lib_wind
+0002cda0: 6f77 2e6c 696e 655f 6564 6974 2e73 6574  ow.line_edit.set
+0002cdb0: 5465 7874 2850 4b47 290a 2020 2020 2020  Text(PKG).      
+0002cdc0: 2020 706b 675f 6c69 625f 7769 6e64 6f77    pkg_lib_window
+0002cdd0: 2e6c 6179 6f75 7428 292e 6368 696c 6472  .layout().childr
+0002cde0: 656e 2829 5b30 5d2e 6c61 796f 7574 2829  en()[0].layout()
+0002cdf0: 2e63 6869 6c64 7265 6e28 295b 335d 2e69  .children()[3].i
+0002ce00: 7465 6d41 7428 0a20 2020 2020 2020 2020  temAt(.         
+0002ce10: 2020 2032 0a20 2020 2020 2020 2029 2e77     2.        ).w
+0002ce20: 6964 6765 7428 292e 636c 6963 6b65 642e  idget().clicked.
+0002ce30: 656d 6974 2829 2020 2320 436c 6963 6b73  emit()  # Clicks
+0002ce40: 206f 6e20 6465 6c65 7465 2070 6163 6b61   on delete packa
+0002ce50: 6765 0a0a 2020 2020 2020 2020 2320 436c  ge..        # Cl
+0002ce60: 6f73 6520 7468 6520 7061 636b 6167 6520  ose the package 
+0002ce70: 6c69 6272 6172 7920 706f 702d 7570 2c20  library pop-up, 
+0002ce80: 6170 706c 7920 6368 616e 6765 7320 666f  apply changes fo
+0002ce90: 7220 6120 7061 636b 6167 6520 7768 6963  r a package whic
+0002cea0: 680a 2020 2020 2020 2020 2320 6973 2070  h.        # is p
+0002ceb0: 6172 7420 6f66 206e 6970 7970 652c 2074  art of nipype, t
+0002cec0: 6865 2070 6163 6b61 6765 2069 7320 6f6e  he package is on
+0002ced0: 6c79 2072 656d 6f76 6564 2e0a 2020 2020  ly removed..    
+0002cee0: 2020 2020 514d 6573 7361 6765 426f 782e      QMessageBox.
+0002cef0: 7175 6573 7469 6f6e 203d 204d 6f63 6b28  question = Mock(
+0002cf00: 7265 7475 726e 5f76 616c 7565 3d51 4d65  return_value=QMe
+0002cf10: 7373 6167 6542 6f78 2e59 6573 290a 2020  ssageBox.Yes).  
+0002cf20: 2020 2020 2020 706b 675f 6c69 625f 7769        pkg_lib_wi
+0002cf30: 6e64 6f77 2e6f 6b5f 636c 6963 6b65 6428  ndow.ok_clicked(
+0002cf40: 290a 2020 2020 2020 2020 706b 675f 6c69  ).        pkg_li
+0002cf50: 625f 7769 6e64 6f77 2e6d 7367 2e63 6c6f  b_window.msg.clo
+0002cf60: 7365 2829 2020 2320 436c 6f73 6573 2074  se()  # Closes t
+0002cf70: 6865 2077 6172 6e69 6e67 206d 6573 7361  he warning messa
+0002cf80: 6765 0a0a 2020 2020 2020 2020 2320 4164  ge..        # Ad
+0002cf90: 6420 6167 6169 6e20 504b 470a 2020 2020  d again PKG.    
+0002cfa0: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
+0002cfb0: 6e64 6f77 2e70 6163 6b61 6765 5f6c 6962  ndow.package_lib
+0002cfc0: 7261 7279 5f70 6f70 5f75 7028 290a 2020  rary_pop_up().  
+0002cfd0: 2020 2020 2020 706b 675f 6c69 625f 7769        pkg_lib_wi
+0002cfe0: 6e64 6f77 203d 2073 656c 662e 6d61 696e  ndow = self.main
+0002cff0: 5f77 696e 646f 772e 706f 705f 7570 5f70  _window.pop_up_p
+0002d000: 6163 6b61 6765 5f6c 6962 7261 7279 0a20  ackage_library. 
+0002d010: 2020 2020 2020 2070 6b67 5f6c 6962 5f77         pkg_lib_w
+0002d020: 696e 646f 772e 6c69 6e65 5f65 6469 742e  indow.line_edit.
+0002d030: 7365 7454 6578 7428 504b 4729 0a20 2020  setText(PKG).   
+0002d040: 2020 2020 2070 6b67 5f6c 6962 5f77 696e       pkg_lib_win
+0002d050: 646f 772e 6c61 796f 7574 2829 2e63 6869  dow.layout().chi
+0002d060: 6c64 7265 6e28 295b 305d 2e6c 6179 6f75  ldren()[0].layou
+0002d070: 7428 292e 6368 696c 6472 656e 2829 5b33  t().children()[3
+0002d080: 5d2e 6974 656d 4174 280a 2020 2020 2020  ].itemAt(.      
+0002d090: 2020 2020 2020 300a 2020 2020 2020 2020        0.        
+0002d0a0: 292e 7769 6467 6574 2829 2e63 6c69 636b  ).widget().click
+0002d0b0: 6564 2e65 6d69 7428 2920 2023 2043 6c69  ed.emit()  # Cli
+0002d0c0: 636b 7320 6f6e 2061 6464 2070 6163 6b61  cks on add packa
+0002d0d0: 6765 0a20 2020 2020 2020 2070 6b67 5f6c  ge.        pkg_l
+0002d0e0: 6962 5f77 696e 646f 772e 6f6b 5f63 6c69  ib_window.ok_cli
+0002d0f0: 636b 6564 2829 0a0a 2020 2020 2020 2020  cked()..        
+0002d100: 2320 5377 6974 6368 6573 2074 6f20 7468  # Switches to th
+0002d110: 6520 7069 7065 6c69 6e65 206d 616e 6167  e pipeline manag
+0002d120: 6572 2074 6162 0a20 2020 2020 2020 2073  er tab.        s
+0002d130: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+0002d140: 7461 6273 2e73 6574 4375 7272 656e 7449  tabs.setCurrentI
+0002d150: 6e64 6578 2832 290a 0a20 2020 2020 2020  ndex(2)..       
+0002d160: 2023 2053 656c 6563 7473 2074 6865 2027   # Selects the '
+0002d170: 4461 7461 4772 6162 6265 7227 2070 6163  DataGrabber' pac
+0002d180: 6b61 6765 2069 6e20 5069 7065 6c69 6e65  kage in Pipeline
+0002d190: 204d 616e 6167 6572 2074 6162 0a20 2020   Manager tab.   
+0002d1a0: 2020 2020 2070 6b67 5f69 6e64 6578 203d       pkg_index =
+0002d1b0: 2073 656c 662e 6669 6e64 5f69 7465 6d5f   self.find_item_
+0002d1c0: 6279 5f64 6174 6128 7072 6f63 5f6c 6962  by_data(proc_lib
+0002d1d0: 5f76 6965 772c 2022 4461 7461 4772 6162  _view, "DataGrab
+0002d1e0: 6265 7222 290a 2020 2020 2020 2020 280a  ber").        (.
+0002d1f0: 2020 2020 2020 2020 2020 2020 7072 6f63              proc
+0002d200: 5f6c 6962 5f76 6965 772e 7365 6c65 6374  _lib_view.select
+0002d210: 696f 6e4d 6f64 656c 2829 2e73 656c 6563  ionModel().selec
+0002d220: 7428 0a20 2020 2020 2020 2020 2020 2020  t(.             
+0002d230: 2020 2070 6b67 5f69 6e64 6578 2c20 5149     pkg_index, QI
+0002d240: 7465 6d53 656c 6563 7469 6f6e 4d6f 6465  temSelectionMode
+0002d250: 6c2e 5365 6c65 6374 4375 7272 656e 740a  l.SelectCurrent.
+0002d260: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0002d270: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+0002d280: 2023 2054 7269 6573 2074 6f20 6465 6c65   # Tries to dele
+0002d290: 7465 2061 2070 6163 6b61 6765 2074 6861  te a package tha
+0002d2a0: 7420 6361 6e6e 6f74 2062 6520 6465 6c65  t cannot be dele
+0002d2b0: 7465 6420 2869 7320 7061 7274 206f 6620  ted (is part of 
+0002d2c0: 6e69 7079 7065 292c 0a20 2020 2020 2020  nipype),.       
+0002d2d0: 2023 2073 656c 6563 7469 6e67 2069 7420   # selecting it 
+0002d2e0: 616e 6420 7072 6573 7369 6e67 2074 6865  and pressing the
+0002d2f0: 2064 656c 206b 6579 0a20 2020 2020 2020   del key.       
+0002d300: 2065 7665 6e74 203d 204d 6f63 6b28 290a   event = Mock().
+0002d310: 2020 2020 2020 2020 6576 656e 742e 6b65          event.ke
+0002d320: 7920 3d20 6c61 6d62 6461 3a20 5174 2e4b  y = lambda: Qt.K
+0002d330: 6579 5f44 656c 6574 650a 2020 2020 2020  ey_Delete.      
+0002d340: 2020 7072 6f63 5f6c 6962 5f76 6965 772e    proc_lib_view.
+0002d350: 6b65 7950 7265 7373 4576 656e 7428 6576  keyPressEvent(ev
+0002d360: 656e 7429 0a20 2020 2020 2020 2070 726f  ent).        pro
+0002d370: 635f 6c69 625f 7669 6577 2e70 6b67 5f6c  c_lib_view.pkg_l
+0002d380: 6962 7261 7279 2e6d 7367 2e63 6c6f 7365  ibrary.msg.close
+0002d390: 2829 0a0a 2020 2020 2020 2020 2320 5472  ()..        # Tr
+0002d3a0: 6965 7320 746f 2064 656c 6574 6520 6120  ies to delete a 
+0002d3b0: 7061 636b 6167 6520 7468 6174 2063 616e  package that can
+0002d3c0: 6e6f 7420 6265 2064 656c 6574 6564 2c20  not be deleted, 
+0002d3d0: 6361 6c6c 696e 6720 7468 650a 2020 2020  calling the.    
+0002d3e0: 2020 2020 2320 6675 6e63 7469 6f6e 0a20      # function. 
+0002d3f0: 2020 2020 2020 2070 6b67 5f6c 6962 5f77         pkg_lib_w
+0002d400: 696e 646f 772e 6465 6c65 7465 5f70 6163  indow.delete_pac
+0002d410: 6b61 6765 2829 0a20 2020 2020 2020 2070  kage().        p
+0002d420: 6b67 5f6c 6962 5f77 696e 646f 772e 6d73  kg_lib_window.ms
+0002d430: 672e 636c 6f73 6528 2920 2023 2043 6c6f  g.close()  # Clo
+0002d440: 7365 7320 7468 6520 7761 726e 696e 6720  ses the warning 
+0002d450: 6d65 7373 6167 650a 0a20 2020 2020 2020  message..       
+0002d460: 2023 2054 7269 6573 2074 6f20 6465 6c65   # Tries to dele
+0002d470: 7465 2061 2070 6163 6b61 6765 2063 6f72  te a package cor
+0002d480: 7265 7370 6f6e 6469 6e67 2074 6f20 616e  responding to an
+0002d490: 2065 6d70 7479 2073 7472 696e 670a 2020   empty string.  
+0002d4a0: 2020 2020 2020 706b 675f 6c69 625f 7769        pkg_lib_wi
+0002d4b0: 6e64 6f77 2e6c 696e 655f 6564 6974 2e73  ndow.line_edit.s
+0002d4c0: 6574 5465 7874 2822 2229 0a20 2020 2020  etText("").     
+0002d4d0: 2020 2070 6b67 5f6c 6962 5f77 696e 646f     pkg_lib_windo
+0002d4e0: 772e 6465 6c65 7465 5f70 6163 6b61 6765  w.delete_package
+0002d4f0: 2829 0a20 2020 2020 2020 2070 6b67 5f6c  ().        pkg_l
+0002d500: 6962 5f77 696e 646f 772e 6d73 672e 636c  ib_window.msg.cl
+0002d510: 6f73 6528 2920 2023 2043 6c6f 7365 7320  ose()  # Closes 
+0002d520: 7468 6520 7761 726e 696e 6720 6d65 7373  the warning mess
+0002d530: 6167 650a 0a20 2020 2020 2020 2023 2041  age..        # A
+0002d540: 6464 7320 7468 6520 7072 6f63 6573 7365  dds the processe
+0002d550: 7320 5265 6e61 6d65 2c20 6372 6561 7465  s Rename, create
+0002d560: 7320 7468 6520 2272 656e 616d 655f 3122  s the "rename_1"
+0002d570: 206e 6f64 650a 2020 2020 2020 2020 7070   node.        pp
+0002d580: 6c5f 6564 745f 7461 622e 636c 6963 6b5f  l_edt_tab.click_
+0002d590: 706f 7320 3d20 5150 6f69 6e74 2834 3530  pos = QPoint(450
+0002d5a0: 2c20 3530 3029 0a20 2020 2020 2020 2070  , 500).        p
+0002d5b0: 706c 5f65 6474 5f74 6162 2e61 6464 5f6e  pl_edt_tab.add_n
+0002d5c0: 616d 6564 5f70 726f 6365 7373 2852 656e  amed_process(Ren
+0002d5d0: 616d 6529 0a0a 2020 2020 2020 2020 2320  ame)..        # 
+0002d5e0: 4578 706f 7274 7320 7468 6520 6d61 6e64  Exports the mand
+0002d5f0: 6174 6f72 7920 696e 7075 7420 616e 6420  atory input and 
+0002d600: 6f75 7470 7574 2070 6c75 6773 2066 6f72  output plugs for
+0002d610: 2022 7265 6e61 6d65 5f31 220a 2020 2020   "rename_1".    
+0002d620: 2020 2020 7070 6c5f 6564 745f 7461 622e      ppl_edt_tab.
+0002d630: 6375 7272 656e 745f 6e6f 6465 5f6e 616d  current_node_nam
+0002d640: 6520 3d20 2272 656e 616d 655f 3122 0a20  e = "rename_1". 
+0002d650: 2020 2020 2020 2070 706c 5f65 6474 5f74         ppl_edt_t
+0002d660: 6162 2e65 7870 6f72 745f 756e 636f 6e6e  ab.export_unconn
+0002d670: 6563 7465 645f 6d61 6e64 6174 6f72 795f  ected_mandatory_
+0002d680: 696e 7075 7473 2829 0a20 2020 2020 2020  inputs().       
+0002d690: 2070 706c 5f65 6474 5f74 6162 2e65 7870   ppl_edt_tab.exp
+0002d6a0: 6f72 745f 616c 6c5f 756e 636f 6e6e 6563  ort_all_unconnec
+0002d6b0: 7465 645f 6f75 7470 7574 7328 290a 0a20  ted_outputs().. 
+0002d6c0: 2020 2020 2020 2023 2053 6176 6573 2074         # Saves t
+0002d6d0: 6865 2070 6970 656c 696e 6520 6173 2074  he pipeline as t
+0002d6e0: 6865 2070 6163 6b61 6765 2027 556e 6974  he package 'Unit
+0002d6f0: 5f74 6573 745f 7069 7065 6c69 6e65 2720  _test_pipeline' 
+0002d700: 696e 0a20 2020 2020 2020 2023 2055 7365  in.        # Use
+0002d710: 725f 7072 6f63 6573 7365 730a 2020 2020  r_processes.    
+0002d720: 2020 2020 636f 6e66 6967 203d 2043 6f6e      config = Con
+0002d730: 6669 6728 636f 6e66 6967 5f70 6174 683d  fig(config_path=
+0002d740: 7365 6c66 2e63 6f6e 6669 675f 7061 7468  self.config_path
+0002d750: 290a 2020 2020 2020 2020 6669 6c65 6e61  ).        filena
+0002d760: 6d65 203d 206f 732e 7061 7468 2e6a 6f69  me = os.path.joi
+0002d770: 6e28 0a20 2020 2020 2020 2020 2020 2063  n(.            c
+0002d780: 6f6e 6669 672e 6765 745f 6d69 615f 7061  onfig.get_mia_pa
+0002d790: 7468 2829 2c0a 2020 2020 2020 2020 2020  th(),.          
+0002d7a0: 2020 2270 726f 6365 7373 6573 222c 0a20    "processes",. 
+0002d7b0: 2020 2020 2020 2020 2020 2022 5573 6572             "User
+0002d7c0: 5f70 726f 6365 7373 6573 222c 0a20 2020  _processes",.   
+0002d7d0: 2020 2020 2020 2020 2022 756e 6974 5f74           "unit_t
+0002d7e0: 6573 745f 7069 7065 6c69 6e65 2e70 7922  est_pipeline.py"
+0002d7f0: 2c0a 2020 2020 2020 2020 290a 2020 2020  ,.        ).    
+0002d800: 2020 2020 7361 7665 5f70 6970 656c 696e      save_pipelin
+0002d810: 6528 7070 6c2c 2066 696c 656e 616d 6529  e(ppl, filename)
+0002d820: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+0002d830: 696e 5f77 696e 646f 772e 7069 7065 6c69  in_window.pipeli
+0002d840: 6e65 5f6d 616e 6167 6572 2e75 7064 6174  ne_manager.updat
+0002d850: 6550 726f 6365 7373 4c69 6272 6172 7928  eProcessLibrary(
+0002d860: 6669 6c65 6e61 6d65 290a 0a20 2020 2020  filename)..     
+0002d870: 2020 2023 204d 616b 6573 2061 206d 6f63     # Makes a moc
+0002d880: 6b65 6420 7072 6f63 6573 7320 666f 6c64  ked process fold
+0002d890: 6572 2022 4d6f 636b 5f70 726f 6365 7373  er "Mock_process
+0002d8a0: 2220 696e 2074 6865 2074 656d 706f 7261  " in the tempora
+0002d8b0: 7279 0a20 2020 2020 2020 2023 2070 726f  ry.        # pro
+0002d8c0: 6a65 6374 2070 6174 680a 2020 2020 2020  ject path.      
+0002d8d0: 2020 6d6f 636b 5f70 726f 635f 666c 6472    mock_proc_fldr
+0002d8e0: 203d 206f 732e 7061 7468 2e6a 6f69 6e28   = os.path.join(
+0002d8f0: 0a20 2020 2020 2020 2020 2020 206e 6577  .            new
+0002d900: 5f70 726f 6a5f 7061 7468 2c20 2270 726f  _proj_path, "pro
+0002d910: 6365 7373 6573 222c 2022 5554 735f 7072  cesses", "UTs_pr
+0002d920: 6f63 6573 7365 7322 0a20 2020 2020 2020  ocesses".       
+0002d930: 2029 0a20 2020 2020 2020 206f 732e 6d61   ).        os.ma
+0002d940: 6b65 6469 7273 286d 6f63 6b5f 7072 6f63  kedirs(mock_proc
+0002d950: 5f66 6c64 722c 2065 7869 7374 5f6f 6b3d  _fldr, exist_ok=
+0002d960: 5472 7565 290a 0a20 2020 2020 2020 2069  True)..        i
+0002d970: 6620 6f73 2e70 6174 682e 6578 6973 7473  f os.path.exists
+0002d980: 280a 2020 2020 2020 2020 2020 2020 6f73  (.            os
+0002d990: 2e70 6174 682e 6a6f 696e 280a 2020 2020  .path.join(.    
+0002d9a0: 2020 2020 2020 2020 2020 2020 636f 6e66              conf
+0002d9b0: 6967 2e67 6574 5f6d 6961 5f70 6174 6828  ig.get_mia_path(
+0002d9c0: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
+0002d9d0: 2020 2022 7072 6f63 6573 7365 7322 2c0a     "processes",.
+0002d9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002d9f0: 2255 7365 725f 7072 6f63 6573 7365 7322  "User_processes"
+0002da00: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0002da10: 2020 2275 6e69 745f 7465 7374 5f70 6970    "unit_test_pip
+0002da20: 656c 696e 652e 7079 222c 0a20 2020 2020  eline.py",.     
+0002da30: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0002da40: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
+0002da50: 7368 7574 696c 2e63 6f70 7928 0a20 2020  shutil.copy(.   
+0002da60: 2020 2020 2020 2020 2020 2020 206f 732e               os.
+0002da70: 7061 7468 2e6a 6f69 6e28 0a20 2020 2020  path.join(.     
+0002da80: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0002da90: 6f6e 6669 672e 6765 745f 6d69 615f 7061  onfig.get_mia_pa
+0002daa0: 7468 2829 2c0a 2020 2020 2020 2020 2020  th(),.          
+0002dab0: 2020 2020 2020 2020 2020 2270 726f 6365            "proce
+0002dac0: 7373 6573 222c 0a20 2020 2020 2020 2020  sses",.         
+0002dad0: 2020 2020 2020 2020 2020 2022 5573 6572             "User
+0002dae0: 5f70 726f 6365 7373 6573 222c 0a20 2020  _processes",.   
 0002daf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0002db00: 2020 2063 6f6e 6669 672e 6765 745f 6d69     config.get_mi
-0002db10: 615f 7061 7468 2829 2c0a 2020 2020 2020  a_path(),.      
-0002db20: 2020 2020 2020 2020 2020 2020 2020 2270                "p
-0002db30: 726f 6365 7373 6573 222c 0a20 2020 2020  rocesses",.     
-0002db40: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0002db50: 5573 6572 5f70 726f 6365 7373 6573 222c  User_processes",
-0002db60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002db70: 2020 2020 2022 756e 6974 5f74 6573 745f       "unit_test_
-0002db80: 7069 7065 6c69 6e65 2e70 7922 2c0a 2020  pipeline.py",.  
-0002db90: 2020 2020 2020 2020 2020 2020 2020 292c                ),
-0002dba0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0002dbb0: 206f 732e 7061 7468 2e6a 6f69 6e28 6d6f   os.path.join(mo
-0002dbc0: 636b 5f70 726f 635f 666c 6472 2c20 2275  ck_proc_fldr, "u
-0002dbd0: 6e69 745f 7465 7374 5f32 2e70 7922 292c  nit_test_2.py"),
-0002dbe0: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
-0002dbf0: 2020 2020 2020 2020 2020 2020 7769 7468              with
-0002dc00: 206f 7065 6e28 0a20 2020 2020 2020 2020   open(.         
-0002dc10: 2020 2020 2020 206f 732e 7061 7468 2e6a         os.path.j
-0002dc20: 6f69 6e28 6d6f 636b 5f70 726f 635f 666c  oin(mock_proc_fl
-0002dc30: 6472 2c20 2275 6e69 745f 7465 7374 5f32  dr, "unit_test_2
-0002dc40: 2e70 7922 292c 2022 7222 0a20 2020 2020  .py"), "r".     
-0002dc50: 2020 2020 2020 2029 2061 7320 6669 6c65         ) as file
-0002dc60: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0002dc70: 2020 6669 6c65 6461 7461 203d 2066 696c    filedata = fil
-0002dc80: 652e 7265 6164 2829 0a20 2020 2020 2020  e.read().       
-0002dc90: 2020 2020 2020 2020 2066 696c 6564 6174           filedat
-0002dca0: 6120 3d20 6669 6c65 6461 7461 2e72 6570  a = filedata.rep
-0002dcb0: 6c61 6365 280a 2020 2020 2020 2020 2020  lace(.          
-0002dcc0: 2020 2020 2020 2020 2020 2255 6e69 745f            "Unit_
-0002dcd0: 7465 7374 5f70 6970 656c 696e 6522 2c20  test_pipeline", 
-0002dce0: 2255 6e69 745f 7465 7374 5f32 220a 2020  "Unit_test_2".  
-0002dcf0: 2020 2020 2020 2020 2020 2020 2020 290a                ).
-0002dd00: 0a20 2020 2020 2020 2020 2020 2077 6974  .            wit
-0002dd10: 6820 6f70 656e 280a 2020 2020 2020 2020  h open(.        
-0002dd20: 2020 2020 2020 2020 6f73 2e70 6174 682e          os.path.
-0002dd30: 6a6f 696e 286d 6f63 6b5f 7072 6f63 5f66  join(mock_proc_f
-0002dd40: 6c64 722c 2022 756e 6974 5f74 6573 745f  ldr, "unit_test_
-0002dd50: 322e 7079 2229 2c20 2277 220a 2020 2020  2.py"), "w".    
-0002dd60: 2020 2020 2020 2020 2920 6173 2066 696c          ) as fil
-0002dd70: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0002dd80: 2020 2066 696c 652e 7772 6974 6528 6669     file.write(fi
-0002dd90: 6c65 6461 7461 290a 0a20 2020 2020 2020  ledata)..       
-0002dda0: 2020 2020 2069 6e69 745f 6669 6c65 203d       init_file =
-0002ddb0: 206f 7065 6e28 6f73 2e70 6174 682e 6a6f   open(os.path.jo
-0002ddc0: 696e 286d 6f63 6b5f 7072 6f63 5f66 6c64  in(mock_proc_fld
-0002ddd0: 722c 2022 5f5f 696e 6974 5f5f 2e70 7922  r, "__init__.py"
-0002dde0: 292c 2022 7722 290a 2020 2020 2020 2020  ), "w").        
-0002ddf0: 2020 2020 696e 6974 5f66 696c 652e 7772      init_file.wr
-0002de00: 6974 6528 2266 726f 6d20 2e75 6e69 745f  ite("from .unit_
-0002de10: 7465 7374 5f32 2069 6d70 6f72 7420 2220  test_2 import " 
-0002de20: 2255 6e69 745f 7465 7374 5f32 2229 0a20  "Unit_test_2"). 
-0002de30: 2020 2020 2020 2020 2020 2069 6e69 745f             init_
-0002de40: 6669 6c65 2e63 6c6f 7365 2829 0a0a 2020  file.close()..  
-0002de50: 2020 2020 2020 2320 496d 706f 7274 7320        # Imports 
-0002de60: 7468 6520 5554 735f 7072 6f63 6573 7365  the UTs_processe
-0002de70: 7320 7072 6f63 6573 7365 7320 666f 6c64  s processes fold
-0002de80: 6572 2061 7320 6120 7061 636b 6167 650a  er as a package.
-0002de90: 2020 2020 2020 2020 706b 675f 6c69 625f          pkg_lib_
-0002dea0: 7769 6e64 6f77 2e69 6e73 7461 6c6c 5f70  window.install_p
-0002deb0: 726f 6365 7373 6573 5f70 6f70 5f75 7028  rocesses_pop_up(
-0002dec0: 290a 2020 2020 2020 2020 706b 675f 6c69  ).        pkg_li
-0002ded0: 625f 7769 6e64 6f77 2e70 6f70 5f75 705f  b_window.pop_up_
-0002dee0: 696e 7374 616c 6c5f 7072 6f63 6573 7365  install_processe
-0002def0: 732e 7061 7468 5f65 6469 742e 7365 7454  s.path_edit.setT
-0002df00: 6578 7428 0a20 2020 2020 2020 2020 2020  ext(.           
-0002df10: 206d 6f63 6b5f 7072 6f63 5f66 6c64 720a   mock_proc_fldr.
-0002df20: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0002df30: 2020 514d 6573 7361 6765 426f 782e 6578    QMessageBox.ex
-0002df40: 6563 203d 206c 616d 6264 6120 783a 2051  ec = lambda x: Q
-0002df50: 4d65 7373 6167 6542 6f78 2e4f 6b0a 2020  MessageBox.Ok.  
-0002df60: 2020 2020 2020 280a 2020 2020 2020 2020        (.        
-0002df70: 2020 2020 706b 675f 6c69 625f 7769 6e64      pkg_lib_wind
-0002df80: 6f77 2e70 6f70 5f75 705f 696e 7374 616c  ow.pop_up_instal
-0002df90: 6c5f 7072 6f63 6573 7365 732e 6c61 796f  l_processes.layo
-0002dfa0: 7574 2829 0a20 2020 2020 2020 2020 2020  ut().           
-0002dfb0: 202e 6368 696c 6472 656e 2829 5b2d 315d   .children()[-1]
-0002dfc0: 0a20 2020 2020 2020 2020 2020 202e 6974  .            .it
-0002dfd0: 656d 4174 2830 290a 2020 2020 2020 2020  emAt(0).        
-0002dfe0: 2020 2020 2e77 6964 6765 7428 290a 2020      .widget().  
-0002dff0: 2020 2020 2020 2020 2020 2e63 6c69 636b            .click
-0002e000: 6564 2e65 6d69 7428 290a 2020 2020 2020  ed.emit().      
-0002e010: 2020 290a 2020 2020 2020 2020 706b 675f    ).        pkg_
-0002e020: 6c69 625f 7769 6e64 6f77 2e70 6f70 5f75  lib_window.pop_u
-0002e030: 705f 696e 7374 616c 6c5f 7072 6f63 6573  p_install_proces
-0002e040: 7365 732e 636c 6f73 6528 290a 2020 2020  ses.close().    
-0002e050: 2020 2020 706b 675f 6c69 625f 7769 6e64      pkg_lib_wind
-0002e060: 6f77 2e6f 6b5f 636c 6963 6b65 6428 290a  ow.ok_clicked().
-0002e070: 0a20 2020 2020 2020 2023 2047 6574 7320  .        # Gets 
-0002e080: 7468 6520 2755 6e69 745f 7465 7374 5f32  the 'Unit_test_2
-0002e090: 2720 696e 6465 7820 616e 6420 7365 6c65  ' index and sele
-0002e0a0: 6374 7320 6974 0a20 2020 2020 2020 2074  cts it.        t
-0002e0b0: 6573 745f 7070 6c5f 696e 6465 7820 3d20  est_ppl_index = 
-0002e0c0: 7365 6c66 2e66 696e 645f 6974 656d 5f62  self.find_item_b
-0002e0d0: 795f 6461 7461 2870 726f 635f 6c69 625f  y_data(proc_lib_
-0002e0e0: 7669 6577 2c20 2255 6e69 745f 7465 7374  view, "Unit_test
-0002e0f0: 5f32 2229 0a20 2020 2020 2020 2028 0a20  _2").        (. 
-0002e100: 2020 2020 2020 2020 2020 2070 726f 635f             proc_
-0002e110: 6c69 625f 7669 6577 2e73 656c 6563 7469  lib_view.selecti
-0002e120: 6f6e 4d6f 6465 6c28 292e 7365 6c65 6374  onModel().select
-0002e130: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0002e140: 2020 7465 7374 5f70 706c 5f69 6e64 6578    test_ppl_index
-0002e150: 2c20 5149 7465 6d53 656c 6563 7469 6f6e  , QItemSelection
-0002e160: 4d6f 6465 6c2e 5365 6c65 6374 4375 7272  Model.SelectCurr
-0002e170: 656e 740a 2020 2020 2020 2020 2020 2020  ent.            
-0002e180: 290a 2020 2020 2020 2020 290a 0a20 2020  ).        )..   
-0002e190: 2020 2020 2023 2054 7269 6573 2074 6f20       # Tries to 
-0002e1a0: 6465 6c65 7465 2074 6865 2070 6163 6b61  delete the packa
-0002e1b0: 6765 2027 556e 6974 5f74 6573 745f 3227  ge 'Unit_test_2'
-0002e1c0: 2c20 7265 6a65 6374 7320 7468 650a 2020  , rejects the.  
-0002e1d0: 2020 2020 2020 2320 6469 616c 6f67 2062        # dialog b
-0002e1e0: 6f78 0a20 2020 2020 2020 2051 4d65 7373  ox.        QMess
-0002e1f0: 6167 6542 6f78 2e71 7565 7374 696f 6e20  ageBox.question 
-0002e200: 3d20 4d6f 636b 2872 6574 7572 6e5f 7661  = Mock(return_va
-0002e210: 6c75 653d 514d 6573 7361 6765 426f 782e  lue=QMessageBox.
-0002e220: 4e6f 290a 2020 2020 2020 2020 7072 6f63  No).        proc
-0002e230: 5f6c 6962 5f76 6965 772e 6b65 7950 7265  _lib_view.keyPre
-0002e240: 7373 4576 656e 7428 6576 656e 7429 0a0a  ssEvent(event)..
-0002e250: 2020 2020 2020 2020 2320 4566 6665 6374          # Effect
-0002e260: 6976 656c 7920 6465 6c65 7465 7320 7468  ively deletes th
-0002e270: 6520 7061 636b 6167 6520 2755 6e69 745f  e package 'Unit_
-0002e280: 7465 7374 5f32 272c 2061 6363 6570 7469  test_2', accepti
-0002e290: 6e67 2074 6865 0a20 2020 2020 2020 2023  ng the.        #
-0002e2a0: 2064 6961 6c6f 6720 626f 780a 2020 2020   dialog box.    
-0002e2b0: 2020 2020 514d 6573 7361 6765 426f 782e      QMessageBox.
-0002e2c0: 7175 6573 7469 6f6e 203d 204d 6f63 6b28  question = Mock(
-0002e2d0: 7265 7475 726e 5f76 616c 7565 3d51 4d65  return_value=QMe
-0002e2e0: 7373 6167 6542 6f78 2e59 6573 290a 2020  ssageBox.Yes).  
-0002e2f0: 2020 2020 2020 7072 6f63 5f6c 6962 5f76        proc_lib_v
-0002e300: 6965 772e 6b65 7950 7265 7373 4576 656e  iew.keyPressEven
-0002e310: 7428 6576 656e 7429 0a0a 2020 2020 2020  t(event)..      
-0002e320: 2020 2320 5265 7365 7473 2074 6865 2070    # Resets the p
-0002e330: 726f 6365 7373 206c 6962 7261 7279 2074  rocess library t
-0002e340: 6f20 6974 7320 6f72 6967 696e 616c 2073  o its original s
-0002e350: 7461 7465 2066 6f72 206e 6970 7970 650a  tate for nipype.
-0002e360: 2020 2020 2020 2020 6375 725f 7374 6174          cur_stat
-0002e370: 6520 3d20 7365 6c66 2e70 726f 636c 6962  e = self.proclib
-0002e380: 7669 6577 5f6e 6970 7970 655f 7374 6174  view_nipype_stat
-0002e390: 6528 7072 6f63 5f6c 6962 5f76 6965 7729  e(proc_lib_view)
-0002e3a0: 0a0a 2020 2020 2020 2020 6966 2063 7572  ..        if cur
-0002e3b0: 5f73 7461 7465 2021 3d20 696e 6974 5f73  _state != init_s
-0002e3c0: 7461 7465 3a0a 2020 2020 2020 2020 2020  tate:.          
-0002e3d0: 2020 7365 6c66 2e70 726f 636c 6962 7669    self.proclibvi
-0002e3e0: 6577 5f6e 6970 7970 655f 7265 7365 745f  ew_nipype_reset_
-0002e3f0: 7374 6174 6528 0a20 2020 2020 2020 2020  state(.         
-0002e400: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
-0002e410: 5f77 696e 646f 772c 2070 706c 5f6d 616e  _window, ppl_man
-0002e420: 6167 6572 2c20 696e 6974 5f73 7461 7465  ager, init_state
-0002e430: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
-0002e440: 2020 2020 2020 2020 2320 436c 6561 6e69          # Cleani
-0002e450: 6e67 2074 6865 2070 726f 6365 7373 206c  ng the process l
-0002e460: 6962 7261 7279 2069 6e20 7069 7065 6c69  ibrary in pipeli
-0002e470: 6e65 206d 616e 6167 6572 2074 6162 2028  ne manager tab (
-0002e480: 6465 6c65 7469 6e67 2074 6865 0a20 2020  deleting the.   
-0002e490: 2020 2020 2023 2070 6163 6b61 6765 2061       # package a
-0002e4a0: 6464 6564 2069 6e20 7468 6973 2074 6573  dded in this tes
-0002e4b0: 742c 206f 7220 6f6c 6420 6f6e 6520 7374  t, or old one st
-0002e4c0: 696c 6c20 6578 6973 7469 6e67 290a 2020  ill existing).  
-0002e4d0: 2020 2020 2020 7365 6c66 2e63 6c65 616e        self.clean
-0002e4e0: 5f75 7473 5f70 6163 6b61 6765 7328 7072  _uts_packages(pr
-0002e4f0: 6f63 5f6c 6962 5f76 6965 7729 0a0a 2020  oc_lib_view)..  
-0002e500: 2020 6465 6620 7465 7374 5f70 6163 6b61    def test_packa
-0002e510: 6765 5f6c 6962 7261 7279 5f64 6961 6c6f  ge_library_dialo
-0002e520: 675f 726d 765f 706b 6728 7365 6c66 293a  g_rmv_pkg(self):
-0002e530: 0a20 2020 2020 2020 2022 2222 4372 6561  .        """Crea
-0002e540: 7465 7320 6120 6e65 7720 7072 6f6a 6563  tes a new projec
-0002e550: 7420 666f 6c64 6572 2c20 6f70 656e 7320  t folder, opens 
-0002e560: 7468 6520 7072 6f63 6573 7365 7320 6c69  the processes li
-0002e570: 6272 6172 7920 616e 640a 2020 2020 2020  brary and.      
-0002e580: 2020 7265 6d6f 7665 7320 6120 7061 636b    removes a pack
-0002e590: 6167 652e 2041 6c73 6f20 7361 7665 7320  age. Also saves 
-0002e5a0: 7468 6520 6375 7272 656e 7420 636f 6e66  the current conf
-0002e5b0: 6967 7572 6174 696f 6e2e 0a0a 2020 2020  iguration...    
-0002e5c0: 2020 2020 2d20 5465 7374 733a 2050 6163      - Tests: Pac
-0002e5d0: 6b61 6765 4c69 6272 6172 7944 6961 6c6f  kageLibraryDialo
-0002e5e0: 670a 0a20 2020 2020 2020 202d 204d 6f63  g..        - Moc
-0002e5f0: 6b73 3a0a 2020 2020 2020 2020 2020 2020  ks:.            
-0002e600: 2d20 514d 6573 7361 6765 426f 782e 6578  - QMessageBox.ex
-0002e610: 6563 0a20 2020 2020 2020 2020 2020 202d  ec.            -
-0002e620: 2051 4d65 7373 6167 6542 6f78 2e65 7865   QMessageBox.exe
-0002e630: 635f 0a20 2020 2020 2020 2022 2222 0a0a  c_.        """..
-0002e640: 2020 2020 2020 2020 504b 4720 3d20 226e          PKG = "n
-0002e650: 6970 7970 652e 696e 7465 7266 6163 6573  ipype.interfaces
-0002e660: 2e44 6174 6147 7261 6262 6572 220a 0a20  .DataGrabber".. 
-0002e670: 2020 2020 2020 2023 2043 7265 6174 6573         # Creates
-0002e680: 2061 206e 6577 2070 726f 6a65 6374 2066   a new project f
-0002e690: 6f6c 6465 7220 616e 6420 7377 6974 6368  older and switch
-0002e6a0: 6573 2074 6f20 6974 0a20 2020 2020 2020  es to it.       
-0002e6b0: 206e 6577 5f70 726f 6a5f 7061 7468 203d   new_proj_path =
-0002e6c0: 2073 656c 662e 6765 745f 6e65 775f 7465   self.get_new_te
-0002e6d0: 7374 5f70 726f 6a65 6374 286c 6967 6874  st_project(light
-0002e6e0: 3d54 7275 6529 0a20 2020 2020 2020 2073  =True).        s
-0002e6f0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-0002e700: 7377 6974 6368 5f70 726f 6a65 6374 286e  switch_project(n
-0002e710: 6577 5f70 726f 6a5f 7061 7468 2c20 2274  ew_proj_path, "t
-0002e720: 6573 745f 6c69 6768 745f 7072 6f6a 6563  est_light_projec
-0002e730: 7422 290a 0a20 2020 2020 2020 2023 2053  t")..        # S
-0002e740: 6574 7320 7368 6f72 7463 7574 7320 666f  ets shortcuts fo
-0002e750: 7220 6f62 6a65 6374 7320 7468 6174 2061  r objects that a
-0002e760: 7265 206f 6674 656e 2075 7365 640a 2020  re often used.  
-0002e770: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
-0002e780: 7220 3d20 7365 6c66 2e6d 6169 6e5f 7769  r = self.main_wi
-0002e790: 6e64 6f77 2e70 6970 656c 696e 655f 6d61  ndow.pipeline_ma
-0002e7a0: 6e61 6765 720a 2020 2020 2020 2020 7072  nager.        pr
-0002e7b0: 6f63 5f6c 6962 5f76 6965 7720 3d20 7070  oc_lib_view = pp
-0002e7c0: 6c5f 6d61 6e61 6765 722e 7072 6f63 6573  l_manager.proces
-0002e7d0: 734c 6962 7261 7279 2e70 726f 6365 7373  sLibrary.process
-0002e7e0: 5f6c 6962 7261 7279 0a0a 2020 2020 2020  _library..      
-0002e7f0: 2020 2320 5461 6b65 7320 7468 6520 696e    # Takes the in
-0002e800: 6974 6961 6c20 7374 6174 6520 6f66 206e  itial state of n
-0002e810: 6970 7970 6520 7072 6f63 5f6c 6962 5f76  ipype proc_lib_v
-0002e820: 6965 7720 616e 6420 6d61 6b65 7320 7375  iew and makes su
-0002e830: 7265 2074 6861 740a 2020 2020 2020 2020  re that.        
-0002e840: 2320 504b 4720 6973 2061 6c72 6561 6479  # PKG is already
-0002e850: 2069 6e73 7461 6c6c 6564 0a20 2020 2020   installed.     
-0002e860: 2020 2069 6e69 745f 7374 6174 6520 3d20     init_state = 
-0002e870: 7365 6c66 2e70 726f 636c 6962 7669 6577  self.proclibview
-0002e880: 5f6e 6970 7970 655f 7374 6174 6528 7072  _nipype_state(pr
-0002e890: 6f63 5f6c 6962 5f76 6965 7729 0a0a 2020  oc_lib_view)..  
-0002e8a0: 2020 2020 2020 6966 2069 6e69 745f 7374        if init_st
-0002e8b0: 6174 6520 213d 2022 7072 6f63 6573 735f  ate != "process_
-0002e8c0: 656e 6162 6c65 6422 3a0a 2020 2020 2020  enabled":.      
-0002e8d0: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-0002e8e0: 7769 6e64 6f77 2e70 6163 6b61 6765 5f6c  window.package_l
-0002e8f0: 6962 7261 7279 5f70 6f70 5f75 7028 290a  ibrary_pop_up().
-0002e900: 2020 2020 2020 2020 2020 2020 706b 675f              pkg_
-0002e910: 6c69 625f 7769 6e64 6f77 203d 2073 656c  lib_window = sel
-0002e920: 662e 6d61 696e 5f77 696e 646f 772e 706f  f.main_window.po
-0002e930: 705f 7570 5f70 6163 6b61 6765 5f6c 6962  p_up_package_lib
-0002e940: 7261 7279 0a20 2020 2020 2020 2020 2020  rary.           
-0002e950: 2070 6b67 5f6c 6962 5f77 696e 646f 772e   pkg_lib_window.
-0002e960: 6c69 6e65 5f65 6469 742e 7365 7454 6578  line_edit.setTex
-0002e970: 7428 504b 4729 0a20 2020 2020 2020 2020  t(PKG).         
-0002e980: 2020 2028 0a20 2020 2020 2020 2020 2020     (.           
-0002e990: 2020 2020 2070 706c 5f6d 616e 6167 6572       ppl_manager
-0002e9a0: 2e70 726f 6365 7373 4c69 6272 6172 792e  .processLibrary.
-0002e9b0: 7072 6f63 6573 735f 6c69 6272 6172 792e  process_library.
-0002e9c0: 706b 675f 6c69 6272 6172 792e 6973 5f70  pkg_library.is_p
-0002e9d0: 6174 680a 2020 2020 2020 2020 2020 2020  ath.            
-0002e9e0: 2920 3d20 4661 6c73 650a 2020 2020 2020  ) = False.      
-0002e9f0: 2020 2020 2020 2320 436c 6963 6b73 206f        # Clicks o
-0002ea00: 6e20 6164 6420 7061 636b 6167 650a 2020  n add package.  
-0002ea10: 2020 2020 2020 2020 2020 706b 675f 6c69            pkg_li
-0002ea20: 625f 7769 6e64 6f77 2e6c 6179 6f75 7428  b_window.layout(
-0002ea30: 292e 6368 696c 6472 656e 2829 5b30 5d2e  ).children()[0].
-0002ea40: 6c61 796f 7574 2829 2e63 6869 6c64 7265  layout().childre
-0002ea50: 6e28 295b 0a20 2020 2020 2020 2020 2020  n()[.           
-0002ea60: 2020 2020 2033 0a20 2020 2020 2020 2020       3.         
-0002ea70: 2020 205d 2e69 7465 6d41 7428 3029 2e77     ].itemAt(0).w
-0002ea80: 6964 6765 7428 292e 636c 6963 6b65 642e  idget().clicked.
-0002ea90: 656d 6974 2829 0a20 2020 2020 2020 2020  emit().         
-0002eaa0: 2020 2070 6b67 5f6c 6962 5f77 696e 646f     pkg_lib_windo
-0002eab0: 772e 6f6b 5f63 6c69 636b 6564 2829 0a0a  w.ok_clicked()..
-0002eac0: 2020 2020 2020 2020 2320 4f70 656e 7320          # Opens 
-0002ead0: 7468 6520 7061 636b 6167 6520 6c69 6272  the package libr
-0002eae0: 6172 7920 706f 702d 7570 0a20 2020 2020  ary pop-up.     
-0002eaf0: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
-0002eb00: 646f 772e 7061 636b 6167 655f 6c69 6272  dow.package_libr
-0002eb10: 6172 795f 706f 705f 7570 2829 0a20 2020  ary_pop_up().   
-0002eb20: 2020 2020 2070 6b67 5f6c 6962 5f77 696e       pkg_lib_win
-0002eb30: 646f 7720 3d20 7365 6c66 2e6d 6169 6e5f  dow = self.main_
-0002eb40: 7769 6e64 6f77 2e70 6f70 5f75 705f 7061  window.pop_up_pa
-0002eb50: 636b 6167 655f 6c69 6272 6172 790a 0a20  ckage_library.. 
-0002eb60: 2020 2020 2020 2023 204d 6f63 6b73 2074         # Mocks t
-0002eb70: 6865 2065 7865 6375 7469 6f6e 206f 6620  he execution of 
-0002eb80: 6120 6469 616c 6f67 2062 6f78 0a20 2020  a dialog box.   
-0002eb90: 2020 2020 2051 4d65 7373 6167 6542 6f78       QMessageBox
-0002eba0: 2e65 7865 6320 3d20 6c61 6d62 6461 2078  .exec = lambda x
-0002ebb0: 3a20 4e6f 6e65 0a20 2020 2020 2020 2051  : None.        Q
-0002ebc0: 4d65 7373 6167 6542 6f78 2e65 7865 635f  MessageBox.exec_
-0002ebd0: 203d 206c 616d 6264 6120 783a 204e 6f6e   = lambda x: Non
-0002ebe0: 650a 0a20 2020 2020 2020 2023 204d 6f63  e..        # Moc
-0002ebf0: 6b73 2064 656c 6574 696e 6720 6120 7061  ks deleting a pa
-0002ec00: 636b 6167 6520 7468 6174 2069 7320 6e6f  ckage that is no
-0002ec10: 7420 7370 6563 6966 6965 640a 2020 2020  t specified.    
-0002ec20: 2020 2020 7265 7320 3d20 706b 675f 6c69      res = pkg_li
-0002ec30: 625f 7769 6e64 6f77 2e72 656d 6f76 655f  b_window.remove_
-0002ec40: 7061 636b 6167 6528 2222 290a 2020 2020  package("").    
-0002ec50: 2020 2020 7365 6c66 2e61 7373 6572 7446      self.assertF
-0002ec60: 616c 7365 2872 6573 290a 0a20 2020 2020  alse(res)..     
-0002ec70: 2020 2023 2054 7269 6573 2072 656d 6f76     # Tries remov
-0002ec80: 696e 6720 6120 6e6f 6e2d 6578 6973 7465  ing a non-existe
-0002ec90: 6e74 2070 6163 6b61 6765 0a20 2020 2020  nt package.     
-0002eca0: 2020 2072 6573 203d 2070 6b67 5f6c 6962     res = pkg_lib
-0002ecb0: 5f77 696e 646f 772e 7265 6d6f 7665 5f70  _window.remove_p
-0002ecc0: 6163 6b61 6765 2822 6e6f 6e5f 6578 6973  ackage("non_exis
-0002ecd0: 7465 6e74 5f70 6163 6b61 6765 2229 0a20  tent_package"). 
-0002ece0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0002ecf0: 7274 4973 4e6f 6e65 2872 6573 290a 0a20  rtIsNone(res).. 
-0002ed00: 2020 2020 2020 2023 2043 6c69 636b 7320         # Clicks 
-0002ed10: 6f6e 2074 6865 2072 656d 6f76 6520 7061  on the remove pa
-0002ed20: 636b 6167 6520 6275 7474 6f6e 2077 6974  ckage button wit
-0002ed30: 686f 7574 2073 656c 6563 7469 6e67 2070  hout selecting p
-0002ed40: 6163 6b61 6765 0a20 2020 2020 2020 2072  ackage.        r
-0002ed50: 6d76 5f70 6b67 5f62 7574 746f 6e20 3d20  mv_pkg_button = 
-0002ed60: 280a 2020 2020 2020 2020 2020 2020 706b  (.            pk
-0002ed70: 675f 6c69 625f 7769 6e64 6f77 2e6c 6179  g_lib_window.lay
-0002ed80: 6f75 7428 290a 2020 2020 2020 2020 2020  out().          
-0002ed90: 2020 2e63 6869 6c64 7265 6e28 295b 305d    .children()[0]
-0002eda0: 0a20 2020 2020 2020 2020 2020 202e 6c61  .            .la
-0002edb0: 796f 7574 2829 0a20 2020 2020 2020 2020  yout().         
-0002edc0: 2020 202e 6368 696c 6472 656e 2829 5b33     .children()[3
-0002edd0: 5d0a 2020 2020 2020 2020 2020 2020 2e69  ].            .i
-0002ede0: 7465 6d41 7428 3129 0a20 2020 2020 2020  temAt(1).       
-0002edf0: 2020 2020 202e 7769 6467 6574 2829 0a20       .widget(). 
-0002ee00: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0002ee10: 2072 6d76 5f70 6b67 5f62 7574 746f 6e2e   rmv_pkg_button.
-0002ee20: 636c 6963 6b65 642e 656d 6974 2829 0a0a  clicked.emit()..
-0002ee30: 2020 2020 2020 2020 2320 5772 6974 6573          # Writes
-0002ee40: 2074 6865 206e 616d 6520 6f66 2061 6e20   the name of an 
-0002ee50: 6578 6973 7469 6e67 2070 6163 6b61 6765  existing package
-0002ee60: 206f 6e20 7468 6520 6c69 6e65 2065 6469   on the line edi
-0002ee70: 7420 616e 6420 636c 6963 6b73 206f 6e0a  t and clicks on.
-0002ee80: 2020 2020 2020 2020 2320 7468 6520 7265          # the re
-0002ee90: 6d6f 7665 2070 6163 6b61 6765 2062 7574  move package but
-0002eea0: 746f 6e0a 2020 2020 2020 2020 706b 675f  ton.        pkg_
-0002eeb0: 6c69 625f 7769 6e64 6f77 2e6c 696e 655f  lib_window.line_
-0002eec0: 6564 6974 2e73 6574 5465 7874 2850 4b47  edit.setText(PKG
-0002eed0: 290a 2020 2020 2020 2020 726d 765f 706b  ).        rmv_pk
-0002eee0: 675f 6275 7474 6f6e 2e63 6c69 636b 6564  g_button.clicked
-0002eef0: 2e65 6d69 7428 290a 0a20 2020 2020 2020  .emit()..       
-0002ef00: 2023 2052 6573 6574 7320 7468 6520 7072   # Resets the pr
-0002ef10: 6576 696f 7573 2061 6374 696f 6e0a 2020  evious action.  
-0002ef20: 2020 2020 2020 706b 675f 6c69 625f 7769        pkg_lib_wi
-0002ef30: 6e64 6f77 2e72 656d 6f76 655f 6c69 7374  ndow.remove_list
-0002ef40: 2e73 656c 6563 7441 6c6c 2829 0a20 2020  .selectAll().   
-0002ef50: 2020 2020 2028 0a20 2020 2020 2020 2020       (.         
-0002ef60: 2020 2070 6b67 5f6c 6962 5f77 696e 646f     pkg_lib_windo
-0002ef70: 772e 6c61 796f 7574 2829 0a20 2020 2020  w.layout().     
-0002ef80: 2020 2020 2020 202e 6368 696c 6472 656e         .children
-0002ef90: 2829 5b30 5d0a 2020 2020 2020 2020 2020  ()[0].          
-0002efa0: 2020 2e6c 6179 6f75 7428 290a 2020 2020    .layout().    
-0002efb0: 2020 2020 2020 2020 2e69 7465 6d41 7428          .itemAt(
-0002efc0: 3130 290a 2020 2020 2020 2020 2020 2020  10).            
-0002efd0: 2e77 6964 6765 7428 290a 2020 2020 2020  .widget().      
-0002efe0: 2020 2020 2020 2e6c 6179 6f75 7428 290a        .layout().
-0002eff0: 2020 2020 2020 2020 2020 2020 2e69 7465              .ite
-0002f000: 6d41 7428 3129 0a20 2020 2020 2020 2020  mAt(1).         
-0002f010: 2020 202e 7769 6467 6574 2829 0a20 2020     .widget().   
-0002f020: 2020 2020 2020 2020 202e 636c 6963 6b65           .clicke
-0002f030: 642e 656d 6974 2829 0a20 2020 2020 2020  d.emit().       
-0002f040: 2029 0a0a 2020 2020 2020 2020 2320 436c   )..        # Cl
-0002f050: 6963 6b20 6167 6169 6e20 6f6e 2074 6865  ick again on the
-0002f060: 2072 656d 6f76 6520 7061 636b 6167 6520   remove package 
-0002f070: 6275 7474 6f6e 0a20 2020 2020 2020 2072  button.        r
-0002f080: 6d76 5f70 6b67 5f62 7574 746f 6e2e 636c  mv_pkg_button.cl
-0002f090: 6963 6b65 642e 656d 6974 2829 0a0a 2020  icked.emit()..  
-0002f0a0: 2020 2020 2020 2320 4170 706c 7920 6368        # Apply ch
-0002f0b0: 616e 6765 730a 2020 2020 2020 2020 706b  anges.        pk
-0002f0c0: 675f 6c69 625f 7769 6e64 6f77 2e6f 6b5f  g_lib_window.ok_
-0002f0d0: 636c 6963 6b65 6428 290a 0a20 2020 2020  clicked()..     
-0002f0e0: 2020 2023 204d 6f63 6b73 2072 656d 6f76     # Mocks remov
-0002f0f0: 696e 6720 6120 7061 636b 6167 6520 7769  ing a package wi
-0002f100: 7468 2074 6578 7420 616e 6420 6672 6f6d  th text and from
-0002f110: 2074 6865 2074 7265 650a 2020 2020 2020   the tree.      
-0002f120: 2020 706b 675f 6c69 625f 7769 6e64 6f77    pkg_lib_window
-0002f130: 2e72 656d 6f76 655f 6469 635b 504b 475d  .remove_dic[PKG]
-0002f140: 203d 2031 0a20 2020 2020 2020 2070 6b67   = 1.        pkg
-0002f150: 5f6c 6962 5f77 696e 646f 772e 6164 645f  _lib_window.add_
-0002f160: 6469 635b 504b 475d 203d 2031 0a20 2020  dic[PKG] = 1.   
-0002f170: 2020 2020 2070 6b67 5f6c 6962 5f77 696e       pkg_lib_win
-0002f180: 646f 772e 6465 6c65 7465 5f64 6963 5b50  dow.delete_dic[P
-0002f190: 4b47 5d20 3d20 310a 2020 2020 2020 2020  KG] = 1.        
-0002f1a0: 706b 675f 6c69 625f 7769 6e64 6f77 2e72  pkg_lib_window.r
-0002f1b0: 656d 6f76 655f 7061 636b 6167 655f 7769  emove_package_wi
-0002f1c0: 7468 5f74 6578 7428 5f32 7265 6d3d 504b  th_text(_2rem=PK
-0002f1d0: 472c 2074 7265 655f 7265 6d6f 7665 3d46  G, tree_remove=F
-0002f1e0: 616c 7365 290a 0a20 2020 2020 2020 2023  alse)..        #
-0002f1f0: 2052 6573 6574 7320 7468 6520 7072 6f63   Resets the proc
-0002f200: 6573 7320 6c69 6272 6172 7920 746f 2069  ess library to i
-0002f210: 7473 206f 7269 6769 6e61 6c20 7374 6174  ts original stat
-0002f220: 6520 666f 7220 6e69 7079 7065 0a20 2020  e for nipype.   
-0002f230: 2020 2020 2063 7572 5f73 7461 7465 203d       cur_state =
-0002f240: 2073 656c 662e 7072 6f63 6c69 6276 6965   self.proclibvie
-0002f250: 775f 6e69 7079 7065 5f73 7461 7465 2870  w_nipype_state(p
-0002f260: 726f 635f 6c69 625f 7669 6577 290a 0a20  roc_lib_view).. 
-0002f270: 2020 2020 2020 2069 6620 6375 725f 7374         if cur_st
-0002f280: 6174 6520 213d 2069 6e69 745f 7374 6174  ate != init_stat
-0002f290: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
-0002f2a0: 656c 662e 7072 6f63 6c69 6276 6965 775f  elf.proclibview_
-0002f2b0: 6e69 7079 7065 5f72 6573 6574 5f73 7461  nipype_reset_sta
-0002f2c0: 7465 280a 2020 2020 2020 2020 2020 2020  te(.            
-0002f2d0: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
-0002f2e0: 6e64 6f77 2c20 7070 6c5f 6d61 6e61 6765  ndow, ppl_manage
-0002f2f0: 722c 2069 6e69 745f 7374 6174 650a 2020  r, init_state.  
-0002f300: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
-0002f310: 2020 2020 2023 2053 6176 6573 2074 6865       # Saves the
-0002f320: 2063 6f6e 6669 6720 746f 2027 7072 6f63   config to 'proc
-0002f330: 6573 735f 636f 6e66 6967 2e79 6d6c 270a  ess_config.yml'.
-0002f340: 2020 2020 2020 2020 7070 6c5f 6d61 6e61          ppl_mana
-0002f350: 6765 722e 7072 6f63 6573 734c 6962 7261  ger.processLibra
-0002f360: 7279 2e73 6176 655f 636f 6e66 6967 2829  ry.save_config()
-0002f370: 0a0a 2020 2020 6465 6620 7465 7374 5f70  ..    def test_p
-0002f380: 6163 6b61 6765 5f6c 6962 7261 7279 5f6f  ackage_library_o
-0002f390: 7468 6572 7328 7365 6c66 293a 0a20 2020  thers(self):.   
-0002f3a0: 2020 2020 2022 2222 4372 6561 7465 7320       """Creates 
-0002f3b0: 6120 6e65 7720 7072 6f6a 6563 7420 666f  a new project fo
-0002f3c0: 6c64 6572 2c20 6f70 656e 7320 7468 6520  lder, opens the 
-0002f3d0: 7072 6f63 6573 7365 7320 6c69 6272 6172  processes librar
-0002f3e0: 7920 616e 640a 2020 2020 2020 2020 6164  y and.        ad
-0002f3f0: 6473 2061 2070 6163 6b61 6765 2e0a 0a20  ds a package... 
-0002f400: 2020 2020 2020 2054 6865 2070 6163 6b61         The packa
-0002f410: 6765 206c 6962 7261 7279 206f 626a 6563  ge library objec
-0002f420: 7420 6f70 656e 7320 7570 2061 7320 6120  t opens up as a 
-0002f430: 706f 702d 7570 2077 6865 6e0a 2020 2020  pop-up when.    
-0002f440: 2020 2020 4669 6c65 203e 2050 6163 6b61      File > Packa
-0002f450: 6765 206c 6962 7261 7279 206d 616e 6167  ge library manag
-0002f460: 6572 2069 7320 636c 6963 6b65 642e 0a0a  er is clicked...
-0002f470: 2020 2020 2020 2020 2d20 5465 7374 733a          - Tests:
-0002f480: 2050 6163 6b61 6765 4c69 6272 6172 7944   PackageLibraryD
-0002f490: 6961 6c6f 670a 0a20 2020 2020 2020 202d  ialog..        -
-0002f4a0: 204d 6f63 6b73 3a0a 2020 2020 2020 2020   Mocks:.        
-0002f4b0: 2020 2020 2d20 514d 6573 7361 6765 426f      - QMessageBo
-0002f4c0: 782e 6578 6563 0a20 2020 2020 2020 2020  x.exec.         
-0002f4d0: 2020 202d 2051 4d65 7373 6167 6542 6f78     - QMessageBox
-0002f4e0: 2e65 7865 635f 0a20 2020 2020 2020 2022  .exec_.        "
-0002f4f0: 2222 0a0a 2020 2020 2020 2020 2320 4372  ""..        # Cr
-0002f500: 6561 7465 7320 6120 6e65 7720 7072 6f6a  eates a new proj
-0002f510: 6563 7420 666f 6c64 6572 2061 6e64 2073  ect folder and s
-0002f520: 7769 7463 6865 7320 746f 2069 740a 2020  witches to it.  
-0002f530: 2020 2020 2020 6e65 775f 7072 6f6a 5f70        new_proj_p
-0002f540: 6174 6820 3d20 7365 6c66 2e67 6574 5f6e  ath = self.get_n
-0002f550: 6577 5f74 6573 745f 7072 6f6a 6563 7428  ew_test_project(
-0002f560: 6c69 6768 743d 5472 7565 290a 2020 2020  light=True).    
-0002f570: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
-0002f580: 6e64 6f77 2e73 7769 7463 685f 7072 6f6a  ndow.switch_proj
-0002f590: 6563 7428 6e65 775f 7072 6f6a 5f70 6174  ect(new_proj_pat
-0002f5a0: 682c 2022 7465 7374 5f6c 6967 6874 5f70  h, "test_light_p
-0002f5b0: 726f 6a65 6374 2229 0a0a 2020 2020 2020  roject")..      
-0002f5c0: 2020 2320 4f70 656e 7320 7468 6520 7061    # Opens the pa
-0002f5d0: 636b 6167 6520 6c69 6272 6172 7920 706f  ckage library po
-0002f5e0: 702d 7570 0a20 2020 2020 2020 2073 656c  p-up.        sel
-0002f5f0: 662e 6d61 696e 5f77 696e 646f 772e 7061  f.main_window.pa
-0002f600: 636b 6167 655f 6c69 6272 6172 795f 706f  ckage_library_po
-0002f610: 705f 7570 2829 0a0a 2020 2020 2020 2020  p_up()..        
-0002f620: 2320 5365 7473 2073 686f 7274 6375 7473  # Sets shortcuts
-0002f630: 2066 6f72 206f 626a 6563 7473 2074 6861   for objects tha
-0002f640: 7420 6172 6520 6f66 7465 6e20 7573 6564  t are often used
-0002f650: 0a20 2020 2020 2020 2070 706c 5f6d 616e  .        ppl_man
-0002f660: 6167 6572 203d 2073 656c 662e 6d61 696e  ager = self.main
-0002f670: 5f77 696e 646f 772e 7069 7065 6c69 6e65  _window.pipeline
-0002f680: 5f6d 616e 6167 6572 0a20 2020 2020 2020  _manager.       
-0002f690: 2070 6b67 5f6c 6962 203d 2070 706c 5f6d   pkg_lib = ppl_m
-0002f6a0: 616e 6167 6572 2e70 726f 6365 7373 4c69  anager.processLi
-0002f6b0: 6272 6172 792e 706b 675f 6c69 6272 6172  brary.pkg_librar
-0002f6c0: 792e 7061 636b 6167 655f 6c69 6272 6172  y.package_librar
-0002f6d0: 790a 2020 2020 2020 2020 706b 675f 6c69  y.        pkg_li
-0002f6e0: 625f 7769 6e64 6f77 203d 2073 656c 662e  b_window = self.
-0002f6f0: 6d61 696e 5f77 696e 646f 772e 706f 705f  main_window.pop_
-0002f700: 7570 5f70 6163 6b61 6765 5f6c 6962 7261  up_package_libra
-0002f710: 7279 0a0a 2020 2020 2020 2020 2320 4d6f  ry..        # Mo
-0002f720: 636b 7320 7468 6520 7061 636b 6167 6520  cks the package 
-0002f730: 7472 6565 0a20 2020 2020 2020 206d 6f63  tree.        moc
-0002f740: 6b5f 706b 675f 7472 6565 203d 205b 0a20  k_pkg_tree = [. 
-0002f750: 2020 2020 2020 2020 2020 207b 2244 6f75             {"Dou
-0002f760: 626c 655f 7265 6e61 6d65 223a 2022 7072  ble_rename": "pr
-0002f770: 6f63 6573 735f 656e 6162 6c65 6422 7d2c  ocess_enabled"},
-0002f780: 0a20 2020 2020 2020 2020 2020 205b 7b22  .            [{"
-0002f790: 446f 7562 6c65 5f72 656e 616d 6522 3a20  Double_rename": 
-0002f7a0: 2270 726f 6365 7373 5f65 6e61 626c 6564  "process_enabled
-0002f7b0: 227d 5d2c 0a20 2020 2020 2020 2020 2020  "}],.           
-0002f7c0: 2028 7b22 446f 7562 6c65 5f72 656e 616d   ({"Double_renam
-0002f7d0: 6522 3a20 2270 726f 6365 7373 5f65 6e61  e": "process_ena
-0002f7e0: 626c 6564 227d 292c 0a20 2020 2020 2020  bled"}),.       
-0002f7f0: 205d 0a0a 2020 2020 2020 2020 2320 4d6f   ]..        # Mo
-0002f800: 636b 7320 6669 6c6c 696e 6720 616e 2069  cks filling an i
-0002f810: 7465 6d20 7769 7468 2074 6865 2061 626f  tem with the abo
-0002f820: 7665 2069 7465 6d0a 2020 2020 2020 2020  ve item.        
-0002f830: 706b 675f 6c69 622e 6669 6c6c 5f69 7465  pkg_lib.fill_ite
-0002f840: 6d28 706b 675f 6c69 622e 696e 7669 7369  m(pkg_lib.invisi
-0002f850: 626c 6552 6f6f 7449 7465 6d28 292c 206d  bleRootItem(), m
-0002f860: 6f63 6b5f 706b 675f 7472 6565 290a 0a20  ock_pkg_tree).. 
-0002f870: 2020 2020 2020 2023 2043 6c6f 7365 7320         # Closes 
-0002f880: 7468 6520 7061 636b 6167 6520 6c69 6272  the package libr
-0002f890: 6172 7920 706f 702d 7570 0a20 2020 2020  ary pop-up.     
-0002f8a0: 2020 2070 6b67 5f6c 6962 5f77 696e 646f     pkg_lib_windo
-0002f8b0: 772e 636c 6f73 6528 290a 0a20 2020 2064  w.close()..    d
-0002f8c0: 6566 2074 6573 745f 706f 7055 7044 656c  ef test_popUpDel
-0002f8d0: 6574 6564 5072 6f6a 6563 7428 7365 6c66  etedProject(self
-0002f8e0: 293a 0a20 2020 2020 2020 2022 2222 4164  ):.        """Ad
-0002f8f0: 6473 2061 2064 656c 6574 6564 2070 726f  ds a deleted pro
-0002f900: 6a65 6374 7320 746f 2074 6865 2070 726f  jects to the pro
-0002f910: 6a65 6374 7320 6c69 7374 2061 6e64 206c  jects list and l
-0002f920: 6175 6e63 6865 7320 6d69 612e 0a0a 2020  aunches mia...  
-0002f930: 2020 2020 2020 2d20 5465 7374 733a 2050        - Tests: P
-0002f940: 6f70 5570 4465 6c65 7465 6450 726f 6a65  opUpDeletedProje
-0002f950: 6374 2e0a 2020 2020 2020 2020 2222 220a  ct..        """.
-0002f960: 0a20 2020 2020 2020 2023 2053 6574 7320  .        # Sets 
-0002f970: 6120 7072 6f6a 6563 7473 2073 6176 6520  a projects save 
-0002f980: 6469 7265 6374 6f72 790a 2020 2020 2020  directory.      
-0002f990: 2020 2320 636f 6e66 6967 203d 2043 6f6e    # config = Con
-0002f9a0: 6669 6728 290a 2020 2020 2020 2020 636f  fig().        co
-0002f9b0: 6e66 6967 203d 2043 6f6e 6669 6728 636f  nfig = Config(co
-0002f9c0: 6e66 6967 5f70 6174 683d 7365 6c66 2e63  nfig_path=self.c
-0002f9d0: 6f6e 6669 675f 7061 7468 290a 2020 2020  onfig_path).    
-0002f9e0: 2020 2020 7072 6f6a 6563 7473 5f73 6176      projects_sav
-0002f9f0: 655f 7061 7468 203d 206f 732e 7061 7468  e_path = os.path
-0002fa00: 2e6a 6f69 6e28 7365 6c66 2e63 6f6e 6669  .join(self.confi
-0002fa10: 675f 7061 7468 2c20 2270 726f 6a65 6374  g_path, "project
-0002fa20: 7322 290a 2020 2020 2020 2020 636f 6e66  s").        conf
-0002fa30: 6967 2e73 6574 5f70 726f 6a65 6374 735f  ig.set_projects_
-0002fa40: 7361 7665 5f70 6174 6828 7072 6f6a 6563  save_path(projec
-0002fa50: 7473 5f73 6176 655f 7061 7468 290a 0a20  ts_save_path).. 
-0002fa60: 2020 2020 2020 2023 204d 6f63 6b73 2061         # Mocks a
-0002fa70: 2070 726f 6a65 6374 2066 696c 6570 6174   project filepat
-0002fa80: 6820 7468 6174 2064 6f65 7320 6e6f 7420  h that does not 
-0002fa90: 6578 6973 7420 696e 2074 6865 2066 696c  exist in the fil
-0002faa0: 6573 7973 7465 6d0a 2020 2020 2020 2020  esystem.        
-0002fab0: 2320 4164 6473 2074 6869 7320 6669 6c65  # Adds this file
-0002fac0: 7061 7468 2074 6f20 2773 6176 6564 5f70  path to 'saved_p
-0002fad0: 726f 6a65 6374 732e 796d 6c27 0a20 2020  rojects.yml'.   
-0002fae0: 2020 2020 2073 6176 6564 5072 6f6a 6563       savedProjec
-0002faf0: 7473 203d 2053 6176 6564 5072 6f6a 6563  ts = SavedProjec
-0002fb00: 7473 2829 0a20 2020 2020 2020 2064 656c  ts().        del
-0002fb10: 5f70 726a 6374 203d 206f 732e 7061 7468  _prjct = os.path
-0002fb20: 2e6a 6f69 6e28 7072 6f6a 6563 7473 5f73  .join(projects_s
-0002fb30: 6176 655f 7061 7468 2c20 226d 6973 7369  ave_path, "missi
-0002fb40: 6e67 5f70 726f 6a65 6374 2229 0a20 2020  ng_project").   
-0002fb50: 2020 2020 2073 6176 6564 5072 6f6a 6563       savedProjec
-0002fb60: 7473 2e61 6464 5361 7665 6450 726f 6a65  ts.addSavedProje
-0002fb70: 6374 2864 656c 5f70 726a 6374 290a 0a20  ct(del_prjct).. 
-0002fb80: 2020 2020 2020 2023 2041 7373 6572 7473         # Asserts
-0002fb90: 2074 6861 7420 2773 6176 6564 5f70 726f   that 'saved_pro
-0002fba0: 6a65 6374 732e 796d 6c27 2063 6f6e 7461  jects.yml' conta
-0002fbb0: 696e 7320 7468 6520 6669 6c65 7061 7468  ins the filepath
-0002fbc0: 0a20 2020 2020 2020 2023 2046 4958 4d45  .        # FIXME
-0002fbd0: 3a20 5468 6520 666f 6c6c 6f77 696e 6720  : The following 
-0002fbe0: 6c69 6e65 2064 6f65 7320 6e6f 7420 7365  line does not se
-0002fbf0: 656d 2074 6f20 6265 2073 7570 706f 7274  em to be support
-0002fc00: 6564 2062 7920 7468 650a 2020 2020 2020  ed by the.      
-0002fc10: 2020 2320 2020 2020 2020 2061 7070 7665    #        appve
-0002fc20: 796f 7220 7665 7273 696f 6e2c 2077 6869  yor version, whi
-0002fc30: 6c65 2069 7420 776f 726b 7320 6669 6e65  le it works fine
-0002fc40: 206f 6e20 6d79 2073 7461 7469 6f6e 2e2e   on my station..
-0002fc50: 2e0a 2020 2020 2020 2020 2320 2020 2020  ..        #     
-0002fc60: 2020 2046 6f72 206e 6f77 2049 2063 6f6d     For now I com
-0002fc70: 6d65 6e74 202e 2e2e 0a20 2020 2020 2020  ment ....       
-0002fc80: 2023 2073 656c 662e 6173 7365 7274 496e   # self.assertIn
-0002fc90: 2864 656c 5f70 726a 6374 2c20 7361 7665  (del_prjct, save
-0002fca0: 6450 726f 6a65 6374 732e 6c6f 6164 5361  dProjects.loadSa
-0002fcb0: 7665 6450 726f 6a65 6374 7328 295b 2770  vedProjects()['p
-0002fcc0: 6174 6873 275d 290a 0a20 2020 2020 2020  aths'])..       
-0002fcd0: 2023 204d 6f63 6b73 2074 6865 2065 7865   # Mocks the exe
-0002fce0: 6375 7469 6f6e 206f 6620 6120 6469 616c  cution of a dial
-0002fcf0: 6f67 2062 6f78 0a20 2020 2020 2020 2050  og box.        P
-0002fd00: 6f70 5570 4465 6c65 7465 6450 726f 6a65  opUpDeletedProje
-0002fd10: 6374 2e65 7865 6320 3d20 4d6f 636b 2829  ct.exec = Mock()
-0002fd20: 0a0a 2020 2020 2020 2020 2320 4164 6473  ..        # Adds
-0002fd30: 2063 6f64 6520 6672 6f6d 2074 6865 2027   code from the '
-0002fd40: 6d61 696e 2e70 7927 2c20 6765 7473 2064  main.py', gets d
-0002fd50: 656c 6574 6564 2070 726f 6a65 6374 730a  eleted projects.
-0002fd60: 2020 2020 2020 2020 7361 7665 645f 7072          saved_pr
-0002fd70: 6f6a 6563 7473 5f6f 626a 6563 7420 3d20  ojects_object = 
-0002fd80: 5361 7665 6450 726f 6a65 6374 7328 290a  SavedProjects().
-0002fd90: 2020 2020 2020 2020 7361 7665 645f 7072          saved_pr
-0002fda0: 6f6a 6563 7473 5f6c 6973 7420 3d20 636f  ojects_list = co
-0002fdb0: 7079 2e64 6565 7063 6f70 7928 7361 7665  py.deepcopy(save
-0002fdc0: 645f 7072 6f6a 6563 7473 5f6f 626a 6563  d_projects_objec
-0002fdd0: 742e 7061 7468 734c 6973 7429 0a20 2020  t.pathsList).   
-0002fde0: 2020 2020 2064 656c 6574 6564 5f70 726f       deleted_pro
-0002fdf0: 6a65 6374 7320 3d20 5b5d 0a20 2020 2020  jects = [].     
-0002fe00: 2020 2066 6f72 2073 6176 6564 5f70 726f     for saved_pro
-0002fe10: 6a65 6374 2069 6e20 7361 7665 645f 7072  ject in saved_pr
-0002fe20: 6f6a 6563 7473 5f6c 6973 743a 0a20 2020  ojects_list:.   
-0002fe30: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-0002fe40: 6f73 2e70 6174 682e 6973 6469 7228 7361  os.path.isdir(sa
-0002fe50: 7665 645f 7072 6f6a 6563 7429 3a0a 2020  ved_project):.  
-0002fe60: 2020 2020 2020 2020 2020 2020 2020 6465                de
-0002fe70: 6c65 7465 645f 7072 6f6a 6563 7473 2e61  leted_projects.a
-0002fe80: 7070 656e 6428 6f73 2e70 6174 682e 6162  ppend(os.path.ab
-0002fe90: 7370 6174 6828 7361 7665 645f 7072 6f6a  spath(saved_proj
-0002fea0: 6563 7429 290a 2020 2020 2020 2020 2020  ect)).          
-0002feb0: 2020 2020 2020 7361 7665 645f 7072 6f6a        saved_proj
-0002fec0: 6563 7473 5f6f 626a 6563 742e 7265 6d6f  ects_object.remo
-0002fed0: 7665 5361 7665 6450 726f 6a65 6374 2873  veSavedProject(s
-0002fee0: 6176 6564 5f70 726f 6a65 6374 290a 0a20  aved_project).. 
-0002fef0: 2020 2020 2020 2069 6620 6465 6c65 7465         if delete
-0002ff00: 645f 7072 6f6a 6563 7473 2069 7320 6e6f  d_projects is no
-0002ff10: 7420 4e6f 6e65 2061 6e64 2064 656c 6574  t None and delet
-0002ff20: 6564 5f70 726f 6a65 6374 733a 0a20 2020  ed_projects:.   
-0002ff30: 2020 2020 2020 2020 2073 656c 662e 6d73           self.ms
-0002ff40: 6720 3d20 506f 7055 7044 656c 6574 6564  g = PopUpDeleted
-0002ff50: 5072 6f6a 6563 7428 6465 6c65 7465 645f  Project(deleted_
-0002ff60: 7072 6f6a 6563 7473 290a 0a20 2020 2020  projects)..     
-0002ff70: 2020 2023 2041 7373 6572 7473 2074 6861     # Asserts tha
-0002ff80: 7420 2773 6176 6564 5f70 726f 6a65 6374  t 'saved_project
-0002ff90: 732e 796d 6c27 206e 6f20 6c6f 6e67 6572  s.yml' no longer
-0002ffa0: 2063 6f6e 7461 696e 7320 6974 0a20 2020   contains it.   
-0002ffb0: 2020 2020 2023 2046 4958 4d45 3a20 5369       # FIXME: Si
-0002ffc0: 6e63 6520 7468 6520 7072 6576 696f 7573  nce the previous
-0002ffd0: 2046 4958 4d45 2c20 616e 6420 636f 6d6d   FIXME, and comm
-0002ffe0: 656e 742c 2074 6865 2066 6f6c 6c6f 7769  ent, the followi
-0002fff0: 6e67 206c 696e 6520 6973 0a20 2020 2020  ng line is.     
-00030000: 2020 2023 2020 2020 2020 2020 616c 736f     #        also
-00030010: 2063 6f6d 6d65 6e74 6564 0a20 2020 2020   commented.     
-00030020: 2020 2023 2073 656c 662e 6173 7365 7274     # self.assert
-00030030: 4e6f 7449 6e28 6465 6c5f 7072 6a63 742c  NotIn(del_prjct,
-00030040: 2073 6176 6564 5072 6f6a 6563 7473 2e6c   savedProjects.l
-00030050: 6f61 6453 6176 6564 5072 6f6a 6563 7473  oadSavedProjects
-00030060: 2829 5b27 7061 7468 7327 5d29 0a0a 2020  ()['paths'])..  
-00030070: 2020 6465 6620 7465 7374 5f70 6f70 5570    def test_popUp
-00030080: 4465 6c65 7465 5072 6f6a 6563 7428 7365  DeleteProject(se
-00030090: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
-000300a0: 4372 6561 7465 7320 6120 6e65 7720 7072  Creates a new pr
-000300b0: 6f6a 6563 7420 616e 6420 6465 6c65 7465  oject and delete
-000300c0: 7320 6974 2e0a 0a20 2020 2020 2020 204e  s it...        N
-000300d0: 6f74 2074 6f20 6265 2063 6f6e 6675 7365  ot to be confuse
-000300e0: 6420 7769 7468 2074 6573 745f 506f 7055  d with test_PopU
-000300f0: 7044 656c 6574 6564 5072 6f6a 6563 7421  pDeletedProject!
-00030100: 0a0a 2020 2020 2020 2020 2d20 5465 7374  ..        - Test
-00030110: 733a 0a20 2020 2020 2020 2020 2020 202d  s:.            -
-00030120: 204d 6169 6e57 696e 646f 772e 6465 6c65   MainWindow.dele
-00030130: 7465 5f70 726f 6a65 6374 0a20 2020 2020  te_project.     
-00030140: 2020 2020 2020 202d 2050 6f70 5570 4465         - PopUpDe
-00030150: 6c65 7465 5072 6f6a 6563 742e 0a20 2020  leteProject..   
-00030160: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
-00030170: 2020 2320 4765 7473 2061 206e 6577 2070    # Gets a new p
-00030180: 726f 6a65 6374 0a20 2020 2020 2020 2074  roject.        t
-00030190: 6573 745f 7072 6f6a 5f70 6174 6820 3d20  est_proj_path = 
-000301a0: 7365 6c66 2e67 6574 5f6e 6577 5f74 6573  self.get_new_tes
-000301b0: 745f 7072 6f6a 6563 7428 290a 2020 2020  t_project().    
-000301c0: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
-000301d0: 6e64 6f77 2e73 7769 7463 685f 7072 6f6a  ndow.switch_proj
-000301e0: 6563 7428 7465 7374 5f70 726f 6a5f 7061  ect(test_proj_pa
-000301f0: 7468 2c20 2274 6573 745f 7072 6f6a 6563  th, "test_projec
-00030200: 7422 290a 0a20 2020 2020 2020 2023 2049  t")..        # I
-00030210: 6e73 7465 6164 206f 6620 6578 6563 7574  nstead of execut
-00030220: 696e 6720 7468 6520 706f 702d 7570 2c20  ing the pop-up, 
-00030230: 6f6e 6c79 2073 686f 7773 2069 740a 2020  only shows it.  
-00030240: 2020 2020 2020 2320 5468 6973 2061 766f        # This avo
-00030250: 6964 7320 7468 7265 6164 2064 6561 646c  ids thread deadl
-00030260: 6f63 6b69 6e67 0a20 2020 2020 2020 2051  ocking.        Q
-00030270: 4d65 7373 6167 6542 6f78 2e65 7865 6320  MessageBox.exec 
-00030280: 3d20 6c61 6d62 6461 2073 656c 665f 3a20  = lambda self_: 
-00030290: 7365 6c66 5f2e 7368 6f77 2829 0a0a 2020  self_.show()..  
-000302a0: 2020 2020 2020 2320 5265 7365 7473 2074        # Resets t
-000302b0: 6865 2070 726f 6a65 6374 7320 666f 6c64  he projects fold
-000302c0: 6572 0a20 2020 2020 2020 2043 6f6e 6669  er.        Confi
-000302d0: 6728 636f 6e66 6967 5f70 6174 683d 7365  g(config_path=se
-000302e0: 6c66 2e63 6f6e 6669 675f 7061 7468 292e  lf.config_path).
-000302f0: 7365 745f 7072 6f6a 6563 7473 5f73 6176  set_projects_sav
-00030300: 655f 7061 7468 2822 2229 0a0a 2020 2020  e_path("")..    
-00030310: 2020 2020 2320 5472 6965 7320 746f 2064      # Tries to d
-00030320: 656c 6574 6520 6120 7072 6f6a 6563 7420  elete a project 
-00030330: 7769 7468 6f75 7420 7365 7474 696e 6720  without setting 
-00030340: 7468 6520 7072 6f6a 6563 7473 2066 6f6c  the projects fol
-00030350: 6465 720a 2020 2020 2020 2020 7365 6c66  der.        self
-00030360: 2e6d 6169 6e5f 7769 6e64 6f77 2e64 656c  .main_window.del
-00030370: 6574 655f 7072 6f6a 6563 7428 290a 2020  ete_project().  
-00030380: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-00030390: 7769 6e64 6f77 2e6d 7367 2e61 6363 6570  window.msg.accep
-000303a0: 7428 290a 0a20 2020 2020 2020 2023 2053  t()..        # S
-000303b0: 6574 7320 6120 7072 6f6a 6563 7473 2073  ets a projects s
-000303c0: 6176 6520 6469 7265 6374 6f72 790a 2020  ave directory.  
-000303d0: 2020 2020 2020 636f 6e66 6967 203d 2043        config = C
-000303e0: 6f6e 6669 6728 636f 6e66 6967 5f70 6174  onfig(config_pat
-000303f0: 683d 7365 6c66 2e63 6f6e 6669 675f 7061  h=self.config_pa
-00030400: 7468 290a 2020 2020 2020 2020 7072 6f6a  th).        proj
-00030410: 5f73 6176 655f 7061 7468 203d 206f 732e  _save_path = os.
-00030420: 7061 7468 2e73 706c 6974 2874 6573 745f  path.split(test_
-00030430: 7072 6f6a 5f70 6174 6829 5b30 5d0a 2020  proj_path)[0].  
-00030440: 2020 2020 2020 636f 6e66 6967 2e73 6574        config.set
-00030450: 5f70 726f 6a65 6374 735f 7361 7665 5f70  _projects_save_p
-00030460: 6174 6828 7072 6f6a 5f73 6176 655f 7061  ath(proj_save_pa
-00030470: 7468 290a 0a20 2020 2020 2020 2023 2041  th)..        # A
-00030480: 7070 656e 6420 2774 6573 745f 7072 6f6a  ppend 'test_proj
-00030490: 5f70 6174 6827 2074 6f20 2773 6176 6564  _path' to 'saved
-000304a0: 5f70 726f 6a65 6374 732e 7061 7468 734c  _projects.pathsL
-000304b0: 6973 7427 2061 6e64 0a20 2020 2020 2020  ist' and.       
-000304c0: 2023 2027 6f70 656e 6564 5f70 726f 6a65   # 'opened_proje
-000304d0: 6374 7327 2c20 746f 2069 6e63 7265 6173  cts', to increas
-000304e0: 6520 636f 7665 7261 6765 0a20 2020 2020  e coverage.     
-000304f0: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
-00030500: 646f 772e 7361 7665 645f 7072 6f6a 6563  dow.saved_projec
-00030510: 7473 2e70 6174 6873 4c69 7374 2e61 7070  ts.pathsList.app
-00030520: 656e 6428 0a20 2020 2020 2020 2020 2020  end(.           
-00030530: 206f 732e 7061 7468 2e72 656c 7061 7468   os.path.relpath
-00030540: 2874 6573 745f 7072 6f6a 5f70 6174 6829  (test_proj_path)
-00030550: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00030560: 2020 2063 6f6e 6669 672e 7365 745f 6f70     config.set_op
-00030570: 656e 6564 5f70 726f 6a65 6374 7328 5b6f  ened_projects([o
-00030580: 732e 7061 7468 2e72 656c 7061 7468 2874  s.path.relpath(t
-00030590: 6573 745f 7072 6f6a 5f70 6174 6829 5d29  est_proj_path)])
-000305a0: 0a0a 2020 2020 2020 2020 2320 506f 7055  ..        # PopU
-000305b0: 7044 656c 6574 6550 726f 6a65 6374 2e65  pDeleteProject.e
-000305c0: 7865 6320 3d20 6c61 6d62 6461 2073 656c  xec = lambda sel
-000305d0: 665f 3a20 7365 6c66 5f2e 7368 6f77 2829  f_: self_.show()
-000305e0: 0a20 2020 2020 2020 2050 6f70 5570 4465  .        PopUpDe
-000305f0: 6c65 7465 5072 6f6a 6563 742e 6578 6563  leteProject.exec
-00030600: 203d 206c 616d 6264 6120 7365 6c66 5f3a   = lambda self_:
-00030610: 204e 6f6e 650a 0a20 2020 2020 2020 2023   None..        #
-00030620: 2044 656c 6574 6573 2061 2070 726f 6a65   Deletes a proje
-00030630: 6374 2077 6974 6820 7468 6520 7072 6f6a  ct with the proj
-00030640: 6563 7473 2066 6f6c 6465 7220 7365 740a  ects folder set.
-00030650: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
-00030660: 6e5f 7769 6e64 6f77 2e64 656c 6574 655f  n_window.delete_
-00030670: 7072 6f6a 6563 7428 290a 0a20 2020 2020  project()..     
-00030680: 2020 2065 7850 6f70 7570 203d 2073 656c     exPopup = sel
-00030690: 662e 6d61 696e 5f77 696e 646f 772e 6578  f.main_window.ex
-000306a0: 506f 7075 700a 0a20 2020 2020 2020 2023  Popup..        #
-000306b0: 2043 6865 636b 7320 7468 6520 6669 7273   Checks the firs
-000306c0: 7420 7072 6f6a 6563 7420 746f 2062 6520  t project to be 
-000306d0: 6465 6c65 7465 640a 2020 2020 2020 2020  deleted.        
-000306e0: 6578 506f 7075 702e 6368 6563 6b5f 626f  exPopup.check_bo
-000306f0: 7865 735b 305d 2e73 6574 4368 6563 6b65  xes[0].setChecke
-00030700: 6428 5472 7565 290a 0a20 2020 2020 2020  d(True)..       
-00030710: 2023 204d 6f63 6b73 2074 6865 2064 6961   # Mocks the dia
-00030720: 6c6f 6720 626f 7820 746f 2064 6972 6563  log box to direc
-00030730: 746c 7920 7265 7475 726e 2027 5965 7354  tly return 'YesT
-00030740: 6f41 6c6c 270a 2020 2020 2020 2020 514d  oAll'.        QM
-00030750: 6573 7361 6765 426f 782e 7175 6573 7469  essageBox.questi
-00030760: 6f6e 203d 204d 6f63 6b28 7265 7475 726e  on = Mock(return
-00030770: 5f76 616c 7565 3d51 4d65 7373 6167 6542  _value=QMessageB
-00030780: 6f78 2e59 6573 546f 416c 6c29 0a20 2020  ox.YesToAll).   
-00030790: 2020 2020 2065 7850 6f70 7570 2e6f 6b5f       exPopup.ok_
-000307a0: 636c 6963 6b65 6428 290a 0a20 2020 2064  clicked()..    d
-000307b0: 6566 2074 6573 745f 7365 655f 616c 6c5f  ef test_see_all_
-000307c0: 7072 6f6a 6563 7473 2873 656c 6629 3a0a  projects(self):.
-000307d0: 2020 2020 2020 2020 2222 2243 7265 6174          """Creat
-000307e0: 6573 2032 2070 726f 6a65 6374 7320 616e  es 2 projects an
-000307f0: 6420 7472 6965 7320 746f 206f 7065 6e20  d tries to open 
-00030800: 7468 656d 2074 6872 6f75 6768 2074 6865  them through the
-00030810: 2061 6c6c 2070 726f 6a65 6374 7320 706f   all projects po
-00030820: 702d 7570 2e0a 0a20 2020 2020 2020 202d  p-up...        -
-00030830: 2054 6573 7473 3a0a 2020 2020 2020 2020   Tests:.        
-00030840: 2020 2020 2d20 4d61 696e 5769 6e64 6f77      - MainWindow
-00030850: 2e73 6565 5f61 6c6c 5f70 726f 6a65 6374  .see_all_project
-00030860: 730a 2020 2020 2020 2020 2020 2020 2d20  s.            - 
-00030870: 506f 7055 7053 6565 416c 6c50 726f 6a65  PopUpSeeAllProje
-00030880: 6374 730a 0a20 2020 2020 2020 202d 204d  cts..        - M
-00030890: 6f63 6b73 3a0a 2020 2020 2020 2020 2020  ocks:.          
-000308a0: 2020 2d20 506f 7055 7053 6565 416c 6c50    - PopUpSeeAllP
-000308b0: 726f 6a65 6374 732e 6578 6563 0a20 2020  rojects.exec.   
-000308c0: 2020 2020 2020 2020 202d 2051 4d65 7373           - QMess
-000308d0: 6167 6542 6f78 2e65 7865 630a 2020 2020  ageBox.exec.    
-000308e0: 2020 2020 2222 220a 0a20 2020 2020 2020      """..       
-000308f0: 2023 2053 6574 7320 7368 6f72 7463 7574   # Sets shortcut
-00030900: 7320 666f 7220 6f62 6a65 6374 7320 7468  s for objects th
-00030910: 6174 2061 7265 206f 6674 656e 2075 7365  at are often use
-00030920: 640a 2020 2020 2020 2020 6d61 696e 5f77  d.        main_w
-00030930: 6e64 203d 2073 656c 662e 6d61 696e 5f77  nd = self.main_w
-00030940: 696e 646f 770a 0a20 2020 2020 2020 2023  indow..        #
-00030950: 2043 7265 6174 6573 2032 206e 6577 2070   Creates 2 new p
-00030960: 726f 6a65 6374 2066 6f6c 6465 7273 0a20  roject folders. 
-00030970: 2020 2020 2020 2070 726f 6a65 6374 5f38         project_8
-00030980: 5f70 6174 6820 3d20 7365 6c66 2e67 6574  _path = self.get
-00030990: 5f6e 6577 5f74 6573 745f 7072 6f6a 6563  _new_test_projec
-000309a0: 7428 6e61 6d65 3d22 7072 6f6a 6563 745f  t(name="project_
-000309b0: 3822 290a 2020 2020 2020 2020 7072 6f6a  8").        proj
-000309c0: 6563 745f 395f 7061 7468 203d 2073 656c  ect_9_path = sel
-000309d0: 662e 6765 745f 6e65 775f 7465 7374 5f70  f.get_new_test_p
-000309e0: 726f 6a65 6374 286e 616d 653d 2270 726f  roject(name="pro
-000309f0: 6a65 6374 5f39 2229 0a0a 2020 2020 2020  ject_9")..      
-00030a00: 2020 2320 5365 7473 2074 6865 2070 726f    # Sets the pro
-00030a10: 6a65 6374 7320 7361 7665 2070 6174 680a  jects save path.
-00030a20: 2020 2020 2020 2020 636f 6e66 6967 203d          config =
-00030a30: 2043 6f6e 6669 6728 636f 6e66 6967 5f70   Config(config_p
-00030a40: 6174 683d 7365 6c66 2e63 6f6e 6669 675f  ath=self.config_
-00030a50: 7061 7468 290a 2020 2020 2020 2020 636f  path).        co
-00030a60: 6e66 6967 2e73 6574 5f70 726f 6a65 6374  nfig.set_project
-00030a70: 735f 7361 7665 5f70 6174 6828 7365 6c66  s_save_path(self
-00030a80: 2e63 6f6e 6669 675f 7061 7468 290a 0a20  .config_path).. 
-00030a90: 2020 2020 2020 2023 2041 6464 7320 7468         # Adds th
-00030aa0: 6520 7072 6f6a 6563 7473 2074 6f20 7468  e projects to th
-00030ab0: 6520 2770 6174 6873 4c69 7374 270a 2020  e 'pathsList'.  
-00030ac0: 2020 2020 2020 6d61 696e 5f77 6e64 2e73        main_wnd.s
-00030ad0: 6176 6564 5f70 726f 6a65 6374 732e 7061  aved_projects.pa
-00030ae0: 7468 734c 6973 742e 6170 7065 6e64 2870  thsList.append(p
-00030af0: 726f 6a65 6374 5f38 5f70 6174 6829 0a20  roject_8_path). 
-00030b00: 2020 2020 2020 206d 6169 6e5f 776e 642e         main_wnd.
-00030b10: 7361 7665 645f 7072 6f6a 6563 7473 2e70  saved_projects.p
-00030b20: 6174 6873 4c69 7374 2e61 7070 656e 6428  athsList.append(
-00030b30: 7072 6f6a 6563 745f 395f 7061 7468 290a  project_9_path).
-00030b40: 0a20 2020 2020 2020 2023 204d 6f63 6b73  .        # Mocks
-00030b50: 2074 6865 2065 7865 6375 7469 6f6e 206f   the execution o
-00030b60: 6620 2750 6f70 5570 5365 6541 6c6c 5072  f 'PopUpSeeAllPr
-00030b70: 6f6a 6563 7473 2720 616e 6420 2751 4d65  ojects' and 'QMe
-00030b80: 7373 6167 6542 6f78 270a 2020 2020 2020  ssageBox'.      
-00030b90: 2020 506f 7055 7053 6565 416c 6c50 726f    PopUpSeeAllPro
-00030ba0: 6a65 6374 732e 6578 6563 203d 206c 616d  jects.exec = lam
-00030bb0: 6264 6120 783a 204e 6f6e 650a 2020 2020  bda x: None.    
-00030bc0: 2020 2020 514d 6573 7361 6765 426f 782e      QMessageBox.
-00030bd0: 6578 6563 203d 206c 616d 6264 6120 783a  exec = lambda x:
-00030be0: 204e 6f6e 650a 0a20 2020 2020 2020 2023   None..        #
-00030bf0: 2044 656c 6574 6573 2074 6865 2066 6f6c   Deletes the fol
-00030c00: 6465 7220 636f 6e74 6169 6e69 6e67 2074  der containing t
-00030c10: 6865 2070 726f 6a65 6374 2039 0a20 2020  he project 9.   
-00030c20: 2020 2020 2073 6875 7469 6c2e 726d 7472       shutil.rmtr
-00030c30: 6565 2870 726f 6a65 6374 5f39 5f70 6174  ee(project_9_pat
-00030c40: 6829 0a0a 2020 2020 2020 2020 2320 5368  h)..        # Sh
-00030c50: 6f77 2074 6865 2070 726f 6a65 6374 7320  ow the projects 
-00030c60: 706f 702d 7570 0a20 2020 2020 2020 206d  pop-up.        m
-00030c70: 6169 6e5f 776e 642e 7365 655f 616c 6c5f  ain_wnd.see_all_
-00030c80: 7072 6f6a 6563 7473 2829 0a0a 2020 2020  projects()..    
-00030c90: 2020 2020 6974 656d 5f30 203d 2073 656c      item_0 = sel
-00030ca0: 662e 6d61 696e 5f77 696e 646f 772e 6578  f.main_window.ex
-00030cb0: 506f 7075 702e 7472 6565 5769 6467 6574  Popup.treeWidget
-00030cc0: 2e69 7465 6d41 7428 302c 2030 290a 2020  .itemAt(0, 0).  
-00030cd0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00030ce0: 7445 7175 616c 2869 7465 6d5f 302e 7465  tEqual(item_0.te
-00030cf0: 7874 2830 292c 2022 7072 6f6a 6563 745f  xt(0), "project_
-00030d00: 3822 290a 2020 2020 2020 2020 7365 6c66  8").        self
-00030d10: 2e61 7373 6572 7445 7175 616c 280a 2020  .assertEqual(.  
-00030d20: 2020 2020 2020 2020 2020 6d61 696e 5f77            main_w
-00030d30: 6e64 2e65 7850 6f70 7570 2e74 7265 6557  nd.exPopup.treeW
-00030d40: 6964 6765 742e 6974 656d 4265 6c6f 7728  idget.itemBelow(
-00030d50: 6974 656d 5f30 292e 7465 7874 2830 292c  item_0).text(0),
-00030d60: 2022 7072 6f6a 6563 745f 3922 0a20 2020   "project_9".   
-00030d70: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-00030d80: 2320 4173 7365 7274 7320 7468 6174 2070  # Asserts that p
-00030d90: 726f 6a65 6374 2038 2069 7320 6e6f 7420  roject 8 is not 
-00030da0: 6f70 656e 6564 3a0a 2020 2020 2020 2020  opened:.        
-00030db0: 636f 6e66 6967 203d 2043 6f6e 6669 6728  config = Config(
-00030dc0: 636f 6e66 6967 5f70 6174 683d 7365 6c66  config_path=self
-00030dd0: 2e63 6f6e 6669 675f 7061 7468 290a 2020  .config_path).  
-00030de0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00030df0: 744e 6f74 4571 7561 6c28 0a20 2020 2020  tNotEqual(.     
-00030e00: 2020 2020 2020 206f 732e 7061 7468 2e61         os.path.a
-00030e10: 6273 7061 7468 2863 6f6e 6669 672e 6765  bspath(config.ge
-00030e20: 745f 6f70 656e 6564 5f70 726f 6a65 6374  t_opened_project
-00030e30: 7328 295b 305d 292c 2070 726f 6a65 6374  s()[0]), project
-00030e40: 5f38 5f70 6174 680a 2020 2020 2020 2020  _8_path.        
-00030e50: 290a 0a20 2020 2020 2020 2023 2054 7269  )..        # Tri
-00030e60: 6573 2074 6f20 6f70 656e 2061 2070 726f  es to open a pro
-00030e70: 6a65 6374 2077 6974 6820 6e6f 2070 726f  ject with no pro
-00030e80: 6a65 6374 7320 7365 6c65 6374 6564 0a20  jects selected. 
-00030e90: 2020 2020 2020 206d 6169 6e5f 776e 642e         main_wnd.
-00030ea0: 6578 506f 7075 702e 6f70 656e 5f70 726f  exPopup.open_pro
-00030eb0: 6a65 6374 2829 0a0a 2020 2020 2020 2020  ject()..        
-00030ec0: 2320 5365 6c65 6374 7320 7072 6f6a 6563  # Selects projec
-00030ed0: 7420 382c 2077 6869 6368 2077 6173 206e  t 8, which was n
-00030ee0: 6f74 2064 656c 6574 6564 0a20 2020 2020  ot deleted.     
-00030ef0: 2020 2069 7465 6d5f 302e 7365 7453 656c     item_0.setSel
-00030f00: 6563 7465 6428 5472 7565 290a 0a20 2020  ected(True)..   
-00030f10: 2020 2020 2023 204f 7065 6e73 2070 726f       # Opens pro
-00030f20: 6a65 6374 2038 0a20 2020 2020 2020 206d  ject 8.        m
-00030f30: 6169 6e5f 776e 642e 6578 506f 7075 702e  ain_wnd.exPopup.
-00030f40: 6f70 656e 5f70 726f 6a65 6374 2829 0a0a  open_project()..
-00030f50: 2020 2020 2020 2020 2320 4173 7365 7274          # Assert
-00030f60: 7320 7468 6174 2070 726f 6a65 6374 2038  s that project 8
-00030f70: 2069 7320 6e6f 7720 6f70 656e 6564 0a20   is now opened. 
-00030f80: 2020 2020 2020 2063 6f6e 6669 6720 3d20         config = 
-00030f90: 436f 6e66 6967 2863 6f6e 6669 675f 7061  Config(config_pa
-00030fa0: 7468 3d73 656c 662e 636f 6e66 6967 5f70  th=self.config_p
-00030fb0: 6174 6829 0a20 2020 2020 2020 2073 656c  ath).        sel
-00030fc0: 662e 6173 7365 7274 4571 7561 6c28 0a20  f.assertEqual(. 
-00030fd0: 2020 2020 2020 2020 2020 206f 732e 7061             os.pa
-00030fe0: 7468 2e61 6273 7061 7468 2863 6f6e 6669  th.abspath(confi
-00030ff0: 672e 6765 745f 6f70 656e 6564 5f70 726f  g.get_opened_pro
-00031000: 6a65 6374 7328 295b 305d 292c 2070 726f  jects()[0]), pro
-00031010: 6a65 6374 5f38 5f70 6174 680a 2020 2020  ject_8_path.    
-00031020: 2020 2020 290a 0a20 2020 2064 6566 2074      )..    def t
-00031030: 6573 745f 736f 6674 7761 7265 5f70 7265  est_software_pre
-00031040: 6665 7265 6e63 6573 5f70 6f70 5f75 7028  ferences_pop_up(
-00031050: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
-00031060: 2222 4f70 656e 7320 7468 6520 7072 6566  ""Opens the pref
-00031070: 6572 656e 6365 7320 706f 7020 7570 2061  erences pop up a
-00031080: 6e64 2063 6861 6e67 6573 2070 6172 616d  nd changes param
-00031090: 6574 6572 732e 0a0a 2020 2020 2020 2020  eters...        
-000310a0: 2d20 5465 7374 733a 0a20 2020 2020 2020  - Tests:.       
-000310b0: 2020 2020 202d 204d 6169 6e57 696e 646f       - MainWindo
-000310c0: 772e 736f 6674 7761 7265 5f70 7265 6665  w.software_prefe
-000310d0: 7265 6e63 6573 5f70 6f70 5f75 700a 2020  rences_pop_up.  
-000310e0: 2020 2020 2020 2020 2020 2d20 506f 7055            - PopU
-000310f0: 7050 7265 6665 7265 6e63 6573 0a0a 2020  pPreferences..  
-00031100: 2020 2020 2020 2d20 4d6f 636b 730a 2020        - Mocks.  
-00031110: 2020 2020 2020 2020 2020 2d20 5146 696c            - QFil
-00031120: 6544 6961 6c6f 672e 6765 744f 7065 6e46  eDialog.getOpenF
-00031130: 696c 654e 616d 650a 2020 2020 2020 2020  ileName.        
-00031140: 2020 2020 2d20 5146 696c 6544 6961 6c6f      - QFileDialo
-00031150: 672e 6765 7445 7869 7374 696e 6744 6972  g.getExistingDir
-00031160: 6563 746f 7279 0a20 2020 2020 2020 2020  ectory.         
-00031170: 2020 202d 2051 4c69 6e65 4564 6974 2e74     - QLineEdit.t
-00031180: 6578 740a 2020 2020 2020 2020 2020 2020  ext.            
-00031190: 2d20 5144 6961 6c6f 672e 6578 6563 0a20  - QDialog.exec. 
-000311a0: 2020 2020 2020 2020 2020 202d 2051 4d65             - QMe
-000311b0: 7373 6167 6542 6f78 2e65 7865 630a 2020  ssageBox.exec.  
-000311c0: 2020 2020 2020 2020 2020 2d20 5150 6c61            - QPla
-000311d0: 696e 5465 7874 4564 6974 2e74 6f50 6c61  inTextEdit.toPla
-000311e0: 696e 5465 7874 0a20 2020 2020 2020 2022  inText.        "
-000311f0: 2222 0a0a 2020 2020 2020 2020 2320 5365  ""..        # Se
-00031200: 7473 2073 686f 7274 6375 7473 2066 6f72  ts shortcuts for
-00031210: 206f 626a 6563 7473 2074 6861 7420 6172   objects that ar
-00031220: 6520 6f66 7465 6e20 7573 6564 0a20 2020  e often used.   
-00031230: 2020 2020 206d 6169 6e5f 776e 6420 3d20       main_wnd = 
-00031240: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00031250: 0a20 2020 2020 2020 2070 706c 5f6d 616e  .        ppl_man
-00031260: 6167 6572 203d 206d 6169 6e5f 776e 642e  ager = main_wnd.
-00031270: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
-00031280: 0a0a 2020 2020 2020 2020 2320 4372 6561  ..        # Crea
-00031290: 7465 7320 6120 6e65 7720 7072 6f6a 6563  tes a new projec
-000312a0: 7420 666f 6c64 6572 2061 6e64 2061 6464  t folder and add
-000312b0: 7320 6f6e 6520 646f 6375 6d65 6e74 2074  s one document t
-000312c0: 6f20 7468 6520 7072 6f6a 6563 740a 2020  o the project.  
-000312d0: 2020 2020 2020 7072 6f6a 6563 745f 385f        project_8_
-000312e0: 7061 7468 203d 2073 656c 662e 6765 745f  path = self.get_
-000312f0: 6e65 775f 7465 7374 5f70 726f 6a65 6374  new_test_project
-00031300: 2829 0a20 2020 2020 2020 2070 706c 5f6d  ().        ppl_m
-00031310: 616e 6167 6572 2e70 726f 6a65 6374 2e66  anager.project.f
-00031320: 6f6c 6465 7220 3d20 7072 6f6a 6563 745f  older = project_
-00031330: 385f 7061 7468 0a0a 2020 2020 2020 2020  8_path..        
-00031340: 2320 4d6f 6469 6669 6361 7469 6f6e 206f  # Modification o
-00031350: 6620 736f 6d65 2063 6f6e 6669 6775 7261  f some configura
-00031360: 7469 6f6e 2070 6172 616d 6574 6572 730a  tion parameters.
-00031370: 2020 2020 2020 2020 636f 6e66 6967 203d          config =
-00031380: 2043 6f6e 6669 6728 636f 6e66 6967 5f70   Config(config_p
-00031390: 6174 683d 7365 6c66 2e63 6f6e 6669 675f  ath=self.config_
-000313a0: 7061 7468 290a 2020 2020 2020 2020 636f  path).        co
-000313b0: 6e66 6967 2e73 6574 436f 6e74 726f 6c56  nfig.setControlV
-000313c0: 3128 5472 7565 290a 2020 2020 2020 2020  1(True).        
-000313d0: 636f 6e66 6967 2e73 6574 4175 746f 5361  config.setAutoSa
-000313e0: 7665 2854 7275 6529 0a20 2020 2020 2020  ve(True).       
-000313f0: 2063 6f6e 6669 672e 7365 745f 636c 696e   config.set_clin
-00031400: 6963 616c 5f6d 6f64 6528 5472 7565 290a  ical_mode(True).
-00031410: 2020 2020 2020 2020 636f 6e66 6967 2e73          config.s
-00031420: 6574 5f75 7365 5f66 736c 2854 7275 6529  et_use_fsl(True)
-00031430: 0a20 2020 2020 2020 2063 6f6e 6669 672e  .        config.
-00031440: 7365 745f 7573 655f 6166 6e69 2854 7275  set_use_afni(Tru
-00031450: 6529 0a20 2020 2020 2020 2063 6f6e 6669  e).        confi
-00031460: 672e 7365 745f 7573 655f 616e 7473 2854  g.set_use_ants(T
-00031470: 7275 6529 0a20 2020 2020 2020 2063 6f6e  rue).        con
-00031480: 6669 672e 7365 745f 6d61 696e 7769 6e64  fig.set_mainwind
-00031490: 6f77 5f73 697a 6528 5b31 3030 2c20 3130  ow_size([100, 10
-000314a0: 302c 2031 3030 5d29 0a0a 2020 2020 2020  0, 100])..      
-000314b0: 2020 2320 4f70 656e 2061 6e64 2063 6c6f    # Open and clo
-000314c0: 7365 2074 6865 2073 6f66 7477 6172 6520  se the software 
-000314d0: 7072 6566 6572 656e 6365 7320 7769 6e64  preferences wind
-000314e0: 6f77 0a20 2020 2020 2020 206d 6169 6e5f  ow.        main_
-000314f0: 776e 642e 736f 6674 7761 7265 5f70 7265  wnd.software_pre
-00031500: 6665 7265 6e63 6573 5f70 6f70 5f75 7028  ferences_pop_up(
-00031510: 290a 2020 2020 2020 2020 6d61 696e 5f77  ).        main_w
-00031520: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
-00031530: 656e 6365 732e 636c 6f73 6528 290a 0a20  ences.close().. 
-00031540: 2020 2020 2020 2023 2041 6374 6976 6174         # Activat
-00031550: 6520 7468 6520 5631 2063 6f6e 7472 6f6c  e the V1 control
-00031560: 6c65 7220 4755 4920 616e 6420 7468 6520  ler GUI and the 
-00031570: 7573 6572 206d 6f64 650a 2020 2020 2020  user mode.      
-00031580: 2020 636f 6e66 6967 2e73 6574 436f 6e74    config.setCont
-00031590: 726f 6c56 3128 4661 6c73 6529 0a20 2020  rolV1(False).   
-000315a0: 2020 2020 2063 6f6e 6669 672e 7365 745f       config.set_
-000315b0: 7573 6572 5f6d 6f64 6528 5472 7565 290a  user_mode(True).
-000315c0: 0a20 2020 2020 2020 2023 2045 6e61 626c  .        # Enabl
-000315d0: 6573 204d 6174 6c61 6220 4d43 520a 2020  es Matlab MCR.  
-000315e0: 2020 2020 2020 636f 6e66 6967 2e73 6574        config.set
-000315f0: 5f75 7365 5f6d 6174 6c61 625f 7374 616e  _use_matlab_stan
-00031600: 6461 6c6f 6e65 2854 7275 6529 0a0a 2020  dalone(True)..  
-00031610: 2020 2020 2020 2320 4368 6563 6b20 7468        # Check th
-00031620: 6174 206d 6174 6c61 6220 4d43 5220 6973  at matlab MCR is
-00031630: 2073 656c 6563 7465 640a 2020 2020 2020   selected.      
-00031640: 2020 6d61 696e 5f77 6e64 2e73 6f66 7477    main_wnd.softw
-00031650: 6172 655f 7072 6566 6572 656e 6365 735f  are_preferences_
-00031660: 706f 705f 7570 2829 0a20 2020 2020 2020  pop_up().       
-00031670: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
-00031680: 280a 2020 2020 2020 2020 2020 2020 6d61  (.            ma
-00031690: 696e 5f77 6e64 2e70 6f70 5f75 705f 7072  in_wnd.pop_up_pr
-000316a0: 6566 6572 656e 6365 732e 7573 655f 6d61  eferences.use_ma
-000316b0: 746c 6162 5f73 7461 6e64 616c 6f6e 655f  tlab_standalone_
-000316c0: 6368 6563 6b62 6f78 2e69 7343 6865 636b  checkbox.isCheck
-000316d0: 6564 2829 0a20 2020 2020 2020 2029 0a20  ed().        ). 
-000316e0: 2020 2020 2020 206d 6169 6e5f 776e 642e         main_wnd.
-000316f0: 706f 705f 7570 5f70 7265 6665 7265 6e63  pop_up_preferenc
-00031700: 6573 2e63 6c6f 7365 2829 0a0a 2020 2020  es.close()..    
-00031710: 2020 2020 2320 456e 6162 6c65 7320 4d61      # Enables Ma
-00031720: 746c 6162 0a20 2020 2020 2020 2063 6f6e  tlab.        con
-00031730: 6669 672e 7365 745f 7573 655f 6d61 746c  fig.set_use_matl
-00031740: 6162 2854 7275 6529 0a0a 2020 2020 2020  ab(True)..      
-00031750: 2020 2320 4368 6563 6b20 7468 6174 206d    # Check that m
-00031760: 6174 6c61 6220 6973 2073 656c 6563 7465  atlab is selecte
-00031770: 6420 616e 6420 6d61 746c 6162 204d 4352  d and matlab MCR
-00031780: 206e 6f74 0a20 2020 2020 2020 206d 6169   not.        mai
-00031790: 6e5f 776e 642e 736f 6674 7761 7265 5f70  n_wnd.software_p
-000317a0: 7265 6665 7265 6e63 6573 5f70 6f70 5f75  references_pop_u
-000317b0: 7028 290a 2020 2020 2020 2020 7365 6c66  p().        self
-000317c0: 2e61 7373 6572 7454 7275 6528 0a20 2020  .assertTrue(.   
-000317d0: 2020 2020 2020 2020 206d 6169 6e5f 776e           main_wn
-000317e0: 642e 706f 705f 7570 5f70 7265 6665 7265  d.pop_up_prefere
-000317f0: 6e63 6573 2e75 7365 5f6d 6174 6c61 625f  nces.use_matlab_
-00031800: 6368 6563 6b62 6f78 2e69 7343 6865 636b  checkbox.isCheck
-00031810: 6564 2829 0a20 2020 2020 2020 2029 0a20  ed().        ). 
-00031820: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00031830: 7274 4661 6c73 6528 0a20 2020 2020 2020  rtFalse(.       
-00031840: 2020 2020 206d 6169 6e5f 776e 642e 706f       main_wnd.po
-00031850: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
-00031860: 2e75 7365 5f6d 6174 6c61 625f 7374 616e  .use_matlab_stan
-00031870: 6461 6c6f 6e65 5f63 6865 636b 626f 782e  dalone_checkbox.
-00031880: 6973 4368 6563 6b65 6428 290a 2020 2020  isChecked().    
-00031890: 2020 2020 290a 2020 2020 2020 2020 6d61      ).        ma
-000318a0: 696e 5f77 6e64 2e70 6f70 5f75 705f 7072  in_wnd.pop_up_pr
-000318b0: 6566 6572 656e 6365 732e 636c 6f73 6528  eferences.close(
-000318c0: 290a 0a20 2020 2020 2020 2023 2045 6e61  )..        # Ena
-000318d0: 626c 6573 2053 504d 0a20 2020 2020 2020  bles SPM.       
-000318e0: 2063 6f6e 6669 672e 7365 745f 7573 655f   config.set_use_
-000318f0: 7370 6d28 5472 7565 290a 0a20 2020 2020  spm(True)..     
-00031900: 2020 2023 2043 6865 636b 2074 6861 7420     # Check that 
-00031910: 5350 4d20 616e 6420 6d61 746c 6162 2061  SPM and matlab a
-00031920: 7265 2073 656c 6563 7465 640a 2020 2020  re selected.    
-00031930: 2020 2020 6d61 696e 5f77 6e64 2e73 6f66      main_wnd.sof
-00031940: 7477 6172 655f 7072 6566 6572 656e 6365  tware_preference
-00031950: 735f 706f 705f 7570 2829 0a20 2020 2020  s_pop_up().     
-00031960: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-00031970: 7565 280a 2020 2020 2020 2020 2020 2020  ue(.            
-00031980: 6d61 696e 5f77 6e64 2e70 6f70 5f75 705f  main_wnd.pop_up_
-00031990: 7072 6566 6572 656e 6365 732e 7573 655f  preferences.use_
-000319a0: 6d61 746c 6162 5f63 6865 636b 626f 782e  matlab_checkbox.
-000319b0: 6973 4368 6563 6b65 6428 290a 2020 2020  isChecked().    
-000319c0: 2020 2020 290a 2020 2020 2020 2020 7365      ).        se
-000319d0: 6c66 2e61 7373 6572 7454 7275 6528 0a20  lf.assertTrue(. 
-000319e0: 2020 2020 2020 2020 2020 206d 6169 6e5f             main_
-000319f0: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
-00031a00: 7265 6e63 6573 2e75 7365 5f73 706d 5f63  rences.use_spm_c
-00031a10: 6865 636b 626f 782e 6973 4368 6563 6b65  heckbox.isChecke
-00031a20: 6428 290a 2020 2020 2020 2020 290a 2020  d().        ).  
-00031a30: 2020 2020 2020 6d61 696e 5f77 6e64 2e70        main_wnd.p
-00031a40: 6f70 5f75 705f 7072 6566 6572 656e 6365  op_up_preference
-00031a50: 732e 636c 6f73 6528 290a 0a20 2020 2020  s.close()..     
-00031a60: 2020 2023 2045 6e61 626c 6573 2053 504d     # Enables SPM
-00031a70: 2073 7461 6e64 616c 6f6e 650a 2020 2020   standalone.    
-00031a80: 2020 2020 636f 6e66 6967 2e73 6574 5f75      config.set_u
-00031a90: 7365 5f73 706d 5f73 7461 6e64 616c 6f6e  se_spm_standalon
-00031aa0: 6528 5472 7565 290a 0a20 2020 2020 2020  e(True)..       
-00031ab0: 2023 2043 6865 636b 2074 6861 7420 5350   # Check that SP
-00031ac0: 4d20 7374 616e 6461 6c6f 6e65 2061 6e64  M standalone and
-00031ad0: 206d 6174 6c61 6220 4d43 5220 6172 6520   matlab MCR are 
-00031ae0: 7365 6c65 6374 6564 2c0a 2020 2020 2020  selected,.      
-00031af0: 2020 2320 5350 4d20 616e 6420 6d61 746c    # SPM and matl
-00031b00: 6162 206e 6f74 0a20 2020 2020 2020 206d  ab not.        m
-00031b10: 6169 6e5f 776e 642e 736f 6674 7761 7265  ain_wnd.software
-00031b20: 5f70 7265 6665 7265 6e63 6573 5f70 6f70  _preferences_pop
-00031b30: 5f75 7028 290a 2020 2020 2020 2020 6966  _up().        if
-00031b40: 2022 5769 6e64 6f77 7322 206e 6f74 2069   "Windows" not i
-00031b50: 6e20 706c 6174 666f 726d 2e61 7263 6869  n platform.archi
-00031b60: 7465 6374 7572 6528 295b 315d 3a0a 2020  tecture()[1]:.  
-00031b70: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
-00031b80: 7373 6572 7454 7275 6528 0a20 2020 2020  ssertTrue(.     
-00031b90: 2020 2020 2020 2020 2020 206d 6169 6e5f             main_
-00031ba0: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
-00031bb0: 7265 6e63 6573 2e75 7365 5f6d 6174 6c61  rences.use_matla
-00031bc0: 625f 7374 616e 6461 6c6f 6e65 5f63 6865  b_standalone_che
-00031bd0: 636b 626f 782e 6973 4368 6563 6b65 6428  ckbox.isChecked(
-00031be0: 290a 2020 2020 2020 2020 2020 2020 290a  ).            ).
-00031bf0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00031c00: 2e61 7373 6572 7454 7275 6528 0a20 2020  .assertTrue(.   
-00031c10: 2020 2020 2020 2020 2020 2020 206d 6169               mai
-00031c20: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
-00031c30: 6665 7265 6e63 6573 2e75 7365 5f73 706d  ferences.use_spm
-00031c40: 5f73 7461 6e64 616c 6f6e 655f 6368 6563  _standalone_chec
-00031c50: 6b62 6f78 2e69 7343 6865 636b 6564 2829  kbox.isChecked()
-00031c60: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
-00031c70: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00031c80: 6173 7365 7274 4661 6c73 6528 0a20 2020  assertFalse(.   
-00031c90: 2020 2020 2020 2020 2020 2020 206d 6169               mai
-00031ca0: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
-00031cb0: 6665 7265 6e63 6573 2e75 7365 5f6d 6174  ferences.use_mat
-00031cc0: 6c61 625f 6368 6563 6b62 6f78 2e69 7343  lab_checkbox.isC
-00031cd0: 6865 636b 6564 2829 0a20 2020 2020 2020  hecked().       
-00031ce0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
-00031cf0: 2020 2073 656c 662e 6173 7365 7274 4661     self.assertFa
-00031d00: 6c73 6528 0a20 2020 2020 2020 2020 2020  lse(.           
-00031d10: 2020 2020 206d 6169 6e5f 776e 642e 706f       main_wnd.po
-00031d20: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
-00031d30: 2e75 7365 5f73 706d 5f63 6865 636b 626f  .use_spm_checkbo
-00031d40: 782e 6973 4368 6563 6b65 6428 290a 2020  x.isChecked().  
-00031d50: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00031d60: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
-00031d70: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
-00031d80: 636c 6f73 6528 290a 0a20 2020 2020 2020  close()..       
-00031d90: 2023 204d 6f63 6b73 2027 5146 696c 6544   # Mocks 'QFileD
-00031da0: 6961 6c6f 672e 6765 744f 7065 6e46 696c  ialog.getOpenFil
-00031db0: 654e 616d 6527 2028 7265 7475 726e 7320  eName' (returns 
-00031dc0: 616e 2065 7869 7374 696e 6720 6669 6c65  an existing file
-00031dd0: 290a 2020 2020 2020 2020 2320 5468 6973  ).        # This
-00031de0: 206d 6574 686f 6420 7265 7475 726e 7320   method returns 
-00031df0: 6120 7475 706c 6520 2866 696c 656e 616d  a tuple (filenam
-00031e00: 652c 2066 696c 655f 7479 7065 7329 2c20  e, file_types), 
-00031e10: 7768 6572 6520 6669 6c65 5f74 7970 6573  where file_types
-00031e20: 0a20 2020 2020 2020 2023 2069 7320 7468  .        # is th
-00031e30: 6520 616c 6c6f 7765 6420 6669 6c65 2074  e allowed file t
-00031e40: 7970 6520 2865 672e 2027 416c 6c20 4669  ype (eg. 'All Fi
-00031e50: 6c65 7320 282a 2927 290a 2020 2020 2020  les (*)').      
-00031e60: 2020 6d6f 636b 5f70 6174 6820 3d20 6f73    mock_path = os
-00031e70: 2e70 6174 682e 7370 6c69 7428 7072 6f6a  .path.split(proj
-00031e80: 6563 745f 385f 7061 7468 295b 305d 0a20  ect_8_path)[0]. 
-00031e90: 2020 2020 2020 2051 4669 6c65 4469 616c         QFileDial
-00031ea0: 6f67 2e67 6574 4f70 656e 4669 6c65 4e61  og.getOpenFileNa
-00031eb0: 6d65 203d 206c 616d 6264 6120 782c 2079  me = lambda x, y
-00031ec0: 2c20 7a3a 2028 6d6f 636b 5f70 6174 682c  , z: (mock_path,
-00031ed0: 290a 0a20 2020 2020 2020 2023 204d 6f63  )..        # Moc
-00031ee0: 6b73 2027 5146 696c 6544 6961 6c6f 672e  ks 'QFileDialog.
-00031ef0: 6765 7445 7869 7374 696e 6744 6972 6563  getExistingDirec
-00031f00: 746f 7279 270a 2020 2020 2020 2020 5146  tory'.        QF
-00031f10: 696c 6544 6961 6c6f 672e 6765 7445 7869  ileDialog.getExi
-00031f20: 7374 696e 6744 6972 6563 746f 7279 203d  stingDirectory =
-00031f30: 206c 616d 6264 6120 782c 2079 2c20 7a3a   lambda x, y, z:
-00031f40: 206d 6f63 6b5f 7061 7468 0a0a 2020 2020   mock_path..    
-00031f50: 2020 2020 2320 4f70 656e 2074 6865 2073      # Open the s
-00031f60: 6f66 7477 6172 6520 7072 6566 6572 656e  oftware preferen
-00031f70: 6365 7320 7769 6e64 6f77 0a20 2020 2020  ces window.     
-00031f80: 2020 206d 6169 6e5f 776e 642e 736f 6674     main_wnd.soft
-00031f90: 7761 7265 5f70 7265 6665 7265 6e63 6573  ware_preferences
-00031fa0: 5f70 6f70 5f75 7028 290a 0a20 2020 2020  _pop_up()..     
-00031fb0: 2020 2023 2042 726f 7773 6573 2074 6865     # Browses the
-00031fc0: 2046 534c 2070 6174 680a 2020 2020 2020   FSL path.      
-00031fd0: 2020 6d61 696e 5f77 6e64 2e70 6f70 5f75    main_wnd.pop_u
-00031fe0: 705f 7072 6566 6572 656e 6365 732e 6272  p_preferences.br
-00031ff0: 6f77 7365 5f66 736c 2829 0a20 2020 2020  owse_fsl().     
-00032000: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00032010: 7561 6c28 0a20 2020 2020 2020 2020 2020  ual(.           
-00032020: 206d 6169 6e5f 776e 642e 706f 705f 7570   main_wnd.pop_up
-00032030: 5f70 7265 6665 7265 6e63 6573 2e66 736c  _preferences.fsl
-00032040: 5f63 686f 6963 652e 7465 7874 2829 2c20  _choice.text(), 
-00032050: 6d6f 636b 5f70 6174 680a 2020 2020 2020  mock_path.      
-00032060: 2020 290a 0a20 2020 2020 2020 2023 2042    )..        # B
-00032070: 726f 7773 6573 2074 6865 2041 464e 4920  rowses the AFNI 
-00032080: 7061 7468 0a20 2020 2020 2020 206d 6169  path.        mai
-00032090: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
-000320a0: 6665 7265 6e63 6573 2e62 726f 7773 655f  ferences.browse_
-000320b0: 6166 6e69 2829 0a20 2020 2020 2020 2073  afni().        s
-000320c0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-000320d0: 0a20 2020 2020 2020 2020 2020 206d 6169  .            mai
-000320e0: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
-000320f0: 6665 7265 6e63 6573 2e61 666e 695f 6368  ferences.afni_ch
-00032100: 6f69 6365 2e74 6578 7428 292c 206d 6f63  oice.text(), moc
-00032110: 6b5f 7061 7468 0a20 2020 2020 2020 2029  k_path.        )
-00032120: 0a0a 2020 2020 2020 2020 2320 4272 6f77  ..        # Brow
-00032130: 7365 7320 7468 6520 414e 5453 2070 6174  ses the ANTS pat
-00032140: 680a 2020 2020 2020 2020 6d61 696e 5f77  h.        main_w
-00032150: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
-00032160: 656e 6365 732e 6272 6f77 7365 5f61 6e74  ences.browse_ant
-00032170: 7328 290a 2020 2020 2020 2020 7365 6c66  s().        self
-00032180: 2e61 7373 6572 7445 7175 616c 280a 2020  .assertEqual(.  
-00032190: 2020 2020 2020 2020 2020 6d61 696e 5f77            main_w
-000321a0: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
-000321b0: 656e 6365 732e 616e 7473 5f63 686f 6963  ences.ants_choic
-000321c0: 652e 7465 7874 2829 2c20 6d6f 636b 5f70  e.text(), mock_p
-000321d0: 6174 680a 2020 2020 2020 2020 290a 0a20  ath.        ).. 
-000321e0: 2020 2020 2020 2023 2042 726f 7773 6573         # Browses
-000321f0: 2074 6865 204d 4154 4c41 4220 7061 7468   the MATLAB path
-00032200: 0a20 2020 2020 2020 206d 6169 6e5f 776e  .        main_wn
-00032210: 642e 706f 705f 7570 5f70 7265 6665 7265  d.pop_up_prefere
-00032220: 6e63 6573 2e62 726f 7773 655f 6d61 746c  nces.browse_matl
-00032230: 6162 2829 0a20 2020 2020 2020 2073 656c  ab().        sel
-00032240: 662e 6173 7365 7274 4571 7561 6c28 0a20  f.assertEqual(. 
-00032250: 2020 2020 2020 2020 2020 206d 6169 6e5f             main_
-00032260: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
-00032270: 7265 6e63 6573 2e6d 6174 6c61 625f 6368  rences.matlab_ch
-00032280: 6f69 6365 2e74 6578 7428 292c 206d 6f63  oice.text(), moc
-00032290: 6b5f 7061 7468 0a20 2020 2020 2020 2029  k_path.        )
-000322a0: 0a0a 2020 2020 2020 2020 2320 4272 6f77  ..        # Brow
-000322b0: 7365 7320 7468 6520 4d41 544c 4142 204d  ses the MATLAB M
-000322c0: 4352 2070 6174 680a 2020 2020 2020 2020  CR path.        
-000322d0: 6d61 696e 5f77 6e64 2e70 6f70 5f75 705f  main_wnd.pop_up_
-000322e0: 7072 6566 6572 656e 6365 732e 6272 6f77  preferences.brow
-000322f0: 7365 5f6d 6174 6c61 625f 7374 616e 6461  se_matlab_standa
-00032300: 6c6f 6e65 2829 0a20 2020 2020 2020 2073  lone().        s
-00032310: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00032320: 0a20 2020 2020 2020 2020 2020 206d 6169  .            mai
-00032330: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
-00032340: 6665 7265 6e63 6573 2e6d 6174 6c61 625f  ferences.matlab_
-00032350: 7374 616e 6461 6c6f 6e65 5f63 686f 6963  standalone_choic
-00032360: 652e 7465 7874 2829 2c0a 2020 2020 2020  e.text(),.      
-00032370: 2020 2020 2020 6d6f 636b 5f70 6174 682c        mock_path,
-00032380: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-00032390: 2020 2020 2320 4272 6f77 7365 7320 7468      # Browses th
-000323a0: 6520 5350 4d20 7061 7468 0a20 2020 2020  e SPM path.     
-000323b0: 2020 206d 6169 6e5f 776e 642e 706f 705f     main_wnd.pop_
-000323c0: 7570 5f70 7265 6665 7265 6e63 6573 2e62  up_preferences.b
-000323d0: 726f 7773 655f 7370 6d28 290a 2020 2020  rowse_spm().    
-000323e0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-000323f0: 7175 616c 280a 2020 2020 2020 2020 2020  qual(.          
-00032400: 2020 6d61 696e 5f77 6e64 2e70 6f70 5f75    main_wnd.pop_u
-00032410: 705f 7072 6566 6572 656e 6365 732e 7370  p_preferences.sp
-00032420: 6d5f 6368 6f69 6365 2e74 6578 7428 292c  m_choice.text(),
-00032430: 206d 6f63 6b5f 7061 7468 0a20 2020 2020   mock_path.     
-00032440: 2020 2029 0a0a 2020 2020 2020 2020 2320     )..        # 
-00032450: 4272 6f77 7365 7320 7468 6520 5350 4d20  Browses the SPM 
-00032460: 5374 616e 6461 6c6f 6e65 2070 6174 680a  Standalone path.
-00032470: 2020 2020 2020 2020 6d61 696e 5f77 6e64          main_wnd
-00032480: 2e70 6f70 5f75 705f 7072 6566 6572 656e  .pop_up_preferen
-00032490: 6365 732e 6272 6f77 7365 5f73 706d 5f73  ces.browse_spm_s
-000324a0: 7461 6e64 616c 6f6e 6528 290a 2020 2020  tandalone().    
-000324b0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-000324c0: 7175 616c 280a 2020 2020 2020 2020 2020  qual(.          
-000324d0: 2020 6d61 696e 5f77 6e64 2e70 6f70 5f75    main_wnd.pop_u
-000324e0: 705f 7072 6566 6572 656e 6365 732e 7370  p_preferences.sp
-000324f0: 6d5f 7374 616e 6461 6c6f 6e65 5f63 686f  m_standalone_cho
-00032500: 6963 652e 7465 7874 2829 2c20 6d6f 636b  ice.text(), mock
-00032510: 5f70 6174 680a 2020 2020 2020 2020 290a  _path.        ).
-00032520: 0a20 2020 2020 2020 2023 2042 726f 7773  .        # Brows
-00032530: 6573 2074 6865 204d 7269 436f 6e76 2070  es the MriConv p
-00032540: 6174 680a 2020 2020 2020 2020 6d61 696e  ath.        main
-00032550: 5f77 6e64 2e70 6f70 5f75 705f 7072 6566  _wnd.pop_up_pref
-00032560: 6572 656e 6365 732e 6272 6f77 7365 5f6d  erences.browse_m
-00032570: 7269 5f63 6f6e 765f 7061 7468 2829 0a20  ri_conv_path(). 
-00032580: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00032590: 7274 4571 7561 6c28 0a20 2020 2020 2020  rtEqual(.       
-000325a0: 2020 2020 206d 6169 6e5f 776e 642e 706f       main_wnd.po
-000325b0: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
-000325c0: 2e6d 7269 5f63 6f6e 765f 7061 7468 5f6c  .mri_conv_path_l
-000325d0: 696e 655f 6564 6974 2e74 6578 7428 292c  ine_edit.text(),
-000325e0: 0a20 2020 2020 2020 2020 2020 206d 6f63  .            moc
-000325f0: 6b5f 7061 7468 2c0a 2020 2020 2020 2020  k_path,.        
-00032600: 290a 0a20 2020 2020 2020 2023 2042 726f  )..        # Bro
-00032610: 7773 6572 2074 6865 2070 726f 6a65 6374  wser the project
-00032620: 7320 7361 7665 2070 6174 680a 2020 2020  s save path.    
-00032630: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
-00032640: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
-00032650: 6272 6f77 7365 5f70 726f 6a65 6374 735f  browse_projects_
-00032660: 7361 7665 5f70 6174 6828 290a 2020 2020  save_path().    
-00032670: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-00032680: 7175 616c 280a 2020 2020 2020 2020 2020  qual(.          
-00032690: 2020 6d61 696e 5f77 6e64 2e70 6f70 5f75    main_wnd.pop_u
-000326a0: 705f 7072 6566 6572 656e 6365 732e 7072  p_preferences.pr
-000326b0: 6f6a 6563 7473 5f73 6176 655f 7061 7468  ojects_save_path
-000326c0: 5f6c 696e 655f 6564 6974 2e74 6578 7428  _line_edit.text(
-000326d0: 292c 0a20 2020 2020 2020 2020 2020 206d  ),.            m
-000326e0: 6f63 6b5f 7061 7468 2c0a 2020 2020 2020  ock_path,.      
-000326f0: 2020 290a 0a20 2020 2020 2020 2023 2053    )..        # S
-00032700: 6574 7320 7468 6520 6164 6d69 6e20 7061  ets the admin pa
-00032710: 7373 776f 7264 2074 6f20 6265 2027 6d6f  ssword to be 'mo
-00032720: 636b 5f61 646d 696e 5f70 6173 7377 6f72  ck_admin_passwor
-00032730: 6427 0a20 2020 2020 2020 2061 646d 696e  d'.        admin
-00032740: 5f70 6173 7377 6f72 6420 3d20 226d 6f63  _password = "moc
-00032750: 6b5f 6164 6d69 6e5f 7061 7373 776f 7264  k_admin_password
-00032760: 220a 2020 2020 2020 2020 6f6c 645f 7073  ".        old_ps
-00032770: 7377 6420 3d20 6d61 696e 5f77 6e64 2e70  swd = main_wnd.p
-00032780: 6f70 5f75 705f 7072 6566 6572 656e 6365  op_up_preference
-00032790: 732e 7361 6c74 202b 2061 646d 696e 5f70  s.salt + admin_p
-000327a0: 6173 7377 6f72 640a 2020 2020 2020 2020  assword.        
-000327b0: 6861 7368 5f70 7373 7764 203d 2073 6861  hash_psswd = sha
-000327c0: 3235 3628 6f6c 645f 7073 7377 642e 656e  256(old_psswd.en
-000327d0: 636f 6465 2829 292e 6865 7864 6967 6573  code()).hexdiges
-000327e0: 7428 290a 2020 2020 2020 2020 636f 6e66  t().        conf
-000327f0: 6967 2e73 6574 5f61 646d 696e 5f68 6173  ig.set_admin_has
-00032800: 6828 6861 7368 5f70 7373 7764 290a 0a20  h(hash_psswd).. 
-00032810: 2020 2020 2020 2023 2043 616c 6c73 2027         # Calls '
-00032820: 6164 6d69 6e5f 6d6f 6465 5f73 7769 7463  admin_mode_switc
-00032830: 6827 2077 6974 686f 7574 2063 6865 636b  h' without check
-00032840: 696e 6720 7468 6520 626f 780a 2020 2020  ing the box.    
-00032850: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
-00032860: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
-00032870: 6164 6d69 6e5f 6d6f 6465 5f73 7769 7463  admin_mode_switc
-00032880: 6828 290a 0a20 2020 2020 2020 2023 2043  h()..        # C
-00032890: 616c 6c73 2027 6164 6d69 6e5f 6d6f 6465  alls 'admin_mode
-000328a0: 5f73 7769 7463 6827 2c20 6d6f 636b 696e  _switch', mockin
-000328b0: 6720 7468 6520 6578 6563 7574 696f 6e20  g the execution 
-000328c0: 6f66 2027 5149 6e70 7574 4469 616c 6f67  of 'QInputDialog
-000328d0: 270a 2020 2020 2020 2020 6d61 696e 5f77  '.        main_w
-000328e0: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
-000328f0: 656e 6365 732e 6164 6d69 6e5f 6d6f 6465  ences.admin_mode
-00032900: 5f63 6865 636b 626f 782e 7365 7443 6865  _checkbox.setChe
-00032910: 636b 6564 2854 7275 6529 0a20 2020 2020  cked(True).     
-00032920: 2020 2051 496e 7075 7444 6961 6c6f 672e     QInputDialog.
-00032930: 6765 7454 6578 7420 3d20 6c61 6d62 6461  getText = lambda
-00032940: 2077 2c20 782c 2079 2c20 7a2c 3a20 284e   w, x, y, z,: (N
-00032950: 6f6e 652c 2046 616c 7365 290a 2020 2020  one, False).    
-00032960: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
-00032970: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
-00032980: 6164 6d69 6e5f 6d6f 6465 5f73 7769 7463  admin_mode_switc
-00032990: 6828 290a 0a20 2020 2020 2020 2023 2054  h()..        # T
-000329a0: 7269 6573 2074 6f20 6163 7469 7661 7465  ries to activate
-000329b0: 2061 646d 696e 206d 6f64 6520 7769 7468   admin mode with
-000329c0: 2074 6865 2077 726f 6e67 2070 6173 7377   the wrong passw
-000329d0: 6f72 640a 2020 2020 2020 2020 6d61 696e  ord.        main
-000329e0: 5f77 6e64 2e70 6f70 5f75 705f 7072 6566  _wnd.pop_up_pref
-000329f0: 6572 656e 6365 732e 6164 6d69 6e5f 6d6f  erences.admin_mo
-00032a00: 6465 5f63 6865 636b 626f 782e 7365 7443  de_checkbox.setC
-00032a10: 6865 636b 6564 2854 7275 6529 0a20 2020  hecked(True).   
-00032a20: 2020 2020 2051 496e 7075 7444 6961 6c6f       QInputDialo
-00032a30: 672e 6765 7454 6578 7420 3d20 6c61 6d62  g.getText = lamb
-00032a40: 6461 2077 2c20 782c 2079 2c20 7a2c 3a20  da w, x, y, z,: 
-00032a50: 280a 2020 2020 2020 2020 2020 2020 226d  (.            "m
-00032a60: 6f63 6b5f 7772 6f6e 675f 7061 7373 776f  ock_wrong_passwo
-00032a70: 7264 222c 0a20 2020 2020 2020 2020 2020  rd",.           
-00032a80: 2054 7275 652c 0a20 2020 2020 2020 2029   True,.        )
-00032a90: 0a20 2020 2020 2020 206d 6169 6e5f 776e  .        main_wn
-00032aa0: 642e 706f 705f 7570 5f70 7265 6665 7265  d.pop_up_prefere
-00032ab0: 6e63 6573 2e61 646d 696e 5f6d 6f64 655f  nces.admin_mode_
-00032ac0: 7377 6974 6368 2829 0a20 2020 2020 2020  switch().       
-00032ad0: 2073 656c 662e 6173 7365 7274 4661 6c73   self.assertFals
-00032ae0: 6528 6d61 696e 5f77 6e64 2e70 6f70 5f75  e(main_wnd.pop_u
-00032af0: 705f 7072 6566 6572 656e 6365 732e 6368  p_preferences.ch
-00032b00: 616e 6765 5f70 7373 7764 2e69 7356 6973  ange_psswd.isVis
-00032b10: 6962 6c65 2829 290a 0a20 2020 2020 2020  ible())..       
-00032b20: 2023 2041 6374 6976 6174 6573 2061 646d   # Activates adm
-00032b30: 696e 206d 6f64 6520 7769 7468 2074 6865  in mode with the
-00032b40: 2063 6f72 7265 6374 2070 6173 7377 6f72   correct passwor
-00032b50: 640a 2020 2020 2020 2020 5149 6e70 7574  d.        QInput
-00032b60: 4469 616c 6f67 2e67 6574 5465 7874 203d  Dialog.getText =
-00032b70: 206c 616d 6264 6120 772c 2078 2c20 792c   lambda w, x, y,
-00032b80: 207a 2c3a 2028 6164 6d69 6e5f 7061 7373   z,: (admin_pass
-00032b90: 776f 7264 2c20 5472 7565 290a 2020 2020  word, True).    
-00032ba0: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
-00032bb0: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
-00032bc0: 6164 6d69 6e5f 6d6f 6465 5f63 6865 636b  admin_mode_check
-00032bd0: 626f 782e 7365 7443 6865 636b 6564 2854  box.setChecked(T
-00032be0: 7275 6529 0a20 2020 2020 2020 206d 6169  rue).        mai
-00032bf0: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
-00032c00: 6665 7265 6e63 6573 2e61 646d 696e 5f6d  ferences.admin_m
-00032c10: 6f64 655f 7377 6974 6368 2829 0a20 2020  ode_switch().   
-00032c20: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00032c30: 5472 7565 286d 6169 6e5f 776e 642e 706f  True(main_wnd.po
-00032c40: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
-00032c50: 2e63 6861 6e67 655f 7073 7377 642e 6973  .change_psswd.is
-00032c60: 5669 7369 626c 6528 2929 0a0a 2020 2020  Visible())..    
-00032c70: 2020 2020 2320 4d6f 636b 7320 7468 6520      # Mocks the 
-00032c80: 6f6c 6420 7061 7373 7764 2074 6578 7420  old passwd text 
-00032c90: 6669 656c 6420 746f 2062 6520 276d 6f63  field to be 'moc
-00032ca0: 6b5f 6164 6d69 6e5f 7061 7373 776f 7264  k_admin_password
-00032cb0: 270a 2020 2020 2020 2020 2320 2861 6e64  '.        # (and
-00032cc0: 2074 6865 206f 7468 6572 2074 6578 7466   the other textf
-00032cd0: 6965 6c64 7320 746f 6f21 290a 2020 2020  ields too!).    
-00032ce0: 2020 2020 2320 514c 696e 6545 6469 742e      # QLineEdit.
-00032cf0: 7465 7874 203d 206c 616d 6264 6120 783a  text = lambda x:
-00032d00: 2061 646d 696e 5f70 6173 7377 6f72 640a   admin_password.
-00032d10: 0a20 2020 2020 2020 2023 2043 6861 6e67  .        # Chang
-00032d20: 6573 2074 6865 2061 646d 696e 2070 6173  es the admin pas
-00032d30: 7377 6f72 640a 2020 2020 2020 2020 5144  sword.        QD
-00032d40: 6961 6c6f 672e 6578 6563 203d 206c 616d  ialog.exec = lam
-00032d50: 6264 6120 783a 2046 616c 7365 0a20 2020  bda x: False.   
-00032d60: 2020 2020 206d 6169 6e5f 776e 642e 706f       main_wnd.po
-00032d70: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
-00032d80: 2e63 6861 6e67 655f 6164 6d69 6e5f 7073  .change_admin_ps
-00032d90: 7377 6428 2222 290a 2020 2020 2020 2020  swd("").        
-00032da0: 2320 5144 6961 6c6f 672e 6578 6563 203d  # QDialog.exec =
-00032db0: 206c 616d 6264 6120 783a 2054 7275 650a   lambda x: True.
-00032dc0: 2020 2020 2020 2020 2320 6d61 696e 5f77          # main_w
-00032dd0: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
-00032de0: 656e 6365 732e 6368 616e 6765 5f61 646d  ences.change_adm
-00032df0: 696e 5f70 7373 7764 2827 2729 0a0a 2020  in_psswd('')..  
-00032e00: 2020 2020 2020 2320 5368 6f77 7320 6120        # Shows a 
-00032e10: 7772 6f6e 6720 7061 7468 2070 6f70 2d75  wrong path pop-u
-00032e20: 7020 6d65 7373 6167 650a 2020 2020 2020  p message.      
-00032e30: 2020 6d61 696e 5f77 6e64 2e70 6f70 5f75    main_wnd.pop_u
-00032e40: 705f 7072 6566 6572 656e 6365 732e 7772  p_preferences.wr
-00032e50: 6f6e 675f 7061 7468 280a 2020 2020 2020  ong_path(.      
-00032e60: 2020 2020 2020 222f 6d6f 636b 5f70 6174        "/mock_pat
-00032e70: 6822 2c20 226d 6f63 6b5f 746f 6f6c 222c  h", "mock_tool",
-00032e80: 2065 7874 7261 5f6d 6573 733d 226d 6f63   extra_mess="moc
-00032e90: 6b5f 6d73 6722 0a20 2020 2020 2020 2029  k_msg".        )
-00032ea0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00032eb0: 7365 7274 5472 7565 2868 6173 6174 7472  sertTrue(hasattr
-00032ec0: 286d 6169 6e5f 776e 642e 706f 705f 7570  (main_wnd.pop_up
-00032ed0: 5f70 7265 6665 7265 6e63 6573 2c20 226d  _preferences, "m
-00032ee0: 7367 2229 290a 2020 2020 2020 2020 7365  sg")).        se
-00032ef0: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
-00032f00: 2020 2020 2020 2020 2020 2020 6d61 696e              main
-00032f10: 5f77 6e64 2e70 6f70 5f75 705f 7072 6566  _wnd.pop_up_pref
-00032f20: 6572 656e 6365 732e 6d73 672e 6963 6f6e  erences.msg.icon
-00032f30: 2829 2c20 514d 6573 7361 6765 426f 782e  (), QMessageBox.
-00032f40: 4372 6974 6963 616c 0a20 2020 2020 2020  Critical.       
-00032f50: 2029 0a20 2020 2020 2020 206d 6169 6e5f   ).        main_
-00032f60: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
-00032f70: 7265 6e63 6573 2e6d 7367 2e63 6c6f 7365  rences.msg.close
-00032f80: 2829 0a0a 2020 2020 2020 2020 2320 5365  ()..        # Se
-00032f90: 7473 2074 6865 206d 6169 6e20 7769 6e64  ts the main wind
-00032fa0: 6f77 2073 697a 650a 2020 2020 2020 2020  ow size.        
-00032fb0: 6d61 696e 5f77 6e64 2e70 6f70 5f75 705f  main_wnd.pop_up_
-00032fc0: 7072 6566 6572 656e 6365 732e 7573 655f  preferences.use_
-00032fd0: 6375 7272 656e 745f 6d61 696e 7769 6e64  current_mainwind
-00032fe0: 6f77 5f73 697a 6528 6d61 696e 5f77 6e64  ow_size(main_wnd
-00032ff0: 290a 0a20 2020 2020 2020 2023 204d 6f63  )..        # Moc
-00033000: 6b73 2074 6865 2063 6c69 636b 206f 6620  ks the click of 
-00033010: 7468 6520 4f4b 2062 7574 746f 6e20 6f6e  the OK button on
-00033020: 2027 514d 6573 7361 6765 426f 782e 6578   'QMessageBox.ex
-00033030: 6563 270a 2020 2020 2020 2020 514d 6573  ec'.        QMes
-00033040: 7361 6765 426f 782e 6578 6563 203d 206c  sageBox.exec = l
-00033050: 616d 6264 6120 783a 2051 4d65 7373 6167  ambda x: QMessag
-00033060: 6542 6f78 2e59 6573 0a0a 2020 2020 2020  eBox.Yes..      
-00033070: 2020 2320 5072 6f67 7261 6d73 2074 6865    # Programs the
-00033080: 2063 6f6e 7472 6f6c 6c65 7220 7665 7273   controller vers
-00033090: 696f 6e20 746f 2063 6861 6e67 6520 746f  ion to change to
-000330a0: 2056 310a 2020 2020 2020 2020 6d61 696e   V1.        main
-000330b0: 5f77 6e64 2e70 6f70 5f75 705f 7072 6566  _wnd.pop_up_pref
-000330c0: 6572 656e 6365 732e 636f 6e74 726f 6c5f  erences.control_
-000330d0: 6368 6563 6b62 6f78 5f74 6f67 676c 6564  checkbox_toggled
-000330e0: 286d 6169 6e5f 776e 6429 0a20 2020 2020  (main_wnd).     
-000330f0: 2020 206d 6169 6e5f 776e 642e 706f 705f     main_wnd.pop_
-00033100: 7570 5f70 7265 6665 7265 6e63 6573 2e63  up_preferences.c
-00033110: 6f6e 7472 6f6c 5f63 6865 636b 626f 785f  ontrol_checkbox_
-00033120: 6368 616e 6765 6420 3d20 5472 7565 0a20  changed = True. 
-00033130: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00033140: 7274 5472 7565 286d 6169 6e5f 776e 642e  rtTrue(main_wnd.
-00033150: 6765 745f 636f 6e74 726f 6c6c 6572 5f76  get_controller_v
-00033160: 6572 7369 6f6e 2829 290a 0a20 2020 2020  ersion())..     
-00033170: 2020 2023 2043 616e 6365 6c73 2074 6865     # Cancels the
-00033180: 2061 626f 7665 2063 6861 6e67 650a 2020   above change.  
-00033190: 2020 2020 2020 6d61 696e 5f77 6e64 2e70        main_wnd.p
-000331a0: 6f70 5f75 705f 7072 6566 6572 656e 6365  op_up_preference
-000331b0: 732e 636f 6e74 726f 6c5f 6368 6563 6b62  s.control_checkb
-000331c0: 6f78 5f74 6f67 676c 6564 286d 6169 6e5f  ox_toggled(main_
-000331d0: 776e 6429 0a20 2020 2020 2020 2073 656c  wnd).        sel
-000331e0: 662e 6173 7365 7274 4661 6c73 6528 6d61  f.assertFalse(ma
-000331f0: 696e 5f77 6e64 2e67 6574 5f63 6f6e 7472  in_wnd.get_contr
-00033200: 6f6c 6c65 725f 7665 7273 696f 6e28 2929  oller_version())
-00033210: 0a0a 2020 2020 2020 2020 2320 4564 6974  ..        # Edit
-00033220: 7320 7468 6520 4361 7073 756c 2063 6f6e  s the Capsul con
-00033230: 6669 6720 6669 6c65 0a20 2020 2020 2020  fig file.       
-00033240: 2023 2051 4469 616c 6f67 2e65 7865 6320   # QDialog.exec 
-00033250: 3d20 6c61 6d62 6461 2078 3a20 4661 6c73  = lambda x: Fals
-00033260: 650a 2020 2020 2020 2020 2320 6361 7073  e.        # caps
-00033270: 756c 5f65 6e67 696e 652e 6c6f 6164 203d  ul_engine.load =
-00033280: 206c 616d 6264 6120 783a 2054 7275 650a   lambda x: True.
-00033290: 2020 2020 2020 2020 2320 6d61 696e 5f77          # main_w
-000332a0: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
-000332b0: 656e 6365 732e 6564 6974 5f63 6170 7375  ences.edit_capsu
-000332c0: 6c5f 636f 6e66 6967 2829 0a0a 2020 2020  l_config()..    
-000332d0: 2020 2020 2320 4d6f 636b 7320 616e 2065      # Mocks an e
-000332e0: 7863 6570 7469 6f6e 2069 6e20 7468 6520  xception in the 
-000332f0: 5144 6961 6c6f 6720 6578 6563 7574 696f  QDialog executio
-00033300: 6e0a 2020 2020 2020 2020 2320 6578 635f  n.        # exc_
-00033310: 3120 3d20 6c61 6d62 6461 2078 3a20 285f  1 = lambda x: (_
-00033320: 2066 6f72 205f 2069 6e20 2829 292e 7468   for _ in ()).th
-00033330: 726f 7728 4578 6365 7074 696f 6e28 276d  row(Exception('m
-00033340: 6f63 6b20 6578 6365 7074 696f 6e27 2929  ock exception'))
-00033350: 0a20 2020 2020 2020 2023 2051 4469 616c  .        # QDial
-00033360: 6f67 2e65 7865 6320 3d20 6578 635f 310a  og.exec = exc_1.
-00033370: 2020 2020 2020 2020 2320 6d61 696e 5f77          # main_w
-00033380: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
-00033390: 656e 6365 732e 6564 6974 5f63 6170 7375  ences.edit_capsu
-000333a0: 6c5f 636f 6e66 6967 2829 0a0a 2020 2020  l_config()..    
-000333b0: 2020 2020 2320 4d6f 636b 7320 616e 2065      # Mocks an e
-000333c0: 7863 6570 7469 6f6e 2069 6e20 7468 6520  xception in the 
-000333d0: 2773 6574 5f63 6170 7375 6c5f 636f 6e66  'set_capsul_conf
-000333e0: 6967 2720 6361 6c6c 0a20 2020 2020 2020  ig' call.       
-000333f0: 2023 2051 4469 616c 6f67 2e65 7865 6320   # QDialog.exec 
-00033400: 3d20 6c61 6d62 6461 2078 3a20 5472 7565  = lambda x: True
-00033410: 0a20 2020 2020 2020 2023 2065 7863 5f32  .        # exc_2
-00033420: 203d 206c 616d 6264 6120 782c 2079 3a20   = lambda x, y: 
-00033430: 285f 2066 6f72 205f 2069 6e20 2829 292e  (_ for _ in ()).
-00033440: 7468 726f 7728 4578 6365 7074 696f 6e28  throw(Exception(
-00033450: 276d 6f63 6b20 6578 6365 7074 696f 6e27  'mock exception'
-00033460: 2929 0a20 2020 2020 2020 2023 2043 6f6e  )).        # Con
-00033470: 6669 672e 7365 745f 6361 7073 756c 5f63  fig.set_capsul_c
-00033480: 6f6e 6669 6720 3d20 6578 635f 320a 2020  onfig = exc_2.  
-00033490: 2020 2020 2020 2320 6d61 696e 5f77 6e64        # main_wnd
-000334a0: 2e70 6f70 5f75 705f 7072 6566 6572 656e  .pop_up_preferen
-000334b0: 6365 732e 6564 6974 5f63 6170 7375 6c5f  ces.edit_capsul_
-000334c0: 636f 6e66 6967 2829 0a20 2020 2020 2020  config().       
-000334d0: 2023 2046 4958 4d45 3a20 6661 696c 696e   # FIXME: failin
-000334e0: 6720 696e 204d 6163 4f53 2062 7569 6c64  g in MacOS build
-000334f0: 0a0a 2020 2020 2020 2020 2320 436c 6f73  ..        # Clos
-00033500: 6520 7468 6520 736f 6674 7761 7265 2070  e the software p
-00033510: 7265 6665 7265 6e63 6573 2077 696e 646f  references windo
-00033520: 770a 2020 2020 2020 2020 6d61 696e 5f77  w.        main_w
-00033530: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
-00033540: 656e 6365 732e 636c 6f73 6528 290a 0a20  ences.close().. 
-00033550: 2020 2064 6566 2074 6573 745f 736f 6674     def test_soft
-00033560: 7761 7265 5f70 7265 6665 7265 6e63 6573  ware_preferences
-00033570: 5f70 6f70 5f75 705f 636f 6e66 6967 5f66  _pop_up_config_f
-00033580: 696c 6528 7365 6c66 293a 0a20 2020 2020  ile(self):.     
-00033590: 2020 2022 2222 4f70 656e 7320 7468 6520     """Opens the 
-000335a0: 7072 6566 6572 656e 6365 7320 706f 7020  preferences pop 
-000335b0: 7570 2061 6e64 2063 6861 6e67 6573 2070  up and changes p
-000335c0: 6172 616d 6574 6572 7320 746f 2065 6469  arameters to edi
-000335d0: 7420 7468 650a 2020 2020 2020 2020 636f  t the.        co
-000335e0: 6e66 6967 2066 696c 6520 616e 6420 6361  nfig file and ca
-000335f0: 7073 756c 2063 6f6e 6669 6720 6669 6c65  psul config file
-00033600: 2e0a 0a20 2020 2020 2020 202d 5465 7374  ...        -Test
-00033610: 733a 0a20 2020 2020 2020 2020 2020 202d  s:.            -
-00033620: 2050 6f70 5570 5072 6566 6572 656e 6365   PopUpPreference
-00033630: 732e 6564 6974 5f63 6f6e 6669 675f 6669  s.edit_config_fi
-00033640: 6c65 0a20 2020 2020 2020 2020 2020 202d  le.            -
-00033650: 2050 6f70 5570 5072 6566 6572 656e 6365   PopUpPreference
-00033660: 732e 6669 6e64 4368 6172 0a20 2020 2020  s.findChar.     
-00033670: 2020 2020 2020 202d 2050 6f70 5570 5072         - PopUpPr
-00033680: 6566 6572 656e 6365 732e 6564 6974 5f63  eferences.edit_c
-00033690: 6170 7375 6c5f 636f 6e66 6967 0a0a 2020  apsul_config..  
-000336a0: 2020 2020 2020 2d20 4d6f 636b 730a 2020        - Mocks.  
-000336b0: 2020 2020 2020 2020 2020 2d20 436f 6e66            - Conf
-000336c0: 6967 2e73 6574 5f63 6170 7375 6c5f 636f  ig.set_capsul_co
-000336d0: 6e66 6967 0a20 2020 2020 2020 2020 2020  nfig.           
-000336e0: 202d 2051 4469 616c 6f67 2e65 7865 630a   - QDialog.exec.
-000336f0: 2020 2020 2020 2020 2020 2020 2d20 5365              - Se
-00033700: 7474 696e 6773 4564 6974 6f72 2e75 7064  ttingsEditor.upd
-00033710: 6174 655f 6775 690a 2020 2020 2020 2020  ate_gui.        
-00033720: 2222 220a 0a20 2020 2020 2020 2023 2053  """..        # S
-00033730: 6574 7320 7368 6f72 7463 7574 7320 666f  ets shortcuts fo
-00033740: 7220 6f62 6a65 6374 7320 7468 6174 2061  r objects that a
-00033750: 7265 206f 6674 656e 2075 7365 640a 2020  re often used.  
-00033760: 2020 2020 2020 6d61 696e 5f77 6e64 203d        main_wnd =
-00033770: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-00033780: 770a 0a20 2020 2020 2020 2023 204d 6f63  w..        # Moc
-00033790: 6b73 2074 6865 2065 7865 6375 7469 6f6e  ks the execution
-000337a0: 206f 6620 2750 6f70 5570 5072 6566 6572   of 'PopUpPrefer
-000337b0: 656e 6365 7327 2074 6f20 7370 6565 6420  ences' to speed 
-000337c0: 7570 2074 6865 2074 6573 740a 2020 2020  up the test.    
-000337d0: 2020 2020 2320 506f 7055 7050 7265 6665      # PopUpPrefe
-000337e0: 7265 6e63 6573 2e73 686f 7720 3d20 6c61  rences.show = la
-000337f0: 6d62 6461 2078 3a20 4e6f 6e65 0a0a 2020  mbda x: None..  
-00033800: 2020 2020 2020 6d61 696e 5f77 6e64 2e73        main_wnd.s
-00033810: 6f66 7477 6172 655f 7072 6566 6572 656e  oftware_preferen
-00033820: 6365 735f 706f 705f 7570 2829 0a0a 2020  ces_pop_up()..  
-00033830: 2020 2020 2020 2320 5472 6965 7320 746f        # Tries to
-00033840: 2065 6469 7420 7468 6520 636f 6e66 6967   edit the config
-00033850: 2066 696c 652c 206d 6f63 6b73 2066 6169   file, mocks fai
-00033860: 6c75 7265 2069 6e20 2751 4469 616c 6f67  lure in 'QDialog
-00033870: 2e65 7865 6327 0a20 2020 2020 2020 2051  .exec'.        Q
-00033880: 4469 616c 6f67 2e65 7865 6320 3d20 6c61  Dialog.exec = la
-00033890: 6d62 6461 2078 3a20 4661 6c73 650a 2020  mbda x: False.  
-000338a0: 2020 2020 2020 6d61 696e 5f77 6e64 2e70        main_wnd.p
-000338b0: 6f70 5f75 705f 7072 6566 6572 656e 6365  op_up_preference
-000338c0: 732e 6564 6974 5f63 6f6e 6669 675f 6669  s.edit_config_fi
-000338d0: 6c65 2829 0a20 2020 2020 2020 2073 656c  le().        sel
-000338e0: 662e 6173 7365 7274 5472 7565 2868 6173  f.assertTrue(has
-000338f0: 6174 7472 286d 6169 6e5f 776e 642e 706f  attr(main_wnd.po
-00033900: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
-00033910: 2c20 2265 6469 7443 6f6e 6622 2929 0a0a  , "editConf"))..
-00033920: 2020 2020 2020 2020 2320 4d6f 636b 7320          # Mocks 
-00033930: 7468 6520 6578 6563 7574 696f 6e20 746f  the execution to
-00033940: 2063 6861 6e67 6520 2775 7365 725f 6d6f   change 'user_mo
-00033950: 6465 2720 6672 6f6d 2027 6661 6c73 6527  de' from 'false'
-00033960: 2074 6f20 2774 7275 6527 0a20 2020 2020   to 'true'.     
-00033970: 2020 2064 6566 206d 6f63 6b5f 6578 6563     def mock_exec
-00033980: 2878 293a 0a20 2020 2020 2020 2020 2020  (x):.           
-00033990: 2063 6f6e 6669 675f 6669 6c65 203d 2028   config_file = (
-000339a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000339b0: 206d 6169 6e5f 776e 642e 706f 705f 7570   main_wnd.pop_up
-000339c0: 5f70 7265 6665 7265 6e63 6573 2e65 6469  _preferences.edi
-000339d0: 7443 6f6e 662e 7478 742e 746f 506c 6169  tConf.txt.toPlai
-000339e0: 6e54 6578 7428 290a 2020 2020 2020 2020  nText().        
-000339f0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-00033a00: 2020 636f 6e66 6967 5f66 696c 6520 3d20    config_file = 
-00033a10: 636f 6e66 6967 5f66 696c 652e 7265 706c  config_file.repl
-00033a20: 6163 6528 0a20 2020 2020 2020 2020 2020  ace(.           
-00033a30: 2020 2020 2022 7573 6572 5f6d 6f64 653a       "user_mode:
-00033a40: 2066 616c 7365 222c 2022 7573 6572 5f6d   false", "user_m
-00033a50: 6f64 653a 2074 7275 6522 0a20 2020 2020  ode: true".     
-00033a60: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00033a70: 2020 2020 206d 6169 6e5f 776e 642e 706f       main_wnd.po
-00033a80: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
-00033a90: 2e65 6469 7443 6f6e 662e 7478 742e 7365  .editConf.txt.se
-00033aa0: 7450 6c61 696e 5465 7874 2863 6f6e 6669  tPlainText(confi
-00033ab0: 675f 6669 6c65 290a 2020 2020 2020 2020  g_file).        
-00033ac0: 2020 2020 7265 7475 726e 2054 7275 650a      return True.
-00033ad0: 0a20 2020 2020 2020 2051 4469 616c 6f67  .        QDialog
-00033ae0: 2e65 7865 6320 3d20 6d6f 636b 5f65 7865  .exec = mock_exe
-00033af0: 630a 0a20 2020 2020 2020 2023 2041 7373  c..        # Ass
-00033b00: 6572 7473 2074 6861 7420 7468 6520 2743  erts that the 'C
-00033b10: 6f6e 6669 6727 206f 626a 6563 7420 7761  onfig' object wa
-00033b20: 7320 7570 6461 7465 640a 2020 2020 2020  s updated.      
-00033b30: 2020 6d61 696e 5f77 6e64 2e70 6f70 5f75    main_wnd.pop_u
-00033b40: 705f 7072 6566 6572 656e 6365 732e 6564  p_preferences.ed
-00033b50: 6974 5f63 6f6e 6669 675f 6669 6c65 2829  it_config_file()
-00033b60: 0a20 2020 2020 2020 2063 6f6e 6669 6720  .        config 
-00033b70: 3d20 436f 6e66 6967 2863 6f6e 6669 675f  = Config(config_
-00033b80: 7061 7468 3d73 656c 662e 636f 6e66 6967  path=self.config
-00033b90: 5f70 6174 6829 0a20 2020 2020 2020 2073  _path).        s
-00033ba0: 656c 662e 6173 7365 7274 5472 7565 2863  elf.assertTrue(c
-00033bb0: 6f6e 6669 672e 6765 745f 7573 6572 5f6d  onfig.get_user_m
-00033bc0: 6f64 6528 2929 0a0a 2020 2020 2020 2020  ode())..        
-00033bd0: 2320 5472 6965 7320 746f 2066 696e 6420  # Tries to find 
-00033be0: 616e 2065 6d70 7479 2073 7472 696e 6720  an empty string 
-00033bf0: 6f66 2063 6861 7261 6374 6572 7320 696e  of characters in
-00033c00: 2074 6865 2063 6f6e 6669 6720 6669 6c65   the config file
-00033c10: 0a20 2020 2020 2020 206d 6169 6e5f 776e  .        main_wn
-00033c20: 642e 706f 705f 7570 5f70 7265 6665 7265  d.pop_up_prefere
-00033c30: 6e63 6573 2e66 696e 6443 6861 7228 290a  nces.findChar().
-00033c40: 0a20 2020 2020 2020 2023 2048 6967 686c  .        # Highl
-00033c50: 6967 6874 7320 7468 6520 7374 7269 6e67  ights the string
-00033c60: 2027 7573 6572 5f6d 6f64 6527 2069 6e20   'user_mode' in 
-00033c70: 7468 6520 636f 6e66 6967 2066 696c 650a  the config file.
-00033c80: 2020 2020 2020 2020 6d61 696e 5f77 6e64          main_wnd
-00033c90: 2e70 6f70 5f75 705f 7072 6566 6572 656e  .pop_up_preferen
-00033ca0: 6365 732e 6669 6e64 4368 6172 5f6c 696e  ces.findChar_lin
-00033cb0: 655f 6564 6974 2e73 6574 5465 7874 2822  e_edit.setText("
-00033cc0: 7573 6572 5f6d 6f64 6522 290a 2020 2020  user_mode").    
-00033cd0: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
-00033ce0: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
-00033cf0: 6669 6e64 4368 6172 2829 0a0a 2020 2020  findChar()..    
-00033d00: 2020 2020 2320 4d6f 636b 7320 7468 6520      # Mocks the 
-00033d10: 6578 6563 7574 696f 6e20 6f66 2061 2027  execution of a '
-00033d20: 6361 7073 756c 2720 6d65 7468 6f64 0a20  capsul' method. 
-00033d30: 2020 2020 2020 2053 6574 7469 6e67 7345         SettingsE
-00033d40: 6469 746f 722e 7570 6461 7465 5f67 7569  ditor.update_gui
-00033d50: 203d 206c 616d 6264 6120 783a 204e 6f6e   = lambda x: Non
-00033d60: 650a 2020 2020 2020 2020 2320 5468 6973  e.        # This
-00033d70: 2066 6978 6573 2074 6865 204d 6163 204f   fixes the Mac O
-00033d80: 5320 6275 696c 640a 0a20 2020 2020 2020  S build..       
-00033d90: 2023 204d 6f63 6b73 2074 6865 2065 7865   # Mocks the exe
-00033da0: 6375 7469 6f6e 206f 6620 6120 2751 4469  cution of a 'QDi
-00033db0: 616c 6f67 270a 2020 2020 2020 2020 5144  alog'.        QD
-00033dc0: 6961 6c6f 672e 6578 6563 203d 206c 616d  ialog.exec = lam
-00033dd0: 6264 6120 783a 2054 7275 650a 2020 2020  bda x: True.    
-00033de0: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
-00033df0: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
-00033e00: 6564 6974 5f63 6170 7375 6c5f 636f 6e66  edit_capsul_conf
-00033e10: 6967 2829 0a0a 2020 2020 2020 2020 6d6f  ig()..        mo
-00033e20: 636b 5f65 7863 203d 206c 616d 6264 6120  ck_exc = lambda 
-00033e30: 782c 2079 3a20 285f 2066 6f72 205f 2069  x, y: (_ for _ i
-00033e40: 6e20 2829 292e 7468 726f 7728 4578 6365  n ()).throw(Exce
-00033e50: 7074 696f 6e28 226d 6f63 6b5f 6578 6365  ption("mock_exce
-00033e60: 7074 2229 290a 2020 2020 2020 2020 436f  pt")).        Co
-00033e70: 6e66 6967 2e73 6574 5f63 6170 7375 6c5f  nfig.set_capsul_
-00033e80: 636f 6e66 6967 203d 206d 6f63 6b5f 6578  config = mock_ex
-00033e90: 630a 2020 2020 2020 2020 6d61 696e 5f77  c.        main_w
-00033ea0: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
-00033eb0: 656e 6365 732e 6564 6974 5f63 6170 7375  ences.edit_capsu
-00033ec0: 6c5f 636f 6e66 6967 2829 0a0a 2020 2020  l_config()..    
-00033ed0: 2020 2020 5144 6961 6c6f 672e 6578 6563      QDialog.exec
-00033ee0: 203d 206c 616d 6264 6120 783a 2028 5f20   = lambda x: (_ 
-00033ef0: 666f 7220 5f20 696e 2028 2929 2e74 6872  for _ in ()).thr
-00033f00: 6f77 280a 2020 2020 2020 2020 2020 2020  ow(.            
-00033f10: 4578 6365 7074 696f 6e28 226d 6f63 6b5f  Exception("mock_
-00033f20: 6578 6365 7074 2229 0a20 2020 2020 2020  except").       
-00033f30: 2029 0a20 2020 2020 2020 206d 6169 6e5f   ).        main_
-00033f40: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
-00033f50: 7265 6e63 6573 2e65 6469 745f 6361 7073  rences.edit_caps
-00033f60: 756c 5f63 6f6e 6669 6728 290a 0a20 2020  ul_config()..   
-00033f70: 2020 2020 2051 4469 616c 6f67 2e65 7865       QDialog.exe
-00033f80: 6320 3d20 6c61 6d62 6461 2078 3a20 4661  c = lambda x: Fa
-00033f90: 6c73 650a 2020 2020 2020 2020 6d61 696e  lse.        main
-00033fa0: 5f77 6e64 2e70 6f70 5f75 705f 7072 6566  _wnd.pop_up_pref
-00033fb0: 6572 656e 6365 732e 6564 6974 5f63 6170  erences.edit_cap
-00033fc0: 7375 6c5f 636f 6e66 6967 2829 0a0a 2020  sul_config()..  
-00033fd0: 2020 2020 2020 6d61 696e 5f77 6e64 2e70        main_wnd.p
-00033fe0: 6f70 5f75 705f 7072 6566 6572 656e 6365  op_up_preference
-00033ff0: 732e 636c 6f73 6528 290a 0a20 2020 2064  s.close()..    d
-00034000: 6566 2074 6573 745f 736f 6674 7761 7265  ef test_software
-00034010: 5f70 7265 6665 7265 6e63 6573 5f70 6f70  _preferences_pop
-00034020: 5f75 705f 6d6f 6475 6c65 735f 636f 6e66  _up_modules_conf
-00034030: 6967 2873 656c 6629 3a0a 2020 2020 2020  ig(self):.      
-00034040: 2020 2222 224f 7065 6e73 2074 6865 2070    """Opens the p
-00034050: 7265 6665 7265 6e63 6573 2070 6f70 2075  references pop u
-00034060: 7020 616e 6420 7365 7473 2074 6865 2063  p and sets the c
-00034070: 6f6e 6669 6775 7261 7469 6f6e 206f 6620  onfiguration of 
-00034080: 6d6f 6475 6c65 732e 0a0a 2020 2020 2020  modules...      
-00034090: 2020 466f 7220 4146 4e49 2c20 414e 5453    For AFNI, ANTS
-000340a0: 2c20 4653 4c2c 2053 504d 2061 6e64 204d  , FSL, SPM and M
-000340b0: 4154 4c41 422e 0a0a 2020 2020 2020 2020  ATLAB...        
-000340c0: 2d54 6573 7473 3a20 506f 7055 7050 7265  -Tests: PopUpPre
-000340d0: 6665 7265 6e63 6573 2e76 616c 6964 6174  ferences.validat
-000340e0: 655f 616e 645f 7361 7665 0a0a 2020 2020  e_and_save..    
-000340f0: 2020 2020 2d20 4d6f 636b 733a 0a20 2020      - Mocks:.   
-00034100: 2020 2020 2020 2020 202d 2050 6f70 5570           - PopUp
-00034110: 5072 6566 6572 656e 6365 732e 7368 6f77  Preferences.show
-00034120: 0a20 2020 2020 2020 2020 2020 202d 2051  .            - Q
-00034130: 4d65 7373 6167 6542 6f78 2e73 686f 770a  MessageBox.show.
-00034140: 2020 2020 2020 2020 2020 2020 2d20 514c              - QL
-00034150: 696e 6545 6469 742e 7465 7874 0a20 2020  ineEdit.text.   
-00034160: 2020 2020 2020 2020 202d 2051 4469 616c           - QDial
-00034170: 6f67 2e65 7865 630a 2020 2020 2020 2020  og.exec.        
-00034180: 2020 2020 2d20 514d 6573 7361 6765 426f      - QMessageBo
-00034190: 782e 6578 6563 0a20 2020 2020 2020 2020  x.exec.         
-000341a0: 2020 202d 2051 506c 6169 6e54 6578 7445     - QPlainTextE
-000341b0: 6469 742e 746f 506c 6169 6e54 6578 740a  dit.toPlainText.
-000341c0: 2020 2020 2020 2020 2222 220a 0a20 2020          """..   
-000341d0: 2020 2020 2023 2053 6574 7320 7368 6f72       # Sets shor
-000341e0: 7463 7574 7320 666f 7220 6f62 6a65 6374  tcuts for object
-000341f0: 7320 7468 6174 2061 7265 206f 6674 656e  s that are often
-00034200: 2075 7365 640a 2020 2020 2020 2020 6d61   used.        ma
-00034210: 696e 5f77 6e64 203d 2073 656c 662e 6d61  in_wnd = self.ma
-00034220: 696e 5f77 696e 646f 770a 0a20 2020 2020  in_window..     
-00034230: 2020 2023 204d 6f63 6b73 2074 6865 2065     # Mocks the e
-00034240: 7865 6375 7469 6f6e 206f 6620 2750 6f70  xecution of 'Pop
-00034250: 5570 5072 6566 6572 656e 6365 7327 2074  UpPreferences' t
-00034260: 6f20 7370 6565 6420 7570 2074 6865 2074  o speed up the t
-00034270: 6573 740a 2020 2020 2020 2020 2320 506f  est.        # Po
-00034280: 7055 7050 7265 6665 7265 6e63 6573 2e73  pUpPreferences.s
-00034290: 686f 7720 3d20 6c61 6d62 6461 2078 3a20  how = lambda x: 
-000342a0: 4e6f 6e65 0a0a 2020 2020 2020 2020 2320  None..        # 
-000342b0: 4d6f 636b 7320 2751 4d65 7373 6167 6542  Mocks 'QMessageB
-000342c0: 6f78 2e73 686f 7727 0a20 2020 2020 2020  ox.show'.       
-000342d0: 2051 4d65 7373 6167 6542 6f78 2e73 686f   QMessageBox.sho
-000342e0: 7720 3d20 6c61 6d62 6461 2078 3a20 4e6f  w = lambda x: No
-000342f0: 6e65 0a0a 2020 2020 2020 2020 746d 705f  ne..        tmp_
-00034300: 7061 7468 203d 2073 656c 662e 636f 6e66  path = self.conf
-00034310: 6967 5f70 6174 680a 0a20 2020 2020 2020  ig_path..       
-00034320: 2023 2054 656d 706f 7261 7279 2073 6f6c   # Temporary sol
-00034330: 7574 696f 6e20 7468 6174 2061 6c6c 6f77  ution that allow
-00034340: 7320 7465 7374 206f 6e6c 7920 6f6e 204c  s test only on L
-00034350: 696e 7578 2061 6e64 204d 6163 4f53 0a20  inux and MacOS. 
-00034360: 2020 2020 2020 2069 6620 706c 6174 666f         if platfo
-00034370: 726d 2e73 7973 7465 6d28 2920 3d3d 2022  rm.system() == "
-00034380: 5769 6e64 6f77 7322 3a0a 2020 2020 2020  Windows":.      
-00034390: 2020 2020 2020 7265 7475 726e 0a0a 2020        return..  
-000343a0: 2020 2020 2020 2320 4d6f 636b 7320 6578        # Mocks ex
-000343b0: 6563 7574 6162 6c65 7320 746f 2062 6520  ecutables to be 
-000343c0: 7573 6564 2061 7320 7468 6520 6166 6e69  used as the afni
-000343d0: 2c20 616e 7473 2c20 6673 6c6d 2c20 6d61  , ants, fslm, ma
-000343e0: 746c 6162 0a20 2020 2020 2020 2023 2061  tlab.        # a
-000343f0: 6e64 2073 706d 2063 6d64 730a 2020 2020  nd spm cmds.    
-00034400: 2020 2020 6465 6620 6d6f 636b 5f65 7865      def mock_exe
-00034410: 6375 7461 626c 6528 0a20 2020 2020 2020  cutable(.       
-00034420: 2020 2020 2065 7863 5f64 6972 2c0a 2020       exc_dir,.  
-00034430: 2020 2020 2020 2020 2020 6578 635f 6e61            exc_na
-00034440: 6d65 2c0a 2020 2020 2020 2020 2020 2020  me,.            
-00034450: 6661 696c 696e 673d 4661 6c73 652c 0a20  failing=False,. 
-00034460: 2020 2020 2020 2020 2020 206f 7574 7075             outpu
-00034470: 743d 226d 6f63 6b20 6578 6563 7574 6162  t="mock executab
-00034480: 6c65 222c 0a20 2020 2020 2020 2020 2020  le",.           
-00034490: 2065 7272 5f6d 7367 3d22 6d6f 636b 5f65   err_msg="mock_e
-000344a0: 7272 6f72 222c 0a20 2020 2020 2020 2029  rror",.        )
-000344b0: 3a0a 2020 2020 2020 2020 2020 2020 2222  :.            ""
-000344c0: 2243 7265 6174 6573 2061 2077 6f72 6b69  "Creates a worki
-000344d0: 6e67 206f 7220 6661 696c 696e 6720 6d6f  ng or failing mo
-000344e0: 636b 6564 2065 7865 6375 7461 626c 652c  cked executable,
-000344f0: 206f 7074 696f 6e61 6c6c 790a 2020 2020   optionally.    
-00034500: 2020 2020 2020 2020 7365 7474 696e 6720          setting 
-00034510: 7468 6520 6f75 7470 7574 2061 6e64 2065  the output and e
-00034520: 7272 6f72 206d 6573 7361 6765 732c 0a20  rror messages,. 
-00034530: 2020 2020 2020 2020 2020 2022 2222 0a0a             """..
-00034540: 2020 2020 2020 2020 2020 2020 7379 7374              syst
-00034550: 656d 203d 2070 6c61 7466 6f72 6d2e 7379  em = platform.sy
-00034560: 7374 656d 2829 0a0a 2020 2020 2020 2020  stem()..        
-00034570: 2020 2020 6966 2073 7973 7465 6d20 3d3d      if system ==
-00034580: 2022 4c69 6e75 7822 3a0a 2020 2020 2020   "Linux":.      
-00034590: 2020 2020 2020 2020 2020 6578 635f 636f            exc_co
-000345a0: 6e74 656e 7420 3d20 2723 212f 6269 6e2f  ntent = '#!/bin/
-000345b0: 6261 7368 5c6e 6563 686f 2022 7b7d 2227  bash\necho "{}"'
-000345c0: 2e66 6f72 6d61 7428 6f75 7470 7574 290a  .format(output).
-000345d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000345e0: 6966 2066 6169 6c69 6e67 3a0a 2020 2020  if failing:.    
-000345f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00034600: 6578 635f 636f 6e74 656e 7420 2b3d 2027  exc_content += '
-00034610: 5c6e 6563 686f 2022 7b7d 2220 313e 2632  \necho "{}" 1>&2
-00034620: 5c6e 6578 6974 2031 272e 666f 726d 6174  \nexit 1'.format
-00034630: 2865 7272 5f6d 7367 290a 2020 2020 2020  (err_msg).      
-00034640: 2020 2020 2020 2020 2020 6578 635f 7061            exc_pa
-00034650: 7468 203d 206f 732e 7061 7468 2e6a 6f69  th = os.path.joi
-00034660: 6e28 6578 635f 6469 722c 2065 7863 5f6e  n(exc_dir, exc_n
-00034670: 616d 6529 0a20 2020 2020 2020 2020 2020  ame).           
-00034680: 2020 2020 2065 7863 203d 206f 7065 6e28       exc = open(
-00034690: 6578 635f 7061 7468 2c20 2277 2229 0a20  exc_path, "w"). 
-000346a0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-000346b0: 7863 2e77 7269 7465 2865 7863 5f63 6f6e  xc.write(exc_con
-000346c0: 7465 6e74 290a 2020 2020 2020 2020 2020  tent).          
-000346d0: 2020 2020 2020 6578 632e 636c 6f73 6528        exc.close(
-000346e0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000346f0: 2020 7375 6270 726f 6365 7373 2e72 756e    subprocess.run
-00034700: 285b 2263 686d 6f64 222c 2022 2b78 222c  (["chmod", "+x",
-00034710: 2065 7863 5f70 6174 685d 290a 0a20 2020   exc_path])..   
-00034720: 2020 2020 2020 2020 2065 6c69 6620 7379           elif sy
-00034730: 7374 656d 203d 3d20 2244 6172 7769 6e22  stem == "Darwin"
-00034740: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00034750: 2020 6578 635f 636f 6e74 656e 7420 3d20    exc_content = 
-00034760: 2723 212f 7573 722f 6269 6e2f 656e 7620  '#!/usr/bin/env 
-00034770: 6261 7368 5c6e 6563 686f 2022 6d6f 636b  bash\necho "mock
-00034780: 2065 7865 6375 7461 626c 6522 270a 2020   executable"'.  
-00034790: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000347a0: 2066 6169 6c69 6e67 3a0a 2020 2020 2020   failing:.      
-000347b0: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-000347c0: 635f 636f 6e74 656e 7420 2b3d 2027 5c6e  c_content += '\n
-000347d0: 6563 686f 2022 7b7d 2220 313e 2632 5c6e  echo "{}" 1>&2\n
-000347e0: 6578 6974 2031 272e 666f 726d 6174 2865  exit 1'.format(e
-000347f0: 7272 5f6d 7367 290a 2020 2020 2020 2020  rr_msg).        
-00034800: 2020 2020 2020 2020 6578 635f 7061 7468          exc_path
-00034810: 203d 206f 732e 7061 7468 2e6a 6f69 6e28   = os.path.join(
-00034820: 6578 635f 6469 722c 2065 7863 5f6e 616d  exc_dir, exc_nam
-00034830: 6529 0a20 2020 2020 2020 2020 2020 2020  e).             
-00034840: 2020 2065 7863 203d 206f 7065 6e28 6578     exc = open(ex
-00034850: 635f 7061 7468 2c20 2277 2229 0a20 2020  c_path, "w").   
-00034860: 2020 2020 2020 2020 2020 2020 2065 7863               exc
-00034870: 2e77 7269 7465 2865 7863 5f63 6f6e 7465  .write(exc_conte
-00034880: 6e74 290a 2020 2020 2020 2020 2020 2020  nt).            
-00034890: 2020 2020 6578 632e 636c 6f73 6528 290a      exc.close().
-000348a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000348b0: 7375 6270 726f 6365 7373 2e72 756e 285b  subprocess.run([
-000348c0: 2263 686d 6f64 222c 2022 2b78 222c 2065  "chmod", "+x", e
-000348d0: 7863 5f70 6174 685d 290a 0a20 2020 2020  xc_path])..     
-000348e0: 2020 2020 2020 2065 6c69 6620 7379 7374         elif syst
-000348f0: 656d 203d 3d20 2257 696e 646f 7773 223a  em == "Windows":
-00034900: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00034910: 2070 6173 730a 2020 2020 2020 2020 2020   pass.          
-00034920: 2020 2020 2020 2320 544f 444f 3a20 6275        # TODO: bu
-00034930: 696c 6420 6d6f 636b 6564 2065 7865 6375  ild mocked execu
-00034940: 7461 626c 6520 666f 7220 5769 6e64 6f77  table for Window
-00034950: 730a 0a20 2020 2020 2020 2023 2053 6567  s..        # Seg
-00034960: 6d65 6e74 206d 6f64 756c 6520 7465 7374  ment module test
-00034970: 696e 6720 696e 746f 2066 756e 6374 696f  ing into functio
-00034980: 6e73 2074 6f20 696d 7072 6f76 6520 7265  ns to improve re
-00034990: 6164 6162 696c 6974 790a 2020 2020 2020  adability.      
-000349a0: 2020 2320 6f66 2074 6865 2063 6f64 650a    # of the code.
-000349b0: 0a20 2020 2020 2020 2064 6566 2074 6573  .        def tes
-000349c0: 745f 6166 6e69 5f63 6f6e 6669 6728 293a  t_afni_config():
-000349d0: 0a20 2020 2020 2020 2020 2020 2022 2222  .            """
-000349e0: 5465 7374 7320 7468 6520 4146 4e49 2063  Tests the AFNI c
-000349f0: 6f6e 6669 6775 7261 7469 6f6e 2e22 2222  onfiguration."""
-00034a00: 0a0a 2020 2020 2020 2020 2020 2020 6d61  ..            ma
-00034a10: 696e 5f77 6e64 2e73 6f66 7477 6172 655f  in_wnd.software_
-00034a20: 7072 6566 6572 656e 6365 735f 706f 705f  preferences_pop_
-00034a30: 7570 2829 2020 2320 5265 6f70 656e 7320  up()  # Reopens 
-00034a40: 7468 6520 7769 6e64 6f77 0a0a 2020 2020  the window..    
-00034a50: 2020 2020 2020 2020 2320 456e 6162 6c65          # Enable
-00034a60: 7320 4146 4e49 0a20 2020 2020 2020 2020  s AFNI.         
-00034a70: 2020 206d 6169 6e5f 776e 642e 706f 705f     main_wnd.pop_
-00034a80: 7570 5f70 7265 6665 7265 6e63 6573 2e75  up_preferences.u
-00034a90: 7365 5f61 666e 695f 6368 6563 6b62 6f78  se_afni_checkbox
-00034aa0: 2e73 6574 4368 6563 6b65 6428 5472 7565  .setChecked(True
-00034ab0: 290a 0a20 2020 2020 2020 2020 2020 2023  )..            #
-00034ac0: 2053 6574 7320 6120 6469 7265 6374 6f72   Sets a director
-00034ad0: 7920 7468 6174 2064 6f65 7320 6e6f 7420  y that does not 
-00034ae0: 6578 6973 740a 2020 2020 2020 2020 2020  exist.          
-00034af0: 2020 280a 2020 2020 2020 2020 2020 2020    (.            
-00034b00: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
-00034b10: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
-00034b20: 6166 6e69 5f63 686f 6963 652e 7365 7454  afni_choice.setT
-00034b30: 6578 7428 0a20 2020 2020 2020 2020 2020  ext(.           
-00034b40: 2020 2020 2020 2020 206f 732e 7061 7468           os.path
-00034b50: 2e6a 6f69 6e28 746d 705f 7061 7468 202b  .join(tmp_path +
-00034b60: 2022 6d6f 636b 2229 0a20 2020 2020 2020   "mock").       
-00034b70: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-00034b80: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00034b90: 2020 2020 206d 6169 6e5f 776e 642e 706f       main_wnd.po
-00034ba0: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
-00034bb0: 2e6f 6b5f 636c 6963 6b65 6428 2920 2023  .ok_clicked()  #
-00034bc0: 204f 7065 6e73 2065 7272 6f72 2064 6961   Opens error dia
-00034bd0: 6c6f 670a 0a20 2020 2020 2020 2020 2020  log..           
-00034be0: 2023 2053 6574 7320 6120 6469 7265 6374   # Sets a direct
-00034bf0: 6f72 7920 7468 6174 2064 6f65 7320 6e6f  ory that does no
-00034c00: 7420 636f 6e74 6169 6e20 7468 6520 4146  t contain the AF
-00034c10: 4e49 2063 6d64 0a20 2020 2020 2020 2020  NI cmd.         
-00034c20: 2020 206d 6169 6e5f 776e 642e 706f 705f     main_wnd.pop_
-00034c30: 7570 5f70 7265 6665 7265 6e63 6573 2e61  up_preferences.a
-00034c40: 666e 695f 6368 6f69 6365 2e73 6574 5465  fni_choice.setTe
-00034c50: 7874 2874 6d70 5f70 6174 6829 0a20 2020  xt(tmp_path).   
-00034c60: 2020 2020 2020 2020 206d 6169 6e5f 776e           main_wn
-00034c70: 642e 706f 705f 7570 5f70 7265 6665 7265  d.pop_up_prefere
-00034c80: 6e63 6573 2e6f 6b5f 636c 6963 6b65 6428  nces.ok_clicked(
-00034c90: 2920 2023 204f 7065 6e73 2065 7272 6f72  )  # Opens error
-00034ca0: 2064 6961 6c6f 670a 0a20 2020 2020 2020   dialog..       
-00034cb0: 2020 2020 2023 2041 7373 6572 7473 2074       # Asserts t
-00034cc0: 6861 7420 4146 4e49 2069 7320 6469 7361  hat AFNI is disa
-00034cd0: 626c 6564 2069 6e20 7468 6520 2763 6f6e  bled in the 'con
-00034ce0: 6669 6727 206f 626a 6563 740a 2020 2020  fig' object.    
-00034cf0: 2020 2020 2020 2020 636f 6e66 6967 203d          config =
-00034d00: 2043 6f6e 6669 6728 636f 6e66 6967 5f70   Config(config_p
-00034d10: 6174 683d 7365 6c66 2e63 6f6e 6669 675f  ath=self.config_
-00034d20: 7061 7468 290a 2020 2020 2020 2020 2020  path).          
-00034d30: 2020 7365 6c66 2e61 7373 6572 7446 616c    self.assertFal
-00034d40: 7365 2863 6f6e 6669 672e 6765 745f 7573  se(config.get_us
-00034d50: 655f 6166 6e69 2829 290a 0a20 2020 2020  e_afni())..     
-00034d60: 2020 2020 2020 2023 2053 6574 7320 7468         # Sets th
-00034d70: 6520 7061 7468 2074 6f20 7468 6520 4146  e path to the AF
-00034d80: 4e49 2074 6f20 2774 6d70 5f70 6174 6827  NI to 'tmp_path'
-00034d90: 0a20 2020 2020 2020 2020 2020 206d 6169  .            mai
-00034da0: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
-00034db0: 6665 7265 6e63 6573 2e61 666e 695f 6368  ferences.afni_ch
-00034dc0: 6f69 6365 2e73 6574 5465 7874 2874 6d70  oice.setText(tmp
-00034dd0: 5f70 6174 6829 0a0a 2020 2020 2020 2020  _path)..        
-00034de0: 2020 2020 6d6f 636b 5f65 7865 6375 7461      mock_executa
-00034df0: 626c 6528 746d 705f 7061 7468 2c20 2261  ble(tmp_path, "a
-00034e00: 666e 6922 2c20 6661 696c 696e 673d 5472  fni", failing=Tr
-00034e10: 7565 290a 2020 2020 2020 2020 2020 2020  ue).            
-00034e20: 6d61 696e 5f77 6e64 2e70 6f70 5f75 705f  main_wnd.pop_up_
-00034e30: 7072 6566 6572 656e 6365 732e 6f6b 5f63  preferences.ok_c
-00034e40: 6c69 636b 6564 2829 2020 2320 4f70 656e  licked()  # Open
-00034e50: 7320 6572 726f 7220 6469 616c 6f67 0a0a  s error dialog..
-00034e60: 2020 2020 2020 2020 2020 2020 6d6f 636b              mock
-00034e70: 5f65 7865 6375 7461 626c 6528 746d 705f  _executable(tmp_
-00034e80: 7061 7468 2c20 2261 666e 6922 290a 2020  path, "afni").  
-00034e90: 2020 2020 2020 2020 2020 6d61 696e 5f77            main_w
-00034ea0: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
-00034eb0: 656e 6365 732e 6f6b 5f63 6c69 636b 6564  ences.ok_clicked
-00034ec0: 2829 2020 2320 436c 6f73 6573 2074 6865  ()  # Closes the
-00034ed0: 2077 696e 646f 770a 0a20 2020 2020 2020   window..       
-00034ee0: 2020 2020 2023 2044 6973 6162 6c65 7320       # Disables 
-00034ef0: 4146 4e49 0a20 2020 2020 2020 2020 2020  AFNI.           
-00034f00: 2063 6f6e 6669 6720 3d20 436f 6e66 6967   config = Config
-00034f10: 2863 6f6e 6669 675f 7061 7468 3d73 656c  (config_path=sel
-00034f20: 662e 636f 6e66 6967 5f70 6174 6829 0a20  f.config_path). 
-00034f30: 2020 2020 2020 2020 2020 2063 6f6e 6669             confi
-00034f40: 672e 7365 745f 7573 655f 6166 6e69 2846  g.set_use_afni(F
-00034f50: 616c 7365 290a 2020 2020 2020 2020 2020  alse).          
-00034f60: 2020 636f 6e66 6967 2e73 6574 5f61 666e    config.set_afn
-00034f70: 695f 7061 7468 2822 2229 0a0a 2020 2020  i_path("")..    
-00034f80: 2020 2020 6465 6620 7465 7374 5f61 6e74      def test_ant
-00034f90: 735f 636f 6e66 6967 2829 3a0a 2020 2020  s_config():.    
-00034fa0: 2020 2020 2020 2020 2222 2254 6573 7473          """Tests
-00034fb0: 2074 6865 2041 4e54 5320 636f 6e66 6967   the ANTS config
-00034fc0: 7572 6174 696f 6e2e 2222 220a 0a20 2020  uration."""..   
-00034fd0: 2020 2020 2020 2020 206d 6169 6e5f 776e           main_wn
-00034fe0: 642e 736f 6674 7761 7265 5f70 7265 6665  d.software_prefe
-00034ff0: 7265 6e63 6573 5f70 6f70 5f75 7028 2920  rences_pop_up() 
-00035000: 2023 2052 656f 7065 6e73 2074 6865 2077   # Reopens the w
-00035010: 696e 646f 770a 0a20 2020 2020 2020 2020  indow..         
-00035020: 2020 2023 2045 6e61 626c 6573 2041 4e54     # Enables ANT
-00035030: 530a 2020 2020 2020 2020 2020 2020 6d61  S.            ma
-00035040: 696e 5f77 6e64 2e70 6f70 5f75 705f 7072  in_wnd.pop_up_pr
-00035050: 6566 6572 656e 6365 732e 7573 655f 616e  eferences.use_an
-00035060: 7473 5f63 6865 636b 626f 782e 7365 7443  ts_checkbox.setC
-00035070: 6865 636b 6564 2854 7275 6529 0a0a 2020  hecked(True)..  
-00035080: 2020 2020 2020 2020 2020 2320 5365 7473            # Sets
-00035090: 2061 2064 6972 6563 746f 7279 2074 6861   a directory tha
-000350a0: 7420 646f 6573 206e 6f74 2065 7869 7374  t does not exist
-000350b0: 0a20 2020 2020 2020 2020 2020 2028 0a20  .            (. 
-000350c0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-000350d0: 6169 6e5f 776e 642e 706f 705f 7570 5f70  ain_wnd.pop_up_p
-000350e0: 7265 6665 7265 6e63 6573 2e61 6e74 735f  references.ants_
-000350f0: 6368 6f69 6365 2e73 6574 5465 7874 280a  choice.setText(.
-00035100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00035110: 2020 2020 6f73 2e70 6174 682e 6a6f 696e      os.path.join
-00035120: 2874 6d70 5f70 6174 6820 2b20 226d 6f63  (tmp_path + "moc
-00035130: 6b22 290a 2020 2020 2020 2020 2020 2020  k").            
-00035140: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-00035150: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-00035160: 6d61 696e 5f77 6e64 2e70 6f70 5f75 705f  main_wnd.pop_up_
-00035170: 7072 6566 6572 656e 6365 732e 6f6b 5f63  preferences.ok_c
-00035180: 6c69 636b 6564 2829 2020 2320 4f70 656e  licked()  # Open
-00035190: 7320 6572 726f 7220 6469 616c 6f67 0a0a  s error dialog..
-000351a0: 2020 2020 2020 2020 2020 2020 2320 5365              # Se
-000351b0: 7473 2061 2064 6972 6563 746f 7279 2074  ts a directory t
-000351c0: 6861 7420 646f 6573 206e 6f74 2063 6f6e  hat does not con
-000351d0: 7461 696e 2074 6865 2041 4e54 5320 636d  tain the ANTS cm
-000351e0: 640a 2020 2020 2020 2020 2020 2020 6d61  d.            ma
-000351f0: 696e 5f77 6e64 2e70 6f70 5f75 705f 7072  in_wnd.pop_up_pr
-00035200: 6566 6572 656e 6365 732e 616e 7473 5f63  eferences.ants_c
-00035210: 686f 6963 652e 7365 7454 6578 7428 746d  hoice.setText(tm
-00035220: 705f 7061 7468 290a 2020 2020 2020 2020  p_path).        
-00035230: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
-00035240: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
-00035250: 6f6b 5f63 6c69 636b 6564 2829 2020 2320  ok_clicked()  # 
-00035260: 4f70 656e 7320 6572 726f 7220 6469 616c  Opens error dial
-00035270: 6f67 0a0a 2020 2020 2020 2020 2020 2020  og..            
-00035280: 2320 4173 7365 7274 7320 7468 6174 2041  # Asserts that A
-00035290: 4e54 5320 6973 2064 6973 6162 6c65 6420  NTS is disabled 
-000352a0: 696e 2074 6865 2027 636f 6e66 6967 2720  in the 'config' 
-000352b0: 6f62 6a65 6374 0a20 2020 2020 2020 2020  object.         
-000352c0: 2020 2063 6f6e 6669 6720 3d20 436f 6e66     config = Conf
-000352d0: 6967 2863 6f6e 6669 675f 7061 7468 3d73  ig(config_path=s
-000352e0: 656c 662e 636f 6e66 6967 5f70 6174 6829  elf.config_path)
-000352f0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00035300: 662e 6173 7365 7274 4661 6c73 6528 636f  f.assertFalse(co
-00035310: 6e66 6967 2e67 6574 5f75 7365 5f61 6e74  nfig.get_use_ant
-00035320: 7328 2929 0a0a 2020 2020 2020 2020 2020  s())..          
-00035330: 2020 2320 5365 7473 2074 6865 2070 6174    # Sets the pat
-00035340: 6820 746f 2074 6865 2041 464e 4920 746f  h to the AFNI to
-00035350: 2027 746d 705f 7061 7468 270a 2020 2020   'tmp_path'.    
-00035360: 2020 2020 2020 2020 6d61 696e 5f77 6e64          main_wnd
-00035370: 2e70 6f70 5f75 705f 7072 6566 6572 656e  .pop_up_preferen
-00035380: 6365 732e 6166 6e69 5f63 686f 6963 652e  ces.afni_choice.
-00035390: 7365 7454 6578 7428 746d 705f 7061 7468  setText(tmp_path
-000353a0: 290a 0a20 2020 2020 2020 2020 2020 206d  )..            m
-000353b0: 6f63 6b5f 6578 6563 7574 6162 6c65 2874  ock_executable(t
-000353c0: 6d70 5f70 6174 682c 2022 536d 6f6f 7468  mp_path, "Smooth
-000353d0: 496d 6167 6522 2c20 6661 696c 696e 673d  Image", failing=
-000353e0: 5472 7565 290a 2020 2020 2020 2020 2020  True).          
-000353f0: 2020 6d61 696e 5f77 6e64 2e70 6f70 5f75    main_wnd.pop_u
-00035400: 705f 7072 6566 6572 656e 6365 732e 6f6b  p_preferences.ok
-00035410: 5f63 6c69 636b 6564 2829 2020 2320 4f70  _clicked()  # Op
-00035420: 656e 7320 6572 726f 7220 6469 616c 6f67  ens error dialog
-00035430: 0a0a 2020 2020 2020 2020 2020 2020 6d6f  ..            mo
-00035440: 636b 5f65 7865 6375 7461 626c 6528 746d  ck_executable(tm
-00035450: 705f 7061 7468 2c20 2253 6d6f 6f74 6849  p_path, "SmoothI
-00035460: 6d61 6765 2229 0a20 2020 2020 2020 2020  mage").         
-00035470: 2020 206d 6169 6e5f 776e 642e 706f 705f     main_wnd.pop_
-00035480: 7570 5f70 7265 6665 7265 6e63 6573 2e6f  up_preferences.o
-00035490: 6b5f 636c 6963 6b65 6428 2920 2023 2043  k_clicked()  # C
-000354a0: 6c6f 7365 7320 7468 6520 7769 6e64 6f77  loses the window
-000354b0: 0a0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-000354c0: 4469 7361 626c 6573 2041 4e54 530a 2020  Disables ANTS.  
-000354d0: 2020 2020 2020 2020 2020 636f 6e66 6967            config
-000354e0: 203d 2043 6f6e 6669 6728 636f 6e66 6967   = Config(config
-000354f0: 5f70 6174 683d 7365 6c66 2e63 6f6e 6669  _path=self.confi
-00035500: 675f 7061 7468 290a 2020 2020 2020 2020  g_path).        
-00035510: 2020 2020 636f 6e66 6967 2e73 6574 5f75      config.set_u
-00035520: 7365 5f61 6e74 7328 4661 6c73 6529 0a20  se_ants(False). 
-00035530: 2020 2020 2020 2020 2020 2063 6f6e 6669             confi
-00035540: 672e 7365 745f 616e 7473 5f70 6174 6828  g.set_ants_path(
-00035550: 2222 290a 0a20 2020 2020 2020 2064 6566  "")..        def
-00035560: 2074 6573 745f 6673 6c5f 636f 6e66 6967   test_fsl_config
-00035570: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
-00035580: 2222 2254 6573 7473 2074 6865 2046 534c  """Tests the FSL
-00035590: 2063 6f6e 6669 6775 7261 7469 6f6e 2e22   configuration."
-000355a0: 2222 0a0a 2020 2020 2020 2020 2020 2020  ""..            
-000355b0: 6d61 696e 5f77 6e64 2e73 6f66 7477 6172  main_wnd.softwar
-000355c0: 655f 7072 6566 6572 656e 6365 735f 706f  e_preferences_po
-000355d0: 705f 7570 2829 2020 2320 5265 6f70 656e  p_up()  # Reopen
-000355e0: 7320 7468 6520 7769 6e64 6f77 0a0a 2020  s the window..  
-000355f0: 2020 2020 2020 2020 2020 2320 456e 6162            # Enab
-00035600: 6c65 7320 4653 4c0a 2020 2020 2020 2020  les FSL.        
-00035610: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
-00035620: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
-00035630: 7573 655f 6673 6c5f 6368 6563 6b62 6f78  use_fsl_checkbox
-00035640: 2e73 6574 4368 6563 6b65 6428 5472 7565  .setChecked(True
-00035650: 290a 0a20 2020 2020 2020 2020 2020 2023  )..            #
-00035660: 2044 6f65 7320 6e6f 7420 7365 7420 6120   Does not set a 
-00035670: 6469 7265 6374 6f72 7920 666f 7220 4653  directory for FS
-00035680: 4c0a 2020 2020 2020 2020 2020 2020 6d61  L.            ma
-00035690: 696e 5f77 6e64 2e70 6f70 5f75 705f 7072  in_wnd.pop_up_pr
-000356a0: 6566 6572 656e 6365 732e 6f6b 5f63 6c69  eferences.ok_cli
-000356b0: 636b 6564 2829 0a0a 2020 2020 2020 2020  cked()..        
-000356c0: 2020 2020 2320 5365 7473 2070 6174 6873      # Sets paths
-000356d0: 2074 6f20 7468 6520 6269 6e20 616e 6420   to the bin and 
-000356e0: 7061 7265 6e74 2064 6972 6563 746f 7279  parent directory
-000356f0: 2066 6f6c 6465 7273 0a20 2020 2020 2020   folders.       
-00035700: 2020 2020 206d 6169 6e5f 776e 642e 706f       main_wnd.po
-00035710: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
-00035720: 2e66 736c 5f63 686f 6963 652e 7365 7454  .fsl_choice.setT
-00035730: 6578 7428 0a20 2020 2020 2020 2020 2020  ext(.           
-00035740: 2020 2020 206f 732e 7061 7468 2e6a 6f69       os.path.joi
-00035750: 6e28 746d 705f 7061 7468 2c20 2265 7463  n(tmp_path, "etc
-00035760: 222c 2022 6673 6c63 6f6e 6622 2c20 2262  ", "fslconf", "b
-00035770: 696e 2229 0a20 2020 2020 2020 2020 2020  in").           
-00035780: 2029 0a20 2020 2020 2020 2020 2020 206d   ).            m
-00035790: 6169 6e5f 776e 642e 706f 705f 7570 5f70  ain_wnd.pop_up_p
-000357a0: 7265 6665 7265 6e63 6573 2e6f 6b5f 636c  references.ok_cl
-000357b0: 6963 6b65 6428 2920 2023 204f 7065 6e73  icked()  # Opens
-000357c0: 2065 7272 6f72 2064 6961 6c6f 670a 0a20   error dialog.. 
-000357d0: 2020 2020 2020 2020 2020 206d 6169 6e5f             main_
-000357e0: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
-000357f0: 7265 6e63 6573 2e66 736c 5f63 686f 6963  rences.fsl_choic
-00035800: 652e 7365 7454 6578 7428 0a20 2020 2020  e.setText(.     
-00035810: 2020 2020 2020 2020 2020 206f 732e 7061             os.pa
-00035820: 7468 2e6a 6f69 6e28 746d 705f 7061 7468  th.join(tmp_path
-00035830: 2c20 2265 7463 222c 2022 6673 6c63 6f6e  , "etc", "fslcon
-00035840: 6622 290a 2020 2020 2020 2020 2020 2020  f").            
-00035850: 290a 2020 2020 2020 2020 2020 2020 6d61  ).            ma
-00035860: 696e 5f77 6e64 2e70 6f70 5f75 705f 7072  in_wnd.pop_up_pr
-00035870: 6566 6572 656e 6365 732e 6f6b 5f63 6c69  eferences.ok_cli
-00035880: 636b 6564 2829 2020 2320 4f70 656e 7320  cked()  # Opens 
-00035890: 6572 726f 7220 6469 616c 6f67 0a0a 2020  error dialog..  
-000358a0: 2020 2020 2020 2020 2020 2320 5365 7473            # Sets
-000358b0: 2061 2064 6972 6563 746f 7279 2074 6861   a directory tha
-000358c0: 7420 646f 6573 206e 6f74 2063 6f6e 7461  t does not conta
-000358d0: 696e 2074 6865 2046 534c 2063 6d64 0a20  in the FSL cmd. 
-000358e0: 2020 2020 2020 2020 2020 206d 6169 6e5f             main_
-000358f0: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
-00035900: 7265 6e63 6573 2e66 736c 5f63 686f 6963  rences.fsl_choic
-00035910: 652e 7365 7454 6578 7428 746d 705f 7061  e.setText(tmp_pa
-00035920: 7468 290a 2020 2020 2020 2020 2020 2020  th).            
-00035930: 6d61 696e 5f77 6e64 2e70 6f70 5f75 705f  main_wnd.pop_up_
-00035940: 7072 6566 6572 656e 6365 732e 6f6b 5f63  preferences.ok_c
-00035950: 6c69 636b 6564 2829 2020 2320 4f70 656e  licked()  # Open
-00035960: 7320 6572 726f 7220 6469 616c 6f67 0a0a  s error dialog..
-00035970: 2020 2020 2020 2020 2020 2020 2320 4173              # As
-00035980: 7365 7274 7320 7468 6174 2046 534c 2069  serts that FSL i
-00035990: 7320 6469 7361 626c 6564 2069 6e20 7468  s disabled in th
-000359a0: 6520 2763 6f6e 6669 6727 206f 626a 6563  e 'config' objec
-000359b0: 740a 2020 2020 2020 2020 2020 2020 636f  t.            co
-000359c0: 6e66 6967 203d 2043 6f6e 6669 6728 636f  nfig = Config(co
-000359d0: 6e66 6967 5f70 6174 683d 7365 6c66 2e63  nfig_path=self.c
-000359e0: 6f6e 6669 675f 7061 7468 290a 2020 2020  onfig_path).    
-000359f0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00035a00: 6572 7446 616c 7365 2863 6f6e 6669 672e  ertFalse(config.
-00035a10: 6765 745f 7573 655f 6673 6c28 2929 0a0a  get_use_fsl())..
-00035a20: 2020 2020 2020 2020 2020 2020 2320 5365              # Se
-00035a30: 7473 2074 6865 2070 6174 6820 746f 2074  ts the path to t
-00035a40: 6865 2046 534c 2074 6f20 2774 6d70 5f70  he FSL to 'tmp_p
-00035a50: 6174 6827 0a20 2020 2020 2020 2020 2020  ath'.           
-00035a60: 2066 736c 5f70 6174 6820 3d20 6f73 2e70   fsl_path = os.p
-00035a70: 6174 682e 6a6f 696e 2874 6d70 5f70 6174  ath.join(tmp_pat
-00035a80: 682c 2022 6269 6e22 290a 2020 2020 2020  h, "bin").      
-00035a90: 2020 2020 2020 6f73 2e6d 6b64 6972 2866        os.mkdir(f
-00035aa0: 736c 5f70 6174 6829 0a20 2020 2020 2020  sl_path).       
-00035ab0: 2020 2020 206d 6169 6e5f 776e 642e 706f       main_wnd.po
-00035ac0: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
-00035ad0: 2e66 736c 5f63 686f 6963 652e 7365 7454  .fsl_choice.setT
-00035ae0: 6578 7428 6673 6c5f 7061 7468 290a 0a20  ext(fsl_path).. 
-00035af0: 2020 2020 2020 2020 2020 206d 6f63 6b5f             mock_
-00035b00: 6578 6563 7574 6162 6c65 2866 736c 5f70  executable(fsl_p
-00035b10: 6174 682c 2022 666c 6972 7422 2c20 6661  ath, "flirt", fa
-00035b20: 696c 696e 673d 5472 7565 290a 2020 2020  iling=True).    
-00035b30: 2020 2020 2020 2020 6d61 696e 5f77 6e64          main_wnd
-00035b40: 2e70 6f70 5f75 705f 7072 6566 6572 656e  .pop_up_preferen
-00035b50: 6365 732e 6f6b 5f63 6c69 636b 6564 2829  ces.ok_clicked()
-00035b60: 2020 2320 4f70 656e 7320 6572 726f 7220    # Opens error 
-00035b70: 6469 616c 6f67 0a0a 2020 2020 2020 2020  dialog..        
-00035b80: 2020 2020 6d6f 636b 5f65 7865 6375 7461      mock_executa
-00035b90: 626c 6528 6673 6c5f 7061 7468 2c20 2266  ble(fsl_path, "f
-00035ba0: 6c69 7274 2229 0a20 2020 2020 2020 2020  lirt").         
-00035bb0: 2020 206d 6169 6e5f 776e 642e 706f 705f     main_wnd.pop_
-00035bc0: 7570 5f70 7265 6665 7265 6e63 6573 2e6f  up_preferences.o
-00035bd0: 6b5f 636c 6963 6b65 6428 2920 2023 2043  k_clicked()  # C
-00035be0: 6c6f 7365 7320 7468 6520 7769 6e64 6f77  loses the window
-00035bf0: 0a0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-00035c00: 4469 7361 626c 6573 2046 534c 0a20 2020  Disables FSL.   
-00035c10: 2020 2020 2020 2020 2063 6f6e 6669 6720           config 
-00035c20: 3d20 436f 6e66 6967 2863 6f6e 6669 675f  = Config(config_
-00035c30: 7061 7468 3d73 656c 662e 636f 6e66 6967  path=self.config
-00035c40: 5f70 6174 6829 0a20 2020 2020 2020 2020  _path).         
-00035c50: 2020 2063 6f6e 6669 672e 7365 745f 7573     config.set_us
-00035c60: 655f 6673 6c28 4661 6c73 6529 0a20 2020  e_fsl(False).   
-00035c70: 2020 2020 2020 2020 2063 6f6e 6669 672e           config.
-00035c80: 7365 745f 6673 6c5f 636f 6e66 6967 2822  set_fsl_config("
-00035c90: 2229 0a0a 2020 2020 2020 2020 6465 6620  ")..        def 
-00035ca0: 7465 7374 5f73 706d 5f6d 6174 6c61 625f  test_spm_matlab_
-00035cb0: 636f 6e66 6967 2829 3a0a 2020 2020 2020  config():.      
-00035cc0: 2020 2020 2020 2222 2254 6573 7473 2074        """Tests t
-00035cd0: 6865 2053 504d 2061 6e64 204d 4154 4c41  he SPM and MATLA
-00035ce0: 4220 286c 6963 656e 6365 2920 636f 6e66  B (licence) conf
-00035cf0: 6967 7572 6174 696f 6e2e 2222 220a 0a20  iguration.""".. 
-00035d00: 2020 2020 2020 2020 2020 206d 6169 6e5f             main_
-00035d10: 776e 642e 736f 6674 7761 7265 5f70 7265  wnd.software_pre
-00035d20: 6665 7265 6e63 6573 5f70 6f70 5f75 7028  ferences_pop_up(
-00035d30: 2920 2023 2052 656f 7065 6e73 2074 6865  )  # Reopens the
-00035d40: 2077 696e 646f 770a 0a20 2020 2020 2020   window..       
-00035d50: 2020 2020 2023 2045 6e61 626c 6573 2053       # Enables S
-00035d60: 504d 0a20 2020 2020 2020 2020 2020 206d  PM.            m
-00035d70: 6169 6e5f 776e 642e 706f 705f 7570 5f70  ain_wnd.pop_up_p
-00035d80: 7265 6665 7265 6e63 6573 2e75 7365 5f73  references.use_s
-00035d90: 706d 5f63 6865 636b 626f 782e 7365 7443  pm_checkbox.setC
-00035da0: 6865 636b 6564 2854 7275 6529 0a0a 2020  hecked(True)..  
-00035db0: 2020 2020 2020 2020 2020 2320 5365 7473            # Sets
-00035dc0: 2061 204d 4154 4c41 4220 6578 6563 7574   a MATLAB execut
-00035dd0: 6162 6c65 2070 6174 6820 7468 6174 2064  able path that d
-00035de0: 6f65 7320 6e6f 7420 6578 6973 7473 0a20  oes not exists. 
-00035df0: 2020 2020 2020 2020 2020 206d 6169 6e5f             main_
-00035e00: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
-00035e10: 7265 6e63 6573 2e6d 6174 6c61 625f 6368  rences.matlab_ch
-00035e20: 6f69 6365 2e73 6574 5465 7874 280a 2020  oice.setText(.  
-00035e30: 2020 2020 2020 2020 2020 2020 2020 6f73                os
-00035e40: 2e70 6174 682e 6a6f 696e 2874 6d70 5f70  .path.join(tmp_p
-00035e50: 6174 682c 2022 6d61 746c 6162 2229 0a20  ath, "matlab"). 
-00035e60: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-00035e70: 2020 2020 2020 2020 206d 6169 6e5f 776e           main_wn
-00035e80: 642e 706f 705f 7570 5f70 7265 6665 7265  d.pop_up_prefere
-00035e90: 6e63 6573 2e6f 6b5f 636c 6963 6b65 6428  nces.ok_clicked(
-00035ea0: 2920 2023 204f 7065 6e73 2065 7272 6f72  )  # Opens error
-00035eb0: 2064 6961 6c6f 670a 0a20 2020 2020 2020   dialog..       
-00035ec0: 2020 2020 2023 2043 7265 6174 6573 2061       # Creates a
-00035ed0: 2066 6169 6c69 6e67 204d 4154 4c41 4220   failing MATLAB 
-00035ee0: 6578 6563 7574 6162 6c65 0a20 2020 2020  executable.     
-00035ef0: 2020 2020 2020 206d 6f63 6b5f 6578 6563         mock_exec
-00035f00: 7574 6162 6c65 2874 6d70 5f70 6174 682c  utable(tmp_path,
-00035f10: 2022 6d61 746c 6162 222c 2066 6169 6c69   "matlab", faili
-00035f20: 6e67 3d54 7275 6529 0a0a 2020 2020 2020  ng=True)..      
-00035f30: 2020 2020 2020 2320 5365 7473 2074 6865        # Sets the
-00035f40: 2073 616d 6520 4d41 544c 4142 2064 6972   same MATLAB dir
-00035f50: 6563 746f 7279 2069 6e20 7468 6520 7072  ectory in the pr
-00035f60: 6566 6572 656e 6365 7320 7769 6e64 6f77  eferences window
-00035f70: 2061 6e64 0a20 2020 2020 2020 2020 2020   and.           
-00035f80: 2023 2069 6e20 7468 6520 636f 6e66 6967   # in the config
-00035f90: 206f 626a 6563 740a 2020 2020 2020 2020   object.        
-00035fa0: 2020 2020 636f 6e66 6967 203d 2043 6f6e      config = Con
-00035fb0: 6669 6728 636f 6e66 6967 5f70 6174 683d  fig(config_path=
-00035fc0: 7365 6c66 2e63 6f6e 6669 675f 7061 7468  self.config_path
-00035fd0: 290a 2020 2020 2020 2020 2020 2020 636f  ).            co
-00035fe0: 6e66 6967 2e73 6574 5f6d 6174 6c61 625f  nfig.set_matlab_
-00035ff0: 7061 7468 286f 732e 7061 7468 2e6a 6f69  path(os.path.joi
-00036000: 6e28 746d 705f 7061 7468 2c20 226d 6174  n(tmp_path, "mat
-00036010: 6c61 6222 2929 0a20 2020 2020 2020 2020  lab")).         
-00036020: 2020 2023 206d 6169 6e5f 776e 642e 706f     # main_wnd.po
-00036030: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
-00036040: 2e6f 6b5f 636c 6963 6b65 6428 2920 2320  .ok_clicked() # 
-00036050: 4f70 656e 7320 6572 726f 7220 6469 616c  Opens error dial
-00036060: 6f67 0a0a 2020 2020 2020 2020 2020 2020  og..            
-00036070: 2320 416c 736f 2073 6574 7320 7468 6520  # Also sets the 
-00036080: 7361 6d65 2053 504d 2064 6972 6563 746f  same SPM directo
-00036090: 7279 2069 6e20 7468 6520 7072 6566 6572  ry in the prefer
-000360a0: 656e 6365 7320 7769 6e64 6f77 2061 6e64  ences window and
-000360b0: 0a20 2020 2020 2020 2020 2020 2023 2069  .            # i
-000360c0: 6e20 7468 6520 636f 6e66 6967 206f 626a  n the config obj
-000360d0: 6563 742c 2061 6e64 2061 2027 746d 705f  ect, and a 'tmp_
-000360e0: 7061 7468 2720 6173 2074 6865 204d 4154  path' as the MAT
-000360f0: 4c41 4220 6469 7265 6374 6f72 790a 2020  LAB directory.  
-00036100: 2020 2020 2020 2020 2020 636f 6e66 6967            config
-00036110: 203d 2043 6f6e 6669 6728 636f 6e66 6967   = Config(config
-00036120: 5f70 6174 683d 7365 6c66 2e63 6f6e 6669  _path=self.confi
-00036130: 675f 7061 7468 290a 2020 2020 2020 2020  g_path).        
-00036140: 2020 2020 636f 6e66 6967 2e73 6574 5f73      config.set_s
-00036150: 706d 5f70 6174 6828 746d 705f 7061 7468  pm_path(tmp_path
-00036160: 290a 2020 2020 2020 2020 2020 2020 6d61  ).            ma
-00036170: 696e 5f77 6e64 2e70 6f70 5f75 705f 7072  in_wnd.pop_up_pr
-00036180: 6566 6572 656e 6365 732e 7370 6d5f 6368  eferences.spm_ch
-00036190: 6f69 6365 2e73 6574 5465 7874 2874 6d70  oice.setText(tmp
-000361a0: 5f70 6174 6829 0a20 2020 2020 2020 2020  _path).         
-000361b0: 2020 206d 6169 6e5f 776e 642e 706f 705f     main_wnd.pop_
-000361c0: 7570 5f70 7265 6665 7265 6e63 6573 2e6f  up_preferences.o
-000361d0: 6b5f 636c 6963 6b65 6428 2920 2023 2043  k_clicked()  # C
-000361e0: 6c6f 7365 7320 7468 6520 7769 6e64 6f77  loses the window
-000361f0: 0a0a 2020 2020 2020 2020 2020 2020 636f  ..            co
-00036200: 6e66 6967 203d 2043 6f6e 6669 6728 636f  nfig = Config(co
-00036210: 6e66 6967 5f70 6174 683d 7365 6c66 2e63  nfig_path=self.c
-00036220: 6f6e 6669 675f 7061 7468 290a 2020 2020  onfig_path).    
-00036230: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00036240: 6572 7454 7275 6528 636f 6e66 6967 2e67  ertTrue(config.g
-00036250: 6574 5f75 7365 5f73 706d 2829 290a 2020  et_use_spm()).  
-00036260: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
-00036270: 7373 6572 7454 7275 6528 636f 6e66 6967  ssertTrue(config
-00036280: 2e67 6574 5f75 7365 5f6d 6174 6c61 6228  .get_use_matlab(
-00036290: 2929 0a20 2020 2020 2020 2020 2020 2073  )).            s
-000362a0: 656c 662e 6173 7365 7274 4661 6c73 6528  elf.assertFalse(
-000362b0: 636f 6e66 6967 2e67 6574 5f75 7365 5f6d  config.get_use_m
-000362c0: 6174 6c61 625f 7374 616e 6461 6c6f 6e65  atlab_standalone
-000362d0: 2829 290a 2020 2020 2020 2020 2020 2020  ()).            
-000362e0: 2320 4361 7365 2077 6865 7265 2062 6f74  # Case where bot
-000362f0: 6820 4d41 544c 4142 2061 6e64 2053 504d  h MATLAB and SPM
-00036300: 2061 7070 6c69 6361 7469 6f6e 7320 6172   applications ar
-00036310: 6520 7573 6564 0a0a 2020 2020 2020 2020  e used..        
-00036320: 2020 2020 6d61 696e 5f77 6e64 2e73 6f66      main_wnd.sof
-00036330: 7477 6172 655f 7072 6566 6572 656e 6365  tware_preference
-00036340: 735f 706f 705f 7570 2829 2020 2320 5265  s_pop_up()  # Re
-00036350: 6f70 656e 7320 7468 6520 7769 6e64 6f77  opens the window
-00036360: 0a0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-00036370: 5265 7365 7473 2074 6865 204d 4154 4c41  Resets the MATLA
-00036380: 4220 6578 6563 7574 6162 6c65 2070 6174  B executable pat
-00036390: 680a 2020 2020 2020 2020 2020 2020 436f  h.            Co
-000363a0: 6e66 6967 2863 6f6e 6669 675f 7061 7468  nfig(config_path
-000363b0: 3d73 656c 662e 636f 6e66 6967 5f70 6174  =self.config_pat
-000363c0: 6829 2e73 6574 5f6d 6174 6c61 625f 7061  h).set_matlab_pa
-000363d0: 7468 2822 2229 0a20 2020 2020 2020 2020  th("").         
-000363e0: 2020 206d 6169 6e5f 776e 642e 706f 705f     main_wnd.pop_
-000363f0: 7570 5f70 7265 6665 7265 6e63 6573 2e6f  up_preferences.o
-00036400: 6b5f 636c 6963 6b65 6428 2920 2023 204f  k_clicked()  # O
-00036410: 7065 6e73 2065 7272 6f72 2064 6961 6c6f  pens error dialo
-00036420: 670a 0a20 2020 2020 2020 2020 2020 2023  g..            #
-00036430: 2043 7265 6174 6573 2061 2077 6f72 6b69   Creates a worki
-00036440: 6e67 204d 4154 4c41 4220 6578 6563 7574  ng MATLAB execut
-00036450: 6162 6c65 0a20 2020 2020 2020 2020 2020  able.           
-00036460: 206d 6f63 6b5f 6578 6563 7574 6162 6c65   mock_executable
-00036470: 2874 6d70 5f70 6174 682c 2022 6d61 746c  (tmp_path, "matl
-00036480: 6162 2229 0a20 2020 2020 2020 2020 2020  ab").           
-00036490: 206d 6169 6e5f 776e 642e 706f 705f 7570   main_wnd.pop_up
-000364a0: 5f70 7265 6665 7265 6e63 6573 2e6f 6b5f  _preferences.ok_
-000364b0: 636c 6963 6b65 6428 2920 2023 2043 6c6f  clicked()  # Clo
-000364c0: 7365 7320 7468 6520 7769 6e64 6f77 0a0a  ses the window..
-000364d0: 2020 2020 2020 2020 2020 2020 6d61 696e              main
-000364e0: 5f77 6e64 2e73 6f66 7477 6172 655f 7072  _wnd.software_pr
-000364f0: 6566 6572 656e 6365 735f 706f 705f 7570  eferences_pop_up
-00036500: 2829 2020 2320 5265 6f70 656e 7320 7468  ()  # Reopens th
-00036510: 6520 7769 6e64 6f77 0a0a 2020 2020 2020  e window..      
-00036520: 2020 2020 2020 2320 5265 7374 7269 6374        # Restrict
-00036530: 7320 7468 6520 7065 726d 6973 7369 6f6e  s the permission
-00036540: 206f 6e20 7468 6520 4d41 544c 4142 2065   on the MATLAB e
-00036550: 7865 6375 7461 626c 6520 746f 2069 6e64  xecutable to ind
-00036560: 7563 650a 2020 2020 2020 2020 2020 2020  uce.            
-00036570: 2320 616e 2065 7863 6570 7469 6f6e 206f  # an exception o
-00036580: 6e20 2773 7562 7072 6f63 6573 732e 506f  n 'subprocess.Po
-00036590: 7065 6e27 0a20 2020 2020 2020 2020 2020  pen'.           
-000365a0: 2073 7562 7072 6f63 6573 732e 7275 6e28   subprocess.run(
-000365b0: 5b22 6368 6d6f 6422 2c20 222d 7822 2c20  ["chmod", "-x", 
-000365c0: 6f73 2e70 6174 682e 6a6f 696e 2874 6d70  os.path.join(tmp
-000365d0: 5f70 6174 682c 2022 6d61 746c 6162 2229  _path, "matlab")
-000365e0: 5d29 0a0a 2020 2020 2020 2020 2020 2020  ])..            
-000365f0: 2320 5265 7365 7473 2074 6865 204d 4154  # Resets the MAT
-00036600: 4c41 4220 6578 6563 7574 6162 6c65 2070  LAB executable p
-00036610: 6174 6820 2877 6869 6368 2077 6173 2073  ath (which was s
-00036620: 6574 2062 7920 7468 6520 6c61 7374 0a20  et by the last. 
-00036630: 2020 2020 2020 2020 2020 2023 2063 616c             # cal
-00036640: 6c20 6f6e 2027 6f6b 5f63 6c69 636b 6564  l on 'ok_clicked
-00036650: 2729 0a20 2020 2020 2020 2020 2020 2043  ').            C
-00036660: 6f6e 6669 6728 636f 6e66 6967 5f70 6174  onfig(config_pat
-00036670: 683d 7365 6c66 2e63 6f6e 6669 675f 7061  h=self.config_pa
-00036680: 7468 292e 7365 745f 6d61 746c 6162 5f70  th).set_matlab_p
-00036690: 6174 6828 2222 290a 0a20 2020 2020 2020  ath("")..       
-000366a0: 2020 2020 206d 6169 6e5f 776e 642e 706f       main_wnd.po
-000366b0: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
-000366c0: 2e6f 6b5f 636c 6963 6b65 6428 2920 2023  .ok_clicked()  #
-000366d0: 204f 7065 6e73 2065 7272 6f72 2064 6961   Opens error dia
-000366e0: 6c6f 670a 0a20 2020 2020 2020 2020 2020  log..           
-000366f0: 2023 2043 6173 6520 7768 6572 6520 5350   # Case where SP
-00036700: 4d20 6469 7265 6374 6f72 7920 6973 206e  M directory is n
-00036710: 6f74 2076 616c 6964 0a20 2020 2020 2020  ot valid.       
-00036720: 2020 2020 2028 0a20 2020 2020 2020 2020       (.         
-00036730: 2020 2020 2020 206d 6169 6e5f 776e 642e         main_wnd.
-00036740: 706f 705f 7570 5f70 7265 6665 7265 6e63  pop_up_preferenc
-00036750: 6573 2e73 706d 5f63 686f 6963 652e 7365  es.spm_choice.se
-00036760: 7454 6578 7428 0a20 2020 2020 2020 2020  tText(.         
-00036770: 2020 2020 2020 2020 2020 206f 732e 7061             os.pa
-00036780: 7468 2e6a 6f69 6e28 746d 705f 7061 7468  th.join(tmp_path
-00036790: 2c20 226e 6f74 5f65 7869 7374 696e 6722  , "not_existing"
-000367a0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000367b0: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-000367c0: 290a 2020 2020 2020 2020 2020 2020 6d61  ).            ma
-000367d0: 696e 5f77 6e64 2e70 6f70 5f75 705f 7072  in_wnd.pop_up_pr
-000367e0: 6566 6572 656e 6365 732e 6f6b 5f63 6c69  eferences.ok_cli
-000367f0: 636b 6564 2829 2020 2320 4f70 656e 7320  cked()  # Opens 
-00036800: 6572 726f 7220 6469 616c 6f67 0a0a 2020  error dialog..  
-00036810: 2020 2020 2020 2020 2020 6d61 696e 5f77            main_w
-00036820: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
-00036830: 656e 6365 732e 636c 6f73 6528 290a 0a20  ences.close().. 
-00036840: 2020 2020 2020 2020 2020 2023 2044 6973             # Dis
-00036850: 6162 6c65 7320 4d41 544c 4142 2061 6e64  ables MATLAB and
-00036860: 2053 504d 0a20 2020 2020 2020 2020 2020   SPM.           
-00036870: 2063 6f6e 6669 6720 3d20 436f 6e66 6967   config = Config
-00036880: 2863 6f6e 6669 675f 7061 7468 3d73 656c  (config_path=sel
-00036890: 662e 636f 6e66 6967 5f70 6174 6829 0a20  f.config_path). 
-000368a0: 2020 2020 2020 2020 2020 2063 6f6e 6669             confi
-000368b0: 672e 7365 745f 7573 655f 6d61 746c 6162  g.set_use_matlab
-000368c0: 2846 616c 7365 290a 2020 2020 2020 2020  (False).        
-000368d0: 2020 2020 636f 6e66 6967 2e73 6574 5f75      config.set_u
-000368e0: 7365 5f73 706d 2846 616c 7365 290a 2020  se_spm(False).  
-000368f0: 2020 2020 2020 2020 2020 636f 6e66 6967            config
-00036900: 2e73 6574 5f73 706d 5f70 6174 6828 2222  .set_spm_path(""
-00036910: 290a 2020 2020 2020 2020 2020 2020 636f  ).            co
-00036920: 6e66 6967 2e73 6574 5f6d 6174 6c61 625f  nfig.set_matlab_
-00036930: 7061 7468 2822 2229 0a0a 2020 2020 2020  path("")..      
-00036940: 2020 6465 6620 7465 7374 5f6d 6174 6c61    def test_matla
-00036950: 625f 636f 6e66 6967 2829 3a0a 2020 2020  b_config():.    
-00036960: 2020 2020 2020 2020 2222 2254 6573 7473          """Tests
-00036970: 2074 6865 204d 4154 4c41 4220 286c 6963   the MATLAB (lic
-00036980: 656e 7365 2920 636f 6e66 6967 7572 6174  ense) configurat
-00036990: 696f 6e2e 2222 220a 0a20 2020 2020 2020  ion."""..       
-000369a0: 2020 2020 206d 6169 6e5f 776e 642e 736f       main_wnd.so
-000369b0: 6674 7761 7265 5f70 7265 6665 7265 6e63  ftware_preferenc
-000369c0: 6573 5f70 6f70 5f75 7028 2920 2023 2052  es_pop_up()  # R
-000369d0: 656f 7065 6e73 2074 6865 2077 696e 646f  eopens the windo
-000369e0: 770a 0a20 2020 2020 2020 2020 2020 2023  w..            #
-000369f0: 2053 6574 7320 7468 6520 7072 6f6a 6563   Sets the projec
-00036a00: 7473 2066 6f6c 6465 7220 666f 7220 7468  ts folder for th
-00036a10: 6520 7072 6566 6572 656e 6365 7320 7769  e preferences wi
-00036a20: 6e64 6f77 2074 6f20 636c 6f73 650a 2020  ndow to close.  
-00036a30: 2020 2020 2020 2020 2020 2320 7768 656e            # when
-00036a40: 2070 7265 7373 696e 6720 6f6e 2027 4f4b   pressing on 'OK
-00036a50: 270a 2020 2020 2020 2020 2020 2020 280a  '.            (.
-00036a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00036a70: 6d61 696e 5f77 6e64 2e70 6f70 5f75 705f  main_wnd.pop_up_
-00036a80: 7072 6566 6572 656e 6365 732e 7072 6f6a  preferences.proj
-00036a90: 6563 7473 5f73 6176 655f 7061 7468 5f6c  ects_save_path_l
-00036aa0: 696e 655f 6564 6974 2e73 6574 5465 7874  ine_edit.setText
-00036ab0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00036ac0: 2020 2020 2020 746d 705f 7061 7468 0a20        tmp_path. 
-00036ad0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00036ae0: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
-00036af0: 2020 2020 2020 2020 2020 2020 2320 456e              # En
-00036b00: 6162 6c65 7320 4d41 544c 4142 0a20 2020  ables MATLAB.   
-00036b10: 2020 2020 2020 2020 206d 6169 6e5f 776e           main_wn
-00036b20: 642e 706f 705f 7570 5f70 7265 6665 7265  d.pop_up_prefere
-00036b30: 6e63 6573 2e75 7365 5f6d 6174 6c61 625f  nces.use_matlab_
-00036b40: 6368 6563 6b62 6f78 2e73 6574 4368 6563  checkbox.setChec
-00036b50: 6b65 6428 5472 7565 290a 0a20 2020 2020  ked(True)..     
-00036b60: 2020 2020 2020 2023 2053 6574 7320 7468         # Sets th
-00036b70: 6520 7361 6d65 204d 4154 4c41 4220 6469  e same MATLAB di
-00036b80: 7265 6374 6f72 7920 6f6e 2062 6f74 6820  rectory on both 
-00036b90: 7468 6520 7072 6566 6572 656e 6365 730a  the preferences.
-00036ba0: 2020 2020 2020 2020 2020 2020 2320 7769              # wi
-00036bb0: 6e64 6f77 2061 6e64 2027 636f 6e66 6967  ndow and 'config
-00036bc0: 2720 6f62 6a65 6374 0a20 2020 2020 2020  ' object.       
-00036bd0: 2020 2020 206d 6169 6e5f 776e 642e 706f       main_wnd.po
-00036be0: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
-00036bf0: 2e6d 6174 6c61 625f 6368 6f69 6365 2e73  .matlab_choice.s
-00036c00: 6574 5465 7874 2874 6d70 5f70 6174 6829  etText(tmp_path)
-00036c10: 0a20 2020 2020 2020 2020 2020 2043 6f6e  .            Con
-00036c20: 6669 6728 636f 6e66 6967 5f70 6174 683d  fig(config_path=
-00036c30: 7365 6c66 2e63 6f6e 6669 675f 7061 7468  self.config_path
-00036c40: 292e 7365 745f 6d61 746c 6162 5f70 6174  ).set_matlab_pat
-00036c50: 6828 746d 705f 7061 7468 290a 0a20 2020  h(tmp_path)..   
-00036c60: 2020 2020 2020 2020 206d 6169 6e5f 776e           main_wn
-00036c70: 642e 706f 705f 7570 5f70 7265 6665 7265  d.pop_up_prefere
-00036c80: 6e63 6573 2e6f 6b5f 636c 6963 6b65 6428  nces.ok_clicked(
-00036c90: 2920 2023 2043 6c6f 7365 7320 7468 6520  )  # Closes the 
-00036ca0: 7769 6e64 6f77 0a0a 2020 2020 2020 2020  window..        
-00036cb0: 2020 2020 2320 4173 7365 7274 7320 7468      # Asserts th
-00036cc0: 6174 204d 4154 4c41 4220 7761 7320 656e  at MATLAB was en
-00036cd0: 6162 6c65 6420 616e 6420 4d41 544c 4142  abled and MATLAB
-00036ce0: 2073 7461 6e64 616c 6f6e 650a 2020 2020   standalone.    
-00036cf0: 2020 2020 2020 2020 2320 7265 6d61 696e          # remain
-00036d00: 7320 6469 7361 626c 6564 0a20 2020 2020  s disabled.     
-00036d10: 2020 2020 2020 2063 6f6e 6669 6720 3d20         config = 
-00036d20: 436f 6e66 6967 2863 6f6e 6669 675f 7061  Config(config_pa
-00036d30: 7468 3d73 656c 662e 636f 6e66 6967 5f70  th=self.config_p
-00036d40: 6174 6829 0a20 2020 2020 2020 2020 2020  ath).           
-00036d50: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
-00036d60: 2863 6f6e 6669 672e 6765 745f 7573 655f  (config.get_use_
-00036d70: 6d61 746c 6162 2829 290a 2020 2020 2020  matlab()).      
-00036d80: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00036d90: 7446 616c 7365 2863 6f6e 6669 672e 6765  tFalse(config.ge
-00036da0: 745f 7573 655f 6d61 746c 6162 5f73 7461  t_use_matlab_sta
-00036db0: 6e64 616c 6f6e 6528 2929 0a0a 2020 2020  ndalone())..    
-00036dc0: 2020 2020 2020 2020 6d61 696e 5f77 6e64          main_wnd
-00036dd0: 2e73 6f66 7477 6172 655f 7072 6566 6572  .software_prefer
-00036de0: 656e 6365 735f 706f 705f 7570 2829 2020  ences_pop_up()  
-00036df0: 2320 5265 6f70 656e 7320 7468 6520 7769  # Reopens the wi
-00036e00: 6e64 6f77 0a0a 2020 2020 2020 2020 2020  ndow..          
-00036e10: 2020 2320 5265 7365 7473 2074 6865 2027    # Resets the '
-00036e20: 636f 6e66 6967 2720 6f62 6a65 6374 0a20  config' object. 
-00036e30: 2020 2020 2020 2020 2020 2063 6f6e 6669             confi
-00036e40: 672e 7365 745f 7573 655f 6d61 746c 6162  g.set_use_matlab
-00036e50: 2846 616c 7365 290a 0a20 2020 2020 2020  (False)..       
-00036e60: 2020 2020 2023 2052 6573 6574 7320 7468       # Resets th
-00036e70: 6520 4d41 544c 4142 2064 6972 6563 746f  e MATLAB directo
-00036e80: 7279 0a20 2020 2020 2020 2020 2020 206d  ry.            m
-00036e90: 6169 6e5f 776e 642e 706f 705f 7570 5f70  ain_wnd.pop_up_p
-00036ea0: 7265 6665 7265 6e63 6573 2e6d 6174 6c61  references.matla
-00036eb0: 625f 6368 6f69 6365 2e73 6574 5465 7874  b_choice.setText
-00036ec0: 2822 2229 0a20 2020 2020 2020 2020 2020  ("").           
-00036ed0: 206d 6169 6e5f 776e 642e 706f 705f 7570   main_wnd.pop_up
-00036ee0: 5f70 7265 6665 7265 6e63 6573 2e6f 6b5f  _preferences.ok_
-00036ef0: 636c 6963 6b65 6428 2920 2023 204f 7065  clicked()  # Ope
-00036f00: 6e73 2065 7272 6f72 2064 6961 6c6f 670a  ns error dialog.
-00036f10: 0a20 2020 2020 2020 2020 2020 2023 2043  .            # C
-00036f20: 7265 6174 6573 2061 2066 6169 6c69 6e67  reates a failing
-00036f30: 204d 4154 4c41 4220 6578 6563 7574 6162   MATLAB executab
-00036f40: 6c65 0a20 2020 2020 2020 2020 2020 206d  le.            m
-00036f50: 6f63 6b5f 6578 6563 7574 6162 6c65 2874  ock_executable(t
-00036f60: 6d70 5f70 6174 682c 2022 6d61 746c 6162  mp_path, "matlab
-00036f70: 222c 2066 6169 6c69 6e67 3d54 7275 6529  ", failing=True)
-00036f80: 0a0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-00036f90: 5365 7473 2074 6865 204d 4154 4c41 4220  Sets the MATLAB 
-00036fa0: 6469 7265 6374 6f72 7920 746f 2074 6869  directory to thi
-00036fb0: 7320 6578 6563 7574 6162 6c65 0a20 2020  s executable.   
-00036fc0: 2020 2020 2020 2020 2028 0a20 2020 2020           (.     
-00036fd0: 2020 2020 2020 2020 2020 206d 6169 6e5f             main_
-00036fe0: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
-00036ff0: 7265 6e63 6573 2e6d 6174 6c61 625f 6368  rences.matlab_ch
-00037000: 6f69 6365 2e73 6574 5465 7874 280a 2020  oice.setText(.  
-00037010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037020: 2020 6f73 2e70 6174 682e 6a6f 696e 2874    os.path.join(t
-00037030: 6d70 5f70 6174 682c 2022 6d61 746c 6162  mp_path, "matlab
-00037040: 2229 0a20 2020 2020 2020 2020 2020 2020  ").             
-00037050: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-00037060: 2029 0a20 2020 2020 2020 2020 2020 206d   ).            m
-00037070: 6169 6e5f 776e 642e 706f 705f 7570 5f70  ain_wnd.pop_up_p
-00037080: 7265 6665 7265 6e63 6573 2e6f 6b5f 636c  references.ok_cl
-00037090: 6963 6b65 6428 2920 2023 204f 7065 6e73  icked()  # Opens
-000370a0: 2065 7272 6f72 2064 6961 6c6f 670a 0a20   error dialog.. 
-000370b0: 2020 2020 2020 2020 2020 2023 2052 6573             # Res
-000370c0: 7472 6963 7473 2074 6865 2070 6572 6d69  tricts the permi
-000370d0: 7373 696f 6e20 7265 7175 6972 6564 2074  ssion required t
-000370e0: 6f20 7275 6e20 7468 6520 4d41 544c 4142  o run the MATLAB
-000370f0: 0a20 2020 2020 2020 2020 2020 2023 2065  .            # e
-00037100: 7865 6375 7461 626c 6520 746f 2069 6e64  xecutable to ind
-00037110: 7563 6520 616e 2065 7863 6570 7469 6f6e  uce an exception
-00037120: 206f 6e20 2773 7562 7072 6f63 6573 732e   on 'subprocess.
-00037130: 506f 7065 6e27 0a20 2020 2020 2020 2020  Popen'.         
-00037140: 2020 2073 7562 7072 6f63 6573 732e 7275     subprocess.ru
-00037150: 6e28 5b22 6368 6d6f 6422 2c20 222d 7822  n(["chmod", "-x"
-00037160: 2c20 6f73 2e70 6174 682e 6a6f 696e 2874  , os.path.join(t
-00037170: 6d70 5f70 6174 682c 2022 6d61 746c 6162  mp_path, "matlab
-00037180: 2229 5d29 0a20 2020 2020 2020 2020 2020  ")]).           
-00037190: 206d 6169 6e5f 776e 642e 706f 705f 7570   main_wnd.pop_up
-000371a0: 5f70 7265 6665 7265 6e63 6573 2e6f 6b5f  _preferences.ok_
-000371b0: 636c 6963 6b65 6428 2920 2023 204f 7065  clicked()  # Ope
-000371c0: 6e73 2065 7272 6f72 2064 6961 6c6f 670a  ns error dialog.
-000371d0: 0a20 2020 2020 2020 2020 2020 2023 2041  .            # A
-000371e0: 7373 6572 7473 2074 6861 7420 4d41 544c  sserts that MATL
-000371f0: 4142 2077 6173 2073 7469 6c6c 206e 6f74  AB was still not
-00037200: 2065 6e61 626c 6564 0a20 2020 2020 2020   enabled.       
-00037210: 2020 2020 2063 6f6e 6669 6720 3d20 436f       config = Co
-00037220: 6e66 6967 2863 6f6e 6669 675f 7061 7468  nfig(config_path
-00037230: 3d73 656c 662e 636f 6e66 6967 5f70 6174  =self.config_pat
-00037240: 6829 0a20 2020 2020 2020 2020 2020 2073  h).            s
-00037250: 656c 662e 6173 7365 7274 4661 6c73 6528  elf.assertFalse(
-00037260: 636f 6e66 6967 2e67 6574 5f75 7365 5f6d  config.get_use_m
-00037270: 6174 6c61 6228 2929 0a0a 2020 2020 2020  atlab())..      
-00037280: 2020 2020 2020 2320 4372 6561 7465 7320        # Creates 
-00037290: 6120 776f 726b 696e 6720 4d41 544c 4142  a working MATLAB
-000372a0: 2065 7865 6375 7461 626c 650a 2020 2020   executable.    
-000372b0: 2020 2020 2020 2020 6d6f 636b 5f65 7865          mock_exe
-000372c0: 6375 7461 626c 6528 746d 705f 7061 7468  cutable(tmp_path
-000372d0: 2c20 226d 6174 6c61 6222 290a 2020 2020  , "matlab").    
-000372e0: 2020 2020 2020 2020 6d61 696e 5f77 6e64          main_wnd
-000372f0: 2e70 6f70 5f75 705f 7072 6566 6572 656e  .pop_up_preferen
-00037300: 6365 732e 6f6b 5f63 6c69 636b 6564 2829  ces.ok_clicked()
-00037310: 2020 2320 436c 6f73 6573 2077 696e 646f    # Closes windo
-00037320: 770a 0a20 2020 2020 2020 2020 2020 2023  w..            #
-00037330: 2041 7373 6572 7473 2074 6861 7420 4d41   Asserts that MA
-00037340: 544c 4142 2077 6173 2065 6e61 626c 6564  TLAB was enabled
-00037350: 2061 6e64 204d 4154 4c41 4220 7374 616e   and MATLAB stan
-00037360: 6461 6c6f 6e65 0a20 2020 2020 2020 2020  dalone.         
-00037370: 2020 2023 2072 656d 6169 6e73 2064 6973     # remains dis
-00037380: 6162 6c65 640a 2020 2020 2020 2020 2020  abled.          
-00037390: 2020 636f 6e66 6967 203d 2043 6f6e 6669    config = Confi
-000373a0: 6728 636f 6e66 6967 5f70 6174 683d 7365  g(config_path=se
-000373b0: 6c66 2e63 6f6e 6669 675f 7061 7468 290a  lf.config_path).
-000373c0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000373d0: 2e61 7373 6572 7454 7275 6528 636f 6e66  .assertTrue(conf
-000373e0: 6967 2e67 6574 5f75 7365 5f6d 6174 6c61  ig.get_use_matla
-000373f0: 6228 2929 0a20 2020 2020 2020 2020 2020  b()).           
-00037400: 2073 656c 662e 6173 7365 7274 4661 6c73   self.assertFals
-00037410: 6528 636f 6e66 6967 2e67 6574 5f75 7365  e(config.get_use
-00037420: 5f6d 6174 6c61 625f 7374 616e 6461 6c6f  _matlab_standalo
-00037430: 6e65 2829 290a 0a20 2020 2020 2020 2020  ne())..         
-00037440: 2020 2023 2044 6973 6162 6c65 7320 4d41     # Disables MA
-00037450: 544c 4142 2061 6e64 2053 504d 0a20 2020  TLAB and SPM.   
-00037460: 2020 2020 2020 2020 2063 6f6e 6669 6720           config 
-00037470: 3d20 436f 6e66 6967 2863 6f6e 6669 675f  = Config(config_
-00037480: 7061 7468 3d73 656c 662e 636f 6e66 6967  path=self.config
-00037490: 5f70 6174 6829 0a20 2020 2020 2020 2020  _path).         
-000374a0: 2020 2063 6f6e 6669 672e 7365 745f 7573     config.set_us
-000374b0: 655f 6d61 746c 6162 2846 616c 7365 290a  e_matlab(False).
-000374c0: 2020 2020 2020 2020 2020 2020 636f 6e66              conf
-000374d0: 6967 2e73 6574 5f6d 6174 6c61 625f 7061  ig.set_matlab_pa
-000374e0: 7468 2822 2229 0a0a 2020 2020 2020 2020  th("")..        
-000374f0: 6465 6620 7465 7374 5f6d 6174 6c61 625f  def test_matlab_
-00037500: 6d63 725f 7370 6d5f 7374 616e 6461 6c6f  mcr_spm_standalo
-00037510: 6e65 2829 3a0a 2020 2020 2020 2020 2020  ne():.          
-00037520: 2020 2222 2254 6573 7473 2074 6865 204d    """Tests the M
-00037530: 6174 6c61 6220 4d43 5220 616e 6420 5350  atlab MCR and SP
-00037540: 4d20 7374 616e 6461 6c6f 6e65 2063 6f6e  M standalone con
-00037550: 6669 6775 7261 7469 6f6e 2222 220a 0a20  figuration""".. 
-00037560: 2020 2020 2020 2020 2020 206d 6169 6e5f             main_
-00037570: 776e 642e 736f 6674 7761 7265 5f70 7265  wnd.software_pre
-00037580: 6665 7265 6e63 6573 5f70 6f70 5f75 7028  ferences_pop_up(
-00037590: 2920 2023 204f 7065 6e73 2074 6865 2077  )  # Opens the w
-000375a0: 696e 646f 770a 0a20 2020 2020 2020 2020  indow..         
-000375b0: 2020 2023 2053 6574 7320 7468 6520 7072     # Sets the pr
-000375c0: 6f6a 6563 7473 2066 6f6c 6465 7220 666f  ojects folder fo
-000375d0: 7220 7468 6520 7072 6566 6572 656e 6365  r the preference
-000375e0: 7320 7769 6e64 6f77 2074 6f20 636c 6f73  s window to clos
-000375f0: 650a 2020 2020 2020 2020 2020 2020 2320  e.            # 
-00037600: 7768 656e 2070 7265 7373 696e 6720 6f6e  when pressing on
-00037610: 2027 4f4b 270a 2020 2020 2020 2020 2020   'OK'.          
-00037620: 2020 280a 2020 2020 2020 2020 2020 2020    (.            
-00037630: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
-00037640: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
-00037650: 7072 6f6a 6563 7473 5f73 6176 655f 7061  projects_save_pa
-00037660: 7468 5f6c 696e 655f 6564 6974 2e73 6574  th_line_edit.set
-00037670: 5465 7874 280a 2020 2020 2020 2020 2020  Text(.          
-00037680: 2020 2020 2020 2020 2020 746d 705f 7061            tmp_pa
-00037690: 7468 0a20 2020 2020 2020 2020 2020 2020  th.             
-000376a0: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-000376b0: 2029 0a0a 2020 2020 2020 2020 2020 2020   )..            
-000376c0: 2320 456e 6162 6c65 7320 5350 4d20 7374  # Enables SPM st
-000376d0: 616e 6461 6c6f 6e65 0a20 2020 2020 2020  andalone.       
-000376e0: 2020 2020 2028 0a20 2020 2020 2020 2020       (.         
-000376f0: 2020 2020 2020 206d 6169 6e5f 776e 642e         main_wnd.
-00037700: 706f 705f 7570 5f70 7265 6665 7265 6e63  pop_up_preferenc
-00037710: 6573 2e75 7365 5f73 706d 5f73 7461 6e64  es.use_spm_stand
-00037720: 616c 6f6e 655f 6368 6563 6b62 6f78 2e73  alone_checkbox.s
-00037730: 6574 4368 6563 6b65 6428 0a20 2020 2020  etChecked(.     
-00037740: 2020 2020 2020 2020 2020 2020 2020 2054                 T
-00037750: 7275 650a 2020 2020 2020 2020 2020 2020  rue.            
-00037760: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-00037770: 2020 290a 0a20 2020 2020 2020 2020 2020    )..           
-00037780: 2023 2046 6169 6c69 6e67 2063 6f6e 6669   # Failing confi
-00037790: 6775 7261 7469 6f6e 7320 666f 7220 5350  gurations for SP
-000377a0: 4d20 7374 616e 6461 6c6f 6e65 202b 204d  M standalone + M
-000377b0: 4154 4c41 4220 4d43 520a 0a20 2020 2020  ATLAB MCR..     
-000377c0: 2020 2020 2020 2023 2053 6574 7320 6120         # Sets a 
-000377d0: 6e6f 6e2d 6578 6973 7469 6e67 2064 6972  non-existing dir
-000377e0: 6563 746f 7279 2066 6f72 204d 4154 4c41  ectory for MATLA
-000377f0: 4220 4d43 520a 2020 2020 2020 2020 2020  B MCR.          
-00037800: 2020 280a 2020 2020 2020 2020 2020 2020    (.            
-00037810: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
-00037820: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
-00037830: 6d61 746c 6162 5f73 7461 6e64 616c 6f6e  matlab_standalon
-00037840: 655f 6368 6f69 6365 2e73 6574 5465 7874  e_choice.setText
-00037850: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00037860: 2020 2020 2020 6f73 2e70 6174 682e 6a6f        os.path.jo
-00037870: 696e 2874 6d70 5f70 6174 682c 2022 6e6f  in(tmp_path, "no
-00037880: 6e5f 6578 6973 7469 6e67 2229 0a20 2020  n_existing").   
-00037890: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
-000378a0: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
-000378b0: 2020 2020 2020 2020 2020 6d61 696e 5f77            main_w
-000378c0: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
-000378d0: 656e 6365 732e 6f6b 5f63 6c69 636b 6564  ences.ok_clicked
-000378e0: 2829 2020 2320 4f70 656e 7320 6572 726f  ()  # Opens erro
-000378f0: 7220 6d65 7373 6167 650a 0a20 2020 2020  r message..     
-00037900: 2020 2020 2020 2023 2053 6574 7320 616e         # Sets an
-00037910: 2065 7869 7374 696e 6720 6469 7265 6374   existing direct
-00037920: 6f72 7920 666f 7220 4d41 544c 4142 204d  ory for MATLAB M
-00037930: 4352 2c20 6e6f 6e2d 6578 6973 7469 6e67  CR, non-existing
-00037940: 0a20 2020 2020 2020 2020 2020 2023 2064  .            # d
-00037950: 6972 6563 746f 7279 2066 6f72 2053 504d  irectory for SPM
-00037960: 2073 7461 6e64 616c 6f6e 650a 2020 2020   standalone.    
-00037970: 2020 2020 2020 2020 280a 2020 2020 2020          (.      
-00037980: 2020 2020 2020 2020 2020 6d61 696e 5f77            main_w
-00037990: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
-000379a0: 656e 6365 732e 6d61 746c 6162 5f73 7461  ences.matlab_sta
-000379b0: 6e64 616c 6f6e 655f 6368 6f69 6365 2e73  ndalone_choice.s
-000379c0: 6574 5465 7874 280a 2020 2020 2020 2020  etText(.        
-000379d0: 2020 2020 2020 2020 2020 2020 746d 705f              tmp_
-000379e0: 7061 7468 0a20 2020 2020 2020 2020 2020  path.           
-000379f0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
-00037a00: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
-00037a10: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
-00037a20: 2020 206d 6169 6e5f 776e 642e 706f 705f     main_wnd.pop_
-00037a30: 7570 5f70 7265 6665 7265 6e63 6573 2e73  up_preferences.s
-00037a40: 706d 5f73 7461 6e64 616c 6f6e 655f 6368  pm_standalone_ch
-00037a50: 6f69 6365 2e73 6574 5465 7874 280a 2020  oice.setText(.  
-00037a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037a70: 2020 6f73 2e70 6174 682e 6a6f 696e 2874    os.path.join(t
-00037a80: 6d70 5f70 6174 682c 2022 6e6f 6e5f 6578  mp_path, "non_ex
-00037a90: 6973 7469 6e67 2229 0a20 2020 2020 2020  isting").       
-00037aa0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-00037ab0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00037ac0: 2020 2020 206d 6169 6e5f 776e 642e 706f       main_wnd.po
-00037ad0: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
-00037ae0: 2e6f 6b5f 636c 6963 6b65 6428 2920 2023  .ok_clicked()  #
-00037af0: 204f 7065 6e73 2065 7272 6f72 2064 6961   Opens error dia
-00037b00: 6c6f 670a 0a20 2020 2020 2020 2020 2020  log..           
-00037b10: 2023 2053 6574 7320 6578 6973 7469 6e67   # Sets existing
-00037b20: 2064 6972 6563 746f 7269 6573 2066 6f72   directories for
-00037b30: 2062 6f74 6820 4d41 544c 4142 204d 4352   both MATLAB MCR
-00037b40: 2061 6e64 2053 504d 0a20 2020 2020 2020   and SPM.       
-00037b50: 2020 2020 2023 2073 7461 6e64 616c 6f6e       # standalon
-00037b60: 650a 2020 2020 2020 2020 2020 2020 280a  e.            (.
-00037b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00037b80: 6d61 696e 5f77 6e64 2e70 6f70 5f75 705f  main_wnd.pop_up_
-00037b90: 7072 6566 6572 656e 6365 732e 7370 6d5f  preferences.spm_
-00037ba0: 7374 616e 6461 6c6f 6e65 5f63 686f 6963  standalone_choic
-00037bb0: 652e 7365 7454 6578 7428 0a20 2020 2020  e.setText(.     
-00037bc0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00037bd0: 6d70 5f70 6174 680a 2020 2020 2020 2020  mp_path.        
-00037be0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00037bf0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00037c00: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
-00037c10: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
-00037c20: 6f6b 5f63 6c69 636b 6564 2829 2020 2320  ok_clicked()  # 
-00037c30: 4f70 656e 7320 6572 726f 7220 6469 616c  Opens error dial
-00037c40: 6f67 0a0a 2020 2020 2020 2020 2020 2020  og..            
-00037c50: 2320 446f 6573 206e 6f74 2066 696e 6420  # Does not find 
-00037c60: 6120 5350 4d20 7374 616e 6461 6c6f 6e65  a SPM standalone
-00037c70: 2065 7865 6375 7461 626c 650a 2020 2020   executable.    
-00037c80: 2020 2020 2020 2020 6d61 696e 5f77 6e64          main_wnd
-00037c90: 2e70 6f70 5f75 705f 7072 6566 6572 656e  .pop_up_preferen
-00037ca0: 6365 732e 6f6b 5f63 6c69 636b 6564 2829  ces.ok_clicked()
-00037cb0: 2020 2320 4f70 656e 7320 6572 726f 7220    # Opens error 
-00037cc0: 6469 616c 6f67 0a0a 2020 2020 2020 2020  dialog..        
-00037cd0: 2020 2020 2320 4372 6561 7465 7320 6120      # Creates a 
-00037ce0: 6661 696c 696e 6720 5350 4d20 7374 616e  failing SPM stan
-00037cf0: 6461 6c6f 6e65 2065 7865 6375 7461 626c  dalone executabl
-00037d00: 650a 2020 2020 2020 2020 2020 2020 6d6f  e.            mo
-00037d10: 636b 5f65 7865 6375 7461 626c 6528 746d  ck_executable(tm
-00037d20: 705f 7061 7468 2c20 2272 756e 5f73 706d  p_path, "run_spm
-00037d30: 2e73 6822 2c20 6661 696c 696e 673d 5472  .sh", failing=Tr
-00037d40: 7565 290a 0a20 2020 2020 2020 2020 2020  ue)..           
-00037d50: 206d 6169 6e5f 776e 642e 706f 705f 7570   main_wnd.pop_up
-00037d60: 5f70 7265 6665 7265 6e63 6573 2e6f 6b5f  _preferences.ok_
-00037d70: 636c 6963 6b65 6428 2920 2023 204f 7065  clicked()  # Ope
-00037d80: 6e73 2065 7272 6f72 2064 6961 6c6f 670a  ns error dialog.
-00037d90: 0a20 2020 2020 2020 2020 2020 206d 6f63  .            moc
-00037da0: 6b5f 6578 6563 7574 6162 6c65 280a 2020  k_executable(.  
-00037db0: 2020 2020 2020 2020 2020 2020 2020 746d                tm
-00037dc0: 705f 7061 7468 2c0a 2020 2020 2020 2020  p_path,.        
-00037dd0: 2020 2020 2020 2020 2272 756e 5f73 706d          "run_spm
-00037de0: 2e73 6822 2c0a 2020 2020 2020 2020 2020  .sh",.          
-00037df0: 2020 2020 2020 6661 696c 696e 673d 5472        failing=Tr
-00037e00: 7565 2c0a 2020 2020 2020 2020 2020 2020  ue,.            
-00037e10: 2020 2020 6572 725f 6d73 673d 2273 6861      err_msg="sha
-00037e20: 7265 6420 6c69 6272 6172 6965 7322 2c0a  red libraries",.
-00037e30: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
-00037e40: 2020 2020 2020 2020 2020 206d 6169 6e5f             main_
-00037e50: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
-00037e60: 7265 6e63 6573 2e6f 6b5f 636c 6963 6b65  rences.ok_clicke
-00037e70: 6428 2920 2023 204f 7065 6e73 2065 7272  d()  # Opens err
-00037e80: 6f72 2064 6961 6c6f 670a 0a20 2020 2020  or dialog..     
-00037e90: 2020 2020 2020 2023 2052 6573 7472 6963         # Restric
-00037ea0: 7473 2074 6865 2070 6572 6d69 7373 696f  ts the permissio
-00037eb0: 6e20 7265 7175 6972 6564 2074 6f20 7275  n required to ru
-00037ec0: 6e20 7468 6520 4d41 544c 4142 0a20 2020  n the MATLAB.   
-00037ed0: 2020 2020 2020 2020 2023 2065 7865 6375           # execu
-00037ee0: 7461 626c 6520 746f 2069 6e64 7563 6520  table to induce 
-00037ef0: 616e 2065 7863 6570 7469 6f6e 206f 6e20  an exception on 
-00037f00: 2773 7562 7072 6f63 6573 732e 506f 7065  'subprocess.Pope
-00037f10: 6e27 0a20 2020 2020 2020 2020 2020 2073  n'.            s
-00037f20: 7562 7072 6f63 6573 732e 7275 6e28 0a20  ubprocess.run(. 
-00037f30: 2020 2020 2020 2020 2020 2020 2020 205b                 [
-00037f40: 2263 686d 6f64 222c 2022 2d78 222c 206f  "chmod", "-x", o
-00037f50: 732e 7061 7468 2e6a 6f69 6e28 746d 705f  s.path.join(tmp_
-00037f60: 7061 7468 2c20 2272 756e 5f73 706d 2e73  path, "run_spm.s
-00037f70: 6822 295d 0a20 2020 2020 2020 2020 2020  h")].           
-00037f80: 2029 0a20 2020 2020 2020 2020 2020 206d   ).            m
-00037f90: 6169 6e5f 776e 642e 706f 705f 7570 5f70  ain_wnd.pop_up_p
-00037fa0: 7265 6665 7265 6e63 6573 2e6f 6b5f 636c  references.ok_cl
-00037fb0: 6963 6b65 6428 2920 2023 204f 7065 6e73  icked()  # Opens
-00037fc0: 2065 7272 6f72 2064 6961 6c6f 670a 0a20   error dialog.. 
-00037fd0: 2020 2020 2020 2020 2020 2063 6f6e 6669             confi
-00037fe0: 6720 3d20 436f 6e66 6967 2863 6f6e 6669  g = Config(confi
-00037ff0: 675f 7061 7468 3d73 656c 662e 636f 6e66  g_path=self.conf
-00038000: 6967 5f70 6174 6829 0a20 2020 2020 2020  ig_path).       
-00038010: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00038020: 4661 6c73 6528 636f 6e66 6967 2e67 6574  False(config.get
-00038030: 5f75 7365 5f73 706d 5f73 7461 6e64 616c  _use_spm_standal
-00038040: 6f6e 6528 2929 0a20 2020 2020 2020 2020  one()).         
-00038050: 2020 2073 656c 662e 6173 7365 7274 4661     self.assertFa
-00038060: 6c73 6528 636f 6e66 6967 2e67 6574 5f75  lse(config.get_u
-00038070: 7365 5f6d 6174 6c61 625f 7374 616e 6461  se_matlab_standa
-00038080: 6c6f 6e65 2829 290a 0a20 2020 2020 2020  lone())..       
-00038090: 2020 2020 2023 2050 6173 7369 6e67 2063       # Passing c
-000380a0: 6f6e 6669 6775 7261 7469 6f6e 7320 666f  onfigurations fo
-000380b0: 7220 5350 4d20 7374 616e 6461 6c6f 6e65  r SPM standalone
-000380c0: 202b 204d 4154 4c41 4220 4d43 520a 0a20   + MATLAB MCR.. 
-000380d0: 2020 2020 2020 2020 2020 2023 2043 7265             # Cre
-000380e0: 6174 6573 2061 6e20 5350 4d20 7374 616e  ates an SPM stan
-000380f0: 6461 6c6f 6e65 2065 7865 6375 7461 626c  dalone executabl
-00038100: 6520 7468 6174 2074 6872 6f77 7320 6120  e that throws a 
-00038110: 6e6f 6e2d 6372 6974 6963 616c 0a20 2020  non-critical.   
-00038120: 2020 2020 2020 2020 2023 2065 7272 6f72           # error
-00038130: 0a20 2020 2020 2020 2020 2020 206d 6f63  .            moc
-00038140: 6b5f 6578 6563 7574 6162 6c65 280a 2020  k_executable(.  
-00038150: 2020 2020 2020 2020 2020 2020 2020 746d                tm
-00038160: 705f 7061 7468 2c0a 2020 2020 2020 2020  p_path,.        
-00038170: 2020 2020 2020 2020 2272 756e 5f73 706d          "run_spm
-00038180: 2e73 6822 2c0a 2020 2020 2020 2020 2020  .sh",.          
-00038190: 2020 2020 2020 6661 696c 696e 673d 5472        failing=Tr
-000381a0: 7565 2c0a 2020 2020 2020 2020 2020 2020  ue,.            
-000381b0: 2020 2020 6f75 7470 7574 3d22 5f20 5f20      output="_ _ 
-000381c0: 7665 7273 696f 6e20 2873 7461 6e64 616c  version (standal
-000381d0: 6f6e 6529 222c 0a20 2020 2020 2020 2020  one)",.         
-000381e0: 2020 2029 0a0a 2020 2020 2020 2020 2020     )..          
-000381f0: 2020 6d61 696e 5f77 6e64 2e70 6f70 5f75    main_wnd.pop_u
-00038200: 705f 7072 6566 6572 656e 6365 732e 6f6b  p_preferences.ok
-00038210: 5f63 6c69 636b 6564 2829 2020 2320 436c  _clicked()  # Cl
-00038220: 6f73 6573 2077 696e 646f 770a 0a20 2020  oses window..   
-00038230: 2020 2020 2020 2020 2063 6f6e 6669 6720           config 
-00038240: 3d20 436f 6e66 6967 2863 6f6e 6669 675f  = Config(config_
-00038250: 7061 7468 3d73 656c 662e 636f 6e66 6967  path=self.config
-00038260: 5f70 6174 6829 0a20 2020 2020 2020 2020  _path).         
-00038270: 2020 2023 2046 4958 4d45 3a20 7468 6520     # FIXME: the 
-00038280: 666f 6c6c 6f77 696e 6720 6c69 6e65 7320  following lines 
-00038290: 6d61 6b65 732c 206f 6e6c 7920 7769 7468  makes, only with
-000382a0: 206d 6163 6f73 2062 7569 6c64 3a0a 2020   macos build:.  
-000382b0: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-000382c0: 2020 2027 4173 7365 7274 696f 6e45 7272     'AssertionErr
-000382d0: 6f72 3a20 4661 6c73 6520 6973 206e 6f74  or: False is not
-000382e0: 2074 7275 6527 2e20 436f 6d6d 656e 7465   true'. Commente
-000382f0: 642e 0a20 2020 2020 2020 2020 2020 2023  d..            #
-00038300: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
-00038310: 2863 6f6e 6669 672e 6765 745f 7573 655f  (config.get_use_
-00038320: 7370 6d5f 7374 616e 6461 6c6f 6e65 2829  spm_standalone()
-00038330: 290a 2020 2020 2020 2020 2020 2020 2320  ).            # 
-00038340: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
-00038350: 636f 6e66 6967 2e67 6574 5f75 7365 5f6d  config.get_use_m
-00038360: 6174 6c61 625f 7374 616e 6461 6c6f 6e65  atlab_standalone
-00038370: 2829 290a 0a20 2020 2020 2020 2020 2020  ())..           
-00038380: 2023 2052 6573 6574 7320 7468 6520 2763   # Resets the 'c
-00038390: 6f6e 6669 6727 206f 626a 6563 740a 2020  onfig' object.  
-000383a0: 2020 2020 2020 2020 2020 636f 6e66 6967            config
-000383b0: 2e73 6574 5f73 706d 5f73 7461 6e64 616c  .set_spm_standal
-000383c0: 6f6e 655f 7061 7468 2822 2229 0a20 2020  one_path("").   
-000383d0: 2020 2020 2020 2020 2063 6f6e 6669 672e           config.
-000383e0: 7365 745f 7573 655f 7370 6d5f 7374 616e  set_use_spm_stan
-000383f0: 6461 6c6f 6e65 2846 616c 7365 290a 2020  dalone(False).  
-00038400: 2020 2020 2020 2020 2020 636f 6e66 6967            config
-00038410: 2e73 6574 5f75 7365 5f6d 6174 6c61 625f  .set_use_matlab_
-00038420: 7374 616e 6461 6c6f 6e65 2846 616c 7365  standalone(False
-00038430: 290a 0a20 2020 2020 2020 2020 2020 206d  )..            m
-00038440: 6169 6e5f 776e 642e 736f 6674 7761 7265  ain_wnd.software
-00038450: 5f70 7265 6665 7265 6e63 6573 5f70 6f70  _preferences_pop
-00038460: 5f75 7028 2920 2023 204f 7065 6e73 2074  _up()  # Opens t
-00038470: 6865 2077 696e 646f 770a 0a20 2020 2020  he window..     
-00038480: 2020 2020 2020 2028 0a20 2020 2020 2020         (.       
-00038490: 2020 2020 2020 2020 206d 6169 6e5f 776e           main_wn
-000384a0: 642e 706f 705f 7570 5f70 7265 6665 7265  d.pop_up_prefere
-000384b0: 6e63 6573 2e75 7365 5f73 706d 5f73 7461  nces.use_spm_sta
-000384c0: 6e64 616c 6f6e 655f 6368 6563 6b62 6f78  ndalone_checkbox
-000384d0: 2e73 6574 4368 6563 6b65 6428 0a20 2020  .setChecked(.   
-000384e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000384f0: 2054 7275 650a 2020 2020 2020 2020 2020   True.          
-00038500: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00038510: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-00038520: 2020 6d61 696e 5f77 6e64 2e70 6f70 5f75    main_wnd.pop_u
-00038530: 705f 7072 6566 6572 656e 6365 732e 7370  p_preferences.sp
-00038540: 6d5f 7374 616e 6461 6c6f 6e65 5f63 686f  m_standalone_cho
-00038550: 6963 652e 7365 7454 6578 7428 746d 705f  ice.setText(tmp_
-00038560: 7061 7468 290a 0a20 2020 2020 2020 2020  path)..         
-00038570: 2020 206d 6f63 6b5f 6578 6563 7574 6162     mock_executab
-00038580: 6c65 2874 6d70 5f70 6174 682c 2022 7275  le(tmp_path, "ru
-00038590: 6e5f 7370 6d2e 7368 2229 0a0a 2020 2020  n_spm.sh")..    
-000385a0: 2020 2020 2020 2020 6d61 696e 5f77 6e64          main_wnd
-000385b0: 2e70 6f70 5f75 705f 7072 6566 6572 656e  .pop_up_preferen
-000385c0: 6365 732e 6f6b 5f63 6c69 636b 6564 2829  ces.ok_clicked()
-000385d0: 2020 2320 436c 6f73 6573 2074 6865 2077    # Closes the w
-000385e0: 696e 646f 770a 0a20 2020 2020 2020 2020  indow..         
-000385f0: 2020 2063 6f6e 6669 6720 3d20 436f 6e66     config = Conf
-00038600: 6967 2863 6f6e 6669 675f 7061 7468 3d73  ig(config_path=s
-00038610: 656c 662e 636f 6e66 6967 5f70 6174 6829  elf.config_path)
-00038620: 0a20 2020 2020 2020 2020 2020 2023 2046  .            # F
-00038630: 4958 4d45 3a20 7468 6520 666f 6c6c 6f77  IXME: the follow
-00038640: 696e 6720 6c69 6e65 7320 6d61 6b65 732c  ing lines makes,
-00038650: 206f 6e6c 7920 7769 7468 206d 6163 6f73   only with macos
-00038660: 2062 7569 6c64 3a0a 2020 2020 2020 2020   build:.        
-00038670: 2020 2020 2320 2020 2020 2020 2027 4173      #        'As
-00038680: 7365 7274 696f 6e45 7272 6f72 3a20 4661  sertionError: Fa
-00038690: 6c73 6520 6973 206e 6f74 2074 7275 6527  lse is not true'
-000386a0: 2e20 436f 6d6d 656e 7465 642e 0a20 2020  . Commented..   
-000386b0: 2020 2020 2020 2020 2023 2073 656c 662e           # self.
-000386c0: 6173 7365 7274 5472 7565 2863 6f6e 6669  assertTrue(confi
-000386d0: 672e 6765 745f 7573 655f 7370 6d5f 7374  g.get_use_spm_st
-000386e0: 616e 6461 6c6f 6e65 2829 290a 2020 2020  andalone()).    
-000386f0: 2020 2020 2020 2020 2320 7365 6c66 2e61          # self.a
-00038700: 7373 6572 7454 7275 6528 636f 6e66 6967  ssertTrue(config
-00038710: 2e67 6574 5f75 7365 5f6d 6174 6c61 625f  .get_use_matlab_
-00038720: 7374 616e 6461 6c6f 6e65 2829 290a 0a20  standalone()).. 
-00038730: 2020 2020 2020 2020 2020 2023 2052 6573             # Res
-00038740: 6574 7320 7468 6520 2763 6f6e 6669 6727  ets the 'config'
-00038750: 206f 626a 6563 740a 2020 2020 2020 2020   object.        
-00038760: 2020 2020 636f 6e66 6967 2e73 6574 5f75      config.set_u
-00038770: 7365 5f73 706d 5f73 7461 6e64 616c 6f6e  se_spm_standalon
-00038780: 6528 4661 6c73 6529 0a20 2020 2020 2020  e(False).       
-00038790: 2020 2020 2063 6f6e 6669 672e 7365 745f       config.set_
-000387a0: 7573 655f 6d61 746c 6162 5f73 7461 6e64  use_matlab_stand
-000387b0: 616c 6f6e 6528 4661 6c73 6529 0a0a 2020  alone(False)..  
-000387c0: 2020 2020 2020 2020 2020 6d61 696e 5f77            main_w
-000387d0: 6e64 2e73 6f66 7477 6172 655f 7072 6566  nd.software_pref
-000387e0: 6572 656e 6365 735f 706f 705f 7570 2829  erences_pop_up()
-000387f0: 2020 2320 4f70 656e 7320 7468 6520 7769    # Opens the wi
-00038800: 6e64 6f77 0a20 2020 2020 2020 2020 2020  ndow.           
-00038810: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
-00038820: 2020 206d 6169 6e5f 776e 642e 706f 705f     main_wnd.pop_
-00038830: 7570 5f70 7265 6665 7265 6e63 6573 2e75  up_preferences.u
-00038840: 7365 5f73 706d 5f73 7461 6e64 616c 6f6e  se_spm_standalon
-00038850: 655f 6368 6563 6b62 6f78 2e73 6574 4368  e_checkbox.setCh
-00038860: 6563 6b65 6428 0a20 2020 2020 2020 2020  ecked(.         
-00038870: 2020 2020 2020 2020 2020 2054 7275 650a             True.
-00038880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00038890: 290a 2020 2020 2020 2020 2020 2020 290a  ).            ).
-000388a0: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
-000388b0: 6865 2073 616d 6520 4d41 544c 4142 2064  he same MATLAB d
-000388c0: 6972 6563 746f 7279 2069 7320 616c 7265  irectory is alre
-000388d0: 6164 7920 7468 6520 7361 6d65 206f 6e20  ady the same on 
-000388e0: 626f 7468 2074 6865 0a20 2020 2020 2020  both the.       
-000388f0: 2020 2020 2023 2070 7265 6665 7265 6e63       # preferenc
-00038900: 6573 2077 696e 646f 7720 616e 6420 2763  es window and 'c
-00038910: 6f6e 6669 6727 206f 626a 6563 742c 2073  onfig' object, s
-00038920: 616d 6520 666f 7220 5350 4d0a 2020 2020  ame for SPM.    
-00038930: 2020 2020 2020 2020 2320 7374 616e 6461          # standa
-00038940: 6c6f 6e65 0a20 2020 2020 2020 2020 2020  lone.           
-00038950: 206d 6169 6e5f 776e 642e 706f 705f 7570   main_wnd.pop_up
-00038960: 5f70 7265 6665 7265 6e63 6573 2e6f 6b5f  _preferences.ok_
-00038970: 636c 6963 6b65 6428 2920 2023 2043 6c6f  clicked()  # Clo
-00038980: 7365 7320 7468 6520 7769 6e64 6f77 0a0a  ses the window..
-00038990: 2020 2020 2020 2020 2020 2020 636f 6e66              conf
-000389a0: 6967 203d 2043 6f6e 6669 6728 636f 6e66  ig = Config(conf
-000389b0: 6967 5f70 6174 683d 7365 6c66 2e63 6f6e  ig_path=self.con
-000389c0: 6669 675f 7061 7468 290a 2020 2020 2020  fig_path).      
-000389d0: 2020 2020 2020 2320 4649 584d 453a 2074        # FIXME: t
-000389e0: 6865 2066 6f6c 6c6f 7769 6e67 206c 696e  he following lin
-000389f0: 6573 206d 616b 6573 2c20 6f6e 6c79 2077  es makes, only w
-00038a00: 6974 6820 6d61 636f 7320 6275 696c 643a  ith macos build:
-00038a10: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-00038a20: 2020 2020 2020 2741 7373 6572 7469 6f6e        'Assertion
-00038a30: 4572 726f 723a 2046 616c 7365 2069 7320  Error: False is 
-00038a40: 6e6f 7420 7472 7565 272e 2043 6f6d 6d65  not true'. Comme
-00038a50: 6e74 6564 2e0a 2020 2020 2020 2020 2020  nted..          
-00038a60: 2020 2320 7365 6c66 2e61 7373 6572 7454    # self.assertT
-00038a70: 7275 6528 636f 6e66 6967 2e67 6574 5f75  rue(config.get_u
-00038a80: 7365 5f73 706d 5f73 7461 6e64 616c 6f6e  se_spm_standalon
-00038a90: 6528 2929 0a20 2020 2020 2020 2020 2020  e()).           
-00038aa0: 2023 2073 656c 662e 6173 7365 7274 5472   # self.assertTr
-00038ab0: 7565 2863 6f6e 6669 672e 6765 745f 7573  ue(config.get_us
-00038ac0: 655f 6d61 746c 6162 5f73 7461 6e64 616c  e_matlab_standal
-00038ad0: 6f6e 6528 2929 0a0a 2020 2020 2020 2020  one())..        
-00038ae0: 436f 6e66 6967 2863 6f6e 6669 675f 7061  Config(config_pa
-00038af0: 7468 3d73 656c 662e 636f 6e66 6967 5f70  th=self.config_p
-00038b00: 6174 6829 2e73 6574 5f70 726f 6a65 6374  ath).set_project
-00038b10: 735f 7361 7665 5f70 6174 6828 746d 705f  s_save_path(tmp_
-00038b20: 7061 7468 290a 0a20 2020 2020 2020 2023  path)..        #
-00038b30: 2054 6573 7420 7468 6520 636f 6e66 6967   Test the config
-00038b40: 7572 6174 696f 6e20 6d6f 6475 6c65 7320  uration modules 
-00038b50: 4146 4e49 2c20 414e 5453 2c20 4653 4c2c  AFNI, ANTS, FSL,
-00038b60: 2053 504d 2061 6e64 204d 4154 4c41 420a   SPM and MATLAB.
-00038b70: 2020 2020 2020 2020 7465 7374 5f61 666e          test_afn
-00038b80: 695f 636f 6e66 6967 2829 0a20 2020 2020  i_config().     
-00038b90: 2020 2074 6573 745f 616e 7473 5f63 6f6e     test_ants_con
-00038ba0: 6669 6728 290a 2020 2020 2020 2020 7465  fig().        te
-00038bb0: 7374 5f66 736c 5f63 6f6e 6669 6728 290a  st_fsl_config().
-00038bc0: 2020 2020 2020 2020 7465 7374 5f73 706d          test_spm
-00038bd0: 5f6d 6174 6c61 625f 636f 6e66 6967 2829  _matlab_config()
-00038be0: 0a20 2020 2020 2020 2074 6573 745f 6d61  .        test_ma
-00038bf0: 746c 6162 5f63 6f6e 6669 6728 290a 2020  tlab_config().  
-00038c00: 2020 2020 2020 7465 7374 5f6d 6174 6c61        test_matla
-00038c10: 625f 6d63 725f 7370 6d5f 7374 616e 6461  b_mcr_spm_standa
-00038c20: 6c6f 6e65 2829 0a0a 2020 2020 6465 6620  lone()..    def 
-00038c30: 7465 7374 5f73 6f66 7477 6172 655f 7072  test_software_pr
-00038c40: 6566 6572 656e 6365 735f 706f 705f 7570  eferences_pop_up
-00038c50: 5f76 616c 6964 6174 6528 7365 6c66 293a  _validate(self):
-00038c60: 0a20 2020 2020 2020 2022 2222 4f70 656e  .        """Open
-00038c70: 7320 7468 6520 7072 6566 6572 656e 6365  s the preference
-00038c80: 7320 706f 7020 7570 2c20 7365 7473 2074  s pop up, sets t
-00038c90: 6865 2063 6f6e 6669 6775 7261 7469 6f6e  he configuration
-00038ca0: 2e0a 0a20 2020 2020 2020 2046 6f72 206d  ...        For m
-00038cb0: 6f64 756c 6573 2041 464e 492c 2041 4e54  odules AFNI, ANT
-00038cc0: 532c 2046 534c 2c20 5350 4d20 616e 6420  S, FSL, SPM and 
-00038cd0: 4d41 544c 4142 2077 6974 686f 7574 2070  MATLAB without p
-00038ce0: 7265 7373 696e 6720 7468 6520 4f4b 0a20  ressing the OK. 
-00038cf0: 2020 2020 2020 2062 7574 746f 6e20 616e         button an
-00038d00: 6420 7377 6974 6368 6573 2074 6865 2061  d switches the a
-00038d10: 7574 6f2d 7361 7665 2c20 636f 6e74 726f  uto-save, contro
-00038d20: 6c6c 6572 2076 6572 7369 6f6e 2061 6e64  ller version and
-00038d30: 2072 6164 696f 0a20 2020 2020 2020 2076   radio.        v
-00038d40: 6965 7720 6f70 7469 6f6e 732e 0a0a 2020  iew options...  
-00038d50: 2020 2020 2020 2d20 5465 7374 733a 2050        - Tests: P
-00038d60: 6f70 5570 5072 6566 6572 656e 6365 732e  opUpPreferences.
-00038d70: 7661 6c69 6461 7465 5f61 6e64 5f73 6176  validate_and_sav
-00038d80: 650a 0a20 2020 2020 2020 202d 204d 6f63  e..        - Moc
-00038d90: 6b73 3a0a 2020 2020 2020 2020 2020 2020  ks:.            
-00038da0: 2d20 506f 7055 7050 7265 6665 7265 6e63  - PopUpPreferenc
-00038db0: 6573 2e73 686f 770a 2020 2020 2020 2020  es.show.        
-00038dc0: 2020 2020 2d20 514d 6573 7361 6765 426f      - QMessageBo
-00038dd0: 782e 7368 6f77 0a20 2020 2020 2020 2022  x.show.        "
-00038de0: 2222 0a0a 2020 2020 2020 2020 2323 2056  ""..        ## V
-00038df0: 616c 6964 6174 6573 2074 6865 2050 6970  alidates the Pip
-00038e00: 656c 696e 6520 7461 6220 7769 7468 6f75  eline tab withou
-00038e10: 7420 7072 6573 7369 6e67 2074 6865 2027  t pressing the '
-00038e20: 4f4b 2720 6275 7474 6f6e 3a0a 0a20 2020  OK' button:..   
-00038e30: 2020 2020 2023 2053 6574 2073 686f 7274       # Set short
-00038e40: 6375 7473 2066 6f72 206f 626a 6563 7473  cuts for objects
-00038e50: 2074 6861 7420 6172 6520 6f66 7465 6e20   that are often 
-00038e60: 7573 6564 0a20 2020 2020 2020 206d 6169  used.        mai
-00038e70: 6e5f 776e 6420 3d20 7365 6c66 2e6d 6169  n_wnd = self.mai
-00038e80: 6e5f 7769 6e64 6f77 0a0a 2020 2020 2020  n_window..      
-00038e90: 2020 2320 4d6f 636b 7320 7468 6520 6578    # Mocks the ex
-00038ea0: 6563 7574 696f 6e20 6f66 2027 506f 7055  ecution of 'PopU
-00038eb0: 7050 7265 6665 7265 6e63 6573 2720 746f  pPreferences' to
-00038ec0: 2073 7065 6564 2075 7020 7468 6520 7465   speed up the te
-00038ed0: 7374 0a20 2020 2020 2020 2023 2050 6f70  st.        # Pop
-00038ee0: 5570 5072 6566 6572 656e 6365 732e 7368  UpPreferences.sh
-00038ef0: 6f77 203d 206c 616d 6264 6120 783a 204e  ow = lambda x: N
-00038f00: 6f6e 650a 0a20 2020 2020 2020 2074 6d70  one..        tmp
-00038f10: 5f70 6174 6820 3d20 7365 6c66 2e63 6f6e  _path = self.con
-00038f20: 6669 675f 7061 7468 0a20 2020 2020 2020  fig_path.       
-00038f30: 206d 6169 6e5f 776e 642e 736f 6674 7761   main_wnd.softwa
-00038f40: 7265 5f70 7265 6665 7265 6e63 6573 5f70  re_preferences_p
-00038f50: 6f70 5f75 7028 290a 0a20 2020 2020 2020  op_up()..       
-00038f60: 2023 2053 656c 6563 7473 2073 7461 6e64   # Selects stand
-00038f70: 616c 6f6e 6520 6d6f 6475 6c65 730a 2020  alone modules.  
-00038f80: 2020 2020 2020 666f 7220 6d6f 6475 6c65        for module
-00038f90: 2069 6e20 5b22 6d61 746c 6162 5f73 7461   in ["matlab_sta
-00038fa0: 6e64 616c 6f6e 6522 2c20 2273 706d 5f73  ndalone", "spm_s
-00038fb0: 7461 6e64 616c 6f6e 6522 5d3a 0a20 2020  tandalone"]:.   
-00038fc0: 2020 2020 2020 2020 2067 6574 6174 7472           getattr
-00038fd0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00038fe0: 2020 6d61 696e 5f77 6e64 2e70 6f70 5f75    main_wnd.pop_u
-00038ff0: 705f 7072 6566 6572 656e 6365 732c 2022  p_preferences, "
-00039000: 7573 655f 2220 2b20 6d6f 6475 6c65 202b  use_" + module +
-00039010: 2022 5f63 6865 636b 626f 7822 0a20 2020   "_checkbox".   
-00039020: 2020 2020 2020 2020 2029 2e73 6574 4368           ).setCh
-00039030: 6563 6b65 6428 5472 7565 290a 0a20 2020  ecked(True)..   
-00039040: 2020 2020 2023 2056 616c 6964 6174 6573       # Validates
-00039050: 2074 6865 2050 6970 656c 696e 6520 7461   the Pipeline ta
-00039060: 6220 7769 7468 6f75 7420 7072 6573 7369  b without pressi
-00039070: 6e67 2074 6865 2027 4f4b 2720 6275 7474  ng the 'OK' butt
-00039080: 6f6e 0a20 2020 2020 2020 206d 6169 6e5f  on.        main_
-00039090: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
-000390a0: 7265 6e63 6573 2e76 616c 6964 6174 655f  rences.validate_
-000390b0: 616e 645f 7361 7665 2829 0a0a 2020 2020  and_save()..    
-000390c0: 2020 2020 636f 6e66 6967 203d 2043 6f6e      config = Con
-000390d0: 6669 6728 636f 6e66 6967 5f70 6174 683d  fig(config_path=
-000390e0: 7365 6c66 2e63 6f6e 6669 675f 7061 7468  self.config_path
-000390f0: 290a 2020 2020 2020 2020 666f 7220 6d6f  ).        for mo
-00039100: 6475 6c65 2069 6e20 5b22 6d61 746c 6162  dule in ["matlab
-00039110: 5f73 7461 6e64 616c 6f6e 6522 2c20 2273  _standalone", "s
-00039120: 706d 5f73 7461 6e64 616c 6f6e 6522 5d3a  pm_standalone"]:
-00039130: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00039140: 662e 6173 7365 7274 5472 7565 2867 6574  f.assertTrue(get
-00039150: 6174 7472 2863 6f6e 6669 672c 2022 6765  attr(config, "ge
-00039160: 745f 7573 655f 2220 2b20 6d6f 6475 6c65  t_use_" + module
-00039170: 2928 2929 0a0a 2020 2020 2020 2020 2320  )())..        # 
-00039180: 5365 6c65 6374 7320 6e6f 6e20 7374 616e  Selects non stan
-00039190: 6461 6c6f 6e65 206d 6f64 756c 6573 0a20  dalone modules. 
-000391a0: 2020 2020 2020 2066 6f72 206d 6f64 756c         for modul
-000391b0: 6520 696e 205b 2261 666e 6922 2c20 2261  e in ["afni", "a
-000391c0: 6e74 7322 2c20 2266 736c 222c 2022 6d61  nts", "fsl", "ma
-000391d0: 746c 6162 222c 2022 7370 6d22 5d3a 0a20  tlab", "spm"]:. 
-000391e0: 2020 2020 2020 2020 2020 2067 6574 6174             getat
-000391f0: 7472 280a 2020 2020 2020 2020 2020 2020  tr(.            
-00039200: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
-00039210: 5f75 705f 7072 6566 6572 656e 6365 732c  _up_preferences,
-00039220: 2022 7573 655f 2220 2b20 6d6f 6475 6c65   "use_" + module
-00039230: 202b 2022 5f63 6865 636b 626f 7822 0a20   + "_checkbox". 
-00039240: 2020 2020 2020 2020 2020 2029 2e73 6574             ).set
-00039250: 4368 6563 6b65 6428 5472 7565 290a 0a20  Checked(True).. 
-00039260: 2020 2020 2020 2023 2056 616c 6964 6174         # Validat
-00039270: 6573 2074 6865 2050 6970 656c 696e 6520  es the Pipeline 
-00039280: 7461 6220 7769 7468 6f75 7420 7072 6573  tab without pres
-00039290: 7369 6e67 2074 6865 2027 4f4b 2720 6275  sing the 'OK' bu
-000392a0: 7474 6f6e 0a20 2020 2020 2020 206d 6169  tton.        mai
-000392b0: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
-000392c0: 6665 7265 6e63 6573 2e76 616c 6964 6174  ferences.validat
-000392d0: 655f 616e 645f 7361 7665 2829 0a0a 2020  e_and_save()..  
-000392e0: 2020 2020 2020 636f 6e66 6967 203d 2043        config = C
-000392f0: 6f6e 6669 6728 636f 6e66 6967 5f70 6174  onfig(config_pat
-00039300: 683d 7365 6c66 2e63 6f6e 6669 675f 7061  h=self.config_pa
-00039310: 7468 290a 2020 2020 2020 2020 666f 7220  th).        for 
-00039320: 6d6f 6475 6c65 2069 6e20 5b22 6166 6e69  module in ["afni
-00039330: 222c 2022 616e 7473 222c 2022 6673 6c22  ", "ants", "fsl"
-00039340: 2c20 226d 6174 6c61 6222 2c20 2273 706d  , "matlab", "spm
-00039350: 225d 3a0a 2020 2020 2020 2020 2020 2020  "]:.            
-00039360: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
-00039370: 6765 7461 7474 7228 636f 6e66 6967 2c20  getattr(config, 
-00039380: 2267 6574 5f75 7365 5f22 202b 206d 6f64  "get_use_" + mod
-00039390: 756c 6529 2829 290a 0a20 2020 2020 2020  ule)())..       
-000393a0: 2023 2320 5661 6c69 6461 7465 7320 7468   ## Validates th
-000393b0: 6520 5069 7065 6c69 6e65 2074 6162 2062  e Pipeline tab b
-000393c0: 7920 7072 6573 7369 6e67 2074 6865 2027  y pressing the '
-000393d0: 4f4b 2720 6275 7474 6f6e 3a0a 0a20 2020  OK' button:..   
-000393e0: 2020 2020 2023 2053 6574 7320 7468 6520       # Sets the 
-000393f0: 7072 6f6a 6563 7473 2066 6f6c 6465 7220  projects folder 
-00039400: 666f 7220 7468 6520 7072 6566 6572 656e  for the preferen
-00039410: 6365 7320 7769 6e64 6f77 2074 6f20 636c  ces window to cl
-00039420: 6f73 650a 2020 2020 2020 2020 2320 7768  ose.        # wh
-00039430: 656e 2070 7265 7373 696e 6720 6f6e 2027  en pressing on '
-00039440: 4f4b 270a 2020 2020 2020 2020 280a 2020  OK'.        (.  
-00039450: 2020 2020 2020 2020 2020 6d61 696e 5f77            main_w
-00039460: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
-00039470: 656e 6365 732e 7072 6f6a 6563 7473 5f73  ences.projects_s
-00039480: 6176 655f 7061 7468 5f6c 696e 655f 6564  ave_path_line_ed
-00039490: 6974 2e73 6574 5465 7874 280a 2020 2020  it.setText(.    
-000394a0: 2020 2020 2020 2020 2020 2020 746d 705f              tmp_
-000394b0: 7061 7468 0a20 2020 2020 2020 2020 2020  path.           
-000394c0: 2029 0a20 2020 2020 2020 2029 0a0a 2020   ).        )..  
-000394d0: 2020 2020 2020 2320 4d6f 636b 7320 7468        # Mocks th
-000394e0: 6520 6578 6563 7574 696f 6e20 6f66 2027  e execution of '
-000394f0: 7772 6f6e 675f 7061 7468 2720 616e 6420  wrong_path' and 
-00039500: 2751 4d65 7373 6167 6542 6f78 2e73 686f  'QMessageBox.sho
-00039510: 7727 0a20 2020 2020 2020 206d 6169 6e5f  w'.        main_
-00039520: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
-00039530: 7265 6e63 6573 2e77 726f 6e67 5f70 6174  rences.wrong_pat
-00039540: 6820 3d20 6c61 6d62 6461 2078 2c20 793a  h = lambda x, y:
-00039550: 204e 6f6e 650a 2020 2020 2020 2020 514d   None.        QM
-00039560: 6573 7361 6765 426f 782e 7368 6f77 203d  essageBox.show =
-00039570: 206c 616d 6264 6120 783a 204e 6f6e 650a   lambda x: None.
-00039580: 0a20 2020 2020 2020 2023 2044 6573 656c  .        # Desel
-00039590: 6563 7473 206e 6f6e 2073 7461 6e64 616c  ects non standal
-000395a0: 6f6e 6520 6d6f 6475 6c65 730a 2020 2020  one modules.    
-000395b0: 2020 2020 666f 7220 6d6f 6475 6c65 2069      for module i
-000395c0: 6e20 5b22 6166 6e69 222c 2022 616e 7473  n ["afni", "ants
-000395d0: 222c 2022 6673 6c22 2c20 226d 6174 6c61  ", "fsl", "matla
-000395e0: 6222 2c20 2273 706d 225d 3a0a 2020 2020  b", "spm"]:.    
-000395f0: 2020 2020 2020 2020 6765 7461 7474 7228          getattr(
-00039600: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00039610: 206d 6169 6e5f 776e 642e 706f 705f 7570   main_wnd.pop_up
-00039620: 5f70 7265 6665 7265 6e63 6573 2c20 2275  _preferences, "u
-00039630: 7365 5f22 202b 206d 6f64 756c 6520 2b20  se_" + module + 
-00039640: 225f 6368 6563 6b62 6f78 220a 2020 2020  "_checkbox".    
-00039650: 2020 2020 2020 2020 292e 7365 7443 6865          ).setChe
-00039660: 636b 6564 2846 616c 7365 290a 0a20 2020  cked(False)..   
-00039670: 2020 2020 2023 2044 6573 656c 6563 7473       # Deselects
-00039680: 2074 6865 2027 7261 6469 6f56 6965 7727   the 'radioView'
-00039690: 2c20 2761 646d 696e 4d6f 6465 2720 616e  , 'adminMode' an
-000396a0: 6420 2763 6c69 6e69 6361 6c4d 6f64 6527  d 'clinicalMode'
-000396b0: 206f 7074 696f 6e0a 2020 2020 2020 2020   option.        
-000396c0: 666f 7220 6f70 7420 696e 205b 2273 6176  for opt in ["sav
-000396d0: 6522 2c20 2272 6164 696f 5669 6577 222c  e", "radioView",
-000396e0: 2022 6164 6d69 6e5f 6d6f 6465 222c 2022   "admin_mode", "
-000396f0: 636c 696e 6963 616c 5f6d 6f64 6522 5d3a  clinical_mode"]:
-00039700: 0a20 2020 2020 2020 2020 2020 2028 0a20  .            (. 
-00039710: 2020 2020 2020 2020 2020 2020 2020 2067                 g
-00039720: 6574 6174 7472 280a 2020 2020 2020 2020  etattr(.        
-00039730: 2020 2020 2020 2020 2020 2020 6d61 696e              main
-00039740: 5f77 6e64 2e70 6f70 5f75 705f 7072 6566  _wnd.pop_up_pref
-00039750: 6572 656e 6365 732c 206f 7074 202b 2022  erences, opt + "
-00039760: 5f63 6865 636b 626f 7822 0a20 2020 2020  _checkbox".     
-00039770: 2020 2020 2020 2020 2020 2029 2e73 6574             ).set
-00039780: 4368 6563 6b65 6428 4661 6c73 6529 0a20  Checked(False). 
-00039790: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-000397a0: 2020 2020 2023 2054 6865 206f 7074 696f       # The optio
-000397b0: 6e73 2061 7574 6f53 6176 652c 2072 6164  ns autoSave, rad
-000397c0: 696f 5669 6577 2061 6e64 2063 6f6e 7472  ioView and contr
-000397d0: 6f6c 5631 2061 7265 206e 6f74 2073 656c  olV1 are not sel
-000397e0: 6563 7465 640a 0a20 2020 2020 2020 2023  ected..        #
-000397f0: 2053 6574 7320 7468 6520 7072 6f6a 6563   Sets the projec
-00039800: 7473 2073 6176 6520 7061 7468 0a20 2020  ts save path.   
-00039810: 2020 2020 2043 6f6e 6669 6728 636f 6e66       Config(conf
-00039820: 6967 5f70 6174 683d 7365 6c66 2e63 6f6e  ig_path=self.con
-00039830: 6669 675f 7061 7468 292e 7365 745f 7072  fig_path).set_pr
-00039840: 6f6a 6563 7473 5f73 6176 655f 7061 7468  ojects_save_path
-00039850: 2874 6d70 5f70 6174 6829 0a0a 2020 2020  (tmp_path)..    
-00039860: 2020 2020 2320 5661 6c69 6461 7465 7320      # Validates 
-00039870: 7468 6520 616c 6c20 7461 6220 6166 7465  the all tab afte
-00039880: 7220 7072 6573 7369 6e67 2074 6865 2027  r pressing the '
-00039890: 4f4b 2720 6275 7474 6f6e 0a20 2020 2020  OK' button.     
-000398a0: 2020 206d 6169 6e5f 776e 642e 706f 705f     main_wnd.pop_
-000398b0: 7570 5f70 7265 6665 7265 6e63 6573 2e6f  up_preferences.o
-000398c0: 6b5f 636c 6963 6b65 6428 290a 0a20 2020  k_clicked()..   
-000398d0: 2020 2020 2063 6f6e 6669 6720 3d20 436f       config = Co
-000398e0: 6e66 6967 2863 6f6e 6669 675f 7061 7468  nfig(config_path
-000398f0: 3d73 656c 662e 636f 6e66 6967 5f70 6174  =self.config_pat
-00039900: 6829 0a0a 2020 2020 2020 2020 666f 7220  h)..        for 
-00039910: 6f70 7420 696e 205b 0a20 2020 2020 2020  opt in [.       
-00039920: 2020 2020 2022 6973 4175 746f 5361 7665       "isAutoSave
-00039930: 222c 0a20 2020 2020 2020 2020 2020 2022  ",.            "
-00039940: 6973 5261 6469 6f56 6965 7722 2c0a 2020  isRadioView",.  
-00039950: 2020 2020 2020 2020 2020 2269 7343 6f6e            "isCon
-00039960: 7472 6f6c 5631 222c 0a20 2020 2020 2020  trolV1",.       
-00039970: 2020 2020 2022 6765 745f 7573 655f 636c       "get_use_cl
-00039980: 696e 6963 616c 222c 0a20 2020 2020 2020  inical",.       
-00039990: 205d 3a0a 2020 2020 2020 2020 2020 2020   ]:.            
-000399a0: 7365 6c66 2e61 7373 6572 7446 616c 7365  self.assertFalse
-000399b0: 2867 6574 6174 7472 2863 6f6e 6669 672c  (getattr(config,
-000399c0: 206f 7074 2928 2929 0a0a 2020 2020 2020   opt)())..      
-000399d0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
-000399e0: 6528 636f 6e66 6967 2e67 6574 5f75 7365  e(config.get_use
-000399f0: 725f 6d6f 6465 2829 290a 2020 2020 2020  r_mode()).      
-00039a00: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00039a10: 616c 2863 6f6e 6669 672e 6765 745f 7072  al(config.get_pr
-00039a20: 6f6a 6563 7473 5f73 6176 655f 7061 7468  ojects_save_path
-00039a30: 2829 2c20 746d 705f 7061 7468 290a 0a20  (), tmp_path).. 
-00039a40: 2020 2020 2020 2023 2044 6573 656c 6563         # Deselec
-00039a50: 7473 204d 4154 4c41 4220 616e 6420 5350  ts MATLAB and SP
-00039a60: 4d20 6d6f 6475 6c65 7320 6672 6f6d 2074  M modules from t
-00039a70: 6865 2063 6f6e 6669 6720 6669 6c65 0a20  he config file. 
-00039a80: 2020 2020 2020 2063 6f6e 6669 6720 3d20         config = 
-00039a90: 436f 6e66 6967 2863 6f6e 6669 675f 7061  Config(config_pa
-00039aa0: 7468 3d73 656c 662e 636f 6e66 6967 5f70  th=self.config_p
-00039ab0: 6174 6829 0a0a 2020 2020 2020 2020 666f  ath)..        fo
-00039ac0: 7220 6d6f 6475 6c65 2069 6e20 5b22 6d61  r module in ["ma
-00039ad0: 746c 6162 222c 2022 7370 6d22 5d3a 0a20  tlab", "spm"]:. 
-00039ae0: 2020 2020 2020 2020 2020 2067 6574 6174             getat
-00039af0: 7472 2863 6f6e 6669 672c 2022 7365 745f  tr(config, "set_
-00039b00: 7573 655f 2220 2b20 6d6f 6475 6c65 2928  use_" + module)(
-00039b10: 4661 6c73 6529 0a0a 2020 2020 2020 2020  False)..        
-00039b20: 6d61 696e 5f77 6e64 2e73 6f66 7477 6172  main_wnd.softwar
-00039b30: 655f 7072 6566 6572 656e 6365 735f 706f  e_preferences_po
-00039b40: 705f 7570 2829 2020 2320 5265 6f70 656e  p_up()  # Reopen
-00039b50: 7320 7468 6520 7769 6e64 6f77 0a0a 2020  s the window..  
-00039b60: 2020 2020 2020 2320 5365 6c65 6374 7320        # Selects 
-00039b70: 7468 6520 6175 746f 5361 7665 2c20 7261  the autoSave, ra
-00039b80: 6469 6f56 6965 7720 616e 6420 636f 6e74  dioView and cont
-00039b90: 726f 6c56 3120 6f70 7469 6f6e 730a 2020  rolV1 options.  
-00039ba0: 2020 2020 2020 666f 7220 6f70 7420 696e        for opt in
-00039bb0: 205b 0a20 2020 2020 2020 2020 2020 2022   [.            "
-00039bc0: 7361 7665 5f63 6865 636b 626f 7822 2c0a  save_checkbox",.
-00039bd0: 2020 2020 2020 2020 2020 2020 2272 6164              "rad
-00039be0: 696f 5669 6577 5f63 6865 636b 626f 7822  ioView_checkbox"
-00039bf0: 2c0a 2020 2020 2020 2020 2020 2020 2263  ,.            "c
-00039c00: 6f6e 7472 6f6c 5f63 6865 636b 626f 7822  ontrol_checkbox"
-00039c10: 2c0a 2020 2020 2020 2020 2020 2020 2261  ,.            "a
-00039c20: 646d 696e 5f6d 6f64 655f 6368 6563 6b62  dmin_mode_checkb
-00039c30: 6f78 222c 0a20 2020 2020 2020 2020 2020  ox",.           
-00039c40: 2022 636c 696e 6963 616c 5f6d 6f64 655f   "clinical_mode_
-00039c50: 6368 6563 6b62 6f78 222c 0a20 2020 2020  checkbox",.     
-00039c60: 2020 205d 3a0a 2020 2020 2020 2020 2020     ]:.          
-00039c70: 2020 6765 7461 7474 7228 6d61 696e 5f77    getattr(main_w
-00039c80: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
-00039c90: 656e 6365 732c 206f 7074 292e 7365 7443  ences, opt).setC
-00039ca0: 6865 636b 6564 2854 7275 6529 0a0a 2020  hecked(True)..  
-00039cb0: 2020 2020 2020 2320 416c 7465 726e 6174        # Alternat
-00039cc0: 6573 2074 6f20 6d69 6e69 6d69 7a65 6420  es to minimized 
-00039cd0: 6d6f 6465 0a20 2020 2020 2020 206d 6169  mode.        mai
-00039ce0: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
-00039cf0: 6665 7265 6e63 6573 2e66 756c 6c73 6372  ferences.fullscr
-00039d00: 6565 6e5f 6362 6f78 2e73 6574 4368 6563  een_cbox.setChec
-00039d10: 6b65 6428 5472 7565 290a 0a20 2020 2020  ked(True)..     
-00039d20: 2020 2023 2053 6574 7320 6120 6e6f 6e2d     # Sets a non-
-00039d30: 6578 6973 7465 6e74 2070 726f 6a65 6374  existent project
-00039d40: 7320 7361 7665 2070 6174 680a 2020 2020  s save path.    
-00039d50: 2020 2020 436f 6e66 6967 2863 6f6e 6669      Config(confi
-00039d60: 675f 7061 7468 3d73 656c 662e 636f 6e66  g_path=self.conf
-00039d70: 6967 5f70 6174 6829 2e73 6574 5f70 726f  ig_path).set_pro
-00039d80: 6a65 6374 735f 7361 7665 5f70 6174 6828  jects_save_path(
-00039d90: 0a20 2020 2020 2020 2020 2020 206f 732e  .            os.
-00039da0: 7061 7468 2e6a 6f69 6e28 746d 705f 7061  path.join(tmp_pa
-00039db0: 7468 2c20 226e 6f6e 5f65 7869 7374 656e  th, "non_existen
-00039dc0: 7422 290a 2020 2020 2020 2020 290a 0a20  t").        ).. 
-00039dd0: 2020 2020 2020 2023 2056 616c 6964 6174         # Validat
-00039de0: 6573 2074 6865 2061 6c6c 2074 6162 2061  es the all tab a
-00039df0: 6674 6572 2070 7265 7373 696e 6720 7468  fter pressing th
-00039e00: 6520 274f 4b27 2062 7574 746f 6e0a 2020  e 'OK' button.  
-00039e10: 2020 2020 2020 6d61 696e 5f77 6e64 2e70        main_wnd.p
-00039e20: 6f70 5f75 705f 7072 6566 6572 656e 6365  op_up_preference
-00039e30: 732e 6f6b 5f63 6c69 636b 6564 2829 0a0a  s.ok_clicked()..
-00039e40: 2020 2020 2020 2020 2320 4173 7365 7274          # Assert
-00039e50: 7320 7468 6174 2074 6865 2027 636f 6e66  s that the 'conf
-00039e60: 6967 2720 6f62 6a65 6374 7320 7761 7320  ig' objects was 
-00039e70: 6e6f 7420 7570 6461 7465 6420 7769 7468  not updated with
-00039e80: 2074 6865 0a20 2020 2020 2020 2023 206e   the.        # n
-00039e90: 6f6e 2d65 7869 7374 656e 7420 7072 6f6a  on-existent proj
-00039ea0: 6563 7473 2066 6f6c 6465 720a 2020 2020  ects folder.    
-00039eb0: 2020 2020 636f 6e66 6967 203d 2043 6f6e      config = Con
-00039ec0: 6669 6728 636f 6e66 6967 5f70 6174 683d  fig(config_path=
-00039ed0: 7365 6c66 2e63 6f6e 6669 675f 7061 7468  self.config_path
-00039ee0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-00039ef0: 7373 6572 7445 7175 616c 2863 6f6e 6669  ssertEqual(confi
-00039f00: 672e 6765 745f 7072 6f6a 6563 7473 5f73  g.get_projects_s
-00039f10: 6176 655f 7061 7468 2829 2c20 746d 705f  ave_path(), tmp_
-00039f20: 7061 7468 290a 0a20 2020 2064 6566 2074  path)..    def t
-00039f30: 6573 745f 7377 6974 6368 5f70 726f 6a65  est_switch_proje
-00039f40: 6374 2873 656c 6629 3a0a 2020 2020 2020  ct(self):.      
-00039f50: 2020 2222 2243 7265 6174 6573 2061 2070    """Creates a p
-00039f60: 726f 6a65 6374 2061 6e64 2073 7769 7463  roject and switc
-00039f70: 6865 7320 746f 2069 742e 0a0a 2020 2020  hes to it...    
-00039f80: 2020 2020 2d20 5465 7374 733a 204d 6169      - Tests: Mai
-00039f90: 6e57 696e 646f 772e 7377 6974 6368 5f70  nWindow.switch_p
-00039fa0: 726f 6a65 6374 0a0a 2020 2020 2020 2020  roject..        
-00039fb0: 2d20 4d6f 636b 733a 2051 4d65 7373 6167  - Mocks: QMessag
-00039fc0: 6542 6f78 2e65 7865 630a 2020 2020 2020  eBox.exec.      
-00039fd0: 2020 2222 220a 0a20 2020 2020 2020 2023    """..        #
-00039fe0: 204d 6f63 6b73 2074 6865 2065 7865 6375   Mocks the execu
-00039ff0: 7469 6f6e 206f 6620 6120 6469 616c 6f67  tion of a dialog
-0003a000: 2077 696e 646f 770a 2020 2020 2020 2020   window.        
-0003a010: 514d 6573 7361 6765 426f 782e 6578 6563  QMessageBox.exec
-0003a020: 203d 206c 616d 6264 6120 7365 6c66 5f3a   = lambda self_:
-0003a030: 204e 6f6e 650a 0a20 2020 2020 2020 2023   None..        #
-0003a040: 2043 7265 6174 6573 2061 206e 6577 2070   Creates a new p
-0003a050: 726f 6a65 6374 0a20 2020 2020 2020 2074  roject.        t
-0003a060: 6573 745f 7072 6f6a 5f70 6174 6820 3d20  est_proj_path = 
-0003a070: 7365 6c66 2e67 6574 5f6e 6577 5f74 6573  self.get_new_tes
-0003a080: 745f 7072 6f6a 6563 7428 290a 0a20 2020  t_project()..   
-0003a090: 2020 2020 2023 2053 7769 7463 6865 7320       # Switches 
-0003a0a0: 746f 2061 6e20 6578 6973 7469 6e67 206d  to an existing m
-0003a0b0: 6961 2070 726f 6a65 6374 0a20 2020 2020  ia project.     
-0003a0c0: 2020 2072 6573 203d 2073 656c 662e 6d61     res = self.ma
-0003a0d0: 696e 5f77 696e 646f 772e 7377 6974 6368  in_window.switch
-0003a0e0: 5f70 726f 6a65 6374 2874 6573 745f 7072  _project(test_pr
-0003a0f0: 6f6a 5f70 6174 682c 2022 7465 7374 5f70  oj_path, "test_p
-0003a100: 726f 6a65 6374 2229 0a20 2020 2020 2020  roject").       
-0003a110: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
-0003a120: 2872 6573 290a 2020 2020 2020 2020 7365  (res).        se
-0003a130: 6c66 2e61 7373 6572 7445 7175 616c 2873  lf.assertEqual(s
-0003a140: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-0003a150: 7072 6f6a 6563 742e 666f 6c64 6572 2c20  project.folder, 
-0003a160: 7465 7374 5f70 726f 6a5f 7061 7468 290a  test_proj_path).
-0003a170: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
-0003a180: 696e 5f77 696e 646f 772e 7072 6f6a 6563  in_window.projec
-0003a190: 742e 666f 6c64 6572 203d 2022 2220 2023  t.folder = ""  #
-0003a1a0: 2052 6573 6574 7320 7468 6520 7072 6f6a   Resets the proj
-0003a1b0: 6563 7420 666f 6c64 6572 0a0a 2020 2020  ect folder..    
-0003a1c0: 2020 2020 2320 5472 6965 7320 746f 2073      # Tries to s
-0003a1d0: 7769 7463 6820 746f 2061 206e 6f6e 2d65  witch to a non-e
-0003a1e0: 7869 7374 656e 7420 7072 6f6a 6563 740a  xistent project.
-0003a1f0: 2020 2020 2020 2020 7265 7320 3d20 7365          res = se
-0003a200: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e73  lf.main_window.s
-0003a210: 7769 7463 685f 7072 6f6a 6563 7428 0a20  witch_project(. 
-0003a220: 2020 2020 2020 2020 2020 2074 6573 745f             test_
-0003a230: 7072 6f6a 5f70 6174 6820 2b20 225f 222c  proj_path + "_",
-0003a240: 2022 7465 7374 5f70 726f 6a65 6374 220a   "test_project".
-0003a250: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-0003a260: 2020 7365 6c66 2e61 7373 6572 7446 616c    self.assertFal
-0003a270: 7365 2872 6573 290a 2020 2020 2020 2020  se(res).        
-0003a280: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-0003a290: 2873 656c 662e 6d61 696e 5f77 696e 646f  (self.main_windo
-0003a2a0: 772e 7072 6f6a 6563 742e 666f 6c64 6572  w.project.folder
-0003a2b0: 2c20 2222 290a 0a20 2020 2020 2020 2023  , "")..        #
-0003a2c0: 2054 7269 6573 2074 6f20 7377 6974 6368   Tries to switch
-0003a2d0: 2074 6f20 6120 7072 6f6a 6563 7420 7468   to a project th
-0003a2e0: 6174 2069 7320 616c 7265 6164 7920 6f70  at is already op
-0003a2f0: 656e 6564 2069 6e20 616e 6f74 6865 720a  ened in another.
-0003a300: 2020 2020 2020 2020 2320 696e 7374 616e          # instan
-0003a310: 6365 206f 6620 7468 6520 736f 6674 7761  ce of the softwa
-0003a320: 7265 0a20 2020 2020 2020 2072 6573 203d  re.        res =
-0003a330: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-0003a340: 772e 7377 6974 6368 5f70 726f 6a65 6374  w.switch_project
-0003a350: 2874 6573 745f 7072 6f6a 5f70 6174 682c  (test_proj_path,
-0003a360: 2022 7465 7374 5f70 726f 6a65 6374 2229   "test_project")
-0003a370: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0003a380: 7365 7274 4661 6c73 6528 7265 7329 0a20  sertFalse(res). 
-0003a390: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0003a3a0: 7274 4571 7561 6c28 7365 6c66 2e6d 6169  rtEqual(self.mai
-0003a3b0: 6e5f 7769 6e64 6f77 2e70 726f 6a65 6374  n_window.project
-0003a3c0: 2e66 6f6c 6465 722c 2022 2229 0a0a 2020  .folder, "")..  
-0003a3d0: 2020 2020 2020 2320 5265 7365 7473 2074        # Resets t
-0003a3e0: 6865 206f 7065 6e65 6420 7072 6f6a 6563  he opened projec
-0003a3f0: 7473 206c 6973 740a 2020 2020 2020 2020  ts list.        
-0003a400: 636f 6e66 6967 203d 2043 6f6e 6669 6728  config = Config(
-0003a410: 636f 6e66 6967 5f70 6174 683d 7365 6c66  config_path=self
-0003a420: 2e63 6f6e 6669 675f 7061 7468 290a 2020  .config_path).  
-0003a430: 2020 2020 2020 636f 6e66 6967 2e73 6574        config.set
-0003a440: 5f6f 7065 6e65 645f 7072 6f6a 6563 7473  _opened_projects
-0003a450: 285b 5d29 0a0a 2020 2020 2020 2020 2320  ([])..        # 
-0003a460: 4465 6c65 7465 7320 7468 6520 2743 4f4c  Deletes the 'COL
-0003a470: 4c45 4354 494f 4e5f 4355 5252 454e 5427  LECTION_CURRENT'
-0003a480: 2065 7175 6976 616c 656e 7420 696e 2027   equivalent in '
-0003a490: 6d69 612e 6462 270a 2020 2020 2020 2020  mia.db'.        
-0003a4a0: 2320 636f 6e20 3d20 7371 6c69 7465 332e  # con = sqlite3.
-0003a4b0: 636f 6e6e 6563 7428 6f73 2e70 6174 682e  connect(os.path.
-0003a4c0: 6a6f 696e 2874 6573 745f 7072 6f6a 5f70  join(test_proj_p
-0003a4d0: 6174 682c 2764 6174 6162 6173 6527 2c27  ath,'database','
-0003a4e0: 6d69 612e 6462 2729 290a 2020 2020 2020  mia.db')).      
-0003a4f0: 2020 2320 6375 7273 6f72 203d 2063 6f6e    # cursor = con
-0003a500: 2e63 7572 736f 7228 290a 2020 2020 2020  .cursor().      
-0003a510: 2020 2320 7175 6572 7920 3d20 2244 454c    # query = "DEL
-0003a520: 4554 4520 4652 4f4d 2027 5f63 6f6c 6c65  ETE FROM '_colle
-0003a530: 6374 696f 6e27 2057 4845 5245 2063 6f6c  ction' WHERE col
-0003a540: 6c65 6374 696f 6e5f 6e61 6d65 203d 2027  lection_name = '
-0003a550: 6375 7272 656e 7427 220a 2020 2020 2020  current'".      
-0003a560: 2020 2320 6375 7273 6f72 2e65 7865 6375    # cursor.execu
-0003a570: 7465 2871 7565 7279 290a 2020 2020 2020  te(query).      
-0003a580: 2020 2320 636f 6e2e 636f 6d6d 6974 2829    # con.commit()
-0003a590: 0a20 2020 2020 2020 2023 2063 6f6e 2e63  .        # con.c
-0003a5a0: 6c6f 7365 2829 0a0a 2020 2020 2020 2020  lose()..        
-0003a5b0: 2320 5472 6965 7320 746f 2073 7769 7463  # Tries to switc
-0003a5c0: 6820 746f 2061 2070 726f 6a65 6374 2074  h to a project t
-0003a5d0: 6861 7420 6361 6e6e 6f74 2062 6520 7265  hat cannot be re
-0003a5e0: 6164 2062 7920 6d69 610a 2020 2020 2020  ad by mia.      
-0003a5f0: 2020 2320 7265 7320 3d20 7365 6c66 2e6d    # res = self.m
-0003a600: 6169 6e5f 7769 6e64 6f77 2e73 7769 7463  ain_window.switc
-0003a610: 685f 7072 6f6a 6563 7428 7465 7374 5f70  h_project(test_p
-0003a620: 726f 6a5f 7061 7468 2c20 2774 6573 745f  roj_path, 'test_
-0003a630: 7072 6f6a 6563 7427 290a 2020 2020 2020  project').      
-0003a640: 2020 2320 7365 6c66 2e61 7373 6572 7446    # self.assertF
-0003a650: 616c 7365 2872 6573 290a 0a20 2020 2020  alse(res)..     
-0003a660: 2020 2023 2044 656c 6574 6573 2074 6865     # Deletes the
-0003a670: 2027 6669 6c74 6572 7327 2066 6f6c 6465   'filters' folde
-0003a680: 7220 6f66 2074 6865 2070 726f 6a65 6374  r of the project
-0003a690: 0a20 2020 2020 2020 2073 7562 7072 6f63  .        subproc
-0003a6a0: 6573 732e 7275 6e28 5b22 726d 222c 2022  ess.run(["rm", "
-0003a6b0: 2d72 6622 2c20 6f73 2e70 6174 682e 6a6f  -rf", os.path.jo
-0003a6c0: 696e 2874 6573 745f 7072 6f6a 5f70 6174  in(test_proj_pat
-0003a6d0: 682c 2022 6669 6c74 6572 7322 295d 290a  h, "filters")]).
-0003a6e0: 0a20 2020 2020 2020 2023 2054 7269 6573  .        # Tries
-0003a6f0: 2074 6f20 7377 6974 6368 2074 6f20 6e6f   to switch to no
-0003a700: 6e20 6d69 6120 7072 6f6a 6563 740a 2020  n mia project.  
-0003a710: 2020 2020 2020 7265 7320 3d20 7365 6c66        res = self
-0003a720: 2e6d 6169 6e5f 7769 6e64 6f77 2e73 7769  .main_window.swi
-0003a730: 7463 685f 7072 6f6a 6563 7428 7465 7374  tch_project(test
-0003a740: 5f70 726f 6a5f 7061 7468 2c20 2274 6573  _proj_path, "tes
-0003a750: 745f 7072 6f6a 6563 7422 290a 2020 2020  t_project").    
-0003a760: 2020 2020 7365 6c66 2e61 7373 6572 7446      self.assertF
-0003a770: 616c 7365 2872 6573 290a 0a20 2020 2064  alse(res)..    d
-0003a780: 6566 2074 6573 745f 7461 625f 6368 616e  ef test_tab_chan
-0003a790: 6765 6428 7365 6c66 293a 0a20 2020 2020  ged(self):.     
-0003a7a0: 2020 2022 2222 5377 6974 6368 6573 2062     """Switches b
-0003a7b0: 6574 7765 656e 2074 6162 732e 0a0a 2020  etween tabs...  
-0003a7c0: 2020 2020 2020 4461 7461 2062 726f 7773        Data brows
-0003a7d0: 6572 2c20 6461 7461 2076 6965 7765 7220  er, data viewer 
-0003a7e0: 616e 6420 7069 7065 6c69 6e65 206d 616e  and pipeline man
-0003a7f0: 6167 6572 2e0a 0a20 2020 2020 2020 2054  ager...        T
-0003a800: 6573 7473 3a20 4d61 696e 5769 6e64 6f77  ests: MainWindow
-0003a810: 2e74 6162 5f63 6861 6e67 6564 2e0a 0a20  .tab_changed... 
-0003a820: 2020 2020 2020 204d 6f63 6b73 3a20 514d         Mocks: QM
-0003a830: 6573 7361 6765 426f 782e 6578 6563 2e0a  essageBox.exec..
-0003a840: 2020 2020 2020 2020 2222 220a 0a20 2020          """..   
-0003a850: 2020 2020 2023 2043 7265 6174 6573 2061       # Creates a
-0003a860: 2074 6573 7420 7072 6f6a 6563 740a 2020   test project.  
-0003a870: 2020 2020 2020 7465 7374 5f70 726f 6a5f        test_proj_
-0003a880: 7061 7468 203d 2073 656c 662e 6765 745f  path = self.get_
-0003a890: 6e65 775f 7465 7374 5f70 726f 6a65 6374  new_test_project
-0003a8a0: 286c 6967 6874 3d54 7275 6529 0a20 2020  (light=True).   
-0003a8b0: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
-0003a8c0: 696e 646f 772e 7377 6974 6368 5f70 726f  indow.switch_pro
-0003a8d0: 6a65 6374 2874 6573 745f 7072 6f6a 5f70  ject(test_proj_p
-0003a8e0: 6174 682c 2022 7465 7374 5f70 726f 6a65  ath, "test_proje
-0003a8f0: 6374 2229 0a0a 2020 2020 2020 2020 2320  ct")..        # 
-0003a900: 5365 7420 7368 6f72 7463 7574 7320 666f  Set shortcuts fo
-0003a910: 7220 6f62 6a65 6374 7320 7468 6174 2061  r objects that a
-0003a920: 7265 206f 6674 656e 2075 7365 640a 2020  re often used.  
-0003a930: 2020 2020 2020 6461 7461 5f62 726f 7773        data_brows
-0003a940: 6572 203d 2073 656c 662e 6d61 696e 5f77  er = self.main_w
-0003a950: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
-0003a960: 6572 0a0a 2020 2020 2020 2020 2320 5377  er..        # Sw
-0003a970: 6974 6368 6573 2074 6f20 6461 7461 2076  itches to data v
-0003a980: 6965 7765 720a 2020 2020 2020 2020 7365  iewer.        se
-0003a990: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e74  lf.main_window.t
-0003a9a0: 6162 732e 7365 7443 7572 7265 6e74 496e  abs.setCurrentIn
-0003a9b0: 6465 7828 3129 2020 2320 4361 6c6c 7320  dex(1)  # Calls 
-0003a9c0: 7461 625f 6368 616e 6765 6428 290a 2020  tab_changed().  
-0003a9d0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0003a9e0: 7445 7175 616c 2873 656c 662e 6d61 696e  tEqual(self.main
-0003a9f0: 5f77 696e 646f 772e 7461 6273 2e63 7572  _window.tabs.cur
-0003aa00: 7265 6e74 496e 6465 7828 292c 2031 290a  rentIndex(), 1).
-0003aa10: 0a20 2020 2020 2020 2023 2044 656c 6574  .        # Delet
-0003aa20: 6573 2061 2073 6361 6e20 6672 6f6d 2064  es a scan from d
-0003aa30: 6174 6120 6272 6f77 7365 720a 2020 2020  ata browser.    
-0003aa40: 2020 2020 6461 7461 5f62 726f 7773 6572      data_browser
-0003aa50: 2e74 6162 6c65 5f64 6174 612e 7365 6c65  .table_data.sele
-0003aa60: 6374 526f 7728 3029 0a20 2020 2020 2020  ctRow(0).       
-0003aa70: 2064 6174 615f 6272 6f77 7365 722e 7461   data_browser.ta
-0003aa80: 626c 655f 6461 7461 2e72 656d 6f76 655f  ble_data.remove_
-0003aa90: 7363 616e 2829 0a0a 2020 2020 2020 2020  scan()..        
-0003aaa0: 2320 4d6f 636b 7320 7468 6520 6578 6563  # Mocks the exec
-0003aab0: 7574 696f 6e20 6f66 2061 2064 6961 6c6f  ution of a dialo
-0003aac0: 6720 626f 7820 6279 2061 6363 6570 7469  g box by accepti
-0003aad0: 6e67 2069 740a 2020 2020 2020 2020 514d  ng it.        QM
-0003aae0: 6573 7361 6765 426f 782e 6578 6563 203d  essageBox.exec =
-0003aaf0: 206c 616d 6264 6120 7365 6c66 5f2c 202a   lambda self_, *
-0003ab00: 6172 673a 2073 656c 665f 2e61 6363 6570  arg: self_.accep
-0003ab10: 7428 290a 0a20 2020 2020 2020 2023 2053  t()..        # S
-0003ab20: 7769 7463 6820 746f 2070 6970 656c 696e  witch to pipelin
-0003ab30: 6520 6d61 6e61 6765 7220 7769 7468 2075  e manager with u
-0003ab40: 6e73 6176 6564 206d 6f64 6966 6963 6174  nsaved modificat
-0003ab50: 696f 6e73 0a20 2020 2020 2020 2073 656c  ions.        sel
-0003ab60: 662e 6d61 696e 5f77 696e 646f 772e 7461  f.main_window.ta
-0003ab70: 6273 2e73 6574 4375 7272 656e 7449 6e64  bs.setCurrentInd
-0003ab80: 6578 2832 2920 2023 2043 616c 6c73 2074  ex(2)  # Calls t
-0003ab90: 6162 5f63 6861 6e67 6564 2829 0a20 2020  ab_changed().   
-0003aba0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0003abb0: 4571 7561 6c28 7365 6c66 2e6d 6169 6e5f  Equal(self.main_
-0003abc0: 7769 6e64 6f77 2e74 6162 732e 6375 7272  window.tabs.curr
-0003abd0: 656e 7449 6e64 6578 2829 2c20 3229 0a0a  entIndex(), 2)..
-0003abe0: 2020 2020 2020 2020 2320 4d6f 636b 7320          # Mocks 
-0003abf0: 6e6f 7473 206c 6973 740a 2020 2020 2020  nots list.      
-0003ac00: 2020 2320 7365 6c66 2e6d 6169 6e5f 7769    # self.main_wi
-0003ac10: 6e64 6f77 2e70 726f 6a65 6374 2e63 7572  ndow.project.cur
-0003ac20: 7265 6e74 4669 6c74 6572 2e6e 6f74 7320  rentFilter.nots 
-0003ac30: 3d20 5b27 4e4f 5427 2c20 2727 2c20 2727  = ['NOT', '', ''
-0003ac40: 5d0a 0a20 2020 2020 2020 2023 2053 7769  ]..        # Swi
-0003ac50: 7463 6865 7320 746f 2064 6174 6120 6272  tches to data br
-0003ac60: 6f77 7365 720a 2020 2020 2020 2020 7365  owser.        se
-0003ac70: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e74  lf.main_window.t
-0003ac80: 6162 732e 7365 7443 7572 7265 6e74 496e  abs.setCurrentIn
-0003ac90: 6465 7828 3029 2020 2320 4361 6c6c 7320  dex(0)  # Calls 
-0003aca0: 7461 625f 6368 616e 6765 6428 290a 2020  tab_changed().  
-0003acb0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0003acc0: 7445 7175 616c 2873 656c 662e 6d61 696e  tEqual(self.main
-0003acd0: 5f77 696e 646f 772e 7461 6273 2e63 7572  _window.tabs.cur
-0003ace0: 7265 6e74 496e 6465 7828 292c 2030 290a  rentIndex(), 0).
-0003acf0: 0a0a 636c 6173 7320 5465 7374 4d49 414e  ..class TestMIAN
-0003ad00: 6f64 6543 6f6e 7472 6f6c 6c65 7228 5465  odeController(Te
-0003ad10: 7374 4d49 4143 6173 6529 3a0a 2020 2020  stMIACase):.    
-0003ad20: 2222 2254 6573 7473 2066 6f72 2074 6865  """Tests for the
-0003ad30: 206e 6f64 6520 636f 6e74 726f 6c6c 6572   node controller
-0003ad40: 2c20 7061 7274 206f 6620 7468 6520 7069  , part of the pi
-0003ad50: 7065 6c69 6e65 206d 616e 6167 6572 2074  peline manager t
-0003ad60: 6162 2e0a 0a20 2020 202d 2054 6573 7473  ab...    - Tests
-0003ad70: 3a20 4e6f 6465 436f 6e74 726f 6c6c 6572  : NodeController
-0003ad80: 2e0a 0a20 2020 203a 436f 6e74 6169 6e73  ...    :Contains
-0003ad90: 3a0a 2020 2020 2020 2020 3a4d 6574 686f  :.        :Metho
-0003ada0: 643a 0a20 2020 2020 2020 2020 2020 202d  d:.            -
-0003adb0: 2074 6573 745f 6174 7472 6962 7574 6573   test_attributes
-0003adc0: 5f66 696c 7465 723a 2064 6973 706c 6179  _filter: display
-0003add0: 7320 616e 2061 7474 7269 6275 7465 7320  s an attributes 
-0003ade0: 6669 6c74 6572 2061 6e64 0a20 2020 2020  filter and.     
-0003adf0: 2020 2020 2020 2020 206d 6f64 6966 6965           modifie
-0003ae00: 7320 6974 2e0a 2020 2020 2020 2020 2020  s it..          
-0003ae10: 2020 2d20 7465 7374 5f63 6170 7375 6c5f    - test_capsul_
-0003ae20: 6e6f 6465 5f63 6f6e 7472 6f6c 6c65 723a  node_controller:
-0003ae30: 2061 6464 732c 2063 6861 6e67 6573 2061   adds, changes a
-0003ae40: 6e64 2064 656c 6574 6573 0a20 2020 2020  nd deletes.     
-0003ae50: 2020 2020 2020 2020 2070 726f 6365 7373           process
-0003ae60: 6573 2075 7369 6e67 2074 6865 2063 6170  es using the cap
-0003ae70: 7375 6c20 6e6f 6465 2063 6f6e 7472 6f6c  sul node control
-0003ae80: 6c65 722e 0a20 2020 2020 2020 2020 2020  ler..           
-0003ae90: 202d 2074 6573 745f 6469 7370 6c61 795f   - test_display_
-0003aea0: 6669 6c74 6572 3a20 6469 7370 6c61 7973  filter: displays
-0003aeb0: 206e 6f64 6520 7061 7261 6d65 7465 7273   node parameters
-0003aec0: 2061 6e64 2061 2070 6c75 670a 2020 2020   and a plug.    
-0003aed0: 2020 2020 2020 2020 2020 6669 6c74 6572            filter
-0003aee0: 2e0a 2020 2020 2020 2020 2020 2020 2d20  ..            - 
-0003aef0: 7465 7374 5f66 696c 7465 725f 7769 6467  test_filter_widg
-0003af00: 6574 3a20 6f70 656e 7320 7570 2074 6865  et: opens up the
-0003af10: 2022 4669 6c74 6572 5769 6467 6574 2829   "FilterWidget()
-0003af20: 2220 746f 0a20 2020 2020 2020 2020 2020  " to.           
-0003af30: 2020 206d 6f64 6966 7920 6974 7320 7061     modify its pa
-0003af40: 7261 6d65 7465 7273 2e0a 2020 2020 2020  rameters..      
-0003af50: 2020 2020 2020 2d20 7465 7374 5f6e 6f64        - test_nod
-0003af60: 655f 636f 6e74 726f 6c6c 6572 3a20 6164  e_controller: ad
-0003af70: 6473 2c20 6368 616e 6765 7320 616e 6420  ds, changes and 
-0003af80: 6465 6c65 7465 7320 7072 6f63 6573 7365  deletes processe
-0003af90: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
-0003afa0: 746f 2074 6865 206e 6f64 6520 636f 6e74  to the node cont
-0003afb0: 726f 6c6c 6572 2e0a 2020 2020 2020 2020  roller..        
-0003afc0: 2020 2020 2d20 7465 7374 5f70 6c75 675f      - test_plug_
-0003afd0: 6669 6c74 6572 3a20 6469 7370 6c61 7973  filter: displays
-0003afe0: 2061 2070 6c75 6720 6669 6c74 6572 2061   a plug filter a
-0003aff0: 6e64 206d 6f64 6966 6965 7320 6974 0a20  nd modifies it. 
-0003b000: 2020 2020 2020 2020 2020 202d 2074 6573             - tes
-0003b010: 745f 7570 6461 7465 5f6e 6f64 655f 6e61  t_update_node_na
-0003b020: 6d65 3a20 6469 7370 6c61 7973 206e 6f64  me: displays nod
-0003b030: 6520 7061 7261 6d65 7465 7273 2061 6e64  e parameters and
-0003b040: 0a20 2020 2020 2020 2020 2020 2020 2075  .              u
-0003b050: 7064 6174 6573 2069 7473 206e 616d 652e  pdates its name.
-0003b060: 0a20 2020 2022 2222 0a0a 2020 2020 6465  .    """..    de
-0003b070: 6620 7465 7374 5f61 7474 7269 6275 7465  f test_attribute
-0003b080: 735f 6669 6c74 6572 2873 656c 6629 3a0a  s_filter(self):.
-0003b090: 2020 2020 2020 2020 2222 2244 6973 706c          """Displ
-0003b0a0: 6179 7320 7468 6520 7061 7261 6d65 7465  ays the paramete
-0003b0b0: 7273 206f 6620 6120 6e6f 6465 2c20 6469  rs of a node, di
-0003b0c0: 7370 6c61 7973 2061 6e20 6174 7472 6962  splays an attrib
-0003b0d0: 7574 6573 2066 696c 7465 720a 2020 2020  utes filter.    
-0003b0e0: 2020 2020 616e 6420 6d6f 6469 6669 6573      and modifies
-0003b0f0: 2069 742e 0a0a 2020 2020 2020 2020 2d20   it...        - 
-0003b100: 5465 7374 733a 2041 7474 7269 6275 7465  Tests: Attribute
-0003b110: 7346 696c 7465 7220 696e 2056 3220 636f  sFilter in V2 co
-0003b120: 6e74 726f 6c6c 6572 2047 5549 2028 4361  ntroller GUI (Ca
-0003b130: 7073 756c 4e6f 6465 436f 6e74 726f 6c6c  psulNodeControll
-0003b140: 6572 292e 0a20 2020 2020 2020 2022 2222  er)..        """
-0003b150: 0a0a 2020 2020 2020 2020 2320 4f70 656e  ..        # Open
-0003b160: 7320 7072 6f6a 6563 7420 3820 616e 6420  s project 8 and 
-0003b170: 7377 6974 6368 6573 2074 6f20 6974 0a20  switches to it. 
-0003b180: 2020 2020 2020 2070 726f 6a65 6374 5f38         project_8
-0003b190: 5f70 6174 6820 3d20 7365 6c66 2e67 6574  _path = self.get
-0003b1a0: 5f6e 6577 5f74 6573 745f 7072 6f6a 6563  _new_test_projec
-0003b1b0: 7428 290a 2020 2020 2020 2020 7365 6c66  t().        self
-0003b1c0: 2e6d 6169 6e5f 7769 6e64 6f77 2e73 7769  .main_window.swi
-0003b1d0: 7463 685f 7072 6f6a 6563 7428 7072 6f6a  tch_project(proj
-0003b1e0: 6563 745f 385f 7061 7468 2c20 2270 726f  ect_8_path, "pro
-0003b1f0: 6a65 6374 5f38 2229 0a0a 2020 2020 2020  ject_8")..      
-0003b200: 2020 7070 6c5f 6564 745f 7461 6273 203d    ppl_edt_tabs =
-0003b210: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-0003b220: 772e 7069 7065 6c69 6e65 5f6d 616e 6167  w.pipeline_manag
-0003b230: 6572 2e70 6970 656c 696e 6545 6469 746f  er.pipelineEdito
-0003b240: 7254 6162 730a 2020 2020 2020 2020 6e6f  rTabs.        no
-0003b250: 6465 5f63 6f6e 7472 6f6c 6c65 7220 3d20  de_controller = 
-0003b260: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-0003b270: 2e70 6970 656c 696e 655f 6d61 6e61 6765  .pipeline_manage
-0003b280: 722e 6e6f 6465 436f 6e74 726f 6c6c 6572  r.nodeController
-0003b290: 0a0a 2020 2020 2020 2020 2320 4164 6473  ..        # Adds
-0003b2a0: 2074 6865 2070 726f 6365 7373 2053 6d6f   the process Smo
-0003b2b0: 6f74 682c 2063 7265 6174 6573 2061 206e  oth, creates a n
-0003b2c0: 6f64 6520 6361 6c6c 6564 2022 736d 6f6f  ode called "smoo
-0003b2d0: 7468 5f31 220a 2020 2020 2020 2020 7070  th_1".        pp
-0003b2e0: 6c5f 6564 745f 7461 6273 2e67 6574 5f63  l_edt_tabs.get_c
-0003b2f0: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
-0003b300: 636c 6963 6b5f 706f 7320 3d20 5150 6f69  click_pos = QPoi
-0003b310: 6e74 2834 3530 2c20 3530 3029 0a20 2020  nt(450, 500).   
-0003b320: 2020 2020 2070 706c 5f65 6474 5f74 6162       ppl_edt_tab
-0003b330: 732e 6765 745f 6375 7272 656e 745f 6564  s.get_current_ed
-0003b340: 6974 6f72 2829 2e61 6464 5f6e 616d 6564  itor().add_named
-0003b350: 5f70 726f 6365 7373 2853 6d6f 6f74 6829  _process(Smooth)
-0003b360: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
-0003b370: 6520 3d20 7070 6c5f 6564 745f 7461 6273  e = ppl_edt_tabs
-0003b380: 2e67 6574 5f63 7572 7265 6e74 5f70 6970  .get_current_pip
-0003b390: 656c 696e 6528 290a 0a20 2020 2020 2020  eline()..       
-0003b3a0: 2023 2045 7870 6f72 7473 2074 6865 2075   # Exports the u
-0003b3b0: 6e63 6f6e 6e65 6374 6564 206d 616e 6461  nconnected manda
-0003b3c0: 746f 7279 2070 6c75 6773 0a20 2020 2020  tory plugs.     
-0003b3d0: 2020 2070 706c 5f65 6474 5f74 6162 732e     ppl_edt_tabs.
-0003b3e0: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
-0003b3f0: 6f72 2829 2e63 7572 7265 6e74 5f6e 6f64  or().current_nod
-0003b400: 655f 6e61 6d65 203d 2022 736d 6f6f 7468  e_name = "smooth
-0003b410: 5f31 220a 2020 2020 2020 2020 280a 2020  _1".        (.  
-0003b420: 2020 2020 2020 2020 2020 7070 6c5f 6564            ppl_ed
-0003b430: 745f 7461 6273 2e67 6574 5f63 7572 7265  t_tabs.get_curre
-0003b440: 6e74 5f65 6469 746f 720a 2020 2020 2020  nt_editor.      
-0003b450: 2020 2928 292e 6578 706f 7274 5f6e 6f64    )().export_nod
-0003b460: 655f 756e 636f 6e6e 6563 7465 645f 6d61  e_unconnected_ma
-0003b470: 6e64 6174 6f72 795f 706c 7567 7328 290a  ndatory_plugs().
-0003b480: 0a20 2020 2020 2020 2023 2044 6973 706c  .        # Displ
-0003b490: 6179 7320 7061 7261 6d65 7465 7273 206f  ays parameters o
-0003b4a0: 6620 2769 6e70 7574 7327 206e 6f64 650a  f 'inputs' node.
-0003b4b0: 2020 2020 2020 2020 696e 7075 745f 7072          input_pr
-0003b4c0: 6f63 6573 7320 3d20 7069 7065 6c69 6e65  ocess = pipeline
-0003b4d0: 2e6e 6f64 6573 5b22 225d 2e70 726f 6365  .nodes[""].proce
-0003b4e0: 7373 0a20 2020 2020 2020 2073 656c 662e  ss.        self.
-0003b4f0: 6d61 696e 5f77 696e 646f 772e 7069 7065  main_window.pipe
-0003b500: 6c69 6e65 5f6d 616e 6167 6572 2e64 6973  line_manager.dis
-0003b510: 706c 6179 4e6f 6465 5061 7261 6d65 7465  playNodeParamete
-0003b520: 7273 280a 2020 2020 2020 2020 2020 2020  rs(.            
-0003b530: 2269 6e70 7574 7322 2c20 696e 7075 745f  "inputs", input_
-0003b540: 7072 6f63 6573 730a 2020 2020 2020 2020  process.        
-0003b550: 290a 0a20 2020 2020 2020 2023 204f 7065  )..        # Ope
-0003b560: 6e73 2074 6865 2061 7474 7269 6275 7465  ns the attribute
-0003b570: 7320 6669 6c74 6572 2c20 7365 6c65 6374  s filter, select
-0003b580: 7320 6974 656d 2061 6e64 2063 6c6f 7365  s item and close
-0003b590: 7320 6974 0a20 2020 2020 2020 206e 6f64  s it.        nod
-0003b5a0: 655f 636f 6e74 726f 6c6c 6572 2e66 696c  e_controller.fil
-0003b5b0: 7465 725f 6174 7472 6962 7574 6573 2829  ter_attributes()
-0003b5c0: 0a20 2020 2020 2020 2061 7474 7269 6275  .        attribu
-0003b5d0: 7465 735f 6669 6c74 6572 203d 206e 6f64  tes_filter = nod
-0003b5e0: 655f 636f 6e74 726f 6c6c 6572 2e70 6f70  e_controller.pop
-0003b5f0: 5f75 700a 2020 2020 2020 2020 6174 7472  _up.        attr
-0003b600: 6962 7574 6573 5f66 696c 7465 722e 7461  ibutes_filter.ta
-0003b610: 626c 655f 6461 7461 2e73 656c 6563 7452  ble_data.selectR
-0003b620: 6f77 2830 290a 2020 2020 2020 2020 6174  ow(0).        at
-0003b630: 7472 6962 7574 6573 5f66 696c 7465 722e  tributes_filter.
-0003b640: 6f6b 5f63 6c69 636b 6564 2829 0a0a 2020  ok_clicked()..  
-0003b650: 2020 2020 2020 2320 4f70 656e 7320 7468        # Opens th
-0003b660: 6520 6174 7472 6962 7574 6573 2066 696c  e attributes fil
-0003b670: 7465 722c 2064 6f65 7320 6e6f 7420 7365  ter, does not se
-0003b680: 6c65 6374 2061 6e20 6974 656d 2061 6e64  lect an item and
-0003b690: 2063 6c6f 7365 7320 6974 0a20 2020 2020   closes it.     
-0003b6a0: 2020 206e 6f64 655f 636f 6e74 726f 6c6c     node_controll
-0003b6b0: 6572 2e66 696c 7465 725f 6174 7472 6962  er.filter_attrib
-0003b6c0: 7574 6573 2829 0a20 2020 2020 2020 2061  utes().        a
-0003b6d0: 7474 7269 6275 7465 735f 6669 6c74 6572  ttributes_filter
-0003b6e0: 203d 206e 6f64 655f 636f 6e74 726f 6c6c   = node_controll
-0003b6f0: 6572 2e70 6f70 5f75 700a 2020 2020 2020  er.pop_up.      
-0003b700: 2020 6174 7472 6962 7574 6573 5f66 696c    attributes_fil
-0003b710: 7465 722e 7365 6172 6368 5f73 7472 2822  ter.search_str("
-0003b720: 2140 2322 290a 2020 2020 2020 2020 6174  !@#").        at
-0003b730: 7472 6962 7574 6573 5f66 696c 7465 722e  tributes_filter.
-0003b740: 6f6b 5f63 6c69 636b 6564 2829 0a0a 2020  ok_clicked()..  
-0003b750: 2020 6465 6620 7465 7374 5f63 6170 7375    def test_capsu
-0003b760: 6c5f 6e6f 6465 5f63 6f6e 7472 6f6c 6c65  l_node_controlle
-0003b770: 7228 7365 6c66 293a 0a20 2020 2020 2020  r(self):.       
-0003b780: 2022 2222 4164 6473 2c20 6368 616e 6765   """Adds, change
-0003b790: 7320 616e 6420 6465 6c65 7465 7320 7072  s and deletes pr
-0003b7a0: 6f63 6573 7365 7320 7573 696e 6720 7468  ocesses using th
-0003b7b0: 6520 6361 7073 756c 206e 6f64 6520 636f  e capsul node co
-0003b7c0: 6e74 726f 6c6c 6572 2e0a 0a20 2020 2020  ntroller...     
-0003b7d0: 2020 2044 6973 706c 6179 7320 7468 6520     Displays the 
-0003b7e0: 6174 7472 6962 7574 6573 2066 696c 7465  attributes filte
-0003b7f0: 722e 0a0a 2020 2020 2020 2020 5465 7374  r...        Test
-0003b800: 733a 2043 6170 7375 6c4e 6f64 6543 6f6e  s: CapsulNodeCon
-0003b810: 7472 6f6c 6c65 720a 2020 2020 2020 2020  troller.        
-0003b820: 2222 220a 0a20 2020 2020 2020 2023 204f  """..        # O
-0003b830: 7065 6e73 2070 726f 6a65 6374 2038 2061  pens project 8 a
-0003b840: 6e64 2073 7769 7463 6865 7320 746f 2069  nd switches to i
-0003b850: 740a 2020 2020 2020 2020 7072 6f6a 6563  t.        projec
-0003b860: 745f 385f 7061 7468 203d 2073 656c 662e  t_8_path = self.
-0003b870: 6765 745f 6e65 775f 7465 7374 5f70 726f  get_new_test_pro
-0003b880: 6a65 6374 2829 0a20 2020 2020 2020 2073  ject().        s
-0003b890: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-0003b8a0: 7377 6974 6368 5f70 726f 6a65 6374 2870  switch_project(p
-0003b8b0: 726f 6a65 6374 5f38 5f70 6174 682c 2022  roject_8_path, "
-0003b8c0: 7072 6f6a 6563 745f 3822 290a 0a20 2020  project_8")..   
-0003b8d0: 2020 2020 2044 4f43 554d 454e 545f 3120       DOCUMENT_1 
-0003b8e0: 3d20 2873 656c 662e 6d61 696e 5f77 696e  = (self.main_win
-0003b8f0: 646f 772e 7072 6f6a 6563 742e 7365 7373  dow.project.sess
-0003b900: 696f 6e2e 6765 745f 646f 6375 6d65 6e74  ion.get_document
-0003b910: 735f 6e61 6d65 7329 280a 2020 2020 2020  s_names)(.      
-0003b920: 2020 2020 2020 2263 7572 7265 6e74 220a        "current".
-0003b930: 2020 2020 2020 2020 295b 305d 0a0a 2020          )[0]..  
-0003b940: 2020 2020 2020 7070 6c5f 6564 745f 7461        ppl_edt_ta
-0003b950: 6273 203d 2073 656c 662e 6d61 696e 5f77  bs = self.main_w
-0003b960: 696e 646f 772e 7069 7065 6c69 6e65 5f6d  indow.pipeline_m
-0003b970: 616e 6167 6572 2e70 6970 656c 696e 6545  anager.pipelineE
-0003b980: 6469 746f 7254 6162 730a 2020 2020 2020  ditorTabs.      
-0003b990: 2020 6e6f 6465 5f63 7472 6c65 7220 3d20    node_ctrler = 
-0003b9a0: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-0003b9b0: 2e70 6970 656c 696e 655f 6d61 6e61 6765  .pipeline_manage
-0003b9c0: 722e 6e6f 6465 436f 6e74 726f 6c6c 6572  r.nodeController
-0003b9d0: 0a0a 2020 2020 2020 2020 2320 4164 6473  ..        # Adds
-0003b9e0: 2032 2070 726f 6365 7373 6573 2052 656e   2 processes Ren
-0003b9f0: 616d 652c 2063 7265 6174 6573 2032 206e  ame, creates 2 n
-0003ba00: 6f64 6573 2063 616c 6c65 6420 2272 656e  odes called "ren
-0003ba10: 616d 655f 3122 2061 6e64 0a20 2020 2020  ame_1" and.     
-0003ba20: 2020 2023 2022 7265 6e61 6d65 5f32 223a     # "rename_2":
-0003ba30: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
-0003ba40: 5f63 6c61 7373 203d 2052 656e 616d 650a  _class = Rename.
-0003ba50: 2020 2020 2020 2020 7070 6c5f 6564 745f          ppl_edt_
-0003ba60: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
-0003ba70: 5f65 6469 746f 7228 292e 636c 6963 6b5f  _editor().click_
-0003ba80: 706f 7320 3d20 5150 6f69 6e74 2834 3530  pos = QPoint(450
-0003ba90: 2c20 3530 3029 0a20 2020 2020 2020 2070  , 500).        p
-0003baa0: 706c 5f65 6474 5f74 6162 732e 6765 745f  pl_edt_tabs.get_
-0003bab0: 6375 7272 656e 745f 6564 6974 6f72 2829  current_editor()
-0003bac0: 2e61 6464 5f6e 616d 6564 5f70 726f 6365  .add_named_proce
-0003bad0: 7373 2870 726f 6365 7373 5f63 6c61 7373  ss(process_class
-0003bae0: 290a 2020 2020 2020 2020 7070 6c5f 6564  ).        ppl_ed
-0003baf0: 745f 7461 6273 2e67 6574 5f63 7572 7265  t_tabs.get_curre
-0003bb00: 6e74 5f65 6469 746f 7228 292e 6164 645f  nt_editor().add_
-0003bb10: 6e61 6d65 645f 7072 6f63 6573 7328 7072  named_process(pr
-0003bb20: 6f63 6573 735f 636c 6173 7329 0a20 2020  ocess_class).   
-0003bb30: 2020 2020 2070 6970 656c 696e 6520 3d20       pipeline = 
-0003bb40: 7070 6c5f 6564 745f 7461 6273 2e67 6574  ppl_edt_tabs.get
-0003bb50: 5f63 7572 7265 6e74 5f70 6970 656c 696e  _current_pipelin
-0003bb60: 6528 290a 0a20 2020 2020 2020 2023 2044  e()..        # D
-0003bb70: 6973 706c 6179 7320 7061 7261 6d65 7465  isplays paramete
-0003bb80: 7273 206f 6620 2272 656e 616d 655f 3222  rs of "rename_2"
-0003bb90: 206e 6f64 650a 2020 2020 2020 2020 7265   node.        re
-0003bba0: 6e61 6d65 5f70 726f 6365 7373 203d 2070  name_process = p
-0003bbb0: 6970 656c 696e 652e 6e6f 6465 735b 2272  ipeline.nodes["r
-0003bbc0: 656e 616d 655f 3222 5d2e 7072 6f63 6573  ename_2"].proces
-0003bbd0: 730a 2020 2020 2020 2020 7365 6c66 2e6d  s.        self.m
-0003bbe0: 6169 6e5f 7769 6e64 6f77 2e70 6970 656c  ain_window.pipel
-0003bbf0: 696e 655f 6d61 6e61 6765 722e 6469 7370  ine_manager.disp
-0003bc00: 6c61 794e 6f64 6550 6172 616d 6574 6572  layNodeParameter
-0003bc10: 7328 0a20 2020 2020 2020 2020 2020 2022  s(.            "
-0003bc20: 7265 6e61 6d65 5f32 222c 2072 656e 616d  rename_2", renam
-0003bc30: 655f 7072 6f63 6573 730a 2020 2020 2020  e_process.      
-0003bc40: 2020 290a 0a20 2020 2020 2020 2023 2054    )..        # T
-0003bc50: 7269 6573 2063 6861 6e67 696e 6720 6974  ries changing it
-0003bc60: 7320 6e61 6d65 2074 6f20 2272 656e 616d  s name to "renam
-0003bc70: 655f 3222 2061 6e64 2074 6865 6e20 746f  e_2" and then to
-0003bc80: 2022 7265 6e61 6d65 5f33 220a 2020 2020   "rename_3".    
-0003bc90: 2020 2020 6e6f 6465 5f63 7472 6c65 722e      node_ctrler.
-0003bca0: 7570 6461 7465 5f6e 6f64 655f 6e61 6d65  update_node_name
-0003bcb0: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
-0003bcc0: 6173 7365 7274 4571 7561 6c28 6e6f 6465  assertEqual(node
-0003bcd0: 5f63 7472 6c65 722e 6e6f 6465 5f6e 616d  _ctrler.node_nam
-0003bce0: 652c 2022 7265 6e61 6d65 5f32 2229 0a20  e, "rename_2"). 
-0003bcf0: 2020 2020 2020 206e 6f64 655f 6374 726c         node_ctrl
-0003bd00: 6572 2e75 7064 6174 655f 6e6f 6465 5f6e  er.update_node_n
-0003bd10: 616d 6528 0a20 2020 2020 2020 2020 2020  ame(.           
-0003bd20: 206e 6577 5f6e 6f64 655f 6e61 6d65 3d22   new_node_name="
-0003bd30: 7265 6e61 6d65 5f31 222c 206f 6c64 5f6e  rename_1", old_n
-0003bd40: 6f64 655f 6e61 6d65 3d22 7265 6e61 6d65  ode_name="rename
-0003bd50: 5f32 220a 2020 2020 2020 2020 290a 2020  _2".        ).  
-0003bd60: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0003bd70: 7445 7175 616c 286e 6f64 655f 6374 726c  tEqual(node_ctrl
-0003bd80: 6572 2e6e 6f64 655f 6e61 6d65 2c20 2272  er.node_name, "r
-0003bd90: 656e 616d 655f 3222 290a 2020 2020 2020  ename_2").      
-0003bda0: 2020 6e6f 6465 5f63 7472 6c65 722e 7570    node_ctrler.up
-0003bdb0: 6461 7465 5f6e 6f64 655f 6e61 6d65 280a  date_node_name(.
-0003bdc0: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
-0003bdd0: 6e6f 6465 5f6e 616d 653d 2272 656e 616d  node_name="renam
-0003bde0: 655f 3322 2c20 6f6c 645f 6e6f 6465 5f6e  e_3", old_node_n
-0003bdf0: 616d 653d 2272 656e 616d 655f 3222 0a20  ame="rename_2". 
-0003be00: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0003be10: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0003be20: 6c28 6e6f 6465 5f63 7472 6c65 722e 6e6f  l(node_ctrler.no
-0003be30: 6465 5f6e 616d 652c 2022 7265 6e61 6d65  de_name, "rename
-0003be40: 5f33 2229 0a0a 2020 2020 2020 2020 2320  _3")..        # 
-0003be50: 4465 6c65 7465 7320 6e6f 6465 2022 7265  Deletes node "re
-0003be60: 6e61 6d65 5f33 220a 2020 2020 2020 2020  name_3".        
-0003be70: 7070 6c5f 6564 745f 7461 6273 2e67 6574  ppl_edt_tabs.get
-0003be80: 5f63 7572 7265 6e74 5f65 6469 746f 7228  _current_editor(
-0003be90: 292e 6465 6c5f 6e6f 6465 2822 7265 6e61  ).del_node("rena
-0003bea0: 6d65 5f33 2229 0a0a 2020 2020 2020 2020  me_3")..        
-0003beb0: 2320 4469 7370 6c61 7920 7061 7261 6d65  # Display parame
-0003bec0: 7465 7273 206f 6620 7468 6520 2269 6e70  ters of the "inp
-0003bed0: 7574 7322 206e 6f64 650a 2020 2020 2020  uts" node.      
-0003bee0: 2020 696e 7075 745f 7072 6f63 6573 7320    input_process 
-0003bef0: 3d20 7069 7065 6c69 6e65 2e6e 6f64 6573  = pipeline.nodes
-0003bf00: 5b22 225d 2e70 726f 6365 7373 0a20 2020  [""].process.   
-0003bf10: 2020 2020 206e 6f64 655f 6374 726c 6572       node_ctrler
-0003bf20: 2e64 6973 706c 6179 5f70 6172 616d 6574  .display_paramet
-0003bf30: 6572 7328 0a20 2020 2020 2020 2020 2020  ers(.           
-0003bf40: 2022 696e 7075 7473 222c 2067 6574 5f70   "inputs", get_p
-0003bf50: 726f 6365 7373 5f69 6e73 7461 6e63 6528  rocess_instance(
-0003bf60: 696e 7075 745f 7072 6f63 6573 7329 2c20  input_process), 
-0003bf70: 7069 7065 6c69 6e65 0a20 2020 2020 2020  pipeline.       
-0003bf80: 2029 0a0a 2020 2020 2020 2020 2320 4469   )..        # Di
-0003bf90: 7370 6c61 7973 2070 6172 616d 6574 6572  splays parameter
-0003bfa0: 7320 6f66 2022 7265 6e61 6d65 5f31 2220  s of "rename_1" 
-0003bfb0: 6e6f 6465 0a20 2020 2020 2020 2072 656e  node.        ren
-0003bfc0: 616d 655f 7072 6f63 6573 7320 3d20 7069  ame_process = pi
-0003bfd0: 7065 6c69 6e65 2e6e 6f64 6573 5b22 7265  peline.nodes["re
-0003bfe0: 6e61 6d65 5f31 225d 2e70 726f 6365 7373  name_1"].process
-0003bff0: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
-0003c000: 696e 5f77 696e 646f 772e 7069 7065 6c69  in_window.pipeli
-0003c010: 6e65 5f6d 616e 6167 6572 2e64 6973 706c  ne_manager.displ
-0003c020: 6179 4e6f 6465 5061 7261 6d65 7465 7273  ayNodeParameters
-0003c030: 280a 2020 2020 2020 2020 2020 2020 2272  (.            "r
-0003c040: 656e 616d 655f 3122 2c20 7265 6e61 6d65  ename_1", rename
-0003c050: 5f70 726f 6365 7373 0a20 2020 2020 2020  _process.       
-0003c060: 2029 0a0a 2020 2020 2020 2020 2320 4578   )..        # Ex
-0003c070: 706f 7274 7320 706c 7567 7320 666f 7220  ports plugs for 
-0003c080: 2272 656e 616d 655f 3122 0a20 2020 2020  "rename_1".     
-0003c090: 2020 2070 706c 5f65 6474 5f74 6162 732e     ppl_edt_tabs.
-0003c0a0: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
-0003c0b0: 6f72 2829 2e63 7572 7265 6e74 5f6e 6f64  or().current_nod
-0003c0c0: 655f 6e61 6d65 203d 2022 7265 6e61 6d65  e_name = "rename
-0003c0d0: 5f31 220a 2020 2020 2020 2020 7070 6c5f  _1".        ppl_
-0003c0e0: 6564 745f 7461 6273 2e67 6574 5f63 7572  edt_tabs.get_cur
-0003c0f0: 7265 6e74 5f65 6469 746f 7228 292e 6578  rent_editor().ex
-0003c100: 706f 7274 5f75 6e63 6f6e 6e65 6374 6564  port_unconnected
-0003c110: 5f6d 616e 6461 746f 7279 5f69 6e70 7574  _mandatory_input
-0003c120: 7328 290a 2020 2020 2020 2020 7070 6c5f  s().        ppl_
-0003c130: 6564 745f 7461 6273 2e67 6574 5f63 7572  edt_tabs.get_cur
-0003c140: 7265 6e74 5f65 6469 746f 7228 292e 6578  rent_editor().ex
-0003c150: 706f 7274 5f61 6c6c 5f75 6e63 6f6e 6e65  port_all_unconne
-0003c160: 6374 6564 5f6f 7574 7075 7473 2829 0a0a  cted_outputs()..
-0003c170: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
-0003c180: 2e6e 6f64 6573 5b22 7265 6e61 6d65 5f31  .nodes["rename_1
-0003c190: 225d 2e73 6574 5f70 6c75 675f 7661 6c75  "].set_plug_valu
-0003c1a0: 6528 2269 6e5f 6669 6c65 222c 2044 4f43  e("in_file", DOC
-0003c1b0: 554d 454e 545f 3129 0a20 2020 2020 2020  UMENT_1).       
-0003c1c0: 2070 6970 656c 696e 652e 6e6f 6465 735b   pipeline.nodes[
-0003c1d0: 2272 656e 616d 655f 3122 5d2e 7365 745f  "rename_1"].set_
-0003c1e0: 706c 7567 5f76 616c 7565 280a 2020 2020  plug_value(.    
-0003c1f0: 2020 2020 2020 2020 2266 6f72 6d61 745f          "format_
-0003c200: 7374 7269 6e67 222c 2022 6e65 775f 6e61  string", "new_na
-0003c210: 6d65 2e6e 6969 220a 2020 2020 2020 2020  me.nii".        
-0003c220: 290a 0a20 2020 2020 2020 2023 2052 756e  )..        # Run
-0003c230: 7320 7069 7065 6c69 6e65 2061 6e64 2065  s pipeline and e
-0003c240: 7870 6563 7473 2061 6e20 6572 726f 720a  xpects an error.
-0003c250: 2020 2020 2020 2020 2320 7365 6c66 2e6d          # self.m
-0003c260: 6169 6e5f 7769 6e64 6f77 2e70 6970 656c  ain_window.pipel
-0003c270: 696e 655f 6d61 6e61 6765 722e 7275 6e50  ine_manager.runP
-0003c280: 6970 656c 696e 6528 290a 2020 2020 2020  ipeline().      
-0003c290: 2020 2320 4649 584d 453a 2072 756e 6e69    # FIXME: runni
-0003c2a0: 6e67 2074 6865 2070 6970 656c 696e 6520  ng the pipeline 
-0003c2b0: 6769 7665 7320 7468 6520 6572 726f 723a  gives the error:
-0003c2c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0003c2d0: 2020 4d6f 6475 6c65 4e6f 7446 6f75 6e64    ModuleNotFound
-0003c2e0: 4572 726f 723a 204e 6f20 6d6f 6475 6c65  Error: No module
-0003c2f0: 206e 616d 6564 2027 6361 7073 756c 270a   named 'capsul'.
-0003c300: 0a20 2020 2020 2020 2023 2044 6973 706c  .        # Displ
-0003c310: 6179 7320 7468 6520 6174 7472 6962 7574  ays the attribut
-0003c320: 6573 2066 696c 7465 720a 2020 2020 2020  es filter.      
-0003c330: 2020 6e6f 6465 5f63 7472 6c65 722e 6669    node_ctrler.fi
-0003c340: 6c74 6572 5f61 7474 7269 6275 7465 7328  lter_attributes(
-0003c350: 290a 2020 2020 2020 2020 6174 7472 6962  ).        attrib
-0003c360: 7574 6573 5f66 696c 7465 7220 3d20 6e6f  utes_filter = no
-0003c370: 6465 5f63 7472 6c65 722e 706f 705f 7570  de_ctrler.pop_up
-0003c380: 0a20 2020 2020 2020 2061 7474 7269 6275  .        attribu
-0003c390: 7465 735f 6669 6c74 6572 2e74 6162 6c65  tes_filter.table
-0003c3a0: 5f64 6174 612e 7365 6c65 6374 526f 7728  _data.selectRow(
-0003c3b0: 3029 0a20 2020 2020 2020 2061 7474 7269  0).        attri
-0003c3c0: 6275 7465 735f 6669 6c74 6572 2e6f 6b5f  butes_filter.ok_
-0003c3d0: 636c 6963 6b65 6428 290a 0a20 2020 2020  clicked()..     
-0003c3e0: 2020 2023 2052 656c 6561 7365 7320 7468     # Releases th
-0003c3f0: 6520 7072 6f63 6573 730a 2020 2020 2020  e process.      
-0003c400: 2020 6e6f 6465 5f63 7472 6c65 722e 7265    node_ctrler.re
-0003c410: 6c65 6173 655f 7072 6f63 6573 7328 290a  lease_process().
-0003c420: 2020 2020 2020 2020 6e6f 6465 5f63 7472          node_ctr
-0003c430: 6c65 722e 7570 6461 7465 5f70 6172 616d  ler.update_param
-0003c440: 6574 6572 7328 290a 0a20 2020 2064 6566  eters()..    def
-0003c450: 2074 6573 745f 6469 7370 6c61 795f 6669   test_display_fi
-0003c460: 6c74 6572 2873 656c 6629 3a0a 2020 2020  lter(self):.    
-0003c470: 2020 2020 2222 2244 6973 706c 6179 7320      """Displays 
-0003c480: 7061 7261 6d65 7465 7273 206f 6620 6120  parameters of a 
-0003c490: 6e6f 6465 2061 6e64 2064 6973 706c 6179  node and display
-0003c4a0: 7320 6120 706c 7567 2066 696c 7465 722e  s a plug filter.
-0003c4b0: 2222 220a 0a20 2020 2020 2020 2063 6f6e  """..        con
-0003c4c0: 6669 6720 3d20 436f 6e66 6967 2863 6f6e  fig = Config(con
-0003c4d0: 6669 675f 7061 7468 3d73 656c 662e 636f  fig_path=self.co
-0003c4e0: 6e66 6967 5f70 6174 6829 0a20 2020 2020  nfig_path).     
-0003c4f0: 2020 2063 6f6e 7472 6f6c 5631 5f76 6572     controlV1_ver
-0003c500: 203d 2063 6f6e 6669 672e 6973 436f 6e74   = config.isCont
-0003c510: 726f 6c56 3128 290a 0a20 2020 2020 2020  rolV1()..       
-0003c520: 2023 2053 7769 7463 6820 746f 2056 3120   # Switch to V1 
-0003c530: 6e6f 6465 2063 6f6e 7472 6f6c 6c65 7220  node controller 
-0003c540: 4755 492c 2069 6620 6e65 6365 7373 6172  GUI, if necessar
-0003c550: 790a 2020 2020 2020 2020 6966 206e 6f74  y.        if not
-0003c560: 2063 6f6e 7472 6f6c 5631 5f76 6572 3a0a   controlV1_ver:.
-0003c570: 2020 2020 2020 2020 2020 2020 636f 6e66              conf
-0003c580: 6967 2e73 6574 436f 6e74 726f 6c56 3128  ig.setControlV1(
-0003c590: 5472 7565 290a 2020 2020 2020 2020 2020  True).          
-0003c5a0: 2020 7365 6c66 2e72 6573 7461 7274 5f4d    self.restart_M
-0003c5b0: 4941 2829 0a0a 2020 2020 2020 2020 7069  IA()..        pi
-0003c5c0: 7065 6c69 6e65 5f65 6469 746f 725f 7461  peline_editor_ta
-0003c5d0: 6273 203d 2028 0a20 2020 2020 2020 2020  bs = (.         
-0003c5e0: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
-0003c5f0: 646f 772e 7069 7065 6c69 6e65 5f6d 616e  dow.pipeline_man
-0003c600: 6167 6572 2e70 6970 656c 696e 6545 6469  ager.pipelineEdi
-0003c610: 746f 7254 6162 730a 2020 2020 2020 2020  torTabs.        
-0003c620: 290a 2020 2020 2020 2020 6e6f 6465 5f63  ).        node_c
-0003c630: 6f6e 7472 6f6c 6c65 7220 3d20 7365 6c66  ontroller = self
-0003c640: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 6970  .main_window.pip
-0003c650: 656c 696e 655f 6d61 6e61 6765 722e 6e6f  eline_manager.no
-0003c660: 6465 436f 6e74 726f 6c6c 6572 0a0a 2020  deController..  
-0003c670: 2020 2020 2020 2320 4164 6469 6e67 2061        # Adding a
+0002db00: 2022 756e 6974 5f74 6573 745f 7069 7065   "unit_test_pipe
+0002db10: 6c69 6e65 2e70 7922 2c0a 2020 2020 2020  line.py",.      
+0002db20: 2020 2020 2020 2020 2020 292c 0a20 2020            ),.   
+0002db30: 2020 2020 2020 2020 2020 2020 206f 732e               os.
+0002db40: 7061 7468 2e6a 6f69 6e28 6d6f 636b 5f70  path.join(mock_p
+0002db50: 726f 635f 666c 6472 2c20 2275 6e69 745f  roc_fldr, "unit_
+0002db60: 7465 7374 5f32 2e70 7922 292c 0a20 2020  test_2.py"),.   
+0002db70: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
+0002db80: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
+0002db90: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
+0002dba0: 2020 206f 732e 7061 7468 2e6a 6f69 6e28     os.path.join(
+0002dbb0: 6d6f 636b 5f70 726f 635f 666c 6472 2c20  mock_proc_fldr, 
+0002dbc0: 2275 6e69 745f 7465 7374 5f32 2e70 7922  "unit_test_2.py"
+0002dbd0: 292c 2022 7222 0a20 2020 2020 2020 2020  ), "r".         
+0002dbe0: 2020 2029 2061 7320 6669 6c65 3a0a 2020     ) as file:.  
+0002dbf0: 2020 2020 2020 2020 2020 2020 2020 6669                fi
+0002dc00: 6c65 6461 7461 203d 2066 696c 652e 7265  ledata = file.re
+0002dc10: 6164 2829 0a20 2020 2020 2020 2020 2020  ad().           
+0002dc20: 2020 2020 2066 696c 6564 6174 6120 3d20       filedata = 
+0002dc30: 6669 6c65 6461 7461 2e72 6570 6c61 6365  filedata.replace
+0002dc40: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0002dc50: 2020 2020 2020 2255 6e69 745f 7465 7374        "Unit_test
+0002dc60: 5f70 6970 656c 696e 6522 2c20 2255 6e69  _pipeline", "Uni
+0002dc70: 745f 7465 7374 5f32 220a 2020 2020 2020  t_test_2".      
+0002dc80: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
+0002dc90: 2020 2020 2020 2020 2077 6974 6820 6f70           with op
+0002dca0: 656e 280a 2020 2020 2020 2020 2020 2020  en(.            
+0002dcb0: 2020 2020 6f73 2e70 6174 682e 6a6f 696e      os.path.join
+0002dcc0: 286d 6f63 6b5f 7072 6f63 5f66 6c64 722c  (mock_proc_fldr,
+0002dcd0: 2022 756e 6974 5f74 6573 745f 322e 7079   "unit_test_2.py
+0002dce0: 2229 2c20 2277 220a 2020 2020 2020 2020  "), "w".        
+0002dcf0: 2020 2020 2920 6173 2066 696c 653a 0a20      ) as file:. 
+0002dd00: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0002dd10: 696c 652e 7772 6974 6528 6669 6c65 6461  ile.write(fileda
+0002dd20: 7461 290a 0a20 2020 2020 2020 2020 2020  ta)..           
+0002dd30: 2069 6e69 745f 6669 6c65 203d 206f 7065   init_file = ope
+0002dd40: 6e28 6f73 2e70 6174 682e 6a6f 696e 286d  n(os.path.join(m
+0002dd50: 6f63 6b5f 7072 6f63 5f66 6c64 722c 2022  ock_proc_fldr, "
+0002dd60: 5f5f 696e 6974 5f5f 2e70 7922 292c 2022  __init__.py"), "
+0002dd70: 7722 290a 2020 2020 2020 2020 2020 2020  w").            
+0002dd80: 696e 6974 5f66 696c 652e 7772 6974 6528  init_file.write(
+0002dd90: 2266 726f 6d20 2e75 6e69 745f 7465 7374  "from .unit_test
+0002dda0: 5f32 2069 6d70 6f72 7420 2220 2255 6e69  _2 import " "Uni
+0002ddb0: 745f 7465 7374 5f32 2229 0a20 2020 2020  t_test_2").     
+0002ddc0: 2020 2020 2020 2069 6e69 745f 6669 6c65         init_file
+0002ddd0: 2e63 6c6f 7365 2829 0a0a 2020 2020 2020  .close()..      
+0002dde0: 2020 2320 496d 706f 7274 7320 7468 6520    # Imports the 
+0002ddf0: 5554 735f 7072 6f63 6573 7365 7320 7072  UTs_processes pr
+0002de00: 6f63 6573 7365 7320 666f 6c64 6572 2061  ocesses folder a
+0002de10: 7320 6120 7061 636b 6167 650a 2020 2020  s a package.    
+0002de20: 2020 2020 706b 675f 6c69 625f 7769 6e64      pkg_lib_wind
+0002de30: 6f77 2e69 6e73 7461 6c6c 5f70 726f 6365  ow.install_proce
+0002de40: 7373 6573 5f70 6f70 5f75 7028 290a 2020  sses_pop_up().  
+0002de50: 2020 2020 2020 706b 675f 6c69 625f 7769        pkg_lib_wi
+0002de60: 6e64 6f77 2e70 6f70 5f75 705f 696e 7374  ndow.pop_up_inst
+0002de70: 616c 6c5f 7072 6f63 6573 7365 732e 7061  all_processes.pa
+0002de80: 7468 5f65 6469 742e 7365 7454 6578 7428  th_edit.setText(
+0002de90: 0a20 2020 2020 2020 2020 2020 206d 6f63  .            moc
+0002dea0: 6b5f 7072 6f63 5f66 6c64 720a 2020 2020  k_proc_fldr.    
+0002deb0: 2020 2020 290a 2020 2020 2020 2020 514d      ).        QM
+0002dec0: 6573 7361 6765 426f 782e 6578 6563 203d  essageBox.exec =
+0002ded0: 206c 616d 6264 6120 783a 2051 4d65 7373   lambda x: QMess
+0002dee0: 6167 6542 6f78 2e4f 6b0a 2020 2020 2020  ageBox.Ok.      
+0002def0: 2020 280a 2020 2020 2020 2020 2020 2020    (.            
+0002df00: 706b 675f 6c69 625f 7769 6e64 6f77 2e70  pkg_lib_window.p
+0002df10: 6f70 5f75 705f 696e 7374 616c 6c5f 7072  op_up_install_pr
+0002df20: 6f63 6573 7365 732e 6c61 796f 7574 2829  ocesses.layout()
+0002df30: 0a20 2020 2020 2020 2020 2020 202e 6368  .            .ch
+0002df40: 696c 6472 656e 2829 5b2d 315d 0a20 2020  ildren()[-1].   
+0002df50: 2020 2020 2020 2020 202e 6974 656d 4174           .itemAt
+0002df60: 2830 290a 2020 2020 2020 2020 2020 2020  (0).            
+0002df70: 2e77 6964 6765 7428 290a 2020 2020 2020  .widget().      
+0002df80: 2020 2020 2020 2e63 6c69 636b 6564 2e65        .clicked.e
+0002df90: 6d69 7428 290a 2020 2020 2020 2020 290a  mit().        ).
+0002dfa0: 2020 2020 2020 2020 706b 675f 6c69 625f          pkg_lib_
+0002dfb0: 7769 6e64 6f77 2e70 6f70 5f75 705f 696e  window.pop_up_in
+0002dfc0: 7374 616c 6c5f 7072 6f63 6573 7365 732e  stall_processes.
+0002dfd0: 636c 6f73 6528 290a 2020 2020 2020 2020  close().        
+0002dfe0: 706b 675f 6c69 625f 7769 6e64 6f77 2e6f  pkg_lib_window.o
+0002dff0: 6b5f 636c 6963 6b65 6428 290a 0a20 2020  k_clicked()..   
+0002e000: 2020 2020 2023 2047 6574 7320 7468 6520       # Gets the 
+0002e010: 2755 6e69 745f 7465 7374 5f32 2720 696e  'Unit_test_2' in
+0002e020: 6465 7820 616e 6420 7365 6c65 6374 7320  dex and selects 
+0002e030: 6974 0a20 2020 2020 2020 2074 6573 745f  it.        test_
+0002e040: 7070 6c5f 696e 6465 7820 3d20 7365 6c66  ppl_index = self
+0002e050: 2e66 696e 645f 6974 656d 5f62 795f 6461  .find_item_by_da
+0002e060: 7461 2870 726f 635f 6c69 625f 7669 6577  ta(proc_lib_view
+0002e070: 2c20 2255 6e69 745f 7465 7374 5f32 2229  , "Unit_test_2")
+0002e080: 0a20 2020 2020 2020 2028 0a20 2020 2020  .        (.     
+0002e090: 2020 2020 2020 2070 726f 635f 6c69 625f         proc_lib_
+0002e0a0: 7669 6577 2e73 656c 6563 7469 6f6e 4d6f  view.selectionMo
+0002e0b0: 6465 6c28 292e 7365 6c65 6374 280a 2020  del().select(.  
+0002e0c0: 2020 2020 2020 2020 2020 2020 2020 7465                te
+0002e0d0: 7374 5f70 706c 5f69 6e64 6578 2c20 5149  st_ppl_index, QI
+0002e0e0: 7465 6d53 656c 6563 7469 6f6e 4d6f 6465  temSelectionMode
+0002e0f0: 6c2e 5365 6c65 6374 4375 7272 656e 740a  l.SelectCurrent.
+0002e100: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0002e110: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+0002e120: 2023 2054 7269 6573 2074 6f20 6465 6c65   # Tries to dele
+0002e130: 7465 2074 6865 2070 6163 6b61 6765 2027  te the package '
+0002e140: 556e 6974 5f74 6573 745f 3227 2c20 7265  Unit_test_2', re
+0002e150: 6a65 6374 7320 7468 650a 2020 2020 2020  jects the.      
+0002e160: 2020 2320 6469 616c 6f67 2062 6f78 0a20    # dialog box. 
+0002e170: 2020 2020 2020 2051 4d65 7373 6167 6542         QMessageB
+0002e180: 6f78 2e71 7565 7374 696f 6e20 3d20 4d6f  ox.question = Mo
+0002e190: 636b 2872 6574 7572 6e5f 7661 6c75 653d  ck(return_value=
+0002e1a0: 514d 6573 7361 6765 426f 782e 4e6f 290a  QMessageBox.No).
+0002e1b0: 2020 2020 2020 2020 7072 6f63 5f6c 6962          proc_lib
+0002e1c0: 5f76 6965 772e 6b65 7950 7265 7373 4576  _view.keyPressEv
+0002e1d0: 656e 7428 6576 656e 7429 0a0a 2020 2020  ent(event)..    
+0002e1e0: 2020 2020 2320 4566 6665 6374 6976 656c      # Effectivel
+0002e1f0: 7920 6465 6c65 7465 7320 7468 6520 7061  y deletes the pa
+0002e200: 636b 6167 6520 2755 6e69 745f 7465 7374  ckage 'Unit_test
+0002e210: 5f32 272c 2061 6363 6570 7469 6e67 2074  _2', accepting t
+0002e220: 6865 0a20 2020 2020 2020 2023 2064 6961  he.        # dia
+0002e230: 6c6f 6720 626f 780a 2020 2020 2020 2020  log box.        
+0002e240: 514d 6573 7361 6765 426f 782e 7175 6573  QMessageBox.ques
+0002e250: 7469 6f6e 203d 204d 6f63 6b28 7265 7475  tion = Mock(retu
+0002e260: 726e 5f76 616c 7565 3d51 4d65 7373 6167  rn_value=QMessag
+0002e270: 6542 6f78 2e59 6573 290a 2020 2020 2020  eBox.Yes).      
+0002e280: 2020 7072 6f63 5f6c 6962 5f76 6965 772e    proc_lib_view.
+0002e290: 6b65 7950 7265 7373 4576 656e 7428 6576  keyPressEvent(ev
+0002e2a0: 656e 7429 0a0a 2020 2020 2020 2020 2320  ent)..        # 
+0002e2b0: 5265 7365 7473 2074 6865 2070 726f 6365  Resets the proce
+0002e2c0: 7373 206c 6962 7261 7279 2074 6f20 6974  ss library to it
+0002e2d0: 7320 6f72 6967 696e 616c 2073 7461 7465  s original state
+0002e2e0: 2066 6f72 206e 6970 7970 650a 2020 2020   for nipype.    
+0002e2f0: 2020 2020 6375 725f 7374 6174 6520 3d20      cur_state = 
+0002e300: 7365 6c66 2e70 726f 636c 6962 7669 6577  self.proclibview
+0002e310: 5f6e 6970 7970 655f 7374 6174 6528 7072  _nipype_state(pr
+0002e320: 6f63 5f6c 6962 5f76 6965 7729 0a0a 2020  oc_lib_view)..  
+0002e330: 2020 2020 2020 6966 2063 7572 5f73 7461        if cur_sta
+0002e340: 7465 2021 3d20 696e 6974 5f73 7461 7465  te != init_state
+0002e350: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
+0002e360: 6c66 2e70 726f 636c 6962 7669 6577 5f6e  lf.proclibview_n
+0002e370: 6970 7970 655f 7265 7365 745f 7374 6174  ipype_reset_stat
+0002e380: 6528 0a20 2020 2020 2020 2020 2020 2020  e(.             
+0002e390: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
+0002e3a0: 646f 772c 2070 706c 5f6d 616e 6167 6572  dow, ppl_manager
+0002e3b0: 2c20 696e 6974 5f73 7461 7465 0a20 2020  , init_state.   
+0002e3c0: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
+0002e3d0: 2020 2020 2320 436c 6561 6e69 6e67 2074      # Cleaning t
+0002e3e0: 6865 2070 726f 6365 7373 206c 6962 7261  he process libra
+0002e3f0: 7279 2069 6e20 7069 7065 6c69 6e65 206d  ry in pipeline m
+0002e400: 616e 6167 6572 2074 6162 2028 6465 6c65  anager tab (dele
+0002e410: 7469 6e67 2074 6865 0a20 2020 2020 2020  ting the.       
+0002e420: 2023 2070 6163 6b61 6765 2061 6464 6564   # package added
+0002e430: 2069 6e20 7468 6973 2074 6573 742c 206f   in this test, o
+0002e440: 7220 6f6c 6420 6f6e 6520 7374 696c 6c20  r old one still 
+0002e450: 6578 6973 7469 6e67 290a 2020 2020 2020  existing).      
+0002e460: 2020 7365 6c66 2e63 6c65 616e 5f75 7473    self.clean_uts
+0002e470: 5f70 6163 6b61 6765 7328 7072 6f63 5f6c  _packages(proc_l
+0002e480: 6962 5f76 6965 7729 0a0a 2020 2020 6465  ib_view)..    de
+0002e490: 6620 7465 7374 5f70 6163 6b61 6765 5f6c  f test_package_l
+0002e4a0: 6962 7261 7279 5f64 6961 6c6f 675f 726d  ibrary_dialog_rm
+0002e4b0: 765f 706b 6728 7365 6c66 293a 0a20 2020  v_pkg(self):.   
+0002e4c0: 2020 2020 2022 2222 4372 6561 7465 7320       """Creates 
+0002e4d0: 6120 6e65 7720 7072 6f6a 6563 7420 666f  a new project fo
+0002e4e0: 6c64 6572 2c20 6f70 656e 7320 7468 6520  lder, opens the 
+0002e4f0: 7072 6f63 6573 7365 7320 6c69 6272 6172  processes librar
+0002e500: 7920 616e 640a 2020 2020 2020 2020 7265  y and.        re
+0002e510: 6d6f 7665 7320 6120 7061 636b 6167 652e  moves a package.
+0002e520: 2041 6c73 6f20 7361 7665 7320 7468 6520   Also saves the 
+0002e530: 6375 7272 656e 7420 636f 6e66 6967 7572  current configur
+0002e540: 6174 696f 6e2e 0a0a 2020 2020 2020 2020  ation...        
+0002e550: 2d20 5465 7374 733a 2050 6163 6b61 6765  - Tests: Package
+0002e560: 4c69 6272 6172 7944 6961 6c6f 670a 0a20  LibraryDialog.. 
+0002e570: 2020 2020 2020 202d 204d 6f63 6b73 3a0a         - Mocks:.
+0002e580: 2020 2020 2020 2020 2020 2020 2d20 514d              - QM
+0002e590: 6573 7361 6765 426f 782e 6578 6563 0a20  essageBox.exec. 
+0002e5a0: 2020 2020 2020 2020 2020 202d 2051 4d65             - QMe
+0002e5b0: 7373 6167 6542 6f78 2e65 7865 635f 0a20  ssageBox.exec_. 
+0002e5c0: 2020 2020 2020 2022 2222 0a0a 2020 2020         """..    
+0002e5d0: 2020 2020 504b 4720 3d20 226e 6970 7970      PKG = "nipyp
+0002e5e0: 652e 696e 7465 7266 6163 6573 2e44 6174  e.interfaces.Dat
+0002e5f0: 6147 7261 6262 6572 220a 0a20 2020 2020  aGrabber"..     
+0002e600: 2020 2023 2043 7265 6174 6573 2061 206e     # Creates a n
+0002e610: 6577 2070 726f 6a65 6374 2066 6f6c 6465  ew project folde
+0002e620: 7220 616e 6420 7377 6974 6368 6573 2074  r and switches t
+0002e630: 6f20 6974 0a20 2020 2020 2020 206e 6577  o it.        new
+0002e640: 5f70 726f 6a5f 7061 7468 203d 2073 656c  _proj_path = sel
+0002e650: 662e 6765 745f 6e65 775f 7465 7374 5f70  f.get_new_test_p
+0002e660: 726f 6a65 6374 286c 6967 6874 3d54 7275  roject(light=Tru
+0002e670: 6529 0a20 2020 2020 2020 2073 656c 662e  e).        self.
+0002e680: 6d61 696e 5f77 696e 646f 772e 7377 6974  main_window.swit
+0002e690: 6368 5f70 726f 6a65 6374 286e 6577 5f70  ch_project(new_p
+0002e6a0: 726f 6a5f 7061 7468 2c20 2274 6573 745f  roj_path, "test_
+0002e6b0: 6c69 6768 745f 7072 6f6a 6563 7422 290a  light_project").
+0002e6c0: 0a20 2020 2020 2020 2023 2053 6574 7320  .        # Sets 
+0002e6d0: 7368 6f72 7463 7574 7320 666f 7220 6f62  shortcuts for ob
+0002e6e0: 6a65 6374 7320 7468 6174 2061 7265 206f  jects that are o
+0002e6f0: 6674 656e 2075 7365 640a 2020 2020 2020  ften used.      
+0002e700: 2020 7070 6c5f 6d61 6e61 6765 7220 3d20    ppl_manager = 
+0002e710: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+0002e720: 2e70 6970 656c 696e 655f 6d61 6e61 6765  .pipeline_manage
+0002e730: 720a 2020 2020 2020 2020 7072 6f63 5f6c  r.        proc_l
+0002e740: 6962 5f76 6965 7720 3d20 7070 6c5f 6d61  ib_view = ppl_ma
+0002e750: 6e61 6765 722e 7072 6f63 6573 734c 6962  nager.processLib
+0002e760: 7261 7279 2e70 726f 6365 7373 5f6c 6962  rary.process_lib
+0002e770: 7261 7279 0a0a 2020 2020 2020 2020 2320  rary..        # 
+0002e780: 5461 6b65 7320 7468 6520 696e 6974 6961  Takes the initia
+0002e790: 6c20 7374 6174 6520 6f66 206e 6970 7970  l state of nipyp
+0002e7a0: 6520 7072 6f63 5f6c 6962 5f76 6965 7720  e proc_lib_view 
+0002e7b0: 616e 6420 6d61 6b65 7320 7375 7265 2074  and makes sure t
+0002e7c0: 6861 740a 2020 2020 2020 2020 2320 504b  hat.        # PK
+0002e7d0: 4720 6973 2061 6c72 6561 6479 2069 6e73  G is already ins
+0002e7e0: 7461 6c6c 6564 0a20 2020 2020 2020 2069  talled.        i
+0002e7f0: 6e69 745f 7374 6174 6520 3d20 7365 6c66  nit_state = self
+0002e800: 2e70 726f 636c 6962 7669 6577 5f6e 6970  .proclibview_nip
+0002e810: 7970 655f 7374 6174 6528 7072 6f63 5f6c  ype_state(proc_l
+0002e820: 6962 5f76 6965 7729 0a0a 2020 2020 2020  ib_view)..      
+0002e830: 2020 6966 2069 6e69 745f 7374 6174 6520    if init_state 
+0002e840: 213d 2022 7072 6f63 6573 735f 656e 6162  != "process_enab
+0002e850: 6c65 6422 3a0a 2020 2020 2020 2020 2020  led":.          
+0002e860: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
+0002e870: 6f77 2e70 6163 6b61 6765 5f6c 6962 7261  ow.package_libra
+0002e880: 7279 5f70 6f70 5f75 7028 290a 2020 2020  ry_pop_up().    
+0002e890: 2020 2020 2020 2020 706b 675f 6c69 625f          pkg_lib_
+0002e8a0: 7769 6e64 6f77 203d 2073 656c 662e 6d61  window = self.ma
+0002e8b0: 696e 5f77 696e 646f 772e 706f 705f 7570  in_window.pop_up
+0002e8c0: 5f70 6163 6b61 6765 5f6c 6962 7261 7279  _package_library
+0002e8d0: 0a20 2020 2020 2020 2020 2020 2070 6b67  .            pkg
+0002e8e0: 5f6c 6962 5f77 696e 646f 772e 6c69 6e65  _lib_window.line
+0002e8f0: 5f65 6469 742e 7365 7454 6578 7428 504b  _edit.setText(PK
+0002e900: 4729 0a20 2020 2020 2020 2020 2020 2028  G).            (
+0002e910: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002e920: 2070 706c 5f6d 616e 6167 6572 2e70 726f   ppl_manager.pro
+0002e930: 6365 7373 4c69 6272 6172 792e 7072 6f63  cessLibrary.proc
+0002e940: 6573 735f 6c69 6272 6172 792e 706b 675f  ess_library.pkg_
+0002e950: 6c69 6272 6172 792e 6973 5f70 6174 680a  library.is_path.
+0002e960: 2020 2020 2020 2020 2020 2020 2920 3d20              ) = 
+0002e970: 4661 6c73 650a 2020 2020 2020 2020 2020  False.          
+0002e980: 2020 2320 436c 6963 6b73 206f 6e20 6164    # Clicks on ad
+0002e990: 6420 7061 636b 6167 650a 2020 2020 2020  d package.      
+0002e9a0: 2020 2020 2020 706b 675f 6c69 625f 7769        pkg_lib_wi
+0002e9b0: 6e64 6f77 2e6c 6179 6f75 7428 292e 6368  ndow.layout().ch
+0002e9c0: 696c 6472 656e 2829 5b30 5d2e 6c61 796f  ildren()[0].layo
+0002e9d0: 7574 2829 2e63 6869 6c64 7265 6e28 295b  ut().children()[
+0002e9e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0002e9f0: 2033 0a20 2020 2020 2020 2020 2020 205d   3.            ]
+0002ea00: 2e69 7465 6d41 7428 3029 2e77 6964 6765  .itemAt(0).widge
+0002ea10: 7428 292e 636c 6963 6b65 642e 656d 6974  t().clicked.emit
+0002ea20: 2829 0a20 2020 2020 2020 2020 2020 2070  ().            p
+0002ea30: 6b67 5f6c 6962 5f77 696e 646f 772e 6f6b  kg_lib_window.ok
+0002ea40: 5f63 6c69 636b 6564 2829 0a0a 2020 2020  _clicked()..    
+0002ea50: 2020 2020 2320 4f70 656e 7320 7468 6520      # Opens the 
+0002ea60: 7061 636b 6167 6520 6c69 6272 6172 7920  package library 
+0002ea70: 706f 702d 7570 0a20 2020 2020 2020 2073  pop-up.        s
+0002ea80: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+0002ea90: 7061 636b 6167 655f 6c69 6272 6172 795f  package_library_
+0002eaa0: 706f 705f 7570 2829 0a20 2020 2020 2020  pop_up().       
+0002eab0: 2070 6b67 5f6c 6962 5f77 696e 646f 7720   pkg_lib_window 
+0002eac0: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
+0002ead0: 6f77 2e70 6f70 5f75 705f 7061 636b 6167  ow.pop_up_packag
+0002eae0: 655f 6c69 6272 6172 790a 0a20 2020 2020  e_library..     
+0002eaf0: 2020 2023 204d 6f63 6b73 2074 6865 2065     # Mocks the e
+0002eb00: 7865 6375 7469 6f6e 206f 6620 6120 6469  xecution of a di
+0002eb10: 616c 6f67 2062 6f78 0a20 2020 2020 2020  alog box.       
+0002eb20: 2051 4d65 7373 6167 6542 6f78 2e65 7865   QMessageBox.exe
+0002eb30: 6320 3d20 6c61 6d62 6461 2078 3a20 4e6f  c = lambda x: No
+0002eb40: 6e65 0a20 2020 2020 2020 2051 4d65 7373  ne.        QMess
+0002eb50: 6167 6542 6f78 2e65 7865 635f 203d 206c  ageBox.exec_ = l
+0002eb60: 616d 6264 6120 783a 204e 6f6e 650a 0a20  ambda x: None.. 
+0002eb70: 2020 2020 2020 2023 204d 6f63 6b73 2064         # Mocks d
+0002eb80: 656c 6574 696e 6720 6120 7061 636b 6167  eleting a packag
+0002eb90: 6520 7468 6174 2069 7320 6e6f 7420 7370  e that is not sp
+0002eba0: 6563 6966 6965 640a 2020 2020 2020 2020  ecified.        
+0002ebb0: 7265 7320 3d20 706b 675f 6c69 625f 7769  res = pkg_lib_wi
+0002ebc0: 6e64 6f77 2e72 656d 6f76 655f 7061 636b  ndow.remove_pack
+0002ebd0: 6167 6528 2222 290a 2020 2020 2020 2020  age("").        
+0002ebe0: 7365 6c66 2e61 7373 6572 7446 616c 7365  self.assertFalse
+0002ebf0: 2872 6573 290a 0a20 2020 2020 2020 2023  (res)..        #
+0002ec00: 2054 7269 6573 2072 656d 6f76 696e 6720   Tries removing 
+0002ec10: 6120 6e6f 6e2d 6578 6973 7465 6e74 2070  a non-existent p
+0002ec20: 6163 6b61 6765 0a20 2020 2020 2020 2072  ackage.        r
+0002ec30: 6573 203d 2070 6b67 5f6c 6962 5f77 696e  es = pkg_lib_win
+0002ec40: 646f 772e 7265 6d6f 7665 5f70 6163 6b61  dow.remove_packa
+0002ec50: 6765 2822 6e6f 6e5f 6578 6973 7465 6e74  ge("non_existent
+0002ec60: 5f70 6163 6b61 6765 2229 0a20 2020 2020  _package").     
+0002ec70: 2020 2073 656c 662e 6173 7365 7274 4973     self.assertIs
+0002ec80: 4e6f 6e65 2872 6573 290a 0a20 2020 2020  None(res)..     
+0002ec90: 2020 2023 2043 6c69 636b 7320 6f6e 2074     # Clicks on t
+0002eca0: 6865 2072 656d 6f76 6520 7061 636b 6167  he remove packag
+0002ecb0: 6520 6275 7474 6f6e 2077 6974 686f 7574  e button without
+0002ecc0: 2073 656c 6563 7469 6e67 2070 6163 6b61   selecting packa
+0002ecd0: 6765 0a20 2020 2020 2020 2072 6d76 5f70  ge.        rmv_p
+0002ece0: 6b67 5f62 7574 746f 6e20 3d20 280a 2020  kg_button = (.  
+0002ecf0: 2020 2020 2020 2020 2020 706b 675f 6c69            pkg_li
+0002ed00: 625f 7769 6e64 6f77 2e6c 6179 6f75 7428  b_window.layout(
+0002ed10: 290a 2020 2020 2020 2020 2020 2020 2e63  ).            .c
+0002ed20: 6869 6c64 7265 6e28 295b 305d 0a20 2020  hildren()[0].   
+0002ed30: 2020 2020 2020 2020 202e 6c61 796f 7574           .layout
+0002ed40: 2829 0a20 2020 2020 2020 2020 2020 202e  ().            .
+0002ed50: 6368 696c 6472 656e 2829 5b33 5d0a 2020  children()[3].  
+0002ed60: 2020 2020 2020 2020 2020 2e69 7465 6d41            .itemA
+0002ed70: 7428 3129 0a20 2020 2020 2020 2020 2020  t(1).           
+0002ed80: 202e 7769 6467 6574 2829 0a20 2020 2020   .widget().     
+0002ed90: 2020 2029 0a20 2020 2020 2020 2072 6d76     ).        rmv
+0002eda0: 5f70 6b67 5f62 7574 746f 6e2e 636c 6963  _pkg_button.clic
+0002edb0: 6b65 642e 656d 6974 2829 0a0a 2020 2020  ked.emit()..    
+0002edc0: 2020 2020 2320 5772 6974 6573 2074 6865      # Writes the
+0002edd0: 206e 616d 6520 6f66 2061 6e20 6578 6973   name of an exis
+0002ede0: 7469 6e67 2070 6163 6b61 6765 206f 6e20  ting package on 
+0002edf0: 7468 6520 6c69 6e65 2065 6469 7420 616e  the line edit an
+0002ee00: 6420 636c 6963 6b73 206f 6e0a 2020 2020  d clicks on.    
+0002ee10: 2020 2020 2320 7468 6520 7265 6d6f 7665      # the remove
+0002ee20: 2070 6163 6b61 6765 2062 7574 746f 6e0a   package button.
+0002ee30: 2020 2020 2020 2020 706b 675f 6c69 625f          pkg_lib_
+0002ee40: 7769 6e64 6f77 2e6c 696e 655f 6564 6974  window.line_edit
+0002ee50: 2e73 6574 5465 7874 2850 4b47 290a 2020  .setText(PKG).  
+0002ee60: 2020 2020 2020 726d 765f 706b 675f 6275        rmv_pkg_bu
+0002ee70: 7474 6f6e 2e63 6c69 636b 6564 2e65 6d69  tton.clicked.emi
+0002ee80: 7428 290a 0a20 2020 2020 2020 2023 2052  t()..        # R
+0002ee90: 6573 6574 7320 7468 6520 7072 6576 696f  esets the previo
+0002eea0: 7573 2061 6374 696f 6e0a 2020 2020 2020  us action.      
+0002eeb0: 2020 706b 675f 6c69 625f 7769 6e64 6f77    pkg_lib_window
+0002eec0: 2e72 656d 6f76 655f 6c69 7374 2e73 656c  .remove_list.sel
+0002eed0: 6563 7441 6c6c 2829 0a20 2020 2020 2020  ectAll().       
+0002eee0: 2028 0a20 2020 2020 2020 2020 2020 2070   (.            p
+0002eef0: 6b67 5f6c 6962 5f77 696e 646f 772e 6c61  kg_lib_window.la
+0002ef00: 796f 7574 2829 0a20 2020 2020 2020 2020  yout().         
+0002ef10: 2020 202e 6368 696c 6472 656e 2829 5b30     .children()[0
+0002ef20: 5d0a 2020 2020 2020 2020 2020 2020 2e6c  ].            .l
+0002ef30: 6179 6f75 7428 290a 2020 2020 2020 2020  ayout().        
+0002ef40: 2020 2020 2e69 7465 6d41 7428 3130 290a      .itemAt(10).
+0002ef50: 2020 2020 2020 2020 2020 2020 2e77 6964              .wid
+0002ef60: 6765 7428 290a 2020 2020 2020 2020 2020  get().          
+0002ef70: 2020 2e6c 6179 6f75 7428 290a 2020 2020    .layout().    
+0002ef80: 2020 2020 2020 2020 2e69 7465 6d41 7428          .itemAt(
+0002ef90: 3129 0a20 2020 2020 2020 2020 2020 202e  1).            .
+0002efa0: 7769 6467 6574 2829 0a20 2020 2020 2020  widget().       
+0002efb0: 2020 2020 202e 636c 6963 6b65 642e 656d       .clicked.em
+0002efc0: 6974 2829 0a20 2020 2020 2020 2029 0a0a  it().        )..
+0002efd0: 2020 2020 2020 2020 2320 436c 6963 6b20          # Click 
+0002efe0: 6167 6169 6e20 6f6e 2074 6865 2072 656d  again on the rem
+0002eff0: 6f76 6520 7061 636b 6167 6520 6275 7474  ove package butt
+0002f000: 6f6e 0a20 2020 2020 2020 2072 6d76 5f70  on.        rmv_p
+0002f010: 6b67 5f62 7574 746f 6e2e 636c 6963 6b65  kg_button.clicke
+0002f020: 642e 656d 6974 2829 0a0a 2020 2020 2020  d.emit()..      
+0002f030: 2020 2320 4170 706c 7920 6368 616e 6765    # Apply change
+0002f040: 730a 2020 2020 2020 2020 706b 675f 6c69  s.        pkg_li
+0002f050: 625f 7769 6e64 6f77 2e6f 6b5f 636c 6963  b_window.ok_clic
+0002f060: 6b65 6428 290a 0a20 2020 2020 2020 2023  ked()..        #
+0002f070: 204d 6f63 6b73 2072 656d 6f76 696e 6720   Mocks removing 
+0002f080: 6120 7061 636b 6167 6520 7769 7468 2074  a package with t
+0002f090: 6578 7420 616e 6420 6672 6f6d 2074 6865  ext and from the
+0002f0a0: 2074 7265 650a 2020 2020 2020 2020 706b   tree.        pk
+0002f0b0: 675f 6c69 625f 7769 6e64 6f77 2e72 656d  g_lib_window.rem
+0002f0c0: 6f76 655f 6469 635b 504b 475d 203d 2031  ove_dic[PKG] = 1
+0002f0d0: 0a20 2020 2020 2020 2070 6b67 5f6c 6962  .        pkg_lib
+0002f0e0: 5f77 696e 646f 772e 6164 645f 6469 635b  _window.add_dic[
+0002f0f0: 504b 475d 203d 2031 0a20 2020 2020 2020  PKG] = 1.       
+0002f100: 2070 6b67 5f6c 6962 5f77 696e 646f 772e   pkg_lib_window.
+0002f110: 6465 6c65 7465 5f64 6963 5b50 4b47 5d20  delete_dic[PKG] 
+0002f120: 3d20 310a 2020 2020 2020 2020 706b 675f  = 1.        pkg_
+0002f130: 6c69 625f 7769 6e64 6f77 2e72 656d 6f76  lib_window.remov
+0002f140: 655f 7061 636b 6167 655f 7769 7468 5f74  e_package_with_t
+0002f150: 6578 7428 5f32 7265 6d3d 504b 472c 2074  ext(_2rem=PKG, t
+0002f160: 7265 655f 7265 6d6f 7665 3d46 616c 7365  ree_remove=False
+0002f170: 290a 0a20 2020 2020 2020 2023 2052 6573  )..        # Res
+0002f180: 6574 7320 7468 6520 7072 6f63 6573 7320  ets the process 
+0002f190: 6c69 6272 6172 7920 746f 2069 7473 206f  library to its o
+0002f1a0: 7269 6769 6e61 6c20 7374 6174 6520 666f  riginal state fo
+0002f1b0: 7220 6e69 7079 7065 0a20 2020 2020 2020  r nipype.       
+0002f1c0: 2063 7572 5f73 7461 7465 203d 2073 656c   cur_state = sel
+0002f1d0: 662e 7072 6f63 6c69 6276 6965 775f 6e69  f.proclibview_ni
+0002f1e0: 7079 7065 5f73 7461 7465 2870 726f 635f  pype_state(proc_
+0002f1f0: 6c69 625f 7669 6577 290a 0a20 2020 2020  lib_view)..     
+0002f200: 2020 2069 6620 6375 725f 7374 6174 6520     if cur_state 
+0002f210: 213d 2069 6e69 745f 7374 6174 653a 0a20  != init_state:. 
+0002f220: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0002f230: 7072 6f63 6c69 6276 6965 775f 6e69 7079  proclibview_nipy
+0002f240: 7065 5f72 6573 6574 5f73 7461 7465 280a  pe_reset_state(.
+0002f250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0002f260: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+0002f270: 2c20 7070 6c5f 6d61 6e61 6765 722c 2069  , ppl_manager, i
+0002f280: 6e69 745f 7374 6174 650a 2020 2020 2020  nit_state.      
+0002f290: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+0002f2a0: 2023 2053 6176 6573 2074 6865 2063 6f6e   # Saves the con
+0002f2b0: 6669 6720 746f 2027 7072 6f63 6573 735f  fig to 'process_
+0002f2c0: 636f 6e66 6967 2e79 6d6c 270a 2020 2020  config.yml'.    
+0002f2d0: 2020 2020 7070 6c5f 6d61 6e61 6765 722e      ppl_manager.
+0002f2e0: 7072 6f63 6573 734c 6962 7261 7279 2e73  processLibrary.s
+0002f2f0: 6176 655f 636f 6e66 6967 2829 0a0a 2020  ave_config()..  
+0002f300: 2020 6465 6620 7465 7374 5f70 6163 6b61    def test_packa
+0002f310: 6765 5f6c 6962 7261 7279 5f6f 7468 6572  ge_library_other
+0002f320: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
+0002f330: 2022 2222 4372 6561 7465 7320 6120 6e65   """Creates a ne
+0002f340: 7720 7072 6f6a 6563 7420 666f 6c64 6572  w project folder
+0002f350: 2c20 6f70 656e 7320 7468 6520 7072 6f63  , opens the proc
+0002f360: 6573 7365 7320 6c69 6272 6172 7920 616e  esses library an
+0002f370: 640a 2020 2020 2020 2020 6164 6473 2061  d.        adds a
+0002f380: 2070 6163 6b61 6765 2e0a 0a20 2020 2020   package...     
+0002f390: 2020 2054 6865 2070 6163 6b61 6765 206c     The package l
+0002f3a0: 6962 7261 7279 206f 626a 6563 7420 6f70  ibrary object op
+0002f3b0: 656e 7320 7570 2061 7320 6120 706f 702d  ens up as a pop-
+0002f3c0: 7570 2077 6865 6e0a 2020 2020 2020 2020  up when.        
+0002f3d0: 4669 6c65 203e 2050 6163 6b61 6765 206c  File > Package l
+0002f3e0: 6962 7261 7279 206d 616e 6167 6572 2069  ibrary manager i
+0002f3f0: 7320 636c 6963 6b65 642e 0a0a 2020 2020  s clicked...    
+0002f400: 2020 2020 2d20 5465 7374 733a 2050 6163      - Tests: Pac
+0002f410: 6b61 6765 4c69 6272 6172 7944 6961 6c6f  kageLibraryDialo
+0002f420: 670a 0a20 2020 2020 2020 202d 204d 6f63  g..        - Moc
+0002f430: 6b73 3a0a 2020 2020 2020 2020 2020 2020  ks:.            
+0002f440: 2d20 514d 6573 7361 6765 426f 782e 6578  - QMessageBox.ex
+0002f450: 6563 0a20 2020 2020 2020 2020 2020 202d  ec.            -
+0002f460: 2051 4d65 7373 6167 6542 6f78 2e65 7865   QMessageBox.exe
+0002f470: 635f 0a20 2020 2020 2020 2022 2222 0a0a  c_.        """..
+0002f480: 2020 2020 2020 2020 2320 4372 6561 7465          # Create
+0002f490: 7320 6120 6e65 7720 7072 6f6a 6563 7420  s a new project 
+0002f4a0: 666f 6c64 6572 2061 6e64 2073 7769 7463  folder and switc
+0002f4b0: 6865 7320 746f 2069 740a 2020 2020 2020  hes to it.      
+0002f4c0: 2020 6e65 775f 7072 6f6a 5f70 6174 6820    new_proj_path 
+0002f4d0: 3d20 7365 6c66 2e67 6574 5f6e 6577 5f74  = self.get_new_t
+0002f4e0: 6573 745f 7072 6f6a 6563 7428 6c69 6768  est_project(ligh
+0002f4f0: 743d 5472 7565 290a 2020 2020 2020 2020  t=True).        
+0002f500: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+0002f510: 2e73 7769 7463 685f 7072 6f6a 6563 7428  .switch_project(
+0002f520: 6e65 775f 7072 6f6a 5f70 6174 682c 2022  new_proj_path, "
+0002f530: 7465 7374 5f6c 6967 6874 5f70 726f 6a65  test_light_proje
+0002f540: 6374 2229 0a0a 2020 2020 2020 2020 2320  ct")..        # 
+0002f550: 4f70 656e 7320 7468 6520 7061 636b 6167  Opens the packag
+0002f560: 6520 6c69 6272 6172 7920 706f 702d 7570  e library pop-up
+0002f570: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+0002f580: 696e 5f77 696e 646f 772e 7061 636b 6167  in_window.packag
+0002f590: 655f 6c69 6272 6172 795f 706f 705f 7570  e_library_pop_up
+0002f5a0: 2829 0a0a 2020 2020 2020 2020 2320 5365  ()..        # Se
+0002f5b0: 7473 2073 686f 7274 6375 7473 2066 6f72  ts shortcuts for
+0002f5c0: 206f 626a 6563 7473 2074 6861 7420 6172   objects that ar
+0002f5d0: 6520 6f66 7465 6e20 7573 6564 0a20 2020  e often used.   
+0002f5e0: 2020 2020 2070 706c 5f6d 616e 6167 6572       ppl_manager
+0002f5f0: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
+0002f600: 646f 772e 7069 7065 6c69 6e65 5f6d 616e  dow.pipeline_man
+0002f610: 6167 6572 0a20 2020 2020 2020 2070 6b67  ager.        pkg
+0002f620: 5f6c 6962 203d 2070 706c 5f6d 616e 6167  _lib = ppl_manag
+0002f630: 6572 2e70 726f 6365 7373 4c69 6272 6172  er.processLibrar
+0002f640: 792e 706b 675f 6c69 6272 6172 792e 7061  y.pkg_library.pa
+0002f650: 636b 6167 655f 6c69 6272 6172 790a 2020  ckage_library.  
+0002f660: 2020 2020 2020 706b 675f 6c69 625f 7769        pkg_lib_wi
+0002f670: 6e64 6f77 203d 2073 656c 662e 6d61 696e  ndow = self.main
+0002f680: 5f77 696e 646f 772e 706f 705f 7570 5f70  _window.pop_up_p
+0002f690: 6163 6b61 6765 5f6c 6962 7261 7279 0a0a  ackage_library..
+0002f6a0: 2020 2020 2020 2020 2320 4d6f 636b 7320          # Mocks 
+0002f6b0: 7468 6520 7061 636b 6167 6520 7472 6565  the package tree
+0002f6c0: 0a20 2020 2020 2020 206d 6f63 6b5f 706b  .        mock_pk
+0002f6d0: 675f 7472 6565 203d 205b 0a20 2020 2020  g_tree = [.     
+0002f6e0: 2020 2020 2020 207b 2244 6f75 626c 655f         {"Double_
+0002f6f0: 7265 6e61 6d65 223a 2022 7072 6f63 6573  rename": "proces
+0002f700: 735f 656e 6162 6c65 6422 7d2c 0a20 2020  s_enabled"},.   
+0002f710: 2020 2020 2020 2020 205b 7b22 446f 7562           [{"Doub
+0002f720: 6c65 5f72 656e 616d 6522 3a20 2270 726f  le_rename": "pro
+0002f730: 6365 7373 5f65 6e61 626c 6564 227d 5d2c  cess_enabled"}],
+0002f740: 0a20 2020 2020 2020 2020 2020 2028 7b22  .            ({"
+0002f750: 446f 7562 6c65 5f72 656e 616d 6522 3a20  Double_rename": 
+0002f760: 2270 726f 6365 7373 5f65 6e61 626c 6564  "process_enabled
+0002f770: 227d 292c 0a20 2020 2020 2020 205d 0a0a  "}),.        ]..
+0002f780: 2020 2020 2020 2020 2320 4d6f 636b 7320          # Mocks 
+0002f790: 6669 6c6c 696e 6720 616e 2069 7465 6d20  filling an item 
+0002f7a0: 7769 7468 2074 6865 2061 626f 7665 2069  with the above i
+0002f7b0: 7465 6d0a 2020 2020 2020 2020 706b 675f  tem.        pkg_
+0002f7c0: 6c69 622e 6669 6c6c 5f69 7465 6d28 706b  lib.fill_item(pk
+0002f7d0: 675f 6c69 622e 696e 7669 7369 626c 6552  g_lib.invisibleR
+0002f7e0: 6f6f 7449 7465 6d28 292c 206d 6f63 6b5f  ootItem(), mock_
+0002f7f0: 706b 675f 7472 6565 290a 0a20 2020 2020  pkg_tree)..     
+0002f800: 2020 2023 2043 6c6f 7365 7320 7468 6520     # Closes the 
+0002f810: 7061 636b 6167 6520 6c69 6272 6172 7920  package library 
+0002f820: 706f 702d 7570 0a20 2020 2020 2020 2070  pop-up.        p
+0002f830: 6b67 5f6c 6962 5f77 696e 646f 772e 636c  kg_lib_window.cl
+0002f840: 6f73 6528 290a 0a20 2020 2064 6566 2074  ose()..    def t
+0002f850: 6573 745f 706f 7055 7044 656c 6574 6564  est_popUpDeleted
+0002f860: 5072 6f6a 6563 7428 7365 6c66 293a 0a20  Project(self):. 
+0002f870: 2020 2020 2020 2022 2222 4164 6473 2061         """Adds a
+0002f880: 2064 656c 6574 6564 2070 726f 6a65 6374   deleted project
+0002f890: 7320 746f 2074 6865 2070 726f 6a65 6374  s to the project
+0002f8a0: 7320 6c69 7374 2061 6e64 206c 6175 6e63  s list and launc
+0002f8b0: 6865 7320 6d69 612e 0a0a 2020 2020 2020  hes mia...      
+0002f8c0: 2020 2d20 5465 7374 733a 2050 6f70 5570    - Tests: PopUp
+0002f8d0: 4465 6c65 7465 6450 726f 6a65 6374 2e0a  DeletedProject..
+0002f8e0: 2020 2020 2020 2020 2222 220a 0a20 2020          """..   
+0002f8f0: 2020 2020 2023 2053 6574 7320 6120 7072       # Sets a pr
+0002f900: 6f6a 6563 7473 2073 6176 6520 6469 7265  ojects save dire
+0002f910: 6374 6f72 790a 2020 2020 2020 2020 2320  ctory.        # 
+0002f920: 636f 6e66 6967 203d 2043 6f6e 6669 6728  config = Config(
+0002f930: 290a 2020 2020 2020 2020 636f 6e66 6967  ).        config
+0002f940: 203d 2043 6f6e 6669 6728 636f 6e66 6967   = Config(config
+0002f950: 5f70 6174 683d 7365 6c66 2e63 6f6e 6669  _path=self.confi
+0002f960: 675f 7061 7468 290a 2020 2020 2020 2020  g_path).        
+0002f970: 7072 6f6a 6563 7473 5f73 6176 655f 7061  projects_save_pa
+0002f980: 7468 203d 206f 732e 7061 7468 2e6a 6f69  th = os.path.joi
+0002f990: 6e28 7365 6c66 2e63 6f6e 6669 675f 7061  n(self.config_pa
+0002f9a0: 7468 2c20 2270 726f 6a65 6374 7322 290a  th, "projects").
+0002f9b0: 2020 2020 2020 2020 636f 6e66 6967 2e73          config.s
+0002f9c0: 6574 5f70 726f 6a65 6374 735f 7361 7665  et_projects_save
+0002f9d0: 5f70 6174 6828 7072 6f6a 6563 7473 5f73  _path(projects_s
+0002f9e0: 6176 655f 7061 7468 290a 0a20 2020 2020  ave_path)..     
+0002f9f0: 2020 2023 204d 6f63 6b73 2061 2070 726f     # Mocks a pro
+0002fa00: 6a65 6374 2066 696c 6570 6174 6820 7468  ject filepath th
+0002fa10: 6174 2064 6f65 7320 6e6f 7420 6578 6973  at does not exis
+0002fa20: 7420 696e 2074 6865 2066 696c 6573 7973  t in the filesys
+0002fa30: 7465 6d0a 2020 2020 2020 2020 2320 4164  tem.        # Ad
+0002fa40: 6473 2074 6869 7320 6669 6c65 7061 7468  ds this filepath
+0002fa50: 2074 6f20 2773 6176 6564 5f70 726f 6a65   to 'saved_proje
+0002fa60: 6374 732e 796d 6c27 0a20 2020 2020 2020  cts.yml'.       
+0002fa70: 2073 6176 6564 5072 6f6a 6563 7473 203d   savedProjects =
+0002fa80: 2053 6176 6564 5072 6f6a 6563 7473 2829   SavedProjects()
+0002fa90: 0a20 2020 2020 2020 2064 656c 5f70 726a  .        del_prj
+0002faa0: 6374 203d 206f 732e 7061 7468 2e6a 6f69  ct = os.path.joi
+0002fab0: 6e28 7072 6f6a 6563 7473 5f73 6176 655f  n(projects_save_
+0002fac0: 7061 7468 2c20 226d 6973 7369 6e67 5f70  path, "missing_p
+0002fad0: 726f 6a65 6374 2229 0a20 2020 2020 2020  roject").       
+0002fae0: 2073 6176 6564 5072 6f6a 6563 7473 2e61   savedProjects.a
+0002faf0: 6464 5361 7665 6450 726f 6a65 6374 2864  ddSavedProject(d
+0002fb00: 656c 5f70 726a 6374 290a 0a20 2020 2020  el_prjct)..     
+0002fb10: 2020 2023 2041 7373 6572 7473 2074 6861     # Asserts tha
+0002fb20: 7420 2773 6176 6564 5f70 726f 6a65 6374  t 'saved_project
+0002fb30: 732e 796d 6c27 2063 6f6e 7461 696e 7320  s.yml' contains 
+0002fb40: 7468 6520 6669 6c65 7061 7468 0a20 2020  the filepath.   
+0002fb50: 2020 2020 2023 2046 4958 4d45 3a20 5468       # FIXME: Th
+0002fb60: 6520 666f 6c6c 6f77 696e 6720 6c69 6e65  e following line
+0002fb70: 2064 6f65 7320 6e6f 7420 7365 656d 2074   does not seem t
+0002fb80: 6f20 6265 2073 7570 706f 7274 6564 2062  o be supported b
+0002fb90: 7920 7468 650a 2020 2020 2020 2020 2320  y the.        # 
+0002fba0: 2020 2020 2020 2061 7070 7665 796f 7220         appveyor 
+0002fbb0: 7665 7273 696f 6e2c 2077 6869 6c65 2069  version, while i
+0002fbc0: 7420 776f 726b 7320 6669 6e65 206f 6e20  t works fine on 
+0002fbd0: 6d79 2073 7461 7469 6f6e 2e2e 2e0a 2020  my station....  
+0002fbe0: 2020 2020 2020 2320 2020 2020 2020 2046        #        F
+0002fbf0: 6f72 206e 6f77 2049 2063 6f6d 6d65 6e74  or now I comment
+0002fc00: 202e 2e2e 0a20 2020 2020 2020 2023 2073   ....        # s
+0002fc10: 656c 662e 6173 7365 7274 496e 2864 656c  elf.assertIn(del
+0002fc20: 5f70 726a 6374 2c20 7361 7665 6450 726f  _prjct, savedPro
+0002fc30: 6a65 6374 732e 6c6f 6164 5361 7665 6450  jects.loadSavedP
+0002fc40: 726f 6a65 6374 7328 295b 2770 6174 6873  rojects()['paths
+0002fc50: 275d 290a 0a20 2020 2020 2020 2023 204d  '])..        # M
+0002fc60: 6f63 6b73 2074 6865 2065 7865 6375 7469  ocks the executi
+0002fc70: 6f6e 206f 6620 6120 6469 616c 6f67 2062  on of a dialog b
+0002fc80: 6f78 0a20 2020 2020 2020 2050 6f70 5570  ox.        PopUp
+0002fc90: 4465 6c65 7465 6450 726f 6a65 6374 2e65  DeletedProject.e
+0002fca0: 7865 6320 3d20 4d6f 636b 2829 0a0a 2020  xec = Mock()..  
+0002fcb0: 2020 2020 2020 2320 4164 6473 2063 6f64        # Adds cod
+0002fcc0: 6520 6672 6f6d 2074 6865 2027 6d61 696e  e from the 'main
+0002fcd0: 2e70 7927 2c20 6765 7473 2064 656c 6574  .py', gets delet
+0002fce0: 6564 2070 726f 6a65 6374 730a 2020 2020  ed projects.    
+0002fcf0: 2020 2020 7361 7665 645f 7072 6f6a 6563      saved_projec
+0002fd00: 7473 5f6f 626a 6563 7420 3d20 5361 7665  ts_object = Save
+0002fd10: 6450 726f 6a65 6374 7328 290a 2020 2020  dProjects().    
+0002fd20: 2020 2020 7361 7665 645f 7072 6f6a 6563      saved_projec
+0002fd30: 7473 5f6c 6973 7420 3d20 636f 7079 2e64  ts_list = copy.d
+0002fd40: 6565 7063 6f70 7928 7361 7665 645f 7072  eepcopy(saved_pr
+0002fd50: 6f6a 6563 7473 5f6f 626a 6563 742e 7061  ojects_object.pa
+0002fd60: 7468 734c 6973 7429 0a20 2020 2020 2020  thsList).       
+0002fd70: 2064 656c 6574 6564 5f70 726f 6a65 6374   deleted_project
+0002fd80: 7320 3d20 5b5d 0a20 2020 2020 2020 2066  s = [].        f
+0002fd90: 6f72 2073 6176 6564 5f70 726f 6a65 6374  or saved_project
+0002fda0: 2069 6e20 7361 7665 645f 7072 6f6a 6563   in saved_projec
+0002fdb0: 7473 5f6c 6973 743a 0a20 2020 2020 2020  ts_list:.       
+0002fdc0: 2020 2020 2069 6620 6e6f 7420 6f73 2e70       if not os.p
+0002fdd0: 6174 682e 6973 6469 7228 7361 7665 645f  ath.isdir(saved_
+0002fde0: 7072 6f6a 6563 7429 3a0a 2020 2020 2020  project):.      
+0002fdf0: 2020 2020 2020 2020 2020 6465 6c65 7465            delete
+0002fe00: 645f 7072 6f6a 6563 7473 2e61 7070 656e  d_projects.appen
+0002fe10: 6428 6f73 2e70 6174 682e 6162 7370 6174  d(os.path.abspat
+0002fe20: 6828 7361 7665 645f 7072 6f6a 6563 7429  h(saved_project)
+0002fe30: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0002fe40: 2020 7361 7665 645f 7072 6f6a 6563 7473    saved_projects
+0002fe50: 5f6f 626a 6563 742e 7265 6d6f 7665 5361  _object.removeSa
+0002fe60: 7665 6450 726f 6a65 6374 2873 6176 6564  vedProject(saved
+0002fe70: 5f70 726f 6a65 6374 290a 0a20 2020 2020  _project)..     
+0002fe80: 2020 2069 6620 6465 6c65 7465 645f 7072     if deleted_pr
+0002fe90: 6f6a 6563 7473 2069 7320 6e6f 7420 4e6f  ojects is not No
+0002fea0: 6e65 2061 6e64 2064 656c 6574 6564 5f70  ne and deleted_p
+0002feb0: 726f 6a65 6374 733a 0a20 2020 2020 2020  rojects:.       
+0002fec0: 2020 2020 2073 656c 662e 6d73 6720 3d20       self.msg = 
+0002fed0: 506f 7055 7044 656c 6574 6564 5072 6f6a  PopUpDeletedProj
+0002fee0: 6563 7428 6465 6c65 7465 645f 7072 6f6a  ect(deleted_proj
+0002fef0: 6563 7473 290a 0a20 2020 2020 2020 2023  ects)..        #
+0002ff00: 2041 7373 6572 7473 2074 6861 7420 2773   Asserts that 's
+0002ff10: 6176 6564 5f70 726f 6a65 6374 732e 796d  aved_projects.ym
+0002ff20: 6c27 206e 6f20 6c6f 6e67 6572 2063 6f6e  l' no longer con
+0002ff30: 7461 696e 7320 6974 0a20 2020 2020 2020  tains it.       
+0002ff40: 2023 2046 4958 4d45 3a20 5369 6e63 6520   # FIXME: Since 
+0002ff50: 7468 6520 7072 6576 696f 7573 2046 4958  the previous FIX
+0002ff60: 4d45 2c20 616e 6420 636f 6d6d 656e 742c  ME, and comment,
+0002ff70: 2074 6865 2066 6f6c 6c6f 7769 6e67 206c   the following l
+0002ff80: 696e 6520 6973 0a20 2020 2020 2020 2023  ine is.        #
+0002ff90: 2020 2020 2020 2020 616c 736f 2063 6f6d          also com
+0002ffa0: 6d65 6e74 6564 0a20 2020 2020 2020 2023  mented.        #
+0002ffb0: 2073 656c 662e 6173 7365 7274 4e6f 7449   self.assertNotI
+0002ffc0: 6e28 6465 6c5f 7072 6a63 742c 0a20 2020  n(del_prjct,.   
+0002ffd0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0002ffe0: 2020 2020 2020 2020 7361 7665 6450 726f          savedPro
+0002fff0: 6a65 6374 732e 6c6f 6164 5361 7665 6450  jects.loadSavedP
+00030000: 726f 6a65 6374 7328 295b 2770 6174 6873  rojects()['paths
+00030010: 275d 290a 0a20 2020 2064 6566 2074 6573  '])..    def tes
+00030020: 745f 706f 7055 7044 656c 6574 6550 726f  t_popUpDeletePro
+00030030: 6a65 6374 2873 656c 6629 3a0a 2020 2020  ject(self):.    
+00030040: 2020 2020 2222 2243 7265 6174 6573 2061      """Creates a
+00030050: 206e 6577 2070 726f 6a65 6374 2061 6e64   new project and
+00030060: 2064 656c 6574 6573 2069 742e 0a0a 2020   deletes it...  
+00030070: 2020 2020 2020 4e6f 7420 746f 2062 6520        Not to be 
+00030080: 636f 6e66 7573 6564 2077 6974 6820 7465  confused with te
+00030090: 7374 5f50 6f70 5570 4465 6c65 7465 6450  st_PopUpDeletedP
+000300a0: 726f 6a65 6374 210a 0a20 2020 2020 2020  roject!..       
+000300b0: 202d 2054 6573 7473 3a0a 2020 2020 2020   - Tests:.      
+000300c0: 2020 2020 2020 2d20 4d61 696e 5769 6e64        - MainWind
+000300d0: 6f77 2e64 656c 6574 655f 7072 6f6a 6563  ow.delete_projec
+000300e0: 740a 2020 2020 2020 2020 2020 2020 2d20  t.            - 
+000300f0: 506f 7055 7044 656c 6574 6550 726f 6a65  PopUpDeleteProje
+00030100: 6374 2e0a 2020 2020 2020 2020 2222 220a  ct..        """.
+00030110: 0a20 2020 2020 2020 2023 2047 6574 7320  .        # Gets 
+00030120: 6120 6e65 7720 7072 6f6a 6563 740a 2020  a new project.  
+00030130: 2020 2020 2020 7465 7374 5f70 726f 6a5f        test_proj_
+00030140: 7061 7468 203d 2073 656c 662e 6765 745f  path = self.get_
+00030150: 6e65 775f 7465 7374 5f70 726f 6a65 6374  new_test_project
+00030160: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
+00030170: 6d61 696e 5f77 696e 646f 772e 7377 6974  main_window.swit
+00030180: 6368 5f70 726f 6a65 6374 2874 6573 745f  ch_project(test_
+00030190: 7072 6f6a 5f70 6174 682c 2022 7465 7374  proj_path, "test
+000301a0: 5f70 726f 6a65 6374 2229 0a0a 2020 2020  _project")..    
+000301b0: 2020 2020 2320 496e 7374 6561 6420 6f66      # Instead of
+000301c0: 2065 7865 6375 7469 6e67 2074 6865 2070   executing the p
+000301d0: 6f70 2d75 702c 206f 6e6c 7920 7368 6f77  op-up, only show
+000301e0: 7320 6974 0a20 2020 2020 2020 2023 2054  s it.        # T
+000301f0: 6869 7320 6176 6f69 6473 2074 6872 6561  his avoids threa
+00030200: 6420 6465 6164 6c6f 636b 696e 670a 2020  d deadlocking.  
+00030210: 2020 2020 2020 514d 6573 7361 6765 426f        QMessageBo
+00030220: 782e 6578 6563 203d 206c 616d 6264 6120  x.exec = lambda 
+00030230: 7365 6c66 5f3a 2073 656c 665f 2e73 686f  self_: self_.sho
+00030240: 7728 290a 0a20 2020 2020 2020 2023 2052  w()..        # R
+00030250: 6573 6574 7320 7468 6520 7072 6f6a 6563  esets the projec
+00030260: 7473 2066 6f6c 6465 720a 2020 2020 2020  ts folder.      
+00030270: 2020 436f 6e66 6967 2863 6f6e 6669 675f    Config(config_
+00030280: 7061 7468 3d73 656c 662e 636f 6e66 6967  path=self.config
+00030290: 5f70 6174 6829 2e73 6574 5f70 726f 6a65  _path).set_proje
+000302a0: 6374 735f 7361 7665 5f70 6174 6828 2222  cts_save_path(""
+000302b0: 290a 0a20 2020 2020 2020 2023 2054 7269  )..        # Tri
+000302c0: 6573 2074 6f20 6465 6c65 7465 2061 2070  es to delete a p
+000302d0: 726f 6a65 6374 2077 6974 686f 7574 2073  roject without s
+000302e0: 6574 7469 6e67 2074 6865 2070 726f 6a65  etting the proje
+000302f0: 6374 7320 666f 6c64 6572 0a20 2020 2020  cts folder.     
+00030300: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
+00030310: 646f 772e 6465 6c65 7465 5f70 726f 6a65  dow.delete_proje
+00030320: 6374 2829 0a20 2020 2020 2020 2073 656c  ct().        sel
+00030330: 662e 6d61 696e 5f77 696e 646f 772e 6d73  f.main_window.ms
+00030340: 672e 6163 6365 7074 2829 0a0a 2020 2020  g.accept()..    
+00030350: 2020 2020 2320 5365 7473 2061 2070 726f      # Sets a pro
+00030360: 6a65 6374 7320 7361 7665 2064 6972 6563  jects save direc
+00030370: 746f 7279 0a20 2020 2020 2020 2063 6f6e  tory.        con
+00030380: 6669 6720 3d20 436f 6e66 6967 2863 6f6e  fig = Config(con
+00030390: 6669 675f 7061 7468 3d73 656c 662e 636f  fig_path=self.co
+000303a0: 6e66 6967 5f70 6174 6829 0a20 2020 2020  nfig_path).     
+000303b0: 2020 2070 726f 6a5f 7361 7665 5f70 6174     proj_save_pat
+000303c0: 6820 3d20 6f73 2e70 6174 682e 7370 6c69  h = os.path.spli
+000303d0: 7428 7465 7374 5f70 726f 6a5f 7061 7468  t(test_proj_path
+000303e0: 295b 305d 0a20 2020 2020 2020 2063 6f6e  )[0].        con
+000303f0: 6669 672e 7365 745f 7072 6f6a 6563 7473  fig.set_projects
+00030400: 5f73 6176 655f 7061 7468 2870 726f 6a5f  _save_path(proj_
+00030410: 7361 7665 5f70 6174 6829 0a0a 2020 2020  save_path)..    
+00030420: 2020 2020 2320 4170 7065 6e64 2027 7465      # Append 'te
+00030430: 7374 5f70 726f 6a5f 7061 7468 2720 746f  st_proj_path' to
+00030440: 2027 7361 7665 645f 7072 6f6a 6563 7473   'saved_projects
+00030450: 2e70 6174 6873 4c69 7374 2720 616e 640a  .pathsList' and.
+00030460: 2020 2020 2020 2020 2320 276f 7065 6e65          # 'opene
+00030470: 645f 7072 6f6a 6563 7473 272c 2074 6f20  d_projects', to 
+00030480: 696e 6372 6561 7365 2063 6f76 6572 6167  increase coverag
+00030490: 650a 2020 2020 2020 2020 7365 6c66 2e6d  e.        self.m
+000304a0: 6169 6e5f 7769 6e64 6f77 2e73 6176 6564  ain_window.saved
+000304b0: 5f70 726f 6a65 6374 732e 7061 7468 734c  _projects.pathsL
+000304c0: 6973 742e 6170 7065 6e64 280a 2020 2020  ist.append(.    
+000304d0: 2020 2020 2020 2020 6f73 2e70 6174 682e          os.path.
+000304e0: 7265 6c70 6174 6828 7465 7374 5f70 726f  relpath(test_pro
+000304f0: 6a5f 7061 7468 290a 2020 2020 2020 2020  j_path).        
+00030500: 290a 2020 2020 2020 2020 636f 6e66 6967  ).        config
+00030510: 2e73 6574 5f6f 7065 6e65 645f 7072 6f6a  .set_opened_proj
+00030520: 6563 7473 285b 6f73 2e70 6174 682e 7265  ects([os.path.re
+00030530: 6c70 6174 6828 7465 7374 5f70 726f 6a5f  lpath(test_proj_
+00030540: 7061 7468 295d 290a 0a20 2020 2020 2020  path)])..       
+00030550: 2023 2050 6f70 5570 4465 6c65 7465 5072   # PopUpDeletePr
+00030560: 6f6a 6563 742e 6578 6563 203d 206c 616d  oject.exec = lam
+00030570: 6264 6120 7365 6c66 5f3a 2073 656c 665f  bda self_: self_
+00030580: 2e73 686f 7728 290a 2020 2020 2020 2020  .show().        
+00030590: 506f 7055 7044 656c 6574 6550 726f 6a65  PopUpDeleteProje
+000305a0: 6374 2e65 7865 6320 3d20 6c61 6d62 6461  ct.exec = lambda
+000305b0: 2073 656c 665f 3a20 4e6f 6e65 0a0a 2020   self_: None..  
+000305c0: 2020 2020 2020 2320 4465 6c65 7465 7320        # Deletes 
+000305d0: 6120 7072 6f6a 6563 7420 7769 7468 2074  a project with t
+000305e0: 6865 2070 726f 6a65 6374 7320 666f 6c64  he projects fold
+000305f0: 6572 2073 6574 0a20 2020 2020 2020 2073  er set.        s
+00030600: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00030610: 6465 6c65 7465 5f70 726f 6a65 6374 2829  delete_project()
+00030620: 0a0a 2020 2020 2020 2020 6578 506f 7075  ..        exPopu
+00030630: 7020 3d20 7365 6c66 2e6d 6169 6e5f 7769  p = self.main_wi
+00030640: 6e64 6f77 2e65 7850 6f70 7570 0a0a 2020  ndow.exPopup..  
+00030650: 2020 2020 2020 2320 4368 6563 6b73 2074        # Checks t
+00030660: 6865 2066 6972 7374 2070 726f 6a65 6374  he first project
+00030670: 2074 6f20 6265 2064 656c 6574 6564 0a20   to be deleted. 
+00030680: 2020 2020 2020 2065 7850 6f70 7570 2e63         exPopup.c
+00030690: 6865 636b 5f62 6f78 6573 5b30 5d2e 7365  heck_boxes[0].se
+000306a0: 7443 6865 636b 6564 2854 7275 6529 0a0a  tChecked(True)..
+000306b0: 2020 2020 2020 2020 2320 4d6f 636b 7320          # Mocks 
+000306c0: 7468 6520 6469 616c 6f67 2062 6f78 2074  the dialog box t
+000306d0: 6f20 6469 7265 6374 6c79 2072 6574 7572  o directly retur
+000306e0: 6e20 2759 6573 546f 416c 6c27 0a20 2020  n 'YesToAll'.   
+000306f0: 2020 2020 2051 4d65 7373 6167 6542 6f78       QMessageBox
+00030700: 2e71 7565 7374 696f 6e20 3d20 4d6f 636b  .question = Mock
+00030710: 2872 6574 7572 6e5f 7661 6c75 653d 514d  (return_value=QM
+00030720: 6573 7361 6765 426f 782e 5965 7354 6f41  essageBox.YesToA
+00030730: 6c6c 290a 2020 2020 2020 2020 6578 506f  ll).        exPo
+00030740: 7075 702e 6f6b 5f63 6c69 636b 6564 2829  pup.ok_clicked()
+00030750: 0a0a 2020 2020 6465 6620 7465 7374 5f73  ..    def test_s
+00030760: 6565 5f61 6c6c 5f70 726f 6a65 6374 7328  ee_all_projects(
+00030770: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
+00030780: 2222 0a20 2020 2020 2020 2043 7265 6174  "".        Creat
+00030790: 6573 2032 2070 726f 6a65 6374 7320 616e  es 2 projects an
+000307a0: 6420 7472 6965 7320 746f 206f 7065 6e20  d tries to open 
+000307b0: 7468 656d 2074 6872 6f75 6768 2074 6865  them through the
+000307c0: 0a20 2020 2020 2020 2061 6c6c 2070 726f  .        all pro
+000307d0: 6a65 6374 7320 706f 702d 7570 2e0a 0a20  jects pop-up... 
+000307e0: 2020 2020 2020 202d 2054 6573 7473 3a0a         - Tests:.
+000307f0: 2020 2020 2020 2020 2020 2020 2d20 4d61              - Ma
+00030800: 696e 5769 6e64 6f77 2e73 6565 5f61 6c6c  inWindow.see_all
+00030810: 5f70 726f 6a65 6374 730a 2020 2020 2020  _projects.      
+00030820: 2020 2020 2020 2d20 506f 7055 7053 6565        - PopUpSee
+00030830: 416c 6c50 726f 6a65 6374 730a 0a20 2020  AllProjects..   
+00030840: 2020 2020 202d 204d 6f63 6b73 3a0a 2020       - Mocks:.  
+00030850: 2020 2020 2020 2020 2020 2d20 506f 7055            - PopU
+00030860: 7053 6565 416c 6c50 726f 6a65 6374 732e  pSeeAllProjects.
+00030870: 6578 6563 0a20 2020 2020 2020 2020 2020  exec.           
+00030880: 202d 2051 4d65 7373 6167 6542 6f78 2e65   - QMessageBox.e
+00030890: 7865 630a 2020 2020 2020 2020 2222 220a  xec.        """.
+000308a0: 0a20 2020 2020 2020 2023 2053 6574 7320  .        # Sets 
+000308b0: 7368 6f72 7463 7574 7320 666f 7220 6f62  shortcuts for ob
+000308c0: 6a65 6374 7320 7468 6174 2061 7265 206f  jects that are o
+000308d0: 6674 656e 2075 7365 640a 2020 2020 2020  ften used.      
+000308e0: 2020 6d61 696e 5f77 6e64 203d 2073 656c    main_wnd = sel
+000308f0: 662e 6d61 696e 5f77 696e 646f 770a 0a20  f.main_window.. 
+00030900: 2020 2020 2020 2023 2043 7265 6174 6573         # Creates
+00030910: 2032 206e 6577 2070 726f 6a65 6374 2066   2 new project f
+00030920: 6f6c 6465 7273 0a20 2020 2020 2020 2070  olders.        p
+00030930: 726f 6a65 6374 5f38 5f70 6174 6820 3d20  roject_8_path = 
+00030940: 7365 6c66 2e67 6574 5f6e 6577 5f74 6573  self.get_new_tes
+00030950: 745f 7072 6f6a 6563 7428 6e61 6d65 3d22  t_project(name="
+00030960: 7072 6f6a 6563 745f 3822 290a 2020 2020  project_8").    
+00030970: 2020 2020 7072 6f6a 6563 745f 395f 7061      project_9_pa
+00030980: 7468 203d 2073 656c 662e 6765 745f 6e65  th = self.get_ne
+00030990: 775f 7465 7374 5f70 726f 6a65 6374 286e  w_test_project(n
+000309a0: 616d 653d 2270 726f 6a65 6374 5f39 2229  ame="project_9")
+000309b0: 0a0a 2020 2020 2020 2020 2320 5365 7473  ..        # Sets
+000309c0: 2074 6865 2070 726f 6a65 6374 7320 7361   the projects sa
+000309d0: 7665 2070 6174 680a 2020 2020 2020 2020  ve path.        
+000309e0: 636f 6e66 6967 203d 2043 6f6e 6669 6728  config = Config(
+000309f0: 636f 6e66 6967 5f70 6174 683d 7365 6c66  config_path=self
+00030a00: 2e63 6f6e 6669 675f 7061 7468 290a 2020  .config_path).  
+00030a10: 2020 2020 2020 636f 6e66 6967 2e73 6574        config.set
+00030a20: 5f70 726f 6a65 6374 735f 7361 7665 5f70  _projects_save_p
+00030a30: 6174 6828 7365 6c66 2e63 6f6e 6669 675f  ath(self.config_
+00030a40: 7061 7468 290a 0a20 2020 2020 2020 2023  path)..        #
+00030a50: 2041 6464 7320 7468 6520 7072 6f6a 6563   Adds the projec
+00030a60: 7473 2074 6f20 7468 6520 2770 6174 6873  ts to the 'paths
+00030a70: 4c69 7374 270a 2020 2020 2020 2020 6d61  List'.        ma
+00030a80: 696e 5f77 6e64 2e73 6176 6564 5f70 726f  in_wnd.saved_pro
+00030a90: 6a65 6374 732e 7061 7468 734c 6973 742e  jects.pathsList.
+00030aa0: 6170 7065 6e64 2870 726f 6a65 6374 5f38  append(project_8
+00030ab0: 5f70 6174 6829 0a20 2020 2020 2020 206d  _path).        m
+00030ac0: 6169 6e5f 776e 642e 7361 7665 645f 7072  ain_wnd.saved_pr
+00030ad0: 6f6a 6563 7473 2e70 6174 6873 4c69 7374  ojects.pathsList
+00030ae0: 2e61 7070 656e 6428 7072 6f6a 6563 745f  .append(project_
+00030af0: 395f 7061 7468 290a 0a20 2020 2020 2020  9_path)..       
+00030b00: 2023 204d 6f63 6b73 2074 6865 2065 7865   # Mocks the exe
+00030b10: 6375 7469 6f6e 206f 6620 2750 6f70 5570  cution of 'PopUp
+00030b20: 5365 6541 6c6c 5072 6f6a 6563 7473 2720  SeeAllProjects' 
+00030b30: 616e 6420 2751 4d65 7373 6167 6542 6f78  and 'QMessageBox
+00030b40: 270a 2020 2020 2020 2020 506f 7055 7053  '.        PopUpS
+00030b50: 6565 416c 6c50 726f 6a65 6374 732e 6578  eeAllProjects.ex
+00030b60: 6563 203d 206c 616d 6264 6120 783a 204e  ec = lambda x: N
+00030b70: 6f6e 650a 2020 2020 2020 2020 514d 6573  one.        QMes
+00030b80: 7361 6765 426f 782e 6578 6563 203d 206c  sageBox.exec = l
+00030b90: 616d 6264 6120 783a 204e 6f6e 650a 0a20  ambda x: None.. 
+00030ba0: 2020 2020 2020 2023 2044 656c 6574 6573         # Deletes
+00030bb0: 2074 6865 2066 6f6c 6465 7220 636f 6e74   the folder cont
+00030bc0: 6169 6e69 6e67 2074 6865 2070 726f 6a65  aining the proje
+00030bd0: 6374 2039 0a20 2020 2020 2020 2073 6875  ct 9.        shu
+00030be0: 7469 6c2e 726d 7472 6565 2870 726f 6a65  til.rmtree(proje
+00030bf0: 6374 5f39 5f70 6174 6829 0a0a 2020 2020  ct_9_path)..    
+00030c00: 2020 2020 2320 5368 6f77 2074 6865 2070      # Show the p
+00030c10: 726f 6a65 6374 7320 706f 702d 7570 0a20  rojects pop-up. 
+00030c20: 2020 2020 2020 206d 6169 6e5f 776e 642e         main_wnd.
+00030c30: 7365 655f 616c 6c5f 7072 6f6a 6563 7473  see_all_projects
+00030c40: 2829 0a0a 2020 2020 2020 2020 6974 656d  ()..        item
+00030c50: 5f30 203d 2073 656c 662e 6d61 696e 5f77  _0 = self.main_w
+00030c60: 696e 646f 772e 6578 506f 7075 702e 7472  indow.exPopup.tr
+00030c70: 6565 5769 6467 6574 2e69 7465 6d41 7428  eeWidget.itemAt(
+00030c80: 302c 2030 290a 2020 2020 2020 2020 7365  0, 0).        se
+00030c90: 6c66 2e61 7373 6572 7445 7175 616c 2869  lf.assertEqual(i
+00030ca0: 7465 6d5f 302e 7465 7874 2830 292c 2022  tem_0.text(0), "
+00030cb0: 7072 6f6a 6563 745f 3822 290a 2020 2020  project_8").    
+00030cc0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00030cd0: 7175 616c 280a 2020 2020 2020 2020 2020  qual(.          
+00030ce0: 2020 6d61 696e 5f77 6e64 2e65 7850 6f70    main_wnd.exPop
+00030cf0: 7570 2e74 7265 6557 6964 6765 742e 6974  up.treeWidget.it
+00030d00: 656d 4265 6c6f 7728 6974 656d 5f30 292e  emBelow(item_0).
+00030d10: 7465 7874 2830 292c 2022 7072 6f6a 6563  text(0), "projec
+00030d20: 745f 3922 0a20 2020 2020 2020 2029 0a0a  t_9".        )..
+00030d30: 2020 2020 2020 2020 2320 4173 7365 7274          # Assert
+00030d40: 7320 7468 6174 2070 726f 6a65 6374 2038  s that project 8
+00030d50: 2069 7320 6e6f 7420 6f70 656e 6564 3a0a   is not opened:.
+00030d60: 2020 2020 2020 2020 636f 6e66 6967 203d          config =
+00030d70: 2043 6f6e 6669 6728 636f 6e66 6967 5f70   Config(config_p
+00030d80: 6174 683d 7365 6c66 2e63 6f6e 6669 675f  ath=self.config_
+00030d90: 7061 7468 290a 2020 2020 2020 2020 7365  path).        se
+00030da0: 6c66 2e61 7373 6572 744e 6f74 4571 7561  lf.assertNotEqua
+00030db0: 6c28 0a20 2020 2020 2020 2020 2020 206f  l(.            o
+00030dc0: 732e 7061 7468 2e61 6273 7061 7468 2863  s.path.abspath(c
+00030dd0: 6f6e 6669 672e 6765 745f 6f70 656e 6564  onfig.get_opened
+00030de0: 5f70 726f 6a65 6374 7328 295b 305d 292c  _projects()[0]),
+00030df0: 2070 726f 6a65 6374 5f38 5f70 6174 680a   project_8_path.
+00030e00: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+00030e10: 2020 2023 2054 7269 6573 2074 6f20 6f70     # Tries to op
+00030e20: 656e 2061 2070 726f 6a65 6374 2077 6974  en a project wit
+00030e30: 6820 6e6f 2070 726f 6a65 6374 7320 7365  h no projects se
+00030e40: 6c65 6374 6564 0a20 2020 2020 2020 206d  lected.        m
+00030e50: 6169 6e5f 776e 642e 6578 506f 7075 702e  ain_wnd.exPopup.
+00030e60: 6f70 656e 5f70 726f 6a65 6374 2829 0a0a  open_project()..
+00030e70: 2020 2020 2020 2020 2320 5365 6c65 6374          # Select
+00030e80: 7320 7072 6f6a 6563 7420 382c 2077 6869  s project 8, whi
+00030e90: 6368 2077 6173 206e 6f74 2064 656c 6574  ch was not delet
+00030ea0: 6564 0a20 2020 2020 2020 2069 7465 6d5f  ed.        item_
+00030eb0: 302e 7365 7453 656c 6563 7465 6428 5472  0.setSelected(Tr
+00030ec0: 7565 290a 0a20 2020 2020 2020 2023 204f  ue)..        # O
+00030ed0: 7065 6e73 2070 726f 6a65 6374 2038 0a20  pens project 8. 
+00030ee0: 2020 2020 2020 206d 6169 6e5f 776e 642e         main_wnd.
+00030ef0: 6578 506f 7075 702e 6f70 656e 5f70 726f  exPopup.open_pro
+00030f00: 6a65 6374 2829 0a0a 2020 2020 2020 2020  ject()..        
+00030f10: 2320 4173 7365 7274 7320 7468 6174 2070  # Asserts that p
+00030f20: 726f 6a65 6374 2038 2069 7320 6e6f 7720  roject 8 is now 
+00030f30: 6f70 656e 6564 0a20 2020 2020 2020 2063  opened.        c
+00030f40: 6f6e 6669 6720 3d20 436f 6e66 6967 2863  onfig = Config(c
+00030f50: 6f6e 6669 675f 7061 7468 3d73 656c 662e  onfig_path=self.
+00030f60: 636f 6e66 6967 5f70 6174 6829 0a20 2020  config_path).   
+00030f70: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00030f80: 4571 7561 6c28 0a20 2020 2020 2020 2020  Equal(.         
+00030f90: 2020 206f 732e 7061 7468 2e61 6273 7061     os.path.abspa
+00030fa0: 7468 2863 6f6e 6669 672e 6765 745f 6f70  th(config.get_op
+00030fb0: 656e 6564 5f70 726f 6a65 6374 7328 295b  ened_projects()[
+00030fc0: 305d 292c 2070 726f 6a65 6374 5f38 5f70  0]), project_8_p
+00030fd0: 6174 680a 2020 2020 2020 2020 290a 0a20  ath.        ).. 
+00030fe0: 2020 2064 6566 2074 6573 745f 736f 6674     def test_soft
+00030ff0: 7761 7265 5f70 7265 6665 7265 6e63 6573  ware_preferences
+00031000: 5f70 6f70 5f75 7028 7365 6c66 293a 0a20  _pop_up(self):. 
+00031010: 2020 2020 2020 2022 2222 4f70 656e 7320         """Opens 
+00031020: 7468 6520 7072 6566 6572 656e 6365 7320  the preferences 
+00031030: 706f 7020 7570 2061 6e64 2063 6861 6e67  pop up and chang
+00031040: 6573 2070 6172 616d 6574 6572 732e 0a0a  es parameters...
+00031050: 2020 2020 2020 2020 2d20 5465 7374 733a          - Tests:
+00031060: 0a20 2020 2020 2020 2020 2020 202d 204d  .            - M
+00031070: 6169 6e57 696e 646f 772e 736f 6674 7761  ainWindow.softwa
+00031080: 7265 5f70 7265 6665 7265 6e63 6573 5f70  re_preferences_p
+00031090: 6f70 5f75 700a 2020 2020 2020 2020 2020  op_up.          
+000310a0: 2020 2d20 506f 7055 7050 7265 6665 7265    - PopUpPrefere
+000310b0: 6e63 6573 0a0a 2020 2020 2020 2020 2d20  nces..        - 
+000310c0: 4d6f 636b 730a 2020 2020 2020 2020 2020  Mocks.          
+000310d0: 2020 2d20 5146 696c 6544 6961 6c6f 672e    - QFileDialog.
+000310e0: 6765 744f 7065 6e46 696c 654e 616d 650a  getOpenFileName.
+000310f0: 2020 2020 2020 2020 2020 2020 2d20 5146              - QF
+00031100: 696c 6544 6961 6c6f 672e 6765 7445 7869  ileDialog.getExi
+00031110: 7374 696e 6744 6972 6563 746f 7279 0a20  stingDirectory. 
+00031120: 2020 2020 2020 2020 2020 202d 2051 4c69             - QLi
+00031130: 6e65 4564 6974 2e74 6578 740a 2020 2020  neEdit.text.    
+00031140: 2020 2020 2020 2020 2d20 5144 6961 6c6f          - QDialo
+00031150: 672e 6578 6563 0a20 2020 2020 2020 2020  g.exec.         
+00031160: 2020 202d 2051 4d65 7373 6167 6542 6f78     - QMessageBox
+00031170: 2e65 7865 630a 2020 2020 2020 2020 2020  .exec.          
+00031180: 2020 2d20 5150 6c61 696e 5465 7874 4564    - QPlainTextEd
+00031190: 6974 2e74 6f50 6c61 696e 5465 7874 0a20  it.toPlainText. 
+000311a0: 2020 2020 2020 2022 2222 0a0a 2020 2020         """..    
+000311b0: 2020 2020 2320 5365 7473 2073 686f 7274      # Sets short
+000311c0: 6375 7473 2066 6f72 206f 626a 6563 7473  cuts for objects
+000311d0: 2074 6861 7420 6172 6520 6f66 7465 6e20   that are often 
+000311e0: 7573 6564 0a20 2020 2020 2020 206d 6169  used.        mai
+000311f0: 6e5f 776e 6420 3d20 7365 6c66 2e6d 6169  n_wnd = self.mai
+00031200: 6e5f 7769 6e64 6f77 0a20 2020 2020 2020  n_window.       
+00031210: 2070 706c 5f6d 616e 6167 6572 203d 206d   ppl_manager = m
+00031220: 6169 6e5f 776e 642e 7069 7065 6c69 6e65  ain_wnd.pipeline
+00031230: 5f6d 616e 6167 6572 0a0a 2020 2020 2020  _manager..      
+00031240: 2020 2320 4372 6561 7465 7320 6120 6e65    # Creates a ne
+00031250: 7720 7072 6f6a 6563 7420 666f 6c64 6572  w project folder
+00031260: 2061 6e64 2061 6464 7320 6f6e 6520 646f   and adds one do
+00031270: 6375 6d65 6e74 2074 6f20 7468 6520 7072  cument to the pr
+00031280: 6f6a 6563 740a 2020 2020 2020 2020 7072  oject.        pr
+00031290: 6f6a 6563 745f 385f 7061 7468 203d 2073  oject_8_path = s
+000312a0: 656c 662e 6765 745f 6e65 775f 7465 7374  elf.get_new_test
+000312b0: 5f70 726f 6a65 6374 2829 0a20 2020 2020  _project().     
+000312c0: 2020 2070 706c 5f6d 616e 6167 6572 2e70     ppl_manager.p
+000312d0: 726f 6a65 6374 2e66 6f6c 6465 7220 3d20  roject.folder = 
+000312e0: 7072 6f6a 6563 745f 385f 7061 7468 0a0a  project_8_path..
+000312f0: 2020 2020 2020 2020 2320 4d6f 6469 6669          # Modifi
+00031300: 6361 7469 6f6e 206f 6620 736f 6d65 2063  cation of some c
+00031310: 6f6e 6669 6775 7261 7469 6f6e 2070 6172  onfiguration par
+00031320: 616d 6574 6572 730a 2020 2020 2020 2020  ameters.        
+00031330: 636f 6e66 6967 203d 2043 6f6e 6669 6728  config = Config(
+00031340: 636f 6e66 6967 5f70 6174 683d 7365 6c66  config_path=self
+00031350: 2e63 6f6e 6669 675f 7061 7468 290a 2020  .config_path).  
+00031360: 2020 2020 2020 636f 6e66 6967 2e73 6574        config.set
+00031370: 436f 6e74 726f 6c56 3128 5472 7565 290a  ControlV1(True).
+00031380: 2020 2020 2020 2020 636f 6e66 6967 2e73          config.s
+00031390: 6574 4175 746f 5361 7665 2854 7275 6529  etAutoSave(True)
+000313a0: 0a20 2020 2020 2020 2063 6f6e 6669 672e  .        config.
+000313b0: 7365 745f 636c 696e 6963 616c 5f6d 6f64  set_clinical_mod
+000313c0: 6528 5472 7565 290a 2020 2020 2020 2020  e(True).        
+000313d0: 636f 6e66 6967 2e73 6574 5f75 7365 5f66  config.set_use_f
+000313e0: 736c 2854 7275 6529 0a20 2020 2020 2020  sl(True).       
+000313f0: 2063 6f6e 6669 672e 7365 745f 7573 655f   config.set_use_
+00031400: 6166 6e69 2854 7275 6529 0a20 2020 2020  afni(True).     
+00031410: 2020 2063 6f6e 6669 672e 7365 745f 7573     config.set_us
+00031420: 655f 616e 7473 2854 7275 6529 0a20 2020  e_ants(True).   
+00031430: 2020 2020 2063 6f6e 6669 672e 7365 745f       config.set_
+00031440: 6d61 696e 7769 6e64 6f77 5f73 697a 6528  mainwindow_size(
+00031450: 5b31 3030 2c20 3130 302c 2031 3030 5d29  [100, 100, 100])
+00031460: 0a0a 2020 2020 2020 2020 2320 4f70 656e  ..        # Open
+00031470: 2061 6e64 2063 6c6f 7365 2074 6865 2073   and close the s
+00031480: 6f66 7477 6172 6520 7072 6566 6572 656e  oftware preferen
+00031490: 6365 7320 7769 6e64 6f77 0a20 2020 2020  ces window.     
+000314a0: 2020 206d 6169 6e5f 776e 642e 736f 6674     main_wnd.soft
+000314b0: 7761 7265 5f70 7265 6665 7265 6e63 6573  ware_preferences
+000314c0: 5f70 6f70 5f75 7028 290a 2020 2020 2020  _pop_up().      
+000314d0: 2020 6d61 696e 5f77 6e64 2e70 6f70 5f75    main_wnd.pop_u
+000314e0: 705f 7072 6566 6572 656e 6365 732e 636c  p_preferences.cl
+000314f0: 6f73 6528 290a 0a20 2020 2020 2020 2023  ose()..        #
+00031500: 2041 6374 6976 6174 6520 7468 6520 5631   Activate the V1
+00031510: 2063 6f6e 7472 6f6c 6c65 7220 4755 4920   controller GUI 
+00031520: 616e 6420 7468 6520 7573 6572 206d 6f64  and the user mod
+00031530: 650a 2020 2020 2020 2020 636f 6e66 6967  e.        config
+00031540: 2e73 6574 436f 6e74 726f 6c56 3128 4661  .setControlV1(Fa
+00031550: 6c73 6529 0a20 2020 2020 2020 2063 6f6e  lse).        con
+00031560: 6669 672e 7365 745f 7573 6572 5f6d 6f64  fig.set_user_mod
+00031570: 6528 5472 7565 290a 0a20 2020 2020 2020  e(True)..       
+00031580: 2023 2045 6e61 626c 6573 204d 6174 6c61   # Enables Matla
+00031590: 6220 4d43 520a 2020 2020 2020 2020 636f  b MCR.        co
+000315a0: 6e66 6967 2e73 6574 5f75 7365 5f6d 6174  nfig.set_use_mat
+000315b0: 6c61 625f 7374 616e 6461 6c6f 6e65 2854  lab_standalone(T
+000315c0: 7275 6529 0a0a 2020 2020 2020 2020 2320  rue)..        # 
+000315d0: 4368 6563 6b20 7468 6174 206d 6174 6c61  Check that matla
+000315e0: 6220 4d43 5220 6973 2073 656c 6563 7465  b MCR is selecte
+000315f0: 640a 2020 2020 2020 2020 6d61 696e 5f77  d.        main_w
+00031600: 6e64 2e73 6f66 7477 6172 655f 7072 6566  nd.software_pref
+00031610: 6572 656e 6365 735f 706f 705f 7570 2829  erences_pop_up()
+00031620: 0a20 2020 2020 2020 2023 2066 6d74 3a20  .        # fmt: 
+00031630: 6f66 660a 2020 2020 2020 2020 7365 6c66  off.        self
+00031640: 2e61 7373 6572 7454 7275 6528 0a20 2020  .assertTrue(.   
+00031650: 2020 2020 2020 2020 206d 6169 6e5f 776e           main_wn
+00031660: 642e 706f 705f 7570 5f70 7265 6665 7265  d.pop_up_prefere
+00031670: 6e63 6573 2e75 7365 5f6d 6174 6c61 625f  nces.use_matlab_
+00031680: 7374 616e 6461 6c6f 6e65 5f63 6865 636b  standalone_check
+00031690: 626f 782e 0a20 2020 2020 2020 2020 2020  box..           
+000316a0: 2069 7343 6865 636b 6564 2829 0a20 2020   isChecked().   
+000316b0: 2020 2020 2029 0a20 2020 2020 2020 2023       ).        #
+000316c0: 2066 6d74 3a20 6f6e 0a20 2020 2020 2020   fmt: on.       
+000316d0: 206d 6169 6e5f 776e 642e 706f 705f 7570   main_wnd.pop_up
+000316e0: 5f70 7265 6665 7265 6e63 6573 2e63 6c6f  _preferences.clo
+000316f0: 7365 2829 0a0a 2020 2020 2020 2020 2320  se()..        # 
+00031700: 456e 6162 6c65 7320 4d61 746c 6162 0a20  Enables Matlab. 
+00031710: 2020 2020 2020 2063 6f6e 6669 672e 7365         config.se
+00031720: 745f 7573 655f 6d61 746c 6162 2854 7275  t_use_matlab(Tru
+00031730: 6529 0a0a 2020 2020 2020 2020 2320 4368  e)..        # Ch
+00031740: 6563 6b20 7468 6174 206d 6174 6c61 6220  eck that matlab 
+00031750: 6973 2073 656c 6563 7465 6420 616e 6420  is selected and 
+00031760: 6d61 746c 6162 204d 4352 206e 6f74 0a20  matlab MCR not. 
+00031770: 2020 2020 2020 206d 6169 6e5f 776e 642e         main_wnd.
+00031780: 736f 6674 7761 7265 5f70 7265 6665 7265  software_prefere
+00031790: 6e63 6573 5f70 6f70 5f75 7028 290a 2020  nces_pop_up().  
+000317a0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+000317b0: 7454 7275 6528 0a20 2020 2020 2020 2020  tTrue(.         
+000317c0: 2020 206d 6169 6e5f 776e 642e 706f 705f     main_wnd.pop_
+000317d0: 7570 5f70 7265 6665 7265 6e63 6573 2e75  up_preferences.u
+000317e0: 7365 5f6d 6174 6c61 625f 6368 6563 6b62  se_matlab_checkb
+000317f0: 6f78 2e69 7343 6865 636b 6564 2829 0a20  ox.isChecked(). 
+00031800: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00031810: 2023 2066 6d74 3a20 6f66 660a 2020 2020   # fmt: off.    
+00031820: 2020 2020 7365 6c66 2e61 7373 6572 7446      self.assertF
+00031830: 616c 7365 280a 2020 2020 2020 2020 2020  alse(.          
+00031840: 2020 6d61 696e 5f77 6e64 2e70 6f70 5f75    main_wnd.pop_u
+00031850: 705f 7072 6566 6572 656e 6365 732e 7573  p_preferences.us
+00031860: 655f 6d61 746c 6162 5f73 7461 6e64 616c  e_matlab_standal
+00031870: 6f6e 655f 6368 6563 6b62 6f78 2e0a 2020  one_checkbox..  
+00031880: 2020 2020 2020 2020 2020 6973 4368 6563            isChec
+00031890: 6b65 6428 290a 2020 2020 2020 2020 290a  ked().        ).
+000318a0: 2020 2020 2020 2020 2320 666d 743a 206f          # fmt: o
+000318b0: 6e0a 2020 2020 2020 2020 6d61 696e 5f77  n.        main_w
+000318c0: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
+000318d0: 656e 6365 732e 636c 6f73 6528 290a 0a20  ences.close().. 
+000318e0: 2020 2020 2020 2023 2045 6e61 626c 6573         # Enables
+000318f0: 2053 504d 0a20 2020 2020 2020 2063 6f6e   SPM.        con
+00031900: 6669 672e 7365 745f 7573 655f 7370 6d28  fig.set_use_spm(
+00031910: 5472 7565 290a 0a20 2020 2020 2020 2023  True)..        #
+00031920: 2043 6865 636b 2074 6861 7420 5350 4d20   Check that SPM 
+00031930: 616e 6420 6d61 746c 6162 2061 7265 2073  and matlab are s
+00031940: 656c 6563 7465 640a 2020 2020 2020 2020  elected.        
+00031950: 6d61 696e 5f77 6e64 2e73 6f66 7477 6172  main_wnd.softwar
+00031960: 655f 7072 6566 6572 656e 6365 735f 706f  e_preferences_po
+00031970: 705f 7570 2829 0a20 2020 2020 2020 2073  p_up().        s
+00031980: 656c 662e 6173 7365 7274 5472 7565 280a  elf.assertTrue(.
+00031990: 2020 2020 2020 2020 2020 2020 6d61 696e              main
+000319a0: 5f77 6e64 2e70 6f70 5f75 705f 7072 6566  _wnd.pop_up_pref
+000319b0: 6572 656e 6365 732e 7573 655f 6d61 746c  erences.use_matl
+000319c0: 6162 5f63 6865 636b 626f 782e 6973 4368  ab_checkbox.isCh
+000319d0: 6563 6b65 6428 290a 2020 2020 2020 2020  ecked().        
+000319e0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+000319f0: 7373 6572 7454 7275 6528 0a20 2020 2020  ssertTrue(.     
+00031a00: 2020 2020 2020 206d 6169 6e5f 776e 642e         main_wnd.
+00031a10: 706f 705f 7570 5f70 7265 6665 7265 6e63  pop_up_preferenc
+00031a20: 6573 2e75 7365 5f73 706d 5f63 6865 636b  es.use_spm_check
+00031a30: 626f 782e 6973 4368 6563 6b65 6428 290a  box.isChecked().
+00031a40: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00031a50: 2020 6d61 696e 5f77 6e64 2e70 6f70 5f75    main_wnd.pop_u
+00031a60: 705f 7072 6566 6572 656e 6365 732e 636c  p_preferences.cl
+00031a70: 6f73 6528 290a 0a20 2020 2020 2020 2023  ose()..        #
+00031a80: 2045 6e61 626c 6573 2053 504d 2073 7461   Enables SPM sta
+00031a90: 6e64 616c 6f6e 650a 2020 2020 2020 2020  ndalone.        
+00031aa0: 636f 6e66 6967 2e73 6574 5f75 7365 5f73  config.set_use_s
+00031ab0: 706d 5f73 7461 6e64 616c 6f6e 6528 5472  pm_standalone(Tr
+00031ac0: 7565 290a 0a20 2020 2020 2020 2023 2043  ue)..        # C
+00031ad0: 6865 636b 2074 6861 7420 5350 4d20 7374  heck that SPM st
+00031ae0: 616e 6461 6c6f 6e65 2061 6e64 206d 6174  andalone and mat
+00031af0: 6c61 6220 4d43 5220 6172 6520 7365 6c65  lab MCR are sele
+00031b00: 6374 6564 2c0a 2020 2020 2020 2020 2320  cted,.        # 
+00031b10: 5350 4d20 616e 6420 6d61 746c 6162 206e  SPM and matlab n
+00031b20: 6f74 0a20 2020 2020 2020 206d 6169 6e5f  ot.        main_
+00031b30: 776e 642e 736f 6674 7761 7265 5f70 7265  wnd.software_pre
+00031b40: 6665 7265 6e63 6573 5f70 6f70 5f75 7028  ferences_pop_up(
+00031b50: 290a 2020 2020 2020 2020 6966 2022 5769  ).        if "Wi
+00031b60: 6e64 6f77 7322 206e 6f74 2069 6e20 706c  ndows" not in pl
+00031b70: 6174 666f 726d 2e61 7263 6869 7465 6374  atform.architect
+00031b80: 7572 6528 295b 315d 3a0a 2020 2020 2020  ure()[1]:.      
+00031b90: 2020 2020 2020 2320 666d 743a 206f 6666        # fmt: off
+00031ba0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00031bb0: 662e 6173 7365 7274 5472 7565 280a 2020  f.assertTrue(.  
+00031bc0: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
+00031bd0: 696e 5f77 6e64 2e70 6f70 5f75 705f 7072  in_wnd.pop_up_pr
+00031be0: 6566 6572 656e 6365 732e 7573 655f 6d61  eferences.use_ma
+00031bf0: 746c 6162 5f73 7461 6e64 616c 6f6e 655f  tlab_standalone_
+00031c00: 6368 6563 6b62 6f78 2e0a 2020 2020 2020  checkbox..      
+00031c10: 2020 2020 2020 2020 2020 6973 4368 6563            isChec
+00031c20: 6b65 6428 290a 2020 2020 2020 2020 2020  ked().          
+00031c30: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+00031c40: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
+00031c50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00031c60: 206d 6169 6e5f 776e 642e 706f 705f 7570   main_wnd.pop_up
+00031c70: 5f70 7265 6665 7265 6e63 6573 2e75 7365  _preferences.use
+00031c80: 5f73 706d 5f73 7461 6e64 616c 6f6e 655f  _spm_standalone_
+00031c90: 6368 6563 6b62 6f78 2e0a 2020 2020 2020  checkbox..      
+00031ca0: 2020 2020 2020 2020 2020 6973 4368 6563            isChec
+00031cb0: 6b65 6428 290a 2020 2020 2020 2020 2020  ked().          
+00031cc0: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+00031cd0: 2320 666d 743a 206f 6e0a 2020 2020 2020  # fmt: on.      
+00031ce0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00031cf0: 7446 616c 7365 280a 2020 2020 2020 2020  tFalse(.        
+00031d00: 2020 2020 2020 2020 6d61 696e 5f77 6e64          main_wnd
+00031d10: 2e70 6f70 5f75 705f 7072 6566 6572 656e  .pop_up_preferen
+00031d20: 6365 732e 7573 655f 6d61 746c 6162 5f63  ces.use_matlab_c
+00031d30: 6865 636b 626f 782e 6973 4368 6563 6b65  heckbox.isChecke
+00031d40: 6428 290a 2020 2020 2020 2020 2020 2020  d().            
+00031d50: 290a 2020 2020 2020 2020 2020 2020 7365  ).            se
+00031d60: 6c66 2e61 7373 6572 7446 616c 7365 280a  lf.assertFalse(.
+00031d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00031d80: 6d61 696e 5f77 6e64 2e70 6f70 5f75 705f  main_wnd.pop_up_
+00031d90: 7072 6566 6572 656e 6365 732e 7573 655f  preferences.use_
+00031da0: 7370 6d5f 6368 6563 6b62 6f78 2e69 7343  spm_checkbox.isC
+00031db0: 6865 636b 6564 2829 0a20 2020 2020 2020  hecked().       
+00031dc0: 2020 2020 2029 0a20 2020 2020 2020 206d       ).        m
+00031dd0: 6169 6e5f 776e 642e 706f 705f 7570 5f70  ain_wnd.pop_up_p
+00031de0: 7265 6665 7265 6e63 6573 2e63 6c6f 7365  references.close
+00031df0: 2829 0a0a 2020 2020 2020 2020 2320 4d6f  ()..        # Mo
+00031e00: 636b 7320 2751 4669 6c65 4469 616c 6f67  cks 'QFileDialog
+00031e10: 2e67 6574 4f70 656e 4669 6c65 4e61 6d65  .getOpenFileName
+00031e20: 2720 2872 6574 7572 6e73 2061 6e20 6578  ' (returns an ex
+00031e30: 6973 7469 6e67 2066 696c 6529 0a20 2020  isting file).   
+00031e40: 2020 2020 2023 2054 6869 7320 6d65 7468       # This meth
+00031e50: 6f64 2072 6574 7572 6e73 2061 2074 7570  od returns a tup
+00031e60: 6c65 2028 6669 6c65 6e61 6d65 2c20 6669  le (filename, fi
+00031e70: 6c65 5f74 7970 6573 292c 2077 6865 7265  le_types), where
+00031e80: 2066 696c 655f 7479 7065 730a 2020 2020   file_types.    
+00031e90: 2020 2020 2320 6973 2074 6865 2061 6c6c      # is the all
+00031ea0: 6f77 6564 2066 696c 6520 7479 7065 2028  owed file type (
+00031eb0: 6567 2e20 2741 6c6c 2046 696c 6573 2028  eg. 'All Files (
+00031ec0: 2a29 2729 0a20 2020 2020 2020 206d 6f63  *)').        moc
+00031ed0: 6b5f 7061 7468 203d 206f 732e 7061 7468  k_path = os.path
+00031ee0: 2e73 706c 6974 2870 726f 6a65 6374 5f38  .split(project_8
+00031ef0: 5f70 6174 6829 5b30 5d0a 2020 2020 2020  _path)[0].      
+00031f00: 2020 5146 696c 6544 6961 6c6f 672e 6765    QFileDialog.ge
+00031f10: 744f 7065 6e46 696c 654e 616d 6520 3d20  tOpenFileName = 
+00031f20: 6c61 6d62 6461 2078 2c20 792c 207a 3a20  lambda x, y, z: 
+00031f30: 286d 6f63 6b5f 7061 7468 2c29 0a0a 2020  (mock_path,)..  
+00031f40: 2020 2020 2020 2320 4d6f 636b 7320 2751        # Mocks 'Q
+00031f50: 4669 6c65 4469 616c 6f67 2e67 6574 4578  FileDialog.getEx
+00031f60: 6973 7469 6e67 4469 7265 6374 6f72 7927  istingDirectory'
+00031f70: 0a20 2020 2020 2020 2051 4669 6c65 4469  .        QFileDi
+00031f80: 616c 6f67 2e67 6574 4578 6973 7469 6e67  alog.getExisting
+00031f90: 4469 7265 6374 6f72 7920 3d20 6c61 6d62  Directory = lamb
+00031fa0: 6461 2078 2c20 792c 207a 3a20 6d6f 636b  da x, y, z: mock
+00031fb0: 5f70 6174 680a 0a20 2020 2020 2020 2023  _path..        #
+00031fc0: 204f 7065 6e20 7468 6520 736f 6674 7761   Open the softwa
+00031fd0: 7265 2070 7265 6665 7265 6e63 6573 2077  re preferences w
+00031fe0: 696e 646f 770a 2020 2020 2020 2020 6d61  indow.        ma
+00031ff0: 696e 5f77 6e64 2e73 6f66 7477 6172 655f  in_wnd.software_
+00032000: 7072 6566 6572 656e 6365 735f 706f 705f  preferences_pop_
+00032010: 7570 2829 0a0a 2020 2020 2020 2020 2320  up()..        # 
+00032020: 4272 6f77 7365 7320 7468 6520 4653 4c20  Browses the FSL 
+00032030: 7061 7468 0a20 2020 2020 2020 206d 6169  path.        mai
+00032040: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
+00032050: 6665 7265 6e63 6573 2e62 726f 7773 655f  ferences.browse_
+00032060: 6673 6c28 290a 2020 2020 2020 2020 7365  fsl().        se
+00032070: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
+00032080: 2020 2020 2020 2020 2020 2020 6d61 696e              main
+00032090: 5f77 6e64 2e70 6f70 5f75 705f 7072 6566  _wnd.pop_up_pref
+000320a0: 6572 656e 6365 732e 6673 6c5f 6368 6f69  erences.fsl_choi
+000320b0: 6365 2e74 6578 7428 292c 206d 6f63 6b5f  ce.text(), mock_
+000320c0: 7061 7468 0a20 2020 2020 2020 2029 0a0a  path.        )..
+000320d0: 2020 2020 2020 2020 2320 4272 6f77 7365          # Browse
+000320e0: 7320 7468 6520 4146 4e49 2070 6174 680a  s the AFNI path.
+000320f0: 2020 2020 2020 2020 6d61 696e 5f77 6e64          main_wnd
+00032100: 2e70 6f70 5f75 705f 7072 6566 6572 656e  .pop_up_preferen
+00032110: 6365 732e 6272 6f77 7365 5f61 666e 6928  ces.browse_afni(
+00032120: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00032130: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
+00032140: 2020 2020 2020 2020 6d61 696e 5f77 6e64          main_wnd
+00032150: 2e70 6f70 5f75 705f 7072 6566 6572 656e  .pop_up_preferen
+00032160: 6365 732e 6166 6e69 5f63 686f 6963 652e  ces.afni_choice.
+00032170: 7465 7874 2829 2c20 6d6f 636b 5f70 6174  text(), mock_pat
+00032180: 680a 2020 2020 2020 2020 290a 0a20 2020  h.        )..   
+00032190: 2020 2020 2023 2042 726f 7773 6573 2074       # Browses t
+000321a0: 6865 2041 4e54 5320 7061 7468 0a20 2020  he ANTS path.   
+000321b0: 2020 2020 206d 6169 6e5f 776e 642e 706f       main_wnd.po
+000321c0: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
+000321d0: 2e62 726f 7773 655f 616e 7473 2829 0a20  .browse_ants(). 
+000321e0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+000321f0: 7274 4571 7561 6c28 0a20 2020 2020 2020  rtEqual(.       
+00032200: 2020 2020 206d 6169 6e5f 776e 642e 706f       main_wnd.po
+00032210: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
+00032220: 2e61 6e74 735f 6368 6f69 6365 2e74 6578  .ants_choice.tex
+00032230: 7428 292c 206d 6f63 6b5f 7061 7468 0a20  t(), mock_path. 
+00032240: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+00032250: 2020 2320 4272 6f77 7365 7320 7468 6520    # Browses the 
+00032260: 4d41 544c 4142 2070 6174 680a 2020 2020  MATLAB path.    
+00032270: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
+00032280: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
+00032290: 6272 6f77 7365 5f6d 6174 6c61 6228 290a  browse_matlab().
+000322a0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+000322b0: 6572 7445 7175 616c 280a 2020 2020 2020  ertEqual(.      
+000322c0: 2020 2020 2020 6d61 696e 5f77 6e64 2e70        main_wnd.p
+000322d0: 6f70 5f75 705f 7072 6566 6572 656e 6365  op_up_preference
+000322e0: 732e 6d61 746c 6162 5f63 686f 6963 652e  s.matlab_choice.
+000322f0: 7465 7874 2829 2c20 6d6f 636b 5f70 6174  text(), mock_pat
+00032300: 680a 2020 2020 2020 2020 290a 0a20 2020  h.        )..   
+00032310: 2020 2020 2023 2042 726f 7773 6573 2074       # Browses t
+00032320: 6865 204d 4154 4c41 4220 4d43 5220 7061  he MATLAB MCR pa
+00032330: 7468 0a20 2020 2020 2020 206d 6169 6e5f  th.        main_
+00032340: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
+00032350: 7265 6e63 6573 2e62 726f 7773 655f 6d61  rences.browse_ma
+00032360: 746c 6162 5f73 7461 6e64 616c 6f6e 6528  tlab_standalone(
+00032370: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00032380: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
+00032390: 2020 2020 2020 2020 6d61 696e 5f77 6e64          main_wnd
+000323a0: 2e70 6f70 5f75 705f 7072 6566 6572 656e  .pop_up_preferen
+000323b0: 6365 732e 6d61 746c 6162 5f73 7461 6e64  ces.matlab_stand
+000323c0: 616c 6f6e 655f 6368 6f69 6365 2e74 6578  alone_choice.tex
+000323d0: 7428 292c 0a20 2020 2020 2020 2020 2020  t(),.           
+000323e0: 206d 6f63 6b5f 7061 7468 2c0a 2020 2020   mock_path,.    
+000323f0: 2020 2020 290a 0a20 2020 2020 2020 2023      )..        #
+00032400: 2042 726f 7773 6573 2074 6865 2053 504d   Browses the SPM
+00032410: 2070 6174 680a 2020 2020 2020 2020 6d61   path.        ma
+00032420: 696e 5f77 6e64 2e70 6f70 5f75 705f 7072  in_wnd.pop_up_pr
+00032430: 6566 6572 656e 6365 732e 6272 6f77 7365  eferences.browse
+00032440: 5f73 706d 2829 0a20 2020 2020 2020 2073  _spm().        s
+00032450: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00032460: 0a20 2020 2020 2020 2020 2020 206d 6169  .            mai
+00032470: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
+00032480: 6665 7265 6e63 6573 2e73 706d 5f63 686f  ferences.spm_cho
+00032490: 6963 652e 7465 7874 2829 2c20 6d6f 636b  ice.text(), mock
+000324a0: 5f70 6174 680a 2020 2020 2020 2020 290a  _path.        ).
+000324b0: 0a20 2020 2020 2020 2023 2042 726f 7773  .        # Brows
+000324c0: 6573 2074 6865 2053 504d 2053 7461 6e64  es the SPM Stand
+000324d0: 616c 6f6e 6520 7061 7468 0a20 2020 2020  alone path.     
+000324e0: 2020 206d 6169 6e5f 776e 642e 706f 705f     main_wnd.pop_
+000324f0: 7570 5f70 7265 6665 7265 6e63 6573 2e62  up_preferences.b
+00032500: 726f 7773 655f 7370 6d5f 7374 616e 6461  rowse_spm_standa
+00032510: 6c6f 6e65 2829 0a20 2020 2020 2020 2073  lone().        s
+00032520: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00032530: 0a20 2020 2020 2020 2020 2020 206d 6169  .            mai
+00032540: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
+00032550: 6665 7265 6e63 6573 2e73 706d 5f73 7461  ferences.spm_sta
+00032560: 6e64 616c 6f6e 655f 6368 6f69 6365 2e74  ndalone_choice.t
+00032570: 6578 7428 292c 206d 6f63 6b5f 7061 7468  ext(), mock_path
+00032580: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+00032590: 2020 2020 2320 4272 6f77 7365 7320 7468      # Browses th
+000325a0: 6520 4d72 6943 6f6e 7620 7061 7468 0a20  e MriConv path. 
+000325b0: 2020 2020 2020 206d 6169 6e5f 776e 642e         main_wnd.
+000325c0: 706f 705f 7570 5f70 7265 6665 7265 6e63  pop_up_preferenc
+000325d0: 6573 2e62 726f 7773 655f 6d72 695f 636f  es.browse_mri_co
+000325e0: 6e76 5f70 6174 6828 290a 2020 2020 2020  nv_path().      
+000325f0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00032600: 616c 280a 2020 2020 2020 2020 2020 2020  al(.            
+00032610: 6d61 696e 5f77 6e64 2e70 6f70 5f75 705f  main_wnd.pop_up_
+00032620: 7072 6566 6572 656e 6365 732e 6d72 695f  preferences.mri_
+00032630: 636f 6e76 5f70 6174 685f 6c69 6e65 5f65  conv_path_line_e
+00032640: 6469 742e 7465 7874 2829 2c0a 2020 2020  dit.text(),.    
+00032650: 2020 2020 2020 2020 6d6f 636b 5f70 6174          mock_pat
+00032660: 682c 0a20 2020 2020 2020 2029 0a0a 2020  h,.        )..  
+00032670: 2020 2020 2020 2320 4272 6f77 7365 7220        # Browser 
+00032680: 7468 6520 7072 6f6a 6563 7473 2073 6176  the projects sav
+00032690: 6520 7061 7468 0a20 2020 2020 2020 206d  e path.        m
+000326a0: 6169 6e5f 776e 642e 706f 705f 7570 5f70  ain_wnd.pop_up_p
+000326b0: 7265 6665 7265 6e63 6573 2e62 726f 7773  references.brows
+000326c0: 655f 7072 6f6a 6563 7473 5f73 6176 655f  e_projects_save_
+000326d0: 7061 7468 2829 0a20 2020 2020 2020 2073  path().        s
+000326e0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+000326f0: 0a20 2020 2020 2020 2020 2020 206d 6169  .            mai
+00032700: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
+00032710: 6665 7265 6e63 6573 2e70 726f 6a65 6374  ferences.project
+00032720: 735f 7361 7665 5f70 6174 685f 6c69 6e65  s_save_path_line
+00032730: 5f65 6469 742e 7465 7874 2829 2c0a 2020  _edit.text(),.  
+00032740: 2020 2020 2020 2020 2020 6d6f 636b 5f70            mock_p
+00032750: 6174 682c 0a20 2020 2020 2020 2029 0a0a  ath,.        )..
+00032760: 2020 2020 2020 2020 2320 5365 7473 2074          # Sets t
+00032770: 6865 2061 646d 696e 2070 6173 7377 6f72  he admin passwor
+00032780: 6420 746f 2062 6520 276d 6f63 6b5f 6164  d to be 'mock_ad
+00032790: 6d69 6e5f 7061 7373 776f 7264 270a 2020  min_password'.  
+000327a0: 2020 2020 2020 6164 6d69 6e5f 7061 7373        admin_pass
+000327b0: 776f 7264 203d 2022 6d6f 636b 5f61 646d  word = "mock_adm
+000327c0: 696e 5f70 6173 7377 6f72 6422 0a20 2020  in_password".   
+000327d0: 2020 2020 206f 6c64 5f70 7373 7764 203d       old_psswd =
+000327e0: 206d 6169 6e5f 776e 642e 706f 705f 7570   main_wnd.pop_up
+000327f0: 5f70 7265 6665 7265 6e63 6573 2e73 616c  _preferences.sal
+00032800: 7420 2b20 6164 6d69 6e5f 7061 7373 776f  t + admin_passwo
+00032810: 7264 0a20 2020 2020 2020 2068 6173 685f  rd.        hash_
+00032820: 7073 7377 6420 3d20 7368 6132 3536 286f  psswd = sha256(o
+00032830: 6c64 5f70 7373 7764 2e65 6e63 6f64 6528  ld_psswd.encode(
+00032840: 2929 2e68 6578 6469 6765 7374 2829 0a20  )).hexdigest(). 
+00032850: 2020 2020 2020 2063 6f6e 6669 672e 7365         config.se
+00032860: 745f 6164 6d69 6e5f 6861 7368 2868 6173  t_admin_hash(has
+00032870: 685f 7073 7377 6429 0a0a 2020 2020 2020  h_psswd)..      
+00032880: 2020 2320 4361 6c6c 7320 2761 646d 696e    # Calls 'admin
+00032890: 5f6d 6f64 655f 7377 6974 6368 2720 7769  _mode_switch' wi
+000328a0: 7468 6f75 7420 6368 6563 6b69 6e67 2074  thout checking t
+000328b0: 6865 2062 6f78 0a20 2020 2020 2020 206d  he box.        m
+000328c0: 6169 6e5f 776e 642e 706f 705f 7570 5f70  ain_wnd.pop_up_p
+000328d0: 7265 6665 7265 6e63 6573 2e61 646d 696e  references.admin
+000328e0: 5f6d 6f64 655f 7377 6974 6368 2829 0a0a  _mode_switch()..
+000328f0: 2020 2020 2020 2020 2320 4361 6c6c 7320          # Calls 
+00032900: 2761 646d 696e 5f6d 6f64 655f 7377 6974  'admin_mode_swit
+00032910: 6368 272c 206d 6f63 6b69 6e67 2074 6865  ch', mocking the
+00032920: 2065 7865 6375 7469 6f6e 206f 6620 2751   execution of 'Q
+00032930: 496e 7075 7444 6961 6c6f 6727 0a20 2020  InputDialog'.   
+00032940: 2020 2020 206d 6169 6e5f 776e 642e 706f       main_wnd.po
+00032950: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
+00032960: 2e61 646d 696e 5f6d 6f64 655f 6368 6563  .admin_mode_chec
+00032970: 6b62 6f78 2e73 6574 4368 6563 6b65 6428  kbox.setChecked(
+00032980: 5472 7565 290a 2020 2020 2020 2020 5149  True).        QI
+00032990: 6e70 7574 4469 616c 6f67 2e67 6574 5465  nputDialog.getTe
+000329a0: 7874 203d 206c 616d 6264 6120 772c 2078  xt = lambda w, x
+000329b0: 2c20 792c 207a 3a20 284e 6f6e 652c 2046  , y, z: (None, F
+000329c0: 616c 7365 290a 2020 2020 2020 2020 6d61  alse).        ma
+000329d0: 696e 5f77 6e64 2e70 6f70 5f75 705f 7072  in_wnd.pop_up_pr
+000329e0: 6566 6572 656e 6365 732e 6164 6d69 6e5f  eferences.admin_
+000329f0: 6d6f 6465 5f73 7769 7463 6828 290a 0a20  mode_switch().. 
+00032a00: 2020 2020 2020 2023 2054 7269 6573 2074         # Tries t
+00032a10: 6f20 6163 7469 7661 7465 2061 646d 696e  o activate admin
+00032a20: 206d 6f64 6520 7769 7468 2074 6865 2077   mode with the w
+00032a30: 726f 6e67 2070 6173 7377 6f72 640a 2020  rong password.  
+00032a40: 2020 2020 2020 6d61 696e 5f77 6e64 2e70        main_wnd.p
+00032a50: 6f70 5f75 705f 7072 6566 6572 656e 6365  op_up_preference
+00032a60: 732e 6164 6d69 6e5f 6d6f 6465 5f63 6865  s.admin_mode_che
+00032a70: 636b 626f 782e 7365 7443 6865 636b 6564  ckbox.setChecked
+00032a80: 2854 7275 6529 0a20 2020 2020 2020 2051  (True).        Q
+00032a90: 496e 7075 7444 6961 6c6f 672e 6765 7454  InputDialog.getT
+00032aa0: 6578 7420 3d20 6c61 6d62 6461 2077 2c20  ext = lambda w, 
+00032ab0: 782c 2079 2c20 7a3a 2028 0a20 2020 2020  x, y, z: (.     
+00032ac0: 2020 2020 2020 2022 6d6f 636b 5f77 726f         "mock_wro
+00032ad0: 6e67 5f70 6173 7377 6f72 6422 2c0a 2020  ng_password",.  
+00032ae0: 2020 2020 2020 2020 2020 5472 7565 2c0a            True,.
+00032af0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00032b00: 2020 6d61 696e 5f77 6e64 2e70 6f70 5f75    main_wnd.pop_u
+00032b10: 705f 7072 6566 6572 656e 6365 732e 6164  p_preferences.ad
+00032b20: 6d69 6e5f 6d6f 6465 5f73 7769 7463 6828  min_mode_switch(
+00032b30: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00032b40: 7373 6572 7446 616c 7365 286d 6169 6e5f  ssertFalse(main_
+00032b50: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
+00032b60: 7265 6e63 6573 2e63 6861 6e67 655f 7073  rences.change_ps
+00032b70: 7377 642e 6973 5669 7369 626c 6528 2929  swd.isVisible())
+00032b80: 0a0a 2020 2020 2020 2020 2320 4163 7469  ..        # Acti
+00032b90: 7661 7465 7320 6164 6d69 6e20 6d6f 6465  vates admin mode
+00032ba0: 2077 6974 6820 7468 6520 636f 7272 6563   with the correc
+00032bb0: 7420 7061 7373 776f 7264 0a20 2020 2020  t password.     
+00032bc0: 2020 2051 496e 7075 7444 6961 6c6f 672e     QInputDialog.
+00032bd0: 6765 7454 6578 7420 3d20 6c61 6d62 6461  getText = lambda
+00032be0: 2077 2c20 782c 2079 2c20 7a3a 2028 6164   w, x, y, z: (ad
+00032bf0: 6d69 6e5f 7061 7373 776f 7264 2c20 5472  min_password, Tr
+00032c00: 7565 290a 2020 2020 2020 2020 6d61 696e  ue).        main
+00032c10: 5f77 6e64 2e70 6f70 5f75 705f 7072 6566  _wnd.pop_up_pref
+00032c20: 6572 656e 6365 732e 6164 6d69 6e5f 6d6f  erences.admin_mo
+00032c30: 6465 5f63 6865 636b 626f 782e 7365 7443  de_checkbox.setC
+00032c40: 6865 636b 6564 2854 7275 6529 0a20 2020  hecked(True).   
+00032c50: 2020 2020 206d 6169 6e5f 776e 642e 706f       main_wnd.po
+00032c60: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
+00032c70: 2e61 646d 696e 5f6d 6f64 655f 7377 6974  .admin_mode_swit
+00032c80: 6368 2829 0a20 2020 2020 2020 2073 656c  ch().        sel
+00032c90: 662e 6173 7365 7274 5472 7565 286d 6169  f.assertTrue(mai
+00032ca0: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
+00032cb0: 6665 7265 6e63 6573 2e63 6861 6e67 655f  ferences.change_
+00032cc0: 7073 7377 642e 6973 5669 7369 626c 6528  psswd.isVisible(
+00032cd0: 2929 0a0a 2020 2020 2020 2020 2320 4d6f  ))..        # Mo
+00032ce0: 636b 7320 7468 6520 6f6c 6420 7061 7373  cks the old pass
+00032cf0: 7764 2074 6578 7420 6669 656c 6420 746f  wd text field to
+00032d00: 2062 6520 276d 6f63 6b5f 6164 6d69 6e5f   be 'mock_admin_
+00032d10: 7061 7373 776f 7264 270a 2020 2020 2020  password'.      
+00032d20: 2020 2320 2861 6e64 2074 6865 206f 7468    # (and the oth
+00032d30: 6572 2074 6578 7466 6965 6c64 7320 746f  er textfields to
+00032d40: 6f21 290a 2020 2020 2020 2020 2320 514c  o!).        # QL
+00032d50: 696e 6545 6469 742e 7465 7874 203d 206c  ineEdit.text = l
+00032d60: 616d 6264 6120 783a 2061 646d 696e 5f70  ambda x: admin_p
+00032d70: 6173 7377 6f72 640a 0a20 2020 2020 2020  assword..       
+00032d80: 2023 2043 6861 6e67 6573 2074 6865 2061   # Changes the a
+00032d90: 646d 696e 2070 6173 7377 6f72 640a 2020  dmin password.  
+00032da0: 2020 2020 2020 5144 6961 6c6f 672e 6578        QDialog.ex
+00032db0: 6563 203d 206c 616d 6264 6120 783a 2046  ec = lambda x: F
+00032dc0: 616c 7365 0a20 2020 2020 2020 206d 6169  alse.        mai
+00032dd0: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
+00032de0: 6665 7265 6e63 6573 2e63 6861 6e67 655f  ferences.change_
+00032df0: 6164 6d69 6e5f 7073 7377 6428 2222 290a  admin_psswd("").
+00032e00: 2020 2020 2020 2020 2320 5144 6961 6c6f          # QDialo
+00032e10: 672e 6578 6563 203d 206c 616d 6264 6120  g.exec = lambda 
+00032e20: 783a 2054 7275 650a 2020 2020 2020 2020  x: True.        
+00032e30: 2320 6d61 696e 5f77 6e64 2e70 6f70 5f75  # main_wnd.pop_u
+00032e40: 705f 7072 6566 6572 656e 6365 732e 6368  p_preferences.ch
+00032e50: 616e 6765 5f61 646d 696e 5f70 7373 7764  ange_admin_psswd
+00032e60: 2827 2729 0a0a 2020 2020 2020 2020 2320  ('')..        # 
+00032e70: 5368 6f77 7320 6120 7772 6f6e 6720 7061  Shows a wrong pa
+00032e80: 7468 2070 6f70 2d75 7020 6d65 7373 6167  th pop-up messag
+00032e90: 650a 2020 2020 2020 2020 6d61 696e 5f77  e.        main_w
+00032ea0: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
+00032eb0: 656e 6365 732e 7772 6f6e 675f 7061 7468  ences.wrong_path
+00032ec0: 280a 2020 2020 2020 2020 2020 2020 222f  (.            "/
+00032ed0: 6d6f 636b 5f70 6174 6822 2c20 226d 6f63  mock_path", "moc
+00032ee0: 6b5f 746f 6f6c 222c 2065 7874 7261 5f6d  k_tool", extra_m
+00032ef0: 6573 733d 226d 6f63 6b5f 6d73 6722 0a20  ess="mock_msg". 
+00032f00: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00032f10: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
+00032f20: 2868 6173 6174 7472 286d 6169 6e5f 776e  (hasattr(main_wn
+00032f30: 642e 706f 705f 7570 5f70 7265 6665 7265  d.pop_up_prefere
+00032f40: 6e63 6573 2c20 226d 7367 2229 290a 2020  nces, "msg")).  
+00032f50: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00032f60: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
+00032f70: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
+00032f80: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
+00032f90: 6d73 672e 6963 6f6e 2829 2c20 514d 6573  msg.icon(), QMes
+00032fa0: 7361 6765 426f 782e 4372 6974 6963 616c  sageBox.Critical
+00032fb0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00032fc0: 2020 206d 6169 6e5f 776e 642e 706f 705f     main_wnd.pop_
+00032fd0: 7570 5f70 7265 6665 7265 6e63 6573 2e6d  up_preferences.m
+00032fe0: 7367 2e63 6c6f 7365 2829 0a0a 2020 2020  sg.close()..    
+00032ff0: 2020 2020 2320 5365 7473 2074 6865 206d      # Sets the m
+00033000: 6169 6e20 7769 6e64 6f77 2073 697a 650a  ain window size.
+00033010: 2020 2020 2020 2020 6d61 696e 5f77 6e64          main_wnd
+00033020: 2e70 6f70 5f75 705f 7072 6566 6572 656e  .pop_up_preferen
+00033030: 6365 732e 7573 655f 6375 7272 656e 745f  ces.use_current_
+00033040: 6d61 696e 7769 6e64 6f77 5f73 697a 6528  mainwindow_size(
+00033050: 6d61 696e 5f77 6e64 290a 0a20 2020 2020  main_wnd)..     
+00033060: 2020 2023 204d 6f63 6b73 2074 6865 2063     # Mocks the c
+00033070: 6c69 636b 206f 6620 7468 6520 4f4b 2062  lick of the OK b
+00033080: 7574 746f 6e20 6f6e 2027 514d 6573 7361  utton on 'QMessa
+00033090: 6765 426f 782e 6578 6563 270a 2020 2020  geBox.exec'.    
+000330a0: 2020 2020 514d 6573 7361 6765 426f 782e      QMessageBox.
+000330b0: 6578 6563 203d 206c 616d 6264 6120 783a  exec = lambda x:
+000330c0: 2051 4d65 7373 6167 6542 6f78 2e59 6573   QMessageBox.Yes
+000330d0: 0a0a 2020 2020 2020 2020 2320 5072 6f67  ..        # Prog
+000330e0: 7261 6d73 2074 6865 2063 6f6e 7472 6f6c  rams the control
+000330f0: 6c65 7220 7665 7273 696f 6e20 746f 2063  ler version to c
+00033100: 6861 6e67 6520 746f 2056 310a 2020 2020  hange to V1.    
+00033110: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
+00033120: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
+00033130: 636f 6e74 726f 6c5f 6368 6563 6b62 6f78  control_checkbox
+00033140: 5f74 6f67 676c 6564 286d 6169 6e5f 776e  _toggled(main_wn
+00033150: 6429 0a20 2020 2020 2020 206d 6169 6e5f  d).        main_
+00033160: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
+00033170: 7265 6e63 6573 2e63 6f6e 7472 6f6c 5f63  rences.control_c
+00033180: 6865 636b 626f 785f 6368 616e 6765 6420  heckbox_changed 
+00033190: 3d20 5472 7565 0a20 2020 2020 2020 2073  = True.        s
+000331a0: 656c 662e 6173 7365 7274 5472 7565 286d  elf.assertTrue(m
+000331b0: 6169 6e5f 776e 642e 6765 745f 636f 6e74  ain_wnd.get_cont
+000331c0: 726f 6c6c 6572 5f76 6572 7369 6f6e 2829  roller_version()
+000331d0: 290a 0a20 2020 2020 2020 2023 2043 616e  )..        # Can
+000331e0: 6365 6c73 2074 6865 2061 626f 7665 2063  cels the above c
+000331f0: 6861 6e67 650a 2020 2020 2020 2020 6d61  hange.        ma
+00033200: 696e 5f77 6e64 2e70 6f70 5f75 705f 7072  in_wnd.pop_up_pr
+00033210: 6566 6572 656e 6365 732e 636f 6e74 726f  eferences.contro
+00033220: 6c5f 6368 6563 6b62 6f78 5f74 6f67 676c  l_checkbox_toggl
+00033230: 6564 286d 6169 6e5f 776e 6429 0a20 2020  ed(main_wnd).   
+00033240: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00033250: 4661 6c73 6528 6d61 696e 5f77 6e64 2e67  False(main_wnd.g
+00033260: 6574 5f63 6f6e 7472 6f6c 6c65 725f 7665  et_controller_ve
+00033270: 7273 696f 6e28 2929 0a0a 2020 2020 2020  rsion())..      
+00033280: 2020 2320 4564 6974 7320 7468 6520 4361    # Edits the Ca
+00033290: 7073 756c 2063 6f6e 6669 6720 6669 6c65  psul config file
+000332a0: 0a20 2020 2020 2020 2023 2051 4469 616c  .        # QDial
+000332b0: 6f67 2e65 7865 6320 3d20 6c61 6d62 6461  og.exec = lambda
+000332c0: 2078 3a20 4661 6c73 650a 2020 2020 2020   x: False.      
+000332d0: 2020 2320 6361 7073 756c 5f65 6e67 696e    # capsul_engin
+000332e0: 652e 6c6f 6164 203d 206c 616d 6264 6120  e.load = lambda 
+000332f0: 783a 2054 7275 650a 2020 2020 2020 2020  x: True.        
+00033300: 2320 6d61 696e 5f77 6e64 2e70 6f70 5f75  # main_wnd.pop_u
+00033310: 705f 7072 6566 6572 656e 6365 732e 6564  p_preferences.ed
+00033320: 6974 5f63 6170 7375 6c5f 636f 6e66 6967  it_capsul_config
+00033330: 2829 0a0a 2020 2020 2020 2020 2320 4d6f  ()..        # Mo
+00033340: 636b 7320 616e 2065 7863 6570 7469 6f6e  cks an exception
+00033350: 2069 6e20 7468 6520 5144 6961 6c6f 6720   in the QDialog 
+00033360: 6578 6563 7574 696f 6e0a 2020 2020 2020  execution.      
+00033370: 2020 2320 6578 635f 3120 3d20 6c61 6d62    # exc_1 = lamb
+00033380: 6461 2078 3a20 285f 2066 6f72 205f 2069  da x: (_ for _ i
+00033390: 6e20 2829 292e 7468 726f 7728 4578 6365  n ()).throw(Exce
+000333a0: 7074 696f 6e28 276d 6f63 6b20 6578 6365  ption('mock exce
+000333b0: 7074 696f 6e27 2929 0a20 2020 2020 2020  ption')).       
+000333c0: 2023 2051 4469 616c 6f67 2e65 7865 6320   # QDialog.exec 
+000333d0: 3d20 6578 635f 310a 2020 2020 2020 2020  = exc_1.        
+000333e0: 2320 6d61 696e 5f77 6e64 2e70 6f70 5f75  # main_wnd.pop_u
+000333f0: 705f 7072 6566 6572 656e 6365 732e 6564  p_preferences.ed
+00033400: 6974 5f63 6170 7375 6c5f 636f 6e66 6967  it_capsul_config
+00033410: 2829 0a0a 2020 2020 2020 2020 2320 4d6f  ()..        # Mo
+00033420: 636b 7320 616e 2065 7863 6570 7469 6f6e  cks an exception
+00033430: 2069 6e20 7468 6520 2773 6574 5f63 6170   in the 'set_cap
+00033440: 7375 6c5f 636f 6e66 6967 2720 6361 6c6c  sul_config' call
+00033450: 0a20 2020 2020 2020 2023 2051 4469 616c  .        # QDial
+00033460: 6f67 2e65 7865 6320 3d20 6c61 6d62 6461  og.exec = lambda
+00033470: 2078 3a20 5472 7565 0a20 2020 2020 2020   x: True.       
+00033480: 2023 2065 7863 5f32 203d 206c 616d 6264   # exc_2 = lambd
+00033490: 6120 782c 2079 3a20 285f 2066 6f72 205f  a x, y: (_ for _
+000334a0: 2069 6e20 2829 292e 7468 726f 7728 4578   in ()).throw(Ex
+000334b0: 6365 7074 696f 6e28 0a20 2020 2020 2020  ception(.       
+000334c0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+000334d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000334e0: 2020 2020 2020 2020 2020 2020 2020 276d                'm
+000334f0: 6f63 6b20 6578 6365 7074 696f 6e27 2929  ock exception'))
+00033500: 0a20 2020 2020 2020 2023 2043 6f6e 6669  .        # Confi
+00033510: 672e 7365 745f 6361 7073 756c 5f63 6f6e  g.set_capsul_con
+00033520: 6669 6720 3d20 6578 635f 320a 2020 2020  fig = exc_2.    
+00033530: 2020 2020 2320 6d61 696e 5f77 6e64 2e70      # main_wnd.p
+00033540: 6f70 5f75 705f 7072 6566 6572 656e 6365  op_up_preference
+00033550: 732e 6564 6974 5f63 6170 7375 6c5f 636f  s.edit_capsul_co
+00033560: 6e66 6967 2829 0a20 2020 2020 2020 2023  nfig().        #
+00033570: 2046 4958 4d45 3a20 6661 696c 696e 6720   FIXME: failing 
+00033580: 696e 204d 6163 4f53 2062 7569 6c64 0a0a  in MacOS build..
+00033590: 2020 2020 2020 2020 2320 436c 6f73 6520          # Close 
+000335a0: 7468 6520 736f 6674 7761 7265 2070 7265  the software pre
+000335b0: 6665 7265 6e63 6573 2077 696e 646f 770a  ferences window.
+000335c0: 2020 2020 2020 2020 6d61 696e 5f77 6e64          main_wnd
+000335d0: 2e70 6f70 5f75 705f 7072 6566 6572 656e  .pop_up_preferen
+000335e0: 6365 732e 636c 6f73 6528 290a 0a20 2020  ces.close()..   
+000335f0: 2064 6566 2074 6573 745f 736f 6674 7761   def test_softwa
+00033600: 7265 5f70 7265 6665 7265 6e63 6573 5f70  re_preferences_p
+00033610: 6f70 5f75 705f 636f 6e66 6967 5f66 696c  op_up_config_fil
+00033620: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
+00033630: 2022 2222 4f70 656e 7320 7468 6520 7072   """Opens the pr
+00033640: 6566 6572 656e 6365 7320 706f 7020 7570  eferences pop up
+00033650: 2061 6e64 2063 6861 6e67 6573 2070 6172   and changes par
+00033660: 616d 6574 6572 7320 746f 2065 6469 7420  ameters to edit 
+00033670: 7468 650a 2020 2020 2020 2020 636f 6e66  the.        conf
+00033680: 6967 2066 696c 6520 616e 6420 6361 7073  ig file and caps
+00033690: 756c 2063 6f6e 6669 6720 6669 6c65 2e0a  ul config file..
+000336a0: 0a20 2020 2020 2020 202d 5465 7374 733a  .        -Tests:
+000336b0: 0a20 2020 2020 2020 2020 2020 202d 2050  .            - P
+000336c0: 6f70 5570 5072 6566 6572 656e 6365 732e  opUpPreferences.
+000336d0: 6564 6974 5f63 6f6e 6669 675f 6669 6c65  edit_config_file
+000336e0: 0a20 2020 2020 2020 2020 2020 202d 2050  .            - P
+000336f0: 6f70 5570 5072 6566 6572 656e 6365 732e  opUpPreferences.
+00033700: 6669 6e64 4368 6172 0a20 2020 2020 2020  findChar.       
+00033710: 2020 2020 202d 2050 6f70 5570 5072 6566       - PopUpPref
+00033720: 6572 656e 6365 732e 6564 6974 5f63 6170  erences.edit_cap
+00033730: 7375 6c5f 636f 6e66 6967 0a0a 2020 2020  sul_config..    
+00033740: 2020 2020 2d20 4d6f 636b 730a 2020 2020      - Mocks.    
+00033750: 2020 2020 2020 2020 2d20 436f 6e66 6967          - Config
+00033760: 2e73 6574 5f63 6170 7375 6c5f 636f 6e66  .set_capsul_conf
+00033770: 6967 0a20 2020 2020 2020 2020 2020 202d  ig.            -
+00033780: 2051 4469 616c 6f67 2e65 7865 630a 2020   QDialog.exec.  
+00033790: 2020 2020 2020 2020 2020 2d20 5365 7474            - Sett
+000337a0: 696e 6773 4564 6974 6f72 2e75 7064 6174  ingsEditor.updat
+000337b0: 655f 6775 690a 2020 2020 2020 2020 2222  e_gui.        ""
+000337c0: 220a 0a20 2020 2020 2020 2023 2053 6574  "..        # Set
+000337d0: 7320 7368 6f72 7463 7574 7320 666f 7220  s shortcuts for 
+000337e0: 6f62 6a65 6374 7320 7468 6174 2061 7265  objects that are
+000337f0: 206f 6674 656e 2075 7365 640a 2020 2020   often used.    
+00033800: 2020 2020 6d61 696e 5f77 6e64 203d 2073      main_wnd = s
+00033810: 656c 662e 6d61 696e 5f77 696e 646f 770a  elf.main_window.
+00033820: 0a20 2020 2020 2020 2023 204d 6f63 6b73  .        # Mocks
+00033830: 2074 6865 2065 7865 6375 7469 6f6e 206f   the execution o
+00033840: 6620 2750 6f70 5570 5072 6566 6572 656e  f 'PopUpPreferen
+00033850: 6365 7327 2074 6f20 7370 6565 6420 7570  ces' to speed up
+00033860: 2074 6865 2074 6573 740a 2020 2020 2020   the test.      
+00033870: 2020 2320 506f 7055 7050 7265 6665 7265    # PopUpPrefere
+00033880: 6e63 6573 2e73 686f 7720 3d20 6c61 6d62  nces.show = lamb
+00033890: 6461 2078 3a20 4e6f 6e65 0a0a 2020 2020  da x: None..    
+000338a0: 2020 2020 6d61 696e 5f77 6e64 2e73 6f66      main_wnd.sof
+000338b0: 7477 6172 655f 7072 6566 6572 656e 6365  tware_preference
+000338c0: 735f 706f 705f 7570 2829 0a0a 2020 2020  s_pop_up()..    
+000338d0: 2020 2020 2320 5472 6965 7320 746f 2065      # Tries to e
+000338e0: 6469 7420 7468 6520 636f 6e66 6967 2066  dit the config f
+000338f0: 696c 652c 206d 6f63 6b73 2066 6169 6c75  ile, mocks failu
+00033900: 7265 2069 6e20 2751 4469 616c 6f67 2e65  re in 'QDialog.e
+00033910: 7865 6327 0a20 2020 2020 2020 2051 4469  xec'.        QDi
+00033920: 616c 6f67 2e65 7865 6320 3d20 6c61 6d62  alog.exec = lamb
+00033930: 6461 2078 3a20 4661 6c73 650a 2020 2020  da x: False.    
+00033940: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
+00033950: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
+00033960: 6564 6974 5f63 6f6e 6669 675f 6669 6c65  edit_config_file
+00033970: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
+00033980: 6173 7365 7274 5472 7565 2868 6173 6174  assertTrue(hasat
+00033990: 7472 286d 6169 6e5f 776e 642e 706f 705f  tr(main_wnd.pop_
+000339a0: 7570 5f70 7265 6665 7265 6e63 6573 2c20  up_preferences, 
+000339b0: 2265 6469 7443 6f6e 6622 2929 0a0a 2020  "editConf"))..  
+000339c0: 2020 2020 2020 2320 4d6f 636b 7320 7468        # Mocks th
+000339d0: 6520 6578 6563 7574 696f 6e20 746f 2063  e execution to c
+000339e0: 6861 6e67 6520 2775 7365 725f 6d6f 6465  hange 'user_mode
+000339f0: 2720 6672 6f6d 2027 6661 6c73 6527 2074  ' from 'false' t
+00033a00: 6f20 2774 7275 6527 0a20 2020 2020 2020  o 'true'.       
+00033a10: 2064 6566 206d 6f63 6b5f 6578 6563 2878   def mock_exec(x
+00033a20: 293a 0a20 2020 2020 2020 2020 2020 2022  ):.            "
+00033a30: 2222 626c 6162 6c61 2222 220a 2020 2020  ""blabla""".    
+00033a40: 2020 2020 2020 2020 636f 6e66 6967 5f66          config_f
+00033a50: 696c 6520 3d20 280a 2020 2020 2020 2020  ile = (.        
+00033a60: 2020 2020 2020 2020 6d61 696e 5f77 6e64          main_wnd
+00033a70: 2e70 6f70 5f75 705f 7072 6566 6572 656e  .pop_up_preferen
+00033a80: 6365 732e 6564 6974 436f 6e66 2e74 7874  ces.editConf.txt
+00033a90: 2e74 6f50 6c61 696e 5465 7874 2829 0a20  .toPlainText(). 
+00033aa0: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00033ab0: 2020 2020 2020 2020 2063 6f6e 6669 675f           config_
+00033ac0: 6669 6c65 203d 2063 6f6e 6669 675f 6669  file = config_fi
+00033ad0: 6c65 2e72 6570 6c61 6365 280a 2020 2020  le.replace(.    
+00033ae0: 2020 2020 2020 2020 2020 2020 2275 7365              "use
+00033af0: 725f 6d6f 6465 3a20 6661 6c73 6522 2c20  r_mode: false", 
+00033b00: 2275 7365 725f 6d6f 6465 3a20 7472 7565  "user_mode: true
+00033b10: 220a 2020 2020 2020 2020 2020 2020 290a  ".            ).
+00033b20: 2020 2020 2020 2020 2020 2020 6d61 696e              main
+00033b30: 5f77 6e64 2e70 6f70 5f75 705f 7072 6566  _wnd.pop_up_pref
+00033b40: 6572 656e 6365 732e 6564 6974 436f 6e66  erences.editConf
+00033b50: 2e74 7874 2e73 6574 506c 6169 6e54 6578  .txt.setPlainTex
+00033b60: 7428 636f 6e66 6967 5f66 696c 6529 0a20  t(config_file). 
+00033b70: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00033b80: 6e20 5472 7565 0a0a 2020 2020 2020 2020  n True..        
+00033b90: 5144 6961 6c6f 672e 6578 6563 203d 206d  QDialog.exec = m
+00033ba0: 6f63 6b5f 6578 6563 0a0a 2020 2020 2020  ock_exec..      
+00033bb0: 2020 2320 4173 7365 7274 7320 7468 6174    # Asserts that
+00033bc0: 2074 6865 2027 436f 6e66 6967 2720 6f62   the 'Config' ob
+00033bd0: 6a65 6374 2077 6173 2075 7064 6174 6564  ject was updated
+00033be0: 0a20 2020 2020 2020 206d 6169 6e5f 776e  .        main_wn
+00033bf0: 642e 706f 705f 7570 5f70 7265 6665 7265  d.pop_up_prefere
+00033c00: 6e63 6573 2e65 6469 745f 636f 6e66 6967  nces.edit_config
+00033c10: 5f66 696c 6528 290a 2020 2020 2020 2020  _file().        
+00033c20: 636f 6e66 6967 203d 2043 6f6e 6669 6728  config = Config(
+00033c30: 636f 6e66 6967 5f70 6174 683d 7365 6c66  config_path=self
+00033c40: 2e63 6f6e 6669 675f 7061 7468 290a 2020  .config_path).  
+00033c50: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00033c60: 7454 7275 6528 636f 6e66 6967 2e67 6574  tTrue(config.get
+00033c70: 5f75 7365 725f 6d6f 6465 2829 290a 0a20  _user_mode()).. 
+00033c80: 2020 2020 2020 2023 2054 7269 6573 2074         # Tries t
+00033c90: 6f20 6669 6e64 2061 6e20 656d 7074 7920  o find an empty 
+00033ca0: 7374 7269 6e67 206f 6620 6368 6172 6163  string of charac
+00033cb0: 7465 7273 2069 6e20 7468 6520 636f 6e66  ters in the conf
+00033cc0: 6967 2066 696c 650a 2020 2020 2020 2020  ig file.        
+00033cd0: 6d61 696e 5f77 6e64 2e70 6f70 5f75 705f  main_wnd.pop_up_
+00033ce0: 7072 6566 6572 656e 6365 732e 6669 6e64  preferences.find
+00033cf0: 4368 6172 2829 0a0a 2020 2020 2020 2020  Char()..        
+00033d00: 2320 4869 6768 6c69 6768 7473 2074 6865  # Highlights the
+00033d10: 2073 7472 696e 6720 2775 7365 725f 6d6f   string 'user_mo
+00033d20: 6465 2720 696e 2074 6865 2063 6f6e 6669  de' in the confi
+00033d30: 6720 6669 6c65 0a20 2020 2020 2020 206d  g file.        m
+00033d40: 6169 6e5f 776e 642e 706f 705f 7570 5f70  ain_wnd.pop_up_p
+00033d50: 7265 6665 7265 6e63 6573 2e66 696e 6443  references.findC
+00033d60: 6861 725f 6c69 6e65 5f65 6469 742e 7365  har_line_edit.se
+00033d70: 7454 6578 7428 2275 7365 725f 6d6f 6465  tText("user_mode
+00033d80: 2229 0a20 2020 2020 2020 206d 6169 6e5f  ").        main_
+00033d90: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
+00033da0: 7265 6e63 6573 2e66 696e 6443 6861 7228  rences.findChar(
+00033db0: 290a 0a20 2020 2020 2020 2023 204d 6f63  )..        # Moc
+00033dc0: 6b73 2074 6865 2065 7865 6375 7469 6f6e  ks the execution
+00033dd0: 206f 6620 6120 2763 6170 7375 6c27 206d   of a 'capsul' m
+00033de0: 6574 686f 640a 2020 2020 2020 2020 5365  ethod.        Se
+00033df0: 7474 696e 6773 4564 6974 6f72 2e75 7064  ttingsEditor.upd
+00033e00: 6174 655f 6775 6920 3d20 6c61 6d62 6461  ate_gui = lambda
+00033e10: 2078 3a20 4e6f 6e65 0a20 2020 2020 2020   x: None.       
+00033e20: 2023 2054 6869 7320 6669 7865 7320 7468   # This fixes th
+00033e30: 6520 4d61 6320 4f53 2062 7569 6c64 0a0a  e Mac OS build..
+00033e40: 2020 2020 2020 2020 2320 4d6f 636b 7320          # Mocks 
+00033e50: 7468 6520 6578 6563 7574 696f 6e20 6f66  the execution of
+00033e60: 2061 2027 5144 6961 6c6f 6727 0a20 2020   a 'QDialog'.   
+00033e70: 2020 2020 2051 4469 616c 6f67 2e65 7865       QDialog.exe
+00033e80: 6320 3d20 6c61 6d62 6461 2078 3a20 5472  c = lambda x: Tr
+00033e90: 7565 0a20 2020 2020 2020 206d 6169 6e5f  ue.        main_
+00033ea0: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
+00033eb0: 7265 6e63 6573 2e65 6469 745f 6361 7073  rences.edit_caps
+00033ec0: 756c 5f63 6f6e 6669 6728 290a 0a20 2020  ul_config()..   
+00033ed0: 2020 2020 2043 6f6e 6669 672e 7365 745f       Config.set_
+00033ee0: 6361 7073 756c 5f63 6f6e 6669 6720 3d20  capsul_config = 
+00033ef0: 6c61 6d62 6461 2078 2c20 793a 2028 5f20  lambda x, y: (_ 
+00033f00: 666f 7220 5f20 696e 2028 2929 2e74 6872  for _ in ()).thr
+00033f10: 6f77 280a 2020 2020 2020 2020 2020 2020  ow(.            
+00033f20: 4578 6365 7074 696f 6e28 226d 6f63 6b5f  Exception("mock_
+00033f30: 6578 6365 7074 2229 0a20 2020 2020 2020  except").       
+00033f40: 2029 0a20 2020 2020 2020 206d 6169 6e5f   ).        main_
+00033f50: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
+00033f60: 7265 6e63 6573 2e65 6469 745f 6361 7073  rences.edit_caps
+00033f70: 756c 5f63 6f6e 6669 6728 290a 0a20 2020  ul_config()..   
+00033f80: 2020 2020 2051 4469 616c 6f67 2e65 7865       QDialog.exe
+00033f90: 6320 3d20 6c61 6d62 6461 2078 3a20 285f  c = lambda x: (_
+00033fa0: 2066 6f72 205f 2069 6e20 2829 292e 7468   for _ in ()).th
+00033fb0: 726f 7728 0a20 2020 2020 2020 2020 2020  row(.           
+00033fc0: 2045 7863 6570 7469 6f6e 2822 6d6f 636b   Exception("mock
+00033fd0: 5f65 7863 6570 7422 290a 2020 2020 2020  _except").      
+00033fe0: 2020 290a 2020 2020 2020 2020 6d61 696e    ).        main
+00033ff0: 5f77 6e64 2e70 6f70 5f75 705f 7072 6566  _wnd.pop_up_pref
+00034000: 6572 656e 6365 732e 6564 6974 5f63 6170  erences.edit_cap
+00034010: 7375 6c5f 636f 6e66 6967 2829 0a0a 2020  sul_config()..  
+00034020: 2020 2020 2020 5144 6961 6c6f 672e 6578        QDialog.ex
+00034030: 6563 203d 206c 616d 6264 6120 783a 2046  ec = lambda x: F
+00034040: 616c 7365 0a20 2020 2020 2020 206d 6169  alse.        mai
+00034050: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
+00034060: 6665 7265 6e63 6573 2e65 6469 745f 6361  ferences.edit_ca
+00034070: 7073 756c 5f63 6f6e 6669 6728 290a 0a20  psul_config().. 
+00034080: 2020 2020 2020 206d 6169 6e5f 776e 642e         main_wnd.
+00034090: 706f 705f 7570 5f70 7265 6665 7265 6e63  pop_up_preferenc
+000340a0: 6573 2e63 6c6f 7365 2829 0a0a 2020 2020  es.close()..    
+000340b0: 6465 6620 7465 7374 5f73 6f66 7477 6172  def test_softwar
+000340c0: 655f 7072 6566 6572 656e 6365 735f 706f  e_preferences_po
+000340d0: 705f 7570 5f6d 6f64 756c 6573 5f63 6f6e  p_up_modules_con
+000340e0: 6669 6728 7365 6c66 293a 0a20 2020 2020  fig(self):.     
+000340f0: 2020 2022 2222 4f70 656e 7320 7468 6520     """Opens the 
+00034100: 7072 6566 6572 656e 6365 7320 706f 7020  preferences pop 
+00034110: 7570 2061 6e64 2073 6574 7320 7468 6520  up and sets the 
+00034120: 636f 6e66 6967 7572 6174 696f 6e20 6f66  configuration of
+00034130: 206d 6f64 756c 6573 2e0a 0a20 2020 2020   modules...     
+00034140: 2020 2046 6f72 2041 464e 492c 2041 4e54     For AFNI, ANT
+00034150: 532c 2046 534c 2c20 5350 4d20 616e 6420  S, FSL, SPM and 
+00034160: 4d41 544c 4142 2e0a 0a20 2020 2020 2020  MATLAB...       
+00034170: 202d 5465 7374 733a 2050 6f70 5570 5072   -Tests: PopUpPr
+00034180: 6566 6572 656e 6365 732e 7661 6c69 6461  eferences.valida
+00034190: 7465 5f61 6e64 5f73 6176 650a 0a20 2020  te_and_save..   
+000341a0: 2020 2020 202d 204d 6f63 6b73 3a0a 2020       - Mocks:.  
+000341b0: 2020 2020 2020 2020 2020 2d20 506f 7055            - PopU
+000341c0: 7050 7265 6665 7265 6e63 6573 2e73 686f  pPreferences.sho
+000341d0: 770a 2020 2020 2020 2020 2020 2020 2d20  w.            - 
+000341e0: 514d 6573 7361 6765 426f 782e 7368 6f77  QMessageBox.show
+000341f0: 0a20 2020 2020 2020 2020 2020 202d 2051  .            - Q
+00034200: 4c69 6e65 4564 6974 2e74 6578 740a 2020  LineEdit.text.  
+00034210: 2020 2020 2020 2020 2020 2d20 5144 6961            - QDia
+00034220: 6c6f 672e 6578 6563 0a20 2020 2020 2020  log.exec.       
+00034230: 2020 2020 202d 2051 4d65 7373 6167 6542       - QMessageB
+00034240: 6f78 2e65 7865 630a 2020 2020 2020 2020  ox.exec.        
+00034250: 2020 2020 2d20 5150 6c61 696e 5465 7874      - QPlainText
+00034260: 4564 6974 2e74 6f50 6c61 696e 5465 7874  Edit.toPlainText
+00034270: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
+00034280: 2020 2020 2020 2320 5365 7473 2073 686f        # Sets sho
+00034290: 7274 6375 7473 2066 6f72 206f 626a 6563  rtcuts for objec
+000342a0: 7473 2074 6861 7420 6172 6520 6f66 7465  ts that are ofte
+000342b0: 6e20 7573 6564 0a20 2020 2020 2020 206d  n used.        m
+000342c0: 6169 6e5f 776e 6420 3d20 7365 6c66 2e6d  ain_wnd = self.m
+000342d0: 6169 6e5f 7769 6e64 6f77 0a0a 2020 2020  ain_window..    
+000342e0: 2020 2020 2320 4d6f 636b 7320 7468 6520      # Mocks the 
+000342f0: 6578 6563 7574 696f 6e20 6f66 2027 506f  execution of 'Po
+00034300: 7055 7050 7265 6665 7265 6e63 6573 2720  pUpPreferences' 
+00034310: 746f 2073 7065 6564 2075 7020 7468 6520  to speed up the 
+00034320: 7465 7374 0a20 2020 2020 2020 2023 2050  test.        # P
+00034330: 6f70 5570 5072 6566 6572 656e 6365 732e  opUpPreferences.
+00034340: 7368 6f77 203d 206c 616d 6264 6120 783a  show = lambda x:
+00034350: 204e 6f6e 650a 0a20 2020 2020 2020 2023   None..        #
+00034360: 204d 6f63 6b73 2027 514d 6573 7361 6765   Mocks 'QMessage
+00034370: 426f 782e 7368 6f77 270a 2020 2020 2020  Box.show'.      
+00034380: 2020 514d 6573 7361 6765 426f 782e 7368    QMessageBox.sh
+00034390: 6f77 203d 206c 616d 6264 6120 783a 204e  ow = lambda x: N
+000343a0: 6f6e 650a 0a20 2020 2020 2020 2074 6d70  one..        tmp
+000343b0: 5f70 6174 6820 3d20 7365 6c66 2e63 6f6e  _path = self.con
+000343c0: 6669 675f 7061 7468 0a0a 2020 2020 2020  fig_path..      
+000343d0: 2020 2320 5465 6d70 6f72 6172 7920 736f    # Temporary so
+000343e0: 6c75 7469 6f6e 2074 6861 7420 616c 6c6f  lution that allo
+000343f0: 7773 2074 6573 7420 6f6e 6c79 206f 6e20  ws test only on 
+00034400: 4c69 6e75 7820 616e 6420 4d61 634f 530a  Linux and MacOS.
+00034410: 2020 2020 2020 2020 6966 2070 6c61 7466          if platf
+00034420: 6f72 6d2e 7379 7374 656d 2829 203d 3d20  orm.system() == 
+00034430: 2257 696e 646f 7773 223a 0a20 2020 2020  "Windows":.     
+00034440: 2020 2020 2020 2072 6574 7572 6e0a 0a20         return.. 
+00034450: 2020 2020 2020 2023 204d 6f63 6b73 2065         # Mocks e
+00034460: 7865 6375 7461 626c 6573 2074 6f20 6265  xecutables to be
+00034470: 2075 7365 6420 6173 2074 6865 2061 666e   used as the afn
+00034480: 692c 2061 6e74 732c 2066 736c 6d2c 206d  i, ants, fslm, m
+00034490: 6174 6c61 620a 2020 2020 2020 2020 2320  atlab.        # 
+000344a0: 616e 6420 7370 6d20 636d 6473 0a20 2020  and spm cmds.   
+000344b0: 2020 2020 2064 6566 206d 6f63 6b5f 6578       def mock_ex
+000344c0: 6563 7574 6162 6c65 280a 2020 2020 2020  ecutable(.      
+000344d0: 2020 2020 2020 6578 635f 6469 722c 0a20        exc_dir,. 
+000344e0: 2020 2020 2020 2020 2020 2065 7863 5f6e             exc_n
+000344f0: 616d 652c 0a20 2020 2020 2020 2020 2020  ame,.           
+00034500: 2066 6169 6c69 6e67 3d46 616c 7365 2c0a   failing=False,.
+00034510: 2020 2020 2020 2020 2020 2020 6f75 7470              outp
+00034520: 7574 3d22 6d6f 636b 2065 7865 6375 7461  ut="mock executa
+00034530: 626c 6522 2c0a 2020 2020 2020 2020 2020  ble",.          
+00034540: 2020 6572 725f 6d73 673d 226d 6f63 6b5f    err_msg="mock_
+00034550: 6572 726f 7222 2c0a 2020 2020 2020 2020  error",.        
+00034560: 293a 0a20 2020 2020 2020 2020 2020 2022  ):.            "
+00034570: 2222 4372 6561 7465 7320 6120 776f 726b  ""Creates a work
+00034580: 696e 6720 6f72 2066 6169 6c69 6e67 206d  ing or failing m
+00034590: 6f63 6b65 6420 6578 6563 7574 6162 6c65  ocked executable
+000345a0: 2c20 6f70 7469 6f6e 616c 6c79 0a20 2020  , optionally.   
+000345b0: 2020 2020 2020 2020 2073 6574 7469 6e67           setting
+000345c0: 2074 6865 206f 7574 7075 7420 616e 6420   the output and 
+000345d0: 6572 726f 7220 6d65 7373 6167 6573 2c0a  error messages,.
+000345e0: 2020 2020 2020 2020 2020 2020 2222 220a              """.
+000345f0: 0a20 2020 2020 2020 2020 2020 2073 7973  .            sys
+00034600: 7465 6d20 3d20 706c 6174 666f 726d 2e73  tem = platform.s
+00034610: 7973 7465 6d28 290a 0a20 2020 2020 2020  ystem()..       
+00034620: 2020 2020 2069 6620 7379 7374 656d 203d       if system =
+00034630: 3d20 224c 696e 7578 223a 0a20 2020 2020  = "Linux":.     
+00034640: 2020 2020 2020 2020 2020 2065 7863 5f63             exc_c
+00034650: 6f6e 7465 6e74 203d 2027 2321 2f62 696e  ontent = '#!/bin
+00034660: 2f62 6173 685c 6e65 6368 6f20 227b 7d22  /bash\necho "{}"
+00034670: 272e 666f 726d 6174 286f 7574 7075 7429  '.format(output)
+00034680: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00034690: 2069 6620 6661 696c 696e 673a 0a20 2020   if failing:.   
+000346a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000346b0: 2065 7863 5f63 6f6e 7465 6e74 202b 3d20   exc_content += 
+000346c0: 275c 6e65 6368 6f20 227b 7d22 2031 3e26  '\necho "{}" 1>&
+000346d0: 325c 6e65 7869 7420 3127 2e66 6f72 6d61  2\nexit 1'.forma
+000346e0: 7428 6572 725f 6d73 6729 0a20 2020 2020  t(err_msg).     
+000346f0: 2020 2020 2020 2020 2020 2065 7863 5f70             exc_p
+00034700: 6174 6820 3d20 6f73 2e70 6174 682e 6a6f  ath = os.path.jo
+00034710: 696e 2865 7863 5f64 6972 2c20 6578 635f  in(exc_dir, exc_
+00034720: 6e61 6d65 290a 2020 2020 2020 2020 2020  name).          
+00034730: 2020 2020 2020 6578 6320 3d20 6f70 656e        exc = open
+00034740: 2865 7863 5f70 6174 682c 2022 7722 290a  (exc_path, "w").
+00034750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00034760: 6578 632e 7772 6974 6528 6578 635f 636f  exc.write(exc_co
+00034770: 6e74 656e 7429 0a20 2020 2020 2020 2020  ntent).         
+00034780: 2020 2020 2020 2065 7863 2e63 6c6f 7365         exc.close
+00034790: 2829 0a20 2020 2020 2020 2020 2020 2020  ().             
+000347a0: 2020 2073 7562 7072 6f63 6573 732e 7275     subprocess.ru
+000347b0: 6e28 5b22 6368 6d6f 6422 2c20 222b 7822  n(["chmod", "+x"
+000347c0: 2c20 6578 635f 7061 7468 5d29 0a0a 2020  , exc_path])..  
+000347d0: 2020 2020 2020 2020 2020 656c 6966 2073            elif s
+000347e0: 7973 7465 6d20 3d3d 2022 4461 7277 696e  ystem == "Darwin
+000347f0: 223a 0a20 2020 2020 2020 2020 2020 2020  ":.             
+00034800: 2020 2065 7863 5f63 6f6e 7465 6e74 203d     exc_content =
+00034810: 2027 2321 2f75 7372 2f62 696e 2f65 6e76   '#!/usr/bin/env
+00034820: 2062 6173 685c 6e65 6368 6f20 226d 6f63   bash\necho "moc
+00034830: 6b20 6578 6563 7574 6162 6c65 2227 0a20  k executable"'. 
+00034840: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00034850: 6620 6661 696c 696e 673a 0a20 2020 2020  f failing:.     
+00034860: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00034870: 7863 5f63 6f6e 7465 6e74 202b 3d20 275c  xc_content += '\
+00034880: 6e65 6368 6f20 227b 7d22 2031 3e26 325c  necho "{}" 1>&2\
+00034890: 6e65 7869 7420 3127 2e66 6f72 6d61 7428  nexit 1'.format(
+000348a0: 6572 725f 6d73 6729 0a20 2020 2020 2020  err_msg).       
+000348b0: 2020 2020 2020 2020 2065 7863 5f70 6174           exc_pat
+000348c0: 6820 3d20 6f73 2e70 6174 682e 6a6f 696e  h = os.path.join
+000348d0: 2865 7863 5f64 6972 2c20 6578 635f 6e61  (exc_dir, exc_na
+000348e0: 6d65 290a 2020 2020 2020 2020 2020 2020  me).            
+000348f0: 2020 2020 6578 6320 3d20 6f70 656e 2865      exc = open(e
+00034900: 7863 5f70 6174 682c 2022 7722 290a 2020  xc_path, "w").  
+00034910: 2020 2020 2020 2020 2020 2020 2020 6578                ex
+00034920: 632e 7772 6974 6528 6578 635f 636f 6e74  c.write(exc_cont
+00034930: 656e 7429 0a20 2020 2020 2020 2020 2020  ent).           
+00034940: 2020 2020 2065 7863 2e63 6c6f 7365 2829       exc.close()
+00034950: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00034960: 2073 7562 7072 6f63 6573 732e 7275 6e28   subprocess.run(
+00034970: 5b22 6368 6d6f 6422 2c20 222b 7822 2c20  ["chmod", "+x", 
+00034980: 6578 635f 7061 7468 5d29 0a0a 2020 2020  exc_path])..    
+00034990: 2020 2020 2020 2020 656c 6966 2073 7973          elif sys
+000349a0: 7465 6d20 3d3d 2022 5769 6e64 6f77 7322  tem == "Windows"
+000349b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000349c0: 2020 7061 7373 0a20 2020 2020 2020 2020    pass.         
+000349d0: 2020 2020 2020 2023 2054 4f44 4f3a 2062         # TODO: b
+000349e0: 7569 6c64 206d 6f63 6b65 6420 6578 6563  uild mocked exec
+000349f0: 7574 6162 6c65 2066 6f72 2057 696e 646f  utable for Windo
+00034a00: 7773 0a0a 2020 2020 2020 2020 2320 5365  ws..        # Se
+00034a10: 676d 656e 7420 6d6f 6475 6c65 2074 6573  gment module tes
+00034a20: 7469 6e67 2069 6e74 6f20 6675 6e63 7469  ting into functi
+00034a30: 6f6e 7320 746f 2069 6d70 726f 7665 2072  ons to improve r
+00034a40: 6561 6461 6269 6c69 7479 0a20 2020 2020  eadability.     
+00034a50: 2020 2023 206f 6620 7468 6520 636f 6465     # of the code
+00034a60: 0a0a 2020 2020 2020 2020 6465 6620 7465  ..        def te
+00034a70: 7374 5f61 666e 695f 636f 6e66 6967 2829  st_afni_config()
+00034a80: 3a0a 2020 2020 2020 2020 2020 2020 2222  :.            ""
+00034a90: 2254 6573 7473 2074 6865 2041 464e 4920  "Tests the AFNI 
+00034aa0: 636f 6e66 6967 7572 6174 696f 6e2e 2222  configuration.""
+00034ab0: 220a 0a20 2020 2020 2020 2020 2020 206d  "..            m
+00034ac0: 6169 6e5f 776e 642e 736f 6674 7761 7265  ain_wnd.software
+00034ad0: 5f70 7265 6665 7265 6e63 6573 5f70 6f70  _preferences_pop
+00034ae0: 5f75 7028 2920 2023 2052 656f 7065 6e73  _up()  # Reopens
+00034af0: 2074 6865 2077 696e 646f 770a 0a20 2020   the window..   
+00034b00: 2020 2020 2020 2020 2023 2045 6e61 626c           # Enabl
+00034b10: 6573 2041 464e 490a 2020 2020 2020 2020  es AFNI.        
+00034b20: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
+00034b30: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
+00034b40: 7573 655f 6166 6e69 5f63 6865 636b 626f  use_afni_checkbo
+00034b50: 782e 7365 7443 6865 636b 6564 2854 7275  x.setChecked(Tru
+00034b60: 6529 0a0a 2020 2020 2020 2020 2020 2020  e)..            
+00034b70: 2320 5365 7473 2061 2064 6972 6563 746f  # Sets a directo
+00034b80: 7279 2074 6861 7420 646f 6573 206e 6f74  ry that does not
+00034b90: 2065 7869 7374 0a20 2020 2020 2020 2020   exist.         
+00034ba0: 2020 2028 0a20 2020 2020 2020 2020 2020     (.           
+00034bb0: 2020 2020 206d 6169 6e5f 776e 642e 706f       main_wnd.po
+00034bc0: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
+00034bd0: 2e61 666e 695f 6368 6f69 6365 2e73 6574  .afni_choice.set
+00034be0: 5465 7874 280a 2020 2020 2020 2020 2020  Text(.          
+00034bf0: 2020 2020 2020 2020 2020 6f73 2e70 6174            os.pat
+00034c00: 682e 6a6f 696e 2874 6d70 5f70 6174 6820  h.join(tmp_path 
+00034c10: 2b20 226d 6f63 6b22 290a 2020 2020 2020  + "mock").      
+00034c20: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00034c30: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00034c40: 2020 2020 2020 6d61 696e 5f77 6e64 2e70        main_wnd.p
+00034c50: 6f70 5f75 705f 7072 6566 6572 656e 6365  op_up_preference
+00034c60: 732e 6f6b 5f63 6c69 636b 6564 2829 2020  s.ok_clicked()  
+00034c70: 2320 4f70 656e 7320 6572 726f 7220 6469  # Opens error di
+00034c80: 616c 6f67 0a0a 2020 2020 2020 2020 2020  alog..          
+00034c90: 2020 2320 5365 7473 2061 2064 6972 6563    # Sets a direc
+00034ca0: 746f 7279 2074 6861 7420 646f 6573 206e  tory that does n
+00034cb0: 6f74 2063 6f6e 7461 696e 2074 6865 2041  ot contain the A
+00034cc0: 464e 4920 636d 640a 2020 2020 2020 2020  FNI cmd.        
+00034cd0: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
+00034ce0: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
+00034cf0: 6166 6e69 5f63 686f 6963 652e 7365 7454  afni_choice.setT
+00034d00: 6578 7428 746d 705f 7061 7468 290a 2020  ext(tmp_path).  
+00034d10: 2020 2020 2020 2020 2020 6d61 696e 5f77            main_w
+00034d20: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
+00034d30: 656e 6365 732e 6f6b 5f63 6c69 636b 6564  ences.ok_clicked
+00034d40: 2829 2020 2320 4f70 656e 7320 6572 726f  ()  # Opens erro
+00034d50: 7220 6469 616c 6f67 0a0a 2020 2020 2020  r dialog..      
+00034d60: 2020 2020 2020 2320 4173 7365 7274 7320        # Asserts 
+00034d70: 7468 6174 2041 464e 4920 6973 2064 6973  that AFNI is dis
+00034d80: 6162 6c65 6420 696e 2074 6865 2027 636f  abled in the 'co
+00034d90: 6e66 6967 2720 6f62 6a65 6374 0a20 2020  nfig' object.   
+00034da0: 2020 2020 2020 2020 2063 6f6e 6669 6720           config 
+00034db0: 3d20 436f 6e66 6967 2863 6f6e 6669 675f  = Config(config_
+00034dc0: 7061 7468 3d73 656c 662e 636f 6e66 6967  path=self.config
+00034dd0: 5f70 6174 6829 0a20 2020 2020 2020 2020  _path).         
+00034de0: 2020 2073 656c 662e 6173 7365 7274 4661     self.assertFa
+00034df0: 6c73 6528 636f 6e66 6967 2e67 6574 5f75  lse(config.get_u
+00034e00: 7365 5f61 666e 6928 2929 0a0a 2020 2020  se_afni())..    
+00034e10: 2020 2020 2020 2020 2320 5365 7473 2074          # Sets t
+00034e20: 6865 2070 6174 6820 746f 2074 6865 2041  he path to the A
+00034e30: 464e 4920 746f 2027 746d 705f 7061 7468  FNI to 'tmp_path
+00034e40: 270a 2020 2020 2020 2020 2020 2020 6d61  '.            ma
+00034e50: 696e 5f77 6e64 2e70 6f70 5f75 705f 7072  in_wnd.pop_up_pr
+00034e60: 6566 6572 656e 6365 732e 6166 6e69 5f63  eferences.afni_c
+00034e70: 686f 6963 652e 7365 7454 6578 7428 746d  hoice.setText(tm
+00034e80: 705f 7061 7468 290a 0a20 2020 2020 2020  p_path)..       
+00034e90: 2020 2020 206d 6f63 6b5f 6578 6563 7574       mock_execut
+00034ea0: 6162 6c65 2874 6d70 5f70 6174 682c 2022  able(tmp_path, "
+00034eb0: 6166 6e69 222c 2066 6169 6c69 6e67 3d54  afni", failing=T
+00034ec0: 7275 6529 0a20 2020 2020 2020 2020 2020  rue).           
+00034ed0: 206d 6169 6e5f 776e 642e 706f 705f 7570   main_wnd.pop_up
+00034ee0: 5f70 7265 6665 7265 6e63 6573 2e6f 6b5f  _preferences.ok_
+00034ef0: 636c 6963 6b65 6428 2920 2023 204f 7065  clicked()  # Ope
+00034f00: 6e73 2065 7272 6f72 2064 6961 6c6f 670a  ns error dialog.
+00034f10: 0a20 2020 2020 2020 2020 2020 206d 6f63  .            moc
+00034f20: 6b5f 6578 6563 7574 6162 6c65 2874 6d70  k_executable(tmp
+00034f30: 5f70 6174 682c 2022 6166 6e69 2229 0a20  _path, "afni"). 
+00034f40: 2020 2020 2020 2020 2020 2023 206d 6169             # mai
+00034f50: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
+00034f60: 6665 7265 6e63 6573 2e6f 6b5f 636c 6963  ferences.ok_clic
+00034f70: 6b65 6428 2920 2023 2043 6c6f 7365 7320  ked()  # Closes 
+00034f80: 7468 6520 7769 6e64 6f77 0a20 2020 2020  the window.     
+00034f90: 2020 2020 2020 206d 6169 6e5f 776e 642e         main_wnd.
+00034fa0: 706f 705f 7570 5f70 7265 6665 7265 6e63  pop_up_preferenc
+00034fb0: 6573 2e63 6c6f 7365 2829 2020 2320 436c  es.close()  # Cl
+00034fc0: 6f73 6573 2074 6865 2077 696e 646f 770a  oses the window.
+00034fd0: 0a20 2020 2020 2020 2020 2020 2023 2044  .            # D
+00034fe0: 6973 6162 6c65 7320 4146 4e49 0a20 2020  isables AFNI.   
+00034ff0: 2020 2020 2020 2020 2063 6f6e 6669 6720           config 
+00035000: 3d20 436f 6e66 6967 2863 6f6e 6669 675f  = Config(config_
+00035010: 7061 7468 3d73 656c 662e 636f 6e66 6967  path=self.config
+00035020: 5f70 6174 6829 0a20 2020 2020 2020 2020  _path).         
+00035030: 2020 2063 6f6e 6669 672e 7365 745f 7573     config.set_us
+00035040: 655f 6166 6e69 2846 616c 7365 290a 2020  e_afni(False).  
+00035050: 2020 2020 2020 2020 2020 636f 6e66 6967            config
+00035060: 2e73 6574 5f61 666e 695f 7061 7468 2822  .set_afni_path("
+00035070: 2229 0a0a 2020 2020 2020 2020 6465 6620  ")..        def 
+00035080: 7465 7374 5f61 6e74 735f 636f 6e66 6967  test_ants_config
+00035090: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
+000350a0: 2222 2254 6573 7473 2074 6865 2041 4e54  """Tests the ANT
+000350b0: 5320 636f 6e66 6967 7572 6174 696f 6e2e  S configuration.
+000350c0: 2222 220a 0a20 2020 2020 2020 2020 2020  """..           
+000350d0: 206d 6169 6e5f 776e 642e 736f 6674 7761   main_wnd.softwa
+000350e0: 7265 5f70 7265 6665 7265 6e63 6573 5f70  re_preferences_p
+000350f0: 6f70 5f75 7028 2920 2023 2052 656f 7065  op_up()  # Reope
+00035100: 6e73 2074 6865 2077 696e 646f 770a 0a20  ns the window.. 
+00035110: 2020 2020 2020 2020 2020 2023 2045 6e61             # Ena
+00035120: 626c 6573 2041 4e54 530a 2020 2020 2020  bles ANTS.      
+00035130: 2020 2020 2020 6d61 696e 5f77 6e64 2e70        main_wnd.p
+00035140: 6f70 5f75 705f 7072 6566 6572 656e 6365  op_up_preference
+00035150: 732e 7573 655f 616e 7473 5f63 6865 636b  s.use_ants_check
+00035160: 626f 782e 7365 7443 6865 636b 6564 2854  box.setChecked(T
+00035170: 7275 6529 0a0a 2020 2020 2020 2020 2020  rue)..          
+00035180: 2020 2320 5365 7473 2061 2064 6972 6563    # Sets a direc
+00035190: 746f 7279 2074 6861 7420 646f 6573 206e  tory that does n
+000351a0: 6f74 2065 7869 7374 0a20 2020 2020 2020  ot exist.       
+000351b0: 2020 2020 2028 0a20 2020 2020 2020 2020       (.         
+000351c0: 2020 2020 2020 206d 6169 6e5f 776e 642e         main_wnd.
+000351d0: 706f 705f 7570 5f70 7265 6665 7265 6e63  pop_up_preferenc
+000351e0: 6573 2e61 6e74 735f 6368 6f69 6365 2e73  es.ants_choice.s
+000351f0: 6574 5465 7874 280a 2020 2020 2020 2020  etText(.        
+00035200: 2020 2020 2020 2020 2020 2020 6f73 2e70              os.p
+00035210: 6174 682e 6a6f 696e 2874 6d70 5f70 6174  ath.join(tmp_pat
+00035220: 6820 2b20 226d 6f63 6b22 290a 2020 2020  h + "mock").    
+00035230: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+00035240: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00035250: 2020 2020 2020 2020 6d61 696e 5f77 6e64          main_wnd
+00035260: 2e70 6f70 5f75 705f 7072 6566 6572 656e  .pop_up_preferen
+00035270: 6365 732e 6f6b 5f63 6c69 636b 6564 2829  ces.ok_clicked()
+00035280: 2020 2320 4f70 656e 7320 6572 726f 7220    # Opens error 
+00035290: 6469 616c 6f67 0a0a 2020 2020 2020 2020  dialog..        
+000352a0: 2020 2020 2320 5365 7473 2061 2064 6972      # Sets a dir
+000352b0: 6563 746f 7279 2074 6861 7420 646f 6573  ectory that does
+000352c0: 206e 6f74 2063 6f6e 7461 696e 2074 6865   not contain the
+000352d0: 2041 4e54 5320 636d 640a 2020 2020 2020   ANTS cmd.      
+000352e0: 2020 2020 2020 6d61 696e 5f77 6e64 2e70        main_wnd.p
+000352f0: 6f70 5f75 705f 7072 6566 6572 656e 6365  op_up_preference
+00035300: 732e 616e 7473 5f63 686f 6963 652e 7365  s.ants_choice.se
+00035310: 7454 6578 7428 746d 705f 7061 7468 290a  tText(tmp_path).
+00035320: 2020 2020 2020 2020 2020 2020 6d61 696e              main
+00035330: 5f77 6e64 2e70 6f70 5f75 705f 7072 6566  _wnd.pop_up_pref
+00035340: 6572 656e 6365 732e 6f6b 5f63 6c69 636b  erences.ok_click
+00035350: 6564 2829 2020 2320 4f70 656e 7320 6572  ed()  # Opens er
+00035360: 726f 7220 6469 616c 6f67 0a0a 2020 2020  ror dialog..    
+00035370: 2020 2020 2020 2020 2320 4173 7365 7274          # Assert
+00035380: 7320 7468 6174 2041 4e54 5320 6973 2064  s that ANTS is d
+00035390: 6973 6162 6c65 6420 696e 2074 6865 2027  isabled in the '
+000353a0: 636f 6e66 6967 2720 6f62 6a65 6374 0a20  config' object. 
+000353b0: 2020 2020 2020 2020 2020 2063 6f6e 6669             confi
+000353c0: 6720 3d20 436f 6e66 6967 2863 6f6e 6669  g = Config(confi
+000353d0: 675f 7061 7468 3d73 656c 662e 636f 6e66  g_path=self.conf
+000353e0: 6967 5f70 6174 6829 0a20 2020 2020 2020  ig_path).       
+000353f0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00035400: 4661 6c73 6528 636f 6e66 6967 2e67 6574  False(config.get
+00035410: 5f75 7365 5f61 6e74 7328 2929 0a0a 2020  _use_ants())..  
+00035420: 2020 2020 2020 2020 2020 2320 5365 7473            # Sets
+00035430: 2074 6865 2070 6174 6820 746f 2074 6865   the path to the
+00035440: 2041 464e 4920 746f 2027 746d 705f 7061   AFNI to 'tmp_pa
+00035450: 7468 270a 2020 2020 2020 2020 2020 2020  th'.            
+00035460: 6d61 696e 5f77 6e64 2e70 6f70 5f75 705f  main_wnd.pop_up_
+00035470: 7072 6566 6572 656e 6365 732e 6166 6e69  preferences.afni
+00035480: 5f63 686f 6963 652e 7365 7454 6578 7428  _choice.setText(
+00035490: 746d 705f 7061 7468 290a 0a20 2020 2020  tmp_path)..     
+000354a0: 2020 2020 2020 206d 6f63 6b5f 6578 6563         mock_exec
+000354b0: 7574 6162 6c65 2874 6d70 5f70 6174 682c  utable(tmp_path,
+000354c0: 2022 536d 6f6f 7468 496d 6167 6522 2c20   "SmoothImage", 
+000354d0: 6661 696c 696e 673d 5472 7565 290a 2020  failing=True).  
+000354e0: 2020 2020 2020 2020 2020 6d61 696e 5f77            main_w
+000354f0: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
+00035500: 656e 6365 732e 6f6b 5f63 6c69 636b 6564  ences.ok_clicked
+00035510: 2829 2020 2320 4f70 656e 7320 6572 726f  ()  # Opens erro
+00035520: 7220 6469 616c 6f67 0a0a 2020 2020 2020  r dialog..      
+00035530: 2020 2020 2020 6d6f 636b 5f65 7865 6375        mock_execu
+00035540: 7461 626c 6528 746d 705f 7061 7468 2c20  table(tmp_path, 
+00035550: 2253 6d6f 6f74 6849 6d61 6765 2229 0a20  "SmoothImage"). 
+00035560: 2020 2020 2020 2020 2020 2023 206d 6169             # mai
+00035570: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
+00035580: 6665 7265 6e63 6573 2e6f 6b5f 636c 6963  ferences.ok_clic
+00035590: 6b65 6428 2920 2023 2043 6c6f 7365 7320  ked()  # Closes 
+000355a0: 7468 6520 7769 6e64 6f77 0a20 2020 2020  the window.     
+000355b0: 2020 2020 2020 206d 6169 6e5f 776e 642e         main_wnd.
+000355c0: 706f 705f 7570 5f70 7265 6665 7265 6e63  pop_up_preferenc
+000355d0: 6573 2e63 6c6f 7365 2829 2020 2320 436c  es.close()  # Cl
+000355e0: 6f73 6573 2074 6865 2077 696e 646f 770a  oses the window.
+000355f0: 0a20 2020 2020 2020 2020 2020 2023 2044  .            # D
+00035600: 6973 6162 6c65 7320 414e 5453 0a20 2020  isables ANTS.   
+00035610: 2020 2020 2020 2020 2063 6f6e 6669 6720           config 
+00035620: 3d20 436f 6e66 6967 2863 6f6e 6669 675f  = Config(config_
+00035630: 7061 7468 3d73 656c 662e 636f 6e66 6967  path=self.config
+00035640: 5f70 6174 6829 0a20 2020 2020 2020 2020  _path).         
+00035650: 2020 2063 6f6e 6669 672e 7365 745f 7573     config.set_us
+00035660: 655f 616e 7473 2846 616c 7365 290a 2020  e_ants(False).  
+00035670: 2020 2020 2020 2020 2020 636f 6e66 6967            config
+00035680: 2e73 6574 5f61 6e74 735f 7061 7468 2822  .set_ants_path("
+00035690: 2229 0a0a 2020 2020 2020 2020 6465 6620  ")..        def 
+000356a0: 7465 7374 5f66 736c 5f63 6f6e 6669 6728  test_fsl_config(
+000356b0: 293a 0a20 2020 2020 2020 2020 2020 2022  ):.            "
+000356c0: 2222 5465 7374 7320 7468 6520 4653 4c20  ""Tests the FSL 
+000356d0: 636f 6e66 6967 7572 6174 696f 6e2e 2222  configuration.""
+000356e0: 220a 0a20 2020 2020 2020 2020 2020 206d  "..            m
+000356f0: 6169 6e5f 776e 642e 736f 6674 7761 7265  ain_wnd.software
+00035700: 5f70 7265 6665 7265 6e63 6573 5f70 6f70  _preferences_pop
+00035710: 5f75 7028 2920 2023 2052 656f 7065 6e73  _up()  # Reopens
+00035720: 2074 6865 2077 696e 646f 770a 0a20 2020   the window..   
+00035730: 2020 2020 2020 2020 2023 2045 6e61 626c           # Enabl
+00035740: 6573 2046 534c 0a20 2020 2020 2020 2020  es FSL.         
+00035750: 2020 206d 6169 6e5f 776e 642e 706f 705f     main_wnd.pop_
+00035760: 7570 5f70 7265 6665 7265 6e63 6573 2e75  up_preferences.u
+00035770: 7365 5f66 736c 5f63 6865 636b 626f 782e  se_fsl_checkbox.
+00035780: 7365 7443 6865 636b 6564 2854 7275 6529  setChecked(True)
+00035790: 0a0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+000357a0: 446f 6573 206e 6f74 2073 6574 2061 2064  Does not set a d
+000357b0: 6972 6563 746f 7279 2066 6f72 2046 534c  irectory for FSL
+000357c0: 0a20 2020 2020 2020 2020 2020 206d 6169  .            mai
+000357d0: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
+000357e0: 6665 7265 6e63 6573 2e6f 6b5f 636c 6963  ferences.ok_clic
+000357f0: 6b65 6428 290a 0a20 2020 2020 2020 2020  ked()..         
+00035800: 2020 2023 2053 6574 7320 7061 7468 7320     # Sets paths 
+00035810: 746f 2074 6865 2062 696e 2061 6e64 2070  to the bin and p
+00035820: 6172 656e 7420 6469 7265 6374 6f72 7920  arent directory 
+00035830: 666f 6c64 6572 730a 2020 2020 2020 2020  folders.        
+00035840: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
+00035850: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
+00035860: 6673 6c5f 6368 6f69 6365 2e73 6574 5465  fsl_choice.setTe
+00035870: 7874 280a 2020 2020 2020 2020 2020 2020  xt(.            
+00035880: 2020 2020 6f73 2e70 6174 682e 6a6f 696e      os.path.join
+00035890: 2874 6d70 5f70 6174 682c 2022 6574 6322  (tmp_path, "etc"
+000358a0: 2c20 2266 736c 636f 6e66 222c 2022 6269  , "fslconf", "bi
+000358b0: 6e22 290a 2020 2020 2020 2020 2020 2020  n").            
+000358c0: 290a 2020 2020 2020 2020 2020 2020 6d61  ).            ma
+000358d0: 696e 5f77 6e64 2e70 6f70 5f75 705f 7072  in_wnd.pop_up_pr
+000358e0: 6566 6572 656e 6365 732e 6f6b 5f63 6c69  eferences.ok_cli
+000358f0: 636b 6564 2829 2020 2320 4f70 656e 7320  cked()  # Opens 
+00035900: 6572 726f 7220 6469 616c 6f67 0a0a 2020  error dialog..  
+00035910: 2020 2020 2020 2020 2020 6d61 696e 5f77            main_w
+00035920: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
+00035930: 656e 6365 732e 6673 6c5f 6368 6f69 6365  ences.fsl_choice
+00035940: 2e73 6574 5465 7874 280a 2020 2020 2020  .setText(.      
+00035950: 2020 2020 2020 2020 2020 6f73 2e70 6174            os.pat
+00035960: 682e 6a6f 696e 2874 6d70 5f70 6174 682c  h.join(tmp_path,
+00035970: 2022 6574 6322 2c20 2266 736c 636f 6e66   "etc", "fslconf
+00035980: 2229 0a20 2020 2020 2020 2020 2020 2029  ").            )
+00035990: 0a20 2020 2020 2020 2020 2020 206d 6169  .            mai
+000359a0: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
+000359b0: 6665 7265 6e63 6573 2e6f 6b5f 636c 6963  ferences.ok_clic
+000359c0: 6b65 6428 2920 2023 204f 7065 6e73 2065  ked()  # Opens e
+000359d0: 7272 6f72 2064 6961 6c6f 670a 0a20 2020  rror dialog..   
+000359e0: 2020 2020 2020 2020 2023 2053 6574 7320           # Sets 
+000359f0: 6120 6469 7265 6374 6f72 7920 7468 6174  a directory that
+00035a00: 2064 6f65 7320 6e6f 7420 636f 6e74 6169   does not contai
+00035a10: 6e20 7468 6520 4653 4c20 636d 640a 2020  n the FSL cmd.  
+00035a20: 2020 2020 2020 2020 2020 6d61 696e 5f77            main_w
+00035a30: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
+00035a40: 656e 6365 732e 6673 6c5f 6368 6f69 6365  ences.fsl_choice
+00035a50: 2e73 6574 5465 7874 2874 6d70 5f70 6174  .setText(tmp_pat
+00035a60: 6829 0a20 2020 2020 2020 2020 2020 206d  h).            m
+00035a70: 6169 6e5f 776e 642e 706f 705f 7570 5f70  ain_wnd.pop_up_p
+00035a80: 7265 6665 7265 6e63 6573 2e6f 6b5f 636c  references.ok_cl
+00035a90: 6963 6b65 6428 2920 2023 204f 7065 6e73  icked()  # Opens
+00035aa0: 2065 7272 6f72 2064 6961 6c6f 670a 0a20   error dialog.. 
+00035ab0: 2020 2020 2020 2020 2020 2023 2041 7373             # Ass
+00035ac0: 6572 7473 2074 6861 7420 4653 4c20 6973  erts that FSL is
+00035ad0: 2064 6973 6162 6c65 6420 696e 2074 6865   disabled in the
+00035ae0: 2027 636f 6e66 6967 2720 6f62 6a65 6374   'config' object
+00035af0: 0a20 2020 2020 2020 2020 2020 2063 6f6e  .            con
+00035b00: 6669 6720 3d20 436f 6e66 6967 2863 6f6e  fig = Config(con
+00035b10: 6669 675f 7061 7468 3d73 656c 662e 636f  fig_path=self.co
+00035b20: 6e66 6967 5f70 6174 6829 0a20 2020 2020  nfig_path).     
+00035b30: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00035b40: 7274 4661 6c73 6528 636f 6e66 6967 2e67  rtFalse(config.g
+00035b50: 6574 5f75 7365 5f66 736c 2829 290a 0a20  et_use_fsl()).. 
+00035b60: 2020 2020 2020 2020 2020 2023 2053 6574             # Set
+00035b70: 7320 7468 6520 7061 7468 2074 6f20 7468  s the path to th
+00035b80: 6520 4653 4c20 746f 2027 746d 705f 7061  e FSL to 'tmp_pa
+00035b90: 7468 270a 2020 2020 2020 2020 2020 2020  th'.            
+00035ba0: 6673 6c5f 7061 7468 203d 206f 732e 7061  fsl_path = os.pa
+00035bb0: 7468 2e6a 6f69 6e28 746d 705f 7061 7468  th.join(tmp_path
+00035bc0: 2c20 2262 696e 2229 0a20 2020 2020 2020  , "bin").       
+00035bd0: 2020 2020 206f 732e 6d6b 6469 7228 6673       os.mkdir(fs
+00035be0: 6c5f 7061 7468 290a 2020 2020 2020 2020  l_path).        
+00035bf0: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
+00035c00: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
+00035c10: 6673 6c5f 6368 6f69 6365 2e73 6574 5465  fsl_choice.setTe
+00035c20: 7874 2866 736c 5f70 6174 6829 0a0a 2020  xt(fsl_path)..  
+00035c30: 2020 2020 2020 2020 2020 6d6f 636b 5f65            mock_e
+00035c40: 7865 6375 7461 626c 6528 6673 6c5f 7061  xecutable(fsl_pa
+00035c50: 7468 2c20 2266 6c69 7274 222c 2066 6169  th, "flirt", fai
+00035c60: 6c69 6e67 3d54 7275 6529 0a20 2020 2020  ling=True).     
+00035c70: 2020 2020 2020 206d 6169 6e5f 776e 642e         main_wnd.
+00035c80: 706f 705f 7570 5f70 7265 6665 7265 6e63  pop_up_preferenc
+00035c90: 6573 2e6f 6b5f 636c 6963 6b65 6428 2920  es.ok_clicked() 
+00035ca0: 2023 204f 7065 6e73 2065 7272 6f72 2064   # Opens error d
+00035cb0: 6961 6c6f 670a 0a20 2020 2020 2020 2020  ialog..         
+00035cc0: 2020 206d 6f63 6b5f 6578 6563 7574 6162     mock_executab
+00035cd0: 6c65 2866 736c 5f70 6174 682c 2022 666c  le(fsl_path, "fl
+00035ce0: 6972 7422 290a 2020 2020 2020 2020 2020  irt").          
+00035cf0: 2020 2320 6d61 696e 5f77 6e64 2e70 6f70    # main_wnd.pop
+00035d00: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
+00035d10: 6f6b 5f63 6c69 636b 6564 2829 2020 2320  ok_clicked()  # 
+00035d20: 436c 6f73 6573 2074 6865 2077 696e 646f  Closes the windo
+00035d30: 770a 2020 2020 2020 2020 2020 2020 6d61  w.            ma
+00035d40: 696e 5f77 6e64 2e70 6f70 5f75 705f 7072  in_wnd.pop_up_pr
+00035d50: 6566 6572 656e 6365 732e 636c 6f73 6528  eferences.close(
+00035d60: 2920 2023 2043 6c6f 7365 7320 7468 6520  )  # Closes the 
+00035d70: 7769 6e64 6f77 0a0a 2020 2020 2020 2020  window..        
+00035d80: 2020 2020 2320 4469 7361 626c 6573 2046      # Disables F
+00035d90: 534c 0a20 2020 2020 2020 2020 2020 2063  SL.            c
+00035da0: 6f6e 6669 6720 3d20 436f 6e66 6967 2863  onfig = Config(c
+00035db0: 6f6e 6669 675f 7061 7468 3d73 656c 662e  onfig_path=self.
+00035dc0: 636f 6e66 6967 5f70 6174 6829 0a20 2020  config_path).   
+00035dd0: 2020 2020 2020 2020 2063 6f6e 6669 672e           config.
+00035de0: 7365 745f 7573 655f 6673 6c28 4661 6c73  set_use_fsl(Fals
+00035df0: 6529 0a20 2020 2020 2020 2020 2020 2063  e).            c
+00035e00: 6f6e 6669 672e 7365 745f 6673 6c5f 636f  onfig.set_fsl_co
+00035e10: 6e66 6967 2822 2229 0a0a 2020 2020 2020  nfig("")..      
+00035e20: 2020 6465 6620 7465 7374 5f73 706d 5f6d    def test_spm_m
+00035e30: 6174 6c61 625f 636f 6e66 6967 2829 3a0a  atlab_config():.
+00035e40: 2020 2020 2020 2020 2020 2020 2222 2254              """T
+00035e50: 6573 7473 2074 6865 2053 504d 2061 6e64  ests the SPM and
+00035e60: 204d 4154 4c41 4220 286c 6963 656e 6365   MATLAB (licence
+00035e70: 2920 636f 6e66 6967 7572 6174 696f 6e2e  ) configuration.
+00035e80: 2222 220a 0a20 2020 2020 2020 2020 2020  """..           
+00035e90: 206d 6169 6e5f 776e 642e 736f 6674 7761   main_wnd.softwa
+00035ea0: 7265 5f70 7265 6665 7265 6e63 6573 5f70  re_preferences_p
+00035eb0: 6f70 5f75 7028 2920 2023 2052 656f 7065  op_up()  # Reope
+00035ec0: 6e73 2074 6865 2077 696e 646f 770a 0a20  ns the window.. 
+00035ed0: 2020 2020 2020 2020 2020 2023 2045 6e61             # Ena
+00035ee0: 626c 6573 2053 504d 0a20 2020 2020 2020  bles SPM.       
+00035ef0: 2020 2020 206d 6169 6e5f 776e 642e 706f       main_wnd.po
+00035f00: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
+00035f10: 2e75 7365 5f73 706d 5f63 6865 636b 626f  .use_spm_checkbo
+00035f20: 782e 7365 7443 6865 636b 6564 2854 7275  x.setChecked(Tru
+00035f30: 6529 0a0a 2020 2020 2020 2020 2020 2020  e)..            
+00035f40: 2320 5365 7473 2061 204d 4154 4c41 4220  # Sets a MATLAB 
+00035f50: 6578 6563 7574 6162 6c65 2070 6174 6820  executable path 
+00035f60: 7468 6174 2064 6f65 7320 6e6f 7420 6578  that does not ex
+00035f70: 6973 7473 0a20 2020 2020 2020 2020 2020  ists.           
+00035f80: 206d 6169 6e5f 776e 642e 706f 705f 7570   main_wnd.pop_up
+00035f90: 5f70 7265 6665 7265 6e63 6573 2e6d 6174  _preferences.mat
+00035fa0: 6c61 625f 6368 6f69 6365 2e73 6574 5465  lab_choice.setTe
+00035fb0: 7874 280a 2020 2020 2020 2020 2020 2020  xt(.            
+00035fc0: 2020 2020 6f73 2e70 6174 682e 6a6f 696e      os.path.join
+00035fd0: 2874 6d70 5f70 6174 682c 2022 6d61 746c  (tmp_path, "matl
+00035fe0: 6162 2229 0a20 2020 2020 2020 2020 2020  ab").           
+00035ff0: 2029 0a20 2020 2020 2020 2020 2020 206d   ).            m
+00036000: 6169 6e5f 776e 642e 706f 705f 7570 5f70  ain_wnd.pop_up_p
+00036010: 7265 6665 7265 6e63 6573 2e6f 6b5f 636c  references.ok_cl
+00036020: 6963 6b65 6428 2920 2023 204f 7065 6e73  icked()  # Opens
+00036030: 2065 7272 6f72 2064 6961 6c6f 670a 0a20   error dialog.. 
+00036040: 2020 2020 2020 2020 2020 2023 2043 7265             # Cre
+00036050: 6174 6573 2061 2066 6169 6c69 6e67 204d  ates a failing M
+00036060: 4154 4c41 4220 6578 6563 7574 6162 6c65  ATLAB executable
+00036070: 0a20 2020 2020 2020 2020 2020 206d 6f63  .            moc
+00036080: 6b5f 6578 6563 7574 6162 6c65 2874 6d70  k_executable(tmp
+00036090: 5f70 6174 682c 2022 6d61 746c 6162 222c  _path, "matlab",
+000360a0: 2066 6169 6c69 6e67 3d54 7275 6529 0a0a   failing=True)..
+000360b0: 2020 2020 2020 2020 2020 2020 2320 5365              # Se
+000360c0: 7473 2074 6865 2073 616d 6520 4d41 544c  ts the same MATL
+000360d0: 4142 2064 6972 6563 746f 7279 2069 6e20  AB directory in 
+000360e0: 7468 6520 7072 6566 6572 656e 6365 7320  the preferences 
+000360f0: 7769 6e64 6f77 2061 6e64 0a20 2020 2020  window and.     
+00036100: 2020 2020 2020 2023 2069 6e20 7468 6520         # in the 
+00036110: 636f 6e66 6967 206f 626a 6563 740a 2020  config object.  
+00036120: 2020 2020 2020 2020 2020 636f 6e66 6967            config
+00036130: 203d 2043 6f6e 6669 6728 636f 6e66 6967   = Config(config
+00036140: 5f70 6174 683d 7365 6c66 2e63 6f6e 6669  _path=self.confi
+00036150: 675f 7061 7468 290a 2020 2020 2020 2020  g_path).        
+00036160: 2020 2020 636f 6e66 6967 2e73 6574 5f6d      config.set_m
+00036170: 6174 6c61 625f 7061 7468 286f 732e 7061  atlab_path(os.pa
+00036180: 7468 2e6a 6f69 6e28 746d 705f 7061 7468  th.join(tmp_path
+00036190: 2c20 226d 6174 6c61 6222 2929 0a20 2020  , "matlab")).   
+000361a0: 2020 2020 2020 2020 2023 206d 6169 6e5f           # main_
+000361b0: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
+000361c0: 7265 6e63 6573 2e6f 6b5f 636c 6963 6b65  rences.ok_clicke
+000361d0: 6428 2920 2320 4f70 656e 7320 6572 726f  d() # Opens erro
+000361e0: 7220 6469 616c 6f67 0a0a 2020 2020 2020  r dialog..      
+000361f0: 2020 2020 2020 2320 416c 736f 2073 6574        # Also set
+00036200: 7320 7468 6520 7361 6d65 2053 504d 2064  s the same SPM d
+00036210: 6972 6563 746f 7279 2069 6e20 7468 6520  irectory in the 
+00036220: 7072 6566 6572 656e 6365 7320 7769 6e64  preferences wind
+00036230: 6f77 2061 6e64 0a20 2020 2020 2020 2020  ow and.         
+00036240: 2020 2023 2069 6e20 7468 6520 636f 6e66     # in the conf
+00036250: 6967 206f 626a 6563 742c 2061 6e64 2061  ig object, and a
+00036260: 2027 746d 705f 7061 7468 2720 6173 2074   'tmp_path' as t
+00036270: 6865 204d 4154 4c41 4220 6469 7265 6374  he MATLAB direct
+00036280: 6f72 790a 2020 2020 2020 2020 2020 2020  ory.            
+00036290: 636f 6e66 6967 203d 2043 6f6e 6669 6728  config = Config(
+000362a0: 636f 6e66 6967 5f70 6174 683d 7365 6c66  config_path=self
+000362b0: 2e63 6f6e 6669 675f 7061 7468 290a 2020  .config_path).  
+000362c0: 2020 2020 2020 2020 2020 636f 6e66 6967            config
+000362d0: 2e73 6574 5f73 706d 5f70 6174 6828 746d  .set_spm_path(tm
+000362e0: 705f 7061 7468 290a 2020 2020 2020 2020  p_path).        
+000362f0: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
+00036300: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
+00036310: 7370 6d5f 6368 6f69 6365 2e73 6574 5465  spm_choice.setTe
+00036320: 7874 2874 6d70 5f70 6174 6829 0a20 2020  xt(tmp_path).   
+00036330: 2020 2020 2020 2020 206d 6169 6e5f 776e           main_wn
+00036340: 642e 706f 705f 7570 5f70 7265 6665 7265  d.pop_up_prefere
+00036350: 6e63 6573 2e6f 6b5f 636c 6963 6b65 6428  nces.ok_clicked(
+00036360: 2920 2023 2043 6c6f 7365 7320 7468 6520  )  # Closes the 
+00036370: 7769 6e64 6f77 0a0a 2020 2020 2020 2020  window..        
+00036380: 2020 2020 636f 6e66 6967 203d 2043 6f6e      config = Con
+00036390: 6669 6728 636f 6e66 6967 5f70 6174 683d  fig(config_path=
+000363a0: 7365 6c66 2e63 6f6e 6669 675f 7061 7468  self.config_path
+000363b0: 290a 2020 2020 2020 2020 2020 2020 7365  ).            se
+000363c0: 6c66 2e61 7373 6572 7454 7275 6528 636f  lf.assertTrue(co
+000363d0: 6e66 6967 2e67 6574 5f75 7365 5f73 706d  nfig.get_use_spm
+000363e0: 2829 290a 2020 2020 2020 2020 2020 2020  ()).            
+000363f0: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
+00036400: 636f 6e66 6967 2e67 6574 5f75 7365 5f6d  config.get_use_m
+00036410: 6174 6c61 6228 2929 0a20 2020 2020 2020  atlab()).       
+00036420: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00036430: 4661 6c73 6528 636f 6e66 6967 2e67 6574  False(config.get
+00036440: 5f75 7365 5f6d 6174 6c61 625f 7374 616e  _use_matlab_stan
+00036450: 6461 6c6f 6e65 2829 290a 2020 2020 2020  dalone()).      
+00036460: 2020 2020 2020 2320 4361 7365 2077 6865        # Case whe
+00036470: 7265 2062 6f74 6820 4d41 544c 4142 2061  re both MATLAB a
+00036480: 6e64 2053 504d 2061 7070 6c69 6361 7469  nd SPM applicati
+00036490: 6f6e 7320 6172 6520 7573 6564 0a0a 2020  ons are used..  
+000364a0: 2020 2020 2020 2020 2020 6d61 696e 5f77            main_w
+000364b0: 6e64 2e73 6f66 7477 6172 655f 7072 6566  nd.software_pref
+000364c0: 6572 656e 6365 735f 706f 705f 7570 2829  erences_pop_up()
+000364d0: 2020 2320 5265 6f70 656e 7320 7468 6520    # Reopens the 
+000364e0: 7769 6e64 6f77 0a0a 2020 2020 2020 2020  window..        
+000364f0: 2020 2020 2320 5265 7365 7473 2074 6865      # Resets the
+00036500: 204d 4154 4c41 4220 6578 6563 7574 6162   MATLAB executab
+00036510: 6c65 2070 6174 680a 2020 2020 2020 2020  le path.        
+00036520: 2020 2020 436f 6e66 6967 2863 6f6e 6669      Config(confi
+00036530: 675f 7061 7468 3d73 656c 662e 636f 6e66  g_path=self.conf
+00036540: 6967 5f70 6174 6829 2e73 6574 5f6d 6174  ig_path).set_mat
+00036550: 6c61 625f 7061 7468 2822 2229 0a20 2020  lab_path("").   
+00036560: 2020 2020 2020 2020 206d 6169 6e5f 776e           main_wn
+00036570: 642e 706f 705f 7570 5f70 7265 6665 7265  d.pop_up_prefere
+00036580: 6e63 6573 2e6f 6b5f 636c 6963 6b65 6428  nces.ok_clicked(
+00036590: 2920 2023 204f 7065 6e73 2065 7272 6f72  )  # Opens error
+000365a0: 2064 6961 6c6f 670a 0a20 2020 2020 2020   dialog..       
+000365b0: 2020 2020 2023 2043 7265 6174 6573 2061       # Creates a
+000365c0: 2077 6f72 6b69 6e67 204d 4154 4c41 4220   working MATLAB 
+000365d0: 6578 6563 7574 6162 6c65 0a20 2020 2020  executable.     
+000365e0: 2020 2020 2020 206d 6f63 6b5f 6578 6563         mock_exec
+000365f0: 7574 6162 6c65 2874 6d70 5f70 6174 682c  utable(tmp_path,
+00036600: 2022 6d61 746c 6162 2229 0a20 2020 2020   "matlab").     
+00036610: 2020 2020 2020 206d 6169 6e5f 776e 642e         main_wnd.
+00036620: 706f 705f 7570 5f70 7265 6665 7265 6e63  pop_up_preferenc
+00036630: 6573 2e6f 6b5f 636c 6963 6b65 6428 2920  es.ok_clicked() 
+00036640: 2023 2043 6c6f 7365 7320 7468 6520 7769   # Closes the wi
+00036650: 6e64 6f77 0a0a 2020 2020 2020 2020 2020  ndow..          
+00036660: 2020 6d61 696e 5f77 6e64 2e73 6f66 7477    main_wnd.softw
+00036670: 6172 655f 7072 6566 6572 656e 6365 735f  are_preferences_
+00036680: 706f 705f 7570 2829 2020 2320 5265 6f70  pop_up()  # Reop
+00036690: 656e 7320 7468 6520 7769 6e64 6f77 0a0a  ens the window..
+000366a0: 2020 2020 2020 2020 2020 2020 2320 5265              # Re
+000366b0: 7374 7269 6374 7320 7468 6520 7065 726d  stricts the perm
+000366c0: 6973 7369 6f6e 206f 6e20 7468 6520 4d41  ission on the MA
+000366d0: 544c 4142 2065 7865 6375 7461 626c 6520  TLAB executable 
+000366e0: 746f 2069 6e64 7563 650a 2020 2020 2020  to induce.      
+000366f0: 2020 2020 2020 2320 616e 2065 7863 6570        # an excep
+00036700: 7469 6f6e 206f 6e20 2773 7562 7072 6f63  tion on 'subproc
+00036710: 6573 732e 506f 7065 6e27 0a20 2020 2020  ess.Popen'.     
+00036720: 2020 2020 2020 2073 7562 7072 6f63 6573         subproces
+00036730: 732e 7275 6e28 5b22 6368 6d6f 6422 2c20  s.run(["chmod", 
+00036740: 222d 7822 2c20 6f73 2e70 6174 682e 6a6f  "-x", os.path.jo
+00036750: 696e 2874 6d70 5f70 6174 682c 2022 6d61  in(tmp_path, "ma
+00036760: 746c 6162 2229 5d29 0a0a 2020 2020 2020  tlab")])..      
+00036770: 2020 2020 2020 2320 5265 7365 7473 2074        # Resets t
+00036780: 6865 204d 4154 4c41 4220 6578 6563 7574  he MATLAB execut
+00036790: 6162 6c65 2070 6174 6820 2877 6869 6368  able path (which
+000367a0: 2077 6173 2073 6574 2062 7920 7468 6520   was set by the 
+000367b0: 6c61 7374 0a20 2020 2020 2020 2020 2020  last.           
+000367c0: 2023 2063 616c 6c20 6f6e 2027 6f6b 5f63   # call on 'ok_c
+000367d0: 6c69 636b 6564 2729 0a20 2020 2020 2020  licked').       
+000367e0: 2020 2020 2043 6f6e 6669 6728 636f 6e66       Config(conf
+000367f0: 6967 5f70 6174 683d 7365 6c66 2e63 6f6e  ig_path=self.con
+00036800: 6669 675f 7061 7468 292e 7365 745f 6d61  fig_path).set_ma
+00036810: 746c 6162 5f70 6174 6828 2222 290a 0a20  tlab_path("").. 
+00036820: 2020 2020 2020 2020 2020 206d 6169 6e5f             main_
+00036830: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
+00036840: 7265 6e63 6573 2e6f 6b5f 636c 6963 6b65  rences.ok_clicke
+00036850: 6428 2920 2023 204f 7065 6e73 2065 7272  d()  # Opens err
+00036860: 6f72 2064 6961 6c6f 670a 0a20 2020 2020  or dialog..     
+00036870: 2020 2020 2020 2023 2043 6173 6520 7768         # Case wh
+00036880: 6572 6520 5350 4d20 6469 7265 6374 6f72  ere SPM director
+00036890: 7920 6973 206e 6f74 2076 616c 6964 0a20  y is not valid. 
+000368a0: 2020 2020 2020 2020 2020 2028 0a20 2020             (.   
+000368b0: 2020 2020 2020 2020 2020 2020 206d 6169               mai
+000368c0: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
+000368d0: 6665 7265 6e63 6573 2e73 706d 5f63 686f  ferences.spm_cho
+000368e0: 6963 652e 7365 7454 6578 7428 0a20 2020  ice.setText(.   
+000368f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00036900: 206f 732e 7061 7468 2e6a 6f69 6e28 746d   os.path.join(tm
+00036910: 705f 7061 7468 2c20 226e 6f74 5f65 7869  p_path, "not_exi
+00036920: 7374 696e 6722 290a 2020 2020 2020 2020  sting").        
+00036930: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00036940: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00036950: 2020 2020 2320 6d61 696e 5f77 6e64 2e70      # main_wnd.p
+00036960: 6f70 5f75 705f 7072 6566 6572 656e 6365  op_up_preference
+00036970: 732e 6f6b 5f63 6c69 636b 6564 2829 2020  s.ok_clicked()  
+00036980: 2320 4f70 656e 7320 6572 726f 7220 6469  # Opens error di
+00036990: 616c 6f67 0a20 2020 2020 2020 2020 2020  alog.           
+000369a0: 206d 6169 6e5f 776e 642e 706f 705f 7570   main_wnd.pop_up
+000369b0: 5f70 7265 6665 7265 6e63 6573 2e63 6c6f  _preferences.clo
+000369c0: 7365 2829 2020 2320 436c 6f73 6573 2074  se()  # Closes t
+000369d0: 6865 2077 696e 646f 770a 0a20 2020 2020  he window..     
+000369e0: 2020 2020 2020 2023 2044 6973 6162 6c65         # Disable
+000369f0: 7320 4d41 544c 4142 2061 6e64 2053 504d  s MATLAB and SPM
+00036a00: 0a20 2020 2020 2020 2020 2020 2063 6f6e  .            con
+00036a10: 6669 6720 3d20 436f 6e66 6967 2863 6f6e  fig = Config(con
+00036a20: 6669 675f 7061 7468 3d73 656c 662e 636f  fig_path=self.co
+00036a30: 6e66 6967 5f70 6174 6829 0a20 2020 2020  nfig_path).     
+00036a40: 2020 2020 2020 2063 6f6e 6669 672e 7365         config.se
+00036a50: 745f 7573 655f 6d61 746c 6162 2846 616c  t_use_matlab(Fal
+00036a60: 7365 290a 2020 2020 2020 2020 2020 2020  se).            
+00036a70: 636f 6e66 6967 2e73 6574 5f75 7365 5f73  config.set_use_s
+00036a80: 706d 2846 616c 7365 290a 2020 2020 2020  pm(False).      
+00036a90: 2020 2020 2020 636f 6e66 6967 2e73 6574        config.set
+00036aa0: 5f73 706d 5f70 6174 6828 2222 290a 2020  _spm_path("").  
+00036ab0: 2020 2020 2020 2020 2020 636f 6e66 6967            config
+00036ac0: 2e73 6574 5f6d 6174 6c61 625f 7061 7468  .set_matlab_path
+00036ad0: 2822 2229 0a0a 2020 2020 2020 2020 6465  ("")..        de
+00036ae0: 6620 7465 7374 5f6d 6174 6c61 625f 636f  f test_matlab_co
+00036af0: 6e66 6967 2829 3a0a 2020 2020 2020 2020  nfig():.        
+00036b00: 2020 2020 2222 2254 6573 7473 2074 6865      """Tests the
+00036b10: 204d 4154 4c41 4220 286c 6963 656e 7365   MATLAB (license
+00036b20: 2920 636f 6e66 6967 7572 6174 696f 6e2e  ) configuration.
+00036b30: 2222 220a 0a20 2020 2020 2020 2020 2020  """..           
+00036b40: 206d 6169 6e5f 776e 642e 736f 6674 7761   main_wnd.softwa
+00036b50: 7265 5f70 7265 6665 7265 6e63 6573 5f70  re_preferences_p
+00036b60: 6f70 5f75 7028 2920 2023 2052 656f 7065  op_up()  # Reope
+00036b70: 6e73 2074 6865 2077 696e 646f 770a 0a20  ns the window.. 
+00036b80: 2020 2020 2020 2020 2020 2023 2053 6574             # Set
+00036b90: 7320 7468 6520 7072 6f6a 6563 7473 2066  s the projects f
+00036ba0: 6f6c 6465 7220 666f 7220 7468 6520 7072  older for the pr
+00036bb0: 6566 6572 656e 6365 7320 7769 6e64 6f77  eferences window
+00036bc0: 2074 6f20 636c 6f73 650a 2020 2020 2020   to close.      
+00036bd0: 2020 2020 2020 2320 7768 656e 2070 7265        # when pre
+00036be0: 7373 696e 6720 6f6e 2027 4f4b 270a 2020  ssing on 'OK'.  
+00036bf0: 2020 2020 2020 2020 2020 2320 666d 743a            # fmt:
+00036c00: 206f 6666 0a20 2020 2020 2020 2020 2020   off.           
+00036c10: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
+00036c20: 2020 206d 6169 6e5f 776e 642e 706f 705f     main_wnd.pop_
+00036c30: 7570 5f70 7265 6665 7265 6e63 6573 2e70  up_preferences.p
+00036c40: 726f 6a65 6374 735f 7361 7665 5f70 6174  rojects_save_pat
+00036c50: 685f 6c69 6e65 5f65 6469 742e 0a20 2020  h_line_edit..   
+00036c60: 2020 2020 2020 2020 2020 2020 2073 6574               set
+00036c70: 5465 7874 2874 6d70 5f70 6174 6829 0a20  Text(tmp_path). 
+00036c80: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+00036c90: 2020 2020 2020 2020 2023 2066 6d74 3a20           # fmt: 
+00036ca0: 6f6e 0a0a 2020 2020 2020 2020 2020 2020  on..            
+00036cb0: 2320 456e 6162 6c65 7320 4d41 544c 4142  # Enables MATLAB
+00036cc0: 0a20 2020 2020 2020 2020 2020 206d 6169  .            mai
+00036cd0: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
+00036ce0: 6665 7265 6e63 6573 2e75 7365 5f6d 6174  ferences.use_mat
+00036cf0: 6c61 625f 6368 6563 6b62 6f78 2e73 6574  lab_checkbox.set
+00036d00: 4368 6563 6b65 6428 5472 7565 290a 0a20  Checked(True).. 
+00036d10: 2020 2020 2020 2020 2020 2023 2053 6574             # Set
+00036d20: 7320 7468 6520 7361 6d65 204d 4154 4c41  s the same MATLA
+00036d30: 4220 6469 7265 6374 6f72 7920 6f6e 2062  B directory on b
+00036d40: 6f74 6820 7468 6520 7072 6566 6572 656e  oth the preferen
+00036d50: 6365 730a 2020 2020 2020 2020 2020 2020  ces.            
+00036d60: 2320 7769 6e64 6f77 2061 6e64 2027 636f  # window and 'co
+00036d70: 6e66 6967 2720 6f62 6a65 6374 0a20 2020  nfig' object.   
+00036d80: 2020 2020 2020 2020 206d 6169 6e5f 776e           main_wn
+00036d90: 642e 706f 705f 7570 5f70 7265 6665 7265  d.pop_up_prefere
+00036da0: 6e63 6573 2e6d 6174 6c61 625f 6368 6f69  nces.matlab_choi
+00036db0: 6365 2e73 6574 5465 7874 2874 6d70 5f70  ce.setText(tmp_p
+00036dc0: 6174 6829 0a20 2020 2020 2020 2020 2020  ath).           
+00036dd0: 2043 6f6e 6669 6728 636f 6e66 6967 5f70   Config(config_p
+00036de0: 6174 683d 7365 6c66 2e63 6f6e 6669 675f  ath=self.config_
+00036df0: 7061 7468 292e 7365 745f 6d61 746c 6162  path).set_matlab
+00036e00: 5f70 6174 6828 746d 705f 7061 7468 290a  _path(tmp_path).
+00036e10: 0a20 2020 2020 2020 2020 2020 206d 6169  .            mai
+00036e20: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
+00036e30: 6665 7265 6e63 6573 2e6f 6b5f 636c 6963  ferences.ok_clic
+00036e40: 6b65 6428 2920 2023 2043 6c6f 7365 7320  ked()  # Closes 
+00036e50: 7468 6520 7769 6e64 6f77 0a0a 2020 2020  the window..    
+00036e60: 2020 2020 2020 2020 2320 4173 7365 7274          # Assert
+00036e70: 7320 7468 6174 204d 4154 4c41 4220 7761  s that MATLAB wa
+00036e80: 7320 656e 6162 6c65 6420 616e 6420 4d41  s enabled and MA
+00036e90: 544c 4142 2073 7461 6e64 616c 6f6e 650a  TLAB standalone.
+00036ea0: 2020 2020 2020 2020 2020 2020 2320 7265              # re
+00036eb0: 6d61 696e 7320 6469 7361 626c 6564 0a20  mains disabled. 
+00036ec0: 2020 2020 2020 2020 2020 2063 6f6e 6669             confi
+00036ed0: 6720 3d20 436f 6e66 6967 2863 6f6e 6669  g = Config(confi
+00036ee0: 675f 7061 7468 3d73 656c 662e 636f 6e66  g_path=self.conf
+00036ef0: 6967 5f70 6174 6829 0a20 2020 2020 2020  ig_path).       
+00036f00: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00036f10: 5472 7565 2863 6f6e 6669 672e 6765 745f  True(config.get_
+00036f20: 7573 655f 6d61 746c 6162 2829 290a 2020  use_matlab()).  
+00036f30: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
+00036f40: 7373 6572 7446 616c 7365 2863 6f6e 6669  ssertFalse(confi
+00036f50: 672e 6765 745f 7573 655f 6d61 746c 6162  g.get_use_matlab
+00036f60: 5f73 7461 6e64 616c 6f6e 6528 2929 0a0a  _standalone())..
+00036f70: 2020 2020 2020 2020 2020 2020 6d61 696e              main
+00036f80: 5f77 6e64 2e73 6f66 7477 6172 655f 7072  _wnd.software_pr
+00036f90: 6566 6572 656e 6365 735f 706f 705f 7570  eferences_pop_up
+00036fa0: 2829 2020 2320 5265 6f70 656e 7320 7468  ()  # Reopens th
+00036fb0: 6520 7769 6e64 6f77 0a0a 2020 2020 2020  e window..      
+00036fc0: 2020 2020 2020 2320 5265 7365 7473 2074        # Resets t
+00036fd0: 6865 2027 636f 6e66 6967 2720 6f62 6a65  he 'config' obje
+00036fe0: 6374 0a20 2020 2020 2020 2020 2020 2063  ct.            c
+00036ff0: 6f6e 6669 672e 7365 745f 7573 655f 6d61  onfig.set_use_ma
+00037000: 746c 6162 2846 616c 7365 290a 0a20 2020  tlab(False)..   
+00037010: 2020 2020 2020 2020 2023 2052 6573 6574           # Reset
+00037020: 7320 7468 6520 4d41 544c 4142 2064 6972  s the MATLAB dir
+00037030: 6563 746f 7279 0a20 2020 2020 2020 2020  ectory.         
+00037040: 2020 206d 6169 6e5f 776e 642e 706f 705f     main_wnd.pop_
+00037050: 7570 5f70 7265 6665 7265 6e63 6573 2e6d  up_preferences.m
+00037060: 6174 6c61 625f 6368 6f69 6365 2e73 6574  atlab_choice.set
+00037070: 5465 7874 2822 2229 0a20 2020 2020 2020  Text("").       
+00037080: 2020 2020 206d 6169 6e5f 776e 642e 706f       main_wnd.po
+00037090: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
+000370a0: 2e6f 6b5f 636c 6963 6b65 6428 2920 2023  .ok_clicked()  #
+000370b0: 204f 7065 6e73 2065 7272 6f72 2064 6961   Opens error dia
+000370c0: 6c6f 670a 0a20 2020 2020 2020 2020 2020  log..           
+000370d0: 2023 2043 7265 6174 6573 2061 2066 6169   # Creates a fai
+000370e0: 6c69 6e67 204d 4154 4c41 4220 6578 6563  ling MATLAB exec
+000370f0: 7574 6162 6c65 0a20 2020 2020 2020 2020  utable.         
+00037100: 2020 206d 6f63 6b5f 6578 6563 7574 6162     mock_executab
+00037110: 6c65 2874 6d70 5f70 6174 682c 2022 6d61  le(tmp_path, "ma
+00037120: 746c 6162 222c 2066 6169 6c69 6e67 3d54  tlab", failing=T
+00037130: 7275 6529 0a0a 2020 2020 2020 2020 2020  rue)..          
+00037140: 2020 2320 5365 7473 2074 6865 204d 4154    # Sets the MAT
+00037150: 4c41 4220 6469 7265 6374 6f72 7920 746f  LAB directory to
+00037160: 2074 6869 7320 6578 6563 7574 6162 6c65   this executable
+00037170: 0a20 2020 2020 2020 2020 2020 2028 0a20  .            (. 
+00037180: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00037190: 6169 6e5f 776e 642e 706f 705f 7570 5f70  ain_wnd.pop_up_p
+000371a0: 7265 6665 7265 6e63 6573 2e6d 6174 6c61  references.matla
+000371b0: 625f 6368 6f69 6365 2e73 6574 5465 7874  b_choice.setText
+000371c0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000371d0: 2020 2020 2020 6f73 2e70 6174 682e 6a6f        os.path.jo
+000371e0: 696e 2874 6d70 5f70 6174 682c 2022 6d61  in(tmp_path, "ma
+000371f0: 746c 6162 2229 0a20 2020 2020 2020 2020  tlab").         
+00037200: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00037210: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+00037220: 2020 206d 6169 6e5f 776e 642e 706f 705f     main_wnd.pop_
+00037230: 7570 5f70 7265 6665 7265 6e63 6573 2e6f  up_preferences.o
+00037240: 6b5f 636c 6963 6b65 6428 2920 2023 204f  k_clicked()  # O
+00037250: 7065 6e73 2065 7272 6f72 2064 6961 6c6f  pens error dialo
+00037260: 670a 0a20 2020 2020 2020 2020 2020 2023  g..            #
+00037270: 2052 6573 7472 6963 7473 2074 6865 2070   Restricts the p
+00037280: 6572 6d69 7373 696f 6e20 7265 7175 6972  ermission requir
+00037290: 6564 2074 6f20 7275 6e20 7468 6520 4d41  ed to run the MA
+000372a0: 544c 4142 0a20 2020 2020 2020 2020 2020  TLAB.           
+000372b0: 2023 2065 7865 6375 7461 626c 6520 746f   # executable to
+000372c0: 2069 6e64 7563 6520 616e 2065 7863 6570   induce an excep
+000372d0: 7469 6f6e 206f 6e20 2773 7562 7072 6f63  tion on 'subproc
+000372e0: 6573 732e 506f 7065 6e27 0a20 2020 2020  ess.Popen'.     
+000372f0: 2020 2020 2020 2073 7562 7072 6f63 6573         subproces
+00037300: 732e 7275 6e28 5b22 6368 6d6f 6422 2c20  s.run(["chmod", 
+00037310: 222d 7822 2c20 6f73 2e70 6174 682e 6a6f  "-x", os.path.jo
+00037320: 696e 2874 6d70 5f70 6174 682c 2022 6d61  in(tmp_path, "ma
+00037330: 746c 6162 2229 5d29 0a20 2020 2020 2020  tlab")]).       
+00037340: 2020 2020 206d 6169 6e5f 776e 642e 706f       main_wnd.po
+00037350: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
+00037360: 2e6f 6b5f 636c 6963 6b65 6428 2920 2023  .ok_clicked()  #
+00037370: 204f 7065 6e73 2065 7272 6f72 2064 6961   Opens error dia
+00037380: 6c6f 670a 0a20 2020 2020 2020 2020 2020  log..           
+00037390: 2023 2041 7373 6572 7473 2074 6861 7420   # Asserts that 
+000373a0: 4d41 544c 4142 2077 6173 2073 7469 6c6c  MATLAB was still
+000373b0: 206e 6f74 2065 6e61 626c 6564 0a20 2020   not enabled.   
+000373c0: 2020 2020 2020 2020 2063 6f6e 6669 6720           config 
+000373d0: 3d20 436f 6e66 6967 2863 6f6e 6669 675f  = Config(config_
+000373e0: 7061 7468 3d73 656c 662e 636f 6e66 6967  path=self.config
+000373f0: 5f70 6174 6829 0a20 2020 2020 2020 2020  _path).         
+00037400: 2020 2073 656c 662e 6173 7365 7274 4661     self.assertFa
+00037410: 6c73 6528 636f 6e66 6967 2e67 6574 5f75  lse(config.get_u
+00037420: 7365 5f6d 6174 6c61 6228 2929 0a0a 2020  se_matlab())..  
+00037430: 2020 2020 2020 2020 2020 2320 4372 6561            # Crea
+00037440: 7465 7320 6120 776f 726b 696e 6720 4d41  tes a working MA
+00037450: 544c 4142 2065 7865 6375 7461 626c 650a  TLAB executable.
+00037460: 2020 2020 2020 2020 2020 2020 6d6f 636b              mock
+00037470: 5f65 7865 6375 7461 626c 6528 746d 705f  _executable(tmp_
+00037480: 7061 7468 2c20 226d 6174 6c61 6222 290a  path, "matlab").
+00037490: 2020 2020 2020 2020 2020 2020 6d61 696e              main
+000374a0: 5f77 6e64 2e70 6f70 5f75 705f 7072 6566  _wnd.pop_up_pref
+000374b0: 6572 656e 6365 732e 6f6b 5f63 6c69 636b  erences.ok_click
+000374c0: 6564 2829 2020 2320 436c 6f73 6573 2077  ed()  # Closes w
+000374d0: 696e 646f 770a 2020 2020 2020 2020 2020  indow.          
+000374e0: 2020 2320 6d61 696e 5f77 6e64 2e70 6f70    # main_wnd.pop
+000374f0: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
+00037500: 636c 6f73 6528 2920 2023 2043 6c6f 7365  close()  # Close
+00037510: 7320 7468 6520 7769 6e64 6f77 0a0a 2020  s the window..  
+00037520: 2020 2020 2020 2020 2020 2320 4173 7365            # Asse
+00037530: 7274 7320 7468 6174 204d 4154 4c41 4220  rts that MATLAB 
+00037540: 7761 7320 656e 6162 6c65 6420 616e 6420  was enabled and 
+00037550: 4d41 544c 4142 2073 7461 6e64 616c 6f6e  MATLAB standalon
+00037560: 650a 2020 2020 2020 2020 2020 2020 2320  e.            # 
+00037570: 7265 6d61 696e 7320 6469 7361 626c 6564  remains disabled
+00037580: 0a20 2020 2020 2020 2020 2020 2063 6f6e  .            con
+00037590: 6669 6720 3d20 436f 6e66 6967 2863 6f6e  fig = Config(con
+000375a0: 6669 675f 7061 7468 3d73 656c 662e 636f  fig_path=self.co
+000375b0: 6e66 6967 5f70 6174 6829 0a20 2020 2020  nfig_path).     
+000375c0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+000375d0: 7274 5472 7565 2863 6f6e 6669 672e 6765  rtTrue(config.ge
+000375e0: 745f 7573 655f 6d61 746c 6162 2829 290a  t_use_matlab()).
+000375f0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00037600: 2e61 7373 6572 7446 616c 7365 2863 6f6e  .assertFalse(con
+00037610: 6669 672e 6765 745f 7573 655f 6d61 746c  fig.get_use_matl
+00037620: 6162 5f73 7461 6e64 616c 6f6e 6528 2929  ab_standalone())
+00037630: 0a0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00037640: 4469 7361 626c 6573 204d 4154 4c41 4220  Disables MATLAB 
+00037650: 616e 6420 5350 4d0a 2020 2020 2020 2020  and SPM.        
+00037660: 2020 2020 636f 6e66 6967 203d 2043 6f6e      config = Con
+00037670: 6669 6728 636f 6e66 6967 5f70 6174 683d  fig(config_path=
+00037680: 7365 6c66 2e63 6f6e 6669 675f 7061 7468  self.config_path
+00037690: 290a 2020 2020 2020 2020 2020 2020 636f  ).            co
+000376a0: 6e66 6967 2e73 6574 5f75 7365 5f6d 6174  nfig.set_use_mat
+000376b0: 6c61 6228 4661 6c73 6529 0a20 2020 2020  lab(False).     
+000376c0: 2020 2020 2020 2063 6f6e 6669 672e 7365         config.se
+000376d0: 745f 6d61 746c 6162 5f70 6174 6828 2222  t_matlab_path(""
+000376e0: 290a 0a20 2020 2020 2020 2064 6566 2074  )..        def t
+000376f0: 6573 745f 6d61 746c 6162 5f6d 6372 5f73  est_matlab_mcr_s
+00037700: 706d 5f73 7461 6e64 616c 6f6e 6528 293a  pm_standalone():
+00037710: 0a20 2020 2020 2020 2020 2020 2022 2222  .            """
+00037720: 5465 7374 7320 7468 6520 4d61 746c 6162  Tests the Matlab
+00037730: 204d 4352 2061 6e64 2053 504d 2073 7461   MCR and SPM sta
+00037740: 6e64 616c 6f6e 6520 636f 6e66 6967 7572  ndalone configur
+00037750: 6174 696f 6e22 2222 0a0a 2020 2020 2020  ation"""..      
+00037760: 2020 2020 2020 6d61 696e 5f77 6e64 2e73        main_wnd.s
+00037770: 6f66 7477 6172 655f 7072 6566 6572 656e  oftware_preferen
+00037780: 6365 735f 706f 705f 7570 2829 2020 2320  ces_pop_up()  # 
+00037790: 4f70 656e 7320 7468 6520 7769 6e64 6f77  Opens the window
+000377a0: 0a0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+000377b0: 5365 7473 2074 6865 2070 726f 6a65 6374  Sets the project
+000377c0: 7320 666f 6c64 6572 2066 6f72 2074 6865  s folder for the
+000377d0: 2070 7265 6665 7265 6e63 6573 2077 696e   preferences win
+000377e0: 646f 7720 746f 2063 6c6f 7365 0a20 2020  dow to close.   
+000377f0: 2020 2020 2020 2020 2023 2077 6865 6e20           # when 
+00037800: 7072 6573 7369 6e67 206f 6e20 274f 4b27  pressing on 'OK'
+00037810: 0a20 2020 2020 2020 2020 2020 2023 2066  .            # f
+00037820: 6d74 3a20 6f66 660a 2020 2020 2020 2020  mt: off.        
+00037830: 2020 2020 280a 2020 2020 2020 2020 2020      (.          
+00037840: 2020 2020 2020 6d61 696e 5f77 6e64 2e70        main_wnd.p
+00037850: 6f70 5f75 705f 7072 6566 6572 656e 6365  op_up_preference
+00037860: 732e 7072 6f6a 6563 7473 5f73 6176 655f  s.projects_save_
+00037870: 7061 7468 5f6c 696e 655f 6564 6974 2e0a  path_line_edit..
+00037880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00037890: 7365 7454 6578 7428 746d 705f 7061 7468  setText(tmp_path
+000378a0: 290a 2020 2020 2020 2020 2020 2020 290a  ).            ).
+000378b0: 2020 2020 2020 2020 2020 2020 2320 666d              # fm
+000378c0: 743a 206f 6e0a 0a20 2020 2020 2020 2020  t: on..         
+000378d0: 2020 2023 2045 6e61 626c 6573 2053 504d     # Enables SPM
+000378e0: 2073 7461 6e64 616c 6f6e 650a 2020 2020   standalone.    
+000378f0: 2020 2020 2020 2020 2320 666d 743a 206f          # fmt: o
+00037900: 6666 0a20 2020 2020 2020 2020 2020 2028  ff.            (
+00037910: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00037920: 206d 6169 6e5f 776e 642e 706f 705f 7570   main_wnd.pop_up
+00037930: 5f70 7265 6665 7265 6e63 6573 2e75 7365  _preferences.use
+00037940: 5f73 706d 5f73 7461 6e64 616c 6f6e 655f  _spm_standalone_
+00037950: 6368 6563 6b62 6f78 2e0a 2020 2020 2020  checkbox..      
+00037960: 2020 2020 2020 2020 2020 7365 7443 6865            setChe
+00037970: 636b 6564 2854 7275 6529 0a20 2020 2020  cked(True).     
+00037980: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00037990: 2020 2020 2023 2066 6d74 3a20 6f6e 0a0a       # fmt: on..
+000379a0: 2020 2020 2020 2020 2020 2020 2320 4661              # Fa
+000379b0: 696c 696e 6720 636f 6e66 6967 7572 6174  iling configurat
+000379c0: 696f 6e73 2066 6f72 2053 504d 2073 7461  ions for SPM sta
+000379d0: 6e64 616c 6f6e 6520 2b20 4d41 544c 4142  ndalone + MATLAB
+000379e0: 204d 4352 0a0a 2020 2020 2020 2020 2020   MCR..          
+000379f0: 2020 2320 5365 7473 2061 206e 6f6e 2d65    # Sets a non-e
+00037a00: 7869 7374 696e 6720 6469 7265 6374 6f72  xisting director
+00037a10: 7920 666f 7220 4d41 544c 4142 204d 4352  y for MATLAB MCR
+00037a20: 0a20 2020 2020 2020 2020 2020 2028 0a20  .            (. 
+00037a30: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00037a40: 6169 6e5f 776e 642e 706f 705f 7570 5f70  ain_wnd.pop_up_p
+00037a50: 7265 6665 7265 6e63 6573 2e6d 6174 6c61  references.matla
+00037a60: 625f 7374 616e 6461 6c6f 6e65 5f63 686f  b_standalone_cho
+00037a70: 6963 652e 7365 7454 6578 7428 0a20 2020  ice.setText(.   
+00037a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00037a90: 206f 732e 7061 7468 2e6a 6f69 6e28 746d   os.path.join(tm
+00037aa0: 705f 7061 7468 2c20 226e 6f6e 5f65 7869  p_path, "non_exi
+00037ab0: 7374 696e 6722 290a 2020 2020 2020 2020  sting").        
+00037ac0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00037ad0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+00037ae0: 2020 2020 206d 6169 6e5f 776e 642e 706f       main_wnd.po
+00037af0: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
+00037b00: 2e6f 6b5f 636c 6963 6b65 6428 2920 2023  .ok_clicked()  #
+00037b10: 204f 7065 6e73 2065 7272 6f72 206d 6573   Opens error mes
+00037b20: 7361 6765 0a0a 2020 2020 2020 2020 2020  sage..          
+00037b30: 2020 2320 5365 7473 2061 6e20 6578 6973    # Sets an exis
+00037b40: 7469 6e67 2064 6972 6563 746f 7279 2066  ting directory f
+00037b50: 6f72 204d 4154 4c41 4220 4d43 522c 206e  or MATLAB MCR, n
+00037b60: 6f6e 2d65 7869 7374 696e 670a 2020 2020  on-existing.    
+00037b70: 2020 2020 2020 2020 2320 6469 7265 6374          # direct
+00037b80: 6f72 7920 666f 7220 5350 4d20 7374 616e  ory for SPM stan
+00037b90: 6461 6c6f 6e65 0a20 2020 2020 2020 2020  dalone.         
+00037ba0: 2020 2028 0a20 2020 2020 2020 2020 2020     (.           
+00037bb0: 2020 2020 206d 6169 6e5f 776e 642e 706f       main_wnd.po
+00037bc0: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
+00037bd0: 2e6d 6174 6c61 625f 7374 616e 6461 6c6f  .matlab_standalo
+00037be0: 6e65 5f63 686f 6963 652e 7365 7454 6578  ne_choice.setTex
+00037bf0: 7428 0a20 2020 2020 2020 2020 2020 2020  t(.             
+00037c00: 2020 2020 2020 2074 6d70 5f70 6174 680a         tmp_path.
+00037c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00037c20: 290a 2020 2020 2020 2020 2020 2020 290a  ).            ).
+00037c30: 2020 2020 2020 2020 2020 2020 280a 2020              (.  
+00037c40: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
+00037c50: 696e 5f77 6e64 2e70 6f70 5f75 705f 7072  in_wnd.pop_up_pr
+00037c60: 6566 6572 656e 6365 732e 7370 6d5f 7374  eferences.spm_st
+00037c70: 616e 6461 6c6f 6e65 5f63 686f 6963 652e  andalone_choice.
+00037c80: 7365 7454 6578 7428 0a20 2020 2020 2020  setText(.       
+00037c90: 2020 2020 2020 2020 2020 2020 206f 732e               os.
+00037ca0: 7061 7468 2e6a 6f69 6e28 746d 705f 7061  path.join(tmp_pa
+00037cb0: 7468 2c20 226e 6f6e 5f65 7869 7374 696e  th, "non_existin
+00037cc0: 6722 290a 2020 2020 2020 2020 2020 2020  g").            
+00037cd0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+00037ce0: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+00037cf0: 6d61 696e 5f77 6e64 2e70 6f70 5f75 705f  main_wnd.pop_up_
+00037d00: 7072 6566 6572 656e 6365 732e 6f6b 5f63  preferences.ok_c
+00037d10: 6c69 636b 6564 2829 2020 2320 4f70 656e  licked()  # Open
+00037d20: 7320 6572 726f 7220 6469 616c 6f67 0a0a  s error dialog..
+00037d30: 2020 2020 2020 2020 2020 2020 2320 5365              # Se
+00037d40: 7473 2065 7869 7374 696e 6720 6469 7265  ts existing dire
+00037d50: 6374 6f72 6965 7320 666f 7220 626f 7468  ctories for both
+00037d60: 204d 4154 4c41 4220 4d43 5220 616e 6420   MATLAB MCR and 
+00037d70: 5350 4d0a 2020 2020 2020 2020 2020 2020  SPM.            
+00037d80: 2320 7374 616e 6461 6c6f 6e65 0a20 2020  # standalone.   
+00037d90: 2020 2020 2020 2020 2028 0a20 2020 2020           (.     
+00037da0: 2020 2020 2020 2020 2020 206d 6169 6e5f             main_
+00037db0: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
+00037dc0: 7265 6e63 6573 2e73 706d 5f73 7461 6e64  rences.spm_stand
+00037dd0: 616c 6f6e 655f 6368 6f69 6365 2e73 6574  alone_choice.set
+00037de0: 5465 7874 280a 2020 2020 2020 2020 2020  Text(.          
+00037df0: 2020 2020 2020 2020 2020 746d 705f 7061            tmp_pa
+00037e00: 7468 0a20 2020 2020 2020 2020 2020 2020  th.             
+00037e10: 2020 2029 0a20 2020 2020 2020 2020 2020     ).           
+00037e20: 2029 0a20 2020 2020 2020 2020 2020 206d   ).            m
+00037e30: 6169 6e5f 776e 642e 706f 705f 7570 5f70  ain_wnd.pop_up_p
+00037e40: 7265 6665 7265 6e63 6573 2e6f 6b5f 636c  references.ok_cl
+00037e50: 6963 6b65 6428 2920 2023 204f 7065 6e73  icked()  # Opens
+00037e60: 2065 7272 6f72 2064 6961 6c6f 670a 0a20   error dialog.. 
+00037e70: 2020 2020 2020 2020 2020 2023 2044 6f65             # Doe
+00037e80: 7320 6e6f 7420 6669 6e64 2061 2053 504d  s not find a SPM
+00037e90: 2073 7461 6e64 616c 6f6e 6520 6578 6563   standalone exec
+00037ea0: 7574 6162 6c65 0a20 2020 2020 2020 2020  utable.         
+00037eb0: 2020 206d 6169 6e5f 776e 642e 706f 705f     main_wnd.pop_
+00037ec0: 7570 5f70 7265 6665 7265 6e63 6573 2e6f  up_preferences.o
+00037ed0: 6b5f 636c 6963 6b65 6428 2920 2023 204f  k_clicked()  # O
+00037ee0: 7065 6e73 2065 7272 6f72 2064 6961 6c6f  pens error dialo
+00037ef0: 670a 0a20 2020 2020 2020 2020 2020 2023  g..            #
+00037f00: 2043 7265 6174 6573 2061 2066 6169 6c69   Creates a faili
+00037f10: 6e67 2053 504d 2073 7461 6e64 616c 6f6e  ng SPM standalon
+00037f20: 6520 6578 6563 7574 6162 6c65 0a20 2020  e executable.   
+00037f30: 2020 2020 2020 2020 206d 6f63 6b5f 6578           mock_ex
+00037f40: 6563 7574 6162 6c65 2874 6d70 5f70 6174  ecutable(tmp_pat
+00037f50: 682c 2022 7275 6e5f 7370 6d2e 7368 222c  h, "run_spm.sh",
+00037f60: 2066 6169 6c69 6e67 3d54 7275 6529 0a0a   failing=True)..
+00037f70: 2020 2020 2020 2020 2020 2020 6d61 696e              main
+00037f80: 5f77 6e64 2e70 6f70 5f75 705f 7072 6566  _wnd.pop_up_pref
+00037f90: 6572 656e 6365 732e 6f6b 5f63 6c69 636b  erences.ok_click
+00037fa0: 6564 2829 2020 2320 4f70 656e 7320 6572  ed()  # Opens er
+00037fb0: 726f 7220 6469 616c 6f67 0a0a 2020 2020  ror dialog..    
+00037fc0: 2020 2020 2020 2020 6d6f 636b 5f65 7865          mock_exe
+00037fd0: 6375 7461 626c 6528 0a20 2020 2020 2020  cutable(.       
+00037fe0: 2020 2020 2020 2020 2074 6d70 5f70 6174           tmp_pat
+00037ff0: 682c 0a20 2020 2020 2020 2020 2020 2020  h,.             
+00038000: 2020 2022 7275 6e5f 7370 6d2e 7368 222c     "run_spm.sh",
+00038010: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00038020: 2066 6169 6c69 6e67 3d54 7275 652c 0a20   failing=True,. 
+00038030: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00038040: 7272 5f6d 7367 3d22 7368 6172 6564 206c  rr_msg="shared l
+00038050: 6962 7261 7269 6573 222c 0a20 2020 2020  ibraries",.     
+00038060: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+00038070: 2020 2020 2020 6d61 696e 5f77 6e64 2e70        main_wnd.p
+00038080: 6f70 5f75 705f 7072 6566 6572 656e 6365  op_up_preference
+00038090: 732e 6f6b 5f63 6c69 636b 6564 2829 2020  s.ok_clicked()  
+000380a0: 2320 4f70 656e 7320 6572 726f 7220 6469  # Opens error di
+000380b0: 616c 6f67 0a0a 2020 2020 2020 2020 2020  alog..          
+000380c0: 2020 2320 5265 7374 7269 6374 7320 7468    # Restricts th
+000380d0: 6520 7065 726d 6973 7369 6f6e 2072 6571  e permission req
+000380e0: 7569 7265 6420 746f 2072 756e 2074 6865  uired to run the
+000380f0: 204d 4154 4c41 420a 2020 2020 2020 2020   MATLAB.        
+00038100: 2020 2020 2320 6578 6563 7574 6162 6c65      # executable
+00038110: 2074 6f20 696e 6475 6365 2061 6e20 6578   to induce an ex
+00038120: 6365 7074 696f 6e20 6f6e 2027 7375 6270  ception on 'subp
+00038130: 726f 6365 7373 2e50 6f70 656e 270a 2020  rocess.Popen'.  
+00038140: 2020 2020 2020 2020 2020 7375 6270 726f            subpro
+00038150: 6365 7373 2e72 756e 280a 2020 2020 2020  cess.run(.      
+00038160: 2020 2020 2020 2020 2020 5b22 6368 6d6f            ["chmo
+00038170: 6422 2c20 222d 7822 2c20 6f73 2e70 6174  d", "-x", os.pat
+00038180: 682e 6a6f 696e 2874 6d70 5f70 6174 682c  h.join(tmp_path,
+00038190: 2022 7275 6e5f 7370 6d2e 7368 2229 5d0a   "run_spm.sh")].
+000381a0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+000381b0: 2020 2020 2020 2020 2020 6d61 696e 5f77            main_w
+000381c0: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
+000381d0: 656e 6365 732e 6f6b 5f63 6c69 636b 6564  ences.ok_clicked
+000381e0: 2829 2020 2320 4f70 656e 7320 6572 726f  ()  # Opens erro
+000381f0: 7220 6469 616c 6f67 0a0a 2020 2020 2020  r dialog..      
+00038200: 2020 2020 2020 636f 6e66 6967 203d 2043        config = C
+00038210: 6f6e 6669 6728 636f 6e66 6967 5f70 6174  onfig(config_pat
+00038220: 683d 7365 6c66 2e63 6f6e 6669 675f 7061  h=self.config_pa
+00038230: 7468 290a 2020 2020 2020 2020 2020 2020  th).            
+00038240: 7365 6c66 2e61 7373 6572 7446 616c 7365  self.assertFalse
+00038250: 2863 6f6e 6669 672e 6765 745f 7573 655f  (config.get_use_
+00038260: 7370 6d5f 7374 616e 6461 6c6f 6e65 2829  spm_standalone()
+00038270: 290a 2020 2020 2020 2020 2020 2020 7365  ).            se
+00038280: 6c66 2e61 7373 6572 7446 616c 7365 2863  lf.assertFalse(c
+00038290: 6f6e 6669 672e 6765 745f 7573 655f 6d61  onfig.get_use_ma
+000382a0: 746c 6162 5f73 7461 6e64 616c 6f6e 6528  tlab_standalone(
+000382b0: 2929 0a0a 2020 2020 2020 2020 2020 2020  ))..            
+000382c0: 2320 5061 7373 696e 6720 636f 6e66 6967  # Passing config
+000382d0: 7572 6174 696f 6e73 2066 6f72 2053 504d  urations for SPM
+000382e0: 2073 7461 6e64 616c 6f6e 6520 2b20 4d41   standalone + MA
+000382f0: 544c 4142 204d 4352 0a0a 2020 2020 2020  TLAB MCR..      
+00038300: 2020 2020 2020 2320 4372 6561 7465 7320        # Creates 
+00038310: 616e 2053 504d 2073 7461 6e64 616c 6f6e  an SPM standalon
+00038320: 6520 6578 6563 7574 6162 6c65 2074 6861  e executable tha
+00038330: 7420 7468 726f 7773 2061 206e 6f6e 2d63  t throws a non-c
+00038340: 7269 7469 6361 6c0a 2020 2020 2020 2020  ritical.        
+00038350: 2020 2020 2320 6572 726f 720a 2020 2020      # error.    
+00038360: 2020 2020 2020 2020 6d6f 636b 5f65 7865          mock_exe
+00038370: 6375 7461 626c 6528 0a20 2020 2020 2020  cutable(.       
+00038380: 2020 2020 2020 2020 2074 6d70 5f70 6174           tmp_pat
+00038390: 682c 0a20 2020 2020 2020 2020 2020 2020  h,.             
+000383a0: 2020 2022 7275 6e5f 7370 6d2e 7368 222c     "run_spm.sh",
+000383b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000383c0: 2066 6169 6c69 6e67 3d54 7275 652c 0a20   failing=True,. 
+000383d0: 2020 2020 2020 2020 2020 2020 2020 206f                 o
+000383e0: 7574 7075 743d 225f 205f 2076 6572 7369  utput="_ _ versi
+000383f0: 6f6e 2028 7374 616e 6461 6c6f 6e65 2922  on (standalone)"
+00038400: 2c0a 2020 2020 2020 2020 2020 2020 290a  ,.            ).
+00038410: 0a20 2020 2020 2020 2020 2020 206d 6169  .            mai
+00038420: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
+00038430: 6665 7265 6e63 6573 2e6f 6b5f 636c 6963  ferences.ok_clic
+00038440: 6b65 6428 2920 2023 2043 6c6f 7365 7320  ked()  # Closes 
+00038450: 7769 6e64 6f77 0a0a 2020 2020 2020 2020  window..        
+00038460: 2020 2020 636f 6e66 6967 203d 2043 6f6e      config = Con
+00038470: 6669 6728 636f 6e66 6967 5f70 6174 683d  fig(config_path=
+00038480: 7365 6c66 2e63 6f6e 6669 675f 7061 7468  self.config_path
+00038490: 290a 2020 2020 2020 2020 2020 2020 2320  ).            # 
+000384a0: 4649 584d 453a 2074 6865 2066 6f6c 6c6f  FIXME: the follo
+000384b0: 7769 6e67 206c 696e 6573 206d 616b 6573  wing lines makes
+000384c0: 2c20 6f6e 6c79 2077 6974 6820 6d61 636f  , only with maco
+000384d0: 7320 6275 696c 643a 0a20 2020 2020 2020  s build:.       
+000384e0: 2020 2020 2023 2020 2020 2020 2020 2741       #        'A
+000384f0: 7373 6572 7469 6f6e 4572 726f 723a 2046  ssertionError: F
+00038500: 616c 7365 2069 7320 6e6f 7420 7472 7565  alse is not true
+00038510: 272e 2043 6f6d 6d65 6e74 6564 2e0a 2020  '. Commented..  
+00038520: 2020 2020 2020 2020 2020 2320 7365 6c66            # self
+00038530: 2e61 7373 6572 7454 7275 6528 636f 6e66  .assertTrue(conf
+00038540: 6967 2e67 6574 5f75 7365 5f73 706d 5f73  ig.get_use_spm_s
+00038550: 7461 6e64 616c 6f6e 6528 2929 0a20 2020  tandalone()).   
+00038560: 2020 2020 2020 2020 2023 2073 656c 662e           # self.
+00038570: 6173 7365 7274 5472 7565 2863 6f6e 6669  assertTrue(confi
+00038580: 672e 6765 745f 7573 655f 6d61 746c 6162  g.get_use_matlab
+00038590: 5f73 7461 6e64 616c 6f6e 6528 2929 0a0a  _standalone())..
+000385a0: 2020 2020 2020 2020 2020 2020 2320 5265              # Re
+000385b0: 7365 7473 2074 6865 2027 636f 6e66 6967  sets the 'config
+000385c0: 2720 6f62 6a65 6374 0a20 2020 2020 2020  ' object.       
+000385d0: 2020 2020 2063 6f6e 6669 672e 7365 745f       config.set_
+000385e0: 7370 6d5f 7374 616e 6461 6c6f 6e65 5f70  spm_standalone_p
+000385f0: 6174 6828 2222 290a 2020 2020 2020 2020  ath("").        
+00038600: 2020 2020 636f 6e66 6967 2e73 6574 5f75      config.set_u
+00038610: 7365 5f73 706d 5f73 7461 6e64 616c 6f6e  se_spm_standalon
+00038620: 6528 4661 6c73 6529 0a20 2020 2020 2020  e(False).       
+00038630: 2020 2020 2063 6f6e 6669 672e 7365 745f       config.set_
+00038640: 7573 655f 6d61 746c 6162 5f73 7461 6e64  use_matlab_stand
+00038650: 616c 6f6e 6528 4661 6c73 6529 0a0a 2020  alone(False)..  
+00038660: 2020 2020 2020 2020 2020 6d61 696e 5f77            main_w
+00038670: 6e64 2e73 6f66 7477 6172 655f 7072 6566  nd.software_pref
+00038680: 6572 656e 6365 735f 706f 705f 7570 2829  erences_pop_up()
+00038690: 2020 2320 4f70 656e 7320 7468 6520 7769    # Opens the wi
+000386a0: 6e64 6f77 0a20 2020 2020 2020 2020 2020  ndow.           
+000386b0: 2023 2066 6d74 3a20 6f66 660a 2020 2020   # fmt: off.    
+000386c0: 2020 2020 2020 2020 280a 2020 2020 2020          (.      
+000386d0: 2020 2020 2020 2020 2020 6d61 696e 5f77            main_w
+000386e0: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
+000386f0: 656e 6365 732e 7573 655f 7370 6d5f 7374  ences.use_spm_st
+00038700: 616e 6461 6c6f 6e65 5f63 6865 636b 626f  andalone_checkbo
+00038710: 782e 0a20 2020 2020 2020 2020 2020 2020  x..             
+00038720: 2020 2073 6574 4368 6563 6b65 6428 5472     setChecked(Tr
+00038730: 7565 290a 2020 2020 2020 2020 2020 2020  ue).            
+00038740: 290a 2020 2020 2020 2020 2020 2020 2320  ).            # 
+00038750: 666d 743a 206f 6e0a 2020 2020 2020 2020  fmt: on.        
+00038760: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
+00038770: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
+00038780: 7370 6d5f 7374 616e 6461 6c6f 6e65 5f63  spm_standalone_c
+00038790: 686f 6963 652e 7365 7454 6578 7428 746d  hoice.setText(tm
+000387a0: 705f 7061 7468 290a 0a20 2020 2020 2020  p_path)..       
+000387b0: 2020 2020 206d 6f63 6b5f 6578 6563 7574       mock_execut
+000387c0: 6162 6c65 2874 6d70 5f70 6174 682c 2022  able(tmp_path, "
+000387d0: 7275 6e5f 7370 6d2e 7368 2229 0a0a 2020  run_spm.sh")..  
+000387e0: 2020 2020 2020 2020 2020 6d61 696e 5f77            main_w
+000387f0: 6e64 2e70 6f70 5f75 705f 7072 6566 6572  nd.pop_up_prefer
+00038800: 656e 6365 732e 6f6b 5f63 6c69 636b 6564  ences.ok_clicked
+00038810: 2829 2020 2320 436c 6f73 6573 2074 6865  ()  # Closes the
+00038820: 2077 696e 646f 770a 0a20 2020 2020 2020   window..       
+00038830: 2020 2020 2063 6f6e 6669 6720 3d20 436f       config = Co
+00038840: 6e66 6967 2863 6f6e 6669 675f 7061 7468  nfig(config_path
+00038850: 3d73 656c 662e 636f 6e66 6967 5f70 6174  =self.config_pat
+00038860: 6829 0a20 2020 2020 2020 2020 2020 2023  h).            #
+00038870: 2046 4958 4d45 3a20 7468 6520 666f 6c6c   FIXME: the foll
+00038880: 6f77 696e 6720 6c69 6e65 7320 6d61 6b65  owing lines make
+00038890: 732c 206f 6e6c 7920 7769 7468 206d 6163  s, only with mac
+000388a0: 6f73 2062 7569 6c64 3a0a 2020 2020 2020  os build:.      
+000388b0: 2020 2020 2020 2320 2020 2020 2020 2027        #        '
+000388c0: 4173 7365 7274 696f 6e45 7272 6f72 3a20  AssertionError: 
+000388d0: 4661 6c73 6520 6973 206e 6f74 2074 7275  False is not tru
+000388e0: 6527 2e20 436f 6d6d 656e 7465 642e 0a20  e'. Commented.. 
+000388f0: 2020 2020 2020 2020 2020 2023 2073 656c             # sel
+00038900: 662e 6173 7365 7274 5472 7565 2863 6f6e  f.assertTrue(con
+00038910: 6669 672e 6765 745f 7573 655f 7370 6d5f  fig.get_use_spm_
+00038920: 7374 616e 6461 6c6f 6e65 2829 290a 2020  standalone()).  
+00038930: 2020 2020 2020 2020 2020 2320 7365 6c66            # self
+00038940: 2e61 7373 6572 7454 7275 6528 636f 6e66  .assertTrue(conf
+00038950: 6967 2e67 6574 5f75 7365 5f6d 6174 6c61  ig.get_use_matla
+00038960: 625f 7374 616e 6461 6c6f 6e65 2829 290a  b_standalone()).
+00038970: 0a20 2020 2020 2020 2020 2020 2023 2052  .            # R
+00038980: 6573 6574 7320 7468 6520 2763 6f6e 6669  esets the 'confi
+00038990: 6727 206f 626a 6563 740a 2020 2020 2020  g' object.      
+000389a0: 2020 2020 2020 636f 6e66 6967 2e73 6574        config.set
+000389b0: 5f75 7365 5f73 706d 5f73 7461 6e64 616c  _use_spm_standal
+000389c0: 6f6e 6528 4661 6c73 6529 0a20 2020 2020  one(False).     
+000389d0: 2020 2020 2020 2063 6f6e 6669 672e 7365         config.se
+000389e0: 745f 7573 655f 6d61 746c 6162 5f73 7461  t_use_matlab_sta
+000389f0: 6e64 616c 6f6e 6528 4661 6c73 6529 0a0a  ndalone(False)..
+00038a00: 2020 2020 2020 2020 2020 2020 6d61 696e              main
+00038a10: 5f77 6e64 2e73 6f66 7477 6172 655f 7072  _wnd.software_pr
+00038a20: 6566 6572 656e 6365 735f 706f 705f 7570  eferences_pop_up
+00038a30: 2829 2020 2320 4f70 656e 7320 7468 6520  ()  # Opens the 
+00038a40: 7769 6e64 6f77 0a20 2020 2020 2020 2020  window.         
+00038a50: 2020 2023 2066 6d74 3a20 6f66 660a 2020     # fmt: off.  
+00038a60: 2020 2020 2020 2020 2020 280a 2020 2020            (.    
+00038a70: 2020 2020 2020 2020 2020 2020 6d61 696e              main
+00038a80: 5f77 6e64 2e70 6f70 5f75 705f 7072 6566  _wnd.pop_up_pref
+00038a90: 6572 656e 6365 732e 7573 655f 7370 6d5f  erences.use_spm_
+00038aa0: 7374 616e 6461 6c6f 6e65 5f63 6865 636b  standalone_check
+00038ab0: 626f 782e 0a20 2020 2020 2020 2020 2020  box..           
+00038ac0: 2020 2020 2073 6574 4368 6563 6b65 6428       setChecked(
+00038ad0: 5472 7565 290a 2020 2020 2020 2020 2020  True).          
+00038ae0: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+00038af0: 2320 666d 743a 206f 6e0a 0a20 2020 2020  # fmt: on..     
+00038b00: 2020 2020 2020 2023 2054 6865 2073 616d         # The sam
+00038b10: 6520 4d41 544c 4142 2064 6972 6563 746f  e MATLAB directo
+00038b20: 7279 2069 7320 616c 7265 6164 7920 7468  ry is already th
+00038b30: 6520 7361 6d65 206f 6e20 626f 7468 2074  e same on both t
+00038b40: 6865 0a20 2020 2020 2020 2020 2020 2023  he.            #
+00038b50: 2070 7265 6665 7265 6e63 6573 2077 696e   preferences win
+00038b60: 646f 7720 616e 6420 2763 6f6e 6669 6727  dow and 'config'
+00038b70: 206f 626a 6563 742c 2073 616d 6520 666f   object, same fo
+00038b80: 7220 5350 4d0a 2020 2020 2020 2020 2020  r SPM.          
+00038b90: 2020 2320 7374 616e 6461 6c6f 6e65 0a20    # standalone. 
+00038ba0: 2020 2020 2020 2020 2020 206d 6169 6e5f             main_
+00038bb0: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
+00038bc0: 7265 6e63 6573 2e6f 6b5f 636c 6963 6b65  rences.ok_clicke
+00038bd0: 6428 2920 2023 2043 6c6f 7365 7320 7468  d()  # Closes th
+00038be0: 6520 7769 6e64 6f77 0a0a 2020 2020 2020  e window..      
+00038bf0: 2020 2020 2020 636f 6e66 6967 203d 2043        config = C
+00038c00: 6f6e 6669 6728 636f 6e66 6967 5f70 6174  onfig(config_pat
+00038c10: 683d 7365 6c66 2e63 6f6e 6669 675f 7061  h=self.config_pa
+00038c20: 7468 290a 2020 2020 2020 2020 2020 2020  th).            
+00038c30: 2320 4649 584d 453a 2074 6865 2066 6f6c  # FIXME: the fol
+00038c40: 6c6f 7769 6e67 206c 696e 6573 206d 616b  lowing lines mak
+00038c50: 6573 2c20 6f6e 6c79 2077 6974 6820 6d61  es, only with ma
+00038c60: 636f 7320 6275 696c 643a 0a20 2020 2020  cos build:.     
+00038c70: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00038c80: 2741 7373 6572 7469 6f6e 4572 726f 723a  'AssertionError:
+00038c90: 2046 616c 7365 2069 7320 6e6f 7420 7472   False is not tr
+00038ca0: 7565 272e 2043 6f6d 6d65 6e74 6564 2e0a  ue'. Commented..
+00038cb0: 2020 2020 2020 2020 2020 2020 2320 7365              # se
+00038cc0: 6c66 2e61 7373 6572 7454 7275 6528 636f  lf.assertTrue(co
+00038cd0: 6e66 6967 2e67 6574 5f75 7365 5f73 706d  nfig.get_use_spm
+00038ce0: 5f73 7461 6e64 616c 6f6e 6528 2929 0a20  _standalone()). 
+00038cf0: 2020 2020 2020 2020 2020 2023 2073 656c             # sel
+00038d00: 662e 6173 7365 7274 5472 7565 2863 6f6e  f.assertTrue(con
+00038d10: 6669 672e 6765 745f 7573 655f 6d61 746c  fig.get_use_matl
+00038d20: 6162 5f73 7461 6e64 616c 6f6e 6528 2929  ab_standalone())
+00038d30: 0a0a 2020 2020 2020 2020 436f 6e66 6967  ..        Config
+00038d40: 2863 6f6e 6669 675f 7061 7468 3d73 656c  (config_path=sel
+00038d50: 662e 636f 6e66 6967 5f70 6174 6829 2e73  f.config_path).s
+00038d60: 6574 5f70 726f 6a65 6374 735f 7361 7665  et_projects_save
+00038d70: 5f70 6174 6828 746d 705f 7061 7468 290a  _path(tmp_path).
+00038d80: 0a20 2020 2020 2020 2023 2054 6573 7420  .        # Test 
+00038d90: 7468 6520 636f 6e66 6967 7572 6174 696f  the configuratio
+00038da0: 6e20 6d6f 6475 6c65 7320 4146 4e49 2c20  n modules AFNI, 
+00038db0: 414e 5453 2c20 4653 4c2c 2053 504d 2061  ANTS, FSL, SPM a
+00038dc0: 6e64 204d 4154 4c41 420a 2020 2020 2020  nd MATLAB.      
+00038dd0: 2020 7465 7374 5f61 666e 695f 636f 6e66    test_afni_conf
+00038de0: 6967 2829 0a20 2020 2020 2020 2074 6573  ig().        tes
+00038df0: 745f 616e 7473 5f63 6f6e 6669 6728 290a  t_ants_config().
+00038e00: 2020 2020 2020 2020 7465 7374 5f66 736c          test_fsl
+00038e10: 5f63 6f6e 6669 6728 290a 2020 2020 2020  _config().      
+00038e20: 2020 7465 7374 5f73 706d 5f6d 6174 6c61    test_spm_matla
+00038e30: 625f 636f 6e66 6967 2829 0a20 2020 2020  b_config().     
+00038e40: 2020 2074 6573 745f 6d61 746c 6162 5f63     test_matlab_c
+00038e50: 6f6e 6669 6728 290a 2020 2020 2020 2020  onfig().        
+00038e60: 7465 7374 5f6d 6174 6c61 625f 6d63 725f  test_matlab_mcr_
+00038e70: 7370 6d5f 7374 616e 6461 6c6f 6e65 2829  spm_standalone()
+00038e80: 0a0a 2020 2020 6465 6620 7465 7374 5f73  ..    def test_s
+00038e90: 6f66 7477 6172 655f 7072 6566 6572 656e  oftware_preferen
+00038ea0: 6365 735f 706f 705f 7570 5f76 616c 6964  ces_pop_up_valid
+00038eb0: 6174 6528 7365 6c66 293a 0a20 2020 2020  ate(self):.     
+00038ec0: 2020 2022 2222 4f70 656e 7320 7468 6520     """Opens the 
+00038ed0: 7072 6566 6572 656e 6365 7320 706f 7020  preferences pop 
+00038ee0: 7570 2c20 7365 7473 2074 6865 2063 6f6e  up, sets the con
+00038ef0: 6669 6775 7261 7469 6f6e 2e0a 0a20 2020  figuration...   
+00038f00: 2020 2020 2046 6f72 206d 6f64 756c 6573       For modules
+00038f10: 2041 464e 492c 2041 4e54 532c 2046 534c   AFNI, ANTS, FSL
+00038f20: 2c20 5350 4d20 616e 6420 4d41 544c 4142  , SPM and MATLAB
+00038f30: 2077 6974 686f 7574 2070 7265 7373 696e   without pressin
+00038f40: 6720 7468 6520 4f4b 0a20 2020 2020 2020  g the OK.       
+00038f50: 2062 7574 746f 6e20 616e 6420 7377 6974   button and swit
+00038f60: 6368 6573 2074 6865 2061 7574 6f2d 7361  ches the auto-sa
+00038f70: 7665 2c20 636f 6e74 726f 6c6c 6572 2076  ve, controller v
+00038f80: 6572 7369 6f6e 2061 6e64 2072 6164 696f  ersion and radio
+00038f90: 0a20 2020 2020 2020 2076 6965 7720 6f70  .        view op
+00038fa0: 7469 6f6e 732e 0a0a 2020 2020 2020 2020  tions...        
+00038fb0: 2d20 5465 7374 733a 2050 6f70 5570 5072  - Tests: PopUpPr
+00038fc0: 6566 6572 656e 6365 732e 7661 6c69 6461  eferences.valida
+00038fd0: 7465 5f61 6e64 5f73 6176 650a 0a20 2020  te_and_save..   
+00038fe0: 2020 2020 202d 204d 6f63 6b73 3a0a 2020       - Mocks:.  
+00038ff0: 2020 2020 2020 2020 2020 2d20 506f 7055            - PopU
+00039000: 7050 7265 6665 7265 6e63 6573 2e73 686f  pPreferences.sho
+00039010: 770a 2020 2020 2020 2020 2020 2020 2d20  w.            - 
+00039020: 514d 6573 7361 6765 426f 782e 7368 6f77  QMessageBox.show
+00039030: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
+00039040: 2020 2020 2020 2320 5661 6c69 6461 7465        # Validate
+00039050: 7320 7468 6520 5069 7065 6c69 6e65 2074  s the Pipeline t
+00039060: 6162 2077 6974 686f 7574 2070 7265 7373  ab without press
+00039070: 696e 6720 7468 6520 274f 4b27 2062 7574  ing the 'OK' but
+00039080: 746f 6e3a 0a0a 2020 2020 2020 2020 2320  ton:..        # 
+00039090: 5365 7420 7368 6f72 7463 7574 7320 666f  Set shortcuts fo
+000390a0: 7220 6f62 6a65 6374 7320 7468 6174 2061  r objects that a
+000390b0: 7265 206f 6674 656e 2075 7365 640a 2020  re often used.  
+000390c0: 2020 2020 2020 6d61 696e 5f77 6e64 203d        main_wnd =
+000390d0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+000390e0: 770a 0a20 2020 2020 2020 2023 204d 6f63  w..        # Moc
+000390f0: 6b73 2074 6865 2065 7865 6375 7469 6f6e  ks the execution
+00039100: 206f 6620 2750 6f70 5570 5072 6566 6572   of 'PopUpPrefer
+00039110: 656e 6365 7327 2074 6f20 7370 6565 6420  ences' to speed 
+00039120: 7570 2074 6865 2074 6573 740a 2020 2020  up the test.    
+00039130: 2020 2020 2320 506f 7055 7050 7265 6665      # PopUpPrefe
+00039140: 7265 6e63 6573 2e73 686f 7720 3d20 6c61  rences.show = la
+00039150: 6d62 6461 2078 3a20 4e6f 6e65 0a0a 2020  mbda x: None..  
+00039160: 2020 2020 2020 746d 705f 7061 7468 203d        tmp_path =
+00039170: 2073 656c 662e 636f 6e66 6967 5f70 6174   self.config_pat
+00039180: 680a 2020 2020 2020 2020 6d61 696e 5f77  h.        main_w
+00039190: 6e64 2e73 6f66 7477 6172 655f 7072 6566  nd.software_pref
+000391a0: 6572 656e 6365 735f 706f 705f 7570 2829  erences_pop_up()
+000391b0: 0a0a 2020 2020 2020 2020 2320 5365 6c65  ..        # Sele
+000391c0: 6374 7320 7374 616e 6461 6c6f 6e65 206d  cts standalone m
+000391d0: 6f64 756c 6573 0a20 2020 2020 2020 2066  odules.        f
+000391e0: 6f72 206d 6f64 756c 6520 696e 205b 226d  or module in ["m
+000391f0: 6174 6c61 625f 7374 616e 6461 6c6f 6e65  atlab_standalone
+00039200: 222c 2022 7370 6d5f 7374 616e 6461 6c6f  ", "spm_standalo
+00039210: 6e65 225d 3a0a 2020 2020 2020 2020 2020  ne"]:.          
+00039220: 2020 6765 7461 7474 7228 0a20 2020 2020    getattr(.     
+00039230: 2020 2020 2020 2020 2020 206d 6169 6e5f             main_
+00039240: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
+00039250: 7265 6e63 6573 2c20 2275 7365 5f22 202b  rences, "use_" +
+00039260: 206d 6f64 756c 6520 2b20 225f 6368 6563   module + "_chec
+00039270: 6b62 6f78 220a 2020 2020 2020 2020 2020  kbox".          
+00039280: 2020 292e 7365 7443 6865 636b 6564 2854    ).setChecked(T
+00039290: 7275 6529 0a0a 2020 2020 2020 2020 2320  rue)..        # 
+000392a0: 5661 6c69 6461 7465 7320 7468 6520 5069  Validates the Pi
+000392b0: 7065 6c69 6e65 2074 6162 2077 6974 686f  peline tab witho
+000392c0: 7574 2070 7265 7373 696e 6720 7468 6520  ut pressing the 
+000392d0: 274f 4b27 2062 7574 746f 6e0a 2020 2020  'OK' button.    
+000392e0: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
+000392f0: 5f75 705f 7072 6566 6572 656e 6365 732e  _up_preferences.
+00039300: 7661 6c69 6461 7465 5f61 6e64 5f73 6176  validate_and_sav
+00039310: 6528 290a 0a20 2020 2020 2020 2063 6f6e  e()..        con
+00039320: 6669 6720 3d20 436f 6e66 6967 2863 6f6e  fig = Config(con
+00039330: 6669 675f 7061 7468 3d73 656c 662e 636f  fig_path=self.co
+00039340: 6e66 6967 5f70 6174 6829 0a20 2020 2020  nfig_path).     
+00039350: 2020 2066 6f72 206d 6f64 756c 6520 696e     for module in
+00039360: 205b 226d 6174 6c61 625f 7374 616e 6461   ["matlab_standa
+00039370: 6c6f 6e65 222c 2022 7370 6d5f 7374 616e  lone", "spm_stan
+00039380: 6461 6c6f 6e65 225d 3a0a 2020 2020 2020  dalone"]:.      
+00039390: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+000393a0: 7454 7275 6528 6765 7461 7474 7228 636f  tTrue(getattr(co
+000393b0: 6e66 6967 2c20 2267 6574 5f75 7365 5f22  nfig, "get_use_"
+000393c0: 202b 206d 6f64 756c 6529 2829 290a 0a20   + module)()).. 
+000393d0: 2020 2020 2020 2023 2053 656c 6563 7473         # Selects
+000393e0: 206e 6f6e 2073 7461 6e64 616c 6f6e 6520   non standalone 
+000393f0: 6d6f 6475 6c65 730a 2020 2020 2020 2020  modules.        
+00039400: 666f 7220 6d6f 6475 6c65 2069 6e20 5b22  for module in ["
+00039410: 6166 6e69 222c 2022 616e 7473 222c 2022  afni", "ants", "
+00039420: 6673 6c22 2c20 226d 6174 6c61 6222 2c20  fsl", "matlab", 
+00039430: 2273 706d 225d 3a0a 2020 2020 2020 2020  "spm"]:.        
+00039440: 2020 2020 6765 7461 7474 7228 0a20 2020      getattr(.   
+00039450: 2020 2020 2020 2020 2020 2020 206d 6169               mai
+00039460: 6e5f 776e 642e 706f 705f 7570 5f70 7265  n_wnd.pop_up_pre
+00039470: 6665 7265 6e63 6573 2c20 2275 7365 5f22  ferences, "use_"
+00039480: 202b 206d 6f64 756c 6520 2b20 225f 6368   + module + "_ch
+00039490: 6563 6b62 6f78 220a 2020 2020 2020 2020  eckbox".        
+000394a0: 2020 2020 292e 7365 7443 6865 636b 6564      ).setChecked
+000394b0: 2854 7275 6529 0a0a 2020 2020 2020 2020  (True)..        
+000394c0: 2320 5661 6c69 6461 7465 7320 7468 6520  # Validates the 
+000394d0: 5069 7065 6c69 6e65 2074 6162 2077 6974  Pipeline tab wit
+000394e0: 686f 7574 2070 7265 7373 696e 6720 7468  hout pressing th
+000394f0: 6520 274f 4b27 2062 7574 746f 6e0a 2020  e 'OK' button.  
+00039500: 2020 2020 2020 6d61 696e 5f77 6e64 2e70        main_wnd.p
+00039510: 6f70 5f75 705f 7072 6566 6572 656e 6365  op_up_preference
+00039520: 732e 7661 6c69 6461 7465 5f61 6e64 5f73  s.validate_and_s
+00039530: 6176 6528 290a 0a20 2020 2020 2020 2063  ave()..        c
+00039540: 6f6e 6669 6720 3d20 436f 6e66 6967 2863  onfig = Config(c
+00039550: 6f6e 6669 675f 7061 7468 3d73 656c 662e  onfig_path=self.
+00039560: 636f 6e66 6967 5f70 6174 6829 0a20 2020  config_path).   
+00039570: 2020 2020 2066 6f72 206d 6f64 756c 6520       for module 
+00039580: 696e 205b 2261 666e 6922 2c20 2261 6e74  in ["afni", "ant
+00039590: 7322 2c20 2266 736c 222c 2022 6d61 746c  s", "fsl", "matl
+000395a0: 6162 222c 2022 7370 6d22 5d3a 0a20 2020  ab", "spm"]:.   
+000395b0: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
+000395c0: 7365 7274 5472 7565 2867 6574 6174 7472  sertTrue(getattr
+000395d0: 2863 6f6e 6669 672c 2022 6765 745f 7573  (config, "get_us
+000395e0: 655f 2220 2b20 6d6f 6475 6c65 2928 2929  e_" + module)())
+000395f0: 0a0a 2020 2020 2020 2020 2320 5661 6c69  ..        # Vali
+00039600: 6461 7465 7320 7468 6520 5069 7065 6c69  dates the Pipeli
+00039610: 6e65 2074 6162 2062 7920 7072 6573 7369  ne tab by pressi
+00039620: 6e67 2074 6865 2027 4f4b 2720 6275 7474  ng the 'OK' butt
+00039630: 6f6e 3a0a 0a20 2020 2020 2020 2023 2053  on:..        # S
+00039640: 6574 7320 7468 6520 7072 6f6a 6563 7473  ets the projects
+00039650: 2066 6f6c 6465 7220 666f 7220 7468 6520   folder for the 
+00039660: 7072 6566 6572 656e 6365 7320 7769 6e64  preferences wind
+00039670: 6f77 2074 6f20 636c 6f73 650a 2020 2020  ow to close.    
+00039680: 2020 2020 2320 7768 656e 2070 7265 7373      # when press
+00039690: 696e 6720 6f6e 2027 4f4b 270a 2020 2020  ing on 'OK'.    
+000396a0: 2020 2020 280a 2020 2020 2020 2020 2020      (.          
+000396b0: 2020 6d61 696e 5f77 6e64 2e70 6f70 5f75    main_wnd.pop_u
+000396c0: 705f 7072 6566 6572 656e 6365 732e 7072  p_preferences.pr
+000396d0: 6f6a 6563 7473 5f73 6176 655f 7061 7468  ojects_save_path
+000396e0: 5f6c 696e 655f 6564 6974 2e73 6574 5465  _line_edit.setTe
+000396f0: 7874 280a 2020 2020 2020 2020 2020 2020  xt(.            
+00039700: 2020 2020 746d 705f 7061 7468 0a20 2020      tmp_path.   
+00039710: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+00039720: 2020 2029 0a0a 2020 2020 2020 2020 2320     )..        # 
+00039730: 4d6f 636b 7320 7468 6520 6578 6563 7574  Mocks the execut
+00039740: 696f 6e20 6f66 2027 7772 6f6e 675f 7061  ion of 'wrong_pa
+00039750: 7468 2720 616e 6420 2751 4d65 7373 6167  th' and 'QMessag
+00039760: 6542 6f78 2e73 686f 7727 0a20 2020 2020  eBox.show'.     
+00039770: 2020 206d 6169 6e5f 776e 642e 706f 705f     main_wnd.pop_
+00039780: 7570 5f70 7265 6665 7265 6e63 6573 2e77  up_preferences.w
+00039790: 726f 6e67 5f70 6174 6820 3d20 6c61 6d62  rong_path = lamb
+000397a0: 6461 2078 2c20 793a 204e 6f6e 650a 2020  da x, y: None.  
+000397b0: 2020 2020 2020 514d 6573 7361 6765 426f        QMessageBo
+000397c0: 782e 7368 6f77 203d 206c 616d 6264 6120  x.show = lambda 
+000397d0: 783a 204e 6f6e 650a 0a20 2020 2020 2020  x: None..       
+000397e0: 2023 2044 6573 656c 6563 7473 206e 6f6e   # Deselects non
+000397f0: 2073 7461 6e64 616c 6f6e 6520 6d6f 6475   standalone modu
+00039800: 6c65 730a 2020 2020 2020 2020 666f 7220  les.        for 
+00039810: 6d6f 6475 6c65 2069 6e20 5b22 6166 6e69  module in ["afni
+00039820: 222c 2022 616e 7473 222c 2022 6673 6c22  ", "ants", "fsl"
+00039830: 2c20 226d 6174 6c61 6222 2c20 2273 706d  , "matlab", "spm
+00039840: 225d 3a0a 2020 2020 2020 2020 2020 2020  "]:.            
+00039850: 6765 7461 7474 7228 0a20 2020 2020 2020  getattr(.       
+00039860: 2020 2020 2020 2020 206d 6169 6e5f 776e           main_wn
+00039870: 642e 706f 705f 7570 5f70 7265 6665 7265  d.pop_up_prefere
+00039880: 6e63 6573 2c20 2275 7365 5f22 202b 206d  nces, "use_" + m
+00039890: 6f64 756c 6520 2b20 225f 6368 6563 6b62  odule + "_checkb
+000398a0: 6f78 220a 2020 2020 2020 2020 2020 2020  ox".            
+000398b0: 292e 7365 7443 6865 636b 6564 2846 616c  ).setChecked(Fal
+000398c0: 7365 290a 0a20 2020 2020 2020 2023 2044  se)..        # D
+000398d0: 6573 656c 6563 7473 2074 6865 2027 7261  eselects the 'ra
+000398e0: 6469 6f56 6965 7727 2c20 2761 646d 696e  dioView', 'admin
+000398f0: 4d6f 6465 2720 616e 6420 2763 6c69 6e69  Mode' and 'clini
+00039900: 6361 6c4d 6f64 6527 206f 7074 696f 6e0a  calMode' option.
+00039910: 2020 2020 2020 2020 666f 7220 6f70 7420          for opt 
+00039920: 696e 205b 2273 6176 6522 2c20 2272 6164  in ["save", "rad
+00039930: 696f 5669 6577 222c 2022 6164 6d69 6e5f  ioView", "admin_
+00039940: 6d6f 6465 222c 2022 636c 696e 6963 616c  mode", "clinical
+00039950: 5f6d 6f64 6522 5d3a 0a20 2020 2020 2020  _mode"]:.       
+00039960: 2020 2020 2028 0a20 2020 2020 2020 2020       (.         
+00039970: 2020 2020 2020 2067 6574 6174 7472 280a         getattr(.
+00039980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00039990: 2020 2020 6d61 696e 5f77 6e64 2e70 6f70      main_wnd.pop
+000399a0: 5f75 705f 7072 6566 6572 656e 6365 732c  _up_preferences,
+000399b0: 206f 7074 202b 2022 5f63 6865 636b 626f   opt + "_checkbo
+000399c0: 7822 0a20 2020 2020 2020 2020 2020 2020  x".             
+000399d0: 2020 2029 2e73 6574 4368 6563 6b65 6428     ).setChecked(
+000399e0: 4661 6c73 6529 0a20 2020 2020 2020 2020  False).         
+000399f0: 2020 2029 0a20 2020 2020 2020 2023 2054     ).        # T
+00039a00: 6865 206f 7074 696f 6e73 2061 7574 6f53  he options autoS
+00039a10: 6176 652c 2072 6164 696f 5669 6577 2061  ave, radioView a
+00039a20: 6e64 2063 6f6e 7472 6f6c 5631 2061 7265  nd controlV1 are
+00039a30: 206e 6f74 2073 656c 6563 7465 640a 0a20   not selected.. 
+00039a40: 2020 2020 2020 2023 2053 6574 7320 7468         # Sets th
+00039a50: 6520 7072 6f6a 6563 7473 2073 6176 6520  e projects save 
+00039a60: 7061 7468 0a20 2020 2020 2020 2043 6f6e  path.        Con
+00039a70: 6669 6728 636f 6e66 6967 5f70 6174 683d  fig(config_path=
+00039a80: 7365 6c66 2e63 6f6e 6669 675f 7061 7468  self.config_path
+00039a90: 292e 7365 745f 7072 6f6a 6563 7473 5f73  ).set_projects_s
+00039aa0: 6176 655f 7061 7468 2874 6d70 5f70 6174  ave_path(tmp_pat
+00039ab0: 6829 0a0a 2020 2020 2020 2020 2320 5661  h)..        # Va
+00039ac0: 6c69 6461 7465 7320 7468 6520 616c 6c20  lidates the all 
+00039ad0: 7461 6220 6166 7465 7220 7072 6573 7369  tab after pressi
+00039ae0: 6e67 2074 6865 2027 4f4b 2720 6275 7474  ng the 'OK' butt
+00039af0: 6f6e 0a20 2020 2020 2020 206d 6169 6e5f  on.        main_
+00039b00: 776e 642e 706f 705f 7570 5f70 7265 6665  wnd.pop_up_prefe
+00039b10: 7265 6e63 6573 2e6f 6b5f 636c 6963 6b65  rences.ok_clicke
+00039b20: 6428 290a 0a20 2020 2020 2020 2063 6f6e  d()..        con
+00039b30: 6669 6720 3d20 436f 6e66 6967 2863 6f6e  fig = Config(con
+00039b40: 6669 675f 7061 7468 3d73 656c 662e 636f  fig_path=self.co
+00039b50: 6e66 6967 5f70 6174 6829 0a0a 2020 2020  nfig_path)..    
+00039b60: 2020 2020 666f 7220 6f70 7420 696e 205b      for opt in [
+00039b70: 0a20 2020 2020 2020 2020 2020 2022 6973  .            "is
+00039b80: 4175 746f 5361 7665 222c 0a20 2020 2020  AutoSave",.     
+00039b90: 2020 2020 2020 2022 6973 5261 6469 6f56         "isRadioV
+00039ba0: 6965 7722 2c0a 2020 2020 2020 2020 2020  iew",.          
+00039bb0: 2020 2269 7343 6f6e 7472 6f6c 5631 222c    "isControlV1",
+00039bc0: 0a20 2020 2020 2020 2020 2020 2022 6765  .            "ge
+00039bd0: 745f 7573 655f 636c 696e 6963 616c 222c  t_use_clinical",
+00039be0: 0a20 2020 2020 2020 205d 3a0a 2020 2020  .        ]:.    
+00039bf0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00039c00: 6572 7446 616c 7365 2867 6574 6174 7472  ertFalse(getattr
+00039c10: 2863 6f6e 6669 672c 206f 7074 2928 2929  (config, opt)())
+00039c20: 0a0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+00039c30: 7373 6572 7454 7275 6528 636f 6e66 6967  ssertTrue(config
+00039c40: 2e67 6574 5f75 7365 725f 6d6f 6465 2829  .get_user_mode()
+00039c50: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00039c60: 7373 6572 7445 7175 616c 2863 6f6e 6669  ssertEqual(confi
+00039c70: 672e 6765 745f 7072 6f6a 6563 7473 5f73  g.get_projects_s
+00039c80: 6176 655f 7061 7468 2829 2c20 746d 705f  ave_path(), tmp_
+00039c90: 7061 7468 290a 0a20 2020 2020 2020 2023  path)..        #
+00039ca0: 2044 6573 656c 6563 7473 204d 4154 4c41   Deselects MATLA
+00039cb0: 4220 616e 6420 5350 4d20 6d6f 6475 6c65  B and SPM module
+00039cc0: 7320 6672 6f6d 2074 6865 2063 6f6e 6669  s from the confi
+00039cd0: 6720 6669 6c65 0a20 2020 2020 2020 2063  g file.        c
+00039ce0: 6f6e 6669 6720 3d20 436f 6e66 6967 2863  onfig = Config(c
+00039cf0: 6f6e 6669 675f 7061 7468 3d73 656c 662e  onfig_path=self.
+00039d00: 636f 6e66 6967 5f70 6174 6829 0a0a 2020  config_path)..  
+00039d10: 2020 2020 2020 666f 7220 6d6f 6475 6c65        for module
+00039d20: 2069 6e20 5b22 6d61 746c 6162 222c 2022   in ["matlab", "
+00039d30: 7370 6d22 5d3a 0a20 2020 2020 2020 2020  spm"]:.         
+00039d40: 2020 2067 6574 6174 7472 2863 6f6e 6669     getattr(confi
+00039d50: 672c 2022 7365 745f 7573 655f 2220 2b20  g, "set_use_" + 
+00039d60: 6d6f 6475 6c65 2928 4661 6c73 6529 0a0a  module)(False)..
+00039d70: 2020 2020 2020 2020 6d61 696e 5f77 6e64          main_wnd
+00039d80: 2e73 6f66 7477 6172 655f 7072 6566 6572  .software_prefer
+00039d90: 656e 6365 735f 706f 705f 7570 2829 2020  ences_pop_up()  
+00039da0: 2320 5265 6f70 656e 7320 7468 6520 7769  # Reopens the wi
+00039db0: 6e64 6f77 0a0a 2020 2020 2020 2020 2320  ndow..        # 
+00039dc0: 5365 6c65 6374 7320 7468 6520 6175 746f  Selects the auto
+00039dd0: 5361 7665 2c20 7261 6469 6f56 6965 7720  Save, radioView 
+00039de0: 616e 6420 636f 6e74 726f 6c56 3120 6f70  and controlV1 op
+00039df0: 7469 6f6e 730a 2020 2020 2020 2020 666f  tions.        fo
+00039e00: 7220 6f70 7420 696e 205b 0a20 2020 2020  r opt in [.     
+00039e10: 2020 2020 2020 2022 7361 7665 5f63 6865         "save_che
+00039e20: 636b 626f 7822 2c0a 2020 2020 2020 2020  ckbox",.        
+00039e30: 2020 2020 2272 6164 696f 5669 6577 5f63      "radioView_c
+00039e40: 6865 636b 626f 7822 2c0a 2020 2020 2020  heckbox",.      
+00039e50: 2020 2020 2020 2263 6f6e 7472 6f6c 5f63        "control_c
+00039e60: 6865 636b 626f 7822 2c0a 2020 2020 2020  heckbox",.      
+00039e70: 2020 2020 2020 2261 646d 696e 5f6d 6f64        "admin_mod
+00039e80: 655f 6368 6563 6b62 6f78 222c 0a20 2020  e_checkbox",.   
+00039e90: 2020 2020 2020 2020 2022 636c 696e 6963           "clinic
+00039ea0: 616c 5f6d 6f64 655f 6368 6563 6b62 6f78  al_mode_checkbox
+00039eb0: 222c 0a20 2020 2020 2020 205d 3a0a 2020  ",.        ]:.  
+00039ec0: 2020 2020 2020 2020 2020 6765 7461 7474            getatt
+00039ed0: 7228 6d61 696e 5f77 6e64 2e70 6f70 5f75  r(main_wnd.pop_u
+00039ee0: 705f 7072 6566 6572 656e 6365 732c 206f  p_preferences, o
+00039ef0: 7074 292e 7365 7443 6865 636b 6564 2854  pt).setChecked(T
+00039f00: 7275 6529 0a0a 2020 2020 2020 2020 2320  rue)..        # 
+00039f10: 416c 7465 726e 6174 6573 2074 6f20 6d69  Alternates to mi
+00039f20: 6e69 6d69 7a65 6420 6d6f 6465 0a20 2020  nimized mode.   
+00039f30: 2020 2020 206d 6169 6e5f 776e 642e 706f       main_wnd.po
+00039f40: 705f 7570 5f70 7265 6665 7265 6e63 6573  p_up_preferences
+00039f50: 2e66 756c 6c73 6372 6565 6e5f 6362 6f78  .fullscreen_cbox
+00039f60: 2e73 6574 4368 6563 6b65 6428 5472 7565  .setChecked(True
+00039f70: 290a 0a20 2020 2020 2020 2023 2053 6574  )..        # Set
+00039f80: 7320 6120 6e6f 6e2d 6578 6973 7465 6e74  s a non-existent
+00039f90: 2070 726f 6a65 6374 7320 7361 7665 2070   projects save p
+00039fa0: 6174 680a 2020 2020 2020 2020 436f 6e66  ath.        Conf
+00039fb0: 6967 2863 6f6e 6669 675f 7061 7468 3d73  ig(config_path=s
+00039fc0: 656c 662e 636f 6e66 6967 5f70 6174 6829  elf.config_path)
+00039fd0: 2e73 6574 5f70 726f 6a65 6374 735f 7361  .set_projects_sa
+00039fe0: 7665 5f70 6174 6828 0a20 2020 2020 2020  ve_path(.       
+00039ff0: 2020 2020 206f 732e 7061 7468 2e6a 6f69       os.path.joi
+0003a000: 6e28 746d 705f 7061 7468 2c20 226e 6f6e  n(tmp_path, "non
+0003a010: 5f65 7869 7374 656e 7422 290a 2020 2020  _existent").    
+0003a020: 2020 2020 290a 0a20 2020 2020 2020 2023      )..        #
+0003a030: 2056 616c 6964 6174 6573 2074 6865 2061   Validates the a
+0003a040: 6c6c 2074 6162 2061 6674 6572 2070 7265  ll tab after pre
+0003a050: 7373 696e 6720 7468 6520 274f 4b27 2062  ssing the 'OK' b
+0003a060: 7574 746f 6e0a 2020 2020 2020 2020 6d61  utton.        ma
+0003a070: 696e 5f77 6e64 2e70 6f70 5f75 705f 7072  in_wnd.pop_up_pr
+0003a080: 6566 6572 656e 6365 732e 6f6b 5f63 6c69  eferences.ok_cli
+0003a090: 636b 6564 2829 0a0a 2020 2020 2020 2020  cked()..        
+0003a0a0: 2320 4173 7365 7274 7320 7468 6174 2074  # Asserts that t
+0003a0b0: 6865 2027 636f 6e66 6967 2720 6f62 6a65  he 'config' obje
+0003a0c0: 6374 7320 7761 7320 6e6f 7420 7570 6461  cts was not upda
+0003a0d0: 7465 6420 7769 7468 2074 6865 0a20 2020  ted with the.   
+0003a0e0: 2020 2020 2023 206e 6f6e 2d65 7869 7374       # non-exist
+0003a0f0: 656e 7420 7072 6f6a 6563 7473 2066 6f6c  ent projects fol
+0003a100: 6465 720a 2020 2020 2020 2020 636f 6e66  der.        conf
+0003a110: 6967 203d 2043 6f6e 6669 6728 636f 6e66  ig = Config(conf
+0003a120: 6967 5f70 6174 683d 7365 6c66 2e63 6f6e  ig_path=self.con
+0003a130: 6669 675f 7061 7468 290a 2020 2020 2020  fig_path).      
+0003a140: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0003a150: 616c 2863 6f6e 6669 672e 6765 745f 7072  al(config.get_pr
+0003a160: 6f6a 6563 7473 5f73 6176 655f 7061 7468  ojects_save_path
+0003a170: 2829 2c20 746d 705f 7061 7468 290a 0a20  (), tmp_path).. 
+0003a180: 2020 2064 6566 2074 6573 745f 7377 6974     def test_swit
+0003a190: 6368 5f70 726f 6a65 6374 2873 656c 6629  ch_project(self)
+0003a1a0: 3a0a 2020 2020 2020 2020 2222 2243 7265  :.        """Cre
+0003a1b0: 6174 6573 2061 2070 726f 6a65 6374 2061  ates a project a
+0003a1c0: 6e64 2073 7769 7463 6865 7320 746f 2069  nd switches to i
+0003a1d0: 742e 0a0a 2020 2020 2020 2020 2d20 5465  t...        - Te
+0003a1e0: 7374 733a 204d 6169 6e57 696e 646f 772e  sts: MainWindow.
+0003a1f0: 7377 6974 6368 5f70 726f 6a65 6374 0a0a  switch_project..
+0003a200: 2020 2020 2020 2020 2d20 4d6f 636b 733a          - Mocks:
+0003a210: 2051 4d65 7373 6167 6542 6f78 2e65 7865   QMessageBox.exe
+0003a220: 630a 2020 2020 2020 2020 2222 220a 0a20  c.        """.. 
+0003a230: 2020 2020 2020 2023 204d 6f63 6b73 2074         # Mocks t
+0003a240: 6865 2065 7865 6375 7469 6f6e 206f 6620  he execution of 
+0003a250: 6120 6469 616c 6f67 2077 696e 646f 770a  a dialog window.
+0003a260: 2020 2020 2020 2020 514d 6573 7361 6765          QMessage
+0003a270: 426f 782e 6578 6563 203d 206c 616d 6264  Box.exec = lambd
+0003a280: 6120 7365 6c66 5f3a 204e 6f6e 650a 0a20  a self_: None.. 
+0003a290: 2020 2020 2020 2023 2043 7265 6174 6573         # Creates
+0003a2a0: 2061 206e 6577 2070 726f 6a65 6374 0a20   a new project. 
+0003a2b0: 2020 2020 2020 2074 6573 745f 7072 6f6a         test_proj
+0003a2c0: 5f70 6174 6820 3d20 7365 6c66 2e67 6574  _path = self.get
+0003a2d0: 5f6e 6577 5f74 6573 745f 7072 6f6a 6563  _new_test_projec
+0003a2e0: 7428 290a 0a20 2020 2020 2020 2023 2053  t()..        # S
+0003a2f0: 7769 7463 6865 7320 746f 2061 6e20 6578  witches to an ex
+0003a300: 6973 7469 6e67 206d 6961 2070 726f 6a65  isting mia proje
+0003a310: 6374 0a20 2020 2020 2020 2072 6573 203d  ct.        res =
+0003a320: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+0003a330: 772e 7377 6974 6368 5f70 726f 6a65 6374  w.switch_project
+0003a340: 2874 6573 745f 7072 6f6a 5f70 6174 682c  (test_proj_path,
+0003a350: 2022 7465 7374 5f70 726f 6a65 6374 2229   "test_project")
+0003a360: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0003a370: 7365 7274 5472 7565 2872 6573 290a 2020  sertTrue(res).  
+0003a380: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0003a390: 7445 7175 616c 2873 656c 662e 6d61 696e  tEqual(self.main
+0003a3a0: 5f77 696e 646f 772e 7072 6f6a 6563 742e  _window.project.
+0003a3b0: 666f 6c64 6572 2c20 7465 7374 5f70 726f  folder, test_pro
+0003a3c0: 6a5f 7061 7468 290a 0a20 2020 2020 2020  j_path)..       
+0003a3d0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+0003a3e0: 772e 7072 6f6a 6563 742e 666f 6c64 6572  w.project.folder
+0003a3f0: 203d 2022 2220 2023 2052 6573 6574 7320   = ""  # Resets 
+0003a400: 7468 6520 7072 6f6a 6563 7420 666f 6c64  the project fold
+0003a410: 6572 0a0a 2020 2020 2020 2020 2320 5472  er..        # Tr
+0003a420: 6965 7320 746f 2073 7769 7463 6820 746f  ies to switch to
+0003a430: 2061 206e 6f6e 2d65 7869 7374 656e 7420   a non-existent 
+0003a440: 7072 6f6a 6563 740a 2020 2020 2020 2020  project.        
+0003a450: 7265 7320 3d20 7365 6c66 2e6d 6169 6e5f  res = self.main_
+0003a460: 7769 6e64 6f77 2e73 7769 7463 685f 7072  window.switch_pr
+0003a470: 6f6a 6563 7428 0a20 2020 2020 2020 2020  oject(.         
+0003a480: 2020 2074 6573 745f 7072 6f6a 5f70 6174     test_proj_pat
+0003a490: 6820 2b20 225f 222c 2022 7465 7374 5f70  h + "_", "test_p
+0003a4a0: 726f 6a65 6374 220a 2020 2020 2020 2020  roject".        
+0003a4b0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0003a4c0: 7373 6572 7446 616c 7365 2872 6573 290a  ssertFalse(res).
+0003a4d0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+0003a4e0: 6572 7445 7175 616c 2873 656c 662e 6d61  ertEqual(self.ma
+0003a4f0: 696e 5f77 696e 646f 772e 7072 6f6a 6563  in_window.projec
+0003a500: 742e 666f 6c64 6572 2c20 2222 290a 0a20  t.folder, "").. 
+0003a510: 2020 2020 2020 2023 2054 7269 6573 2074         # Tries t
+0003a520: 6f20 7377 6974 6368 2074 6f20 6120 7072  o switch to a pr
+0003a530: 6f6a 6563 7420 7468 6174 2069 7320 616c  oject that is al
+0003a540: 7265 6164 7920 6f70 656e 6564 2069 6e20  ready opened in 
+0003a550: 616e 6f74 6865 720a 2020 2020 2020 2020  another.        
+0003a560: 2320 696e 7374 616e 6365 206f 6620 7468  # instance of th
+0003a570: 6520 736f 6674 7761 7265 0a20 2020 2020  e software.     
+0003a580: 2020 2072 6573 203d 2073 656c 662e 6d61     res = self.ma
+0003a590: 696e 5f77 696e 646f 772e 7377 6974 6368  in_window.switch
+0003a5a0: 5f70 726f 6a65 6374 2874 6573 745f 7072  _project(test_pr
+0003a5b0: 6f6a 5f70 6174 682c 2022 7465 7374 5f70  oj_path, "test_p
+0003a5c0: 726f 6a65 6374 2229 0a20 2020 2020 2020  roject").       
+0003a5d0: 2073 656c 662e 6173 7365 7274 4661 6c73   self.assertFals
+0003a5e0: 6528 7265 7329 0a20 2020 2020 2020 2073  e(res).        s
+0003a5f0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0003a600: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+0003a610: 2e70 726f 6a65 6374 2e66 6f6c 6465 722c  .project.folder,
+0003a620: 2022 2229 0a0a 2020 2020 2020 2020 2320   "")..        # 
+0003a630: 5265 7365 7473 2074 6865 206f 7065 6e65  Resets the opene
+0003a640: 6420 7072 6f6a 6563 7473 206c 6973 740a  d projects list.
+0003a650: 2020 2020 2020 2020 636f 6e66 6967 203d          config =
+0003a660: 2043 6f6e 6669 6728 636f 6e66 6967 5f70   Config(config_p
+0003a670: 6174 683d 7365 6c66 2e63 6f6e 6669 675f  ath=self.config_
+0003a680: 7061 7468 290a 2020 2020 2020 2020 636f  path).        co
+0003a690: 6e66 6967 2e73 6574 5f6f 7065 6e65 645f  nfig.set_opened_
+0003a6a0: 7072 6f6a 6563 7473 285b 5d29 0a0a 2020  projects([])..  
+0003a6b0: 2020 2020 2020 2320 4465 6c65 7465 7320        # Deletes 
+0003a6c0: 7468 6520 2743 4f4c 4c45 4354 494f 4e5f  the 'COLLECTION_
+0003a6d0: 4355 5252 454e 5427 2065 7175 6976 616c  CURRENT' equival
+0003a6e0: 656e 7420 696e 2027 6d69 612e 6462 270a  ent in 'mia.db'.
+0003a6f0: 2020 2020 2020 2020 2320 636f 6e20 3d20          # con = 
+0003a700: 7371 6c69 7465 332e 636f 6e6e 6563 7428  sqlite3.connect(
+0003a710: 6f73 2e70 6174 682e 6a6f 696e 2874 6573  os.path.join(tes
+0003a720: 745f 7072 6f6a 5f70 6174 682c 0a20 2020  t_proj_path,.   
+0003a730: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0003a740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0003a750: 2020 2020 2020 2020 2020 2764 6174 6162            'datab
+0003a760: 6173 6527 2c27 6d69 612e 6462 2729 290a  ase','mia.db')).
+0003a770: 2020 2020 2020 2020 2320 6375 7273 6f72          # cursor
+0003a780: 203d 2063 6f6e 2e63 7572 736f 7228 290a   = con.cursor().
+0003a790: 2020 2020 2020 2020 2320 7175 6572 7920          # query 
+0003a7a0: 3d20 2244 454c 4554 4520 4652 4f4d 2027  = "DELETE FROM '
+0003a7b0: 5f63 6f6c 6c65 6374 696f 6e27 2057 4845  _collection' WHE
+0003a7c0: 5245 2063 6f6c 6c65 6374 696f 6e5f 6e61  RE collection_na
+0003a7d0: 6d65 203d 2027 6375 7272 656e 7427 220a  me = 'current'".
+0003a7e0: 2020 2020 2020 2020 2320 6375 7273 6f72          # cursor
+0003a7f0: 2e65 7865 6375 7465 2871 7565 7279 290a  .execute(query).
+0003a800: 2020 2020 2020 2020 2320 636f 6e2e 636f          # con.co
+0003a810: 6d6d 6974 2829 0a20 2020 2020 2020 2023  mmit().        #
+0003a820: 2063 6f6e 2e63 6c6f 7365 2829 0a0a 2020   con.close()..  
+0003a830: 2020 2020 2020 2320 5472 6965 7320 746f        # Tries to
+0003a840: 2073 7769 7463 6820 746f 2061 2070 726f   switch to a pro
+0003a850: 6a65 6374 2074 6861 7420 6361 6e6e 6f74  ject that cannot
+0003a860: 2062 6520 7265 6164 2062 7920 6d69 610a   be read by mia.
+0003a870: 2020 2020 2020 2020 2320 7265 7320 3d20          # res = 
+0003a880: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+0003a890: 2e73 7769 7463 685f 7072 6f6a 6563 7428  .switch_project(
+0003a8a0: 7465 7374 5f70 726f 6a5f 7061 7468 2c20  test_proj_path, 
+0003a8b0: 2774 6573 745f 7072 6f6a 6563 7427 290a  'test_project').
+0003a8c0: 2020 2020 2020 2020 2320 7365 6c66 2e61          # self.a
+0003a8d0: 7373 6572 7446 616c 7365 2872 6573 290a  ssertFalse(res).
+0003a8e0: 0a20 2020 2020 2020 2023 2044 656c 6574  .        # Delet
+0003a8f0: 6573 2074 6865 2027 6669 6c74 6572 7327  es the 'filters'
+0003a900: 2066 6f6c 6465 7220 6f66 2074 6865 2070   folder of the p
+0003a910: 726f 6a65 6374 0a20 2020 2020 2020 2073  roject.        s
+0003a920: 7562 7072 6f63 6573 732e 7275 6e28 5b22  ubprocess.run(["
+0003a930: 726d 222c 2022 2d72 6622 2c20 6f73 2e70  rm", "-rf", os.p
+0003a940: 6174 682e 6a6f 696e 2874 6573 745f 7072  ath.join(test_pr
+0003a950: 6f6a 5f70 6174 682c 2022 6669 6c74 6572  oj_path, "filter
+0003a960: 7322 295d 290a 0a20 2020 2020 2020 2023  s")])..        #
+0003a970: 2054 7269 6573 2074 6f20 7377 6974 6368   Tries to switch
+0003a980: 2074 6f20 6e6f 6e20 6d69 6120 7072 6f6a   to non mia proj
+0003a990: 6563 740a 2020 2020 2020 2020 7265 7320  ect.        res 
+0003a9a0: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
+0003a9b0: 6f77 2e73 7769 7463 685f 7072 6f6a 6563  ow.switch_projec
+0003a9c0: 7428 7465 7374 5f70 726f 6a5f 7061 7468  t(test_proj_path
+0003a9d0: 2c20 2274 6573 745f 7072 6f6a 6563 7422  , "test_project"
+0003a9e0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0003a9f0: 7373 6572 7446 616c 7365 2872 6573 290a  ssertFalse(res).
+0003aa00: 0a20 2020 2064 6566 2074 6573 745f 7461  .    def test_ta
+0003aa10: 625f 6368 616e 6765 6428 7365 6c66 293a  b_changed(self):
+0003aa20: 0a20 2020 2020 2020 2022 2222 5377 6974  .        """Swit
+0003aa30: 6368 6573 2062 6574 7765 656e 2074 6162  ches between tab
+0003aa40: 732e 0a0a 2020 2020 2020 2020 4461 7461  s...        Data
+0003aa50: 2062 726f 7773 6572 2c20 6461 7461 2076   browser, data v
+0003aa60: 6965 7765 7220 616e 6420 7069 7065 6c69  iewer and pipeli
+0003aa70: 6e65 206d 616e 6167 6572 2e0a 0a20 2020  ne manager...   
+0003aa80: 2020 2020 2054 6573 7473 3a20 4d61 696e       Tests: Main
+0003aa90: 5769 6e64 6f77 2e74 6162 5f63 6861 6e67  Window.tab_chang
+0003aaa0: 6564 2e0a 0a20 2020 2020 2020 204d 6f63  ed...        Moc
+0003aab0: 6b73 3a20 514d 6573 7361 6765 426f 782e  ks: QMessageBox.
+0003aac0: 6578 6563 2e0a 2020 2020 2020 2020 2222  exec..        ""
+0003aad0: 220a 0a20 2020 2020 2020 2023 2043 7265  "..        # Cre
+0003aae0: 6174 6573 2061 2074 6573 7420 7072 6f6a  ates a test proj
+0003aaf0: 6563 740a 2020 2020 2020 2020 7465 7374  ect.        test
+0003ab00: 5f70 726f 6a5f 7061 7468 203d 2073 656c  _proj_path = sel
+0003ab10: 662e 6765 745f 6e65 775f 7465 7374 5f70  f.get_new_test_p
+0003ab20: 726f 6a65 6374 286c 6967 6874 3d54 7275  roject(light=Tru
+0003ab30: 6529 0a20 2020 2020 2020 2073 656c 662e  e).        self.
+0003ab40: 6d61 696e 5f77 696e 646f 772e 7377 6974  main_window.swit
+0003ab50: 6368 5f70 726f 6a65 6374 2874 6573 745f  ch_project(test_
+0003ab60: 7072 6f6a 5f70 6174 682c 2022 7465 7374  proj_path, "test
+0003ab70: 5f70 726f 6a65 6374 2229 0a0a 2020 2020  _project")..    
+0003ab80: 2020 2020 2320 5365 7420 7368 6f72 7463      # Set shortc
+0003ab90: 7574 7320 666f 7220 6f62 6a65 6374 7320  uts for objects 
+0003aba0: 7468 6174 2061 7265 206f 6674 656e 2075  that are often u
+0003abb0: 7365 640a 2020 2020 2020 2020 6461 7461  sed.        data
+0003abc0: 5f62 726f 7773 6572 203d 2073 656c 662e  _browser = self.
+0003abd0: 6d61 696e 5f77 696e 646f 772e 6461 7461  main_window.data
+0003abe0: 5f62 726f 7773 6572 0a0a 2020 2020 2020  _browser..      
+0003abf0: 2020 2320 5377 6974 6368 6573 2074 6f20    # Switches to 
+0003ac00: 6461 7461 2076 6965 7765 720a 2020 2020  data viewer.    
+0003ac10: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
+0003ac20: 6e64 6f77 2e74 6162 732e 7365 7443 7572  ndow.tabs.setCur
+0003ac30: 7265 6e74 496e 6465 7828 3129 2020 2320  rentIndex(1)  # 
+0003ac40: 4361 6c6c 7320 7461 625f 6368 616e 6765  Calls tab_change
+0003ac50: 6428 290a 2020 2020 2020 2020 7365 6c66  d().        self
+0003ac60: 2e61 7373 6572 7445 7175 616c 2873 656c  .assertEqual(sel
+0003ac70: 662e 6d61 696e 5f77 696e 646f 772e 7461  f.main_window.ta
+0003ac80: 6273 2e63 7572 7265 6e74 496e 6465 7828  bs.currentIndex(
+0003ac90: 292c 2031 290a 0a20 2020 2020 2020 2023  ), 1)..        #
+0003aca0: 2044 656c 6574 6573 2061 2073 6361 6e20   Deletes a scan 
+0003acb0: 6672 6f6d 2064 6174 6120 6272 6f77 7365  from data browse
+0003acc0: 720a 2020 2020 2020 2020 6461 7461 5f62  r.        data_b
+0003acd0: 726f 7773 6572 2e74 6162 6c65 5f64 6174  rowser.table_dat
+0003ace0: 612e 7365 6c65 6374 526f 7728 3029 0a20  a.selectRow(0). 
+0003acf0: 2020 2020 2020 2064 6174 615f 6272 6f77         data_brow
+0003ad00: 7365 722e 7461 626c 655f 6461 7461 2e72  ser.table_data.r
+0003ad10: 656d 6f76 655f 7363 616e 2829 0a0a 2020  emove_scan()..  
+0003ad20: 2020 2020 2020 2320 4d6f 636b 7320 7468        # Mocks th
+0003ad30: 6520 6578 6563 7574 696f 6e20 6f66 2061  e execution of a
+0003ad40: 2064 6961 6c6f 6720 626f 7820 6279 2061   dialog box by a
+0003ad50: 6363 6570 7469 6e67 2069 740a 2020 2020  ccepting it.    
+0003ad60: 2020 2020 514d 6573 7361 6765 426f 782e      QMessageBox.
+0003ad70: 6578 6563 203d 206c 616d 6264 6120 7365  exec = lambda se
+0003ad80: 6c66 5f2c 202a 6172 673a 2073 656c 665f  lf_, *arg: self_
+0003ad90: 2e61 6363 6570 7428 290a 0a20 2020 2020  .accept()..     
+0003ada0: 2020 2023 2053 7769 7463 6820 746f 2070     # Switch to p
+0003adb0: 6970 656c 696e 6520 6d61 6e61 6765 7220  ipeline manager 
+0003adc0: 7769 7468 2075 6e73 6176 6564 206d 6f64  with unsaved mod
+0003add0: 6966 6963 6174 696f 6e73 0a20 2020 2020  ifications.     
+0003ade0: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
+0003adf0: 646f 772e 7461 6273 2e73 6574 4375 7272  dow.tabs.setCurr
+0003ae00: 656e 7449 6e64 6578 2832 2920 2023 2043  entIndex(2)  # C
+0003ae10: 616c 6c73 2074 6162 5f63 6861 6e67 6564  alls tab_changed
+0003ae20: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
+0003ae30: 6173 7365 7274 4571 7561 6c28 7365 6c66  assertEqual(self
+0003ae40: 2e6d 6169 6e5f 7769 6e64 6f77 2e74 6162  .main_window.tab
+0003ae50: 732e 6375 7272 656e 7449 6e64 6578 2829  s.currentIndex()
+0003ae60: 2c20 3229 0a0a 2020 2020 2020 2020 2320  , 2)..        # 
+0003ae70: 4d6f 636b 7320 6e6f 7473 206c 6973 740a  Mocks nots list.
+0003ae80: 2020 2020 2020 2020 2320 7365 6c66 2e6d          # self.m
+0003ae90: 6169 6e5f 7769 6e64 6f77 2e70 726f 6a65  ain_window.proje
+0003aea0: 6374 2e63 7572 7265 6e74 4669 6c74 6572  ct.currentFilter
+0003aeb0: 2e6e 6f74 7320 3d20 5b27 4e4f 5427 2c20  .nots = ['NOT', 
+0003aec0: 2727 2c20 2727 5d0a 0a20 2020 2020 2020  '', '']..       
+0003aed0: 2023 2053 7769 7463 6865 7320 746f 2064   # Switches to d
+0003aee0: 6174 6120 6272 6f77 7365 720a 2020 2020  ata browser.    
+0003aef0: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
+0003af00: 6e64 6f77 2e74 6162 732e 7365 7443 7572  ndow.tabs.setCur
+0003af10: 7265 6e74 496e 6465 7828 3029 2020 2320  rentIndex(0)  # 
+0003af20: 4361 6c6c 7320 7461 625f 6368 616e 6765  Calls tab_change
+0003af30: 6428 290a 2020 2020 2020 2020 7365 6c66  d().        self
+0003af40: 2e61 7373 6572 7445 7175 616c 2873 656c  .assertEqual(sel
+0003af50: 662e 6d61 696e 5f77 696e 646f 772e 7461  f.main_window.ta
+0003af60: 6273 2e63 7572 7265 6e74 496e 6465 7828  bs.currentIndex(
+0003af70: 292c 2030 290a 0a0a 636c 6173 7320 5465  ), 0)...class Te
+0003af80: 7374 4d49 414e 6f64 6543 6f6e 7472 6f6c  stMIANodeControl
+0003af90: 6c65 7228 5465 7374 4d49 4143 6173 6529  ler(TestMIACase)
+0003afa0: 3a0a 2020 2020 2222 2254 6573 7473 2066  :.    """Tests f
+0003afb0: 6f72 2074 6865 206e 6f64 6520 636f 6e74  or the node cont
+0003afc0: 726f 6c6c 6572 2c20 7061 7274 206f 6620  roller, part of 
+0003afd0: 7468 6520 7069 7065 6c69 6e65 206d 616e  the pipeline man
+0003afe0: 6167 6572 2074 6162 2e0a 0a20 2020 202d  ager tab...    -
+0003aff0: 2054 6573 7473 3a20 4e6f 6465 436f 6e74   Tests: NodeCont
+0003b000: 726f 6c6c 6572 2e0a 0a20 2020 203a 436f  roller...    :Co
+0003b010: 6e74 6169 6e73 3a0a 2020 2020 2020 2020  ntains:.        
+0003b020: 3a4d 6574 686f 643a 0a20 2020 2020 2020  :Method:.       
+0003b030: 2020 2020 202d 2074 6573 745f 6174 7472       - test_attr
+0003b040: 6962 7574 6573 5f66 696c 7465 723a 2064  ibutes_filter: d
+0003b050: 6973 706c 6179 7320 616e 2061 7474 7269  isplays an attri
+0003b060: 6275 7465 7320 6669 6c74 6572 2061 6e64  butes filter and
+0003b070: 0a20 2020 2020 2020 2020 2020 2020 206d  .              m
+0003b080: 6f64 6966 6965 7320 6974 2e0a 2020 2020  odifies it..    
+0003b090: 2020 2020 2020 2020 2d20 7465 7374 5f63          - test_c
+0003b0a0: 6170 7375 6c5f 6e6f 6465 5f63 6f6e 7472  apsul_node_contr
+0003b0b0: 6f6c 6c65 723a 2061 6464 732c 2063 6861  oller: adds, cha
+0003b0c0: 6e67 6573 2061 6e64 2064 656c 6574 6573  nges and deletes
+0003b0d0: 0a20 2020 2020 2020 2020 2020 2020 2070  .              p
+0003b0e0: 726f 6365 7373 6573 2075 7369 6e67 2074  rocesses using t
+0003b0f0: 6865 2063 6170 7375 6c20 6e6f 6465 2063  he capsul node c
+0003b100: 6f6e 7472 6f6c 6c65 722e 0a20 2020 2020  ontroller..     
+0003b110: 2020 2020 2020 202d 2074 6573 745f 6469         - test_di
+0003b120: 7370 6c61 795f 6669 6c74 6572 3a20 6469  splay_filter: di
+0003b130: 7370 6c61 7973 206e 6f64 6520 7061 7261  splays node para
+0003b140: 6d65 7465 7273 2061 6e64 2061 2070 6c75  meters and a plu
+0003b150: 670a 2020 2020 2020 2020 2020 2020 2020  g.              
+0003b160: 6669 6c74 6572 2e0a 2020 2020 2020 2020  filter..        
+0003b170: 2020 2020 2d20 7465 7374 5f66 696c 7465      - test_filte
+0003b180: 725f 7769 6467 6574 3a20 6f70 656e 7320  r_widget: opens 
+0003b190: 7570 2074 6865 2022 4669 6c74 6572 5769  up the "FilterWi
+0003b1a0: 6467 6574 2829 2220 746f 0a20 2020 2020  dget()" to.     
+0003b1b0: 2020 2020 2020 2020 206d 6f64 6966 7920           modify 
+0003b1c0: 6974 7320 7061 7261 6d65 7465 7273 2e0a  its parameters..
+0003b1d0: 2020 2020 2020 2020 2020 2020 2d20 7465              - te
+0003b1e0: 7374 5f6e 6f64 655f 636f 6e74 726f 6c6c  st_node_controll
+0003b1f0: 6572 3a20 6164 6473 2c20 6368 616e 6765  er: adds, change
+0003b200: 7320 616e 6420 6465 6c65 7465 7320 7072  s and deletes pr
+0003b210: 6f63 6573 7365 730a 2020 2020 2020 2020  ocesses.        
+0003b220: 2020 2020 2020 746f 2074 6865 206e 6f64        to the nod
+0003b230: 6520 636f 6e74 726f 6c6c 6572 2e0a 2020  e controller..  
+0003b240: 2020 2020 2020 2020 2020 2d20 7465 7374            - test
+0003b250: 5f70 6c75 675f 6669 6c74 6572 3a20 6469  _plug_filter: di
+0003b260: 7370 6c61 7973 2061 2070 6c75 6720 6669  splays a plug fi
+0003b270: 6c74 6572 2061 6e64 206d 6f64 6966 6965  lter and modifie
+0003b280: 7320 6974 0a20 2020 2020 2020 2020 2020  s it.           
+0003b290: 202d 2074 6573 745f 7570 6461 7465 5f6e   - test_update_n
+0003b2a0: 6f64 655f 6e61 6d65 3a20 6469 7370 6c61  ode_name: displa
+0003b2b0: 7973 206e 6f64 6520 7061 7261 6d65 7465  ys node paramete
+0003b2c0: 7273 2061 6e64 0a20 2020 2020 2020 2020  rs and.         
+0003b2d0: 2020 2020 2075 7064 6174 6573 2069 7473       updates its
+0003b2e0: 206e 616d 652e 0a20 2020 2022 2222 0a0a   name..    """..
+0003b2f0: 2020 2020 6465 6620 7465 7374 5f61 7474      def test_att
+0003b300: 7269 6275 7465 735f 6669 6c74 6572 2873  ributes_filter(s
+0003b310: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+0003b320: 2244 6973 706c 6179 7320 7468 6520 7061  "Displays the pa
+0003b330: 7261 6d65 7465 7273 206f 6620 6120 6e6f  rameters of a no
+0003b340: 6465 2c20 6469 7370 6c61 7973 2061 6e20  de, displays an 
+0003b350: 6174 7472 6962 7574 6573 2066 696c 7465  attributes filte
+0003b360: 720a 2020 2020 2020 2020 616e 6420 6d6f  r.        and mo
+0003b370: 6469 6669 6573 2069 742e 0a0a 2020 2020  difies it...    
+0003b380: 2020 2020 2d20 5465 7374 733a 2041 7474      - Tests: Att
+0003b390: 7269 6275 7465 7346 696c 7465 7220 696e  ributesFilter in
+0003b3a0: 2056 3220 636f 6e74 726f 6c6c 6572 2047   V2 controller G
+0003b3b0: 5549 2028 4361 7073 756c 4e6f 6465 436f  UI (CapsulNodeCo
+0003b3c0: 6e74 726f 6c6c 6572 292e 0a20 2020 2020  ntroller)..     
+0003b3d0: 2020 2022 2222 0a0a 2020 2020 2020 2020     """..        
+0003b3e0: 2320 4f70 656e 7320 7072 6f6a 6563 7420  # Opens project 
+0003b3f0: 3820 616e 6420 7377 6974 6368 6573 2074  8 and switches t
+0003b400: 6f20 6974 0a20 2020 2020 2020 2070 726f  o it.        pro
+0003b410: 6a65 6374 5f38 5f70 6174 6820 3d20 7365  ject_8_path = se
+0003b420: 6c66 2e67 6574 5f6e 6577 5f74 6573 745f  lf.get_new_test_
+0003b430: 7072 6f6a 6563 7428 290a 2020 2020 2020  project().      
+0003b440: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
+0003b450: 6f77 2e73 7769 7463 685f 7072 6f6a 6563  ow.switch_projec
+0003b460: 7428 7072 6f6a 6563 745f 385f 7061 7468  t(project_8_path
+0003b470: 2c20 2270 726f 6a65 6374 5f38 2229 0a0a  , "project_8")..
+0003b480: 2020 2020 2020 2020 7070 6c5f 6564 745f          ppl_edt_
+0003b490: 7461 6273 203d 2073 656c 662e 6d61 696e  tabs = self.main
+0003b4a0: 5f77 696e 646f 772e 7069 7065 6c69 6e65  _window.pipeline
+0003b4b0: 5f6d 616e 6167 6572 2e70 6970 656c 696e  _manager.pipelin
+0003b4c0: 6545 6469 746f 7254 6162 730a 2020 2020  eEditorTabs.    
+0003b4d0: 2020 2020 6e6f 6465 5f63 6f6e 7472 6f6c      node_control
+0003b4e0: 6c65 7220 3d20 7365 6c66 2e6d 6169 6e5f  ler = self.main_
+0003b4f0: 7769 6e64 6f77 2e70 6970 656c 696e 655f  window.pipeline_
+0003b500: 6d61 6e61 6765 722e 6e6f 6465 436f 6e74  manager.nodeCont
+0003b510: 726f 6c6c 6572 0a0a 2020 2020 2020 2020  roller..        
+0003b520: 2320 4164 6473 2074 6865 2070 726f 6365  # Adds the proce
+0003b530: 7373 2053 6d6f 6f74 682c 2063 7265 6174  ss Smooth, creat
+0003b540: 6573 2061 206e 6f64 6520 6361 6c6c 6564  es a node called
+0003b550: 2022 736d 6f6f 7468 5f31 220a 2020 2020   "smooth_1".    
+0003b560: 2020 2020 7070 6c5f 6564 745f 7461 6273      ppl_edt_tabs
+0003b570: 2e67 6574 5f63 7572 7265 6e74 5f65 6469  .get_current_edi
+0003b580: 746f 7228 292e 636c 6963 6b5f 706f 7320  tor().click_pos 
+0003b590: 3d20 5150 6f69 6e74 2834 3530 2c20 3530  = QPoint(450, 50
+0003b5a0: 3029 0a20 2020 2020 2020 2070 706c 5f65  0).        ppl_e
+0003b5b0: 6474 5f74 6162 732e 6765 745f 6375 7272  dt_tabs.get_curr
+0003b5c0: 656e 745f 6564 6974 6f72 2829 2e61 6464  ent_editor().add
+0003b5d0: 5f6e 616d 6564 5f70 726f 6365 7373 2853  _named_process(S
+0003b5e0: 6d6f 6f74 6829 0a20 2020 2020 2020 2070  mooth).        p
+0003b5f0: 6970 656c 696e 6520 3d20 7070 6c5f 6564  ipeline = ppl_ed
+0003b600: 745f 7461 6273 2e67 6574 5f63 7572 7265  t_tabs.get_curre
+0003b610: 6e74 5f70 6970 656c 696e 6528 290a 0a20  nt_pipeline().. 
+0003b620: 2020 2020 2020 2023 2045 7870 6f72 7473         # Exports
+0003b630: 2074 6865 2075 6e63 6f6e 6e65 6374 6564   the unconnected
+0003b640: 206d 616e 6461 746f 7279 2070 6c75 6773   mandatory plugs
+0003b650: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
+0003b660: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
+0003b670: 745f 6564 6974 6f72 2829 2e63 7572 7265  t_editor().curre
+0003b680: 6e74 5f6e 6f64 655f 6e61 6d65 203d 2022  nt_node_name = "
+0003b690: 736d 6f6f 7468 5f31 220a 2020 2020 2020  smooth_1".      
+0003b6a0: 2020 280a 2020 2020 2020 2020 2020 2020    (.            
+0003b6b0: 7070 6c5f 6564 745f 7461 6273 2e67 6574  ppl_edt_tabs.get
+0003b6c0: 5f63 7572 7265 6e74 5f65 6469 746f 720a  _current_editor.
+0003b6d0: 2020 2020 2020 2020 2928 292e 6578 706f          )().expo
+0003b6e0: 7274 5f6e 6f64 655f 756e 636f 6e6e 6563  rt_node_unconnec
+0003b6f0: 7465 645f 6d61 6e64 6174 6f72 795f 706c  ted_mandatory_pl
+0003b700: 7567 7328 290a 0a20 2020 2020 2020 2023  ugs()..        #
+0003b710: 2044 6973 706c 6179 7320 7061 7261 6d65   Displays parame
+0003b720: 7465 7273 206f 6620 2769 6e70 7574 7327  ters of 'inputs'
+0003b730: 206e 6f64 650a 2020 2020 2020 2020 696e   node.        in
+0003b740: 7075 745f 7072 6f63 6573 7320 3d20 7069  put_process = pi
+0003b750: 7065 6c69 6e65 2e6e 6f64 6573 5b22 225d  peline.nodes[""]
+0003b760: 2e70 726f 6365 7373 0a20 2020 2020 2020  .process.       
+0003b770: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+0003b780: 772e 7069 7065 6c69 6e65 5f6d 616e 6167  w.pipeline_manag
+0003b790: 6572 2e64 6973 706c 6179 4e6f 6465 5061  er.displayNodePa
+0003b7a0: 7261 6d65 7465 7273 280a 2020 2020 2020  rameters(.      
+0003b7b0: 2020 2020 2020 2269 6e70 7574 7322 2c20        "inputs", 
+0003b7c0: 696e 7075 745f 7072 6f63 6573 730a 2020  input_process.  
+0003b7d0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+0003b7e0: 2023 204f 7065 6e73 2074 6865 2061 7474   # Opens the att
+0003b7f0: 7269 6275 7465 7320 6669 6c74 6572 2c20  ributes filter, 
+0003b800: 7365 6c65 6374 7320 6974 656d 2061 6e64  selects item and
+0003b810: 2063 6c6f 7365 7320 6974 0a20 2020 2020   closes it.     
+0003b820: 2020 206e 6f64 655f 636f 6e74 726f 6c6c     node_controll
+0003b830: 6572 2e66 696c 7465 725f 6174 7472 6962  er.filter_attrib
+0003b840: 7574 6573 2829 0a20 2020 2020 2020 2061  utes().        a
+0003b850: 7474 7269 6275 7465 735f 6669 6c74 6572  ttributes_filter
+0003b860: 203d 206e 6f64 655f 636f 6e74 726f 6c6c   = node_controll
+0003b870: 6572 2e70 6f70 5f75 700a 2020 2020 2020  er.pop_up.      
+0003b880: 2020 6174 7472 6962 7574 6573 5f66 696c    attributes_fil
+0003b890: 7465 722e 7461 626c 655f 6461 7461 2e73  ter.table_data.s
+0003b8a0: 656c 6563 7452 6f77 2830 290a 2020 2020  electRow(0).    
+0003b8b0: 2020 2020 6174 7472 6962 7574 6573 5f66      attributes_f
+0003b8c0: 696c 7465 722e 6f6b 5f63 6c69 636b 6564  ilter.ok_clicked
+0003b8d0: 2829 0a0a 2020 2020 2020 2020 2320 4f70  ()..        # Op
+0003b8e0: 656e 7320 7468 6520 6174 7472 6962 7574  ens the attribut
+0003b8f0: 6573 2066 696c 7465 722c 2064 6f65 7320  es filter, does 
+0003b900: 6e6f 7420 7365 6c65 6374 2061 6e20 6974  not select an it
+0003b910: 656d 2061 6e64 2063 6c6f 7365 7320 6974  em and closes it
+0003b920: 0a20 2020 2020 2020 206e 6f64 655f 636f  .        node_co
+0003b930: 6e74 726f 6c6c 6572 2e66 696c 7465 725f  ntroller.filter_
+0003b940: 6174 7472 6962 7574 6573 2829 0a20 2020  attributes().   
+0003b950: 2020 2020 2061 7474 7269 6275 7465 735f       attributes_
+0003b960: 6669 6c74 6572 203d 206e 6f64 655f 636f  filter = node_co
+0003b970: 6e74 726f 6c6c 6572 2e70 6f70 5f75 700a  ntroller.pop_up.
+0003b980: 2020 2020 2020 2020 6174 7472 6962 7574          attribut
+0003b990: 6573 5f66 696c 7465 722e 7365 6172 6368  es_filter.search
+0003b9a0: 5f73 7472 2822 2140 2322 290a 2020 2020  _str("!@#").    
+0003b9b0: 2020 2020 6174 7472 6962 7574 6573 5f66      attributes_f
+0003b9c0: 696c 7465 722e 6f6b 5f63 6c69 636b 6564  ilter.ok_clicked
+0003b9d0: 2829 0a0a 2020 2020 6465 6620 7465 7374  ()..    def test
+0003b9e0: 5f63 6170 7375 6c5f 6e6f 6465 5f63 6f6e  _capsul_node_con
+0003b9f0: 7472 6f6c 6c65 7228 7365 6c66 293a 0a20  troller(self):. 
+0003ba00: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0003ba10: 2020 2041 6464 732c 2063 6861 6e67 6573     Adds, changes
+0003ba20: 2061 6e64 2064 656c 6574 6573 2070 726f   and deletes pro
+0003ba30: 6365 7373 6573 2075 7369 6e67 2074 6865  cesses using the
+0003ba40: 2063 6170 7375 6c20 6e6f 6465 2063 6f6e   capsul node con
+0003ba50: 7472 6f6c 6c65 722e 0a0a 2020 2020 2020  troller...      
+0003ba60: 2020 4469 7370 6c61 7973 2074 6865 2061    Displays the a
+0003ba70: 7474 7269 6275 7465 7320 6669 6c74 6572  ttributes filter
+0003ba80: 2e0a 0a20 2020 2020 2020 2054 6573 7473  ...        Tests
+0003ba90: 3a20 4361 7073 756c 4e6f 6465 436f 6e74  : CapsulNodeCont
+0003baa0: 726f 6c6c 6572 0a20 2020 2020 2020 2022  roller.        "
+0003bab0: 2222 0a0a 2020 2020 2020 2020 2320 4f70  ""..        # Op
+0003bac0: 656e 7320 7072 6f6a 6563 7420 3820 616e  ens project 8 an
+0003bad0: 6420 7377 6974 6368 6573 2074 6f20 6974  d switches to it
+0003bae0: 0a20 2020 2020 2020 2070 726f 6a65 6374  .        project
+0003baf0: 5f38 5f70 6174 6820 3d20 7365 6c66 2e67  _8_path = self.g
+0003bb00: 6574 5f6e 6577 5f74 6573 745f 7072 6f6a  et_new_test_proj
+0003bb10: 6563 7428 290a 2020 2020 2020 2020 7365  ect().        se
+0003bb20: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e73  lf.main_window.s
+0003bb30: 7769 7463 685f 7072 6f6a 6563 7428 7072  witch_project(pr
+0003bb40: 6f6a 6563 745f 385f 7061 7468 2c20 2270  oject_8_path, "p
+0003bb50: 726f 6a65 6374 5f38 2229 0a0a 2020 2020  roject_8")..    
+0003bb60: 2020 2020 444f 4355 4d45 4e54 5f31 203d      DOCUMENT_1 =
+0003bb70: 2028 7365 6c66 2e6d 6169 6e5f 7769 6e64   (self.main_wind
+0003bb80: 6f77 2e70 726f 6a65 6374 2e73 6573 7369  ow.project.sessi
+0003bb90: 6f6e 2e67 6574 5f64 6f63 756d 656e 7473  on.get_documents
+0003bba0: 5f6e 616d 6573 2928 0a20 2020 2020 2020  _names)(.       
+0003bbb0: 2020 2020 2022 6375 7272 656e 7422 0a20       "current". 
+0003bbc0: 2020 2020 2020 2029 5b30 5d0a 0a20 2020         )[0]..   
+0003bbd0: 2020 2020 2070 706c 5f65 6474 5f74 6162       ppl_edt_tab
+0003bbe0: 7320 3d20 7365 6c66 2e6d 6169 6e5f 7769  s = self.main_wi
+0003bbf0: 6e64 6f77 2e70 6970 656c 696e 655f 6d61  ndow.pipeline_ma
+0003bc00: 6e61 6765 722e 7069 7065 6c69 6e65 4564  nager.pipelineEd
+0003bc10: 6974 6f72 5461 6273 0a20 2020 2020 2020  itorTabs.       
+0003bc20: 206e 6f64 655f 6374 726c 6572 203d 2073   node_ctrler = s
+0003bc30: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+0003bc40: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
+0003bc50: 2e6e 6f64 6543 6f6e 7472 6f6c 6c65 720a  .nodeController.
+0003bc60: 0a20 2020 2020 2020 2023 2041 6464 7320  .        # Adds 
+0003bc70: 3220 7072 6f63 6573 7365 7320 5265 6e61  2 processes Rena
+0003bc80: 6d65 2c20 6372 6561 7465 7320 3220 6e6f  me, creates 2 no
+0003bc90: 6465 7320 6361 6c6c 6564 2022 7265 6e61  des called "rena
+0003bca0: 6d65 5f31 2220 616e 640a 2020 2020 2020  me_1" and.      
+0003bcb0: 2020 2320 2272 656e 616d 655f 3222 3a0a    # "rename_2":.
+0003bcc0: 2020 2020 2020 2020 7072 6f63 6573 735f          process_
+0003bcd0: 636c 6173 7320 3d20 5265 6e61 6d65 0a20  class = Rename. 
+0003bce0: 2020 2020 2020 2070 706c 5f65 6474 5f74         ppl_edt_t
+0003bcf0: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
+0003bd00: 6564 6974 6f72 2829 2e63 6c69 636b 5f70  editor().click_p
+0003bd10: 6f73 203d 2051 506f 696e 7428 3435 302c  os = QPoint(450,
+0003bd20: 2035 3030 290a 2020 2020 2020 2020 7070   500).        pp
+0003bd30: 6c5f 6564 745f 7461 6273 2e67 6574 5f63  l_edt_tabs.get_c
+0003bd40: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
+0003bd50: 6164 645f 6e61 6d65 645f 7072 6f63 6573  add_named_proces
+0003bd60: 7328 7072 6f63 6573 735f 636c 6173 7329  s(process_class)
+0003bd70: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
+0003bd80: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
+0003bd90: 745f 6564 6974 6f72 2829 2e61 6464 5f6e  t_editor().add_n
+0003bda0: 616d 6564 5f70 726f 6365 7373 2870 726f  amed_process(pro
+0003bdb0: 6365 7373 5f63 6c61 7373 290a 2020 2020  cess_class).    
+0003bdc0: 2020 2020 7069 7065 6c69 6e65 203d 2070      pipeline = p
+0003bdd0: 706c 5f65 6474 5f74 6162 732e 6765 745f  pl_edt_tabs.get_
+0003bde0: 6375 7272 656e 745f 7069 7065 6c69 6e65  current_pipeline
+0003bdf0: 2829 0a0a 2020 2020 2020 2020 2320 4469  ()..        # Di
+0003be00: 7370 6c61 7973 2070 6172 616d 6574 6572  splays parameter
+0003be10: 7320 6f66 2022 7265 6e61 6d65 5f32 2220  s of "rename_2" 
+0003be20: 6e6f 6465 0a20 2020 2020 2020 2072 656e  node.        ren
+0003be30: 616d 655f 7072 6f63 6573 7320 3d20 7069  ame_process = pi
+0003be40: 7065 6c69 6e65 2e6e 6f64 6573 5b22 7265  peline.nodes["re
+0003be50: 6e61 6d65 5f32 225d 2e70 726f 6365 7373  name_2"].process
+0003be60: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+0003be70: 696e 5f77 696e 646f 772e 7069 7065 6c69  in_window.pipeli
+0003be80: 6e65 5f6d 616e 6167 6572 2e64 6973 706c  ne_manager.displ
+0003be90: 6179 4e6f 6465 5061 7261 6d65 7465 7273  ayNodeParameters
+0003bea0: 280a 2020 2020 2020 2020 2020 2020 2272  (.            "r
+0003beb0: 656e 616d 655f 3222 2c20 7265 6e61 6d65  ename_2", rename
+0003bec0: 5f70 726f 6365 7373 0a20 2020 2020 2020  _process.       
+0003bed0: 2029 0a0a 2020 2020 2020 2020 2320 5472   )..        # Tr
+0003bee0: 6965 7320 6368 616e 6769 6e67 2069 7473  ies changing its
+0003bef0: 206e 616d 6520 746f 2022 7265 6e61 6d65   name to "rename
+0003bf00: 5f32 2220 616e 6420 7468 656e 2074 6f20  _2" and then to 
+0003bf10: 2272 656e 616d 655f 3322 0a20 2020 2020  "rename_3".     
+0003bf20: 2020 206e 6f64 655f 6374 726c 6572 2e75     node_ctrler.u
+0003bf30: 7064 6174 655f 6e6f 6465 5f6e 616d 6528  pdate_node_name(
+0003bf40: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0003bf50: 7373 6572 7445 7175 616c 286e 6f64 655f  ssertEqual(node_
+0003bf60: 6374 726c 6572 2e6e 6f64 655f 6e61 6d65  ctrler.node_name
+0003bf70: 2c20 2272 656e 616d 655f 3222 290a 2020  , "rename_2").  
+0003bf80: 2020 2020 2020 6e6f 6465 5f63 7472 6c65        node_ctrle
+0003bf90: 722e 7570 6461 7465 5f6e 6f64 655f 6e61  r.update_node_na
+0003bfa0: 6d65 280a 2020 2020 2020 2020 2020 2020  me(.            
+0003bfb0: 6e65 775f 6e6f 6465 5f6e 616d 653d 2272  new_node_name="r
+0003bfc0: 656e 616d 655f 3122 2c20 6f6c 645f 6e6f  ename_1", old_no
+0003bfd0: 6465 5f6e 616d 653d 2272 656e 616d 655f  de_name="rename_
+0003bfe0: 3222 0a20 2020 2020 2020 2029 0a20 2020  2".        ).   
+0003bff0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0003c000: 4571 7561 6c28 6e6f 6465 5f63 7472 6c65  Equal(node_ctrle
+0003c010: 722e 6e6f 6465 5f6e 616d 652c 2022 7265  r.node_name, "re
+0003c020: 6e61 6d65 5f32 2229 0a20 2020 2020 2020  name_2").       
+0003c030: 206e 6f64 655f 6374 726c 6572 2e75 7064   node_ctrler.upd
+0003c040: 6174 655f 6e6f 6465 5f6e 616d 6528 0a20  ate_node_name(. 
+0003c050: 2020 2020 2020 2020 2020 206e 6577 5f6e             new_n
+0003c060: 6f64 655f 6e61 6d65 3d22 7265 6e61 6d65  ode_name="rename
+0003c070: 5f33 222c 206f 6c64 5f6e 6f64 655f 6e61  _3", old_node_na
+0003c080: 6d65 3d22 7265 6e61 6d65 5f32 220a 2020  me="rename_2".  
+0003c090: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0003c0a0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+0003c0b0: 286e 6f64 655f 6374 726c 6572 2e6e 6f64  (node_ctrler.nod
+0003c0c0: 655f 6e61 6d65 2c20 2272 656e 616d 655f  e_name, "rename_
+0003c0d0: 3322 290a 0a20 2020 2020 2020 2023 2044  3")..        # D
+0003c0e0: 656c 6574 6573 206e 6f64 6520 2272 656e  eletes node "ren
+0003c0f0: 616d 655f 3322 0a20 2020 2020 2020 2070  ame_3".        p
+0003c100: 706c 5f65 6474 5f74 6162 732e 6765 745f  pl_edt_tabs.get_
+0003c110: 6375 7272 656e 745f 6564 6974 6f72 2829  current_editor()
+0003c120: 2e64 656c 5f6e 6f64 6528 2272 656e 616d  .del_node("renam
+0003c130: 655f 3322 290a 0a20 2020 2020 2020 2023  e_3")..        #
+0003c140: 2044 6973 706c 6179 2070 6172 616d 6574   Display paramet
+0003c150: 6572 7320 6f66 2074 6865 2022 696e 7075  ers of the "inpu
+0003c160: 7473 2220 6e6f 6465 0a20 2020 2020 2020  ts" node.       
+0003c170: 2069 6e70 7574 5f70 726f 6365 7373 203d   input_process =
+0003c180: 2070 6970 656c 696e 652e 6e6f 6465 735b   pipeline.nodes[
+0003c190: 2222 5d2e 7072 6f63 6573 730a 2020 2020  ""].process.    
+0003c1a0: 2020 2020 6e6f 6465 5f63 7472 6c65 722e      node_ctrler.
+0003c1b0: 6469 7370 6c61 795f 7061 7261 6d65 7465  display_paramete
+0003c1c0: 7273 280a 2020 2020 2020 2020 2020 2020  rs(.            
+0003c1d0: 2269 6e70 7574 7322 2c20 6765 745f 7072  "inputs", get_pr
+0003c1e0: 6f63 6573 735f 696e 7374 616e 6365 2869  ocess_instance(i
+0003c1f0: 6e70 7574 5f70 726f 6365 7373 292c 2070  nput_process), p
+0003c200: 6970 656c 696e 650a 2020 2020 2020 2020  ipeline.        
+0003c210: 290a 0a20 2020 2020 2020 2023 2044 6973  )..        # Dis
+0003c220: 706c 6179 7320 7061 7261 6d65 7465 7273  plays parameters
+0003c230: 206f 6620 2272 656e 616d 655f 3122 206e   of "rename_1" n
+0003c240: 6f64 650a 2020 2020 2020 2020 7265 6e61  ode.        rena
+0003c250: 6d65 5f70 726f 6365 7373 203d 2070 6970  me_process = pip
+0003c260: 656c 696e 652e 6e6f 6465 735b 2272 656e  eline.nodes["ren
+0003c270: 616d 655f 3122 5d2e 7072 6f63 6573 730a  ame_1"].process.
+0003c280: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
+0003c290: 6e5f 7769 6e64 6f77 2e70 6970 656c 696e  n_window.pipelin
+0003c2a0: 655f 6d61 6e61 6765 722e 6469 7370 6c61  e_manager.displa
+0003c2b0: 794e 6f64 6550 6172 616d 6574 6572 7328  yNodeParameters(
+0003c2c0: 0a20 2020 2020 2020 2020 2020 2022 7265  .            "re
+0003c2d0: 6e61 6d65 5f31 222c 2072 656e 616d 655f  name_1", rename_
+0003c2e0: 7072 6f63 6573 730a 2020 2020 2020 2020  process.        
+0003c2f0: 290a 0a20 2020 2020 2020 2023 2045 7870  )..        # Exp
+0003c300: 6f72 7473 2070 6c75 6773 2066 6f72 2022  orts plugs for "
+0003c310: 7265 6e61 6d65 5f31 220a 2020 2020 2020  rename_1".      
+0003c320: 2020 7070 6c5f 6564 745f 7461 6273 2e67    ppl_edt_tabs.g
+0003c330: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
+0003c340: 7228 292e 6375 7272 656e 745f 6e6f 6465  r().current_node
+0003c350: 5f6e 616d 6520 3d20 2272 656e 616d 655f  _name = "rename_
+0003c360: 3122 0a20 2020 2020 2020 2070 706c 5f65  1".        ppl_e
+0003c370: 6474 5f74 6162 732e 6765 745f 6375 7272  dt_tabs.get_curr
+0003c380: 656e 745f 6564 6974 6f72 2829 2e65 7870  ent_editor().exp
+0003c390: 6f72 745f 756e 636f 6e6e 6563 7465 645f  ort_unconnected_
+0003c3a0: 6d61 6e64 6174 6f72 795f 696e 7075 7473  mandatory_inputs
+0003c3b0: 2829 0a20 2020 2020 2020 2070 706c 5f65  ().        ppl_e
+0003c3c0: 6474 5f74 6162 732e 6765 745f 6375 7272  dt_tabs.get_curr
+0003c3d0: 656e 745f 6564 6974 6f72 2829 2e65 7870  ent_editor().exp
+0003c3e0: 6f72 745f 616c 6c5f 756e 636f 6e6e 6563  ort_all_unconnec
+0003c3f0: 7465 645f 6f75 7470 7574 7328 290a 0a20  ted_outputs().. 
+0003c400: 2020 2020 2020 2070 6970 656c 696e 652e         pipeline.
+0003c410: 6e6f 6465 735b 2272 656e 616d 655f 3122  nodes["rename_1"
+0003c420: 5d2e 7365 745f 706c 7567 5f76 616c 7565  ].set_plug_value
+0003c430: 2822 696e 5f66 696c 6522 2c20 444f 4355  ("in_file", DOCU
+0003c440: 4d45 4e54 5f31 290a 2020 2020 2020 2020  MENT_1).        
+0003c450: 7069 7065 6c69 6e65 2e6e 6f64 6573 5b22  pipeline.nodes["
+0003c460: 7265 6e61 6d65 5f31 225d 2e73 6574 5f70  rename_1"].set_p
+0003c470: 6c75 675f 7661 6c75 6528 0a20 2020 2020  lug_value(.     
+0003c480: 2020 2020 2020 2022 666f 726d 6174 5f73         "format_s
+0003c490: 7472 696e 6722 2c20 226e 6577 5f6e 616d  tring", "new_nam
+0003c4a0: 652e 6e69 6922 0a20 2020 2020 2020 2029  e.nii".        )
+0003c4b0: 0a0a 2020 2020 2020 2020 2320 5275 6e73  ..        # Runs
+0003c4c0: 2070 6970 656c 696e 6520 616e 6420 6578   pipeline and ex
+0003c4d0: 7065 6374 7320 616e 2065 7272 6f72 0a20  pects an error. 
+0003c4e0: 2020 2020 2020 2023 2073 656c 662e 6d61         # self.ma
+0003c4f0: 696e 5f77 696e 646f 772e 7069 7065 6c69  in_window.pipeli
+0003c500: 6e65 5f6d 616e 6167 6572 2e72 756e 5069  ne_manager.runPi
+0003c510: 7065 6c69 6e65 2829 0a20 2020 2020 2020  peline().       
+0003c520: 2023 2046 4958 4d45 3a20 7275 6e6e 696e   # FIXME: runnin
+0003c530: 6720 7468 6520 7069 7065 6c69 6e65 2067  g the pipeline g
+0003c540: 6976 6573 2074 6865 2065 7272 6f72 3a0a  ives the error:.
+0003c550: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003c560: 204d 6f64 756c 654e 6f74 466f 756e 6445   ModuleNotFoundE
+0003c570: 7272 6f72 3a20 4e6f 206d 6f64 756c 6520  rror: No module 
+0003c580: 6e61 6d65 6420 2763 6170 7375 6c27 0a0a  named 'capsul'..
+0003c590: 2020 2020 2020 2020 2320 4469 7370 6c61          # Displa
+0003c5a0: 7973 2074 6865 2061 7474 7269 6275 7465  ys the attribute
+0003c5b0: 7320 6669 6c74 6572 0a20 2020 2020 2020  s filter.       
+0003c5c0: 206e 6f64 655f 6374 726c 6572 2e66 696c   node_ctrler.fil
+0003c5d0: 7465 725f 6174 7472 6962 7574 6573 2829  ter_attributes()
+0003c5e0: 0a20 2020 2020 2020 2061 7474 7269 6275  .        attribu
+0003c5f0: 7465 735f 6669 6c74 6572 203d 206e 6f64  tes_filter = nod
+0003c600: 655f 6374 726c 6572 2e70 6f70 5f75 700a  e_ctrler.pop_up.
+0003c610: 2020 2020 2020 2020 6174 7472 6962 7574          attribut
+0003c620: 6573 5f66 696c 7465 722e 7461 626c 655f  es_filter.table_
+0003c630: 6461 7461 2e73 656c 6563 7452 6f77 2830  data.selectRow(0
+0003c640: 290a 2020 2020 2020 2020 6174 7472 6962  ).        attrib
+0003c650: 7574 6573 5f66 696c 7465 722e 6f6b 5f63  utes_filter.ok_c
+0003c660: 6c69 636b 6564 2829 0a0a 2020 2020 2020  licked()..      
+0003c670: 2020 2320 5265 6c65 6173 6573 2074 6865    # Releases the
 0003c680: 2070 726f 6365 7373 0a20 2020 2020 2020   process.       
-0003c690: 2070 726f 6365 7373 5f63 6c61 7373 203d   process_class =
-0003c6a0: 2054 6872 6573 686f 6c64 0a20 2020 2020   Threshold.     
-0003c6b0: 2020 2070 6970 656c 696e 655f 6564 6974     pipeline_edit
-0003c6c0: 6f72 5f74 6162 732e 6765 745f 6375 7272  or_tabs.get_curr
-0003c6d0: 656e 745f 6564 6974 6f72 2829 2e63 6c69  ent_editor().cli
-0003c6e0: 636b 5f70 6f73 203d 2051 506f 696e 7428  ck_pos = QPoint(
-0003c6f0: 3435 302c 2035 3030 290a 2020 2020 2020  450, 500).      
-0003c700: 2020 2320 4372 6561 7465 7320 6120 6e6f    # Creates a no
-0003c710: 6465 2063 616c 6c65 6420 2274 6872 6573  de called "thres
-0003c720: 686f 6c64 5f31 220a 2020 2020 2020 2020  hold_1".        
-0003c730: 7069 7065 6c69 6e65 5f65 6469 746f 725f  pipeline_editor_
-0003c740: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
-0003c750: 5f65 6469 746f 7228 292e 6164 645f 6e61  _editor().add_na
-0003c760: 6d65 645f 7072 6f63 6573 7328 0a20 2020  med_process(.   
-0003c770: 2020 2020 2020 2020 2070 726f 6365 7373           process
-0003c780: 5f63 6c61 7373 0a20 2020 2020 2020 2029  _class.        )
-0003c790: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
-0003c7a0: 6520 3d20 7069 7065 6c69 6e65 5f65 6469  e = pipeline_edi
-0003c7b0: 746f 725f 7461 6273 2e67 6574 5f63 7572  tor_tabs.get_cur
-0003c7c0: 7265 6e74 5f70 6970 656c 696e 6528 290a  rent_pipeline().
-0003c7d0: 0a20 2020 2020 2020 2023 2045 7870 6f72  .        # Expor
-0003c7e0: 7469 6e67 2074 6865 2069 6e70 7574 2070  ting the input p
-0003c7f0: 6c75 6773 2061 6e64 206d 6f64 6966 7969  lugs and modifyi
-0003c800: 6e67 2074 6865 2022 7379 6e63 6872 6f6e  ng the "synchron
-0003c810: 697a 6522 2069 6e70 7574 2070 6c75 670a  ize" input plug.
-0003c820: 2020 2020 2020 2020 280a 2020 2020 2020          (.      
-0003c830: 2020 2020 2020 7069 7065 6c69 6e65 5f65        pipeline_e
-0003c840: 6469 746f 725f 7461 6273 2e67 6574 5f63  ditor_tabs.get_c
-0003c850: 7572 7265 6e74 5f65 6469 746f 720a 2020  urrent_editor.  
-0003c860: 2020 2020 2020 2928 292e 6375 7272 656e        )().curren
-0003c870: 745f 6e6f 6465 5f6e 616d 6520 3d20 2274  t_node_name = "t
-0003c880: 6872 6573 686f 6c64 5f31 220a 2020 2020  hreshold_1".    
-0003c890: 2020 2020 280a 2020 2020 2020 2020 2020      (.          
-0003c8a0: 2020 7069 7065 6c69 6e65 5f65 6469 746f    pipeline_edito
-0003c8b0: 725f 7461 6273 2e67 6574 5f63 7572 7265  r_tabs.get_curre
-0003c8c0: 6e74 5f65 6469 746f 720a 2020 2020 2020  nt_editor.      
-0003c8d0: 2020 2928 292e 6578 706f 7274 5f6e 6f64    )().export_nod
-0003c8e0: 655f 616c 6c5f 756e 636f 6e6e 6563 7465  e_all_unconnecte
-0003c8f0: 645f 696e 7075 7473 2829 0a0a 2020 2020  d_inputs()..    
-0003c900: 2020 2020 696e 7075 745f 7072 6f63 6573      input_proces
-0003c910: 7320 3d20 7069 7065 6c69 6e65 2e6e 6f64  s = pipeline.nod
-0003c920: 6573 5b22 225d 2e70 726f 6365 7373 0a20  es[""].process. 
-0003c930: 2020 2020 2020 206e 6f64 655f 636f 6e74         node_cont
-0003c940: 726f 6c6c 6572 2e64 6973 706c 6179 5f70  roller.display_p
-0003c950: 6172 616d 6574 6572 7328 0a20 2020 2020  arameters(.     
-0003c960: 2020 2020 2020 2022 696e 7075 7473 222c         "inputs",
-0003c970: 2067 6574 5f70 726f 6365 7373 5f69 6e73   get_process_ins
-0003c980: 7461 6e63 6528 696e 7075 745f 7072 6f63  tance(input_proc
-0003c990: 6573 7329 2c20 7069 7065 6c69 6e65 0a20  ess), pipeline. 
-0003c9a0: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-0003c9b0: 2020 6966 2068 6173 6174 7472 286e 6f64    if hasattr(nod
-0003c9c0: 655f 636f 6e74 726f 6c6c 6572 2c20 2267  e_controller, "g
-0003c9d0: 6574 5f69 6e64 6578 5f66 726f 6d5f 706c  et_index_from_pl
-0003c9e0: 7567 5f6e 616d 6522 293a 0a20 2020 2020  ug_name"):.     
-0003c9f0: 2020 2020 2020 2069 6e64 6578 203d 206e         index = n
-0003ca00: 6f64 655f 636f 6e74 726f 6c6c 6572 2e67  ode_controller.g
-0003ca10: 6574 5f69 6e64 6578 5f66 726f 6d5f 706c  et_index_from_pl
-0003ca20: 7567 5f6e 616d 6528 0a20 2020 2020 2020  ug_name(.       
-0003ca30: 2020 2020 2020 2020 2022 7379 6e63 6872           "synchr
-0003ca40: 6f6e 697a 6522 2c20 2269 6e22 0a20 2020  onize", "in".   
-0003ca50: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-0003ca60: 2020 2020 2020 206e 6f64 655f 636f 6e74         node_cont
-0003ca70: 726f 6c6c 6572 2e6c 696e 655f 6564 6974  roller.line_edit
-0003ca80: 5f69 6e70 7574 5b69 6e64 6578 5d2e 7365  _input[index].se
-0003ca90: 7454 6578 7428 2232 2229 0a20 2020 2020  tText("2").     
-0003caa0: 2020 2020 2020 2023 2054 6869 7320 6361         # This ca
-0003cab0: 6c6c 7320 2275 7064 6174 655f 706c 7567  lls "update_plug
-0003cac0: 5f76 616c 7565 2220 6d65 7468 6f64 0a20  _value" method. 
-0003cad0: 2020 2020 2020 2020 2020 206e 6f64 655f             node_
-0003cae0: 636f 6e74 726f 6c6c 6572 2e6c 696e 655f  controller.line_
-0003caf0: 6564 6974 5f69 6e70 7574 5b69 6e64 6578  edit_input[index
-0003cb00: 5d2e 7265 7475 726e 5072 6573 7365 642e  ].returnPressed.
-0003cb10: 656d 6974 2829 0a0a 2020 2020 2020 2020  emit()..        
-0003cb20: 2020 2020 2320 4361 6c6c 696e 6720 7468      # Calling th
-0003cb30: 6520 6469 7370 6c61 795f 6669 6c74 6572  e display_filter
-0003cb40: 206d 6574 686f 640a 2020 2020 2020 2020   method.        
-0003cb50: 2020 2020 6e6f 6465 5f63 6f6e 7472 6f6c      node_control
-0003cb60: 6c65 722e 6469 7370 6c61 795f 6669 6c74  ler.display_filt
-0003cb70: 6572 280a 2020 2020 2020 2020 2020 2020  er(.            
-0003cb80: 2020 2020 2269 6e70 7574 7322 2c20 2273      "inputs", "s
-0003cb90: 796e 6368 726f 6e69 7a65 222c 2028 292c  ynchronize", (),
-0003cba0: 2069 6e70 7574 5f70 726f 6365 7373 0a20   input_process. 
-0003cbb0: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-0003cbc0: 2020 2020 2020 2020 206e 6f64 655f 636f           node_co
-0003cbd0: 6e74 726f 6c6c 6572 2e70 6f70 5f75 702e  ntroller.pop_up.
-0003cbe0: 636c 6f73 6528 290a 2020 2020 2020 2020  close().        
-0003cbf0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0003cc00: 7175 616c 280a 2020 2020 2020 2020 2020  qual(.          
-0003cc10: 2020 2020 2020 322c 2070 6970 656c 696e        2, pipelin
-0003cc20: 652e 6e6f 6465 735b 2274 6872 6573 686f  e.nodes["thresho
-0003cc30: 6c64 5f31 225d 2e67 6574 5f70 6c75 675f  ld_1"].get_plug_
-0003cc40: 7661 6c75 6528 2273 796e 6368 726f 6e69  value("synchroni
-0003cc50: 7a65 2229 0a20 2020 2020 2020 2020 2020  ze").           
-0003cc60: 2029 0a0a 2020 2020 2020 2020 2320 5377   )..        # Sw
-0003cc70: 6974 6368 6573 2062 6163 6b20 746f 206e  itches back to n
-0003cc80: 6f64 6520 636f 6e74 726f 6c6c 6572 2056  ode controller V
-0003cc90: 322c 2069 6620 6e65 6365 7373 6172 7920  2, if necessary 
-0003cca0: 2872 6574 7572 6e20 746f 2069 6e69 7469  (return to initi
-0003ccb0: 616c 0a20 2020 2020 2020 2023 2073 7461  al.        # sta
-0003ccc0: 7465 290a 2020 2020 2020 2020 636f 6e66  te).        conf
-0003ccd0: 6967 203d 2043 6f6e 6669 6728 636f 6e66  ig = Config(conf
-0003cce0: 6967 5f70 6174 683d 7365 6c66 2e63 6f6e  ig_path=self.con
-0003ccf0: 6669 675f 7061 7468 290a 0a20 2020 2020  fig_path)..     
-0003cd00: 2020 2069 6620 6e6f 7420 636f 6e74 726f     if not contro
-0003cd10: 6c56 315f 7665 723a 0a20 2020 2020 2020  lV1_ver:.       
-0003cd20: 2020 2020 2063 6f6e 6669 672e 7365 7443       config.setC
-0003cd30: 6f6e 7472 6f6c 5631 2846 616c 7365 290a  ontrolV1(False).
-0003cd40: 0a20 2020 2064 6566 2074 6573 745f 6669  .    def test_fi
-0003cd50: 6c74 6572 5f77 6964 6765 7428 7365 6c66  lter_widget(self
-0003cd60: 293a 0a20 2020 2020 2020 2022 2222 506c  ):.        """Pl
-0003cd70: 6163 6573 2061 206e 6f64 6520 6f66 2074  aces a node of t
-0003cd80: 6865 2022 496e 7075 745f 4669 6c74 6572  he "Input_Filter
-0003cd90: 2220 7072 6f63 6573 732c 2066 6565 6473  " process, feeds
-0003cda0: 2069 6e20 646f 6375 6d65 6e74 730a 2020   in documents.  
-0003cdb0: 2020 2020 2020 616e 6420 6f70 656e 7320        and opens 
-0003cdc0: 7570 2074 6865 2022 4669 6c74 6572 5769  up the "FilterWi
-0003cdd0: 6467 6574 2829 2220 746f 206d 6f64 6966  dget()" to modif
-0003cde0: 7920 6974 7320 7061 7261 6d65 7465 7273  y its parameters
-0003cdf0: 2e0a 0a20 2020 2020 2020 2054 6573 7473  ...        Tests
-0003ce00: 2074 6865 2063 6c61 7373 2046 696c 7465   the class Filte
-0003ce10: 7257 6964 6765 7428 2920 7769 7468 696e  rWidget() within
-0003ce20: 2074 6865 204e 6f64 6520 436f 6e74 726f   the Node Contro
-0003ce30: 6c6c 6572 2056 310a 2020 2020 2020 2020  ller V1.        
-0003ce40: 2863 6c61 7373 204e 6f64 6543 6f6e 7472  (class NodeContr
-0003ce50: 6f6c 6c65 7228 2929 2e20 5468 6520 636c  oller()). The cl
-0003ce60: 6173 7320 4669 6c74 6572 5769 6467 6574  ass FilterWidget
-0003ce70: 2829 2069 730a 2020 2020 2020 2020 696e  () is.        in
-0003ce80: 6465 7065 6e64 656e 7420 6f6e 2074 6865  dependent on the
-0003ce90: 204e 6f64 650a 2020 2020 2020 2020 436f   Node.        Co
-0003cea0: 6e74 726f 6c6c 6572 2076 6572 7369 6f6e  ntroller version
-0003ceb0: 2028 5631 206f 7220 5632 2920 616e 6420   (V1 or V2) and 
-0003cec0: 6361 6e20 6265 2075 7365 6420 696e 2062  can be used in b
-0003ced0: 6f74 6820 6f66 2074 6865 6d2e 0a20 2020  oth of them..   
-0003cee0: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
-0003cef0: 2020 636f 6e66 6967 203d 2043 6f6e 6669    config = Confi
-0003cf00: 6728 636f 6e66 6967 5f70 6174 683d 7365  g(config_path=se
-0003cf10: 6c66 2e63 6f6e 6669 675f 7061 7468 290a  lf.config_path).
-0003cf20: 2020 2020 2020 2020 636f 6e74 726f 6c56          controlV
-0003cf30: 315f 7665 7220 3d20 636f 6e66 6967 2e69  1_ver = config.i
-0003cf40: 7343 6f6e 7472 6f6c 5631 2829 0a0a 2020  sControlV1()..  
-0003cf50: 2020 2020 2020 2320 5377 6974 6368 2074        # Switch t
-0003cf60: 6f20 5631 206e 6f64 6520 636f 6e74 726f  o V1 node contro
-0003cf70: 6c6c 6572 2047 5549 2c20 6966 206e 6563  ller GUI, if nec
-0003cf80: 6573 7361 7279 0a20 2020 2020 2020 2069  essary.        i
-0003cf90: 6620 6e6f 7420 636f 6e74 726f 6c56 315f  f not controlV1_
-0003cfa0: 7665 723a 0a20 2020 2020 2020 2020 2020  ver:.           
-0003cfb0: 2063 6f6e 6669 672e 7365 7443 6f6e 7472   config.setContr
-0003cfc0: 6f6c 5631 2854 7275 6529 0a20 2020 2020  olV1(True).     
-0003cfd0: 2020 2020 2020 2073 656c 662e 7265 7374         self.rest
-0003cfe0: 6172 745f 4d49 4128 290a 0a20 2020 2020  art_MIA()..     
-0003cff0: 2020 2023 204f 7065 6e73 2070 726f 6a65     # Opens proje
-0003d000: 6374 2038 2061 6e64 2073 7769 7463 6865  ct 8 and switche
-0003d010: 7320 746f 2069 740a 2020 2020 2020 2020  s to it.        
-0003d020: 7072 6f6a 6563 745f 385f 7061 7468 203d  project_8_path =
-0003d030: 2073 656c 662e 6765 745f 6e65 775f 7465   self.get_new_te
-0003d040: 7374 5f70 726f 6a65 6374 2829 0a20 2020  st_project().   
-0003d050: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
-0003d060: 696e 646f 772e 7377 6974 6368 5f70 726f  indow.switch_pro
-0003d070: 6a65 6374 2870 726f 6a65 6374 5f38 5f70  ject(project_8_p
-0003d080: 6174 682c 2022 7072 6f6a 6563 745f 3822  ath, "project_8"
-0003d090: 290a 0a20 2020 2020 2020 2044 4f43 554d  )..        DOCUM
-0003d0a0: 454e 545f 3120 3d20 2873 656c 662e 6d61  ENT_1 = (self.ma
-0003d0b0: 696e 5f77 696e 646f 772e 7072 6f6a 6563  in_window.projec
-0003d0c0: 742e 7365 7373 696f 6e2e 6765 745f 646f  t.session.get_do
-0003d0d0: 6375 6d65 6e74 735f 6e61 6d65 7329 280a  cuments_names)(.
-0003d0e0: 2020 2020 2020 2020 2020 2020 2263 7572              "cur
-0003d0f0: 7265 6e74 220a 2020 2020 2020 2020 295b  rent".        )[
-0003d100: 305d 0a20 2020 2020 2020 2044 4f43 554d  0].        DOCUM
-0003d110: 454e 545f 3220 3d20 2873 656c 662e 6d61  ENT_2 = (self.ma
-0003d120: 696e 5f77 696e 646f 772e 7072 6f6a 6563  in_window.projec
-0003d130: 742e 7365 7373 696f 6e2e 6765 745f 646f  t.session.get_do
-0003d140: 6375 6d65 6e74 735f 6e61 6d65 7329 280a  cuments_names)(.
-0003d150: 2020 2020 2020 2020 2020 2020 2263 7572              "cur
-0003d160: 7265 6e74 220a 2020 2020 2020 2020 295b  rent".        )[
-0003d170: 315d 0a0a 2020 2020 2020 2020 7070 6c5f  1]..        ppl_
-0003d180: 6564 745f 7461 6273 203d 2073 656c 662e  edt_tabs = self.
-0003d190: 6d61 696e 5f77 696e 646f 772e 7069 7065  main_window.pipe
-0003d1a0: 6c69 6e65 5f6d 616e 6167 6572 2e70 6970  line_manager.pip
-0003d1b0: 656c 696e 6545 6469 746f 7254 6162 730a  elineEditorTabs.
-0003d1c0: 2020 2020 2020 2020 6e6f 6465 5f63 7472          node_ctr
-0003d1d0: 6c65 7220 3d20 7365 6c66 2e6d 6169 6e5f  ler = self.main_
-0003d1e0: 7769 6e64 6f77 2e70 6970 656c 696e 655f  window.pipeline_
-0003d1f0: 6d61 6e61 6765 722e 6e6f 6465 436f 6e74  manager.nodeCont
-0003d200: 726f 6c6c 6572 0a0a 2020 2020 2020 2020  roller..        
-0003d210: 2320 4164 6473 2074 6865 2070 726f 6365  # Adds the proce
-0003d220: 7373 2022 696e 7075 745f 6669 6c74 6572  ss "input_filter
-0003d230: 5f31 220a 2020 2020 2020 2020 7072 6f63  _1".        proc
-0003d240: 6573 735f 636c 6173 7320 3d20 496e 7075  ess_class = Inpu
-0003d250: 745f 4669 6c74 6572 0a20 2020 2020 2020  t_Filter.       
-0003d260: 2070 706c 5f65 6474 5f74 6162 732e 6765   ppl_edt_tabs.ge
-0003d270: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
-0003d280: 2829 2e63 6c69 636b 5f70 6f73 203d 2051  ().click_pos = Q
-0003d290: 506f 696e 7428 3435 302c 2035 3030 290a  Point(450, 500).
-0003d2a0: 2020 2020 2020 2020 7070 6c5f 6564 745f          ppl_edt_
-0003d2b0: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
-0003d2c0: 5f65 6469 746f 7228 292e 6164 645f 6e61  _editor().add_na
-0003d2d0: 6d65 645f 7072 6f63 6573 7328 7072 6f63  med_process(proc
-0003d2e0: 6573 735f 636c 6173 7329 0a20 2020 2020  ess_class).     
-0003d2f0: 2020 2070 6970 656c 696e 6520 3d20 7070     pipeline = pp
-0003d300: 6c5f 6564 745f 7461 6273 2e67 6574 5f63  l_edt_tabs.get_c
-0003d310: 7572 7265 6e74 5f70 6970 656c 696e 6528  urrent_pipeline(
-0003d320: 290a 0a20 2020 2020 2020 2023 2045 7870  )..        # Exp
-0003d330: 6f72 7473 2074 6865 2069 6e70 7574 2070  orts the input p
-0003d340: 6c75 6773 2066 6f72 2022 696e 7075 745f  lugs for "input_
-0003d350: 6669 6c74 6572 5f31 220a 2020 2020 2020  filter_1".      
-0003d360: 2020 7070 6c5f 6564 745f 7461 6273 2e67    ppl_edt_tabs.g
-0003d370: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
-0003d380: 7228 292e 6375 7272 656e 745f 6e6f 6465  r().current_node
-0003d390: 5f6e 616d 6520 3d20 2269 6e70 7574 5f66  _name = "input_f
-0003d3a0: 696c 7465 725f 3122 0a20 2020 2020 2020  ilter_1".       
-0003d3b0: 2028 0a20 2020 2020 2020 2020 2020 2070   (.            p
-0003d3c0: 706c 5f65 6474 5f74 6162 732e 6765 745f  pl_edt_tabs.get_
-0003d3d0: 6375 7272 656e 745f 6564 6974 6f72 0a20  current_editor. 
-0003d3e0: 2020 2020 2020 2029 2829 2e65 7870 6f72         )().expor
-0003d3f0: 745f 6e6f 6465 5f75 6e63 6f6e 6e65 6374  t_node_unconnect
-0003d400: 6564 5f6d 616e 6461 746f 7279 5f70 6c75  ed_mandatory_plu
-0003d410: 6773 2829 0a0a 2020 2020 2020 2020 2320  gs()..        # 
-0003d420: 4469 7370 6c61 7973 2070 6172 616d 6574  Displays paramet
-0003d430: 6572 7320 6f66 2074 6865 2022 696e 7075  ers of the "inpu
-0003d440: 7473 2220 6e6f 6465 0a20 2020 2020 2020  ts" node.       
-0003d450: 2069 6e70 7574 5f70 726f 6365 7373 203d   input_process =
-0003d460: 2070 6970 656c 696e 652e 6e6f 6465 735b   pipeline.nodes[
-0003d470: 2222 5d2e 7072 6f63 6573 730a 2020 2020  ""].process.    
-0003d480: 2020 2020 6e6f 6465 5f63 7472 6c65 722e      node_ctrler.
-0003d490: 6469 7370 6c61 795f 7061 7261 6d65 7465  display_paramete
-0003d4a0: 7273 280a 2020 2020 2020 2020 2020 2020  rs(.            
-0003d4b0: 2269 6e70 7574 7322 2c20 6765 745f 7072  "inputs", get_pr
-0003d4c0: 6f63 6573 735f 696e 7374 616e 6365 2869  ocess_instance(i
-0003d4d0: 6e70 7574 5f70 726f 6365 7373 292c 2070  nput_process), p
-0003d4e0: 6970 656c 696e 650a 2020 2020 2020 2020  ipeline.        
-0003d4f0: 290a 0a20 2020 2020 2020 2023 204f 7065  )..        # Ope
-0003d500: 6e73 2061 2066 696c 7465 7220 666f 7220  ns a filter for 
-0003d510: 7468 6520 706c 7567 2022 696e 7075 7422  the plug "input"
-0003d520: 206f 6620 7468 6520 2269 6e70 7574 7322   of the "inputs"
-0003d530: 206e 6f64 650a 2020 2020 2020 2020 7061   node.        pa
-0003d540: 7261 6d65 7465 7273 203d 2028 302c 2070  rameters = (0, p
-0003d550: 6970 656c 696e 652c 2074 7970 6528 556e  ipeline, type(Un
-0003d560: 6465 6669 6e65 6429 290a 2020 2020 2020  defined)).      
-0003d570: 2020 6e6f 6465 5f63 7472 6c65 722e 6469    node_ctrler.di
-0003d580: 7370 6c61 795f 6669 6c74 6572 280a 2020  splay_filter(.  
-0003d590: 2020 2020 2020 2020 2020 2269 6e70 7574            "input
-0003d5a0: 7322 2c20 2269 6e70 7574 222c 2070 6172  s", "input", par
-0003d5b0: 616d 6574 6572 732c 2069 6e70 7574 5f70  ameters, input_p
-0003d5c0: 726f 6365 7373 0a20 2020 2020 2020 2029  rocess.        )
-0003d5d0: 0a0a 2020 2020 2020 2020 2320 5365 6c65  ..        # Sele
-0003d5e0: 6374 7320 616c 6c20 7265 636f 7264 7320  cts all records 
-0003d5f0: 696e 2074 6865 2022 696e 7075 7422 206e  in the "input" n
-0003d600: 6f64 650a 2020 2020 2020 2020 706c 7567  ode.        plug
-0003d610: 5f66 696c 7465 7220 3d20 6e6f 6465 5f63  _filter = node_c
-0003d620: 7472 6c65 722e 706f 705f 7570 0a0a 2020  trler.pop_up..  
-0003d630: 2020 2020 2020 706c 7567 5f66 696c 7465        plug_filte
-0003d640: 722e 6f6b 5f63 6c69 636b 6564 2829 0a0a  r.ok_clicked()..
-0003d650: 2020 2020 2020 2020 2320 4f70 656e 7320          # Opens 
-0003d660: 7468 6520 6669 6c74 6572 2077 6964 6765  the filter widge
-0003d670: 7420 666f 7220 7468 6520 6e6f 6465 2022  t for the node "
-0003d680: 696e 7075 745f 6669 6c74 6572 5f31 220a  input_filter_1".
-0003d690: 2020 2020 2020 2020 7070 6c5f 6564 745f          ppl_edt_
-0003d6a0: 7461 6273 2e6f 7065 6e5f 6669 6c74 6572  tabs.open_filter
-0003d6b0: 2822 696e 7075 745f 6669 6c74 6572 5f31  ("input_filter_1
-0003d6c0: 2229 0a20 2020 2020 2020 2069 6e70 7574  ").        input
-0003d6d0: 5f66 696c 7465 7220 3d20 7070 6c5f 6564  _filter = ppl_ed
-0003d6e0: 745f 7461 6273 2e66 696c 7465 725f 7769  t_tabs.filter_wi
-0003d6f0: 6467 6574 0a0a 2020 2020 2020 2020 696e  dget..        in
-0003d700: 6465 785f 444f 4355 4d45 4e54 5f31 203d  dex_DOCUMENT_1 =
-0003d710: 2069 6e70 7574 5f66 696c 7465 722e 7461   input_filter.ta
-0003d720: 626c 655f 6461 7461 2e67 6574 5f73 6361  ble_data.get_sca
-0003d730: 6e5f 726f 7728 444f 4355 4d45 4e54 5f31  n_row(DOCUMENT_1
-0003d740: 290a 2020 2020 2020 2020 696e 6465 785f  ).        index_
-0003d750: 444f 4355 4d45 4e54 5f32 203d 2069 6e70  DOCUMENT_2 = inp
-0003d760: 7574 5f66 696c 7465 722e 7461 626c 655f  ut_filter.table_
-0003d770: 6461 7461 2e67 6574 5f73 6361 6e5f 726f  data.get_scan_ro
-0003d780: 7728 444f 4355 4d45 4e54 5f32 290a 0a20  w(DOCUMENT_2).. 
-0003d790: 2020 2020 2020 2023 2054 7269 6573 2074         # Tries t
-0003d7a0: 6f20 7365 6172 6368 2066 6f72 2061 6e20  o search for an 
-0003d7b0: 656d 7074 7920 7374 7269 6e67 2061 6e64  empty string and
-0003d7c0: 2061 7373 6572 7473 2074 6861 7420 6e6f   asserts that no
-0003d7d0: 6e65 206f 6620 7468 650a 2020 2020 2020  ne of the.      
-0003d7e0: 2020 2320 646f 6375 6d65 6e74 7320 6172    # documents ar
-0003d7f0: 6520 6869 6464 656e 0a20 2020 2020 2020  e hidden.       
-0003d800: 2069 6e70 7574 5f66 696c 7465 722e 7365   input_filter.se
-0003d810: 6172 6368 5f73 7472 2822 2229 0a0a 2020  arch_str("")..  
-0003d820: 2020 2020 2020 2320 5465 7374 2022 444f        # Test "DO
-0003d830: 4355 4d45 4e54 5f31 2220 6973 206e 6f74  CUMENT_1" is not
-0003d840: 2068 6964 6465 6e0a 2020 2020 2020 2020   hidden.        
-0003d850: 2320 4649 584d 453a 204f 6e6c 7920 666f  # FIXME: Only fo
-0003d860: 7220 7468 6520 5769 6e64 6f77 7320 7665  r the Windows ve
-0003d870: 7273 696f 6e2c 2074 6865 206d 6574 686f  rsion, the metho
-0003d880: 6420 6973 526f 7748 6964 6465 6e28 290a  d isRowHidden().
-0003d890: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0003d8a0: 2064 6f65 7320 6e6f 7420 7365 656d 2074   does not seem t
-0003d8b0: 6f20 6769 7665 2074 6865 2065 7870 6563  o give the expec
-0003d8c0: 7465 6420 7265 7375 6c74 2e20 5761 6974  ted result. Wait
-0003d8d0: 696e 6720 746f 206c 6f6f 6b20 6174 0a20  ing to look at. 
-0003d8e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0003d8f0: 7468 6973 2c20 7765 2063 6f6d 6d65 6e74  this, we comment
-0003d900: 202e 2e0a 2020 2020 2020 2020 2320 7365   ...        # se
-0003d910: 6c66 2e61 7373 6572 7446 616c 7365 2869  lf.assertFalse(i
-0003d920: 6e70 7574 5f66 696c 7465 722e 7461 626c  nput_filter.tabl
-0003d930: 655f 6461 7461 2e69 7352 6f77 4869 6464  e_data.isRowHidd
-0003d940: 656e 2869 6e64 6578 5f44 4f43 554d 454e  en(index_DOCUMEN
-0003d950: 545f 3129 290a 2020 2020 2020 2020 2320  T_1)).        # 
-0003d960: 5465 7374 2022 444f 4355 4d45 4e54 5f32  Test "DOCUMENT_2
-0003d970: 2220 6973 206e 6f74 2068 6964 6465 6e0a  " is not hidden.
-0003d980: 2020 2020 2020 2020 2320 4649 584d 453a          # FIXME:
-0003d990: 204f 6e6c 7920 666f 7220 7468 6520 5769   Only for the Wi
-0003d9a0: 6e64 6f77 7320 7665 7273 696f 6e2c 2074  ndows version, t
-0003d9b0: 6865 206d 6574 686f 6420 6973 526f 7748  he method isRowH
-0003d9c0: 6964 6465 6e28 290a 2020 2020 2020 2020  idden().        
-0003d9d0: 2320 2020 2020 2020 2064 6f65 7320 6e6f  #        does no
-0003d9e0: 7420 7365 656d 2074 6f20 6769 7665 2074  t seem to give t
-0003d9f0: 6865 2065 7870 6563 7465 6420 7265 7375  he expected resu
-0003da00: 6c74 2e20 5761 6974 696e 6720 746f 206c  lt. Waiting to l
-0003da10: 6f6f 6b20 6174 0a20 2020 2020 2020 2023  ook at.        #
-0003da20: 2020 2020 2020 2020 7468 6973 2c20 7765          this, we
-0003da30: 2063 6f6d 6d65 6e74 202e 2e0a 2020 2020   comment ...    
-0003da40: 2020 2020 2320 7365 6c66 2e61 7373 6572      # self.asser
-0003da50: 7446 616c 7365 2869 6e70 7574 5f66 696c  tFalse(input_fil
-0003da60: 7465 722e 7461 626c 655f 6461 7461 2e69  ter.table_data.i
-0003da70: 7352 6f77 4869 6464 656e 2869 6e64 6578  sRowHidden(index
-0003da80: 5f44 4f43 554d 454e 545f 3229 290a 0a20  _DOCUMENT_2)).. 
-0003da90: 2020 2020 2020 2023 2053 6561 7263 6865         # Searche
-0003daa0: 7320 666f 7220 2244 4f43 554d 454e 545f  s for "DOCUMENT_
-0003dab0: 3222 2061 6e64 2076 6572 6966 6965 7320  2" and verifies 
-0003dac0: 7468 6174 2022 444f 4355 4d45 4e54 5f31  that "DOCUMENT_1
-0003dad0: 2220 6973 2068 6964 6465 6e0a 2020 2020  " is hidden.    
-0003dae0: 2020 2020 696e 7075 745f 6669 6c74 6572      input_filter
-0003daf0: 2e73 6561 7263 685f 7374 7228 444f 4355  .search_str(DOCU
-0003db00: 4d45 4e54 5f32 290a 2020 2020 2020 2020  MENT_2).        
-0003db10: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
-0003db20: 696e 7075 745f 6669 6c74 6572 2e74 6162  input_filter.tab
-0003db30: 6c65 5f64 6174 612e 6973 526f 7748 6964  le_data.isRowHid
-0003db40: 6465 6e28 696e 6465 785f 444f 4355 4d45  den(index_DOCUME
-0003db50: 4e54 5f31 2929 0a0a 2020 2020 2020 2020  NT_1))..        
-0003db60: 2320 5265 7365 7473 2074 6865 2073 6561  # Resets the sea
-0003db70: 7263 6820 6261 7220 616e 6420 6173 7365  rch bar and asse
-0003db80: 7274 2074 6861 7420 6e6f 6e65 206f 6620  rt that none of 
-0003db90: 7468 6520 646f 6375 6d65 6e74 7320 6172  the documents ar
-0003dba0: 6520 6869 6464 656e 0a20 2020 2020 2020  e hidden.       
-0003dbb0: 2069 6e70 7574 5f66 696c 7465 722e 7265   input_filter.re
-0003dbc0: 7365 745f 7365 6172 6368 5f62 6172 2829  set_search_bar()
-0003dbd0: 0a0a 2020 2020 2020 2020 2320 5465 7374  ..        # Test
-0003dbe0: 2022 444f 4355 4d45 4e54 5f31 2220 6973   "DOCUMENT_1" is
-0003dbf0: 206e 6f74 2068 6964 6465 6e0a 2020 2020   not hidden.    
-0003dc00: 2020 2020 2320 4649 584d 453a 204f 6e6c      # FIXME: Onl
-0003dc10: 7920 666f 7220 7468 6520 5769 6e64 6f77  y for the Window
-0003dc20: 7320 7665 7273 696f 6e2c 2074 6865 206d  s version, the m
-0003dc30: 6574 686f 6420 6973 526f 7748 6964 6465  ethod isRowHidde
-0003dc40: 6e28 290a 2020 2020 2020 2020 2320 2020  n().        #   
-0003dc50: 2020 2020 2064 6f65 7320 6e6f 7420 7365       does not se
-0003dc60: 656d 2074 6f20 6769 7665 2074 6865 2065  em to give the e
-0003dc70: 7870 6563 7465 6420 7265 7375 6c74 2e20  xpected result. 
-0003dc80: 5761 6974 696e 6720 746f 206c 6f6f 6b20  Waiting to look 
-0003dc90: 6174 0a20 2020 2020 2020 2023 2020 2020  at.        #    
-0003dca0: 2020 2020 7468 6973 2c20 7765 2063 6f6d      this, we com
-0003dcb0: 6d65 6e74 202e 2e0a 2020 2020 2020 2020  ment ...        
-0003dcc0: 2320 7365 6c66 2e61 7373 6572 7446 616c  # self.assertFal
-0003dcd0: 7365 2869 6e70 7574 5f66 696c 7465 722e  se(input_filter.
-0003dce0: 7461 626c 655f 6461 7461 2e69 7352 6f77  table_data.isRow
-0003dcf0: 4869 6464 656e 2869 6e64 6578 5f44 4f43  Hidden(index_DOC
-0003dd00: 554d 454e 545f 3129 290a 2020 2020 2020  UMENT_1)).      
-0003dd10: 2020 2320 5465 7374 2022 444f 4355 4d45    # Test "DOCUME
-0003dd20: 4e54 5f31 2220 6973 206e 6f74 2068 6964  NT_1" is not hid
-0003dd30: 6465 6e0a 2020 2020 2020 2020 2320 4649  den.        # FI
-0003dd40: 584d 453a 204f 6e6c 7920 666f 7220 7468  XME: Only for th
-0003dd50: 6520 5769 6e64 6f77 7320 7665 7273 696f  e Windows versio
-0003dd60: 6e2c 2074 6865 206d 6574 686f 6420 6973  n, the method is
-0003dd70: 526f 7748 6964 6465 6e28 290a 2020 2020  RowHidden().    
-0003dd80: 2020 2020 2320 2020 2020 2020 2064 6f65      #        doe
-0003dd90: 7320 6e6f 7420 7365 656d 2074 6f20 6769  s not seem to gi
-0003dda0: 7665 2074 6865 2065 7870 6563 7465 6420  ve the expected 
-0003ddb0: 7265 7375 6c74 2e20 5761 6974 696e 6720  result. Waiting 
-0003ddc0: 746f 206c 6f6f 6b20 6174 0a20 2020 2020  to look at.     
-0003ddd0: 2020 2023 2020 2020 2020 2020 7468 6973     #        this
-0003dde0: 2c20 7765 2063 6f6d 6d65 6e74 202e 2e0a  , we comment ...
-0003ddf0: 2020 2020 2020 2020 2320 7365 6c66 2e61          # self.a
-0003de00: 7373 6572 7446 616c 7365 2869 6e70 7574  ssertFalse(input
-0003de10: 5f66 696c 7465 722e 7461 626c 655f 6461  _filter.table_da
-0003de20: 7461 2e69 7352 6f77 4869 6464 656e 2869  ta.isRowHidden(i
-0003de30: 6e64 6578 5f44 4f43 554d 454e 545f 3229  ndex_DOCUMENT_2)
-0003de40: 290a 0a20 2020 2020 2020 2023 204f 7065  )..        # Ope
-0003de50: 6e73 2074 6865 2022 5669 7375 616c 697a  ns the "Visualiz
-0003de60: 6564 2074 6167 7322 2070 6f70 2075 7020  ed tags" pop up 
-0003de70: 616e 6420 6164 6473 2074 6865 2022 4163  and adds the "Ac
-0003de80: 7175 6973 6974 696f 6e44 6174 6522 2074  quisitionDate" t
-0003de90: 6167 0a20 2020 2020 2020 2069 6e70 7574  ag.        input
-0003dea0: 5f66 696c 7465 722e 7570 6461 7465 5f74  _filter.update_t
-0003deb0: 6167 7328 290a 2020 2020 2020 2020 7365  ags().        se
-0003dec0: 6c66 2e61 6464 5f76 6973 7561 6c69 7a65  lf.add_visualize
-0003ded0: 645f 7461 6728 2241 6371 7569 7369 7469  d_tag("Acquisiti
-0003dee0: 6f6e 4461 7465 2229 0a20 2020 2020 2020  onDate").       
-0003def0: 2023 2046 4958 4d45 3a20 5468 6520 666f   # FIXME: The fo
-0003df00: 6c6c 6f77 696e 6720 7374 6174 656d 656e  llowing statemen
-0003df10: 7420 6973 2061 6c77 6179 7320 5472 7565  t is always True
-0003df20: 2028 6e6f 7420 7468 6520 636f 7272 6563   (not the correc
-0003df30: 7420 7465 7374 290a 2020 2020 2020 2020  t test).        
-0003df40: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
-0003df50: 0a20 2020 2020 2020 2020 2020 2074 7970  .            typ
-0003df60: 6528 696e 7075 745f 6669 6c74 6572 2e74  e(input_filter.t
-0003df70: 6162 6c65 5f64 6174 612e 6765 745f 7461  able_data.get_ta
-0003df80: 675f 636f 6c75 6d6e 2822 4163 7175 6973  g_column("Acquis
-0003df90: 6974 696f 6e44 6174 6522 2929 0a20 2020  itionDate")).   
-0003dfa0: 2020 2020 2020 2020 203d 3d20 696e 740a           == int.
-0003dfb0: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-0003dfc0: 2020 2023 2055 7064 6174 6573 2074 6865     # Updates the
-0003dfd0: 2074 6167 2074 6f20 6669 6c74 6572 2077   tag to filter w
-0003dfe0: 6974 680a 2020 2020 2020 2020 696e 7075  ith.        inpu
-0003dff0: 745f 6669 6c74 6572 2e75 7064 6174 655f  t_filter.update_
-0003e000: 7461 675f 746f 5f66 696c 7465 7228 290a  tag_to_filter().
-0003e010: 0a20 2020 2020 2020 2069 6e70 7574 5f66  .        input_f
-0003e020: 696c 7465 722e 7075 7368 5f62 7574 746f  ilter.push_butto
-0003e030: 6e5f 7461 675f 6669 6c74 6572 2e73 6574  n_tag_filter.set
-0003e040: 5465 7874 2822 4669 6c65 4e61 6d65 2229  Text("FileName")
-0003e050: 0a20 2020 2020 2020 2023 2054 4f44 4f3a  .        # TODO:
-0003e060: 2073 656c 6563 7420 7461 6720 746f 2066   select tag to f
-0003e070: 696c 7465 7220 7769 7468 0a0a 2020 2020  ilter with..    
-0003e080: 2020 2020 2320 436c 6f73 6573 2074 6865      # Closes the
-0003e090: 2066 696c 7465 720a 2020 2020 2020 2020   filter.        
-0003e0a0: 696e 7075 745f 6669 6c74 6572 2e6f 6b5f  input_filter.ok_
-0003e0b0: 636c 6963 6b65 6428 290a 0a20 2020 2020  clicked()..     
-0003e0c0: 2020 2023 2053 7769 7463 6865 7320 6261     # Switches ba
-0003e0d0: 636b 2074 6f20 6e6f 6465 2063 6f6e 7472  ck to node contr
-0003e0e0: 6f6c 6c65 7220 5632 2c20 6966 206e 6563  oller V2, if nec
-0003e0f0: 6573 7361 7279 2028 7265 7475 726e 2074  essary (return t
-0003e100: 6f20 696e 6974 6961 6c0a 2020 2020 2020  o initial.      
-0003e110: 2020 2320 7374 6174 6529 0a20 2020 2020    # state).     
-0003e120: 2020 2063 6f6e 6669 6720 3d20 436f 6e66     config = Conf
-0003e130: 6967 2863 6f6e 6669 675f 7061 7468 3d73  ig(config_path=s
-0003e140: 656c 662e 636f 6e66 6967 5f70 6174 6829  elf.config_path)
-0003e150: 0a0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
-0003e160: 2063 6f6e 7472 6f6c 5631 5f76 6572 3a0a   controlV1_ver:.
-0003e170: 2020 2020 2020 2020 2020 2020 636f 6e66              conf
-0003e180: 6967 2e73 6574 436f 6e74 726f 6c56 3128  ig.setControlV1(
-0003e190: 4661 6c73 6529 0a0a 2020 2020 6465 6620  False)..    def 
-0003e1a0: 7465 7374 5f6e 6f64 655f 636f 6e74 726f  test_node_contro
-0003e1b0: 6c6c 6572 2873 656c 6629 3a0a 2020 2020  ller(self):.    
-0003e1c0: 2020 2020 2222 2241 6464 732c 2063 6861      """Adds, cha
-0003e1d0: 6e67 6573 2061 6e64 2064 656c 6574 6573  nges and deletes
-0003e1e0: 2070 726f 6365 7373 6573 2074 6f20 7468   processes to th
-0003e1f0: 6520 6e6f 6465 2063 6f6e 7472 6f6c 6c65  e node controlle
-0003e200: 722c 0a20 2020 2020 2020 2064 6973 706c  r,.        displ
-0003e210: 6179 2074 6865 2061 7474 7269 6275 7465  ay the attribute
-0003e220: 7320 6669 6c74 6572 2e0a 0a20 2020 2020  s filter...     
-0003e230: 2020 2054 6573 7473 2074 6865 2063 6c61     Tests the cla
-0003e240: 7373 204e 6f64 6543 6f6e 7472 6f6c 6c65  ss NodeControlle
-0003e250: 7228 292e 0a20 2020 2020 2020 2022 2222  r()..        """
-0003e260: 0a0a 2020 2020 2020 2020 636f 6e66 6967  ..        config
-0003e270: 203d 2043 6f6e 6669 6728 636f 6e66 6967   = Config(config
-0003e280: 5f70 6174 683d 7365 6c66 2e63 6f6e 6669  _path=self.confi
-0003e290: 675f 7061 7468 290a 2020 2020 2020 2020  g_path).        
-0003e2a0: 636f 6e74 726f 6c56 315f 7665 7220 3d20  controlV1_ver = 
-0003e2b0: 636f 6e66 6967 2e69 7343 6f6e 7472 6f6c  config.isControl
-0003e2c0: 5631 2829 0a0a 2020 2020 2020 2020 2320  V1()..        # 
-0003e2d0: 5377 6974 6368 2074 6f20 5631 206e 6f64  Switch to V1 nod
-0003e2e0: 6520 636f 6e74 726f 6c6c 6572 2047 5549  e controller GUI
-0003e2f0: 2c20 6966 206e 6563 6573 7361 7279 0a20  , if necessary. 
-0003e300: 2020 2020 2020 2069 6620 6e6f 7420 636f         if not co
-0003e310: 6e74 726f 6c56 315f 7665 723a 0a20 2020  ntrolV1_ver:.   
-0003e320: 2020 2020 2020 2020 2063 6f6e 6669 672e           config.
-0003e330: 7365 7443 6f6e 7472 6f6c 5631 2854 7275  setControlV1(Tru
-0003e340: 6529 0a20 2020 2020 2020 2020 2020 2073  e).            s
-0003e350: 656c 662e 7265 7374 6172 745f 4d49 4128  elf.restart_MIA(
-0003e360: 290a 0a20 2020 2020 2020 2023 204f 7065  )..        # Ope
-0003e370: 6e73 2070 726f 6a65 6374 2038 2061 6e64  ns project 8 and
-0003e380: 2073 7769 7463 6865 7320 746f 2069 740a   switches to it.
-0003e390: 2020 2020 2020 2020 7072 6f6a 6563 745f          project_
-0003e3a0: 385f 7061 7468 203d 2073 656c 662e 6765  8_path = self.ge
-0003e3b0: 745f 6e65 775f 7465 7374 5f70 726f 6a65  t_new_test_proje
-0003e3c0: 6374 2829 0a20 2020 2020 2020 2073 656c  ct().        sel
-0003e3d0: 662e 6d61 696e 5f77 696e 646f 772e 7377  f.main_window.sw
-0003e3e0: 6974 6368 5f70 726f 6a65 6374 2870 726f  itch_project(pro
-0003e3f0: 6a65 6374 5f38 5f70 6174 682c 2022 7072  ject_8_path, "pr
-0003e400: 6f6a 6563 745f 3822 290a 0a20 2020 2020  oject_8")..     
-0003e410: 2020 2044 4f43 554d 454e 545f 3120 3d20     DOCUMENT_1 = 
-0003e420: 2873 656c 662e 6d61 696e 5f77 696e 646f  (self.main_windo
-0003e430: 772e 7072 6f6a 6563 742e 7365 7373 696f  w.project.sessio
-0003e440: 6e2e 6765 745f 646f 6375 6d65 6e74 735f  n.get_documents_
-0003e450: 6e61 6d65 7329 280a 2020 2020 2020 2020  names)(.        
-0003e460: 2020 2020 2263 7572 7265 6e74 220a 2020      "current".  
-0003e470: 2020 2020 2020 295b 305d 0a0a 2020 2020        )[0]..    
-0003e480: 2020 2020 7070 6c5f 6564 745f 7461 6273      ppl_edt_tabs
-0003e490: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
-0003e4a0: 646f 772e 7069 7065 6c69 6e65 5f6d 616e  dow.pipeline_man
-0003e4b0: 6167 6572 2e70 6970 656c 696e 6545 6469  ager.pipelineEdi
-0003e4c0: 746f 7254 6162 730a 2020 2020 2020 2020  torTabs.        
-0003e4d0: 6e6f 6465 5f63 7472 6c65 7220 3d20 7365  node_ctrler = se
-0003e4e0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
-0003e4f0: 6970 656c 696e 655f 6d61 6e61 6765 722e  ipeline_manager.
-0003e500: 6e6f 6465 436f 6e74 726f 6c6c 6572 0a0a  nodeController..
-0003e510: 2020 2020 2020 2020 2320 4164 642c 2074          # Add, t
-0003e520: 7769 6365 2c20 7468 6520 7072 6f63 6573  wice, the proces
-0003e530: 7320 5265 6e61 6d65 2c20 6372 6561 7465  s Rename, create
-0003e540: 7320 7468 6520 2272 656e 616d 655f 3122  s the "rename_1"
-0003e550: 2061 6e64 2022 7265 6e61 6d65 5f32 220a   and "rename_2".
-0003e560: 2020 2020 2020 2020 2320 6e6f 6465 730a          # nodes.
-0003e570: 2020 2020 2020 2020 7072 6f63 6573 735f          process_
-0003e580: 636c 6173 7320 3d20 5265 6e61 6d65 0a20  class = Rename. 
-0003e590: 2020 2020 2020 2070 706c 5f65 6474 5f74         ppl_edt_t
-0003e5a0: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
-0003e5b0: 6564 6974 6f72 2829 2e63 6c69 636b 5f70  editor().click_p
-0003e5c0: 6f73 203d 2051 506f 696e 7428 3435 302c  os = QPoint(450,
-0003e5d0: 2035 3030 290a 2020 2020 2020 2020 7070   500).        pp
-0003e5e0: 6c5f 6564 745f 7461 6273 2e67 6574 5f63  l_edt_tabs.get_c
-0003e5f0: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
-0003e600: 6164 645f 6e61 6d65 645f 7072 6f63 6573  add_named_proces
-0003e610: 7328 7072 6f63 6573 735f 636c 6173 7329  s(process_class)
-0003e620: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
-0003e630: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
-0003e640: 745f 6564 6974 6f72 2829 2e61 6464 5f6e  t_editor().add_n
-0003e650: 616d 6564 5f70 726f 6365 7373 2870 726f  amed_process(pro
-0003e660: 6365 7373 5f63 6c61 7373 290a 2020 2020  cess_class).    
-0003e670: 2020 2020 7069 7065 6c69 6e65 203d 2070      pipeline = p
-0003e680: 706c 5f65 6474 5f74 6162 732e 6765 745f  pl_edt_tabs.get_
-0003e690: 6375 7272 656e 745f 7069 7065 6c69 6e65  current_pipeline
-0003e6a0: 2829 0a0a 2020 2020 2020 2020 2320 4469  ()..        # Di
-0003e6b0: 7370 6c61 7973 2070 6172 616d 6574 6572  splays parameter
-0003e6c0: 7320 6f66 2022 7265 6e61 6d65 5f32 2220  s of "rename_2" 
-0003e6d0: 6e6f 6465 0a20 2020 2020 2020 2072 656e  node.        ren
-0003e6e0: 616d 655f 7072 6f63 6573 7320 3d20 7069  ame_process = pi
-0003e6f0: 7065 6c69 6e65 2e6e 6f64 6573 5b22 7265  peline.nodes["re
-0003e700: 6e61 6d65 5f32 225d 2e70 726f 6365 7373  name_2"].process
-0003e710: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
-0003e720: 696e 5f77 696e 646f 772e 7069 7065 6c69  in_window.pipeli
-0003e730: 6e65 5f6d 616e 6167 6572 2e64 6973 706c  ne_manager.displ
-0003e740: 6179 4e6f 6465 5061 7261 6d65 7465 7273  ayNodeParameters
-0003e750: 280a 2020 2020 2020 2020 2020 2020 2272  (.            "r
-0003e760: 656e 616d 655f 3222 2c20 7265 6e61 6d65  ename_2", rename
-0003e770: 5f70 726f 6365 7373 0a20 2020 2020 2020  _process.       
-0003e780: 2029 0a0a 2020 2020 2020 2020 2320 5472   )..        # Tr
-0003e790: 6965 7320 746f 2063 6861 6e67 6520 6974  ies to change it
-0003e7a0: 7320 6e61 6d65 2074 6f20 2272 656e 616d  s name to "renam
-0003e7b0: 655f 3122 2061 6e64 2074 6865 6e20 746f  e_1" and then to
-0003e7c0: 2022 7265 6e61 6d65 5f33 220a 2020 2020   "rename_3".    
-0003e7d0: 2020 2020 6e6f 6465 5f63 7472 6c65 722e      node_ctrler.
-0003e7e0: 7570 6461 7465 5f6e 6f64 655f 6e61 6d65  update_node_name
-0003e7f0: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
-0003e800: 6173 7365 7274 4571 7561 6c28 6e6f 6465  assertEqual(node
-0003e810: 5f63 7472 6c65 722e 6e6f 6465 5f6e 616d  _ctrler.node_nam
-0003e820: 652c 2022 7265 6e61 6d65 5f32 2229 0a20  e, "rename_2"). 
-0003e830: 2020 2020 2020 206e 6f64 655f 6374 726c         node_ctrl
-0003e840: 6572 2e75 7064 6174 655f 6e6f 6465 5f6e  er.update_node_n
-0003e850: 616d 6528 6e65 775f 6e6f 6465 5f6e 616d  ame(new_node_nam
-0003e860: 653d 2272 656e 616d 655f 3122 290a 2020  e="rename_1").  
-0003e870: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0003e880: 7445 7175 616c 286e 6f64 655f 6374 726c  tEqual(node_ctrl
-0003e890: 6572 2e6e 6f64 655f 6e61 6d65 2c20 2272  er.node_name, "r
-0003e8a0: 656e 616d 655f 3222 290a 2020 2020 2020  ename_2").      
-0003e8b0: 2020 6e6f 6465 5f63 7472 6c65 722e 7570    node_ctrler.up
-0003e8c0: 6461 7465 5f6e 6f64 655f 6e61 6d65 286e  date_node_name(n
-0003e8d0: 6577 5f6e 6f64 655f 6e61 6d65 3d22 7265  ew_node_name="re
-0003e8e0: 6e61 6d65 5f33 2229 0a20 2020 2020 2020  name_3").       
-0003e8f0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0003e900: 6c28 6e6f 6465 5f63 7472 6c65 722e 6e6f  l(node_ctrler.no
-0003e910: 6465 5f6e 616d 652c 2022 7265 6e61 6d65  de_name, "rename
-0003e920: 5f33 2229 0a0a 2020 2020 2020 2020 2320  _3")..        # 
-0003e930: 4465 6c65 7465 7320 6e6f 6465 2022 7265  Deletes node "re
-0003e940: 6e61 6d65 5f32 220a 2020 2020 2020 2020  name_2".        
-0003e950: 7070 6c5f 6564 745f 7461 6273 2e67 6574  ppl_edt_tabs.get
-0003e960: 5f63 7572 7265 6e74 5f65 6469 746f 7228  _current_editor(
-0003e970: 292e 6465 6c5f 6e6f 6465 2822 7265 6e61  ).del_node("rena
-0003e980: 6d65 5f33 2229 0a20 2020 2020 2020 2073  me_3").        s
-0003e990: 656c 662e 6173 7365 7274 5261 6973 6573  elf.assertRaises
-0003e9a0: 284b 6579 4572 726f 722c 206c 616d 6264  (KeyError, lambd
-0003e9b0: 613a 2070 6970 656c 696e 652e 6e6f 6465  a: pipeline.node
-0003e9c0: 735b 2272 656e 616d 655f 3322 5d29 0a0a  s["rename_3"])..
-0003e9d0: 2020 2020 2020 2020 2320 4578 706f 7274          # Export
-0003e9e0: 7320 7468 6520 696e 7075 7420 706c 7567  s the input plug
-0003e9f0: 7320 666f 7220 2272 656e 616d 655f 3122  s for "rename_1"
-0003ea00: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
-0003ea10: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
-0003ea20: 745f 6564 6974 6f72 2829 2e63 7572 7265  t_editor().curre
-0003ea30: 6e74 5f6e 6f64 655f 6e61 6d65 203d 2022  nt_node_name = "
-0003ea40: 7265 6e61 6d65 5f31 220a 2020 2020 2020  rename_1".      
-0003ea50: 2020 280a 2020 2020 2020 2020 2020 2020    (.            
-0003ea60: 7070 6c5f 6564 745f 7461 6273 2e67 6574  ppl_edt_tabs.get
-0003ea70: 5f63 7572 7265 6e74 5f65 6469 746f 720a  _current_editor.
-0003ea80: 2020 2020 2020 2020 2928 292e 6578 706f          )().expo
-0003ea90: 7274 5f75 6e63 6f6e 6e65 6374 6564 5f6d  rt_unconnected_m
-0003eaa0: 616e 6461 746f 7279 5f69 6e70 7574 7328  andatory_inputs(
-0003eab0: 290a 2020 2020 2020 2020 7070 6c5f 6564  ).        ppl_ed
-0003eac0: 745f 7461 6273 2e67 6574 5f63 7572 7265  t_tabs.get_curre
-0003ead0: 6e74 5f65 6469 746f 7228 292e 6578 706f  nt_editor().expo
-0003eae0: 7274 5f61 6c6c 5f75 6e63 6f6e 6e65 6374  rt_all_unconnect
-0003eaf0: 6564 5f6f 7574 7075 7473 2829 0a0a 2020  ed_outputs()..  
-0003eb00: 2020 2020 2020 2320 4469 7370 6c61 7920        # Display 
-0003eb10: 7061 7261 6d65 7465 7273 206f 6620 7468  parameters of th
-0003eb20: 6520 2269 6e70 7574 7322 206e 6f64 650a  e "inputs" node.
-0003eb30: 2020 2020 2020 2020 696e 7075 745f 7072          input_pr
-0003eb40: 6f63 6573 7320 3d20 7069 7065 6c69 6e65  ocess = pipeline
-0003eb50: 2e6e 6f64 6573 5b22 225d 2e70 726f 6365  .nodes[""].proce
-0003eb60: 7373 0a20 2020 2020 2020 206e 6f64 655f  ss.        node_
-0003eb70: 6374 726c 6572 2e64 6973 706c 6179 5f70  ctrler.display_p
-0003eb80: 6172 616d 6574 6572 7328 0a20 2020 2020  arameters(.     
-0003eb90: 2020 2020 2020 2022 696e 7075 7473 222c         "inputs",
-0003eba0: 2067 6574 5f70 726f 6365 7373 5f69 6e73   get_process_ins
-0003ebb0: 7461 6e63 6528 696e 7075 745f 7072 6f63  tance(input_proc
-0003ebc0: 6573 7329 2c20 7069 7065 6c69 6e65 0a20  ess), pipeline. 
-0003ebd0: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-0003ebe0: 2020 2320 4469 7370 6c61 7920 7468 6520    # Display the 
-0003ebf0: 6669 6c74 6572 206f 6620 7468 6520 2769  filter of the 'i
-0003ec00: 6e5f 6669 6c65 2720 706c 7567 2c20 2269  n_file' plug, "i
-0003ec10: 6e70 7574 7322 206e 6f64 650a 2020 2020  nputs" node.    
-0003ec20: 2020 2020 6e6f 6465 5f63 7472 6c65 722e      node_ctrler.
-0003ec30: 6469 7370 6c61 795f 6669 6c74 6572 280a  display_filter(.
-0003ec40: 2020 2020 2020 2020 2020 2020 2269 6e70              "inp
-0003ec50: 7574 7322 2c20 2269 6e5f 6669 6c65 222c  uts", "in_file",
-0003ec60: 2028 302c 2070 6970 656c 696e 652c 2074   (0, pipeline, t
-0003ec70: 7970 6528 556e 6465 6669 6e65 6429 292c  ype(Undefined)),
-0003ec80: 2069 6e70 7574 5f70 726f 6365 7373 0a20   input_process. 
-0003ec90: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0003eca0: 206e 6f64 655f 6374 726c 6572 2e70 6f70   node_ctrler.pop
-0003ecb0: 5f75 702e 636c 6f73 6528 290a 0a20 2020  _up.close()..   
-0003ecc0: 2020 2020 2023 2053 6574 7320 7468 6520       # Sets the 
-0003ecd0: 7661 6c75 6573 206f 6620 7468 6520 6d61  values of the ma
-0003ece0: 6e64 6174 6f72 7920 706c 7567 730a 2020  ndatory plugs.  
-0003ecf0: 2020 2020 2020 7069 7065 6c69 6e65 2e6e        pipeline.n
-0003ed00: 6f64 6573 5b22 225d 2e73 6574 5f70 6c75  odes[""].set_plu
-0003ed10: 675f 7661 6c75 6528 2269 6e5f 6669 6c65  g_value("in_file
-0003ed20: 222c 2044 4f43 554d 454e 545f 3129 0a20  ", DOCUMENT_1). 
-0003ed30: 2020 2020 2020 2070 6970 656c 696e 652e         pipeline.
-0003ed40: 6e6f 6465 735b 2222 5d2e 7365 745f 706c  nodes[""].set_pl
-0003ed50: 7567 5f76 616c 7565 2822 666f 726d 6174  ug_value("format
-0003ed60: 5f73 7472 696e 6722 2c20 226e 6577 5f66  _string", "new_f
-0003ed70: 696c 652e 6e69 6922 290a 0a20 2020 2020  ile.nii")..     
-0003ed80: 2020 2023 2043 6865 636b 7320 7468 6520     # Checks the 
-0003ed90: 696e 6465 7865 6420 6f66 2069 6e70 7574  indexed of input
-0003eda0: 2061 6e64 206f 7574 7075 7420 706c 7567   and output plug
-0003edb0: 206c 6162 656c 730a 2020 2020 2020 2020   labels.        
-0003edc0: 696e 5f70 6c75 675f 696e 6465 7820 3d20  in_plug_index = 
-0003edd0: 6e6f 6465 5f63 7472 6c65 722e 6765 745f  node_ctrler.get_
-0003ede0: 696e 6465 785f 6672 6f6d 5f70 6c75 675f  index_from_plug_
-0003edf0: 6e61 6d65 2822 696e 5f66 696c 6522 2c20  name("in_file", 
-0003ee00: 2269 6e22 290a 2020 2020 2020 2020 7365  "in").        se
-0003ee10: 6c66 2e61 7373 6572 7445 7175 616c 2869  lf.assertEqual(i
-0003ee20: 6e5f 706c 7567 5f69 6e64 6578 2c20 3129  n_plug_index, 1)
-0003ee30: 0a20 2020 2020 2020 206f 7574 5f70 6c75  .        out_plu
-0003ee40: 675f 696e 6465 7820 3d20 6e6f 6465 5f63  g_index = node_c
-0003ee50: 7472 6c65 722e 6765 745f 696e 6465 785f  trler.get_index_
-0003ee60: 6672 6f6d 5f70 6c75 675f 6e61 6d65 280a  from_plug_name(.
-0003ee70: 2020 2020 2020 2020 2020 2020 225f 6f75              "_ou
-0003ee80: 745f 6669 6c65 222c 2022 6f75 7422 0a20  t_file", "out". 
-0003ee90: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0003eea0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0003eeb0: 6c28 6f75 745f 706c 7567 5f69 6e64 6578  l(out_plug_index
-0003eec0: 2c20 3029 0a0a 2020 2020 2020 2020 2320  , 0)..        # 
-0003eed0: 5472 6965 7320 746f 2075 7064 6174 6520  Tries to update 
-0003eee0: 7468 6520 706c 7567 2076 616c 7565 2077  the plug value w
-0003eef0: 6974 686f 7574 2061 206e 6577 2076 616c  ithout a new val
-0003ef00: 7565 0a20 2020 2020 2020 206e 6f64 655f  ue.        node_
-0003ef10: 6374 726c 6572 2e75 7064 6174 655f 706c  ctrler.update_pl
-0003ef20: 7567 5f76 616c 7565 280a 2020 2020 2020  ug_value(.      
-0003ef30: 2020 2020 2020 2269 6e22 2c20 2269 6e5f        "in", "in_
-0003ef40: 6669 6c65 222c 2070 6970 656c 696e 652c  file", pipeline,
-0003ef50: 2074 7970 6528 556e 6465 6669 6e65 6429   type(Undefined)
-0003ef60: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-0003ef70: 2020 206e 6f64 655f 6374 726c 6572 2e75     node_ctrler.u
-0003ef80: 7064 6174 655f 706c 7567 5f76 616c 7565  pdate_plug_value
-0003ef90: 280a 2020 2020 2020 2020 2020 2020 226f  (.            "o
-0003efa0: 7574 222c 2022 5f6f 7574 5f66 696c 6522  ut", "_out_file"
-0003efb0: 2c20 7069 7065 6c69 6e65 2c20 7479 7065  , pipeline, type
-0003efc0: 2855 6e64 6566 696e 6564 290a 2020 2020  (Undefined).    
-0003efd0: 2020 2020 290a 2020 2020 2020 2020 6e6f      ).        no
-0003efe0: 6465 5f63 7472 6c65 722e 7570 6461 7465  de_ctrler.update
-0003eff0: 5f70 6c75 675f 7661 6c75 6528 0a20 2020  _plug_value(.   
-0003f000: 2020 2020 2020 2020 204e 6f6e 652c 2022           None, "
-0003f010: 696e 5f66 696c 6522 2c20 7069 7065 6c69  in_file", pipeli
-0003f020: 6e65 2c20 7479 7065 2855 6e64 6566 696e  ne, type(Undefin
-0003f030: 6564 290a 2020 2020 2020 2020 290a 0a20  ed).        ).. 
-0003f040: 2020 2020 2020 2023 2054 7269 6573 2074         # Tries t
-0003f050: 6f20 7570 6461 7465 2074 6865 2070 6c75  o update the plu
-0003f060: 6720 7661 6c75 6520 7769 7468 2061 206e  g value with a n
-0003f070: 6577 2076 616c 7565 0a20 2020 2020 2020  ew value.       
-0003f080: 206e 6f64 655f 6374 726c 6572 2e75 7064   node_ctrler.upd
-0003f090: 6174 655f 706c 7567 5f76 616c 7565 280a  ate_plug_value(.
-0003f0a0: 2020 2020 2020 2020 2020 2020 2269 6e22              "in"
-0003f0b0: 2c20 2269 6e5f 6669 6c65 222c 2070 6970  , "in_file", pip
-0003f0c0: 656c 696e 652c 2073 7472 2c20 6e65 775f  eline, str, new_
-0003f0d0: 7661 6c75 653d 226e 6577 5f76 616c 7565  value="new_value
-0003f0e0: 2e6e 6969 220a 2020 2020 2020 2020 290a  .nii".        ).
-0003f0f0: 2020 2020 2020 2020 6e6f 6465 5f63 7472          node_ctr
-0003f100: 6c65 722e 7570 6461 7465 5f70 6c75 675f  ler.update_plug_
-0003f110: 7661 6c75 6528 0a20 2020 2020 2020 2020  value(.         
-0003f120: 2020 2022 6f75 7422 2c20 225f 6f75 745f     "out", "_out_
-0003f130: 6669 6c65 222c 2070 6970 656c 696e 652c  file", pipeline,
-0003f140: 2073 7472 2c20 6e65 775f 7661 6c75 653d   str, new_value=
-0003f150: 226e 6577 5f76 616c 7565 2e6e 6969 220a  "new_value.nii".
-0003f160: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-0003f170: 2020 2023 2052 656c 6561 7365 7320 7468     # Releases th
-0003f180: 6520 7072 6f63 6573 730a 2020 2020 2020  e process.      
-0003f190: 2020 6e6f 6465 5f63 7472 6c65 722e 7265    node_ctrler.re
-0003f1a0: 6c65 6173 655f 7072 6f63 6573 7328 290a  lease_process().
-0003f1b0: 2020 2020 2020 2020 6e6f 6465 5f63 7472          node_ctr
-0003f1c0: 6c65 722e 7570 6461 7465 5f70 6172 616d  ler.update_param
-0003f1d0: 6574 6572 7328 290a 0a20 2020 2020 2020  eters()..       
-0003f1e0: 2023 2053 7769 7463 6865 7320 6261 636b   # Switches back
-0003f1f0: 2074 6f20 6e6f 6465 2063 6f6e 7472 6f6c   to node control
-0003f200: 6c65 7220 5632 2c20 6966 206e 6563 6573  ler V2, if neces
-0003f210: 7361 7279 2028 7265 7475 726e 2074 6f20  sary (return to 
-0003f220: 696e 6974 6961 6c0a 2020 2020 2020 2020  initial.        
-0003f230: 2320 7374 6174 6529 0a20 2020 2020 2020  # state).       
-0003f240: 2063 6f6e 6669 6720 3d20 436f 6e66 6967   config = Config
-0003f250: 2863 6f6e 6669 675f 7061 7468 3d73 656c  (config_path=sel
-0003f260: 662e 636f 6e66 6967 5f70 6174 6829 0a0a  f.config_path)..
-0003f270: 2020 2020 2020 2020 6966 206e 6f74 2063          if not c
-0003f280: 6f6e 7472 6f6c 5631 5f76 6572 3a0a 2020  ontrolV1_ver:.  
-0003f290: 2020 2020 2020 2020 2020 636f 6e66 6967            config
-0003f2a0: 2e73 6574 436f 6e74 726f 6c56 3128 4661  .setControlV1(Fa
-0003f2b0: 6c73 6529 0a0a 2020 2020 6465 6620 7465  lse)..    def te
-0003f2c0: 7374 5f70 6c75 675f 6669 6c74 6572 2873  st_plug_filter(s
-0003f2d0: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
-0003f2e0: 2244 6973 706c 6179 7320 7468 6520 7061  "Displays the pa
-0003f2f0: 7261 6d65 7465 7273 206f 6620 6120 6e6f  rameters of a no
-0003f300: 6465 2c20 6469 7370 6c61 7973 2061 2070  de, displays a p
-0003f310: 6c75 6720 6669 6c74 6572 2061 6e64 0a20  lug filter and. 
-0003f320: 2020 2020 2020 206d 6f64 6966 6965 7320         modifies 
-0003f330: 6974 2e0a 0a20 2020 2020 2020 2054 6573  it...        Tes
-0003f340: 7473 2074 6865 2063 6c61 7373 2050 6c75  ts the class Plu
-0003f350: 6746 696c 7465 7228 2920 7769 7468 696e  gFilter() within
-0003f360: 2074 6865 204e 6f64 6520 436f 6e74 726f   the Node Contro
-0003f370: 6c6c 6572 2056 310a 2020 2020 2020 2020  ller V1.        
-0003f380: 2863 6c61 7373 204e 6f64 6543 6f6e 7472  (class NodeContr
-0003f390: 6f6c 6c65 7228 2929 2e0a 2020 2020 2020  oller())..      
-0003f3a0: 2020 2222 220a 0a20 2020 2020 2020 2063    """..        c
-0003f3b0: 6f6e 6669 6720 3d20 436f 6e66 6967 2863  onfig = Config(c
-0003f3c0: 6f6e 6669 675f 7061 7468 3d73 656c 662e  onfig_path=self.
-0003f3d0: 636f 6e66 6967 5f70 6174 6829 0a20 2020  config_path).   
-0003f3e0: 2020 2020 2063 6f6e 7472 6f6c 5631 5f76       controlV1_v
-0003f3f0: 6572 203d 2063 6f6e 6669 672e 6973 436f  er = config.isCo
-0003f400: 6e74 726f 6c56 3128 290a 0a20 2020 2020  ntrolV1()..     
-0003f410: 2020 2023 2053 7769 7463 6820 746f 2056     # Switch to V
-0003f420: 3120 6e6f 6465 2063 6f6e 7472 6f6c 6c65  1 node controlle
-0003f430: 7220 4755 492c 2069 6620 6e65 6365 7373  r GUI, if necess
-0003f440: 6172 790a 2020 2020 2020 2020 6966 206e  ary.        if n
-0003f450: 6f74 2063 6f6e 7472 6f6c 5631 5f76 6572  ot controlV1_ver
-0003f460: 3a0a 2020 2020 2020 2020 2020 2020 636f  :.            co
-0003f470: 6e66 6967 2e73 6574 436f 6e74 726f 6c56  nfig.setControlV
-0003f480: 3128 5472 7565 290a 2020 2020 2020 2020  1(True).        
-0003f490: 2020 2020 7365 6c66 2e72 6573 7461 7274      self.restart
-0003f4a0: 5f4d 4941 2829 0a0a 2020 2020 2020 2020  _MIA()..        
-0003f4b0: 2320 4f70 656e 7320 7072 6f6a 6563 7420  # Opens project 
-0003f4c0: 3820 616e 6420 7377 6974 6368 6573 2074  8 and switches t
-0003f4d0: 6f20 6974 0a20 2020 2020 2020 2070 726f  o it.        pro
-0003f4e0: 6a65 6374 5f38 5f70 6174 6820 3d20 7365  ject_8_path = se
-0003f4f0: 6c66 2e67 6574 5f6e 6577 5f74 6573 745f  lf.get_new_test_
-0003f500: 7072 6f6a 6563 7428 290a 2020 2020 2020  project().      
-0003f510: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
-0003f520: 6f77 2e73 7769 7463 685f 7072 6f6a 6563  ow.switch_projec
-0003f530: 7428 7072 6f6a 6563 745f 385f 7061 7468  t(project_8_path
-0003f540: 2c20 2270 726f 6a65 6374 5f38 2229 0a0a  , "project_8")..
-0003f550: 2020 2020 2020 2020 2320 4765 7420 7468          # Get th
-0003f560: 6520 3220 6669 7273 7420 646f 6375 6d65  e 2 first docume
-0003f570: 6e74 732f 7265 636f 7264 730a 2020 2020  nts/records.    
-0003f580: 2020 2020 444f 4355 4d45 4e54 5f31 203d      DOCUMENT_1 =
-0003f590: 2028 7365 6c66 2e6d 6169 6e5f 7769 6e64   (self.main_wind
-0003f5a0: 6f77 2e70 726f 6a65 6374 2e73 6573 7369  ow.project.sessi
-0003f5b0: 6f6e 2e67 6574 5f64 6f63 756d 656e 7473  on.get_documents
-0003f5c0: 5f6e 616d 6573 2928 0a20 2020 2020 2020  _names)(.       
-0003f5d0: 2020 2020 2022 6375 7272 656e 7422 0a20       "current". 
-0003f5e0: 2020 2020 2020 2029 5b30 5d0a 2020 2020         )[0].    
-0003f5f0: 2020 2020 444f 4355 4d45 4e54 5f32 203d      DOCUMENT_2 =
-0003f600: 2028 7365 6c66 2e6d 6169 6e5f 7769 6e64   (self.main_wind
-0003f610: 6f77 2e70 726f 6a65 6374 2e73 6573 7369  ow.project.sessi
-0003f620: 6f6e 2e67 6574 5f64 6f63 756d 656e 7473  on.get_documents
-0003f630: 5f6e 616d 6573 2928 0a20 2020 2020 2020  _names)(.       
-0003f640: 2020 2020 2022 6375 7272 656e 7422 0a20       "current". 
-0003f650: 2020 2020 2020 2029 5b31 5d0a 0a20 2020         )[1]..   
-0003f660: 2020 2020 2070 6970 656c 696e 655f 6564       pipeline_ed
-0003f670: 6974 6f72 5f74 6162 7320 3d20 280a 2020  itor_tabs = (.  
-0003f680: 2020 2020 2020 2020 2020 7365 6c66 2e6d            self.m
-0003f690: 6169 6e5f 7769 6e64 6f77 2e70 6970 656c  ain_window.pipel
-0003f6a0: 696e 655f 6d61 6e61 6765 722e 7069 7065  ine_manager.pipe
-0003f6b0: 6c69 6e65 4564 6974 6f72 5461 6273 0a20  lineEditorTabs. 
-0003f6c0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0003f6d0: 206e 6f64 655f 636f 6e74 726f 6c6c 6572   node_controller
-0003f6e0: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
-0003f6f0: 646f 772e 7069 7065 6c69 6e65 5f6d 616e  dow.pipeline_man
-0003f700: 6167 6572 2e6e 6f64 6543 6f6e 7472 6f6c  ager.nodeControl
-0003f710: 6c65 720a 0a20 2020 2020 2020 2023 2041  ler..        # A
-0003f720: 6464 2074 6865 2022 536d 6f6f 7468 2220  dd the "Smooth" 
-0003f730: 7072 6f63 6573 732c 2063 7265 6174 6573  process, creates
-0003f740: 2061 206e 6f64 6520 6361 6c6c 6564 2022   a node called "
-0003f750: 736d 6f6f 7468 5f31 220a 2020 2020 2020  smooth_1".      
-0003f760: 2020 7072 6f63 6573 735f 636c 6173 7320    process_class 
-0003f770: 3d20 536d 6f6f 7468 0a20 2020 2020 2020  = Smooth.       
-0003f780: 2070 6970 656c 696e 655f 6564 6974 6f72   pipeline_editor
-0003f790: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
-0003f7a0: 745f 6564 6974 6f72 2829 2e63 6c69 636b  t_editor().click
-0003f7b0: 5f70 6f73 203d 2051 506f 696e 7428 3435  _pos = QPoint(45
-0003f7c0: 302c 2035 3030 290a 2020 2020 2020 2020  0, 500).        
-0003f7d0: 7069 7065 6c69 6e65 5f65 6469 746f 725f  pipeline_editor_
-0003f7e0: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
-0003f7f0: 5f65 6469 746f 7228 292e 6164 645f 6e61  _editor().add_na
-0003f800: 6d65 645f 7072 6f63 6573 7328 0a20 2020  med_process(.   
-0003f810: 2020 2020 2020 2020 2070 726f 6365 7373           process
-0003f820: 5f63 6c61 7373 0a20 2020 2020 2020 2029  _class.        )
-0003f830: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
-0003f840: 6520 3d20 7069 7065 6c69 6e65 5f65 6469  e = pipeline_edi
-0003f850: 746f 725f 7461 6273 2e67 6574 5f63 7572  tor_tabs.get_cur
-0003f860: 7265 6e74 5f70 6970 656c 696e 6528 290a  rent_pipeline().
-0003f870: 0a20 2020 2020 2020 2023 2045 7870 6f72  .        # Expor
-0003f880: 7473 2074 6865 206d 616e 6461 746f 7279  ts the mandatory
-0003f890: 2070 6c75 6773 0a20 2020 2020 2020 2070   plugs.        p
-0003f8a0: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
-0003f8b0: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
-0003f8c0: 6564 6974 6f72 2829 2e63 7572 7265 6e74  editor().current
-0003f8d0: 5f6e 6f64 655f 6e61 6d65 203d 2028 0a20  _node_name = (. 
-0003f8e0: 2020 2020 2020 2020 2020 2022 736d 6f6f             "smoo
-0003f8f0: 7468 5f31 220a 2020 2020 2020 2020 290a  th_1".        ).
-0003f900: 2020 2020 2020 2020 280a 2020 2020 2020          (.      
-0003f910: 2020 2020 2020 7069 7065 6c69 6e65 5f65        pipeline_e
-0003f920: 6469 746f 725f 7461 6273 2e67 6574 5f63  ditor_tabs.get_c
-0003f930: 7572 7265 6e74 5f65 6469 746f 720a 2020  urrent_editor.  
-0003f940: 2020 2020 2020 2928 292e 6578 706f 7274        )().export
-0003f950: 5f6e 6f64 655f 756e 636f 6e6e 6563 7465  _node_unconnecte
-0003f960: 645f 6d61 6e64 6174 6f72 795f 706c 7567  d_mandatory_plug
-0003f970: 7328 290a 0a20 2020 2020 2020 2023 2044  s()..        # D
-0003f980: 6973 706c 6179 2070 6172 616d 6574 6572  isplay parameter
-0003f990: 7320 6f66 2022 736d 6f6f 7468 5f31 2220  s of "smooth_1" 
-0003f9a0: 6e6f 6465 0a20 2020 2020 2020 2069 6e70  node.        inp
-0003f9b0: 7574 5f70 726f 6365 7373 203d 2070 6970  ut_process = pip
-0003f9c0: 656c 696e 652e 6e6f 6465 735b 2222 5d2e  eline.nodes[""].
-0003f9d0: 7072 6f63 6573 730a 0a20 2020 2020 2020  process..       
-0003f9e0: 206e 6f64 655f 636f 6e74 726f 6c6c 6572   node_controller
-0003f9f0: 2e64 6973 706c 6179 5f70 6172 616d 6574  .display_paramet
-0003fa00: 6572 7328 0a20 2020 2020 2020 2020 2020  ers(.           
-0003fa10: 2022 696e 7075 7473 222c 2067 6574 5f70   "inputs", get_p
-0003fa20: 726f 6365 7373 5f69 6e73 7461 6e63 6528  rocess_instance(
-0003fa30: 696e 7075 745f 7072 6f63 6573 7329 2c20  input_process), 
-0003fa40: 7069 7065 6c69 6e65 0a20 2020 2020 2020  pipeline.       
-0003fa50: 2029 0a0a 2020 2020 2020 2020 2320 4f70   )..        # Op
-0003fa60: 656e 7320 6120 6669 6c74 6572 2066 6f72  ens a filter for
-0003fa70: 2074 6865 2070 6c75 6720 2269 6e5f 6669   the plug "in_fi
-0003fa80: 6c65 7322 2c0a 2020 2020 2020 2020 2320  les",.        # 
-0003fa90: 7769 7468 6f75 7420 226e 6f64 655f 636f  without "node_co
-0003faa0: 6e74 726f 6c6c 6572 2e73 6361 6e73 5f6c  ntroller.scans_l
-0003fab0: 6973 7422 0a20 2020 2020 2020 2070 6172  ist".        par
-0003fac0: 616d 6574 6572 7320 3d20 2830 2c20 7069  ameters = (0, pi
-0003fad0: 7065 6c69 6e65 2c20 7479 7065 2855 6e64  peline, type(Und
-0003fae0: 6566 696e 6564 2929 0a20 2020 2020 2020  efined)).       
-0003faf0: 206e 6f64 655f 636f 6e74 726f 6c6c 6572   node_controller
-0003fb00: 2e64 6973 706c 6179 5f66 696c 7465 7228  .display_filter(
-0003fb10: 0a20 2020 2020 2020 2020 2020 2022 696e  .            "in
-0003fb20: 7075 7473 222c 2022 696e 5f66 696c 6573  puts", "in_files
-0003fb30: 222c 2070 6172 616d 6574 6572 732c 2069  ", parameters, i
-0003fb40: 6e70 7574 5f70 726f 6365 7373 0a20 2020  nput_process.   
-0003fb50: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-0003fb60: 2320 4173 7365 7274 7320 6974 7320 6465  # Asserts its de
-0003fb70: 6661 756c 7420 7661 6c75 650a 2020 2020  fault value.    
-0003fb80: 2020 2020 6e6f 6465 203d 2070 6970 656c      node = pipel
-0003fb90: 696e 652e 6e6f 6465 735b 2222 5d0a 2020  ine.nodes[""].  
-0003fba0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0003fbb0: 7445 7175 616c 2855 6e64 6566 696e 6564  tEqual(Undefined
-0003fbc0: 2c20 6e6f 6465 2e67 6574 5f70 6c75 675f  , node.get_plug_
-0003fbd0: 7661 6c75 6528 2269 6e5f 6669 6c65 7322  value("in_files"
-0003fbe0: 2929 0a0a 2020 2020 2020 2020 2320 4c6f  ))..        # Lo
-0003fbf0: 6f6b 2066 6f72 2022 444f 4355 4d45 4e54  ok for "DOCUMENT
-0003fc00: 5f32 2220 696e 2074 6865 2069 6e70 7574  _2" in the input
-0003fc10: 2064 6f63 756d 656e 7473 0a20 2020 2020   documents.     
-0003fc20: 2020 2070 6c75 675f 6669 6c74 6572 203d     plug_filter =
-0003fc30: 206e 6f64 655f 636f 6e74 726f 6c6c 6572   node_controller
-0003fc40: 2e70 6f70 5f75 700a 2020 2020 2020 2020  .pop_up.        
-0003fc50: 706c 7567 5f66 696c 7465 722e 7365 6172  plug_filter.sear
-0003fc60: 6368 5f73 7472 2844 4f43 554d 454e 545f  ch_str(DOCUMENT_
-0003fc70: 3229 0a20 2020 2020 2020 2069 6e64 6578  2).        index
-0003fc80: 5f44 4f43 554d 454e 545f 3120 3d20 706c  _DOCUMENT_1 = pl
-0003fc90: 7567 5f66 696c 7465 722e 7461 626c 655f  ug_filter.table_
-0003fca0: 6461 7461 2e67 6574 5f73 6361 6e5f 726f  data.get_scan_ro
-0003fcb0: 7728 444f 4355 4d45 4e54 5f31 290a 0a20  w(DOCUMENT_1).. 
-0003fcc0: 2020 2020 2020 2023 2069 6620 2244 4f43         # if "DOC
-0003fcd0: 554d 454e 545f 3122 2069 7320 6869 6464  UMENT_1" is hidd
-0003fce0: 656e 0a20 2020 2020 2020 2073 656c 662e  en.        self.
-0003fcf0: 6173 7365 7274 5472 7565 2870 6c75 675f  assertTrue(plug_
-0003fd00: 6669 6c74 6572 2e74 6162 6c65 5f64 6174  filter.table_dat
-0003fd10: 612e 6973 526f 7748 6964 6465 6e28 696e  a.isRowHidden(in
-0003fd20: 6465 785f 444f 4355 4d45 4e54 5f31 2929  dex_DOCUMENT_1))
-0003fd30: 0a0a 2020 2020 2020 2020 2320 5265 7365  ..        # Rese
-0003fd40: 7473 2074 6865 2073 6561 7263 6820 6261  ts the search ba
-0003fd50: 720a 2020 2020 2020 2020 706c 7567 5f66  r.        plug_f
-0003fd60: 696c 7465 722e 7265 7365 745f 7365 6172  ilter.reset_sear
-0003fd70: 6368 5f62 6172 2829 0a0a 2020 2020 2020  ch_bar()..      
-0003fd80: 2020 2320 6966 2022 444f 4355 4d45 4e54    # if "DOCUMENT
-0003fd90: 5f31 2220 6973 206e 6f74 2068 6964 6465  _1" is not hidde
-0003fda0: 6e0a 2020 2020 2020 2020 7365 6c66 2e61  n.        self.a
-0003fdb0: 7373 6572 7446 616c 7365 2870 6c75 675f  ssertFalse(plug_
-0003fdc0: 6669 6c74 6572 2e74 6162 6c65 5f64 6174  filter.table_dat
-0003fdd0: 612e 6973 526f 7748 6964 6465 6e28 696e  a.isRowHidden(in
-0003fde0: 6465 785f 444f 4355 4d45 4e54 5f31 2929  dex_DOCUMENT_1))
-0003fdf0: 0a0a 2020 2020 2020 2020 2320 5472 6965  ..        # Trie
-0003fe00: 7320 7365 6172 6368 2066 6f72 2061 6e20  s search for an 
-0003fe10: 656d 7074 7920 7374 7269 6e67 0a20 2020  empty string.   
-0003fe20: 2020 2020 2070 6c75 675f 6669 6c74 6572       plug_filter
-0003fe30: 2e73 6561 7263 685f 7374 7228 2222 290a  .search_str("").
-0003fe40: 0a20 2020 2020 2020 2023 2053 6561 7263  .        # Searc
-0003fe50: 6820 666f 7220 2244 4f43 554d 454e 545f  h for "DOCUMENT_
-0003fe60: 3222 2061 6e64 2063 6861 6e67 6573 2074  2" and changes t
-0003fe70: 6167 730a 2020 2020 2020 2020 706c 7567  ags.        plug
-0003fe80: 5f66 696c 7465 722e 7365 6172 6368 5f73  _filter.search_s
-0003fe90: 7472 2844 4f43 554d 454e 545f 3229 0a0a  tr(DOCUMENT_2)..
-0003fea0: 2020 2020 2020 2020 696e 6465 785f 444f          index_DO
-0003feb0: 4355 4d45 4e54 5f32 203d 2070 6c75 675f  CUMENT_2 = plug_
-0003fec0: 6669 6c74 6572 2e74 6162 6c65 5f64 6174  filter.table_dat
-0003fed0: 612e 6765 745f 7363 616e 5f72 6f77 2844  a.get_scan_row(D
-0003fee0: 4f43 554d 454e 545f 3229 0a20 2020 2020  OCUMENT_2).     
-0003fef0: 2020 2070 6c75 675f 6669 6c74 6572 2e74     plug_filter.t
-0003ff00: 6162 6c65 5f64 6174 612e 7365 6c65 6374  able_data.select
-0003ff10: 526f 7728 696e 6465 785f 444f 4355 4d45  Row(index_DOCUME
-0003ff20: 4e54 5f32 290a 0a20 2020 2020 2020 2023  NT_2)..        #
-0003ff30: 2046 4958 4d45 3a20 7765 206e 6565 6420   FIXME: we need 
-0003ff40: 746f 2066 696e 6420 6120 6265 7474 6572  to find a better
-0003ff50: 2077 6179 2074 6f20 696e 7465 7261 6374   way to interact
-0003ff60: 2077 6974 6820 7468 6520 706c 7567 5f66   with the plug_f
-0003ff70: 696c 7465 720a 2020 2020 2020 2020 2320  ilter.        # 
-0003ff80: 2020 2020 2020 206f 626a 6563 7473 2e20         objects. 
-0003ff90: 4174 2074 6865 206d 6f6d 656e 742c 2051  At the moment, Q
-0003ffa0: 5469 6d65 722e 7369 6e67 6c65 5368 6f6f  Timer.singleShoo
-0003ffb0: 7420 646f 6573 206e 6f74 2067 6976 6520  t does not give 
-0003ffc0: 610a 2020 2020 2020 2020 2320 2020 2020  a.        #     
-0003ffd0: 2020 2067 6f6f 6420 7265 7375 6c74 2062     good result b
-0003ffe0: 6563 6175 7365 2069 7420 6973 2061 6e20  ecause it is an 
-0003fff0: 6173 796e 6368 726f 6e6f 7573 2061 6374  asynchronous act
-00040000: 696f 6e20 616e 6420 7765 2063 616e 0a20  ion and we can. 
-00040010: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00040020: 6f62 7365 7276 6520 6d69 7874 7572 6573  observe mixtures
-00040030: 206f 6620 5154 2073 6967 6e61 6c73 2e20   of QT signals. 
-00040040: 5369 6e63 6520 7765 2061 7265 206e 6f74  Since we are not
-00040050: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00040060: 2020 696e 7374 616e 7469 6174 696e 6720    instantiating 
-00040070: 6578 6163 746c 7920 7468 6520 7269 6768  exactly the righ
-00040080: 7420 6f62 6a65 6374 732c 2074 6869 7320  t objects, this 
-00040090: 7265 7375 6c74 7320 696e 2061 0a20 2020  results in a.   
-000400a0: 2020 2020 2023 2020 2020 2020 2020 6d69       #        mi
-000400b0: 7874 7572 6520 6f66 2073 6967 6e61 6c73  xture of signals
-000400c0: 2074 6861 7420 6361 6e20 6372 6173 6820   that can crash 
-000400d0: 7468 6520 6578 6563 7574 696f 6e2e 2043  the execution. C
-000400e0: 7572 7265 6e74 6c79 0a20 2020 2020 2020  urrently.       
-000400f0: 2023 2020 2020 2020 2020 7468 6520 5154   #        the QT
-00040100: 696d 6572 2e73 696e 676c 6553 686f 6f74  imer.singleShoot
-00040110: 2069 7320 7265 6d6f 7665 6420 2874 6869   is removed (thi
-00040120: 7320 7368 6f75 6c64 206e 6f74 2063 6861  s should not cha
-00040130: 6e67 650a 2020 2020 2020 2020 2320 2020  nge.        #   
-00040140: 2020 2020 206d 7563 6820 7468 6520 7465       much the te
-00040150: 7374 2063 6f76 6572 6167 6520 6265 6361  st coverage beca
-00040160: 7573 6520 7468 6520 6f62 6a65 6374 7320  use the objects 
-00040170: 6172 6520 7374 696c 6c20 7573 6564 0a20  are still used. 
-00040180: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00040190: 2875 7064 6174 655f 7461 6773 2c20 7570  (update_tags, up
-000401a0: 6461 7465 5f74 6167 5f74 6f5f 6669 6c74  date_tag_to_filt
-000401b0: 6572 290a 0a20 2020 2020 2020 2070 6c75  er)..        plu
-000401c0: 675f 6669 6c74 6572 2e75 7064 6174 655f  g_filter.update_
-000401d0: 7461 6773 2829 0a0a 2020 2020 2020 2020  tags()..        
-000401e0: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
-000401f0: 0a20 2020 2020 2020 2020 2020 2074 7970  .            typ
-00040200: 6528 706c 7567 5f66 696c 7465 722e 7461  e(plug_filter.ta
-00040210: 626c 655f 6461 7461 2e67 6574 5f74 6167  ble_data.get_tag
-00040220: 5f63 6f6c 756d 6e28 2241 6371 7569 7369  _column("Acquisi
-00040230: 7469 6f6e 4461 7465 2229 290a 2020 2020  tionDate")).    
-00040240: 2020 2020 2020 2020 3d3d 2069 6e74 0a20          == int. 
-00040250: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-00040260: 2020 706c 7567 5f66 696c 7465 722e 7570    plug_filter.up
-00040270: 6461 7465 5f74 6167 5f74 6f5f 6669 6c74  date_tag_to_filt
-00040280: 6572 2829 0a20 2020 2020 2020 2070 6c75  er().        plu
-00040290: 675f 6669 6c74 6572 2e70 7573 685f 6275  g_filter.push_bu
-000402a0: 7474 6f6e 5f74 6167 5f66 696c 7465 722e  tton_tag_filter.
-000402b0: 7365 7454 6578 7428 2246 696c 654e 616d  setText("FileNam
-000402c0: 6522 290a 2020 2020 2020 2020 2320 544f  e").        # TO
-000402d0: 444f 3a20 7365 6c65 6374 2074 6167 2074  DO: select tag t
-000402e0: 6f20 6669 6c74 6572 2077 6974 680a 0a20  o filter with.. 
-000402f0: 2020 2020 2020 2023 2043 6c6f 7365 7320         # Closes 
-00040300: 7468 6520 6669 6c74 6572 2066 6f72 2074  the filter for t
-00040310: 6865 2070 6c75 6720 2269 6e5f 6669 6c65  he plug "in_file
-00040320: 7322 0a20 2020 2020 2020 2070 6c75 675f  s".        plug_
-00040330: 6669 6c74 6572 2e6f 6b5f 636c 6963 6b65  filter.ok_clicke
-00040340: 6428 290a 0a20 2020 2020 2020 2023 2041  d()..        # A
-00040350: 7373 6572 7420 7468 6520 6d6f 6469 6669  ssert the modifi
-00040360: 6564 2076 616c 7565 0a20 2020 2020 2020  ed value.       
-00040370: 2073 656c 662e 6173 7365 7274 496e 280a   self.assertIn(.
-00040380: 2020 2020 2020 2020 2020 2020 7374 7228              str(
-00040390: 5061 7468 2844 4f43 554d 454e 545f 3229  Path(DOCUMENT_2)
-000403a0: 292c 0a20 2020 2020 2020 2020 2020 2073  ),.            s
-000403b0: 7472 2850 6174 6828 6e6f 6465 2e67 6574  tr(Path(node.get
-000403c0: 5f70 6c75 675f 7661 6c75 6528 2269 6e5f  _plug_value("in_
-000403d0: 6669 6c65 7322 295b 305d 2929 2c0a 2020  files")[0])),.  
-000403e0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
-000403f0: 2023 204f 7065 6e73 2061 2066 696c 7465   # Opens a filte
-00040400: 7220 666f 7220 7468 6520 706c 7567 2022  r for the plug "
-00040410: 696e 5f66 696c 6573 222c 206e 6f77 2077  in_files", now w
-00040420: 6974 6820 6120 2273 6361 6e73 5f6c 6973  ith a "scans_lis
-00040430: 7422 0a20 2020 2020 2020 206e 6f64 655f  t".        node_
-00040440: 636f 6e74 726f 6c6c 6572 2e73 6361 6e5f  controller.scan_
-00040450: 6c69 7374 203d 2028 0a20 2020 2020 2020  list = (.       
-00040460: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
-00040470: 696e 646f 772e 7072 6f6a 6563 742e 7365  indow.project.se
-00040480: 7373 696f 6e2e 6765 745f 646f 6375 6d65  ssion.get_docume
-00040490: 6e74 735f 6e61 6d65 730a 2020 2020 2020  nts_names.      
-000404a0: 2020 2928 2263 7572 7265 6e74 2229 0a20    )("current"). 
-000404b0: 2020 2020 2020 206e 6f64 655f 636f 6e74         node_cont
-000404c0: 726f 6c6c 6572 2e64 6973 706c 6179 5f66  roller.display_f
-000404d0: 696c 7465 7228 0a20 2020 2020 2020 2020  ilter(.         
-000404e0: 2020 2022 696e 7075 7473 222c 2022 696e     "inputs", "in
-000404f0: 5f66 696c 6573 222c 2070 6172 616d 6574  _files", paramet
-00040500: 6572 732c 2069 6e70 7574 5f70 726f 6365  ers, input_proce
-00040510: 7373 0a20 2020 2020 2020 2029 0a0a 2020  ss.        )..  
-00040520: 2020 2020 2020 2320 4c6f 6f6b 2066 6f72        # Look for
-00040530: 2073 6f6d 6574 6869 6e67 2074 6861 7420   something that 
-00040540: 646f 6573 206e 6f74 2067 6976 6520 616e  does not give an
-00040550: 7920 6d61 7463 680a 2020 2020 2020 2020  y match.        
-00040560: 706c 7567 5f66 696c 7465 722e 7365 6172  plug_filter.sear
-00040570: 6368 5f73 7472 2822 2140 2322 290a 2020  ch_str("!@#").  
-00040580: 2020 2020 2020 2320 7468 6973 2077 696c        # this wil
-00040590: 6c20 656d 7074 7920 7468 6520 2270 6c75  l empty the "plu
-000405a0: 675f 6669 6c74 6572 2e74 6162 6c65 5f64  g_filter.table_d
-000405b0: 6174 612e 7365 6c65 6374 6564 496e 6465  ata.selectedInde
-000405c0: 7865 7328 2922 0a20 2020 2020 2020 2023  xes()".        #
-000405d0: 2061 6e64 2074 7269 6767 6572 2061 6e20   and trigger an 
-000405e0: 756e 636f 7665 7265 6420 7061 7274 206f  uncovered part o
-000405f0: 6620 2273 6574 5f70 6c75 675f 7661 6c75  f "set_plug_valu
-00040600: 6528 7365 6c66 2922 0a0a 2020 2020 2020  e(self)"..      
-00040610: 2020 706c 7567 5f66 696c 7465 722e 6f6b    plug_filter.ok
-00040620: 5f63 6c69 636b 6564 2829 0a0a 2020 2020  _clicked()..    
-00040630: 2020 2020 2320 5377 6974 6368 6573 2062      # Switches b
-00040640: 6163 6b20 746f 206e 6f64 6520 636f 6e74  ack to node cont
-00040650: 726f 6c6c 6572 2056 322c 2069 6620 6e65  roller V2, if ne
-00040660: 6365 7373 6172 7920 2872 6574 7572 6e20  cessary (return 
-00040670: 746f 2069 6e69 7469 616c 0a20 2020 2020  to initial.     
-00040680: 2020 2023 2073 7461 7465 290a 2020 2020     # state).    
-00040690: 2020 2020 636f 6e66 6967 203d 2043 6f6e      config = Con
-000406a0: 6669 6728 636f 6e66 6967 5f70 6174 683d  fig(config_path=
-000406b0: 7365 6c66 2e63 6f6e 6669 675f 7061 7468  self.config_path
-000406c0: 290a 0a20 2020 2020 2020 2069 6620 6e6f  )..        if no
-000406d0: 7420 636f 6e74 726f 6c56 315f 7665 723a  t controlV1_ver:
-000406e0: 0a20 2020 2020 2020 2020 2020 2063 6f6e  .            con
-000406f0: 6669 672e 7365 7443 6f6e 7472 6f6c 5631  fig.setControlV1
-00040700: 2846 616c 7365 290a 0a20 2020 2064 6566  (False)..    def
-00040710: 2074 6573 745f 7570 6461 7465 5f6e 6f64   test_update_nod
-00040720: 655f 6e61 6d65 2873 656c 6629 3a0a 2020  e_name(self):.  
-00040730: 2020 2020 2020 2222 2244 6973 706c 6179        """Display
-00040740: 7320 7061 7261 6d65 7465 7273 206f 6620  s parameters of 
-00040750: 6120 6e6f 6465 2061 6e64 2075 7064 6174  a node and updat
-00040760: 6573 2069 7473 206e 616d 652e 2222 220a  es its name.""".
-00040770: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
-00040780: 655f 6d61 6e61 6765 7220 3d20 7365 6c66  e_manager = self
-00040790: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 6970  .main_window.pip
-000407a0: 656c 696e 655f 6d61 6e61 6765 720a 2020  eline_manager.  
-000407b0: 2020 2020 2020 7069 7065 6c69 6e65 5f65        pipeline_e
-000407c0: 6469 746f 725f 7461 6273 203d 2070 6970  ditor_tabs = pip
-000407d0: 656c 696e 655f 6d61 6e61 6765 722e 7069  eline_manager.pi
-000407e0: 7065 6c69 6e65 4564 6974 6f72 5461 6273  pelineEditorTabs
-000407f0: 0a0a 2020 2020 2020 2020 2320 4164 6469  ..        # Addi
-00040800: 6e67 2061 2070 726f 6365 7373 203d 3e20  ng a process => 
-00040810: 6372 6561 7465 7320 6120 6e6f 6465 2063  creates a node c
-00040820: 616c 6c65 6420 2273 6d6f 6f74 685f 3122  alled "smooth_1"
-00040830: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
-00040840: 5f63 6c61 7373 203d 2053 6d6f 6f74 680a  _class = Smooth.
-00040850: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
-00040860: 5f65 6469 746f 725f 7461 6273 2e67 6574  _editor_tabs.get
-00040870: 5f63 7572 7265 6e74 5f65 6469 746f 7228  _current_editor(
-00040880: 292e 636c 6963 6b5f 706f 7320 3d20 5150  ).click_pos = QP
-00040890: 6f69 6e74 2834 3530 2c20 3530 3029 0a20  oint(450, 500). 
-000408a0: 2020 2020 2020 2070 6970 656c 696e 655f         pipeline_
-000408b0: 6564 6974 6f72 5f74 6162 732e 6765 745f  editor_tabs.get_
-000408c0: 6375 7272 656e 745f 6564 6974 6f72 2829  current_editor()
-000408d0: 2e61 6464 5f6e 616d 6564 5f70 726f 6365  .add_named_proce
-000408e0: 7373 280a 2020 2020 2020 2020 2020 2020  ss(.            
-000408f0: 7072 6f63 6573 735f 636c 6173 730a 2020  process_class.  
-00040900: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
-00040910: 2023 2044 6973 706c 6179 696e 6720 7468   # Displaying th
-00040920: 6520 736d 6f6f 7468 5f31 206e 6f64 6520  e smooth_1 node 
-00040930: 7061 7261 6d65 7465 7273 0a20 2020 2020  parameters.     
-00040940: 2020 2070 6970 656c 696e 6520 3d20 7069     pipeline = pi
-00040950: 7065 6c69 6e65 5f65 6469 746f 725f 7461  peline_editor_ta
-00040960: 6273 2e67 6574 5f63 7572 7265 6e74 5f70  bs.get_current_p
-00040970: 6970 656c 696e 6528 290a 2020 2020 2020  ipeline().      
-00040980: 2020 7072 6f63 6573 7320 3d20 7069 7065    process = pipe
-00040990: 6c69 6e65 2e6e 6f64 6573 5b22 736d 6f6f  line.nodes["smoo
-000409a0: 7468 5f31 225d 2e70 726f 6365 7373 0a20  th_1"].process. 
-000409b0: 2020 2020 2020 2070 6970 656c 696e 655f         pipeline_
-000409c0: 6d61 6e61 6765 722e 6469 7370 6c61 794e  manager.displayN
-000409d0: 6f64 6550 6172 616d 6574 6572 7328 2273  odeParameters("s
-000409e0: 6d6f 6f74 685f 3122 2c20 7072 6f63 6573  mooth_1", proces
-000409f0: 7329 0a20 2020 2020 2020 206e 6f64 655f  s).        node_
-00040a00: 636f 6e74 726f 6c6c 6572 203d 2070 6970  controller = pip
-00040a10: 656c 696e 655f 6d61 6e61 6765 722e 6e6f  eline_manager.no
-00040a20: 6465 436f 6e74 726f 6c6c 6572 0a0a 2020  deController..  
-00040a30: 2020 2020 2020 2320 4368 616e 6765 2074        # Change t
-00040a40: 6865 206e 6f64 6520 6e61 6d65 2066 726f  he node name fro
-00040a50: 6d20 736d 6f6f 7468 5f31 2074 6f20 736d  m smooth_1 to sm
-00040a60: 6f6f 7468 5f74 6573 742c 2074 6573 7420  ooth_test, test 
-00040a70: 6966 2069 7427 7320 6f6b 0a20 2020 2020  if it's ok.     
-00040a80: 2020 206e 6f64 655f 636f 6e74 726f 6c6c     node_controll
-00040a90: 6572 2e6c 696e 655f 6564 6974 5f6e 6f64  er.line_edit_nod
-00040aa0: 655f 6e61 6d65 2e73 6574 5465 7874 2822  e_name.setText("
-00040ab0: 736d 6f6f 7468 5f74 6573 7422 290a 2020  smooth_test").  
-00040ac0: 2020 2020 2020 6b65 7945 7665 6e74 203d        keyEvent =
-00040ad0: 2051 7447 7569 2e51 4b65 7945 7665 6e74   QtGui.QKeyEvent
-00040ae0: 280a 2020 2020 2020 2020 2020 2020 5145  (.            QE
-00040af0: 7665 6e74 2e4b 6579 5072 6573 732c 2051  vent.KeyPress, Q
-00040b00: 742e 4b65 795f 5265 7475 726e 2c20 5174  t.Key_Return, Qt
-00040b10: 2e4e 6f4d 6f64 6966 6965 720a 2020 2020  .NoModifier.    
-00040b20: 2020 2020 290a 2020 2020 2020 2020 5143      ).        QC
-00040b30: 6f72 6541 7070 6c69 6361 7469 6f6e 2e70  oreApplication.p
-00040b40: 6f73 7445 7665 6e74 280a 2020 2020 2020  ostEvent(.      
-00040b50: 2020 2020 2020 6e6f 6465 5f63 6f6e 7472        node_contr
-00040b60: 6f6c 6c65 722e 6c69 6e65 5f65 6469 745f  oller.line_edit_
-00040b70: 6e6f 6465 5f6e 616d 652c 206b 6579 4576  node_name, keyEv
-00040b80: 656e 740a 2020 2020 2020 2020 290a 2020  ent.        ).  
-00040b90: 2020 2020 2020 5154 6573 742e 7157 6169        QTest.qWai
-00040ba0: 7428 3130 3029 0a20 2020 2020 2020 2073  t(100).        s
-00040bb0: 656c 662e 6173 7365 7274 5472 7565 2822  elf.assertTrue("
-00040bc0: 736d 6f6f 7468 5f74 6573 7422 2069 6e20  smooth_test" in 
-00040bd0: 7069 7065 6c69 6e65 2e6e 6f64 6573 2e6b  pipeline.nodes.k
-00040be0: 6579 7328 2929 0a0a 2020 2020 2020 2020  eys())..        
-00040bf0: 2320 4164 6420 3220 616e 6f74 6865 7220  # Add 2 another 
-00040c00: 536d 6f6f 7468 2070 726f 6365 7373 203d  Smooth process =
-00040c10: 3e20 4372 6561 7465 7320 6e6f 6465 7320  > Creates nodes 
-00040c20: 6361 6c6c 6564 0a20 2020 2020 2020 2023  called.        #
-00040c30: 2073 6d6f 6f74 685f 3120 616e 6420 736d   smooth_1 and sm
-00040c40: 6f6f 7468 5f32 0a20 2020 2020 2020 2070  ooth_2.        p
-00040c50: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
-00040c60: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
-00040c70: 6564 6974 6f72 2829 2e61 6464 5f6e 616d  editor().add_nam
-00040c80: 6564 5f70 726f 6365 7373 280a 2020 2020  ed_process(.    
-00040c90: 2020 2020 2020 2020 7072 6f63 6573 735f          process_
-00040ca0: 636c 6173 730a 2020 2020 2020 2020 290a  class.        ).
-00040cb0: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
-00040cc0: 5f65 6469 746f 725f 7461 6273 2e67 6574  _editor_tabs.get
-00040cd0: 5f63 7572 7265 6e74 5f65 6469 746f 7228  _current_editor(
-00040ce0: 292e 6164 645f 6e61 6d65 645f 7072 6f63  ).add_named_proc
-00040cf0: 6573 7328 0a20 2020 2020 2020 2020 2020  ess(.           
-00040d00: 2070 726f 6365 7373 5f63 6c61 7373 0a20   process_class. 
-00040d10: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-00040d20: 2020 2320 4164 6469 6e67 206c 696e 6b20    # Adding link 
-00040d30: 6265 7477 6565 6e20 736d 6f6f 7468 5f74  between smooth_t
-00040d40: 6573 7420 616e 6420 736d 6f6f 7468 5f31  est and smooth_1
-00040d50: 206e 6f64 6573 0a20 2020 2020 2020 2073   nodes.        s
-00040d60: 6f75 7263 6520 3d20 2822 736d 6f6f 7468  ource = ("smooth
-00040d70: 5f74 6573 7422 2c20 225f 736d 6f6f 7468  _test", "_smooth
-00040d80: 6564 5f66 696c 6573 2229 0a20 2020 2020  ed_files").     
-00040d90: 2020 2064 6573 7420 3d20 2822 736d 6f6f     dest = ("smoo
-00040da0: 7468 5f31 222c 2022 696e 5f66 696c 6573  th_1", "in_files
-00040db0: 2229 0a20 2020 2020 2020 2070 6970 656c  ").        pipel
-00040dc0: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
-00040dd0: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
-00040de0: 6f72 2829 2e61 6464 5f6c 696e 6b28 0a20  or().add_link(. 
-00040df0: 2020 2020 2020 2020 2020 2073 6f75 7263             sourc
-00040e00: 652c 2064 6573 742c 2054 7275 652c 2046  e, dest, True, F
-00040e10: 616c 7365 0a20 2020 2020 2020 2029 0a0a  alse.        )..
-00040e20: 2020 2020 2020 2020 2320 4164 6469 6e67          # Adding
-00040e30: 206c 696e 6b20 6265 7477 6565 6e20 736d   link between sm
-00040e40: 6f6f 7468 5f32 2061 6e64 2073 6d6f 6f74  ooth_2 and smoot
-00040e50: 685f 3120 6e6f 6465 730a 2020 2020 2020  h_1 nodes.      
-00040e60: 2020 736f 7572 6365 203d 2028 2273 6d6f    source = ("smo
-00040e70: 6f74 685f 3122 2c20 225f 736d 6f6f 7468  oth_1", "_smooth
-00040e80: 6564 5f66 696c 6573 2229 0a20 2020 2020  ed_files").     
-00040e90: 2020 2064 6573 7420 3d20 2822 736d 6f6f     dest = ("smoo
-00040ea0: 7468 5f32 222c 2022 696e 5f66 696c 6573  th_2", "in_files
-00040eb0: 2229 0a20 2020 2020 2020 2070 6970 656c  ").        pipel
-00040ec0: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
-00040ed0: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
-00040ee0: 6f72 2829 2e61 6464 5f6c 696e 6b28 0a20  or().add_link(. 
-00040ef0: 2020 2020 2020 2020 2020 2073 6f75 7263             sourc
-00040f00: 652c 2064 6573 742c 2054 7275 652c 2046  e, dest, True, F
-00040f10: 616c 7365 0a20 2020 2020 2020 2029 0a0a  alse.        )..
-00040f20: 2020 2020 2020 2020 2320 4469 7370 6c61          # Displa
-00040f30: 7969 6e67 2074 6865 2073 6d6f 6f74 685f  ying the smooth_
-00040f40: 3120 6e6f 6465 2070 6172 616d 6574 6572  1 node parameter
-00040f50: 730a 2020 2020 2020 2020 7072 6f63 6573  s.        proces
-00040f60: 7320 3d20 7069 7065 6c69 6e65 2e6e 6f64  s = pipeline.nod
-00040f70: 6573 5b22 736d 6f6f 7468 5f31 225d 2e70  es["smooth_1"].p
-00040f80: 726f 6365 7373 0a20 2020 2020 2020 2070  rocess.        p
-00040f90: 6970 656c 696e 655f 6d61 6e61 6765 722e  ipeline_manager.
-00040fa0: 6469 7370 6c61 794e 6f64 6550 6172 616d  displayNodeParam
-00040fb0: 6574 6572 7328 2273 6d6f 6f74 685f 3122  eters("smooth_1"
-00040fc0: 2c20 7072 6f63 6573 7329 0a20 2020 2020  , process).     
-00040fd0: 2020 206e 6f64 655f 636f 6e74 726f 6c6c     node_controll
-00040fe0: 6572 203d 2070 6970 656c 696e 655f 6d61  er = pipeline_ma
-00040ff0: 6e61 6765 722e 6e6f 6465 436f 6e74 726f  nager.nodeContro
-00041000: 6c6c 6572 0a0a 2020 2020 2020 2020 2320  ller..        # 
-00041010: 4368 616e 6765 206e 6f64 6520 6e61 6d65  Change node name
-00041020: 2066 726f 6d20 736d 6f6f 7468 5f31 2074   from smooth_1 t
-00041030: 6f20 736d 6f6f 7468 5f74 6573 742e 0a20  o smooth_test.. 
-00041040: 2020 2020 2020 2023 2054 6869 7320 7368         # This sh
-00041050: 6f75 6c64 206e 6f74 2063 6861 6e67 6520  ould not change 
-00041060: 7468 6520 6e6f 6465 206e 616d 6520 6265  the node name be
-00041070: 6361 7573 6520 7468 6572 6520 6973 2061  cause there is a
-00041080: 6c72 6561 6479 2061 0a20 2020 2020 2020  lready a.       
-00041090: 2023 2022 736d 6f6f 7468 5f74 6573 7422   # "smooth_test"
-000410a0: 2070 726f 6365 7373 2069 6e20 7468 6520   process in the 
-000410b0: 7069 7065 6c69 6e65 2e0a 2020 2020 2020  pipeline..      
-000410c0: 2020 2320 5465 7374 2069 6620 736d 6f6f    # Test if smoo
-000410d0: 7468 5f31 2069 7320 7374 696c 6c20 696e  th_1 is still in
-000410e0: 2074 6865 2070 6970 656c 696e 650a 2020   the pipeline.  
-000410f0: 2020 2020 2020 6e6f 6465 5f63 6f6e 7472        node_contr
-00041100: 6f6c 6c65 722e 6c69 6e65 5f65 6469 745f  oller.line_edit_
-00041110: 6e6f 6465 5f6e 616d 652e 7365 7454 6578  node_name.setTex
-00041120: 7428 2273 6d6f 6f74 685f 7465 7374 2229  t("smooth_test")
-00041130: 0a20 2020 2020 2020 206b 6579 4576 656e  .        keyEven
-00041140: 7420 3d20 5174 4775 692e 514b 6579 4576  t = QtGui.QKeyEv
-00041150: 656e 7428 0a20 2020 2020 2020 2020 2020  ent(.           
-00041160: 2051 4576 656e 742e 4b65 7950 7265 7373   QEvent.KeyPress
-00041170: 2c20 5174 2e4b 6579 5f52 6574 7572 6e2c  , Qt.Key_Return,
-00041180: 2051 742e 4e6f 4d6f 6469 6669 6572 0a20   Qt.NoModifier. 
-00041190: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-000411a0: 2051 436f 7265 4170 706c 6963 6174 696f   QCoreApplicatio
-000411b0: 6e2e 706f 7374 4576 656e 7428 0a20 2020  n.postEvent(.   
-000411c0: 2020 2020 2020 2020 206e 6f64 655f 636f           node_co
-000411d0: 6e74 726f 6c6c 6572 2e6c 696e 655f 6564  ntroller.line_ed
-000411e0: 6974 5f6e 6f64 655f 6e61 6d65 2c20 6b65  it_node_name, ke
-000411f0: 7945 7665 6e74 0a20 2020 2020 2020 2029  yEvent.        )
-00041200: 0a20 2020 2020 2020 2051 5465 7374 2e71  .        QTest.q
-00041210: 5761 6974 2831 3030 290a 2020 2020 2020  Wait(100).      
-00041220: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
-00041230: 6528 2273 6d6f 6f74 685f 3122 2069 6e20  e("smooth_1" in 
-00041240: 7069 7065 6c69 6e65 2e6e 6f64 6573 2e6b  pipeline.nodes.k
-00041250: 6579 7328 2929 0a20 2020 2020 2020 206e  eys()).        n
-00041260: 6f64 655f 636f 6e74 726f 6c6c 6572 2e6c  ode_controller.l
-00041270: 696e 655f 6564 6974 5f6e 6f64 655f 6e61  ine_edit_node_na
-00041280: 6d65 2e73 6574 5465 7874 2822 736d 6f6f  me.setText("smoo
-00041290: 7468 5f74 6573 745f 3222 290a 2020 2020  th_test_2").    
-000412a0: 2020 2020 6b65 7945 7665 6e74 203d 2051      keyEvent = Q
-000412b0: 7447 7569 2e51 4b65 7945 7665 6e74 280a  tGui.QKeyEvent(.
-000412c0: 2020 2020 2020 2020 2020 2020 5145 7665              QEve
-000412d0: 6e74 2e4b 6579 5072 6573 732c 2051 742e  nt.KeyPress, Qt.
-000412e0: 4b65 795f 5265 7475 726e 2c20 5174 2e4e  Key_Return, Qt.N
-000412f0: 6f4d 6f64 6966 6965 720a 2020 2020 2020  oModifier.      
-00041300: 2020 290a 2020 2020 2020 2020 5143 6f72    ).        QCor
-00041310: 6541 7070 6c69 6361 7469 6f6e 2e70 6f73  eApplication.pos
-00041320: 7445 7665 6e74 280a 2020 2020 2020 2020  tEvent(.        
-00041330: 2020 2020 6e6f 6465 5f63 6f6e 7472 6f6c      node_control
-00041340: 6c65 722e 6c69 6e65 5f65 6469 745f 6e6f  ler.line_edit_no
-00041350: 6465 5f6e 616d 652c 206b 6579 4576 656e  de_name, keyEven
-00041360: 740a 2020 2020 2020 2020 290a 2020 2020  t.        ).    
-00041370: 2020 2020 5154 6573 742e 7157 6169 7428      QTest.qWait(
-00041380: 3130 3029 0a20 2020 2020 2020 2073 656c  100).        sel
-00041390: 662e 6173 7365 7274 5472 7565 2822 736d  f.assertTrue("sm
-000413a0: 6f6f 7468 5f74 6573 745f 3222 2069 6e20  ooth_test_2" in 
-000413b0: 7069 7065 6c69 6e65 2e6e 6f64 6573 2e6b  pipeline.nodes.k
-000413c0: 6579 7328 2929 0a0a 2020 2020 2020 2020  eys())..        
-000413d0: 2320 5665 7269 6679 696e 6720 7468 6174  # Verifying that
-000413e0: 2074 6865 2075 7064 6174 6564 206e 6f64   the updated nod
-000413f0: 6520 6861 7320 7468 6520 7361 6d65 206c  e has the same l
-00041400: 696e 6b73 0a20 2020 2020 2020 2073 656c  inks.        sel
-00041410: 662e 6173 7365 7274 4571 7561 6c28 0a20  f.assertEqual(. 
-00041420: 2020 2020 2020 2020 2020 2031 2c0a 2020             1,.  
-00041430: 2020 2020 2020 2020 2020 6c65 6e28 7069            len(pi
-00041440: 7065 6c69 6e65 2e6e 6f64 6573 5b22 736d  peline.nodes["sm
-00041450: 6f6f 7468 5f74 6573 745f 3222 5d2e 706c  ooth_test_2"].pl
-00041460: 7567 735b 2269 6e5f 6669 6c65 7322 5d2e  ugs["in_files"].
-00041470: 6c69 6e6b 735f 6672 6f6d 292c 0a20 2020  links_from),.   
-00041480: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
-00041490: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-000414a0: 0a20 2020 2020 2020 2020 2020 2031 2c0a  .            1,.
-000414b0: 2020 2020 2020 2020 2020 2020 6c65 6e28              len(
-000414c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000414d0: 2070 6970 656c 696e 652e 6e6f 6465 735b   pipeline.nodes[
-000414e0: 2273 6d6f 6f74 685f 7465 7374 5f32 225d  "smooth_test_2"]
-000414f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00041500: 202e 706c 7567 735b 225f 736d 6f6f 7468   .plugs["_smooth
-00041510: 6564 5f66 696c 6573 225d 0a20 2020 2020  ed_files"].     
-00041520: 2020 2020 2020 2020 2020 202e 6c69 6e6b             .link
-00041530: 735f 746f 0a20 2020 2020 2020 2020 2020  s_to.           
-00041540: 2029 2c0a 2020 2020 2020 2020 290a 0a0a   ),.        )...
-00041550: 636c 6173 7320 5465 7374 4d49 414f 7468  class TestMIAOth
-00041560: 6572 7328 5465 7374 4d49 4143 6173 6529  ers(TestMIACase)
-00041570: 3a0a 2020 2020 2222 2254 6573 7473 2066  :.    """Tests f
-00041580: 6f72 206f 7468 6572 2070 6172 7473 206f  or other parts o
-00041590: 6620 7468 6520 4d49 4120 736f 6674 7761  f the MIA softwa
-000415a0: 7265 2074 6861 7420 646f 206e 6f74 2072  re that do not r
-000415b0: 656c 6174 6520 6d75 6368 0a20 2020 2077  elate much.    w
-000415c0: 6974 6820 7468 6520 6f74 6865 7220 636c  ith the other cl
-000415d0: 6173 7365 732e 0a0a 2020 2020 3a43 6f6e  asses...    :Con
-000415e0: 7461 696e 733a 0a20 2020 2020 2020 203a  tains:.        :
-000415f0: 4d65 7468 6f64 3a0a 2020 2020 2020 2020  Method:.        
-00041600: 2020 2020 2d20 7465 7374 5f69 7465 7261      - test_itera
-00041610: 7469 6f6e 5f74 6162 6c65 3a20 706c 6179  tion_table: play
-00041620: 7320 7769 7468 2074 6865 2069 7465 7261  s with the itera
-00041630: 7469 6f6e 2074 6162 6c65 0a20 2020 2020  tion table.     
-00041640: 2020 2020 2020 202d 2074 6573 745f 7072         - test_pr
-00041650: 6f63 6573 735f 6c69 6272 6172 793a 2069  ocess_library: i
-00041660: 6e73 7461 6c6c 2074 6865 2062 7269 636b  nstall the brick
-00041670: 5f74 6573 7420 616e 6420 7468 656e 2072  _test and then r
-00041680: 656d 6f76 6520 6974 0a20 2020 2022 2222  emove it.    """
-00041690: 0a0a 2020 2020 6465 6620 7465 7374 5f69  ..    def test_i
-000416a0: 7465 7261 7469 6f6e 5f74 6162 6c65 2873  teration_table(s
-000416b0: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
-000416c0: 224f 7065 6e73 2061 206e 6577 2070 726f  "Opens a new pro
-000416d0: 6a65 6374 2c20 696e 6974 6961 6c69 7a65  ject, initialize
-000416e0: 7320 7468 6520 7069 7065 6c69 6e65 2069  s the pipeline i
-000416f0: 7465 7261 7469 6f6e 2061 6e64 2063 6861  teration and cha
-00041700: 6e67 6573 0a20 2020 2020 2020 2069 7473  nges.        its
-00041710: 2070 6172 616d 6574 6572 732e 0a0a 2020   parameters...  
-00041720: 2020 2020 2020 2d20 5465 7374 733a 2049        - Tests: I
-00041730: 7465 7261 7469 6f6e 5461 626c 650a 0a20  terationTable.. 
-00041740: 2020 2020 2020 202d 204d 6f63 6b73 3a20         - Mocks: 
-00041750: 7468 6520 6578 6563 7574 696f 6e20 6f66  the execution of
-00041760: 2061 2050 6f70 5570 5365 6c65 6374 5461   a PopUpSelectTa
-00041770: 6743 6f75 6e74 5461 626c 6520 616e 6420  gCountTable and 
-00041780: 6120 5144 6961 6c6f 670a 2020 2020 2020  a QDialog.      
-00041790: 2020 2222 220a 0a20 2020 2020 2020 2070    """..        p
-000417a0: 726f 6a65 6374 5f38 5f70 6174 6820 3d20  roject_8_path = 
-000417b0: 7365 6c66 2e67 6574 5f6e 6577 5f74 6573  self.get_new_tes
-000417c0: 745f 7072 6f6a 6563 7428 290a 2020 2020  t_project().    
-000417d0: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
-000417e0: 6e64 6f77 2e73 7769 7463 685f 7072 6f6a  ndow.switch_proj
-000417f0: 6563 7428 7072 6f6a 6563 745f 385f 7061  ect(project_8_pa
-00041800: 7468 2c20 2270 726f 6a65 6374 5f38 2229  th, "project_8")
-00041810: 0a0a 2020 2020 2020 2020 2320 5365 7473  ..        # Sets
-00041820: 2073 686f 7274 6375 7473 2066 6f72 206f   shortcuts for o
-00041830: 626a 6563 7473 2074 6861 7420 6172 6520  bjects that are 
-00041840: 6f66 7465 6e20 7573 6564 0a20 2020 2020  often used.     
-00041850: 2020 2069 7465 725f 7461 626c 6520 3d20     iter_table = 
-00041860: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00041870: 2e70 6970 656c 696e 655f 6d61 6e61 6765  .pipeline_manage
-00041880: 722e 6974 6572 6174 696f 6e54 6162 6c65  r.iterationTable
-00041890: 0a20 2020 2020 2020 2073 6573 7369 6f6e  .        session
-000418a0: 203d 2069 7465 725f 7461 626c 652e 7072   = iter_table.pr
-000418b0: 6f6a 6563 742e 7365 7373 696f 6e0a 2020  oject.session.  
-000418c0: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
-000418d0: 7220 3d20 7365 6c66 2e6d 6169 6e5f 7769  r = self.main_wi
-000418e0: 6e64 6f77 2e70 6970 656c 696e 655f 6d61  ndow.pipeline_ma
-000418f0: 6e61 6765 720a 2020 2020 2020 2020 7070  nager.        pp
-00041900: 6c5f 6564 6974 6f72 203d 2070 706c 5f6d  l_editor = ppl_m
-00041910: 616e 6167 6572 2e70 6970 656c 696e 6545  anager.pipelineE
-00041920: 6469 746f 7254 6162 732e 6765 745f 6375  ditorTabs.get_cu
-00041930: 7272 656e 745f 6564 6974 6f72 2829 0a0a  rrent_editor()..
-00041940: 2020 2020 2020 2020 2320 4d6f 636b 7320          # Mocks 
-00041950: 7468 6520 6578 6563 7574 696f 6e20 6f66  the execution of
-00041960: 2061 2064 6961 6c6f 6720 626f 7820 746f   a dialog box to
-00041970: 2061 766f 6964 2061 7379 6e63 6872 6f6e   avoid asynchron
-00041980: 6f75 7320 7368 6f74 0a20 2020 2020 2020  ous shot.       
-00041990: 2051 4469 616c 6f67 2e65 7865 635f 203d   QDialog.exec_ =
-000419a0: 204d 6f63 6b28 7265 7475 726e 5f76 616c   Mock(return_val
-000419b0: 7565 3d51 4469 616c 6f67 2e41 6363 6570  ue=QDialog.Accep
-000419c0: 7465 6429 0a0a 2020 2020 2020 2020 2320  ted)..        # 
-000419d0: 416c 6c6f 7773 2066 6f72 2074 6865 2069  Allows for the i
-000419e0: 7465 7261 7469 6f6e 206f 6620 7468 6520  teration of the 
-000419f0: 7069 7065 6c69 6e65 0a20 2020 2020 2020  pipeline.       
-00041a00: 2069 7465 725f 7461 626c 652e 6368 6563   iter_table.chec
-00041a10: 6b5f 626f 785f 6974 6572 6174 652e 7365  k_box_iterate.se
-00041a20: 7443 6865 636b 6564 2854 7275 6529 0a0a  tChecked(True)..
-00041a30: 2020 2020 2020 2020 2320 4164 6473 2061          # Adds a
-00041a40: 2074 6167 2061 6e64 2061 7373 6572 7473   tag and asserts
-00041a50: 2074 6861 7420 6120 7461 6720 6275 7474   that a tag butt
-00041a60: 6f6e 2077 6173 2061 6464 6564 0a20 2020  on was added.   
-00041a70: 2020 2020 2069 7465 725f 7461 626c 652e       iter_table.
-00041a80: 6164 645f 7461 6728 290a 2020 2020 2020  add_tag().      
-00041a90: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00041aa0: 616c 286c 656e 2869 7465 725f 7461 626c  al(len(iter_tabl
-00041ab0: 652e 7075 7368 5f62 7574 746f 6e73 292c  e.push_buttons),
-00041ac0: 2033 290a 2020 2020 2020 2020 7365 6c66   3).        self
-00041ad0: 2e61 7373 6572 7445 7175 616c 2869 7465  .assertEqual(ite
-00041ae0: 725f 7461 626c 652e 7075 7368 5f62 7574  r_table.push_but
-00041af0: 746f 6e73 5b2d 315d 2e74 6578 7428 292c  tons[-1].text(),
-00041b00: 2022 5461 6720 6ec2 b033 2229 0a0a 2020   "Tag n..3")..  
-00041b10: 2020 2020 2020 2320 4669 6c6c 2074 6865        # Fill the
-00041b20: 2027 7661 6c75 6573 5f6c 6973 7427 2077   'values_list' w
-00041b30: 6974 6820 7468 6520 7461 6720 7661 6c75  ith the tag valu
-00041b40: 6573 2069 6e20 7468 6520 646f 6375 6d65  es in the docume
-00041b50: 6e74 730a 2020 2020 2020 2020 6974 6572  nts.        iter
-00041b60: 5f74 6162 6c65 2e70 7573 685f 6275 7474  _table.push_butt
-00041b70: 6f6e 735b 325d 2e73 6574 5465 7874 2822  ons[2].setText("
-00041b80: 4261 6e64 5769 6474 6822 290a 2020 2020  BandWidth").    
-00041b90: 2020 2020 6974 6572 5f74 6162 6c65 2e66      iter_table.f
-00041ba0: 696c 6c5f 7661 6c75 6573 2832 290a 2020  ill_values(2).  
-00041bb0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00041bc0: 7454 7275 6528 6c65 6e28 6974 6572 5f74  tTrue(len(iter_t
-00041bd0: 6162 6c65 2e76 616c 7565 735f 6c69 7374  able.values_list
-00041be0: 5b2d 315d 2920 3d3d 2033 290a 2020 2020  [-1]) == 3).    
-00041bf0: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
-00041c00: 7275 6528 7479 7065 2869 7465 725f 7461  rue(type(iter_ta
-00041c10: 626c 652e 7661 6c75 6573 5f6c 6973 745b  ble.values_list[
-00041c20: 2d31 5d5b 305d 2920 3d3d 206c 6973 7429  -1][0]) == list)
-00041c30: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00041c40: 7365 7274 4571 7561 6c28 6974 6572 5f74  sertEqual(iter_t
-00041c50: 6162 6c65 2e76 616c 7565 735f 6c69 7374  able.values_list
-00041c60: 5b2d 315d 5b30 5d2c 205b 3530 3030 302e  [-1][0], [50000.
-00041c70: 305d 290a 0a20 2020 2020 2020 2023 2052  0])..        # R
-00041c80: 656d 6f76 6573 2061 2074 6167 2061 6e64  emoves a tag and
-00041c90: 2061 7373 6572 7473 2074 6861 7420 6120   asserts that a 
-00041ca0: 7461 6720 6275 7474 6f6e 2077 6173 2072  tag button was r
-00041cb0: 656d 6f76 6564 0a20 2020 2020 2020 2069  emoved.        i
-00041cc0: 7465 725f 7461 626c 652e 7265 6d6f 7665  ter_table.remove
-00041cd0: 5f74 6167 2829 0a20 2020 2020 2020 2073  _tag().        s
-00041ce0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00041cf0: 6c65 6e28 6974 6572 5f74 6162 6c65 2e70  len(iter_table.p
-00041d00: 7573 685f 6275 7474 6f6e 7329 2c20 3229  ush_buttons), 2)
-00041d10: 0a0a 2020 2020 2020 2020 2320 4d6f 636b  ..        # Mock
-00041d20: 7320 7468 6520 6578 6563 7574 696f 6e20  s the execution 
-00041d30: 6f66 2027 506f 7055 7053 656c 6563 7454  of 'PopUpSelectT
-00041d40: 6167 436f 756e 7454 6162 6c65 2720 746f  agCountTable' to
-00041d50: 2061 766f 6964 0a20 2020 2020 2020 2023   avoid.        #
-00041d60: 2061 7379 6e63 6872 6f6e 6f75 7320 7368   asynchronous sh
-00041d70: 6f74 0a20 2020 2020 2020 2050 6f70 5570  ot.        PopUp
-00041d80: 5365 6c65 6374 5461 6743 6f75 6e74 5461  SelectTagCountTa
-00041d90: 626c 652e 6578 6563 5f20 3d20 4d6f 636b  ble.exec_ = Mock
-00041da0: 2872 6574 7572 6e5f 7661 6c75 653d 5472  (return_value=Tr
-00041db0: 7565 290a 0a20 2020 2020 2020 2023 2053  ue)..        # S
-00041dc0: 656c 6563 7473 2061 2074 6167 2074 6f20  elects a tag to 
-00041dd0: 6974 6572 6174 6520 6f76 6572 2c20 7465  iterate over, te
-00041de0: 7374 7320 2773 656c 6563 745f 6974 6572  sts 'select_iter
-00041df0: 6174 696f 6e5f 7461 6727 2077 6869 6c65  ation_tag' while
-00041e00: 0a20 2020 2020 2020 2023 206d 6f63 6b69  .        # mocki
-00041e10: 6e67 2061 2027 506f 7055 7053 656c 6563  ng a 'PopUpSelec
-00041e20: 7454 6167 436f 756e 7454 6162 6c65 272e  tTagCountTable'.
-00041e30: 0a20 2020 2020 2020 2023 2044 7565 2074  .        # Due t
-00041e40: 6f20 7468 6520 6162 6f76 6520 6d6f 636b  o the above mock
-00041e50: 2c20 2769 7465 7261 7465 645f 7461 6727  , 'iterated_tag'
-00041e60: 2069 7320 7365 7420 6173 204e 6f6e 650a   is set as None.
-00041e70: 2020 2020 2020 2020 7070 6c5f 6564 6974          ppl_edit
-00041e80: 6f72 2e69 7465 7261 7465 645f 7461 6720  or.iterated_tag 
-00041e90: 3d20 2242 616e 6457 6964 7468 220a 2020  = "BandWidth".  
-00041ea0: 2020 2020 2020 6974 6572 5f74 6162 6c65        iter_table
-00041eb0: 2e73 656c 6563 745f 6974 6572 6174 696f  .select_iteratio
-00041ec0: 6e5f 7461 6728 290a 2020 2020 2020 2020  n_tag().        
-00041ed0: 2320 6974 6572 5f74 6162 6c65 2e63 6f6d  # iter_table.com
-00041ee0: 626f 5f62 6f78 2e63 6c65 6172 2829 0a20  bo_box.clear(). 
-00041ef0: 2020 2020 2020 2023 2069 7465 725f 7461         # iter_ta
-00041f00: 626c 652e 636f 6d62 6f5f 626f 782e 6164  ble.combo_box.ad
-00041f10: 6449 7465 6d73 285b 275b 3530 3030 302e  dItems(['[50000.
-00041f20: 305d 275d 290a 2020 2020 2020 2020 7365  0]']).        se
-00041f30: 6c66 2e61 7373 6572 7449 734e 6f6e 6528  lf.assertIsNone(
-00041f40: 7070 6c5f 6564 6974 6f72 2e69 7465 7261  ppl_editor.itera
-00041f50: 7465 645f 7461 6729 0a0a 2020 2020 2020  ted_tag)..      
-00041f60: 2020 2320 4669 6c74 6572 7320 7468 6520    # Filters the 
-00041f70: 7363 616e 7320 6d61 7463 6869 6e67 2074  scans matching t
-00041f80: 6865 2073 656c 6563 7465 6420 2027 6974  he selected  'it
-00041f90: 6572 6174 6564 5f74 6167 270a 2020 2020  erated_tag'.    
-00041fa0: 2020 2020 2320 5369 6e63 6520 7468 6520      # Since the 
-00041fb0: 6578 6563 7574 696f 6e20 6973 206d 6f63  execution is moc
-00041fc0: 6b65 642c 2027 7461 675f 7661 6c75 6573  ked, 'tag_values
-00041fd0: 5f6c 6973 7427 2062 6563 6f6d 6573 2065  _list' becomes e
-00041fe0: 6d70 7479 0a20 2020 2020 2020 2069 7465  mpty.        ite
-00041ff0: 725f 7461 626c 652e 6669 6c74 6572 5f76  r_table.filter_v
-00042000: 616c 7565 7328 290a 2020 2020 2020 2020  alues().        
-00042010: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
-00042020: 7479 7065 2870 706c 5f65 6469 746f 722e  type(ppl_editor.
-00042030: 7461 675f 7661 6c75 6573 5f6c 6973 7429  tag_values_list)
-00042040: 203d 3d20 6c69 7374 290a 2020 2020 2020   == list).      
-00042050: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
-00042060: 6528 6c65 6e28 7070 6c5f 6564 6974 6f72  e(len(ppl_editor
-00042070: 2e74 6167 5f76 616c 7565 735f 6c69 7374  .tag_values_list
-00042080: 2920 3d3d 2030 290a 0a20 2020 2020 2020  ) == 0)..       
-00042090: 2023 2055 7064 6174 6573 2074 6865 2062   # Updates the b
-000420a0: 7574 746f 6e20 7769 7468 2074 6865 2073  utton with the s
-000420b0: 656c 6563 7465 6420 7461 670a 2020 2020  elected tag.    
-000420c0: 2020 2020 6974 6572 5f74 6162 6c65 2e75      iter_table.u
-000420d0: 7064 6174 655f 7365 6c65 6374 6564 5f74  pdate_selected_t
-000420e0: 6167 2822 4261 6e64 7769 6474 6822 290a  ag("Bandwidth").
-000420f0: 0a20 2020 2020 2020 2023 2053 656c 6563  .        # Selec
-00042100: 7473 2074 6865 2076 6973 7561 6c69 7a65  ts the visualize
-00042110: 6420 7461 670a 2020 2020 2020 2020 6974  d tag.        it
-00042120: 6572 5f74 6162 6c65 2e73 656c 6563 745f  er_table.select_
-00042130: 7669 7375 616c 697a 6564 5f74 6167 2830  visualized_tag(0
-00042140: 290a 0a20 2020 2020 2020 2023 2053 656e  )..        # Sen
-00042150: 6473 2074 6865 2064 6174 6120 6272 6f77  ds the data brow
-00042160: 7365 7220 7363 616e 7320 746f 2074 6865  ser scans to the
-00042170: 2070 6970 656c 696e 6520 6d61 6e61 6765   pipeline manage
-00042180: 7220 616e 6420 7570 6461 7465 7320 7468  r and updates th
-00042190: 650a 2020 2020 2020 2020 2320 6974 6572  e.        # iter
-000421a0: 6174 6564 2074 6167 730a 2020 2020 2020  ated tags.      
-000421b0: 2020 5343 414e 535f 4c49 5354 203d 2069    SCANS_LIST = i
-000421c0: 7465 725f 7461 626c 652e 7072 6f6a 6563  ter_table.projec
-000421d0: 742e 7365 7373 696f 6e2e 6765 745f 646f  t.session.get_do
-000421e0: 6375 6d65 6e74 735f 6e61 6d65 7328 2263  cuments_names("c
-000421f0: 7572 7265 6e74 2229 0a20 2020 2020 2020  urrent").       
-00042200: 2070 706c 5f6d 616e 6167 6572 2e73 6361   ppl_manager.sca
-00042210: 6e5f 6c69 7374 203d 2053 4341 4e53 5f4c  n_list = SCANS_L
-00042220: 4953 540a 2020 2020 2020 2020 6974 6572  IST.        iter
-00042230: 5f74 6162 6c65 2e75 7064 6174 655f 6974  _table.update_it
-00042240: 6572 6174 6564 5f74 6167 2829 0a0a 2020  erated_tag()..  
-00042250: 2020 2020 2020 2320 5570 6461 7465 7320        # Updates 
-00042260: 7468 6520 6974 6572 6174 696f 6e20 7461  the iteration ta
-00042270: 626c 652c 2074 6573 7473 2027 7570 6461  ble, tests 'upda
-00042280: 7465 5f74 6162 6c65 2720 7768 696c 650a  te_table' while.
-00042290: 2020 2020 2020 2020 2320 6d6f 636b 696e          # mockin
-000422a0: 6720 7468 6520 6578 6563 7574 696f 6e20  g the execution 
-000422b0: 6f66 2027 6669 6c74 6572 5f64 6f63 756d  of 'filter_docum
-000422c0: 656e 7473 270a 0a20 2020 2020 2020 2044  ents'..        D
-000422d0: 4f43 5f31 5f4e 414d 4520 3d20 5343 414e  OC_1_NAME = SCAN
-000422e0: 535f 4c49 5354 5b30 5d0a 2020 2020 2020  S_LIST[0].      
-000422f0: 2020 444f 435f 3120 3d20 6974 6572 5f74    DOC_1 = iter_t
-00042300: 6162 6c65 2e70 726f 6a65 6374 2e73 6573  able.project.ses
-00042310: 7369 6f6e 2e67 6574 5f64 6f63 756d 656e  sion.get_documen
-00042320: 7428 2263 7572 7265 6e74 222c 2044 4f43  t("current", DOC
-00042330: 5f31 5f4e 414d 4529 0a0a 2020 2020 2020  _1_NAME)..      
-00042340: 2020 7365 7373 696f 6e2e 6669 6c74 6572    session.filter
-00042350: 5f64 6f63 756d 656e 7473 203d 204d 6f63  _documents = Moc
-00042360: 6b28 7265 7475 726e 5f76 616c 7565 3d5b  k(return_value=[
-00042370: 444f 435f 315d 290a 2020 2020 2020 2020  DOC_1]).        
-00042380: 7070 6c5f 6564 6974 6f72 2e69 7465 7261  ppl_editor.itera
-00042390: 7465 645f 7461 6720 3d20 2242 616e 6457  ted_tag = "BandW
-000423a0: 6964 7468 220a 0a20 2020 2020 2020 2069  idth"..        i
-000423b0: 7465 725f 7461 626c 652e 7570 6461 7465  ter_table.update
-000423c0: 5f74 6162 6c65 2829 0a0a 2020 2020 2020  _table()..      
-000423d0: 2020 2320 4173 7365 7274 7320 7468 6174    # Asserts that
-000423e0: 2074 6865 2069 7465 7261 7469 6f6e 2074   the iteration t
-000423f0: 6162 6c65 2068 6173 206f 6e65 2069 7465  able has one ite
-00042400: 6d0a 2020 2020 2020 2020 7365 6c66 2e61  m.        self.a
-00042410: 7373 6572 7449 734e 6f74 4e6f 6e65 2869  ssertIsNotNone(i
-00042420: 7465 725f 7461 626c 652e 6974 6572 6174  ter_table.iterat
-00042430: 696f 6e5f 7461 626c 652e 6974 656d 2830  ion_table.item(0
-00042440: 2c20 3029 290a 2020 2020 2020 2020 7365  , 0)).        se
-00042450: 6c66 2e61 7373 6572 7449 734e 6f6e 6528  lf.assertIsNone(
-00042460: 6974 6572 5f74 6162 6c65 2e69 7465 7261  iter_table.itera
-00042470: 7469 6f6e 5f74 6162 6c65 2e69 7465 6d28  tion_table.item(
-00042480: 312c 2030 2929 0a0a 2020 2020 6465 6620  1, 0))..    def 
-00042490: 7465 7374 5f70 726f 6365 7373 5f6c 6962  test_process_lib
-000424a0: 7261 7279 2873 656c 6629 3a0a 2020 2020  rary(self):.    
-000424b0: 2020 2020 2222 2249 6e73 6572 7473 2061      """Inserts a
-000424c0: 2072 6f77 2c20 6d69 6d65 7320 616e 6420   row, mimes and 
-000424d0: 6368 616e 6765 7320 7468 6520 6461 7461  changes the data
-000424e0: 2061 6e64 2064 656c 6574 6573 2069 742e   and deletes it.
-000424f0: 0a0a 2020 2020 2020 2020 2d20 5465 7374  ..        - Test
-00042500: 733a 2050 726f 6365 7373 4c69 6272 6172  s: ProcessLibrar
-00042510: 790a 0a20 2020 2020 2020 202d 4d6f 636b  y..        -Mock
-00042520: 733a 0a20 2020 2020 2020 2020 2020 202d  s:.            -
-00042530: 2051 4d65 7373 6167 6542 6f78 2e65 7865   QMessageBox.exe
-00042540: 630a 2020 2020 2020 2020 2020 2020 2d20  c.            - 
-00042550: 514d 6573 7361 6765 426f 782e 7175 6573  QMessageBox.ques
-00042560: 7469 6f6e 0a0a 2020 2020 2020 2020 5468  tion..        Th
-00042570: 6520 7072 6f63 6573 7320 6c69 6272 6172  e process librar
-00042580: 7920 6973 206c 6f63 6174 6564 2061 7420  y is located at 
-00042590: 7468 6520 6c65 6674 2063 6f72 6e65 7220  the left corner 
-000425a0: 6f66 2074 6865 2070 6970 656c 696e 650a  of the pipeline.
-000425b0: 2020 2020 2020 2020 6d61 6e61 6765 7220          manager 
-000425c0: 7461 622c 2077 6865 7265 2074 6865 206c  tab, where the l
-000425d0: 6973 7420 6f66 2061 7661 696c 6162 6c65  ist of available
-000425e0: 2062 7269 636b 7320 6973 2073 686f 776e   bricks is shown
-000425f0: 2e0a 2020 2020 2020 2020 2222 220a 0a20  ..        """.. 
-00042600: 2020 2020 2020 2023 2053 6574 7320 7368         # Sets sh
-00042610: 6f72 7463 7574 7320 666f 7220 6f62 6a65  ortcuts for obje
-00042620: 6374 7320 7468 6174 2061 7265 206f 6674  cts that are oft
-00042630: 656e 2075 7365 640a 2020 2020 2020 2020  en used.        
-00042640: 7070 6c5f 6d61 6e61 6765 7220 3d20 7365  ppl_manager = se
-00042650: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
-00042660: 6970 656c 696e 655f 6d61 6e61 6765 720a  ipeline_manager.
-00042670: 2020 2020 2020 2020 7072 6f63 5f6c 6962          proc_lib
-00042680: 203d 2070 706c 5f6d 616e 6167 6572 2e70   = ppl_manager.p
-00042690: 726f 6365 7373 4c69 6272 6172 792e 7072  rocessLibrary.pr
-000426a0: 6f63 6573 735f 6c69 6272 6172 790a 0a20  ocess_library.. 
-000426b0: 2020 2020 2020 2023 2053 7769 7463 6865         # Switche
-000426c0: 7320 746f 2070 6970 656c 696e 6520 6d61  s to pipeline ma
-000426d0: 6e61 6765 720a 2020 2020 2020 2020 7365  nager.        se
-000426e0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e74  lf.main_window.t
-000426f0: 6162 732e 7365 7443 7572 7265 6e74 496e  abs.setCurrentIn
-00042700: 6465 7828 3229 0a0a 2020 2020 2020 2020  dex(2)..        
-00042710: 2320 4765 7473 2074 6865 2063 6869 6c64  # Gets the child
-00042720: 2063 6f75 6e74 0a20 2020 2020 2020 2063   count.        c
-00042730: 6869 6c64 5f63 6f75 6e74 203d 2070 726f  hild_count = pro
-00042740: 635f 6c69 622e 5f6d 6f64 656c 2e67 6574  c_lib._model.get
-00042750: 4e6f 6465 2851 4d6f 6465 6c49 6e64 6578  Node(QModelIndex
-00042760: 2829 292e 6368 696c 6443 6f75 6e74 2829  ()).childCount()
-00042770: 0a20 2020 2020 2020 2072 6f77 5f64 6174  .        row_dat
-00042780: 6120 3d20 2275 6e74 6974 6c65 6422 202b  a = "untitled" +
-00042790: 2073 7472 2863 6869 6c64 5f63 6f75 6e74   str(child_count
-000427a0: 290a 0a20 2020 2020 2020 2023 2041 6464  )..        # Add
-000427b0: 7320 6120 726f 7720 746f 2074 6865 2070  s a row to the p
-000427c0: 726f 6365 7373 206c 6962 7261 7279 0a20  rocess library. 
-000427d0: 2020 2020 2020 2070 726f 635f 6c69 622e         proc_lib.
-000427e0: 5f6d 6f64 656c 2e69 6e73 6572 7452 6f77  _model.insertRow
-000427f0: 2830 290a 0a20 2020 2020 2020 2023 2047  (0)..        # G
-00042800: 6574 7320 6974 7320 696e 6465 7820 616e  ets its index an
-00042810: 6420 7365 6c65 6374 7320 6974 0a20 2020  d selects it.   
-00042820: 2020 2020 2072 6f77 5f69 6e64 6578 203d       row_index =
-00042830: 2073 656c 662e 6669 6e64 5f69 7465 6d5f   self.find_item_
-00042840: 6279 5f64 6174 6128 7072 6f63 5f6c 6962  by_data(proc_lib
-00042850: 2c20 726f 775f 6461 7461 290a 2020 2020  , row_data).    
-00042860: 2020 2020 7365 6c66 2e61 7373 6572 7449      self.assertI
-00042870: 734e 6f74 4e6f 6e65 2872 6f77 5f69 6e64  sNotNone(row_ind
-00042880: 6578 290a 2020 2020 2020 2020 7072 6f63  ex).        proc
-00042890: 5f6c 6962 2e73 656c 6563 7469 6f6e 4d6f  _lib.selectionMo
-000428a0: 6465 6c28 292e 7365 6c65 6374 280a 2020  del().select(.  
-000428b0: 2020 2020 2020 2020 2020 726f 775f 696e            row_in
-000428c0: 6465 782c 2051 4974 656d 5365 6c65 6374  dex, QItemSelect
-000428d0: 696f 6e4d 6f64 656c 2e53 656c 6563 7443  ionModel.SelectC
-000428e0: 7572 7265 6e74 0a20 2020 2020 2020 2029  urrent.        )
-000428f0: 0a0a 2020 2020 2020 2020 2320 4d69 6d65  ..        # Mime
-00042900: 7320 7468 6520 6461 7461 206f 6620 7468  s the data of th
-00042910: 6520 726f 7720 7769 6467 6574 0a20 2020  e row widget.   
-00042920: 2020 2020 206d 696d 655f 6461 7461 203d       mime_data =
-00042930: 2070 726f 635f 6c69 622e 5f6d 6f64 656c   proc_lib._model
-00042940: 2e6d 696d 6544 6174 6128 5b72 6f77 5f69  .mimeData([row_i
-00042950: 6e64 6578 5d29 0a20 2020 2020 2020 2073  ndex]).        s
-00042960: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00042970: 0a20 2020 2020 2020 2020 2020 206d 696d  .            mim
-00042980: 655f 6461 7461 2e64 6174 6128 2263 6f6d  e_data.data("com
-00042990: 706f 6e65 6e74 2f6e 616d 6522 292e 6461  ponent/name").da
-000429a0: 7461 2829 2c0a 2020 2020 2020 2020 2020  ta(),.          
-000429b0: 2020 6279 7465 7328 726f 775f 6461 7461    bytes(row_data
-000429c0: 2c20 656e 636f 6469 6e67 3d22 7574 662d  , encoding="utf-
-000429d0: 3822 292c 0a20 2020 2020 2020 2029 0a0a  8"),.        )..
-000429e0: 2020 2020 2020 2020 2320 4368 616e 6765          # Change
-000429f0: 7320 7468 6520 6461 7461 206f 6620 7468  s the data of th
-00042a00: 6520 726f 770a 2020 2020 2020 2020 7072  e row.        pr
-00042a10: 6f63 5f6c 6962 2e5f 6d6f 6465 6c2e 7365  oc_lib._model.se
-00042a20: 7444 6174 6128 726f 775f 696e 6465 782c  tData(row_index,
-00042a30: 2022 756e 7469 746c 6564 3130 3122 290a   "untitled101").
-00042a40: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00042a50: 6572 7445 7175 616c 2872 6f77 5f69 6e64  ertEqual(row_ind
-00042a60: 6578 2e64 6174 6128 292c 2022 756e 7469  ex.data(), "unti
-00042a70: 746c 6564 3130 3122 290a 0a20 2020 2020  tled101")..     
-00042a80: 2020 2023 204d 6f63 6b73 2074 6865 2065     # Mocks the e
-00042a90: 7865 6375 7469 6f6e 206f 6620 6120 6469  xecution of a di
-00042aa0: 616c 6f67 2062 6f78 0a20 2020 2020 2020  alog box.       
-00042ab0: 2051 4d65 7373 6167 6542 6f78 2e65 7865   QMessageBox.exe
-00042ac0: 6320 3d20 6c61 6d62 6461 202a 6172 6773  c = lambda *args
-00042ad0: 3a20 4e6f 6e65 0a20 2020 2020 2020 2051  : None.        Q
-00042ae0: 4d65 7373 6167 6542 6f78 2e71 7565 7374  MessageBox.quest
-00042af0: 696f 6e20 3d20 6c61 6d62 6461 202a 6172  ion = lambda *ar
-00042b00: 6773 3a20 514d 6573 7361 6765 426f 782e  gs: QMessageBox.
-00042b10: 5965 730a 0a20 2020 2020 2020 2023 2044  Yes..        # D
-00042b20: 656c 6574 6573 2074 6865 2072 6f77 2062  eletes the row b
-00042b30: 7920 7072 6573 7369 6e67 2074 6865 2064  y pressing the d
-00042b40: 656c 206b 6579 0a20 2020 2020 2020 2065  el key.        e
-00042b50: 7665 6e74 203d 204d 6f63 6b28 290a 2020  vent = Mock().  
-00042b60: 2020 2020 2020 6576 656e 742e 6b65 7920        event.key 
-00042b70: 3d20 6c61 6d62 6461 202a 6172 6773 3a20  = lambda *args: 
-00042b80: 5174 2e4b 6579 5f44 656c 6574 650a 2020  Qt.Key_Delete.  
-00042b90: 2020 2020 2020 7072 6f63 5f6c 6962 2e6b        proc_lib.k
-00042ba0: 6579 5072 6573 7345 7665 6e74 2865 7665  eyPressEvent(eve
-00042bb0: 6e74 290a 0a20 2020 2020 2020 2023 204d  nt)..        # M
-00042bc0: 6f63 6b73 2061 206d 6f75 7365 2070 7265  ocks a mouse pre
-00042bd0: 7373 2065 7665 6e74 206f 6620 7468 6520  ss event of the 
-00042be0: 6669 7273 7420 6974 656d 206f 6620 7468  first item of th
-00042bf0: 6520 7072 6f63 6573 7320 6c69 620a 2020  e process lib.  
-00042c00: 2020 2020 2020 6d6f 7573 655f 6576 656e        mouse_even
-00042c10: 7420 3d20 5174 4775 692e 514d 6f75 7365  t = QtGui.QMouse
-00042c20: 4576 656e 740a 2020 2020 2020 2020 6d6f  Event.        mo
-00042c30: 7573 655f 6576 656e 742e 706f 7320 3d20  use_event.pos = 
-00042c40: 6c61 6d62 6461 202a 6172 6773 3a20 5150  lambda *args: QP
-00042c50: 6f69 6e74 2830 2c20 3029 0a20 2020 2020  oint(0, 0).     
-00042c60: 2020 206d 6f75 7365 5f65 7665 6e74 2e62     mouse_event.b
-00042c70: 7574 746f 6e20 3d20 6c61 6d62 6461 202a  utton = lambda *
-00042c80: 6172 6773 3a20 5174 2e52 6967 6874 4275  args: Qt.RightBu
-00042c90: 7474 6f6e 0a0a 2020 2020 2020 2020 2320  tton..        # 
-00042ca0: 4d6f 636b 7320 7468 6520 7265 7475 726e  Mocks the return
-00042cb0: 2076 616c 7565 206f 6620 276d 6f75 7365   value of 'mouse
-00042cc0: 5072 6573 7345 7665 6e74 270a 2020 2020  PressEvent'.    
-00042cd0: 2020 2020 5154 7265 6556 6965 772e 6d6f      QTreeView.mo
-00042ce0: 7573 6550 7265 7373 4576 656e 7420 3d20  usePressEvent = 
-00042cf0: 6c61 6d62 6461 202a 6172 6773 3a20 5472  lambda *args: Tr
-00042d00: 7565 0a0a 2020 2020 2020 2020 2320 4164  ue..        # Ad
-00042d10: 6473 2061 2072 6f77 2074 6f20 7468 6520  ds a row to the 
-00042d20: 7072 6f63 6573 7320 6c69 6272 6172 790a  process library.
-00042d30: 2020 2020 2020 2020 7072 6f63 5f6c 6962          proc_lib
-00042d40: 2e5f 6d6f 6465 6c2e 696e 7365 7274 526f  ._model.insertRo
-00042d50: 7728 3029 0a0a 2020 2020 2020 2020 2320  w(0)..        # 
-00042d60: 4d6f 636b 7320 7365 6c65 6374 696e 6720  Mocks selecting 
-00042d70: 2744 656c 6574 6520 7061 636b 6167 6527  'Delete package'
-00042d80: 0a20 2020 2020 2020 2051 4d65 6e75 2e65  .        QMenu.e
-00042d90: 7865 635f 203d 206c 616d 6264 6120 2a61  xec_ = lambda *a
-00042da0: 7267 733a 2070 726f 635f 6c69 622e 7265  rgs: proc_lib.re
-00042db0: 6d6f 7665 0a0a 2020 2020 2020 2020 7265  move..        re
-00042dc0: 7320 3d20 7072 6f63 5f6c 6962 2e6d 6f75  s = proc_lib.mou
-00042dd0: 7365 5072 6573 7345 7665 6e74 286d 6f75  sePressEvent(mou
-00042de0: 7365 5f65 7665 6e74 290a 2020 2020 2020  se_event).      
-00042df0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
-00042e00: 6528 7265 7329 0a0a 2020 2020 2020 2020  e(res)..        
-00042e10: 2320 4164 6473 2061 2072 6f77 2074 6f20  # Adds a row to 
-00042e20: 7468 6520 7072 6f63 6573 7320 6c69 6272  the process libr
-00042e30: 6172 790a 2020 2020 2020 2020 7072 6f63  ary.        proc
-00042e40: 5f6c 6962 2e5f 6d6f 6465 6c2e 696e 7365  _lib._model.inse
-00042e50: 7274 526f 7728 3029 0a0a 2020 2020 2020  rtRow(0)..      
-00042e60: 2020 2320 4d6f 636b 7320 7365 6c65 6374    # Mocks select
-00042e70: 696e 6720 2744 656c 6574 6520 7061 636b  ing 'Delete pack
-00042e80: 6167 6527 0a20 2020 2020 2020 2051 4d65  age'.        QMe
-00042e90: 6e75 2e65 7865 635f 203d 206c 616d 6264  nu.exec_ = lambd
-00042ea0: 6120 2a61 7267 733a 2070 726f 635f 6c69  a *args: proc_li
-00042eb0: 622e 6163 7469 6f6e 5f64 656c 6574 650a  b.action_delete.
-00042ec0: 0a20 2020 2020 2020 2070 726f 635f 6c69  .        proc_li
-00042ed0: 622e 6d6f 7573 6550 7265 7373 4576 656e  b.mousePressEven
-00042ee0: 7428 6d6f 7573 655f 6576 656e 7429 0a0a  t(mouse_event)..
-00042ef0: 0a63 6c61 7373 2054 6573 744d 4941 5069  .class TestMIAPi
-00042f00: 7065 6c69 6e65 4564 6974 6f72 2854 6573  pelineEditor(Tes
-00042f10: 744d 4941 4361 7365 293a 0a20 2020 2022  tMIACase):.    "
-00042f20: 2222 5465 7374 7320 666f 7220 7468 6520  ""Tests for the 
-00042f30: 7069 7065 6c69 6e65 2065 6469 746f 722c  pipeline editor,
-00042f40: 2070 6172 7420 6f66 2074 6865 2070 6970   part of the pip
-00042f50: 656c 696e 6520 6d61 6e61 6765 7220 7461  eline manager ta
-00042f60: 622e 0a0a 2020 2020 5465 7374 7320 5069  b...    Tests Pi
-00042f70: 7065 6c69 6e65 4564 6974 6f72 2e0a 0a20  pelineEditor... 
-00042f80: 2020 203a 436f 6e74 6169 6e73 3a0a 2020     :Contains:.  
-00042f90: 2020 2020 2020 3a4d 6574 686f 643a 0a20        :Method:. 
-00042fa0: 2020 2020 2020 2020 2020 202d 2074 6573             - tes
-00042fb0: 745f 6164 645f 7461 623a 2061 6464 7320  t_add_tab: adds 
-00042fc0: 7461 6273 2074 6f20 7468 6520 5069 7065  tabs to the Pipe
-00042fd0: 6c69 6e65 4564 6974 6f72 5461 6273 0a20  lineEditorTabs. 
-00042fe0: 2020 2020 2020 2020 2020 202d 2074 6573             - tes
-00042ff0: 745f 636c 6f73 655f 7461 623a 2063 6c6f  t_close_tab: clo
-00043000: 7365 7320 6120 7461 6220 696e 2074 6865  ses a tab in the
-00043010: 2050 6970 656c 696e 6545 6469 746f 7254   PipelineEditorT
-00043020: 6162 730a 2020 2020 2020 2020 2020 2020  abs.            
-00043030: 2d20 7465 7374 5f64 726f 705f 7072 6f63  - test_drop_proc
-00043040: 6573 733a 2061 6464 7320 6120 4e69 7079  ess: adds a Nipy
-00043050: 7065 2053 504d 2053 6d6f 6f74 6820 7072  pe SPM Smooth pr
-00043060: 6f63 6573 7320 746f 2074 6865 0a20 2020  ocess to the.   
-00043070: 2020 2020 2020 2020 2020 2070 6970 656c             pipel
-00043080: 696e 6520 6564 6974 6f72 0a20 2020 2020  ine editor.     
-00043090: 2020 2020 2020 202d 2074 6573 745f 6578         - test_ex
-000430a0: 706f 7274 5f70 6c75 673a 2065 7870 6f72  port_plug: expor
-000430b0: 7473 2070 6c75 6773 2061 6e64 206d 6f63  ts plugs and moc
-000430c0: 6b73 2064 6961 6c6f 6720 626f 7865 730a  ks dialog boxes.
-000430d0: 2020 2020 2020 2020 2020 2020 2d20 7465              - te
-000430e0: 7374 5f73 6176 655f 7069 7065 6c69 6e65  st_save_pipeline
-000430f0: 3a20 6372 6561 7465 7320 6120 7069 7065  : creates a pipe
-00043100: 6c69 6e65 2061 6e64 2074 7269 6573 2074  line and tries t
-00043110: 6f20 7361 7665 2069 740a 2020 2020 2020  o save it.      
-00043120: 2020 2020 2020 2d20 7465 7374 5f75 7064        - test_upd
-00043130: 6174 655f 706c 7567 5f76 616c 7565 3a20  ate_plug_value: 
-00043140: 6469 7370 6c61 7973 206e 6f64 6520 7061  displays node pa
-00043150: 7261 6d65 7465 7273 2061 6e64 0a20 2020  rameters and.   
-00043160: 2020 2020 2020 2020 2020 2075 7064 6174             updat
-00043170: 6573 2061 2070 6c75 6720 7661 6c75 650a  es a plug value.
-00043180: 2020 2020 2020 2020 2020 2020 2d20 7465              - te
-00043190: 7374 5f7a 5f63 6865 636b 5f6d 6f64 6966  st_z_check_modif
-000431a0: 3a20 6f70 656e 7320 6120 7069 7065 6c69  : opens a pipeli
-000431b0: 6e65 2c20 6d6f 6469 6669 6573 2069 7420  ne, modifies it 
-000431c0: 616e 640a 2020 2020 2020 2020 2020 2020  and.            
-000431d0: 2020 6368 6563 6b20 7468 6520 6d6f 6469    check the modi
-000431e0: 6669 6361 7469 6f6e 730a 2020 2020 2020  fications.      
-000431f0: 2020 2020 2020 2d20 7465 7374 5f7a 5f67        - test_z_g
-00043200: 6574 5f65 6469 746f 723a 2067 6574 7320  et_editor: gets 
-00043210: 7468 6520 696e 7374 616e 6365 206f 6620  the instance of 
-00043220: 616e 2065 6469 746f 720a 2020 2020 2020  an editor.      
-00043230: 2020 2020 2020 2d20 7465 7374 5f7a 5f67        - test_z_g
-00043240: 6574 5f66 696c 656e 616d 653a 2067 6574  et_filename: get
-00043250: 7320 7468 6520 7265 6c61 7469 7665 2070  s the relative p
-00043260: 6174 6820 746f 2061 0a20 2020 2020 2020  ath to a.       
-00043270: 2020 2020 2020 2070 7265 7669 6f75 736c         previousl
-00043280: 7920 7361 7665 6420 7069 7065 6c69 6e65  y saved pipeline
-00043290: 2066 696c 650a 2020 2020 2020 2020 2020   file.          
-000432a0: 2020 2d20 7465 7374 5f7a 5f67 6574 5f69    - test_z_get_i
-000432b0: 6e64 6578 3a20 6765 7473 2074 6865 2069  ndex: gets the i
-000432c0: 6e64 6578 206f 6620 616e 2065 6469 746f  ndex of an edito
-000432d0: 720a 2020 2020 2020 2020 2020 2020 2d20  r.            - 
-000432e0: 7465 7374 5f7a 5f67 6574 5f74 6162 5f6e  test_z_get_tab_n
-000432f0: 616d 653a 2067 6574 7320 7468 6520 7461  ame: gets the ta
-00043300: 6220 6e61 6d65 206f 6620 7468 6520 6564  b name of the ed
-00043310: 6974 6f72 0a20 2020 2020 2020 2020 2020  itor.           
-00043320: 202d 2074 6573 745f 7a5f 6c6f 6164 5f70   - test_z_load_p
-00043330: 6970 656c 696e 653a 206c 6f61 6473 2061  ipeline: loads a
-00043340: 2070 6970 656c 696e 650a 2020 2020 2020   pipeline.      
-00043350: 2020 2020 2020 2d20 7465 7374 5f7a 5f6f        - test_z_o
-00043360: 7065 6e5f 7375 625f 7069 7065 6c69 6e65  pen_sub_pipeline
-00043370: 3a20 6f70 656e 7320 6120 7375 625f 7069  : opens a sub_pi
-00043380: 7065 6c69 6e65 0a20 2020 2020 2020 2020  peline.         
-00043390: 2020 202d 2074 6573 745f 7a5f 7365 745f     - test_z_set_
-000433a0: 6375 7272 656e 745f 6564 6974 6f72 3a20  current_editor: 
-000433b0: 7365 7473 2074 6865 2063 7572 7265 6e74  sets the current
-000433c0: 2065 6469 746f 720a 2020 2020 2020 2020   editor.        
-000433d0: 2020 2020 2d20 7465 7374 5f7a 7a5f 6465      - test_zz_de
-000433e0: 6c5f 7061 636b 3a20 6465 6c65 7465 7320  l_pack: deletes 
-000433f0: 6120 6272 6963 6b20 6372 6561 7465 6420  a brick created 
-00043400: 6475 7269 6e67 2055 5473 0a20 2020 2022  during UTs.    "
-00043410: 2222 0a0a 2020 2020 6465 6620 7465 7374  ""..    def test
-00043420: 5f61 6464 5f74 6162 2873 656c 6629 3a0a  _add_tab(self):.
-00043430: 2020 2020 2020 2020 2222 2241 6464 7320          """Adds 
-00043440: 7461 6273 2074 6f20 7468 6520 5069 7065  tabs to the Pipe
-00043450: 6c69 6e65 4564 6974 6f72 5461 6273 2e22  lineEditorTabs."
-00043460: 2222 0a0a 2020 2020 2020 2020 7069 7065  ""..        pipe
-00043470: 6c69 6e65 5f65 6469 746f 725f 7461 6273  line_editor_tabs
-00043480: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
-00043490: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-000434a0: 772e 7069 7065 6c69 6e65 5f6d 616e 6167  w.pipeline_manag
-000434b0: 6572 2e70 6970 656c 696e 6545 6469 746f  er.pipelineEdito
-000434c0: 7254 6162 730a 2020 2020 2020 2020 290a  rTabs.        ).
-000434d0: 0a20 2020 2020 2020 2023 2041 6464 696e  .        # Addin
-000434e0: 6720 7477 6f20 6e65 7720 7461 6273 0a20  g two new tabs. 
-000434f0: 2020 2020 2020 2070 6970 656c 696e 655f         pipeline_
-00043500: 6564 6974 6f72 5f74 6162 732e 6e65 775f  editor_tabs.new_
-00043510: 7461 6228 290a 2020 2020 2020 2020 7365  tab().        se
-00043520: 6c66 2e61 7373 6572 7445 7175 616c 2870  lf.assertEqual(p
-00043530: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
-00043540: 6162 732e 636f 756e 7428 292c 2033 290a  abs.count(), 3).
-00043550: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00043560: 6572 7445 7175 616c 2870 6970 656c 696e  ertEqual(pipelin
-00043570: 655f 6564 6974 6f72 5f74 6162 732e 7461  e_editor_tabs.ta
-00043580: 6254 6578 7428 3129 2c20 224e 6577 2050  bText(1), "New P
-00043590: 6970 656c 696e 6520 3122 290a 2020 2020  ipeline 1").    
-000435a0: 2020 2020 7069 7065 6c69 6e65 5f65 6469      pipeline_edi
-000435b0: 746f 725f 7461 6273 2e6e 6577 5f74 6162  tor_tabs.new_tab
-000435c0: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
-000435d0: 6173 7365 7274 4571 7561 6c28 7069 7065  assertEqual(pipe
-000435e0: 6c69 6e65 5f65 6469 746f 725f 7461 6273  line_editor_tabs
-000435f0: 2e63 6f75 6e74 2829 2c20 3429 0a20 2020  .count(), 4).   
-00043600: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00043610: 4571 7561 6c28 7069 7065 6c69 6e65 5f65  Equal(pipeline_e
-00043620: 6469 746f 725f 7461 6273 2e74 6162 5465  ditor_tabs.tabTe
-00043630: 7874 2832 292c 2022 4e65 7720 5069 7065  xt(2), "New Pipe
-00043640: 6c69 6e65 2032 2229 0a0a 2020 2020 6465  line 2")..    de
-00043650: 6620 7465 7374 5f63 6c6f 7365 5f74 6162  f test_close_tab
-00043660: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-00043670: 2222 2243 6c6f 7365 7320 6120 7461 6220  """Closes a tab 
-00043680: 696e 2074 6865 2070 6970 656c 696e 6520  in the pipeline 
-00043690: 6564 6974 6f72 2074 6162 732e 0a0a 2020  editor tabs...  
-000436a0: 2020 2020 2020 496e 6469 7265 6374 6c79        Indirectly
-000436b0: 2074 6573 7473 2050 6f70 5570 436c 6f73   tests PopUpClos
-000436c0: 6550 6970 656c 696e 652e 0a0a 2020 2020  ePipeline...    
-000436d0: 2020 2020 2d20 5465 7374 733a 2050 6970      - Tests: Pip
-000436e0: 656c 696e 6545 6469 746f 722e 636c 6f73  elineEditor.clos
-000436f0: 655f 7461 620a 0a20 2020 2020 2020 202d  e_tab..        -
-00043700: 204d 6f63 6b73 3a20 506f 7055 7043 6c6f   Mocks: PopUpClo
-00043710: 7365 5069 7065 6c69 6e65 2e65 7865 630a  sePipeline.exec.
-00043720: 2020 2020 2020 2020 2222 220a 0a20 2020          """..   
-00043730: 2020 2020 2023 2053 6574 7320 7368 6f72       # Sets shor
-00043740: 7463 7574 7320 666f 7220 6f62 6a65 6374  tcuts for object
-00043750: 7320 7468 6174 2061 7265 206f 6674 656e  s that are often
-00043760: 2075 7365 640a 2020 2020 2020 2020 7070   used.        pp
-00043770: 6c5f 6564 745f 7461 6273 203d 2073 656c  l_edt_tabs = sel
-00043780: 662e 6d61 696e 5f77 696e 646f 772e 7069  f.main_window.pi
-00043790: 7065 6c69 6e65 5f6d 616e 6167 6572 2e70  peline_manager.p
-000437a0: 6970 656c 696e 6545 6469 746f 7254 6162  ipelineEditorTab
-000437b0: 730a 0a20 2020 2020 2020 2023 2043 6c6f  s..        # Clo
-000437c0: 7365 7320 616e 2075 6e6d 6f64 6966 6965  ses an unmodifie
-000437d0: 6420 7461 620a 2020 2020 2020 2020 7070  d tab.        pp
-000437e0: 6c5f 6564 745f 7461 6273 2e63 6c6f 7365  l_edt_tabs.close
-000437f0: 5f74 6162 2830 290a 0a20 2020 2020 2020  _tab(0)..       
-00043800: 2023 2041 6464 7320 6120 7072 6f63 6573   # Adds a proces
-00043810: 7320 746f 206d 6f64 6966 7920 7468 6520  s to modify the 
-00043820: 7069 7065 6c69 6e65 0a20 2020 2020 2020  pipeline.       
-00043830: 2070 706c 5f65 6474 5f74 6162 732e 6765   ppl_edt_tabs.ge
-00043840: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
-00043850: 2829 2e63 6c69 636b 5f70 6f73 203d 2051  ().click_pos = Q
-00043860: 506f 696e 7428 3435 302c 2035 3030 290a  Point(450, 500).
-00043870: 2020 2020 2020 2020 7070 6c5f 6564 745f          ppl_edt_
-00043880: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
-00043890: 5f65 6469 746f 7228 292e 6164 645f 6e61  _editor().add_na
-000438a0: 6d65 645f 7072 6f63 6573 7328 5265 6e61  med_process(Rena
-000438b0: 6d65 290a 2020 2020 2020 2020 7365 6c66  me).        self
-000438c0: 2e61 7373 6572 7445 7175 616c 2870 706c  .assertEqual(ppl
-000438d0: 5f65 6474 5f74 6162 732e 7461 6254 6578  _edt_tabs.tabTex
-000438e0: 7428 3029 5b2d 323a 5d2c 2022 202a 2229  t(0)[-2:], " *")
-000438f0: 0a0a 2020 2020 2020 2020 2320 4d6f 636b  ..        # Mock
-00043900: 7320 7468 6520 6578 6563 7574 696f 6e20  s the execution 
-00043910: 6f66 2074 6865 2027 5144 6961 6c6f 6727  of the 'QDialog'
-00043920: 0a20 2020 2020 2020 2023 2049 6e73 7465  .        # Inste
-00043930: 6164 206f 6620 7368 6f77 696e 6720 6974  ad of showing it
-00043940: 2c20 6469 7265 6374 6c79 2063 686f 6f73  , directly choos
-00043950: 6573 2027 7361 7665 5f61 735f 636c 6963  es 'save_as_clic
-00043960: 6b65 6427 0a20 2020 2020 2020 2050 6f70  ked'.        Pop
-00043970: 5570 436c 6f73 6550 6970 656c 696e 652e  UpClosePipeline.
-00043980: 6578 6563 203d 204d 6f63 6b28 0a20 2020  exec = Mock(.   
-00043990: 2020 2020 2020 2020 2073 6964 655f 6566           side_ef
-000439a0: 6665 6374 3d6c 616d 6264 613a 2070 706c  fect=lambda: ppl
-000439b0: 5f65 6474 5f74 6162 732e 706f 705f 7570  _edt_tabs.pop_up
-000439c0: 5f63 6c6f 7365 2e73 6176 655f 6173 5f63  _close.save_as_c
-000439d0: 6c69 636b 6564 2829 0a20 2020 2020 2020  licked().       
-000439e0: 2029 0a20 2020 2020 2020 2070 706c 5f65   ).        ppl_e
-000439f0: 6474 5f74 6162 732e 7361 7665 5f70 6970  dt_tabs.save_pip
-00043a00: 656c 696e 6520 3d20 4d6f 636b 2829 0a0a  eline = Mock()..
-00043a10: 2020 2020 2020 2020 2320 5472 6965 7320          # Tries 
-00043a20: 746f 2063 6c6f 7365 2074 6865 206d 6f64  to close the mod
-00043a30: 6966 6965 6420 7461 6220 616e 6420 7361  ified tab and sa
-00043a40: 7665 7320 7468 6520 7069 7065 6c69 6e65  ves the pipeline
-00043a50: 2061 730a 2020 2020 2020 2020 7070 6c5f   as.        ppl_
-00043a60: 6564 745f 7461 6273 2e63 6c6f 7365 5f74  edt_tabs.close_t
-00043a70: 6162 2830 290a 0a20 2020 2020 2020 2023  ab(0)..        #
-00043a80: 2041 7373 6572 7473 2074 6861 7420 2775   Asserts that 'u
-00043a90: 6e64 6f73 2720 616e 6420 2772 6564 6f73  ndos' and 'redos
-00043aa0: 2720 7765 7265 2064 656c 6574 6564 0a20  ' were deleted. 
-00043ab0: 2020 2020 2020 2065 6469 746f 7220 3d20         editor = 
-00043ac0: 7070 6c5f 6564 745f 7461 6273 2e67 6574  ppl_edt_tabs.get
-00043ad0: 5f65 6469 746f 725f 6279 5f69 6e64 6578  _editor_by_index
-00043ae0: 2830 290a 2020 2020 2020 2020 7769 7468  (0).        with
-00043af0: 2073 656c 662e 6173 7365 7274 5261 6973   self.assertRais
-00043b00: 6573 284b 6579 4572 726f 7229 3a0a 2020  es(KeyError):.  
-00043b10: 2020 2020 2020 2020 2020 7070 6c5f 6564            ppl_ed
-00043b20: 745f 7461 6273 2e75 6e64 6f73 5b65 6469  t_tabs.undos[edi
-00043b30: 746f 725d 0a20 2020 2020 2020 2020 2020  tor].           
-00043b40: 2070 706c 5f65 6474 5f74 6162 732e 7265   ppl_edt_tabs.re
-00043b50: 646f 735b 6564 6974 6f72 5d0a 0a20 2020  dos[editor]..   
-00043b60: 2020 2020 2023 2044 6972 6563 746c 7920       # Directly 
-00043b70: 6368 6f6f 7365 7320 2764 6f5f 6e6f 745f  chooses 'do_not_
-00043b80: 7361 7665 5f63 6c69 636b 6564 270a 2020  save_clicked'.  
-00043b90: 2020 2020 2020 506f 7055 7043 6c6f 7365        PopUpClose
-00043ba0: 5069 7065 6c69 6e65 2e65 7865 6320 3d20  Pipeline.exec = 
-00043bb0: 4d6f 636b 280a 2020 2020 2020 2020 2020  Mock(.          
-00043bc0: 2020 7369 6465 5f65 6666 6563 743d 6c61    side_effect=la
-00043bd0: 6d62 6461 3a20 7070 6c5f 6564 745f 7461  mbda: ppl_edt_ta
-00043be0: 6273 2e70 6f70 5f75 705f 636c 6f73 652e  bs.pop_up_close.
-00043bf0: 646f 5f6e 6f74 5f73 6176 655f 636c 6963  do_not_save_clic
-00043c00: 6b65 6428 290a 2020 2020 2020 2020 290a  ked().        ).
-00043c10: 0a20 2020 2020 2020 2023 2041 6464 7320  .        # Adds 
-00043c20: 6120 6e65 7720 7461 6220 616e 6420 6120  a new tab and a 
-00043c30: 7072 6f63 6573 730a 2020 2020 2020 2020  process.        
-00043c40: 7070 6c5f 6564 745f 7461 6273 2e6e 6577  ppl_edt_tabs.new
-00043c50: 5f74 6162 2829 0a20 2020 2020 2020 2070  _tab().        p
-00043c60: 706c 5f65 6474 5f74 6162 732e 6765 745f  pl_edt_tabs.get_
-00043c70: 6375 7272 656e 745f 6564 6974 6f72 2829  current_editor()
-00043c80: 2e63 6c69 636b 5f70 6f73 203d 2051 506f  .click_pos = QPo
-00043c90: 696e 7428 3435 302c 2035 3030 290a 2020  int(450, 500).  
-00043ca0: 2020 2020 2020 7070 6c5f 6564 745f 7461        ppl_edt_ta
-00043cb0: 6273 2e67 6574 5f63 7572 7265 6e74 5f65  bs.get_current_e
-00043cc0: 6469 746f 7228 292e 6164 645f 6e61 6d65  ditor().add_name
-00043cd0: 645f 7072 6f63 6573 7328 5265 6e61 6d65  d_process(Rename
-00043ce0: 290a 0a20 2020 2020 2020 2023 2054 7269  )..        # Tri
-00043cf0: 6573 2074 6f20 636c 6f73 6520 7468 6520  es to close the 
-00043d00: 6d6f 6469 6669 6564 2074 6162 2061 6e64  modified tab and
-00043d10: 2063 616e 6365 6c73 2073 6176 696e 670a   cancels saving.
-00043d20: 2020 2020 2020 2020 7070 6c5f 6564 745f          ppl_edt_
-00043d30: 7461 6273 2e63 6c6f 7365 5f74 6162 2830  tabs.close_tab(0
-00043d40: 290a 0a20 2020 2020 2020 2023 2044 6972  )..        # Dir
-00043d50: 6563 746c 7920 6368 6f6f 7365 7320 2763  ectly chooses 'c
-00043d60: 616e 6365 6c5f 636c 6963 6b65 6427 0a20  ancel_clicked'. 
-00043d70: 2020 2020 2020 2050 6f70 5570 436c 6f73         PopUpClos
-00043d80: 6550 6970 656c 696e 652e 6578 6563 203d  ePipeline.exec =
-00043d90: 204d 6f63 6b28 0a20 2020 2020 2020 2020   Mock(.         
-00043da0: 2020 2073 6964 655f 6566 6665 6374 3d6c     side_effect=l
-00043db0: 616d 6264 613a 2070 706c 5f65 6474 5f74  ambda: ppl_edt_t
-00043dc0: 6162 732e 706f 705f 7570 5f63 6c6f 7365  abs.pop_up_close
-00043dd0: 2e63 616e 6365 6c5f 636c 6963 6b65 6428  .cancel_clicked(
-00043de0: 290a 2020 2020 2020 2020 290a 0a20 2020  ).        )..   
-00043df0: 2020 2020 2023 2041 6464 7320 6120 7072       # Adds a pr
-00043e00: 6f63 6573 730a 2020 2020 2020 2020 7070  ocess.        pp
-00043e10: 6c5f 6564 745f 7461 6273 2e67 6574 5f63  l_edt_tabs.get_c
-00043e20: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
-00043e30: 636c 6963 6b5f 706f 7320 3d20 5150 6f69  click_pos = QPoi
-00043e40: 6e74 2834 3530 2c20 3530 3029 0a20 2020  nt(450, 500).   
-00043e50: 2020 2020 2070 706c 5f65 6474 5f74 6162       ppl_edt_tab
-00043e60: 732e 6765 745f 6375 7272 656e 745f 6564  s.get_current_ed
-00043e70: 6974 6f72 2829 2e61 6464 5f6e 616d 6564  itor().add_named
-00043e80: 5f70 726f 6365 7373 2852 656e 616d 6529  _process(Rename)
-00043e90: 0a0a 2020 2020 2020 2020 2320 5472 6965  ..        # Trie
-00043ea0: 7320 746f 2063 6c6f 7365 2074 6865 206d  s to close the m
-00043eb0: 6f64 6966 6965 6420 7461 6220 616e 6420  odified tab and 
-00043ec0: 6361 6e63 656c 7320 7361 7669 6e67 0a20  cancels saving. 
-00043ed0: 2020 2020 2020 2070 706c 5f65 6474 5f74         ppl_edt_t
-00043ee0: 6162 732e 636c 6f73 655f 7461 6228 3029  abs.close_tab(0)
-00043ef0: 0a0a 2020 2020 2020 2020 2320 4469 7265  ..        # Dire
-00043f00: 6374 6c79 2063 686f 6f73 6573 2027 6361  ctly chooses 'ca
-00043f10: 6e63 656c 5f63 6c69 636b 6564 270a 2020  ncel_clicked'.  
-00043f20: 2020 2020 2020 506f 7055 7043 6c6f 7365        PopUpClose
-00043f30: 5069 7065 6c69 6e65 2e65 7865 6320 3d20  Pipeline.exec = 
-00043f40: 4d6f 636b 280a 2020 2020 2020 2020 2020  Mock(.          
-00043f50: 2020 7369 6465 5f65 6666 6563 743d 6c61    side_effect=la
-00043f60: 6d62 6461 3a20 7070 6c5f 6564 745f 7461  mbda: ppl_edt_ta
-00043f70: 6273 2e70 6f70 5f75 705f 636c 6f73 652e  bs.pop_up_close.
-00043f80: 6361 6e63 656c 5f63 6c69 636b 6564 2829  cancel_clicked()
-00043f90: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-00043fa0: 2020 2020 2320 4164 6473 2061 206e 6577      # Adds a new
-00043fb0: 2070 726f 6365 7373 0a20 2020 2020 2020   process.       
-00043fc0: 2070 706c 5f65 6474 5f74 6162 732e 6765   ppl_edt_tabs.ge
-00043fd0: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
-00043fe0: 2829 2e63 6c69 636b 5f70 6f73 203d 2051  ().click_pos = Q
-00043ff0: 506f 696e 7428 3435 302c 2035 3030 290a  Point(450, 500).
-00044000: 2020 2020 2020 2020 7070 6c5f 6564 745f          ppl_edt_
-00044010: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
-00044020: 5f65 6469 746f 7228 292e 6164 645f 6e61  _editor().add_na
-00044030: 6d65 645f 7072 6f63 6573 7328 5265 6e61  med_process(Rena
-00044040: 6d65 290a 0a20 2020 2020 2020 2023 2054  me)..        # T
-00044050: 7269 6573 2074 6f20 636c 6f73 6520 7468  ries to close th
-00044060: 6520 6d6f 6469 6669 6564 2074 6162 2061  e modified tab a
-00044070: 6e64 2063 616e 6365 6c73 2073 6176 696e  nd cancels savin
-00044080: 670a 2020 2020 2020 2020 7070 6c5f 6564  g.        ppl_ed
-00044090: 745f 7461 6273 2e63 6c6f 7365 5f74 6162  t_tabs.close_tab
-000440a0: 2830 290a 0a20 2020 2064 6566 2074 6573  (0)..    def tes
-000440b0: 745f 6472 6f70 5f70 726f 6365 7373 2873  t_drop_process(s
-000440c0: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
-000440d0: 2241 6464 7320 6120 4e69 7079 7065 2053  "Adds a Nipype S
-000440e0: 504d 2773 2053 6d6f 6f74 6820 7072 6f63  PM's Smooth proc
-000440f0: 6573 7320 746f 2074 6865 2070 6970 656c  ess to the pipel
-00044100: 696e 6520 6564 6974 6f72 2e22 2222 0a0a  ine editor."""..
-00044110: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
-00044120: 5f65 6469 746f 725f 7461 6273 203d 2028  _editor_tabs = (
-00044130: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00044140: 662e 6d61 696e 5f77 696e 646f 772e 7069  f.main_window.pi
-00044150: 7065 6c69 6e65 5f6d 616e 6167 6572 2e70  peline_manager.p
-00044160: 6970 656c 696e 6545 6469 746f 7254 6162  ipelineEditorTab
-00044170: 730a 2020 2020 2020 2020 290a 2020 2020  s.        ).    
-00044180: 2020 2020 7365 6c66 2e61 7373 6572 7446      self.assertF
-00044190: 616c 7365 280a 2020 2020 2020 2020 2020  alse(.          
-000441a0: 2020 2273 6d6f 6f74 685f 3122 0a20 2020    "smooth_1".   
-000441b0: 2020 2020 2020 2020 2069 6e20 2870 6970           in (pip
-000441c0: 656c 696e 655f 6564 6974 6f72 5f74 6162  eline_editor_tab
-000441d0: 732e 6765 745f 6375 7272 656e 745f 7069  s.get_current_pi
-000441e0: 7065 6c69 6e65 2928 292e 6e6f 6465 732e  peline)().nodes.
-000441f0: 6b65 7973 2829 0a20 2020 2020 2020 2029  keys().        )
-00044200: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
-00044210: 655f 6564 6974 6f72 5f74 6162 732e 6765  e_editor_tabs.ge
-00044220: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
-00044230: 2829 2e63 6c69 636b 5f70 6f73 203d 2051  ().click_pos = Q
-00044240: 506f 696e 7428 3435 302c 2035 3030 290a  Point(450, 500).
-00044250: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
-00044260: 5f65 6469 746f 725f 7461 6273 2e67 6574  _editor_tabs.get
-00044270: 5f63 7572 7265 6e74 5f65 6469 746f 7228  _current_editor(
-00044280: 292e 6472 6f70 5f70 726f 6365 7373 280a  ).drop_process(.
-00044290: 2020 2020 2020 2020 2020 2020 226e 6970              "nip
-000442a0: 7970 652e 696e 7465 7266 6163 6573 2e73  ype.interfaces.s
-000442b0: 706d 2e53 6d6f 6f74 6822 0a20 2020 2020  pm.Smooth".     
-000442c0: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
-000442d0: 662e 6173 7365 7274 5472 7565 280a 2020  f.assertTrue(.  
-000442e0: 2020 2020 2020 2020 2020 2273 6d6f 6f74            "smoot
-000442f0: 685f 3122 0a20 2020 2020 2020 2020 2020  h_1".           
-00044300: 2069 6e20 2870 6970 656c 696e 655f 6564   in (pipeline_ed
-00044310: 6974 6f72 5f74 6162 732e 6765 745f 6375  itor_tabs.get_cu
-00044320: 7272 656e 745f 7069 7065 6c69 6e65 2928  rrent_pipeline)(
-00044330: 292e 6e6f 6465 732e 6b65 7973 2829 0a20  ).nodes.keys(). 
-00044340: 2020 2020 2020 2029 0a0a 2020 2020 6465         )..    de
-00044350: 6620 7465 7374 5f65 7870 6f72 745f 706c  f test_export_pl
-00044360: 7567 2873 656c 6629 3a0a 2020 2020 2020  ug(self):.      
-00044370: 2020 2222 2241 6464 7320 6120 7072 6f63    """Adds a proc
-00044380: 6573 7320 616e 6420 6578 706f 7274 7320  ess and exports 
-00044390: 706c 7567 7320 696e 2074 6865 2070 6970  plugs in the pip
-000443a0: 656c 696e 6520 6564 6974 6f72 2e0a 0a20  eline editor... 
-000443b0: 2020 2020 2020 202d 5465 7374 733a 2050         -Tests: P
-000443c0: 6970 656c 696e 6545 6469 746f 722e 7465  ipelineEditor.te
-000443d0: 7374 5f65 7870 6f72 745f 706c 7567 0a0a  st_export_plug..
-000443e0: 2020 2020 2020 2020 2d20 4d6f 636b 733a          - Mocks:
-000443f0: 0a20 2020 2020 2020 2020 2020 202d 2051  .            - Q
-00044400: 4d65 7373 6167 6542 6f78 2e71 7565 7374  MessageBox.quest
-00044410: 696f 6e0a 2020 2020 2020 2020 2020 2020  ion.            
-00044420: 2d20 5149 6e70 7574 4469 616c 6f67 2e67  - QInputDialog.g
-00044430: 6574 5465 7874 0a20 2020 2020 2020 2022  etText.        "
-00044440: 2222 0a0a 2020 2020 2020 2020 2320 5365  ""..        # Se
-00044450: 7420 7368 6f72 7463 7574 7320 666f 7220  t shortcuts for 
-00044460: 6f62 6a65 6374 7320 7468 6174 2061 7265  objects that are
-00044470: 206f 6674 656e 2075 7365 640a 2020 2020   often used.    
-00044480: 2020 2020 7070 6c5f 6564 745f 7461 6273      ppl_edt_tabs
-00044490: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
-000444a0: 646f 772e 7069 7065 6c69 6e65 5f6d 616e  dow.pipeline_man
-000444b0: 6167 6572 2e70 6970 656c 696e 6545 6469  ager.pipelineEdi
-000444c0: 746f 7254 6162 730a 2020 2020 2020 2020  torTabs.        
-000444d0: 7070 6c5f 6564 7420 3d20 7070 6c5f 6564  ppl_edt = ppl_ed
-000444e0: 745f 7461 6273 2e67 6574 5f63 7572 7265  t_tabs.get_curre
-000444f0: 6e74 5f65 6469 746f 7228 290a 0a20 2020  nt_editor()..   
-00044500: 2020 2020 2023 204d 6f63 6b73 2027 5069       # Mocks 'Pi
-00044510: 7065 6c69 6e65 4564 6974 6f72 2720 6174  pelineEditor' at
-00044520: 7472 6962 7574 6573 0a20 2020 2020 2020  tributes.       
-00044530: 2070 706c 5f65 6474 2e5f 7465 6d70 5f70   ppl_edt._temp_p
-00044540: 6c75 675f 6e61 6d65 203d 2028 2222 2c20  lug_name = ("", 
-00044550: 2222 290a 2020 2020 2020 2020 7070 6c5f  "").        ppl_
-00044560: 6564 742e 5f74 656d 705f 706c 7567 203d  edt._temp_plug =
-00044570: 204d 6f63 6b28 290a 2020 2020 2020 2020   Mock().        
-00044580: 7070 6c5f 6564 742e 5f74 656d 705f 706c  ppl_edt._temp_pl
-00044590: 7567 2e6f 7074 696f 6e61 6c20 3d20 4661  ug.optional = Fa
-000445a0: 6c73 650a 0a20 2020 2020 2020 2023 204d  lse..        # M
-000445b0: 6f63 6b73 2074 6865 2065 7865 6375 7469  ocks the executi
-000445c0: 6f6e 206f 6620 6120 706c 7567 2065 6469  on of a plug edi
-000445d0: 7420 6469 616c 6f67 0a20 2020 2020 2020  t dialog.       
-000445e0: 2050 6970 656c 696e 6545 6469 746f 722e   PipelineEditor.
-000445f0: 5f50 6c75 6745 6469 742e 6578 6563 5f20  _PlugEdit.exec_ 
-00044600: 3d20 4d6f 636b 2829 0a0a 2020 2020 2020  = Mock()..      
-00044610: 2020 2320 4578 706f 7274 7320 6120 706c    # Exports a pl
-00044620: 7567 2077 6974 6820 6e6f 2070 6172 616d  ug with no param
-00044630: 6574 6572 730a 2020 2020 2020 2020 7070  eters.        pp
-00044640: 6c5f 6564 742e 5f65 7870 6f72 745f 706c  l_edt._export_pl
-00044650: 7567 2870 6970 656c 696e 655f 7061 7261  ug(pipeline_para
-00044660: 6d65 7465 723d 4661 6c73 652c 2074 656d  meter=False, tem
-00044670: 705f 706c 7567 5f6e 616d 653d 4e6f 6e65  p_plug_name=None
-00044680: 290a 0a20 2020 2020 2020 2050 6970 656c  )..        Pipel
-00044690: 696e 6545 6469 746f 722e 5f50 6c75 6745  ineEditor._PlugE
-000446a0: 6469 742e 6578 6563 5f2e 6173 7365 7274  dit.exec_.assert
-000446b0: 5f63 616c 6c65 645f 6f6e 6365 5f77 6974  _called_once_wit
-000446c0: 6828 290a 0a20 2020 2020 2020 2023 2041  h()..        # A
-000446d0: 6464 7320 6120 5265 6e61 6d65 2070 726f  dds a Rename pro
-000446e0: 6365 7373 6573 2c20 6372 6561 7465 7320  cesses, creates 
-000446f0: 7468 6520 2772 656e 616d 655f 3127 206e  the 'rename_1' n
-00044700: 6f64 650a 2020 2020 2020 2020 7070 6c5f  ode.        ppl_
-00044710: 6564 745f 7461 6273 2e67 6574 5f63 7572  edt_tabs.get_cur
-00044720: 7265 6e74 5f65 6469 746f 7228 292e 636c  rent_editor().cl
-00044730: 6963 6b5f 706f 7320 3d20 5150 6f69 6e74  ick_pos = QPoint
-00044740: 2834 3530 2c20 3530 3029 0a20 2020 2020  (450, 500).     
-00044750: 2020 2070 706c 5f65 6474 5f74 6162 732e     ppl_edt_tabs.
-00044760: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
-00044770: 6f72 2829 2e61 6464 5f6e 616d 6564 5f70  or().add_named_p
-00044780: 726f 6365 7373 2852 656e 616d 6529 0a0a  rocess(Rename)..
-00044790: 2020 2020 2020 2020 2320 4578 706f 7274          # Export
-000447a0: 7320 6120 706c 7567 2076 616c 7565 0a20  s a plug value. 
-000447b0: 2020 2020 2020 2072 6573 203d 2070 706c         res = ppl
-000447c0: 5f65 6474 2e5f 6578 706f 7274 5f70 6c75  _edt._export_plu
-000447d0: 6728 0a20 2020 2020 2020 2020 2020 2074  g(.            t
-000447e0: 656d 705f 706c 7567 5f6e 616d 653d 2822  emp_plug_name=("
-000447f0: 7265 6e61 6d65 5f31 222c 2022 5f6f 7574  rename_1", "_out
-00044800: 5f66 696c 6522 292c 0a20 2020 2020 2020  _file"),.       
-00044810: 2020 2020 2070 6970 656c 696e 655f 7061       pipeline_pa
-00044820: 7261 6d65 7465 723d 225f 6f75 745f 6669  rameter="_out_fi
-00044830: 6c65 222c 0a20 2020 2020 2020 2029 0a0a  le",.        )..
-00044840: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00044850: 6572 7449 734e 6f6e 6528 7265 7329 0a0a  ertIsNone(res)..
-00044860: 2020 2020 2020 2020 2320 4d6f 636b 7320          # Mocks 
-00044870: 2751 4d65 7373 6167 6542 6f78 2e71 7565  'QMessageBox.que
-00044880: 7374 696f 6e27 2074 6f20 636c 6963 6b20  stion' to click 
-00044890: 6163 6365 7074 0a20 2020 2020 2020 2051  accept.        Q
-000448a0: 4d65 7373 6167 6542 6f78 2e71 7565 7374  MessageBox.quest
-000448b0: 696f 6e20 3d20 4d6f 636b 2872 6574 7572  ion = Mock(retur
-000448c0: 6e5f 7661 6c75 653d 514d 6573 7361 6765  n_value=QMessage
-000448d0: 426f 782e 5965 7329 0a0a 2020 2020 2020  Box.Yes)..      
-000448e0: 2020 2320 5472 6965 7320 746f 2065 7870    # Tries to exp
-000448f0: 6f72 7420 7468 6520 7361 6d65 2070 6c75  ort the same plu
-00044900: 6720 7661 6c75 652c 2061 6363 6570 7473  g value, accepts
-00044910: 206f 7665 7277 7269 7469 6e67 2069 740a   overwriting it.
-00044920: 2020 2020 2020 2020 2320 5769 7468 2027          # With '
-00044930: 6d75 6c74 695f 6578 706f 7274 2720 7468  multi_export' th
-00044940: 656e 2074 6865 2074 656d 705f 706c 7567  en the temp_plug
-00044950: 5f76 616c 7565 2077 696c 6c20 6265 2072  _value will be r
-00044960: 6574 7572 6e65 640a 2020 2020 2020 2020  eturned.        
-00044970: 7265 7320 3d20 7070 6c5f 6564 742e 5f65  res = ppl_edt._e
-00044980: 7870 6f72 745f 706c 7567 280a 2020 2020  xport_plug(.    
-00044990: 2020 2020 2020 2020 7465 6d70 5f70 6c75          temp_plu
-000449a0: 675f 6e61 6d65 3d28 2272 656e 616d 655f  g_name=("rename_
-000449b0: 3122 2c20 225f 6f75 745f 6669 6c65 2229  1", "_out_file")
-000449c0: 2c0a 2020 2020 2020 2020 2020 2020 7069  ,.            pi
-000449d0: 7065 6c69 6e65 5f70 6172 616d 6574 6572  peline_parameter
-000449e0: 3d22 5f6f 7574 5f66 696c 6522 2c0a 2020  ="_out_file",.  
-000449f0: 2020 2020 2020 2020 2020 6d75 6c74 695f            multi_
-00044a00: 6578 706f 7274 3d54 7275 652c 0a20 2020  export=True,.   
-00044a10: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-00044a20: 514d 6573 7361 6765 426f 782e 7175 6573  QMessageBox.ques
-00044a30: 7469 6f6e 2e61 7373 6572 745f 6361 6c6c  tion.assert_call
-00044a40: 6564 5f6f 6e63 6528 290a 2020 2020 2020  ed_once().      
-00044a50: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00044a60: 616c 2872 6573 2c20 225f 6f75 745f 6669  al(res, "_out_fi
-00044a70: 6c65 2229 0a0a 2020 2020 2020 2020 2320  le")..        # 
-00044a80: 4d6f 636b 7320 6167 6169 6e20 2751 4d65  Mocks again 'QMe
-00044a90: 7373 6167 6542 6f78 2e71 7565 7374 696f  ssageBox.questio
-00044aa0: 6e27 2074 6f20 636c 6963 6b20 7265 6a65  n' to click reje
-00044ab0: 6374 0a20 2020 2020 2020 2051 4d65 7373  ct.        QMess
-00044ac0: 6167 6542 6f78 2e71 7565 7374 696f 6e20  ageBox.question 
-00044ad0: 3d20 4d6f 636b 2872 6574 7572 6e5f 7661  = Mock(return_va
-00044ae0: 6c75 653d 514d 6573 7361 6765 426f 782e  lue=QMessageBox.
-00044af0: 4e6f 290a 2020 2020 2020 2020 5149 6e70  No).        QInp
-00044b00: 7574 4469 616c 6f67 2e67 6574 5465 7874  utDialog.getText
-00044b10: 203d 204d 6f63 6b28 7265 7475 726e 5f76   = Mock(return_v
-00044b20: 616c 7565 3d28 226e 6577 5f6e 616d 6522  alue=("new_name"
-00044b30: 2c20 5472 7565 2929 0a0a 2020 2020 2020  , True))..      
-00044b40: 2020 2320 4d6f 636b 7320 2765 7870 6f72    # Mocks 'expor
-00044b50: 745f 7061 7261 6d65 7465 7227 2074 6f20  t_parameter' to 
-00044b60: 7468 726f 7720 6120 2754 7261 6974 4572  throw a 'TraitEr
-00044b70: 726f 7227 0a20 2020 2020 2020 2023 2066  ror'.        # f
-00044b80: 726f 6d20 7472 6169 7473 2e61 7069 2069  rom traits.api i
-00044b90: 6d70 6f72 7420 5472 6169 7445 7272 6f72  mport TraitError
-00044ba0: 0a20 2020 2020 2020 2023 2070 706c 5f65  .        # ppl_e
-00044bb0: 6474 2e73 6365 6e65 2e70 6970 656c 696e  dt.scene.pipelin
-00044bc0: 652e 6578 706f 7274 5f70 6172 616d 6574  e.export_paramet
-00044bd0: 6572 203d 204d 6f63 6b28 7369 6465 5f65  er = Mock(side_e
-00044be0: 6666 6563 743d 5472 6169 7445 7272 6f72  ffect=TraitError
-00044bf0: 2829 290a 0a20 2020 2020 2020 2023 2054  ())..        # T
-00044c00: 7269 6573 2074 6f20 6578 706f 7274 2074  ries to export t
-00044c10: 6865 2073 616d 6520 706c 7567 2076 616c  he same plug val
-00044c20: 7565 2c20 6465 6e69 6573 206f 7665 7277  ue, denies overw
-00044c30: 7269 7469 6e67 2069 740a 2020 2020 2020  riting it.      
-00044c40: 2020 7265 7320 3d20 7070 6c5f 6564 742e    res = ppl_edt.
-00044c50: 5f65 7870 6f72 745f 706c 7567 280a 2020  _export_plug(.  
-00044c60: 2020 2020 2020 2020 2020 7465 6d70 5f70            temp_p
-00044c70: 6c75 675f 6e61 6d65 3d28 2272 656e 616d  lug_name=("renam
-00044c80: 655f 3122 2c20 225f 6f75 745f 6669 6c65  e_1", "_out_file
-00044c90: 2229 2c0a 2020 2020 2020 2020 2020 2020  "),.            
-00044ca0: 7069 7065 6c69 6e65 5f70 6172 616d 6574  pipeline_paramet
-00044cb0: 6572 3d22 5f6f 7574 5f66 696c 6522 2c0a  er="_out_file",.
-00044cc0: 2020 2020 2020 2020 2020 2020 6d75 6c74              mult
-00044cd0: 695f 6578 706f 7274 3d54 7275 652c 0a20  i_export=True,. 
-00044ce0: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-00044cf0: 2020 514d 6573 7361 6765 426f 782e 7175    QMessageBox.qu
-00044d00: 6573 7469 6f6e 2e61 7373 6572 745f 6361  estion.assert_ca
-00044d10: 6c6c 6564 5f6f 6e63 6528 290a 2020 2020  lled_once().    
-00044d20: 2020 2020 5149 6e70 7574 4469 616c 6f67      QInputDialog
-00044d30: 2e67 6574 5465 7874 2e61 7373 6572 745f  .getText.assert_
-00044d40: 6361 6c6c 6564 5f6f 6e63 6528 290a 2020  called_once().  
-00044d50: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00044d60: 7445 7175 616c 2872 6573 2c20 225f 6f75  tEqual(res, "_ou
-00044d70: 745f 6669 6c65 2229 0a0a 2020 2020 6465  t_file")..    de
-00044d80: 6620 7465 7374 5f73 6176 655f 7069 7065  f test_save_pipe
-00044d90: 6c69 6e65 2873 656c 6629 3a0a 2020 2020  line(self):.    
-00044da0: 2020 2020 2222 2243 7265 6174 6573 2061      """Creates a
-00044db0: 2070 6970 656c 696e 6520 616e 6420 7472   pipeline and tr
-00044dc0: 6965 7320 746f 2073 6176 6520 6974 2e0a  ies to save it..
-00044dd0: 0a20 2020 2020 2020 202d 2054 6573 7473  .        - Tests
-00044de0: 3a0a 2020 2020 2020 2020 2020 2020 2d20  :.            - 
-00044df0: 5069 7065 6c69 6e65 4564 6974 6f72 2e73  PipelineEditor.s
-00044e00: 6176 655f 7069 7065 6c69 6e65 0a20 2020  ave_pipeline.   
-00044e10: 2020 2020 2020 2020 202d 2050 6970 656c           - Pipel
-00044e20: 696e 6545 6469 746f 7254 6162 732e 7361  ineEditorTabs.sa
-00044e30: 7665 5f70 6970 656c 696e 650a 2020 2020  ve_pipeline.    
-00044e40: 2020 2020 2020 2020 2d20 7361 7665 5f70          - save_p
-00044e50: 6970 656c 696e 6520 696e 7369 6465 2070  ipeline inside p
-00044e60: 6970 656c 696e 655f 6564 6974 6f72 2e70  ipeline_editor.p
-00044e70: 790a 0a20 2020 2020 2020 202d 204d 6f63  y..        - Moc
-00044e80: 6b73 3a0a 2020 2020 2020 2020 2020 2020  ks:.            
-00044e90: 2d20 514d 6573 7361 6765 426f 782e 6578  - QMessageBox.ex
-00044ea0: 6563 0a20 2020 2020 2020 2020 2020 202d  ec.            -
-00044eb0: 2051 4669 6c65 4469 616c 6f67 2e67 6574   QFileDialog.get
-00044ec0: 5361 7665 4669 6c65 4e61 6d65 0a20 2020  SaveFileName.   
-00044ed0: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
-00044ee0: 2020 2320 5361 7665 2074 6865 2073 7461    # Save the sta
-00044ef0: 7465 206f 6620 7468 6520 6375 7272 656e  te of the curren
-00044f00: 7420 7072 6f63 6573 7320 6c69 6272 6172  t process librar
-00044f10: 790a 2020 2020 2020 2020 636f 6e66 6967  y.        config
-00044f20: 203d 2043 6f6e 6669 6728 636f 6e66 6967   = Config(config
-00044f30: 5f70 6174 683d 7365 6c66 2e63 6f6e 6669  _path=self.confi
-00044f40: 675f 7061 7468 290a 2020 2020 2020 2020  g_path).        
-00044f50: 7573 725f 7072 6f63 5f66 6f6c 6465 7220  usr_proc_folder 
-00044f60: 3d20 6f73 2e70 6174 682e 6a6f 696e 280a  = os.path.join(.
-00044f70: 2020 2020 2020 2020 2020 2020 636f 6e66              conf
-00044f80: 6967 2e67 6574 5f6d 6961 5f70 6174 6828  ig.get_mia_path(
-00044f90: 292c 2022 7072 6f63 6573 7365 7322 2c20  ), "processes", 
-00044fa0: 2255 7365 725f 7072 6f63 6573 7365 7322  "User_processes"
-00044fb0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00044fc0: 2020 2073 6875 7469 6c2e 636f 7079 7472     shutil.copytr
-00044fd0: 6565 280a 2020 2020 2020 2020 2020 2020  ee(.            
-00044fe0: 7573 725f 7072 6f63 5f66 6f6c 6465 722c  usr_proc_folder,
-00044ff0: 0a20 2020 2020 2020 2020 2020 206f 732e  .            os.
-00045000: 7061 7468 2e6a 6f69 6e28 0a20 2020 2020  path.join(.     
-00045010: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00045020: 636f 6e66 6967 5f70 6174 682c 0a20 2020  config_path,.   
-00045030: 2020 2020 2020 2020 2020 2020 2022 3455               "4U
-00045040: 5473 5f54 6573 744d 4941 5069 7065 6c69  Ts_TestMIAPipeli
-00045050: 6e65 4564 6974 6f72 222c 0a20 2020 2020  neEditor",.     
-00045060: 2020 2020 2020 2020 2020 2022 5573 6572             "User
-00045070: 5f70 726f 6365 7373 6573 222c 0a20 2020  _processes",.   
-00045080: 2020 2020 2020 2020 2029 2c0a 2020 2020           ),.    
-00045090: 2020 2020 290a 2020 2020 2020 2020 7368      ).        sh
-000450a0: 7574 696c 2e63 6f70 7928 0a20 2020 2020  util.copy(.     
-000450b0: 2020 2020 2020 206f 732e 7061 7468 2e6a         os.path.j
-000450c0: 6f69 6e28 0a20 2020 2020 2020 2020 2020  oin(.           
-000450d0: 2020 2020 2063 6f6e 6669 672e 6765 745f       config.get_
-000450e0: 6d69 615f 7061 7468 2829 2c20 2270 726f  mia_path(), "pro
-000450f0: 7065 7274 6965 7322 2c20 2270 726f 6365  perties", "proce
-00045100: 7373 5f63 6f6e 6669 672e 796d 6c22 0a20  ss_config.yml". 
-00045110: 2020 2020 2020 2020 2020 2029 2c0a 2020             ),.  
-00045120: 2020 2020 2020 2020 2020 6f73 2e70 6174            os.pat
-00045130: 682e 6a6f 696e 2873 656c 662e 636f 6e66  h.join(self.conf
-00045140: 6967 5f70 6174 682c 2022 3455 5473 5f54  ig_path, "4UTs_T
-00045150: 6573 744d 4941 5069 7065 6c69 6e65 4564  estMIAPipelineEd
-00045160: 6974 6f72 2229 2c0a 2020 2020 2020 2020  itor"),.        
-00045170: 290a 0a20 2020 2020 2020 2023 2053 6574  )..        # Set
-00045180: 7320 6f66 7465 6e20 7573 6564 2073 686f  s often used sho
-00045190: 7274 6375 7473 0a20 2020 2020 2020 2070  rtcuts.        p
-000451a0: 706c 5f65 6474 5f74 6162 7320 3d20 7365  pl_edt_tabs = se
-000451b0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
-000451c0: 6970 656c 696e 655f 6d61 6e61 6765 722e  ipeline_manager.
-000451d0: 7069 7065 6c69 6e65 4564 6974 6f72 5461  pipelineEditorTa
-000451e0: 6273 0a0a 2020 2020 2020 2020 2320 5377  bs..        # Sw
-000451f0: 6974 6368 2074 6f20 7069 7065 6c69 6e65  itch to pipeline
-00045200: 206d 616e 6167 6572 0a20 2020 2020 2020   manager.       
-00045210: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-00045220: 772e 7461 6273 2e73 6574 4375 7272 656e  w.tabs.setCurren
-00045230: 7449 6e64 6578 2832 290a 0a20 2020 2020  tIndex(2)..     
-00045240: 2020 2023 2054 7269 6573 2074 6f20 7361     # Tries to sa
-00045250: 7665 2061 2070 6970 656c 696e 6520 7468  ve a pipeline th
-00045260: 6174 2069 7320 656d 7074 790a 2020 2020  at is empty.    
-00045270: 2020 2020 7265 7320 3d20 7070 6c5f 6564      res = ppl_ed
-00045280: 745f 7461 6273 2e73 6176 655f 7069 7065  t_tabs.save_pipe
-00045290: 6c69 6e65 2829 0a20 2020 2020 2020 2073  line().        s
-000452a0: 656c 662e 6173 7365 7274 4973 4e6f 6e65  elf.assertIsNone
-000452b0: 2872 6573 290a 0a20 2020 2020 2020 2023  (res)..        #
-000452c0: 2041 6464 7320 6120 7072 6f63 6573 730a   Adds a process.
-000452d0: 2020 2020 2020 2020 7070 6c5f 6564 745f          ppl_edt_
-000452e0: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
-000452f0: 5f65 6469 746f 7228 292e 636c 6963 6b5f  _editor().click_
-00045300: 706f 7320 3d20 5150 6f69 6e74 2834 3530  pos = QPoint(450
-00045310: 2c20 3530 3029 0a20 2020 2020 2020 2070  , 500).        p
-00045320: 706c 5f65 6474 5f74 6162 732e 6765 745f  pl_edt_tabs.get_
-00045330: 6375 7272 656e 745f 6564 6974 6f72 2829  current_editor()
-00045340: 2e61 6464 5f6e 616d 6564 5f70 726f 6365  .add_named_proce
-00045350: 7373 2853 6d6f 6f74 6829 0a0a 2020 2020  ss(Smooth)..    
-00045360: 2020 2020 2320 4578 706f 7274 7320 7468      # Exports th
-00045370: 6520 696e 7075 7420 616e 6420 6f75 7470  e input and outp
-00045380: 7574 2070 6c75 6773 0a20 2020 2020 2020  ut plugs.       
-00045390: 2070 706c 5f65 6474 5f74 6162 732e 6765   ppl_edt_tabs.ge
-000453a0: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
-000453b0: 2829 2e63 7572 7265 6e74 5f6e 6f64 655f  ().current_node_
-000453c0: 6e61 6d65 203d 2022 736d 6f6f 7468 5f31  name = "smooth_1
-000453d0: 220a 2020 2020 2020 2020 280a 2020 2020  ".        (.    
-000453e0: 2020 2020 2020 2020 7070 6c5f 6564 745f          ppl_edt_
-000453f0: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
-00045400: 5f65 6469 746f 7228 292e 6578 706f 7274  _editor().export
-00045410: 5f6e 6f64 655f 756e 636f 6e6e 6563 7465  _node_unconnecte
-00045420: 645f 6d61 6e64 6174 6f72 795f 706c 7567  d_mandatory_plug
-00045430: 7328 290a 2020 2020 2020 2020 290a 2020  s().        ).  
-00045440: 2020 2020 2020 280a 2020 2020 2020 2020        (.        
-00045450: 2020 2020 7070 6c5f 6564 745f 7461 6273      ppl_edt_tabs
-00045460: 2e67 6574 5f63 7572 7265 6e74 5f65 6469  .get_current_edi
-00045470: 746f 7228 292e 6578 706f 7274 5f6e 6f64  tor().export_nod
-00045480: 655f 616c 6c5f 756e 636f 6e6e 6563 7465  e_all_unconnecte
-00045490: 645f 6f75 7470 7574 7328 290a 2020 2020  d_outputs().    
-000454a0: 2020 2020 290a 0a20 2020 2020 2020 2023      )..        #
-000454b0: 204d 6f63 6b73 2074 6865 2065 7865 6375   Mocks the execu
-000454c0: 7469 6f6e 206f 6620 6120 6469 616c 6f67  tion of a dialog
-000454d0: 2062 6f78 0a20 2020 2020 2020 2051 4d65   box.        QMe
-000454e0: 7373 6167 6542 6f78 2e65 7865 6320 3d20  ssageBox.exec = 
-000454f0: 6c61 6d62 6461 202a 6172 6773 3a20 4e6f  lambda *args: No
-00045500: 6e65 0a0a 2020 2020 2020 2020 2320 5472  ne..        # Tr
-00045510: 6965 7320 746f 2073 6176 6520 7468 6520  ies to save the 
-00045520: 7069 7065 6c69 6e65 2077 6974 6820 7468  pipeline with th
-00045530: 6520 7573 6572 2063 616e 6365 6c6c 696e  e user cancellin
-00045540: 6720 6974 0a20 2020 2020 2020 2051 4669  g it.        QFi
-00045550: 6c65 4469 616c 6f67 2e67 6574 5361 7665  leDialog.getSave
-00045560: 4669 6c65 4e61 6d65 203d 206c 616d 6264  FileName = lambd
-00045570: 6120 2a61 7267 733a 205b 2222 5d0a 2020  a *args: [""].  
-00045580: 2020 2020 2020 7265 7320 3d20 7070 6c5f        res = ppl_
-00045590: 6564 745f 7461 6273 2e73 6176 655f 7069  edt_tabs.save_pi
-000455a0: 7065 6c69 6e65 2829 0a20 2020 2020 2020  peline().       
-000455b0: 2073 656c 662e 6173 7365 7274 4973 4e6f   self.assertIsNo
-000455c0: 6e65 2872 6573 290a 0a20 2020 2020 2020  ne(res)..       
-000455d0: 2023 204d 6f63 6b73 2074 6865 2065 7865   # Mocks the exe
-000455e0: 6375 7469 6f6e 206f 6620 6120 5146 696c  cution of a QFil
-000455f0: 6544 6961 6c6f 670a 2020 2020 2020 2020  eDialog.        
-00045600: 5146 696c 6544 6961 6c6f 672e 6765 7453  QFileDialog.getS
-00045610: 6176 6546 696c 654e 616d 6520 3d20 6c61  aveFileName = la
-00045620: 6d62 6461 202a 6172 6773 3a20 5b66 696c  mbda *args: [fil
-00045630: 656e 616d 655d 0a0a 2020 2020 2020 2020  ename]..        
-00045640: 2320 5265 6d6f 7665 7320 7468 6520 636f  # Removes the co
-00045650: 6e66 6967 2e67 6574 5f6d 6961 5f70 6174  nfig.get_mia_pat
-00045660: 6828 292f 7072 6f63 6573 7365 732f 5573  h()/processes/Us
-00045670: 6572 5f70 726f 6365 7373 6573 2066 6f6c  er_processes fol
-00045680: 6465 722c 2074 6f0a 2020 2020 2020 2020  der, to.        
-00045690: 2320 696e 6372 6561 7365 2063 6f76 6572  # increase cover
-000456a0: 6167 650a 2020 2020 2020 2020 7368 7574  age.        shut
-000456b0: 696c 2e72 6d74 7265 6528 7573 725f 7072  il.rmtree(usr_pr
-000456c0: 6f63 5f66 6f6c 6465 7229 0a0a 2020 2020  oc_folder)..    
-000456d0: 2020 2020 2320 5472 6965 7320 746f 2073      # Tries to s
-000456e0: 6176 6520 7468 6520 7069 7065 6c69 6e65  ave the pipeline
-000456f0: 2077 6974 6820 6120 6669 6c65 6e61 6d65   with a filename
-00045700: 2073 7461 7274 696e 6720 6279 2061 2064   starting by a d
-00045710: 6967 6974 0a20 2020 2020 2020 2063 6f6e  igit.        con
-00045720: 6669 6720 3d20 436f 6e66 6967 2863 6f6e  fig = Config(con
-00045730: 6669 675f 7061 7468 3d73 656c 662e 636f  fig_path=self.co
-00045740: 6e66 6967 5f70 6174 6829 0a20 2020 2020  nfig_path).     
-00045750: 2020 2075 7372 5f70 726f 635f 666f 6c64     usr_proc_fold
-00045760: 6572 203d 206f 732e 7061 7468 2e6a 6f69  er = os.path.joi
-00045770: 6e28 0a20 2020 2020 2020 2020 2020 2063  n(.            c
-00045780: 6f6e 6669 672e 6765 745f 6d69 615f 7061  onfig.get_mia_pa
-00045790: 7468 2829 2c20 2270 726f 6365 7373 6573  th(), "processes
-000457a0: 222c 2022 5573 6572 5f70 726f 6365 7373  ", "User_process
-000457b0: 6573 220a 2020 2020 2020 2020 290a 2020  es".        ).  
-000457c0: 2020 2020 2020 6669 6c65 6e61 6d65 203d        filename =
-000457d0: 206f 732e 7061 7468 2e6a 6f69 6e28 7573   os.path.join(us
-000457e0: 725f 7072 6f63 5f66 6f6c 6465 722c 2022  r_proc_folder, "
-000457f0: 315f 7465 7374 5f70 6970 656c 696e 6522  1_test_pipeline"
-00045800: 290a 2020 2020 2020 2020 7265 7320 3d20  ).        res = 
-00045810: 7070 6c5f 6564 745f 7461 6273 2e73 6176  ppl_edt_tabs.sav
-00045820: 655f 7069 7065 6c69 6e65 2829 0a20 2020  e_pipeline().   
-00045830: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00045840: 4973 4e6f 6e65 2872 6573 290a 0a20 2020  IsNone(res)..   
-00045850: 2020 2020 2023 2054 7269 6573 2074 6f20       # Tries to 
-00045860: 7361 7665 2074 6865 2070 6970 656c 696e  save the pipelin
-00045870: 6520 7769 7468 2061 2066 696c 656e 616d  e with a filenam
-00045880: 6520 7769 7468 6f75 7420 6578 7465 6e73  e without extens
-00045890: 696f 6e2c 0a20 2020 2020 2020 2023 2077  ion,.        # w
-000458a0: 6869 6368 2069 7320 6175 746f 6d61 7469  hich is automati
-000458b0: 6361 6c6c 7920 636f 6d70 6c65 7465 6420  cally completed 
-000458c0: 746f 202e 7079 0a20 2020 2020 2020 2066  to .py.        f
-000458d0: 696c 656e 616d 6520 3d20 6f73 2e70 6174  ilename = os.pat
-000458e0: 682e 6a6f 696e 2875 7372 5f70 726f 635f  h.join(usr_proc_
-000458f0: 666f 6c64 6572 2c20 2274 6573 745f 7069  folder, "test_pi
-00045900: 7065 6c69 6e65 5f31 2229 0a20 2020 2020  peline_1").     
-00045910: 2020 2051 4669 6c65 4469 616c 6f67 2e67     QFileDialog.g
-00045920: 6574 5361 7665 4669 6c65 4e61 6d65 203d  etSaveFileName =
-00045930: 206c 616d 6264 6120 2a61 7267 733a 205b   lambda *args: [
-00045940: 6669 6c65 6e61 6d65 5d0a 2020 2020 2020  filename].      
-00045950: 2020 7265 7320 3d20 7070 6c5f 6564 745f    res = ppl_edt_
-00045960: 7461 6273 2e73 6176 655f 7069 7065 6c69  tabs.save_pipeli
-00045970: 6e65 2829 0a20 2020 2020 2020 2073 656c  ne().        sel
-00045980: 662e 6173 7365 7274 5472 7565 2872 6573  f.assertTrue(res
-00045990: 2920 2023 2054 6865 2072 6573 756c 7469  )  # The resulti
-000459a0: 6e67 2066 696c 656e 616d 6520 6973 206e  ng filename is n
-000459b0: 6f74 2065 6d70 7479 0a0a 2020 2020 2020  ot empty..      
-000459c0: 2020 2320 5361 7665 2074 6865 2070 6970    # Save the pip
-000459d0: 656c 696e 6520 7769 7468 2061 2066 696c  eline with a fil
-000459e0: 656e 616d 6520 7769 7468 2074 6865 2077  ename with the w
-000459f0: 726f 6e67 202e 6320 6578 7465 6e73 696f  rong .c extensio
-00045a00: 6e2c 0a20 2020 2020 2020 2023 2077 6869  n,.        # whi
-00045a10: 6368 2069 7320 6175 746f 6d61 7469 6361  ch is automatica
-00045a20: 6c6c 7920 636f 7272 6563 7465 6420 746f  lly corrected to
-00045a30: 202e 7079 0a20 2020 2020 2020 2066 696c   .py.        fil
-00045a40: 656e 616d 6520 3d20 6f73 2e70 6174 682e  ename = os.path.
-00045a50: 6a6f 696e 2875 7372 5f70 726f 635f 666f  join(usr_proc_fo
-00045a60: 6c64 6572 2c20 2274 6573 745f 7069 7065  lder, "test_pipe
-00045a70: 6c69 6e65 5f32 2e63 2229 0a20 2020 2020  line_2.c").     
-00045a80: 2020 2051 4669 6c65 4469 616c 6f67 2e67     QFileDialog.g
-00045a90: 6574 5361 7665 4669 6c65 4e61 6d65 203d  etSaveFileName =
-00045aa0: 206c 616d 6264 6120 2a61 7267 733a 205b   lambda *args: [
-00045ab0: 6669 6c65 6e61 6d65 5d0a 2020 2020 2020  filename].      
-00045ac0: 2020 7265 7320 3d20 7070 6c5f 6564 745f    res = ppl_edt_
-00045ad0: 7461 6273 2e73 6176 655f 7069 7065 6c69  tabs.save_pipeli
-00045ae0: 6e65 2829 0a20 2020 2020 2020 2073 656c  ne().        sel
-00045af0: 662e 6173 7365 7274 5472 7565 2872 6573  f.assertTrue(res
-00045b00: 2920 2023 2054 6865 2072 6573 756c 7469  )  # The resulti
-00045b10: 6e67 2066 696c 656e 616d 6520 6973 206e  ng filename is n
-00045b20: 6f74 2065 6d70 7479 0a0a 2020 2020 2020  ot empty..      
-00045b30: 2020 2320 5365 7473 2075 7365 7220 6d6f    # Sets user mo
-00045b40: 6465 2074 6f20 7472 7565 0a20 2020 2020  de to true.     
-00045b50: 2020 2043 6f6e 6669 6728 636f 6e66 6967     Config(config
-00045b60: 5f70 6174 683d 7365 6c66 2e63 6f6e 6669  _path=self.confi
-00045b70: 675f 7061 7468 292e 7365 745f 7573 6572  g_path).set_user
-00045b80: 5f6d 6f64 6528 5472 7565 290a 0a20 2020  _mode(True)..   
-00045b90: 2020 2020 2023 2054 7269 6573 2074 6f20       # Tries to 
-00045ba0: 6f76 6572 7772 6974 6520 7468 6520 7072  overwrite the pr
-00045bb0: 6576 696f 7573 6c79 2073 6176 6564 2070  eviously saved p
-00045bc0: 6970 656c 696e 6520 7769 7468 6f75 740a  ipeline without.
-00045bd0: 2020 2020 2020 2020 2320 7065 726d 6973          # permis
-00045be0: 7369 6f6e 730a 2020 2020 2020 2020 7265  sions.        re
-00045bf0: 7320 3d20 7070 6c5f 6564 745f 7461 6273  s = ppl_edt_tabs
-00045c00: 2e73 6176 655f 7069 7065 6c69 6e65 2829  .save_pipeline()
-00045c10: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00045c20: 7365 7274 4973 4e6f 6e65 2872 6573 290a  sertIsNone(res).
-00045c30: 0a20 2020 2020 2020 2023 2053 6574 7320  .        # Sets 
-00045c40: 7573 6572 206d 6f64 6520 6261 636b 2074  user mode back t
-00045c50: 6f20 6661 6c73 650a 2020 2020 2020 2020  o false.        
-00045c60: 436f 6e66 6967 2863 6f6e 6669 675f 7061  Config(config_pa
-00045c70: 7468 3d73 656c 662e 636f 6e66 6967 5f70  th=self.config_p
-00045c80: 6174 6829 2e73 6574 5f75 7365 725f 6d6f  ath).set_user_mo
-00045c90: 6465 2854 7275 6529 0a0a 2020 2020 2020  de(True)..      
-00045ca0: 2020 2320 5361 7665 7320 6120 7069 7065    # Saves a pipe
-00045cb0: 6c69 6e65 2062 7920 7370 6563 6966 7969  line by specifyi
-00045cc0: 6e67 2061 2066 696c 656e 616d 650a 2020  ng a filename.  
-00045cd0: 2020 2020 2020 6669 6c65 6e61 6d65 203d        filename =
-00045ce0: 206f 732e 7061 7468 2e6a 6f69 6e28 7573   os.path.join(us
-00045cf0: 725f 7072 6f63 5f66 6f6c 6465 722c 2022  r_proc_folder, "
-00045d00: 7465 7374 5f70 6970 656c 696e 655f 332e  test_pipeline_3.
-00045d10: 7079 2229 0a20 2020 2020 2020 2072 6573  py").        res
-00045d20: 203d 2070 706c 5f65 6474 5f74 6162 732e   = ppl_edt_tabs.
-00045d30: 7361 7665 5f70 6970 656c 696e 6528 6e65  save_pipeline(ne
-00045d40: 775f 6669 6c65 5f6e 616d 653d 6669 6c65  w_file_name=file
-00045d50: 6e61 6d65 290a 2020 2020 2020 2020 7365  name).        se
-00045d60: 6c66 2e61 7373 6572 7454 7275 6528 7265  lf.assertTrue(re
-00045d70: 7329 2020 2320 5468 6520 7265 7375 6c74  s)  # The result
-00045d80: 696e 6720 6669 6c65 6e61 6d65 2069 7320  ing filename is 
-00045d90: 6e6f 7420 656d 7074 790a 0a20 2020 2064  not empty..    d
-00045da0: 6566 2074 6573 745f 7570 6461 7465 5f70  ef test_update_p
-00045db0: 6c75 675f 7661 6c75 6528 7365 6c66 293a  lug_value(self):
-00045dc0: 0a20 2020 2020 2020 2022 2222 4469 7370  .        """Disp
-00045dd0: 6c61 7973 2070 6172 616d 6574 6572 7320  lays parameters 
-00045de0: 6f66 2061 206e 6f64 6520 616e 6420 7570  of a node and up
-00045df0: 6461 7465 7320 6120 706c 7567 2076 616c  dates a plug val
-00045e00: 7565 2e22 2222 0a0a 2020 2020 2020 2020  ue."""..        
-00045e10: 636f 6e66 6967 203d 2043 6f6e 6669 6728  config = Config(
-00045e20: 636f 6e66 6967 5f70 6174 683d 7365 6c66  config_path=self
-00045e30: 2e63 6f6e 6669 675f 7061 7468 290a 2020  .config_path).  
-00045e40: 2020 2020 2020 636f 6e74 726f 6c56 315f        controlV1_
-00045e50: 7665 7220 3d20 636f 6e66 6967 2e69 7343  ver = config.isC
-00045e60: 6f6e 7472 6f6c 5631 2829 0a0a 2020 2020  ontrolV1()..    
-00045e70: 2020 2020 2320 5377 6974 6368 2074 6f20      # Switch to 
-00045e80: 5631 206e 6f64 6520 636f 6e74 726f 6c6c  V1 node controll
-00045e90: 6572 2047 5549 2c20 6966 206e 6563 6573  er GUI, if neces
-00045ea0: 7361 7279 0a20 2020 2020 2020 2069 6620  sary.        if 
-00045eb0: 6e6f 7420 636f 6e74 726f 6c56 315f 7665  not controlV1_ve
-00045ec0: 723a 0a20 2020 2020 2020 2020 2020 2063  r:.            c
-00045ed0: 6f6e 6669 672e 7365 7443 6f6e 7472 6f6c  onfig.setControl
-00045ee0: 5631 2854 7275 6529 0a20 2020 2020 2020  V1(True).       
-00045ef0: 2020 2020 2073 656c 662e 7265 7374 6172       self.restar
-00045f00: 745f 4d49 4128 290a 0a20 2020 2020 2020  t_MIA()..       
-00045f10: 2070 6970 656c 696e 655f 6564 6974 6f72   pipeline_editor
-00045f20: 5f74 6162 7320 3d20 280a 2020 2020 2020  _tabs = (.      
-00045f30: 2020 2020 2020 7365 6c66 2e6d 6169 6e5f        self.main_
-00045f40: 7769 6e64 6f77 2e70 6970 656c 696e 655f  window.pipeline_
-00045f50: 6d61 6e61 6765 722e 7069 7065 6c69 6e65  manager.pipeline
-00045f60: 4564 6974 6f72 5461 6273 0a20 2020 2020  EditorTabs.     
-00045f70: 2020 2029 0a20 2020 2020 2020 206e 6f64     ).        nod
-00045f80: 655f 636f 6e74 726f 6c6c 6572 203d 2073  e_controller = s
-00045f90: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00045fa0: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
-00045fb0: 2e6e 6f64 6543 6f6e 7472 6f6c 6c65 720a  .nodeController.
-00045fc0: 0a20 2020 2020 2020 2023 2041 6464 696e  .        # Addin
-00045fd0: 6720 6120 7072 6f63 6573 732c 2063 7265  g a process, cre
-00045fe0: 6174 6573 2061 206e 6f64 6520 6361 6c6c  ates a node call
-00045ff0: 6564 2022 7468 7265 7368 6f6c 645f 3122  ed "threshold_1"
-00046000: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
-00046010: 5f63 6c61 7373 203d 2054 6872 6573 686f  _class = Thresho
-00046020: 6c64 0a20 2020 2020 2020 2070 6970 656c  ld.        pipel
-00046030: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
-00046040: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
-00046050: 6f72 2829 2e63 6c69 636b 5f70 6f73 203d  or().click_pos =
-00046060: 2051 506f 696e 7428 3435 302c 2035 3030   QPoint(450, 500
-00046070: 290a 2020 2020 2020 2020 7069 7065 6c69  ).        pipeli
-00046080: 6e65 5f65 6469 746f 725f 7461 6273 2e67  ne_editor_tabs.g
-00046090: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
-000460a0: 7228 292e 6164 645f 6e61 6d65 645f 7072  r().add_named_pr
-000460b0: 6f63 6573 7328 0a20 2020 2020 2020 2020  ocess(.         
-000460c0: 2020 2070 726f 6365 7373 5f63 6c61 7373     process_class
-000460d0: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-000460e0: 2020 2020 2320 4469 7370 6c61 7969 6e67      # Displaying
-000460f0: 2074 6865 206e 6f64 6520 7061 7261 6d65   the node parame
-00046100: 7465 7273 0a20 2020 2020 2020 2070 6970  ters.        pip
-00046110: 656c 696e 6520 3d20 7069 7065 6c69 6e65  eline = pipeline
-00046120: 5f65 6469 746f 725f 7461 6273 2e67 6574  _editor_tabs.get
-00046130: 5f63 7572 7265 6e74 5f70 6970 656c 696e  _current_pipelin
-00046140: 6528 290a 2020 2020 2020 2020 6e6f 6465  e().        node
-00046150: 5f63 6f6e 7472 6f6c 6c65 722e 6469 7370  _controller.disp
-00046160: 6c61 795f 7061 7261 6d65 7465 7273 280a  lay_parameters(.
-00046170: 2020 2020 2020 2020 2020 2020 2274 6872              "thr
-00046180: 6573 686f 6c64 5f31 222c 2067 6574 5f70  eshold_1", get_p
-00046190: 726f 6365 7373 5f69 6e73 7461 6e63 6528  rocess_instance(
-000461a0: 7072 6f63 6573 735f 636c 6173 7329 2c20  process_class), 
-000461b0: 7069 7065 6c69 6e65 0a20 2020 2020 2020  pipeline.       
-000461c0: 2029 0a0a 2020 2020 2020 2020 2320 5570   )..        # Up
-000461d0: 6461 7469 6e67 2074 6865 2076 616c 7565  dating the value
-000461e0: 206f 6620 7468 6520 2273 796e 6368 726f   of the "synchro
-000461f0: 6e69 7a65 2220 696e 7075 7420 706c 7567  nize" input plug
-00046200: 2061 6e64 0a20 2020 2020 2020 2023 2022   and.        # "
-00046210: 5f61 6374 6976 6174 696f 6e5f 666f 7263  _activation_forc
-00046220: 6564 2220 6f75 7470 7574 2070 6c75 6773  ed" output plugs
-00046230: 2e0a 2020 2020 2020 2020 2320 6765 745f  ..        # get_
-00046240: 696e 6465 785f 6672 6f6d 5f70 6c75 675f  index_from_plug_
-00046250: 6e61 6d65 2829 206f 6e6c 7920 6578 6973  name() only exis
-00046260: 7473 206f 6e20 7468 6520 4e6f 6465 436f  ts on the NodeCo
-00046270: 6e74 726f 6c6c 6572 2063 6c61 7373 0a20  ntroller class. 
-00046280: 2020 2020 2020 2023 2028 7631 292e 0a20         # (v1).. 
-00046290: 2020 2020 2020 2069 6620 6861 7361 7474         if hasatt
-000462a0: 7228 6e6f 6465 5f63 6f6e 7472 6f6c 6c65  r(node_controlle
-000462b0: 722c 2022 6765 745f 696e 6465 785f 6672  r, "get_index_fr
-000462c0: 6f6d 5f70 6c75 675f 6e61 6d65 2229 3a0a  om_plug_name"):.
-000462d0: 2020 2020 2020 2020 2020 2020 696e 6465              inde
-000462e0: 7820 3d20 6e6f 6465 5f63 6f6e 7472 6f6c  x = node_control
-000462f0: 6c65 722e 6765 745f 696e 6465 785f 6672  ler.get_index_fr
-00046300: 6f6d 5f70 6c75 675f 6e61 6d65 280a 2020  om_plug_name(.  
-00046310: 2020 2020 2020 2020 2020 2020 2020 2273                "s
-00046320: 796e 6368 726f 6e69 7a65 222c 2022 696e  ynchronize", "in
-00046330: 220a 2020 2020 2020 2020 2020 2020 290a  ".            ).
-00046340: 2020 2020 2020 2020 2020 2020 6e6f 6465              node
-00046350: 5f63 6f6e 7472 6f6c 6c65 722e 6c69 6e65  _controller.line
-00046360: 5f65 6469 745f 696e 7075 745b 696e 6465  _edit_input[inde
-00046370: 785d 2e73 6574 5465 7874 2822 3122 290a  x].setText("1").
-00046380: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
-00046390: 6869 7320 6361 6c6c 7320 2275 7064 6174  his calls "updat
-000463a0: 655f 706c 7567 5f76 616c 7565 2220 6d65  e_plug_value" me
-000463b0: 7468 6f64 3a0a 2020 2020 2020 2020 2020  thod:.          
-000463c0: 2020 6e6f 6465 5f63 6f6e 7472 6f6c 6c65    node_controlle
-000463d0: 722e 6c69 6e65 5f65 6469 745f 696e 7075  r.line_edit_inpu
-000463e0: 745b 696e 6465 785d 2e72 6574 7572 6e50  t[index].returnP
-000463f0: 7265 7373 6564 2e65 6d69 7428 290a 2020  ressed.emit().  
-00046400: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
-00046410: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
-00046420: 2020 2020 2020 2020 2020 2020 312c 2070              1, p
-00046430: 6970 656c 696e 652e 6e6f 6465 735b 2274  ipeline.nodes["t
-00046440: 6872 6573 686f 6c64 5f31 225d 2e67 6574  hreshold_1"].get
-00046450: 5f70 6c75 675f 7661 6c75 6528 2273 796e  _plug_value("syn
-00046460: 6368 726f 6e69 7a65 2229 0a20 2020 2020  chronize").     
-00046470: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-00046480: 2020 2020 2020 2320 5570 6461 7469 6e67        # Updating
-00046490: 2074 6865 2076 616c 7565 206f 6620 7468   the value of th
-000464a0: 6520 225f 6163 7469 7661 7469 6f6e 5f66  e "_activation_f
-000464b0: 6f72 6365 6422 2070 6c75 670a 2020 2020  orced" plug.    
-000464c0: 2020 2020 2020 2020 696e 6465 7820 3d20          index = 
-000464d0: 6e6f 6465 5f63 6f6e 7472 6f6c 6c65 722e  node_controller.
-000464e0: 6765 745f 696e 6465 785f 6672 6f6d 5f70  get_index_from_p
-000464f0: 6c75 675f 6e61 6d65 280a 2020 2020 2020  lug_name(.      
-00046500: 2020 2020 2020 2020 2020 225f 6163 7469            "_acti
-00046510: 7661 7469 6f6e 5f66 6f72 6365 6422 2c20  vation_forced", 
-00046520: 226f 7574 220a 2020 2020 2020 2020 2020  "out".          
-00046530: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-00046540: 6e6f 6465 5f63 6f6e 7472 6f6c 6c65 722e  node_controller.
-00046550: 6c69 6e65 5f65 6469 745f 6f75 7470 7574  line_edit_output
-00046560: 5b69 6e64 6578 5d2e 7365 7454 6578 7428  [index].setText(
-00046570: 2254 7275 6522 290a 0a20 2020 2020 2020  "True")..       
-00046580: 2020 2020 2023 2054 6869 7320 6361 6c6c       # This call
-00046590: 7320 2275 7064 6174 655f 706c 7567 5f76  s "update_plug_v
-000465a0: 616c 7565 2220 6d65 7468 6f64 3a0a 2020  alue" method:.  
-000465b0: 2020 2020 2020 2020 2020 6e6f 6465 5f63            node_c
-000465c0: 6f6e 7472 6f6c 6c65 722e 6c69 6e65 5f65  ontroller.line_e
-000465d0: 6469 745f 6f75 7470 7574 5b69 6e64 6578  dit_output[index
-000465e0: 5d2e 7265 7475 726e 5072 6573 7365 642e  ].returnPressed.
-000465f0: 656d 6974 2829 0a20 2020 2020 2020 2020  emit().         
-00046600: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00046610: 7561 6c28 0a20 2020 2020 2020 2020 2020  ual(.           
-00046620: 2020 2020 2054 7275 652c 0a20 2020 2020       True,.     
-00046630: 2020 2020 2020 2020 2020 2070 6970 656c             pipel
-00046640: 696e 652e 6e6f 6465 735b 2274 6872 6573  ine.nodes["thres
-00046650: 686f 6c64 5f31 225d 2e67 6574 5f70 6c75  hold_1"].get_plu
-00046660: 675f 7661 6c75 6528 0a20 2020 2020 2020  g_value(.       
-00046670: 2020 2020 2020 2020 2020 2020 2022 5f61               "_a
-00046680: 6374 6976 6174 696f 6e5f 666f 7263 6564  ctivation_forced
-00046690: 220a 2020 2020 2020 2020 2020 2020 2020  ".              
-000466a0: 2020 292c 0a20 2020 2020 2020 2020 2020    ),.           
-000466b0: 2029 0a0a 2020 2020 2020 2020 2320 4578   )..        # Ex
-000466c0: 706f 7274 696e 6720 7468 6520 696e 7075  porting the inpu
-000466d0: 7420 706c 7567 7320 616e 6420 6d6f 6469  t plugs and modi
-000466e0: 6679 696e 6720 7468 6520 2273 796e 6368  fying the "synch
-000466f0: 726f 6e69 7a65 2220 696e 7075 7420 706c  ronize" input pl
-00046700: 7567 0a20 2020 2020 2020 2028 0a20 2020  ug.        (.   
-00046710: 2020 2020 2020 2020 2070 6970 656c 696e           pipelin
-00046720: 655f 6564 6974 6f72 5f74 6162 732e 6765  e_editor_tabs.ge
-00046730: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
-00046740: 0a20 2020 2020 2020 2029 2829 2e63 7572  .        )().cur
-00046750: 7265 6e74 5f6e 6f64 655f 6e61 6d65 203d  rent_node_name =
-00046760: 2022 7468 7265 7368 6f6c 645f 3122 0a20   "threshold_1". 
-00046770: 2020 2020 2020 2028 0a20 2020 2020 2020         (.       
-00046780: 2020 2020 2070 6970 656c 696e 655f 6564       pipeline_ed
-00046790: 6974 6f72 5f74 6162 732e 6765 745f 6375  itor_tabs.get_cu
-000467a0: 7272 656e 745f 6564 6974 6f72 0a20 2020  rrent_editor.   
-000467b0: 2020 2020 2029 2829 2e65 7870 6f72 745f       )().export_
-000467c0: 6e6f 6465 5f61 6c6c 5f75 6e63 6f6e 6e65  node_all_unconne
-000467d0: 6374 6564 5f69 6e70 7574 7328 290a 0a20  cted_inputs().. 
-000467e0: 2020 2020 2020 2069 6e70 7574 5f70 726f         input_pro
-000467f0: 6365 7373 203d 2070 6970 656c 696e 652e  cess = pipeline.
-00046800: 6e6f 6465 735b 2222 5d2e 7072 6f63 6573  nodes[""].proces
-00046810: 730a 2020 2020 2020 2020 6e6f 6465 5f63  s.        node_c
-00046820: 6f6e 7472 6f6c 6c65 722e 6469 7370 6c61  ontroller.displa
-00046830: 795f 7061 7261 6d65 7465 7273 280a 2020  y_parameters(.  
-00046840: 2020 2020 2020 2020 2020 2269 6e70 7574            "input
-00046850: 7322 2c20 6765 745f 7072 6f63 6573 735f  s", get_process_
-00046860: 696e 7374 616e 6365 2869 6e70 7574 5f70  instance(input_p
-00046870: 726f 6365 7373 292c 2070 6970 656c 696e  rocess), pipelin
-00046880: 650a 2020 2020 2020 2020 290a 0a20 2020  e.        )..   
-00046890: 2020 2020 2023 2055 7064 6174 696e 6720       # Updating 
-000468a0: 7468 6520 7661 6c75 6520 6f66 2074 6865  the value of the
-000468b0: 2022 7379 6e63 6872 6f6e 697a 6522 2069   "synchronize" i
-000468c0: 6e70 7574 2070 6c75 672e 0a20 2020 2020  nput plug..     
-000468d0: 2020 2023 2067 6574 5f69 6e64 6578 5f66     # get_index_f
-000468e0: 726f 6d5f 706c 7567 5f6e 616d 6528 2920  rom_plug_name() 
-000468f0: 6f6e 6c79 2065 7869 7374 7320 6f6e 2074  only exists on t
-00046900: 6865 204e 6f64 6543 6f6e 7472 6f6c 6c65  he NodeControlle
-00046910: 7220 636c 6173 730a 2020 2020 2020 2020  r class.        
-00046920: 2320 2876 3129 2e0a 2020 2020 2020 2020  # (v1)..        
-00046930: 6966 2068 6173 6174 7472 286e 6f64 655f  if hasattr(node_
-00046940: 636f 6e74 726f 6c6c 6572 2c20 2267 6574  controller, "get
-00046950: 5f69 6e64 6578 5f66 726f 6d5f 706c 7567  _index_from_plug
-00046960: 5f6e 616d 6522 293a 0a20 2020 2020 2020  _name"):.       
-00046970: 2020 2020 2069 6e64 6578 203d 206e 6f64       index = nod
-00046980: 655f 636f 6e74 726f 6c6c 6572 2e67 6574  e_controller.get
-00046990: 5f69 6e64 6578 5f66 726f 6d5f 706c 7567  _index_from_plug
-000469a0: 5f6e 616d 6528 0a20 2020 2020 2020 2020  _name(.         
-000469b0: 2020 2020 2020 2022 7379 6e63 6872 6f6e         "synchron
-000469c0: 697a 6522 2c20 2269 6e22 0a20 2020 2020  ize", "in".     
-000469d0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-000469e0: 2020 2020 206e 6f64 655f 636f 6e74 726f       node_contro
-000469f0: 6c6c 6572 2e6c 696e 655f 6564 6974 5f69  ller.line_edit_i
-00046a00: 6e70 7574 5b69 6e64 6578 5d2e 7365 7454  nput[index].setT
-00046a10: 6578 7428 2232 2229 0a0a 2020 2020 2020  ext("2")..      
-00046a20: 2020 2020 2020 2320 5468 6973 2063 616c        # This cal
-00046a30: 6c73 2022 7570 6461 7465 5f70 6c75 675f  ls "update_plug_
-00046a40: 7661 6c75 6522 206d 6574 686f 643a 0a20  value" method:. 
-00046a50: 2020 2020 2020 2020 2020 206e 6f64 655f             node_
-00046a60: 636f 6e74 726f 6c6c 6572 2e6c 696e 655f  controller.line_
-00046a70: 6564 6974 5f69 6e70 7574 5b69 6e64 6578  edit_input[index
-00046a80: 5d2e 7265 7475 726e 5072 6573 7365 642e  ].returnPressed.
-00046a90: 656d 6974 2829 0a20 2020 2020 2020 2020  emit().         
-00046aa0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00046ab0: 7561 6c28 0a20 2020 2020 2020 2020 2020  ual(.           
-00046ac0: 2020 2020 2032 2c20 7069 7065 6c69 6e65       2, pipeline
-00046ad0: 2e6e 6f64 6573 5b22 7468 7265 7368 6f6c  .nodes["threshol
-00046ae0: 645f 3122 5d2e 6765 745f 706c 7567 5f76  d_1"].get_plug_v
-00046af0: 616c 7565 2822 7379 6e63 6872 6f6e 697a  alue("synchroniz
-00046b00: 6522 290a 2020 2020 2020 2020 2020 2020  e").            
-00046b10: 290a 0a20 2020 2020 2020 2023 2053 7769  )..        # Swi
-00046b20: 7463 6865 7320 6261 636b 2074 6f20 6e6f  tches back to no
-00046b30: 6465 2063 6f6e 7472 6f6c 6c65 7220 5632  de controller V2
-00046b40: 2c20 6966 206e 6563 6573 7361 7279 2028  , if necessary (
-00046b50: 7265 7475 726e 2074 6f20 696e 6974 6961  return to initia
-00046b60: 6c0a 2020 2020 2020 2020 2320 7374 6174  l.        # stat
-00046b70: 6529 0a20 2020 2020 2020 2063 6f6e 6669  e).        confi
-00046b80: 6720 3d20 436f 6e66 6967 2863 6f6e 6669  g = Config(confi
-00046b90: 675f 7061 7468 3d73 656c 662e 636f 6e66  g_path=self.conf
-00046ba0: 6967 5f70 6174 6829 0a0a 2020 2020 2020  ig_path)..      
-00046bb0: 2020 6966 206e 6f74 2063 6f6e 7472 6f6c    if not control
-00046bc0: 5631 5f76 6572 3a0a 2020 2020 2020 2020  V1_ver:.        
-00046bd0: 2020 2020 636f 6e66 6967 2e73 6574 436f      config.setCo
-00046be0: 6e74 726f 6c56 3128 4661 6c73 6529 0a0a  ntrolV1(False)..
-00046bf0: 2020 2020 6465 6620 7465 7374 5f7a 5f63      def test_z_c
-00046c00: 6865 636b 5f6d 6f64 6966 2873 656c 6629  heck_modif(self)
-00046c10: 3a0a 2020 2020 2020 2020 2222 224f 7065  :.        """Ope
-00046c20: 6e73 2061 2070 6970 656c 696e 652c 206f  ns a pipeline, o
-00046c30: 7065 6e73 2069 7420 6173 2061 2070 726f  pens it as a pro
-00046c40: 6365 7373 2069 6e20 616e 6f74 6865 7220  cess in another 
-00046c50: 7461 622c 206d 6f64 6966 6965 7320 6974  tab, modifies it
-00046c60: 0a20 2020 2020 2020 2061 6e64 2063 6865  .        and che
-00046c70: 636b 2074 6865 206d 6f64 6966 6963 6174  ck the modificat
-00046c80: 696f 6e73 2e0a 2020 2020 2020 2020 2222  ions..        ""
-00046c90: 220a 0a20 2020 2020 2020 2070 6970 656c  "..        pipel
-00046ca0: 696e 655f 6564 6974 6f72 5f74 6162 7320  ine_editor_tabs 
-00046cb0: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
-00046cc0: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00046cd0: 2e70 6970 656c 696e 655f 6d61 6e61 6765  .pipeline_manage
-00046ce0: 722e 7069 7065 6c69 6e65 4564 6974 6f72  r.pipelineEditor
-00046cf0: 5461 6273 0a20 2020 2020 2020 2029 0a0a  Tabs.        )..
-00046d00: 2020 2020 2020 2020 2320 4164 6469 6e67          # Adding
-00046d10: 2061 2070 726f 6365 7373 2066 726f 6d20   a process from 
-00046d20: 6120 2e70 7920 6669 6c65 2c20 6372 6561  a .py file, crea
-00046d30: 7465 7320 6120 6e6f 6465 2063 616c 6c65  tes a node calle
-00046d40: 6420 2273 6d6f 6f74 685f 3122 0a20 2020  d "smooth_1".   
-00046d50: 2020 2020 2070 6970 656c 696e 655f 6564       pipeline_ed
-00046d60: 6974 6f72 5f74 6162 732e 6765 745f 6375  itor_tabs.get_cu
-00046d70: 7272 656e 745f 6564 6974 6f72 2829 2e63  rrent_editor().c
-00046d80: 6c69 636b 5f70 6f73 203d 2051 506f 696e  lick_pos = QPoin
-00046d90: 7428 3435 302c 2035 3030 290a 2020 2020  t(450, 500).    
-00046da0: 2020 2020 636f 6e66 6967 203d 2043 6f6e      config = Con
-00046db0: 6669 6728 636f 6e66 6967 5f70 6174 683d  fig(config_path=
-00046dc0: 7365 6c66 2e63 6f6e 6669 675f 7061 7468  self.config_path
-00046dd0: 290a 2020 2020 2020 2020 6669 6c65 6e61  ).        filena
-00046de0: 6d65 203d 206f 732e 7061 7468 2e6a 6f69  me = os.path.joi
-00046df0: 6e28 0a20 2020 2020 2020 2020 2020 2063  n(.            c
-00046e00: 6f6e 6669 672e 6765 745f 6d69 615f 7061  onfig.get_mia_pa
-00046e10: 7468 2829 2c0a 2020 2020 2020 2020 2020  th(),.          
-00046e20: 2020 2270 726f 6365 7373 6573 222c 0a20    "processes",. 
-00046e30: 2020 2020 2020 2020 2020 2022 5573 6572             "User
-00046e40: 5f70 726f 6365 7373 6573 222c 0a20 2020  _processes",.   
-00046e50: 2020 2020 2020 2020 2022 7465 7374 5f70           "test_p
-00046e60: 6970 656c 696e 655f 312e 7079 222c 0a20  ipeline_1.py",. 
-00046e70: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00046e80: 2070 6970 656c 696e 655f 6564 6974 6f72   pipeline_editor
-00046e90: 5f74 6162 732e 6c6f 6164 5f70 6970 656c  _tabs.load_pipel
-00046ea0: 696e 6528 6669 6c65 6e61 6d65 290a 2020  ine(filename).  
-00046eb0: 2020 2020 2020 7069 7065 6c69 6e65 203d        pipeline =
-00046ec0: 2070 6970 656c 696e 655f 6564 6974 6f72   pipeline_editor
-00046ed0: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
-00046ee0: 745f 7069 7065 6c69 6e65 2829 0a20 2020  t_pipeline().   
-00046ef0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00046f00: 5472 7565 2822 736d 6f6f 7468 5f31 2220  True("smooth_1" 
-00046f10: 696e 2070 6970 656c 696e 652e 6e6f 6465  in pipeline.node
-00046f20: 732e 6b65 7973 2829 290a 0a20 2020 2020  s.keys())..     
-00046f30: 2020 2023 204d 616b 6520 6120 6e65 7720     # Make a new 
-00046f40: 7069 7065 6c69 6e65 2065 6469 746f 7220  pipeline editor 
-00046f50: 7461 620a 2020 2020 2020 2020 7069 7065  tab.        pipe
-00046f60: 6c69 6e65 5f65 6469 746f 725f 7461 6273  line_editor_tabs
-00046f70: 2e6e 6577 5f74 6162 2829 0a20 2020 2020  .new_tab().     
+0003c690: 206e 6f64 655f 6374 726c 6572 2e72 656c   node_ctrler.rel
+0003c6a0: 6561 7365 5f70 726f 6365 7373 2829 0a20  ease_process(). 
+0003c6b0: 2020 2020 2020 206e 6f64 655f 6374 726c         node_ctrl
+0003c6c0: 6572 2e75 7064 6174 655f 7061 7261 6d65  er.update_parame
+0003c6d0: 7465 7273 2829 0a0a 2020 2020 6465 6620  ters()..    def 
+0003c6e0: 7465 7374 5f64 6973 706c 6179 5f66 696c  test_display_fil
+0003c6f0: 7465 7228 7365 6c66 293a 0a20 2020 2020  ter(self):.     
+0003c700: 2020 2022 2222 4469 7370 6c61 7973 2070     """Displays p
+0003c710: 6172 616d 6574 6572 7320 6f66 2061 206e  arameters of a n
+0003c720: 6f64 6520 616e 6420 6469 7370 6c61 7973  ode and displays
+0003c730: 2061 2070 6c75 6720 6669 6c74 6572 2e22   a plug filter."
+0003c740: 2222 0a0a 2020 2020 2020 2020 636f 6e66  ""..        conf
+0003c750: 6967 203d 2043 6f6e 6669 6728 636f 6e66  ig = Config(conf
+0003c760: 6967 5f70 6174 683d 7365 6c66 2e63 6f6e  ig_path=self.con
+0003c770: 6669 675f 7061 7468 290a 2020 2020 2020  fig_path).      
+0003c780: 2020 636f 6e74 726f 6c56 315f 7665 7220    controlV1_ver 
+0003c790: 3d20 636f 6e66 6967 2e69 7343 6f6e 7472  = config.isContr
+0003c7a0: 6f6c 5631 2829 0a0a 2020 2020 2020 2020  olV1()..        
+0003c7b0: 2320 5377 6974 6368 2074 6f20 5631 206e  # Switch to V1 n
+0003c7c0: 6f64 6520 636f 6e74 726f 6c6c 6572 2047  ode controller G
+0003c7d0: 5549 2c20 6966 206e 6563 6573 7361 7279  UI, if necessary
+0003c7e0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+0003c7f0: 636f 6e74 726f 6c56 315f 7665 723a 0a20  controlV1_ver:. 
+0003c800: 2020 2020 2020 2020 2020 2063 6f6e 6669             confi
+0003c810: 672e 7365 7443 6f6e 7472 6f6c 5631 2854  g.setControlV1(T
+0003c820: 7275 6529 0a20 2020 2020 2020 2020 2020  rue).           
+0003c830: 2073 656c 662e 7265 7374 6172 745f 4d49   self.restart_MI
+0003c840: 4128 290a 0a20 2020 2020 2020 2070 6970  A()..        pip
+0003c850: 656c 696e 655f 6564 6974 6f72 5f74 6162  eline_editor_tab
+0003c860: 7320 3d20 280a 2020 2020 2020 2020 2020  s = (.          
+0003c870: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
+0003c880: 6f77 2e70 6970 656c 696e 655f 6d61 6e61  ow.pipeline_mana
+0003c890: 6765 722e 7069 7065 6c69 6e65 4564 6974  ger.pipelineEdit
+0003c8a0: 6f72 5461 6273 0a20 2020 2020 2020 2029  orTabs.        )
+0003c8b0: 0a20 2020 2020 2020 206e 6f64 655f 636f  .        node_co
+0003c8c0: 6e74 726f 6c6c 6572 203d 2073 656c 662e  ntroller = self.
+0003c8d0: 6d61 696e 5f77 696e 646f 772e 7069 7065  main_window.pipe
+0003c8e0: 6c69 6e65 5f6d 616e 6167 6572 2e6e 6f64  line_manager.nod
+0003c8f0: 6543 6f6e 7472 6f6c 6c65 720a 0a20 2020  eController..   
+0003c900: 2020 2020 2023 2041 6464 696e 6720 6120       # Adding a 
+0003c910: 7072 6f63 6573 730a 2020 2020 2020 2020  process.        
+0003c920: 7072 6f63 6573 735f 636c 6173 7320 3d20  process_class = 
+0003c930: 5468 7265 7368 6f6c 640a 2020 2020 2020  Threshold.      
+0003c940: 2020 7069 7065 6c69 6e65 5f65 6469 746f    pipeline_edito
+0003c950: 725f 7461 6273 2e67 6574 5f63 7572 7265  r_tabs.get_curre
+0003c960: 6e74 5f65 6469 746f 7228 292e 636c 6963  nt_editor().clic
+0003c970: 6b5f 706f 7320 3d20 5150 6f69 6e74 2834  k_pos = QPoint(4
+0003c980: 3530 2c20 3530 3029 0a20 2020 2020 2020  50, 500).       
+0003c990: 2023 2043 7265 6174 6573 2061 206e 6f64   # Creates a nod
+0003c9a0: 6520 6361 6c6c 6564 2022 7468 7265 7368  e called "thresh
+0003c9b0: 6f6c 645f 3122 0a20 2020 2020 2020 2070  old_1".        p
+0003c9c0: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
+0003c9d0: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
+0003c9e0: 6564 6974 6f72 2829 2e61 6464 5f6e 616d  editor().add_nam
+0003c9f0: 6564 5f70 726f 6365 7373 280a 2020 2020  ed_process(.    
+0003ca00: 2020 2020 2020 2020 7072 6f63 6573 735f          process_
+0003ca10: 636c 6173 730a 2020 2020 2020 2020 290a  class.        ).
+0003ca20: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
+0003ca30: 203d 2070 6970 656c 696e 655f 6564 6974   = pipeline_edit
+0003ca40: 6f72 5f74 6162 732e 6765 745f 6375 7272  or_tabs.get_curr
+0003ca50: 656e 745f 7069 7065 6c69 6e65 2829 0a0a  ent_pipeline()..
+0003ca60: 2020 2020 2020 2020 2320 4578 706f 7274          # Export
+0003ca70: 696e 6720 7468 6520 696e 7075 7420 706c  ing the input pl
+0003ca80: 7567 7320 616e 6420 6d6f 6469 6679 696e  ugs and modifyin
+0003ca90: 6720 7468 6520 2273 796e 6368 726f 6e69  g the "synchroni
+0003caa0: 7a65 2220 696e 7075 7420 706c 7567 0a20  ze" input plug. 
+0003cab0: 2020 2020 2020 2028 0a20 2020 2020 2020         (.       
+0003cac0: 2020 2020 2070 6970 656c 696e 655f 6564       pipeline_ed
+0003cad0: 6974 6f72 5f74 6162 732e 6765 745f 6375  itor_tabs.get_cu
+0003cae0: 7272 656e 745f 6564 6974 6f72 0a20 2020  rrent_editor.   
+0003caf0: 2020 2020 2029 2829 2e63 7572 7265 6e74       )().current
+0003cb00: 5f6e 6f64 655f 6e61 6d65 203d 2022 7468  _node_name = "th
+0003cb10: 7265 7368 6f6c 645f 3122 0a20 2020 2020  reshold_1".     
+0003cb20: 2020 2028 0a20 2020 2020 2020 2020 2020     (.           
+0003cb30: 2070 6970 656c 696e 655f 6564 6974 6f72   pipeline_editor
+0003cb40: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
+0003cb50: 745f 6564 6974 6f72 0a20 2020 2020 2020  t_editor.       
+0003cb60: 2029 2829 2e65 7870 6f72 745f 6e6f 6465   )().export_node
+0003cb70: 5f61 6c6c 5f75 6e63 6f6e 6e65 6374 6564  _all_unconnected
+0003cb80: 5f69 6e70 7574 7328 290a 0a20 2020 2020  _inputs()..     
+0003cb90: 2020 2069 6e70 7574 5f70 726f 6365 7373     input_process
+0003cba0: 203d 2070 6970 656c 696e 652e 6e6f 6465   = pipeline.node
+0003cbb0: 735b 2222 5d2e 7072 6f63 6573 730a 2020  s[""].process.  
+0003cbc0: 2020 2020 2020 6e6f 6465 5f63 6f6e 7472        node_contr
+0003cbd0: 6f6c 6c65 722e 6469 7370 6c61 795f 7061  oller.display_pa
+0003cbe0: 7261 6d65 7465 7273 280a 2020 2020 2020  rameters(.      
+0003cbf0: 2020 2020 2020 2269 6e70 7574 7322 2c20        "inputs", 
+0003cc00: 6765 745f 7072 6f63 6573 735f 696e 7374  get_process_inst
+0003cc10: 616e 6365 2869 6e70 7574 5f70 726f 6365  ance(input_proce
+0003cc20: 7373 292c 2070 6970 656c 696e 650a 2020  ss), pipeline.  
+0003cc30: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+0003cc40: 2069 6620 6861 7361 7474 7228 6e6f 6465   if hasattr(node
+0003cc50: 5f63 6f6e 7472 6f6c 6c65 722c 2022 6765  _controller, "ge
+0003cc60: 745f 696e 6465 785f 6672 6f6d 5f70 6c75  t_index_from_plu
+0003cc70: 675f 6e61 6d65 2229 3a0a 2020 2020 2020  g_name"):.      
+0003cc80: 2020 2020 2020 696e 6465 7820 3d20 6e6f        index = no
+0003cc90: 6465 5f63 6f6e 7472 6f6c 6c65 722e 6765  de_controller.ge
+0003cca0: 745f 696e 6465 785f 6672 6f6d 5f70 6c75  t_index_from_plu
+0003ccb0: 675f 6e61 6d65 280a 2020 2020 2020 2020  g_name(.        
+0003ccc0: 2020 2020 2020 2020 2273 796e 6368 726f          "synchro
+0003ccd0: 6e69 7a65 222c 2022 696e 220a 2020 2020  nize", "in".    
+0003cce0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0003ccf0: 2020 2020 2020 6e6f 6465 5f63 6f6e 7472        node_contr
+0003cd00: 6f6c 6c65 722e 6c69 6e65 5f65 6469 745f  oller.line_edit_
+0003cd10: 696e 7075 745b 696e 6465 785d 2e73 6574  input[index].set
+0003cd20: 5465 7874 2822 3222 290a 2020 2020 2020  Text("2").      
+0003cd30: 2020 2020 2020 2320 5468 6973 2063 616c        # This cal
+0003cd40: 6c73 2022 7570 6461 7465 5f70 6c75 675f  ls "update_plug_
+0003cd50: 7661 6c75 6522 206d 6574 686f 640a 2020  value" method.  
+0003cd60: 2020 2020 2020 2020 2020 6e6f 6465 5f63            node_c
+0003cd70: 6f6e 7472 6f6c 6c65 722e 6c69 6e65 5f65  ontroller.line_e
+0003cd80: 6469 745f 696e 7075 745b 696e 6465 785d  dit_input[index]
+0003cd90: 2e72 6574 7572 6e50 7265 7373 6564 2e65  .returnPressed.e
+0003cda0: 6d69 7428 290a 0a20 2020 2020 2020 2020  mit()..         
+0003cdb0: 2020 2023 2043 616c 6c69 6e67 2074 6865     # Calling the
+0003cdc0: 2064 6973 706c 6179 5f66 696c 7465 7220   display_filter 
+0003cdd0: 6d65 7468 6f64 0a20 2020 2020 2020 2020  method.         
+0003cde0: 2020 206e 6f64 655f 636f 6e74 726f 6c6c     node_controll
+0003cdf0: 6572 2e64 6973 706c 6179 5f66 696c 7465  er.display_filte
+0003ce00: 7228 0a20 2020 2020 2020 2020 2020 2020  r(.             
+0003ce10: 2020 2022 696e 7075 7473 222c 2022 7379     "inputs", "sy
+0003ce20: 6e63 6872 6f6e 697a 6522 2c20 2829 2c20  nchronize", (), 
+0003ce30: 696e 7075 745f 7072 6f63 6573 730a 2020  input_process.  
+0003ce40: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+0003ce50: 2020 2020 2020 2020 6e6f 6465 5f63 6f6e          node_con
+0003ce60: 7472 6f6c 6c65 722e 706f 705f 7570 2e63  troller.pop_up.c
+0003ce70: 6c6f 7365 2829 0a20 2020 2020 2020 2020  lose().         
+0003ce80: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+0003ce90: 7561 6c28 0a20 2020 2020 2020 2020 2020  ual(.           
+0003cea0: 2020 2020 2032 2c20 7069 7065 6c69 6e65       2, pipeline
+0003ceb0: 2e6e 6f64 6573 5b22 7468 7265 7368 6f6c  .nodes["threshol
+0003cec0: 645f 3122 5d2e 6765 745f 706c 7567 5f76  d_1"].get_plug_v
+0003ced0: 616c 7565 2822 7379 6e63 6872 6f6e 697a  alue("synchroniz
+0003cee0: 6522 290a 2020 2020 2020 2020 2020 2020  e").            
+0003cef0: 290a 0a20 2020 2020 2020 2023 2053 7769  )..        # Swi
+0003cf00: 7463 6865 7320 6261 636b 2074 6f20 6e6f  tches back to no
+0003cf10: 6465 2063 6f6e 7472 6f6c 6c65 7220 5632  de controller V2
+0003cf20: 2c20 6966 206e 6563 6573 7361 7279 2028  , if necessary (
+0003cf30: 7265 7475 726e 2074 6f20 696e 6974 6961  return to initia
+0003cf40: 6c0a 2020 2020 2020 2020 2320 7374 6174  l.        # stat
+0003cf50: 6529 0a20 2020 2020 2020 2063 6f6e 6669  e).        confi
+0003cf60: 6720 3d20 436f 6e66 6967 2863 6f6e 6669  g = Config(confi
+0003cf70: 675f 7061 7468 3d73 656c 662e 636f 6e66  g_path=self.conf
+0003cf80: 6967 5f70 6174 6829 0a0a 2020 2020 2020  ig_path)..      
+0003cf90: 2020 6966 206e 6f74 2063 6f6e 7472 6f6c    if not control
+0003cfa0: 5631 5f76 6572 3a0a 2020 2020 2020 2020  V1_ver:.        
+0003cfb0: 2020 2020 636f 6e66 6967 2e73 6574 436f      config.setCo
+0003cfc0: 6e74 726f 6c56 3128 4661 6c73 6529 0a0a  ntrolV1(False)..
+0003cfd0: 2020 2020 6465 6620 7465 7374 5f66 696c      def test_fil
+0003cfe0: 7465 725f 7769 6467 6574 2873 656c 6629  ter_widget(self)
+0003cff0: 3a0a 2020 2020 2020 2020 2222 2250 6c61  :.        """Pla
+0003d000: 6365 7320 6120 6e6f 6465 206f 6620 7468  ces a node of th
+0003d010: 6520 2249 6e70 7574 5f46 696c 7465 7222  e "Input_Filter"
+0003d020: 2070 726f 6365 7373 2c20 6665 6564 7320   process, feeds 
+0003d030: 696e 2064 6f63 756d 656e 7473 0a20 2020  in documents.   
+0003d040: 2020 2020 2061 6e64 206f 7065 6e73 2075       and opens u
+0003d050: 7020 7468 6520 2246 696c 7465 7257 6964  p the "FilterWid
+0003d060: 6765 7428 2922 2074 6f20 6d6f 6469 6679  get()" to modify
+0003d070: 2069 7473 2070 6172 616d 6574 6572 732e   its parameters.
+0003d080: 0a0a 2020 2020 2020 2020 5465 7374 7320  ..        Tests 
+0003d090: 7468 6520 636c 6173 7320 4669 6c74 6572  the class Filter
+0003d0a0: 5769 6467 6574 2829 2077 6974 6869 6e20  Widget() within 
+0003d0b0: 7468 6520 4e6f 6465 2043 6f6e 7472 6f6c  the Node Control
+0003d0c0: 6c65 7220 5631 0a20 2020 2020 2020 2028  ler V1.        (
+0003d0d0: 636c 6173 7320 4e6f 6465 436f 6e74 726f  class NodeContro
+0003d0e0: 6c6c 6572 2829 292e 2054 6865 2063 6c61  ller()). The cla
+0003d0f0: 7373 2046 696c 7465 7257 6964 6765 7428  ss FilterWidget(
+0003d100: 2920 6973 0a20 2020 2020 2020 2069 6e64  ) is.        ind
+0003d110: 6570 656e 6465 6e74 206f 6e20 7468 6520  ependent on the 
+0003d120: 4e6f 6465 0a20 2020 2020 2020 2043 6f6e  Node.        Con
+0003d130: 7472 6f6c 6c65 7220 7665 7273 696f 6e20  troller version 
+0003d140: 2856 3120 6f72 2056 3229 2061 6e64 2063  (V1 or V2) and c
+0003d150: 616e 2062 6520 7573 6564 2069 6e20 626f  an be used in bo
+0003d160: 7468 206f 6620 7468 656d 2e0a 2020 2020  th of them..    
+0003d170: 2020 2020 2222 220a 0a20 2020 2020 2020      """..       
+0003d180: 2063 6f6e 6669 6720 3d20 436f 6e66 6967   config = Config
+0003d190: 2863 6f6e 6669 675f 7061 7468 3d73 656c  (config_path=sel
+0003d1a0: 662e 636f 6e66 6967 5f70 6174 6829 0a20  f.config_path). 
+0003d1b0: 2020 2020 2020 2063 6f6e 7472 6f6c 5631         controlV1
+0003d1c0: 5f76 6572 203d 2063 6f6e 6669 672e 6973  _ver = config.is
+0003d1d0: 436f 6e74 726f 6c56 3128 290a 0a20 2020  ControlV1()..   
+0003d1e0: 2020 2020 2023 2053 7769 7463 6820 746f       # Switch to
+0003d1f0: 2056 3120 6e6f 6465 2063 6f6e 7472 6f6c   V1 node control
+0003d200: 6c65 7220 4755 492c 2069 6620 6e65 6365  ler GUI, if nece
+0003d210: 7373 6172 790a 2020 2020 2020 2020 6966  ssary.        if
+0003d220: 206e 6f74 2063 6f6e 7472 6f6c 5631 5f76   not controlV1_v
+0003d230: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
+0003d240: 636f 6e66 6967 2e73 6574 436f 6e74 726f  config.setContro
+0003d250: 6c56 3128 5472 7565 290a 2020 2020 2020  lV1(True).      
+0003d260: 2020 2020 2020 7365 6c66 2e72 6573 7461        self.resta
+0003d270: 7274 5f4d 4941 2829 0a0a 2020 2020 2020  rt_MIA()..      
+0003d280: 2020 2320 4f70 656e 7320 7072 6f6a 6563    # Opens projec
+0003d290: 7420 3820 616e 6420 7377 6974 6368 6573  t 8 and switches
+0003d2a0: 2074 6f20 6974 0a20 2020 2020 2020 2070   to it.        p
+0003d2b0: 726f 6a65 6374 5f38 5f70 6174 6820 3d20  roject_8_path = 
+0003d2c0: 7365 6c66 2e67 6574 5f6e 6577 5f74 6573  self.get_new_tes
+0003d2d0: 745f 7072 6f6a 6563 7428 290a 2020 2020  t_project().    
+0003d2e0: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
+0003d2f0: 6e64 6f77 2e73 7769 7463 685f 7072 6f6a  ndow.switch_proj
+0003d300: 6563 7428 7072 6f6a 6563 745f 385f 7061  ect(project_8_pa
+0003d310: 7468 2c20 2270 726f 6a65 6374 5f38 2229  th, "project_8")
+0003d320: 0a0a 2020 2020 2020 2020 444f 4355 4d45  ..        DOCUME
+0003d330: 4e54 5f31 203d 2028 7365 6c66 2e6d 6169  NT_1 = (self.mai
+0003d340: 6e5f 7769 6e64 6f77 2e70 726f 6a65 6374  n_window.project
+0003d350: 2e73 6573 7369 6f6e 2e67 6574 5f64 6f63  .session.get_doc
+0003d360: 756d 656e 7473 5f6e 616d 6573 2928 0a20  uments_names)(. 
+0003d370: 2020 2020 2020 2020 2020 2022 6375 7272             "curr
+0003d380: 656e 7422 0a20 2020 2020 2020 2029 5b30  ent".        )[0
+0003d390: 5d0a 2020 2020 2020 2020 444f 4355 4d45  ].        DOCUME
+0003d3a0: 4e54 5f32 203d 2028 7365 6c66 2e6d 6169  NT_2 = (self.mai
+0003d3b0: 6e5f 7769 6e64 6f77 2e70 726f 6a65 6374  n_window.project
+0003d3c0: 2e73 6573 7369 6f6e 2e67 6574 5f64 6f63  .session.get_doc
+0003d3d0: 756d 656e 7473 5f6e 616d 6573 2928 0a20  uments_names)(. 
+0003d3e0: 2020 2020 2020 2020 2020 2022 6375 7272             "curr
+0003d3f0: 656e 7422 0a20 2020 2020 2020 2029 5b31  ent".        )[1
+0003d400: 5d0a 0a20 2020 2020 2020 2070 706c 5f65  ]..        ppl_e
+0003d410: 6474 5f74 6162 7320 3d20 7365 6c66 2e6d  dt_tabs = self.m
+0003d420: 6169 6e5f 7769 6e64 6f77 2e70 6970 656c  ain_window.pipel
+0003d430: 696e 655f 6d61 6e61 6765 722e 7069 7065  ine_manager.pipe
+0003d440: 6c69 6e65 4564 6974 6f72 5461 6273 0a20  lineEditorTabs. 
+0003d450: 2020 2020 2020 206e 6f64 655f 6374 726c         node_ctrl
+0003d460: 6572 203d 2073 656c 662e 6d61 696e 5f77  er = self.main_w
+0003d470: 696e 646f 772e 7069 7065 6c69 6e65 5f6d  indow.pipeline_m
+0003d480: 616e 6167 6572 2e6e 6f64 6543 6f6e 7472  anager.nodeContr
+0003d490: 6f6c 6c65 720a 0a20 2020 2020 2020 2023  oller..        #
+0003d4a0: 2041 6464 7320 7468 6520 7072 6f63 6573   Adds the proces
+0003d4b0: 7320 2269 6e70 7574 5f66 696c 7465 725f  s "input_filter_
+0003d4c0: 3122 0a20 2020 2020 2020 2070 726f 6365  1".        proce
+0003d4d0: 7373 5f63 6c61 7373 203d 2049 6e70 7574  ss_class = Input
+0003d4e0: 5f46 696c 7465 720a 2020 2020 2020 2020  _Filter.        
+0003d4f0: 7070 6c5f 6564 745f 7461 6273 2e67 6574  ppl_edt_tabs.get
+0003d500: 5f63 7572 7265 6e74 5f65 6469 746f 7228  _current_editor(
+0003d510: 292e 636c 6963 6b5f 706f 7320 3d20 5150  ).click_pos = QP
+0003d520: 6f69 6e74 2834 3530 2c20 3530 3029 0a20  oint(450, 500). 
+0003d530: 2020 2020 2020 2070 706c 5f65 6474 5f74         ppl_edt_t
+0003d540: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
+0003d550: 6564 6974 6f72 2829 2e61 6464 5f6e 616d  editor().add_nam
+0003d560: 6564 5f70 726f 6365 7373 2870 726f 6365  ed_process(proce
+0003d570: 7373 5f63 6c61 7373 290a 2020 2020 2020  ss_class).      
+0003d580: 2020 7069 7065 6c69 6e65 203d 2070 706c    pipeline = ppl
+0003d590: 5f65 6474 5f74 6162 732e 6765 745f 6375  _edt_tabs.get_cu
+0003d5a0: 7272 656e 745f 7069 7065 6c69 6e65 2829  rrent_pipeline()
+0003d5b0: 0a0a 2020 2020 2020 2020 2320 4578 706f  ..        # Expo
+0003d5c0: 7274 7320 7468 6520 696e 7075 7420 706c  rts the input pl
+0003d5d0: 7567 7320 666f 7220 2269 6e70 7574 5f66  ugs for "input_f
+0003d5e0: 696c 7465 725f 3122 0a20 2020 2020 2020  ilter_1".       
+0003d5f0: 2070 706c 5f65 6474 5f74 6162 732e 6765   ppl_edt_tabs.ge
+0003d600: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
+0003d610: 2829 2e63 7572 7265 6e74 5f6e 6f64 655f  ().current_node_
+0003d620: 6e61 6d65 203d 2022 696e 7075 745f 6669  name = "input_fi
+0003d630: 6c74 6572 5f31 220a 2020 2020 2020 2020  lter_1".        
+0003d640: 280a 2020 2020 2020 2020 2020 2020 7070  (.            pp
+0003d650: 6c5f 6564 745f 7461 6273 2e67 6574 5f63  l_edt_tabs.get_c
+0003d660: 7572 7265 6e74 5f65 6469 746f 720a 2020  urrent_editor.  
+0003d670: 2020 2020 2020 2928 292e 6578 706f 7274        )().export
+0003d680: 5f6e 6f64 655f 756e 636f 6e6e 6563 7465  _node_unconnecte
+0003d690: 645f 6d61 6e64 6174 6f72 795f 706c 7567  d_mandatory_plug
+0003d6a0: 7328 290a 0a20 2020 2020 2020 2023 2044  s()..        # D
+0003d6b0: 6973 706c 6179 7320 7061 7261 6d65 7465  isplays paramete
+0003d6c0: 7273 206f 6620 7468 6520 2269 6e70 7574  rs of the "input
+0003d6d0: 7322 206e 6f64 650a 2020 2020 2020 2020  s" node.        
+0003d6e0: 696e 7075 745f 7072 6f63 6573 7320 3d20  input_process = 
+0003d6f0: 7069 7065 6c69 6e65 2e6e 6f64 6573 5b22  pipeline.nodes["
+0003d700: 225d 2e70 726f 6365 7373 0a20 2020 2020  "].process.     
+0003d710: 2020 206e 6f64 655f 6374 726c 6572 2e64     node_ctrler.d
+0003d720: 6973 706c 6179 5f70 6172 616d 6574 6572  isplay_parameter
+0003d730: 7328 0a20 2020 2020 2020 2020 2020 2022  s(.            "
+0003d740: 696e 7075 7473 222c 2067 6574 5f70 726f  inputs", get_pro
+0003d750: 6365 7373 5f69 6e73 7461 6e63 6528 696e  cess_instance(in
+0003d760: 7075 745f 7072 6f63 6573 7329 2c20 7069  put_process), pi
+0003d770: 7065 6c69 6e65 0a20 2020 2020 2020 2029  peline.        )
+0003d780: 0a0a 2020 2020 2020 2020 2320 4f70 656e  ..        # Open
+0003d790: 7320 6120 6669 6c74 6572 2066 6f72 2074  s a filter for t
+0003d7a0: 6865 2070 6c75 6720 2269 6e70 7574 2220  he plug "input" 
+0003d7b0: 6f66 2074 6865 2022 696e 7075 7473 2220  of the "inputs" 
+0003d7c0: 6e6f 6465 0a20 2020 2020 2020 2070 6172  node.        par
+0003d7d0: 616d 6574 6572 7320 3d20 2830 2c20 7069  ameters = (0, pi
+0003d7e0: 7065 6c69 6e65 2c20 7479 7065 2855 6e64  peline, type(Und
+0003d7f0: 6566 696e 6564 2929 0a20 2020 2020 2020  efined)).       
+0003d800: 206e 6f64 655f 6374 726c 6572 2e64 6973   node_ctrler.dis
+0003d810: 706c 6179 5f66 696c 7465 7228 0a20 2020  play_filter(.   
+0003d820: 2020 2020 2020 2020 2022 696e 7075 7473           "inputs
+0003d830: 222c 2022 696e 7075 7422 2c20 7061 7261  ", "input", para
+0003d840: 6d65 7465 7273 2c20 696e 7075 745f 7072  meters, input_pr
+0003d850: 6f63 6573 730a 2020 2020 2020 2020 290a  ocess.        ).
+0003d860: 0a20 2020 2020 2020 2023 2053 656c 6563  .        # Selec
+0003d870: 7473 2061 6c6c 2072 6563 6f72 6473 2069  ts all records i
+0003d880: 6e20 7468 6520 2269 6e70 7574 2220 6e6f  n the "input" no
+0003d890: 6465 0a20 2020 2020 2020 2070 6c75 675f  de.        plug_
+0003d8a0: 6669 6c74 6572 203d 206e 6f64 655f 6374  filter = node_ct
+0003d8b0: 726c 6572 2e70 6f70 5f75 700a 0a20 2020  rler.pop_up..   
+0003d8c0: 2020 2020 2070 6c75 675f 6669 6c74 6572       plug_filter
+0003d8d0: 2e6f 6b5f 636c 6963 6b65 6428 290a 0a20  .ok_clicked().. 
+0003d8e0: 2020 2020 2020 2023 204f 7065 6e73 2074         # Opens t
+0003d8f0: 6865 2066 696c 7465 7220 7769 6467 6574  he filter widget
+0003d900: 2066 6f72 2074 6865 206e 6f64 6520 2269   for the node "i
+0003d910: 6e70 7574 5f66 696c 7465 725f 3122 0a20  nput_filter_1". 
+0003d920: 2020 2020 2020 2070 706c 5f65 6474 5f74         ppl_edt_t
+0003d930: 6162 732e 6f70 656e 5f66 696c 7465 7228  abs.open_filter(
+0003d940: 2269 6e70 7574 5f66 696c 7465 725f 3122  "input_filter_1"
+0003d950: 290a 2020 2020 2020 2020 696e 7075 745f  ).        input_
+0003d960: 6669 6c74 6572 203d 2070 706c 5f65 6474  filter = ppl_edt
+0003d970: 5f74 6162 732e 6669 6c74 6572 5f77 6964  _tabs.filter_wid
+0003d980: 6765 740a 0a20 2020 2020 2020 2069 6e64  get..        ind
+0003d990: 6578 5f44 4f43 554d 454e 545f 3120 3d20  ex_DOCUMENT_1 = 
+0003d9a0: 696e 7075 745f 6669 6c74 6572 2e74 6162  input_filter.tab
+0003d9b0: 6c65 5f64 6174 612e 6765 745f 7363 616e  le_data.get_scan
+0003d9c0: 5f72 6f77 2844 4f43 554d 454e 545f 3129  _row(DOCUMENT_1)
+0003d9d0: 0a20 2020 2020 2020 2023 2069 6e64 6578  .        # index
+0003d9e0: 5f44 4f43 554d 454e 545f 3220 3d20 696e  _DOCUMENT_2 = in
+0003d9f0: 7075 745f 6669 6c74 6572 2e74 6162 6c65  put_filter.table
+0003da00: 5f64 6174 612e 6765 745f 7363 616e 5f72  _data.get_scan_r
+0003da10: 6f77 2844 4f43 554d 454e 545f 3229 0a0a  ow(DOCUMENT_2)..
+0003da20: 2020 2020 2020 2020 2320 5472 6965 7320          # Tries 
+0003da30: 746f 2073 6561 7263 6820 666f 7220 616e  to search for an
+0003da40: 2065 6d70 7479 2073 7472 696e 6720 616e   empty string an
+0003da50: 6420 6173 7365 7274 7320 7468 6174 206e  d asserts that n
+0003da60: 6f6e 6520 6f66 2074 6865 0a20 2020 2020  one of the.     
+0003da70: 2020 2023 2064 6f63 756d 656e 7473 2061     # documents a
+0003da80: 7265 2068 6964 6465 6e0a 2020 2020 2020  re hidden.      
+0003da90: 2020 696e 7075 745f 6669 6c74 6572 2e73    input_filter.s
+0003daa0: 6561 7263 685f 7374 7228 2222 290a 0a20  earch_str("").. 
+0003dab0: 2020 2020 2020 2023 2054 6573 7420 2244         # Test "D
+0003dac0: 4f43 554d 454e 545f 3122 2069 7320 6e6f  OCUMENT_1" is no
+0003dad0: 7420 6869 6464 656e 0a20 2020 2020 2020  t hidden.       
+0003dae0: 2023 2046 4958 4d45 3a20 4f6e 6c79 2066   # FIXME: Only f
+0003daf0: 6f72 2074 6865 2057 696e 646f 7773 2076  or the Windows v
+0003db00: 6572 7369 6f6e 2c20 7468 6520 6d65 7468  ersion, the meth
+0003db10: 6f64 2069 7352 6f77 4869 6464 656e 2829  od isRowHidden()
+0003db20: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0003db30: 2020 646f 6573 206e 6f74 2073 6565 6d20    does not seem 
+0003db40: 746f 2067 6976 6520 7468 6520 6578 7065  to give the expe
+0003db50: 6374 6564 2072 6573 756c 742e 2057 6169  cted result. Wai
+0003db60: 7469 6e67 2074 6f20 6c6f 6f6b 2061 740a  ting to look at.
+0003db70: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0003db80: 2074 6869 732c 2077 6520 636f 6d6d 656e   this, we commen
+0003db90: 7420 2e2e 0a20 2020 2020 2020 2023 2073  t ...        # s
+0003dba0: 656c 662e 6173 7365 7274 4661 6c73 6528  elf.assertFalse(
+0003dbb0: 696e 7075 745f 6669 6c74 6572 2e74 6162  input_filter.tab
+0003dbc0: 6c65 5f64 6174 612e 6973 526f 7748 6964  le_data.isRowHid
+0003dbd0: 6465 6e28 696e 6465 785f 444f 4355 4d45  den(index_DOCUME
+0003dbe0: 4e54 5f31 2929 0a20 2020 2020 2020 2023  NT_1)).        #
+0003dbf0: 2054 6573 7420 2244 4f43 554d 454e 545f   Test "DOCUMENT_
+0003dc00: 3222 2069 7320 6e6f 7420 6869 6464 656e  2" is not hidden
+0003dc10: 0a20 2020 2020 2020 2023 2046 4958 4d45  .        # FIXME
+0003dc20: 3a20 4f6e 6c79 2066 6f72 2074 6865 2057  : Only for the W
+0003dc30: 696e 646f 7773 2076 6572 7369 6f6e 2c20  indows version, 
+0003dc40: 7468 6520 6d65 7468 6f64 2069 7352 6f77  the method isRow
+0003dc50: 4869 6464 656e 2829 0a20 2020 2020 2020  Hidden().       
+0003dc60: 2023 2020 2020 2020 2020 646f 6573 206e   #        does n
+0003dc70: 6f74 2073 6565 6d20 746f 2067 6976 6520  ot seem to give 
+0003dc80: 7468 6520 6578 7065 6374 6564 2072 6573  the expected res
+0003dc90: 756c 742e 2057 6169 7469 6e67 2074 6f20  ult. Waiting to 
+0003dca0: 6c6f 6f6b 2061 740a 2020 2020 2020 2020  look at.        
+0003dcb0: 2320 2020 2020 2020 2074 6869 732c 2077  #        this, w
+0003dcc0: 6520 636f 6d6d 656e 7420 2e2e 0a20 2020  e comment ...   
+0003dcd0: 2020 2020 2023 2073 656c 662e 6173 7365       # self.asse
+0003dce0: 7274 4661 6c73 6528 696e 7075 745f 6669  rtFalse(input_fi
+0003dcf0: 6c74 6572 2e74 6162 6c65 5f64 6174 612e  lter.table_data.
+0003dd00: 6973 526f 7748 6964 6465 6e28 696e 6465  isRowHidden(inde
+0003dd10: 785f 444f 4355 4d45 4e54 5f32 2929 0a0a  x_DOCUMENT_2))..
+0003dd20: 2020 2020 2020 2020 2320 5365 6172 6368          # Search
+0003dd30: 6573 2066 6f72 2022 444f 4355 4d45 4e54  es for "DOCUMENT
+0003dd40: 5f32 2220 616e 6420 7665 7269 6669 6573  _2" and verifies
+0003dd50: 2074 6861 7420 2244 4f43 554d 454e 545f   that "DOCUMENT_
+0003dd60: 3122 2069 7320 6869 6464 656e 0a20 2020  1" is hidden.   
+0003dd70: 2020 2020 2069 6e70 7574 5f66 696c 7465       input_filte
+0003dd80: 722e 7365 6172 6368 5f73 7472 2844 4f43  r.search_str(DOC
+0003dd90: 554d 454e 545f 3229 0a20 2020 2020 2020  UMENT_2).       
+0003dda0: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
+0003ddb0: 2869 6e70 7574 5f66 696c 7465 722e 7461  (input_filter.ta
+0003ddc0: 626c 655f 6461 7461 2e69 7352 6f77 4869  ble_data.isRowHi
+0003ddd0: 6464 656e 2869 6e64 6578 5f44 4f43 554d  dden(index_DOCUM
+0003dde0: 454e 545f 3129 290a 0a20 2020 2020 2020  ENT_1))..       
+0003ddf0: 2023 2052 6573 6574 7320 7468 6520 7365   # Resets the se
+0003de00: 6172 6368 2062 6172 2061 6e64 2061 7373  arch bar and ass
+0003de10: 6572 7420 7468 6174 206e 6f6e 6520 6f66  ert that none of
+0003de20: 2074 6865 2064 6f63 756d 656e 7473 0a20   the documents. 
+0003de30: 2020 2020 2020 2023 2061 7265 2068 6964         # are hid
+0003de40: 6465 6e0a 2020 2020 2020 2020 696e 7075  den.        inpu
+0003de50: 745f 6669 6c74 6572 2e72 6573 6574 5f73  t_filter.reset_s
+0003de60: 6561 7263 685f 6261 7228 290a 0a20 2020  earch_bar()..   
+0003de70: 2020 2020 2023 2054 6573 7420 2244 4f43       # Test "DOC
+0003de80: 554d 454e 545f 3122 2069 7320 6e6f 7420  UMENT_1" is not 
+0003de90: 6869 6464 656e 0a20 2020 2020 2020 2023  hidden.        #
+0003dea0: 2046 4958 4d45 3a20 4f6e 6c79 2066 6f72   FIXME: Only for
+0003deb0: 2074 6865 2057 696e 646f 7773 2076 6572   the Windows ver
+0003dec0: 7369 6f6e 2c20 7468 6520 6d65 7468 6f64  sion, the method
+0003ded0: 2069 7352 6f77 4869 6464 656e 2829 0a20   isRowHidden(). 
+0003dee0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0003def0: 646f 6573 206e 6f74 2073 6565 6d20 746f  does not seem to
+0003df00: 2067 6976 6520 7468 6520 6578 7065 6374   give the expect
+0003df10: 6564 2072 6573 756c 742e 2057 6169 7469  ed result. Waiti
+0003df20: 6e67 2074 6f20 6c6f 6f6b 2061 740a 2020  ng to look at.  
+0003df30: 2020 2020 2020 2320 2020 2020 2020 2074        #        t
+0003df40: 6869 732c 2077 6520 636f 6d6d 656e 7420  his, we comment 
+0003df50: 2e2e 0a20 2020 2020 2020 2023 2073 656c  ...        # sel
+0003df60: 662e 6173 7365 7274 4661 6c73 6528 696e  f.assertFalse(in
+0003df70: 7075 745f 6669 6c74 6572 2e74 6162 6c65  put_filter.table
+0003df80: 5f64 6174 612e 6973 526f 7748 6964 6465  _data.isRowHidde
+0003df90: 6e28 696e 6465 785f 444f 4355 4d45 4e54  n(index_DOCUMENT
+0003dfa0: 5f31 2929 0a20 2020 2020 2020 2023 2054  _1)).        # T
+0003dfb0: 6573 7420 2244 4f43 554d 454e 545f 3122  est "DOCUMENT_1"
+0003dfc0: 2069 7320 6e6f 7420 6869 6464 656e 0a20   is not hidden. 
+0003dfd0: 2020 2020 2020 2023 2046 4958 4d45 3a20         # FIXME: 
+0003dfe0: 4f6e 6c79 2066 6f72 2074 6865 2057 696e  Only for the Win
+0003dff0: 646f 7773 2076 6572 7369 6f6e 2c20 7468  dows version, th
+0003e000: 6520 6d65 7468 6f64 2069 7352 6f77 4869  e method isRowHi
+0003e010: 6464 656e 2829 0a20 2020 2020 2020 2023  dden().        #
+0003e020: 2020 2020 2020 2020 646f 6573 206e 6f74          does not
+0003e030: 2073 6565 6d20 746f 2067 6976 6520 7468   seem to give th
+0003e040: 6520 6578 7065 6374 6564 2072 6573 756c  e expected resul
+0003e050: 742e 2057 6169 7469 6e67 2074 6f20 6c6f  t. Waiting to lo
+0003e060: 6f6b 2061 740a 2020 2020 2020 2020 2320  ok at.        # 
+0003e070: 2020 2020 2020 2074 6869 732c 2077 6520         this, we 
+0003e080: 636f 6d6d 656e 7420 2e2e 0a20 2020 2020  comment ...     
+0003e090: 2020 2023 2073 656c 662e 6173 7365 7274     # self.assert
+0003e0a0: 4661 6c73 6528 696e 7075 745f 6669 6c74  False(input_filt
+0003e0b0: 6572 2e74 6162 6c65 5f64 6174 612e 6973  er.table_data.is
+0003e0c0: 526f 7748 6964 6465 6e28 696e 6465 785f  RowHidden(index_
+0003e0d0: 444f 4355 4d45 4e54 5f32 2929 0a0a 2020  DOCUMENT_2))..  
+0003e0e0: 2020 2020 2020 2320 4f70 656e 7320 7468        # Opens th
+0003e0f0: 6520 2256 6973 7561 6c69 7a65 6420 7461  e "Visualized ta
+0003e100: 6773 2220 706f 7020 7570 2061 6e64 2061  gs" pop up and a
+0003e110: 6464 7320 7468 6520 2241 6371 7569 7369  dds the "Acquisi
+0003e120: 7469 6f6e 4461 7465 2220 7461 670a 2020  tionDate" tag.  
+0003e130: 2020 2020 2020 696e 7075 745f 6669 6c74        input_filt
+0003e140: 6572 2e75 7064 6174 655f 7461 6773 2829  er.update_tags()
+0003e150: 0a20 2020 2020 2020 2073 656c 662e 6164  .        self.ad
+0003e160: 645f 7669 7375 616c 697a 6564 5f74 6167  d_visualized_tag
+0003e170: 2822 4163 7175 6973 6974 696f 6e44 6174  ("AcquisitionDat
+0003e180: 6522 290a 2020 2020 2020 2020 2320 4649  e").        # FI
+0003e190: 584d 453a 2054 6865 2066 6f6c 6c6f 7769  XME: The followi
+0003e1a0: 6e67 2073 7461 7465 6d65 6e74 2069 7320  ng statement is 
+0003e1b0: 616c 7761 7973 2054 7275 6520 286e 6f74  always True (not
+0003e1c0: 2074 6865 2063 6f72 7265 6374 2074 6573   the correct tes
+0003e1d0: 7429 0a20 2020 2020 2020 2073 656c 662e  t).        self.
+0003e1e0: 6173 7365 7274 5472 7565 280a 2020 2020  assertTrue(.    
+0003e1f0: 2020 2020 2020 2020 7479 7065 2869 6e70          type(inp
+0003e200: 7574 5f66 696c 7465 722e 7461 626c 655f  ut_filter.table_
+0003e210: 6461 7461 2e67 6574 5f74 6167 5f63 6f6c  data.get_tag_col
+0003e220: 756d 6e28 2241 6371 7569 7369 7469 6f6e  umn("Acquisition
+0003e230: 4461 7465 2229 290a 2020 2020 2020 2020  Date")).        
+0003e240: 2020 2020 3d3d 2069 6e74 0a20 2020 2020      == int.     
+0003e250: 2020 2029 0a0a 2020 2020 2020 2020 2320     )..        # 
+0003e260: 5570 6461 7465 7320 7468 6520 7461 6720  Updates the tag 
+0003e270: 746f 2066 696c 7465 7220 7769 7468 0a20  to filter with. 
+0003e280: 2020 2020 2020 2069 6e70 7574 5f66 696c         input_fil
+0003e290: 7465 722e 7570 6461 7465 5f74 6167 5f74  ter.update_tag_t
+0003e2a0: 6f5f 6669 6c74 6572 2829 0a0a 2020 2020  o_filter()..    
+0003e2b0: 2020 2020 696e 7075 745f 6669 6c74 6572      input_filter
+0003e2c0: 2e70 7573 685f 6275 7474 6f6e 5f74 6167  .push_button_tag
+0003e2d0: 5f66 696c 7465 722e 7365 7454 6578 7428  _filter.setText(
+0003e2e0: 2246 696c 654e 616d 6522 290a 2020 2020  "FileName").    
+0003e2f0: 2020 2020 2320 544f 444f 3a20 7365 6c65      # TODO: sele
+0003e300: 6374 2074 6167 2074 6f20 6669 6c74 6572  ct tag to filter
+0003e310: 2077 6974 680a 0a20 2020 2020 2020 2023   with..        #
+0003e320: 2043 6c6f 7365 7320 7468 6520 6669 6c74   Closes the filt
+0003e330: 6572 0a20 2020 2020 2020 2069 6e70 7574  er.        input
+0003e340: 5f66 696c 7465 722e 6f6b 5f63 6c69 636b  _filter.ok_click
+0003e350: 6564 2829 0a0a 2020 2020 2020 2020 2320  ed()..        # 
+0003e360: 5377 6974 6368 6573 2062 6163 6b20 746f  Switches back to
+0003e370: 206e 6f64 6520 636f 6e74 726f 6c6c 6572   node controller
+0003e380: 2056 322c 2069 6620 6e65 6365 7373 6172   V2, if necessar
+0003e390: 7920 2872 6574 7572 6e20 746f 2069 6e69  y (return to ini
+0003e3a0: 7469 616c 0a20 2020 2020 2020 2023 2073  tial.        # s
+0003e3b0: 7461 7465 290a 2020 2020 2020 2020 636f  tate).        co
+0003e3c0: 6e66 6967 203d 2043 6f6e 6669 6728 636f  nfig = Config(co
+0003e3d0: 6e66 6967 5f70 6174 683d 7365 6c66 2e63  nfig_path=self.c
+0003e3e0: 6f6e 6669 675f 7061 7468 290a 0a20 2020  onfig_path)..   
+0003e3f0: 2020 2020 2069 6620 6e6f 7420 636f 6e74       if not cont
+0003e400: 726f 6c56 315f 7665 723a 0a20 2020 2020  rolV1_ver:.     
+0003e410: 2020 2020 2020 2063 6f6e 6669 672e 7365         config.se
+0003e420: 7443 6f6e 7472 6f6c 5631 2846 616c 7365  tControlV1(False
+0003e430: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
+0003e440: 6e6f 6465 5f63 6f6e 7472 6f6c 6c65 7228  node_controller(
+0003e450: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
+0003e460: 2222 4164 6473 2c20 6368 616e 6765 7320  ""Adds, changes 
+0003e470: 616e 6420 6465 6c65 7465 7320 7072 6f63  and deletes proc
+0003e480: 6573 7365 7320 746f 2074 6865 206e 6f64  esses to the nod
+0003e490: 6520 636f 6e74 726f 6c6c 6572 2c0a 2020  e controller,.  
+0003e4a0: 2020 2020 2020 6469 7370 6c61 7920 7468        display th
+0003e4b0: 6520 6174 7472 6962 7574 6573 2066 696c  e attributes fil
+0003e4c0: 7465 722e 0a0a 2020 2020 2020 2020 5465  ter...        Te
+0003e4d0: 7374 7320 7468 6520 636c 6173 7320 4e6f  sts the class No
+0003e4e0: 6465 436f 6e74 726f 6c6c 6572 2829 2e0a  deController()..
+0003e4f0: 2020 2020 2020 2020 2222 220a 0a20 2020          """..   
+0003e500: 2020 2020 2063 6f6e 6669 6720 3d20 436f       config = Co
+0003e510: 6e66 6967 2863 6f6e 6669 675f 7061 7468  nfig(config_path
+0003e520: 3d73 656c 662e 636f 6e66 6967 5f70 6174  =self.config_pat
+0003e530: 6829 0a20 2020 2020 2020 2063 6f6e 7472  h).        contr
+0003e540: 6f6c 5631 5f76 6572 203d 2063 6f6e 6669  olV1_ver = confi
+0003e550: 672e 6973 436f 6e74 726f 6c56 3128 290a  g.isControlV1().
+0003e560: 0a20 2020 2020 2020 2023 2053 7769 7463  .        # Switc
+0003e570: 6820 746f 2056 3120 6e6f 6465 2063 6f6e  h to V1 node con
+0003e580: 7472 6f6c 6c65 7220 4755 492c 2069 6620  troller GUI, if 
+0003e590: 6e65 6365 7373 6172 790a 2020 2020 2020  necessary.      
+0003e5a0: 2020 6966 206e 6f74 2063 6f6e 7472 6f6c    if not control
+0003e5b0: 5631 5f76 6572 3a0a 2020 2020 2020 2020  V1_ver:.        
+0003e5c0: 2020 2020 636f 6e66 6967 2e73 6574 436f      config.setCo
+0003e5d0: 6e74 726f 6c56 3128 5472 7565 290a 2020  ntrolV1(True).  
+0003e5e0: 2020 2020 2020 2020 2020 7365 6c66 2e72            self.r
+0003e5f0: 6573 7461 7274 5f4d 4941 2829 0a0a 2020  estart_MIA()..  
+0003e600: 2020 2020 2020 2320 4f70 656e 7320 7072        # Opens pr
+0003e610: 6f6a 6563 7420 3820 616e 6420 7377 6974  oject 8 and swit
+0003e620: 6368 6573 2074 6f20 6974 0a20 2020 2020  ches to it.     
+0003e630: 2020 2070 726f 6a65 6374 5f38 5f70 6174     project_8_pat
+0003e640: 6820 3d20 7365 6c66 2e67 6574 5f6e 6577  h = self.get_new
+0003e650: 5f74 6573 745f 7072 6f6a 6563 7428 290a  _test_project().
+0003e660: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
+0003e670: 6e5f 7769 6e64 6f77 2e73 7769 7463 685f  n_window.switch_
+0003e680: 7072 6f6a 6563 7428 7072 6f6a 6563 745f  project(project_
+0003e690: 385f 7061 7468 2c20 2270 726f 6a65 6374  8_path, "project
+0003e6a0: 5f38 2229 0a0a 2020 2020 2020 2020 444f  _8")..        DO
+0003e6b0: 4355 4d45 4e54 5f31 203d 2028 7365 6c66  CUMENT_1 = (self
+0003e6c0: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 726f  .main_window.pro
+0003e6d0: 6a65 6374 2e73 6573 7369 6f6e 2e67 6574  ject.session.get
+0003e6e0: 5f64 6f63 756d 656e 7473 5f6e 616d 6573  _documents_names
+0003e6f0: 2928 0a20 2020 2020 2020 2020 2020 2022  )(.            "
+0003e700: 6375 7272 656e 7422 0a20 2020 2020 2020  current".       
+0003e710: 2029 5b30 5d0a 0a20 2020 2020 2020 2070   )[0]..        p
+0003e720: 706c 5f65 6474 5f74 6162 7320 3d20 7365  pl_edt_tabs = se
+0003e730: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
+0003e740: 6970 656c 696e 655f 6d61 6e61 6765 722e  ipeline_manager.
+0003e750: 7069 7065 6c69 6e65 4564 6974 6f72 5461  pipelineEditorTa
+0003e760: 6273 0a20 2020 2020 2020 206e 6f64 655f  bs.        node_
+0003e770: 6374 726c 6572 203d 2073 656c 662e 6d61  ctrler = self.ma
+0003e780: 696e 5f77 696e 646f 772e 7069 7065 6c69  in_window.pipeli
+0003e790: 6e65 5f6d 616e 6167 6572 2e6e 6f64 6543  ne_manager.nodeC
+0003e7a0: 6f6e 7472 6f6c 6c65 720a 0a20 2020 2020  ontroller..     
+0003e7b0: 2020 2023 2041 6464 2c20 7477 6963 652c     # Add, twice,
+0003e7c0: 2074 6865 2070 726f 6365 7373 2052 656e   the process Ren
+0003e7d0: 616d 652c 2063 7265 6174 6573 2074 6865  ame, creates the
+0003e7e0: 2022 7265 6e61 6d65 5f31 2220 616e 6420   "rename_1" and 
+0003e7f0: 2272 656e 616d 655f 3222 0a20 2020 2020  "rename_2".     
+0003e800: 2020 2023 206e 6f64 6573 0a20 2020 2020     # nodes.     
+0003e810: 2020 2070 726f 6365 7373 5f63 6c61 7373     process_class
+0003e820: 203d 2052 656e 616d 650a 2020 2020 2020   = Rename.      
+0003e830: 2020 7070 6c5f 6564 745f 7461 6273 2e67    ppl_edt_tabs.g
+0003e840: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
+0003e850: 7228 292e 636c 6963 6b5f 706f 7320 3d20  r().click_pos = 
+0003e860: 5150 6f69 6e74 2834 3530 2c20 3530 3029  QPoint(450, 500)
+0003e870: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
+0003e880: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
+0003e890: 745f 6564 6974 6f72 2829 2e61 6464 5f6e  t_editor().add_n
+0003e8a0: 616d 6564 5f70 726f 6365 7373 2870 726f  amed_process(pro
+0003e8b0: 6365 7373 5f63 6c61 7373 290a 2020 2020  cess_class).    
+0003e8c0: 2020 2020 7070 6c5f 6564 745f 7461 6273      ppl_edt_tabs
+0003e8d0: 2e67 6574 5f63 7572 7265 6e74 5f65 6469  .get_current_edi
+0003e8e0: 746f 7228 292e 6164 645f 6e61 6d65 645f  tor().add_named_
+0003e8f0: 7072 6f63 6573 7328 7072 6f63 6573 735f  process(process_
+0003e900: 636c 6173 7329 0a20 2020 2020 2020 2070  class).        p
+0003e910: 6970 656c 696e 6520 3d20 7070 6c5f 6564  ipeline = ppl_ed
+0003e920: 745f 7461 6273 2e67 6574 5f63 7572 7265  t_tabs.get_curre
+0003e930: 6e74 5f70 6970 656c 696e 6528 290a 0a20  nt_pipeline().. 
+0003e940: 2020 2020 2020 2023 2044 6973 706c 6179         # Display
+0003e950: 7320 7061 7261 6d65 7465 7273 206f 6620  s parameters of 
+0003e960: 2272 656e 616d 655f 3222 206e 6f64 650a  "rename_2" node.
+0003e970: 2020 2020 2020 2020 7265 6e61 6d65 5f70          rename_p
+0003e980: 726f 6365 7373 203d 2070 6970 656c 696e  rocess = pipelin
+0003e990: 652e 6e6f 6465 735b 2272 656e 616d 655f  e.nodes["rename_
+0003e9a0: 3222 5d2e 7072 6f63 6573 730a 2020 2020  2"].process.    
+0003e9b0: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
+0003e9c0: 6e64 6f77 2e70 6970 656c 696e 655f 6d61  ndow.pipeline_ma
+0003e9d0: 6e61 6765 722e 6469 7370 6c61 794e 6f64  nager.displayNod
+0003e9e0: 6550 6172 616d 6574 6572 7328 0a20 2020  eParameters(.   
+0003e9f0: 2020 2020 2020 2020 2022 7265 6e61 6d65           "rename
+0003ea00: 5f32 222c 2072 656e 616d 655f 7072 6f63  _2", rename_proc
+0003ea10: 6573 730a 2020 2020 2020 2020 290a 0a20  ess.        ).. 
+0003ea20: 2020 2020 2020 2023 2054 7269 6573 2074         # Tries t
+0003ea30: 6f20 6368 616e 6765 2069 7473 206e 616d  o change its nam
+0003ea40: 6520 746f 2022 7265 6e61 6d65 5f31 2220  e to "rename_1" 
+0003ea50: 616e 6420 7468 656e 2074 6f20 2272 656e  and then to "ren
+0003ea60: 616d 655f 3322 0a20 2020 2020 2020 206e  ame_3".        n
+0003ea70: 6f64 655f 6374 726c 6572 2e75 7064 6174  ode_ctrler.updat
+0003ea80: 655f 6e6f 6465 5f6e 616d 6528 290a 2020  e_node_name().  
+0003ea90: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0003eaa0: 7445 7175 616c 286e 6f64 655f 6374 726c  tEqual(node_ctrl
+0003eab0: 6572 2e6e 6f64 655f 6e61 6d65 2c20 2272  er.node_name, "r
+0003eac0: 656e 616d 655f 3222 290a 2020 2020 2020  ename_2").      
+0003ead0: 2020 6e6f 6465 5f63 7472 6c65 722e 7570    node_ctrler.up
+0003eae0: 6461 7465 5f6e 6f64 655f 6e61 6d65 286e  date_node_name(n
+0003eaf0: 6577 5f6e 6f64 655f 6e61 6d65 3d22 7265  ew_node_name="re
+0003eb00: 6e61 6d65 5f31 2229 0a20 2020 2020 2020  name_1").       
+0003eb10: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0003eb20: 6c28 6e6f 6465 5f63 7472 6c65 722e 6e6f  l(node_ctrler.no
+0003eb30: 6465 5f6e 616d 652c 2022 7265 6e61 6d65  de_name, "rename
+0003eb40: 5f32 2229 0a20 2020 2020 2020 206e 6f64  _2").        nod
+0003eb50: 655f 6374 726c 6572 2e75 7064 6174 655f  e_ctrler.update_
+0003eb60: 6e6f 6465 5f6e 616d 6528 6e65 775f 6e6f  node_name(new_no
+0003eb70: 6465 5f6e 616d 653d 2272 656e 616d 655f  de_name="rename_
+0003eb80: 3322 290a 2020 2020 2020 2020 7365 6c66  3").        self
+0003eb90: 2e61 7373 6572 7445 7175 616c 286e 6f64  .assertEqual(nod
+0003eba0: 655f 6374 726c 6572 2e6e 6f64 655f 6e61  e_ctrler.node_na
+0003ebb0: 6d65 2c20 2272 656e 616d 655f 3322 290a  me, "rename_3").
+0003ebc0: 0a20 2020 2020 2020 2023 2044 656c 6574  .        # Delet
+0003ebd0: 6573 206e 6f64 6520 2272 656e 616d 655f  es node "rename_
+0003ebe0: 3222 0a20 2020 2020 2020 2070 706c 5f65  2".        ppl_e
+0003ebf0: 6474 5f74 6162 732e 6765 745f 6375 7272  dt_tabs.get_curr
+0003ec00: 656e 745f 6564 6974 6f72 2829 2e64 656c  ent_editor().del
+0003ec10: 5f6e 6f64 6528 2272 656e 616d 655f 3322  _node("rename_3"
+0003ec20: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0003ec30: 7373 6572 7452 6169 7365 7328 4b65 7945  ssertRaises(KeyE
+0003ec40: 7272 6f72 2c20 6c61 6d62 6461 3a20 7069  rror, lambda: pi
+0003ec50: 7065 6c69 6e65 2e6e 6f64 6573 5b22 7265  peline.nodes["re
+0003ec60: 6e61 6d65 5f33 225d 290a 0a20 2020 2020  name_3"])..     
+0003ec70: 2020 2023 2045 7870 6f72 7473 2074 6865     # Exports the
+0003ec80: 2069 6e70 7574 2070 6c75 6773 2066 6f72   input plugs for
+0003ec90: 2022 7265 6e61 6d65 5f31 220a 2020 2020   "rename_1".    
+0003eca0: 2020 2020 7070 6c5f 6564 745f 7461 6273      ppl_edt_tabs
+0003ecb0: 2e67 6574 5f63 7572 7265 6e74 5f65 6469  .get_current_edi
+0003ecc0: 746f 7228 292e 6375 7272 656e 745f 6e6f  tor().current_no
+0003ecd0: 6465 5f6e 616d 6520 3d20 2272 656e 616d  de_name = "renam
+0003ece0: 655f 3122 0a20 2020 2020 2020 2028 0a20  e_1".        (. 
+0003ecf0: 2020 2020 2020 2020 2020 2070 706c 5f65             ppl_e
+0003ed00: 6474 5f74 6162 732e 6765 745f 6375 7272  dt_tabs.get_curr
+0003ed10: 656e 745f 6564 6974 6f72 0a20 2020 2020  ent_editor.     
+0003ed20: 2020 2029 2829 2e65 7870 6f72 745f 756e     )().export_un
+0003ed30: 636f 6e6e 6563 7465 645f 6d61 6e64 6174  connected_mandat
+0003ed40: 6f72 795f 696e 7075 7473 2829 0a20 2020  ory_inputs().   
+0003ed50: 2020 2020 2070 706c 5f65 6474 5f74 6162       ppl_edt_tab
+0003ed60: 732e 6765 745f 6375 7272 656e 745f 6564  s.get_current_ed
+0003ed70: 6974 6f72 2829 2e65 7870 6f72 745f 616c  itor().export_al
+0003ed80: 6c5f 756e 636f 6e6e 6563 7465 645f 6f75  l_unconnected_ou
+0003ed90: 7470 7574 7328 290a 0a20 2020 2020 2020  tputs()..       
+0003eda0: 2023 2044 6973 706c 6179 2070 6172 616d   # Display param
+0003edb0: 6574 6572 7320 6f66 2074 6865 2022 696e  eters of the "in
+0003edc0: 7075 7473 2220 6e6f 6465 0a20 2020 2020  puts" node.     
+0003edd0: 2020 2069 6e70 7574 5f70 726f 6365 7373     input_process
+0003ede0: 203d 2070 6970 656c 696e 652e 6e6f 6465   = pipeline.node
+0003edf0: 735b 2222 5d2e 7072 6f63 6573 730a 2020  s[""].process.  
+0003ee00: 2020 2020 2020 6e6f 6465 5f63 7472 6c65        node_ctrle
+0003ee10: 722e 6469 7370 6c61 795f 7061 7261 6d65  r.display_parame
+0003ee20: 7465 7273 280a 2020 2020 2020 2020 2020  ters(.          
+0003ee30: 2020 2269 6e70 7574 7322 2c20 6765 745f    "inputs", get_
+0003ee40: 7072 6f63 6573 735f 696e 7374 616e 6365  process_instance
+0003ee50: 2869 6e70 7574 5f70 726f 6365 7373 292c  (input_process),
+0003ee60: 2070 6970 656c 696e 650a 2020 2020 2020   pipeline.      
+0003ee70: 2020 290a 0a20 2020 2020 2020 2023 2044    )..        # D
+0003ee80: 6973 706c 6179 2074 6865 2066 696c 7465  isplay the filte
+0003ee90: 7220 6f66 2074 6865 2027 696e 5f66 696c  r of the 'in_fil
+0003eea0: 6527 2070 6c75 672c 2022 696e 7075 7473  e' plug, "inputs
+0003eeb0: 2220 6e6f 6465 0a20 2020 2020 2020 206e  " node.        n
+0003eec0: 6f64 655f 6374 726c 6572 2e64 6973 706c  ode_ctrler.displ
+0003eed0: 6179 5f66 696c 7465 7228 0a20 2020 2020  ay_filter(.     
+0003eee0: 2020 2020 2020 2022 696e 7075 7473 222c         "inputs",
+0003eef0: 2022 696e 5f66 696c 6522 2c20 2830 2c20   "in_file", (0, 
+0003ef00: 7069 7065 6c69 6e65 2c20 7479 7065 2855  pipeline, type(U
+0003ef10: 6e64 6566 696e 6564 2929 2c20 696e 7075  ndefined)), inpu
+0003ef20: 745f 7072 6f63 6573 730a 2020 2020 2020  t_process.      
+0003ef30: 2020 290a 2020 2020 2020 2020 6e6f 6465    ).        node
+0003ef40: 5f63 7472 6c65 722e 706f 705f 7570 2e63  _ctrler.pop_up.c
+0003ef50: 6c6f 7365 2829 0a0a 2020 2020 2020 2020  lose()..        
+0003ef60: 2320 5365 7473 2074 6865 2076 616c 7565  # Sets the value
+0003ef70: 7320 6f66 2074 6865 206d 616e 6461 746f  s of the mandato
+0003ef80: 7279 2070 6c75 6773 0a20 2020 2020 2020  ry plugs.       
+0003ef90: 2070 6970 656c 696e 652e 6e6f 6465 735b   pipeline.nodes[
+0003efa0: 2222 5d2e 7365 745f 706c 7567 5f76 616c  ""].set_plug_val
+0003efb0: 7565 2822 696e 5f66 696c 6522 2c20 444f  ue("in_file", DO
+0003efc0: 4355 4d45 4e54 5f31 290a 2020 2020 2020  CUMENT_1).      
+0003efd0: 2020 7069 7065 6c69 6e65 2e6e 6f64 6573    pipeline.nodes
+0003efe0: 5b22 225d 2e73 6574 5f70 6c75 675f 7661  [""].set_plug_va
+0003eff0: 6c75 6528 2266 6f72 6d61 745f 7374 7269  lue("format_stri
+0003f000: 6e67 222c 2022 6e65 775f 6669 6c65 2e6e  ng", "new_file.n
+0003f010: 6969 2229 0a0a 2020 2020 2020 2020 2320  ii")..        # 
+0003f020: 4368 6563 6b73 2074 6865 2069 6e64 6578  Checks the index
+0003f030: 6564 206f 6620 696e 7075 7420 616e 6420  ed of input and 
+0003f040: 6f75 7470 7574 2070 6c75 6720 6c61 6265  output plug labe
+0003f050: 6c73 0a20 2020 2020 2020 2069 6e5f 706c  ls.        in_pl
+0003f060: 7567 5f69 6e64 6578 203d 206e 6f64 655f  ug_index = node_
+0003f070: 6374 726c 6572 2e67 6574 5f69 6e64 6578  ctrler.get_index
+0003f080: 5f66 726f 6d5f 706c 7567 5f6e 616d 6528  _from_plug_name(
+0003f090: 2269 6e5f 6669 6c65 222c 2022 696e 2229  "in_file", "in")
+0003f0a0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0003f0b0: 7365 7274 4571 7561 6c28 696e 5f70 6c75  sertEqual(in_plu
+0003f0c0: 675f 696e 6465 782c 2031 290a 2020 2020  g_index, 1).    
+0003f0d0: 2020 2020 6f75 745f 706c 7567 5f69 6e64      out_plug_ind
+0003f0e0: 6578 203d 206e 6f64 655f 6374 726c 6572  ex = node_ctrler
+0003f0f0: 2e67 6574 5f69 6e64 6578 5f66 726f 6d5f  .get_index_from_
+0003f100: 706c 7567 5f6e 616d 6528 0a20 2020 2020  plug_name(.     
+0003f110: 2020 2020 2020 2022 5f6f 7574 5f66 696c         "_out_fil
+0003f120: 6522 2c20 226f 7574 220a 2020 2020 2020  e", "out".      
+0003f130: 2020 290a 2020 2020 2020 2020 7365 6c66    ).        self
+0003f140: 2e61 7373 6572 7445 7175 616c 286f 7574  .assertEqual(out
+0003f150: 5f70 6c75 675f 696e 6465 782c 2030 290a  _plug_index, 0).
+0003f160: 0a20 2020 2020 2020 2023 2054 7269 6573  .        # Tries
+0003f170: 2074 6f20 7570 6461 7465 2074 6865 2070   to update the p
+0003f180: 6c75 6720 7661 6c75 6520 7769 7468 6f75  lug value withou
+0003f190: 7420 6120 6e65 7720 7661 6c75 650a 2020  t a new value.  
+0003f1a0: 2020 2020 2020 6e6f 6465 5f63 7472 6c65        node_ctrle
+0003f1b0: 722e 7570 6461 7465 5f70 6c75 675f 7661  r.update_plug_va
+0003f1c0: 6c75 6528 0a20 2020 2020 2020 2020 2020  lue(.           
+0003f1d0: 2022 696e 222c 2022 696e 5f66 696c 6522   "in", "in_file"
+0003f1e0: 2c20 7069 7065 6c69 6e65 2c20 7479 7065  , pipeline, type
+0003f1f0: 2855 6e64 6566 696e 6564 290a 2020 2020  (Undefined).    
+0003f200: 2020 2020 290a 2020 2020 2020 2020 6e6f      ).        no
+0003f210: 6465 5f63 7472 6c65 722e 7570 6461 7465  de_ctrler.update
+0003f220: 5f70 6c75 675f 7661 6c75 6528 0a20 2020  _plug_value(.   
+0003f230: 2020 2020 2020 2020 2022 6f75 7422 2c20           "out", 
+0003f240: 225f 6f75 745f 6669 6c65 222c 2070 6970  "_out_file", pip
+0003f250: 656c 696e 652c 2074 7970 6528 556e 6465  eline, type(Unde
+0003f260: 6669 6e65 6429 0a20 2020 2020 2020 2029  fined).        )
+0003f270: 0a20 2020 2020 2020 206e 6f64 655f 6374  .        node_ct
+0003f280: 726c 6572 2e75 7064 6174 655f 706c 7567  rler.update_plug
+0003f290: 5f76 616c 7565 280a 2020 2020 2020 2020  _value(.        
+0003f2a0: 2020 2020 4e6f 6e65 2c20 2269 6e5f 6669      None, "in_fi
+0003f2b0: 6c65 222c 2070 6970 656c 696e 652c 2074  le", pipeline, t
+0003f2c0: 7970 6528 556e 6465 6669 6e65 6429 0a20  ype(Undefined). 
+0003f2d0: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+0003f2e0: 2020 2320 5472 6965 7320 746f 2075 7064    # Tries to upd
+0003f2f0: 6174 6520 7468 6520 706c 7567 2076 616c  ate the plug val
+0003f300: 7565 2077 6974 6820 6120 6e65 7720 7661  ue with a new va
+0003f310: 6c75 650a 2020 2020 2020 2020 6e6f 6465  lue.        node
+0003f320: 5f63 7472 6c65 722e 7570 6461 7465 5f70  _ctrler.update_p
+0003f330: 6c75 675f 7661 6c75 6528 0a20 2020 2020  lug_value(.     
+0003f340: 2020 2020 2020 2022 696e 222c 2022 696e         "in", "in
+0003f350: 5f66 696c 6522 2c20 7069 7065 6c69 6e65  _file", pipeline
+0003f360: 2c20 7374 722c 206e 6577 5f76 616c 7565  , str, new_value
+0003f370: 3d22 6e65 775f 7661 6c75 652e 6e69 6922  ="new_value.nii"
+0003f380: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+0003f390: 2020 206e 6f64 655f 6374 726c 6572 2e75     node_ctrler.u
+0003f3a0: 7064 6174 655f 706c 7567 5f76 616c 7565  pdate_plug_value
+0003f3b0: 280a 2020 2020 2020 2020 2020 2020 226f  (.            "o
+0003f3c0: 7574 222c 2022 5f6f 7574 5f66 696c 6522  ut", "_out_file"
+0003f3d0: 2c20 7069 7065 6c69 6e65 2c20 7374 722c  , pipeline, str,
+0003f3e0: 206e 6577 5f76 616c 7565 3d22 6e65 775f   new_value="new_
+0003f3f0: 7661 6c75 652e 6e69 6922 0a20 2020 2020  value.nii".     
+0003f400: 2020 2029 0a0a 2020 2020 2020 2020 2320     )..        # 
+0003f410: 5265 6c65 6173 6573 2074 6865 2070 726f  Releases the pro
+0003f420: 6365 7373 0a20 2020 2020 2020 206e 6f64  cess.        nod
+0003f430: 655f 6374 726c 6572 2e72 656c 6561 7365  e_ctrler.release
+0003f440: 5f70 726f 6365 7373 2829 0a20 2020 2020  _process().     
+0003f450: 2020 206e 6f64 655f 6374 726c 6572 2e75     node_ctrler.u
+0003f460: 7064 6174 655f 7061 7261 6d65 7465 7273  pdate_parameters
+0003f470: 2829 0a0a 2020 2020 2020 2020 2320 5377  ()..        # Sw
+0003f480: 6974 6368 6573 2062 6163 6b20 746f 206e  itches back to n
+0003f490: 6f64 6520 636f 6e74 726f 6c6c 6572 2056  ode controller V
+0003f4a0: 322c 2069 6620 6e65 6365 7373 6172 7920  2, if necessary 
+0003f4b0: 2872 6574 7572 6e20 746f 2069 6e69 7469  (return to initi
+0003f4c0: 616c 0a20 2020 2020 2020 2023 2073 7461  al.        # sta
+0003f4d0: 7465 290a 2020 2020 2020 2020 636f 6e66  te).        conf
+0003f4e0: 6967 203d 2043 6f6e 6669 6728 636f 6e66  ig = Config(conf
+0003f4f0: 6967 5f70 6174 683d 7365 6c66 2e63 6f6e  ig_path=self.con
+0003f500: 6669 675f 7061 7468 290a 0a20 2020 2020  fig_path)..     
+0003f510: 2020 2069 6620 6e6f 7420 636f 6e74 726f     if not contro
+0003f520: 6c56 315f 7665 723a 0a20 2020 2020 2020  lV1_ver:.       
+0003f530: 2020 2020 2063 6f6e 6669 672e 7365 7443       config.setC
+0003f540: 6f6e 7472 6f6c 5631 2846 616c 7365 290a  ontrolV1(False).
+0003f550: 0a20 2020 2064 6566 2074 6573 745f 706c  .    def test_pl
+0003f560: 7567 5f66 696c 7465 7228 7365 6c66 293a  ug_filter(self):
+0003f570: 0a20 2020 2020 2020 2022 2222 4469 7370  .        """Disp
+0003f580: 6c61 7973 2074 6865 2070 6172 616d 6574  lays the paramet
+0003f590: 6572 7320 6f66 2061 206e 6f64 652c 2064  ers of a node, d
+0003f5a0: 6973 706c 6179 7320 6120 706c 7567 2066  isplays a plug f
+0003f5b0: 696c 7465 7220 616e 640a 2020 2020 2020  ilter and.      
+0003f5c0: 2020 6d6f 6469 6669 6573 2069 742e 0a0a    modifies it...
+0003f5d0: 2020 2020 2020 2020 5465 7374 7320 7468          Tests th
+0003f5e0: 6520 636c 6173 7320 506c 7567 4669 6c74  e class PlugFilt
+0003f5f0: 6572 2829 2077 6974 6869 6e20 7468 6520  er() within the 
+0003f600: 4e6f 6465 2043 6f6e 7472 6f6c 6c65 7220  Node Controller 
+0003f610: 5631 0a20 2020 2020 2020 2028 636c 6173  V1.        (clas
+0003f620: 7320 4e6f 6465 436f 6e74 726f 6c6c 6572  s NodeController
+0003f630: 2829 292e 0a20 2020 2020 2020 2022 2222  ())..        """
+0003f640: 0a0a 2020 2020 2020 2020 636f 6e66 6967  ..        config
+0003f650: 203d 2043 6f6e 6669 6728 636f 6e66 6967   = Config(config
+0003f660: 5f70 6174 683d 7365 6c66 2e63 6f6e 6669  _path=self.confi
+0003f670: 675f 7061 7468 290a 2020 2020 2020 2020  g_path).        
+0003f680: 636f 6e74 726f 6c56 315f 7665 7220 3d20  controlV1_ver = 
+0003f690: 636f 6e66 6967 2e69 7343 6f6e 7472 6f6c  config.isControl
+0003f6a0: 5631 2829 0a0a 2020 2020 2020 2020 2320  V1()..        # 
+0003f6b0: 5377 6974 6368 2074 6f20 5631 206e 6f64  Switch to V1 nod
+0003f6c0: 6520 636f 6e74 726f 6c6c 6572 2047 5549  e controller GUI
+0003f6d0: 2c20 6966 206e 6563 6573 7361 7279 0a20  , if necessary. 
+0003f6e0: 2020 2020 2020 2069 6620 6e6f 7420 636f         if not co
+0003f6f0: 6e74 726f 6c56 315f 7665 723a 0a20 2020  ntrolV1_ver:.   
+0003f700: 2020 2020 2020 2020 2063 6f6e 6669 672e           config.
+0003f710: 7365 7443 6f6e 7472 6f6c 5631 2854 7275  setControlV1(Tru
+0003f720: 6529 0a20 2020 2020 2020 2020 2020 2073  e).            s
+0003f730: 656c 662e 7265 7374 6172 745f 4d49 4128  elf.restart_MIA(
+0003f740: 290a 0a20 2020 2020 2020 2023 204f 7065  )..        # Ope
+0003f750: 6e73 2070 726f 6a65 6374 2038 2061 6e64  ns project 8 and
+0003f760: 2073 7769 7463 6865 7320 746f 2069 740a   switches to it.
+0003f770: 2020 2020 2020 2020 7072 6f6a 6563 745f          project_
+0003f780: 385f 7061 7468 203d 2073 656c 662e 6765  8_path = self.ge
+0003f790: 745f 6e65 775f 7465 7374 5f70 726f 6a65  t_new_test_proje
+0003f7a0: 6374 2829 0a20 2020 2020 2020 2073 656c  ct().        sel
+0003f7b0: 662e 6d61 696e 5f77 696e 646f 772e 7377  f.main_window.sw
+0003f7c0: 6974 6368 5f70 726f 6a65 6374 2870 726f  itch_project(pro
+0003f7d0: 6a65 6374 5f38 5f70 6174 682c 2022 7072  ject_8_path, "pr
+0003f7e0: 6f6a 6563 745f 3822 290a 0a20 2020 2020  oject_8")..     
+0003f7f0: 2020 2023 2047 6574 2074 6865 2032 2066     # Get the 2 f
+0003f800: 6972 7374 2064 6f63 756d 656e 7473 2f72  irst documents/r
+0003f810: 6563 6f72 6473 0a20 2020 2020 2020 2044  ecords.        D
+0003f820: 4f43 554d 454e 545f 3120 3d20 2873 656c  OCUMENT_1 = (sel
+0003f830: 662e 6d61 696e 5f77 696e 646f 772e 7072  f.main_window.pr
+0003f840: 6f6a 6563 742e 7365 7373 696f 6e2e 6765  oject.session.ge
+0003f850: 745f 646f 6375 6d65 6e74 735f 6e61 6d65  t_documents_name
+0003f860: 7329 280a 2020 2020 2020 2020 2020 2020  s)(.            
+0003f870: 2263 7572 7265 6e74 220a 2020 2020 2020  "current".      
+0003f880: 2020 295b 305d 0a20 2020 2020 2020 2044    )[0].        D
+0003f890: 4f43 554d 454e 545f 3220 3d20 2873 656c  OCUMENT_2 = (sel
+0003f8a0: 662e 6d61 696e 5f77 696e 646f 772e 7072  f.main_window.pr
+0003f8b0: 6f6a 6563 742e 7365 7373 696f 6e2e 6765  oject.session.ge
+0003f8c0: 745f 646f 6375 6d65 6e74 735f 6e61 6d65  t_documents_name
+0003f8d0: 7329 280a 2020 2020 2020 2020 2020 2020  s)(.            
+0003f8e0: 2263 7572 7265 6e74 220a 2020 2020 2020  "current".      
+0003f8f0: 2020 295b 315d 0a0a 2020 2020 2020 2020    )[1]..        
+0003f900: 7069 7065 6c69 6e65 5f65 6469 746f 725f  pipeline_editor_
+0003f910: 7461 6273 203d 2028 0a20 2020 2020 2020  tabs = (.       
+0003f920: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
+0003f930: 696e 646f 772e 7069 7065 6c69 6e65 5f6d  indow.pipeline_m
+0003f940: 616e 6167 6572 2e70 6970 656c 696e 6545  anager.pipelineE
+0003f950: 6469 746f 7254 6162 730a 2020 2020 2020  ditorTabs.      
+0003f960: 2020 290a 2020 2020 2020 2020 6e6f 6465    ).        node
+0003f970: 5f63 6f6e 7472 6f6c 6c65 7220 3d20 7365  _controller = se
+0003f980: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
+0003f990: 6970 656c 696e 655f 6d61 6e61 6765 722e  ipeline_manager.
+0003f9a0: 6e6f 6465 436f 6e74 726f 6c6c 6572 0a0a  nodeController..
+0003f9b0: 2020 2020 2020 2020 2320 4164 6420 7468          # Add th
+0003f9c0: 6520 2253 6d6f 6f74 6822 2070 726f 6365  e "Smooth" proce
+0003f9d0: 7373 2c20 6372 6561 7465 7320 6120 6e6f  ss, creates a no
+0003f9e0: 6465 2063 616c 6c65 6420 2273 6d6f 6f74  de called "smoot
+0003f9f0: 685f 3122 0a20 2020 2020 2020 2070 726f  h_1".        pro
+0003fa00: 6365 7373 5f63 6c61 7373 203d 2053 6d6f  cess_class = Smo
+0003fa10: 6f74 680a 2020 2020 2020 2020 7069 7065  oth.        pipe
+0003fa20: 6c69 6e65 5f65 6469 746f 725f 7461 6273  line_editor_tabs
+0003fa30: 2e67 6574 5f63 7572 7265 6e74 5f65 6469  .get_current_edi
+0003fa40: 746f 7228 292e 636c 6963 6b5f 706f 7320  tor().click_pos 
+0003fa50: 3d20 5150 6f69 6e74 2834 3530 2c20 3530  = QPoint(450, 50
+0003fa60: 3029 0a20 2020 2020 2020 2070 6970 656c  0).        pipel
+0003fa70: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
+0003fa80: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
+0003fa90: 6f72 2829 2e61 6464 5f6e 616d 6564 5f70  or().add_named_p
+0003faa0: 726f 6365 7373 280a 2020 2020 2020 2020  rocess(.        
+0003fab0: 2020 2020 7072 6f63 6573 735f 636c 6173      process_clas
+0003fac0: 730a 2020 2020 2020 2020 290a 2020 2020  s.        ).    
+0003fad0: 2020 2020 7069 7065 6c69 6e65 203d 2070      pipeline = p
+0003fae0: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
+0003faf0: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
+0003fb00: 7069 7065 6c69 6e65 2829 0a0a 2020 2020  pipeline()..    
+0003fb10: 2020 2020 2320 4578 706f 7274 7320 7468      # Exports th
+0003fb20: 6520 6d61 6e64 6174 6f72 7920 706c 7567  e mandatory plug
+0003fb30: 730a 2020 2020 2020 2020 7069 7065 6c69  s.        pipeli
+0003fb40: 6e65 5f65 6469 746f 725f 7461 6273 2e67  ne_editor_tabs.g
+0003fb50: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
+0003fb60: 7228 292e 6375 7272 656e 745f 6e6f 6465  r().current_node
+0003fb70: 5f6e 616d 6520 3d20 280a 2020 2020 2020  _name = (.      
+0003fb80: 2020 2020 2020 2273 6d6f 6f74 685f 3122        "smooth_1"
+0003fb90: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+0003fba0: 2020 2028 0a20 2020 2020 2020 2020 2020     (.           
+0003fbb0: 2070 6970 656c 696e 655f 6564 6974 6f72   pipeline_editor
+0003fbc0: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
+0003fbd0: 745f 6564 6974 6f72 0a20 2020 2020 2020  t_editor.       
+0003fbe0: 2029 2829 2e65 7870 6f72 745f 6e6f 6465   )().export_node
+0003fbf0: 5f75 6e63 6f6e 6e65 6374 6564 5f6d 616e  _unconnected_man
+0003fc00: 6461 746f 7279 5f70 6c75 6773 2829 0a0a  datory_plugs()..
+0003fc10: 2020 2020 2020 2020 2320 4469 7370 6c61          # Displa
+0003fc20: 7920 7061 7261 6d65 7465 7273 206f 6620  y parameters of 
+0003fc30: 2273 6d6f 6f74 685f 3122 206e 6f64 650a  "smooth_1" node.
+0003fc40: 2020 2020 2020 2020 696e 7075 745f 7072          input_pr
+0003fc50: 6f63 6573 7320 3d20 7069 7065 6c69 6e65  ocess = pipeline
+0003fc60: 2e6e 6f64 6573 5b22 225d 2e70 726f 6365  .nodes[""].proce
+0003fc70: 7373 0a0a 2020 2020 2020 2020 6e6f 6465  ss..        node
+0003fc80: 5f63 6f6e 7472 6f6c 6c65 722e 6469 7370  _controller.disp
+0003fc90: 6c61 795f 7061 7261 6d65 7465 7273 280a  lay_parameters(.
+0003fca0: 2020 2020 2020 2020 2020 2020 2269 6e70              "inp
+0003fcb0: 7574 7322 2c20 6765 745f 7072 6f63 6573  uts", get_proces
+0003fcc0: 735f 696e 7374 616e 6365 2869 6e70 7574  s_instance(input
+0003fcd0: 5f70 726f 6365 7373 292c 2070 6970 656c  _process), pipel
+0003fce0: 696e 650a 2020 2020 2020 2020 290a 0a20  ine.        ).. 
+0003fcf0: 2020 2020 2020 2023 204f 7065 6e73 2061         # Opens a
+0003fd00: 2066 696c 7465 7220 666f 7220 7468 6520   filter for the 
+0003fd10: 706c 7567 2022 696e 5f66 696c 6573 222c  plug "in_files",
+0003fd20: 0a20 2020 2020 2020 2023 2077 6974 686f  .        # witho
+0003fd30: 7574 2022 6e6f 6465 5f63 6f6e 7472 6f6c  ut "node_control
+0003fd40: 6c65 722e 7363 616e 735f 6c69 7374 220a  ler.scans_list".
+0003fd50: 2020 2020 2020 2020 7061 7261 6d65 7465          paramete
+0003fd60: 7273 203d 2028 302c 2070 6970 656c 696e  rs = (0, pipelin
+0003fd70: 652c 2074 7970 6528 556e 6465 6669 6e65  e, type(Undefine
+0003fd80: 6429 290a 2020 2020 2020 2020 6e6f 6465  d)).        node
+0003fd90: 5f63 6f6e 7472 6f6c 6c65 722e 6469 7370  _controller.disp
+0003fda0: 6c61 795f 6669 6c74 6572 280a 2020 2020  lay_filter(.    
+0003fdb0: 2020 2020 2020 2020 2269 6e70 7574 7322          "inputs"
+0003fdc0: 2c20 2269 6e5f 6669 6c65 7322 2c20 7061  , "in_files", pa
+0003fdd0: 7261 6d65 7465 7273 2c20 696e 7075 745f  rameters, input_
+0003fde0: 7072 6f63 6573 730a 2020 2020 2020 2020  process.        
+0003fdf0: 290a 0a20 2020 2020 2020 2023 2041 7373  )..        # Ass
+0003fe00: 6572 7473 2069 7473 2064 6566 6175 6c74  erts its default
+0003fe10: 2076 616c 7565 0a20 2020 2020 2020 206e   value.        n
+0003fe20: 6f64 6520 3d20 7069 7065 6c69 6e65 2e6e  ode = pipeline.n
+0003fe30: 6f64 6573 5b22 225d 0a20 2020 2020 2020  odes[""].       
+0003fe40: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0003fe50: 6c28 556e 6465 6669 6e65 642c 206e 6f64  l(Undefined, nod
+0003fe60: 652e 6765 745f 706c 7567 5f76 616c 7565  e.get_plug_value
+0003fe70: 2822 696e 5f66 696c 6573 2229 290a 0a20  ("in_files")).. 
+0003fe80: 2020 2020 2020 2023 204c 6f6f 6b20 666f         # Look fo
+0003fe90: 7220 2244 4f43 554d 454e 545f 3222 2069  r "DOCUMENT_2" i
+0003fea0: 6e20 7468 6520 696e 7075 7420 646f 6375  n the input docu
+0003feb0: 6d65 6e74 730a 2020 2020 2020 2020 706c  ments.        pl
+0003fec0: 7567 5f66 696c 7465 7220 3d20 6e6f 6465  ug_filter = node
+0003fed0: 5f63 6f6e 7472 6f6c 6c65 722e 706f 705f  _controller.pop_
+0003fee0: 7570 0a20 2020 2020 2020 2070 6c75 675f  up.        plug_
+0003fef0: 6669 6c74 6572 2e73 6561 7263 685f 7374  filter.search_st
+0003ff00: 7228 444f 4355 4d45 4e54 5f32 290a 2020  r(DOCUMENT_2).  
+0003ff10: 2020 2020 2020 696e 6465 785f 444f 4355        index_DOCU
+0003ff20: 4d45 4e54 5f31 203d 2070 6c75 675f 6669  MENT_1 = plug_fi
+0003ff30: 6c74 6572 2e74 6162 6c65 5f64 6174 612e  lter.table_data.
+0003ff40: 6765 745f 7363 616e 5f72 6f77 2844 4f43  get_scan_row(DOC
+0003ff50: 554d 454e 545f 3129 0a0a 2020 2020 2020  UMENT_1)..      
+0003ff60: 2020 2320 6966 2022 444f 4355 4d45 4e54    # if "DOCUMENT
+0003ff70: 5f31 2220 6973 2068 6964 6465 6e0a 2020  _1" is hidden.  
+0003ff80: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0003ff90: 7454 7275 6528 706c 7567 5f66 696c 7465  tTrue(plug_filte
+0003ffa0: 722e 7461 626c 655f 6461 7461 2e69 7352  r.table_data.isR
+0003ffb0: 6f77 4869 6464 656e 2869 6e64 6578 5f44  owHidden(index_D
+0003ffc0: 4f43 554d 454e 545f 3129 290a 0a20 2020  OCUMENT_1))..   
+0003ffd0: 2020 2020 2023 2052 6573 6574 7320 7468       # Resets th
+0003ffe0: 6520 7365 6172 6368 2062 6172 0a20 2020  e search bar.   
+0003fff0: 2020 2020 2070 6c75 675f 6669 6c74 6572       plug_filter
+00040000: 2e72 6573 6574 5f73 6561 7263 685f 6261  .reset_search_ba
+00040010: 7228 290a 0a20 2020 2020 2020 2023 2069  r()..        # i
+00040020: 6620 2244 4f43 554d 454e 545f 3122 2069  f "DOCUMENT_1" i
+00040030: 7320 6e6f 7420 6869 6464 656e 0a20 2020  s not hidden.   
+00040040: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00040050: 4661 6c73 6528 706c 7567 5f66 696c 7465  False(plug_filte
+00040060: 722e 7461 626c 655f 6461 7461 2e69 7352  r.table_data.isR
+00040070: 6f77 4869 6464 656e 2869 6e64 6578 5f44  owHidden(index_D
+00040080: 4f43 554d 454e 545f 3129 290a 0a20 2020  OCUMENT_1))..   
+00040090: 2020 2020 2023 2054 7269 6573 2073 6561       # Tries sea
+000400a0: 7263 6820 666f 7220 616e 2065 6d70 7479  rch for an empty
+000400b0: 2073 7472 696e 670a 2020 2020 2020 2020   string.        
+000400c0: 706c 7567 5f66 696c 7465 722e 7365 6172  plug_filter.sear
+000400d0: 6368 5f73 7472 2822 2229 0a0a 2020 2020  ch_str("")..    
+000400e0: 2020 2020 2320 5365 6172 6368 2066 6f72      # Search for
+000400f0: 2022 444f 4355 4d45 4e54 5f32 2220 616e   "DOCUMENT_2" an
+00040100: 6420 6368 616e 6765 7320 7461 6773 0a20  d changes tags. 
+00040110: 2020 2020 2020 2070 6c75 675f 6669 6c74         plug_filt
+00040120: 6572 2e73 6561 7263 685f 7374 7228 444f  er.search_str(DO
+00040130: 4355 4d45 4e54 5f32 290a 0a20 2020 2020  CUMENT_2)..     
+00040140: 2020 2069 6e64 6578 5f44 4f43 554d 454e     index_DOCUMEN
+00040150: 545f 3220 3d20 706c 7567 5f66 696c 7465  T_2 = plug_filte
+00040160: 722e 7461 626c 655f 6461 7461 2e67 6574  r.table_data.get
+00040170: 5f73 6361 6e5f 726f 7728 444f 4355 4d45  _scan_row(DOCUME
+00040180: 4e54 5f32 290a 2020 2020 2020 2020 706c  NT_2).        pl
+00040190: 7567 5f66 696c 7465 722e 7461 626c 655f  ug_filter.table_
+000401a0: 6461 7461 2e73 656c 6563 7452 6f77 2869  data.selectRow(i
+000401b0: 6e64 6578 5f44 4f43 554d 454e 545f 3229  ndex_DOCUMENT_2)
+000401c0: 0a0a 2020 2020 2020 2020 2320 4649 584d  ..        # FIXM
+000401d0: 453a 2077 6520 6e65 6564 2074 6f20 6669  E: we need to fi
+000401e0: 6e64 2061 2062 6574 7465 7220 7761 7920  nd a better way 
+000401f0: 746f 2069 6e74 6572 6163 7420 7769 7468  to interact with
+00040200: 2074 6865 2070 6c75 675f 6669 6c74 6572   the plug_filter
+00040210: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00040220: 2020 6f62 6a65 6374 732e 2041 7420 7468    objects. At th
+00040230: 6520 6d6f 6d65 6e74 2c20 5154 696d 6572  e moment, QTimer
+00040240: 2e73 696e 676c 6553 686f 6f74 2064 6f65  .singleShoot doe
+00040250: 7320 6e6f 7420 6769 7665 2061 0a20 2020  s not give a.   
+00040260: 2020 2020 2023 2020 2020 2020 2020 676f       #        go
+00040270: 6f64 2072 6573 756c 7420 6265 6361 7573  od result becaus
+00040280: 6520 6974 2069 7320 616e 2061 7379 6e63  e it is an async
+00040290: 6872 6f6e 6f75 7320 6163 7469 6f6e 2061  hronous action a
+000402a0: 6e64 2077 6520 6361 6e0a 2020 2020 2020  nd we can.      
+000402b0: 2020 2320 2020 2020 2020 206f 6273 6572    #        obser
+000402c0: 7665 206d 6978 7475 7265 7320 6f66 2051  ve mixtures of Q
+000402d0: 5420 7369 676e 616c 732e 2053 696e 6365  T signals. Since
+000402e0: 2077 6520 6172 6520 6e6f 740a 2020 2020   we are not.    
+000402f0: 2020 2020 2320 2020 2020 2020 2069 6e73      #        ins
+00040300: 7461 6e74 6961 7469 6e67 2065 7861 6374  tantiating exact
+00040310: 6c79 2074 6865 2072 6967 6874 206f 626a  ly the right obj
+00040320: 6563 7473 2c20 7468 6973 2072 6573 756c  ects, this resul
+00040330: 7473 2069 6e20 610a 2020 2020 2020 2020  ts in a.        
+00040340: 2320 2020 2020 2020 206d 6978 7475 7265  #        mixture
+00040350: 206f 6620 7369 676e 616c 7320 7468 6174   of signals that
+00040360: 2063 616e 2063 7261 7368 2074 6865 2065   can crash the e
+00040370: 7865 6375 7469 6f6e 2e20 4375 7272 656e  xecution. Curren
+00040380: 746c 790a 2020 2020 2020 2020 2320 2020  tly.        #   
+00040390: 2020 2020 2074 6865 2051 5469 6d65 722e       the QTimer.
+000403a0: 7369 6e67 6c65 5368 6f6f 7420 6973 2072  singleShoot is r
+000403b0: 656d 6f76 6564 2028 7468 6973 2073 686f  emoved (this sho
+000403c0: 756c 6420 6e6f 7420 6368 616e 6765 0a20  uld not change. 
+000403d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000403e0: 6d75 6368 2074 6865 2074 6573 7420 636f  much the test co
+000403f0: 7665 7261 6765 2062 6563 6175 7365 2074  verage because t
+00040400: 6865 206f 626a 6563 7473 2061 7265 2073  he objects are s
+00040410: 7469 6c6c 2075 7365 640a 2020 2020 2020  till used.      
+00040420: 2020 2320 2020 2020 2020 2028 7570 6461    #        (upda
+00040430: 7465 5f74 6167 732c 2075 7064 6174 655f  te_tags, update_
+00040440: 7461 675f 746f 5f66 696c 7465 7229 0a0a  tag_to_filter)..
+00040450: 2020 2020 2020 2020 706c 7567 5f66 696c          plug_fil
+00040460: 7465 722e 7570 6461 7465 5f74 6167 7328  ter.update_tags(
+00040470: 290a 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00040480: 6173 7365 7274 5472 7565 280a 2020 2020  assertTrue(.    
+00040490: 2020 2020 2020 2020 7479 7065 2870 6c75          type(plu
+000404a0: 675f 6669 6c74 6572 2e74 6162 6c65 5f64  g_filter.table_d
+000404b0: 6174 612e 6765 745f 7461 675f 636f 6c75  ata.get_tag_colu
+000404c0: 6d6e 2822 4163 7175 6973 6974 696f 6e44  mn("AcquisitionD
+000404d0: 6174 6522 2929 0a20 2020 2020 2020 2020  ate")).         
+000404e0: 2020 203d 3d20 696e 740a 2020 2020 2020     == int.      
+000404f0: 2020 290a 0a20 2020 2020 2020 2070 6c75    )..        plu
+00040500: 675f 6669 6c74 6572 2e75 7064 6174 655f  g_filter.update_
+00040510: 7461 675f 746f 5f66 696c 7465 7228 290a  tag_to_filter().
+00040520: 2020 2020 2020 2020 706c 7567 5f66 696c          plug_fil
+00040530: 7465 722e 7075 7368 5f62 7574 746f 6e5f  ter.push_button_
+00040540: 7461 675f 6669 6c74 6572 2e73 6574 5465  tag_filter.setTe
+00040550: 7874 2822 4669 6c65 4e61 6d65 2229 0a20  xt("FileName"). 
+00040560: 2020 2020 2020 2023 2054 4f44 4f3a 2073         # TODO: s
+00040570: 656c 6563 7420 7461 6720 746f 2066 696c  elect tag to fil
+00040580: 7465 7220 7769 7468 0a0a 2020 2020 2020  ter with..      
+00040590: 2020 2320 436c 6f73 6573 2074 6865 2066    # Closes the f
+000405a0: 696c 7465 7220 666f 7220 7468 6520 706c  ilter for the pl
+000405b0: 7567 2022 696e 5f66 696c 6573 220a 2020  ug "in_files".  
+000405c0: 2020 2020 2020 706c 7567 5f66 696c 7465        plug_filte
+000405d0: 722e 6f6b 5f63 6c69 636b 6564 2829 0a0a  r.ok_clicked()..
+000405e0: 2020 2020 2020 2020 2320 4173 7365 7274          # Assert
+000405f0: 2074 6865 206d 6f64 6966 6965 6420 7661   the modified va
+00040600: 6c75 650a 2020 2020 2020 2020 7365 6c66  lue.        self
+00040610: 2e61 7373 6572 7449 6e28 0a20 2020 2020  .assertIn(.     
+00040620: 2020 2020 2020 2073 7472 2850 6174 6828         str(Path(
+00040630: 444f 4355 4d45 4e54 5f32 2929 2c0a 2020  DOCUMENT_2)),.  
+00040640: 2020 2020 2020 2020 2020 7374 7228 5061            str(Pa
+00040650: 7468 286e 6f64 652e 6765 745f 706c 7567  th(node.get_plug
+00040660: 5f76 616c 7565 2822 696e 5f66 696c 6573  _value("in_files
+00040670: 2229 5b30 5d29 292c 0a20 2020 2020 2020  ")[0])),.       
+00040680: 2029 0a0a 2020 2020 2020 2020 2320 4f70   )..        # Op
+00040690: 656e 7320 6120 6669 6c74 6572 2066 6f72  ens a filter for
+000406a0: 2074 6865 2070 6c75 6720 2269 6e5f 6669   the plug "in_fi
+000406b0: 6c65 7322 2c20 6e6f 7720 7769 7468 2061  les", now with a
+000406c0: 2022 7363 616e 735f 6c69 7374 220a 2020   "scans_list".  
+000406d0: 2020 2020 2020 6e6f 6465 5f63 6f6e 7472        node_contr
+000406e0: 6f6c 6c65 722e 7363 616e 5f6c 6973 7420  oller.scan_list 
+000406f0: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
+00040700: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+00040710: 2e70 726f 6a65 6374 2e73 6573 7369 6f6e  .project.session
+00040720: 2e67 6574 5f64 6f63 756d 656e 7473 5f6e  .get_documents_n
+00040730: 616d 6573 0a20 2020 2020 2020 2029 2822  ames.        )("
+00040740: 6375 7272 656e 7422 290a 2020 2020 2020  current").      
+00040750: 2020 6e6f 6465 5f63 6f6e 7472 6f6c 6c65    node_controlle
+00040760: 722e 6469 7370 6c61 795f 6669 6c74 6572  r.display_filter
+00040770: 280a 2020 2020 2020 2020 2020 2020 2269  (.            "i
+00040780: 6e70 7574 7322 2c20 2269 6e5f 6669 6c65  nputs", "in_file
+00040790: 7322 2c20 7061 7261 6d65 7465 7273 2c20  s", parameters, 
+000407a0: 696e 7075 745f 7072 6f63 6573 730a 2020  input_process.  
+000407b0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+000407c0: 2023 204c 6f6f 6b20 666f 7220 736f 6d65   # Look for some
+000407d0: 7468 696e 6720 7468 6174 2064 6f65 7320  thing that does 
+000407e0: 6e6f 7420 6769 7665 2061 6e79 206d 6174  not give any mat
+000407f0: 6368 0a20 2020 2020 2020 2070 6c75 675f  ch.        plug_
+00040800: 6669 6c74 6572 2e73 6561 7263 685f 7374  filter.search_st
+00040810: 7228 2221 4023 2229 0a20 2020 2020 2020  r("!@#").       
+00040820: 2023 2074 6869 7320 7769 6c6c 2065 6d70   # this will emp
+00040830: 7479 2074 6865 2022 706c 7567 5f66 696c  ty the "plug_fil
+00040840: 7465 722e 7461 626c 655f 6461 7461 2e73  ter.table_data.s
+00040850: 656c 6563 7465 6449 6e64 6578 6573 2829  electedIndexes()
+00040860: 220a 2020 2020 2020 2020 2320 616e 6420  ".        # and 
+00040870: 7472 6967 6765 7220 616e 2075 6e63 6f76  trigger an uncov
+00040880: 6572 6564 2070 6172 7420 6f66 2022 7365  ered part of "se
+00040890: 745f 706c 7567 5f76 616c 7565 2873 656c  t_plug_value(sel
+000408a0: 6629 220a 0a20 2020 2020 2020 2070 6c75  f)"..        plu
+000408b0: 675f 6669 6c74 6572 2e6f 6b5f 636c 6963  g_filter.ok_clic
+000408c0: 6b65 6428 290a 0a20 2020 2020 2020 2023  ked()..        #
+000408d0: 2053 7769 7463 6865 7320 6261 636b 2074   Switches back t
+000408e0: 6f20 6e6f 6465 2063 6f6e 7472 6f6c 6c65  o node controlle
+000408f0: 7220 5632 2c20 6966 206e 6563 6573 7361  r V2, if necessa
+00040900: 7279 2028 7265 7475 726e 2074 6f20 696e  ry (return to in
+00040910: 6974 6961 6c0a 2020 2020 2020 2020 2320  itial.        # 
+00040920: 7374 6174 6529 0a20 2020 2020 2020 2063  state).        c
+00040930: 6f6e 6669 6720 3d20 436f 6e66 6967 2863  onfig = Config(c
+00040940: 6f6e 6669 675f 7061 7468 3d73 656c 662e  onfig_path=self.
+00040950: 636f 6e66 6967 5f70 6174 6829 0a0a 2020  config_path)..  
+00040960: 2020 2020 2020 6966 206e 6f74 2063 6f6e        if not con
+00040970: 7472 6f6c 5631 5f76 6572 3a0a 2020 2020  trolV1_ver:.    
+00040980: 2020 2020 2020 2020 636f 6e66 6967 2e73          config.s
+00040990: 6574 436f 6e74 726f 6c56 3128 4661 6c73  etControlV1(Fals
+000409a0: 6529 0a0a 2020 2020 6465 6620 7465 7374  e)..    def test
+000409b0: 5f75 7064 6174 655f 6e6f 6465 5f6e 616d  _update_node_nam
+000409c0: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
+000409d0: 2022 2222 4469 7370 6c61 7973 2070 6172   """Displays par
+000409e0: 616d 6574 6572 7320 6f66 2061 206e 6f64  ameters of a nod
+000409f0: 6520 616e 6420 7570 6461 7465 7320 6974  e and updates it
+00040a00: 7320 6e61 6d65 2e22 2222 0a0a 2020 2020  s name."""..    
+00040a10: 2020 2020 7069 7065 6c69 6e65 5f6d 616e      pipeline_man
+00040a20: 6167 6572 203d 2073 656c 662e 6d61 696e  ager = self.main
+00040a30: 5f77 696e 646f 772e 7069 7065 6c69 6e65  _window.pipeline
+00040a40: 5f6d 616e 6167 6572 0a20 2020 2020 2020  _manager.       
+00040a50: 2070 6970 656c 696e 655f 6564 6974 6f72   pipeline_editor
+00040a60: 5f74 6162 7320 3d20 7069 7065 6c69 6e65  _tabs = pipeline
+00040a70: 5f6d 616e 6167 6572 2e70 6970 656c 696e  _manager.pipelin
+00040a80: 6545 6469 746f 7254 6162 730a 0a20 2020  eEditorTabs..   
+00040a90: 2020 2020 2023 2041 6464 696e 6720 6120       # Adding a 
+00040aa0: 7072 6f63 6573 7320 3d3e 2063 7265 6174  process => creat
+00040ab0: 6573 2061 206e 6f64 6520 6361 6c6c 6564  es a node called
+00040ac0: 2022 736d 6f6f 7468 5f31 220a 2020 2020   "smooth_1".    
+00040ad0: 2020 2020 7072 6f63 6573 735f 636c 6173      process_clas
+00040ae0: 7320 3d20 536d 6f6f 7468 0a20 2020 2020  s = Smooth.     
+00040af0: 2020 2070 6970 656c 696e 655f 6564 6974     pipeline_edit
+00040b00: 6f72 5f74 6162 732e 6765 745f 6375 7272  or_tabs.get_curr
+00040b10: 656e 745f 6564 6974 6f72 2829 2e63 6c69  ent_editor().cli
+00040b20: 636b 5f70 6f73 203d 2051 506f 696e 7428  ck_pos = QPoint(
+00040b30: 3435 302c 2035 3030 290a 2020 2020 2020  450, 500).      
+00040b40: 2020 7069 7065 6c69 6e65 5f65 6469 746f    pipeline_edito
+00040b50: 725f 7461 6273 2e67 6574 5f63 7572 7265  r_tabs.get_curre
+00040b60: 6e74 5f65 6469 746f 7228 292e 6164 645f  nt_editor().add_
+00040b70: 6e61 6d65 645f 7072 6f63 6573 7328 0a20  named_process(. 
+00040b80: 2020 2020 2020 2020 2020 2070 726f 6365             proce
+00040b90: 7373 5f63 6c61 7373 0a20 2020 2020 2020  ss_class.       
+00040ba0: 2029 0a0a 2020 2020 2020 2020 2320 4469   )..        # Di
+00040bb0: 7370 6c61 7969 6e67 2074 6865 2073 6d6f  splaying the smo
+00040bc0: 6f74 685f 3120 6e6f 6465 2070 6172 616d  oth_1 node param
+00040bd0: 6574 6572 730a 2020 2020 2020 2020 7069  eters.        pi
+00040be0: 7065 6c69 6e65 203d 2070 6970 656c 696e  peline = pipelin
+00040bf0: 655f 6564 6974 6f72 5f74 6162 732e 6765  e_editor_tabs.ge
+00040c00: 745f 6375 7272 656e 745f 7069 7065 6c69  t_current_pipeli
+00040c10: 6e65 2829 0a20 2020 2020 2020 2070 726f  ne().        pro
+00040c20: 6365 7373 203d 2070 6970 656c 696e 652e  cess = pipeline.
+00040c30: 6e6f 6465 735b 2273 6d6f 6f74 685f 3122  nodes["smooth_1"
+00040c40: 5d2e 7072 6f63 6573 730a 2020 2020 2020  ].process.      
+00040c50: 2020 7069 7065 6c69 6e65 5f6d 616e 6167    pipeline_manag
+00040c60: 6572 2e64 6973 706c 6179 4e6f 6465 5061  er.displayNodePa
+00040c70: 7261 6d65 7465 7273 2822 736d 6f6f 7468  rameters("smooth
+00040c80: 5f31 222c 2070 726f 6365 7373 290a 2020  _1", process).  
+00040c90: 2020 2020 2020 6e6f 6465 5f63 6f6e 7472        node_contr
+00040ca0: 6f6c 6c65 7220 3d20 7069 7065 6c69 6e65  oller = pipeline
+00040cb0: 5f6d 616e 6167 6572 2e6e 6f64 6543 6f6e  _manager.nodeCon
+00040cc0: 7472 6f6c 6c65 720a 0a20 2020 2020 2020  troller..       
+00040cd0: 2023 2043 6861 6e67 6520 7468 6520 6e6f   # Change the no
+00040ce0: 6465 206e 616d 6520 6672 6f6d 2073 6d6f  de name from smo
+00040cf0: 6f74 685f 3120 746f 2073 6d6f 6f74 685f  oth_1 to smooth_
+00040d00: 7465 7374 2c20 7465 7374 2069 6620 6974  test, test if it
+00040d10: 2773 206f 6b0a 2020 2020 2020 2020 6e6f  's ok.        no
+00040d20: 6465 5f63 6f6e 7472 6f6c 6c65 722e 6c69  de_controller.li
+00040d30: 6e65 5f65 6469 745f 6e6f 6465 5f6e 616d  ne_edit_node_nam
+00040d40: 652e 7365 7454 6578 7428 2273 6d6f 6f74  e.setText("smoot
+00040d50: 685f 7465 7374 2229 0a20 2020 2020 2020  h_test").       
+00040d60: 206b 6579 4576 656e 7420 3d20 5174 4775   keyEvent = QtGu
+00040d70: 692e 514b 6579 4576 656e 7428 0a20 2020  i.QKeyEvent(.   
+00040d80: 2020 2020 2020 2020 2051 4576 656e 742e           QEvent.
+00040d90: 4b65 7950 7265 7373 2c20 5174 2e4b 6579  KeyPress, Qt.Key
+00040da0: 5f52 6574 7572 6e2c 2051 742e 4e6f 4d6f  _Return, Qt.NoMo
+00040db0: 6469 6669 6572 0a20 2020 2020 2020 2029  difier.        )
+00040dc0: 0a20 2020 2020 2020 2051 436f 7265 4170  .        QCoreAp
+00040dd0: 706c 6963 6174 696f 6e2e 706f 7374 4576  plication.postEv
+00040de0: 656e 7428 0a20 2020 2020 2020 2020 2020  ent(.           
+00040df0: 206e 6f64 655f 636f 6e74 726f 6c6c 6572   node_controller
+00040e00: 2e6c 696e 655f 6564 6974 5f6e 6f64 655f  .line_edit_node_
+00040e10: 6e61 6d65 2c20 6b65 7945 7665 6e74 0a20  name, keyEvent. 
+00040e20: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00040e30: 2051 5465 7374 2e71 5761 6974 2831 3030   QTest.qWait(100
+00040e40: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00040e50: 7373 6572 7454 7275 6528 2273 6d6f 6f74  ssertTrue("smoot
+00040e60: 685f 7465 7374 2220 696e 2070 6970 656c  h_test" in pipel
+00040e70: 696e 652e 6e6f 6465 732e 6b65 7973 2829  ine.nodes.keys()
+00040e80: 290a 0a20 2020 2020 2020 2023 2041 6464  )..        # Add
+00040e90: 2032 2061 6e6f 7468 6572 2053 6d6f 6f74   2 another Smoot
+00040ea0: 6820 7072 6f63 6573 7320 3d3e 2043 7265  h process => Cre
+00040eb0: 6174 6573 206e 6f64 6573 2063 616c 6c65  ates nodes calle
+00040ec0: 640a 2020 2020 2020 2020 2320 736d 6f6f  d.        # smoo
+00040ed0: 7468 5f31 2061 6e64 2073 6d6f 6f74 685f  th_1 and smooth_
+00040ee0: 320a 2020 2020 2020 2020 7069 7065 6c69  2.        pipeli
+00040ef0: 6e65 5f65 6469 746f 725f 7461 6273 2e67  ne_editor_tabs.g
+00040f00: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
+00040f10: 7228 292e 6164 645f 6e61 6d65 645f 7072  r().add_named_pr
+00040f20: 6f63 6573 7328 0a20 2020 2020 2020 2020  ocess(.         
+00040f30: 2020 2070 726f 6365 7373 5f63 6c61 7373     process_class
+00040f40: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00040f50: 2020 2070 6970 656c 696e 655f 6564 6974     pipeline_edit
+00040f60: 6f72 5f74 6162 732e 6765 745f 6375 7272  or_tabs.get_curr
+00040f70: 656e 745f 6564 6974 6f72 2829 2e61 6464  ent_editor().add
+00040f80: 5f6e 616d 6564 5f70 726f 6365 7373 280a  _named_process(.
+00040f90: 2020 2020 2020 2020 2020 2020 7072 6f63              proc
+00040fa0: 6573 735f 636c 6173 730a 2020 2020 2020  ess_class.      
+00040fb0: 2020 290a 0a20 2020 2020 2020 2023 2041    )..        # A
+00040fc0: 6464 696e 6720 6c69 6e6b 2062 6574 7765  dding link betwe
+00040fd0: 656e 2073 6d6f 6f74 685f 7465 7374 2061  en smooth_test a
+00040fe0: 6e64 2073 6d6f 6f74 685f 3120 6e6f 6465  nd smooth_1 node
+00040ff0: 730a 2020 2020 2020 2020 736f 7572 6365  s.        source
+00041000: 203d 2028 2273 6d6f 6f74 685f 7465 7374   = ("smooth_test
+00041010: 222c 2022 5f73 6d6f 6f74 6865 645f 6669  ", "_smoothed_fi
+00041020: 6c65 7322 290a 2020 2020 2020 2020 6465  les").        de
+00041030: 7374 203d 2028 2273 6d6f 6f74 685f 3122  st = ("smooth_1"
+00041040: 2c20 2269 6e5f 6669 6c65 7322 290a 2020  , "in_files").  
+00041050: 2020 2020 2020 7069 7065 6c69 6e65 5f65        pipeline_e
+00041060: 6469 746f 725f 7461 6273 2e67 6574 5f63  ditor_tabs.get_c
+00041070: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
+00041080: 6164 645f 6c69 6e6b 280a 2020 2020 2020  add_link(.      
+00041090: 2020 2020 2020 736f 7572 6365 2c20 6465        source, de
+000410a0: 7374 2c20 5472 7565 2c20 4661 6c73 650a  st, True, False.
+000410b0: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+000410c0: 2020 2023 2041 6464 696e 6720 6c69 6e6b     # Adding link
+000410d0: 2062 6574 7765 656e 2073 6d6f 6f74 685f   between smooth_
+000410e0: 3220 616e 6420 736d 6f6f 7468 5f31 206e  2 and smooth_1 n
+000410f0: 6f64 6573 0a20 2020 2020 2020 2073 6f75  odes.        sou
+00041100: 7263 6520 3d20 2822 736d 6f6f 7468 5f31  rce = ("smooth_1
+00041110: 222c 2022 5f73 6d6f 6f74 6865 645f 6669  ", "_smoothed_fi
+00041120: 6c65 7322 290a 2020 2020 2020 2020 6465  les").        de
+00041130: 7374 203d 2028 2273 6d6f 6f74 685f 3222  st = ("smooth_2"
+00041140: 2c20 2269 6e5f 6669 6c65 7322 290a 2020  , "in_files").  
+00041150: 2020 2020 2020 7069 7065 6c69 6e65 5f65        pipeline_e
+00041160: 6469 746f 725f 7461 6273 2e67 6574 5f63  ditor_tabs.get_c
+00041170: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
+00041180: 6164 645f 6c69 6e6b 280a 2020 2020 2020  add_link(.      
+00041190: 2020 2020 2020 736f 7572 6365 2c20 6465        source, de
+000411a0: 7374 2c20 5472 7565 2c20 4661 6c73 650a  st, True, False.
+000411b0: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+000411c0: 2020 2023 2044 6973 706c 6179 696e 6720     # Displaying 
+000411d0: 7468 6520 736d 6f6f 7468 5f31 206e 6f64  the smooth_1 nod
+000411e0: 6520 7061 7261 6d65 7465 7273 0a20 2020  e parameters.   
+000411f0: 2020 2020 2070 726f 6365 7373 203d 2070       process = p
+00041200: 6970 656c 696e 652e 6e6f 6465 735b 2273  ipeline.nodes["s
+00041210: 6d6f 6f74 685f 3122 5d2e 7072 6f63 6573  mooth_1"].proces
+00041220: 730a 2020 2020 2020 2020 7069 7065 6c69  s.        pipeli
+00041230: 6e65 5f6d 616e 6167 6572 2e64 6973 706c  ne_manager.displ
+00041240: 6179 4e6f 6465 5061 7261 6d65 7465 7273  ayNodeParameters
+00041250: 2822 736d 6f6f 7468 5f31 222c 2070 726f  ("smooth_1", pro
+00041260: 6365 7373 290a 2020 2020 2020 2020 6e6f  cess).        no
+00041270: 6465 5f63 6f6e 7472 6f6c 6c65 7220 3d20  de_controller = 
+00041280: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
+00041290: 2e6e 6f64 6543 6f6e 7472 6f6c 6c65 720a  .nodeController.
+000412a0: 0a20 2020 2020 2020 2023 2043 6861 6e67  .        # Chang
+000412b0: 6520 6e6f 6465 206e 616d 6520 6672 6f6d  e node name from
+000412c0: 2073 6d6f 6f74 685f 3120 746f 2073 6d6f   smooth_1 to smo
+000412d0: 6f74 685f 7465 7374 2e0a 2020 2020 2020  oth_test..      
+000412e0: 2020 2320 5468 6973 2073 686f 756c 6420    # This should 
+000412f0: 6e6f 7420 6368 616e 6765 2074 6865 206e  not change the n
+00041300: 6f64 6520 6e61 6d65 2062 6563 6175 7365  ode name because
+00041310: 2074 6865 7265 2069 7320 616c 7265 6164   there is alread
+00041320: 7920 610a 2020 2020 2020 2020 2320 2273  y a.        # "s
+00041330: 6d6f 6f74 685f 7465 7374 2220 7072 6f63  mooth_test" proc
+00041340: 6573 7320 696e 2074 6865 2070 6970 656c  ess in the pipel
+00041350: 696e 652e 0a20 2020 2020 2020 2023 2054  ine..        # T
+00041360: 6573 7420 6966 2073 6d6f 6f74 685f 3120  est if smooth_1 
+00041370: 6973 2073 7469 6c6c 2069 6e20 7468 6520  is still in the 
+00041380: 7069 7065 6c69 6e65 0a20 2020 2020 2020  pipeline.       
+00041390: 206e 6f64 655f 636f 6e74 726f 6c6c 6572   node_controller
+000413a0: 2e6c 696e 655f 6564 6974 5f6e 6f64 655f  .line_edit_node_
+000413b0: 6e61 6d65 2e73 6574 5465 7874 2822 736d  name.setText("sm
+000413c0: 6f6f 7468 5f74 6573 7422 290a 2020 2020  ooth_test").    
+000413d0: 2020 2020 6b65 7945 7665 6e74 203d 2051      keyEvent = Q
+000413e0: 7447 7569 2e51 4b65 7945 7665 6e74 280a  tGui.QKeyEvent(.
+000413f0: 2020 2020 2020 2020 2020 2020 5145 7665              QEve
+00041400: 6e74 2e4b 6579 5072 6573 732c 2051 742e  nt.KeyPress, Qt.
+00041410: 4b65 795f 5265 7475 726e 2c20 5174 2e4e  Key_Return, Qt.N
+00041420: 6f4d 6f64 6966 6965 720a 2020 2020 2020  oModifier.      
+00041430: 2020 290a 2020 2020 2020 2020 5143 6f72    ).        QCor
+00041440: 6541 7070 6c69 6361 7469 6f6e 2e70 6f73  eApplication.pos
+00041450: 7445 7665 6e74 280a 2020 2020 2020 2020  tEvent(.        
+00041460: 2020 2020 6e6f 6465 5f63 6f6e 7472 6f6c      node_control
+00041470: 6c65 722e 6c69 6e65 5f65 6469 745f 6e6f  ler.line_edit_no
+00041480: 6465 5f6e 616d 652c 206b 6579 4576 656e  de_name, keyEven
+00041490: 740a 2020 2020 2020 2020 290a 2020 2020  t.        ).    
+000414a0: 2020 2020 5154 6573 742e 7157 6169 7428      QTest.qWait(
+000414b0: 3130 3029 0a20 2020 2020 2020 2073 656c  100).        sel
+000414c0: 662e 6173 7365 7274 5472 7565 2822 736d  f.assertTrue("sm
+000414d0: 6f6f 7468 5f31 2220 696e 2070 6970 656c  ooth_1" in pipel
+000414e0: 696e 652e 6e6f 6465 732e 6b65 7973 2829  ine.nodes.keys()
+000414f0: 290a 2020 2020 2020 2020 6e6f 6465 5f63  ).        node_c
+00041500: 6f6e 7472 6f6c 6c65 722e 6c69 6e65 5f65  ontroller.line_e
+00041510: 6469 745f 6e6f 6465 5f6e 616d 652e 7365  dit_node_name.se
+00041520: 7454 6578 7428 2273 6d6f 6f74 685f 7465  tText("smooth_te
+00041530: 7374 5f32 2229 0a20 2020 2020 2020 206b  st_2").        k
+00041540: 6579 4576 656e 7420 3d20 5174 4775 692e  eyEvent = QtGui.
+00041550: 514b 6579 4576 656e 7428 0a20 2020 2020  QKeyEvent(.     
+00041560: 2020 2020 2020 2051 4576 656e 742e 4b65         QEvent.Ke
+00041570: 7950 7265 7373 2c20 5174 2e4b 6579 5f52  yPress, Qt.Key_R
+00041580: 6574 7572 6e2c 2051 742e 4e6f 4d6f 6469  eturn, Qt.NoModi
+00041590: 6669 6572 0a20 2020 2020 2020 2029 0a20  fier.        ). 
+000415a0: 2020 2020 2020 2051 436f 7265 4170 706c         QCoreAppl
+000415b0: 6963 6174 696f 6e2e 706f 7374 4576 656e  ication.postEven
+000415c0: 7428 0a20 2020 2020 2020 2020 2020 206e  t(.            n
+000415d0: 6f64 655f 636f 6e74 726f 6c6c 6572 2e6c  ode_controller.l
+000415e0: 696e 655f 6564 6974 5f6e 6f64 655f 6e61  ine_edit_node_na
+000415f0: 6d65 2c20 6b65 7945 7665 6e74 0a20 2020  me, keyEvent.   
+00041600: 2020 2020 2029 0a20 2020 2020 2020 2051       ).        Q
+00041610: 5465 7374 2e71 5761 6974 2831 3030 290a  Test.qWait(100).
+00041620: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00041630: 6572 7454 7275 6528 2273 6d6f 6f74 685f  ertTrue("smooth_
+00041640: 7465 7374 5f32 2220 696e 2070 6970 656c  test_2" in pipel
+00041650: 696e 652e 6e6f 6465 732e 6b65 7973 2829  ine.nodes.keys()
+00041660: 290a 0a20 2020 2020 2020 2023 2056 6572  )..        # Ver
+00041670: 6966 7969 6e67 2074 6861 7420 7468 6520  ifying that the 
+00041680: 7570 6461 7465 6420 6e6f 6465 2068 6173  updated node has
+00041690: 2074 6865 2073 616d 6520 6c69 6e6b 730a   the same links.
+000416a0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+000416b0: 6572 7445 7175 616c 280a 2020 2020 2020  ertEqual(.      
+000416c0: 2020 2020 2020 312c 0a20 2020 2020 2020        1,.       
+000416d0: 2020 2020 206c 656e 2870 6970 656c 696e       len(pipelin
+000416e0: 652e 6e6f 6465 735b 2273 6d6f 6f74 685f  e.nodes["smooth_
+000416f0: 7465 7374 5f32 225d 2e70 6c75 6773 5b22  test_2"].plugs["
+00041700: 696e 5f66 696c 6573 225d 2e6c 696e 6b73  in_files"].links
+00041710: 5f66 726f 6d29 2c0a 2020 2020 2020 2020  _from),.        
+00041720: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00041730: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
+00041740: 2020 2020 2020 2020 312c 0a20 2020 2020          1,.     
+00041750: 2020 2020 2020 206c 656e 280a 2020 2020         len(.    
+00041760: 2020 2020 2020 2020 2020 2020 7069 7065              pipe
+00041770: 6c69 6e65 2e6e 6f64 6573 5b22 736d 6f6f  line.nodes["smoo
+00041780: 7468 5f74 6573 745f 3222 5d0a 2020 2020  th_test_2"].    
+00041790: 2020 2020 2020 2020 2020 2020 2e70 6c75              .plu
+000417a0: 6773 5b22 5f73 6d6f 6f74 6865 645f 6669  gs["_smoothed_fi
+000417b0: 6c65 7322 5d0a 2020 2020 2020 2020 2020  les"].          
+000417c0: 2020 2020 2020 2e6c 696e 6b73 5f74 6f0a        .links_to.
+000417d0: 2020 2020 2020 2020 2020 2020 292c 0a20              ),. 
+000417e0: 2020 2020 2020 2029 0a0a 0a63 6c61 7373         )...class
+000417f0: 2054 6573 744d 4941 4f74 6865 7273 2854   TestMIAOthers(T
+00041800: 6573 744d 4941 4361 7365 293a 0a20 2020  estMIACase):.   
+00041810: 2022 2222 5465 7374 7320 666f 7220 6f74   """Tests for ot
+00041820: 6865 7220 7061 7274 7320 6f66 2074 6865  her parts of the
+00041830: 204d 4941 2073 6f66 7477 6172 6520 7468   MIA software th
+00041840: 6174 2064 6f20 6e6f 7420 7265 6c61 7465  at do not relate
+00041850: 206d 7563 680a 2020 2020 7769 7468 2074   much.    with t
+00041860: 6865 206f 7468 6572 2063 6c61 7373 6573  he other classes
+00041870: 2e0a 0a20 2020 203a 436f 6e74 6169 6e73  ...    :Contains
+00041880: 3a0a 2020 2020 2020 2020 3a4d 6574 686f  :.        :Metho
+00041890: 643a 0a20 2020 2020 2020 2020 2020 202d  d:.            -
+000418a0: 2074 6573 745f 6974 6572 6174 696f 6e5f   test_iteration_
+000418b0: 7461 626c 653a 2070 6c61 7973 2077 6974  table: plays wit
+000418c0: 6820 7468 6520 6974 6572 6174 696f 6e20  h the iteration 
+000418d0: 7461 626c 650a 2020 2020 2020 2020 2020  table.          
+000418e0: 2020 2d20 7465 7374 5f70 726f 6365 7373    - test_process
+000418f0: 5f6c 6962 7261 7279 3a20 696e 7374 616c  _library: instal
+00041900: 6c20 7468 6520 6272 6963 6b5f 7465 7374  l the brick_test
+00041910: 2061 6e64 2074 6865 6e20 7265 6d6f 7665   and then remove
+00041920: 2069 740a 2020 2020 2222 220a 0a20 2020   it.    """..   
+00041930: 2064 6566 2074 6573 745f 6974 6572 6174   def test_iterat
+00041940: 696f 6e5f 7461 626c 6528 7365 6c66 293a  ion_table(self):
+00041950: 0a20 2020 2020 2020 2022 2222 4f70 656e  .        """Open
+00041960: 7320 6120 6e65 7720 7072 6f6a 6563 742c  s a new project,
+00041970: 2069 6e69 7469 616c 697a 6573 2074 6865   initializes the
+00041980: 2070 6970 656c 696e 6520 6974 6572 6174   pipeline iterat
+00041990: 696f 6e20 616e 6420 6368 616e 6765 730a  ion and changes.
+000419a0: 2020 2020 2020 2020 6974 7320 7061 7261          its para
+000419b0: 6d65 7465 7273 2e0a 0a20 2020 2020 2020  meters...       
+000419c0: 202d 2054 6573 7473 3a20 4974 6572 6174   - Tests: Iterat
+000419d0: 696f 6e54 6162 6c65 0a0a 2020 2020 2020  ionTable..      
+000419e0: 2020 2d20 4d6f 636b 733a 2074 6865 2065    - Mocks: the e
+000419f0: 7865 6375 7469 6f6e 206f 6620 6120 506f  xecution of a Po
+00041a00: 7055 7053 656c 6563 7454 6167 436f 756e  pUpSelectTagCoun
+00041a10: 7454 6162 6c65 2061 6e64 2061 2051 4469  tTable and a QDi
+00041a20: 616c 6f67 0a20 2020 2020 2020 2022 2222  alog.        """
+00041a30: 0a0a 2020 2020 2020 2020 7072 6f6a 6563  ..        projec
+00041a40: 745f 385f 7061 7468 203d 2073 656c 662e  t_8_path = self.
+00041a50: 6765 745f 6e65 775f 7465 7374 5f70 726f  get_new_test_pro
+00041a60: 6a65 6374 2829 0a20 2020 2020 2020 2073  ject().        s
+00041a70: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00041a80: 7377 6974 6368 5f70 726f 6a65 6374 2870  switch_project(p
+00041a90: 726f 6a65 6374 5f38 5f70 6174 682c 2022  roject_8_path, "
+00041aa0: 7072 6f6a 6563 745f 3822 290a 0a20 2020  project_8")..   
+00041ab0: 2020 2020 2023 2053 6574 7320 7368 6f72       # Sets shor
+00041ac0: 7463 7574 7320 666f 7220 6f62 6a65 6374  tcuts for object
+00041ad0: 7320 7468 6174 2061 7265 206f 6674 656e  s that are often
+00041ae0: 2075 7365 640a 2020 2020 2020 2020 6974   used.        it
+00041af0: 6572 5f74 6162 6c65 203d 2073 656c 662e  er_table = self.
+00041b00: 6d61 696e 5f77 696e 646f 772e 7069 7065  main_window.pipe
+00041b10: 6c69 6e65 5f6d 616e 6167 6572 2e69 7465  line_manager.ite
+00041b20: 7261 7469 6f6e 5461 626c 650a 2020 2020  rationTable.    
+00041b30: 2020 2020 7365 7373 696f 6e20 3d20 6974      session = it
+00041b40: 6572 5f74 6162 6c65 2e70 726f 6a65 6374  er_table.project
+00041b50: 2e73 6573 7369 6f6e 0a20 2020 2020 2020  .session.       
+00041b60: 2070 706c 5f6d 616e 6167 6572 203d 2073   ppl_manager = s
+00041b70: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00041b80: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
+00041b90: 0a20 2020 2020 2020 2070 706c 5f65 6469  .        ppl_edi
+00041ba0: 746f 7220 3d20 7070 6c5f 6d61 6e61 6765  tor = ppl_manage
+00041bb0: 722e 7069 7065 6c69 6e65 4564 6974 6f72  r.pipelineEditor
+00041bc0: 5461 6273 2e67 6574 5f63 7572 7265 6e74  Tabs.get_current
+00041bd0: 5f65 6469 746f 7228 290a 0a20 2020 2020  _editor()..     
+00041be0: 2020 2023 204d 6f63 6b73 2074 6865 2065     # Mocks the e
+00041bf0: 7865 6375 7469 6f6e 206f 6620 6120 6469  xecution of a di
+00041c00: 616c 6f67 2062 6f78 2074 6f20 6176 6f69  alog box to avoi
+00041c10: 6420 6173 796e 6368 726f 6e6f 7573 2073  d asynchronous s
+00041c20: 686f 740a 2020 2020 2020 2020 5144 6961  hot.        QDia
+00041c30: 6c6f 672e 6578 6563 5f20 3d20 4d6f 636b  log.exec_ = Mock
+00041c40: 2872 6574 7572 6e5f 7661 6c75 653d 5144  (return_value=QD
+00041c50: 6961 6c6f 672e 4163 6365 7074 6564 290a  ialog.Accepted).
+00041c60: 0a20 2020 2020 2020 2023 2041 6c6c 6f77  .        # Allow
+00041c70: 7320 666f 7220 7468 6520 6974 6572 6174  s for the iterat
+00041c80: 696f 6e20 6f66 2074 6865 2070 6970 656c  ion of the pipel
+00041c90: 696e 650a 2020 2020 2020 2020 6974 6572  ine.        iter
+00041ca0: 5f74 6162 6c65 2e63 6865 636b 5f62 6f78  _table.check_box
+00041cb0: 5f69 7465 7261 7465 2e73 6574 4368 6563  _iterate.setChec
+00041cc0: 6b65 6428 5472 7565 290a 0a20 2020 2020  ked(True)..     
+00041cd0: 2020 2023 2041 6464 7320 6120 7461 6720     # Adds a tag 
+00041ce0: 616e 6420 6173 7365 7274 7320 7468 6174  and asserts that
+00041cf0: 2061 2074 6167 2062 7574 746f 6e20 7761   a tag button wa
+00041d00: 7320 6164 6465 640a 2020 2020 2020 2020  s added.        
+00041d10: 6974 6572 5f74 6162 6c65 2e61 6464 5f74  iter_table.add_t
+00041d20: 6167 2829 0a20 2020 2020 2020 2073 656c  ag().        sel
+00041d30: 662e 6173 7365 7274 4571 7561 6c28 6c65  f.assertEqual(le
+00041d40: 6e28 6974 6572 5f74 6162 6c65 2e70 7573  n(iter_table.pus
+00041d50: 685f 6275 7474 6f6e 7329 2c20 3329 0a20  h_buttons), 3). 
+00041d60: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00041d70: 7274 4571 7561 6c28 6974 6572 5f74 6162  rtEqual(iter_tab
+00041d80: 6c65 2e70 7573 685f 6275 7474 6f6e 735b  le.push_buttons[
+00041d90: 2d31 5d2e 7465 7874 2829 2c20 2254 6167  -1].text(), "Tag
+00041da0: 206e c2b0 3322 290a 0a20 2020 2020 2020   n..3")..       
+00041db0: 2023 2046 696c 6c20 7468 6520 2776 616c   # Fill the 'val
+00041dc0: 7565 735f 6c69 7374 2720 7769 7468 2074  ues_list' with t
+00041dd0: 6865 2074 6167 2076 616c 7565 7320 696e  he tag values in
+00041de0: 2074 6865 2064 6f63 756d 656e 7473 0a20   the documents. 
+00041df0: 2020 2020 2020 2069 7465 725f 7461 626c         iter_tabl
+00041e00: 652e 7075 7368 5f62 7574 746f 6e73 5b32  e.push_buttons[2
+00041e10: 5d2e 7365 7454 6578 7428 2242 616e 6457  ].setText("BandW
+00041e20: 6964 7468 2229 0a20 2020 2020 2020 2069  idth").        i
+00041e30: 7465 725f 7461 626c 652e 6669 6c6c 5f76  ter_table.fill_v
+00041e40: 616c 7565 7328 3229 0a20 2020 2020 2020  alues(2).       
+00041e50: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
+00041e60: 286c 656e 2869 7465 725f 7461 626c 652e  (len(iter_table.
+00041e70: 7661 6c75 6573 5f6c 6973 745b 2d31 5d29  values_list[-1])
+00041e80: 203d 3d20 3329 0a20 2020 2020 2020 2073   == 3).        s
+00041e90: 656c 662e 6173 7365 7274 5472 7565 2874  elf.assertTrue(t
+00041ea0: 7970 6528 6974 6572 5f74 6162 6c65 2e76  ype(iter_table.v
+00041eb0: 616c 7565 735f 6c69 7374 5b2d 315d 5b30  alues_list[-1][0
+00041ec0: 5d29 203d 3d20 6c69 7374 290a 2020 2020  ]) == list).    
+00041ed0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00041ee0: 7175 616c 2869 7465 725f 7461 626c 652e  qual(iter_table.
+00041ef0: 7661 6c75 6573 5f6c 6973 745b 2d31 5d5b  values_list[-1][
+00041f00: 305d 2c20 5b35 3030 3030 2e30 5d29 0a0a  0], [50000.0])..
+00041f10: 2020 2020 2020 2020 2320 5265 6d6f 7665          # Remove
+00041f20: 7320 6120 7461 6720 616e 6420 6173 7365  s a tag and asse
+00041f30: 7274 7320 7468 6174 2061 2074 6167 2062  rts that a tag b
+00041f40: 7574 746f 6e20 7761 7320 7265 6d6f 7665  utton was remove
+00041f50: 640a 2020 2020 2020 2020 6974 6572 5f74  d.        iter_t
+00041f60: 6162 6c65 2e72 656d 6f76 655f 7461 6728  able.remove_tag(
+00041f70: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00041f80: 7373 6572 7445 7175 616c 286c 656e 2869  ssertEqual(len(i
+00041f90: 7465 725f 7461 626c 652e 7075 7368 5f62  ter_table.push_b
+00041fa0: 7574 746f 6e73 292c 2032 290a 0a20 2020  uttons), 2)..   
+00041fb0: 2020 2020 2023 204d 6f63 6b73 2074 6865       # Mocks the
+00041fc0: 2065 7865 6375 7469 6f6e 206f 6620 2750   execution of 'P
+00041fd0: 6f70 5570 5365 6c65 6374 5461 6743 6f75  opUpSelectTagCou
+00041fe0: 6e74 5461 626c 6527 2074 6f20 6176 6f69  ntTable' to avoi
+00041ff0: 640a 2020 2020 2020 2020 2320 6173 796e  d.        # asyn
+00042000: 6368 726f 6e6f 7573 2073 686f 740a 2020  chronous shot.  
+00042010: 2020 2020 2020 506f 7055 7053 656c 6563        PopUpSelec
+00042020: 7454 6167 436f 756e 7454 6162 6c65 2e65  tTagCountTable.e
+00042030: 7865 635f 203d 204d 6f63 6b28 7265 7475  xec_ = Mock(retu
+00042040: 726e 5f76 616c 7565 3d54 7275 6529 0a0a  rn_value=True)..
+00042050: 2020 2020 2020 2020 2320 5365 6c65 6374          # Select
+00042060: 7320 6120 7461 6720 746f 2069 7465 7261  s a tag to itera
+00042070: 7465 206f 7665 722c 2074 6573 7473 2027  te over, tests '
+00042080: 7365 6c65 6374 5f69 7465 7261 7469 6f6e  select_iteration
+00042090: 5f74 6167 2720 7768 696c 650a 2020 2020  _tag' while.    
+000420a0: 2020 2020 2320 6d6f 636b 696e 6720 6120      # mocking a 
+000420b0: 2750 6f70 5570 5365 6c65 6374 5461 6743  'PopUpSelectTagC
+000420c0: 6f75 6e74 5461 626c 6527 2e0a 2020 2020  ountTable'..    
+000420d0: 2020 2020 2320 4475 6520 746f 2074 6865      # Due to the
+000420e0: 2061 626f 7665 206d 6f63 6b2c 2027 6974   above mock, 'it
+000420f0: 6572 6174 6564 5f74 6167 2720 6973 2073  erated_tag' is s
+00042100: 6574 2061 7320 4e6f 6e65 0a20 2020 2020  et as None.     
+00042110: 2020 2070 706c 5f65 6469 746f 722e 6974     ppl_editor.it
+00042120: 6572 6174 6564 5f74 6167 203d 2022 4261  erated_tag = "Ba
+00042130: 6e64 5769 6474 6822 0a20 2020 2020 2020  ndWidth".       
+00042140: 2069 7465 725f 7461 626c 652e 7365 6c65   iter_table.sele
+00042150: 6374 5f69 7465 7261 7469 6f6e 5f74 6167  ct_iteration_tag
+00042160: 2829 0a20 2020 2020 2020 2023 2069 7465  ().        # ite
+00042170: 725f 7461 626c 652e 636f 6d62 6f5f 626f  r_table.combo_bo
+00042180: 782e 636c 6561 7228 290a 2020 2020 2020  x.clear().      
+00042190: 2020 2320 6974 6572 5f74 6162 6c65 2e63    # iter_table.c
+000421a0: 6f6d 626f 5f62 6f78 2e61 6464 4974 656d  ombo_box.addItem
+000421b0: 7328 5b27 5b35 3030 3030 2e30 5d27 5d29  s(['[50000.0]'])
+000421c0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+000421d0: 7365 7274 4973 4e6f 6e65 2870 706c 5f65  sertIsNone(ppl_e
+000421e0: 6469 746f 722e 6974 6572 6174 6564 5f74  ditor.iterated_t
+000421f0: 6167 290a 0a20 2020 2020 2020 2023 2046  ag)..        # F
+00042200: 696c 7465 7273 2074 6865 2073 6361 6e73  ilters the scans
+00042210: 206d 6174 6368 696e 6720 7468 6520 7365   matching the se
+00042220: 6c65 6374 6564 2020 2769 7465 7261 7465  lected  'iterate
+00042230: 645f 7461 6727 0a20 2020 2020 2020 2023  d_tag'.        #
+00042240: 2053 696e 6365 2074 6865 2065 7865 6375   Since the execu
+00042250: 7469 6f6e 2069 7320 6d6f 636b 6564 2c20  tion is mocked, 
+00042260: 2774 6167 5f76 616c 7565 735f 6c69 7374  'tag_values_list
+00042270: 2720 6265 636f 6d65 7320 656d 7074 790a  ' becomes empty.
+00042280: 2020 2020 2020 2020 6974 6572 5f74 6162          iter_tab
+00042290: 6c65 2e66 696c 7465 725f 7661 6c75 6573  le.filter_values
+000422a0: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
+000422b0: 6173 7365 7274 5472 7565 2874 7970 6528  assertTrue(type(
+000422c0: 7070 6c5f 6564 6974 6f72 2e74 6167 5f76  ppl_editor.tag_v
+000422d0: 616c 7565 735f 6c69 7374 2920 3d3d 206c  alues_list) == l
+000422e0: 6973 7429 0a20 2020 2020 2020 2073 656c  ist).        sel
+000422f0: 662e 6173 7365 7274 5472 7565 286c 656e  f.assertTrue(len
+00042300: 2870 706c 5f65 6469 746f 722e 7461 675f  (ppl_editor.tag_
+00042310: 7661 6c75 6573 5f6c 6973 7429 203d 3d20  values_list) == 
+00042320: 3029 0a0a 2020 2020 2020 2020 2320 5570  0)..        # Up
+00042330: 6461 7465 7320 7468 6520 6275 7474 6f6e  dates the button
+00042340: 2077 6974 6820 7468 6520 7365 6c65 6374   with the select
+00042350: 6564 2074 6167 0a20 2020 2020 2020 2069  ed tag.        i
+00042360: 7465 725f 7461 626c 652e 7570 6461 7465  ter_table.update
+00042370: 5f73 656c 6563 7465 645f 7461 6728 2242  _selected_tag("B
+00042380: 616e 6477 6964 7468 2229 0a0a 2020 2020  andwidth")..    
+00042390: 2020 2020 2320 5365 6c65 6374 7320 7468      # Selects th
+000423a0: 6520 7669 7375 616c 697a 6564 2074 6167  e visualized tag
+000423b0: 0a20 2020 2020 2020 2069 7465 725f 7461  .        iter_ta
+000423c0: 626c 652e 7365 6c65 6374 5f76 6973 7561  ble.select_visua
+000423d0: 6c69 7a65 645f 7461 6728 3029 0a0a 2020  lized_tag(0)..  
+000423e0: 2020 2020 2020 2320 5365 6e64 7320 7468        # Sends th
+000423f0: 6520 6461 7461 2062 726f 7773 6572 2073  e data browser s
+00042400: 6361 6e73 2074 6f20 7468 6520 7069 7065  cans to the pipe
+00042410: 6c69 6e65 206d 616e 6167 6572 2061 6e64  line manager and
+00042420: 2075 7064 6174 6573 2074 6865 0a20 2020   updates the.   
+00042430: 2020 2020 2023 2069 7465 7261 7465 6420       # iterated 
+00042440: 7461 6773 0a20 2020 2020 2020 2053 4341  tags.        SCA
+00042450: 4e53 5f4c 4953 5420 3d20 6974 6572 5f74  NS_LIST = iter_t
+00042460: 6162 6c65 2e70 726f 6a65 6374 2e73 6573  able.project.ses
+00042470: 7369 6f6e 2e67 6574 5f64 6f63 756d 656e  sion.get_documen
+00042480: 7473 5f6e 616d 6573 2822 6375 7272 656e  ts_names("curren
+00042490: 7422 290a 2020 2020 2020 2020 7070 6c5f  t").        ppl_
+000424a0: 6d61 6e61 6765 722e 7363 616e 5f6c 6973  manager.scan_lis
+000424b0: 7420 3d20 5343 414e 535f 4c49 5354 0a20  t = SCANS_LIST. 
+000424c0: 2020 2020 2020 2069 7465 725f 7461 626c         iter_tabl
+000424d0: 652e 7570 6461 7465 5f69 7465 7261 7465  e.update_iterate
+000424e0: 645f 7461 6728 290a 0a20 2020 2020 2020  d_tag()..       
+000424f0: 2023 2055 7064 6174 6573 2074 6865 2069   # Updates the i
+00042500: 7465 7261 7469 6f6e 2074 6162 6c65 2c20  teration table, 
+00042510: 7465 7374 7320 2775 7064 6174 655f 7461  tests 'update_ta
+00042520: 626c 6527 2077 6869 6c65 0a20 2020 2020  ble' while.     
+00042530: 2020 2023 206d 6f63 6b69 6e67 2074 6865     # mocking the
+00042540: 2065 7865 6375 7469 6f6e 206f 6620 2766   execution of 'f
+00042550: 696c 7465 725f 646f 6375 6d65 6e74 7327  ilter_documents'
+00042560: 0a0a 2020 2020 2020 2020 444f 435f 315f  ..        DOC_1_
+00042570: 4e41 4d45 203d 2053 4341 4e53 5f4c 4953  NAME = SCANS_LIS
+00042580: 545b 305d 0a20 2020 2020 2020 2044 4f43  T[0].        DOC
+00042590: 5f31 203d 2069 7465 725f 7461 626c 652e  _1 = iter_table.
+000425a0: 7072 6f6a 6563 742e 7365 7373 696f 6e2e  project.session.
+000425b0: 6765 745f 646f 6375 6d65 6e74 2822 6375  get_document("cu
+000425c0: 7272 656e 7422 2c20 444f 435f 315f 4e41  rrent", DOC_1_NA
+000425d0: 4d45 290a 0a20 2020 2020 2020 2073 6573  ME)..        ses
+000425e0: 7369 6f6e 2e66 696c 7465 725f 646f 6375  sion.filter_docu
+000425f0: 6d65 6e74 7320 3d20 4d6f 636b 2872 6574  ments = Mock(ret
+00042600: 7572 6e5f 7661 6c75 653d 5b44 4f43 5f31  urn_value=[DOC_1
+00042610: 5d29 0a20 2020 2020 2020 2070 706c 5f65  ]).        ppl_e
+00042620: 6469 746f 722e 6974 6572 6174 6564 5f74  ditor.iterated_t
+00042630: 6167 203d 2022 4261 6e64 5769 6474 6822  ag = "BandWidth"
+00042640: 0a0a 2020 2020 2020 2020 6974 6572 5f74  ..        iter_t
+00042650: 6162 6c65 2e75 7064 6174 655f 7461 626c  able.update_tabl
+00042660: 6528 290a 0a20 2020 2020 2020 2023 2041  e()..        # A
+00042670: 7373 6572 7473 2074 6861 7420 7468 6520  sserts that the 
+00042680: 6974 6572 6174 696f 6e20 7461 626c 6520  iteration table 
+00042690: 6861 7320 6f6e 6520 6974 656d 0a20 2020  has one item.   
+000426a0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+000426b0: 4973 4e6f 744e 6f6e 6528 6974 6572 5f74  IsNotNone(iter_t
+000426c0: 6162 6c65 2e69 7465 7261 7469 6f6e 5f74  able.iteration_t
+000426d0: 6162 6c65 2e69 7465 6d28 302c 2030 2929  able.item(0, 0))
+000426e0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+000426f0: 7365 7274 4973 4e6f 6e65 2869 7465 725f  sertIsNone(iter_
+00042700: 7461 626c 652e 6974 6572 6174 696f 6e5f  table.iteration_
+00042710: 7461 626c 652e 6974 656d 2831 2c20 3029  table.item(1, 0)
+00042720: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
+00042730: 7072 6f63 6573 735f 6c69 6272 6172 7928  process_library(
+00042740: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
+00042750: 2222 496e 7365 7274 7320 6120 726f 772c  ""Inserts a row,
+00042760: 206d 696d 6573 2061 6e64 2063 6861 6e67   mimes and chang
+00042770: 6573 2074 6865 2064 6174 6120 616e 6420  es the data and 
+00042780: 6465 6c65 7465 7320 6974 2e0a 0a20 2020  deletes it...   
+00042790: 2020 2020 202d 2054 6573 7473 3a20 5072       - Tests: Pr
+000427a0: 6f63 6573 734c 6962 7261 7279 0a0a 2020  ocessLibrary..  
+000427b0: 2020 2020 2020 2d4d 6f63 6b73 3a0a 2020        -Mocks:.  
+000427c0: 2020 2020 2020 2020 2020 2d20 514d 6573            - QMes
+000427d0: 7361 6765 426f 782e 6578 6563 0a20 2020  sageBox.exec.   
+000427e0: 2020 2020 2020 2020 202d 2051 4d65 7373           - QMess
+000427f0: 6167 6542 6f78 2e71 7565 7374 696f 6e0a  ageBox.question.
+00042800: 0a20 2020 2020 2020 2054 6865 2070 726f  .        The pro
+00042810: 6365 7373 206c 6962 7261 7279 2069 7320  cess library is 
+00042820: 6c6f 6361 7465 6420 6174 2074 6865 206c  located at the l
+00042830: 6566 7420 636f 726e 6572 206f 6620 7468  eft corner of th
+00042840: 6520 7069 7065 6c69 6e65 0a20 2020 2020  e pipeline.     
+00042850: 2020 206d 616e 6167 6572 2074 6162 2c20     manager tab, 
+00042860: 7768 6572 6520 7468 6520 6c69 7374 206f  where the list o
+00042870: 6620 6176 6169 6c61 626c 6520 6272 6963  f available bric
+00042880: 6b73 2069 7320 7368 6f77 6e2e 0a20 2020  ks is shown..   
+00042890: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
+000428a0: 2020 2320 5365 7473 2073 686f 7274 6375    # Sets shortcu
+000428b0: 7473 2066 6f72 206f 626a 6563 7473 2074  ts for objects t
+000428c0: 6861 7420 6172 6520 6f66 7465 6e20 7573  hat are often us
+000428d0: 6564 0a20 2020 2020 2020 2070 706c 5f6d  ed.        ppl_m
+000428e0: 616e 6167 6572 203d 2073 656c 662e 6d61  anager = self.ma
+000428f0: 696e 5f77 696e 646f 772e 7069 7065 6c69  in_window.pipeli
+00042900: 6e65 5f6d 616e 6167 6572 0a20 2020 2020  ne_manager.     
+00042910: 2020 2070 726f 635f 6c69 6220 3d20 7070     proc_lib = pp
+00042920: 6c5f 6d61 6e61 6765 722e 7072 6f63 6573  l_manager.proces
+00042930: 734c 6962 7261 7279 2e70 726f 6365 7373  sLibrary.process
+00042940: 5f6c 6962 7261 7279 0a0a 2020 2020 2020  _library..      
+00042950: 2020 2320 5377 6974 6368 6573 2074 6f20    # Switches to 
+00042960: 7069 7065 6c69 6e65 206d 616e 6167 6572  pipeline manager
+00042970: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+00042980: 696e 5f77 696e 646f 772e 7461 6273 2e73  in_window.tabs.s
+00042990: 6574 4375 7272 656e 7449 6e64 6578 2832  etCurrentIndex(2
+000429a0: 290a 0a20 2020 2020 2020 2023 2047 6574  )..        # Get
+000429b0: 7320 7468 6520 6368 696c 6420 636f 756e  s the child coun
+000429c0: 740a 2020 2020 2020 2020 6368 696c 645f  t.        child_
+000429d0: 636f 756e 7420 3d20 7072 6f63 5f6c 6962  count = proc_lib
+000429e0: 2e5f 6d6f 6465 6c2e 6765 744e 6f64 6528  ._model.getNode(
+000429f0: 514d 6f64 656c 496e 6465 7828 2929 2e63  QModelIndex()).c
+00042a00: 6869 6c64 436f 756e 7428 290a 2020 2020  hildCount().    
+00042a10: 2020 2020 726f 775f 6461 7461 203d 2022      row_data = "
+00042a20: 756e 7469 746c 6564 2220 2b20 7374 7228  untitled" + str(
+00042a30: 6368 696c 645f 636f 756e 7429 0a0a 2020  child_count)..  
+00042a40: 2020 2020 2020 2320 4164 6473 2061 2072        # Adds a r
+00042a50: 6f77 2074 6f20 7468 6520 7072 6f63 6573  ow to the proces
+00042a60: 7320 6c69 6272 6172 790a 2020 2020 2020  s library.      
+00042a70: 2020 7072 6f63 5f6c 6962 2e5f 6d6f 6465    proc_lib._mode
+00042a80: 6c2e 696e 7365 7274 526f 7728 3029 0a0a  l.insertRow(0)..
+00042a90: 2020 2020 2020 2020 2320 4765 7473 2069          # Gets i
+00042aa0: 7473 2069 6e64 6578 2061 6e64 2073 656c  ts index and sel
+00042ab0: 6563 7473 2069 740a 2020 2020 2020 2020  ects it.        
+00042ac0: 726f 775f 696e 6465 7820 3d20 7365 6c66  row_index = self
+00042ad0: 2e66 696e 645f 6974 656d 5f62 795f 6461  .find_item_by_da
+00042ae0: 7461 2870 726f 635f 6c69 622c 2072 6f77  ta(proc_lib, row
+00042af0: 5f64 6174 6129 0a20 2020 2020 2020 2073  _data).        s
+00042b00: 656c 662e 6173 7365 7274 4973 4e6f 744e  elf.assertIsNotN
+00042b10: 6f6e 6528 726f 775f 696e 6465 7829 0a20  one(row_index). 
+00042b20: 2020 2020 2020 2070 726f 635f 6c69 622e         proc_lib.
+00042b30: 7365 6c65 6374 696f 6e4d 6f64 656c 2829  selectionModel()
+00042b40: 2e73 656c 6563 7428 0a20 2020 2020 2020  .select(.       
+00042b50: 2020 2020 2072 6f77 5f69 6e64 6578 2c20       row_index, 
+00042b60: 5149 7465 6d53 656c 6563 7469 6f6e 4d6f  QItemSelectionMo
+00042b70: 6465 6c2e 5365 6c65 6374 4375 7272 656e  del.SelectCurren
+00042b80: 740a 2020 2020 2020 2020 290a 0a20 2020  t.        )..   
+00042b90: 2020 2020 2023 204d 696d 6573 2074 6865       # Mimes the
+00042ba0: 2064 6174 6120 6f66 2074 6865 2072 6f77   data of the row
+00042bb0: 2077 6964 6765 740a 2020 2020 2020 2020   widget.        
+00042bc0: 6d69 6d65 5f64 6174 6120 3d20 7072 6f63  mime_data = proc
+00042bd0: 5f6c 6962 2e5f 6d6f 6465 6c2e 6d69 6d65  _lib._model.mime
+00042be0: 4461 7461 285b 726f 775f 696e 6465 785d  Data([row_index]
+00042bf0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00042c00: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
+00042c10: 2020 2020 2020 2020 6d69 6d65 5f64 6174          mime_dat
+00042c20: 612e 6461 7461 2822 636f 6d70 6f6e 656e  a.data("componen
+00042c30: 742f 6e61 6d65 2229 2e64 6174 6128 292c  t/name").data(),
+00042c40: 0a20 2020 2020 2020 2020 2020 2062 7974  .            byt
+00042c50: 6573 2872 6f77 5f64 6174 612c 2065 6e63  es(row_data, enc
+00042c60: 6f64 696e 673d 2275 7466 2d38 2229 2c0a  oding="utf-8"),.
+00042c70: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+00042c80: 2020 2023 2043 6861 6e67 6573 2074 6865     # Changes the
+00042c90: 2064 6174 6120 6f66 2074 6865 2072 6f77   data of the row
+00042ca0: 0a20 2020 2020 2020 2070 726f 635f 6c69  .        proc_li
+00042cb0: 622e 5f6d 6f64 656c 2e73 6574 4461 7461  b._model.setData
+00042cc0: 2872 6f77 5f69 6e64 6578 2c20 2275 6e74  (row_index, "unt
+00042cd0: 6974 6c65 6431 3031 2229 0a20 2020 2020  itled101").     
+00042ce0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00042cf0: 7561 6c28 726f 775f 696e 6465 782e 6461  ual(row_index.da
+00042d00: 7461 2829 2c20 2275 6e74 6974 6c65 6431  ta(), "untitled1
+00042d10: 3031 2229 0a0a 2020 2020 2020 2020 2320  01")..        # 
+00042d20: 4d6f 636b 7320 7468 6520 6578 6563 7574  Mocks the execut
+00042d30: 696f 6e20 6f66 2061 2064 6961 6c6f 6720  ion of a dialog 
+00042d40: 626f 780a 2020 2020 2020 2020 514d 6573  box.        QMes
+00042d50: 7361 6765 426f 782e 6578 6563 203d 206c  sageBox.exec = l
+00042d60: 616d 6264 6120 2a61 7267 733a 204e 6f6e  ambda *args: Non
+00042d70: 650a 2020 2020 2020 2020 514d 6573 7361  e.        QMessa
+00042d80: 6765 426f 782e 7175 6573 7469 6f6e 203d  geBox.question =
+00042d90: 206c 616d 6264 6120 2a61 7267 733a 2051   lambda *args: Q
+00042da0: 4d65 7373 6167 6542 6f78 2e59 6573 0a0a  MessageBox.Yes..
+00042db0: 2020 2020 2020 2020 2320 4465 6c65 7465          # Delete
+00042dc0: 7320 7468 6520 726f 7720 6279 2070 7265  s the row by pre
+00042dd0: 7373 696e 6720 7468 6520 6465 6c20 6b65  ssing the del ke
+00042de0: 790a 2020 2020 2020 2020 6576 656e 7420  y.        event 
+00042df0: 3d20 4d6f 636b 2829 0a20 2020 2020 2020  = Mock().       
+00042e00: 2065 7665 6e74 2e6b 6579 203d 206c 616d   event.key = lam
+00042e10: 6264 6120 2a61 7267 733a 2051 742e 4b65  bda *args: Qt.Ke
+00042e20: 795f 4465 6c65 7465 0a20 2020 2020 2020  y_Delete.       
+00042e30: 2070 726f 635f 6c69 622e 6b65 7950 7265   proc_lib.keyPre
+00042e40: 7373 4576 656e 7428 6576 656e 7429 0a0a  ssEvent(event)..
+00042e50: 2020 2020 2020 2020 2320 4d6f 636b 7320          # Mocks 
+00042e60: 6120 6d6f 7573 6520 7072 6573 7320 6576  a mouse press ev
+00042e70: 656e 7420 6f66 2074 6865 2066 6972 7374  ent of the first
+00042e80: 2069 7465 6d20 6f66 2074 6865 2070 726f   item of the pro
+00042e90: 6365 7373 206c 6962 0a20 2020 2020 2020  cess lib.       
+00042ea0: 206d 6f75 7365 5f65 7665 6e74 203d 2051   mouse_event = Q
+00042eb0: 7447 7569 2e51 4d6f 7573 6545 7665 6e74  tGui.QMouseEvent
+00042ec0: 0a20 2020 2020 2020 206d 6f75 7365 5f65  .        mouse_e
+00042ed0: 7665 6e74 2e70 6f73 203d 206c 616d 6264  vent.pos = lambd
+00042ee0: 6120 2a61 7267 733a 2051 506f 696e 7428  a *args: QPoint(
+00042ef0: 302c 2030 290a 2020 2020 2020 2020 6d6f  0, 0).        mo
+00042f00: 7573 655f 6576 656e 742e 6275 7474 6f6e  use_event.button
+00042f10: 203d 206c 616d 6264 6120 2a61 7267 733a   = lambda *args:
+00042f20: 2051 742e 5269 6768 7442 7574 746f 6e0a   Qt.RightButton.
+00042f30: 0a20 2020 2020 2020 2023 204d 6f63 6b73  .        # Mocks
+00042f40: 2074 6865 2072 6574 7572 6e20 7661 6c75   the return valu
+00042f50: 6520 6f66 2027 6d6f 7573 6550 7265 7373  e of 'mousePress
+00042f60: 4576 656e 7427 0a20 2020 2020 2020 2051  Event'.        Q
+00042f70: 5472 6565 5669 6577 2e6d 6f75 7365 5072  TreeView.mousePr
+00042f80: 6573 7345 7665 6e74 203d 206c 616d 6264  essEvent = lambd
+00042f90: 6120 2a61 7267 733a 2054 7275 650a 0a20  a *args: True.. 
+00042fa0: 2020 2020 2020 2023 2041 6464 7320 6120         # Adds a 
+00042fb0: 726f 7720 746f 2074 6865 2070 726f 6365  row to the proce
+00042fc0: 7373 206c 6962 7261 7279 0a20 2020 2020  ss library.     
+00042fd0: 2020 2070 726f 635f 6c69 622e 5f6d 6f64     proc_lib._mod
+00042fe0: 656c 2e69 6e73 6572 7452 6f77 2830 290a  el.insertRow(0).
+00042ff0: 0a20 2020 2020 2020 2023 204d 6f63 6b73  .        # Mocks
+00043000: 2073 656c 6563 7469 6e67 2027 4465 6c65   selecting 'Dele
+00043010: 7465 2070 6163 6b61 6765 270a 2020 2020  te package'.    
+00043020: 2020 2020 514d 656e 752e 6578 6563 5f20      QMenu.exec_ 
+00043030: 3d20 6c61 6d62 6461 202a 6172 6773 3a20  = lambda *args: 
+00043040: 7072 6f63 5f6c 6962 2e72 656d 6f76 650a  proc_lib.remove.
+00043050: 0a20 2020 2020 2020 2072 6573 203d 2070  .        res = p
+00043060: 726f 635f 6c69 622e 6d6f 7573 6550 7265  roc_lib.mousePre
+00043070: 7373 4576 656e 7428 6d6f 7573 655f 6576  ssEvent(mouse_ev
+00043080: 656e 7429 0a20 2020 2020 2020 2073 656c  ent).        sel
+00043090: 662e 6173 7365 7274 5472 7565 2872 6573  f.assertTrue(res
+000430a0: 290a 0a20 2020 2020 2020 2023 2041 6464  )..        # Add
+000430b0: 7320 6120 726f 7720 746f 2074 6865 2070  s a row to the p
+000430c0: 726f 6365 7373 206c 6962 7261 7279 0a20  rocess library. 
+000430d0: 2020 2020 2020 2070 726f 635f 6c69 622e         proc_lib.
+000430e0: 5f6d 6f64 656c 2e69 6e73 6572 7452 6f77  _model.insertRow
+000430f0: 2830 290a 0a20 2020 2020 2020 2023 204d  (0)..        # M
+00043100: 6f63 6b73 2073 656c 6563 7469 6e67 2027  ocks selecting '
+00043110: 4465 6c65 7465 2070 6163 6b61 6765 270a  Delete package'.
+00043120: 2020 2020 2020 2020 514d 656e 752e 6578          QMenu.ex
+00043130: 6563 5f20 3d20 6c61 6d62 6461 202a 6172  ec_ = lambda *ar
+00043140: 6773 3a20 7072 6f63 5f6c 6962 2e61 6374  gs: proc_lib.act
+00043150: 696f 6e5f 6465 6c65 7465 0a0a 2020 2020  ion_delete..    
+00043160: 2020 2020 7072 6f63 5f6c 6962 2e6d 6f75      proc_lib.mou
+00043170: 7365 5072 6573 7345 7665 6e74 286d 6f75  sePressEvent(mou
+00043180: 7365 5f65 7665 6e74 290a 0a0a 636c 6173  se_event)...clas
+00043190: 7320 5465 7374 4d49 4150 6970 656c 696e  s TestMIAPipelin
+000431a0: 6545 6469 746f 7228 5465 7374 4d49 4143  eEditor(TestMIAC
+000431b0: 6173 6529 3a0a 2020 2020 2222 2254 6573  ase):.    """Tes
+000431c0: 7473 2066 6f72 2074 6865 2070 6970 656c  ts for the pipel
+000431d0: 696e 6520 6564 6974 6f72 2c20 7061 7274  ine editor, part
+000431e0: 206f 6620 7468 6520 7069 7065 6c69 6e65   of the pipeline
+000431f0: 206d 616e 6167 6572 2074 6162 2e0a 0a20   manager tab... 
+00043200: 2020 2054 6573 7473 2050 6970 656c 696e     Tests Pipelin
+00043210: 6545 6469 746f 722e 0a0a 2020 2020 3a43  eEditor...    :C
+00043220: 6f6e 7461 696e 733a 0a20 2020 2020 2020  ontains:.       
+00043230: 203a 4d65 7468 6f64 3a0a 2020 2020 2020   :Method:.      
+00043240: 2020 2020 2020 2d20 7465 7374 5f61 6464        - test_add
+00043250: 5f74 6162 3a20 6164 6473 2074 6162 7320  _tab: adds tabs 
+00043260: 746f 2074 6865 2050 6970 656c 696e 6545  to the PipelineE
+00043270: 6469 746f 7254 6162 730a 2020 2020 2020  ditorTabs.      
+00043280: 2020 2020 2020 2d20 7465 7374 5f63 6c6f        - test_clo
+00043290: 7365 5f74 6162 3a20 636c 6f73 6573 2061  se_tab: closes a
+000432a0: 2074 6162 2069 6e20 7468 6520 5069 7065   tab in the Pipe
+000432b0: 6c69 6e65 4564 6974 6f72 5461 6273 0a20  lineEditorTabs. 
+000432c0: 2020 2020 2020 2020 2020 202d 2074 6573             - tes
+000432d0: 745f 6472 6f70 5f70 726f 6365 7373 3a20  t_drop_process: 
+000432e0: 6164 6473 2061 204e 6970 7970 6520 5350  adds a Nipype SP
+000432f0: 4d20 536d 6f6f 7468 2070 726f 6365 7373  M Smooth process
+00043300: 2074 6f20 7468 650a 2020 2020 2020 2020   to the.        
+00043310: 2020 2020 2020 7069 7065 6c69 6e65 2065        pipeline e
+00043320: 6469 746f 720a 2020 2020 2020 2020 2020  ditor.          
+00043330: 2020 2d20 7465 7374 5f65 7870 6f72 745f    - test_export_
+00043340: 706c 7567 3a20 6578 706f 7274 7320 706c  plug: exports pl
+00043350: 7567 7320 616e 6420 6d6f 636b 7320 6469  ugs and mocks di
+00043360: 616c 6f67 2062 6f78 6573 0a20 2020 2020  alog boxes.     
+00043370: 2020 2020 2020 202d 2074 6573 745f 7361         - test_sa
+00043380: 7665 5f70 6970 656c 696e 653a 2063 7265  ve_pipeline: cre
+00043390: 6174 6573 2061 2070 6970 656c 696e 6520  ates a pipeline 
+000433a0: 616e 6420 7472 6965 7320 746f 2073 6176  and tries to sav
+000433b0: 6520 6974 0a20 2020 2020 2020 2020 2020  e it.           
+000433c0: 202d 2074 6573 745f 7570 6461 7465 5f70   - test_update_p
+000433d0: 6c75 675f 7661 6c75 653a 2064 6973 706c  lug_value: displ
+000433e0: 6179 7320 6e6f 6465 2070 6172 616d 6574  ays node paramet
+000433f0: 6572 7320 616e 640a 2020 2020 2020 2020  ers and.        
+00043400: 2020 2020 2020 7570 6461 7465 7320 6120        updates a 
+00043410: 706c 7567 2076 616c 7565 0a20 2020 2020  plug value.     
+00043420: 2020 2020 2020 202d 2074 6573 745f 7a5f         - test_z_
+00043430: 6368 6563 6b5f 6d6f 6469 663a 206f 7065  check_modif: ope
+00043440: 6e73 2061 2070 6970 656c 696e 652c 206d  ns a pipeline, m
+00043450: 6f64 6966 6965 7320 6974 2061 6e64 0a20  odifies it and. 
+00043460: 2020 2020 2020 2020 2020 2020 2063 6865               che
+00043470: 636b 2074 6865 206d 6f64 6966 6963 6174  ck the modificat
+00043480: 696f 6e73 0a20 2020 2020 2020 2020 2020  ions.           
+00043490: 202d 2074 6573 745f 7a5f 6765 745f 6564   - test_z_get_ed
+000434a0: 6974 6f72 3a20 6765 7473 2074 6865 2069  itor: gets the i
+000434b0: 6e73 7461 6e63 6520 6f66 2061 6e20 6564  nstance of an ed
+000434c0: 6974 6f72 0a20 2020 2020 2020 2020 2020  itor.           
+000434d0: 202d 2074 6573 745f 7a5f 6765 745f 6669   - test_z_get_fi
+000434e0: 6c65 6e61 6d65 3a20 6765 7473 2074 6865  lename: gets the
+000434f0: 2072 656c 6174 6976 6520 7061 7468 2074   relative path t
+00043500: 6f20 610a 2020 2020 2020 2020 2020 2020  o a.            
+00043510: 2020 7072 6576 696f 7573 6c79 2073 6176    previously sav
+00043520: 6564 2070 6970 656c 696e 6520 6669 6c65  ed pipeline file
+00043530: 0a20 2020 2020 2020 2020 2020 202d 2074  .            - t
+00043540: 6573 745f 7a5f 6765 745f 696e 6465 783a  est_z_get_index:
+00043550: 2067 6574 7320 7468 6520 696e 6465 7820   gets the index 
+00043560: 6f66 2061 6e20 6564 6974 6f72 0a20 2020  of an editor.   
+00043570: 2020 2020 2020 2020 202d 2074 6573 745f           - test_
+00043580: 7a5f 6765 745f 7461 625f 6e61 6d65 3a20  z_get_tab_name: 
+00043590: 6765 7473 2074 6865 2074 6162 206e 616d  gets the tab nam
+000435a0: 6520 6f66 2074 6865 2065 6469 746f 720a  e of the editor.
+000435b0: 2020 2020 2020 2020 2020 2020 2d20 7465              - te
+000435c0: 7374 5f7a 5f6c 6f61 645f 7069 7065 6c69  st_z_load_pipeli
+000435d0: 6e65 3a20 6c6f 6164 7320 6120 7069 7065  ne: loads a pipe
+000435e0: 6c69 6e65 0a20 2020 2020 2020 2020 2020  line.           
+000435f0: 202d 2074 6573 745f 7a5f 6f70 656e 5f73   - test_z_open_s
+00043600: 7562 5f70 6970 656c 696e 653a 206f 7065  ub_pipeline: ope
+00043610: 6e73 2061 2073 7562 5f70 6970 656c 696e  ns a sub_pipelin
+00043620: 650a 2020 2020 2020 2020 2020 2020 2d20  e.            - 
+00043630: 7465 7374 5f7a 5f73 6574 5f63 7572 7265  test_z_set_curre
+00043640: 6e74 5f65 6469 746f 723a 2073 6574 7320  nt_editor: sets 
+00043650: 7468 6520 6375 7272 656e 7420 6564 6974  the current edit
+00043660: 6f72 0a20 2020 2020 2020 2020 2020 202d  or.            -
+00043670: 2074 6573 745f 7a7a 5f64 656c 5f70 6163   test_zz_del_pac
+00043680: 6b3a 2064 656c 6574 6573 2061 2062 7269  k: deletes a bri
+00043690: 636b 2063 7265 6174 6564 2064 7572 696e  ck created durin
+000436a0: 6720 5554 730a 2020 2020 2222 220a 0a20  g UTs.    """.. 
+000436b0: 2020 2064 6566 2074 6573 745f 6164 645f     def test_add_
+000436c0: 7461 6228 7365 6c66 293a 0a20 2020 2020  tab(self):.     
+000436d0: 2020 2022 2222 4164 6473 2074 6162 7320     """Adds tabs 
+000436e0: 746f 2074 6865 2050 6970 656c 696e 6545  to the PipelineE
+000436f0: 6469 746f 7254 6162 732e 2222 220a 0a20  ditorTabs.""".. 
+00043700: 2020 2020 2020 2070 6970 656c 696e 655f         pipeline_
+00043710: 6564 6974 6f72 5f74 6162 7320 3d20 280a  editor_tabs = (.
+00043720: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00043730: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 6970  .main_window.pip
+00043740: 656c 696e 655f 6d61 6e61 6765 722e 7069  eline_manager.pi
+00043750: 7065 6c69 6e65 4564 6974 6f72 5461 6273  pelineEditorTabs
+00043760: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+00043770: 2020 2020 2320 4164 6469 6e67 2074 776f      # Adding two
+00043780: 206e 6577 2074 6162 730a 2020 2020 2020   new tabs.      
+00043790: 2020 7069 7065 6c69 6e65 5f65 6469 746f    pipeline_edito
+000437a0: 725f 7461 6273 2e6e 6577 5f74 6162 2829  r_tabs.new_tab()
+000437b0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+000437c0: 7365 7274 4571 7561 6c28 7069 7065 6c69  sertEqual(pipeli
+000437d0: 6e65 5f65 6469 746f 725f 7461 6273 2e63  ne_editor_tabs.c
+000437e0: 6f75 6e74 2829 2c20 3329 0a20 2020 2020  ount(), 3).     
+000437f0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00043800: 7561 6c28 7069 7065 6c69 6e65 5f65 6469  ual(pipeline_edi
+00043810: 746f 725f 7461 6273 2e74 6162 5465 7874  tor_tabs.tabText
+00043820: 2831 292c 2022 4e65 7720 5069 7065 6c69  (1), "New Pipeli
+00043830: 6e65 2031 2229 0a20 2020 2020 2020 2070  ne 1").        p
+00043840: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
+00043850: 6162 732e 6e65 775f 7461 6228 290a 2020  abs.new_tab().  
+00043860: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00043870: 7445 7175 616c 2870 6970 656c 696e 655f  tEqual(pipeline_
+00043880: 6564 6974 6f72 5f74 6162 732e 636f 756e  editor_tabs.coun
+00043890: 7428 292c 2034 290a 2020 2020 2020 2020  t(), 4).        
+000438a0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+000438b0: 2870 6970 656c 696e 655f 6564 6974 6f72  (pipeline_editor
+000438c0: 5f74 6162 732e 7461 6254 6578 7428 3229  _tabs.tabText(2)
+000438d0: 2c20 224e 6577 2050 6970 656c 696e 6520  , "New Pipeline 
+000438e0: 3222 290a 0a20 2020 2064 6566 2074 6573  2")..    def tes
+000438f0: 745f 636c 6f73 655f 7461 6228 7365 6c66  t_close_tab(self
+00043900: 293a 0a20 2020 2020 2020 2022 2222 436c  ):.        """Cl
+00043910: 6f73 6573 2061 2074 6162 2069 6e20 7468  oses a tab in th
+00043920: 6520 7069 7065 6c69 6e65 2065 6469 746f  e pipeline edito
+00043930: 7220 7461 6273 2e0a 0a20 2020 2020 2020  r tabs...       
+00043940: 2049 6e64 6972 6563 746c 7920 7465 7374   Indirectly test
+00043950: 7320 506f 7055 7043 6c6f 7365 5069 7065  s PopUpClosePipe
+00043960: 6c69 6e65 2e0a 0a20 2020 2020 2020 202d  line...        -
+00043970: 2054 6573 7473 3a20 5069 7065 6c69 6e65   Tests: Pipeline
+00043980: 4564 6974 6f72 2e63 6c6f 7365 5f74 6162  Editor.close_tab
+00043990: 0a0a 2020 2020 2020 2020 2d20 4d6f 636b  ..        - Mock
+000439a0: 733a 2050 6f70 5570 436c 6f73 6550 6970  s: PopUpClosePip
+000439b0: 656c 696e 652e 6578 6563 0a20 2020 2020  eline.exec.     
+000439c0: 2020 2022 2222 0a0a 2020 2020 2020 2020     """..        
+000439d0: 2320 5365 7473 2073 686f 7274 6375 7473  # Sets shortcuts
+000439e0: 2066 6f72 206f 626a 6563 7473 2074 6861   for objects tha
+000439f0: 7420 6172 6520 6f66 7465 6e20 7573 6564  t are often used
+00043a00: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
+00043a10: 5f74 6162 7320 3d20 7365 6c66 2e6d 6169  _tabs = self.mai
+00043a20: 6e5f 7769 6e64 6f77 2e70 6970 656c 696e  n_window.pipelin
+00043a30: 655f 6d61 6e61 6765 722e 7069 7065 6c69  e_manager.pipeli
+00043a40: 6e65 4564 6974 6f72 5461 6273 0a0a 2020  neEditorTabs..  
+00043a50: 2020 2020 2020 2320 436c 6f73 6573 2061        # Closes a
+00043a60: 6e20 756e 6d6f 6469 6669 6564 2074 6162  n unmodified tab
+00043a70: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
+00043a80: 5f74 6162 732e 636c 6f73 655f 7461 6228  _tabs.close_tab(
+00043a90: 3029 0a0a 2020 2020 2020 2020 2320 4164  0)..        # Ad
+00043aa0: 6473 2061 2070 726f 6365 7373 2074 6f20  ds a process to 
+00043ab0: 6d6f 6469 6679 2074 6865 2070 6970 656c  modify the pipel
+00043ac0: 696e 650a 2020 2020 2020 2020 7070 6c5f  ine.        ppl_
+00043ad0: 6564 745f 7461 6273 2e67 6574 5f63 7572  edt_tabs.get_cur
+00043ae0: 7265 6e74 5f65 6469 746f 7228 292e 636c  rent_editor().cl
+00043af0: 6963 6b5f 706f 7320 3d20 5150 6f69 6e74  ick_pos = QPoint
+00043b00: 2834 3530 2c20 3530 3029 0a20 2020 2020  (450, 500).     
+00043b10: 2020 2070 706c 5f65 6474 5f74 6162 732e     ppl_edt_tabs.
+00043b20: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
+00043b30: 6f72 2829 2e61 6464 5f6e 616d 6564 5f70  or().add_named_p
+00043b40: 726f 6365 7373 2852 656e 616d 6529 0a20  rocess(Rename). 
+00043b50: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00043b60: 7274 4571 7561 6c28 7070 6c5f 6564 745f  rtEqual(ppl_edt_
+00043b70: 7461 6273 2e74 6162 5465 7874 2830 295b  tabs.tabText(0)[
+00043b80: 2d32 3a5d 2c20 2220 2a22 290a 0a20 2020  -2:], " *")..   
+00043b90: 2020 2020 2023 204d 6f63 6b73 2074 6865       # Mocks the
+00043ba0: 2065 7865 6375 7469 6f6e 206f 6620 7468   execution of th
+00043bb0: 6520 2751 4469 616c 6f67 270a 2020 2020  e 'QDialog'.    
+00043bc0: 2020 2020 2320 496e 7374 6561 6420 6f66      # Instead of
+00043bd0: 2073 686f 7769 6e67 2069 742c 2064 6972   showing it, dir
+00043be0: 6563 746c 7920 6368 6f6f 7365 7320 2773  ectly chooses 's
+00043bf0: 6176 655f 6173 5f63 6c69 636b 6564 270a  ave_as_clicked'.
+00043c00: 2020 2020 2020 2020 506f 7055 7043 6c6f          PopUpClo
+00043c10: 7365 5069 7065 6c69 6e65 2e65 7865 6320  sePipeline.exec 
+00043c20: 3d20 4d6f 636b 280a 2020 2020 2020 2020  = Mock(.        
+00043c30: 2020 2020 7369 6465 5f65 6666 6563 743d      side_effect=
+00043c40: 6c61 6d62 6461 3a20 7070 6c5f 6564 745f  lambda: ppl_edt_
+00043c50: 7461 6273 2e70 6f70 5f75 705f 636c 6f73  tabs.pop_up_clos
+00043c60: 652e 7361 7665 5f61 735f 636c 6963 6b65  e.save_as_clicke
+00043c70: 6428 290a 2020 2020 2020 2020 290a 2020  d().        ).  
+00043c80: 2020 2020 2020 7070 6c5f 6564 745f 7461        ppl_edt_ta
+00043c90: 6273 2e73 6176 655f 7069 7065 6c69 6e65  bs.save_pipeline
+00043ca0: 203d 204d 6f63 6b28 290a 0a20 2020 2020   = Mock()..     
+00043cb0: 2020 2023 2054 7269 6573 2074 6f20 636c     # Tries to cl
+00043cc0: 6f73 6520 7468 6520 6d6f 6469 6669 6564  ose the modified
+00043cd0: 2074 6162 2061 6e64 2073 6176 6573 2074   tab and saves t
+00043ce0: 6865 2070 6970 656c 696e 6520 6173 0a20  he pipeline as. 
+00043cf0: 2020 2020 2020 2070 706c 5f65 6474 5f74         ppl_edt_t
+00043d00: 6162 732e 636c 6f73 655f 7461 6228 3029  abs.close_tab(0)
+00043d10: 0a0a 2020 2020 2020 2020 2320 4173 7365  ..        # Asse
+00043d20: 7274 7320 7468 6174 2027 756e 646f 7327  rts that 'undos'
+00043d30: 2061 6e64 2027 7265 646f 7327 2077 6572   and 'redos' wer
+00043d40: 6520 6465 6c65 7465 640a 2020 2020 2020  e deleted.      
+00043d50: 2020 6564 6974 6f72 203d 2070 706c 5f65    editor = ppl_e
+00043d60: 6474 5f74 6162 732e 6765 745f 6564 6974  dt_tabs.get_edit
+00043d70: 6f72 5f62 795f 696e 6465 7828 3029 0a20  or_by_index(0). 
+00043d80: 2020 2020 2020 2077 6974 6820 7365 6c66         with self
+00043d90: 2e61 7373 6572 7452 6169 7365 7328 4b65  .assertRaises(Ke
+00043da0: 7945 7272 6f72 293a 0a20 2020 2020 2020  yError):.       
+00043db0: 2020 2020 2070 706c 5f65 6474 5f74 6162       ppl_edt_tab
+00043dc0: 732e 756e 646f 735b 6564 6974 6f72 5d0a  s.undos[editor].
+00043dd0: 2020 2020 2020 2020 2020 2020 7070 6c5f              ppl_
+00043de0: 6564 745f 7461 6273 2e72 6564 6f73 5b65  edt_tabs.redos[e
+00043df0: 6469 746f 725d 0a0a 2020 2020 2020 2020  ditor]..        
+00043e00: 2320 4469 7265 6374 6c79 2063 686f 6f73  # Directly choos
+00043e10: 6573 2027 646f 5f6e 6f74 5f73 6176 655f  es 'do_not_save_
+00043e20: 636c 6963 6b65 6427 0a20 2020 2020 2020  clicked'.       
+00043e30: 2050 6f70 5570 436c 6f73 6550 6970 656c   PopUpClosePipel
+00043e40: 696e 652e 6578 6563 203d 204d 6f63 6b28  ine.exec = Mock(
+00043e50: 0a20 2020 2020 2020 2020 2020 2073 6964  .            sid
+00043e60: 655f 6566 6665 6374 3d6c 616d 6264 613a  e_effect=lambda:
+00043e70: 2070 706c 5f65 6474 5f74 6162 732e 706f   ppl_edt_tabs.po
+00043e80: 705f 7570 5f63 6c6f 7365 2e64 6f5f 6e6f  p_up_close.do_no
+00043e90: 745f 7361 7665 5f63 6c69 636b 6564 2829  t_save_clicked()
+00043ea0: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+00043eb0: 2020 2020 2320 4164 6473 2061 206e 6577      # Adds a new
+00043ec0: 2074 6162 2061 6e64 2061 2070 726f 6365   tab and a proce
+00043ed0: 7373 0a20 2020 2020 2020 2070 706c 5f65  ss.        ppl_e
+00043ee0: 6474 5f74 6162 732e 6e65 775f 7461 6228  dt_tabs.new_tab(
+00043ef0: 290a 2020 2020 2020 2020 7070 6c5f 6564  ).        ppl_ed
+00043f00: 745f 7461 6273 2e67 6574 5f63 7572 7265  t_tabs.get_curre
+00043f10: 6e74 5f65 6469 746f 7228 292e 636c 6963  nt_editor().clic
+00043f20: 6b5f 706f 7320 3d20 5150 6f69 6e74 2834  k_pos = QPoint(4
+00043f30: 3530 2c20 3530 3029 0a20 2020 2020 2020  50, 500).       
+00043f40: 2070 706c 5f65 6474 5f74 6162 732e 6765   ppl_edt_tabs.ge
+00043f50: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
+00043f60: 2829 2e61 6464 5f6e 616d 6564 5f70 726f  ().add_named_pro
+00043f70: 6365 7373 2852 656e 616d 6529 0a0a 2020  cess(Rename)..  
+00043f80: 2020 2020 2020 2320 5472 6965 7320 746f        # Tries to
+00043f90: 2063 6c6f 7365 2074 6865 206d 6f64 6966   close the modif
+00043fa0: 6965 6420 7461 6220 616e 6420 6361 6e63  ied tab and canc
+00043fb0: 656c 7320 7361 7669 6e67 0a20 2020 2020  els saving.     
+00043fc0: 2020 2070 706c 5f65 6474 5f74 6162 732e     ppl_edt_tabs.
+00043fd0: 636c 6f73 655f 7461 6228 3029 0a0a 2020  close_tab(0)..  
+00043fe0: 2020 2020 2020 2320 4469 7265 6374 6c79        # Directly
+00043ff0: 2063 686f 6f73 6573 2027 6361 6e63 656c   chooses 'cancel
+00044000: 5f63 6c69 636b 6564 270a 2020 2020 2020  _clicked'.      
+00044010: 2020 506f 7055 7043 6c6f 7365 5069 7065    PopUpClosePipe
+00044020: 6c69 6e65 2e65 7865 6320 3d20 4d6f 636b  line.exec = Mock
+00044030: 280a 2020 2020 2020 2020 2020 2020 7369  (.            si
+00044040: 6465 5f65 6666 6563 743d 6c61 6d62 6461  de_effect=lambda
+00044050: 3a20 7070 6c5f 6564 745f 7461 6273 2e70  : ppl_edt_tabs.p
+00044060: 6f70 5f75 705f 636c 6f73 652e 6361 6e63  op_up_close.canc
+00044070: 656c 5f63 6c69 636b 6564 2829 0a20 2020  el_clicked().   
+00044080: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+00044090: 2320 4164 6473 2061 2070 726f 6365 7373  # Adds a process
+000440a0: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
+000440b0: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
+000440c0: 745f 6564 6974 6f72 2829 2e63 6c69 636b  t_editor().click
+000440d0: 5f70 6f73 203d 2051 506f 696e 7428 3435  _pos = QPoint(45
+000440e0: 302c 2035 3030 290a 2020 2020 2020 2020  0, 500).        
+000440f0: 7070 6c5f 6564 745f 7461 6273 2e67 6574  ppl_edt_tabs.get
+00044100: 5f63 7572 7265 6e74 5f65 6469 746f 7228  _current_editor(
+00044110: 292e 6164 645f 6e61 6d65 645f 7072 6f63  ).add_named_proc
+00044120: 6573 7328 5265 6e61 6d65 290a 0a20 2020  ess(Rename)..   
+00044130: 2020 2020 2023 2054 7269 6573 2074 6f20       # Tries to 
+00044140: 636c 6f73 6520 7468 6520 6d6f 6469 6669  close the modifi
+00044150: 6564 2074 6162 2061 6e64 2063 616e 6365  ed tab and cance
+00044160: 6c73 2073 6176 696e 670a 2020 2020 2020  ls saving.      
+00044170: 2020 7070 6c5f 6564 745f 7461 6273 2e63    ppl_edt_tabs.c
+00044180: 6c6f 7365 5f74 6162 2830 290a 0a20 2020  lose_tab(0)..   
+00044190: 2020 2020 2023 2044 6972 6563 746c 7920       # Directly 
+000441a0: 6368 6f6f 7365 7320 2763 616e 6365 6c5f  chooses 'cancel_
+000441b0: 636c 6963 6b65 6427 0a20 2020 2020 2020  clicked'.       
+000441c0: 2050 6f70 5570 436c 6f73 6550 6970 656c   PopUpClosePipel
+000441d0: 696e 652e 6578 6563 203d 204d 6f63 6b28  ine.exec = Mock(
+000441e0: 0a20 2020 2020 2020 2020 2020 2073 6964  .            sid
+000441f0: 655f 6566 6665 6374 3d6c 616d 6264 613a  e_effect=lambda:
+00044200: 2070 706c 5f65 6474 5f74 6162 732e 706f   ppl_edt_tabs.po
+00044210: 705f 7570 5f63 6c6f 7365 2e63 616e 6365  p_up_close.cance
+00044220: 6c5f 636c 6963 6b65 6428 290a 2020 2020  l_clicked().    
+00044230: 2020 2020 290a 0a20 2020 2020 2020 2023      )..        #
+00044240: 2041 6464 7320 6120 6e65 7720 7072 6f63   Adds a new proc
+00044250: 6573 730a 2020 2020 2020 2020 7070 6c5f  ess.        ppl_
+00044260: 6564 745f 7461 6273 2e67 6574 5f63 7572  edt_tabs.get_cur
+00044270: 7265 6e74 5f65 6469 746f 7228 292e 636c  rent_editor().cl
+00044280: 6963 6b5f 706f 7320 3d20 5150 6f69 6e74  ick_pos = QPoint
+00044290: 2834 3530 2c20 3530 3029 0a20 2020 2020  (450, 500).     
+000442a0: 2020 2070 706c 5f65 6474 5f74 6162 732e     ppl_edt_tabs.
+000442b0: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
+000442c0: 6f72 2829 2e61 6464 5f6e 616d 6564 5f70  or().add_named_p
+000442d0: 726f 6365 7373 2852 656e 616d 6529 0a0a  rocess(Rename)..
+000442e0: 2020 2020 2020 2020 2320 5472 6965 7320          # Tries 
+000442f0: 746f 2063 6c6f 7365 2074 6865 206d 6f64  to close the mod
+00044300: 6966 6965 6420 7461 6220 616e 6420 6361  ified tab and ca
+00044310: 6e63 656c 7320 7361 7669 6e67 0a20 2020  ncels saving.   
+00044320: 2020 2020 2070 706c 5f65 6474 5f74 6162       ppl_edt_tab
+00044330: 732e 636c 6f73 655f 7461 6228 3029 0a0a  s.close_tab(0)..
+00044340: 2020 2020 6465 6620 7465 7374 5f64 726f      def test_dro
+00044350: 705f 7072 6f63 6573 7328 7365 6c66 293a  p_process(self):
+00044360: 0a20 2020 2020 2020 2022 2222 4164 6473  .        """Adds
+00044370: 2061 204e 6970 7970 6520 5350 4d27 7320   a Nipype SPM's 
+00044380: 536d 6f6f 7468 2070 726f 6365 7373 2074  Smooth process t
+00044390: 6f20 7468 6520 7069 7065 6c69 6e65 2065  o the pipeline e
+000443a0: 6469 746f 722e 2222 220a 0a20 2020 2020  ditor."""..     
+000443b0: 2020 2070 6970 656c 696e 655f 6564 6974     pipeline_edit
+000443c0: 6f72 5f74 6162 7320 3d20 280a 2020 2020  or_tabs = (.    
+000443d0: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
+000443e0: 6e5f 7769 6e64 6f77 2e70 6970 656c 696e  n_window.pipelin
+000443f0: 655f 6d61 6e61 6765 722e 7069 7065 6c69  e_manager.pipeli
+00044400: 6e65 4564 6974 6f72 5461 6273 0a20 2020  neEditorTabs.   
+00044410: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
+00044420: 656c 662e 6173 7365 7274 4661 6c73 6528  elf.assertFalse(
+00044430: 0a20 2020 2020 2020 2020 2020 2022 736d  .            "sm
+00044440: 6f6f 7468 5f31 220a 2020 2020 2020 2020  ooth_1".        
+00044450: 2020 2020 696e 2028 7069 7065 6c69 6e65      in (pipeline
+00044460: 5f65 6469 746f 725f 7461 6273 2e67 6574  _editor_tabs.get
+00044470: 5f63 7572 7265 6e74 5f70 6970 656c 696e  _current_pipelin
+00044480: 6529 2829 2e6e 6f64 6573 2e6b 6579 7328  e)().nodes.keys(
+00044490: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
+000444a0: 2020 2020 7069 7065 6c69 6e65 5f65 6469      pipeline_edi
+000444b0: 746f 725f 7461 6273 2e67 6574 5f63 7572  tor_tabs.get_cur
+000444c0: 7265 6e74 5f65 6469 746f 7228 292e 636c  rent_editor().cl
+000444d0: 6963 6b5f 706f 7320 3d20 5150 6f69 6e74  ick_pos = QPoint
+000444e0: 2834 3530 2c20 3530 3029 0a20 2020 2020  (450, 500).     
+000444f0: 2020 2070 6970 656c 696e 655f 6564 6974     pipeline_edit
+00044500: 6f72 5f74 6162 732e 6765 745f 6375 7272  or_tabs.get_curr
+00044510: 656e 745f 6564 6974 6f72 2829 2e64 726f  ent_editor().dro
+00044520: 705f 7072 6f63 6573 7328 0a20 2020 2020  p_process(.     
+00044530: 2020 2020 2020 2022 6e69 7079 7065 2e69         "nipype.i
+00044540: 6e74 6572 6661 6365 732e 7370 6d2e 536d  nterfaces.spm.Sm
+00044550: 6f6f 7468 220a 2020 2020 2020 2020 290a  ooth".        ).
+00044560: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00044570: 6572 7454 7275 6528 0a20 2020 2020 2020  ertTrue(.       
+00044580: 2020 2020 2022 736d 6f6f 7468 5f31 220a       "smooth_1".
+00044590: 2020 2020 2020 2020 2020 2020 696e 2028              in (
+000445a0: 7069 7065 6c69 6e65 5f65 6469 746f 725f  pipeline_editor_
+000445b0: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
+000445c0: 5f70 6970 656c 696e 6529 2829 2e6e 6f64  _pipeline)().nod
+000445d0: 6573 2e6b 6579 7328 290a 2020 2020 2020  es.keys().      
+000445e0: 2020 290a 0a20 2020 2064 6566 2074 6573    )..    def tes
+000445f0: 745f 6578 706f 7274 5f70 6c75 6728 7365  t_export_plug(se
+00044600: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
+00044610: 4164 6473 2061 2070 726f 6365 7373 2061  Adds a process a
+00044620: 6e64 2065 7870 6f72 7473 2070 6c75 6773  nd exports plugs
+00044630: 2069 6e20 7468 6520 7069 7065 6c69 6e65   in the pipeline
+00044640: 2065 6469 746f 722e 0a0a 2020 2020 2020   editor...      
+00044650: 2020 2d54 6573 7473 3a20 5069 7065 6c69    -Tests: Pipeli
+00044660: 6e65 4564 6974 6f72 2e74 6573 745f 6578  neEditor.test_ex
+00044670: 706f 7274 5f70 6c75 670a 0a20 2020 2020  port_plug..     
+00044680: 2020 202d 204d 6f63 6b73 3a0a 2020 2020     - Mocks:.    
+00044690: 2020 2020 2020 2020 2d20 514d 6573 7361          - QMessa
+000446a0: 6765 426f 782e 7175 6573 7469 6f6e 0a20  geBox.question. 
+000446b0: 2020 2020 2020 2020 2020 202d 2051 496e             - QIn
+000446c0: 7075 7444 6961 6c6f 672e 6765 7454 6578  putDialog.getTex
+000446d0: 740a 2020 2020 2020 2020 2222 220a 0a20  t.        """.. 
+000446e0: 2020 2020 2020 2023 2053 6574 2073 686f         # Set sho
+000446f0: 7274 6375 7473 2066 6f72 206f 626a 6563  rtcuts for objec
+00044700: 7473 2074 6861 7420 6172 6520 6f66 7465  ts that are ofte
+00044710: 6e20 7573 6564 0a20 2020 2020 2020 2070  n used.        p
+00044720: 706c 5f65 6474 5f74 6162 7320 3d20 7365  pl_edt_tabs = se
+00044730: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
+00044740: 6970 656c 696e 655f 6d61 6e61 6765 722e  ipeline_manager.
+00044750: 7069 7065 6c69 6e65 4564 6974 6f72 5461  pipelineEditorTa
+00044760: 6273 0a20 2020 2020 2020 2070 706c 5f65  bs.        ppl_e
+00044770: 6474 203d 2070 706c 5f65 6474 5f74 6162  dt = ppl_edt_tab
+00044780: 732e 6765 745f 6375 7272 656e 745f 6564  s.get_current_ed
+00044790: 6974 6f72 2829 0a0a 2020 2020 2020 2020  itor()..        
+000447a0: 2320 4d6f 636b 7320 2750 6970 656c 696e  # Mocks 'Pipelin
+000447b0: 6545 6469 746f 7227 2061 7474 7269 6275  eEditor' attribu
+000447c0: 7465 730a 2020 2020 2020 2020 7070 6c5f  tes.        ppl_
+000447d0: 6564 742e 5f74 656d 705f 706c 7567 5f6e  edt._temp_plug_n
+000447e0: 616d 6520 3d20 2822 222c 2022 2229 0a20  ame = ("", ""). 
+000447f0: 2020 2020 2020 2070 706c 5f65 6474 2e5f         ppl_edt._
+00044800: 7465 6d70 5f70 6c75 6720 3d20 4d6f 636b  temp_plug = Mock
+00044810: 2829 0a20 2020 2020 2020 2070 706c 5f65  ().        ppl_e
+00044820: 6474 2e5f 7465 6d70 5f70 6c75 672e 6f70  dt._temp_plug.op
+00044830: 7469 6f6e 616c 203d 2046 616c 7365 0a0a  tional = False..
+00044840: 2020 2020 2020 2020 2320 4d6f 636b 7320          # Mocks 
+00044850: 7468 6520 6578 6563 7574 696f 6e20 6f66  the execution of
+00044860: 2061 2070 6c75 6720 6564 6974 2064 6961   a plug edit dia
+00044870: 6c6f 670a 2020 2020 2020 2020 5069 7065  log.        Pipe
+00044880: 6c69 6e65 4564 6974 6f72 2e5f 506c 7567  lineEditor._Plug
+00044890: 4564 6974 2e65 7865 635f 203d 204d 6f63  Edit.exec_ = Moc
+000448a0: 6b28 290a 0a20 2020 2020 2020 2023 2045  k()..        # E
+000448b0: 7870 6f72 7473 2061 2070 6c75 6720 7769  xports a plug wi
+000448c0: 7468 206e 6f20 7061 7261 6d65 7465 7273  th no parameters
+000448d0: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
+000448e0: 2e5f 6578 706f 7274 5f70 6c75 6728 7069  ._export_plug(pi
+000448f0: 7065 6c69 6e65 5f70 6172 616d 6574 6572  peline_parameter
+00044900: 3d46 616c 7365 2c20 7465 6d70 5f70 6c75  =False, temp_plu
+00044910: 675f 6e61 6d65 3d4e 6f6e 6529 0a0a 2020  g_name=None)..  
+00044920: 2020 2020 2020 5069 7065 6c69 6e65 4564        PipelineEd
+00044930: 6974 6f72 2e5f 506c 7567 4564 6974 2e65  itor._PlugEdit.e
+00044940: 7865 635f 2e61 7373 6572 745f 6361 6c6c  xec_.assert_call
+00044950: 6564 5f6f 6e63 655f 7769 7468 2829 0a0a  ed_once_with()..
+00044960: 2020 2020 2020 2020 2320 4164 6473 2061          # Adds a
+00044970: 2052 656e 616d 6520 7072 6f63 6573 7365   Rename processe
+00044980: 732c 2063 7265 6174 6573 2074 6865 2027  s, creates the '
+00044990: 7265 6e61 6d65 5f31 2720 6e6f 6465 0a20  rename_1' node. 
+000449a0: 2020 2020 2020 2070 706c 5f65 6474 5f74         ppl_edt_t
+000449b0: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
+000449c0: 6564 6974 6f72 2829 2e63 6c69 636b 5f70  editor().click_p
+000449d0: 6f73 203d 2051 506f 696e 7428 3435 302c  os = QPoint(450,
+000449e0: 2035 3030 290a 2020 2020 2020 2020 7070   500).        pp
+000449f0: 6c5f 6564 745f 7461 6273 2e67 6574 5f63  l_edt_tabs.get_c
+00044a00: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
+00044a10: 6164 645f 6e61 6d65 645f 7072 6f63 6573  add_named_proces
+00044a20: 7328 5265 6e61 6d65 290a 0a20 2020 2020  s(Rename)..     
+00044a30: 2020 2023 2045 7870 6f72 7473 2061 2070     # Exports a p
+00044a40: 6c75 6720 7661 6c75 650a 2020 2020 2020  lug value.      
+00044a50: 2020 7265 7320 3d20 7070 6c5f 6564 742e    res = ppl_edt.
+00044a60: 5f65 7870 6f72 745f 706c 7567 280a 2020  _export_plug(.  
+00044a70: 2020 2020 2020 2020 2020 7465 6d70 5f70            temp_p
+00044a80: 6c75 675f 6e61 6d65 3d28 2272 656e 616d  lug_name=("renam
+00044a90: 655f 3122 2c20 225f 6f75 745f 6669 6c65  e_1", "_out_file
+00044aa0: 2229 2c0a 2020 2020 2020 2020 2020 2020  "),.            
+00044ab0: 7069 7065 6c69 6e65 5f70 6172 616d 6574  pipeline_paramet
+00044ac0: 6572 3d22 5f6f 7574 5f66 696c 6522 2c0a  er="_out_file",.
+00044ad0: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+00044ae0: 2020 2073 656c 662e 6173 7365 7274 4973     self.assertIs
+00044af0: 4e6f 6e65 2872 6573 290a 0a20 2020 2020  None(res)..     
+00044b00: 2020 2023 204d 6f63 6b73 2027 514d 6573     # Mocks 'QMes
+00044b10: 7361 6765 426f 782e 7175 6573 7469 6f6e  sageBox.question
+00044b20: 2720 746f 2063 6c69 636b 2061 6363 6570  ' to click accep
+00044b30: 740a 2020 2020 2020 2020 514d 6573 7361  t.        QMessa
+00044b40: 6765 426f 782e 7175 6573 7469 6f6e 203d  geBox.question =
+00044b50: 204d 6f63 6b28 7265 7475 726e 5f76 616c   Mock(return_val
+00044b60: 7565 3d51 4d65 7373 6167 6542 6f78 2e59  ue=QMessageBox.Y
+00044b70: 6573 290a 0a20 2020 2020 2020 2023 2054  es)..        # T
+00044b80: 7269 6573 2074 6f20 6578 706f 7274 2074  ries to export t
+00044b90: 6865 2073 616d 6520 706c 7567 2076 616c  he same plug val
+00044ba0: 7565 2c20 6163 6365 7074 7320 6f76 6572  ue, accepts over
+00044bb0: 7772 6974 696e 6720 6974 0a20 2020 2020  writing it.     
+00044bc0: 2020 2023 2057 6974 6820 276d 756c 7469     # With 'multi
+00044bd0: 5f65 7870 6f72 7427 2074 6865 6e20 7468  _export' then th
+00044be0: 6520 7465 6d70 5f70 6c75 675f 7661 6c75  e temp_plug_valu
+00044bf0: 6520 7769 6c6c 2062 6520 7265 7475 726e  e will be return
+00044c00: 6564 0a20 2020 2020 2020 2072 6573 203d  ed.        res =
+00044c10: 2070 706c 5f65 6474 2e5f 6578 706f 7274   ppl_edt._export
+00044c20: 5f70 6c75 6728 0a20 2020 2020 2020 2020  _plug(.         
+00044c30: 2020 2074 656d 705f 706c 7567 5f6e 616d     temp_plug_nam
+00044c40: 653d 2822 7265 6e61 6d65 5f31 222c 2022  e=("rename_1", "
+00044c50: 5f6f 7574 5f66 696c 6522 292c 0a20 2020  _out_file"),.   
+00044c60: 2020 2020 2020 2020 2070 6970 656c 696e           pipelin
+00044c70: 655f 7061 7261 6d65 7465 723d 225f 6f75  e_parameter="_ou
+00044c80: 745f 6669 6c65 222c 0a20 2020 2020 2020  t_file",.       
+00044c90: 2020 2020 206d 756c 7469 5f65 7870 6f72       multi_expor
+00044ca0: 743d 5472 7565 2c0a 2020 2020 2020 2020  t=True,.        
+00044cb0: 290a 0a20 2020 2020 2020 2051 4d65 7373  )..        QMess
+00044cc0: 6167 6542 6f78 2e71 7565 7374 696f 6e2e  ageBox.question.
+00044cd0: 6173 7365 7274 5f63 616c 6c65 645f 6f6e  assert_called_on
+00044ce0: 6365 2829 0a20 2020 2020 2020 2073 656c  ce().        sel
+00044cf0: 662e 6173 7365 7274 4571 7561 6c28 7265  f.assertEqual(re
+00044d00: 732c 2022 5f6f 7574 5f66 696c 6522 290a  s, "_out_file").
+00044d10: 0a20 2020 2020 2020 2023 204d 6f63 6b73  .        # Mocks
+00044d20: 2061 6761 696e 2027 514d 6573 7361 6765   again 'QMessage
+00044d30: 426f 782e 7175 6573 7469 6f6e 2720 746f  Box.question' to
+00044d40: 2063 6c69 636b 2072 656a 6563 740a 2020   click reject.  
+00044d50: 2020 2020 2020 514d 6573 7361 6765 426f        QMessageBo
+00044d60: 782e 7175 6573 7469 6f6e 203d 204d 6f63  x.question = Moc
+00044d70: 6b28 7265 7475 726e 5f76 616c 7565 3d51  k(return_value=Q
+00044d80: 4d65 7373 6167 6542 6f78 2e4e 6f29 0a20  MessageBox.No). 
+00044d90: 2020 2020 2020 2051 496e 7075 7444 6961         QInputDia
+00044da0: 6c6f 672e 6765 7454 6578 7420 3d20 4d6f  log.getText = Mo
+00044db0: 636b 2872 6574 7572 6e5f 7661 6c75 653d  ck(return_value=
+00044dc0: 2822 6e65 775f 6e61 6d65 222c 2054 7275  ("new_name", Tru
+00044dd0: 6529 290a 0a20 2020 2020 2020 2023 204d  e))..        # M
+00044de0: 6f63 6b73 2027 6578 706f 7274 5f70 6172  ocks 'export_par
+00044df0: 616d 6574 6572 2720 746f 2074 6872 6f77  ameter' to throw
+00044e00: 2061 2027 5472 6169 7445 7272 6f72 270a   a 'TraitError'.
+00044e10: 2020 2020 2020 2020 2320 6672 6f6d 2074          # from t
+00044e20: 7261 6974 732e 6170 6920 696d 706f 7274  raits.api import
+00044e30: 2054 7261 6974 4572 726f 720a 2020 2020   TraitError.    
+00044e40: 2020 2020 2320 7070 6c5f 6564 742e 7363      # ppl_edt.sc
+00044e50: 656e 652e 7069 7065 6c69 6e65 2e65 7870  ene.pipeline.exp
+00044e60: 6f72 745f 7061 7261 6d65 7465 7220 3d20  ort_parameter = 
+00044e70: 4d6f 636b 280a 2020 2020 2020 2020 2320  Mock(.        # 
+00044e80: 2020 2073 6964 655f 6566 6665 6374 3d54     side_effect=T
+00044e90: 7261 6974 4572 726f 7228 2929 0a0a 2020  raitError())..  
+00044ea0: 2020 2020 2020 2320 5472 6965 7320 746f        # Tries to
+00044eb0: 2065 7870 6f72 7420 7468 6520 7361 6d65   export the same
+00044ec0: 2070 6c75 6720 7661 6c75 652c 2064 656e   plug value, den
+00044ed0: 6965 7320 6f76 6572 7772 6974 696e 6720  ies overwriting 
+00044ee0: 6974 0a20 2020 2020 2020 2072 6573 203d  it.        res =
+00044ef0: 2070 706c 5f65 6474 2e5f 6578 706f 7274   ppl_edt._export
+00044f00: 5f70 6c75 6728 0a20 2020 2020 2020 2020  _plug(.         
+00044f10: 2020 2074 656d 705f 706c 7567 5f6e 616d     temp_plug_nam
+00044f20: 653d 2822 7265 6e61 6d65 5f31 222c 2022  e=("rename_1", "
+00044f30: 5f6f 7574 5f66 696c 6522 292c 0a20 2020  _out_file"),.   
+00044f40: 2020 2020 2020 2020 2070 6970 656c 696e           pipelin
+00044f50: 655f 7061 7261 6d65 7465 723d 225f 6f75  e_parameter="_ou
+00044f60: 745f 6669 6c65 222c 0a20 2020 2020 2020  t_file",.       
+00044f70: 2020 2020 206d 756c 7469 5f65 7870 6f72       multi_expor
+00044f80: 743d 5472 7565 2c0a 2020 2020 2020 2020  t=True,.        
+00044f90: 290a 0a20 2020 2020 2020 2051 4d65 7373  )..        QMess
+00044fa0: 6167 6542 6f78 2e71 7565 7374 696f 6e2e  ageBox.question.
+00044fb0: 6173 7365 7274 5f63 616c 6c65 645f 6f6e  assert_called_on
+00044fc0: 6365 2829 0a20 2020 2020 2020 2051 496e  ce().        QIn
+00044fd0: 7075 7444 6961 6c6f 672e 6765 7454 6578  putDialog.getTex
+00044fe0: 742e 6173 7365 7274 5f63 616c 6c65 645f  t.assert_called_
+00044ff0: 6f6e 6365 2829 0a20 2020 2020 2020 2073  once().        s
+00045000: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00045010: 7265 732c 2022 5f6f 7574 5f66 696c 6522  res, "_out_file"
+00045020: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
+00045030: 7361 7665 5f70 6970 656c 696e 6528 7365  save_pipeline(se
+00045040: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
+00045050: 4372 6561 7465 7320 6120 7069 7065 6c69  Creates a pipeli
+00045060: 6e65 2061 6e64 2074 7269 6573 2074 6f20  ne and tries to 
+00045070: 7361 7665 2069 742e 0a0a 2020 2020 2020  save it...      
+00045080: 2020 2d20 5465 7374 733a 0a20 2020 2020    - Tests:.     
+00045090: 2020 2020 2020 202d 2050 6970 656c 696e         - Pipelin
+000450a0: 6545 6469 746f 722e 7361 7665 5f70 6970  eEditor.save_pip
+000450b0: 656c 696e 650a 2020 2020 2020 2020 2020  eline.          
+000450c0: 2020 2d20 5069 7065 6c69 6e65 4564 6974    - PipelineEdit
+000450d0: 6f72 5461 6273 2e73 6176 655f 7069 7065  orTabs.save_pipe
+000450e0: 6c69 6e65 0a20 2020 2020 2020 2020 2020  line.           
+000450f0: 202d 2073 6176 655f 7069 7065 6c69 6e65   - save_pipeline
+00045100: 2069 6e73 6964 6520 7069 7065 6c69 6e65   inside pipeline
+00045110: 5f65 6469 746f 722e 7079 0a0a 2020 2020  _editor.py..    
+00045120: 2020 2020 2d20 4d6f 636b 733a 0a20 2020      - Mocks:.   
+00045130: 2020 2020 2020 2020 202d 2051 4d65 7373           - QMess
+00045140: 6167 6542 6f78 2e65 7865 630a 2020 2020  ageBox.exec.    
+00045150: 2020 2020 2020 2020 2d20 5146 696c 6544          - QFileD
+00045160: 6961 6c6f 672e 6765 7453 6176 6546 696c  ialog.getSaveFil
+00045170: 654e 616d 650a 2020 2020 2020 2020 2222  eName.        ""
+00045180: 220a 0a20 2020 2020 2020 2023 2053 6176  "..        # Sav
+00045190: 6520 7468 6520 7374 6174 6520 6f66 2074  e the state of t
+000451a0: 6865 2063 7572 7265 6e74 2070 726f 6365  he current proce
+000451b0: 7373 206c 6962 7261 7279 0a20 2020 2020  ss library.     
+000451c0: 2020 2063 6f6e 6669 6720 3d20 436f 6e66     config = Conf
+000451d0: 6967 2863 6f6e 6669 675f 7061 7468 3d73  ig(config_path=s
+000451e0: 656c 662e 636f 6e66 6967 5f70 6174 6829  elf.config_path)
+000451f0: 0a20 2020 2020 2020 2075 7372 5f70 726f  .        usr_pro
+00045200: 635f 666f 6c64 6572 203d 206f 732e 7061  c_folder = os.pa
+00045210: 7468 2e6a 6f69 6e28 0a20 2020 2020 2020  th.join(.       
+00045220: 2020 2020 2063 6f6e 6669 672e 6765 745f       config.get_
+00045230: 6d69 615f 7061 7468 2829 2c20 2270 726f  mia_path(), "pro
+00045240: 6365 7373 6573 222c 2022 5573 6572 5f70  cesses", "User_p
+00045250: 726f 6365 7373 6573 220a 2020 2020 2020  rocesses".      
+00045260: 2020 290a 2020 2020 2020 2020 7368 7574    ).        shut
+00045270: 696c 2e63 6f70 7974 7265 6528 0a20 2020  il.copytree(.   
+00045280: 2020 2020 2020 2020 2075 7372 5f70 726f           usr_pro
+00045290: 635f 666f 6c64 6572 2c0a 2020 2020 2020  c_folder,.      
+000452a0: 2020 2020 2020 6f73 2e70 6174 682e 6a6f        os.path.jo
+000452b0: 696e 280a 2020 2020 2020 2020 2020 2020  in(.            
+000452c0: 2020 2020 7365 6c66 2e63 6f6e 6669 675f      self.config_
+000452d0: 7061 7468 2c0a 2020 2020 2020 2020 2020  path,.          
+000452e0: 2020 2020 2020 2234 5554 735f 5465 7374        "4UTs_Test
+000452f0: 4d49 4150 6970 656c 696e 6545 6469 746f  MIAPipelineEdito
+00045300: 7222 2c0a 2020 2020 2020 2020 2020 2020  r",.            
+00045310: 2020 2020 2255 7365 725f 7072 6f63 6573      "User_proces
+00045320: 7365 7322 2c0a 2020 2020 2020 2020 2020  ses",.          
+00045330: 2020 292c 0a20 2020 2020 2020 2029 0a20    ),.        ). 
+00045340: 2020 2020 2020 2073 6875 7469 6c2e 636f         shutil.co
+00045350: 7079 280a 2020 2020 2020 2020 2020 2020  py(.            
+00045360: 6f73 2e70 6174 682e 6a6f 696e 280a 2020  os.path.join(.  
+00045370: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00045380: 6e66 6967 2e67 6574 5f6d 6961 5f70 6174  nfig.get_mia_pat
+00045390: 6828 292c 2022 7072 6f70 6572 7469 6573  h(), "properties
+000453a0: 222c 2022 7072 6f63 6573 735f 636f 6e66  ", "process_conf
+000453b0: 6967 2e79 6d6c 220a 2020 2020 2020 2020  ig.yml".        
+000453c0: 2020 2020 292c 0a20 2020 2020 2020 2020      ),.         
+000453d0: 2020 206f 732e 7061 7468 2e6a 6f69 6e28     os.path.join(
+000453e0: 7365 6c66 2e63 6f6e 6669 675f 7061 7468  self.config_path
+000453f0: 2c20 2234 5554 735f 5465 7374 4d49 4150  , "4UTs_TestMIAP
+00045400: 6970 656c 696e 6545 6469 746f 7222 292c  ipelineEditor"),
+00045410: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+00045420: 2020 2020 2320 5365 7473 206f 6674 656e      # Sets often
+00045430: 2075 7365 6420 7368 6f72 7463 7574 730a   used shortcuts.
+00045440: 2020 2020 2020 2020 7070 6c5f 6564 745f          ppl_edt_
+00045450: 7461 6273 203d 2073 656c 662e 6d61 696e  tabs = self.main
+00045460: 5f77 696e 646f 772e 7069 7065 6c69 6e65  _window.pipeline
+00045470: 5f6d 616e 6167 6572 2e70 6970 656c 696e  _manager.pipelin
+00045480: 6545 6469 746f 7254 6162 730a 0a20 2020  eEditorTabs..   
+00045490: 2020 2020 2023 2053 7769 7463 6820 746f       # Switch to
+000454a0: 2070 6970 656c 696e 6520 6d61 6e61 6765   pipeline manage
+000454b0: 720a 2020 2020 2020 2020 7365 6c66 2e6d  r.        self.m
+000454c0: 6169 6e5f 7769 6e64 6f77 2e74 6162 732e  ain_window.tabs.
+000454d0: 7365 7443 7572 7265 6e74 496e 6465 7828  setCurrentIndex(
+000454e0: 3229 0a0a 2020 2020 2020 2020 2320 5472  2)..        # Tr
+000454f0: 6965 7320 746f 2073 6176 6520 6120 7069  ies to save a pi
+00045500: 7065 6c69 6e65 2074 6861 7420 6973 2065  peline that is e
+00045510: 6d70 7479 0a20 2020 2020 2020 2072 6573  mpty.        res
+00045520: 203d 2070 706c 5f65 6474 5f74 6162 732e   = ppl_edt_tabs.
+00045530: 7361 7665 5f70 6970 656c 696e 6528 290a  save_pipeline().
+00045540: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00045550: 6572 7449 734e 6f6e 6528 7265 7329 0a0a  ertIsNone(res)..
+00045560: 2020 2020 2020 2020 2320 4164 6473 2061          # Adds a
+00045570: 2070 726f 6365 7373 0a20 2020 2020 2020   process.       
+00045580: 2070 706c 5f65 6474 5f74 6162 732e 6765   ppl_edt_tabs.ge
+00045590: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
+000455a0: 2829 2e63 6c69 636b 5f70 6f73 203d 2051  ().click_pos = Q
+000455b0: 506f 696e 7428 3435 302c 2035 3030 290a  Point(450, 500).
+000455c0: 2020 2020 2020 2020 7070 6c5f 6564 745f          ppl_edt_
+000455d0: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
+000455e0: 5f65 6469 746f 7228 292e 6164 645f 6e61  _editor().add_na
+000455f0: 6d65 645f 7072 6f63 6573 7328 536d 6f6f  med_process(Smoo
+00045600: 7468 290a 0a20 2020 2020 2020 2023 2045  th)..        # E
+00045610: 7870 6f72 7473 2074 6865 2069 6e70 7574  xports the input
+00045620: 2061 6e64 206f 7574 7075 7420 706c 7567   and output plug
+00045630: 730a 2020 2020 2020 2020 7070 6c5f 6564  s.        ppl_ed
+00045640: 745f 7461 6273 2e67 6574 5f63 7572 7265  t_tabs.get_curre
+00045650: 6e74 5f65 6469 746f 7228 292e 6375 7272  nt_editor().curr
+00045660: 656e 745f 6e6f 6465 5f6e 616d 6520 3d20  ent_node_name = 
+00045670: 2273 6d6f 6f74 685f 3122 0a20 2020 2020  "smooth_1".     
+00045680: 2020 2023 2066 6d74 3a20 6f66 660a 2020     # fmt: off.  
+00045690: 2020 2020 2020 280a 2020 2020 2020 2020        (.        
+000456a0: 2020 2020 7070 6c5f 6564 745f 7461 6273      ppl_edt_tabs
+000456b0: 2e67 6574 5f63 7572 7265 6e74 5f65 6469  .get_current_edi
+000456c0: 746f 7228 292e 0a20 2020 2020 2020 2020  tor()..         
+000456d0: 2020 2065 7870 6f72 745f 6e6f 6465 5f75     export_node_u
+000456e0: 6e63 6f6e 6e65 6374 6564 5f6d 616e 6461  nconnected_manda
+000456f0: 746f 7279 5f70 6c75 6773 2829 0a20 2020  tory_plugs().   
+00045700: 2020 2020 2029 0a20 2020 2020 2020 2028       ).        (
+00045710: 0a20 2020 2020 2020 2020 2020 2070 706c  .            ppl
+00045720: 5f65 6474 5f74 6162 732e 6765 745f 6375  _edt_tabs.get_cu
+00045730: 7272 656e 745f 6564 6974 6f72 2829 2e0a  rrent_editor()..
+00045740: 2020 2020 2020 2020 2020 2020 6578 706f              expo
+00045750: 7274 5f6e 6f64 655f 616c 6c5f 756e 636f  rt_node_all_unco
+00045760: 6e6e 6563 7465 645f 6f75 7470 7574 7328  nnected_outputs(
+00045770: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
+00045780: 2020 2020 2320 666d 743a 206f 6e0a 0a20      # fmt: on.. 
+00045790: 2020 2020 2020 2023 204d 6f63 6b73 2074         # Mocks t
+000457a0: 6865 2065 7865 6375 7469 6f6e 206f 6620  he execution of 
+000457b0: 6120 6469 616c 6f67 2062 6f78 0a20 2020  a dialog box.   
+000457c0: 2020 2020 2051 4d65 7373 6167 6542 6f78       QMessageBox
+000457d0: 2e65 7865 6320 3d20 6c61 6d62 6461 202a  .exec = lambda *
+000457e0: 6172 6773 3a20 4e6f 6e65 0a0a 2020 2020  args: None..    
+000457f0: 2020 2020 2320 5472 6965 7320 746f 2073      # Tries to s
+00045800: 6176 6520 7468 6520 7069 7065 6c69 6e65  ave the pipeline
+00045810: 2077 6974 6820 7468 6520 7573 6572 2063   with the user c
+00045820: 616e 6365 6c6c 696e 6720 6974 0a20 2020  ancelling it.   
+00045830: 2020 2020 2051 4669 6c65 4469 616c 6f67       QFileDialog
+00045840: 2e67 6574 5361 7665 4669 6c65 4e61 6d65  .getSaveFileName
+00045850: 203d 206c 616d 6264 6120 2a61 7267 733a   = lambda *args:
+00045860: 205b 2222 5d0a 2020 2020 2020 2020 7265   [""].        re
+00045870: 7320 3d20 7070 6c5f 6564 745f 7461 6273  s = ppl_edt_tabs
+00045880: 2e73 6176 655f 7069 7065 6c69 6e65 2829  .save_pipeline()
+00045890: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+000458a0: 7365 7274 4973 4e6f 6e65 2872 6573 290a  sertIsNone(res).
+000458b0: 0a20 2020 2020 2020 2023 204d 6f63 6b73  .        # Mocks
+000458c0: 2074 6865 2065 7865 6375 7469 6f6e 206f   the execution o
+000458d0: 6620 6120 5146 696c 6544 6961 6c6f 670a  f a QFileDialog.
+000458e0: 2020 2020 2020 2020 5146 696c 6544 6961          QFileDia
+000458f0: 6c6f 672e 6765 7453 6176 6546 696c 654e  log.getSaveFileN
+00045900: 616d 6520 3d20 6c61 6d62 6461 202a 6172  ame = lambda *ar
+00045910: 6773 3a20 5b66 696c 656e 616d 655d 0a0a  gs: [filename]..
+00045920: 2020 2020 2020 2020 2320 5265 6d6f 7665          # Remove
+00045930: 7320 7468 6520 636f 6e66 6967 2e67 6574  s the config.get
+00045940: 5f6d 6961 5f70 6174 6828 292f 7072 6f63  _mia_path()/proc
+00045950: 6573 7365 732f 5573 6572 5f70 726f 6365  esses/User_proce
+00045960: 7373 6573 2066 6f6c 6465 722c 2074 6f0a  sses folder, to.
+00045970: 2020 2020 2020 2020 2320 696e 6372 6561          # increa
+00045980: 7365 2063 6f76 6572 6167 650a 2020 2020  se coverage.    
+00045990: 2020 2020 7368 7574 696c 2e72 6d74 7265      shutil.rmtre
+000459a0: 6528 7573 725f 7072 6f63 5f66 6f6c 6465  e(usr_proc_folde
+000459b0: 7229 0a0a 2020 2020 2020 2020 2320 5472  r)..        # Tr
+000459c0: 6965 7320 746f 2073 6176 6520 7468 6520  ies to save the 
+000459d0: 7069 7065 6c69 6e65 2077 6974 6820 6120  pipeline with a 
+000459e0: 6669 6c65 6e61 6d65 2073 7461 7274 696e  filename startin
+000459f0: 6720 6279 2061 2064 6967 6974 0a20 2020  g by a digit.   
+00045a00: 2020 2020 2063 6f6e 6669 6720 3d20 436f       config = Co
+00045a10: 6e66 6967 2863 6f6e 6669 675f 7061 7468  nfig(config_path
+00045a20: 3d73 656c 662e 636f 6e66 6967 5f70 6174  =self.config_pat
+00045a30: 6829 0a20 2020 2020 2020 2075 7372 5f70  h).        usr_p
+00045a40: 726f 635f 666f 6c64 6572 203d 206f 732e  roc_folder = os.
+00045a50: 7061 7468 2e6a 6f69 6e28 0a20 2020 2020  path.join(.     
+00045a60: 2020 2020 2020 2063 6f6e 6669 672e 6765         config.ge
+00045a70: 745f 6d69 615f 7061 7468 2829 2c20 2270  t_mia_path(), "p
+00045a80: 726f 6365 7373 6573 222c 2022 5573 6572  rocesses", "User
+00045a90: 5f70 726f 6365 7373 6573 220a 2020 2020  _processes".    
+00045aa0: 2020 2020 290a 2020 2020 2020 2020 6669      ).        fi
+00045ab0: 6c65 6e61 6d65 203d 206f 732e 7061 7468  lename = os.path
+00045ac0: 2e6a 6f69 6e28 7573 725f 7072 6f63 5f66  .join(usr_proc_f
+00045ad0: 6f6c 6465 722c 2022 315f 7465 7374 5f70  older, "1_test_p
+00045ae0: 6970 656c 696e 6522 290a 2020 2020 2020  ipeline").      
+00045af0: 2020 7265 7320 3d20 7070 6c5f 6564 745f    res = ppl_edt_
+00045b00: 7461 6273 2e73 6176 655f 7069 7065 6c69  tabs.save_pipeli
+00045b10: 6e65 2829 0a20 2020 2020 2020 2073 656c  ne().        sel
+00045b20: 662e 6173 7365 7274 4973 4e6f 6e65 2872  f.assertIsNone(r
+00045b30: 6573 290a 0a20 2020 2020 2020 2023 2054  es)..        # T
+00045b40: 7269 6573 2074 6f20 7361 7665 2074 6865  ries to save the
+00045b50: 2070 6970 656c 696e 6520 7769 7468 2061   pipeline with a
+00045b60: 2066 696c 656e 616d 6520 7769 7468 6f75   filename withou
+00045b70: 7420 6578 7465 6e73 696f 6e2c 0a20 2020  t extension,.   
+00045b80: 2020 2020 2023 2077 6869 6368 2069 7320       # which is 
+00045b90: 6175 746f 6d61 7469 6361 6c6c 7920 636f  automatically co
+00045ba0: 6d70 6c65 7465 6420 746f 202e 7079 0a20  mpleted to .py. 
+00045bb0: 2020 2020 2020 2066 696c 656e 616d 6520         filename 
+00045bc0: 3d20 6f73 2e70 6174 682e 6a6f 696e 2875  = os.path.join(u
+00045bd0: 7372 5f70 726f 635f 666f 6c64 6572 2c20  sr_proc_folder, 
+00045be0: 2274 6573 745f 7069 7065 6c69 6e65 5f31  "test_pipeline_1
+00045bf0: 2229 0a20 2020 2020 2020 2051 4669 6c65  ").        QFile
+00045c00: 4469 616c 6f67 2e67 6574 5361 7665 4669  Dialog.getSaveFi
+00045c10: 6c65 4e61 6d65 203d 206c 616d 6264 6120  leName = lambda 
+00045c20: 2a61 7267 733a 205b 6669 6c65 6e61 6d65  *args: [filename
+00045c30: 5d0a 2020 2020 2020 2020 7265 7320 3d20  ].        res = 
+00045c40: 7070 6c5f 6564 745f 7461 6273 2e73 6176  ppl_edt_tabs.sav
+00045c50: 655f 7069 7065 6c69 6e65 2829 0a20 2020  e_pipeline().   
+00045c60: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00045c70: 5472 7565 2872 6573 2920 2023 2054 6865  True(res)  # The
+00045c80: 2072 6573 756c 7469 6e67 2066 696c 656e   resulting filen
+00045c90: 616d 6520 6973 206e 6f74 2065 6d70 7479  ame is not empty
+00045ca0: 0a0a 2020 2020 2020 2020 2320 5361 7665  ..        # Save
+00045cb0: 2074 6865 2070 6970 656c 696e 6520 7769   the pipeline wi
+00045cc0: 7468 2061 2066 696c 656e 616d 6520 7769  th a filename wi
+00045cd0: 7468 2074 6865 2077 726f 6e67 202e 6320  th the wrong .c 
+00045ce0: 6578 7465 6e73 696f 6e2c 0a20 2020 2020  extension,.     
+00045cf0: 2020 2023 2077 6869 6368 2069 7320 6175     # which is au
+00045d00: 746f 6d61 7469 6361 6c6c 7920 636f 7272  tomatically corr
+00045d10: 6563 7465 6420 746f 202e 7079 0a20 2020  ected to .py.   
+00045d20: 2020 2020 2066 696c 656e 616d 6520 3d20       filename = 
+00045d30: 6f73 2e70 6174 682e 6a6f 696e 2875 7372  os.path.join(usr
+00045d40: 5f70 726f 635f 666f 6c64 6572 2c20 2274  _proc_folder, "t
+00045d50: 6573 745f 7069 7065 6c69 6e65 5f32 2e63  est_pipeline_2.c
+00045d60: 2229 0a20 2020 2020 2020 2051 4669 6c65  ").        QFile
+00045d70: 4469 616c 6f67 2e67 6574 5361 7665 4669  Dialog.getSaveFi
+00045d80: 6c65 4e61 6d65 203d 206c 616d 6264 6120  leName = lambda 
+00045d90: 2a61 7267 733a 205b 6669 6c65 6e61 6d65  *args: [filename
+00045da0: 5d0a 2020 2020 2020 2020 7265 7320 3d20  ].        res = 
+00045db0: 7070 6c5f 6564 745f 7461 6273 2e73 6176  ppl_edt_tabs.sav
+00045dc0: 655f 7069 7065 6c69 6e65 2829 0a20 2020  e_pipeline().   
+00045dd0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00045de0: 5472 7565 2872 6573 2920 2023 2054 6865  True(res)  # The
+00045df0: 2072 6573 756c 7469 6e67 2066 696c 656e   resulting filen
+00045e00: 616d 6520 6973 206e 6f74 2065 6d70 7479  ame is not empty
+00045e10: 0a0a 2020 2020 2020 2020 2320 5365 7473  ..        # Sets
+00045e20: 2075 7365 7220 6d6f 6465 2074 6f20 7472   user mode to tr
+00045e30: 7565 0a20 2020 2020 2020 2043 6f6e 6669  ue.        Confi
+00045e40: 6728 636f 6e66 6967 5f70 6174 683d 7365  g(config_path=se
+00045e50: 6c66 2e63 6f6e 6669 675f 7061 7468 292e  lf.config_path).
+00045e60: 7365 745f 7573 6572 5f6d 6f64 6528 5472  set_user_mode(Tr
+00045e70: 7565 290a 0a20 2020 2020 2020 2023 2054  ue)..        # T
+00045e80: 7269 6573 2074 6f20 6f76 6572 7772 6974  ries to overwrit
+00045e90: 6520 7468 6520 7072 6576 696f 7573 6c79  e the previously
+00045ea0: 2073 6176 6564 2070 6970 656c 696e 6520   saved pipeline 
+00045eb0: 7769 7468 6f75 740a 2020 2020 2020 2020  without.        
+00045ec0: 2320 7065 726d 6973 7369 6f6e 730a 2020  # permissions.  
+00045ed0: 2020 2020 2020 7265 7320 3d20 7070 6c5f        res = ppl_
+00045ee0: 6564 745f 7461 6273 2e73 6176 655f 7069  edt_tabs.save_pi
+00045ef0: 7065 6c69 6e65 2829 0a20 2020 2020 2020  peline().       
+00045f00: 2073 656c 662e 6173 7365 7274 4973 4e6f   self.assertIsNo
+00045f10: 6e65 2872 6573 290a 0a20 2020 2020 2020  ne(res)..       
+00045f20: 2023 2053 6574 7320 7573 6572 206d 6f64   # Sets user mod
+00045f30: 6520 6261 636b 2074 6f20 6661 6c73 650a  e back to false.
+00045f40: 2020 2020 2020 2020 436f 6e66 6967 2863          Config(c
+00045f50: 6f6e 6669 675f 7061 7468 3d73 656c 662e  onfig_path=self.
+00045f60: 636f 6e66 6967 5f70 6174 6829 2e73 6574  config_path).set
+00045f70: 5f75 7365 725f 6d6f 6465 2854 7275 6529  _user_mode(True)
+00045f80: 0a0a 2020 2020 2020 2020 2320 5361 7665  ..        # Save
+00045f90: 7320 6120 7069 7065 6c69 6e65 2062 7920  s a pipeline by 
+00045fa0: 7370 6563 6966 7969 6e67 2061 2066 696c  specifying a fil
+00045fb0: 656e 616d 650a 2020 2020 2020 2020 6669  ename.        fi
+00045fc0: 6c65 6e61 6d65 203d 206f 732e 7061 7468  lename = os.path
+00045fd0: 2e6a 6f69 6e28 7573 725f 7072 6f63 5f66  .join(usr_proc_f
+00045fe0: 6f6c 6465 722c 2022 7465 7374 5f70 6970  older, "test_pip
+00045ff0: 656c 696e 655f 332e 7079 2229 0a20 2020  eline_3.py").   
+00046000: 2020 2020 2072 6573 203d 2070 706c 5f65       res = ppl_e
+00046010: 6474 5f74 6162 732e 7361 7665 5f70 6970  dt_tabs.save_pip
+00046020: 656c 696e 6528 6e65 775f 6669 6c65 5f6e  eline(new_file_n
+00046030: 616d 653d 6669 6c65 6e61 6d65 290a 2020  ame=filename).  
+00046040: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00046050: 7454 7275 6528 7265 7329 2020 2320 5468  tTrue(res)  # Th
+00046060: 6520 7265 7375 6c74 696e 6720 6669 6c65  e resulting file
+00046070: 6e61 6d65 2069 7320 6e6f 7420 656d 7074  name is not empt
+00046080: 790a 0a20 2020 2064 6566 2074 6573 745f  y..    def test_
+00046090: 7570 6461 7465 5f70 6c75 675f 7661 6c75  update_plug_valu
+000460a0: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
+000460b0: 2022 2222 4469 7370 6c61 7973 2070 6172   """Displays par
+000460c0: 616d 6574 6572 7320 6f66 2061 206e 6f64  ameters of a nod
+000460d0: 6520 616e 6420 7570 6461 7465 7320 6120  e and updates a 
+000460e0: 706c 7567 2076 616c 7565 2e22 2222 0a0a  plug value."""..
+000460f0: 2020 2020 2020 2020 636f 6e66 6967 203d          config =
+00046100: 2043 6f6e 6669 6728 636f 6e66 6967 5f70   Config(config_p
+00046110: 6174 683d 7365 6c66 2e63 6f6e 6669 675f  ath=self.config_
+00046120: 7061 7468 290a 2020 2020 2020 2020 636f  path).        co
+00046130: 6e74 726f 6c56 315f 7665 7220 3d20 636f  ntrolV1_ver = co
+00046140: 6e66 6967 2e69 7343 6f6e 7472 6f6c 5631  nfig.isControlV1
+00046150: 2829 0a0a 2020 2020 2020 2020 2320 5377  ()..        # Sw
+00046160: 6974 6368 2074 6f20 5631 206e 6f64 6520  itch to V1 node 
+00046170: 636f 6e74 726f 6c6c 6572 2047 5549 2c20  controller GUI, 
+00046180: 6966 206e 6563 6573 7361 7279 0a20 2020  if necessary.   
+00046190: 2020 2020 2069 6620 6e6f 7420 636f 6e74       if not cont
+000461a0: 726f 6c56 315f 7665 723a 0a20 2020 2020  rolV1_ver:.     
+000461b0: 2020 2020 2020 2063 6f6e 6669 672e 7365         config.se
+000461c0: 7443 6f6e 7472 6f6c 5631 2854 7275 6529  tControlV1(True)
+000461d0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+000461e0: 662e 7265 7374 6172 745f 4d49 4128 290a  f.restart_MIA().
+000461f0: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
+00046200: 655f 6564 6974 6f72 5f74 6162 7320 3d20  e_editor_tabs = 
+00046210: 280a 2020 2020 2020 2020 2020 2020 7365  (.            se
+00046220: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
+00046230: 6970 656c 696e 655f 6d61 6e61 6765 722e  ipeline_manager.
+00046240: 7069 7065 6c69 6e65 4564 6974 6f72 5461  pipelineEditorTa
+00046250: 6273 0a20 2020 2020 2020 2029 0a20 2020  bs.        ).   
+00046260: 2020 2020 206e 6f64 655f 636f 6e74 726f       node_contro
+00046270: 6c6c 6572 203d 2073 656c 662e 6d61 696e  ller = self.main
+00046280: 5f77 696e 646f 772e 7069 7065 6c69 6e65  _window.pipeline
+00046290: 5f6d 616e 6167 6572 2e6e 6f64 6543 6f6e  _manager.nodeCon
+000462a0: 7472 6f6c 6c65 720a 0a20 2020 2020 2020  troller..       
+000462b0: 2023 2041 6464 696e 6720 6120 7072 6f63   # Adding a proc
+000462c0: 6573 732c 2063 7265 6174 6573 2061 206e  ess, creates a n
+000462d0: 6f64 6520 6361 6c6c 6564 2022 7468 7265  ode called "thre
+000462e0: 7368 6f6c 645f 3122 0a20 2020 2020 2020  shold_1".       
+000462f0: 2070 726f 6365 7373 5f63 6c61 7373 203d   process_class =
+00046300: 2054 6872 6573 686f 6c64 0a20 2020 2020   Threshold.     
+00046310: 2020 2070 6970 656c 696e 655f 6564 6974     pipeline_edit
+00046320: 6f72 5f74 6162 732e 6765 745f 6375 7272  or_tabs.get_curr
+00046330: 656e 745f 6564 6974 6f72 2829 2e63 6c69  ent_editor().cli
+00046340: 636b 5f70 6f73 203d 2051 506f 696e 7428  ck_pos = QPoint(
+00046350: 3435 302c 2035 3030 290a 2020 2020 2020  450, 500).      
+00046360: 2020 7069 7065 6c69 6e65 5f65 6469 746f    pipeline_edito
+00046370: 725f 7461 6273 2e67 6574 5f63 7572 7265  r_tabs.get_curre
+00046380: 6e74 5f65 6469 746f 7228 292e 6164 645f  nt_editor().add_
+00046390: 6e61 6d65 645f 7072 6f63 6573 7328 0a20  named_process(. 
+000463a0: 2020 2020 2020 2020 2020 2070 726f 6365             proce
+000463b0: 7373 5f63 6c61 7373 0a20 2020 2020 2020  ss_class.       
+000463c0: 2029 0a0a 2020 2020 2020 2020 2320 4469   )..        # Di
+000463d0: 7370 6c61 7969 6e67 2074 6865 206e 6f64  splaying the nod
+000463e0: 6520 7061 7261 6d65 7465 7273 0a20 2020  e parameters.   
+000463f0: 2020 2020 2070 6970 656c 696e 6520 3d20       pipeline = 
+00046400: 7069 7065 6c69 6e65 5f65 6469 746f 725f  pipeline_editor_
+00046410: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
+00046420: 5f70 6970 656c 696e 6528 290a 2020 2020  _pipeline().    
+00046430: 2020 2020 6e6f 6465 5f63 6f6e 7472 6f6c      node_control
+00046440: 6c65 722e 6469 7370 6c61 795f 7061 7261  ler.display_para
+00046450: 6d65 7465 7273 280a 2020 2020 2020 2020  meters(.        
+00046460: 2020 2020 2274 6872 6573 686f 6c64 5f31      "threshold_1
+00046470: 222c 2067 6574 5f70 726f 6365 7373 5f69  ", get_process_i
+00046480: 6e73 7461 6e63 6528 7072 6f63 6573 735f  nstance(process_
+00046490: 636c 6173 7329 2c20 7069 7065 6c69 6e65  class), pipeline
+000464a0: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+000464b0: 2020 2020 2320 5570 6461 7469 6e67 2074      # Updating t
+000464c0: 6865 2076 616c 7565 206f 6620 7468 6520  he value of the 
+000464d0: 2273 796e 6368 726f 6e69 7a65 2220 696e  "synchronize" in
+000464e0: 7075 7420 706c 7567 2061 6e64 0a20 2020  put plug and.   
+000464f0: 2020 2020 2023 2022 5f61 6374 6976 6174       # "_activat
+00046500: 696f 6e5f 666f 7263 6564 2220 6f75 7470  ion_forced" outp
+00046510: 7574 2070 6c75 6773 2e0a 2020 2020 2020  ut plugs..      
+00046520: 2020 2320 6765 745f 696e 6465 785f 6672    # get_index_fr
+00046530: 6f6d 5f70 6c75 675f 6e61 6d65 2829 206f  om_plug_name() o
+00046540: 6e6c 7920 6578 6973 7473 206f 6e20 7468  nly exists on th
+00046550: 6520 4e6f 6465 436f 6e74 726f 6c6c 6572  e NodeController
+00046560: 2063 6c61 7373 0a20 2020 2020 2020 2023   class.        #
+00046570: 2028 7631 292e 0a20 2020 2020 2020 2069   (v1)..        i
+00046580: 6620 6861 7361 7474 7228 6e6f 6465 5f63  f hasattr(node_c
+00046590: 6f6e 7472 6f6c 6c65 722c 2022 6765 745f  ontroller, "get_
+000465a0: 696e 6465 785f 6672 6f6d 5f70 6c75 675f  index_from_plug_
+000465b0: 6e61 6d65 2229 3a0a 2020 2020 2020 2020  name"):.        
+000465c0: 2020 2020 696e 6465 7820 3d20 6e6f 6465      index = node
+000465d0: 5f63 6f6e 7472 6f6c 6c65 722e 6765 745f  _controller.get_
+000465e0: 696e 6465 785f 6672 6f6d 5f70 6c75 675f  index_from_plug_
+000465f0: 6e61 6d65 280a 2020 2020 2020 2020 2020  name(.          
+00046600: 2020 2020 2020 2273 796e 6368 726f 6e69        "synchroni
+00046610: 7a65 222c 2022 696e 220a 2020 2020 2020  ze", "in".      
+00046620: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00046630: 2020 2020 6e6f 6465 5f63 6f6e 7472 6f6c      node_control
+00046640: 6c65 722e 6c69 6e65 5f65 6469 745f 696e  ler.line_edit_in
+00046650: 7075 745b 696e 6465 785d 2e73 6574 5465  put[index].setTe
+00046660: 7874 2822 3122 290a 0a20 2020 2020 2020  xt("1")..       
+00046670: 2020 2020 2023 2054 6869 7320 6361 6c6c       # This call
+00046680: 7320 2275 7064 6174 655f 706c 7567 5f76  s "update_plug_v
+00046690: 616c 7565 2220 6d65 7468 6f64 3a0a 2020  alue" method:.  
+000466a0: 2020 2020 2020 2020 2020 6e6f 6465 5f63            node_c
+000466b0: 6f6e 7472 6f6c 6c65 722e 6c69 6e65 5f65  ontroller.line_e
+000466c0: 6469 745f 696e 7075 745b 696e 6465 785d  dit_input[index]
+000466d0: 2e72 6574 7572 6e50 7265 7373 6564 2e65  .returnPressed.e
+000466e0: 6d69 7428 290a 2020 2020 2020 2020 2020  mit().          
+000466f0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00046700: 616c 280a 2020 2020 2020 2020 2020 2020  al(.            
+00046710: 2020 2020 312c 2070 6970 656c 696e 652e      1, pipeline.
+00046720: 6e6f 6465 735b 2274 6872 6573 686f 6c64  nodes["threshold
+00046730: 5f31 225d 2e67 6574 5f70 6c75 675f 7661  _1"].get_plug_va
+00046740: 6c75 6528 2273 796e 6368 726f 6e69 7a65  lue("synchronize
+00046750: 2229 0a20 2020 2020 2020 2020 2020 2029  ").            )
+00046760: 0a0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00046770: 5570 6461 7469 6e67 2074 6865 2076 616c  Updating the val
+00046780: 7565 206f 6620 7468 6520 225f 6163 7469  ue of the "_acti
+00046790: 7661 7469 6f6e 5f66 6f72 6365 6422 2070  vation_forced" p
+000467a0: 6c75 670a 2020 2020 2020 2020 2020 2020  lug.            
+000467b0: 696e 6465 7820 3d20 6e6f 6465 5f63 6f6e  index = node_con
+000467c0: 7472 6f6c 6c65 722e 6765 745f 696e 6465  troller.get_inde
+000467d0: 785f 6672 6f6d 5f70 6c75 675f 6e61 6d65  x_from_plug_name
+000467e0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000467f0: 2020 225f 6163 7469 7661 7469 6f6e 5f66    "_activation_f
+00046800: 6f72 6365 6422 2c20 226f 7574 220a 2020  orced", "out".  
+00046810: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00046820: 2020 2020 2020 2020 6e6f 6465 5f63 6f6e          node_con
+00046830: 7472 6f6c 6c65 722e 6c69 6e65 5f65 6469  troller.line_edi
+00046840: 745f 6f75 7470 7574 5b69 6e64 6578 5d2e  t_output[index].
+00046850: 7365 7454 6578 7428 2254 7275 6522 290a  setText("True").
+00046860: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
+00046870: 6869 7320 6361 6c6c 7320 2275 7064 6174  his calls "updat
+00046880: 655f 706c 7567 5f76 616c 7565 2220 6d65  e_plug_value" me
+00046890: 7468 6f64 3a0a 2020 2020 2020 2020 2020  thod:.          
+000468a0: 2020 6e6f 6465 5f63 6f6e 7472 6f6c 6c65    node_controlle
+000468b0: 722e 6c69 6e65 5f65 6469 745f 6f75 7470  r.line_edit_outp
+000468c0: 7574 5b69 6e64 6578 5d2e 7265 7475 726e  ut[index].return
+000468d0: 5072 6573 7365 642e 656d 6974 2829 0a20  Pressed.emit(). 
+000468e0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+000468f0: 6173 7365 7274 4571 7561 6c28 0a20 2020  assertEqual(.   
+00046900: 2020 2020 2020 2020 2020 2020 2054 7275               Tru
+00046910: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+00046920: 2020 2070 6970 656c 696e 652e 6e6f 6465     pipeline.node
+00046930: 735b 2274 6872 6573 686f 6c64 5f31 225d  s["threshold_1"]
+00046940: 2e67 6574 5f70 6c75 675f 7661 6c75 6528  .get_plug_value(
+00046950: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00046960: 2020 2020 2022 5f61 6374 6976 6174 696f       "_activatio
+00046970: 6e5f 666f 7263 6564 220a 2020 2020 2020  n_forced".      
+00046980: 2020 2020 2020 2020 2020 292c 0a20 2020            ),.   
+00046990: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
+000469a0: 2020 2020 2320 4578 706f 7274 696e 6720      # Exporting 
+000469b0: 7468 6520 696e 7075 7420 706c 7567 7320  the input plugs 
+000469c0: 616e 6420 6d6f 6469 6679 696e 6720 7468  and modifying th
+000469d0: 6520 2273 796e 6368 726f 6e69 7a65 2220  e "synchronize" 
+000469e0: 696e 7075 7420 706c 7567 0a20 2020 2020  input plug.     
+000469f0: 2020 2028 0a20 2020 2020 2020 2020 2020     (.           
+00046a00: 2070 6970 656c 696e 655f 6564 6974 6f72   pipeline_editor
+00046a10: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
+00046a20: 745f 6564 6974 6f72 0a20 2020 2020 2020  t_editor.       
+00046a30: 2029 2829 2e63 7572 7265 6e74 5f6e 6f64   )().current_nod
+00046a40: 655f 6e61 6d65 203d 2022 7468 7265 7368  e_name = "thresh
+00046a50: 6f6c 645f 3122 0a20 2020 2020 2020 2028  old_1".        (
+00046a60: 0a20 2020 2020 2020 2020 2020 2070 6970  .            pip
+00046a70: 656c 696e 655f 6564 6974 6f72 5f74 6162  eline_editor_tab
+00046a80: 732e 6765 745f 6375 7272 656e 745f 6564  s.get_current_ed
+00046a90: 6974 6f72 0a20 2020 2020 2020 2029 2829  itor.        )()
+00046aa0: 2e65 7870 6f72 745f 6e6f 6465 5f61 6c6c  .export_node_all
+00046ab0: 5f75 6e63 6f6e 6e65 6374 6564 5f69 6e70  _unconnected_inp
+00046ac0: 7574 7328 290a 0a20 2020 2020 2020 2069  uts()..        i
+00046ad0: 6e70 7574 5f70 726f 6365 7373 203d 2070  nput_process = p
+00046ae0: 6970 656c 696e 652e 6e6f 6465 735b 2222  ipeline.nodes[""
+00046af0: 5d2e 7072 6f63 6573 730a 2020 2020 2020  ].process.      
+00046b00: 2020 6e6f 6465 5f63 6f6e 7472 6f6c 6c65    node_controlle
+00046b10: 722e 6469 7370 6c61 795f 7061 7261 6d65  r.display_parame
+00046b20: 7465 7273 280a 2020 2020 2020 2020 2020  ters(.          
+00046b30: 2020 2269 6e70 7574 7322 2c20 6765 745f    "inputs", get_
+00046b40: 7072 6f63 6573 735f 696e 7374 616e 6365  process_instance
+00046b50: 2869 6e70 7574 5f70 726f 6365 7373 292c  (input_process),
+00046b60: 2070 6970 656c 696e 650a 2020 2020 2020   pipeline.      
+00046b70: 2020 290a 0a20 2020 2020 2020 2023 2055    )..        # U
+00046b80: 7064 6174 696e 6720 7468 6520 7661 6c75  pdating the valu
+00046b90: 6520 6f66 2074 6865 2022 7379 6e63 6872  e of the "synchr
+00046ba0: 6f6e 697a 6522 2069 6e70 7574 2070 6c75  onize" input plu
+00046bb0: 672e 0a20 2020 2020 2020 2023 2067 6574  g..        # get
+00046bc0: 5f69 6e64 6578 5f66 726f 6d5f 706c 7567  _index_from_plug
+00046bd0: 5f6e 616d 6528 2920 6f6e 6c79 2065 7869  _name() only exi
+00046be0: 7374 7320 6f6e 2074 6865 204e 6f64 6543  sts on the NodeC
+00046bf0: 6f6e 7472 6f6c 6c65 7220 636c 6173 730a  ontroller class.
+00046c00: 2020 2020 2020 2020 2320 2876 3129 2e0a          # (v1)..
+00046c10: 2020 2020 2020 2020 6966 2068 6173 6174          if hasat
+00046c20: 7472 286e 6f64 655f 636f 6e74 726f 6c6c  tr(node_controll
+00046c30: 6572 2c20 2267 6574 5f69 6e64 6578 5f66  er, "get_index_f
+00046c40: 726f 6d5f 706c 7567 5f6e 616d 6522 293a  rom_plug_name"):
+00046c50: 0a20 2020 2020 2020 2020 2020 2069 6e64  .            ind
+00046c60: 6578 203d 206e 6f64 655f 636f 6e74 726f  ex = node_contro
+00046c70: 6c6c 6572 2e67 6574 5f69 6e64 6578 5f66  ller.get_index_f
+00046c80: 726f 6d5f 706c 7567 5f6e 616d 6528 0a20  rom_plug_name(. 
+00046c90: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00046ca0: 7379 6e63 6872 6f6e 697a 6522 2c20 2269  synchronize", "i
+00046cb0: 6e22 0a20 2020 2020 2020 2020 2020 2029  n".            )
+00046cc0: 0a20 2020 2020 2020 2020 2020 206e 6f64  .            nod
+00046cd0: 655f 636f 6e74 726f 6c6c 6572 2e6c 696e  e_controller.lin
+00046ce0: 655f 6564 6974 5f69 6e70 7574 5b69 6e64  e_edit_input[ind
+00046cf0: 6578 5d2e 7365 7454 6578 7428 2232 2229  ex].setText("2")
+00046d00: 0a0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00046d10: 5468 6973 2063 616c 6c73 2022 7570 6461  This calls "upda
+00046d20: 7465 5f70 6c75 675f 7661 6c75 6522 206d  te_plug_value" m
+00046d30: 6574 686f 643a 0a20 2020 2020 2020 2020  ethod:.         
+00046d40: 2020 206e 6f64 655f 636f 6e74 726f 6c6c     node_controll
+00046d50: 6572 2e6c 696e 655f 6564 6974 5f69 6e70  er.line_edit_inp
+00046d60: 7574 5b69 6e64 6578 5d2e 7265 7475 726e  ut[index].return
+00046d70: 5072 6573 7365 642e 656d 6974 2829 0a20  Pressed.emit(). 
+00046d80: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00046d90: 6173 7365 7274 4571 7561 6c28 0a20 2020  assertEqual(.   
+00046da0: 2020 2020 2020 2020 2020 2020 2032 2c20               2, 
+00046db0: 7069 7065 6c69 6e65 2e6e 6f64 6573 5b22  pipeline.nodes["
+00046dc0: 7468 7265 7368 6f6c 645f 3122 5d2e 6765  threshold_1"].ge
+00046dd0: 745f 706c 7567 5f76 616c 7565 2822 7379  t_plug_value("sy
+00046de0: 6e63 6872 6f6e 697a 6522 290a 2020 2020  nchronize").    
+00046df0: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+00046e00: 2020 2023 2053 7769 7463 6865 7320 6261     # Switches ba
+00046e10: 636b 2074 6f20 6e6f 6465 2063 6f6e 7472  ck to node contr
+00046e20: 6f6c 6c65 7220 5632 2c20 6966 206e 6563  oller V2, if nec
+00046e30: 6573 7361 7279 2028 7265 7475 726e 2074  essary (return t
+00046e40: 6f20 696e 6974 6961 6c0a 2020 2020 2020  o initial.      
+00046e50: 2020 2320 7374 6174 6529 0a20 2020 2020    # state).     
+00046e60: 2020 2063 6f6e 6669 6720 3d20 436f 6e66     config = Conf
+00046e70: 6967 2863 6f6e 6669 675f 7061 7468 3d73  ig(config_path=s
+00046e80: 656c 662e 636f 6e66 6967 5f70 6174 6829  elf.config_path)
+00046e90: 0a0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
+00046ea0: 2063 6f6e 7472 6f6c 5631 5f76 6572 3a0a   controlV1_ver:.
+00046eb0: 2020 2020 2020 2020 2020 2020 636f 6e66              conf
+00046ec0: 6967 2e73 6574 436f 6e74 726f 6c56 3128  ig.setControlV1(
+00046ed0: 4661 6c73 6529 0a0a 2020 2020 6465 6620  False)..    def 
+00046ee0: 7465 7374 5f7a 5f63 6865 636b 5f6d 6f64  test_z_check_mod
+00046ef0: 6966 2873 656c 6629 3a0a 2020 2020 2020  if(self):.      
+00046f00: 2020 2222 224f 7065 6e73 2061 2070 6970    """Opens a pip
+00046f10: 656c 696e 652c 206f 7065 6e73 2069 7420  eline, opens it 
+00046f20: 6173 2061 2070 726f 6365 7373 2069 6e20  as a process in 
+00046f30: 616e 6f74 6865 7220 7461 622c 206d 6f64  another tab, mod
+00046f40: 6966 6965 7320 6974 0a20 2020 2020 2020  ifies it.       
+00046f50: 2061 6e64 2063 6865 636b 2074 6865 206d   and check the m
+00046f60: 6f64 6966 6963 6174 696f 6e73 2e0a 2020  odifications..  
+00046f70: 2020 2020 2020 2222 220a 0a20 2020 2020        """..     
 00046f80: 2020 2070 6970 656c 696e 655f 6564 6974     pipeline_edit
-00046f90: 6f72 5f74 6162 732e 7365 745f 6375 7272  or_tabs.set_curr
-00046fa0: 656e 745f 6564 6974 6f72 5f62 795f 7461  ent_editor_by_ta
-00046fb0: 625f 6e61 6d65 2822 4e65 7720 5069 7065  b_name("New Pipe
-00046fc0: 6c69 6e65 2031 2229 0a0a 2020 2020 2020  line 1")..      
-00046fd0: 2020 2320 4164 6469 6e67 2061 2070 726f    # Adding a pro
-00046fe0: 6365 7373 2066 726f 6d20 5061 636b 6167  cess from Packag
-00046ff0: 6573 206c 6962 7261 7279 2c20 6372 6561  es library, crea
-00047000: 7465 7320 6120 6e6f 6465 2063 616c 6c65  tes a node calle
-00047010: 640a 2020 2020 2020 2020 2320 2274 6573  d.        # "tes
-00047020: 745f 7069 7065 6c69 6e65 5f31 5f31 220a  t_pipeline_1_1".
-00047030: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
-00047040: 5f65 6469 746f 725f 7461 6273 2e67 6574  _editor_tabs.get
-00047050: 5f63 7572 7265 6e74 5f65 6469 746f 7228  _current_editor(
-00047060: 292e 636c 6963 6b5f 706f 7320 3d20 5150  ).click_pos = QP
-00047070: 6f69 6e74 2834 3530 2c20 3530 3029 0a20  oint(450, 500). 
-00047080: 2020 2020 2020 2070 6970 656c 696e 655f         pipeline_
-00047090: 6564 6974 6f72 5f74 6162 732e 6765 745f  editor_tabs.get_
-000470a0: 6375 7272 656e 745f 6564 6974 6f72 2829  current_editor()
-000470b0: 2e64 726f 705f 7072 6f63 6573 7328 0a20  .drop_process(. 
-000470c0: 2020 2020 2020 2020 2020 2022 5573 6572             "User
-000470d0: 5f70 726f 6365 7373 6573 2e54 6573 745f  _processes.Test_
-000470e0: 7069 7065 6c69 6e65 5f31 220a 2020 2020  pipeline_1".    
-000470f0: 2020 2020 290a 2020 2020 2020 2020 7069      ).        pi
-00047100: 7065 6c69 6e65 203d 2070 6970 656c 696e  peline = pipelin
-00047110: 655f 6564 6974 6f72 5f74 6162 732e 6765  e_editor_tabs.ge
-00047120: 745f 6375 7272 656e 745f 7069 7065 6c69  t_current_pipeli
-00047130: 6e65 2829 0a20 2020 2020 2020 2073 656c  ne().        sel
-00047140: 662e 6173 7365 7274 5472 7565 2822 7465  f.assertTrue("te
-00047150: 7374 5f70 6970 656c 696e 655f 315f 3122  st_pipeline_1_1"
-00047160: 2069 6e20 7069 7065 6c69 6e65 2e6e 6f64   in pipeline.nod
-00047170: 6573 2e6b 6579 7328 2929 0a0a 2020 2020  es.keys())..    
-00047180: 2020 2020 2320 4164 6469 6e67 2074 776f      # Adding two
-00047190: 2070 726f 6365 7373 6573 2c20 6372 6561   processes, crea
-000471a0: 7465 7320 6e6f 6465 7320 6361 6c6c 6564  tes nodes called
-000471b0: 2022 736d 6f6f 7468 5f31 2220 616e 6420   "smooth_1" and 
-000471c0: 2273 6d6f 6f74 685f 3222 0a20 2020 2020  "smooth_2".     
-000471d0: 2020 2070 6970 656c 696e 655f 6564 6974     pipeline_edit
-000471e0: 6f72 5f74 6162 732e 6765 745f 6375 7272  or_tabs.get_curr
-000471f0: 656e 745f 6564 6974 6f72 2829 2e64 726f  ent_editor().dro
-00047200: 705f 7072 6f63 6573 7328 0a20 2020 2020  p_process(.     
-00047210: 2020 2020 2020 2022 6e69 7079 7065 2e69         "nipype.i
-00047220: 6e74 6572 6661 6365 732e 7370 6d2e 536d  nterfaces.spm.Sm
-00047230: 6f6f 7468 220a 2020 2020 2020 2020 290a  ooth".        ).
-00047240: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
-00047250: 5f65 6469 746f 725f 7461 6273 2e67 6574  _editor_tabs.get
-00047260: 5f63 7572 7265 6e74 5f65 6469 746f 7228  _current_editor(
-00047270: 292e 6472 6f70 5f70 726f 6365 7373 280a  ).drop_process(.
-00047280: 2020 2020 2020 2020 2020 2020 226e 6970              "nip
-00047290: 7970 652e 696e 7465 7266 6163 6573 2e73  ype.interfaces.s
-000472a0: 706d 2e53 6d6f 6f74 6822 0a20 2020 2020  pm.Smooth".     
-000472b0: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
-000472c0: 662e 6173 7365 7274 5472 7565 2822 736d  f.assertTrue("sm
-000472d0: 6f6f 7468 5f31 2220 696e 2070 6970 656c  ooth_1" in pipel
-000472e0: 696e 652e 6e6f 6465 732e 6b65 7973 2829  ine.nodes.keys()
-000472f0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-00047300: 7373 6572 7454 7275 6528 2273 6d6f 6f74  ssertTrue("smoot
-00047310: 685f 3222 2069 6e20 7069 7065 6c69 6e65  h_2" in pipeline
-00047320: 2e6e 6f64 6573 2e6b 6579 7328 2929 0a0a  .nodes.keys())..
-00047330: 2020 2020 2020 2020 2320 4164 6469 6e67          # Adding
-00047340: 2061 206c 696e 6b20 6265 7477 6565 6e20   a link between 
-00047350: 736d 6f6f 7468 5f31 2061 6e64 2074 6573  smooth_1 and tes
-00047360: 745f 7069 7065 6c69 6e65 5f31 5f31 206e  t_pipeline_1_1 n
-00047370: 6f64 6573 0a20 2020 2020 2020 2070 6970  odes.        pip
-00047380: 656c 696e 655f 6564 6974 6f72 5f74 6162  eline_editor_tab
-00047390: 732e 6765 745f 6375 7272 656e 745f 6564  s.get_current_ed
-000473a0: 6974 6f72 2829 2e61 6464 5f6c 696e 6b28  itor().add_link(
-000473b0: 0a20 2020 2020 2020 2020 2020 2028 2273  .            ("s
-000473c0: 6d6f 6f74 685f 3122 2c20 225f 736d 6f6f  mooth_1", "_smoo
-000473d0: 7468 6564 5f66 696c 6573 2229 2c0a 2020  thed_files"),.  
-000473e0: 2020 2020 2020 2020 2020 2822 7465 7374            ("test
-000473f0: 5f70 6970 656c 696e 655f 315f 3122 2c20  _pipeline_1_1", 
-00047400: 2269 6e5f 6669 6c65 7322 292c 0a20 2020  "in_files"),.   
-00047410: 2020 2020 2020 2020 2061 6374 6976 653d           active=
-00047420: 5472 7565 2c0a 2020 2020 2020 2020 2020  True,.          
-00047430: 2020 7765 616b 3d46 616c 7365 2c0a 2020    weak=False,.  
-00047440: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00047450: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00047460: 280a 2020 2020 2020 2020 2020 2020 312c  (.            1,
-00047470: 0a20 2020 2020 2020 2020 2020 206c 656e  .            len
-00047480: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00047490: 2020 7069 7065 6c69 6e65 2e6e 6f64 6573    pipeline.nodes
-000474a0: 5b22 7465 7374 5f70 6970 656c 696e 655f  ["test_pipeline_
-000474b0: 315f 3122 5d0a 2020 2020 2020 2020 2020  1_1"].          
-000474c0: 2020 2020 2020 2e70 6c75 6773 5b22 696e        .plugs["in
-000474d0: 5f66 696c 6573 225d 0a20 2020 2020 2020  _files"].       
-000474e0: 2020 2020 2020 2020 202e 6c69 6e6b 735f           .links_
-000474f0: 6672 6f6d 0a20 2020 2020 2020 2020 2020  from.           
-00047500: 2029 2c0a 2020 2020 2020 2020 290a 2020   ),.        ).  
-00047510: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00047520: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
-00047530: 2020 2020 312c 0a20 2020 2020 2020 2020      1,.         
-00047540: 2020 206c 656e 2870 6970 656c 696e 652e     len(pipeline.
-00047550: 6e6f 6465 735b 2273 6d6f 6f74 685f 3122  nodes["smooth_1"
-00047560: 5d2e 706c 7567 735b 225f 736d 6f6f 7468  ].plugs["_smooth
-00047570: 6564 5f66 696c 6573 225d 2e6c 696e 6b73  ed_files"].links
-00047580: 5f74 6f29 2c0a 2020 2020 2020 2020 290a  _to),.        ).
-00047590: 0a20 2020 2020 2020 2023 2041 6464 696e  .        # Addin
-000475a0: 6720 6120 6c69 6e6b 2062 6574 7765 656e  g a link between
-000475b0: 2074 6573 745f 7069 7065 6c69 6e65 5f31   test_pipeline_1
-000475c0: 5f31 2061 6e64 2073 6d6f 6f74 685f 3220  _1 and smooth_2 
-000475d0: 6e6f 6465 730a 2020 2020 2020 2020 7069  nodes.        pi
-000475e0: 7065 6c69 6e65 5f65 6469 746f 725f 7461  peline_editor_ta
-000475f0: 6273 2e67 6574 5f63 7572 7265 6e74 5f65  bs.get_current_e
-00047600: 6469 746f 7228 292e 6164 645f 6c69 6e6b  ditor().add_link
-00047610: 280a 2020 2020 2020 2020 2020 2020 2822  (.            ("
-00047620: 7465 7374 5f70 6970 656c 696e 655f 315f  test_pipeline_1_
-00047630: 3122 2c20 225f 736d 6f6f 7468 6564 5f66  1", "_smoothed_f
-00047640: 696c 6573 2229 2c0a 2020 2020 2020 2020  iles"),.        
-00047650: 2020 2020 2822 736d 6f6f 7468 5f32 222c      ("smooth_2",
-00047660: 2022 696e 5f66 696c 6573 2229 2c0a 2020   "in_files"),.  
-00047670: 2020 2020 2020 2020 2020 6163 7469 7665            active
-00047680: 3d54 7275 652c 0a20 2020 2020 2020 2020  =True,.         
-00047690: 2020 2077 6561 6b3d 4661 6c73 652c 0a20     weak=False,. 
-000476a0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-000476b0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-000476c0: 6c28 0a20 2020 2020 2020 2020 2020 2031  l(.            1
-000476d0: 2c20 6c65 6e28 7069 7065 6c69 6e65 2e6e  , len(pipeline.n
-000476e0: 6f64 6573 5b22 736d 6f6f 7468 5f32 225d  odes["smooth_2"]
-000476f0: 2e70 6c75 6773 5b22 696e 5f66 696c 6573  .plugs["in_files
-00047700: 225d 2e6c 696e 6b73 5f66 726f 6d29 0a20  "].links_from). 
-00047710: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00047720: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00047730: 6c28 0a20 2020 2020 2020 2020 2020 2031  l(.            1
-00047740: 2c0a 2020 2020 2020 2020 2020 2020 6c65  ,.            le
-00047750: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
-00047760: 2020 2070 6970 656c 696e 652e 6e6f 6465     pipeline.node
-00047770: 735b 2274 6573 745f 7069 7065 6c69 6e65  s["test_pipeline
-00047780: 5f31 5f31 225d 0a20 2020 2020 2020 2020  _1_1"].         
-00047790: 2020 2020 2020 202e 706c 7567 735b 225f         .plugs["_
-000477a0: 736d 6f6f 7468 6564 5f66 696c 6573 225d  smoothed_files"]
-000477b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000477c0: 202e 6c69 6e6b 735f 746f 0a20 2020 2020   .links_to.     
-000477d0: 2020 2020 2020 2029 2c0a 2020 2020 2020         ),.      
-000477e0: 2020 290a 0a20 2020 2020 2020 2023 2052    )..        # R
-000477f0: 6574 7572 6e20 746f 2074 6865 2066 6972  eturn to the fir
-00047800: 7374 2074 6162 0a20 2020 2020 2020 2070  st tab.        p
-00047810: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
-00047820: 6162 732e 7365 745f 6375 7272 656e 745f  abs.set_current_
-00047830: 6564 6974 6f72 5f62 795f 7461 625f 6e61  editor_by_tab_na
-00047840: 6d65 280a 2020 2020 2020 2020 2020 2020  me(.            
-00047850: 2274 6573 745f 7069 7065 6c69 6e65 5f31  "test_pipeline_1
-00047860: 2e70 7922 0a20 2020 2020 2020 2029 0a0a  .py".        )..
-00047870: 2020 2020 2020 2020 2320 4578 706f 7274          # Export
-00047880: 2061 6c6c 2070 6c75 6773 206f 6620 7468   all plugs of th
-00047890: 6520 736d 6f6f 7468 5f31 206e 6f64 650a  e smooth_1 node.
-000478a0: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
-000478b0: 5f65 6469 746f 725f 7461 6273 2e67 6574  _editor_tabs.get
-000478c0: 5f63 7572 7265 6e74 5f65 6469 746f 7228  _current_editor(
-000478d0: 292e 636c 6963 6b5f 706f 7320 3d20 5150  ).click_pos = QP
-000478e0: 6f69 6e74 2834 3530 2c20 3530 3029 0a20  oint(450, 500). 
-000478f0: 2020 2020 2020 2070 6970 656c 696e 655f         pipeline_
-00047900: 6564 6974 6f72 5f74 6162 732e 6765 745f  editor_tabs.get_
-00047910: 6375 7272 656e 745f 6564 6974 6f72 2829  current_editor()
-00047920: 2e65 7870 6f72 745f 6e6f 6465 5f70 6c75  .export_node_plu
-00047930: 6773 280a 2020 2020 2020 2020 2020 2020  gs(.            
-00047940: 2273 6d6f 6f74 685f 3122 2c20 6f70 7469  "smooth_1", opti
-00047950: 6f6e 616c 3d54 7275 650a 2020 2020 2020  onal=True.      
-00047960: 2020 290a 0a20 2020 2020 2020 2023 2053    )..        # S
-00047970: 6176 6520 7468 6520 7069 7065 6c69 6e65  ave the pipeline
-00047980: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
-00047990: 696e 5f77 696e 646f 772e 7069 7065 6c69  in_window.pipeli
-000479a0: 6e65 5f6d 616e 6167 6572 2e73 6176 6550  ne_manager.saveP
-000479b0: 6970 656c 696e 6528 756e 6368 6563 6b3d  ipeline(uncheck=
-000479c0: 5472 7565 290a 0a20 2020 2020 2020 2023  True)..        #
-000479d0: 2047 6f20 6261 636b 2074 6f20 7468 6520   Go back to the 
-000479e0: 7365 636f 6e64 2074 6162 0a20 2020 2020  second tab.     
-000479f0: 2020 2070 6970 656c 696e 655f 6564 6974     pipeline_edit
-00047a00: 6f72 5f74 6162 732e 7365 745f 6375 7272  or_tabs.set_curr
-00047a10: 656e 745f 6564 6974 6f72 5f62 795f 7461  ent_editor_by_ta
-00047a20: 625f 6e61 6d65 2822 4e65 7720 5069 7065  b_name("New Pipe
-00047a30: 6c69 6e65 2031 2229 0a20 2020 2020 2020  line 1").       
-00047a40: 2070 6970 656c 696e 655f 6564 6974 6f72   pipeline_editor
-00047a50: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
-00047a60: 745f 6564 6974 6f72 2829 2e73 6365 6e65  t_editor().scene
-00047a70: 2e70 6f73 5b0a 2020 2020 2020 2020 2020  .pos[.          
-00047a80: 2020 2274 6573 745f 7069 7065 6c69 6e65    "test_pipeline
-00047a90: 5f31 5f31 220a 2020 2020 2020 2020 5d20  _1_1".        ] 
-00047aa0: 3d20 5150 6f69 6e74 2834 3530 2c20 3530  = QPoint(450, 50
-00047ab0: 3029 0a0a 2020 2020 2020 2020 2320 4368  0)..        # Ch
-00047ac0: 6563 6b20 6966 2074 6865 206e 6f64 6573  eck if the nodes
-00047ad0: 206f 6620 7468 6520 7069 7065 6c69 6e65   of the pipeline
-00047ae0: 2068 6176 6520 6265 656e 206d 6f64 6966   have been modif
-00047af0: 6965 640a 2020 2020 2020 2020 7069 7065  ied.        pipe
-00047b00: 6c69 6e65 5f65 6469 746f 725f 7461 6273  line_editor_tabs
-00047b10: 2e67 6574 5f63 7572 7265 6e74 5f65 6469  .get_current_edi
-00047b20: 746f 7228 292e 6368 6563 6b5f 6d6f 6469  tor().check_modi
-00047b30: 6669 6361 7469 6f6e 7328 290a 2020 2020  fications().    
-00047b40: 2020 2020 7069 7065 6c69 6e65 203d 2070      pipeline = p
-00047b50: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
-00047b60: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
-00047b70: 7069 7065 6c69 6e65 2829 0a20 2020 2020  pipeline().     
-00047b80: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-00047b90: 7565 280a 2020 2020 2020 2020 2020 2020  ue(.            
-00047ba0: 2266 7768 6d22 2069 6e20 7069 7065 6c69  "fwhm" in pipeli
-00047bb0: 6e65 2e6e 6f64 6573 5b22 7465 7374 5f70  ne.nodes["test_p
-00047bc0: 6970 656c 696e 655f 315f 3122 5d2e 706c  ipeline_1_1"].pl
-00047bd0: 7567 732e 6b65 7973 2829 0a20 2020 2020  ugs.keys().     
-00047be0: 2020 2029 0a0a 2020 2020 6465 6620 7465     )..    def te
-00047bf0: 7374 5f7a 5f67 6574 5f65 6469 746f 7228  st_z_get_editor(
-00047c00: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
-00047c10: 2222 4765 7473 2074 6865 2069 6e73 7461  ""Gets the insta
-00047c20: 6e63 6520 6f66 2061 6e20 6564 6974 6f72  nce of an editor
-00047c30: 2e0a 0a20 2020 2020 2020 202d 2054 6573  ...        - Tes
-00047c40: 7473 3a0a 2020 2020 2020 2020 2020 2020  ts:.            
-00047c50: 2d20 5069 7065 6c69 6e65 4564 6974 6f72  - PipelineEditor
-00047c60: 5461 6273 2e67 6574 5f65 6469 746f 725f  Tabs.get_editor_
-00047c70: 6279 5f69 6e64 6578 0a20 2020 2020 2020  by_index.       
-00047c80: 2020 2020 202d 2050 6970 656c 696e 6545       - PipelineE
-00047c90: 6469 746f 7254 6162 732e 6765 745f 6375  ditorTabs.get_cu
-00047ca0: 7272 656e 745f 6564 6974 6f72 0a20 2020  rrent_editor.   
-00047cb0: 2020 2020 2020 2020 202d 2050 6970 656c           - Pipel
-00047cc0: 696e 6545 6469 746f 7254 6162 732e 6765  ineEditorTabs.ge
-00047cd0: 745f 6564 6974 6f72 5f62 795f 7461 625f  t_editor_by_tab_
-00047ce0: 6e61 6d65 0a20 2020 2020 2020 2020 2020  name.           
-00047cf0: 202d 2050 6970 656c 696e 6545 6469 746f   - PipelineEdito
-00047d00: 7254 6162 732e 6765 745f 6564 6974 6f72  rTabs.get_editor
-00047d10: 5f62 795f 6669 6c65 6e61 6d65 0a20 2020  _by_filename.   
-00047d20: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
-00047d30: 2020 7069 7065 6c69 6e65 5f65 6469 746f    pipeline_edito
-00047d40: 725f 7461 6273 203d 2028 0a20 2020 2020  r_tabs = (.     
-00047d50: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
-00047d60: 5f77 696e 646f 772e 7069 7065 6c69 6e65  _window.pipeline
-00047d70: 5f6d 616e 6167 6572 2e70 6970 656c 696e  _manager.pipelin
-00047d80: 6545 6469 746f 7254 6162 730a 2020 2020  eEditorTabs.    
-00047d90: 2020 2020 290a 2020 2020 2020 2020 636f      ).        co
-00047da0: 6e66 6967 203d 2043 6f6e 6669 6728 636f  nfig = Config(co
-00047db0: 6e66 6967 5f70 6174 683d 7365 6c66 2e63  nfig_path=self.c
-00047dc0: 6f6e 6669 675f 7061 7468 290a 2020 2020  onfig_path).    
-00047dd0: 2020 2020 6669 6c65 6e61 6d65 203d 206f      filename = o
-00047de0: 732e 7061 7468 2e6a 6f69 6e28 0a20 2020  s.path.join(.   
-00047df0: 2020 2020 2020 2020 2063 6f6e 6669 672e           config.
-00047e00: 6765 745f 6d69 615f 7061 7468 2829 2c0a  get_mia_path(),.
-00047e10: 2020 2020 2020 2020 2020 2020 2270 726f              "pro
-00047e20: 6365 7373 6573 222c 0a20 2020 2020 2020  cesses",.       
-00047e30: 2020 2020 2022 5573 6572 5f70 726f 6365       "User_proce
-00047e40: 7373 6573 222c 0a20 2020 2020 2020 2020  sses",.         
-00047e50: 2020 2022 7465 7374 5f70 6970 656c 696e     "test_pipelin
-00047e60: 655f 312e 7079 222c 0a20 2020 2020 2020  e_1.py",.       
-00047e70: 2029 0a20 2020 2020 2020 2070 6970 656c   ).        pipel
-00047e80: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
-00047e90: 6c6f 6164 5f70 6970 656c 696e 6528 6669  load_pipeline(fi
-00047ea0: 6c65 6e61 6d65 290a 2020 2020 2020 2020  lename).        
-00047eb0: 6564 6974 6f72 3020 3d20 7069 7065 6c69  editor0 = pipeli
-00047ec0: 6e65 5f65 6469 746f 725f 7461 6273 2e67  ne_editor_tabs.g
-00047ed0: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
-00047ee0: 7228 290a 0a20 2020 2020 2020 2023 2063  r()..        # c
-00047ef0: 7265 6174 6520 6e65 7720 7461 6220 7769  reate new tab wi
-00047f00: 7468 206e 6577 2065 6469 746f 7220 616e  th new editor an
-00047f10: 6420 6d61 6b65 2069 7420 6375 7272 656e  d make it curren
-00047f20: 743a 0a20 2020 2020 2020 2070 6970 656c  t:.        pipel
-00047f30: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
-00047f40: 6e65 775f 7461 6228 290a 2020 2020 2020  new_tab().      
-00047f50: 2020 6564 6974 6f72 3120 3d20 7069 7065    editor1 = pipe
-00047f60: 6c69 6e65 5f65 6469 746f 725f 7461 6273  line_editor_tabs
-00047f70: 2e67 6574 5f63 7572 7265 6e74 5f65 6469  .get_current_edi
-00047f80: 746f 7228 290a 0a20 2020 2020 2020 2023  tor()..        #
-00047f90: 2050 6572 666f 726d 2076 6172 696f 7573   Perform various
-00047fa0: 2074 6573 7473 206f 6e20 7468 6520 7069   tests on the pi
-00047fb0: 7065 6c69 6e65 2065 6469 746f 7220 7461  peline editor ta
-00047fc0: 6273 0a20 2020 2020 2020 2073 656c 662e  bs.        self.
-00047fd0: 6173 7365 7274 4571 7561 6c28 7069 7065  assertEqual(pipe
-00047fe0: 6c69 6e65 5f65 6469 746f 725f 7461 6273  line_editor_tabs
-00047ff0: 2e67 6574 5f65 6469 746f 725f 6279 5f69  .get_editor_by_i
-00048000: 6e64 6578 2830 292c 2065 6469 746f 7230  ndex(0), editor0
-00048010: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-00048020: 7373 6572 7445 7175 616c 2870 6970 656c  ssertEqual(pipel
-00048030: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
-00048040: 6765 745f 6564 6974 6f72 5f62 795f 696e  get_editor_by_in
-00048050: 6465 7828 3129 2c20 6564 6974 6f72 3129  dex(1), editor1)
-00048060: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00048070: 7365 7274 4571 7561 6c28 7069 7065 6c69  sertEqual(pipeli
-00048080: 6e65 5f65 6469 746f 725f 7461 6273 2e67  ne_editor_tabs.g
-00048090: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
-000480a0: 7228 292c 2065 6469 746f 7231 290a 2020  r(), editor1).  
-000480b0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-000480c0: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
-000480d0: 2020 2020 6564 6974 6f72 302c 0a20 2020      editor0,.   
-000480e0: 2020 2020 2020 2020 2070 6970 656c 696e           pipelin
-000480f0: 655f 6564 6974 6f72 5f74 6162 732e 6765  e_editor_tabs.ge
-00048100: 745f 6564 6974 6f72 5f62 795f 7461 625f  t_editor_by_tab_
-00048110: 6e61 6d65 2822 7465 7374 5f70 6970 656c  name("test_pipel
-00048120: 696e 655f 312e 7079 2229 2c0a 2020 2020  ine_1.py"),.    
-00048130: 2020 2020 290a 2020 2020 2020 2020 7365      ).        se
-00048140: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
-00048150: 2020 2020 2020 2020 2020 2020 6564 6974              edit
-00048160: 6f72 312c 0a20 2020 2020 2020 2020 2020  or1,.           
-00048170: 2070 6970 656c 696e 655f 6564 6974 6f72   pipeline_editor
-00048180: 5f74 6162 732e 6765 745f 6564 6974 6f72  _tabs.get_editor
-00048190: 5f62 795f 7461 625f 6e61 6d65 2822 4e65  _by_tab_name("Ne
-000481a0: 7720 5069 7065 6c69 6e65 2031 2229 2c0a  w Pipeline 1"),.
-000481b0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-000481c0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-000481d0: 616c 280a 2020 2020 2020 2020 2020 2020  al(.            
-000481e0: 4e6f 6e65 2c20 7069 7065 6c69 6e65 5f65  None, pipeline_e
-000481f0: 6469 746f 725f 7461 6273 2e67 6574 5f65  ditor_tabs.get_e
-00048200: 6469 746f 725f 6279 5f74 6162 5f6e 616d  ditor_by_tab_nam
-00048210: 6528 2264 756d 6d79 2229 0a20 2020 2020  e("dummy").     
-00048220: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
-00048230: 662e 6173 7365 7274 4571 7561 6c28 0a20  f.assertEqual(. 
-00048240: 2020 2020 2020 2020 2020 2065 6469 746f             edito
-00048250: 7230 2c20 7069 7065 6c69 6e65 5f65 6469  r0, pipeline_edi
-00048260: 746f 725f 7461 6273 2e67 6574 5f65 6469  tor_tabs.get_edi
-00048270: 746f 725f 6279 5f66 696c 655f 6e61 6d65  tor_by_file_name
-00048280: 2866 696c 656e 616d 6529 0a20 2020 2020  (filename).     
-00048290: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
-000482a0: 662e 6173 7365 7274 4571 7561 6c28 0a20  f.assertEqual(. 
-000482b0: 2020 2020 2020 2020 2020 204e 6f6e 652c             None,
-000482c0: 2070 6970 656c 696e 655f 6564 6974 6f72   pipeline_editor
-000482d0: 5f74 6162 732e 6765 745f 6564 6974 6f72  _tabs.get_editor
-000482e0: 5f62 795f 6669 6c65 5f6e 616d 6528 2264  _by_file_name("d
-000482f0: 756d 6d79 2229 0a20 2020 2020 2020 2029  ummy").        )
-00048300: 0a0a 2020 2020 6465 6620 7465 7374 5f7a  ..    def test_z
-00048310: 5f67 6574 5f66 696c 656e 616d 6528 7365  _get_filename(se
-00048320: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
-00048330: 4765 7473 2074 6865 2072 656c 6174 6976  Gets the relativ
-00048340: 6520 7061 7468 2074 6f20 6120 7072 6576  e path to a prev
-00048350: 696f 7573 6c79 2073 6176 6564 2070 6970  iously saved pip
-00048360: 656c 696e 6520 6669 6c65 2e0a 0a20 2020  eline file...   
-00048370: 2020 2020 202d 2054 6573 7473 3a0a 2020       - Tests:.  
-00048380: 2020 2020 2020 2020 2020 2d20 5069 7065            - Pipe
-00048390: 6c69 6e65 4564 6974 6f72 5461 6273 2e67  lineEditorTabs.g
-000483a0: 6574 5f66 696c 656e 616d 655f 6279 5f69  et_filename_by_i
-000483b0: 6e64 6578 0a20 2020 2020 2020 2020 2020  ndex.           
-000483c0: 202d 2050 6970 656c 696e 6545 6469 746f   - PipelineEdito
-000483d0: 7254 6162 732e 6765 745f 6375 7272 656e  rTabs.get_curren
-000483e0: 745f 6669 6c65 6e61 6d65 0a20 2020 2020  t_filename.     
-000483f0: 2020 2022 2222 0a0a 2020 2020 2020 2020     """..        
-00048400: 7069 7065 6c69 6e65 5f65 6469 746f 725f  pipeline_editor_
-00048410: 7461 6273 203d 2028 0a20 2020 2020 2020  tabs = (.       
-00048420: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
-00048430: 696e 646f 772e 7069 7065 6c69 6e65 5f6d  indow.pipeline_m
-00048440: 616e 6167 6572 2e70 6970 656c 696e 6545  anager.pipelineE
-00048450: 6469 746f 7254 6162 730a 2020 2020 2020  ditorTabs.      
-00048460: 2020 290a 2020 2020 2020 2020 636f 6e66    ).        conf
-00048470: 6967 203d 2043 6f6e 6669 6728 636f 6e66  ig = Config(conf
-00048480: 6967 5f70 6174 683d 7365 6c66 2e63 6f6e  ig_path=self.con
-00048490: 6669 675f 7061 7468 290a 2020 2020 2020  fig_path).      
-000484a0: 2020 6669 6c65 6e61 6d65 203d 206f 732e    filename = os.
-000484b0: 7061 7468 2e6a 6f69 6e28 0a20 2020 2020  path.join(.     
-000484c0: 2020 2020 2020 2063 6f6e 6669 672e 6765         config.ge
-000484d0: 745f 6d69 615f 7061 7468 2829 2c0a 2020  t_mia_path(),.  
-000484e0: 2020 2020 2020 2020 2020 2270 726f 6365            "proce
-000484f0: 7373 6573 222c 0a20 2020 2020 2020 2020  sses",.         
-00048500: 2020 2022 5573 6572 5f70 726f 6365 7373     "User_process
-00048510: 6573 222c 0a20 2020 2020 2020 2020 2020  es",.           
-00048520: 2022 7465 7374 5f70 6970 656c 696e 655f   "test_pipeline_
-00048530: 312e 7079 222c 0a20 2020 2020 2020 2029  1.py",.        )
-00048540: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
-00048550: 655f 6564 6974 6f72 5f74 6162 732e 6c6f  e_editor_tabs.lo
-00048560: 6164 5f70 6970 656c 696e 6528 6669 6c65  ad_pipeline(file
-00048570: 6e61 6d65 290a 0a20 2020 2020 2020 2073  name)..        s
-00048580: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00048590: 0a20 2020 2020 2020 2020 2020 2066 696c  .            fil
-000485a0: 656e 616d 652c 0a20 2020 2020 2020 2020  ename,.         
-000485b0: 2020 206f 732e 7061 7468 2e61 6273 7061     os.path.abspa
-000485c0: 7468 2870 6970 656c 696e 655f 6564 6974  th(pipeline_edit
-000485d0: 6f72 5f74 6162 732e 6765 745f 6669 6c65  or_tabs.get_file
-000485e0: 6e61 6d65 5f62 795f 696e 6465 7828 3029  name_by_index(0)
-000485f0: 292c 0a20 2020 2020 2020 2029 0a20 2020  ),.        ).   
-00048600: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00048610: 4571 7561 6c28 4e6f 6e65 2c20 7069 7065  Equal(None, pipe
-00048620: 6c69 6e65 5f65 6469 746f 725f 7461 6273  line_editor_tabs
-00048630: 2e67 6574 5f66 696c 656e 616d 655f 6279  .get_filename_by
-00048640: 5f69 6e64 6578 2831 2929 0a20 2020 2020  _index(1)).     
-00048650: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00048660: 7561 6c28 0a20 2020 2020 2020 2020 2020  ual(.           
-00048670: 2066 696c 656e 616d 652c 0a20 2020 2020   filename,.     
-00048680: 2020 2020 2020 206f 732e 7061 7468 2e61         os.path.a
-00048690: 6273 7061 7468 2870 6970 656c 696e 655f  bspath(pipeline_
-000486a0: 6564 6974 6f72 5f74 6162 732e 6765 745f  editor_tabs.get_
-000486b0: 6375 7272 656e 745f 6669 6c65 6e61 6d65  current_filename
-000486c0: 2829 292c 0a20 2020 2020 2020 2029 0a0a  ()),.        )..
-000486d0: 2020 2020 6465 6620 7465 7374 5f7a 5f67      def test_z_g
-000486e0: 6574 5f69 6e64 6578 2873 656c 6629 3a0a  et_index(self):.
-000486f0: 2020 2020 2020 2020 2222 2247 6574 7320          """Gets 
-00048700: 7468 6520 696e 6465 7820 6f66 2061 6e20  the index of an 
-00048710: 6564 6974 6f72 2e0a 0a20 2020 2020 2020  editor...       
-00048720: 202d 2054 6573 7473 3a0a 2020 2020 2020   - Tests:.      
-00048730: 2020 2020 2020 2d20 5069 7065 6c69 6e65        - Pipeline
-00048740: 4564 6974 6f72 5461 6273 2e67 6574 5f69  EditorTabs.get_i
-00048750: 6e64 6578 5f62 795f 7461 625f 6e61 6d65  ndex_by_tab_name
-00048760: 0a20 2020 2020 2020 2020 2020 202d 2050  .            - P
-00048770: 6970 656c 696e 6545 6469 746f 7254 6162  ipelineEditorTab
-00048780: 732e 6765 745f 696e 6465 785f 6279 5f66  s.get_index_by_f
-00048790: 696c 656e 616d 650a 2020 2020 2020 2020  ilename.        
-000487a0: 2020 2020 2d20 5069 7065 6c69 6e65 4564      - PipelineEd
-000487b0: 6974 6f72 5461 6273 2e67 6574 5f69 6e64  itorTabs.get_ind
-000487c0: 6578 5f62 795f 6564 6974 6f72 0a20 2020  ex_by_editor.   
-000487d0: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
-000487e0: 2020 7069 7065 6c69 6e65 5f65 6469 746f    pipeline_edito
-000487f0: 725f 7461 6273 203d 2028 0a20 2020 2020  r_tabs = (.     
-00048800: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
-00048810: 5f77 696e 646f 772e 7069 7065 6c69 6e65  _window.pipeline
-00048820: 5f6d 616e 6167 6572 2e70 6970 656c 696e  _manager.pipelin
-00048830: 6545 6469 746f 7254 6162 730a 2020 2020  eEditorTabs.    
-00048840: 2020 2020 290a 2020 2020 2020 2020 636f      ).        co
-00048850: 6e66 6967 203d 2043 6f6e 6669 6728 636f  nfig = Config(co
-00048860: 6e66 6967 5f70 6174 683d 7365 6c66 2e63  nfig_path=self.c
-00048870: 6f6e 6669 675f 7061 7468 290a 2020 2020  onfig_path).    
-00048880: 2020 2020 6669 6c65 6e61 6d65 203d 206f      filename = o
-00048890: 732e 7061 7468 2e6a 6f69 6e28 0a20 2020  s.path.join(.   
-000488a0: 2020 2020 2020 2020 2063 6f6e 6669 672e           config.
-000488b0: 6765 745f 6d69 615f 7061 7468 2829 2c0a  get_mia_path(),.
-000488c0: 2020 2020 2020 2020 2020 2020 2270 726f              "pro
-000488d0: 6365 7373 6573 222c 0a20 2020 2020 2020  cesses",.       
-000488e0: 2020 2020 2022 5573 6572 5f70 726f 6365       "User_proce
-000488f0: 7373 6573 222c 0a20 2020 2020 2020 2020  sses",.         
-00048900: 2020 2022 7465 7374 5f70 6970 656c 696e     "test_pipelin
-00048910: 655f 312e 7079 222c 0a20 2020 2020 2020  e_1.py",.       
-00048920: 2029 0a20 2020 2020 2020 2070 6970 656c   ).        pipel
-00048930: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
-00048940: 6c6f 6164 5f70 6970 656c 696e 6528 6669  load_pipeline(fi
-00048950: 6c65 6e61 6d65 290a 2020 2020 2020 2020  lename).        
-00048960: 6564 6974 6f72 3020 3d20 7069 7065 6c69  editor0 = pipeli
-00048970: 6e65 5f65 6469 746f 725f 7461 6273 2e67  ne_editor_tabs.g
-00048980: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
-00048990: 7228 290a 0a20 2020 2020 2020 2023 2043  r()..        # C
-000489a0: 7265 6174 6520 6e65 7720 7461 6220 7769  reate new tab wi
-000489b0: 7468 206e 6577 2065 6469 746f 7220 616e  th new editor an
-000489c0: 6420 6d61 6b65 2069 7420 6375 7272 656e  d make it curren
-000489d0: 740a 2020 2020 2020 2020 7069 7065 6c69  t.        pipeli
-000489e0: 6e65 5f65 6469 746f 725f 7461 6273 2e6e  ne_editor_tabs.n
-000489f0: 6577 5f74 6162 2829 0a20 2020 2020 2020  ew_tab().       
-00048a00: 2065 6469 746f 7231 203d 2070 6970 656c   editor1 = pipel
-00048a10: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
-00048a20: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
-00048a30: 6f72 2829 0a0a 2020 2020 2020 2020 7365  or()..        se
-00048a40: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
-00048a50: 2020 2020 2020 2020 2020 2020 302c 2070              0, p
-00048a60: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
-00048a70: 6162 732e 6765 745f 696e 6465 785f 6279  abs.get_index_by
-00048a80: 5f74 6162 5f6e 616d 6528 2274 6573 745f  _tab_name("test_
-00048a90: 7069 7065 6c69 6e65 5f31 2e70 7922 290a  pipeline_1.py").
-00048aa0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00048ab0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00048ac0: 616c 280a 2020 2020 2020 2020 2020 2020  al(.            
-00048ad0: 312c 2070 6970 656c 696e 655f 6564 6974  1, pipeline_edit
-00048ae0: 6f72 5f74 6162 732e 6765 745f 696e 6465  or_tabs.get_inde
-00048af0: 785f 6279 5f74 6162 5f6e 616d 6528 224e  x_by_tab_name("N
-00048b00: 6577 2050 6970 656c 696e 6520 3122 290a  ew Pipeline 1").
-00048b10: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00048b20: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00048b30: 616c 280a 2020 2020 2020 2020 2020 2020  al(.            
-00048b40: 4e6f 6e65 2c20 7069 7065 6c69 6e65 5f65  None, pipeline_e
-00048b50: 6469 746f 725f 7461 6273 2e67 6574 5f69  ditor_tabs.get_i
-00048b60: 6e64 6578 5f62 795f 7461 625f 6e61 6d65  ndex_by_tab_name
-00048b70: 2822 6475 6d6d 7922 290a 2020 2020 2020  ("dummy").      
-00048b80: 2020 290a 0a20 2020 2020 2020 2073 656c    )..        sel
-00048b90: 662e 6173 7365 7274 4571 7561 6c28 0a20  f.assertEqual(. 
-00048ba0: 2020 2020 2020 2020 2020 2030 2c20 7069             0, pi
-00048bb0: 7065 6c69 6e65 5f65 6469 746f 725f 7461  peline_editor_ta
-00048bc0: 6273 2e67 6574 5f69 6e64 6578 5f62 795f  bs.get_index_by_
-00048bd0: 6669 6c65 6e61 6d65 2866 696c 656e 616d  filename(filenam
-00048be0: 6529 0a20 2020 2020 2020 2029 0a20 2020  e).        ).   
-00048bf0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00048c00: 4571 7561 6c28 0a20 2020 2020 2020 2020  Equal(.         
-00048c10: 2020 204e 6f6e 652c 2070 6970 656c 696e     None, pipelin
-00048c20: 655f 6564 6974 6f72 5f74 6162 732e 6765  e_editor_tabs.ge
-00048c30: 745f 696e 6465 785f 6279 5f66 696c 656e  t_index_by_filen
-00048c40: 616d 6528 2264 756d 6d79 2229 0a20 2020  ame("dummy").   
-00048c50: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-00048c60: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00048c70: 2830 2c20 7069 7065 6c69 6e65 5f65 6469  (0, pipeline_edi
-00048c80: 746f 725f 7461 6273 2e67 6574 5f69 6e64  tor_tabs.get_ind
-00048c90: 6578 5f62 795f 6564 6974 6f72 2865 6469  ex_by_editor(edi
-00048ca0: 746f 7230 2929 0a20 2020 2020 2020 2073  tor0)).        s
-00048cb0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00048cc0: 312c 2070 6970 656c 696e 655f 6564 6974  1, pipeline_edit
-00048cd0: 6f72 5f74 6162 732e 6765 745f 696e 6465  or_tabs.get_inde
-00048ce0: 785f 6279 5f65 6469 746f 7228 6564 6974  x_by_editor(edit
-00048cf0: 6f72 3129 290a 2020 2020 2020 2020 7365  or1)).        se
-00048d00: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
-00048d10: 2020 2020 2020 2020 2020 2020 4e6f 6e65              None
-00048d20: 2c20 7069 7065 6c69 6e65 5f65 6469 746f  , pipeline_edito
-00048d30: 725f 7461 6273 2e67 6574 5f69 6e64 6578  r_tabs.get_index
-00048d40: 5f62 795f 6564 6974 6f72 2822 6475 6d6d  _by_editor("dumm
-00048d50: 7922 290a 2020 2020 2020 2020 290a 0a20  y").        ).. 
-00048d60: 2020 2064 6566 2074 6573 745f 7a5f 6765     def test_z_ge
-00048d70: 745f 7461 625f 6e61 6d65 2873 656c 6629  t_tab_name(self)
-00048d80: 3a0a 2020 2020 2020 2020 2222 2247 6574  :.        """Get
-00048d90: 7320 7468 6520 7461 6220 6e61 6d65 206f  s the tab name o
-00048da0: 6620 7468 6520 6564 6974 6f72 2e0a 0a20  f the editor... 
-00048db0: 2020 2020 2020 202d 2054 6573 7473 3a0a         - Tests:.
-00048dc0: 2020 2020 2020 2020 2020 2020 2d20 5069              - Pi
-00048dd0: 7065 6c69 6e65 4564 6974 6f72 5461 6273  pelineEditorTabs
-00048de0: 2e67 6574 5f74 6162 5f6e 616d 655f 6279  .get_tab_name_by
-00048df0: 5f69 6e64 6578 0a20 2020 2020 2020 2020  _index.         
-00048e00: 2020 202d 2050 6970 656c 696e 6545 6469     - PipelineEdi
-00048e10: 746f 7254 6162 732e 6765 745f 6375 7272  torTabs.get_curr
-00048e20: 656e 745f 7461 625f 6e61 6d65 0a20 2020  ent_tab_name.   
-00048e30: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
-00048e40: 2020 7069 7065 6c69 6e65 5f65 6469 746f    pipeline_edito
-00048e50: 725f 7461 6273 203d 2028 0a20 2020 2020  r_tabs = (.     
-00048e60: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
-00048e70: 5f77 696e 646f 772e 7069 7065 6c69 6e65  _window.pipeline
-00048e80: 5f6d 616e 6167 6572 2e70 6970 656c 696e  _manager.pipelin
-00048e90: 6545 6469 746f 7254 6162 730a 2020 2020  eEditorTabs.    
-00048ea0: 2020 2020 290a 0a20 2020 2020 2020 2073      )..        s
-00048eb0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00048ec0: 0a20 2020 2020 2020 2020 2020 2022 4e65  .            "Ne
-00048ed0: 7720 5069 7065 6c69 6e65 222c 2070 6970  w Pipeline", pip
-00048ee0: 656c 696e 655f 6564 6974 6f72 5f74 6162  eline_editor_tab
-00048ef0: 732e 6765 745f 7461 625f 6e61 6d65 5f62  s.get_tab_name_b
-00048f00: 795f 696e 6465 7828 3029 0a20 2020 2020  y_index(0).     
-00048f10: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
-00048f20: 662e 6173 7365 7274 4571 7561 6c28 4e6f  f.assertEqual(No
-00048f30: 6e65 2c20 7069 7065 6c69 6e65 5f65 6469  ne, pipeline_edi
-00048f40: 746f 725f 7461 6273 2e67 6574 5f74 6162  tor_tabs.get_tab
-00048f50: 5f6e 616d 655f 6279 5f69 6e64 6578 2831  _name_by_index(1
-00048f60: 2929 0a20 2020 2020 2020 2073 656c 662e  )).        self.
-00048f70: 6173 7365 7274 4571 7561 6c28 0a20 2020  assertEqual(.   
-00048f80: 2020 2020 2020 2020 2022 4e65 7720 5069           "New Pi
-00048f90: 7065 6c69 6e65 222c 2070 6970 656c 696e  peline", pipelin
-00048fa0: 655f 6564 6974 6f72 5f74 6162 732e 6765  e_editor_tabs.ge
-00048fb0: 745f 6375 7272 656e 745f 7461 625f 6e61  t_current_tab_na
-00048fc0: 6d65 2829 0a20 2020 2020 2020 2029 0a0a  me().        )..
-00048fd0: 2020 2020 6465 6620 7465 7374 5f7a 5f6c      def test_z_l
-00048fe0: 6f61 645f 7069 7065 6c69 6e65 2873 656c  oad_pipeline(sel
-00048ff0: 6629 3a0a 2020 2020 2020 2020 2222 224c  f):.        """L
-00049000: 6f61 6473 2061 2070 6970 656c 696e 652e  oads a pipeline.
-00049010: 2222 220a 0a20 2020 2020 2020 2070 6970  """..        pip
-00049020: 656c 696e 655f 6564 6974 6f72 5f74 6162  eline_editor_tab
-00049030: 7320 3d20 280a 2020 2020 2020 2020 2020  s = (.          
-00049040: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
-00049050: 6f77 2e70 6970 656c 696e 655f 6d61 6e61  ow.pipeline_mana
-00049060: 6765 722e 7069 7065 6c69 6e65 4564 6974  ger.pipelineEdit
-00049070: 6f72 5461 6273 0a20 2020 2020 2020 2029  orTabs.        )
-00049080: 0a20 2020 2020 2020 2063 6f6e 6669 6720  .        config 
-00049090: 3d20 436f 6e66 6967 2863 6f6e 6669 675f  = Config(config_
-000490a0: 7061 7468 3d73 656c 662e 636f 6e66 6967  path=self.config
-000490b0: 5f70 6174 6829 0a20 2020 2020 2020 2066  _path).        f
-000490c0: 696c 656e 616d 6520 3d20 6f73 2e70 6174  ilename = os.pat
-000490d0: 682e 6a6f 696e 280a 2020 2020 2020 2020  h.join(.        
-000490e0: 2020 2020 636f 6e66 6967 2e67 6574 5f6d      config.get_m
-000490f0: 6961 5f70 6174 6828 292c 0a20 2020 2020  ia_path(),.     
-00049100: 2020 2020 2020 2022 7072 6f63 6573 7365         "processe
-00049110: 7322 2c0a 2020 2020 2020 2020 2020 2020  s",.            
-00049120: 2255 7365 725f 7072 6f63 6573 7365 7322  "User_processes"
-00049130: 2c0a 2020 2020 2020 2020 2020 2020 2274  ,.            "t
-00049140: 6573 745f 7069 7065 6c69 6e65 5f31 2e70  est_pipeline_1.p
-00049150: 7922 2c0a 2020 2020 2020 2020 290a 2020  y",.        ).  
-00049160: 2020 2020 2020 7069 7065 6c69 6e65 5f65        pipeline_e
-00049170: 6469 746f 725f 7461 6273 2e6c 6f61 645f  ditor_tabs.load_
-00049180: 7069 7065 6c69 6e65 2866 696c 656e 616d  pipeline(filenam
-00049190: 6529 0a0a 2020 2020 2020 2020 7069 7065  e)..        pipe
-000491a0: 6c69 6e65 203d 2070 6970 656c 696e 655f  line = pipeline_
-000491b0: 6564 6974 6f72 5f74 6162 732e 6765 745f  editor_tabs.get_
-000491c0: 6375 7272 656e 745f 7069 7065 6c69 6e65  current_pipeline
-000491d0: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
-000491e0: 6173 7365 7274 5472 7565 2822 736d 6f6f  assertTrue("smoo
-000491f0: 7468 5f31 2220 696e 2070 6970 656c 696e  th_1" in pipelin
-00049200: 652e 6e6f 6465 732e 6b65 7973 2829 290a  e.nodes.keys()).
-00049210: 0a20 2020 2064 6566 2074 6573 745f 7a5f  .    def test_z_
-00049220: 6f70 656e 5f73 7562 5f70 6970 656c 696e  open_sub_pipelin
-00049230: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
-00049240: 2022 2222 4f70 656e 7320 6120 7375 625f   """Opens a sub_
-00049250: 7069 7065 6c69 6e65 2e22 2222 0a0a 2020  pipeline."""..  
-00049260: 2020 2020 2020 7069 7065 6c69 6e65 5f65        pipeline_e
-00049270: 6469 746f 725f 7461 6273 203d 2028 0a20  ditor_tabs = (. 
-00049280: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00049290: 6d61 696e 5f77 696e 646f 772e 7069 7065  main_window.pipe
-000492a0: 6c69 6e65 5f6d 616e 6167 6572 2e70 6970  line_manager.pip
-000492b0: 656c 696e 6545 6469 746f 7254 6162 730a  elineEditorTabs.
-000492c0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-000492d0: 2020 636f 6e66 6967 203d 2043 6f6e 6669    config = Confi
-000492e0: 6728 636f 6e66 6967 5f70 6174 683d 7365  g(config_path=se
-000492f0: 6c66 2e63 6f6e 6669 675f 7061 7468 290a  lf.config_path).
-00049300: 0a20 2020 2020 2020 2023 2041 6464 696e  .        # Addin
-00049310: 6720 7468 6520 2263 6f6e 6669 672e 6765  g the "config.ge
-00049320: 745f 6d69 615f 7061 7468 2829 2f70 726f  t_mia_path()/pro
-00049330: 6365 7373 6573 2220 7061 7468 2074 6f20  cesses" path to 
-00049340: 7468 6520 7379 7374 656d 2070 6174 680a  the system path.
-00049350: 2020 2020 2020 2020 7379 732e 7061 7468          sys.path
-00049360: 2e61 7070 656e 6428 6f73 2e70 6174 682e  .append(os.path.
-00049370: 6a6f 696e 2863 6f6e 6669 672e 6765 745f  join(config.get_
-00049380: 6d69 615f 7061 7468 2829 2c20 2270 726f  mia_path(), "pro
-00049390: 6365 7373 6573 2229 290a 0a20 2020 2020  cesses"))..     
-000493a0: 2020 2023 2049 6d70 6f72 7469 6e67 2074     # Importing t
-000493b0: 6865 2027 5573 6572 5f70 726f 6365 7373  he 'User_process
-000493c0: 6573 2720 7061 636b 6167 650a 2020 2020  es' package.    
-000493d0: 2020 2020 7061 636b 6167 655f 6e61 6d65      package_name
-000493e0: 203d 2022 5573 6572 5f70 726f 6365 7373   = "User_process
-000493f0: 6573 220a 2020 2020 2020 2020 5f5f 696d  es".        __im
-00049400: 706f 7274 5f5f 2870 6163 6b61 6765 5f6e  port__(package_n
-00049410: 616d 6529 0a20 2020 2020 2020 2070 6b67  ame).        pkg
-00049420: 203d 2073 7973 2e6d 6f64 756c 6573 5b70   = sys.modules[p
-00049430: 6163 6b61 6765 5f6e 616d 655d 0a0a 2020  ackage_name]..  
-00049440: 2020 2020 2020 666f 7220 6e61 6d65 2c20        for name, 
-00049450: 636c 7320 696e 2073 6f72 7465 6428 6c69  cls in sorted(li
-00049460: 7374 2870 6b67 2e5f 5f64 6963 745f 5f2e  st(pkg.__dict__.
-00049470: 6974 656d 7328 2929 293a 0a0a 2020 2020  items())):..    
-00049480: 2020 2020 2020 2020 6966 206e 616d 6520          if name 
-00049490: 3d3d 2022 5465 7374 5f70 6970 656c 696e  == "Test_pipelin
-000494a0: 655f 3122 3a0a 2020 2020 2020 2020 2020  e_1":.          
-000494b0: 2020 2020 2020 7072 6f63 6573 735f 636c        process_cl
-000494c0: 6173 7320 3d20 636c 730a 0a20 2020 2020  ass = cls..     
-000494d0: 2020 2023 2041 6464 696e 6720 7468 6520     # Adding the 
-000494e0: 2274 6573 745f 7069 7065 6c69 6e65 5f31  "test_pipeline_1
-000494f0: 2220 6173 2061 2070 726f 6365 7373 0a20  " as a process. 
-00049500: 2020 2020 2020 2070 6970 656c 696e 655f         pipeline_
-00049510: 6564 6974 6f72 5f74 6162 732e 6765 745f  editor_tabs.get_
-00049520: 6375 7272 656e 745f 6564 6974 6f72 2829  current_editor()
-00049530: 2e63 6c69 636b 5f70 6f73 203d 2051 506f  .click_pos = QPo
-00049540: 696e 7428 3435 302c 2035 3030 290a 2020  int(450, 500).  
-00049550: 2020 2020 2020 7069 7065 6c69 6e65 5f65        pipeline_e
-00049560: 6469 746f 725f 7461 6273 2e67 6574 5f63  ditor_tabs.get_c
-00049570: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
-00049580: 6164 645f 6e61 6d65 645f 7072 6f63 6573  add_named_proces
-00049590: 7328 0a20 2020 2020 2020 2020 2020 2070  s(.            p
-000495a0: 726f 6365 7373 5f63 6c61 7373 0a20 2020  rocess_class.   
-000495b0: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-000495c0: 2320 4f70 656e 696e 6720 7468 6520 7375  # Opening the su
-000495d0: 622d 7069 7065 6c69 6e65 2069 6e20 6120  b-pipeline in a 
-000495e0: 6e65 7720 6564 6974 6f72 0a20 2020 2020  new editor.     
-000495f0: 2020 2070 6970 656c 696e 6520 3d20 7069     pipeline = pi
-00049600: 7065 6c69 6e65 5f65 6469 746f 725f 7461  peline_editor_ta
-00049610: 6273 2e67 6574 5f63 7572 7265 6e74 5f70  bs.get_current_p
-00049620: 6970 656c 696e 6528 290a 2020 2020 2020  ipeline().      
-00049630: 2020 7072 6f63 6573 735f 696e 7374 616e    process_instan
-00049640: 6365 203d 2070 6970 656c 696e 652e 6e6f  ce = pipeline.no
-00049650: 6465 735b 2274 6573 745f 7069 7065 6c69  des["test_pipeli
-00049660: 6e65 5f31 5f31 225d 2e70 726f 6365 7373  ne_1_1"].process
-00049670: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
-00049680: 655f 6564 6974 6f72 5f74 6162 732e 6f70  e_editor_tabs.op
-00049690: 656e 5f73 7562 5f70 6970 656c 696e 6528  en_sub_pipeline(
-000496a0: 7072 6f63 6573 735f 696e 7374 616e 6365  process_instance
-000496b0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-000496c0: 7373 6572 7454 7275 6528 332c 2070 6970  ssertTrue(3, pip
-000496d0: 656c 696e 655f 6564 6974 6f72 5f74 6162  eline_editor_tab
-000496e0: 732e 636f 756e 7428 2929 0a20 2020 2020  s.count()).     
-000496f0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00049700: 7561 6c28 0a20 2020 2020 2020 2020 2020  ual(.           
-00049710: 2022 7465 7374 5f70 6970 656c 696e 655f   "test_pipeline_
-00049720: 312e 7079 222c 0a20 2020 2020 2020 2020  1.py",.         
-00049730: 2020 206f 732e 7061 7468 2e62 6173 656e     os.path.basen
-00049740: 616d 6528 7069 7065 6c69 6e65 5f65 6469  ame(pipeline_edi
-00049750: 746f 725f 7461 6273 2e67 6574 5f66 696c  tor_tabs.get_fil
-00049760: 656e 616d 655f 6279 5f69 6e64 6578 2831  ename_by_index(1
-00049770: 2929 2c0a 2020 2020 2020 2020 290a 0a20  )),.        ).. 
-00049780: 2020 2064 6566 2074 6573 745f 7a5f 7365     def test_z_se
-00049790: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
-000497a0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-000497b0: 2222 2253 6574 7320 7468 6520 6375 7272  """Sets the curr
-000497c0: 656e 7420 6564 6974 6f72 2e0a 0a20 2020  ent editor...   
-000497d0: 2020 2020 202d 2054 6573 7473 3a0a 2020       - Tests:.  
-000497e0: 2020 2020 2020 2020 2020 2d20 5069 7065            - Pipe
-000497f0: 6c69 6e65 4564 6974 6f72 5461 6273 2e73  lineEditorTabs.s
-00049800: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
-00049810: 725f 6279 5f74 6162 5f6e 616d 650a 2020  r_by_tab_name.  
-00049820: 2020 2020 2020 2020 2020 2d20 5069 7065            - Pipe
-00049830: 6c69 6e65 4564 6974 6f72 5461 6273 2e73  lineEditorTabs.s
-00049840: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
-00049850: 725f 6279 5f66 696c 655f 6e61 6d65 0a20  r_by_file_name. 
-00049860: 2020 2020 2020 2020 2020 202d 2050 6970             - Pip
-00049870: 656c 696e 6545 6469 746f 7254 6162 732e  elineEditorTabs.
-00049880: 7365 745f 6375 7272 656e 745f 6564 6974  set_current_edit
-00049890: 6f72 5f62 795f 6564 6974 6f72 0a20 2020  or_by_editor.   
-000498a0: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
-000498b0: 2020 7069 7065 6c69 6e65 5f65 6469 746f    pipeline_edito
-000498c0: 725f 7461 6273 203d 2028 0a20 2020 2020  r_tabs = (.     
-000498d0: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
-000498e0: 5f77 696e 646f 772e 7069 7065 6c69 6e65  _window.pipeline
-000498f0: 5f6d 616e 6167 6572 2e70 6970 656c 696e  _manager.pipelin
-00049900: 6545 6469 746f 7254 6162 730a 2020 2020  eEditorTabs.    
-00049910: 2020 2020 290a 2020 2020 2020 2020 636f      ).        co
-00049920: 6e66 6967 203d 2043 6f6e 6669 6728 636f  nfig = Config(co
-00049930: 6e66 6967 5f70 6174 683d 7365 6c66 2e63  nfig_path=self.c
-00049940: 6f6e 6669 675f 7061 7468 290a 2020 2020  onfig_path).    
-00049950: 2020 2020 6669 6c65 6e61 6d65 203d 206f      filename = o
-00049960: 732e 7061 7468 2e6a 6f69 6e28 0a20 2020  s.path.join(.   
-00049970: 2020 2020 2020 2020 2063 6f6e 6669 672e           config.
-00049980: 6765 745f 6d69 615f 7061 7468 2829 2c0a  get_mia_path(),.
-00049990: 2020 2020 2020 2020 2020 2020 2270 726f              "pro
-000499a0: 6365 7373 6573 222c 0a20 2020 2020 2020  cesses",.       
-000499b0: 2020 2020 2022 5573 6572 5f70 726f 6365       "User_proce
-000499c0: 7373 6573 222c 0a20 2020 2020 2020 2020  sses",.         
-000499d0: 2020 2022 7465 7374 5f70 6970 656c 696e     "test_pipelin
-000499e0: 655f 312e 7079 222c 0a20 2020 2020 2020  e_1.py",.       
-000499f0: 2029 0a20 2020 2020 2020 2070 6970 656c   ).        pipel
-00049a00: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
-00049a10: 6c6f 6164 5f70 6970 656c 696e 6528 6669  load_pipeline(fi
-00049a20: 6c65 6e61 6d65 290a 2020 2020 2020 2020  lename).        
-00049a30: 6564 6974 6f72 3020 3d20 7069 7065 6c69  editor0 = pipeli
-00049a40: 6e65 5f65 6469 746f 725f 7461 6273 2e67  ne_editor_tabs.g
-00049a50: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
-00049a60: 7228 290a 0a20 2020 2020 2020 2023 2063  r()..        # c
-00049a70: 7265 6174 6520 6e65 7720 7461 6220 7769  reate new tab wi
-00049a80: 7468 206e 6577 2065 6469 746f 7220 616e  th new editor an
-00049a90: 6420 6d61 6b65 2069 7420 6375 7272 656e  d make it curren
-00049aa0: 743a 0a20 2020 2020 2020 2070 6970 656c  t:.        pipel
-00049ab0: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
-00049ac0: 6e65 775f 7461 6228 290a 2020 2020 2020  new_tab().      
-00049ad0: 2020 6564 6974 6f72 3120 3d20 7069 7065    editor1 = pipe
-00049ae0: 6c69 6e65 5f65 6469 746f 725f 7461 6273  line_editor_tabs
-00049af0: 2e67 6574 5f63 7572 7265 6e74 5f65 6469  .get_current_edi
-00049b00: 746f 7228 290a 0a20 2020 2020 2020 2070  tor()..        p
-00049b10: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
-00049b20: 6162 732e 7365 745f 6375 7272 656e 745f  abs.set_current_
-00049b30: 6564 6974 6f72 5f62 795f 7461 625f 6e61  editor_by_tab_na
-00049b40: 6d65 280a 2020 2020 2020 2020 2020 2020  me(.            
-00049b50: 2274 6573 745f 7069 7065 6c69 6e65 5f31  "test_pipeline_1
-00049b60: 2e70 7922 0a20 2020 2020 2020 2029 0a20  .py".        ). 
-00049b70: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00049b80: 7274 4571 7561 6c28 7069 7065 6c69 6e65  rtEqual(pipeline
-00049b90: 5f65 6469 746f 725f 7461 6273 2e63 7572  _editor_tabs.cur
-00049ba0: 7265 6e74 496e 6465 7828 292c 2030 290a  rentIndex(), 0).
-00049bb0: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
-00049bc0: 5f65 6469 746f 725f 7461 6273 2e73 6574  _editor_tabs.set
-00049bd0: 5f63 7572 7265 6e74 5f65 6469 746f 725f  _current_editor_
-00049be0: 6279 5f74 6162 5f6e 616d 6528 224e 6577  by_tab_name("New
-00049bf0: 2050 6970 656c 696e 6520 3122 290a 2020   Pipeline 1").  
-00049c00: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00049c10: 7445 7175 616c 2870 6970 656c 696e 655f  tEqual(pipeline_
-00049c20: 6564 6974 6f72 5f74 6162 732e 6375 7272  editor_tabs.curr
-00049c30: 656e 7449 6e64 6578 2829 2c20 3129 0a0a  entIndex(), 1)..
-00049c40: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
-00049c50: 5f65 6469 746f 725f 7461 6273 2e73 6574  _editor_tabs.set
-00049c60: 5f63 7572 7265 6e74 5f65 6469 746f 725f  _current_editor_
-00049c70: 6279 5f66 696c 655f 6e61 6d65 2866 696c  by_file_name(fil
-00049c80: 656e 616d 6529 0a20 2020 2020 2020 2073  ename).        s
-00049c90: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00049ca0: 7069 7065 6c69 6e65 5f65 6469 746f 725f  pipeline_editor_
-00049cb0: 7461 6273 2e63 7572 7265 6e74 496e 6465  tabs.currentInde
-00049cc0: 7828 292c 2030 290a 0a20 2020 2020 2020  x(), 0)..       
-00049cd0: 2070 6970 656c 696e 655f 6564 6974 6f72   pipeline_editor
-00049ce0: 5f74 6162 732e 7365 745f 6375 7272 656e  _tabs.set_curren
-00049cf0: 745f 6564 6974 6f72 5f62 795f 6564 6974  t_editor_by_edit
-00049d00: 6f72 2865 6469 746f 7231 290a 2020 2020  or(editor1).    
-00049d10: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-00049d20: 7175 616c 2870 6970 656c 696e 655f 6564  qual(pipeline_ed
-00049d30: 6974 6f72 5f74 6162 732e 6375 7272 656e  itor_tabs.curren
-00049d40: 7449 6e64 6578 2829 2c20 3129 0a20 2020  tIndex(), 1).   
-00049d50: 2020 2020 2070 6970 656c 696e 655f 6564       pipeline_ed
-00049d60: 6974 6f72 5f74 6162 732e 7365 745f 6375  itor_tabs.set_cu
-00049d70: 7272 656e 745f 6564 6974 6f72 5f62 795f  rrent_editor_by_
-00049d80: 6564 6974 6f72 2865 6469 746f 7230 290a  editor(editor0).
-00049d90: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00049da0: 6572 7445 7175 616c 2870 6970 656c 696e  ertEqual(pipelin
-00049db0: 655f 6564 6974 6f72 5f74 6162 732e 6375  e_editor_tabs.cu
-00049dc0: 7272 656e 7449 6e64 6578 2829 2c20 3029  rrentIndex(), 0)
-00049dd0: 0a0a 2020 2020 6465 6620 7465 7374 5f7a  ..    def test_z
-00049de0: 7a5f 6465 6c5f 7061 636b 2873 656c 6629  z_del_pack(self)
-00049df0: 3a0a 2020 2020 2020 2020 2222 2252 656d  :.        """Rem
-00049e00: 6f76 6520 7468 6520 6272 6963 6b73 2063  ove the bricks c
-00049e10: 7265 6174 6564 2064 7572 696e 6720 7468  reated during th
-00049e20: 6520 756e 6974 2074 6573 7473 2e0a 0a20  e unit tests... 
-00049e30: 2020 2020 2020 2054 616b 6520 6164 7661         Take adva
-00049e40: 6e74 6167 6520 6f66 2074 6869 7320 746f  ntage of this to
-00049e50: 2063 6f76 6572 2074 6865 2070 6172 7420   cover the part 
-00049e60: 6f66 2074 6865 2063 6f64 6520 7573 6564  of the code used
-00049e70: 2074 6f20 7265 6d6f 7665 2074 6865 0a20   to remove the. 
-00049e80: 2020 2020 2020 2070 6163 6b61 6765 732e         packages.
-00049e90: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
-00049ea0: 2020 2020 2020 706b 6720 3d20 5061 636b        pkg = Pack
-00049eb0: 6167 654c 6962 7261 7279 4469 616c 6f67  ageLibraryDialog
-00049ec0: 2873 656c 662e 6d61 696e 5f77 696e 646f  (self.main_windo
-00049ed0: 7729 0a0a 2020 2020 2020 2020 2320 5468  w)..        # Th
-00049ee0: 6520 5465 7374 5f70 6970 656c 696e 6520  e Test_pipeline 
-00049ef0: 6272 6963 6b20 7761 7320 6164 6465 6420  brick was added 
-00049f00: 696e 2074 6865 2070 6163 6b61 6765 206c  in the package l
-00049f10: 6962 7261 7279 0a20 2020 2020 2020 2073  ibrary.        s
-00049f20: 656c 662e 6173 7365 7274 5472 7565 280a  elf.assertTrue(.
-00049f30: 2020 2020 2020 2020 2020 2020 2254 6573              "Tes
-00049f40: 745f 7069 7065 6c69 6e65 5f31 220a 2020  t_pipeline_1".  
-00049f50: 2020 2020 2020 2020 2020 696e 2070 6b67            in pkg
-00049f60: 2e70 6163 6b61 6765 5f6c 6962 7261 7279  .package_library
-00049f70: 2e70 6163 6b61 6765 5f74 7265 655b 2255  .package_tree["U
-00049f80: 7365 725f 7072 6f63 6573 7365 7322 5d0a  ser_processes"].
-00049f90: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-00049fa0: 2020 2070 6b67 2e64 656c 6574 655f 7061     pkg.delete_pa
-00049fb0: 636b 6167 6528 0a20 2020 2020 2020 2020  ckage(.         
-00049fc0: 2020 2074 6f5f 6465 6c65 7465 3d22 5573     to_delete="Us
-00049fd0: 6572 5f70 726f 6365 7373 6573 2e54 6573  er_processes.Tes
-00049fe0: 745f 7069 7065 6c69 6e65 5f31 222c 206c  t_pipeline_1", l
-00049ff0: 6f6f 703d 5472 7565 0a20 2020 2020 2020  oop=True.       
-0004a000: 2029 0a0a 2020 2020 2020 2020 2320 5468   )..        # Th
-0004a010: 6520 5465 7374 5f70 6970 656c 696e 6520  e Test_pipeline 
-0004a020: 6272 6963 6b20 6861 7320 6265 656e 2072  brick has been r
-0004a030: 656d 6f76 6564 2066 726f 6d20 7468 6520  emoved from the 
-0004a040: 7061 636b 6167 6520 6c69 6272 6172 790a  package library.
-0004a050: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0004a060: 6572 7446 616c 7365 280a 2020 2020 2020  ertFalse(.      
-0004a070: 2020 2020 2020 2254 6573 745f 7069 7065        "Test_pipe
-0004a080: 6c69 6e65 5f31 220a 2020 2020 2020 2020  line_1".        
-0004a090: 2020 2020 696e 2070 6b67 2e70 6163 6b61      in pkg.packa
-0004a0a0: 6765 5f6c 6962 7261 7279 2e70 6163 6b61  ge_library.packa
-0004a0b0: 6765 5f74 7265 655b 2255 7365 725f 7072  ge_tree["User_pr
-0004a0c0: 6f63 6573 7365 7322 5d0a 2020 2020 2020  ocesses"].      
-0004a0d0: 2020 290a 0a20 2020 2020 2020 2023 2052    )..        # R
-0004a0e0: 6573 746f 7265 2074 6865 2069 6e69 7469  estore the initi
-0004a0f0: 616c 2070 726f 6365 7373 206c 6962 7261  al process libra
-0004a100: 7279 2028 6265 666f 7265 2074 6573 745f  ry (before test_
-0004a110: 7361 7665 5f70 6970 656c 696e 6520 7465  save_pipeline te
-0004a120: 7374 290a 2020 2020 2020 2020 636f 6e66  st).        conf
-0004a130: 6967 203d 2043 6f6e 6669 6728 636f 6e66  ig = Config(conf
-0004a140: 6967 5f70 6174 683d 7365 6c66 2e63 6f6e  ig_path=self.con
-0004a150: 6669 675f 7061 7468 290a 2020 2020 2020  fig_path).      
-0004a160: 2020 7573 725f 7072 6f63 5f66 6f6c 6465    usr_proc_folde
-0004a170: 7220 3d20 6f73 2e70 6174 682e 6a6f 696e  r = os.path.join
-0004a180: 280a 2020 2020 2020 2020 2020 2020 636f  (.            co
-0004a190: 6e66 6967 2e67 6574 5f6d 6961 5f70 6174  nfig.get_mia_pat
-0004a1a0: 6828 292c 2022 7072 6f63 6573 7365 7322  h(), "processes"
-0004a1b0: 2c20 2255 7365 725f 7072 6f63 6573 7365  , "User_processe
-0004a1c0: 7322 0a20 2020 2020 2020 2029 0a20 2020  s".        ).   
-0004a1d0: 2020 2020 2073 6875 7469 6c2e 726d 7472       shutil.rmtr
-0004a1e0: 6565 2875 7372 5f70 726f 635f 666f 6c64  ee(usr_proc_fold
-0004a1f0: 6572 290a 2020 2020 2020 2020 6f73 2e72  er).        os.r
-0004a200: 656d 6f76 6528 0a20 2020 2020 2020 2020  emove(.         
-0004a210: 2020 206f 732e 7061 7468 2e6a 6f69 6e28     os.path.join(
-0004a220: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0004a230: 2063 6f6e 6669 672e 6765 745f 6d69 615f   config.get_mia_
-0004a240: 7061 7468 2829 2c20 2270 726f 7065 7274  path(), "propert
-0004a250: 6965 7322 2c20 2270 726f 6365 7373 5f63  ies", "process_c
-0004a260: 6f6e 6669 672e 796d 6c22 0a20 2020 2020  onfig.yml".     
-0004a270: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0004a280: 2029 0a20 2020 2020 2020 2073 6875 7469   ).        shuti
-0004a290: 6c2e 636f 7079 7472 6565 280a 2020 2020  l.copytree(.    
-0004a2a0: 2020 2020 2020 2020 6f73 2e70 6174 682e          os.path.
-0004a2b0: 6a6f 696e 280a 2020 2020 2020 2020 2020  join(.          
-0004a2c0: 2020 2020 2020 7365 6c66 2e63 6f6e 6669        self.confi
-0004a2d0: 675f 7061 7468 2c0a 2020 2020 2020 2020  g_path,.        
-0004a2e0: 2020 2020 2020 2020 2234 5554 735f 5465          "4UTs_Te
-0004a2f0: 7374 4d49 4150 6970 656c 696e 6545 6469  stMIAPipelineEdi
-0004a300: 746f 7222 2c0a 2020 2020 2020 2020 2020  tor",.          
-0004a310: 2020 2020 2020 2255 7365 725f 7072 6f63        "User_proc
-0004a320: 6573 7365 7322 2c0a 2020 2020 2020 2020  esses",.        
-0004a330: 2020 2020 292c 0a20 2020 2020 2020 2020      ),.         
-0004a340: 2020 206f 732e 7061 7468 2e6a 6f69 6e28     os.path.join(
-0004a350: 7573 725f 7072 6f63 5f66 6f6c 6465 7229  usr_proc_folder)
-0004a360: 2c0a 2020 2020 2020 2020 290a 2020 2020  ,.        ).    
-0004a370: 2020 2020 7368 7574 696c 2e63 6f70 7928      shutil.copy(
-0004a380: 0a20 2020 2020 2020 2020 2020 206f 732e  .            os.
-0004a390: 7061 7468 2e6a 6f69 6e28 0a20 2020 2020  path.join(.     
-0004a3a0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0004a3b0: 636f 6e66 6967 5f70 6174 682c 0a20 2020  config_path,.   
-0004a3c0: 2020 2020 2020 2020 2020 2020 2022 3455               "4U
-0004a3d0: 5473 5f54 6573 744d 4941 5069 7065 6c69  Ts_TestMIAPipeli
-0004a3e0: 6e65 4564 6974 6f72 222c 0a20 2020 2020  neEditor",.     
-0004a3f0: 2020 2020 2020 2020 2020 2022 7072 6f63             "proc
-0004a400: 6573 735f 636f 6e66 6967 2e79 6d6c 222c  ess_config.yml",
-0004a410: 0a20 2020 2020 2020 2020 2020 2029 2c0a  .            ),.
-0004a420: 2020 2020 2020 2020 2020 2020 6f73 2e70              os.p
-0004a430: 6174 682e 6a6f 696e 2863 6f6e 6669 672e  ath.join(config.
-0004a440: 6765 745f 6d69 615f 7061 7468 2829 2c20  get_mia_path(), 
-0004a450: 2270 726f 7065 7274 6965 7322 292c 0a20  "properties"),. 
-0004a460: 2020 2020 2020 2029 0a0a 0a63 6c61 7373         )...class
-0004a470: 2054 6573 744d 4941 5069 7065 6c69 6e65   TestMIAPipeline
-0004a480: 4d61 6e61 6765 7254 6162 2854 6573 744d  ManagerTab(TestM
-0004a490: 4941 4361 7365 293a 0a20 2020 2022 2222  IACase):.    """
-0004a4a0: 5465 7374 7320 7468 6520 7069 7065 6c69  Tests the pipeli
-0004a4b0: 6e65 206d 616e 6167 6572 2074 6162 2063  ne manager tab c
-0004a4c0: 6c61 7373 2c20 7061 7274 206f 6620 7468  lass, part of th
-0004a4d0: 6520 686f 6d6f 6e79 6d20 7461 622e 0a0a  e homonym tab...
-0004a4e0: 2020 2020 3a43 6f6e 7461 696e 733a 0a20      :Contains:. 
-0004a4f0: 2020 2020 2020 203a 4d65 7468 6f64 3a0a         :Method:.
-0004a500: 2020 2020 2020 2020 2020 2020 2d20 7465              - te
-0004a510: 7374 5f61 6464 5f70 6c75 675f 7661 6c75  st_add_plug_valu
-0004a520: 655f 746f 5f64 6174 6162 6173 655f 6c69  e_to_database_li
-0004a530: 7374 5f74 7970 653a 2061 6464 7320 6120  st_type: adds a 
-0004a540: 6c69 7374 2074 7970 6520 706c 7567 0a20  list type plug. 
-0004a550: 2020 2020 2020 2020 2020 2020 2076 616c               val
-0004a560: 7565 2074 6f20 7468 6520 6461 7461 6261  ue to the databa
-0004a570: 7365 0a20 2020 2020 2020 2020 2020 202d  se.            -
-0004a580: 2074 6573 745f 6164 645f 706c 7567 5f76   test_add_plug_v
-0004a590: 616c 7565 5f74 6f5f 6461 7461 6261 7365  alue_to_database
-0004a5a0: 5f6e 6f6e 5f6c 6973 745f 7479 7065 3a20  _non_list_type: 
-0004a5b0: 6164 6473 2061 206e 6f6e 206c 6973 740a  adds a non list.
-0004a5c0: 2020 2020 2020 2020 2020 2020 2020 7479                ty
-0004a5d0: 7065 2070 6c75 6720 7661 6c75 6520 746f  pe plug value to
-0004a5e0: 2074 6865 2064 6174 6162 6173 650a 2020   the database.  
-0004a5f0: 2020 2020 2020 2020 2020 2d20 7465 7374            - test
-0004a600: 5f61 6464 5f70 6c75 675f 7661 6c75 655f  _add_plug_value_
-0004a610: 746f 5f64 6174 6162 6173 655f 7365 7665  to_database_seve
-0004a620: 7261 6c5f 696e 7075 7473 3a20 6578 706f  ral_inputs: expo
-0004a630: 7274 7320 6120 6e6f 6e20 6c69 7374 0a20  rts a non list. 
-0004a640: 2020 2020 2020 2020 2020 2020 2074 7970               typ
-0004a650: 6520 696e 7075 7420 706c 7567 2061 6e64  e input plug and
-0004a660: 2077 6974 6820 7365 7665 7261 6c20 706f   with several po
-0004a670: 7373 6962 6c65 2069 6e70 7574 730a 2020  ssible inputs.  
-0004a680: 2020 2020 2020 2020 2020 2d20 7465 7374            - test
-0004a690: 5f61 736b 5f69 7465 7261 7465 645f 7069  _ask_iterated_pi
-0004a6a0: 7065 6c69 6e65 5f70 6c75 6773 3a20 7465  peline_plugs: te
-0004a6b0: 7374 2074 6865 2069 7465 7261 7469 6f6e  st the iteration
-0004a6c0: 0a20 2020 2020 2020 2020 2020 2020 2064  .              d
-0004a6d0: 6961 6c6f 6720 666f 7220 6561 6368 2070  ialog for each p
-0004a6e0: 6c75 6720 6f66 2061 2052 656e 616d 6520  lug of a Rename 
-0004a6f0: 7072 6f63 6573 730a 2020 2020 2020 2020  process.        
-0004a700: 2020 2020 2d20 7465 7374 5f62 7569 6c64      - test_build
-0004a710: 5f69 7465 7261 7465 645f 7069 7065 6c69  _iterated_pipeli
-0004a720: 6e65 3a20 6d6f 636b 7320 6d65 7468 6f64  ne: mocks method
-0004a730: 7320 616e 6420 6275 696c 6473 2061 6e0a  s and builds an.
-0004a740: 2020 2020 2020 2020 2020 2020 2020 6974                it
-0004a750: 6572 6174 6564 2070 6970 656c 696e 650a  erated pipeline.
-0004a760: 2020 2020 2020 2020 2020 2020 2d20 7465              - te
-0004a770: 7374 5f63 6865 636b 5f72 6571 7569 7265  st_check_require
-0004a780: 6d65 6e74 733a 2063 6865 636b 7320 7468  ments: checks th
-0004a790: 6520 7265 7175 6972 656d 656e 7473 2066  e requirements f
-0004a7a0: 6f72 2061 2067 6976 656e 206e 6f64 650a  or a given node.
-0004a7b0: 2020 2020 2020 2020 2020 2020 2d20 7465              - te
-0004a7c0: 7374 5f63 6c65 616e 7570 5f6f 6c64 6572  st_cleanup_older
-0004a7d0: 5f69 6e69 743a 2074 6573 7473 2074 6865  _init: tests the
-0004a7e0: 2063 6c65 616e 696e 6720 6f66 206f 6c64   cleaning of old
-0004a7f0: 2069 6e69 7469 616c 6973 6174 696f 6e73   initialisations
-0004a800: 0a20 2020 2020 2020 2020 2020 202d 2074  .            - t
-0004a810: 6573 745f 636f 6d70 6c65 7465 5f70 6970  est_complete_pip
-0004a820: 656c 696e 655f 7061 7261 6d65 7465 7273  eline_parameters
-0004a830: 3a20 7465 7374 2074 6865 2070 6970 656c  : test the pipel
-0004a840: 696e 650a 2020 2020 2020 2020 2020 2020  ine.            
-0004a850: 2020 7061 7261 6d65 7465 7273 2063 6f6d    parameters com
-0004a860: 706c 6574 696f 6e0a 2020 2020 2020 2020  pletion.        
-0004a870: 2020 2020 2d20 7465 7374 5f64 656c 6574      - test_delet
-0004a880: 655f 7072 6f63 6573 7365 733a 2064 656c  e_processes: del
-0004a890: 6574 6573 2061 2070 726f 6365 7373 2061  etes a process a
-0004a8a0: 6e64 206d 616b 6573 2074 6865 2075 6e64  nd makes the und
-0004a8b0: 6f2f 7265 646f 0a20 2020 2020 2020 2020  o/redo.         
-0004a8c0: 2020 202d 2074 6573 745f 656e 645f 7072     - test_end_pr
-0004a8d0: 6f67 7265 7373 3a20 6372 6561 7465 7320  ogress: creates 
-0004a8e0: 6120 7072 6f67 7265 7373 206f 626a 6563  a progress objec
-0004a8f0: 7420 616e 6420 7472 6965 7320 746f 2065  t and tries to e
-0004a900: 6e64 2069 740a 2020 2020 2020 2020 2020  nd it.          
-0004a910: 2020 2d20 7465 7374 5f67 6172 6261 6765    - test_garbage
-0004a920: 5f63 6f6c 6c65 6374 3a20 636f 6c6c 6563  _collect: collec
-0004a930: 7473 2074 6865 2067 6172 6261 6765 206f  ts the garbage o
-0004a940: 6620 6120 7069 7065 6c69 6e65 0a20 2020  f a pipeline.   
-0004a950: 2020 2020 2020 2020 202d 2074 6573 745f           - test_
-0004a960: 6765 745f 6361 7073 756c 5f65 6e67 696e  get_capsul_engin
-0004a970: 653a 2067 6574 7320 7468 6520 6361 7073  e: gets the caps
-0004a980: 756c 2065 6e67 696e 6520 6f66 2074 6865  ul engine of the
-0004a990: 2070 6970 656c 696e 650a 2020 2020 2020   pipeline.      
-0004a9a0: 2020 2020 2020 2d20 7465 7374 5f67 6574        - test_get
-0004a9b0: 5f6d 6973 7369 6e67 5f6d 616e 6461 746f  _missing_mandato
-0004a9c0: 7279 5f70 6172 616d 6574 6572 733a 2074  ry_parameters: t
-0004a9d0: 7269 6573 2074 6f20 696e 6974 6961 6c69  ries to initiali
-0004a9e0: 7a65 0a20 2020 2020 2020 2020 2020 2020  ze.             
-0004a9f0: 2074 6865 2070 6970 656c 696e 6520 7769   the pipeline wi
-0004aa00: 7468 206d 6973 7369 6e67 206d 616e 6461  th missing manda
-0004aa10: 746f 7279 2070 6172 616d 6574 6572 730a  tory parameters.
-0004aa20: 2020 2020 2020 2020 2020 2020 2d20 7465              - te
-0004aa30: 7374 5f67 6574 5f70 6970 656c 696e 655f  st_get_pipeline_
-0004aa40: 6f72 5f70 726f 6365 7373 3a20 6765 7473  or_process: gets
-0004aa50: 2061 2070 6970 656c 696e 6520 616e 6420   a pipeline and 
-0004aa60: 6120 7072 6f63 6573 7320 6672 6f6d 0a20  a process from. 
-0004aa70: 2020 2020 2020 2020 2020 2020 2074 6865               the
-0004aa80: 2070 6970 656c 696e 655f 6d61 6e61 6765   pipeline_manage
-0004aa90: 720a 2020 2020 2020 2020 2020 2020 2d20  r.            - 
-0004aaa0: 7465 7374 5f69 6e69 7469 616c 697a 653a  test_initialize:
-0004aab0: 206d 6f63 6b73 206f 626a 6563 7473 2061   mocks objects a
-0004aac0: 6e64 2069 6e69 7469 616c 697a 6573 2074  nd initializes t
-0004aad0: 6865 2077 6f72 6b66 6c6f 770a 2020 2020  he workflow.    
-0004aae0: 2020 2020 2020 2020 2d20 7465 7374 5f72          - test_r
-0004aaf0: 6567 6973 7465 725f 636f 6d70 6c65 7469  egister_completi
-0004ab00: 6f6e 5f61 7474 7269 6275 7465 733a 206d  on_attributes: m
-0004ab10: 6f63 6b73 206d 6574 686f 6473 206f 6620  ocks methods of 
-0004ab20: 7468 650a 2020 2020 2020 2020 2020 2020  the.            
-0004ab30: 2020 7069 7065 6c69 6e65 206d 616e 6167    pipeline manag
-0004ab40: 6572 2061 6e64 2072 6567 6973 7465 7273  er and registers
-0004ab50: 2063 6f6d 706c 6574 696f 6e20 6174 7472   completion attr
-0004ab60: 6962 7574 6573 0a20 2020 2020 2020 2020  ibutes.         
-0004ab70: 2020 202d 2074 6573 745f 7265 6769 7374     - test_regist
-0004ab80: 6572 5f6e 6f64 655f 696f 5f69 6e5f 6461  er_node_io_in_da
-0004ab90: 7461 6261 7365 3a20 7365 7473 2069 6e70  tabase: sets inp
-0004aba0: 7574 2061 6e64 206f 7574 7075 740a 2020  ut and output.  
-0004abb0: 2020 2020 2020 2020 2020 2020 7061 7261              para
-0004abc0: 6d65 7465 7273 2061 6e64 2072 6567 6973  meters and regis
-0004abd0: 7465 7273 2074 6865 6d20 696e 2064 6174  ters them in dat
-0004abe0: 6162 6173 650a 2020 2020 2020 2020 2020  abase.          
-0004abf0: 2020 2d20 7465 7374 5f72 656d 6f76 655f    - test_remove_
-0004ac00: 7072 6f67 7265 7373 3a20 7265 6d6f 7665  progress: remove
-0004ac10: 7320 7468 6520 7072 6f67 7265 7373 206f  s the progress o
-0004ac20: 6620 7468 6520 7069 7065 6c69 6e65 0a20  f the pipeline. 
-0004ac30: 2020 2020 2020 2020 2020 202d 2074 6573             - tes
-0004ac40: 745f 7275 6e3a 2063 7265 6174 6573 2061  t_run: creates a
-0004ac50: 2070 6970 656c 696e 6520 6d61 6e61 6765   pipeline manage
-0004ac60: 7220 7072 6f67 7265 7373 206f 626a 6563  r progress objec
-0004ac70: 7420 616e 640a 2020 2020 2020 2020 2020  t and.          
-0004ac80: 2020 2020 7472 6965 7320 746f 2072 756e      tries to run
-0004ac90: 2069 740a 2020 2020 2020 2020 2020 2020   it.            
-0004aca0: 2d20 7465 7374 5f73 6176 655f 7069 7065  - test_save_pipe
-0004acb0: 6c69 6e65 3a20 7361 7665 7320 6120 7369  line: saves a si
-0004acc0: 6d70 6c65 2070 6970 656c 696e 650a 2020  mple pipeline.  
-0004acd0: 2020 2020 2020 2020 2020 2d20 7465 7374            - test
-0004ace0: 5f73 6176 6550 6970 656c 696e 6541 733a  _savePipelineAs:
-0004acf0: 2073 6176 6573 2061 2070 6970 656c 696e   saves a pipelin
-0004ad00: 6520 756e 6465 7220 616e 6f74 6865 7220  e under another 
-0004ad10: 6e61 6d65 0a20 2020 2020 2020 2020 2020  name.           
-0004ad20: 202d 2074 6573 745f 7365 745f 616e 696d   - test_set_anim
-0004ad30: 5f66 7261 6d65 3a20 7275 6e73 2074 6865  _frame: runs the
-0004ad40: 2027 726f 7461 7469 6e67 4272 6169 6e56   'rotatingBrainV
-0004ad50: 4953 412e 6769 6627 2061 6e69 6d61 7469  ISA.gif' animati
-0004ad60: 6f6e 0a20 2020 2020 2020 2020 2020 202d  on.            -
-0004ad70: 2074 6573 745f 7368 6f77 5f73 7461 7475   test_show_statu
-0004ad80: 733a 2073 686f 7773 2074 6865 2073 7461  s: shows the sta
-0004ad90: 7475 7320 6f66 2070 6970 656c 696e 6520  tus of pipeline 
-0004ada0: 6578 6563 7574 696f 6e0a 2020 2020 2020  execution.      
-0004adb0: 2020 2020 2020 2d20 7465 7374 5f73 746f        - test_sto
-0004adc0: 705f 6578 6563 7574 696f 6e3a 2073 686f  p_execution: sho
-0004add0: 7773 2074 6865 2073 7461 7475 7320 7769  ws the status wi
-0004ade0: 6e64 6f77 206f 6620 7468 6520 7069 7065  ndow of the pipe
-0004adf0: 6c69 6e65 0a20 2020 2020 2020 2020 2020  line.           
-0004ae00: 2020 206d 616e 6167 6572 0a20 2020 2020     manager.     
-0004ae10: 2020 2020 2020 202d 2074 6573 745f 756e         - test_un
-0004ae20: 646f 5f72 6564 6f3a 2074 6573 7473 2074  do_redo: tests t
-0004ae30: 6865 2075 6e64 6f2f 7265 646f 2066 6561  he undo/redo fea
-0004ae40: 7475 7265 0a20 2020 2020 2020 2020 2020  ture.           
-0004ae50: 202d 2074 6573 745f 7570 6461 7465 5f61   - test_update_a
-0004ae60: 7574 6f5f 696e 6865 7269 7461 6e63 653a  uto_inheritance:
-0004ae70: 2075 7064 6174 6573 2074 6865 206a 6f62   updates the job
-0004ae80: 2773 2061 7574 6f20 696e 6865 7269 7461  's auto inherita
-0004ae90: 6e63 650a 2020 2020 2020 2020 2020 2020  nce.            
-0004aea0: 2020 6469 6374 0a20 2020 2020 2020 2020    dict.         
-0004aeb0: 2020 202d 2074 6573 745f 7570 6461 7465     - test_update
-0004aec0: 5f69 6e68 6572 6974 616e 6365 3a20 7570  _inheritance: up
-0004aed0: 6461 7465 7320 7468 6520 6a6f 6227 7320  dates the job's 
-0004aee0: 696e 6865 7269 7461 6e63 6520 6469 6374  inheritance dict
-0004aef0: 0a20 2020 2020 2020 2020 2020 202d 2074  .            - t
-0004af00: 6573 745f 7570 6461 7465 5f6e 6f64 655f  est_update_node_
-0004af10: 6c69 7374 3a20 696e 6974 6961 6c69 7a65  list: initialize
-0004af20: 7320 6120 776f 726b 666c 6f77 2061 6e64  s a workflow and
-0004af30: 2061 6464 7320 610a 2020 2020 2020 2020   adds a.        
-0004af40: 2020 2020 2020 7072 6f63 6573 7320 746f        process to
-0004af50: 2074 6865 2022 7069 706c 696e 655f 6d61   the "pipline_ma
-0004af60: 6e61 6765 722e 6e6f 6465 5f6c 6973 7422  nager.node_list"
-0004af70: 0a20 2020 2020 2020 2020 2020 202d 2074  .            - t
-0004af80: 6573 745f 7a5f 696e 6974 5f70 6970 656c  est_z_init_pipel
-0004af90: 696e 653a 2069 6e69 7469 616c 697a 6573  ine: initializes
-0004afa0: 2074 6865 2070 6970 656c 696e 650a 2020   the pipeline.  
-0004afb0: 2020 2020 2020 2020 2020 2d20 7465 7374            - test
-0004afc0: 5f7a 5f72 756e 5069 7065 6c69 6e65 3a20  _z_runPipeline: 
-0004afd0: 6164 6473 2061 2070 726f 6365 7373 7275  adds a processru
-0004afe0: 6e73 2061 2070 6970 656c 696e 650a 2020  ns a pipeline.  
-0004aff0: 2020 2020 2020 2020 2020 2d20 7465 7374            - test
-0004b000: 5f7a 7a5f 6465 6c5f 7061 636b 3a20 6465  _zz_del_pack: de
-0004b010: 6c65 7469 6f6e 206f 6620 7468 6520 6272  letion of the br
-0004b020: 6963 6b20 6372 6561 7465 6420 6475 7269  ick created duri
-0004b030: 6e67 2055 5473 0a20 2020 2022 2222 0a0a  ng UTs.    """..
-0004b040: 2020 2020 6465 6620 7465 7374 5f61 6464      def test_add
-0004b050: 5f70 6c75 675f 7661 6c75 655f 746f 5f64  _plug_value_to_d
-0004b060: 6174 6162 6173 655f 6c69 7374 5f74 7970  atabase_list_typ
-0004b070: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
-0004b080: 2022 2222 4f70 656e 7320 6120 7072 6f6a   """Opens a proj
-0004b090: 6563 742c 2061 6464 7320 6120 2753 656c  ect, adds a 'Sel
-0004b0a0: 6563 7427 2070 726f 6365 7373 2c20 6578  ect' process, ex
-0004b0b0: 706f 7274 7320 6120 6c69 7374 2074 7970  ports a list typ
-0004b0c0: 650a 2020 2020 2020 2020 696e 7075 7420  e.        input 
-0004b0d0: 706c 7567 2061 6e64 2061 6464 7320 6974  plug and adds it
-0004b0e0: 2074 6f20 7468 6520 6461 7461 6261 7365   to the database
-0004b0f0: 2e0a 0a20 2020 2020 2020 202d 2054 6573  ...        - Tes
-0004b100: 7473 3a20 5069 7065 6c69 6e65 4d61 6e61  ts: PipelineMana
-0004b110: 6765 7254 6162 2851 5769 6467 6574 292e  gerTab(QWidget).
-0004b120: 6164 645f 706c 7567 5f76 616c 7565 5f74  add_plug_value_t
-0004b130: 6f5f 6461 7461 6261 7365 2829 2e0a 2020  o_database()..  
-0004b140: 2020 2020 2020 2222 220a 0a20 2020 2020        """..     
-0004b150: 2020 2023 204f 7065 6e73 2070 726f 6a65     # Opens proje
-0004b160: 6374 2038 2061 6e64 2073 7769 7463 6865  ct 8 and switche
-0004b170: 7320 746f 2069 740a 2020 2020 2020 2020  s to it.        
-0004b180: 7072 6f6a 6563 745f 385f 7061 7468 203d  project_8_path =
-0004b190: 2073 656c 662e 6765 745f 6e65 775f 7465   self.get_new_te
-0004b1a0: 7374 5f70 726f 6a65 6374 2829 0a20 2020  st_project().   
-0004b1b0: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
-0004b1c0: 696e 646f 772e 7377 6974 6368 5f70 726f  indow.switch_pro
-0004b1d0: 6a65 6374 2870 726f 6a65 6374 5f38 5f70  ject(project_8_p
-0004b1e0: 6174 682c 2022 7072 6f6a 6563 745f 3922  ath, "project_9"
-0004b1f0: 290a 0a20 2020 2020 2020 2044 4f43 554d  )..        DOCUM
-0004b200: 454e 545f 3120 3d20 7365 6c66 2e6d 6169  ENT_1 = self.mai
-0004b210: 6e5f 7769 6e64 6f77 2e70 726f 6a65 6374  n_window.project
-0004b220: 2e73 6573 7369 6f6e 2e67 6574 5f64 6f63  .session.get_doc
-0004b230: 756d 656e 7473 5f6e 616d 6573 280a 2020  uments_names(.  
-0004b240: 2020 2020 2020 2020 2020 2263 7572 7265            "curre
-0004b250: 6e74 220a 2020 2020 2020 2020 295b 305d  nt".        )[0]
-0004b260: 0a20 2020 2020 2020 2044 4f43 554d 454e  .        DOCUMEN
-0004b270: 545f 3220 3d20 7365 6c66 2e6d 6169 6e5f  T_2 = self.main_
-0004b280: 7769 6e64 6f77 2e70 726f 6a65 6374 2e73  window.project.s
-0004b290: 6573 7369 6f6e 2e67 6574 5f64 6f63 756d  ession.get_docum
-0004b2a0: 656e 7473 5f6e 616d 6573 280a 2020 2020  ents_names(.    
-0004b2b0: 2020 2020 2020 2020 2263 7572 7265 6e74          "current
-0004b2c0: 220a 2020 2020 2020 2020 295b 315d 0a0a  ".        )[1]..
-0004b2d0: 2020 2020 2020 2020 7070 6c5f 6564 745f          ppl_edt_
-0004b2e0: 7461 6273 203d 2073 656c 662e 6d61 696e  tabs = self.main
-0004b2f0: 5f77 696e 646f 772e 7069 7065 6c69 6e65  _window.pipeline
-0004b300: 5f6d 616e 6167 6572 2e70 6970 656c 696e  _manager.pipelin
-0004b310: 6545 6469 746f 7254 6162 730a 0a20 2020  eEditorTabs..   
-0004b320: 2020 2020 2023 2041 6464 7320 7468 6520       # Adds the 
-0004b330: 7072 6f63 6573 7320 5365 6c65 6374 2c20  process Select, 
-0004b340: 6372 6561 7465 7320 7468 6520 2273 656c  creates the "sel
-0004b350: 6563 745f 3122 206e 6f64 650a 2020 2020  ect_1" node.    
-0004b360: 2020 2020 7070 6c5f 6564 745f 7461 6273      ppl_edt_tabs
-0004b370: 2e67 6574 5f63 7572 7265 6e74 5f65 6469  .get_current_edi
-0004b380: 746f 7228 292e 636c 6963 6b5f 706f 7320  tor().click_pos 
-0004b390: 3d20 5150 6f69 6e74 2834 3530 2c20 3530  = QPoint(450, 50
-0004b3a0: 3029 0a20 2020 2020 2020 2070 706c 5f65  0).        ppl_e
-0004b3b0: 6474 5f74 6162 732e 6765 745f 6375 7272  dt_tabs.get_curr
-0004b3c0: 656e 745f 6564 6974 6f72 2829 2e61 6464  ent_editor().add
-0004b3d0: 5f6e 616d 6564 5f70 726f 6365 7373 2853  _named_process(S
-0004b3e0: 656c 6563 7429 0a20 2020 2020 2020 2070  elect).        p
-0004b3f0: 6970 656c 696e 6520 3d20 7070 6c5f 6564  ipeline = ppl_ed
-0004b400: 745f 7461 6273 2e67 6574 5f63 7572 7265  t_tabs.get_curre
-0004b410: 6e74 5f70 6970 656c 696e 6528 290a 0a20  nt_pipeline().. 
-0004b420: 2020 2020 2020 2023 2045 7870 6f72 7473         # Exports
-0004b430: 2074 6865 206d 616e 6461 746f 7279 2069   the mandatory i
-0004b440: 6e70 7574 2061 6e64 206f 7574 7075 7420  nput and output 
-0004b450: 706c 7567 7320 666f 7220 2273 656c 6563  plugs for "selec
-0004b460: 745f 3122 0a20 2020 2020 2020 2070 706c  t_1".        ppl
-0004b470: 5f65 6474 5f74 6162 732e 6765 745f 6375  _edt_tabs.get_cu
-0004b480: 7272 656e 745f 6564 6974 6f72 2829 2e63  rrent_editor().c
-0004b490: 7572 7265 6e74 5f6e 6f64 655f 6e61 6d65  urrent_node_name
-0004b4a0: 203d 2022 7365 6c65 6374 5f31 220a 2020   = "select_1".  
-0004b4b0: 2020 2020 2020 7070 6c5f 6564 745f 7461        ppl_edt_ta
-0004b4c0: 6273 2e67 6574 5f63 7572 7265 6e74 5f65  bs.get_current_e
-0004b4d0: 6469 746f 7228 292e 6578 706f 7274 5f75  ditor().export_u
-0004b4e0: 6e63 6f6e 6e65 6374 6564 5f6d 616e 6461  nconnected_manda
-0004b4f0: 746f 7279 5f69 6e70 7574 7328 290a 2020  tory_inputs().  
-0004b500: 2020 2020 2020 7070 6c5f 6564 745f 7461        ppl_edt_ta
-0004b510: 6273 2e67 6574 5f63 7572 7265 6e74 5f65  bs.get_current_e
-0004b520: 6469 746f 7228 292e 6578 706f 7274 5f61  ditor().export_a
-0004b530: 6c6c 5f75 6e63 6f6e 6e65 6374 6564 5f6f  ll_unconnected_o
-0004b540: 7574 7075 7473 2829 0a0a 2020 2020 2020  utputs()..      
-0004b550: 2020 7069 7065 6c69 6e65 5f6d 616e 6167    pipeline_manag
-0004b560: 6572 203d 2073 656c 662e 6d61 696e 5f77  er = self.main_w
-0004b570: 696e 646f 772e 7069 7065 6c69 6e65 5f6d  indow.pipeline_m
-0004b580: 616e 6167 6572 0a0a 2020 2020 2020 2020  anager..        
-0004b590: 2320 696e 7075 7428 2731 2729 0a0a 2020  # input('1')..  
-0004b5a0: 2020 2020 2020 2320 496e 6974 6961 6c69        # Initiali
-0004b5b0: 7a65 7320 7468 6520 776f 726b 666c 6f77  zes the workflow
-0004b5c0: 206d 616e 7561 6c6c 790a 2020 2020 2020   manually.      
-0004b5d0: 2020 7069 7065 6c69 6e65 5f6d 616e 6167    pipeline_manag
-0004b5e0: 6572 2e77 6f72 6b66 6c6f 7720 3d20 776f  er.workflow = wo
-0004b5f0: 726b 666c 6f77 5f66 726f 6d5f 7069 7065  rkflow_from_pipe
-0004b600: 6c69 6e65 280a 2020 2020 2020 2020 2020  line(.          
-0004b610: 2020 7069 7065 6c69 6e65 2c20 636f 6d70    pipeline, comp
-0004b620: 6c65 7465 5f70 6172 616d 6574 6572 733d  lete_parameters=
-0004b630: 5472 7565 0a20 2020 2020 2020 2029 0a0a  True.        )..
-0004b640: 2020 2020 2020 2020 2320 696e 7075 7428          # input(
-0004b650: 2732 2729 0a0a 2020 2020 2020 2020 2320  '2')..        # 
-0004b660: 4765 7473 2074 6865 2027 6a6f 6227 2061  Gets the 'job' a
-0004b670: 6e64 206d 6f63 6b73 2061 6464 696e 6720  nd mocks adding 
-0004b680: 6120 6272 6963 6b20 746f 2074 6865 2063  a brick to the c
-0004b690: 6f6c 6c65 6374 696f 6e0a 2020 2020 2020  ollection.      
-0004b6a0: 2020 6a6f 6220 3d20 7069 7065 6c69 6e65    job = pipeline
-0004b6b0: 5f6d 616e 6167 6572 2e77 6f72 6b66 6c6f  _manager.workflo
-0004b6c0: 772e 6a6f 6273 5b30 5d0a 0a20 2020 2020  w.jobs[0]..     
-0004b6d0: 2020 2062 7269 636b 5f69 6420 3d20 7374     brick_id = st
-0004b6e0: 7228 7575 6964 2e75 7569 6434 2829 290a  r(uuid.uuid4()).
-0004b6f0: 2020 2020 2020 2020 6a6f 622e 7575 6964          job.uuid
-0004b700: 203d 2062 7269 636b 5f69 640a 2020 2020   = brick_id.    
-0004b710: 2020 2020 7069 7065 6c69 6e65 5f6d 616e      pipeline_man
-0004b720: 6167 6572 2e62 7269 636b 5f6c 6973 742e  ager.brick_list.
-0004b730: 6170 7065 6e64 2862 7269 636b 5f69 6429  append(brick_id)
-0004b740: 0a0a 2020 2020 2020 2020 7069 7065 6c69  ..        pipeli
-0004b750: 6e65 5f6d 616e 6167 6572 2e70 726f 6a65  ne_manager.proje
-0004b760: 6374 2e73 6573 7369 6f6e 2e61 6464 5f64  ct.session.add_d
-0004b770: 6f63 756d 656e 7428 0a20 2020 2020 2020  ocument(.       
-0004b780: 2020 2020 2043 4f4c 4c45 4354 494f 4e5f       COLLECTION_
-0004b790: 4252 4943 4b2c 2062 7269 636b 5f69 640a  BRICK, brick_id.
-0004b7a0: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-0004b7b0: 2020 2023 2053 6574 7320 7468 6520 6d61     # Sets the ma
-0004b7c0: 6e64 6174 6f72 7920 706c 7567 2076 616c  ndatory plug val
-0004b7d0: 7565 7320 636f 7272 6573 706f 6e64 696e  ues correspondin
-0004b7e0: 6720 746f 2022 696e 7075 7473 2220 6e6f  g to "inputs" no
-0004b7f0: 6465 0a20 2020 2020 2020 2074 7261 6974  de.        trait
-0004b800: 5f6c 6973 745f 696e 6c69 7374 203d 2054  _list_inlist = T
-0004b810: 7261 6974 4c69 7374 4f62 6a65 6374 280a  raitListObject(.
-0004b820: 2020 2020 2020 2020 2020 2020 496e 7075              Inpu
-0004b830: 744d 756c 7469 4f62 6a65 6374 2829 2c20  tMultiObject(), 
-0004b840: 7069 7065 6c69 6e65 2c20 2269 6e6c 6973  pipeline, "inlis
-0004b850: 7422 2c20 5b44 4f43 554d 454e 545f 312c  t", [DOCUMENT_1,
-0004b860: 2044 4f43 554d 454e 545f 325d 0a20 2020   DOCUMENT_2].   
-0004b870: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-0004b880: 2320 4d6f 636b 7320 7468 6520 6372 6561  # Mocks the crea
-0004b890: 7469 6f6e 206f 6620 6120 636f 6d70 6c65  tion of a comple
-0004b8a0: 7469 6f6e 2065 6e67 696e 650a 2020 2020  tion engine.    
-0004b8b0: 2020 2020 7072 6f63 6573 7320 3d20 6a6f      process = jo
-0004b8c0: 622e 7072 6f63 6573 7328 290a 2020 2020  b.process().    
-0004b8d0: 2020 2020 706c 7567 5f6e 616d 6520 3d20      plug_name = 
-0004b8e0: 2269 6e6c 6973 7422 0a20 2020 2020 2020  "inlist".       
-0004b8f0: 2074 7261 6974 203d 2070 726f 6365 7373   trait = process
-0004b900: 2e74 7261 6974 2870 6c75 675f 6e61 6d65  .trait(plug_name
-0004b910: 290a 2020 2020 2020 2020 696e 7075 7473  ).        inputs
-0004b920: 203d 2070 726f 6365 7373 2e67 6574 5f69   = process.get_i
-0004b930: 6e70 7574 7328 290a 0a20 2020 2020 2020  nputs()..       
-0004b940: 2023 204d 6f63 6b73 2074 6865 2061 7474   # Mocks the att
-0004b950: 7269 6275 7465 7320 6469 6374 0a20 2020  ributes dict.   
-0004b960: 2020 2020 2061 7474 7269 6275 7465 7320       attributes 
-0004b970: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-0004b980: 226e 6f74 5f6c 6973 7422 3a20 226e 6f74  "not_list": "not
-0004b990: 5f6c 6973 745f 7661 6c75 6522 2c0a 2020  _list_value",.  
-0004b9a0: 2020 2020 2020 2020 2020 2273 6d61 6c6c            "small
-0004b9b0: 5f6c 6973 7422 3a20 5b22 6c69 7374 5f69  _list": ["list_i
-0004b9c0: 7465 6d31 225d 2c0a 2020 2020 2020 2020  tem1"],.        
-0004b9d0: 2020 2020 226c 6172 6765 5f6c 6973 7422      "large_list"
-0004b9e0: 3a20 5b22 6c69 7374 5f69 7465 6d31 222c  : ["list_item1",
-0004b9f0: 2022 6c69 7374 5f69 7465 6d32 222c 2022   "list_item2", "
-0004ba00: 6c69 7374 5f69 7465 6d33 225d 2c0a 2020  list_item3"],.  
-0004ba10: 2020 2020 2020 7d0a 0a20 2020 2020 2020        }..       
-0004ba20: 2023 2041 6464 7320 706c 7567 2076 616c   # Adds plug val
-0004ba30: 7565 206f 6620 7479 7065 2027 5472 6169  ue of type 'Trai
-0004ba40: 744c 6973 744f 626a 6563 7427 0a20 2020  tListObject'.   
-0004ba50: 2020 2020 2070 6970 656c 696e 655f 6d61       pipeline_ma
-0004ba60: 6e61 6765 722e 6164 645f 706c 7567 5f76  nager.add_plug_v
-0004ba70: 616c 7565 5f74 6f5f 6461 7461 6261 7365  alue_to_database
-0004ba80: 280a 2020 2020 2020 2020 2020 2020 7472  (.            tr
-0004ba90: 6169 745f 6c69 7374 5f69 6e6c 6973 742c  ait_list_inlist,
-0004baa0: 0a20 2020 2020 2020 2020 2020 2062 7269  .            bri
-0004bab0: 636b 5f69 642c 0a20 2020 2020 2020 2020  ck_id,.         
-0004bac0: 2020 2022 222c 0a20 2020 2020 2020 2020     "",.         
-0004bad0: 2020 2022 7365 6c65 6374 5f31 222c 0a20     "select_1",. 
-0004bae0: 2020 2020 2020 2020 2020 2070 6c75 675f             plug_
-0004baf0: 6e61 6d65 2c0a 2020 2020 2020 2020 2020  name,.          
-0004bb00: 2020 2273 656c 6563 745f 3122 2c0a 2020    "select_1",.  
-0004bb10: 2020 2020 2020 2020 2020 6a6f 622c 0a20            job,. 
-0004bb20: 2020 2020 2020 2020 2020 2074 7261 6974             trait
-0004bb30: 2c0a 2020 2020 2020 2020 2020 2020 696e  ,.            in
-0004bb40: 7075 7473 2c0a 2020 2020 2020 2020 2020  puts,.          
-0004bb50: 2020 6174 7472 6962 7574 6573 2c0a 2020    attributes,.  
-0004bb60: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
-0004bb70: 2023 2041 7373 6572 7473 2074 6861 7420   # Asserts that 
-0004bb80: 626f 7468 2027 444f 4355 4d45 4e54 5f31  both 'DOCUMENT_1
-0004bb90: 2720 616e 6420 2744 4f43 554d 454e 545f  ' and 'DOCUMENT_
-0004bba0: 3227 2061 7265 2073 746f 7265 6420 696e  2' are stored in
-0004bbb0: 0a20 2020 2020 2020 2023 2074 6865 2064  .        # the d
-0004bbc0: 6174 6162 6173 650a 2020 2020 2020 2020  atabase.        
-0004bbd0: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
-0004bbe0: 2e70 726f 6a65 6374 2e73 6573 7369 6f6e  .project.session
-0004bbf0: 2e67 6574 5f64 6f63 756d 656e 7428 0a20  .get_document(. 
-0004bc00: 2020 2020 2020 2020 2020 2043 4f4c 4c45             COLLE
-0004bc10: 4354 494f 4e5f 4355 5252 454e 542c 2044  CTION_CURRENT, D
-0004bc20: 4f43 554d 454e 545f 310a 2020 2020 2020  OCUMENT_1.      
-0004bc30: 2020 290a 2020 2020 2020 2020 7069 7065    ).        pipe
-0004bc40: 6c69 6e65 5f6d 616e 6167 6572 2e70 726f  line_manager.pro
-0004bc50: 6a65 6374 2e73 6573 7369 6f6e 2e67 6574  ject.session.get
-0004bc60: 5f64 6f63 756d 656e 7428 0a20 2020 2020  _document(.     
-0004bc70: 2020 2020 2020 2043 4f4c 4c45 4354 494f         COLLECTIO
-0004bc80: 4e5f 4355 5252 454e 542c 2044 4f43 554d  N_CURRENT, DOCUM
-0004bc90: 454e 545f 320a 2020 2020 2020 2020 290a  ENT_2.        ).
-0004bca0: 2020 2020 2020 2020 6861 735f 646f 6375          has_docu
-0004bcb0: 6d65 6e74 203d 2070 6970 656c 696e 655f  ment = pipeline_
-0004bcc0: 6d61 6e61 6765 722e 7072 6f6a 6563 742e  manager.project.
-0004bcd0: 7365 7373 696f 6e2e 6861 735f 646f 6375  session.has_docu
-0004bce0: 6d65 6e74 0a20 2020 2020 2020 2073 656c  ment.        sel
-0004bcf0: 662e 6173 7365 7274 5472 7565 2868 6173  f.assertTrue(has
-0004bd00: 5f64 6f63 756d 656e 7428 434f 4c4c 4543  _document(COLLEC
-0004bd10: 5449 4f4e 5f43 5552 5245 4e54 2c20 444f  TION_CURRENT, DO
-0004bd20: 4355 4d45 4e54 5f31 2929 0a20 2020 2020  CUMENT_1)).     
-0004bd30: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-0004bd40: 7565 2868 6173 5f64 6f63 756d 656e 7428  ue(has_document(
-0004bd50: 434f 4c4c 4543 5449 4f4e 5f43 5552 5245  COLLECTION_CURRE
-0004bd60: 4e54 2c20 444f 4355 4d45 4e54 5f32 2929  NT, DOCUMENT_2))
-0004bd70: 0a0a 2020 2020 6465 6620 7465 7374 5f61  ..    def test_a
-0004bd80: 6464 5f70 6c75 675f 7661 6c75 655f 746f  dd_plug_value_to
-0004bd90: 5f64 6174 6162 6173 655f 6e6f 6e5f 6c69  _database_non_li
-0004bda0: 7374 5f74 7970 6528 7365 6c66 293a 0a20  st_type(self):. 
-0004bdb0: 2020 2020 2020 2022 2222 4f70 656e 7320         """Opens 
-0004bdc0: 6120 7072 6f6a 6563 742c 2061 6464 7320  a project, adds 
-0004bdd0: 6120 2752 656e 616d 6527 2070 726f 6365  a 'Rename' proce
-0004bde0: 7373 2c20 6578 706f 7274 7320 6120 6e6f  ss, exports a no
-0004bdf0: 6e20 6c69 7374 2074 7970 650a 2020 2020  n list type.    
-0004be00: 2020 2020 696e 7075 7420 706c 7567 2061      input plug a
-0004be10: 6e64 2061 6464 7320 6974 2074 6f20 7468  nd adds it to th
-0004be20: 6520 6461 7461 6261 7365 2e0a 0a20 2020  e database...   
-0004be30: 2020 2020 202d 2054 6573 7473 3a20 5069       - Tests: Pi
-0004be40: 7065 6c69 6e65 4d61 6e61 6765 7254 6162  pelineManagerTab
-0004be50: 2851 5769 6467 6574 292e 6164 645f 706c  (QWidget).add_pl
-0004be60: 7567 5f76 616c 7565 5f74 6f5f 6461 7461  ug_value_to_data
-0004be70: 6261 7365 2829 0a20 2020 2020 2020 2022  base().        "
-0004be80: 2222 0a0a 2020 2020 2020 2020 2320 4f70  ""..        # Op
-0004be90: 656e 7320 7072 6f6a 6563 7420 3820 616e  ens project 8 an
-0004bea0: 6420 7377 6974 6368 6573 2074 6f20 6974  d switches to it
-0004beb0: 0a20 2020 2020 2020 2070 726f 6a65 6374  .        project
-0004bec0: 5f38 5f70 6174 6820 3d20 7365 6c66 2e67  _8_path = self.g
-0004bed0: 6574 5f6e 6577 5f74 6573 745f 7072 6f6a  et_new_test_proj
-0004bee0: 6563 7428 290a 2020 2020 2020 2020 7365  ect().        se
-0004bef0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e73  lf.main_window.s
-0004bf00: 7769 7463 685f 7072 6f6a 6563 7428 7072  witch_project(pr
-0004bf10: 6f6a 6563 745f 385f 7061 7468 2c20 2270  oject_8_path, "p
-0004bf20: 726f 6a65 6374 5f38 2229 0a0a 2020 2020  roject_8")..    
-0004bf30: 2020 2020 444f 4355 4d45 4e54 5f31 203d      DOCUMENT_1 =
-0004bf40: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-0004bf50: 772e 7072 6f6a 6563 742e 7365 7373 696f  w.project.sessio
-0004bf60: 6e2e 6765 745f 646f 6375 6d65 6e74 735f  n.get_documents_
-0004bf70: 6e61 6d65 7328 0a20 2020 2020 2020 2020  names(.         
-0004bf80: 2020 2022 6375 7272 656e 7422 0a20 2020     "current".   
-0004bf90: 2020 2020 2029 5b30 5d0a 0a20 2020 2020       )[0]..     
-0004bfa0: 2020 2070 6970 656c 696e 655f 6564 6974     pipeline_edit
-0004bfb0: 6f72 5f74 6162 7320 3d20 280a 2020 2020  or_tabs = (.    
-0004bfc0: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
-0004bfd0: 6e5f 7769 6e64 6f77 2e70 6970 656c 696e  n_window.pipelin
-0004bfe0: 655f 6d61 6e61 6765 722e 7069 7065 6c69  e_manager.pipeli
-0004bff0: 6e65 4564 6974 6f72 5461 6273 0a20 2020  neEditorTabs.   
-0004c000: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-0004c010: 2320 4164 6473 2074 6865 2070 726f 6365  # Adds the proce
-0004c020: 7373 2052 656e 616d 652c 2063 7265 6174  ss Rename, creat
-0004c030: 6573 2074 6865 2022 7265 6e61 6d65 5f31  es the "rename_1
-0004c040: 2220 6e6f 6465 0a20 2020 2020 2020 2070  " node.        p
-0004c050: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
-0004c060: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
-0004c070: 6564 6974 6f72 2829 2e63 6c69 636b 5f70  editor().click_p
-0004c080: 6f73 203d 2051 506f 696e 7428 3435 302c  os = QPoint(450,
-0004c090: 2035 3030 290a 2020 2020 2020 2020 7069   500).        pi
-0004c0a0: 7065 6c69 6e65 5f65 6469 746f 725f 7461  peline_editor_ta
-0004c0b0: 6273 2e67 6574 5f63 7572 7265 6e74 5f65  bs.get_current_e
-0004c0c0: 6469 746f 7228 292e 6164 645f 6e61 6d65  ditor().add_name
-0004c0d0: 645f 7072 6f63 6573 7328 5265 6e61 6d65  d_process(Rename
-0004c0e0: 290a 2020 2020 2020 2020 7069 7065 6c69  ).        pipeli
-0004c0f0: 6e65 203d 2070 6970 656c 696e 655f 6564  ne = pipeline_ed
-0004c100: 6974 6f72 5f74 6162 732e 6765 745f 6375  itor_tabs.get_cu
-0004c110: 7272 656e 745f 7069 7065 6c69 6e65 2829  rrent_pipeline()
-0004c120: 0a0a 2020 2020 2020 2020 2320 4578 706f  ..        # Expo
-0004c130: 7274 7320 7468 6520 6d61 6e64 6174 6f72  rts the mandator
-0004c140: 7920 696e 7075 7420 616e 6420 6f75 7470  y input and outp
-0004c150: 7574 2070 6c75 6773 2066 6f72 2022 7265  ut plugs for "re
-0004c160: 6e61 6d65 5f31 220a 2020 2020 2020 2020  name_1".        
-0004c170: 7069 7065 6c69 6e65 5f65 6469 746f 725f  pipeline_editor_
-0004c180: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
-0004c190: 5f65 6469 746f 7228 292e 6375 7272 656e  _editor().curren
-0004c1a0: 745f 6e6f 6465 5f6e 616d 6520 3d20 280a  t_node_name = (.
-0004c1b0: 2020 2020 2020 2020 2020 2020 2272 656e              "ren
-0004c1c0: 616d 655f 3122 0a20 2020 2020 2020 2029  ame_1".        )
-0004c1d0: 0a20 2020 2020 2020 2028 0a20 2020 2020  .        (.     
-0004c1e0: 2020 2020 2020 2070 6970 656c 696e 655f         pipeline_
-0004c1f0: 6564 6974 6f72 5f74 6162 732e 6765 745f  editor_tabs.get_
-0004c200: 6375 7272 656e 745f 6564 6974 6f72 0a20  current_editor. 
-0004c210: 2020 2020 2020 2029 2829 2e65 7870 6f72         )().expor
-0004c220: 745f 756e 636f 6e6e 6563 7465 645f 6d61  t_unconnected_ma
-0004c230: 6e64 6174 6f72 795f 696e 7075 7473 2829  ndatory_inputs()
-0004c240: 0a20 2020 2020 2020 2028 0a20 2020 2020  .        (.     
-0004c250: 2020 2020 2020 2070 6970 656c 696e 655f         pipeline_
-0004c260: 6564 6974 6f72 5f74 6162 732e 6765 745f  editor_tabs.get_
-0004c270: 6375 7272 656e 745f 6564 6974 6f72 0a20  current_editor. 
-0004c280: 2020 2020 2020 2029 2829 2e65 7870 6f72         )().expor
-0004c290: 745f 616c 6c5f 756e 636f 6e6e 6563 7465  t_all_unconnecte
-0004c2a0: 645f 6f75 7470 7574 7328 290a 0a20 2020  d_outputs()..   
-0004c2b0: 2020 2020 206f 6c64 5f73 6361 6e5f 6e61       old_scan_na
-0004c2c0: 6d65 203d 2044 4f43 554d 454e 545f 312e  me = DOCUMENT_1.
-0004c2d0: 7370 6c69 7428 222f 2229 5b2d 315d 0a20  split("/")[-1]. 
-0004c2e0: 2020 2020 2020 206e 6577 5f73 6361 6e5f         new_scan_
-0004c2f0: 6e61 6d65 203d 2022 6e65 775f 6e61 6d65  name = "new_name
-0004c300: 2e6e 6969 220a 0a20 2020 2020 2020 2023  .nii"..        #
-0004c310: 2043 6861 6e67 6573 2074 6865 2022 5f6f   Changes the "_o
-0004c320: 7574 5f66 696c 6522 2069 6e20 7468 6520  ut_file" in the 
-0004c330: 226f 7574 7075 7473 2220 6e6f 6465 0a20  "outputs" node. 
-0004c340: 2020 2020 2020 2070 6970 656c 696e 652e         pipeline.
-0004c350: 6e6f 6465 735b 2222 5d2e 7365 745f 706c  nodes[""].set_pl
-0004c360: 7567 5f76 616c 7565 280a 2020 2020 2020  ug_value(.      
-0004c370: 2020 2020 2020 225f 6f75 745f 6669 6c65        "_out_file
-0004c380: 222c 2044 4f43 554d 454e 545f 312e 7265  ", DOCUMENT_1.re
-0004c390: 706c 6163 6528 6f6c 645f 7363 616e 5f6e  place(old_scan_n
-0004c3a0: 616d 652c 206e 6577 5f73 6361 6e5f 6e61  ame, new_scan_na
-0004c3b0: 6d65 290a 2020 2020 2020 2020 290a 0a20  me).        ).. 
-0004c3c0: 2020 2020 2020 2070 6970 656c 696e 655f         pipeline_
-0004c3d0: 6d61 6e61 6765 7220 3d20 7365 6c66 2e6d  manager = self.m
-0004c3e0: 6169 6e5f 7769 6e64 6f77 2e70 6970 656c  ain_window.pipel
-0004c3f0: 696e 655f 6d61 6e61 6765 720a 2020 2020  ine_manager.    
-0004c400: 2020 2020 7069 7065 6c69 6e65 5f6d 616e      pipeline_man
-0004c410: 6167 6572 2e77 6f72 6b66 6c6f 7720 3d20  ager.workflow = 
-0004c420: 776f 726b 666c 6f77 5f66 726f 6d5f 7069  workflow_from_pi
-0004c430: 7065 6c69 6e65 280a 2020 2020 2020 2020  peline(.        
-0004c440: 2020 2020 7069 7065 6c69 6e65 2c20 636f      pipeline, co
-0004c450: 6d70 6c65 7465 5f70 6172 616d 6574 6572  mplete_parameter
-0004c460: 733d 5472 7565 0a20 2020 2020 2020 2029  s=True.        )
-0004c470: 0a0a 2020 2020 2020 2020 6a6f 6220 3d20  ..        job = 
-0004c480: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
-0004c490: 2e77 6f72 6b66 6c6f 772e 6a6f 6273 5b30  .workflow.jobs[0
-0004c4a0: 5d0a 0a20 2020 2020 2020 2062 7269 636b  ]..        brick
-0004c4b0: 5f69 6420 3d20 7374 7228 7575 6964 2e75  _id = str(uuid.u
-0004c4c0: 7569 6434 2829 290a 2020 2020 2020 2020  uid4()).        
-0004c4d0: 6a6f 622e 7575 6964 203d 2062 7269 636b  job.uuid = brick
-0004c4e0: 5f69 640a 2020 2020 2020 2020 7069 7065  _id.        pipe
-0004c4f0: 6c69 6e65 5f6d 616e 6167 6572 2e62 7269  line_manager.bri
-0004c500: 636b 5f6c 6973 742e 6170 7065 6e64 2862  ck_list.append(b
-0004c510: 7269 636b 5f69 6429 0a0a 2020 2020 2020  rick_id)..      
-0004c520: 2020 7069 7065 6c69 6e65 5f6d 616e 6167    pipeline_manag
-0004c530: 6572 2e70 726f 6a65 6374 2e73 6573 7369  er.project.sessi
-0004c540: 6f6e 2e61 6464 5f64 6f63 756d 656e 7428  on.add_document(
-0004c550: 0a20 2020 2020 2020 2020 2020 2043 4f4c  .            COL
-0004c560: 4c45 4354 494f 4e5f 4252 4943 4b2c 2062  LECTION_BRICK, b
-0004c570: 7269 636b 5f69 640a 2020 2020 2020 2020  rick_id.        
-0004c580: 290a 0a20 2020 2020 2020 2023 2053 6574  )..        # Set
-0004c590: 7320 7468 6520 6d61 6e64 6174 6f72 7920  s the mandatory 
-0004c5a0: 706c 7567 2076 616c 7565 7320 696e 2074  plug values in t
-0004c5b0: 6865 2022 696e 7075 7473 2220 6e6f 6465  he "inputs" node
-0004c5c0: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
-0004c5d0: 652e 6e6f 6465 735b 2222 5d2e 7365 745f  e.nodes[""].set_
-0004c5e0: 706c 7567 5f76 616c 7565 2822 696e 5f66  plug_value("in_f
-0004c5f0: 696c 6522 2c20 444f 4355 4d45 4e54 5f31  ile", DOCUMENT_1
-0004c600: 290a 2020 2020 2020 2020 7069 7065 6c69  ).        pipeli
-0004c610: 6e65 2e6e 6f64 6573 5b22 225d 2e73 6574  ne.nodes[""].set
-0004c620: 5f70 6c75 675f 7661 6c75 6528 2266 6f72  _plug_value("for
-0004c630: 6d61 745f 7374 7269 6e67 222c 206e 6577  mat_string", new
-0004c640: 5f73 6361 6e5f 6e61 6d65 290a 0a20 2020  _scan_name)..   
-0004c650: 2020 2020 2070 726f 6365 7373 203d 206a       process = j
-0004c660: 6f62 2e70 726f 6365 7373 2829 0a20 2020  ob.process().   
-0004c670: 2020 2020 2070 6c75 675f 6e61 6d65 203d       plug_name =
-0004c680: 2022 696e 5f66 696c 6522 0a20 2020 2020   "in_file".     
-0004c690: 2020 2074 7261 6974 203d 2070 726f 6365     trait = proce
-0004c6a0: 7373 2e74 7261 6974 2870 6c75 675f 6e61  ss.trait(plug_na
-0004c6b0: 6d65 290a 0a20 2020 2020 2020 2069 6e70  me)..        inp
-0004c6c0: 7574 7320 3d20 7072 6f63 6573 732e 6765  uts = process.ge
-0004c6d0: 745f 696e 7075 7473 2829 0a0a 2020 2020  t_inputs()..    
-0004c6e0: 2020 2020 6174 7472 6962 7574 6573 203d      attributes =
-0004c6f0: 207b 7d0a 2020 2020 2020 2020 636f 6d70   {}.        comp
-0004c700: 6c65 7469 6f6e 203d 2050 726f 6365 7373  letion = Process
-0004c710: 436f 6d70 6c65 7469 6f6e 456e 6769 6e65  CompletionEngine
-0004c720: 2e67 6574 5f63 6f6d 706c 6574 696f 6e5f  .get_completion_
-0004c730: 656e 6769 6e65 2870 726f 6365 7373 290a  engine(process).
-0004c740: 0a20 2020 2020 2020 2069 6620 636f 6d70  .        if comp
-0004c750: 6c65 7469 6f6e 3a0a 2020 2020 2020 2020  letion:.        
-0004c760: 2020 2020 6174 7472 6962 7574 6573 203d      attributes =
-0004c770: 2063 6f6d 706c 6574 696f 6e2e 6765 745f   completion.get_
-0004c780: 6174 7472 6962 7574 655f 7661 6c75 6573  attribute_values
-0004c790: 2829 2e65 7870 6f72 745f 746f 5f64 6963  ().export_to_dic
-0004c7a0: 7428 290a 0a20 2020 2020 2020 2068 6173  t()..        has
-0004c7b0: 5f64 6f63 756d 656e 7420 3d20 7069 7065  _document = pipe
-0004c7c0: 6c69 6e65 5f6d 616e 6167 6572 2e70 726f  line_manager.pro
-0004c7d0: 6a65 6374 2e73 6573 7369 6f6e 2e68 6173  ject.session.has
-0004c7e0: 5f64 6f63 756d 656e 740a 0a20 2020 2020  _document..     
-0004c7f0: 2020 2023 2050 6c75 6720 7661 6c75 6520     # Plug value 
-0004c800: 6973 2066 696c 6520 6c6f 6361 7469 6f6e  is file location
-0004c810: 206f 7574 7369 6465 2070 726f 6a65 6374   outside project
-0004c820: 2064 6972 6563 746f 7279 0a20 2020 2020   directory.     
-0004c830: 2020 2070 6970 656c 696e 655f 6d61 6e61     pipeline_mana
-0004c840: 6765 722e 6164 645f 706c 7567 5f76 616c  ger.add_plug_val
-0004c850: 7565 5f74 6f5f 6461 7461 6261 7365 280a  ue_to_database(.
-0004c860: 2020 2020 2020 2020 2020 2020 444f 4355              DOCU
-0004c870: 4d45 4e54 5f31 2c0a 2020 2020 2020 2020  MENT_1,.        
-0004c880: 2020 2020 6272 6963 6b5f 6964 2c0a 2020      brick_id,.  
-0004c890: 2020 2020 2020 2020 2020 2222 2c0a 2020            "",.  
-0004c8a0: 2020 2020 2020 2020 2020 2272 656e 616d            "renam
-0004c8b0: 655f 3122 2c0a 2020 2020 2020 2020 2020  e_1",.          
-0004c8c0: 2020 706c 7567 5f6e 616d 652c 0a20 2020    plug_name,.   
-0004c8d0: 2020 2020 2020 2020 2022 7265 6e61 6d65           "rename
-0004c8e0: 5f31 222c 0a20 2020 2020 2020 2020 2020  _1",.           
-0004c8f0: 206a 6f62 2c0a 2020 2020 2020 2020 2020   job,.          
-0004c900: 2020 7472 6169 742c 0a20 2020 2020 2020    trait,.       
-0004c910: 2020 2020 2069 6e70 7574 732c 0a20 2020       inputs,.   
-0004c920: 2020 2020 2020 2020 2061 7474 7269 6275           attribu
-0004c930: 7465 732c 0a20 2020 2020 2020 2029 0a20  tes,.        ). 
-0004c940: 2020 2020 2020 2070 6970 656c 696e 655f         pipeline_
-0004c950: 6d61 6e61 6765 722e 7072 6f6a 6563 742e  manager.project.
-0004c960: 7365 7373 696f 6e2e 6765 745f 646f 6375  session.get_docu
-0004c970: 6d65 6e74 280a 2020 2020 2020 2020 2020  ment(.          
-0004c980: 2020 434f 4c4c 4543 5449 4f4e 5f43 5552    COLLECTION_CUR
-0004c990: 5245 4e54 2c20 444f 4355 4d45 4e54 5f31  RENT, DOCUMENT_1
-0004c9a0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-0004c9b0: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-0004c9c0: 7565 2868 6173 5f64 6f63 756d 656e 7428  ue(has_document(
-0004c9d0: 434f 4c4c 4543 5449 4f4e 5f43 5552 5245  COLLECTION_CURRE
-0004c9e0: 4e54 2c20 444f 4355 4d45 4e54 5f31 2929  NT, DOCUMENT_1))
-0004c9f0: 0a20 2020 2020 2020 2023 2050 6c75 6720  .        # Plug 
-0004ca00: 7661 6c75 6573 206f 7574 7369 6465 2074  values outside t
-0004ca10: 6865 2064 6972 6563 746f 7279 2061 7265  he directory are
-0004ca20: 206e 6f74 2072 6567 6973 7465 7265 6420   not registered 
-0004ca30: 696e 746f 2074 6865 0a20 2020 2020 2020  into the.       
-0004ca40: 2023 2064 6174 6162 6173 652c 2074 6865   # database, the
-0004ca50: 7265 666f 7265 206f 6e6c 7920 706c 7567  refore only plug
-0004ca60: 2076 616c 7565 7320 696e 7369 6465 2074   values inside t
-0004ca70: 6865 2070 726f 6a65 6374 2077 696c 6c20  he project will 
-0004ca80: 6265 2075 7365 640a 2020 2020 2020 2020  be used.        
-0004ca90: 2320 6672 6f6d 206e 6f77 206f 6e2e 0a0a  # from now on...
-0004caa0: 2020 2020 2020 2020 2320 506c 7567 2076          # Plug v
-0004cab0: 616c 7565 2069 7320 6669 6c65 206c 6f63  alue is file loc
-0004cac0: 6174 696f 6e20 696e 7369 6465 2070 726f  ation inside pro
-0004cad0: 6a65 6374 2064 6972 6563 746f 7279 0a20  ject directory. 
-0004cae0: 2020 2020 2020 2069 6e73 6964 655f 7072         inside_pr
-0004caf0: 6f6a 6563 7420 3d20 6f73 2e70 6174 682e  oject = os.path.
-0004cb00: 6a6f 696e 280a 2020 2020 2020 2020 2020  join(.          
-0004cb10: 2020 7069 7065 6c69 6e65 5f6d 616e 6167    pipeline_manag
-0004cb20: 6572 2e70 726f 6a65 6374 2e66 6f6c 6465  er.project.folde
-0004cb30: 722c 2044 4f43 554d 454e 545f 312e 7370  r, DOCUMENT_1.sp
-0004cb40: 6c69 7428 222f 2229 5b2d 315d 0a20 2020  lit("/")[-1].   
-0004cb50: 2020 2020 2029 0a20 2020 2020 2020 2070       ).        p
-0004cb60: 6970 656c 696e 655f 6d61 6e61 6765 722e  ipeline_manager.
-0004cb70: 6164 645f 706c 7567 5f76 616c 7565 5f74  add_plug_value_t
-0004cb80: 6f5f 6461 7461 6261 7365 280a 2020 2020  o_database(.    
-0004cb90: 2020 2020 2020 2020 696e 7369 6465 5f70          inside_p
-0004cba0: 726f 6a65 6374 2c0a 2020 2020 2020 2020  roject,.        
-0004cbb0: 2020 2020 6272 6963 6b5f 6964 2c0a 2020      brick_id,.  
-0004cbc0: 2020 2020 2020 2020 2020 2222 2c0a 2020            "",.  
-0004cbd0: 2020 2020 2020 2020 2020 2272 656e 616d            "renam
-0004cbe0: 655f 3122 2c0a 2020 2020 2020 2020 2020  e_1",.          
-0004cbf0: 2020 706c 7567 5f6e 616d 652c 0a20 2020    plug_name,.   
-0004cc00: 2020 2020 2020 2020 2022 7265 6e61 6d65           "rename
-0004cc10: 5f31 222c 0a20 2020 2020 2020 2020 2020  _1",.           
-0004cc20: 206a 6f62 2c0a 2020 2020 2020 2020 2020   job,.          
-0004cc30: 2020 7472 6169 742c 0a20 2020 2020 2020    trait,.       
-0004cc40: 2020 2020 2069 6e70 7574 732c 0a20 2020       inputs,.   
-0004cc50: 2020 2020 2020 2020 2061 7474 7269 6275           attribu
-0004cc60: 7465 732c 0a20 2020 2020 2020 2029 0a0a  tes,.        )..
-0004cc70: 2020 2020 2020 2020 2320 506c 7567 2076          # Plug v
-0004cc80: 616c 7565 2074 6861 7420 6973 2061 6c72  alue that is alr
-0004cc90: 6561 6479 2069 6e20 7468 6520 6461 7461  eady in the data
-0004cca0: 6261 7365 0a20 2020 2020 2020 2070 6970  base.        pip
-0004ccb0: 656c 696e 655f 6d61 6e61 6765 722e 6164  eline_manager.ad
-0004ccc0: 645f 706c 7567 5f76 616c 7565 5f74 6f5f  d_plug_value_to_
-0004ccd0: 6461 7461 6261 7365 280a 2020 2020 2020  database(.      
-0004cce0: 2020 2020 2020 696e 7369 6465 5f70 726f        inside_pro
-0004ccf0: 6a65 6374 2c0a 2020 2020 2020 2020 2020  ject,.          
-0004cd00: 2020 6272 6963 6b5f 6964 2c0a 2020 2020    brick_id,.    
-0004cd10: 2020 2020 2020 2020 2222 2c0a 2020 2020          "",.    
-0004cd20: 2020 2020 2020 2020 2272 656e 616d 655f          "rename_
-0004cd30: 3122 2c0a 2020 2020 2020 2020 2020 2020  1",.            
-0004cd40: 706c 7567 5f6e 616d 652c 0a20 2020 2020  plug_name,.     
-0004cd50: 2020 2020 2020 2022 7265 6e61 6d65 5f31         "rename_1
-0004cd60: 222c 0a20 2020 2020 2020 2020 2020 206a  ",.            j
-0004cd70: 6f62 2c0a 2020 2020 2020 2020 2020 2020  ob,.            
-0004cd80: 7472 6169 742c 0a20 2020 2020 2020 2020  trait,.         
-0004cd90: 2020 2069 6e70 7574 732c 0a20 2020 2020     inputs,.     
-0004cda0: 2020 2020 2020 2061 7474 7269 6275 7465         attribute
-0004cdb0: 732c 0a20 2020 2020 2020 2029 0a0a 2020  s,.        )..  
-0004cdc0: 2020 2020 2020 2320 506c 7567 2076 616c        # Plug val
-0004cdd0: 7565 2069 7320 7461 670a 2020 2020 2020  ue is tag.      
-0004cde0: 2020 7461 675f 7661 6c75 6520 3d20 6f73    tag_value = os
-0004cdf0: 2e70 6174 682e 6a6f 696e 2870 6970 656c  .path.join(pipel
-0004ce00: 696e 655f 6d61 6e61 6765 722e 7072 6f6a  ine_manager.proj
-0004ce10: 6563 742e 666f 6c64 6572 2c20 2274 6167  ect.folder, "tag
-0004ce20: 2e67 7a22 290a 2020 2020 2020 2020 7069  .gz").        pi
-0004ce30: 7065 6c69 6e65 5f6d 616e 6167 6572 2e61  peline_manager.a
-0004ce40: 6464 5f70 6c75 675f 7661 6c75 655f 746f  dd_plug_value_to
-0004ce50: 5f64 6174 6162 6173 6528 0a20 2020 2020  _database(.     
-0004ce60: 2020 2020 2020 2074 6167 5f76 616c 7565         tag_value
-0004ce70: 2c0a 2020 2020 2020 2020 2020 2020 6272  ,.            br
-0004ce80: 6963 6b5f 6964 2c0a 2020 2020 2020 2020  ick_id,.        
-0004ce90: 2020 2020 2222 2c0a 2020 2020 2020 2020      "",.        
-0004cea0: 2020 2020 2272 656e 616d 655f 3122 2c0a      "rename_1",.
-0004ceb0: 2020 2020 2020 2020 2020 2020 706c 7567              plug
-0004cec0: 5f6e 616d 652c 0a20 2020 2020 2020 2020  _name,.         
-0004ced0: 2020 2022 7265 6e61 6d65 5f31 222c 0a20     "rename_1",. 
-0004cee0: 2020 2020 2020 2020 2020 206a 6f62 2c0a             job,.
-0004cef0: 2020 2020 2020 2020 2020 2020 7472 6169              trai
-0004cf00: 742c 0a20 2020 2020 2020 2020 2020 2069  t,.            i
-0004cf10: 6e70 7574 732c 0a20 2020 2020 2020 2020  nputs,.         
-0004cf20: 2020 2061 7474 7269 6275 7465 732c 0a20     attributes,. 
-0004cf30: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-0004cf40: 2020 2320 506c 7567 2076 616c 7565 2069    # Plug value i
-0004cf50: 7320 2e6d 6174 0a20 2020 2020 2020 206d  s .mat.        m
-0004cf60: 6174 5f76 616c 7565 203d 206f 732e 7061  at_value = os.pa
-0004cf70: 7468 2e6a 6f69 6e28 7069 7065 6c69 6e65  th.join(pipeline
-0004cf80: 5f6d 616e 6167 6572 2e70 726f 6a65 6374  _manager.project
-0004cf90: 2e66 6f6c 6465 722c 2022 6669 6c65 2e6d  .folder, "file.m
-0004cfa0: 6174 2229 0a20 2020 2020 2020 2070 6970  at").        pip
-0004cfb0: 656c 696e 655f 6d61 6e61 6765 722e 6164  eline_manager.ad
-0004cfc0: 645f 706c 7567 5f76 616c 7565 5f74 6f5f  d_plug_value_to_
-0004cfd0: 6461 7461 6261 7365 280a 2020 2020 2020  database(.      
-0004cfe0: 2020 2020 2020 6d61 745f 7661 6c75 652c        mat_value,
-0004cff0: 0a20 2020 2020 2020 2020 2020 2062 7269  .            bri
-0004d000: 636b 5f69 642c 0a20 2020 2020 2020 2020  ck_id,.         
-0004d010: 2020 2022 222c 0a20 2020 2020 2020 2020     "",.         
-0004d020: 2020 2022 7265 6e61 6d65 5f31 222c 0a20     "rename_1",. 
-0004d030: 2020 2020 2020 2020 2020 2070 6c75 675f             plug_
-0004d040: 6e61 6d65 2c0a 2020 2020 2020 2020 2020  name,.          
-0004d050: 2020 2272 656e 616d 655f 3122 2c0a 2020    "rename_1",.  
-0004d060: 2020 2020 2020 2020 2020 6a6f 622c 0a20            job,. 
-0004d070: 2020 2020 2020 2020 2020 2074 7261 6974             trait
-0004d080: 2c0a 2020 2020 2020 2020 2020 2020 696e  ,.            in
-0004d090: 7075 7473 2c0a 2020 2020 2020 2020 2020  puts,.          
-0004d0a0: 2020 6174 7472 6962 7574 6573 2c0a 2020    attributes,.  
-0004d0b0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
-0004d0c0: 2023 2050 6c75 6720 7661 6c75 6520 6973   # Plug value is
-0004d0d0: 202e 7478 740a 2020 2020 2020 2020 7478   .txt.        tx
-0004d0e0: 745f 7661 6c75 6520 3d20 6f73 2e70 6174  t_value = os.pat
-0004d0f0: 682e 6a6f 696e 2870 6970 656c 696e 655f  h.join(pipeline_
-0004d100: 6d61 6e61 6765 722e 7072 6f6a 6563 742e  manager.project.
-0004d110: 666f 6c64 6572 2c20 2266 696c 652e 7478  folder, "file.tx
-0004d120: 7422 290a 2020 2020 2020 2020 7069 7065  t").        pipe
-0004d130: 6c69 6e65 5f6d 616e 6167 6572 2e61 6464  line_manager.add
-0004d140: 5f70 6c75 675f 7661 6c75 655f 746f 5f64  _plug_value_to_d
-0004d150: 6174 6162 6173 6528 0a20 2020 2020 2020  atabase(.       
-0004d160: 2020 2020 2074 7874 5f76 616c 7565 2c0a       txt_value,.
-0004d170: 2020 2020 2020 2020 2020 2020 6272 6963              bric
-0004d180: 6b5f 6964 2c0a 2020 2020 2020 2020 2020  k_id,.          
-0004d190: 2020 2222 2c0a 2020 2020 2020 2020 2020    "",.          
-0004d1a0: 2020 2272 656e 616d 655f 3122 2c0a 2020    "rename_1",.  
-0004d1b0: 2020 2020 2020 2020 2020 706c 7567 5f6e            plug_n
-0004d1c0: 616d 652c 0a20 2020 2020 2020 2020 2020  ame,.           
-0004d1d0: 2022 7265 6e61 6d65 5f31 222c 0a20 2020   "rename_1",.   
-0004d1e0: 2020 2020 2020 2020 206a 6f62 2c0a 2020           job,.  
-0004d1f0: 2020 2020 2020 2020 2020 7472 6169 742c            trait,
-0004d200: 0a20 2020 2020 2020 2020 2020 2069 6e70  .            inp
-0004d210: 7574 732c 0a20 2020 2020 2020 2020 2020  uts,.           
-0004d220: 2061 7474 7269 6275 7465 732c 0a20 2020   attributes,.   
-0004d230: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-0004d240: 2320 2770 6172 656e 745f 6669 6c65 7327  # 'parent_files'
-0004d250: 2061 7265 2065 7874 7261 6374 6564 2066   are extracted f
-0004d260: 726f 6d20 7468 6520 2769 6e68 6572 6974  rom the 'inherit
-0004d270: 616e 6365 5f64 6963 7427 2061 6e64 0a20  ance_dict' and. 
-0004d280: 2020 2020 2020 2023 2027 6175 746f 5f69         # 'auto_i
-0004d290: 6e68 6572 6974 616e 6365 5f64 6963 7427  nheritance_dict'
-0004d2a0: 2061 7474 7269 6275 7465 7320 6f66 2027   attributes of '
-0004d2b0: 6a6f 6227 2e20 5468 6579 2074 6573 7420  job'. They test 
-0004d2c0: 6361 7365 7320 6172 650a 2020 2020 2020  cases are.      
-0004d2d0: 2020 2320 6c69 7374 6564 2062 656c 6f77    # listed below
-0004d2e0: 3a0a 2020 2020 2020 2020 2320 2770 6172  :.        # 'par
-0004d2f0: 656e 745f 6669 6c65 7327 2069 6e73 6964  ent_files' insid
-0004d300: 6520 2761 7574 6f5f 696e 6865 7269 7461  e 'auto_inherita
-0004d310: 6e63 655f 6469 6374 270a 2020 2020 2020  nce_dict'.      
-0004d320: 2020 6a6f 622e 6175 746f 5f69 6e68 6572    job.auto_inher
-0004d330: 6974 616e 6365 5f64 6963 7420 3d20 7b69  itance_dict = {i
-0004d340: 6e73 6964 655f 7072 6f6a 6563 743a 2022  nside_project: "
-0004d350: 7061 7265 6e74 5f66 696c 6573 5f76 616c  parent_files_val
-0004d360: 7565 227d 0a20 2020 2020 2020 2070 6970  ue"}.        pip
-0004d370: 656c 696e 655f 6d61 6e61 6765 722e 6164  eline_manager.ad
-0004d380: 645f 706c 7567 5f76 616c 7565 5f74 6f5f  d_plug_value_to_
-0004d390: 6461 7461 6261 7365 280a 2020 2020 2020  database(.      
-0004d3a0: 2020 2020 2020 696e 7369 6465 5f70 726f        inside_pro
-0004d3b0: 6a65 6374 2c0a 2020 2020 2020 2020 2020  ject,.          
-0004d3c0: 2020 6272 6963 6b5f 6964 2c0a 2020 2020    brick_id,.    
-0004d3d0: 2020 2020 2020 2020 2222 2c0a 2020 2020          "",.    
-0004d3e0: 2020 2020 2020 2020 2272 656e 616d 655f          "rename_
-0004d3f0: 3122 2c0a 2020 2020 2020 2020 2020 2020  1",.            
-0004d400: 706c 7567 5f6e 616d 652c 0a20 2020 2020  plug_name,.     
-0004d410: 2020 2020 2020 2022 7265 6e61 6d65 5f31         "rename_1
-0004d420: 222c 0a20 2020 2020 2020 2020 2020 206a  ",.            j
-0004d430: 6f62 2c0a 2020 2020 2020 2020 2020 2020  ob,.            
-0004d440: 7472 6169 742c 0a20 2020 2020 2020 2020  trait,.         
-0004d450: 2020 2069 6e70 7574 732c 0a20 2020 2020     inputs,.     
-0004d460: 2020 2020 2020 2061 7474 7269 6275 7465         attribute
-0004d470: 732c 0a20 2020 2020 2020 2029 0a0a 2020  s,.        )..  
-0004d480: 2020 2020 2020 2320 2770 6172 656e 745f        # 'parent_
-0004d490: 6669 6c65 7327 2069 6e73 6964 6520 2769  files' inside 'i
-0004d4a0: 6e68 6572 6974 616e 6365 5f64 6963 7427  nheritance_dict'
-0004d4b0: 0a20 2020 2020 2020 206a 6f62 2e61 7574  .        job.aut
-0004d4c0: 6f5f 696e 6865 7269 7461 6e63 655f 6469  o_inheritance_di
-0004d4d0: 6374 203d 204e 6f6e 650a 2020 2020 2020  ct = None.      
-0004d4e0: 2020 6a6f 622e 696e 6865 7269 7461 6e63    job.inheritanc
-0004d4f0: 655f 6469 6374 203d 207b 696e 7369 6465  e_dict = {inside
-0004d500: 5f70 726f 6a65 6374 3a20 2270 6172 656e  _project: "paren
-0004d510: 745f 6669 6c65 735f 7661 6c75 6522 7d0a  t_files_value"}.
-0004d520: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
-0004d530: 5f6d 616e 6167 6572 2e61 6464 5f70 6c75  _manager.add_plu
-0004d540: 675f 7661 6c75 655f 746f 5f64 6174 6162  g_value_to_datab
-0004d550: 6173 6528 0a20 2020 2020 2020 2020 2020  ase(.           
-0004d560: 2069 6e73 6964 655f 7072 6f6a 6563 742c   inside_project,
-0004d570: 0a20 2020 2020 2020 2020 2020 2062 7269  .            bri
-0004d580: 636b 5f69 642c 0a20 2020 2020 2020 2020  ck_id,.         
-0004d590: 2020 2022 222c 0a20 2020 2020 2020 2020     "",.         
-0004d5a0: 2020 2022 7265 6e61 6d65 5f31 222c 0a20     "rename_1",. 
-0004d5b0: 2020 2020 2020 2020 2020 2070 6c75 675f             plug_
-0004d5c0: 6e61 6d65 2c0a 2020 2020 2020 2020 2020  name,.          
-0004d5d0: 2020 2272 656e 616d 655f 3122 2c0a 2020    "rename_1",.  
-0004d5e0: 2020 2020 2020 2020 2020 6a6f 622c 0a20            job,. 
-0004d5f0: 2020 2020 2020 2020 2020 2074 7261 6974             trait
-0004d600: 2c0a 2020 2020 2020 2020 2020 2020 696e  ,.            in
-0004d610: 7075 7473 2c0a 2020 2020 2020 2020 2020  puts,.          
-0004d620: 2020 6174 7472 6962 7574 6573 2c0a 2020    attributes,.  
-0004d630: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
-0004d640: 2023 2027 7061 7265 6e74 5f66 696c 6573   # 'parent_files
-0004d650: 2720 696e 7369 6465 2027 696e 6865 7269  ' inside 'inheri
-0004d660: 7461 6e63 655f 6469 6374 272c 2064 6963  tance_dict', dic
-0004d670: 7420 7479 7065 0a20 2020 2020 2020 206a  t type.        j
-0004d680: 6f62 2e69 6e68 6572 6974 616e 6365 5f64  ob.inheritance_d
-0004d690: 6963 7420 3d20 7b0a 2020 2020 2020 2020  ict = {.        
-0004d6a0: 2020 2020 696e 7369 6465 5f70 726f 6a65      inside_proje
-0004d6b0: 6374 3a20 7b0a 2020 2020 2020 2020 2020  ct: {.          
-0004d6c0: 2020 2020 2020 226f 776e 5f74 6167 7322        "own_tags"
-0004d6d0: 3a20 5b0a 2020 2020 2020 2020 2020 2020  : [.            
-0004d6e0: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
-0004d6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004d700: 2020 226e 616d 6522 3a20 2274 6167 5f6e    "name": "tag_n
-0004d710: 616d 6522 2c0a 2020 2020 2020 2020 2020  ame",.          
-0004d720: 2020 2020 2020 2020 2020 2020 2020 2266                "f
-0004d730: 6965 6c64 5f74 7970 6522 3a20 2273 7472  ield_type": "str
-0004d740: 696e 6722 2c0a 2020 2020 2020 2020 2020  ing",.          
-0004d750: 2020 2020 2020 2020 2020 2020 2020 2264                "d
-0004d760: 6573 6372 6970 7469 6f6e 223a 2022 6465  escription": "de
-0004d770: 7363 7269 7074 696f 6e5f 636f 6e74 656e  scription_conten
-0004d780: 7422 2c0a 2020 2020 2020 2020 2020 2020  t",.            
-0004d790: 2020 2020 2020 2020 2020 2020 2276 6973              "vis
-0004d7a0: 6962 696c 6974 7922 3a20 2276 6973 6962  ibility": "visib
-0004d7b0: 696c 6974 795f 636f 6e74 656e 7422 2c0a  ility_content",.
-0004d7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004d7d0: 2020 2020 2020 2020 226f 7269 6769 6e22          "origin"
-0004d7e0: 3a20 226f 7269 6769 6e5f 636f 6e74 656e  : "origin_conten
-0004d7f0: 7422 2c0a 2020 2020 2020 2020 2020 2020  t",.            
-0004d800: 2020 2020 2020 2020 2020 2020 2275 6e69              "uni
-0004d810: 7422 3a20 2275 6e69 745f 636f 6e74 656e  t": "unit_conten
-0004d820: 7422 2c0a 2020 2020 2020 2020 2020 2020  t",.            
-0004d830: 2020 2020 2020 2020 2020 2020 2276 616c              "val
-0004d840: 7565 223a 2022 7661 6c75 655f 636f 6e74  ue": "value_cont
-0004d850: 656e 7422 2c0a 2020 2020 2020 2020 2020  ent",.          
-0004d860: 2020 2020 2020 2020 2020 2020 2020 2264                "d
-0004d870: 6566 6175 6c74 5f76 616c 7565 223a 2022  efault_value": "
-0004d880: 6465 6661 756c 745f 7661 6c75 655f 636f  default_value_co
-0004d890: 6e74 656e 7422 2c0a 2020 2020 2020 2020  ntent",.        
-0004d8a0: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-0004d8b0: 2020 2020 2020 2020 2020 2020 2020 5d2c                ],
-0004d8c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0004d8d0: 2022 7061 7265 6e74 223a 2022 7061 7265   "parent": "pare
-0004d8e0: 6e74 5f63 6f6e 7465 6e74 222c 0a20 2020  nt_content",.   
-0004d8f0: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-0004d900: 2020 207d 0a20 2020 2020 2020 2070 6970     }.        pip
-0004d910: 656c 696e 655f 6d61 6e61 6765 722e 6164  eline_manager.ad
-0004d920: 645f 706c 7567 5f76 616c 7565 5f74 6f5f  d_plug_value_to_
-0004d930: 6461 7461 6261 7365 280a 2020 2020 2020  database(.      
-0004d940: 2020 2020 2020 696e 7369 6465 5f70 726f        inside_pro
-0004d950: 6a65 6374 2c0a 2020 2020 2020 2020 2020  ject,.          
-0004d960: 2020 6272 6963 6b5f 6964 2c0a 2020 2020    brick_id,.    
-0004d970: 2020 2020 2020 2020 2222 2c0a 2020 2020          "",.    
-0004d980: 2020 2020 2020 2020 2272 656e 616d 655f          "rename_
-0004d990: 3122 2c0a 2020 2020 2020 2020 2020 2020  1",.            
-0004d9a0: 706c 7567 5f6e 616d 652c 0a20 2020 2020  plug_name,.     
-0004d9b0: 2020 2020 2020 2022 7265 6e61 6d65 5f31         "rename_1
-0004d9c0: 222c 0a20 2020 2020 2020 2020 2020 206a  ",.            j
-0004d9d0: 6f62 2c0a 2020 2020 2020 2020 2020 2020  ob,.            
-0004d9e0: 7472 6169 742c 0a20 2020 2020 2020 2020  trait,.         
-0004d9f0: 2020 2069 6e70 7574 732c 0a20 2020 2020     inputs,.     
-0004da00: 2020 2020 2020 2061 7474 7269 6275 7465         attribute
-0004da10: 732c 0a20 2020 2020 2020 2029 0a0a 2020  s,.        )..  
-0004da20: 2020 2020 2020 2320 2770 6172 656e 745f        # 'parent_
-0004da30: 6669 6c65 7327 2069 6e73 6964 6520 2769  files' inside 'i
-0004da40: 6e68 6572 6974 616e 6365 5f64 6963 7427  nheritance_dict'
-0004da50: 2c20 6f75 7470 7574 2069 7320 6f6e 6520  , output is one 
-0004da60: 6f66 2074 6865 2069 6e70 7574 730a 2020  of the inputs.  
-0004da70: 2020 2020 2020 6a6f 622e 696e 6865 7269        job.inheri
-0004da80: 7461 6e63 655f 6469 6374 203d 207b 0a20  tance_dict = {. 
-0004da90: 2020 2020 2020 2020 2020 2069 6e73 6964             insid
-0004daa0: 655f 7072 6f6a 6563 743a 207b 0a20 2020  e_project: {.   
-0004dab0: 2020 2020 2020 2020 2020 2020 2022 6f77               "ow
-0004dac0: 6e5f 7461 6773 223a 205b 0a20 2020 2020  n_tags": [.     
-0004dad0: 2020 2020 2020 2020 2020 2020 2020 207b                 {
-0004dae0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0004daf0: 2020 2020 2020 2020 2022 6e61 6d65 223a           "name":
-0004db00: 2022 7461 675f 6e61 6d65 222c 0a20 2020   "tag_name",.   
-0004db10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004db20: 2020 2020 2022 6669 656c 645f 7479 7065       "field_type
-0004db30: 223a 2022 7374 7269 6e67 222c 0a20 2020  ": "string",.   
-0004db40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004db50: 2020 2020 2022 6465 7363 7269 7074 696f       "descriptio
-0004db60: 6e22 3a20 2264 6573 6372 6970 7469 6f6e  n": "description
-0004db70: 5f63 6f6e 7465 6e74 222c 0a20 2020 2020  _content",.     
-0004db80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004db90: 2020 2022 7669 7369 6269 6c69 7479 223a     "visibility":
-0004dba0: 2022 7669 7369 6269 6c69 7479 5f63 6f6e   "visibility_con
-0004dbb0: 7465 6e74 222c 0a20 2020 2020 2020 2020  tent",.         
-0004dbc0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0004dbd0: 6f72 6967 696e 223a 2022 6f72 6967 696e  origin": "origin
-0004dbe0: 5f63 6f6e 7465 6e74 222c 0a20 2020 2020  _content",.     
-0004dbf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004dc00: 2020 2022 756e 6974 223a 2022 756e 6974     "unit": "unit
-0004dc10: 5f63 6f6e 7465 6e74 222c 0a20 2020 2020  _content",.     
-0004dc20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004dc30: 2020 2022 7661 6c75 6522 3a20 2276 616c     "value": "val
-0004dc40: 7565 5f63 6f6e 7465 6e74 222c 0a20 2020  ue_content",.   
-0004dc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004dc60: 2020 2020 2022 6465 6661 756c 745f 7661       "default_va
-0004dc70: 6c75 6522 3a20 2264 6566 6175 6c74 5f76  lue": "default_v
-0004dc80: 616c 7565 5f63 6f6e 7465 6e74 222c 0a20  alue_content",. 
-0004dc90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0004dca0: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
-0004dcb0: 2020 2020 205d 2c0a 2020 2020 2020 2020       ],.        
-0004dcc0: 2020 2020 2020 2020 2270 6172 656e 7422          "parent"
-0004dcd0: 3a20 2270 6172 656e 745f 636f 6e74 656e  : "parent_conten
-0004dce0: 7422 2c0a 2020 2020 2020 2020 2020 2020  t",.            
-0004dcf0: 2020 2020 226f 7574 7075 7422 3a20 696e      "output": in
-0004dd00: 7369 6465 5f70 726f 6a65 6374 2c0a 2020  side_project,.  
-0004dd10: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-0004dd20: 2020 2020 7d0a 0a20 2020 2020 2020 2070      }..        p
-0004dd30: 6970 656c 696e 655f 6d61 6e61 6765 722e  ipeline_manager.
-0004dd40: 6164 645f 706c 7567 5f76 616c 7565 5f74  add_plug_value_t
-0004dd50: 6f5f 6461 7461 6261 7365 280a 2020 2020  o_database(.    
-0004dd60: 2020 2020 2020 2020 696e 7369 6465 5f70          inside_p
-0004dd70: 726f 6a65 6374 2c0a 2020 2020 2020 2020  roject,.        
-0004dd80: 2020 2020 6272 6963 6b5f 6964 2c0a 2020      brick_id,.  
-0004dd90: 2020 2020 2020 2020 2020 2222 2c0a 2020            "",.  
-0004dda0: 2020 2020 2020 2020 2020 2272 656e 616d            "renam
-0004ddb0: 655f 3122 2c0a 2020 2020 2020 2020 2020  e_1",.          
-0004ddc0: 2020 706c 7567 5f6e 616d 652c 0a20 2020    plug_name,.   
-0004ddd0: 2020 2020 2020 2020 2022 7265 6e61 6d65           "rename
-0004dde0: 5f31 222c 0a20 2020 2020 2020 2020 2020  _1",.           
-0004ddf0: 206a 6f62 2c0a 2020 2020 2020 2020 2020   job,.          
-0004de00: 2020 7472 6169 742c 0a20 2020 2020 2020    trait,.       
-0004de10: 2020 2020 2069 6e70 7574 732c 0a20 2020       inputs,.   
-0004de20: 2020 2020 2020 2020 2061 7474 7269 6275           attribu
-0004de30: 7465 732c 0a20 2020 2020 2020 2029 0a0a  tes,.        )..
-0004de40: 2020 2020 6465 6620 7465 7374 5f61 6464      def test_add
-0004de50: 5f70 6c75 675f 7661 6c75 655f 746f 5f64  _plug_value_to_d
-0004de60: 6174 6162 6173 655f 7365 7665 7261 6c5f  atabase_several_
-0004de70: 696e 7075 7473 2873 656c 6629 3a0a 2020  inputs(self):.  
-0004de80: 2020 2020 2020 2222 2243 7265 6174 6573        """Creates
-0004de90: 2061 206e 6577 2070 726f 6a65 6374 2066   a new project f
-0004dea0: 6f6c 6465 722c 2061 6464 7320 6120 2752  older, adds a 'R
-0004deb0: 656e 616d 6527 2070 726f 6365 7373 2c20  ename' process, 
-0004dec0: 6578 706f 7274 7320 610a 2020 2020 2020  exports a.      
-0004ded0: 2020 6e6f 6e20 6c69 7374 2074 7970 6520    non list type 
-0004dee0: 696e 7075 7420 706c 7567 2061 6e64 2077  input plug and w
-0004def0: 6974 6820 7365 7665 7261 6c20 706f 7373  ith several poss
-0004df00: 6962 6c65 2069 6e70 7574 732e 0a0a 2020  ible inputs...  
-0004df10: 2020 2020 2020 496e 6465 7065 6e64 656e        Independen
-0004df20: 746c 7920 6f70 656e 7320 616e 2069 6e68  tly opens an inh
-0004df30: 6572 6974 616e 6365 2064 6963 7420 706f  eritance dict po
-0004df40: 702d 7570 2e0a 0a20 2020 2020 2020 2054  p-up...        T
-0004df50: 6865 2074 6573 7420 6361 7365 7320 6172  he test cases ar
-0004df60: 6520 6469 7669 6465 6420 696e 746f 3a0a  e divided into:.
-0004df70: 2020 2020 2020 2020 2d20 3129 2027 7061          - 1) 'pa
-0004df80: 7265 6e74 5f66 696c 6573 2720 6973 2061  rent_files' is a
-0004df90: 2064 6963 7420 7769 7468 2032 206b 6579   dict with 2 key
-0004dfa0: 7320 616e 6420 6964 656e 7469 6361 6c20  s and identical 
-0004dfb0: 7661 6c75 6573 0a20 2020 2020 2020 202d  values.        -
-0004dfc0: 2032 2920 2770 6172 656e 745f 6669 6c65   2) 'parent_file
-0004dfd0: 7327 2069 7320 6120 6469 6374 2077 6974  s' is a dict wit
-0004dfe0: 6820 3220 6b65 7973 2061 6e64 2064 6973  h 2 keys and dis
-0004dff0: 7469 6e63 7420 7661 6c75 6573 0a20 2020  tinct values.   
-0004e000: 2020 2020 202d 2033 2920 276d 6f63 6b5f       - 3) 'mock_
-0004e010: 6b65 795f 3227 2069 7320 696e 2027 7070  key_2' is in 'pp
-0004e020: 6c5f 6d61 6e61 6765 722e 6b65 7927 2069  l_manager.key' i
-0004e030: 6e64 6578 6564 2062 7920 7468 6520 6e6f  ndexed by the no
-0004e040: 6465 206e 616d 650a 2020 2020 2020 2020  de name.        
-0004e050: 2d20 3429 2027 6d6f 636b 5f6b 6579 5f32  - 4) 'mock_key_2
-0004e060: 2720 6973 2069 6e20 2770 706c 5f6d 616e  ' is in 'ppl_man
-0004e070: 6167 6572 2e6b 6579 2720 696e 6465 7865  ager.key' indexe
-0004e080: 6420 6279 2074 6865 206e 6f64 6520 6e61  d by the node na
-0004e090: 6d65 202b 0a20 2020 2020 2020 2020 2020  me +.           
-0004e0a0: 2020 706c 7567 2076 616c 7565 0a0a 2020    plug value..  
-0004e0b0: 2020 2020 2020 2d20 5465 7374 733a 0a20        - Tests:. 
-0004e0c0: 2020 2020 2020 2020 2020 202d 2050 6970             - Pip
-0004e0d0: 656c 696e 654d 616e 6167 6572 5461 622e  elineManagerTab.
-0004e0e0: 6164 645f 706c 7567 5f76 616c 7565 5f74  add_plug_value_t
-0004e0f0: 6f5f 6461 7461 6261 7365 0a20 2020 2020  o_database.     
-0004e100: 2020 2020 2020 202d 2050 6f70 5570 496e         - PopUpIn
-0004e110: 6865 7269 7461 6e63 6544 6963 742e 0a0a  heritanceDict...
-0004e120: 2020 2020 2020 2020 2d20 4d6f 636b 733a          - Mocks:
-0004e130: 0a20 2020 2020 2020 2020 2020 202d 2050  .            - P
-0004e140: 6f70 5570 496e 6865 7269 7461 6e63 6544  opUpInheritanceD
-0004e150: 6963 742e 6578 6563 0a20 2020 2020 2020  ict.exec.       
-0004e160: 2022 2222 0a0a 2020 2020 2020 2020 6465   """..        de
-0004e170: 6620 6d6f 636b 5f67 6574 5f64 6f63 756d  f mock_get_docum
-0004e180: 656e 7428 636f 6c6c 6563 7469 6f6e 2c20  ent(collection, 
-0004e190: 7265 6c66 696c 6529 3a0a 0a20 2020 2020  relfile):..     
-0004e1a0: 2020 2020 2020 2053 4341 4e5f 315f 203d         SCAN_1_ =
-0004e1b0: 2053 4341 4e5f 310a 0a20 2020 2020 2020   SCAN_1..       
-0004e1c0: 2020 2020 2069 6620 7265 6c66 696c 6520       if relfile 
-0004e1d0: 3d3d 2022 6d6f 636b 5f76 616c 5f31 223a  == "mock_val_1":
-0004e1e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0004e1f0: 2053 4341 4e5f 315f 2e5f 7661 6c75 6573   SCAN_1_._values
-0004e200: 5b33 5d20 3d20 2245 7870 2054 7970 6520  [3] = "Exp Type 
-0004e210: 3122 0a20 2020 2020 2020 2020 2020 2020  1".             
-0004e220: 2020 2072 6574 7572 6e20 5343 414e 5f31     return SCAN_1
-0004e230: 5f0a 2020 2020 2020 2020 2020 2020 656c  _.            el
-0004e240: 6966 2072 656c 6669 6c65 203d 3d20 226d  if relfile == "m
-0004e250: 6f63 6b5f 7661 6c5f 3222 3a0a 2020 2020  ock_val_2":.    
-0004e260: 2020 2020 2020 2020 2020 2020 5343 414e              SCAN
-0004e270: 5f31 5f2e 5f76 616c 7565 735b 335d 203d  _1_._values[3] =
-0004e280: 2022 4578 7020 5479 7065 2032 220a 2020   "Exp Type 2".  
-0004e290: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0004e2a0: 7475 726e 2053 4341 4e5f 315f 0a0a 2020  turn SCAN_1_..  
-0004e2b0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0004e2c0: 204e 6f6e 650a 0a20 2020 2020 2020 2023   None..        #
-0004e2d0: 2054 686f 7365 206d 6574 686f 6473 2061   Those methods a
-0004e2e0: 7265 2063 616c 6c65 6420 7072 696f 7220  re called prior 
-0004e2f0: 746f 2061 6464 696e 6720 6120 706c 7567  to adding a plug
-0004e300: 2074 6f20 7468 6520 6461 7461 6261 7365   to the database
-0004e310: 0a20 2020 2020 2020 2064 6566 2072 6573  .        def res
-0004e320: 6574 5f69 6e68 6572 6974 616e 6365 5f64  et_inheritance_d
-0004e330: 6963 7473 2829 3a0a 2020 2020 2020 2020  icts():.        
-0004e340: 2020 2020 6a6f 622e 696e 6865 7269 7461      job.inherita
-0004e350: 6e63 655f 6469 6374 203d 207b 444f 4355  nce_dict = {DOCU
-0004e360: 4d45 4e54 5f31 3a20 4e6f 6e65 7d0a 2020  MENT_1: None}.  
-0004e370: 2020 2020 2020 2020 2020 6a6f 622e 6175            job.au
-0004e380: 746f 5f69 6e68 6572 6974 616e 6365 5f64  to_inheritance_d
-0004e390: 6963 7420 3d20 7b44 4f43 554d 454e 545f  ict = {DOCUMENT_
-0004e3a0: 313a 2070 6172 656e 745f 6669 6c65 737d  1: parent_files}
-0004e3b0: 0a0a 2020 2020 2020 2020 6465 6620 7265  ..        def re
-0004e3c0: 7365 745f 636f 6c6c 6563 7469 6f6e 7328  set_collections(
-0004e3d0: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
-0004e3e0: 6620 7365 7373 696f 6e2e 6861 735f 646f  f session.has_do
-0004e3f0: 6375 6d65 6e74 2843 4f4c 4c45 4354 494f  cument(COLLECTIO
-0004e400: 4e5f 4355 5252 454e 542c 2050 5f56 414c  N_CURRENT, P_VAL
-0004e410: 5545 293a 0a20 2020 2020 2020 2020 2020  UE):.           
-0004e420: 2020 2020 2073 6573 7369 6f6e 2e72 656d       session.rem
-0004e430: 6f76 655f 646f 6375 6d65 6e74 2843 4f4c  ove_document(COL
-0004e440: 4c45 4354 494f 4e5f 4355 5252 454e 542c  LECTION_CURRENT,
-0004e450: 2050 5f56 414c 5545 290a 2020 2020 2020   P_VALUE).      
-0004e460: 2020 2020 2020 6966 2073 6573 7369 6f6e        if session
-0004e470: 2e68 6173 5f64 6f63 756d 656e 7428 434f  .has_document(CO
-0004e480: 4c4c 4543 5449 4f4e 5f43 5552 5245 4e54  LLECTION_CURRENT
-0004e490: 2c20 444f 4355 4d45 4e54 5f31 293a 0a20  , DOCUMENT_1):. 
-0004e4a0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0004e4b0: 6573 7369 6f6e 2e72 656d 6f76 655f 646f  ession.remove_do
-0004e4c0: 6375 6d65 6e74 2843 4f4c 4c45 4354 494f  cument(COLLECTIO
-0004e4d0: 4e5f 4355 5252 454e 542c 2044 4f43 554d  N_CURRENT, DOCUM
-0004e4e0: 454e 545f 3129 0a20 2020 2020 2020 2020  ENT_1).         
-0004e4f0: 2020 2069 6620 7365 7373 696f 6e2e 6861     if session.ha
-0004e500: 735f 646f 6375 6d65 6e74 2843 4f4c 4c45  s_document(COLLE
-0004e510: 4354 494f 4e5f 494e 4954 4941 4c2c 2050  CTION_INITIAL, P
-0004e520: 5f56 414c 5545 293a 0a20 2020 2020 2020  _VALUE):.       
-0004e530: 2020 2020 2020 2020 2073 6573 7369 6f6e           session
-0004e540: 2e72 656d 6f76 655f 646f 6375 6d65 6e74  .remove_document
-0004e550: 2843 4f4c 4c45 4354 494f 4e5f 494e 4954  (COLLECTION_INIT
-0004e560: 4941 4c2c 2050 5f56 414c 5545 290a 2020  IAL, P_VALUE).  
-0004e570: 2020 2020 2020 2020 2020 6966 2073 6573            if ses
-0004e580: 7369 6f6e 2e68 6173 5f64 6f63 756d 656e  sion.has_documen
-0004e590: 7428 434f 4c4c 4543 5449 4f4e 5f49 4e49  t(COLLECTION_INI
-0004e5a0: 5449 414c 2c20 444f 4355 4d45 4e54 5f31  TIAL, DOCUMENT_1
-0004e5b0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0004e5c0: 2020 2073 6573 7369 6f6e 2e72 656d 6f76     session.remov
-0004e5d0: 655f 646f 6375 6d65 6e74 2843 4f4c 4c45  e_document(COLLE
-0004e5e0: 4354 494f 4e5f 494e 4954 4941 4c2c 2044  CTION_INITIAL, D
-0004e5f0: 4f43 554d 454e 545f 3129 0a0a 2020 2020  OCUMENT_1)..    
-0004e600: 2020 2020 2320 5365 7473 2073 686f 7274      # Sets short
-0004e610: 6375 7473 2066 6f72 206f 6674 656e 2075  cuts for often u
-0004e620: 7365 6420 6f62 6a65 6374 730a 2020 2020  sed objects.    
-0004e630: 2020 2020 7070 6c5f 6d61 6e61 6765 7220      ppl_manager 
-0004e640: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
-0004e650: 6f77 2e70 6970 656c 696e 655f 6d61 6e61  ow.pipeline_mana
-0004e660: 6765 720a 2020 2020 2020 2020 7365 7373  ger.        sess
-0004e670: 696f 6e20 3d20 7070 6c5f 6d61 6e61 6765  ion = ppl_manage
-0004e680: 722e 7072 6f6a 6563 742e 7365 7373 696f  r.project.sessio
-0004e690: 6e0a 2020 2020 2020 2020 7070 6c5f 6564  n.        ppl_ed
-0004e6a0: 745f 7461 6273 203d 2070 706c 5f6d 616e  t_tabs = ppl_man
-0004e6b0: 6167 6572 2e70 6970 656c 696e 6545 6469  ager.pipelineEdi
-0004e6c0: 746f 7254 6162 730a 2020 2020 2020 2020  torTabs.        
-0004e6d0: 7070 6c5f 6564 745f 7461 6220 3d20 7070  ppl_edt_tab = pp
-0004e6e0: 6c5f 6564 745f 7461 6273 2e67 6574 5f63  l_edt_tabs.get_c
-0004e6f0: 7572 7265 6e74 5f65 6469 746f 7228 290a  urrent_editor().
-0004e700: 0a20 2020 2020 2020 2023 2043 7265 6174  .        # Creat
-0004e710: 6573 2061 206e 6577 2070 726f 6a65 6374  es a new project
-0004e720: 2066 6f6c 6465 7220 616e 6420 6164 6473   folder and adds
-0004e730: 206f 6e65 2064 6f63 756d 656e 7420 746f   one document to
-0004e740: 2074 6865 0a20 2020 2020 2020 2023 2070   the.        # p
-0004e750: 726f 6a65 6374 2c20 7365 7473 2074 6865  roject, sets the
-0004e760: 2070 6c75 6720 7661 6c75 6520 7468 6174   plug value that
-0004e770: 2069 7320 6164 6465 6420 746f 2074 6865   is added to the
-0004e780: 2064 6174 6162 6173 650a 2020 2020 2020   database.      
-0004e790: 2020 7072 6f6a 6563 745f 385f 7061 7468    project_8_path
-0004e7a0: 203d 2073 656c 662e 6765 745f 6e65 775f   = self.get_new_
-0004e7b0: 7465 7374 5f70 726f 6a65 6374 2829 0a20  test_project(). 
-0004e7c0: 2020 2020 2020 2070 706c 5f6d 616e 6167         ppl_manag
-0004e7d0: 6572 2e70 726f 6a65 6374 2e66 6f6c 6465  er.project.folde
-0004e7e0: 7220 3d20 7072 6f6a 6563 745f 385f 7061  r = project_8_pa
-0004e7f0: 7468 0a20 2020 2020 2020 2066 6f6c 6465  th.        folde
-0004e800: 7220 3d20 6f73 2e70 6174 682e 6a6f 696e  r = os.path.join
-0004e810: 2870 726f 6a65 6374 5f38 5f70 6174 682c  (project_8_path,
-0004e820: 2022 6461 7461 222c 2022 7261 775f 6461   "data", "raw_da
-0004e830: 7461 2229 0a20 2020 2020 2020 204e 4949  ta").        NII
-0004e840: 5f46 494c 455f 3120 3d20 280a 2020 2020  _FILE_1 = (.    
-0004e850: 2020 2020 2020 2020 2247 7565 7262 6574          "Guerbet
-0004e860: 2d43 362d 3230 3134 2d52 6174 2d4b 3532  -C6-2014-Rat-K52
-0004e870: 2d54 7562 6532 372d 3230 3134 2d30 322d  -Tube27-2014-02-
-0004e880: 3134 3130 3233 3137 2d30 342d 4733 5f22  14102317-04-G3_"
-0004e890: 0a20 2020 2020 2020 2020 2020 2022 4775  .            "Gu
-0004e8a0: 6572 6265 745f 4d44 4546 542d 4d44 4546  erbet_MDEFT-MDEF
-0004e8b0: 5470 766d 2d30 3030 3934 305f 3830 302e  Tpvm-000940_800.
-0004e8c0: 6e69 6922 0a20 2020 2020 2020 2029 0a20  nii".        ). 
-0004e8d0: 2020 2020 2020 2044 4f43 554d 454e 545f         DOCUMENT_
-0004e8e0: 3120 3d20 6f73 2e70 6174 682e 6162 7370  1 = os.path.absp
-0004e8f0: 6174 6828 6f73 2e70 6174 682e 6a6f 696e  ath(os.path.join
-0004e900: 2866 6f6c 6465 722c 204e 4949 5f46 494c  (folder, NII_FIL
-0004e910: 455f 3129 290a 2020 2020 2020 2020 505f  E_1)).        P_
-0004e920: 5641 4c55 4520 3d20 444f 4355 4d45 4e54  VALUE = DOCUMENT
-0004e930: 5f31 2e72 6570 6c61 6365 286f 732e 7061  _1.replace(os.pa
-0004e940: 7468 2e61 6273 7061 7468 2870 726f 6a65  th.abspath(proje
-0004e950: 6374 5f38 5f70 6174 6829 2c20 2222 295b  ct_8_path), "")[
-0004e960: 313a 5d0a 0a20 2020 2020 2020 2073 6573  1:]..        ses
-0004e970: 7369 6f6e 2e61 6464 5f64 6f63 756d 656e  sion.add_documen
-0004e980: 7428 434f 4c4c 4543 5449 4f4e 5f43 5552  t(COLLECTION_CUR
-0004e990: 5245 4e54 2c20 444f 4355 4d45 4e54 5f31  RENT, DOCUMENT_1
-0004e9a0: 290a 0a20 2020 2020 2020 2023 2041 6464  )..        # Add
-0004e9b0: 7320 7468 6520 7072 6f63 6573 7365 7320  s the processes 
-0004e9c0: 5265 6e61 6d65 2c20 6372 6561 7465 7320  Rename, creates 
-0004e9d0: 7468 6520 2272 656e 616d 655f 3122 206e  the "rename_1" n
-0004e9e0: 6f64 650a 2020 2020 2020 2020 7070 6c5f  ode.        ppl_
-0004e9f0: 6564 745f 7461 622e 636c 6963 6b5f 706f  edt_tab.click_po
-0004ea00: 7320 3d20 5150 6f69 6e74 2834 3530 2c20  s = QPoint(450, 
-0004ea10: 3530 3029 0a20 2020 2020 2020 2070 706c  500).        ppl
-0004ea20: 5f65 6474 5f74 6162 2e61 6464 5f6e 616d  _edt_tab.add_nam
-0004ea30: 6564 5f70 726f 6365 7373 2852 656e 616d  ed_process(Renam
-0004ea40: 6529 0a20 2020 2020 2020 2070 6970 656c  e).        pipel
-0004ea50: 696e 6520 3d20 7070 6c5f 6564 745f 7461  ine = ppl_edt_ta
-0004ea60: 6273 2e67 6574 5f63 7572 7265 6e74 5f70  bs.get_current_p
-0004ea70: 6970 656c 696e 6528 290a 0a20 2020 2020  ipeline()..     
-0004ea80: 2020 2023 2045 7870 6f72 7473 2074 6865     # Exports the
-0004ea90: 206d 616e 6461 746f 7279 2069 6e70 7574   mandatory input
-0004eaa0: 2061 6e64 206f 7574 7075 7420 706c 7567   and output plug
-0004eab0: 7320 666f 7220 2272 656e 616d 655f 3122  s for "rename_1"
-0004eac0: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
-0004ead0: 5f74 6162 2e63 7572 7265 6e74 5f6e 6f64  _tab.current_nod
-0004eae0: 655f 6e61 6d65 203d 2022 7265 6e61 6d65  e_name = "rename
-0004eaf0: 5f31 220a 2020 2020 2020 2020 7070 6c5f  _1".        ppl_
-0004eb00: 6564 745f 7461 622e 6578 706f 7274 5f75  edt_tab.export_u
-0004eb10: 6e63 6f6e 6e65 6374 6564 5f6d 616e 6461  nconnected_manda
-0004eb20: 746f 7279 5f69 6e70 7574 7328 290a 2020  tory_inputs().  
-0004eb30: 2020 2020 2020 7070 6c5f 6564 745f 7461        ppl_edt_ta
-0004eb40: 622e 6578 706f 7274 5f61 6c6c 5f75 6e63  b.export_all_unc
-0004eb50: 6f6e 6e65 6374 6564 5f6f 7574 7075 7473  onnected_outputs
-0004eb60: 2829 0a0a 2020 2020 2020 2020 6f6c 645f  ()..        old_
-0004eb70: 7363 616e 5f6e 616d 6520 3d20 444f 4355  scan_name = DOCU
-0004eb80: 4d45 4e54 5f31 2e73 706c 6974 2822 2f22  MENT_1.split("/"
-0004eb90: 295b 2d31 5d0a 2020 2020 2020 2020 6e65  )[-1].        ne
-0004eba0: 775f 7363 616e 5f6e 616d 6520 3d20 226e  w_scan_name = "n
-0004ebb0: 6577 5f6e 616d 652e 6e69 6922 0a0a 2020  ew_name.nii"..  
-0004ebc0: 2020 2020 2020 2320 4368 616e 6765 7320        # Changes 
-0004ebd0: 7468 6520 225f 6f75 745f 6669 6c65 2220  the "_out_file" 
-0004ebe0: 696e 2074 6865 2022 6f75 7470 7574 7322  in the "outputs"
-0004ebf0: 206e 6f64 650a 2020 2020 2020 2020 7069   node.        pi
-0004ec00: 7065 6c69 6e65 2e6e 6f64 6573 5b22 225d  peline.nodes[""]
-0004ec10: 2e73 6574 5f70 6c75 675f 7661 6c75 6528  .set_plug_value(
-0004ec20: 0a20 2020 2020 2020 2020 2020 2022 5f6f  .            "_o
-0004ec30: 7574 5f66 696c 6522 2c20 444f 4355 4d45  ut_file", DOCUME
-0004ec40: 4e54 5f31 2e72 6570 6c61 6365 286f 6c64  NT_1.replace(old
-0004ec50: 5f73 6361 6e5f 6e61 6d65 2c20 6e65 775f  _scan_name, new_
-0004ec60: 7363 616e 5f6e 616d 6529 0a20 2020 2020  scan_name).     
-0004ec70: 2020 2029 0a0a 2020 2020 2020 2020 7070     )..        pp
-0004ec80: 6c5f 6d61 6e61 6765 722e 776f 726b 666c  l_manager.workfl
-0004ec90: 6f77 203d 2077 6f72 6b66 6c6f 775f 6672  ow = workflow_fr
-0004eca0: 6f6d 5f70 6970 656c 696e 6528 0a20 2020  om_pipeline(.   
-0004ecb0: 2020 2020 2020 2020 2070 6970 656c 696e           pipelin
-0004ecc0: 652c 2063 6f6d 706c 6574 655f 7061 7261  e, complete_para
-0004ecd0: 6d65 7465 7273 3d54 7275 650a 2020 2020  meters=True.    
-0004ece0: 2020 2020 290a 0a20 2020 2020 2020 206a      )..        j
-0004ecf0: 6f62 203d 2070 706c 5f6d 616e 6167 6572  ob = ppl_manager
-0004ed00: 2e77 6f72 6b66 6c6f 772e 6a6f 6273 5b30  .workflow.jobs[0
-0004ed10: 5d0a 0a20 2020 2020 2020 2062 7269 636b  ]..        brick
-0004ed20: 5f69 6420 3d20 7374 7228 7575 6964 2e75  _id = str(uuid.u
-0004ed30: 7569 6434 2829 290a 2020 2020 2020 2020  uid4()).        
-0004ed40: 6a6f 622e 7575 6964 203d 2062 7269 636b  job.uuid = brick
-0004ed50: 5f69 640a 2020 2020 2020 2020 7070 6c5f  _id.        ppl_
-0004ed60: 6d61 6e61 6765 722e 6272 6963 6b5f 6c69  manager.brick_li
-0004ed70: 7374 2e61 7070 656e 6428 6272 6963 6b5f  st.append(brick_
-0004ed80: 6964 290a 0a20 2020 2020 2020 2070 706c  id)..        ppl
-0004ed90: 5f6d 616e 6167 6572 2e70 726f 6a65 6374  _manager.project
-0004eda0: 2e73 6573 7369 6f6e 2e61 6464 5f64 6f63  .session.add_doc
-0004edb0: 756d 656e 7428 434f 4c4c 4543 5449 4f4e  ument(COLLECTION
-0004edc0: 5f42 5249 434b 2c20 6272 6963 6b5f 6964  _BRICK, brick_id
-0004edd0: 290a 0a20 2020 2020 2020 2023 2053 6574  )..        # Set
-0004ede0: 7320 7468 6520 6d61 6e64 6174 6f72 7920  s the mandatory 
-0004edf0: 706c 7567 2076 616c 7565 7320 696e 2074  plug values in t
-0004ee00: 6865 2022 696e 7075 7473 2220 6e6f 6465  he "inputs" node
-0004ee10: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
-0004ee20: 652e 6e6f 6465 735b 2222 5d2e 7365 745f  e.nodes[""].set_
-0004ee30: 706c 7567 5f76 616c 7565 2822 696e 5f66  plug_value("in_f
-0004ee40: 696c 6522 2c20 444f 4355 4d45 4e54 5f31  ile", DOCUMENT_1
-0004ee50: 290a 2020 2020 2020 2020 7069 7065 6c69  ).        pipeli
-0004ee60: 6e65 2e6e 6f64 6573 5b22 225d 2e73 6574  ne.nodes[""].set
-0004ee70: 5f70 6c75 675f 7661 6c75 6528 2266 6f72  _plug_value("for
-0004ee80: 6d61 745f 7374 7269 6e67 222c 206e 6577  mat_string", new
-0004ee90: 5f73 6361 6e5f 6e61 6d65 290a 0a20 2020  _scan_name)..   
-0004eea0: 2020 2020 2070 726f 6365 7373 203d 206a       process = j
-0004eeb0: 6f62 2e70 726f 6365 7373 2829 0a20 2020  ob.process().   
-0004eec0: 2020 2020 2070 6c75 675f 6e61 6d65 203d       plug_name =
-0004eed0: 2022 696e 5f66 696c 6522 0a20 2020 2020   "in_file".     
-0004eee0: 2020 2074 7261 6974 203d 2070 726f 6365     trait = proce
-0004eef0: 7373 2e74 7261 6974 2870 6c75 675f 6e61  ss.trait(plug_na
-0004ef00: 6d65 290a 0a20 2020 2020 2020 2069 6e70  me)..        inp
-0004ef10: 7574 7320 3d20 7072 6f63 6573 732e 6765  uts = process.ge
-0004ef20: 745f 696e 7075 7473 2829 0a0a 2020 2020  t_inputs()..    
-0004ef30: 2020 2020 6174 7472 6962 7574 6573 203d      attributes =
-0004ef40: 207b 7d0a 2020 2020 2020 2020 636f 6d70   {}.        comp
-0004ef50: 6c65 7469 6f6e 203d 2050 726f 6365 7373  letion = Process
-0004ef60: 436f 6d70 6c65 7469 6f6e 456e 6769 6e65  CompletionEngine
-0004ef70: 2e67 6574 5f63 6f6d 706c 6574 696f 6e5f  .get_completion_
-0004ef80: 656e 6769 6e65 2870 726f 6365 7373 290a  engine(process).
-0004ef90: 0a20 2020 2020 2020 2069 6620 636f 6d70  .        if comp
-0004efa0: 6c65 7469 6f6e 3a0a 2020 2020 2020 2020  letion:.        
-0004efb0: 2020 2020 6174 7472 6962 7574 6573 203d      attributes =
-0004efc0: 2063 6f6d 706c 6574 696f 6e2e 6765 745f   completion.get_
-0004efd0: 6174 7472 6962 7574 655f 7661 6c75 6573  attribute_values
-0004efe0: 2829 2e65 7870 6f72 745f 746f 5f64 6963  ().export_to_dic
-0004eff0: 7428 290a 0a20 2020 2020 2020 2023 204d  t()..        # M
-0004f000: 6f63 6b73 2074 6865 2064 6f63 756d 656e  ocks the documen
-0004f010: 7420 6765 7474 6572 2074 6f20 616c 7761  t getter to alwa
-0004f020: 7973 2072 6574 7572 6e20 6120 7363 616e  ys return a scan
-0004f030: 0a20 2020 2020 2020 2053 4341 4e5f 3120  .        SCAN_1 
-0004f040: 3d20 7365 7373 696f 6e2e 6765 745f 646f  = session.get_do
-0004f050: 6375 6d65 6e74 2843 4f4c 4c45 4354 494f  cument(COLLECTIO
-0004f060: 4e5f 4355 5252 454e 542c 2044 4f43 554d  N_CURRENT, DOCUM
-0004f070: 454e 545f 3129 0a20 2020 2020 2020 2073  ENT_1).        s
-0004f080: 6573 7369 6f6e 2e67 6574 5f64 6f63 756d  ession.get_docum
-0004f090: 656e 7420 3d20 6d6f 636b 5f67 6574 5f64  ent = mock_get_d
-0004f0a0: 6f63 756d 656e 740a 0a20 2020 2020 2020  ocument..       
-0004f0b0: 2023 204d 6f63 6b73 2074 6865 2076 616c   # Mocks the val
-0004f0c0: 7565 2073 6574 7465 7220 6f6e 2074 6865  ue setter on the
-0004f0d0: 2073 6573 7369 6f6e 0a20 2020 2020 2020   session.       
-0004f0e0: 2073 6573 7369 6f6e 2e73 6574 5f76 616c   session.set_val
-0004f0f0: 7565 7320 3d20 4d6f 636b 2829 0a0a 2020  ues = Mock()..  
-0004f100: 2020 2020 2020 2320 3129 2027 7061 7265        # 1) 'pare
-0004f110: 6e74 5f66 696c 6573 2720 6973 2061 2064  nt_files' is a d
-0004f120: 6963 7420 7769 7468 2032 206b 6579 7320  ict with 2 keys 
-0004f130: 616e 6420 6964 656e 7469 6361 6c20 7661  and identical va
-0004f140: 6c75 6573 0a20 2020 2020 2020 2070 6172  lues.        par
-0004f150: 656e 745f 6669 6c65 7320 3d20 7b0a 2020  ent_files = {.  
-0004f160: 2020 2020 2020 2020 2020 226d 6f63 6b5f            "mock_
-0004f170: 6b65 795f 3122 3a20 6f73 2e70 6174 682e  key_1": os.path.
-0004f180: 6a6f 696e 280a 2020 2020 2020 2020 2020  join(.          
-0004f190: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
-0004f1a0: 722e 7072 6f6a 6563 742e 666f 6c64 6572  r.project.folder
-0004f1b0: 2c20 226d 6f63 6b5f 7661 6c5f 3122 0a20  , "mock_val_1". 
-0004f1c0: 2020 2020 2020 2020 2020 2029 2c0a 2020             ),.  
-0004f1d0: 2020 2020 2020 2020 2020 226d 6f63 6b5f            "mock_
-0004f1e0: 6b65 795f 3222 3a20 6f73 2e70 6174 682e  key_2": os.path.
-0004f1f0: 6a6f 696e 280a 2020 2020 2020 2020 2020  join(.          
-0004f200: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
-0004f210: 722e 7072 6f6a 6563 742e 666f 6c64 6572  r.project.folder
-0004f220: 2c20 226d 6f63 6b5f 7661 6c5f 3122 0a20  , "mock_val_1". 
-0004f230: 2020 2020 2020 2020 2020 2029 2c0a 2020             ),.  
-0004f240: 2020 2020 2020 7d0a 0a20 2020 2020 2020        }..       
-0004f250: 2072 6573 6574 5f69 6e68 6572 6974 616e   reset_inheritan
-0004f260: 6365 5f64 6963 7473 2829 0a20 2020 2020  ce_dicts().     
-0004f270: 2020 2072 6573 6574 5f63 6f6c 6c65 6374     reset_collect
-0004f280: 696f 6e73 2829 0a0a 2020 2020 2020 2020  ions()..        
-0004f290: 6172 6773 203d 205b 0a20 2020 2020 2020  args = [.       
-0004f2a0: 2020 2020 2044 4f43 554d 454e 545f 312c       DOCUMENT_1,
-0004f2b0: 0a20 2020 2020 2020 2020 2020 2062 7269  .            bri
-0004f2c0: 636b 5f69 642c 0a20 2020 2020 2020 2020  ck_id,.         
-0004f2d0: 2020 2022 222c 0a20 2020 2020 2020 2020     "",.         
-0004f2e0: 2020 2022 7265 6e61 6d65 5f31 222c 0a20     "rename_1",. 
-0004f2f0: 2020 2020 2020 2020 2020 2070 6c75 675f             plug_
-0004f300: 6e61 6d65 2c0a 2020 2020 2020 2020 2020  name,.          
-0004f310: 2020 2272 656e 616d 655f 3122 2c0a 2020    "rename_1",.  
-0004f320: 2020 2020 2020 2020 2020 6a6f 622c 0a20            job,. 
-0004f330: 2020 2020 2020 2020 2020 2074 7261 6974             trait
-0004f340: 2c0a 2020 2020 2020 2020 2020 2020 696e  ,.            in
-0004f350: 7075 7473 2c0a 2020 2020 2020 2020 2020  puts,.          
-0004f360: 2020 6174 7472 6962 7574 6573 2c0a 2020    attributes,.  
-0004f370: 2020 2020 2020 5d0a 2020 2020 2020 2020        ].        
-0004f380: 7070 6c5f 6d61 6e61 6765 722e 6164 645f  ppl_manager.add_
-0004f390: 706c 7567 5f76 616c 7565 5f74 6f5f 6461  plug_value_to_da
-0004f3a0: 7461 6261 7365 282a 6172 6773 290a 0a20  tabase(*args).. 
-0004f3b0: 2020 2020 2020 2023 204d 6f63 6b73 2074         # Mocks t
-0004f3c0: 6865 2065 7865 6375 7469 6f6e 206f 6620  he execution of 
-0004f3d0: 2750 6f70 5570 496e 6865 7269 7461 6e63  'PopUpInheritanc
-0004f3e0: 6544 6963 7427 2074 6f20 6176 6f69 640a  eDict' to avoid.
-0004f3f0: 2020 2020 2020 2020 2320 6173 796e 6368          # asynch
-0004f400: 726f 6e6f 7573 2073 686f 740a 2020 2020  ronous shot.    
-0004f410: 2020 2020 506f 7055 7049 6e68 6572 6974      PopUpInherit
-0004f420: 616e 6365 4469 6374 2e65 7865 6320 3d20  anceDict.exec = 
-0004f430: 4d6f 636b 2829 0a0a 2020 2020 2020 2020  Mock()..        
-0004f440: 2320 3229 2027 7061 7265 6e74 5f66 696c  # 2) 'parent_fil
-0004f450: 6573 2720 6973 2061 2064 6963 7420 7769  es' is a dict wi
-0004f460: 7468 2032 206b 6579 7320 616e 6420 6469  th 2 keys and di
-0004f470: 7374 696e 6374 2076 616c 7565 730a 2020  stinct values.  
-0004f480: 2020 2020 2020 2320 5472 6967 6765 7273        # Triggers
-0004f490: 2074 6865 2065 7865 6375 7469 6f6e 206f   the execution o
-0004f4a0: 6620 2750 6f70 5570 496e 6865 7269 7461  f 'PopUpInherita
-0004f4b0: 6e63 6544 6963 7427 0a20 2020 2020 2020  nceDict'.       
-0004f4c0: 2070 6172 656e 745f 6669 6c65 735b 226d   parent_files["m
-0004f4d0: 6f63 6b5f 6b65 795f 3222 5d20 3d20 6f73  ock_key_2"] = os
-0004f4e0: 2e70 6174 682e 6a6f 696e 280a 2020 2020  .path.join(.    
-0004f4f0: 2020 2020 2020 2020 7070 6c5f 6d61 6e61          ppl_mana
-0004f500: 6765 722e 7072 6f6a 6563 742e 666f 6c64  ger.project.fold
-0004f510: 6572 2c20 226d 6f63 6b5f 7661 6c5f 3222  er, "mock_val_2"
-0004f520: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-0004f530: 2020 2020 7265 7365 745f 696e 6865 7269      reset_inheri
-0004f540: 7461 6e63 655f 6469 6374 7328 290a 2020  tance_dicts().  
-0004f550: 2020 2020 2020 7265 7365 745f 636f 6c6c        reset_coll
-0004f560: 6563 7469 6f6e 7328 290a 0a20 2020 2020  ections()..     
-0004f570: 2020 2070 706c 5f6d 616e 6167 6572 2e61     ppl_manager.a
-0004f580: 6464 5f70 6c75 675f 7661 6c75 655f 746f  dd_plug_value_to
-0004f590: 5f64 6174 6162 6173 6528 2a61 7267 7329  _database(*args)
-0004f5a0: 0a0a 2020 2020 2020 2020 2320 3329 2027  ..        # 3) '
-0004f5b0: 6d6f 636b 5f6b 6579 5f32 2720 6973 2069  mock_key_2' is i
-0004f5c0: 6e20 2770 706c 5f6d 616e 6167 6572 2e6b  n 'ppl_manager.k
-0004f5d0: 6579 2720 696e 6465 7865 6420 6279 2074  ey' indexed by t
-0004f5e0: 6865 206e 6f64 6520 6e61 6d65 0a20 2020  he node name.   
-0004f5f0: 2020 2020 2070 706c 5f6d 616e 6167 6572       ppl_manager
-0004f600: 2e6b 6579 203d 207b 2272 656e 616d 655f  .key = {"rename_
-0004f610: 3122 3a20 226d 6f63 6b5f 6b65 795f 3222  1": "mock_key_2"
-0004f620: 7d0a 0a20 2020 2020 2020 2072 6573 6574  }..        reset
-0004f630: 5f69 6e68 6572 6974 616e 6365 5f64 6963  _inheritance_dic
-0004f640: 7473 2829 0a20 2020 2020 2020 2072 6573  ts().        res
-0004f650: 6574 5f63 6f6c 6c65 6374 696f 6e73 2829  et_collections()
-0004f660: 0a0a 2020 2020 2020 2020 7070 6c5f 6d61  ..        ppl_ma
-0004f670: 6e61 6765 722e 6164 645f 706c 7567 5f76  nager.add_plug_v
-0004f680: 616c 7565 5f74 6f5f 6461 7461 6261 7365  alue_to_database
-0004f690: 282a 6172 6773 290a 0a20 2020 2020 2020  (*args)..       
-0004f6a0: 2023 2034 2920 276d 6f63 6b5f 6b65 795f   # 4) 'mock_key_
-0004f6b0: 3227 2069 7320 696e 2027 7070 6c5f 6d61  2' is in 'ppl_ma
-0004f6c0: 6e61 6765 722e 6b65 7927 2069 6e64 6578  nager.key' index
-0004f6d0: 6564 2062 7920 7468 6520 6e6f 6465 206e  ed by the node n
-0004f6e0: 616d 650a 2020 2020 2020 2020 2320 2b20  ame.        # + 
-0004f6f0: 706c 7567 2076 616c 7565 0a20 2020 2020  plug value.     
-0004f700: 2020 2070 706c 5f6d 616e 6167 6572 2e6b     ppl_manager.k
-0004f710: 6579 203d 207b 2272 656e 616d 655f 3169  ey = {"rename_1i
-0004f720: 6e5f 6669 6c65 223a 2022 6d6f 636b 5f6b  n_file": "mock_k
-0004f730: 6579 5f32 227d 0a0a 2020 2020 2020 2020  ey_2"}..        
-0004f740: 7265 7365 745f 696e 6865 7269 7461 6e63  reset_inheritanc
-0004f750: 655f 6469 6374 7328 290a 2020 2020 2020  e_dicts().      
-0004f760: 2020 7265 7365 745f 636f 6c6c 6563 7469    reset_collecti
-0004f770: 6f6e 7328 290a 0a20 2020 2020 2020 2070  ons()..        p
-0004f780: 706c 5f6d 616e 6167 6572 2e61 6464 5f70  pl_manager.add_p
-0004f790: 6c75 675f 7661 6c75 655f 746f 5f64 6174  lug_value_to_dat
-0004f7a0: 6162 6173 6528 2a61 7267 7329 0a0a 2020  abase(*args)..  
-0004f7b0: 2020 2020 2020 2320 496e 6465 7065 6e64        # Independ
-0004f7c0: 656e 746c 7920 7465 7374 7320 2750 6f70  ently tests 'Pop
-0004f7d0: 5570 496e 6865 7269 7461 6e63 6544 6963  UpInheritanceDic
-0004f7e0: 7427 0a20 2020 2020 2020 2070 6f70 5f75  t'.        pop_u
-0004f7f0: 7020 3d20 506f 7055 7049 6e68 6572 6974  p = PopUpInherit
-0004f800: 616e 6365 4469 6374 280a 2020 2020 2020  anceDict(.      
-0004f810: 2020 2020 2020 7b22 6d6f 636b 5f6b 6579        {"mock_key
-0004f820: 223a 2022 6d6f 636b 5f76 616c 7565 227d  ": "mock_value"}
-0004f830: 2c0a 2020 2020 2020 2020 2020 2020 226d  ,.            "m
-0004f840: 6f63 6b5f 6675 6c6c 5f6e 616d 6522 2c0a  ock_full_name",.
-0004f850: 2020 2020 2020 2020 2020 2020 226d 6f63              "moc
-0004f860: 6b5f 706c 7567 5f6e 616d 6522 2c0a 2020  k_plug_name",.  
-0004f870: 2020 2020 2020 2020 2020 5472 7565 2c0a            True,.
-0004f880: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-0004f890: 2020 2070 6f70 5f75 702e 6f6b 5f63 6c69     pop_up.ok_cli
-0004f8a0: 636b 6564 2829 0a20 2020 2020 2020 2070  cked().        p
-0004f8b0: 6f70 5f75 702e 6f6b 616c 6c5f 636c 6963  op_up.okall_clic
-0004f8c0: 6b65 6428 290a 2020 2020 2020 2020 706f  ked().        po
-0004f8d0: 705f 7570 2e69 676e 6f72 655f 636c 6963  p_up.ignore_clic
-0004f8e0: 6b65 6428 290a 2020 2020 2020 2020 706f  ked().        po
-0004f8f0: 705f 7570 2e69 676e 6f72 6561 6c6c 5f63  p_up.ignoreall_c
-0004f900: 6c69 636b 6564 2829 0a20 2020 2020 2020  licked().       
-0004f910: 2070 6f70 5f75 702e 6967 6e6f 7265 5f6e   pop_up.ignore_n
-0004f920: 6f64 655f 636c 6963 6b65 6428 290a 0a20  ode_clicked().. 
-0004f930: 2020 2064 6566 2074 6573 745f 6173 6b5f     def test_ask_
-0004f940: 6974 6572 6174 6564 5f70 6970 656c 696e  iterated_pipelin
-0004f950: 655f 706c 7567 7328 7365 6c66 293a 0a20  e_plugs(self):. 
-0004f960: 2020 2020 2020 2022 2222 4164 6473 2074         """Adds t
-0004f970: 6865 2070 726f 6365 7373 2027 5265 6e61  he process 'Rena
-0004f980: 6d65 272c 2065 7870 6f72 7420 6d61 6e64  me', export mand
-0004f990: 6174 6f72 7920 696e 7075 7420 616e 6420  atory input and 
-0004f9a0: 6f75 7470 7574 2070 6c75 670a 2020 2020  output plug.    
-0004f9b0: 2020 2020 616e 6420 6f70 656e 7320 616e      and opens an
-0004f9c0: 2069 7465 7261 7469 6f6e 2064 6961 6c6f   iteration dialo
-0004f9d0: 6720 666f 7220 6561 6368 2070 6c75 672e  g for each plug.
-0004f9e0: 0a0a 2020 2020 2020 2020 2d20 5465 7374  ..        - Test
-0004f9f0: 733a 2050 6970 656c 696e 654d 616e 6167  s: PipelineManag
-0004fa00: 6572 5461 622e 6173 6b5f 6974 6572 6174  erTab.ask_iterat
-0004fa10: 6564 5f70 6970 656c 696e 655f 706c 7567  ed_pipeline_plug
-0004fa20: 730a 2020 2020 2020 2020 2222 220a 0a20  s.        """.. 
-0004fa30: 2020 2020 2020 2070 706c 5f65 6474 5f74         ppl_edt_t
-0004fa40: 6162 7320 3d20 7365 6c66 2e6d 6169 6e5f  abs = self.main_
-0004fa50: 7769 6e64 6f77 2e70 6970 656c 696e 655f  window.pipeline_
-0004fa60: 6d61 6e61 6765 722e 7069 7065 6c69 6e65  manager.pipeline
-0004fa70: 4564 6974 6f72 5461 6273 0a0a 2020 2020  EditorTabs..    
-0004fa80: 2020 2020 2320 4164 6473 2074 6865 2070      # Adds the p
-0004fa90: 726f 6365 7373 6573 2052 656e 616d 652c  rocesses Rename,
-0004faa0: 2063 7265 6174 6573 2074 6865 2022 7265   creates the "re
-0004fab0: 6e61 6d65 5f31 2220 6e6f 6465 0a20 2020  name_1" node.   
-0004fac0: 2020 2020 2070 706c 5f65 6474 5f74 6162       ppl_edt_tab
-0004fad0: 732e 6765 745f 6375 7272 656e 745f 6564  s.get_current_ed
-0004fae0: 6974 6f72 2829 2e63 6c69 636b 5f70 6f73  itor().click_pos
-0004faf0: 203d 2051 506f 696e 7428 3435 302c 2035   = QPoint(450, 5
-0004fb00: 3030 290a 2020 2020 2020 2020 7070 6c5f  00).        ppl_
-0004fb10: 6564 745f 7461 6273 2e67 6574 5f63 7572  edt_tabs.get_cur
-0004fb20: 7265 6e74 5f65 6469 746f 7228 292e 6164  rent_editor().ad
-0004fb30: 645f 6e61 6d65 645f 7072 6f63 6573 7328  d_named_process(
-0004fb40: 5265 6e61 6d65 290a 0a20 2020 2020 2020  Rename)..       
-0004fb50: 2070 6970 656c 696e 6520 3d20 7070 6c5f   pipeline = ppl_
-0004fb60: 6564 745f 7461 6273 2e67 6574 5f63 7572  edt_tabs.get_cur
-0004fb70: 7265 6e74 5f70 6970 656c 696e 6528 290a  rent_pipeline().
-0004fb80: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
-0004fb90: 5f6d 616e 6167 6572 203d 2073 656c 662e  _manager = self.
-0004fba0: 6d61 696e 5f77 696e 646f 772e 7069 7065  main_window.pipe
-0004fbb0: 6c69 6e65 5f6d 616e 6167 6572 0a0a 2020  line_manager..  
-0004fbc0: 2020 2020 2020 2320 4578 706f 7274 7320        # Exports 
-0004fbd0: 7468 6520 6d61 6e64 6174 6f72 7920 696e  the mandatory in
-0004fbe0: 7075 7420 616e 6420 6f75 7470 7574 2070  put and output p
-0004fbf0: 6c75 6773 2066 6f72 2022 7265 6e61 6d65  lugs for "rename
-0004fc00: 5f31 220a 2020 2020 2020 2020 7070 6c5f  _1".        ppl_
-0004fc10: 6564 745f 7461 6273 2e67 6574 5f63 7572  edt_tabs.get_cur
-0004fc20: 7265 6e74 5f65 6469 746f 7228 292e 6375  rent_editor().cu
-0004fc30: 7272 656e 745f 6e6f 6465 5f6e 616d 6520  rrent_node_name 
-0004fc40: 3d20 2272 656e 616d 655f 3122 0a20 2020  = "rename_1".   
-0004fc50: 2020 2020 2070 706c 5f65 6474 5f74 6162       ppl_edt_tab
-0004fc60: 732e 6765 745f 6375 7272 656e 745f 6564  s.get_current_ed
-0004fc70: 6974 6f72 2829 2e65 7870 6f72 745f 756e  itor().export_un
-0004fc80: 636f 6e6e 6563 7465 645f 6d61 6e64 6174  connected_mandat
-0004fc90: 6f72 795f 696e 7075 7473 2829 0a20 2020  ory_inputs().   
-0004fca0: 2020 2020 2070 706c 5f65 6474 5f74 6162       ppl_edt_tab
-0004fcb0: 732e 6765 745f 6375 7272 656e 745f 6564  s.get_current_ed
-0004fcc0: 6974 6f72 2829 2e65 7870 6f72 745f 616c  itor().export_al
-0004fcd0: 6c5f 756e 636f 6e6e 6563 7465 645f 6f75  l_unconnected_ou
-0004fce0: 7470 7574 7328 290a 0a20 2020 2020 2020  tputs()..       
-0004fcf0: 2023 204d 6f63 6b73 2065 7865 6375 7469   # Mocks executi
-0004fd00: 6e67 2061 2064 6961 6c6f 6720 626f 7820  ng a dialog box 
-0004fd10: 616e 6420 636c 6963 6b69 6e67 2063 6c6f  and clicking clo
-0004fd20: 7365 0a20 2020 2020 2020 2051 4469 616c  se.        QDial
-0004fd30: 6f67 2e65 7865 635f 203d 206c 616d 6264  og.exec_ = lambd
-0004fd40: 6120 7365 6c66 5f2c 202a 6172 6773 3a20  a self_, *args: 
-0004fd50: 7365 6c66 5f2e 6163 6365 7074 2829 0a0a  self_.accept()..
-0004fd60: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
-0004fd70: 5f6d 616e 6167 6572 2e61 736b 5f69 7465  _manager.ask_ite
-0004fd80: 7261 7465 645f 7069 7065 6c69 6e65 5f70  rated_pipeline_p
-0004fd90: 6c75 6773 2870 6970 656c 696e 6529 0a0a  lugs(pipeline)..
-0004fda0: 2020 2020 6465 6620 7465 7374 5f62 7569      def test_bui
-0004fdb0: 6c64 5f69 7465 7261 7465 645f 7069 7065  ld_iterated_pipe
-0004fdc0: 6c69 6e65 2873 656c 6629 3a0a 2020 2020  line(self):.    
-0004fdd0: 2020 2020 2222 2241 6464 7320 6120 2753      """Adds a 'S
-0004fde0: 656c 6563 7427 2070 726f 6365 7373 2c20  elect' process, 
-0004fdf0: 6578 706f 7274 7320 6974 7320 6d61 6e64  exports its mand
-0004fe00: 6174 6f72 7920 696e 7075 7473 2c20 6d6f  atory inputs, mo
-0004fe10: 636b 730a 2020 2020 2020 2020 736f 6d65  cks.        some
-0004fe20: 206d 6574 686f 6473 206f 6620 7468 6520   methods of the 
-0004fe30: 7069 7065 6c69 6e65 206d 616e 6167 6572  pipeline manager
-0004fe40: 2061 6e64 2062 7569 6c64 7320 616e 2069   and builds an i
-0004fe50: 7465 7261 7465 6420 7069 7065 6c69 6e65  terated pipeline
-0004fe60: 2e0a 0a20 2020 2020 2020 202d 2054 6573  ...        - Tes
-0004fe70: 7473 3a27 5069 7065 6c69 6e65 4d61 6e61  ts:'PipelineMana
-0004fe80: 6765 7254 6162 2e62 7569 6c64 5f69 7465  gerTab.build_ite
-0004fe90: 7261 7465 645f 7069 7065 6c69 6e65 270a  rated_pipeline'.
-0004fea0: 2020 2020 2020 2020 2222 220a 0a20 2020          """..   
-0004feb0: 2020 2020 2070 706c 5f65 6474 5f74 6162       ppl_edt_tab
-0004fec0: 7320 3d20 7365 6c66 2e6d 6169 6e5f 7769  s = self.main_wi
-0004fed0: 6e64 6f77 2e70 6970 656c 696e 655f 6d61  ndow.pipeline_ma
-0004fee0: 6e61 6765 722e 7069 7065 6c69 6e65 4564  nager.pipelineEd
-0004fef0: 6974 6f72 5461 6273 0a20 2020 2020 2020  itorTabs.       
-0004ff00: 2070 706c 5f6d 616e 6167 6572 203d 2073   ppl_manager = s
-0004ff10: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-0004ff20: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
-0004ff30: 0a0a 2020 2020 2020 2020 2320 4164 6473  ..        # Adds
-0004ff40: 2074 6865 2070 726f 6365 7373 6573 2053   the processes S
-0004ff50: 656c 6563 742c 2063 7265 6174 6573 2074  elect, creates t
-0004ff60: 6865 2022 7365 6c65 6374 5f31 2220 6e6f  he "select_1" no
-0004ff70: 6465 0a20 2020 2020 2020 2070 706c 5f65  de.        ppl_e
-0004ff80: 6474 5f74 6162 732e 6765 745f 6375 7272  dt_tabs.get_curr
-0004ff90: 656e 745f 6564 6974 6f72 2829 2e63 6c69  ent_editor().cli
-0004ffa0: 636b 5f70 6f73 203d 2051 506f 696e 7428  ck_pos = QPoint(
-0004ffb0: 3435 302c 2035 3030 290a 2020 2020 2020  450, 500).      
-0004ffc0: 2020 7070 6c5f 6564 745f 7461 6273 2e67    ppl_edt_tabs.g
-0004ffd0: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
-0004ffe0: 7228 292e 6164 645f 6e61 6d65 645f 7072  r().add_named_pr
-0004fff0: 6f63 6573 7328 5365 6c65 6374 290a 2020  ocess(Select).  
-00050000: 2020 2020 2020 7069 7065 6c69 6e65 203d        pipeline =
-00050010: 2070 706c 5f65 6474 5f74 6162 732e 6765   ppl_edt_tabs.ge
-00050020: 745f 6375 7272 656e 745f 7069 7065 6c69  t_current_pipeli
-00050030: 6e65 2829 0a0a 2020 2020 2020 2020 2320  ne()..        # 
-00050040: 4578 706f 7274 7320 7468 6520 6d61 6e64  Exports the mand
-00050050: 6174 6f72 7920 696e 7075 7420 616e 6420  atory input and 
-00050060: 6f75 7470 7574 2070 6c75 6773 2066 6f72  output plugs for
-00050070: 2022 7365 6c65 6374 5f31 220a 2020 2020   "select_1".    
-00050080: 2020 2020 7070 6c5f 6564 745f 7461 6273      ppl_edt_tabs
-00050090: 2e67 6574 5f63 7572 7265 6e74 5f65 6469  .get_current_edi
-000500a0: 746f 7228 292e 6375 7272 656e 745f 6e6f  tor().current_no
-000500b0: 6465 5f6e 616d 6520 3d20 2273 656c 6563  de_name = "selec
-000500c0: 745f 3122 0a20 2020 2020 2020 2070 706c  t_1".        ppl
-000500d0: 5f65 6474 5f74 6162 732e 6765 745f 6375  _edt_tabs.get_cu
-000500e0: 7272 656e 745f 6564 6974 6f72 2829 2e65  rrent_editor().e
-000500f0: 7870 6f72 745f 756e 636f 6e6e 6563 7465  xport_unconnecte
-00050100: 645f 6d61 6e64 6174 6f72 795f 696e 7075  d_mandatory_inpu
-00050110: 7473 2829 0a20 2020 2020 2020 2070 706c  ts().        ppl
-00050120: 5f65 6474 5f74 6162 732e 6765 745f 6375  _edt_tabs.get_cu
-00050130: 7272 656e 745f 6564 6974 6f72 2829 2e65  rrent_editor().e
-00050140: 7870 6f72 745f 616c 6c5f 756e 636f 6e6e  xport_all_unconn
-00050150: 6563 7465 645f 6f75 7470 7574 7328 290a  ected_outputs().
-00050160: 0a20 2020 2020 2020 2023 204d 6f63 6b73  .        # Mocks
-00050170: 2027 7061 7265 6e74 5f70 6970 656c 696e   'parent_pipelin
-00050180: 6527 2061 6e64 2072 6574 7572 6e73 2061  e' and returns a
-00050190: 2027 5072 6f63 6573 7327 2069 6e73 7465   'Process' inste
-000501a0: 6164 206f 6620 610a 2020 2020 2020 2020  ad of a.        
-000501b0: 2320 2750 6970 656c 696e 6527 0a20 2020  # 'Pipeline'.   
-000501c0: 2020 2020 2070 6970 656c 696e 6520 3d20       pipeline = 
-000501d0: 7069 7065 6c69 6e65 2e6e 6f64 6573 5b22  pipeline.nodes["
-000501e0: 7365 6c65 6374 5f31 225d 2e70 726f 6365  select_1"].proce
-000501f0: 7373 0a20 2020 2020 2020 2070 6970 656c  ss.        pipel
-00050200: 696e 652e 7061 7265 6e74 5f70 6970 656c  ine.parent_pipel
-00050210: 696e 6520 3d20 5472 7565 0a0a 2020 2020  ine = True..    
-00050220: 2020 2020 7070 6c5f 6d61 6e61 6765 722e      ppl_manager.
-00050230: 6765 745f 7069 7065 6c69 6e65 5f6f 725f  get_pipeline_or_
-00050240: 7072 6f63 6573 7320 3d20 4d61 6769 634d  process = MagicM
-00050250: 6f63 6b28 7265 7475 726e 5f76 616c 7565  ock(return_value
-00050260: 3d70 6970 656c 696e 6529 0a0a 2020 2020  =pipeline)..    
-00050270: 2020 2020 2320 4d6f 636b 7320 2761 736b      # Mocks 'ask
-00050280: 5f69 7465 7261 7465 645f 7069 7065 6c69  _iterated_pipeli
-00050290: 6e65 5f70 6c75 6773 2720 616e 6420 7265  ne_plugs' and re
-000502a0: 7475 726e 7320 7468 6520 7475 706c 650a  turns the tuple.
-000502b0: 2020 2020 2020 2020 2320 2728 6974 6572          # '(iter
-000502c0: 6174 6564 5f70 6c75 6773 2c20 6461 7461  ated_plugs, data
-000502d0: 6261 7365 5f70 6c75 6773 2927 0a20 2020  base_plugs)'.   
-000502e0: 2020 2020 2070 706c 5f6d 616e 6167 6572       ppl_manager
-000502f0: 2e61 736b 5f69 7465 7261 7465 645f 7069  .ask_iterated_pi
-00050300: 7065 6c69 6e65 5f70 6c75 6773 203d 204d  peline_plugs = M
-00050310: 6167 6963 4d6f 636b 280a 2020 2020 2020  agicMock(.      
-00050320: 2020 2020 2020 7265 7475 726e 5f76 616c        return_val
-00050330: 7565 3d28 5b22 696e 6465 7822 2c20 2269  ue=(["index", "i
-00050340: 6e6c 6973 7422 2c20 225f 6f75 7422 5d2c  nlist", "_out"],
-00050350: 205b 2269 6e6c 6973 7422 5d29 0a20 2020   ["inlist"]).   
-00050360: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-00050370: 2320 4d6f 636b 7320 2775 7064 6174 655f  # Mocks 'update_
-00050380: 6e6f 6465 735f 616e 645f 706c 7567 735f  nodes_and_plugs_
-00050390: 6163 7469 7661 7469 6f6e 2720 7769 7468  activation' with
-000503a0: 206e 6f20 7265 7475 726e 6564 2076 616c   no returned val
-000503b0: 7565 730a 2020 2020 2020 2020 7069 7065  ues.        pipe
-000503c0: 6c69 6e65 2e75 7064 6174 655f 6e6f 6465  line.update_node
-000503d0: 735f 616e 645f 706c 7567 735f 6163 7469  s_and_plugs_acti
-000503e0: 7661 7469 6f6e 203d 204d 6167 6963 4d6f  vation = MagicMo
-000503f0: 636b 2829 0a0a 2020 2020 2020 2020 2320  ck()..        # 
-00050400: 4275 696c 6473 2069 7465 7261 7465 6420  Builds iterated 
-00050410: 7069 7065 6c69 6e65 0a20 2020 2020 2020  pipeline.       
-00050420: 2070 7269 6e74 2822 5c6e 5c6e 2a2a 2041   print("\n\n** A
-00050430: 6e20 6578 6365 7074 696f 6e20 6d65 7373  n exception mess
-00050440: 6167 6520 6973 2065 7870 6563 7465 6420  age is expected 
-00050450: 6265 6c6f 775c 6e22 290a 2020 2020 2020  below\n").      
-00050460: 2020 7070 6c5f 6d61 6e61 6765 722e 6275    ppl_manager.bu
-00050470: 696c 645f 6974 6572 6174 6564 5f70 6970  ild_iterated_pip
-00050480: 656c 696e 6528 290a 0a20 2020 2020 2020  eline()..       
-00050490: 2023 2041 7373 6572 7473 2074 6865 206d   # Asserts the m
-000504a0: 6f63 6b20 6d65 7468 6f64 7320 7765 7265  ock methods were
-000504b0: 2063 616c 6c65 6420 6173 2065 7870 6563   called as expec
-000504c0: 7465 640a 2020 2020 2020 2020 7070 6c5f  ted.        ppl_
-000504d0: 6d61 6e61 6765 722e 6765 745f 7069 7065  manager.get_pipe
-000504e0: 6c69 6e65 5f6f 725f 7072 6f63 6573 732e  line_or_process.
-000504f0: 6173 7365 7274 5f63 616c 6c65 645f 6f6e  assert_called_on
-00050500: 6365 5f77 6974 6828 290a 2020 2020 2020  ce_with().      
-00050510: 2020 7070 6c5f 6d61 6e61 6765 722e 6173    ppl_manager.as
-00050520: 6b5f 6974 6572 6174 6564 5f70 6970 656c  k_iterated_pipel
-00050530: 696e 655f 706c 7567 732e 6173 7365 7274  ine_plugs.assert
-00050540: 5f63 616c 6c65 645f 6f6e 6365 5f77 6974  _called_once_wit
-00050550: 6828 0a20 2020 2020 2020 2020 2020 2070  h(.            p
-00050560: 6970 656c 696e 650a 2020 2020 2020 2020  ipeline.        
-00050570: 290a 2020 2020 2020 2020 7069 7065 6c69  ).        pipeli
-00050580: 6e65 2e75 7064 6174 655f 6e6f 6465 735f  ne.update_nodes_
-00050590: 616e 645f 706c 7567 735f 6163 7469 7661  and_plugs_activa
-000505a0: 7469 6f6e 2e61 7373 6572 745f 6361 6c6c  tion.assert_call
-000505b0: 6564 5f6f 6e63 655f 7769 7468 2829 0a0a  ed_once_with()..
-000505c0: 2020 2020 6465 6620 7465 7374 5f63 6865      def test_che
-000505d0: 636b 5f72 6571 7569 7265 6d65 6e74 7328  ck_requirements(
-000505e0: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
-000505f0: 2222 4164 6473 2061 2027 5365 6c65 6374  ""Adds a 'Select
-00050600: 2720 7072 6f63 6573 732c 2061 7070 656e  ' process, appen
-00050610: 6473 2069 7420 746f 2074 6865 206e 6f64  ds it to the nod
-00050620: 6573 206c 6973 7420 616e 6420 6368 6563  es list and chec
-00050630: 6b73 0a20 2020 2020 2020 2074 6865 2072  ks.        the r
-00050640: 6571 7569 7265 6d65 6e74 7320 666f 7220  equirements for 
-00050650: 7468 6520 6769 7665 6e20 6e6f 6465 2e0a  the given node..
-00050660: 0a20 2020 2020 2020 202d 2054 6573 7473  .        - Tests
-00050670: 3a20 5069 7065 6c69 6e65 4d61 6e61 6765  : PipelineManage
-00050680: 7254 6162 2e63 6865 636b 5f72 6571 7569  rTab.check_requi
-00050690: 7265 6d65 6e74 730a 2020 2020 2020 2020  rements.        
-000506a0: 2222 220a 0a20 2020 2020 2020 2070 706c  """..        ppl
-000506b0: 5f65 6474 5f74 6162 7320 3d20 7365 6c66  _edt_tabs = self
-000506c0: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 6970  .main_window.pip
-000506d0: 656c 696e 655f 6d61 6e61 6765 722e 7069  eline_manager.pi
-000506e0: 7065 6c69 6e65 4564 6974 6f72 5461 6273  pelineEditorTabs
-000506f0: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
-00050700: 655f 6d61 6e61 6765 7220 3d20 7365 6c66  e_manager = self
-00050710: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 6970  .main_window.pip
-00050720: 656c 696e 655f 6d61 6e61 6765 720a 0a20  eline_manager.. 
-00050730: 2020 2020 2020 2023 2041 6464 7320 7468         # Adds th
-00050740: 6520 7072 6f63 6573 7365 7320 5365 6c65  e processes Sele
-00050750: 6374 2c20 6372 6561 7465 7320 7468 6520  ct, creates the 
-00050760: 2273 656c 6563 745f 3122 206e 6f64 650a  "select_1" node.
-00050770: 2020 2020 2020 2020 7072 6f63 6573 735f          process_
-00050780: 636c 6173 7320 3d20 5365 6c65 6374 0a20  class = Select. 
-00050790: 2020 2020 2020 2070 706c 5f65 6474 5f74         ppl_edt_t
-000507a0: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
-000507b0: 6564 6974 6f72 2829 2e63 6c69 636b 5f70  editor().click_p
-000507c0: 6f73 203d 2051 506f 696e 7428 3435 302c  os = QPoint(450,
-000507d0: 2035 3030 290a 2020 2020 2020 2020 7070   500).        pp
-000507e0: 6c5f 6564 745f 7461 6273 2e67 6574 5f63  l_edt_tabs.get_c
-000507f0: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
-00050800: 6164 645f 6e61 6d65 645f 7072 6f63 6573  add_named_proces
-00050810: 7328 7072 6f63 6573 735f 636c 6173 7329  s(process_class)
-00050820: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
-00050830: 6520 3d20 7070 6c5f 6564 745f 7461 6273  e = ppl_edt_tabs
-00050840: 2e67 6574 5f63 7572 7265 6e74 5f70 6970  .get_current_pip
-00050850: 656c 696e 6528 290a 0a20 2020 2020 2020  eline()..       
-00050860: 2023 2041 7070 656e 6473 2061 2027 5072   # Appends a 'Pr
-00050870: 6f63 6573 7327 2074 6f20 2770 6970 656c  ocess' to 'pipel
-00050880: 696e 655f 6d61 6e61 6765 722e 6e6f 6465  ine_manager.node
-00050890: 5f6c 6973 7427 2061 6e64 2063 6865 636b  _list' and check
-000508a0: 730a 2020 2020 2020 2020 2320 7265 7175  s.        # requ
-000508b0: 6972 656d 656e 7473 0a20 2020 2020 2020  irements.       
-000508c0: 2070 6970 656c 696e 655f 6d61 6e61 6765   pipeline_manage
-000508d0: 722e 6e6f 6465 5f6c 6973 742e 6170 7065  r.node_list.appe
-000508e0: 6e64 2870 6970 656c 696e 652e 6e6f 6465  nd(pipeline.node
-000508f0: 735b 2273 656c 6563 745f 3122 5d2e 7072  s["select_1"].pr
-00050900: 6f63 6573 7329 0a20 2020 2020 2020 2063  ocess).        c
-00050910: 6f6e 6669 6720 3d20 7069 7065 6c69 6e65  onfig = pipeline
-00050920: 5f6d 616e 6167 6572 2e63 6865 636b 5f72  _manager.check_r
-00050930: 6571 7569 7265 6d65 6e74 7328 290a 0a20  equirements().. 
-00050940: 2020 2020 2020 2023 2041 7373 6572 7473         # Asserts
-00050950: 2074 6865 206f 7574 7075 740a 2020 2020   the output.    
-00050960: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
-00050970: 7275 6528 6973 696e 7374 616e 6365 2863  rue(isinstance(c
-00050980: 6f6e 6669 672c 2064 6963 7429 290a 2020  onfig, dict)).  
-00050990: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-000509a0: 7454 7275 6528 0a20 2020 2020 2020 2020  tTrue(.         
-000509b0: 2020 206c 6973 7428 636f 6e66 6967 2e6b     list(config.k
-000509c0: 6579 7328 2929 0a20 2020 2020 2020 2020  eys()).         
-000509d0: 2020 203d 3d20 5b22 6361 7073 756c 5f65     == ["capsul_e
-000509e0: 6e67 696e 6522 2c20 2263 6170 7375 6c2e  ngine", "capsul.
-000509f0: 656e 6769 6e65 2e6d 6f64 756c 652e 6e69  engine.module.ni
-00050a00: 7079 7065 225d 0a20 2020 2020 2020 2029  pype"].        )
-00050a10: 0a0a 2020 2020 6465 6620 7465 7374 5f63  ..    def test_c
-00050a20: 6c65 616e 7570 5f6f 6c64 6572 5f69 6e69  leanup_older_ini
-00050a30: 7428 7365 6c66 293a 0a20 2020 2020 2020  t(self):.       
-00050a40: 2022 2222 4d6f 636b 7320 6120 6272 6963   """Mocks a bric
-00050a50: 6b20 6c69 7374 2c20 6d6f 636b 7320 736f  k list, mocks so
-00050a60: 6d65 206d 6574 686f 6473 2066 726f 6d20  me methods from 
-00050a70: 7468 6520 7069 7065 6c69 6e65 206d 616e  the pipeline man
-00050a80: 6167 6572 0a20 2020 2020 2020 2061 6e64  ager.        and
-00050a90: 2063 6c65 616e 7320 7570 206f 6c64 2069   cleans up old i
-00050aa0: 6e69 7469 616c 697a 6174 696f 6e20 7265  nitialization re
-00050ab0: 7375 6c74 732e 0a0a 2020 2020 2020 2020  sults...        
-00050ac0: 2d20 5465 7374 733a 2050 6970 656c 696e  - Tests: Pipelin
-00050ad0: 654d 616e 6167 6572 5461 622e 636c 6561  eManagerTab.clea
-00050ae0: 6e75 705f 6f6c 6465 725f 696e 6974 0a20  nup_older_init. 
-00050af0: 2020 2020 2020 2022 2222 0a0a 2020 2020         """..    
-00050b00: 2020 2020 7070 6c5f 6d61 6e61 6765 7220      ppl_manager 
-00050b10: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
-00050b20: 6f77 2e70 6970 656c 696e 655f 6d61 6e61  ow.pipeline_mana
-00050b30: 6765 720a 0a20 2020 2020 2020 2023 204d  ger..        # M
-00050b40: 6f63 6b73 2061 2027 7069 7065 6c69 6e65  ocks a 'pipeline
-00050b50: 5f6d 616e 6167 6572 2e62 7269 636b 5f6c  _manager.brick_l
-00050b60: 6973 7427 0a20 2020 2020 2020 2062 7269  ist'.        bri
-00050b70: 636b 5f69 6420 3d20 7374 7228 7575 6964  ck_id = str(uuid
-00050b80: 2e75 7569 6434 2829 290a 2020 2020 2020  .uuid4()).      
-00050b90: 2020 7070 6c5f 6d61 6e61 6765 722e 6272    ppl_manager.br
-00050ba0: 6963 6b5f 6c69 7374 2e61 7070 656e 6428  ick_list.append(
-00050bb0: 6272 6963 6b5f 6964 290a 0a20 2020 2020  brick_id)..     
-00050bc0: 2020 2023 204d 6f63 6b73 206d 6574 686f     # Mocks metho
-00050bd0: 6473 2075 7365 6420 696e 2074 6865 2074  ds used in the t
-00050be0: 6573 740a 2020 2020 2020 2020 280a 2020  est.        (.  
-00050bf0: 2020 2020 2020 2020 2020 7070 6c5f 6d61            ppl_ma
-00050c00: 6e61 6765 722e 6d61 696e 5f77 696e 646f  nager.main_windo
-00050c10: 772e 6461 7461 5f62 726f 7773 6572 2e74  w.data_browser.t
-00050c20: 6162 6c65 5f64 6174 612e 6465 6c65 7465  able_data.delete
-00050c30: 5f66 726f 6d5f 6272 6963 6b0a 2020 2020  _from_brick.    
-00050c40: 2020 2020 2920 3d20 4d61 6769 634d 6f63      ) = MagicMoc
-00050c50: 6b28 290a 2020 2020 2020 2020 7070 6c5f  k().        ppl_
-00050c60: 6d61 6e61 6765 722e 7072 6f6a 6563 742e  manager.project.
-00050c70: 636c 6561 6e75 705f 6f72 7068 616e 5f6e  cleanup_orphan_n
-00050c80: 6f6e 6578 6973 7469 6e67 5f66 696c 6573  onexisting_files
-00050c90: 203d 204d 6167 6963 4d6f 636b 2829 0a0a   = MagicMock()..
-00050ca0: 2020 2020 2020 2020 2320 436c 6561 6e73          # Cleans
-00050cb0: 2075 7020 6f6c 6465 7220 696e 6974 0a20   up older init. 
-00050cc0: 2020 2020 2020 2070 706c 5f6d 616e 6167         ppl_manag
-00050cd0: 6572 2e63 6c65 616e 7570 5f6f 6c64 6572  er.cleanup_older
-00050ce0: 5f69 6e69 7428 290a 0a20 2020 2020 2020  _init()..       
-00050cf0: 2023 2041 7373 6572 7473 2074 6861 7420   # Asserts that 
-00050d00: 7468 6520 6d6f 636b 206d 6574 686f 6473  the mock methods
-00050d10: 2077 6572 6520 6361 6c6c 6564 2061 7320   were called as 
-00050d20: 6578 7065 6374 6564 0a20 2020 2020 2020  expected.       
-00050d30: 2028 0a20 2020 2020 2020 2020 2020 2070   (.            p
-00050d40: 706c 5f6d 616e 6167 6572 2e6d 6169 6e5f  pl_manager.main_
-00050d50: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
-00050d60: 7365 722e 7461 626c 655f 6461 7461 2e64  ser.table_data.d
-00050d70: 656c 6574 655f 6672 6f6d 5f62 7269 636b  elete_from_brick
-00050d80: 2e61 7373 6572 745f 6361 6c6c 6564 5f6f  .assert_called_o
-00050d90: 6e63 655f 7769 7468 280a 2020 2020 2020  nce_with(.      
-00050da0: 2020 2020 2020 2020 2020 6272 6963 6b5f            brick_
-00050db0: 6964 0a20 2020 2020 2020 2020 2020 2029  id.            )
-00050dc0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00050dd0: 2020 2028 0a20 2020 2020 2020 2020 2020     (.           
-00050de0: 2070 706c 5f6d 616e 6167 6572 2e70 726f   ppl_manager.pro
-00050df0: 6a65 6374 2e63 6c65 616e 7570 5f6f 7270  ject.cleanup_orp
-00050e00: 6861 6e5f 6e6f 6e65 7869 7374 696e 675f  han_nonexisting_
-00050e10: 6669 6c65 732e 6173 7365 7274 5f63 616c  files.assert_cal
-00050e20: 6c65 645f 6f6e 6365 5f77 6974 6828 290a  led_once_with().
-00050e30: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-00050e40: 2020 2023 2041 7373 6572 7473 2074 6861     # Asserts tha
-00050e50: 7420 626f 7468 2027 6272 6963 6b5f 6c69  t both 'brick_li
-00050e60: 7374 2720 616e 6420 276e 6f64 655f 6c69  st' and 'node_li
-00050e70: 7374 2720 7765 7265 2063 6c65 616e 6564  st' were cleaned
-00050e80: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00050e90: 7365 7274 5472 7565 286c 656e 2870 706c  sertTrue(len(ppl
-00050ea0: 5f6d 616e 6167 6572 2e62 7269 636b 5f6c  _manager.brick_l
-00050eb0: 6973 7429 203d 3d20 3029 0a20 2020 2020  ist) == 0).     
-00050ec0: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-00050ed0: 7565 286c 656e 2870 706c 5f6d 616e 6167  ue(len(ppl_manag
-00050ee0: 6572 2e6e 6f64 655f 6c69 7374 2920 3d3d  er.node_list) ==
-00050ef0: 2030 290a 0a20 2020 2064 6566 2074 6573   0)..    def tes
-00050f00: 745f 636f 6d70 6c65 7465 5f70 6970 656c  t_complete_pipel
-00050f10: 696e 655f 7061 7261 6d65 7465 7273 2873  ine_parameters(s
-00050f20: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
-00050f30: 224d 6f63 6b73 2061 206d 6574 686f 6420  "Mocks a method 
-00050f40: 6f66 2070 6970 656c 696e 6520 6d61 6e61  of pipeline mana
-00050f50: 6765 7220 616e 6420 636f 6d70 6c65 7465  ger and complete
-00050f60: 7320 7468 6520 7069 7065 6c69 6e65 0a20  s the pipeline. 
-00050f70: 2020 2020 2020 2070 6172 616d 6574 6572         parameter
-00050f80: 732e 0a0a 2020 2020 2020 2020 2d20 5465  s...        - Te
-00050f90: 7374 733a 2050 6970 656c 696e 654d 616e  sts: PipelineMan
-00050fa0: 6167 6572 5461 622e 636f 6d70 6c65 7465  agerTab.complete
-00050fb0: 5f70 6970 656c 696e 655f 7061 7261 6d65  _pipeline_parame
-00050fc0: 7465 7273 0a20 2020 2020 2020 2022 2222  ters.        """
-00050fd0: 0a0a 2020 2020 2020 2020 7070 6c5f 6d61  ..        ppl_ma
-00050fe0: 6e61 6765 7220 3d20 7365 6c66 2e6d 6169  nager = self.mai
-00050ff0: 6e5f 7769 6e64 6f77 2e70 6970 656c 696e  n_window.pipelin
-00051000: 655f 6d61 6e61 6765 720a 0a20 2020 2020  e_manager..     
-00051010: 2020 2023 204d 6f63 6b73 206d 6574 686f     # Mocks metho
-00051020: 6420 7573 6564 2069 6e20 7468 6520 7465  d used in the te
-00051030: 7374 0a20 2020 2020 2020 2070 706c 5f6d  st.        ppl_m
-00051040: 616e 6167 6572 2e67 6574 5f63 6170 7375  anager.get_capsu
-00051050: 6c5f 656e 6769 6e65 203d 204d 6167 6963  l_engine = Magic
-00051060: 4d6f 636b 280a 2020 2020 2020 2020 2020  Mock(.          
-00051070: 2020 7265 7475 726e 5f76 616c 7565 3d70    return_value=p
-00051080: 706c 5f6d 616e 6167 6572 2e67 6574 5f70  pl_manager.get_p
-00051090: 6970 656c 696e 655f 6f72 5f70 726f 6365  ipeline_or_proce
-000510a0: 7373 2829 0a20 2020 2020 2020 2029 0a0a  ss().        )..
-000510b0: 2020 2020 2020 2020 2320 436f 6d70 6c65          # Comple
-000510c0: 7465 2070 6970 656c 696e 6520 7061 7261  te pipeline para
-000510d0: 6d65 7465 7273 0a20 2020 2020 2020 2070  meters.        p
-000510e0: 706c 5f6d 616e 6167 6572 2e63 6f6d 706c  pl_manager.compl
-000510f0: 6574 655f 7069 7065 6c69 6e65 5f70 6172  ete_pipeline_par
-00051100: 616d 6574 6572 7328 290a 0a20 2020 2020  ameters()..     
-00051110: 2020 2023 2041 7373 6572 7473 2074 6861     # Asserts tha
-00051120: 7420 7468 6520 6d6f 636b 206d 6574 686f  t the mock metho
-00051130: 6420 7761 7320 6361 6c6c 6564 2061 7320  d was called as 
-00051140: 6578 7065 6374 6564 0a20 2020 2020 2020  expected.       
-00051150: 2070 706c 5f6d 616e 6167 6572 2e67 6574   ppl_manager.get
-00051160: 5f63 6170 7375 6c5f 656e 6769 6e65 2e61  _capsul_engine.a
-00051170: 7373 6572 745f 6361 6c6c 6564 5f6f 6e63  ssert_called_onc
-00051180: 655f 7769 7468 2829 0a0a 2020 2020 6465  e_with()..    de
-00051190: 6620 7465 7374 5f64 656c 6574 655f 7072  f test_delete_pr
-000511a0: 6f63 6573 7365 7328 7365 6c66 293a 0a20  ocesses(self):. 
-000511b0: 2020 2020 2020 2022 2222 4465 6c65 7465         """Delete
-000511c0: 7320 6120 7072 6f63 6573 7320 616e 6420  s a process and 
-000511d0: 6d61 6b65 7320 7468 6520 756e 646f 2f72  makes the undo/r
-000511e0: 6564 6f20 6163 7469 6f6e 2e22 2222 0a0a  edo action."""..
-000511f0: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
-00051200: 5f6d 616e 6167 6572 203d 2073 656c 662e  _manager = self.
-00051210: 6d61 696e 5f77 696e 646f 772e 7069 7065  main_window.pipe
-00051220: 6c69 6e65 5f6d 616e 6167 6572 0a20 2020  line_manager.   
-00051230: 2020 2020 2070 6970 656c 696e 655f 6564       pipeline_ed
-00051240: 6974 6f72 5f74 6162 7320 3d20 280a 2020  itor_tabs = (.  
-00051250: 2020 2020 2020 2020 2020 7365 6c66 2e6d            self.m
-00051260: 6169 6e5f 7769 6e64 6f77 2e70 6970 656c  ain_window.pipel
-00051270: 696e 655f 6d61 6e61 6765 722e 7069 7065  ine_manager.pipe
-00051280: 6c69 6e65 4564 6974 6f72 5461 6273 0a20  lineEditorTabs. 
-00051290: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-000512a0: 2020 2320 4164 6469 6e67 2070 726f 6365    # Adding proce
-000512b0: 7373 6573 0a20 2020 2020 2020 2070 726f  sses.        pro
-000512c0: 6365 7373 5f63 6c61 7373 203d 2053 6d6f  cess_class = Smo
-000512d0: 6f74 680a 0a20 2020 2020 2020 2070 6970  oth..        pip
-000512e0: 656c 696e 655f 6564 6974 6f72 5f74 6162  eline_editor_tab
-000512f0: 732e 6765 745f 6375 7272 656e 745f 6564  s.get_current_ed
-00051300: 6974 6f72 2829 2e63 6c69 636b 5f70 6f73  itor().click_pos
-00051310: 203d 2051 506f 696e 7428 3435 302c 2035   = QPoint(450, 5
-00051320: 3030 290a 2020 2020 2020 2020 2320 4372  00).        # Cr
-00051330: 6561 7465 7320 6120 6e6f 6465 2063 616c  eates a node cal
-00051340: 6c65 6420 2273 6d6f 6f74 685f 3122 0a20  led "smooth_1". 
-00051350: 2020 2020 2020 2070 6970 656c 696e 655f         pipeline_
-00051360: 6564 6974 6f72 5f74 6162 732e 6765 745f  editor_tabs.get_
-00051370: 6375 7272 656e 745f 6564 6974 6f72 2829  current_editor()
-00051380: 2e61 6464 5f6e 616d 6564 5f70 726f 6365  .add_named_proce
-00051390: 7373 280a 2020 2020 2020 2020 2020 2020  ss(.            
-000513a0: 7072 6f63 6573 735f 636c 6173 730a 2020  process_class.  
-000513b0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-000513c0: 2320 4372 6561 7465 7320 6120 6e6f 6465  # Creates a node
-000513d0: 2063 616c 6c65 6420 2273 6d6f 6f74 685f   called "smooth_
-000513e0: 3222 0a20 2020 2020 2020 2070 6970 656c  2".        pipel
-000513f0: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
-00051400: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
-00051410: 6f72 2829 2e61 6464 5f6e 616d 6564 5f70  or().add_named_p
-00051420: 726f 6365 7373 280a 2020 2020 2020 2020  rocess(.        
-00051430: 2020 2020 7072 6f63 6573 735f 636c 6173      process_clas
-00051440: 730a 2020 2020 2020 2020 290a 2020 2020  s.        ).    
-00051450: 2020 2020 2320 4372 6561 7465 7320 6120      # Creates a 
-00051460: 6e6f 6465 2063 616c 6c65 6420 2273 6d6f  node called "smo
-00051470: 6f74 685f 3322 0a20 2020 2020 2020 2070  oth_3".        p
-00051480: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
-00051490: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
-000514a0: 6564 6974 6f72 2829 2e61 6464 5f6e 616d  editor().add_nam
-000514b0: 6564 5f70 726f 6365 7373 280a 2020 2020  ed_process(.    
-000514c0: 2020 2020 2020 2020 7072 6f63 6573 735f          process_
-000514d0: 636c 6173 730a 2020 2020 2020 2020 290a  class.        ).
-000514e0: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
-000514f0: 6520 3d20 7069 7065 6c69 6e65 5f65 6469  e = pipeline_edi
-00051500: 746f 725f 7461 6273 2e67 6574 5f63 7572  tor_tabs.get_cur
-00051510: 7265 6e74 5f70 6970 656c 696e 6528 290a  rent_pipeline().
-00051520: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00051530: 7365 7274 5472 7565 2822 736d 6f6f 7468  sertTrue("smooth
-00051540: 5f31 2220 696e 2070 6970 656c 696e 652e  _1" in pipeline.
-00051550: 6e6f 6465 732e 6b65 7973 2829 290a 2020  nodes.keys()).  
-00051560: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00051570: 7454 7275 6528 2273 6d6f 6f74 685f 3222  tTrue("smooth_2"
-00051580: 2069 6e20 7069 7065 6c69 6e65 2e6e 6f64   in pipeline.nod
-00051590: 6573 2e6b 6579 7328 2929 0a20 2020 2020  es.keys()).     
-000515a0: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-000515b0: 7565 2822 736d 6f6f 7468 5f33 2220 696e  ue("smooth_3" in
-000515c0: 2070 6970 656c 696e 652e 6e6f 6465 732e   pipeline.nodes.
-000515d0: 6b65 7973 2829 290a 0a20 2020 2020 2020  keys())..       
-000515e0: 2070 6970 656c 696e 655f 6564 6974 6f72   pipeline_editor
-000515f0: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
-00051600: 745f 6564 6974 6f72 2829 2e61 6464 5f6c  t_editor().add_l
-00051610: 696e 6b28 0a20 2020 2020 2020 2020 2020  ink(.           
-00051620: 2028 2273 6d6f 6f74 685f 3122 2c20 225f   ("smooth_1", "_
-00051630: 736d 6f6f 7468 6564 5f66 696c 6573 2229  smoothed_files")
-00051640: 2c0a 2020 2020 2020 2020 2020 2020 2822  ,.            ("
-00051650: 736d 6f6f 7468 5f32 222c 2022 696e 5f66  smooth_2", "in_f
-00051660: 696c 6573 2229 2c0a 2020 2020 2020 2020  iles"),.        
-00051670: 2020 2020 6163 7469 7665 3d54 7275 652c      active=True,
-00051680: 0a20 2020 2020 2020 2020 2020 2077 6561  .            wea
-00051690: 6b3d 4661 6c73 652c 0a20 2020 2020 2020  k=False,.       
-000516a0: 2029 0a0a 2020 2020 2020 2020 7365 6c66   )..        self
-000516b0: 2e61 7373 6572 7445 7175 616c 280a 2020  .assertEqual(.  
-000516c0: 2020 2020 2020 2020 2020 312c 206c 656e            1, len
-000516d0: 2870 6970 656c 696e 652e 6e6f 6465 735b  (pipeline.nodes[
-000516e0: 2273 6d6f 6f74 685f 3222 5d2e 706c 7567  "smooth_2"].plug
-000516f0: 735b 2269 6e5f 6669 6c65 7322 5d2e 6c69  s["in_files"].li
-00051700: 6e6b 735f 6672 6f6d 290a 2020 2020 2020  nks_from).      
-00051710: 2020 290a 2020 2020 2020 2020 7365 6c66    ).        self
-00051720: 2e61 7373 6572 7445 7175 616c 280a 2020  .assertEqual(.  
-00051730: 2020 2020 2020 2020 2020 312c 0a20 2020            1,.   
-00051740: 2020 2020 2020 2020 206c 656e 2870 6970           len(pip
-00051750: 656c 696e 652e 6e6f 6465 735b 2273 6d6f  eline.nodes["smo
-00051760: 6f74 685f 3122 5d2e 706c 7567 735b 225f  oth_1"].plugs["_
-00051770: 736d 6f6f 7468 6564 5f66 696c 6573 225d  smoothed_files"]
-00051780: 2e6c 696e 6b73 5f74 6f29 2c0a 2020 2020  .links_to),.    
-00051790: 2020 2020 290a 0a20 2020 2020 2020 2070      )..        p
-000517a0: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
-000517b0: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
-000517c0: 6564 6974 6f72 2829 2e61 6464 5f6c 696e  editor().add_lin
-000517d0: 6b28 0a20 2020 2020 2020 2020 2020 2028  k(.            (
-000517e0: 2273 6d6f 6f74 685f 3222 2c20 225f 736d  "smooth_2", "_sm
-000517f0: 6f6f 7468 6564 5f66 696c 6573 2229 2c0a  oothed_files"),.
-00051800: 2020 2020 2020 2020 2020 2020 2822 736d              ("sm
-00051810: 6f6f 7468 5f33 222c 2022 696e 5f66 696c  ooth_3", "in_fil
-00051820: 6573 2229 2c0a 2020 2020 2020 2020 2020  es"),.          
-00051830: 2020 6163 7469 7665 3d54 7275 652c 0a20    active=True,. 
-00051840: 2020 2020 2020 2020 2020 2077 6561 6b3d             weak=
-00051850: 4661 6c73 652c 0a20 2020 2020 2020 2029  False,.        )
-00051860: 0a0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-00051870: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
-00051880: 2020 2020 2020 2020 312c 206c 656e 2870          1, len(p
-00051890: 6970 656c 696e 652e 6e6f 6465 735b 2273  ipeline.nodes["s
-000518a0: 6d6f 6f74 685f 3322 5d2e 706c 7567 735b  mooth_3"].plugs[
-000518b0: 2269 6e5f 6669 6c65 7322 5d2e 6c69 6e6b  "in_files"].link
-000518c0: 735f 6672 6f6d 290a 2020 2020 2020 2020  s_from).        
+00046f90: 6f72 5f74 6162 7320 3d20 280a 2020 2020  or_tabs = (.    
+00046fa0: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
+00046fb0: 6e5f 7769 6e64 6f77 2e70 6970 656c 696e  n_window.pipelin
+00046fc0: 655f 6d61 6e61 6765 722e 7069 7065 6c69  e_manager.pipeli
+00046fd0: 6e65 4564 6974 6f72 5461 6273 0a20 2020  neEditorTabs.   
+00046fe0: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+00046ff0: 2320 4164 6469 6e67 2061 2070 726f 6365  # Adding a proce
+00047000: 7373 2066 726f 6d20 6120 2e70 7920 6669  ss from a .py fi
+00047010: 6c65 2c20 6372 6561 7465 7320 6120 6e6f  le, creates a no
+00047020: 6465 2063 616c 6c65 6420 2273 6d6f 6f74  de called "smoot
+00047030: 685f 3122 0a20 2020 2020 2020 2070 6970  h_1".        pip
+00047040: 656c 696e 655f 6564 6974 6f72 5f74 6162  eline_editor_tab
+00047050: 732e 6765 745f 6375 7272 656e 745f 6564  s.get_current_ed
+00047060: 6974 6f72 2829 2e63 6c69 636b 5f70 6f73  itor().click_pos
+00047070: 203d 2051 506f 696e 7428 3435 302c 2035   = QPoint(450, 5
+00047080: 3030 290a 2020 2020 2020 2020 636f 6e66  00).        conf
+00047090: 6967 203d 2043 6f6e 6669 6728 636f 6e66  ig = Config(conf
+000470a0: 6967 5f70 6174 683d 7365 6c66 2e63 6f6e  ig_path=self.con
+000470b0: 6669 675f 7061 7468 290a 2020 2020 2020  fig_path).      
+000470c0: 2020 6669 6c65 6e61 6d65 203d 206f 732e    filename = os.
+000470d0: 7061 7468 2e6a 6f69 6e28 0a20 2020 2020  path.join(.     
+000470e0: 2020 2020 2020 2063 6f6e 6669 672e 6765         config.ge
+000470f0: 745f 6d69 615f 7061 7468 2829 2c0a 2020  t_mia_path(),.  
+00047100: 2020 2020 2020 2020 2020 2270 726f 6365            "proce
+00047110: 7373 6573 222c 0a20 2020 2020 2020 2020  sses",.         
+00047120: 2020 2022 5573 6572 5f70 726f 6365 7373     "User_process
+00047130: 6573 222c 0a20 2020 2020 2020 2020 2020  es",.           
+00047140: 2022 7465 7374 5f70 6970 656c 696e 655f   "test_pipeline_
+00047150: 312e 7079 222c 0a20 2020 2020 2020 2029  1.py",.        )
+00047160: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
+00047170: 655f 6564 6974 6f72 5f74 6162 732e 6c6f  e_editor_tabs.lo
+00047180: 6164 5f70 6970 656c 696e 6528 6669 6c65  ad_pipeline(file
+00047190: 6e61 6d65 290a 2020 2020 2020 2020 7069  name).        pi
+000471a0: 7065 6c69 6e65 203d 2070 6970 656c 696e  peline = pipelin
+000471b0: 655f 6564 6974 6f72 5f74 6162 732e 6765  e_editor_tabs.ge
+000471c0: 745f 6375 7272 656e 745f 7069 7065 6c69  t_current_pipeli
+000471d0: 6e65 2829 0a20 2020 2020 2020 2073 656c  ne().        sel
+000471e0: 662e 6173 7365 7274 5472 7565 2822 736d  f.assertTrue("sm
+000471f0: 6f6f 7468 5f31 2220 696e 2070 6970 656c  ooth_1" in pipel
+00047200: 696e 652e 6e6f 6465 732e 6b65 7973 2829  ine.nodes.keys()
+00047210: 290a 0a20 2020 2020 2020 2023 204d 616b  )..        # Mak
+00047220: 6520 6120 6e65 7720 7069 7065 6c69 6e65  e a new pipeline
+00047230: 2065 6469 746f 7220 7461 620a 2020 2020   editor tab.    
+00047240: 2020 2020 7069 7065 6c69 6e65 5f65 6469      pipeline_edi
+00047250: 746f 725f 7461 6273 2e6e 6577 5f74 6162  tor_tabs.new_tab
+00047260: 2829 0a20 2020 2020 2020 2070 6970 656c  ().        pipel
+00047270: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
+00047280: 7365 745f 6375 7272 656e 745f 6564 6974  set_current_edit
+00047290: 6f72 5f62 795f 7461 625f 6e61 6d65 2822  or_by_tab_name("
+000472a0: 4e65 7720 5069 7065 6c69 6e65 2031 2229  New Pipeline 1")
+000472b0: 0a0a 2020 2020 2020 2020 2320 4164 6469  ..        # Addi
+000472c0: 6e67 2061 2070 726f 6365 7373 2066 726f  ng a process fro
+000472d0: 6d20 5061 636b 6167 6573 206c 6962 7261  m Packages libra
+000472e0: 7279 2c20 6372 6561 7465 7320 6120 6e6f  ry, creates a no
+000472f0: 6465 2063 616c 6c65 640a 2020 2020 2020  de called.      
+00047300: 2020 2320 2274 6573 745f 7069 7065 6c69    # "test_pipeli
+00047310: 6e65 5f31 5f31 220a 2020 2020 2020 2020  ne_1_1".        
+00047320: 7069 7065 6c69 6e65 5f65 6469 746f 725f  pipeline_editor_
+00047330: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
+00047340: 5f65 6469 746f 7228 292e 636c 6963 6b5f  _editor().click_
+00047350: 706f 7320 3d20 5150 6f69 6e74 2834 3530  pos = QPoint(450
+00047360: 2c20 3530 3029 0a20 2020 2020 2020 2070  , 500).        p
+00047370: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
+00047380: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
+00047390: 6564 6974 6f72 2829 2e64 726f 705f 7072  editor().drop_pr
+000473a0: 6f63 6573 7328 0a20 2020 2020 2020 2020  ocess(.         
+000473b0: 2020 2022 5573 6572 5f70 726f 6365 7373     "User_process
+000473c0: 6573 2e54 6573 745f 7069 7065 6c69 6e65  es.Test_pipeline
+000473d0: 5f31 220a 2020 2020 2020 2020 290a 2020  _1".        ).  
+000473e0: 2020 2020 2020 7069 7065 6c69 6e65 203d        pipeline =
+000473f0: 2070 6970 656c 696e 655f 6564 6974 6f72   pipeline_editor
+00047400: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
+00047410: 745f 7069 7065 6c69 6e65 2829 0a20 2020  t_pipeline().   
+00047420: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00047430: 5472 7565 2822 7465 7374 5f70 6970 656c  True("test_pipel
+00047440: 696e 655f 315f 3122 2069 6e20 7069 7065  ine_1_1" in pipe
+00047450: 6c69 6e65 2e6e 6f64 6573 2e6b 6579 7328  line.nodes.keys(
+00047460: 2929 0a0a 2020 2020 2020 2020 2320 4164  ))..        # Ad
+00047470: 6469 6e67 2074 776f 2070 726f 6365 7373  ding two process
+00047480: 6573 2c20 6372 6561 7465 7320 6e6f 6465  es, creates node
+00047490: 7320 6361 6c6c 6564 2022 736d 6f6f 7468  s called "smooth
+000474a0: 5f31 2220 616e 6420 2273 6d6f 6f74 685f  _1" and "smooth_
+000474b0: 3222 0a20 2020 2020 2020 2070 6970 656c  2".        pipel
+000474c0: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
+000474d0: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
+000474e0: 6f72 2829 2e64 726f 705f 7072 6f63 6573  or().drop_proces
+000474f0: 7328 0a20 2020 2020 2020 2020 2020 2022  s(.            "
+00047500: 6e69 7079 7065 2e69 6e74 6572 6661 6365  nipype.interface
+00047510: 732e 7370 6d2e 536d 6f6f 7468 220a 2020  s.spm.Smooth".  
+00047520: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00047530: 7069 7065 6c69 6e65 5f65 6469 746f 725f  pipeline_editor_
+00047540: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
+00047550: 5f65 6469 746f 7228 292e 6472 6f70 5f70  _editor().drop_p
+00047560: 726f 6365 7373 280a 2020 2020 2020 2020  rocess(.        
+00047570: 2020 2020 226e 6970 7970 652e 696e 7465      "nipype.inte
+00047580: 7266 6163 6573 2e73 706d 2e53 6d6f 6f74  rfaces.spm.Smoot
+00047590: 6822 0a20 2020 2020 2020 2029 0a20 2020  h".        ).   
+000475a0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+000475b0: 5472 7565 2822 736d 6f6f 7468 5f31 2220  True("smooth_1" 
+000475c0: 696e 2070 6970 656c 696e 652e 6e6f 6465  in pipeline.node
+000475d0: 732e 6b65 7973 2829 290a 2020 2020 2020  s.keys()).      
+000475e0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+000475f0: 6528 2273 6d6f 6f74 685f 3222 2069 6e20  e("smooth_2" in 
+00047600: 7069 7065 6c69 6e65 2e6e 6f64 6573 2e6b  pipeline.nodes.k
+00047610: 6579 7328 2929 0a0a 2020 2020 2020 2020  eys())..        
+00047620: 2320 4164 6469 6e67 2061 206c 696e 6b20  # Adding a link 
+00047630: 6265 7477 6565 6e20 736d 6f6f 7468 5f31  between smooth_1
+00047640: 2061 6e64 2074 6573 745f 7069 7065 6c69   and test_pipeli
+00047650: 6e65 5f31 5f31 206e 6f64 6573 0a20 2020  ne_1_1 nodes.   
+00047660: 2020 2020 2070 6970 656c 696e 655f 6564       pipeline_ed
+00047670: 6974 6f72 5f74 6162 732e 6765 745f 6375  itor_tabs.get_cu
+00047680: 7272 656e 745f 6564 6974 6f72 2829 2e61  rrent_editor().a
+00047690: 6464 5f6c 696e 6b28 0a20 2020 2020 2020  dd_link(.       
+000476a0: 2020 2020 2028 2273 6d6f 6f74 685f 3122       ("smooth_1"
+000476b0: 2c20 225f 736d 6f6f 7468 6564 5f66 696c  , "_smoothed_fil
+000476c0: 6573 2229 2c0a 2020 2020 2020 2020 2020  es"),.          
+000476d0: 2020 2822 7465 7374 5f70 6970 656c 696e    ("test_pipelin
+000476e0: 655f 315f 3122 2c20 2269 6e5f 6669 6c65  e_1_1", "in_file
+000476f0: 7322 292c 0a20 2020 2020 2020 2020 2020  s"),.           
+00047700: 2061 6374 6976 653d 5472 7565 2c0a 2020   active=True,.  
+00047710: 2020 2020 2020 2020 2020 7765 616b 3d46            weak=F
+00047720: 616c 7365 2c0a 2020 2020 2020 2020 290a  alse,.        ).
+00047730: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00047740: 6572 7445 7175 616c 280a 2020 2020 2020  ertEqual(.      
+00047750: 2020 2020 2020 312c 0a20 2020 2020 2020        1,.       
+00047760: 2020 2020 206c 656e 280a 2020 2020 2020       len(.      
+00047770: 2020 2020 2020 2020 2020 7069 7065 6c69            pipeli
+00047780: 6e65 2e6e 6f64 6573 5b22 7465 7374 5f70  ne.nodes["test_p
+00047790: 6970 656c 696e 655f 315f 3122 5d0a 2020  ipeline_1_1"].  
+000477a0: 2020 2020 2020 2020 2020 2020 2020 2e70                .p
+000477b0: 6c75 6773 5b22 696e 5f66 696c 6573 225d  lugs["in_files"]
+000477c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000477d0: 202e 6c69 6e6b 735f 6672 6f6d 0a20 2020   .links_from.   
+000477e0: 2020 2020 2020 2020 2029 2c0a 2020 2020           ),.    
+000477f0: 2020 2020 290a 2020 2020 2020 2020 7365      ).        se
+00047800: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
+00047810: 2020 2020 2020 2020 2020 2020 312c 0a20              1,. 
+00047820: 2020 2020 2020 2020 2020 206c 656e 2870             len(p
+00047830: 6970 656c 696e 652e 6e6f 6465 735b 2273  ipeline.nodes["s
+00047840: 6d6f 6f74 685f 3122 5d2e 706c 7567 735b  mooth_1"].plugs[
+00047850: 225f 736d 6f6f 7468 6564 5f66 696c 6573  "_smoothed_files
+00047860: 225d 2e6c 696e 6b73 5f74 6f29 2c0a 2020  "].links_to),.  
+00047870: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+00047880: 2023 2041 6464 696e 6720 6120 6c69 6e6b   # Adding a link
+00047890: 2062 6574 7765 656e 2074 6573 745f 7069   between test_pi
+000478a0: 7065 6c69 6e65 5f31 5f31 2061 6e64 2073  peline_1_1 and s
+000478b0: 6d6f 6f74 685f 3220 6e6f 6465 730a 2020  mooth_2 nodes.  
+000478c0: 2020 2020 2020 7069 7065 6c69 6e65 5f65        pipeline_e
+000478d0: 6469 746f 725f 7461 6273 2e67 6574 5f63  ditor_tabs.get_c
+000478e0: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
+000478f0: 6164 645f 6c69 6e6b 280a 2020 2020 2020  add_link(.      
+00047900: 2020 2020 2020 2822 7465 7374 5f70 6970        ("test_pip
+00047910: 656c 696e 655f 315f 3122 2c20 225f 736d  eline_1_1", "_sm
+00047920: 6f6f 7468 6564 5f66 696c 6573 2229 2c0a  oothed_files"),.
+00047930: 2020 2020 2020 2020 2020 2020 2822 736d              ("sm
+00047940: 6f6f 7468 5f32 222c 2022 696e 5f66 696c  ooth_2", "in_fil
+00047950: 6573 2229 2c0a 2020 2020 2020 2020 2020  es"),.          
+00047960: 2020 6163 7469 7665 3d54 7275 652c 0a20    active=True,. 
+00047970: 2020 2020 2020 2020 2020 2077 6561 6b3d             weak=
+00047980: 4661 6c73 652c 0a20 2020 2020 2020 2029  False,.        )
+00047990: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+000479a0: 7365 7274 4571 7561 6c28 0a20 2020 2020  sertEqual(.     
+000479b0: 2020 2020 2020 2031 2c20 6c65 6e28 7069         1, len(pi
+000479c0: 7065 6c69 6e65 2e6e 6f64 6573 5b22 736d  peline.nodes["sm
+000479d0: 6f6f 7468 5f32 225d 2e70 6c75 6773 5b22  ooth_2"].plugs["
+000479e0: 696e 5f66 696c 6573 225d 2e6c 696e 6b73  in_files"].links
+000479f0: 5f66 726f 6d29 0a20 2020 2020 2020 2029  _from).        )
+00047a00: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00047a10: 7365 7274 4571 7561 6c28 0a20 2020 2020  sertEqual(.     
+00047a20: 2020 2020 2020 2031 2c0a 2020 2020 2020         1,.      
+00047a30: 2020 2020 2020 6c65 6e28 0a20 2020 2020        len(.     
+00047a40: 2020 2020 2020 2020 2020 2070 6970 656c             pipel
+00047a50: 696e 652e 6e6f 6465 735b 2274 6573 745f  ine.nodes["test_
+00047a60: 7069 7065 6c69 6e65 5f31 5f31 225d 0a20  pipeline_1_1"]. 
+00047a70: 2020 2020 2020 2020 2020 2020 2020 202e                 .
+00047a80: 706c 7567 735b 225f 736d 6f6f 7468 6564  plugs["_smoothed
+00047a90: 5f66 696c 6573 225d 0a20 2020 2020 2020  _files"].       
+00047aa0: 2020 2020 2020 2020 202e 6c69 6e6b 735f           .links_
+00047ab0: 746f 0a20 2020 2020 2020 2020 2020 2029  to.            )
+00047ac0: 2c0a 2020 2020 2020 2020 290a 0a20 2020  ,.        )..   
+00047ad0: 2020 2020 2023 2052 6574 7572 6e20 746f       # Return to
+00047ae0: 2074 6865 2066 6972 7374 2074 6162 0a20   the first tab. 
+00047af0: 2020 2020 2020 2070 6970 656c 696e 655f         pipeline_
+00047b00: 6564 6974 6f72 5f74 6162 732e 7365 745f  editor_tabs.set_
+00047b10: 6375 7272 656e 745f 6564 6974 6f72 5f62  current_editor_b
+00047b20: 795f 7461 625f 6e61 6d65 280a 2020 2020  y_tab_name(.    
+00047b30: 2020 2020 2020 2020 2274 6573 745f 7069          "test_pi
+00047b40: 7065 6c69 6e65 5f31 2e70 7922 0a20 2020  peline_1.py".   
+00047b50: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+00047b60: 2320 4578 706f 7274 2061 6c6c 2070 6c75  # Export all plu
+00047b70: 6773 206f 6620 7468 6520 736d 6f6f 7468  gs of the smooth
+00047b80: 5f31 206e 6f64 650a 2020 2020 2020 2020  _1 node.        
+00047b90: 7069 7065 6c69 6e65 5f65 6469 746f 725f  pipeline_editor_
+00047ba0: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
+00047bb0: 5f65 6469 746f 7228 292e 636c 6963 6b5f  _editor().click_
+00047bc0: 706f 7320 3d20 5150 6f69 6e74 2834 3530  pos = QPoint(450
+00047bd0: 2c20 3530 3029 0a20 2020 2020 2020 2070  , 500).        p
+00047be0: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
+00047bf0: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
+00047c00: 6564 6974 6f72 2829 2e65 7870 6f72 745f  editor().export_
+00047c10: 6e6f 6465 5f70 6c75 6773 280a 2020 2020  node_plugs(.    
+00047c20: 2020 2020 2020 2020 2273 6d6f 6f74 685f          "smooth_
+00047c30: 3122 2c20 6f70 7469 6f6e 616c 3d54 7275  1", optional=Tru
+00047c40: 650a 2020 2020 2020 2020 290a 0a20 2020  e.        )..   
+00047c50: 2020 2020 2023 2053 6176 6520 7468 6520       # Save the 
+00047c60: 7069 7065 6c69 6e65 0a20 2020 2020 2020  pipeline.       
+00047c70: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+00047c80: 772e 7069 7065 6c69 6e65 5f6d 616e 6167  w.pipeline_manag
+00047c90: 6572 2e73 6176 6550 6970 656c 696e 6528  er.savePipeline(
+00047ca0: 756e 6368 6563 6b3d 5472 7565 290a 0a20  uncheck=True).. 
+00047cb0: 2020 2020 2020 2023 2047 6f20 6261 636b         # Go back
+00047cc0: 2074 6f20 7468 6520 7365 636f 6e64 2074   to the second t
+00047cd0: 6162 0a20 2020 2020 2020 2070 6970 656c  ab.        pipel
+00047ce0: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
+00047cf0: 7365 745f 6375 7272 656e 745f 6564 6974  set_current_edit
+00047d00: 6f72 5f62 795f 7461 625f 6e61 6d65 2822  or_by_tab_name("
+00047d10: 4e65 7720 5069 7065 6c69 6e65 2031 2229  New Pipeline 1")
+00047d20: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
+00047d30: 655f 6564 6974 6f72 5f74 6162 732e 6765  e_editor_tabs.ge
+00047d40: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
+00047d50: 2829 2e73 6365 6e65 2e70 6f73 5b0a 2020  ().scene.pos[.  
+00047d60: 2020 2020 2020 2020 2020 2274 6573 745f            "test_
+00047d70: 7069 7065 6c69 6e65 5f31 5f31 220a 2020  pipeline_1_1".  
+00047d80: 2020 2020 2020 5d20 3d20 5150 6f69 6e74        ] = QPoint
+00047d90: 2834 3530 2c20 3530 3029 0a0a 2020 2020  (450, 500)..    
+00047da0: 2020 2020 2320 4368 6563 6b20 6966 2074      # Check if t
+00047db0: 6865 206e 6f64 6573 206f 6620 7468 6520  he nodes of the 
+00047dc0: 7069 7065 6c69 6e65 2068 6176 6520 6265  pipeline have be
+00047dd0: 656e 206d 6f64 6966 6965 640a 2020 2020  en modified.    
+00047de0: 2020 2020 7069 7065 6c69 6e65 5f65 6469      pipeline_edi
+00047df0: 746f 725f 7461 6273 2e67 6574 5f63 7572  tor_tabs.get_cur
+00047e00: 7265 6e74 5f65 6469 746f 7228 292e 6368  rent_editor().ch
+00047e10: 6563 6b5f 6d6f 6469 6669 6361 7469 6f6e  eck_modification
+00047e20: 7328 290a 2020 2020 2020 2020 7069 7065  s().        pipe
+00047e30: 6c69 6e65 203d 2070 6970 656c 696e 655f  line = pipeline_
+00047e40: 6564 6974 6f72 5f74 6162 732e 6765 745f  editor_tabs.get_
+00047e50: 6375 7272 656e 745f 7069 7065 6c69 6e65  current_pipeline
+00047e60: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
+00047e70: 6173 7365 7274 5472 7565 280a 2020 2020  assertTrue(.    
+00047e80: 2020 2020 2020 2020 2266 7768 6d22 2069          "fwhm" i
+00047e90: 6e20 7069 7065 6c69 6e65 2e6e 6f64 6573  n pipeline.nodes
+00047ea0: 5b22 7465 7374 5f70 6970 656c 696e 655f  ["test_pipeline_
+00047eb0: 315f 3122 5d2e 706c 7567 732e 6b65 7973  1_1"].plugs.keys
+00047ec0: 2829 0a20 2020 2020 2020 2029 0a0a 2020  ().        )..  
+00047ed0: 2020 6465 6620 7465 7374 5f7a 5f67 6574    def test_z_get
+00047ee0: 5f65 6469 746f 7228 7365 6c66 293a 0a20  _editor(self):. 
+00047ef0: 2020 2020 2020 2022 2222 4765 7473 2074         """Gets t
+00047f00: 6865 2069 6e73 7461 6e63 6520 6f66 2061  he instance of a
+00047f10: 6e20 6564 6974 6f72 2e0a 0a20 2020 2020  n editor...     
+00047f20: 2020 202d 2054 6573 7473 3a0a 2020 2020     - Tests:.    
+00047f30: 2020 2020 2020 2020 2d20 5069 7065 6c69          - Pipeli
+00047f40: 6e65 4564 6974 6f72 5461 6273 2e67 6574  neEditorTabs.get
+00047f50: 5f65 6469 746f 725f 6279 5f69 6e64 6578  _editor_by_index
+00047f60: 0a20 2020 2020 2020 2020 2020 202d 2050  .            - P
+00047f70: 6970 656c 696e 6545 6469 746f 7254 6162  ipelineEditorTab
+00047f80: 732e 6765 745f 6375 7272 656e 745f 6564  s.get_current_ed
+00047f90: 6974 6f72 0a20 2020 2020 2020 2020 2020  itor.           
+00047fa0: 202d 2050 6970 656c 696e 6545 6469 746f   - PipelineEdito
+00047fb0: 7254 6162 732e 6765 745f 6564 6974 6f72  rTabs.get_editor
+00047fc0: 5f62 795f 7461 625f 6e61 6d65 0a20 2020  _by_tab_name.   
+00047fd0: 2020 2020 2020 2020 202d 2050 6970 656c           - Pipel
+00047fe0: 696e 6545 6469 746f 7254 6162 732e 6765  ineEditorTabs.ge
+00047ff0: 745f 6564 6974 6f72 5f62 795f 6669 6c65  t_editor_by_file
+00048000: 6e61 6d65 0a20 2020 2020 2020 2022 2222  name.        """
+00048010: 0a0a 2020 2020 2020 2020 7069 7065 6c69  ..        pipeli
+00048020: 6e65 5f65 6469 746f 725f 7461 6273 203d  ne_editor_tabs =
+00048030: 2028 0a20 2020 2020 2020 2020 2020 2073   (.            s
+00048040: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00048050: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
+00048060: 2e70 6970 656c 696e 6545 6469 746f 7254  .pipelineEditorT
+00048070: 6162 730a 2020 2020 2020 2020 290a 2020  abs.        ).  
+00048080: 2020 2020 2020 636f 6e66 6967 203d 2043        config = C
+00048090: 6f6e 6669 6728 636f 6e66 6967 5f70 6174  onfig(config_pat
+000480a0: 683d 7365 6c66 2e63 6f6e 6669 675f 7061  h=self.config_pa
+000480b0: 7468 290a 2020 2020 2020 2020 6669 6c65  th).        file
+000480c0: 6e61 6d65 203d 206f 732e 7061 7468 2e6a  name = os.path.j
+000480d0: 6f69 6e28 0a20 2020 2020 2020 2020 2020  oin(.           
+000480e0: 2063 6f6e 6669 672e 6765 745f 6d69 615f   config.get_mia_
+000480f0: 7061 7468 2829 2c0a 2020 2020 2020 2020  path(),.        
+00048100: 2020 2020 2270 726f 6365 7373 6573 222c      "processes",
+00048110: 0a20 2020 2020 2020 2020 2020 2022 5573  .            "Us
+00048120: 6572 5f70 726f 6365 7373 6573 222c 0a20  er_processes",. 
+00048130: 2020 2020 2020 2020 2020 2022 7465 7374             "test
+00048140: 5f70 6970 656c 696e 655f 312e 7079 222c  _pipeline_1.py",
+00048150: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00048160: 2020 2070 6970 656c 696e 655f 6564 6974     pipeline_edit
+00048170: 6f72 5f74 6162 732e 6c6f 6164 5f70 6970  or_tabs.load_pip
+00048180: 656c 696e 6528 6669 6c65 6e61 6d65 290a  eline(filename).
+00048190: 2020 2020 2020 2020 6564 6974 6f72 3020          editor0 
+000481a0: 3d20 7069 7065 6c69 6e65 5f65 6469 746f  = pipeline_edito
+000481b0: 725f 7461 6273 2e67 6574 5f63 7572 7265  r_tabs.get_curre
+000481c0: 6e74 5f65 6469 746f 7228 290a 0a20 2020  nt_editor()..   
+000481d0: 2020 2020 2023 2063 7265 6174 6520 6e65       # create ne
+000481e0: 7720 7461 6220 7769 7468 206e 6577 2065  w tab with new e
+000481f0: 6469 746f 7220 616e 6420 6d61 6b65 2069  ditor and make i
+00048200: 7420 6375 7272 656e 743a 0a20 2020 2020  t current:.     
+00048210: 2020 2070 6970 656c 696e 655f 6564 6974     pipeline_edit
+00048220: 6f72 5f74 6162 732e 6e65 775f 7461 6228  or_tabs.new_tab(
+00048230: 290a 2020 2020 2020 2020 6564 6974 6f72  ).        editor
+00048240: 3120 3d20 7069 7065 6c69 6e65 5f65 6469  1 = pipeline_edi
+00048250: 746f 725f 7461 6273 2e67 6574 5f63 7572  tor_tabs.get_cur
+00048260: 7265 6e74 5f65 6469 746f 7228 290a 0a20  rent_editor().. 
+00048270: 2020 2020 2020 2023 2050 6572 666f 726d         # Perform
+00048280: 2076 6172 696f 7573 2074 6573 7473 206f   various tests o
+00048290: 6e20 7468 6520 7069 7065 6c69 6e65 2065  n the pipeline e
+000482a0: 6469 746f 7220 7461 6273 0a20 2020 2020  ditor tabs.     
+000482b0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+000482c0: 7561 6c28 7069 7065 6c69 6e65 5f65 6469  ual(pipeline_edi
+000482d0: 746f 725f 7461 6273 2e67 6574 5f65 6469  tor_tabs.get_edi
+000482e0: 746f 725f 6279 5f69 6e64 6578 2830 292c  tor_by_index(0),
+000482f0: 2065 6469 746f 7230 290a 2020 2020 2020   editor0).      
+00048300: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00048310: 616c 2870 6970 656c 696e 655f 6564 6974  al(pipeline_edit
+00048320: 6f72 5f74 6162 732e 6765 745f 6564 6974  or_tabs.get_edit
+00048330: 6f72 5f62 795f 696e 6465 7828 3129 2c20  or_by_index(1), 
+00048340: 6564 6974 6f72 3129 0a20 2020 2020 2020  editor1).       
+00048350: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00048360: 6c28 7069 7065 6c69 6e65 5f65 6469 746f  l(pipeline_edito
+00048370: 725f 7461 6273 2e67 6574 5f63 7572 7265  r_tabs.get_curre
+00048380: 6e74 5f65 6469 746f 7228 292c 2065 6469  nt_editor(), edi
+00048390: 746f 7231 290a 2020 2020 2020 2020 7365  tor1).        se
+000483a0: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
+000483b0: 2020 2020 2020 2020 2020 2020 6564 6974              edit
+000483c0: 6f72 302c 0a20 2020 2020 2020 2020 2020  or0,.           
+000483d0: 2070 6970 656c 696e 655f 6564 6974 6f72   pipeline_editor
+000483e0: 5f74 6162 732e 6765 745f 6564 6974 6f72  _tabs.get_editor
+000483f0: 5f62 795f 7461 625f 6e61 6d65 2822 7465  _by_tab_name("te
+00048400: 7374 5f70 6970 656c 696e 655f 312e 7079  st_pipeline_1.py
+00048410: 2229 2c0a 2020 2020 2020 2020 290a 2020  "),.        ).  
+00048420: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00048430: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
+00048440: 2020 2020 6564 6974 6f72 312c 0a20 2020      editor1,.   
+00048450: 2020 2020 2020 2020 2070 6970 656c 696e           pipelin
+00048460: 655f 6564 6974 6f72 5f74 6162 732e 6765  e_editor_tabs.ge
+00048470: 745f 6564 6974 6f72 5f62 795f 7461 625f  t_editor_by_tab_
+00048480: 6e61 6d65 2822 4e65 7720 5069 7065 6c69  name("New Pipeli
+00048490: 6e65 2031 2229 2c0a 2020 2020 2020 2020  ne 1"),.        
+000484a0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+000484b0: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
+000484c0: 2020 2020 2020 2020 4e6f 6e65 2c20 7069          None, pi
+000484d0: 7065 6c69 6e65 5f65 6469 746f 725f 7461  peline_editor_ta
+000484e0: 6273 2e67 6574 5f65 6469 746f 725f 6279  bs.get_editor_by
+000484f0: 5f74 6162 5f6e 616d 6528 2264 756d 6d79  _tab_name("dummy
+00048500: 2229 0a20 2020 2020 2020 2029 0a20 2020  ").        ).   
+00048510: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00048520: 4571 7561 6c28 0a20 2020 2020 2020 2020  Equal(.         
+00048530: 2020 2065 6469 746f 7230 2c20 7069 7065     editor0, pipe
+00048540: 6c69 6e65 5f65 6469 746f 725f 7461 6273  line_editor_tabs
+00048550: 2e67 6574 5f65 6469 746f 725f 6279 5f66  .get_editor_by_f
+00048560: 696c 655f 6e61 6d65 2866 696c 656e 616d  ile_name(filenam
+00048570: 6529 0a20 2020 2020 2020 2029 0a20 2020  e).        ).   
+00048580: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00048590: 4571 7561 6c28 0a20 2020 2020 2020 2020  Equal(.         
+000485a0: 2020 204e 6f6e 652c 2070 6970 656c 696e     None, pipelin
+000485b0: 655f 6564 6974 6f72 5f74 6162 732e 6765  e_editor_tabs.ge
+000485c0: 745f 6564 6974 6f72 5f62 795f 6669 6c65  t_editor_by_file
+000485d0: 5f6e 616d 6528 2264 756d 6d79 2229 0a20  _name("dummy"). 
+000485e0: 2020 2020 2020 2029 0a0a 2020 2020 6465         )..    de
+000485f0: 6620 7465 7374 5f7a 5f67 6574 5f66 696c  f test_z_get_fil
+00048600: 656e 616d 6528 7365 6c66 293a 0a20 2020  ename(self):.   
+00048610: 2020 2020 2022 2222 4765 7473 2074 6865       """Gets the
+00048620: 2072 656c 6174 6976 6520 7061 7468 2074   relative path t
+00048630: 6f20 6120 7072 6576 696f 7573 6c79 2073  o a previously s
+00048640: 6176 6564 2070 6970 656c 696e 6520 6669  aved pipeline fi
+00048650: 6c65 2e0a 0a20 2020 2020 2020 202d 2054  le...        - T
+00048660: 6573 7473 3a0a 2020 2020 2020 2020 2020  ests:.          
+00048670: 2020 2d20 5069 7065 6c69 6e65 4564 6974    - PipelineEdit
+00048680: 6f72 5461 6273 2e67 6574 5f66 696c 656e  orTabs.get_filen
+00048690: 616d 655f 6279 5f69 6e64 6578 0a20 2020  ame_by_index.   
+000486a0: 2020 2020 2020 2020 202d 2050 6970 656c           - Pipel
+000486b0: 696e 6545 6469 746f 7254 6162 732e 6765  ineEditorTabs.ge
+000486c0: 745f 6375 7272 656e 745f 6669 6c65 6e61  t_current_filena
+000486d0: 6d65 0a20 2020 2020 2020 2022 2222 0a0a  me.        """..
+000486e0: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
+000486f0: 5f65 6469 746f 725f 7461 6273 203d 2028  _editor_tabs = (
+00048700: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00048710: 662e 6d61 696e 5f77 696e 646f 772e 7069  f.main_window.pi
+00048720: 7065 6c69 6e65 5f6d 616e 6167 6572 2e70  peline_manager.p
+00048730: 6970 656c 696e 6545 6469 746f 7254 6162  ipelineEditorTab
+00048740: 730a 2020 2020 2020 2020 290a 2020 2020  s.        ).    
+00048750: 2020 2020 636f 6e66 6967 203d 2043 6f6e      config = Con
+00048760: 6669 6728 636f 6e66 6967 5f70 6174 683d  fig(config_path=
+00048770: 7365 6c66 2e63 6f6e 6669 675f 7061 7468  self.config_path
+00048780: 290a 2020 2020 2020 2020 6669 6c65 6e61  ).        filena
+00048790: 6d65 203d 206f 732e 7061 7468 2e6a 6f69  me = os.path.joi
+000487a0: 6e28 0a20 2020 2020 2020 2020 2020 2063  n(.            c
+000487b0: 6f6e 6669 672e 6765 745f 6d69 615f 7061  onfig.get_mia_pa
+000487c0: 7468 2829 2c0a 2020 2020 2020 2020 2020  th(),.          
+000487d0: 2020 2270 726f 6365 7373 6573 222c 0a20    "processes",. 
+000487e0: 2020 2020 2020 2020 2020 2022 5573 6572             "User
+000487f0: 5f70 726f 6365 7373 6573 222c 0a20 2020  _processes",.   
+00048800: 2020 2020 2020 2020 2022 7465 7374 5f70           "test_p
+00048810: 6970 656c 696e 655f 312e 7079 222c 0a20  ipeline_1.py",. 
+00048820: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00048830: 2070 6970 656c 696e 655f 6564 6974 6f72   pipeline_editor
+00048840: 5f74 6162 732e 6c6f 6164 5f70 6970 656c  _tabs.load_pipel
+00048850: 696e 6528 6669 6c65 6e61 6d65 290a 0a20  ine(filename).. 
+00048860: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00048870: 7274 4571 7561 6c28 0a20 2020 2020 2020  rtEqual(.       
+00048880: 2020 2020 2066 696c 656e 616d 652c 0a20       filename,. 
+00048890: 2020 2020 2020 2020 2020 206f 732e 7061             os.pa
+000488a0: 7468 2e61 6273 7061 7468 2870 6970 656c  th.abspath(pipel
+000488b0: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
+000488c0: 6765 745f 6669 6c65 6e61 6d65 5f62 795f  get_filename_by_
+000488d0: 696e 6465 7828 3029 292c 0a20 2020 2020  index(0)),.     
+000488e0: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
+000488f0: 662e 6173 7365 7274 4571 7561 6c28 4e6f  f.assertEqual(No
+00048900: 6e65 2c20 7069 7065 6c69 6e65 5f65 6469  ne, pipeline_edi
+00048910: 746f 725f 7461 6273 2e67 6574 5f66 696c  tor_tabs.get_fil
+00048920: 656e 616d 655f 6279 5f69 6e64 6578 2831  ename_by_index(1
+00048930: 2929 0a20 2020 2020 2020 2073 656c 662e  )).        self.
+00048940: 6173 7365 7274 4571 7561 6c28 0a20 2020  assertEqual(.   
+00048950: 2020 2020 2020 2020 2066 696c 656e 616d           filenam
+00048960: 652c 0a20 2020 2020 2020 2020 2020 206f  e,.            o
+00048970: 732e 7061 7468 2e61 6273 7061 7468 2870  s.path.abspath(p
+00048980: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
+00048990: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
+000489a0: 6669 6c65 6e61 6d65 2829 292c 0a20 2020  filename()),.   
+000489b0: 2020 2020 2029 0a0a 2020 2020 6465 6620       )..    def 
+000489c0: 7465 7374 5f7a 5f67 6574 5f69 6e64 6578  test_z_get_index
+000489d0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+000489e0: 2222 2247 6574 7320 7468 6520 696e 6465  """Gets the inde
+000489f0: 7820 6f66 2061 6e20 6564 6974 6f72 2e0a  x of an editor..
+00048a00: 0a20 2020 2020 2020 202d 2054 6573 7473  .        - Tests
+00048a10: 3a0a 2020 2020 2020 2020 2020 2020 2d20  :.            - 
+00048a20: 5069 7065 6c69 6e65 4564 6974 6f72 5461  PipelineEditorTa
+00048a30: 6273 2e67 6574 5f69 6e64 6578 5f62 795f  bs.get_index_by_
+00048a40: 7461 625f 6e61 6d65 0a20 2020 2020 2020  tab_name.       
+00048a50: 2020 2020 202d 2050 6970 656c 696e 6545       - PipelineE
+00048a60: 6469 746f 7254 6162 732e 6765 745f 696e  ditorTabs.get_in
+00048a70: 6465 785f 6279 5f66 696c 656e 616d 650a  dex_by_filename.
+00048a80: 2020 2020 2020 2020 2020 2020 2d20 5069              - Pi
+00048a90: 7065 6c69 6e65 4564 6974 6f72 5461 6273  pelineEditorTabs
+00048aa0: 2e67 6574 5f69 6e64 6578 5f62 795f 6564  .get_index_by_ed
+00048ab0: 6974 6f72 0a20 2020 2020 2020 2022 2222  itor.        """
+00048ac0: 0a0a 2020 2020 2020 2020 7069 7065 6c69  ..        pipeli
+00048ad0: 6e65 5f65 6469 746f 725f 7461 6273 203d  ne_editor_tabs =
+00048ae0: 2028 0a20 2020 2020 2020 2020 2020 2073   (.            s
+00048af0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00048b00: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
+00048b10: 2e70 6970 656c 696e 6545 6469 746f 7254  .pipelineEditorT
+00048b20: 6162 730a 2020 2020 2020 2020 290a 2020  abs.        ).  
+00048b30: 2020 2020 2020 636f 6e66 6967 203d 2043        config = C
+00048b40: 6f6e 6669 6728 636f 6e66 6967 5f70 6174  onfig(config_pat
+00048b50: 683d 7365 6c66 2e63 6f6e 6669 675f 7061  h=self.config_pa
+00048b60: 7468 290a 2020 2020 2020 2020 6669 6c65  th).        file
+00048b70: 6e61 6d65 203d 206f 732e 7061 7468 2e6a  name = os.path.j
+00048b80: 6f69 6e28 0a20 2020 2020 2020 2020 2020  oin(.           
+00048b90: 2063 6f6e 6669 672e 6765 745f 6d69 615f   config.get_mia_
+00048ba0: 7061 7468 2829 2c0a 2020 2020 2020 2020  path(),.        
+00048bb0: 2020 2020 2270 726f 6365 7373 6573 222c      "processes",
+00048bc0: 0a20 2020 2020 2020 2020 2020 2022 5573  .            "Us
+00048bd0: 6572 5f70 726f 6365 7373 6573 222c 0a20  er_processes",. 
+00048be0: 2020 2020 2020 2020 2020 2022 7465 7374             "test
+00048bf0: 5f70 6970 656c 696e 655f 312e 7079 222c  _pipeline_1.py",
+00048c00: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00048c10: 2020 2070 6970 656c 696e 655f 6564 6974     pipeline_edit
+00048c20: 6f72 5f74 6162 732e 6c6f 6164 5f70 6970  or_tabs.load_pip
+00048c30: 656c 696e 6528 6669 6c65 6e61 6d65 290a  eline(filename).
+00048c40: 2020 2020 2020 2020 6564 6974 6f72 3020          editor0 
+00048c50: 3d20 7069 7065 6c69 6e65 5f65 6469 746f  = pipeline_edito
+00048c60: 725f 7461 6273 2e67 6574 5f63 7572 7265  r_tabs.get_curre
+00048c70: 6e74 5f65 6469 746f 7228 290a 0a20 2020  nt_editor()..   
+00048c80: 2020 2020 2023 2043 7265 6174 6520 6e65       # Create ne
+00048c90: 7720 7461 6220 7769 7468 206e 6577 2065  w tab with new e
+00048ca0: 6469 746f 7220 616e 6420 6d61 6b65 2069  ditor and make i
+00048cb0: 7420 6375 7272 656e 740a 2020 2020 2020  t current.      
+00048cc0: 2020 7069 7065 6c69 6e65 5f65 6469 746f    pipeline_edito
+00048cd0: 725f 7461 6273 2e6e 6577 5f74 6162 2829  r_tabs.new_tab()
+00048ce0: 0a20 2020 2020 2020 2065 6469 746f 7231  .        editor1
+00048cf0: 203d 2070 6970 656c 696e 655f 6564 6974   = pipeline_edit
+00048d00: 6f72 5f74 6162 732e 6765 745f 6375 7272  or_tabs.get_curr
+00048d10: 656e 745f 6564 6974 6f72 2829 0a0a 2020  ent_editor()..  
+00048d20: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00048d30: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
+00048d40: 2020 2020 302c 2070 6970 656c 696e 655f      0, pipeline_
+00048d50: 6564 6974 6f72 5f74 6162 732e 6765 745f  editor_tabs.get_
+00048d60: 696e 6465 785f 6279 5f74 6162 5f6e 616d  index_by_tab_nam
+00048d70: 6528 2274 6573 745f 7069 7065 6c69 6e65  e("test_pipeline
+00048d80: 5f31 2e70 7922 290a 2020 2020 2020 2020  _1.py").        
+00048d90: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00048da0: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
+00048db0: 2020 2020 2020 2020 312c 2070 6970 656c          1, pipel
+00048dc0: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
+00048dd0: 6765 745f 696e 6465 785f 6279 5f74 6162  get_index_by_tab
+00048de0: 5f6e 616d 6528 224e 6577 2050 6970 656c  _name("New Pipel
+00048df0: 696e 6520 3122 290a 2020 2020 2020 2020  ine 1").        
+00048e00: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00048e10: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
+00048e20: 2020 2020 2020 2020 4e6f 6e65 2c20 7069          None, pi
+00048e30: 7065 6c69 6e65 5f65 6469 746f 725f 7461  peline_editor_ta
+00048e40: 6273 2e67 6574 5f69 6e64 6578 5f62 795f  bs.get_index_by_
+00048e50: 7461 625f 6e61 6d65 2822 6475 6d6d 7922  tab_name("dummy"
+00048e60: 290a 2020 2020 2020 2020 290a 0a20 2020  ).        )..   
+00048e70: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00048e80: 4571 7561 6c28 0a20 2020 2020 2020 2020  Equal(.         
+00048e90: 2020 2030 2c20 7069 7065 6c69 6e65 5f65     0, pipeline_e
+00048ea0: 6469 746f 725f 7461 6273 2e67 6574 5f69  ditor_tabs.get_i
+00048eb0: 6e64 6578 5f62 795f 6669 6c65 6e61 6d65  ndex_by_filename
+00048ec0: 2866 696c 656e 616d 6529 0a20 2020 2020  (filename).     
+00048ed0: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
+00048ee0: 662e 6173 7365 7274 4571 7561 6c28 0a20  f.assertEqual(. 
+00048ef0: 2020 2020 2020 2020 2020 204e 6f6e 652c             None,
+00048f00: 2070 6970 656c 696e 655f 6564 6974 6f72   pipeline_editor
+00048f10: 5f74 6162 732e 6765 745f 696e 6465 785f  _tabs.get_index_
+00048f20: 6279 5f66 696c 656e 616d 6528 2264 756d  by_filename("dum
+00048f30: 6d79 2229 0a20 2020 2020 2020 2029 0a0a  my").        )..
+00048f40: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00048f50: 6572 7445 7175 616c 2830 2c20 7069 7065  ertEqual(0, pipe
+00048f60: 6c69 6e65 5f65 6469 746f 725f 7461 6273  line_editor_tabs
+00048f70: 2e67 6574 5f69 6e64 6578 5f62 795f 6564  .get_index_by_ed
+00048f80: 6974 6f72 2865 6469 746f 7230 2929 0a20  itor(editor0)). 
+00048f90: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00048fa0: 7274 4571 7561 6c28 312c 2070 6970 656c  rtEqual(1, pipel
+00048fb0: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
+00048fc0: 6765 745f 696e 6465 785f 6279 5f65 6469  get_index_by_edi
+00048fd0: 746f 7228 6564 6974 6f72 3129 290a 2020  tor(editor1)).  
+00048fe0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00048ff0: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
+00049000: 2020 2020 4e6f 6e65 2c20 7069 7065 6c69      None, pipeli
+00049010: 6e65 5f65 6469 746f 725f 7461 6273 2e67  ne_editor_tabs.g
+00049020: 6574 5f69 6e64 6578 5f62 795f 6564 6974  et_index_by_edit
+00049030: 6f72 2822 6475 6d6d 7922 290a 2020 2020  or("dummy").    
+00049040: 2020 2020 290a 0a20 2020 2064 6566 2074      )..    def t
+00049050: 6573 745f 7a5f 6765 745f 7461 625f 6e61  est_z_get_tab_na
+00049060: 6d65 2873 656c 6629 3a0a 2020 2020 2020  me(self):.      
+00049070: 2020 2222 2247 6574 7320 7468 6520 7461    """Gets the ta
+00049080: 6220 6e61 6d65 206f 6620 7468 6520 6564  b name of the ed
+00049090: 6974 6f72 2e0a 0a20 2020 2020 2020 202d  itor...        -
+000490a0: 2054 6573 7473 3a0a 2020 2020 2020 2020   Tests:.        
+000490b0: 2020 2020 2d20 5069 7065 6c69 6e65 4564      - PipelineEd
+000490c0: 6974 6f72 5461 6273 2e67 6574 5f74 6162  itorTabs.get_tab
+000490d0: 5f6e 616d 655f 6279 5f69 6e64 6578 0a20  _name_by_index. 
+000490e0: 2020 2020 2020 2020 2020 202d 2050 6970             - Pip
+000490f0: 656c 696e 6545 6469 746f 7254 6162 732e  elineEditorTabs.
+00049100: 6765 745f 6375 7272 656e 745f 7461 625f  get_current_tab_
+00049110: 6e61 6d65 0a20 2020 2020 2020 2022 2222  name.        """
+00049120: 0a0a 2020 2020 2020 2020 7069 7065 6c69  ..        pipeli
+00049130: 6e65 5f65 6469 746f 725f 7461 6273 203d  ne_editor_tabs =
+00049140: 2028 0a20 2020 2020 2020 2020 2020 2073   (.            s
+00049150: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00049160: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
+00049170: 2e70 6970 656c 696e 6545 6469 746f 7254  .pipelineEditorT
+00049180: 6162 730a 2020 2020 2020 2020 290a 0a20  abs.        ).. 
+00049190: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+000491a0: 7274 4571 7561 6c28 0a20 2020 2020 2020  rtEqual(.       
+000491b0: 2020 2020 2022 4e65 7720 5069 7065 6c69       "New Pipeli
+000491c0: 6e65 222c 2070 6970 656c 696e 655f 6564  ne", pipeline_ed
+000491d0: 6974 6f72 5f74 6162 732e 6765 745f 7461  itor_tabs.get_ta
+000491e0: 625f 6e61 6d65 5f62 795f 696e 6465 7828  b_name_by_index(
+000491f0: 3029 0a20 2020 2020 2020 2029 0a20 2020  0).        ).   
+00049200: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00049210: 4571 7561 6c28 4e6f 6e65 2c20 7069 7065  Equal(None, pipe
+00049220: 6c69 6e65 5f65 6469 746f 725f 7461 6273  line_editor_tabs
+00049230: 2e67 6574 5f74 6162 5f6e 616d 655f 6279  .get_tab_name_by
+00049240: 5f69 6e64 6578 2831 2929 0a20 2020 2020  _index(1)).     
+00049250: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00049260: 7561 6c28 0a20 2020 2020 2020 2020 2020  ual(.           
+00049270: 2022 4e65 7720 5069 7065 6c69 6e65 222c   "New Pipeline",
+00049280: 2070 6970 656c 696e 655f 6564 6974 6f72   pipeline_editor
+00049290: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
+000492a0: 745f 7461 625f 6e61 6d65 2829 0a20 2020  t_tab_name().   
+000492b0: 2020 2020 2029 0a0a 2020 2020 6465 6620       )..    def 
+000492c0: 7465 7374 5f7a 5f6c 6f61 645f 7069 7065  test_z_load_pipe
+000492d0: 6c69 6e65 2873 656c 6629 3a0a 2020 2020  line(self):.    
+000492e0: 2020 2020 2222 224c 6f61 6473 2061 2070      """Loads a p
+000492f0: 6970 656c 696e 652e 2222 220a 0a20 2020  ipeline."""..   
+00049300: 2020 2020 2070 6970 656c 696e 655f 6564       pipeline_ed
+00049310: 6974 6f72 5f74 6162 7320 3d20 280a 2020  itor_tabs = (.  
+00049320: 2020 2020 2020 2020 2020 7365 6c66 2e6d            self.m
+00049330: 6169 6e5f 7769 6e64 6f77 2e70 6970 656c  ain_window.pipel
+00049340: 696e 655f 6d61 6e61 6765 722e 7069 7065  ine_manager.pipe
+00049350: 6c69 6e65 4564 6974 6f72 5461 6273 0a20  lineEditorTabs. 
+00049360: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00049370: 2063 6f6e 6669 6720 3d20 436f 6e66 6967   config = Config
+00049380: 2863 6f6e 6669 675f 7061 7468 3d73 656c  (config_path=sel
+00049390: 662e 636f 6e66 6967 5f70 6174 6829 0a20  f.config_path). 
+000493a0: 2020 2020 2020 2066 696c 656e 616d 6520         filename 
+000493b0: 3d20 6f73 2e70 6174 682e 6a6f 696e 280a  = os.path.join(.
+000493c0: 2020 2020 2020 2020 2020 2020 636f 6e66              conf
+000493d0: 6967 2e67 6574 5f6d 6961 5f70 6174 6828  ig.get_mia_path(
+000493e0: 292c 0a20 2020 2020 2020 2020 2020 2022  ),.            "
+000493f0: 7072 6f63 6573 7365 7322 2c0a 2020 2020  processes",.    
+00049400: 2020 2020 2020 2020 2255 7365 725f 7072          "User_pr
+00049410: 6f63 6573 7365 7322 2c0a 2020 2020 2020  ocesses",.      
+00049420: 2020 2020 2020 2274 6573 745f 7069 7065        "test_pipe
+00049430: 6c69 6e65 5f31 2e70 7922 2c0a 2020 2020  line_1.py",.    
+00049440: 2020 2020 290a 2020 2020 2020 2020 7069      ).        pi
+00049450: 7065 6c69 6e65 5f65 6469 746f 725f 7461  peline_editor_ta
+00049460: 6273 2e6c 6f61 645f 7069 7065 6c69 6e65  bs.load_pipeline
+00049470: 2866 696c 656e 616d 6529 0a0a 2020 2020  (filename)..    
+00049480: 2020 2020 7069 7065 6c69 6e65 203d 2070      pipeline = p
+00049490: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
+000494a0: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
+000494b0: 7069 7065 6c69 6e65 2829 0a20 2020 2020  pipeline().     
+000494c0: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
+000494d0: 7565 2822 736d 6f6f 7468 5f31 2220 696e  ue("smooth_1" in
+000494e0: 2070 6970 656c 696e 652e 6e6f 6465 732e   pipeline.nodes.
+000494f0: 6b65 7973 2829 290a 0a20 2020 2064 6566  keys())..    def
+00049500: 2074 6573 745f 7a5f 6f70 656e 5f73 7562   test_z_open_sub
+00049510: 5f70 6970 656c 696e 6528 7365 6c66 293a  _pipeline(self):
+00049520: 0a20 2020 2020 2020 2022 2222 4f70 656e  .        """Open
+00049530: 7320 6120 7375 625f 7069 7065 6c69 6e65  s a sub_pipeline
+00049540: 2e22 2222 0a0a 2020 2020 2020 2020 7069  ."""..        pi
+00049550: 7065 6c69 6e65 5f65 6469 746f 725f 7461  peline_editor_ta
+00049560: 6273 203d 2028 0a20 2020 2020 2020 2020  bs = (.         
+00049570: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
+00049580: 646f 772e 7069 7065 6c69 6e65 5f6d 616e  dow.pipeline_man
+00049590: 6167 6572 2e70 6970 656c 696e 6545 6469  ager.pipelineEdi
+000495a0: 746f 7254 6162 730a 2020 2020 2020 2020  torTabs.        
+000495b0: 290a 2020 2020 2020 2020 636f 6e66 6967  ).        config
+000495c0: 203d 2043 6f6e 6669 6728 636f 6e66 6967   = Config(config
+000495d0: 5f70 6174 683d 7365 6c66 2e63 6f6e 6669  _path=self.confi
+000495e0: 675f 7061 7468 290a 0a20 2020 2020 2020  g_path)..       
+000495f0: 2023 2041 6464 696e 6720 7468 6520 2263   # Adding the "c
+00049600: 6f6e 6669 672e 6765 745f 6d69 615f 7061  onfig.get_mia_pa
+00049610: 7468 2829 2f70 726f 6365 7373 6573 2220  th()/processes" 
+00049620: 7061 7468 2074 6f20 7468 6520 7379 7374  path to the syst
+00049630: 656d 2070 6174 680a 2020 2020 2020 2020  em path.        
+00049640: 7379 732e 7061 7468 2e61 7070 656e 6428  sys.path.append(
+00049650: 6f73 2e70 6174 682e 6a6f 696e 2863 6f6e  os.path.join(con
+00049660: 6669 672e 6765 745f 6d69 615f 7061 7468  fig.get_mia_path
+00049670: 2829 2c20 2270 726f 6365 7373 6573 2229  (), "processes")
+00049680: 290a 0a20 2020 2020 2020 2023 2049 6d70  )..        # Imp
+00049690: 6f72 7469 6e67 2074 6865 2027 5573 6572  orting the 'User
+000496a0: 5f70 726f 6365 7373 6573 2720 7061 636b  _processes' pack
+000496b0: 6167 650a 2020 2020 2020 2020 7061 636b  age.        pack
+000496c0: 6167 655f 6e61 6d65 203d 2022 5573 6572  age_name = "User
+000496d0: 5f70 726f 6365 7373 6573 220a 2020 2020  _processes".    
+000496e0: 2020 2020 5f5f 696d 706f 7274 5f5f 2870      __import__(p
+000496f0: 6163 6b61 6765 5f6e 616d 6529 0a20 2020  ackage_name).   
+00049700: 2020 2020 2070 6b67 203d 2073 7973 2e6d       pkg = sys.m
+00049710: 6f64 756c 6573 5b70 6163 6b61 6765 5f6e  odules[package_n
+00049720: 616d 655d 0a0a 2020 2020 2020 2020 666f  ame]..        fo
+00049730: 7220 6e61 6d65 2c20 636c 7320 696e 2073  r name, cls in s
+00049740: 6f72 7465 6428 6c69 7374 2870 6b67 2e5f  orted(list(pkg._
+00049750: 5f64 6963 745f 5f2e 6974 656d 7328 2929  _dict__.items())
+00049760: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
+00049770: 6620 6e61 6d65 203d 3d20 2254 6573 745f  f name == "Test_
+00049780: 7069 7065 6c69 6e65 5f31 223a 0a20 2020  pipeline_1":.   
+00049790: 2020 2020 2020 2020 2020 2020 2070 726f               pro
+000497a0: 6365 7373 5f63 6c61 7373 203d 2063 6c73  cess_class = cls
+000497b0: 0a0a 2020 2020 2020 2020 2320 4164 6469  ..        # Addi
+000497c0: 6e67 2074 6865 2022 7465 7374 5f70 6970  ng the "test_pip
+000497d0: 656c 696e 655f 3122 2061 7320 6120 7072  eline_1" as a pr
+000497e0: 6f63 6573 730a 2020 2020 2020 2020 7069  ocess.        pi
+000497f0: 7065 6c69 6e65 5f65 6469 746f 725f 7461  peline_editor_ta
+00049800: 6273 2e67 6574 5f63 7572 7265 6e74 5f65  bs.get_current_e
+00049810: 6469 746f 7228 292e 636c 6963 6b5f 706f  ditor().click_po
+00049820: 7320 3d20 5150 6f69 6e74 2834 3530 2c20  s = QPoint(450, 
+00049830: 3530 3029 0a20 2020 2020 2020 2070 6970  500).        pip
+00049840: 656c 696e 655f 6564 6974 6f72 5f74 6162  eline_editor_tab
+00049850: 732e 6765 745f 6375 7272 656e 745f 6564  s.get_current_ed
+00049860: 6974 6f72 2829 2e61 6464 5f6e 616d 6564  itor().add_named
+00049870: 5f70 726f 6365 7373 280a 2020 2020 2020  _process(.      
+00049880: 2020 2020 2020 7072 6f63 6573 735f 636c        process_cl
+00049890: 6173 730a 2020 2020 2020 2020 290a 0a20  ass.        ).. 
+000498a0: 2020 2020 2020 2023 204f 7065 6e69 6e67         # Opening
+000498b0: 2074 6865 2073 7562 2d70 6970 656c 696e   the sub-pipelin
+000498c0: 6520 696e 2061 206e 6577 2065 6469 746f  e in a new edito
+000498d0: 720a 2020 2020 2020 2020 7069 7065 6c69  r.        pipeli
+000498e0: 6e65 203d 2070 6970 656c 696e 655f 6564  ne = pipeline_ed
+000498f0: 6974 6f72 5f74 6162 732e 6765 745f 6375  itor_tabs.get_cu
+00049900: 7272 656e 745f 7069 7065 6c69 6e65 2829  rrent_pipeline()
+00049910: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
+00049920: 5f69 6e73 7461 6e63 6520 3d20 7069 7065  _instance = pipe
+00049930: 6c69 6e65 2e6e 6f64 6573 5b22 7465 7374  line.nodes["test
+00049940: 5f70 6970 656c 696e 655f 315f 3122 5d2e  _pipeline_1_1"].
+00049950: 7072 6f63 6573 730a 2020 2020 2020 2020  process.        
+00049960: 7069 7065 6c69 6e65 5f65 6469 746f 725f  pipeline_editor_
+00049970: 7461 6273 2e6f 7065 6e5f 7375 625f 7069  tabs.open_sub_pi
+00049980: 7065 6c69 6e65 2870 726f 6365 7373 5f69  peline(process_i
+00049990: 6e73 7461 6e63 6529 0a20 2020 2020 2020  nstance).       
+000499a0: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
+000499b0: 2833 2c20 7069 7065 6c69 6e65 5f65 6469  (3, pipeline_edi
+000499c0: 746f 725f 7461 6273 2e63 6f75 6e74 2829  tor_tabs.count()
+000499d0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+000499e0: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
+000499f0: 2020 2020 2020 2020 2274 6573 745f 7069          "test_pi
+00049a00: 7065 6c69 6e65 5f31 2e70 7922 2c0a 2020  peline_1.py",.  
+00049a10: 2020 2020 2020 2020 2020 6f73 2e70 6174            os.pat
+00049a20: 682e 6261 7365 6e61 6d65 2870 6970 656c  h.basename(pipel
+00049a30: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
+00049a40: 6765 745f 6669 6c65 6e61 6d65 5f62 795f  get_filename_by_
+00049a50: 696e 6465 7828 3129 292c 0a20 2020 2020  index(1)),.     
+00049a60: 2020 2029 0a0a 2020 2020 6465 6620 7465     )..    def te
+00049a70: 7374 5f7a 5f73 6574 5f63 7572 7265 6e74  st_z_set_current
+00049a80: 5f65 6469 746f 7228 7365 6c66 293a 0a20  _editor(self):. 
+00049a90: 2020 2020 2020 2022 2222 5365 7473 2074         """Sets t
+00049aa0: 6865 2063 7572 7265 6e74 2065 6469 746f  he current edito
+00049ab0: 722e 0a0a 2020 2020 2020 2020 2d20 5465  r...        - Te
+00049ac0: 7374 733a 0a20 2020 2020 2020 2020 2020  sts:.           
+00049ad0: 202d 2050 6970 656c 696e 6545 6469 746f   - PipelineEdito
+00049ae0: 7254 6162 732e 7365 745f 6375 7272 656e  rTabs.set_curren
+00049af0: 745f 6564 6974 6f72 5f62 795f 7461 625f  t_editor_by_tab_
+00049b00: 6e61 6d65 0a20 2020 2020 2020 2020 2020  name.           
+00049b10: 202d 2050 6970 656c 696e 6545 6469 746f   - PipelineEdito
+00049b20: 7254 6162 732e 7365 745f 6375 7272 656e  rTabs.set_curren
+00049b30: 745f 6564 6974 6f72 5f62 795f 6669 6c65  t_editor_by_file
+00049b40: 5f6e 616d 650a 2020 2020 2020 2020 2020  _name.          
+00049b50: 2020 2d20 5069 7065 6c69 6e65 4564 6974    - PipelineEdit
+00049b60: 6f72 5461 6273 2e73 6574 5f63 7572 7265  orTabs.set_curre
+00049b70: 6e74 5f65 6469 746f 725f 6279 5f65 6469  nt_editor_by_edi
+00049b80: 746f 720a 2020 2020 2020 2020 2222 220a  tor.        """.
+00049b90: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
+00049ba0: 655f 6564 6974 6f72 5f74 6162 7320 3d20  e_editor_tabs = 
+00049bb0: 280a 2020 2020 2020 2020 2020 2020 7365  (.            se
+00049bc0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
+00049bd0: 6970 656c 696e 655f 6d61 6e61 6765 722e  ipeline_manager.
+00049be0: 7069 7065 6c69 6e65 4564 6974 6f72 5461  pipelineEditorTa
+00049bf0: 6273 0a20 2020 2020 2020 2029 0a20 2020  bs.        ).   
+00049c00: 2020 2020 2063 6f6e 6669 6720 3d20 436f       config = Co
+00049c10: 6e66 6967 2863 6f6e 6669 675f 7061 7468  nfig(config_path
+00049c20: 3d73 656c 662e 636f 6e66 6967 5f70 6174  =self.config_pat
+00049c30: 6829 0a20 2020 2020 2020 2066 696c 656e  h).        filen
+00049c40: 616d 6520 3d20 6f73 2e70 6174 682e 6a6f  ame = os.path.jo
+00049c50: 696e 280a 2020 2020 2020 2020 2020 2020  in(.            
+00049c60: 636f 6e66 6967 2e67 6574 5f6d 6961 5f70  config.get_mia_p
+00049c70: 6174 6828 292c 0a20 2020 2020 2020 2020  ath(),.         
+00049c80: 2020 2022 7072 6f63 6573 7365 7322 2c0a     "processes",.
+00049c90: 2020 2020 2020 2020 2020 2020 2255 7365              "Use
+00049ca0: 725f 7072 6f63 6573 7365 7322 2c0a 2020  r_processes",.  
+00049cb0: 2020 2020 2020 2020 2020 2274 6573 745f            "test_
+00049cc0: 7069 7065 6c69 6e65 5f31 2e70 7922 2c0a  pipeline_1.py",.
+00049cd0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00049ce0: 2020 7069 7065 6c69 6e65 5f65 6469 746f    pipeline_edito
+00049cf0: 725f 7461 6273 2e6c 6f61 645f 7069 7065  r_tabs.load_pipe
+00049d00: 6c69 6e65 2866 696c 656e 616d 6529 0a20  line(filename). 
+00049d10: 2020 2020 2020 2065 6469 746f 7230 203d         editor0 =
+00049d20: 2070 6970 656c 696e 655f 6564 6974 6f72   pipeline_editor
+00049d30: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
+00049d40: 745f 6564 6974 6f72 2829 0a0a 2020 2020  t_editor()..    
+00049d50: 2020 2020 2320 6372 6561 7465 206e 6577      # create new
+00049d60: 2074 6162 2077 6974 6820 6e65 7720 6564   tab with new ed
+00049d70: 6974 6f72 2061 6e64 206d 616b 6520 6974  itor and make it
+00049d80: 2063 7572 7265 6e74 3a0a 2020 2020 2020   current:.      
+00049d90: 2020 7069 7065 6c69 6e65 5f65 6469 746f    pipeline_edito
+00049da0: 725f 7461 6273 2e6e 6577 5f74 6162 2829  r_tabs.new_tab()
+00049db0: 0a20 2020 2020 2020 2065 6469 746f 7231  .        editor1
+00049dc0: 203d 2070 6970 656c 696e 655f 6564 6974   = pipeline_edit
+00049dd0: 6f72 5f74 6162 732e 6765 745f 6375 7272  or_tabs.get_curr
+00049de0: 656e 745f 6564 6974 6f72 2829 0a0a 2020  ent_editor()..  
+00049df0: 2020 2020 2020 7069 7065 6c69 6e65 5f65        pipeline_e
+00049e00: 6469 746f 725f 7461 6273 2e73 6574 5f63  ditor_tabs.set_c
+00049e10: 7572 7265 6e74 5f65 6469 746f 725f 6279  urrent_editor_by
+00049e20: 5f74 6162 5f6e 616d 6528 0a20 2020 2020  _tab_name(.     
+00049e30: 2020 2020 2020 2022 7465 7374 5f70 6970         "test_pip
+00049e40: 656c 696e 655f 312e 7079 220a 2020 2020  eline_1.py".    
+00049e50: 2020 2020 290a 2020 2020 2020 2020 7365      ).        se
+00049e60: 6c66 2e61 7373 6572 7445 7175 616c 2870  lf.assertEqual(p
+00049e70: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
+00049e80: 6162 732e 6375 7272 656e 7449 6e64 6578  abs.currentIndex
+00049e90: 2829 2c20 3029 0a20 2020 2020 2020 2070  (), 0).        p
+00049ea0: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
+00049eb0: 6162 732e 7365 745f 6375 7272 656e 745f  abs.set_current_
+00049ec0: 6564 6974 6f72 5f62 795f 7461 625f 6e61  editor_by_tab_na
+00049ed0: 6d65 2822 4e65 7720 5069 7065 6c69 6e65  me("New Pipeline
+00049ee0: 2031 2229 0a20 2020 2020 2020 2073 656c   1").        sel
+00049ef0: 662e 6173 7365 7274 4571 7561 6c28 7069  f.assertEqual(pi
+00049f00: 7065 6c69 6e65 5f65 6469 746f 725f 7461  peline_editor_ta
+00049f10: 6273 2e63 7572 7265 6e74 496e 6465 7828  bs.currentIndex(
+00049f20: 292c 2031 290a 0a20 2020 2020 2020 2070  ), 1)..        p
+00049f30: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
+00049f40: 6162 732e 7365 745f 6375 7272 656e 745f  abs.set_current_
+00049f50: 6564 6974 6f72 5f62 795f 6669 6c65 5f6e  editor_by_file_n
+00049f60: 616d 6528 6669 6c65 6e61 6d65 290a 2020  ame(filename).  
+00049f70: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00049f80: 7445 7175 616c 2870 6970 656c 696e 655f  tEqual(pipeline_
+00049f90: 6564 6974 6f72 5f74 6162 732e 6375 7272  editor_tabs.curr
+00049fa0: 656e 7449 6e64 6578 2829 2c20 3029 0a0a  entIndex(), 0)..
+00049fb0: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
+00049fc0: 5f65 6469 746f 725f 7461 6273 2e73 6574  _editor_tabs.set
+00049fd0: 5f63 7572 7265 6e74 5f65 6469 746f 725f  _current_editor_
+00049fe0: 6279 5f65 6469 746f 7228 6564 6974 6f72  by_editor(editor
+00049ff0: 3129 0a20 2020 2020 2020 2073 656c 662e  1).        self.
+0004a000: 6173 7365 7274 4571 7561 6c28 7069 7065  assertEqual(pipe
+0004a010: 6c69 6e65 5f65 6469 746f 725f 7461 6273  line_editor_tabs
+0004a020: 2e63 7572 7265 6e74 496e 6465 7828 292c  .currentIndex(),
+0004a030: 2031 290a 2020 2020 2020 2020 7069 7065   1).        pipe
+0004a040: 6c69 6e65 5f65 6469 746f 725f 7461 6273  line_editor_tabs
+0004a050: 2e73 6574 5f63 7572 7265 6e74 5f65 6469  .set_current_edi
+0004a060: 746f 725f 6279 5f65 6469 746f 7228 6564  tor_by_editor(ed
+0004a070: 6974 6f72 3029 0a20 2020 2020 2020 2073  itor0).        s
+0004a080: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0004a090: 7069 7065 6c69 6e65 5f65 6469 746f 725f  pipeline_editor_
+0004a0a0: 7461 6273 2e63 7572 7265 6e74 496e 6465  tabs.currentInde
+0004a0b0: 7828 292c 2030 290a 0a20 2020 2064 6566  x(), 0)..    def
+0004a0c0: 2074 6573 745f 7a7a 5f64 656c 5f70 6163   test_zz_del_pac
+0004a0d0: 6b28 7365 6c66 293a 0a20 2020 2020 2020  k(self):.       
+0004a0e0: 2022 2222 5265 6d6f 7665 2074 6865 2062   """Remove the b
+0004a0f0: 7269 636b 7320 6372 6561 7465 6420 6475  ricks created du
+0004a100: 7269 6e67 2074 6865 2075 6e69 7420 7465  ring the unit te
+0004a110: 7374 732e 0a0a 2020 2020 2020 2020 5461  sts...        Ta
+0004a120: 6b65 2061 6476 616e 7461 6765 206f 6620  ke advantage of 
+0004a130: 7468 6973 2074 6f20 636f 7665 7220 7468  this to cover th
+0004a140: 6520 7061 7274 206f 6620 7468 6520 636f  e part of the co
+0004a150: 6465 2075 7365 6420 746f 2072 656d 6f76  de used to remov
+0004a160: 6520 7468 650a 2020 2020 2020 2020 7061  e the.        pa
+0004a170: 636b 6167 6573 2e0a 2020 2020 2020 2020  ckages..        
+0004a180: 2222 220a 0a20 2020 2020 2020 2070 6b67  """..        pkg
+0004a190: 203d 2050 6163 6b61 6765 4c69 6272 6172   = PackageLibrar
+0004a1a0: 7944 6961 6c6f 6728 7365 6c66 2e6d 6169  yDialog(self.mai
+0004a1b0: 6e5f 7769 6e64 6f77 290a 0a20 2020 2020  n_window)..     
+0004a1c0: 2020 2023 2054 6865 2054 6573 745f 7069     # The Test_pi
+0004a1d0: 7065 6c69 6e65 2062 7269 636b 2077 6173  peline brick was
+0004a1e0: 2061 6464 6564 2069 6e20 7468 6520 7061   added in the pa
+0004a1f0: 636b 6167 6520 6c69 6272 6172 790a 2020  ckage library.  
+0004a200: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0004a210: 7454 7275 6528 0a20 2020 2020 2020 2020  tTrue(.         
+0004a220: 2020 2022 5465 7374 5f70 6970 656c 696e     "Test_pipelin
+0004a230: 655f 3122 0a20 2020 2020 2020 2020 2020  e_1".           
+0004a240: 2069 6e20 706b 672e 7061 636b 6167 655f   in pkg.package_
+0004a250: 6c69 6272 6172 792e 7061 636b 6167 655f  library.package_
+0004a260: 7472 6565 5b22 5573 6572 5f70 726f 6365  tree["User_proce
+0004a270: 7373 6573 225d 0a20 2020 2020 2020 2029  sses"].        )
+0004a280: 0a0a 2020 2020 2020 2020 706b 672e 6465  ..        pkg.de
+0004a290: 6c65 7465 5f70 6163 6b61 6765 280a 2020  lete_package(.  
+0004a2a0: 2020 2020 2020 2020 2020 746f 5f64 656c            to_del
+0004a2b0: 6574 653d 2255 7365 725f 7072 6f63 6573  ete="User_proces
+0004a2c0: 7365 732e 5465 7374 5f70 6970 656c 696e  ses.Test_pipelin
+0004a2d0: 655f 3122 2c20 6c6f 6f70 3d54 7275 650a  e_1", loop=True.
+0004a2e0: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+0004a2f0: 2020 2023 2054 6865 2054 6573 745f 7069     # The Test_pi
+0004a300: 7065 6c69 6e65 2062 7269 636b 2068 6173  peline brick has
+0004a310: 2062 6565 6e20 7265 6d6f 7665 6420 6672   been removed fr
+0004a320: 6f6d 2074 6865 2070 6163 6b61 6765 206c  om the package l
+0004a330: 6962 7261 7279 0a20 2020 2020 2020 2073  ibrary.        s
+0004a340: 656c 662e 6173 7365 7274 4661 6c73 6528  elf.assertFalse(
+0004a350: 0a20 2020 2020 2020 2020 2020 2022 5465  .            "Te
+0004a360: 7374 5f70 6970 656c 696e 655f 3122 0a20  st_pipeline_1". 
+0004a370: 2020 2020 2020 2020 2020 2069 6e20 706b             in pk
+0004a380: 672e 7061 636b 6167 655f 6c69 6272 6172  g.package_librar
+0004a390: 792e 7061 636b 6167 655f 7472 6565 5b22  y.package_tree["
+0004a3a0: 5573 6572 5f70 726f 6365 7373 6573 225d  User_processes"]
+0004a3b0: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+0004a3c0: 2020 2020 2320 5265 7374 6f72 6520 7468      # Restore th
+0004a3d0: 6520 696e 6974 6961 6c20 7072 6f63 6573  e initial proces
+0004a3e0: 7320 6c69 6272 6172 7920 2862 6566 6f72  s library (befor
+0004a3f0: 6520 7465 7374 5f73 6176 655f 7069 7065  e test_save_pipe
+0004a400: 6c69 6e65 2074 6573 7429 0a20 2020 2020  line test).     
+0004a410: 2020 2063 6f6e 6669 6720 3d20 436f 6e66     config = Conf
+0004a420: 6967 2863 6f6e 6669 675f 7061 7468 3d73  ig(config_path=s
+0004a430: 656c 662e 636f 6e66 6967 5f70 6174 6829  elf.config_path)
+0004a440: 0a20 2020 2020 2020 2075 7372 5f70 726f  .        usr_pro
+0004a450: 635f 666f 6c64 6572 203d 206f 732e 7061  c_folder = os.pa
+0004a460: 7468 2e6a 6f69 6e28 0a20 2020 2020 2020  th.join(.       
+0004a470: 2020 2020 2063 6f6e 6669 672e 6765 745f       config.get_
+0004a480: 6d69 615f 7061 7468 2829 2c20 2270 726f  mia_path(), "pro
+0004a490: 6365 7373 6573 222c 2022 5573 6572 5f70  cesses", "User_p
+0004a4a0: 726f 6365 7373 6573 220a 2020 2020 2020  rocesses".      
+0004a4b0: 2020 290a 2020 2020 2020 2020 7368 7574    ).        shut
+0004a4c0: 696c 2e72 6d74 7265 6528 7573 725f 7072  il.rmtree(usr_pr
+0004a4d0: 6f63 5f66 6f6c 6465 7229 0a20 2020 2020  oc_folder).     
+0004a4e0: 2020 206f 732e 7265 6d6f 7665 280a 2020     os.remove(.  
+0004a4f0: 2020 2020 2020 2020 2020 6f73 2e70 6174            os.pat
+0004a500: 682e 6a6f 696e 280a 2020 2020 2020 2020  h.join(.        
+0004a510: 2020 2020 2020 2020 636f 6e66 6967 2e67          config.g
+0004a520: 6574 5f6d 6961 5f70 6174 6828 292c 2022  et_mia_path(), "
+0004a530: 7072 6f70 6572 7469 6573 222c 2022 7072  properties", "pr
+0004a540: 6f63 6573 735f 636f 6e66 6967 2e79 6d6c  ocess_config.yml
+0004a550: 220a 2020 2020 2020 2020 2020 2020 290a  ".            ).
+0004a560: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0004a570: 2020 7368 7574 696c 2e63 6f70 7974 7265    shutil.copytre
+0004a580: 6528 0a20 2020 2020 2020 2020 2020 206f  e(.            o
+0004a590: 732e 7061 7468 2e6a 6f69 6e28 0a20 2020  s.path.join(.   
+0004a5a0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0004a5b0: 662e 636f 6e66 6967 5f70 6174 682c 0a20  f.config_path,. 
+0004a5c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0004a5d0: 3455 5473 5f54 6573 744d 4941 5069 7065  4UTs_TestMIAPipe
+0004a5e0: 6c69 6e65 4564 6974 6f72 222c 0a20 2020  lineEditor",.   
+0004a5f0: 2020 2020 2020 2020 2020 2020 2022 5573               "Us
+0004a600: 6572 5f70 726f 6365 7373 6573 222c 0a20  er_processes",. 
+0004a610: 2020 2020 2020 2020 2020 2029 2c0a 2020             ),.  
+0004a620: 2020 2020 2020 2020 2020 6f73 2e70 6174            os.pat
+0004a630: 682e 6a6f 696e 2875 7372 5f70 726f 635f  h.join(usr_proc_
+0004a640: 666f 6c64 6572 292c 0a20 2020 2020 2020  folder),.       
+0004a650: 2029 0a20 2020 2020 2020 2073 6875 7469   ).        shuti
+0004a660: 6c2e 636f 7079 280a 2020 2020 2020 2020  l.copy(.        
+0004a670: 2020 2020 6f73 2e70 6174 682e 6a6f 696e      os.path.join
+0004a680: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0004a690: 2020 7365 6c66 2e63 6f6e 6669 675f 7061    self.config_pa
+0004a6a0: 7468 2c0a 2020 2020 2020 2020 2020 2020  th,.            
+0004a6b0: 2020 2020 2234 5554 735f 5465 7374 4d49      "4UTs_TestMI
+0004a6c0: 4150 6970 656c 696e 6545 6469 746f 7222  APipelineEditor"
+0004a6d0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0004a6e0: 2020 2270 726f 6365 7373 5f63 6f6e 6669    "process_confi
+0004a6f0: 672e 796d 6c22 2c0a 2020 2020 2020 2020  g.yml",.        
+0004a700: 2020 2020 292c 0a20 2020 2020 2020 2020      ),.         
+0004a710: 2020 206f 732e 7061 7468 2e6a 6f69 6e28     os.path.join(
+0004a720: 636f 6e66 6967 2e67 6574 5f6d 6961 5f70  config.get_mia_p
+0004a730: 6174 6828 292c 2022 7072 6f70 6572 7469  ath(), "properti
+0004a740: 6573 2229 2c0a 2020 2020 2020 2020 290a  es"),.        ).
+0004a750: 0a0a 636c 6173 7320 5465 7374 4d49 4150  ..class TestMIAP
+0004a760: 6970 656c 696e 654d 616e 6167 6572 5461  ipelineManagerTa
+0004a770: 6228 5465 7374 4d49 4143 6173 6529 3a0a  b(TestMIACase):.
+0004a780: 2020 2020 2222 2254 6573 7473 2074 6865      """Tests the
+0004a790: 2070 6970 656c 696e 6520 6d61 6e61 6765   pipeline manage
+0004a7a0: 7220 7461 6220 636c 6173 732c 2070 6172  r tab class, par
+0004a7b0: 7420 6f66 2074 6865 2068 6f6d 6f6e 796d  t of the homonym
+0004a7c0: 2074 6162 2e0a 0a20 2020 203a 436f 6e74   tab...    :Cont
+0004a7d0: 6169 6e73 3a0a 2020 2020 2020 2020 3a4d  ains:.        :M
+0004a7e0: 6574 686f 643a 0a20 2020 2020 2020 2020  ethod:.         
+0004a7f0: 2020 202d 2074 6573 745f 6164 645f 706c     - test_add_pl
+0004a800: 7567 5f76 616c 7565 5f74 6f5f 6461 7461  ug_value_to_data
+0004a810: 6261 7365 5f6c 6973 745f 7479 7065 3a20  base_list_type: 
+0004a820: 6164 6473 2061 206c 6973 7420 7479 7065  adds a list type
+0004a830: 2070 6c75 670a 2020 2020 2020 2020 2020   plug.          
+0004a840: 2020 2020 7661 6c75 6520 746f 2074 6865      value to the
+0004a850: 2064 6174 6162 6173 650a 2020 2020 2020   database.      
+0004a860: 2020 2020 2020 2d20 7465 7374 5f61 6464        - test_add
+0004a870: 5f70 6c75 675f 7661 6c75 655f 746f 5f64  _plug_value_to_d
+0004a880: 6174 6162 6173 655f 6e6f 6e5f 6c69 7374  atabase_non_list
+0004a890: 5f74 7970 653a 2061 6464 7320 6120 6e6f  _type: adds a no
+0004a8a0: 6e20 6c69 7374 0a20 2020 2020 2020 2020  n list.         
+0004a8b0: 2020 2020 2074 7970 6520 706c 7567 2076       type plug v
+0004a8c0: 616c 7565 2074 6f20 7468 6520 6461 7461  alue to the data
+0004a8d0: 6261 7365 0a20 2020 2020 2020 2020 2020  base.           
+0004a8e0: 202d 2074 6573 745f 6164 645f 706c 7567   - test_add_plug
+0004a8f0: 5f76 616c 7565 5f74 6f5f 6461 7461 6261  _value_to_databa
+0004a900: 7365 5f73 6576 6572 616c 5f69 6e70 7574  se_several_input
+0004a910: 733a 2065 7870 6f72 7473 2061 206e 6f6e  s: exports a non
+0004a920: 0a20 2020 2020 2020 2020 2020 2020 206c  .              l
+0004a930: 6973 7420 7479 7065 2069 6e70 7574 2070  ist type input p
+0004a940: 6c75 6720 616e 6420 7769 7468 2073 6576  lug and with sev
+0004a950: 6572 616c 2070 6f73 7369 626c 6520 696e  eral possible in
+0004a960: 7075 7473 0a20 2020 2020 2020 2020 2020  puts.           
+0004a970: 202d 2074 6573 745f 6173 6b5f 6974 6572   - test_ask_iter
+0004a980: 6174 6564 5f70 6970 656c 696e 655f 706c  ated_pipeline_pl
+0004a990: 7567 733a 2074 6573 7420 7468 6520 6974  ugs: test the it
+0004a9a0: 6572 6174 696f 6e0a 2020 2020 2020 2020  eration.        
+0004a9b0: 2020 2020 2020 6469 616c 6f67 2066 6f72        dialog for
+0004a9c0: 2065 6163 6820 706c 7567 206f 6620 6120   each plug of a 
+0004a9d0: 5265 6e61 6d65 2070 726f 6365 7373 0a20  Rename process. 
+0004a9e0: 2020 2020 2020 2020 2020 202d 2074 6573             - tes
+0004a9f0: 745f 6275 696c 645f 6974 6572 6174 6564  t_build_iterated
+0004aa00: 5f70 6970 656c 696e 653a 206d 6f63 6b73  _pipeline: mocks
+0004aa10: 206d 6574 686f 6473 2061 6e64 2062 7569   methods and bui
+0004aa20: 6c64 7320 616e 0a20 2020 2020 2020 2020  lds an.         
+0004aa30: 2020 2020 2069 7465 7261 7465 6420 7069       iterated pi
+0004aa40: 7065 6c69 6e65 0a20 2020 2020 2020 2020  peline.         
+0004aa50: 2020 202d 2074 6573 745f 6368 6563 6b5f     - test_check_
+0004aa60: 7265 7175 6972 656d 656e 7473 3a20 6368  requirements: ch
+0004aa70: 6563 6b73 2074 6865 2072 6571 7569 7265  ecks the require
+0004aa80: 6d65 6e74 7320 666f 7220 6120 6769 7665  ments for a give
+0004aa90: 6e20 6e6f 6465 0a20 2020 2020 2020 2020  n node.         
+0004aaa0: 2020 202d 2074 6573 745f 636c 6561 6e75     - test_cleanu
+0004aab0: 705f 6f6c 6465 725f 696e 6974 3a20 7465  p_older_init: te
+0004aac0: 7374 7320 7468 6520 636c 6561 6e69 6e67  sts the cleaning
+0004aad0: 206f 6620 6f6c 640a 2020 2020 2020 2020   of old.        
+0004aae0: 2020 2020 2020 696e 6974 6961 6c69 7361        initialisa
+0004aaf0: 7469 6f6e 730a 2020 2020 2020 2020 2020  tions.          
+0004ab00: 2020 2d20 7465 7374 5f63 6f6d 706c 6574    - test_complet
+0004ab10: 655f 7069 7065 6c69 6e65 5f70 6172 616d  e_pipeline_param
+0004ab20: 6574 6572 733a 2074 6573 7420 7468 6520  eters: test the 
+0004ab30: 7069 7065 6c69 6e65 0a20 2020 2020 2020  pipeline.       
+0004ab40: 2020 2020 2020 2070 6172 616d 6574 6572         parameter
+0004ab50: 7320 636f 6d70 6c65 7469 6f6e 0a20 2020  s completion.   
+0004ab60: 2020 2020 2020 2020 202d 2074 6573 745f           - test_
+0004ab70: 6465 6c65 7465 5f70 726f 6365 7373 6573  delete_processes
+0004ab80: 3a20 6465 6c65 7465 7320 6120 7072 6f63  : deletes a proc
+0004ab90: 6573 7320 616e 6420 6d61 6b65 7320 7468  ess and makes th
+0004aba0: 6520 756e 646f 2f72 6564 6f0a 2020 2020  e undo/redo.    
+0004abb0: 2020 2020 2020 2020 2d20 7465 7374 5f65          - test_e
+0004abc0: 6e64 5f70 726f 6772 6573 733a 2063 7265  nd_progress: cre
+0004abd0: 6174 6573 2061 2070 726f 6772 6573 7320  ates a progress 
+0004abe0: 6f62 6a65 6374 2061 6e64 2074 7269 6573  object and tries
+0004abf0: 2074 6f20 656e 6420 6974 0a20 2020 2020   to end it.     
+0004ac00: 2020 2020 2020 202d 2074 6573 745f 6761         - test_ga
+0004ac10: 7262 6167 655f 636f 6c6c 6563 743a 2063  rbage_collect: c
+0004ac20: 6f6c 6c65 6374 7320 7468 6520 6761 7262  ollects the garb
+0004ac30: 6167 6520 6f66 2061 2070 6970 656c 696e  age of a pipelin
+0004ac40: 650a 2020 2020 2020 2020 2020 2020 2d20  e.            - 
+0004ac50: 7465 7374 5f67 6574 5f63 6170 7375 6c5f  test_get_capsul_
+0004ac60: 656e 6769 6e65 3a20 6765 7473 2074 6865  engine: gets the
+0004ac70: 2063 6170 7375 6c20 656e 6769 6e65 206f   capsul engine o
+0004ac80: 6620 7468 6520 7069 7065 6c69 6e65 0a20  f the pipeline. 
+0004ac90: 2020 2020 2020 2020 2020 202d 2074 6573             - tes
+0004aca0: 745f 6765 745f 6d69 7373 696e 675f 6d61  t_get_missing_ma
+0004acb0: 6e64 6174 6f72 795f 7061 7261 6d65 7465  ndatory_paramete
+0004acc0: 7273 3a20 7472 6965 7320 746f 2069 6e69  rs: tries to ini
+0004acd0: 7469 616c 697a 650a 2020 2020 2020 2020  tialize.        
+0004ace0: 2020 2020 2020 7468 6520 7069 7065 6c69        the pipeli
+0004acf0: 6e65 2077 6974 6820 6d69 7373 696e 6720  ne with missing 
+0004ad00: 6d61 6e64 6174 6f72 7920 7061 7261 6d65  mandatory parame
+0004ad10: 7465 7273 0a20 2020 2020 2020 2020 2020  ters.           
+0004ad20: 202d 2074 6573 745f 6765 745f 7069 7065   - test_get_pipe
+0004ad30: 6c69 6e65 5f6f 725f 7072 6f63 6573 733a  line_or_process:
+0004ad40: 2067 6574 7320 6120 7069 7065 6c69 6e65   gets a pipeline
+0004ad50: 2061 6e64 2061 2070 726f 6365 7373 2066   and a process f
+0004ad60: 726f 6d0a 2020 2020 2020 2020 2020 2020  rom.            
+0004ad70: 2020 7468 6520 7069 7065 6c69 6e65 5f6d    the pipeline_m
+0004ad80: 616e 6167 6572 0a20 2020 2020 2020 2020  anager.         
+0004ad90: 2020 202d 2074 6573 745f 696e 6974 6961     - test_initia
+0004ada0: 6c69 7a65 3a20 6d6f 636b 7320 6f62 6a65  lize: mocks obje
+0004adb0: 6374 7320 616e 6420 696e 6974 6961 6c69  cts and initiali
+0004adc0: 7a65 7320 7468 6520 776f 726b 666c 6f77  zes the workflow
+0004add0: 0a20 2020 2020 2020 2020 2020 202d 2074  .            - t
+0004ade0: 6573 745f 7265 6769 7374 6572 5f63 6f6d  est_register_com
+0004adf0: 706c 6574 696f 6e5f 6174 7472 6962 7574  pletion_attribut
+0004ae00: 6573 3a20 6d6f 636b 7320 6d65 7468 6f64  es: mocks method
+0004ae10: 7320 6f66 2074 6865 0a20 2020 2020 2020  s of the.       
+0004ae20: 2020 2020 2020 2070 6970 656c 696e 6520         pipeline 
+0004ae30: 6d61 6e61 6765 7220 616e 6420 7265 6769  manager and regi
+0004ae40: 7374 6572 7320 636f 6d70 6c65 7469 6f6e  sters completion
+0004ae50: 2061 7474 7269 6275 7465 730a 2020 2020   attributes.    
+0004ae60: 2020 2020 2020 2020 2d20 7465 7374 5f72          - test_r
+0004ae70: 6567 6973 7465 725f 6e6f 6465 5f69 6f5f  egister_node_io_
+0004ae80: 696e 5f64 6174 6162 6173 653a 2073 6574  in_database: set
+0004ae90: 7320 696e 7075 7420 616e 6420 6f75 7470  s input and outp
+0004aea0: 7574 0a20 2020 2020 2020 2020 2020 2020  ut.             
+0004aeb0: 2070 6172 616d 6574 6572 7320 616e 6420   parameters and 
+0004aec0: 7265 6769 7374 6572 7320 7468 656d 2069  registers them i
+0004aed0: 6e20 6461 7461 6261 7365 0a20 2020 2020  n database.     
+0004aee0: 2020 2020 2020 202d 2074 6573 745f 7265         - test_re
+0004aef0: 6d6f 7665 5f70 726f 6772 6573 733a 2072  move_progress: r
+0004af00: 656d 6f76 6573 2074 6865 2070 726f 6772  emoves the progr
+0004af10: 6573 7320 6f66 2074 6865 2070 6970 656c  ess of the pipel
+0004af20: 696e 650a 2020 2020 2020 2020 2020 2020  ine.            
+0004af30: 2d20 7465 7374 5f72 756e 3a20 6372 6561  - test_run: crea
+0004af40: 7465 7320 6120 7069 7065 6c69 6e65 206d  tes a pipeline m
+0004af50: 616e 6167 6572 2070 726f 6772 6573 7320  anager progress 
+0004af60: 6f62 6a65 6374 2061 6e64 0a20 2020 2020  object and.     
+0004af70: 2020 2020 2020 2020 2074 7269 6573 2074           tries t
+0004af80: 6f20 7275 6e20 6974 0a20 2020 2020 2020  o run it.       
+0004af90: 2020 2020 202d 2074 6573 745f 7361 7665       - test_save
+0004afa0: 5f70 6970 656c 696e 653a 2073 6176 6573  _pipeline: saves
+0004afb0: 2061 2073 696d 706c 6520 7069 7065 6c69   a simple pipeli
+0004afc0: 6e65 0a20 2020 2020 2020 2020 2020 202d  ne.            -
+0004afd0: 2074 6573 745f 7361 7665 5069 7065 6c69   test_savePipeli
+0004afe0: 6e65 4173 3a20 7361 7665 7320 6120 7069  neAs: saves a pi
+0004aff0: 7065 6c69 6e65 2075 6e64 6572 2061 6e6f  peline under ano
+0004b000: 7468 6572 206e 616d 650a 2020 2020 2020  ther name.      
+0004b010: 2020 2020 2020 2d20 7465 7374 5f73 6574        - test_set
+0004b020: 5f61 6e69 6d5f 6672 616d 653a 2072 756e  _anim_frame: run
+0004b030: 7320 7468 6520 2772 6f74 6174 696e 6742  s the 'rotatingB
+0004b040: 7261 696e 5649 5341 2e67 6966 2720 616e  rainVISA.gif' an
+0004b050: 696d 6174 696f 6e0a 2020 2020 2020 2020  imation.        
+0004b060: 2020 2020 2d20 7465 7374 5f73 686f 775f      - test_show_
+0004b070: 7374 6174 7573 3a20 7368 6f77 7320 7468  status: shows th
+0004b080: 6520 7374 6174 7573 206f 6620 7069 7065  e status of pipe
+0004b090: 6c69 6e65 2065 7865 6375 7469 6f6e 0a20  line execution. 
+0004b0a0: 2020 2020 2020 2020 2020 202d 2074 6573             - tes
+0004b0b0: 745f 7374 6f70 5f65 7865 6375 7469 6f6e  t_stop_execution
+0004b0c0: 3a20 7368 6f77 7320 7468 6520 7374 6174  : shows the stat
+0004b0d0: 7573 2077 696e 646f 7720 6f66 2074 6865  us window of the
+0004b0e0: 2070 6970 656c 696e 650a 2020 2020 2020   pipeline.      
+0004b0f0: 2020 2020 2020 2020 6d61 6e61 6765 720a          manager.
+0004b100: 2020 2020 2020 2020 2020 2020 2d20 7465              - te
+0004b110: 7374 5f75 6e64 6f5f 7265 646f 3a20 7465  st_undo_redo: te
+0004b120: 7374 7320 7468 6520 756e 646f 2f72 6564  sts the undo/red
+0004b130: 6f20 6665 6174 7572 650a 2020 2020 2020  o feature.      
+0004b140: 2020 2020 2020 2d20 7465 7374 5f75 7064        - test_upd
+0004b150: 6174 655f 6175 746f 5f69 6e68 6572 6974  ate_auto_inherit
+0004b160: 616e 6365 3a20 7570 6461 7465 7320 7468  ance: updates th
+0004b170: 6520 6a6f 6227 7320 6175 746f 2069 6e68  e job's auto inh
+0004b180: 6572 6974 616e 6365 0a20 2020 2020 2020  eritance.       
+0004b190: 2020 2020 2020 2064 6963 740a 2020 2020         dict.    
+0004b1a0: 2020 2020 2020 2020 2d20 7465 7374 5f75          - test_u
+0004b1b0: 7064 6174 655f 696e 6865 7269 7461 6e63  pdate_inheritanc
+0004b1c0: 653a 2075 7064 6174 6573 2074 6865 206a  e: updates the j
+0004b1d0: 6f62 2773 2069 6e68 6572 6974 616e 6365  ob's inheritance
+0004b1e0: 2064 6963 740a 2020 2020 2020 2020 2020   dict.          
+0004b1f0: 2020 2d20 7465 7374 5f75 7064 6174 655f    - test_update_
+0004b200: 6e6f 6465 5f6c 6973 743a 2069 6e69 7469  node_list: initi
+0004b210: 616c 697a 6573 2061 2077 6f72 6b66 6c6f  alizes a workflo
+0004b220: 7720 616e 6420 6164 6473 2061 0a20 2020  w and adds a.   
+0004b230: 2020 2020 2020 2020 2020 2070 726f 6365             proce
+0004b240: 7373 2074 6f20 7468 6520 2270 6970 6c69  ss to the "pipli
+0004b250: 6e65 5f6d 616e 6167 6572 2e6e 6f64 655f  ne_manager.node_
+0004b260: 6c69 7374 220a 2020 2020 2020 2020 2020  list".          
+0004b270: 2020 2d20 7465 7374 5f7a 5f69 6e69 745f    - test_z_init_
+0004b280: 7069 7065 6c69 6e65 3a20 696e 6974 6961  pipeline: initia
+0004b290: 6c69 7a65 7320 7468 6520 7069 7065 6c69  lizes the pipeli
+0004b2a0: 6e65 0a20 2020 2020 2020 2020 2020 202d  ne.            -
+0004b2b0: 2074 6573 745f 7a5f 7275 6e50 6970 656c   test_z_runPipel
+0004b2c0: 696e 653a 2061 6464 7320 6120 7072 6f63  ine: adds a proc
+0004b2d0: 6573 7372 756e 7320 6120 7069 7065 6c69  essruns a pipeli
+0004b2e0: 6e65 0a20 2020 2020 2020 2020 2020 202d  ne.            -
+0004b2f0: 2074 6573 745f 7a7a 5f64 656c 5f70 6163   test_zz_del_pac
+0004b300: 6b3a 2064 656c 6574 696f 6e20 6f66 2074  k: deletion of t
+0004b310: 6865 2062 7269 636b 2063 7265 6174 6564  he brick created
+0004b320: 2064 7572 696e 6720 5554 730a 2020 2020   during UTs.    
+0004b330: 2222 220a 0a20 2020 2064 6566 2074 6573  """..    def tes
+0004b340: 745f 6164 645f 706c 7567 5f76 616c 7565  t_add_plug_value
+0004b350: 5f74 6f5f 6461 7461 6261 7365 5f6c 6973  _to_database_lis
+0004b360: 745f 7479 7065 2873 656c 6629 3a0a 2020  t_type(self):.  
+0004b370: 2020 2020 2020 2222 224f 7065 6e73 2061        """Opens a
+0004b380: 2070 726f 6a65 6374 2c20 6164 6473 2061   project, adds a
+0004b390: 2027 5365 6c65 6374 2720 7072 6f63 6573   'Select' proces
+0004b3a0: 732c 2065 7870 6f72 7473 2061 206c 6973  s, exports a lis
+0004b3b0: 7420 7479 7065 0a20 2020 2020 2020 2069  t type.        i
+0004b3c0: 6e70 7574 2070 6c75 6720 616e 6420 6164  nput plug and ad
+0004b3d0: 6473 2069 7420 746f 2074 6865 2064 6174  ds it to the dat
+0004b3e0: 6162 6173 652e 0a0a 2020 2020 2020 2020  abase...        
+0004b3f0: 2d20 5465 7374 733a 2050 6970 656c 696e  - Tests: Pipelin
+0004b400: 654d 616e 6167 6572 5461 6228 5157 6964  eManagerTab(QWid
+0004b410: 6765 7429 2e61 6464 5f70 6c75 675f 7661  get).add_plug_va
+0004b420: 6c75 655f 746f 5f64 6174 6162 6173 6528  lue_to_database(
+0004b430: 292e 0a20 2020 2020 2020 2022 2222 0a0a  )..        """..
+0004b440: 2020 2020 2020 2020 2320 4f70 656e 7320          # Opens 
+0004b450: 7072 6f6a 6563 7420 3820 616e 6420 7377  project 8 and sw
+0004b460: 6974 6368 6573 2074 6f20 6974 0a20 2020  itches to it.   
+0004b470: 2020 2020 2070 726f 6a65 6374 5f38 5f70       project_8_p
+0004b480: 6174 6820 3d20 7365 6c66 2e67 6574 5f6e  ath = self.get_n
+0004b490: 6577 5f74 6573 745f 7072 6f6a 6563 7428  ew_test_project(
+0004b4a0: 290a 2020 2020 2020 2020 7365 6c66 2e6d  ).        self.m
+0004b4b0: 6169 6e5f 7769 6e64 6f77 2e73 7769 7463  ain_window.switc
+0004b4c0: 685f 7072 6f6a 6563 7428 7072 6f6a 6563  h_project(projec
+0004b4d0: 745f 385f 7061 7468 2c20 2270 726f 6a65  t_8_path, "proje
+0004b4e0: 6374 5f39 2229 0a0a 2020 2020 2020 2020  ct_9")..        
+0004b4f0: 444f 4355 4d45 4e54 5f31 203d 2073 656c  DOCUMENT_1 = sel
+0004b500: 662e 6d61 696e 5f77 696e 646f 772e 7072  f.main_window.pr
+0004b510: 6f6a 6563 742e 7365 7373 696f 6e2e 6765  oject.session.ge
+0004b520: 745f 646f 6375 6d65 6e74 735f 6e61 6d65  t_documents_name
+0004b530: 7328 0a20 2020 2020 2020 2020 2020 2022  s(.            "
+0004b540: 6375 7272 656e 7422 0a20 2020 2020 2020  current".       
+0004b550: 2029 5b30 5d0a 2020 2020 2020 2020 444f   )[0].        DO
+0004b560: 4355 4d45 4e54 5f32 203d 2073 656c 662e  CUMENT_2 = self.
+0004b570: 6d61 696e 5f77 696e 646f 772e 7072 6f6a  main_window.proj
+0004b580: 6563 742e 7365 7373 696f 6e2e 6765 745f  ect.session.get_
+0004b590: 646f 6375 6d65 6e74 735f 6e61 6d65 7328  documents_names(
+0004b5a0: 0a20 2020 2020 2020 2020 2020 2022 6375  .            "cu
+0004b5b0: 7272 656e 7422 0a20 2020 2020 2020 2029  rrent".        )
+0004b5c0: 5b31 5d0a 0a20 2020 2020 2020 2070 706c  [1]..        ppl
+0004b5d0: 5f65 6474 5f74 6162 7320 3d20 7365 6c66  _edt_tabs = self
+0004b5e0: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 6970  .main_window.pip
+0004b5f0: 656c 696e 655f 6d61 6e61 6765 722e 7069  eline_manager.pi
+0004b600: 7065 6c69 6e65 4564 6974 6f72 5461 6273  pelineEditorTabs
+0004b610: 0a0a 2020 2020 2020 2020 2320 4164 6473  ..        # Adds
+0004b620: 2074 6865 2070 726f 6365 7373 2053 656c   the process Sel
+0004b630: 6563 742c 2063 7265 6174 6573 2074 6865  ect, creates the
+0004b640: 2022 7365 6c65 6374 5f31 2220 6e6f 6465   "select_1" node
+0004b650: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
+0004b660: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
+0004b670: 745f 6564 6974 6f72 2829 2e63 6c69 636b  t_editor().click
+0004b680: 5f70 6f73 203d 2051 506f 696e 7428 3435  _pos = QPoint(45
+0004b690: 302c 2035 3030 290a 2020 2020 2020 2020  0, 500).        
+0004b6a0: 7070 6c5f 6564 745f 7461 6273 2e67 6574  ppl_edt_tabs.get
+0004b6b0: 5f63 7572 7265 6e74 5f65 6469 746f 7228  _current_editor(
+0004b6c0: 292e 6164 645f 6e61 6d65 645f 7072 6f63  ).add_named_proc
+0004b6d0: 6573 7328 5365 6c65 6374 290a 2020 2020  ess(Select).    
+0004b6e0: 2020 2020 7069 7065 6c69 6e65 203d 2070      pipeline = p
+0004b6f0: 706c 5f65 6474 5f74 6162 732e 6765 745f  pl_edt_tabs.get_
+0004b700: 6375 7272 656e 745f 7069 7065 6c69 6e65  current_pipeline
+0004b710: 2829 0a0a 2020 2020 2020 2020 2320 4578  ()..        # Ex
+0004b720: 706f 7274 7320 7468 6520 6d61 6e64 6174  ports the mandat
+0004b730: 6f72 7920 696e 7075 7420 616e 6420 6f75  ory input and ou
+0004b740: 7470 7574 2070 6c75 6773 2066 6f72 2022  tput plugs for "
+0004b750: 7365 6c65 6374 5f31 220a 2020 2020 2020  select_1".      
+0004b760: 2020 7070 6c5f 6564 745f 7461 6273 2e67    ppl_edt_tabs.g
+0004b770: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
+0004b780: 7228 292e 6375 7272 656e 745f 6e6f 6465  r().current_node
+0004b790: 5f6e 616d 6520 3d20 2273 656c 6563 745f  _name = "select_
+0004b7a0: 3122 0a20 2020 2020 2020 2070 706c 5f65  1".        ppl_e
+0004b7b0: 6474 5f74 6162 732e 6765 745f 6375 7272  dt_tabs.get_curr
+0004b7c0: 656e 745f 6564 6974 6f72 2829 2e65 7870  ent_editor().exp
+0004b7d0: 6f72 745f 756e 636f 6e6e 6563 7465 645f  ort_unconnected_
+0004b7e0: 6d61 6e64 6174 6f72 795f 696e 7075 7473  mandatory_inputs
+0004b7f0: 2829 0a20 2020 2020 2020 2070 706c 5f65  ().        ppl_e
+0004b800: 6474 5f74 6162 732e 6765 745f 6375 7272  dt_tabs.get_curr
+0004b810: 656e 745f 6564 6974 6f72 2829 2e65 7870  ent_editor().exp
+0004b820: 6f72 745f 616c 6c5f 756e 636f 6e6e 6563  ort_all_unconnec
+0004b830: 7465 645f 6f75 7470 7574 7328 290a 0a20  ted_outputs().. 
+0004b840: 2020 2020 2020 2070 6970 656c 696e 655f         pipeline_
+0004b850: 6d61 6e61 6765 7220 3d20 7365 6c66 2e6d  manager = self.m
+0004b860: 6169 6e5f 7769 6e64 6f77 2e70 6970 656c  ain_window.pipel
+0004b870: 696e 655f 6d61 6e61 6765 720a 0a20 2020  ine_manager..   
+0004b880: 2020 2020 2023 2049 6e69 7469 616c 697a       # Initializ
+0004b890: 6573 2074 6865 2077 6f72 6b66 6c6f 7720  es the workflow 
+0004b8a0: 6d61 6e75 616c 6c79 0a20 2020 2020 2020  manually.       
+0004b8b0: 2070 6970 656c 696e 655f 6d61 6e61 6765   pipeline_manage
+0004b8c0: 722e 776f 726b 666c 6f77 203d 2077 6f72  r.workflow = wor
+0004b8d0: 6b66 6c6f 775f 6672 6f6d 5f70 6970 656c  kflow_from_pipel
+0004b8e0: 696e 6528 0a20 2020 2020 2020 2020 2020  ine(.           
+0004b8f0: 2070 6970 656c 696e 652c 2063 6f6d 706c   pipeline, compl
+0004b900: 6574 655f 7061 7261 6d65 7465 7273 3d54  ete_parameters=T
+0004b910: 7275 650a 2020 2020 2020 2020 290a 0a20  rue.        ).. 
+0004b920: 2020 2020 2020 2023 2047 6574 7320 7468         # Gets th
+0004b930: 6520 276a 6f62 2720 616e 6420 6d6f 636b  e 'job' and mock
+0004b940: 7320 6164 6469 6e67 2061 2062 7269 636b  s adding a brick
+0004b950: 2074 6f20 7468 6520 636f 6c6c 6563 7469   to the collecti
+0004b960: 6f6e 0a20 2020 2020 2020 206a 6f62 203d  on.        job =
+0004b970: 2070 6970 656c 696e 655f 6d61 6e61 6765   pipeline_manage
+0004b980: 722e 776f 726b 666c 6f77 2e6a 6f62 735b  r.workflow.jobs[
+0004b990: 305d 0a0a 2020 2020 2020 2020 6272 6963  0]..        bric
+0004b9a0: 6b5f 6964 203d 2073 7472 2875 7569 642e  k_id = str(uuid.
+0004b9b0: 7575 6964 3428 2929 0a20 2020 2020 2020  uuid4()).       
+0004b9c0: 206a 6f62 2e75 7569 6420 3d20 6272 6963   job.uuid = bric
+0004b9d0: 6b5f 6964 0a20 2020 2020 2020 2070 6970  k_id.        pip
+0004b9e0: 656c 696e 655f 6d61 6e61 6765 722e 6272  eline_manager.br
+0004b9f0: 6963 6b5f 6c69 7374 2e61 7070 656e 6428  ick_list.append(
+0004ba00: 6272 6963 6b5f 6964 290a 0a20 2020 2020  brick_id)..     
+0004ba10: 2020 2070 6970 656c 696e 655f 6d61 6e61     pipeline_mana
+0004ba20: 6765 722e 7072 6f6a 6563 742e 7365 7373  ger.project.sess
+0004ba30: 696f 6e2e 6164 645f 646f 6375 6d65 6e74  ion.add_document
+0004ba40: 280a 2020 2020 2020 2020 2020 2020 434f  (.            CO
+0004ba50: 4c4c 4543 5449 4f4e 5f42 5249 434b 2c20  LLECTION_BRICK, 
+0004ba60: 6272 6963 6b5f 6964 0a20 2020 2020 2020  brick_id.       
+0004ba70: 2029 0a0a 2020 2020 2020 2020 2320 5365   )..        # Se
+0004ba80: 7473 2074 6865 206d 616e 6461 746f 7279  ts the mandatory
+0004ba90: 2070 6c75 6720 7661 6c75 6573 2063 6f72   plug values cor
+0004baa0: 7265 7370 6f6e 6469 6e67 2074 6f20 2269  responding to "i
+0004bab0: 6e70 7574 7322 206e 6f64 650a 2020 2020  nputs" node.    
+0004bac0: 2020 2020 7472 6169 745f 6c69 7374 5f69      trait_list_i
+0004bad0: 6e6c 6973 7420 3d20 5472 6169 744c 6973  nlist = TraitLis
+0004bae0: 744f 626a 6563 7428 0a20 2020 2020 2020  tObject(.       
+0004baf0: 2020 2020 2049 6e70 7574 4d75 6c74 694f       InputMultiO
+0004bb00: 626a 6563 7428 292c 2070 6970 656c 696e  bject(), pipelin
+0004bb10: 652c 2022 696e 6c69 7374 222c 205b 444f  e, "inlist", [DO
+0004bb20: 4355 4d45 4e54 5f31 2c20 444f 4355 4d45  CUMENT_1, DOCUME
+0004bb30: 4e54 5f32 5d0a 2020 2020 2020 2020 290a  NT_2].        ).
+0004bb40: 0a20 2020 2020 2020 2023 204d 6f63 6b73  .        # Mocks
+0004bb50: 2074 6865 2063 7265 6174 696f 6e20 6f66   the creation of
+0004bb60: 2061 2063 6f6d 706c 6574 696f 6e20 656e   a completion en
+0004bb70: 6769 6e65 0a20 2020 2020 2020 2070 726f  gine.        pro
+0004bb80: 6365 7373 203d 206a 6f62 2e70 726f 6365  cess = job.proce
+0004bb90: 7373 2829 0a20 2020 2020 2020 2070 6c75  ss().        plu
+0004bba0: 675f 6e61 6d65 203d 2022 696e 6c69 7374  g_name = "inlist
+0004bbb0: 220a 2020 2020 2020 2020 7472 6169 7420  ".        trait 
+0004bbc0: 3d20 7072 6f63 6573 732e 7472 6169 7428  = process.trait(
+0004bbd0: 706c 7567 5f6e 616d 6529 0a20 2020 2020  plug_name).     
+0004bbe0: 2020 2069 6e70 7574 7320 3d20 7072 6f63     inputs = proc
+0004bbf0: 6573 732e 6765 745f 696e 7075 7473 2829  ess.get_inputs()
+0004bc00: 0a0a 2020 2020 2020 2020 2320 4d6f 636b  ..        # Mock
+0004bc10: 7320 7468 6520 6174 7472 6962 7574 6573  s the attributes
+0004bc20: 2064 6963 740a 2020 2020 2020 2020 6174   dict.        at
+0004bc30: 7472 6962 7574 6573 203d 207b 0a20 2020  tributes = {.   
+0004bc40: 2020 2020 2020 2020 2022 6e6f 745f 6c69           "not_li
+0004bc50: 7374 223a 2022 6e6f 745f 6c69 7374 5f76  st": "not_list_v
+0004bc60: 616c 7565 222c 0a20 2020 2020 2020 2020  alue",.         
+0004bc70: 2020 2022 736d 616c 6c5f 6c69 7374 223a     "small_list":
+0004bc80: 205b 226c 6973 745f 6974 656d 3122 5d2c   ["list_item1"],
+0004bc90: 0a20 2020 2020 2020 2020 2020 2022 6c61  .            "la
+0004bca0: 7267 655f 6c69 7374 223a 205b 226c 6973  rge_list": ["lis
+0004bcb0: 745f 6974 656d 3122 2c20 226c 6973 745f  t_item1", "list_
+0004bcc0: 6974 656d 3222 2c20 226c 6973 745f 6974  item2", "list_it
+0004bcd0: 656d 3322 5d2c 0a20 2020 2020 2020 207d  em3"],.        }
+0004bce0: 0a0a 2020 2020 2020 2020 2320 4164 6473  ..        # Adds
+0004bcf0: 2070 6c75 6720 7661 6c75 6520 6f66 2074   plug value of t
+0004bd00: 7970 6520 2754 7261 6974 4c69 7374 4f62  ype 'TraitListOb
+0004bd10: 6a65 6374 270a 2020 2020 2020 2020 7069  ject'.        pi
+0004bd20: 7065 6c69 6e65 5f6d 616e 6167 6572 2e61  peline_manager.a
+0004bd30: 6464 5f70 6c75 675f 7661 6c75 655f 746f  dd_plug_value_to
+0004bd40: 5f64 6174 6162 6173 6528 0a20 2020 2020  _database(.     
+0004bd50: 2020 2020 2020 2074 7261 6974 5f6c 6973         trait_lis
+0004bd60: 745f 696e 6c69 7374 2c0a 2020 2020 2020  t_inlist,.      
+0004bd70: 2020 2020 2020 6272 6963 6b5f 6964 2c0a        brick_id,.
+0004bd80: 2020 2020 2020 2020 2020 2020 2222 2c0a              "",.
+0004bd90: 2020 2020 2020 2020 2020 2020 2273 656c              "sel
+0004bda0: 6563 745f 3122 2c0a 2020 2020 2020 2020  ect_1",.        
+0004bdb0: 2020 2020 706c 7567 5f6e 616d 652c 0a20      plug_name,. 
+0004bdc0: 2020 2020 2020 2020 2020 2022 7365 6c65             "sele
+0004bdd0: 6374 5f31 222c 0a20 2020 2020 2020 2020  ct_1",.         
+0004bde0: 2020 206a 6f62 2c0a 2020 2020 2020 2020     job,.        
+0004bdf0: 2020 2020 7472 6169 742c 0a20 2020 2020      trait,.     
+0004be00: 2020 2020 2020 2069 6e70 7574 732c 0a20         inputs,. 
+0004be10: 2020 2020 2020 2020 2020 2061 7474 7269             attri
+0004be20: 6275 7465 732c 0a20 2020 2020 2020 2029  butes,.        )
+0004be30: 0a0a 2020 2020 2020 2020 2320 4173 7365  ..        # Asse
+0004be40: 7274 7320 7468 6174 2062 6f74 6820 2744  rts that both 'D
+0004be50: 4f43 554d 454e 545f 3127 2061 6e64 2027  OCUMENT_1' and '
+0004be60: 444f 4355 4d45 4e54 5f32 2720 6172 6520  DOCUMENT_2' are 
+0004be70: 7374 6f72 6564 2069 6e0a 2020 2020 2020  stored in.      
+0004be80: 2020 2320 7468 6520 6461 7461 6261 7365    # the database
+0004be90: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
+0004bea0: 655f 6d61 6e61 6765 722e 7072 6f6a 6563  e_manager.projec
+0004beb0: 742e 7365 7373 696f 6e2e 6765 745f 646f  t.session.get_do
+0004bec0: 6375 6d65 6e74 280a 2020 2020 2020 2020  cument(.        
+0004bed0: 2020 2020 434f 4c4c 4543 5449 4f4e 5f43      COLLECTION_C
+0004bee0: 5552 5245 4e54 2c20 444f 4355 4d45 4e54  URRENT, DOCUMENT
+0004bef0: 5f31 0a20 2020 2020 2020 2029 0a20 2020  _1.        ).   
+0004bf00: 2020 2020 2070 6970 656c 696e 655f 6d61       pipeline_ma
+0004bf10: 6e61 6765 722e 7072 6f6a 6563 742e 7365  nager.project.se
+0004bf20: 7373 696f 6e2e 6765 745f 646f 6375 6d65  ssion.get_docume
+0004bf30: 6e74 280a 2020 2020 2020 2020 2020 2020  nt(.            
+0004bf40: 434f 4c4c 4543 5449 4f4e 5f43 5552 5245  COLLECTION_CURRE
+0004bf50: 4e54 2c20 444f 4355 4d45 4e54 5f32 0a20  NT, DOCUMENT_2. 
+0004bf60: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0004bf70: 2068 6173 5f64 6f63 756d 656e 7420 3d20   has_document = 
+0004bf80: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
+0004bf90: 2e70 726f 6a65 6374 2e73 6573 7369 6f6e  .project.session
+0004bfa0: 2e68 6173 5f64 6f63 756d 656e 740a 2020  .has_document.  
+0004bfb0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0004bfc0: 7454 7275 6528 6861 735f 646f 6375 6d65  tTrue(has_docume
+0004bfd0: 6e74 2843 4f4c 4c45 4354 494f 4e5f 4355  nt(COLLECTION_CU
+0004bfe0: 5252 454e 542c 2044 4f43 554d 454e 545f  RRENT, DOCUMENT_
+0004bff0: 3129 290a 2020 2020 2020 2020 7365 6c66  1)).        self
+0004c000: 2e61 7373 6572 7454 7275 6528 6861 735f  .assertTrue(has_
+0004c010: 646f 6375 6d65 6e74 2843 4f4c 4c45 4354  document(COLLECT
+0004c020: 494f 4e5f 4355 5252 454e 542c 2044 4f43  ION_CURRENT, DOC
+0004c030: 554d 454e 545f 3229 290a 0a20 2020 2064  UMENT_2))..    d
+0004c040: 6566 2074 6573 745f 6164 645f 706c 7567  ef test_add_plug
+0004c050: 5f76 616c 7565 5f74 6f5f 6461 7461 6261  _value_to_databa
+0004c060: 7365 5f6e 6f6e 5f6c 6973 745f 7479 7065  se_non_list_type
+0004c070: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+0004c080: 2222 224f 7065 6e73 2061 2070 726f 6a65  """Opens a proje
+0004c090: 6374 2c20 6164 6473 2061 2027 5265 6e61  ct, adds a 'Rena
+0004c0a0: 6d65 2720 7072 6f63 6573 732c 2065 7870  me' process, exp
+0004c0b0: 6f72 7473 2061 206e 6f6e 206c 6973 7420  orts a non list 
+0004c0c0: 7479 7065 0a20 2020 2020 2020 2069 6e70  type.        inp
+0004c0d0: 7574 2070 6c75 6720 616e 6420 6164 6473  ut plug and adds
+0004c0e0: 2069 7420 746f 2074 6865 2064 6174 6162   it to the datab
+0004c0f0: 6173 652e 0a0a 2020 2020 2020 2020 2d20  ase...        - 
+0004c100: 5465 7374 733a 2050 6970 656c 696e 654d  Tests: PipelineM
+0004c110: 616e 6167 6572 5461 6228 5157 6964 6765  anagerTab(QWidge
+0004c120: 7429 2e61 6464 5f70 6c75 675f 7661 6c75  t).add_plug_valu
+0004c130: 655f 746f 5f64 6174 6162 6173 6528 290a  e_to_database().
+0004c140: 2020 2020 2020 2020 2222 220a 0a20 2020          """..   
+0004c150: 2020 2020 2023 204f 7065 6e73 2070 726f       # Opens pro
+0004c160: 6a65 6374 2038 2061 6e64 2073 7769 7463  ject 8 and switc
+0004c170: 6865 7320 746f 2069 740a 2020 2020 2020  hes to it.      
+0004c180: 2020 7072 6f6a 6563 745f 385f 7061 7468    project_8_path
+0004c190: 203d 2073 656c 662e 6765 745f 6e65 775f   = self.get_new_
+0004c1a0: 7465 7374 5f70 726f 6a65 6374 2829 0a20  test_project(). 
+0004c1b0: 2020 2020 2020 2073 656c 662e 6d61 696e         self.main
+0004c1c0: 5f77 696e 646f 772e 7377 6974 6368 5f70  _window.switch_p
+0004c1d0: 726f 6a65 6374 2870 726f 6a65 6374 5f38  roject(project_8
+0004c1e0: 5f70 6174 682c 2022 7072 6f6a 6563 745f  _path, "project_
+0004c1f0: 3822 290a 0a20 2020 2020 2020 2044 4f43  8")..        DOC
+0004c200: 554d 454e 545f 3120 3d20 7365 6c66 2e6d  UMENT_1 = self.m
+0004c210: 6169 6e5f 7769 6e64 6f77 2e70 726f 6a65  ain_window.proje
+0004c220: 6374 2e73 6573 7369 6f6e 2e67 6574 5f64  ct.session.get_d
+0004c230: 6f63 756d 656e 7473 5f6e 616d 6573 280a  ocuments_names(.
+0004c240: 2020 2020 2020 2020 2020 2020 2263 7572              "cur
+0004c250: 7265 6e74 220a 2020 2020 2020 2020 295b  rent".        )[
+0004c260: 305d 0a0a 2020 2020 2020 2020 7069 7065  0]..        pipe
+0004c270: 6c69 6e65 5f65 6469 746f 725f 7461 6273  line_editor_tabs
+0004c280: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
+0004c290: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+0004c2a0: 772e 7069 7065 6c69 6e65 5f6d 616e 6167  w.pipeline_manag
+0004c2b0: 6572 2e70 6970 656c 696e 6545 6469 746f  er.pipelineEdito
+0004c2c0: 7254 6162 730a 2020 2020 2020 2020 290a  rTabs.        ).
+0004c2d0: 0a20 2020 2020 2020 2023 2041 6464 7320  .        # Adds 
+0004c2e0: 7468 6520 7072 6f63 6573 7320 5265 6e61  the process Rena
+0004c2f0: 6d65 2c20 6372 6561 7465 7320 7468 6520  me, creates the 
+0004c300: 2272 656e 616d 655f 3122 206e 6f64 650a  "rename_1" node.
+0004c310: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
+0004c320: 5f65 6469 746f 725f 7461 6273 2e67 6574  _editor_tabs.get
+0004c330: 5f63 7572 7265 6e74 5f65 6469 746f 7228  _current_editor(
+0004c340: 292e 636c 6963 6b5f 706f 7320 3d20 5150  ).click_pos = QP
+0004c350: 6f69 6e74 2834 3530 2c20 3530 3029 0a20  oint(450, 500). 
+0004c360: 2020 2020 2020 2070 6970 656c 696e 655f         pipeline_
+0004c370: 6564 6974 6f72 5f74 6162 732e 6765 745f  editor_tabs.get_
+0004c380: 6375 7272 656e 745f 6564 6974 6f72 2829  current_editor()
+0004c390: 2e61 6464 5f6e 616d 6564 5f70 726f 6365  .add_named_proce
+0004c3a0: 7373 2852 656e 616d 6529 0a20 2020 2020  ss(Rename).     
+0004c3b0: 2020 2070 6970 656c 696e 6520 3d20 7069     pipeline = pi
+0004c3c0: 7065 6c69 6e65 5f65 6469 746f 725f 7461  peline_editor_ta
+0004c3d0: 6273 2e67 6574 5f63 7572 7265 6e74 5f70  bs.get_current_p
+0004c3e0: 6970 656c 696e 6528 290a 0a20 2020 2020  ipeline()..     
+0004c3f0: 2020 2023 2045 7870 6f72 7473 2074 6865     # Exports the
+0004c400: 206d 616e 6461 746f 7279 2069 6e70 7574   mandatory input
+0004c410: 2061 6e64 206f 7574 7075 7420 706c 7567   and output plug
+0004c420: 7320 666f 7220 2272 656e 616d 655f 3122  s for "rename_1"
+0004c430: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
+0004c440: 655f 6564 6974 6f72 5f74 6162 732e 6765  e_editor_tabs.ge
+0004c450: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
+0004c460: 2829 2e63 7572 7265 6e74 5f6e 6f64 655f  ().current_node_
+0004c470: 6e61 6d65 203d 2028 0a20 2020 2020 2020  name = (.       
+0004c480: 2020 2020 2022 7265 6e61 6d65 5f31 220a       "rename_1".
+0004c490: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0004c4a0: 2020 280a 2020 2020 2020 2020 2020 2020    (.            
+0004c4b0: 7069 7065 6c69 6e65 5f65 6469 746f 725f  pipeline_editor_
+0004c4c0: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
+0004c4d0: 5f65 6469 746f 720a 2020 2020 2020 2020  _editor.        
+0004c4e0: 2928 292e 6578 706f 7274 5f75 6e63 6f6e  )().export_uncon
+0004c4f0: 6e65 6374 6564 5f6d 616e 6461 746f 7279  nected_mandatory
+0004c500: 5f69 6e70 7574 7328 290a 2020 2020 2020  _inputs().      
+0004c510: 2020 280a 2020 2020 2020 2020 2020 2020    (.            
+0004c520: 7069 7065 6c69 6e65 5f65 6469 746f 725f  pipeline_editor_
+0004c530: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
+0004c540: 5f65 6469 746f 720a 2020 2020 2020 2020  _editor.        
+0004c550: 2928 292e 6578 706f 7274 5f61 6c6c 5f75  )().export_all_u
+0004c560: 6e63 6f6e 6e65 6374 6564 5f6f 7574 7075  nconnected_outpu
+0004c570: 7473 2829 0a0a 2020 2020 2020 2020 6f6c  ts()..        ol
+0004c580: 645f 7363 616e 5f6e 616d 6520 3d20 444f  d_scan_name = DO
+0004c590: 4355 4d45 4e54 5f31 2e73 706c 6974 2822  CUMENT_1.split("
+0004c5a0: 2f22 295b 2d31 5d0a 2020 2020 2020 2020  /")[-1].        
+0004c5b0: 6e65 775f 7363 616e 5f6e 616d 6520 3d20  new_scan_name = 
+0004c5c0: 226e 6577 5f6e 616d 652e 6e69 6922 0a0a  "new_name.nii"..
+0004c5d0: 2020 2020 2020 2020 2320 4368 616e 6765          # Change
+0004c5e0: 7320 7468 6520 225f 6f75 745f 6669 6c65  s the "_out_file
+0004c5f0: 2220 696e 2074 6865 2022 6f75 7470 7574  " in the "output
+0004c600: 7322 206e 6f64 650a 2020 2020 2020 2020  s" node.        
+0004c610: 7069 7065 6c69 6e65 2e6e 6f64 6573 5b22  pipeline.nodes["
+0004c620: 225d 2e73 6574 5f70 6c75 675f 7661 6c75  "].set_plug_valu
+0004c630: 6528 0a20 2020 2020 2020 2020 2020 2022  e(.            "
+0004c640: 5f6f 7574 5f66 696c 6522 2c20 444f 4355  _out_file", DOCU
+0004c650: 4d45 4e54 5f31 2e72 6570 6c61 6365 286f  MENT_1.replace(o
+0004c660: 6c64 5f73 6361 6e5f 6e61 6d65 2c20 6e65  ld_scan_name, ne
+0004c670: 775f 7363 616e 5f6e 616d 6529 0a20 2020  w_scan_name).   
+0004c680: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+0004c690: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
+0004c6a0: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
+0004c6b0: 646f 772e 7069 7065 6c69 6e65 5f6d 616e  dow.pipeline_man
+0004c6c0: 6167 6572 0a20 2020 2020 2020 2070 6970  ager.        pip
+0004c6d0: 656c 696e 655f 6d61 6e61 6765 722e 776f  eline_manager.wo
+0004c6e0: 726b 666c 6f77 203d 2077 6f72 6b66 6c6f  rkflow = workflo
+0004c6f0: 775f 6672 6f6d 5f70 6970 656c 696e 6528  w_from_pipeline(
+0004c700: 0a20 2020 2020 2020 2020 2020 2070 6970  .            pip
+0004c710: 656c 696e 652c 2063 6f6d 706c 6574 655f  eline, complete_
+0004c720: 7061 7261 6d65 7465 7273 3d54 7275 650a  parameters=True.
+0004c730: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+0004c740: 2020 206a 6f62 203d 2070 6970 656c 696e     job = pipelin
+0004c750: 655f 6d61 6e61 6765 722e 776f 726b 666c  e_manager.workfl
+0004c760: 6f77 2e6a 6f62 735b 305d 0a0a 2020 2020  ow.jobs[0]..    
+0004c770: 2020 2020 6272 6963 6b5f 6964 203d 2073      brick_id = s
+0004c780: 7472 2875 7569 642e 7575 6964 3428 2929  tr(uuid.uuid4())
+0004c790: 0a20 2020 2020 2020 206a 6f62 2e75 7569  .        job.uui
+0004c7a0: 6420 3d20 6272 6963 6b5f 6964 0a20 2020  d = brick_id.   
+0004c7b0: 2020 2020 2070 6970 656c 696e 655f 6d61       pipeline_ma
+0004c7c0: 6e61 6765 722e 6272 6963 6b5f 6c69 7374  nager.brick_list
+0004c7d0: 2e61 7070 656e 6428 6272 6963 6b5f 6964  .append(brick_id
+0004c7e0: 290a 0a20 2020 2020 2020 2070 6970 656c  )..        pipel
+0004c7f0: 696e 655f 6d61 6e61 6765 722e 7072 6f6a  ine_manager.proj
+0004c800: 6563 742e 7365 7373 696f 6e2e 6164 645f  ect.session.add_
+0004c810: 646f 6375 6d65 6e74 280a 2020 2020 2020  document(.      
+0004c820: 2020 2020 2020 434f 4c4c 4543 5449 4f4e        COLLECTION
+0004c830: 5f42 5249 434b 2c20 6272 6963 6b5f 6964  _BRICK, brick_id
+0004c840: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+0004c850: 2020 2020 2320 5365 7473 2074 6865 206d      # Sets the m
+0004c860: 616e 6461 746f 7279 2070 6c75 6720 7661  andatory plug va
+0004c870: 6c75 6573 2069 6e20 7468 6520 2269 6e70  lues in the "inp
+0004c880: 7574 7322 206e 6f64 650a 2020 2020 2020  uts" node.      
+0004c890: 2020 7069 7065 6c69 6e65 2e6e 6f64 6573    pipeline.nodes
+0004c8a0: 5b22 225d 2e73 6574 5f70 6c75 675f 7661  [""].set_plug_va
+0004c8b0: 6c75 6528 2269 6e5f 6669 6c65 222c 2044  lue("in_file", D
+0004c8c0: 4f43 554d 454e 545f 3129 0a20 2020 2020  OCUMENT_1).     
+0004c8d0: 2020 2070 6970 656c 696e 652e 6e6f 6465     pipeline.node
+0004c8e0: 735b 2222 5d2e 7365 745f 706c 7567 5f76  s[""].set_plug_v
+0004c8f0: 616c 7565 2822 666f 726d 6174 5f73 7472  alue("format_str
+0004c900: 696e 6722 2c20 6e65 775f 7363 616e 5f6e  ing", new_scan_n
+0004c910: 616d 6529 0a0a 2020 2020 2020 2020 7072  ame)..        pr
+0004c920: 6f63 6573 7320 3d20 6a6f 622e 7072 6f63  ocess = job.proc
+0004c930: 6573 7328 290a 2020 2020 2020 2020 706c  ess().        pl
+0004c940: 7567 5f6e 616d 6520 3d20 2269 6e5f 6669  ug_name = "in_fi
+0004c950: 6c65 220a 2020 2020 2020 2020 7472 6169  le".        trai
+0004c960: 7420 3d20 7072 6f63 6573 732e 7472 6169  t = process.trai
+0004c970: 7428 706c 7567 5f6e 616d 6529 0a0a 2020  t(plug_name)..  
+0004c980: 2020 2020 2020 696e 7075 7473 203d 2070        inputs = p
+0004c990: 726f 6365 7373 2e67 6574 5f69 6e70 7574  rocess.get_input
+0004c9a0: 7328 290a 0a20 2020 2020 2020 2061 7474  s()..        att
+0004c9b0: 7269 6275 7465 7320 3d20 7b7d 0a20 2020  ributes = {}.   
+0004c9c0: 2020 2020 2063 6f6d 706c 6574 696f 6e20       completion 
+0004c9d0: 3d20 5072 6f63 6573 7343 6f6d 706c 6574  = ProcessComplet
+0004c9e0: 696f 6e45 6e67 696e 652e 6765 745f 636f  ionEngine.get_co
+0004c9f0: 6d70 6c65 7469 6f6e 5f65 6e67 696e 6528  mpletion_engine(
+0004ca00: 7072 6f63 6573 7329 0a0a 2020 2020 2020  process)..      
+0004ca10: 2020 6966 2063 6f6d 706c 6574 696f 6e3a    if completion:
+0004ca20: 0a20 2020 2020 2020 2020 2020 2061 7474  .            att
+0004ca30: 7269 6275 7465 7320 3d20 636f 6d70 6c65  ributes = comple
+0004ca40: 7469 6f6e 2e67 6574 5f61 7474 7269 6275  tion.get_attribu
+0004ca50: 7465 5f76 616c 7565 7328 292e 6578 706f  te_values().expo
+0004ca60: 7274 5f74 6f5f 6469 6374 2829 0a0a 2020  rt_to_dict()..  
+0004ca70: 2020 2020 2020 6861 735f 646f 6375 6d65        has_docume
+0004ca80: 6e74 203d 2070 6970 656c 696e 655f 6d61  nt = pipeline_ma
+0004ca90: 6e61 6765 722e 7072 6f6a 6563 742e 7365  nager.project.se
+0004caa0: 7373 696f 6e2e 6861 735f 646f 6375 6d65  ssion.has_docume
+0004cab0: 6e74 0a0a 2020 2020 2020 2020 2320 506c  nt..        # Pl
+0004cac0: 7567 2076 616c 7565 2069 7320 6669 6c65  ug value is file
+0004cad0: 206c 6f63 6174 696f 6e20 6f75 7473 6964   location outsid
+0004cae0: 6520 7072 6f6a 6563 7420 6469 7265 6374  e project direct
+0004caf0: 6f72 790a 2020 2020 2020 2020 7069 7065  ory.        pipe
+0004cb00: 6c69 6e65 5f6d 616e 6167 6572 2e61 6464  line_manager.add
+0004cb10: 5f70 6c75 675f 7661 6c75 655f 746f 5f64  _plug_value_to_d
+0004cb20: 6174 6162 6173 6528 0a20 2020 2020 2020  atabase(.       
+0004cb30: 2020 2020 2044 4f43 554d 454e 545f 312c       DOCUMENT_1,
+0004cb40: 0a20 2020 2020 2020 2020 2020 2062 7269  .            bri
+0004cb50: 636b 5f69 642c 0a20 2020 2020 2020 2020  ck_id,.         
+0004cb60: 2020 2022 222c 0a20 2020 2020 2020 2020     "",.         
+0004cb70: 2020 2022 7265 6e61 6d65 5f31 222c 0a20     "rename_1",. 
+0004cb80: 2020 2020 2020 2020 2020 2070 6c75 675f             plug_
+0004cb90: 6e61 6d65 2c0a 2020 2020 2020 2020 2020  name,.          
+0004cba0: 2020 2272 656e 616d 655f 3122 2c0a 2020    "rename_1",.  
+0004cbb0: 2020 2020 2020 2020 2020 6a6f 622c 0a20            job,. 
+0004cbc0: 2020 2020 2020 2020 2020 2074 7261 6974             trait
+0004cbd0: 2c0a 2020 2020 2020 2020 2020 2020 696e  ,.            in
+0004cbe0: 7075 7473 2c0a 2020 2020 2020 2020 2020  puts,.          
+0004cbf0: 2020 6174 7472 6962 7574 6573 2c0a 2020    attributes,.  
+0004cc00: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0004cc10: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
+0004cc20: 2e70 726f 6a65 6374 2e73 6573 7369 6f6e  .project.session
+0004cc30: 2e67 6574 5f64 6f63 756d 656e 7428 0a20  .get_document(. 
+0004cc40: 2020 2020 2020 2020 2020 2043 4f4c 4c45             COLLE
+0004cc50: 4354 494f 4e5f 4355 5252 454e 542c 2044  CTION_CURRENT, D
+0004cc60: 4f43 554d 454e 545f 310a 2020 2020 2020  OCUMENT_1.      
+0004cc70: 2020 290a 2020 2020 2020 2020 7365 6c66    ).        self
+0004cc80: 2e61 7373 6572 7454 7275 6528 6861 735f  .assertTrue(has_
+0004cc90: 646f 6375 6d65 6e74 2843 4f4c 4c45 4354  document(COLLECT
+0004cca0: 494f 4e5f 4355 5252 454e 542c 2044 4f43  ION_CURRENT, DOC
+0004ccb0: 554d 454e 545f 3129 290a 2020 2020 2020  UMENT_1)).      
+0004ccc0: 2020 2320 506c 7567 2076 616c 7565 7320    # Plug values 
+0004ccd0: 6f75 7473 6964 6520 7468 6520 6469 7265  outside the dire
+0004cce0: 6374 6f72 7920 6172 6520 6e6f 7420 7265  ctory are not re
+0004ccf0: 6769 7374 6572 6564 2069 6e74 6f20 7468  gistered into th
+0004cd00: 650a 2020 2020 2020 2020 2320 6461 7461  e.        # data
+0004cd10: 6261 7365 2c20 7468 6572 6566 6f72 6520  base, therefore 
+0004cd20: 6f6e 6c79 2070 6c75 6720 7661 6c75 6573  only plug values
+0004cd30: 2069 6e73 6964 6520 7468 6520 7072 6f6a   inside the proj
+0004cd40: 6563 7420 7769 6c6c 2062 6520 7573 6564  ect will be used
+0004cd50: 0a20 2020 2020 2020 2023 2066 726f 6d20  .        # from 
+0004cd60: 6e6f 7720 6f6e 2e0a 0a20 2020 2020 2020  now on...       
+0004cd70: 2023 2050 6c75 6720 7661 6c75 6520 6973   # Plug value is
+0004cd80: 2066 696c 6520 6c6f 6361 7469 6f6e 2069   file location i
+0004cd90: 6e73 6964 6520 7072 6f6a 6563 7420 6469  nside project di
+0004cda0: 7265 6374 6f72 790a 2020 2020 2020 2020  rectory.        
+0004cdb0: 696e 7369 6465 5f70 726f 6a65 6374 203d  inside_project =
+0004cdc0: 206f 732e 7061 7468 2e6a 6f69 6e28 0a20   os.path.join(. 
+0004cdd0: 2020 2020 2020 2020 2020 2070 6970 656c             pipel
+0004cde0: 696e 655f 6d61 6e61 6765 722e 7072 6f6a  ine_manager.proj
+0004cdf0: 6563 742e 666f 6c64 6572 2c20 444f 4355  ect.folder, DOCU
+0004ce00: 4d45 4e54 5f31 2e73 706c 6974 2822 2f22  MENT_1.split("/"
+0004ce10: 295b 2d31 5d0a 2020 2020 2020 2020 290a  )[-1].        ).
+0004ce20: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
+0004ce30: 5f6d 616e 6167 6572 2e61 6464 5f70 6c75  _manager.add_plu
+0004ce40: 675f 7661 6c75 655f 746f 5f64 6174 6162  g_value_to_datab
+0004ce50: 6173 6528 0a20 2020 2020 2020 2020 2020  ase(.           
+0004ce60: 2069 6e73 6964 655f 7072 6f6a 6563 742c   inside_project,
+0004ce70: 0a20 2020 2020 2020 2020 2020 2062 7269  .            bri
+0004ce80: 636b 5f69 642c 0a20 2020 2020 2020 2020  ck_id,.         
+0004ce90: 2020 2022 222c 0a20 2020 2020 2020 2020     "",.         
+0004cea0: 2020 2022 7265 6e61 6d65 5f31 222c 0a20     "rename_1",. 
+0004ceb0: 2020 2020 2020 2020 2020 2070 6c75 675f             plug_
+0004cec0: 6e61 6d65 2c0a 2020 2020 2020 2020 2020  name,.          
+0004ced0: 2020 2272 656e 616d 655f 3122 2c0a 2020    "rename_1",.  
+0004cee0: 2020 2020 2020 2020 2020 6a6f 622c 0a20            job,. 
+0004cef0: 2020 2020 2020 2020 2020 2074 7261 6974             trait
+0004cf00: 2c0a 2020 2020 2020 2020 2020 2020 696e  ,.            in
+0004cf10: 7075 7473 2c0a 2020 2020 2020 2020 2020  puts,.          
+0004cf20: 2020 6174 7472 6962 7574 6573 2c0a 2020    attributes,.  
+0004cf30: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+0004cf40: 2023 2050 6c75 6720 7661 6c75 6520 7468   # Plug value th
+0004cf50: 6174 2069 7320 616c 7265 6164 7920 696e  at is already in
+0004cf60: 2074 6865 2064 6174 6162 6173 650a 2020   the database.  
+0004cf70: 2020 2020 2020 7069 7065 6c69 6e65 5f6d        pipeline_m
+0004cf80: 616e 6167 6572 2e61 6464 5f70 6c75 675f  anager.add_plug_
+0004cf90: 7661 6c75 655f 746f 5f64 6174 6162 6173  value_to_databas
+0004cfa0: 6528 0a20 2020 2020 2020 2020 2020 2069  e(.            i
+0004cfb0: 6e73 6964 655f 7072 6f6a 6563 742c 0a20  nside_project,. 
+0004cfc0: 2020 2020 2020 2020 2020 2062 7269 636b             brick
+0004cfd0: 5f69 642c 0a20 2020 2020 2020 2020 2020  _id,.           
+0004cfe0: 2022 222c 0a20 2020 2020 2020 2020 2020   "",.           
+0004cff0: 2022 7265 6e61 6d65 5f31 222c 0a20 2020   "rename_1",.   
+0004d000: 2020 2020 2020 2020 2070 6c75 675f 6e61           plug_na
+0004d010: 6d65 2c0a 2020 2020 2020 2020 2020 2020  me,.            
+0004d020: 2272 656e 616d 655f 3122 2c0a 2020 2020  "rename_1",.    
+0004d030: 2020 2020 2020 2020 6a6f 622c 0a20 2020          job,.   
+0004d040: 2020 2020 2020 2020 2074 7261 6974 2c0a           trait,.
+0004d050: 2020 2020 2020 2020 2020 2020 696e 7075              inpu
+0004d060: 7473 2c0a 2020 2020 2020 2020 2020 2020  ts,.            
+0004d070: 6174 7472 6962 7574 6573 2c0a 2020 2020  attributes,.    
+0004d080: 2020 2020 290a 0a20 2020 2020 2020 2023      )..        #
+0004d090: 2050 6c75 6720 7661 6c75 6520 6973 2074   Plug value is t
+0004d0a0: 6167 0a20 2020 2020 2020 2074 6167 5f76  ag.        tag_v
+0004d0b0: 616c 7565 203d 206f 732e 7061 7468 2e6a  alue = os.path.j
+0004d0c0: 6f69 6e28 7069 7065 6c69 6e65 5f6d 616e  oin(pipeline_man
+0004d0d0: 6167 6572 2e70 726f 6a65 6374 2e66 6f6c  ager.project.fol
+0004d0e0: 6465 722c 2022 7461 672e 677a 2229 0a20  der, "tag.gz"). 
+0004d0f0: 2020 2020 2020 2070 6970 656c 696e 655f         pipeline_
+0004d100: 6d61 6e61 6765 722e 6164 645f 706c 7567  manager.add_plug
+0004d110: 5f76 616c 7565 5f74 6f5f 6461 7461 6261  _value_to_databa
+0004d120: 7365 280a 2020 2020 2020 2020 2020 2020  se(.            
+0004d130: 7461 675f 7661 6c75 652c 0a20 2020 2020  tag_value,.     
+0004d140: 2020 2020 2020 2062 7269 636b 5f69 642c         brick_id,
+0004d150: 0a20 2020 2020 2020 2020 2020 2022 222c  .            "",
+0004d160: 0a20 2020 2020 2020 2020 2020 2022 7265  .            "re
+0004d170: 6e61 6d65 5f31 222c 0a20 2020 2020 2020  name_1",.       
+0004d180: 2020 2020 2070 6c75 675f 6e61 6d65 2c0a       plug_name,.
+0004d190: 2020 2020 2020 2020 2020 2020 2272 656e              "ren
+0004d1a0: 616d 655f 3122 2c0a 2020 2020 2020 2020  ame_1",.        
+0004d1b0: 2020 2020 6a6f 622c 0a20 2020 2020 2020      job,.       
+0004d1c0: 2020 2020 2074 7261 6974 2c0a 2020 2020       trait,.    
+0004d1d0: 2020 2020 2020 2020 696e 7075 7473 2c0a          inputs,.
+0004d1e0: 2020 2020 2020 2020 2020 2020 6174 7472              attr
+0004d1f0: 6962 7574 6573 2c0a 2020 2020 2020 2020  ibutes,.        
+0004d200: 290a 0a20 2020 2020 2020 2023 2050 6c75  )..        # Plu
+0004d210: 6720 7661 6c75 6520 6973 202e 6d61 740a  g value is .mat.
+0004d220: 2020 2020 2020 2020 6d61 745f 7661 6c75          mat_valu
+0004d230: 6520 3d20 6f73 2e70 6174 682e 6a6f 696e  e = os.path.join
+0004d240: 2870 6970 656c 696e 655f 6d61 6e61 6765  (pipeline_manage
+0004d250: 722e 7072 6f6a 6563 742e 666f 6c64 6572  r.project.folder
+0004d260: 2c20 2266 696c 652e 6d61 7422 290a 2020  , "file.mat").  
+0004d270: 2020 2020 2020 7069 7065 6c69 6e65 5f6d        pipeline_m
+0004d280: 616e 6167 6572 2e61 6464 5f70 6c75 675f  anager.add_plug_
+0004d290: 7661 6c75 655f 746f 5f64 6174 6162 6173  value_to_databas
+0004d2a0: 6528 0a20 2020 2020 2020 2020 2020 206d  e(.            m
+0004d2b0: 6174 5f76 616c 7565 2c0a 2020 2020 2020  at_value,.      
+0004d2c0: 2020 2020 2020 6272 6963 6b5f 6964 2c0a        brick_id,.
+0004d2d0: 2020 2020 2020 2020 2020 2020 2222 2c0a              "",.
+0004d2e0: 2020 2020 2020 2020 2020 2020 2272 656e              "ren
+0004d2f0: 616d 655f 3122 2c0a 2020 2020 2020 2020  ame_1",.        
+0004d300: 2020 2020 706c 7567 5f6e 616d 652c 0a20      plug_name,. 
+0004d310: 2020 2020 2020 2020 2020 2022 7265 6e61             "rena
+0004d320: 6d65 5f31 222c 0a20 2020 2020 2020 2020  me_1",.         
+0004d330: 2020 206a 6f62 2c0a 2020 2020 2020 2020     job,.        
+0004d340: 2020 2020 7472 6169 742c 0a20 2020 2020      trait,.     
+0004d350: 2020 2020 2020 2069 6e70 7574 732c 0a20         inputs,. 
+0004d360: 2020 2020 2020 2020 2020 2061 7474 7269             attri
+0004d370: 6275 7465 732c 0a20 2020 2020 2020 2029  butes,.        )
+0004d380: 0a0a 2020 2020 2020 2020 2320 506c 7567  ..        # Plug
+0004d390: 2076 616c 7565 2069 7320 2e74 7874 0a20   value is .txt. 
+0004d3a0: 2020 2020 2020 2074 7874 5f76 616c 7565         txt_value
+0004d3b0: 203d 206f 732e 7061 7468 2e6a 6f69 6e28   = os.path.join(
+0004d3c0: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
+0004d3d0: 2e70 726f 6a65 6374 2e66 6f6c 6465 722c  .project.folder,
+0004d3e0: 2022 6669 6c65 2e74 7874 2229 0a20 2020   "file.txt").   
+0004d3f0: 2020 2020 2070 6970 656c 696e 655f 6d61       pipeline_ma
+0004d400: 6e61 6765 722e 6164 645f 706c 7567 5f76  nager.add_plug_v
+0004d410: 616c 7565 5f74 6f5f 6461 7461 6261 7365  alue_to_database
+0004d420: 280a 2020 2020 2020 2020 2020 2020 7478  (.            tx
+0004d430: 745f 7661 6c75 652c 0a20 2020 2020 2020  t_value,.       
+0004d440: 2020 2020 2062 7269 636b 5f69 642c 0a20       brick_id,. 
+0004d450: 2020 2020 2020 2020 2020 2022 222c 0a20             "",. 
+0004d460: 2020 2020 2020 2020 2020 2022 7265 6e61             "rena
+0004d470: 6d65 5f31 222c 0a20 2020 2020 2020 2020  me_1",.         
+0004d480: 2020 2070 6c75 675f 6e61 6d65 2c0a 2020     plug_name,.  
+0004d490: 2020 2020 2020 2020 2020 2272 656e 616d            "renam
+0004d4a0: 655f 3122 2c0a 2020 2020 2020 2020 2020  e_1",.          
+0004d4b0: 2020 6a6f 622c 0a20 2020 2020 2020 2020    job,.         
+0004d4c0: 2020 2074 7261 6974 2c0a 2020 2020 2020     trait,.      
+0004d4d0: 2020 2020 2020 696e 7075 7473 2c0a 2020        inputs,.  
+0004d4e0: 2020 2020 2020 2020 2020 6174 7472 6962            attrib
+0004d4f0: 7574 6573 2c0a 2020 2020 2020 2020 290a  utes,.        ).
+0004d500: 0a20 2020 2020 2020 2023 2027 7061 7265  .        # 'pare
+0004d510: 6e74 5f66 696c 6573 2720 6172 6520 6578  nt_files' are ex
+0004d520: 7472 6163 7465 6420 6672 6f6d 2074 6865  tracted from the
+0004d530: 2027 696e 6865 7269 7461 6e63 655f 6469   'inheritance_di
+0004d540: 6374 2720 616e 640a 2020 2020 2020 2020  ct' and.        
+0004d550: 2320 2761 7574 6f5f 696e 6865 7269 7461  # 'auto_inherita
+0004d560: 6e63 655f 6469 6374 2720 6174 7472 6962  nce_dict' attrib
+0004d570: 7574 6573 206f 6620 276a 6f62 272e 2054  utes of 'job'. T
+0004d580: 6865 7920 7465 7374 2063 6173 6573 2061  hey test cases a
+0004d590: 7265 0a20 2020 2020 2020 2023 206c 6973  re.        # lis
+0004d5a0: 7465 6420 6265 6c6f 773a 0a20 2020 2020  ted below:.     
+0004d5b0: 2020 2023 2027 7061 7265 6e74 5f66 696c     # 'parent_fil
+0004d5c0: 6573 2720 696e 7369 6465 2027 6175 746f  es' inside 'auto
+0004d5d0: 5f69 6e68 6572 6974 616e 6365 5f64 6963  _inheritance_dic
+0004d5e0: 7427 0a20 2020 2020 2020 206a 6f62 2e61  t'.        job.a
+0004d5f0: 7574 6f5f 696e 6865 7269 7461 6e63 655f  uto_inheritance_
+0004d600: 6469 6374 203d 207b 696e 7369 6465 5f70  dict = {inside_p
+0004d610: 726f 6a65 6374 3a20 2270 6172 656e 745f  roject: "parent_
+0004d620: 6669 6c65 735f 7661 6c75 6522 7d0a 2020  files_value"}.  
+0004d630: 2020 2020 2020 7069 7065 6c69 6e65 5f6d        pipeline_m
+0004d640: 616e 6167 6572 2e61 6464 5f70 6c75 675f  anager.add_plug_
+0004d650: 7661 6c75 655f 746f 5f64 6174 6162 6173  value_to_databas
+0004d660: 6528 0a20 2020 2020 2020 2020 2020 2069  e(.            i
+0004d670: 6e73 6964 655f 7072 6f6a 6563 742c 0a20  nside_project,. 
+0004d680: 2020 2020 2020 2020 2020 2062 7269 636b             brick
+0004d690: 5f69 642c 0a20 2020 2020 2020 2020 2020  _id,.           
+0004d6a0: 2022 222c 0a20 2020 2020 2020 2020 2020   "",.           
+0004d6b0: 2022 7265 6e61 6d65 5f31 222c 0a20 2020   "rename_1",.   
+0004d6c0: 2020 2020 2020 2020 2070 6c75 675f 6e61           plug_na
+0004d6d0: 6d65 2c0a 2020 2020 2020 2020 2020 2020  me,.            
+0004d6e0: 2272 656e 616d 655f 3122 2c0a 2020 2020  "rename_1",.    
+0004d6f0: 2020 2020 2020 2020 6a6f 622c 0a20 2020          job,.   
+0004d700: 2020 2020 2020 2020 2074 7261 6974 2c0a           trait,.
+0004d710: 2020 2020 2020 2020 2020 2020 696e 7075              inpu
+0004d720: 7473 2c0a 2020 2020 2020 2020 2020 2020  ts,.            
+0004d730: 6174 7472 6962 7574 6573 2c0a 2020 2020  attributes,.    
+0004d740: 2020 2020 290a 0a20 2020 2020 2020 2023      )..        #
+0004d750: 2027 7061 7265 6e74 5f66 696c 6573 2720   'parent_files' 
+0004d760: 696e 7369 6465 2027 696e 6865 7269 7461  inside 'inherita
+0004d770: 6e63 655f 6469 6374 270a 2020 2020 2020  nce_dict'.      
+0004d780: 2020 6a6f 622e 6175 746f 5f69 6e68 6572    job.auto_inher
+0004d790: 6974 616e 6365 5f64 6963 7420 3d20 4e6f  itance_dict = No
+0004d7a0: 6e65 0a20 2020 2020 2020 206a 6f62 2e69  ne.        job.i
+0004d7b0: 6e68 6572 6974 616e 6365 5f64 6963 7420  nheritance_dict 
+0004d7c0: 3d20 7b69 6e73 6964 655f 7072 6f6a 6563  = {inside_projec
+0004d7d0: 743a 2022 7061 7265 6e74 5f66 696c 6573  t: "parent_files
+0004d7e0: 5f76 616c 7565 227d 0a20 2020 2020 2020  _value"}.       
+0004d7f0: 2070 6970 656c 696e 655f 6d61 6e61 6765   pipeline_manage
+0004d800: 722e 6164 645f 706c 7567 5f76 616c 7565  r.add_plug_value
+0004d810: 5f74 6f5f 6461 7461 6261 7365 280a 2020  _to_database(.  
+0004d820: 2020 2020 2020 2020 2020 696e 7369 6465            inside
+0004d830: 5f70 726f 6a65 6374 2c0a 2020 2020 2020  _project,.      
+0004d840: 2020 2020 2020 6272 6963 6b5f 6964 2c0a        brick_id,.
+0004d850: 2020 2020 2020 2020 2020 2020 2222 2c0a              "",.
+0004d860: 2020 2020 2020 2020 2020 2020 2272 656e              "ren
+0004d870: 616d 655f 3122 2c0a 2020 2020 2020 2020  ame_1",.        
+0004d880: 2020 2020 706c 7567 5f6e 616d 652c 0a20      plug_name,. 
+0004d890: 2020 2020 2020 2020 2020 2022 7265 6e61             "rena
+0004d8a0: 6d65 5f31 222c 0a20 2020 2020 2020 2020  me_1",.         
+0004d8b0: 2020 206a 6f62 2c0a 2020 2020 2020 2020     job,.        
+0004d8c0: 2020 2020 7472 6169 742c 0a20 2020 2020      trait,.     
+0004d8d0: 2020 2020 2020 2069 6e70 7574 732c 0a20         inputs,. 
+0004d8e0: 2020 2020 2020 2020 2020 2061 7474 7269             attri
+0004d8f0: 6275 7465 732c 0a20 2020 2020 2020 2029  butes,.        )
+0004d900: 0a0a 2020 2020 2020 2020 2320 2770 6172  ..        # 'par
+0004d910: 656e 745f 6669 6c65 7327 2069 6e73 6964  ent_files' insid
+0004d920: 6520 2769 6e68 6572 6974 616e 6365 5f64  e 'inheritance_d
+0004d930: 6963 7427 2c20 6469 6374 2074 7970 650a  ict', dict type.
+0004d940: 2020 2020 2020 2020 6a6f 622e 696e 6865          job.inhe
+0004d950: 7269 7461 6e63 655f 6469 6374 203d 207b  ritance_dict = {
+0004d960: 0a20 2020 2020 2020 2020 2020 2069 6e73  .            ins
+0004d970: 6964 655f 7072 6f6a 6563 743a 207b 0a20  ide_project: {. 
+0004d980: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0004d990: 6f77 6e5f 7461 6773 223a 205b 0a20 2020  own_tags": [.   
+0004d9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004d9b0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+0004d9c0: 2020 2020 2020 2020 2020 2022 6e61 6d65             "name
+0004d9d0: 223a 2022 7461 675f 6e61 6d65 222c 0a20  ": "tag_name",. 
+0004d9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004d9f0: 2020 2020 2020 2022 6669 656c 645f 7479         "field_ty
+0004da00: 7065 223a 2022 7374 7269 6e67 222c 0a20  pe": "string",. 
+0004da10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004da20: 2020 2020 2020 2022 6465 7363 7269 7074         "descript
+0004da30: 696f 6e22 3a20 2264 6573 6372 6970 7469  ion": "descripti
+0004da40: 6f6e 5f63 6f6e 7465 6e74 222c 0a20 2020  on_content",.   
+0004da50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004da60: 2020 2020 2022 7669 7369 6269 6c69 7479       "visibility
+0004da70: 223a 2022 7669 7369 6269 6c69 7479 5f63  ": "visibility_c
+0004da80: 6f6e 7465 6e74 222c 0a20 2020 2020 2020  ontent",.       
+0004da90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004daa0: 2022 6f72 6967 696e 223a 2022 6f72 6967   "origin": "orig
+0004dab0: 696e 5f63 6f6e 7465 6e74 222c 0a20 2020  in_content",.   
+0004dac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004dad0: 2020 2020 2022 756e 6974 223a 2022 756e       "unit": "un
+0004dae0: 6974 5f63 6f6e 7465 6e74 222c 0a20 2020  it_content",.   
+0004daf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004db00: 2020 2020 2022 7661 6c75 6522 3a20 2276       "value": "v
+0004db10: 616c 7565 5f63 6f6e 7465 6e74 222c 0a20  alue_content",. 
+0004db20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004db30: 2020 2020 2020 2022 6465 6661 756c 745f         "default_
+0004db40: 7661 6c75 6522 3a20 2264 6566 6175 6c74  value": "default
+0004db50: 5f76 616c 7565 5f63 6f6e 7465 6e74 222c  _value_content",
+0004db60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0004db70: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
+0004db80: 2020 2020 2020 205d 2c0a 2020 2020 2020         ],.      
+0004db90: 2020 2020 2020 2020 2020 2270 6172 656e            "paren
+0004dba0: 7422 3a20 2270 6172 656e 745f 636f 6e74  t": "parent_cont
+0004dbb0: 656e 7422 2c0a 2020 2020 2020 2020 2020  ent",.          
+0004dbc0: 2020 7d0a 2020 2020 2020 2020 7d0a 2020    }.        }.  
+0004dbd0: 2020 2020 2020 7069 7065 6c69 6e65 5f6d        pipeline_m
+0004dbe0: 616e 6167 6572 2e61 6464 5f70 6c75 675f  anager.add_plug_
+0004dbf0: 7661 6c75 655f 746f 5f64 6174 6162 6173  value_to_databas
+0004dc00: 6528 0a20 2020 2020 2020 2020 2020 2069  e(.            i
+0004dc10: 6e73 6964 655f 7072 6f6a 6563 742c 0a20  nside_project,. 
+0004dc20: 2020 2020 2020 2020 2020 2062 7269 636b             brick
+0004dc30: 5f69 642c 0a20 2020 2020 2020 2020 2020  _id,.           
+0004dc40: 2022 222c 0a20 2020 2020 2020 2020 2020   "",.           
+0004dc50: 2022 7265 6e61 6d65 5f31 222c 0a20 2020   "rename_1",.   
+0004dc60: 2020 2020 2020 2020 2070 6c75 675f 6e61           plug_na
+0004dc70: 6d65 2c0a 2020 2020 2020 2020 2020 2020  me,.            
+0004dc80: 2272 656e 616d 655f 3122 2c0a 2020 2020  "rename_1",.    
+0004dc90: 2020 2020 2020 2020 6a6f 622c 0a20 2020          job,.   
+0004dca0: 2020 2020 2020 2020 2074 7261 6974 2c0a           trait,.
+0004dcb0: 2020 2020 2020 2020 2020 2020 696e 7075              inpu
+0004dcc0: 7473 2c0a 2020 2020 2020 2020 2020 2020  ts,.            
+0004dcd0: 6174 7472 6962 7574 6573 2c0a 2020 2020  attributes,.    
+0004dce0: 2020 2020 290a 0a20 2020 2020 2020 2023      )..        #
+0004dcf0: 2027 7061 7265 6e74 5f66 696c 6573 2720   'parent_files' 
+0004dd00: 696e 7369 6465 2027 696e 6865 7269 7461  inside 'inherita
+0004dd10: 6e63 655f 6469 6374 272c 206f 7574 7075  nce_dict', outpu
+0004dd20: 7420 6973 206f 6e65 206f 6620 7468 6520  t is one of the 
+0004dd30: 696e 7075 7473 0a20 2020 2020 2020 206a  inputs.        j
+0004dd40: 6f62 2e69 6e68 6572 6974 616e 6365 5f64  ob.inheritance_d
+0004dd50: 6963 7420 3d20 7b0a 2020 2020 2020 2020  ict = {.        
+0004dd60: 2020 2020 696e 7369 6465 5f70 726f 6a65      inside_proje
+0004dd70: 6374 3a20 7b0a 2020 2020 2020 2020 2020  ct: {.          
+0004dd80: 2020 2020 2020 226f 776e 5f74 6167 7322        "own_tags"
+0004dd90: 3a20 5b0a 2020 2020 2020 2020 2020 2020  : [.            
+0004dda0: 2020 2020 2020 2020 7b0a 2020 2020 2020          {.      
+0004ddb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004ddc0: 2020 226e 616d 6522 3a20 2274 6167 5f6e    "name": "tag_n
+0004ddd0: 616d 6522 2c0a 2020 2020 2020 2020 2020  ame",.          
+0004dde0: 2020 2020 2020 2020 2020 2020 2020 2266                "f
+0004ddf0: 6965 6c64 5f74 7970 6522 3a20 2273 7472  ield_type": "str
+0004de00: 696e 6722 2c0a 2020 2020 2020 2020 2020  ing",.          
+0004de10: 2020 2020 2020 2020 2020 2020 2020 2264                "d
+0004de20: 6573 6372 6970 7469 6f6e 223a 2022 6465  escription": "de
+0004de30: 7363 7269 7074 696f 6e5f 636f 6e74 656e  scription_conten
+0004de40: 7422 2c0a 2020 2020 2020 2020 2020 2020  t",.            
+0004de50: 2020 2020 2020 2020 2020 2020 2276 6973              "vis
+0004de60: 6962 696c 6974 7922 3a20 2276 6973 6962  ibility": "visib
+0004de70: 696c 6974 795f 636f 6e74 656e 7422 2c0a  ility_content",.
+0004de80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004de90: 2020 2020 2020 2020 226f 7269 6769 6e22          "origin"
+0004dea0: 3a20 226f 7269 6769 6e5f 636f 6e74 656e  : "origin_conten
+0004deb0: 7422 2c0a 2020 2020 2020 2020 2020 2020  t",.            
+0004dec0: 2020 2020 2020 2020 2020 2020 2275 6e69              "uni
+0004ded0: 7422 3a20 2275 6e69 745f 636f 6e74 656e  t": "unit_conten
+0004dee0: 7422 2c0a 2020 2020 2020 2020 2020 2020  t",.            
+0004def0: 2020 2020 2020 2020 2020 2020 2276 616c              "val
+0004df00: 7565 223a 2022 7661 6c75 655f 636f 6e74  ue": "value_cont
+0004df10: 656e 7422 2c0a 2020 2020 2020 2020 2020  ent",.          
+0004df20: 2020 2020 2020 2020 2020 2020 2020 2264                "d
+0004df30: 6566 6175 6c74 5f76 616c 7565 223a 2022  efault_value": "
+0004df40: 6465 6661 756c 745f 7661 6c75 655f 636f  default_value_co
+0004df50: 6e74 656e 7422 2c0a 2020 2020 2020 2020  ntent",.        
+0004df60: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+0004df70: 2020 2020 2020 2020 2020 2020 2020 5d2c                ],
+0004df80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0004df90: 2022 7061 7265 6e74 223a 2022 7061 7265   "parent": "pare
+0004dfa0: 6e74 5f63 6f6e 7465 6e74 222c 0a20 2020  nt_content",.   
+0004dfb0: 2020 2020 2020 2020 2020 2020 2022 6f75               "ou
+0004dfc0: 7470 7574 223a 2069 6e73 6964 655f 7072  tput": inside_pr
+0004dfd0: 6f6a 6563 742c 0a20 2020 2020 2020 2020  oject,.         
+0004dfe0: 2020 207d 0a20 2020 2020 2020 207d 0a0a     }.        }..
+0004dff0: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
+0004e000: 5f6d 616e 6167 6572 2e61 6464 5f70 6c75  _manager.add_plu
+0004e010: 675f 7661 6c75 655f 746f 5f64 6174 6162  g_value_to_datab
+0004e020: 6173 6528 0a20 2020 2020 2020 2020 2020  ase(.           
+0004e030: 2069 6e73 6964 655f 7072 6f6a 6563 742c   inside_project,
+0004e040: 0a20 2020 2020 2020 2020 2020 2062 7269  .            bri
+0004e050: 636b 5f69 642c 0a20 2020 2020 2020 2020  ck_id,.         
+0004e060: 2020 2022 222c 0a20 2020 2020 2020 2020     "",.         
+0004e070: 2020 2022 7265 6e61 6d65 5f31 222c 0a20     "rename_1",. 
+0004e080: 2020 2020 2020 2020 2020 2070 6c75 675f             plug_
+0004e090: 6e61 6d65 2c0a 2020 2020 2020 2020 2020  name,.          
+0004e0a0: 2020 2272 656e 616d 655f 3122 2c0a 2020    "rename_1",.  
+0004e0b0: 2020 2020 2020 2020 2020 6a6f 622c 0a20            job,. 
+0004e0c0: 2020 2020 2020 2020 2020 2074 7261 6974             trait
+0004e0d0: 2c0a 2020 2020 2020 2020 2020 2020 696e  ,.            in
+0004e0e0: 7075 7473 2c0a 2020 2020 2020 2020 2020  puts,.          
+0004e0f0: 2020 6174 7472 6962 7574 6573 2c0a 2020    attributes,.  
+0004e100: 2020 2020 2020 290a 0a20 2020 2064 6566        )..    def
+0004e110: 2074 6573 745f 6164 645f 706c 7567 5f76   test_add_plug_v
+0004e120: 616c 7565 5f74 6f5f 6461 7461 6261 7365  alue_to_database
+0004e130: 5f73 6576 6572 616c 5f69 6e70 7574 7328  _several_inputs(
+0004e140: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
+0004e150: 2222 4372 6561 7465 7320 6120 6e65 7720  ""Creates a new 
+0004e160: 7072 6f6a 6563 7420 666f 6c64 6572 2c20  project folder, 
+0004e170: 6164 6473 2061 2027 5265 6e61 6d65 2720  adds a 'Rename' 
+0004e180: 7072 6f63 6573 732c 2065 7870 6f72 7473  process, exports
+0004e190: 2061 0a20 2020 2020 2020 206e 6f6e 206c   a.        non l
+0004e1a0: 6973 7420 7479 7065 2069 6e70 7574 2070  ist type input p
+0004e1b0: 6c75 6720 616e 6420 7769 7468 2073 6576  lug and with sev
+0004e1c0: 6572 616c 2070 6f73 7369 626c 6520 696e  eral possible in
+0004e1d0: 7075 7473 2e0a 0a20 2020 2020 2020 2049  puts...        I
+0004e1e0: 6e64 6570 656e 6465 6e74 6c79 206f 7065  ndependently ope
+0004e1f0: 6e73 2061 6e20 696e 6865 7269 7461 6e63  ns an inheritanc
+0004e200: 6520 6469 6374 2070 6f70 2d75 702e 0a0a  e dict pop-up...
+0004e210: 2020 2020 2020 2020 5468 6520 7465 7374          The test
+0004e220: 2063 6173 6573 2061 7265 2064 6976 6964   cases are divid
+0004e230: 6564 2069 6e74 6f3a 0a20 2020 2020 2020  ed into:.       
+0004e240: 202d 2031 2920 2770 6172 656e 745f 6669   - 1) 'parent_fi
+0004e250: 6c65 7327 2069 7320 6120 6469 6374 2077  les' is a dict w
+0004e260: 6974 6820 3220 6b65 7973 2061 6e64 2069  ith 2 keys and i
+0004e270: 6465 6e74 6963 616c 2076 616c 7565 730a  dentical values.
+0004e280: 2020 2020 2020 2020 2d20 3229 2027 7061          - 2) 'pa
+0004e290: 7265 6e74 5f66 696c 6573 2720 6973 2061  rent_files' is a
+0004e2a0: 2064 6963 7420 7769 7468 2032 206b 6579   dict with 2 key
+0004e2b0: 7320 616e 6420 6469 7374 696e 6374 2076  s and distinct v
+0004e2c0: 616c 7565 730a 2020 2020 2020 2020 2d20  alues.        - 
+0004e2d0: 3329 2027 6d6f 636b 5f6b 6579 5f32 2720  3) 'mock_key_2' 
+0004e2e0: 6973 2069 6e20 2770 706c 5f6d 616e 6167  is in 'ppl_manag
+0004e2f0: 6572 2e6b 6579 2720 696e 6465 7865 6420  er.key' indexed 
+0004e300: 6279 2074 6865 206e 6f64 6520 6e61 6d65  by the node name
+0004e310: 0a20 2020 2020 2020 202d 2034 2920 276d  .        - 4) 'm
+0004e320: 6f63 6b5f 6b65 795f 3227 2069 7320 696e  ock_key_2' is in
+0004e330: 2027 7070 6c5f 6d61 6e61 6765 722e 6b65   'ppl_manager.ke
+0004e340: 7927 2069 6e64 6578 6564 2062 7920 7468  y' indexed by th
+0004e350: 6520 6e6f 6465 206e 616d 6520 2b0a 2020  e node name +.  
+0004e360: 2020 2020 2020 2020 2020 2070 6c75 6720             plug 
+0004e370: 7661 6c75 650a 0a20 2020 2020 2020 202d  value..        -
+0004e380: 2054 6573 7473 3a0a 2020 2020 2020 2020   Tests:.        
+0004e390: 2020 2020 2d20 5069 7065 6c69 6e65 4d61      - PipelineMa
+0004e3a0: 6e61 6765 7254 6162 2e61 6464 5f70 6c75  nagerTab.add_plu
+0004e3b0: 675f 7661 6c75 655f 746f 5f64 6174 6162  g_value_to_datab
+0004e3c0: 6173 650a 2020 2020 2020 2020 2020 2020  ase.            
+0004e3d0: 2d20 506f 7055 7049 6e68 6572 6974 616e  - PopUpInheritan
+0004e3e0: 6365 4469 6374 2e0a 0a20 2020 2020 2020  ceDict...       
+0004e3f0: 202d 204d 6f63 6b73 3a0a 2020 2020 2020   - Mocks:.      
+0004e400: 2020 2020 2020 2d20 506f 7055 7049 6e68        - PopUpInh
+0004e410: 6572 6974 616e 6365 4469 6374 2e65 7865  eritanceDict.exe
+0004e420: 630a 2020 2020 2020 2020 2222 220a 0a20  c.        """.. 
+0004e430: 2020 2020 2020 2064 6566 206d 6f63 6b5f         def mock_
+0004e440: 6765 745f 646f 6375 6d65 6e74 2863 6f6c  get_document(col
+0004e450: 6c65 6374 696f 6e2c 2072 656c 6669 6c65  lection, relfile
+0004e460: 293a 0a20 2020 2020 2020 2020 2020 2022  ):.            "
+0004e470: 2222 426c 6162 6c61 2222 220a 0a20 2020  ""Blabla"""..   
+0004e480: 2020 2020 2020 2020 2053 4341 4e5f 315f           SCAN_1_
+0004e490: 203d 2053 4341 4e5f 310a 0a20 2020 2020   = SCAN_1..     
+0004e4a0: 2020 2020 2020 2069 6620 7265 6c66 696c         if relfil
+0004e4b0: 6520 3d3d 2022 6d6f 636b 5f76 616c 5f31  e == "mock_val_1
+0004e4c0: 223a 0a20 2020 2020 2020 2020 2020 2020  ":.             
+0004e4d0: 2020 2053 4341 4e5f 315f 2e5f 7661 6c75     SCAN_1_._valu
+0004e4e0: 6573 5b33 5d20 3d20 2245 7870 2054 7970  es[3] = "Exp Typ
+0004e4f0: 6520 3122 0a20 2020 2020 2020 2020 2020  e 1".           
+0004e500: 2020 2020 2072 6574 7572 6e20 5343 414e       return SCAN
+0004e510: 5f31 5f0a 2020 2020 2020 2020 2020 2020  _1_.            
+0004e520: 656c 6966 2072 656c 6669 6c65 203d 3d20  elif relfile == 
+0004e530: 226d 6f63 6b5f 7661 6c5f 3222 3a0a 2020  "mock_val_2":.  
+0004e540: 2020 2020 2020 2020 2020 2020 2020 5343                SC
+0004e550: 414e 5f31 5f2e 5f76 616c 7565 735b 335d  AN_1_._values[3]
+0004e560: 203d 2022 4578 7020 5479 7065 2032 220a   = "Exp Type 2".
+0004e570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0004e580: 7265 7475 726e 2053 4341 4e5f 315f 0a0a  return SCAN_1_..
+0004e590: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0004e5a0: 726e 204e 6f6e 650a 0a20 2020 2020 2020  rn None..       
+0004e5b0: 2023 2054 686f 7365 206d 6574 686f 6473   # Those methods
+0004e5c0: 2061 7265 2063 616c 6c65 6420 7072 696f   are called prio
+0004e5d0: 7220 746f 2061 6464 696e 6720 6120 706c  r to adding a pl
+0004e5e0: 7567 2074 6f20 7468 6520 6461 7461 6261  ug to the databa
+0004e5f0: 7365 0a20 2020 2020 2020 2064 6566 2072  se.        def r
+0004e600: 6573 6574 5f69 6e68 6572 6974 616e 6365  eset_inheritance
+0004e610: 5f64 6963 7473 2829 3a0a 2020 2020 2020  _dicts():.      
+0004e620: 2020 2020 2020 2222 2242 6c61 626c 6122        """Blabla"
+0004e630: 2222 0a0a 2020 2020 2020 2020 2020 2020  ""..            
+0004e640: 6a6f 622e 696e 6865 7269 7461 6e63 655f  job.inheritance_
+0004e650: 6469 6374 203d 207b 444f 4355 4d45 4e54  dict = {DOCUMENT
+0004e660: 5f31 3a20 4e6f 6e65 7d0a 2020 2020 2020  _1: None}.      
+0004e670: 2020 2020 2020 6a6f 622e 6175 746f 5f69        job.auto_i
+0004e680: 6e68 6572 6974 616e 6365 5f64 6963 7420  nheritance_dict 
+0004e690: 3d20 7b44 4f43 554d 454e 545f 313a 2070  = {DOCUMENT_1: p
+0004e6a0: 6172 656e 745f 6669 6c65 737d 0a0a 2020  arent_files}..  
+0004e6b0: 2020 2020 2020 6465 6620 7265 7365 745f        def reset_
+0004e6c0: 636f 6c6c 6563 7469 6f6e 7328 293a 0a20  collections():. 
+0004e6d0: 2020 2020 2020 2020 2020 2022 2222 426c             """Bl
+0004e6e0: 6162 6c61 2222 220a 0a20 2020 2020 2020  abla"""..       
+0004e6f0: 2020 2020 2069 6620 7365 7373 696f 6e2e       if session.
+0004e700: 6861 735f 646f 6375 6d65 6e74 2843 4f4c  has_document(COL
+0004e710: 4c45 4354 494f 4e5f 4355 5252 454e 542c  LECTION_CURRENT,
+0004e720: 2050 5f56 414c 5545 293a 0a20 2020 2020   P_VALUE):.     
+0004e730: 2020 2020 2020 2020 2020 2073 6573 7369             sessi
+0004e740: 6f6e 2e72 656d 6f76 655f 646f 6375 6d65  on.remove_docume
+0004e750: 6e74 2843 4f4c 4c45 4354 494f 4e5f 4355  nt(COLLECTION_CU
+0004e760: 5252 454e 542c 2050 5f56 414c 5545 290a  RRENT, P_VALUE).
+0004e770: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0004e780: 6573 7369 6f6e 2e68 6173 5f64 6f63 756d  ession.has_docum
+0004e790: 656e 7428 434f 4c4c 4543 5449 4f4e 5f43  ent(COLLECTION_C
+0004e7a0: 5552 5245 4e54 2c20 444f 4355 4d45 4e54  URRENT, DOCUMENT
+0004e7b0: 5f31 293a 0a20 2020 2020 2020 2020 2020  _1):.           
+0004e7c0: 2020 2020 2073 6573 7369 6f6e 2e72 656d       session.rem
+0004e7d0: 6f76 655f 646f 6375 6d65 6e74 2843 4f4c  ove_document(COL
+0004e7e0: 4c45 4354 494f 4e5f 4355 5252 454e 542c  LECTION_CURRENT,
+0004e7f0: 2044 4f43 554d 454e 545f 3129 0a20 2020   DOCUMENT_1).   
+0004e800: 2020 2020 2020 2020 2069 6620 7365 7373           if sess
+0004e810: 696f 6e2e 6861 735f 646f 6375 6d65 6e74  ion.has_document
+0004e820: 2843 4f4c 4c45 4354 494f 4e5f 494e 4954  (COLLECTION_INIT
+0004e830: 4941 4c2c 2050 5f56 414c 5545 293a 0a20  IAL, P_VALUE):. 
+0004e840: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0004e850: 6573 7369 6f6e 2e72 656d 6f76 655f 646f  ession.remove_do
+0004e860: 6375 6d65 6e74 2843 4f4c 4c45 4354 494f  cument(COLLECTIO
+0004e870: 4e5f 494e 4954 4941 4c2c 2050 5f56 414c  N_INITIAL, P_VAL
+0004e880: 5545 290a 2020 2020 2020 2020 2020 2020  UE).            
+0004e890: 6966 2073 6573 7369 6f6e 2e68 6173 5f64  if session.has_d
+0004e8a0: 6f63 756d 656e 7428 434f 4c4c 4543 5449  ocument(COLLECTI
+0004e8b0: 4f4e 5f49 4e49 5449 414c 2c20 444f 4355  ON_INITIAL, DOCU
+0004e8c0: 4d45 4e54 5f31 293a 0a20 2020 2020 2020  MENT_1):.       
+0004e8d0: 2020 2020 2020 2020 2073 6573 7369 6f6e           session
+0004e8e0: 2e72 656d 6f76 655f 646f 6375 6d65 6e74  .remove_document
+0004e8f0: 2843 4f4c 4c45 4354 494f 4e5f 494e 4954  (COLLECTION_INIT
+0004e900: 4941 4c2c 2044 4f43 554d 454e 545f 3129  IAL, DOCUMENT_1)
+0004e910: 0a0a 2020 2020 2020 2020 2320 5365 7473  ..        # Sets
+0004e920: 2073 686f 7274 6375 7473 2066 6f72 206f   shortcuts for o
+0004e930: 6674 656e 2075 7365 6420 6f62 6a65 6374  ften used object
+0004e940: 730a 2020 2020 2020 2020 7070 6c5f 6d61  s.        ppl_ma
+0004e950: 6e61 6765 7220 3d20 7365 6c66 2e6d 6169  nager = self.mai
+0004e960: 6e5f 7769 6e64 6f77 2e70 6970 656c 696e  n_window.pipelin
+0004e970: 655f 6d61 6e61 6765 720a 2020 2020 2020  e_manager.      
+0004e980: 2020 7365 7373 696f 6e20 3d20 7070 6c5f    session = ppl_
+0004e990: 6d61 6e61 6765 722e 7072 6f6a 6563 742e  manager.project.
+0004e9a0: 7365 7373 696f 6e0a 2020 2020 2020 2020  session.        
+0004e9b0: 7070 6c5f 6564 745f 7461 6273 203d 2070  ppl_edt_tabs = p
+0004e9c0: 706c 5f6d 616e 6167 6572 2e70 6970 656c  pl_manager.pipel
+0004e9d0: 696e 6545 6469 746f 7254 6162 730a 2020  ineEditorTabs.  
+0004e9e0: 2020 2020 2020 7070 6c5f 6564 745f 7461        ppl_edt_ta
+0004e9f0: 6220 3d20 7070 6c5f 6564 745f 7461 6273  b = ppl_edt_tabs
+0004ea00: 2e67 6574 5f63 7572 7265 6e74 5f65 6469  .get_current_edi
+0004ea10: 746f 7228 290a 0a20 2020 2020 2020 2023  tor()..        #
+0004ea20: 2043 7265 6174 6573 2061 206e 6577 2070   Creates a new p
+0004ea30: 726f 6a65 6374 2066 6f6c 6465 7220 616e  roject folder an
+0004ea40: 6420 6164 6473 206f 6e65 2064 6f63 756d  d adds one docum
+0004ea50: 656e 7420 746f 2074 6865 0a20 2020 2020  ent to the.     
+0004ea60: 2020 2023 2070 726f 6a65 6374 2c20 7365     # project, se
+0004ea70: 7473 2074 6865 2070 6c75 6720 7661 6c75  ts the plug valu
+0004ea80: 6520 7468 6174 2069 7320 6164 6465 6420  e that is added 
+0004ea90: 746f 2074 6865 2064 6174 6162 6173 650a  to the database.
+0004eaa0: 2020 2020 2020 2020 7072 6f6a 6563 745f          project_
+0004eab0: 385f 7061 7468 203d 2073 656c 662e 6765  8_path = self.ge
+0004eac0: 745f 6e65 775f 7465 7374 5f70 726f 6a65  t_new_test_proje
+0004ead0: 6374 2829 0a20 2020 2020 2020 2070 706c  ct().        ppl
+0004eae0: 5f6d 616e 6167 6572 2e70 726f 6a65 6374  _manager.project
+0004eaf0: 2e66 6f6c 6465 7220 3d20 7072 6f6a 6563  .folder = projec
+0004eb00: 745f 385f 7061 7468 0a20 2020 2020 2020  t_8_path.       
+0004eb10: 2066 6f6c 6465 7220 3d20 6f73 2e70 6174   folder = os.pat
+0004eb20: 682e 6a6f 696e 2870 726f 6a65 6374 5f38  h.join(project_8
+0004eb30: 5f70 6174 682c 2022 6461 7461 222c 2022  _path, "data", "
+0004eb40: 7261 775f 6461 7461 2229 0a20 2020 2020  raw_data").     
+0004eb50: 2020 204e 4949 5f46 494c 455f 3120 3d20     NII_FILE_1 = 
+0004eb60: 280a 2020 2020 2020 2020 2020 2020 2247  (.            "G
+0004eb70: 7565 7262 6574 2d43 362d 3230 3134 2d52  uerbet-C6-2014-R
+0004eb80: 6174 2d4b 3532 2d54 7562 6532 372d 3230  at-K52-Tube27-20
+0004eb90: 3134 2d30 322d 3134 3130 3233 3137 2d30  14-02-14102317-0
+0004eba0: 342d 4733 5f22 0a20 2020 2020 2020 2020  4-G3_".         
+0004ebb0: 2020 2022 4775 6572 6265 745f 4d44 4546     "Guerbet_MDEF
+0004ebc0: 542d 4d44 4546 5470 766d 2d30 3030 3934  T-MDEFTpvm-00094
+0004ebd0: 305f 3830 302e 6e69 6922 0a20 2020 2020  0_800.nii".     
+0004ebe0: 2020 2029 0a20 2020 2020 2020 2044 4f43     ).        DOC
+0004ebf0: 554d 454e 545f 3120 3d20 6f73 2e70 6174  UMENT_1 = os.pat
+0004ec00: 682e 6162 7370 6174 6828 6f73 2e70 6174  h.abspath(os.pat
+0004ec10: 682e 6a6f 696e 2866 6f6c 6465 722c 204e  h.join(folder, N
+0004ec20: 4949 5f46 494c 455f 3129 290a 2020 2020  II_FILE_1)).    
+0004ec30: 2020 2020 505f 5641 4c55 4520 3d20 444f      P_VALUE = DO
+0004ec40: 4355 4d45 4e54 5f31 2e72 6570 6c61 6365  CUMENT_1.replace
+0004ec50: 286f 732e 7061 7468 2e61 6273 7061 7468  (os.path.abspath
+0004ec60: 2870 726f 6a65 6374 5f38 5f70 6174 6829  (project_8_path)
+0004ec70: 2c20 2222 295b 313a 5d0a 0a20 2020 2020  , "")[1:]..     
+0004ec80: 2020 2073 6573 7369 6f6e 2e61 6464 5f64     session.add_d
+0004ec90: 6f63 756d 656e 7428 434f 4c4c 4543 5449  ocument(COLLECTI
+0004eca0: 4f4e 5f43 5552 5245 4e54 2c20 444f 4355  ON_CURRENT, DOCU
+0004ecb0: 4d45 4e54 5f31 290a 0a20 2020 2020 2020  MENT_1)..       
+0004ecc0: 2023 2041 6464 7320 7468 6520 7072 6f63   # Adds the proc
+0004ecd0: 6573 7365 7320 5265 6e61 6d65 2c20 6372  esses Rename, cr
+0004ece0: 6561 7465 7320 7468 6520 2272 656e 616d  eates the "renam
+0004ecf0: 655f 3122 206e 6f64 650a 2020 2020 2020  e_1" node.      
+0004ed00: 2020 7070 6c5f 6564 745f 7461 622e 636c    ppl_edt_tab.cl
+0004ed10: 6963 6b5f 706f 7320 3d20 5150 6f69 6e74  ick_pos = QPoint
+0004ed20: 2834 3530 2c20 3530 3029 0a20 2020 2020  (450, 500).     
+0004ed30: 2020 2070 706c 5f65 6474 5f74 6162 2e61     ppl_edt_tab.a
+0004ed40: 6464 5f6e 616d 6564 5f70 726f 6365 7373  dd_named_process
+0004ed50: 2852 656e 616d 6529 0a20 2020 2020 2020  (Rename).       
+0004ed60: 2070 6970 656c 696e 6520 3d20 7070 6c5f   pipeline = ppl_
+0004ed70: 6564 745f 7461 6273 2e67 6574 5f63 7572  edt_tabs.get_cur
+0004ed80: 7265 6e74 5f70 6970 656c 696e 6528 290a  rent_pipeline().
+0004ed90: 0a20 2020 2020 2020 2023 2045 7870 6f72  .        # Expor
+0004eda0: 7473 2074 6865 206d 616e 6461 746f 7279  ts the mandatory
+0004edb0: 2069 6e70 7574 2061 6e64 206f 7574 7075   input and outpu
+0004edc0: 7420 706c 7567 7320 666f 7220 2272 656e  t plugs for "ren
+0004edd0: 616d 655f 3122 0a20 2020 2020 2020 2070  ame_1".        p
+0004ede0: 706c 5f65 6474 5f74 6162 2e63 7572 7265  pl_edt_tab.curre
+0004edf0: 6e74 5f6e 6f64 655f 6e61 6d65 203d 2022  nt_node_name = "
+0004ee00: 7265 6e61 6d65 5f31 220a 2020 2020 2020  rename_1".      
+0004ee10: 2020 7070 6c5f 6564 745f 7461 622e 6578    ppl_edt_tab.ex
+0004ee20: 706f 7274 5f75 6e63 6f6e 6e65 6374 6564  port_unconnected
+0004ee30: 5f6d 616e 6461 746f 7279 5f69 6e70 7574  _mandatory_input
+0004ee40: 7328 290a 2020 2020 2020 2020 7070 6c5f  s().        ppl_
+0004ee50: 6564 745f 7461 622e 6578 706f 7274 5f61  edt_tab.export_a
+0004ee60: 6c6c 5f75 6e63 6f6e 6e65 6374 6564 5f6f  ll_unconnected_o
+0004ee70: 7574 7075 7473 2829 0a0a 2020 2020 2020  utputs()..      
+0004ee80: 2020 6f6c 645f 7363 616e 5f6e 616d 6520    old_scan_name 
+0004ee90: 3d20 444f 4355 4d45 4e54 5f31 2e73 706c  = DOCUMENT_1.spl
+0004eea0: 6974 2822 2f22 295b 2d31 5d0a 2020 2020  it("/")[-1].    
+0004eeb0: 2020 2020 6e65 775f 7363 616e 5f6e 616d      new_scan_nam
+0004eec0: 6520 3d20 226e 6577 5f6e 616d 652e 6e69  e = "new_name.ni
+0004eed0: 6922 0a0a 2020 2020 2020 2020 2320 4368  i"..        # Ch
+0004eee0: 616e 6765 7320 7468 6520 225f 6f75 745f  anges the "_out_
+0004eef0: 6669 6c65 2220 696e 2074 6865 2022 6f75  file" in the "ou
+0004ef00: 7470 7574 7322 206e 6f64 650a 2020 2020  tputs" node.    
+0004ef10: 2020 2020 7069 7065 6c69 6e65 2e6e 6f64      pipeline.nod
+0004ef20: 6573 5b22 225d 2e73 6574 5f70 6c75 675f  es[""].set_plug_
+0004ef30: 7661 6c75 6528 0a20 2020 2020 2020 2020  value(.         
+0004ef40: 2020 2022 5f6f 7574 5f66 696c 6522 2c20     "_out_file", 
+0004ef50: 444f 4355 4d45 4e54 5f31 2e72 6570 6c61  DOCUMENT_1.repla
+0004ef60: 6365 286f 6c64 5f73 6361 6e5f 6e61 6d65  ce(old_scan_name
+0004ef70: 2c20 6e65 775f 7363 616e 5f6e 616d 6529  , new_scan_name)
+0004ef80: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+0004ef90: 2020 2020 7070 6c5f 6d61 6e61 6765 722e      ppl_manager.
+0004efa0: 776f 726b 666c 6f77 203d 2077 6f72 6b66  workflow = workf
+0004efb0: 6c6f 775f 6672 6f6d 5f70 6970 656c 696e  low_from_pipelin
+0004efc0: 6528 0a20 2020 2020 2020 2020 2020 2070  e(.            p
+0004efd0: 6970 656c 696e 652c 2063 6f6d 706c 6574  ipeline, complet
+0004efe0: 655f 7061 7261 6d65 7465 7273 3d54 7275  e_parameters=Tru
+0004eff0: 650a 2020 2020 2020 2020 290a 0a20 2020  e.        )..   
+0004f000: 2020 2020 206a 6f62 203d 2070 706c 5f6d       job = ppl_m
+0004f010: 616e 6167 6572 2e77 6f72 6b66 6c6f 772e  anager.workflow.
+0004f020: 6a6f 6273 5b30 5d0a 0a20 2020 2020 2020  jobs[0]..       
+0004f030: 2062 7269 636b 5f69 6420 3d20 7374 7228   brick_id = str(
+0004f040: 7575 6964 2e75 7569 6434 2829 290a 2020  uuid.uuid4()).  
+0004f050: 2020 2020 2020 6a6f 622e 7575 6964 203d        job.uuid =
+0004f060: 2062 7269 636b 5f69 640a 2020 2020 2020   brick_id.      
+0004f070: 2020 7070 6c5f 6d61 6e61 6765 722e 6272    ppl_manager.br
+0004f080: 6963 6b5f 6c69 7374 2e61 7070 656e 6428  ick_list.append(
+0004f090: 6272 6963 6b5f 6964 290a 0a20 2020 2020  brick_id)..     
+0004f0a0: 2020 2070 706c 5f6d 616e 6167 6572 2e70     ppl_manager.p
+0004f0b0: 726f 6a65 6374 2e73 6573 7369 6f6e 2e61  roject.session.a
+0004f0c0: 6464 5f64 6f63 756d 656e 7428 434f 4c4c  dd_document(COLL
+0004f0d0: 4543 5449 4f4e 5f42 5249 434b 2c20 6272  ECTION_BRICK, br
+0004f0e0: 6963 6b5f 6964 290a 0a20 2020 2020 2020  ick_id)..       
+0004f0f0: 2023 2053 6574 7320 7468 6520 6d61 6e64   # Sets the mand
+0004f100: 6174 6f72 7920 706c 7567 2076 616c 7565  atory plug value
+0004f110: 7320 696e 2074 6865 2022 696e 7075 7473  s in the "inputs
+0004f120: 2220 6e6f 6465 0a20 2020 2020 2020 2070  " node.        p
+0004f130: 6970 656c 696e 652e 6e6f 6465 735b 2222  ipeline.nodes[""
+0004f140: 5d2e 7365 745f 706c 7567 5f76 616c 7565  ].set_plug_value
+0004f150: 2822 696e 5f66 696c 6522 2c20 444f 4355  ("in_file", DOCU
+0004f160: 4d45 4e54 5f31 290a 2020 2020 2020 2020  MENT_1).        
+0004f170: 7069 7065 6c69 6e65 2e6e 6f64 6573 5b22  pipeline.nodes["
+0004f180: 225d 2e73 6574 5f70 6c75 675f 7661 6c75  "].set_plug_valu
+0004f190: 6528 2266 6f72 6d61 745f 7374 7269 6e67  e("format_string
+0004f1a0: 222c 206e 6577 5f73 6361 6e5f 6e61 6d65  ", new_scan_name
+0004f1b0: 290a 0a20 2020 2020 2020 2070 726f 6365  )..        proce
+0004f1c0: 7373 203d 206a 6f62 2e70 726f 6365 7373  ss = job.process
+0004f1d0: 2829 0a20 2020 2020 2020 2070 6c75 675f  ().        plug_
+0004f1e0: 6e61 6d65 203d 2022 696e 5f66 696c 6522  name = "in_file"
+0004f1f0: 0a20 2020 2020 2020 2074 7261 6974 203d  .        trait =
+0004f200: 2070 726f 6365 7373 2e74 7261 6974 2870   process.trait(p
+0004f210: 6c75 675f 6e61 6d65 290a 0a20 2020 2020  lug_name)..     
+0004f220: 2020 2069 6e70 7574 7320 3d20 7072 6f63     inputs = proc
+0004f230: 6573 732e 6765 745f 696e 7075 7473 2829  ess.get_inputs()
+0004f240: 0a0a 2020 2020 2020 2020 6174 7472 6962  ..        attrib
+0004f250: 7574 6573 203d 207b 7d0a 2020 2020 2020  utes = {}.      
+0004f260: 2020 636f 6d70 6c65 7469 6f6e 203d 2050    completion = P
+0004f270: 726f 6365 7373 436f 6d70 6c65 7469 6f6e  rocessCompletion
+0004f280: 456e 6769 6e65 2e67 6574 5f63 6f6d 706c  Engine.get_compl
+0004f290: 6574 696f 6e5f 656e 6769 6e65 2870 726f  etion_engine(pro
+0004f2a0: 6365 7373 290a 0a20 2020 2020 2020 2069  cess)..        i
+0004f2b0: 6620 636f 6d70 6c65 7469 6f6e 3a0a 2020  f completion:.  
+0004f2c0: 2020 2020 2020 2020 2020 6174 7472 6962            attrib
+0004f2d0: 7574 6573 203d 2063 6f6d 706c 6574 696f  utes = completio
+0004f2e0: 6e2e 6765 745f 6174 7472 6962 7574 655f  n.get_attribute_
+0004f2f0: 7661 6c75 6573 2829 2e65 7870 6f72 745f  values().export_
+0004f300: 746f 5f64 6963 7428 290a 0a20 2020 2020  to_dict()..     
+0004f310: 2020 2023 204d 6f63 6b73 2074 6865 2064     # Mocks the d
+0004f320: 6f63 756d 656e 7420 6765 7474 6572 2074  ocument getter t
+0004f330: 6f20 616c 7761 7973 2072 6574 7572 6e20  o always return 
+0004f340: 6120 7363 616e 0a20 2020 2020 2020 2053  a scan.        S
+0004f350: 4341 4e5f 3120 3d20 7365 7373 696f 6e2e  CAN_1 = session.
+0004f360: 6765 745f 646f 6375 6d65 6e74 2843 4f4c  get_document(COL
+0004f370: 4c45 4354 494f 4e5f 4355 5252 454e 542c  LECTION_CURRENT,
+0004f380: 2044 4f43 554d 454e 545f 3129 0a20 2020   DOCUMENT_1).   
+0004f390: 2020 2020 2073 6573 7369 6f6e 2e67 6574       session.get
+0004f3a0: 5f64 6f63 756d 656e 7420 3d20 6d6f 636b  _document = mock
+0004f3b0: 5f67 6574 5f64 6f63 756d 656e 740a 0a20  _get_document.. 
+0004f3c0: 2020 2020 2020 2023 204d 6f63 6b73 2074         # Mocks t
+0004f3d0: 6865 2076 616c 7565 2073 6574 7465 7220  he value setter 
+0004f3e0: 6f6e 2074 6865 2073 6573 7369 6f6e 0a20  on the session. 
+0004f3f0: 2020 2020 2020 2073 6573 7369 6f6e 2e73         session.s
+0004f400: 6574 5f76 616c 7565 7320 3d20 4d6f 636b  et_values = Mock
+0004f410: 2829 0a0a 2020 2020 2020 2020 2320 3129  ()..        # 1)
+0004f420: 2027 7061 7265 6e74 5f66 696c 6573 2720   'parent_files' 
+0004f430: 6973 2061 2064 6963 7420 7769 7468 2032  is a dict with 2
+0004f440: 206b 6579 7320 616e 6420 6964 656e 7469   keys and identi
+0004f450: 6361 6c20 7661 6c75 6573 0a20 2020 2020  cal values.     
+0004f460: 2020 2070 6172 656e 745f 6669 6c65 7320     parent_files 
+0004f470: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+0004f480: 226d 6f63 6b5f 6b65 795f 3122 3a20 6f73  "mock_key_1": os
+0004f490: 2e70 6174 682e 6a6f 696e 280a 2020 2020  .path.join(.    
+0004f4a0: 2020 2020 2020 2020 2020 2020 7070 6c5f              ppl_
+0004f4b0: 6d61 6e61 6765 722e 7072 6f6a 6563 742e  manager.project.
+0004f4c0: 666f 6c64 6572 2c20 226d 6f63 6b5f 7661  folder, "mock_va
+0004f4d0: 6c5f 3122 0a20 2020 2020 2020 2020 2020  l_1".           
+0004f4e0: 2029 2c0a 2020 2020 2020 2020 2020 2020   ),.            
+0004f4f0: 226d 6f63 6b5f 6b65 795f 3222 3a20 6f73  "mock_key_2": os
+0004f500: 2e70 6174 682e 6a6f 696e 280a 2020 2020  .path.join(.    
+0004f510: 2020 2020 2020 2020 2020 2020 7070 6c5f              ppl_
+0004f520: 6d61 6e61 6765 722e 7072 6f6a 6563 742e  manager.project.
+0004f530: 666f 6c64 6572 2c20 226d 6f63 6b5f 7661  folder, "mock_va
+0004f540: 6c5f 3122 0a20 2020 2020 2020 2020 2020  l_1".           
+0004f550: 2029 2c0a 2020 2020 2020 2020 7d0a 0a20   ),.        }.. 
+0004f560: 2020 2020 2020 2072 6573 6574 5f69 6e68         reset_inh
+0004f570: 6572 6974 616e 6365 5f64 6963 7473 2829  eritance_dicts()
+0004f580: 0a20 2020 2020 2020 2072 6573 6574 5f63  .        reset_c
+0004f590: 6f6c 6c65 6374 696f 6e73 2829 0a0a 2020  ollections()..  
+0004f5a0: 2020 2020 2020 6172 6773 203d 205b 0a20        args = [. 
+0004f5b0: 2020 2020 2020 2020 2020 2044 4f43 554d             DOCUM
+0004f5c0: 454e 545f 312c 0a20 2020 2020 2020 2020  ENT_1,.         
+0004f5d0: 2020 2062 7269 636b 5f69 642c 0a20 2020     brick_id,.   
+0004f5e0: 2020 2020 2020 2020 2022 222c 0a20 2020           "",.   
+0004f5f0: 2020 2020 2020 2020 2022 7265 6e61 6d65           "rename
+0004f600: 5f31 222c 0a20 2020 2020 2020 2020 2020  _1",.           
+0004f610: 2070 6c75 675f 6e61 6d65 2c0a 2020 2020   plug_name,.    
+0004f620: 2020 2020 2020 2020 2272 656e 616d 655f          "rename_
+0004f630: 3122 2c0a 2020 2020 2020 2020 2020 2020  1",.            
+0004f640: 6a6f 622c 0a20 2020 2020 2020 2020 2020  job,.           
+0004f650: 2074 7261 6974 2c0a 2020 2020 2020 2020   trait,.        
+0004f660: 2020 2020 696e 7075 7473 2c0a 2020 2020      inputs,.    
+0004f670: 2020 2020 2020 2020 6174 7472 6962 7574          attribut
+0004f680: 6573 2c0a 2020 2020 2020 2020 5d0a 2020  es,.        ].  
+0004f690: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
+0004f6a0: 722e 6164 645f 706c 7567 5f76 616c 7565  r.add_plug_value
+0004f6b0: 5f74 6f5f 6461 7461 6261 7365 282a 6172  _to_database(*ar
+0004f6c0: 6773 290a 0a20 2020 2020 2020 2023 204d  gs)..        # M
+0004f6d0: 6f63 6b73 2074 6865 2065 7865 6375 7469  ocks the executi
+0004f6e0: 6f6e 206f 6620 2750 6f70 5570 496e 6865  on of 'PopUpInhe
+0004f6f0: 7269 7461 6e63 6544 6963 7427 2074 6f20  ritanceDict' to 
+0004f700: 6176 6f69 640a 2020 2020 2020 2020 2320  avoid.        # 
+0004f710: 6173 796e 6368 726f 6e6f 7573 2073 686f  asynchronous sho
+0004f720: 740a 2020 2020 2020 2020 506f 7055 7049  t.        PopUpI
+0004f730: 6e68 6572 6974 616e 6365 4469 6374 2e65  nheritanceDict.e
+0004f740: 7865 6320 3d20 4d6f 636b 2829 0a0a 2020  xec = Mock()..  
+0004f750: 2020 2020 2020 2320 3229 2027 7061 7265        # 2) 'pare
+0004f760: 6e74 5f66 696c 6573 2720 6973 2061 2064  nt_files' is a d
+0004f770: 6963 7420 7769 7468 2032 206b 6579 7320  ict with 2 keys 
+0004f780: 616e 6420 6469 7374 696e 6374 2076 616c  and distinct val
+0004f790: 7565 730a 2020 2020 2020 2020 2320 5472  ues.        # Tr
+0004f7a0: 6967 6765 7273 2074 6865 2065 7865 6375  iggers the execu
+0004f7b0: 7469 6f6e 206f 6620 2750 6f70 5570 496e  tion of 'PopUpIn
+0004f7c0: 6865 7269 7461 6e63 6544 6963 7427 0a20  heritanceDict'. 
+0004f7d0: 2020 2020 2020 2070 6172 656e 745f 6669         parent_fi
+0004f7e0: 6c65 735b 226d 6f63 6b5f 6b65 795f 3222  les["mock_key_2"
+0004f7f0: 5d20 3d20 6f73 2e70 6174 682e 6a6f 696e  ] = os.path.join
+0004f800: 280a 2020 2020 2020 2020 2020 2020 7070  (.            pp
+0004f810: 6c5f 6d61 6e61 6765 722e 7072 6f6a 6563  l_manager.projec
+0004f820: 742e 666f 6c64 6572 2c20 226d 6f63 6b5f  t.folder, "mock_
+0004f830: 7661 6c5f 3222 0a20 2020 2020 2020 2029  val_2".        )
+0004f840: 0a0a 2020 2020 2020 2020 7265 7365 745f  ..        reset_
+0004f850: 696e 6865 7269 7461 6e63 655f 6469 6374  inheritance_dict
+0004f860: 7328 290a 2020 2020 2020 2020 7265 7365  s().        rese
+0004f870: 745f 636f 6c6c 6563 7469 6f6e 7328 290a  t_collections().
+0004f880: 0a20 2020 2020 2020 2070 706c 5f6d 616e  .        ppl_man
+0004f890: 6167 6572 2e61 6464 5f70 6c75 675f 7661  ager.add_plug_va
+0004f8a0: 6c75 655f 746f 5f64 6174 6162 6173 6528  lue_to_database(
+0004f8b0: 2a61 7267 7329 0a0a 2020 2020 2020 2020  *args)..        
+0004f8c0: 2320 3329 2027 6d6f 636b 5f6b 6579 5f32  # 3) 'mock_key_2
+0004f8d0: 2720 6973 2069 6e20 2770 706c 5f6d 616e  ' is in 'ppl_man
+0004f8e0: 6167 6572 2e6b 6579 2720 696e 6465 7865  ager.key' indexe
+0004f8f0: 6420 6279 2074 6865 206e 6f64 6520 6e61  d by the node na
+0004f900: 6d65 0a20 2020 2020 2020 2070 706c 5f6d  me.        ppl_m
+0004f910: 616e 6167 6572 2e6b 6579 203d 207b 2272  anager.key = {"r
+0004f920: 656e 616d 655f 3122 3a20 226d 6f63 6b5f  ename_1": "mock_
+0004f930: 6b65 795f 3222 7d0a 0a20 2020 2020 2020  key_2"}..       
+0004f940: 2072 6573 6574 5f69 6e68 6572 6974 616e   reset_inheritan
+0004f950: 6365 5f64 6963 7473 2829 0a20 2020 2020  ce_dicts().     
+0004f960: 2020 2072 6573 6574 5f63 6f6c 6c65 6374     reset_collect
+0004f970: 696f 6e73 2829 0a0a 2020 2020 2020 2020  ions()..        
+0004f980: 7070 6c5f 6d61 6e61 6765 722e 6164 645f  ppl_manager.add_
+0004f990: 706c 7567 5f76 616c 7565 5f74 6f5f 6461  plug_value_to_da
+0004f9a0: 7461 6261 7365 282a 6172 6773 290a 0a20  tabase(*args).. 
+0004f9b0: 2020 2020 2020 2023 2034 2920 276d 6f63         # 4) 'moc
+0004f9c0: 6b5f 6b65 795f 3227 2069 7320 696e 2027  k_key_2' is in '
+0004f9d0: 7070 6c5f 6d61 6e61 6765 722e 6b65 7927  ppl_manager.key'
+0004f9e0: 2069 6e64 6578 6564 2062 7920 7468 6520   indexed by the 
+0004f9f0: 6e6f 6465 206e 616d 650a 2020 2020 2020  node name.      
+0004fa00: 2020 2320 2b20 706c 7567 2076 616c 7565    # + plug value
+0004fa10: 0a20 2020 2020 2020 2070 706c 5f6d 616e  .        ppl_man
+0004fa20: 6167 6572 2e6b 6579 203d 207b 2272 656e  ager.key = {"ren
+0004fa30: 616d 655f 3169 6e5f 6669 6c65 223a 2022  ame_1in_file": "
+0004fa40: 6d6f 636b 5f6b 6579 5f32 227d 0a0a 2020  mock_key_2"}..  
+0004fa50: 2020 2020 2020 7265 7365 745f 696e 6865        reset_inhe
+0004fa60: 7269 7461 6e63 655f 6469 6374 7328 290a  ritance_dicts().
+0004fa70: 2020 2020 2020 2020 7265 7365 745f 636f          reset_co
+0004fa80: 6c6c 6563 7469 6f6e 7328 290a 0a20 2020  llections()..   
+0004fa90: 2020 2020 2070 706c 5f6d 616e 6167 6572       ppl_manager
+0004faa0: 2e61 6464 5f70 6c75 675f 7661 6c75 655f  .add_plug_value_
+0004fab0: 746f 5f64 6174 6162 6173 6528 2a61 7267  to_database(*arg
+0004fac0: 7329 0a0a 2020 2020 2020 2020 2320 496e  s)..        # In
+0004fad0: 6465 7065 6e64 656e 746c 7920 7465 7374  dependently test
+0004fae0: 7320 2750 6f70 5570 496e 6865 7269 7461  s 'PopUpInherita
+0004faf0: 6e63 6544 6963 7427 0a20 2020 2020 2020  nceDict'.       
+0004fb00: 2070 6f70 5f75 7020 3d20 506f 7055 7049   pop_up = PopUpI
+0004fb10: 6e68 6572 6974 616e 6365 4469 6374 280a  nheritanceDict(.
+0004fb20: 2020 2020 2020 2020 2020 2020 7b22 6d6f              {"mo
+0004fb30: 636b 5f6b 6579 223a 2022 6d6f 636b 5f76  ck_key": "mock_v
+0004fb40: 616c 7565 227d 2c0a 2020 2020 2020 2020  alue"},.        
+0004fb50: 2020 2020 226d 6f63 6b5f 6675 6c6c 5f6e      "mock_full_n
+0004fb60: 616d 6522 2c0a 2020 2020 2020 2020 2020  ame",.          
+0004fb70: 2020 226d 6f63 6b5f 706c 7567 5f6e 616d    "mock_plug_nam
+0004fb80: 6522 2c0a 2020 2020 2020 2020 2020 2020  e",.            
+0004fb90: 5472 7565 2c0a 2020 2020 2020 2020 290a  True,.        ).
+0004fba0: 0a20 2020 2020 2020 2070 6f70 5f75 702e  .        pop_up.
+0004fbb0: 6f6b 5f63 6c69 636b 6564 2829 0a20 2020  ok_clicked().   
+0004fbc0: 2020 2020 2070 6f70 5f75 702e 6f6b 616c       pop_up.okal
+0004fbd0: 6c5f 636c 6963 6b65 6428 290a 2020 2020  l_clicked().    
+0004fbe0: 2020 2020 706f 705f 7570 2e69 676e 6f72      pop_up.ignor
+0004fbf0: 655f 636c 6963 6b65 6428 290a 2020 2020  e_clicked().    
+0004fc00: 2020 2020 706f 705f 7570 2e69 676e 6f72      pop_up.ignor
+0004fc10: 6561 6c6c 5f63 6c69 636b 6564 2829 0a20  eall_clicked(). 
+0004fc20: 2020 2020 2020 2070 6f70 5f75 702e 6967         pop_up.ig
+0004fc30: 6e6f 7265 5f6e 6f64 655f 636c 6963 6b65  nore_node_clicke
+0004fc40: 6428 290a 0a20 2020 2064 6566 2074 6573  d()..    def tes
+0004fc50: 745f 6173 6b5f 6974 6572 6174 6564 5f70  t_ask_iterated_p
+0004fc60: 6970 656c 696e 655f 706c 7567 7328 7365  ipeline_plugs(se
+0004fc70: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
+0004fc80: 4164 6473 2074 6865 2070 726f 6365 7373  Adds the process
+0004fc90: 2027 5265 6e61 6d65 272c 2065 7870 6f72   'Rename', expor
+0004fca0: 7420 6d61 6e64 6174 6f72 7920 696e 7075  t mandatory inpu
+0004fcb0: 7420 616e 6420 6f75 7470 7574 2070 6c75  t and output plu
+0004fcc0: 670a 2020 2020 2020 2020 616e 6420 6f70  g.        and op
+0004fcd0: 656e 7320 616e 2069 7465 7261 7469 6f6e  ens an iteration
+0004fce0: 2064 6961 6c6f 6720 666f 7220 6561 6368   dialog for each
+0004fcf0: 2070 6c75 672e 0a0a 2020 2020 2020 2020   plug...        
+0004fd00: 2d20 5465 7374 733a 2050 6970 656c 696e  - Tests: Pipelin
+0004fd10: 654d 616e 6167 6572 5461 622e 6173 6b5f  eManagerTab.ask_
+0004fd20: 6974 6572 6174 6564 5f70 6970 656c 696e  iterated_pipelin
+0004fd30: 655f 706c 7567 730a 2020 2020 2020 2020  e_plugs.        
+0004fd40: 2222 220a 0a20 2020 2020 2020 2070 706c  """..        ppl
+0004fd50: 5f65 6474 5f74 6162 7320 3d20 7365 6c66  _edt_tabs = self
+0004fd60: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 6970  .main_window.pip
+0004fd70: 656c 696e 655f 6d61 6e61 6765 722e 7069  eline_manager.pi
+0004fd80: 7065 6c69 6e65 4564 6974 6f72 5461 6273  pelineEditorTabs
+0004fd90: 0a0a 2020 2020 2020 2020 2320 4164 6473  ..        # Adds
+0004fda0: 2074 6865 2070 726f 6365 7373 6573 2052   the processes R
+0004fdb0: 656e 616d 652c 2063 7265 6174 6573 2074  ename, creates t
+0004fdc0: 6865 2022 7265 6e61 6d65 5f31 2220 6e6f  he "rename_1" no
+0004fdd0: 6465 0a20 2020 2020 2020 2070 706c 5f65  de.        ppl_e
+0004fde0: 6474 5f74 6162 732e 6765 745f 6375 7272  dt_tabs.get_curr
+0004fdf0: 656e 745f 6564 6974 6f72 2829 2e63 6c69  ent_editor().cli
+0004fe00: 636b 5f70 6f73 203d 2051 506f 696e 7428  ck_pos = QPoint(
+0004fe10: 3435 302c 2035 3030 290a 2020 2020 2020  450, 500).      
+0004fe20: 2020 7070 6c5f 6564 745f 7461 6273 2e67    ppl_edt_tabs.g
+0004fe30: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
+0004fe40: 7228 292e 6164 645f 6e61 6d65 645f 7072  r().add_named_pr
+0004fe50: 6f63 6573 7328 5265 6e61 6d65 290a 0a20  ocess(Rename).. 
+0004fe60: 2020 2020 2020 2070 6970 656c 696e 6520         pipeline 
+0004fe70: 3d20 7070 6c5f 6564 745f 7461 6273 2e67  = ppl_edt_tabs.g
+0004fe80: 6574 5f63 7572 7265 6e74 5f70 6970 656c  et_current_pipel
+0004fe90: 696e 6528 290a 2020 2020 2020 2020 7069  ine().        pi
+0004fea0: 7065 6c69 6e65 5f6d 616e 6167 6572 203d  peline_manager =
+0004feb0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+0004fec0: 772e 7069 7065 6c69 6e65 5f6d 616e 6167  w.pipeline_manag
+0004fed0: 6572 0a0a 2020 2020 2020 2020 2320 4578  er..        # Ex
+0004fee0: 706f 7274 7320 7468 6520 6d61 6e64 6174  ports the mandat
+0004fef0: 6f72 7920 696e 7075 7420 616e 6420 6f75  ory input and ou
+0004ff00: 7470 7574 2070 6c75 6773 2066 6f72 2022  tput plugs for "
+0004ff10: 7265 6e61 6d65 5f31 220a 2020 2020 2020  rename_1".      
+0004ff20: 2020 7070 6c5f 6564 745f 7461 6273 2e67    ppl_edt_tabs.g
+0004ff30: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
+0004ff40: 7228 292e 6375 7272 656e 745f 6e6f 6465  r().current_node
+0004ff50: 5f6e 616d 6520 3d20 2272 656e 616d 655f  _name = "rename_
+0004ff60: 3122 0a20 2020 2020 2020 2070 706c 5f65  1".        ppl_e
+0004ff70: 6474 5f74 6162 732e 6765 745f 6375 7272  dt_tabs.get_curr
+0004ff80: 656e 745f 6564 6974 6f72 2829 2e65 7870  ent_editor().exp
+0004ff90: 6f72 745f 756e 636f 6e6e 6563 7465 645f  ort_unconnected_
+0004ffa0: 6d61 6e64 6174 6f72 795f 696e 7075 7473  mandatory_inputs
+0004ffb0: 2829 0a20 2020 2020 2020 2070 706c 5f65  ().        ppl_e
+0004ffc0: 6474 5f74 6162 732e 6765 745f 6375 7272  dt_tabs.get_curr
+0004ffd0: 656e 745f 6564 6974 6f72 2829 2e65 7870  ent_editor().exp
+0004ffe0: 6f72 745f 616c 6c5f 756e 636f 6e6e 6563  ort_all_unconnec
+0004fff0: 7465 645f 6f75 7470 7574 7328 290a 0a20  ted_outputs().. 
+00050000: 2020 2020 2020 2023 204d 6f63 6b73 2065         # Mocks e
+00050010: 7865 6375 7469 6e67 2061 2064 6961 6c6f  xecuting a dialo
+00050020: 6720 626f 7820 616e 6420 636c 6963 6b69  g box and clicki
+00050030: 6e67 2063 6c6f 7365 0a20 2020 2020 2020  ng close.       
+00050040: 2051 4469 616c 6f67 2e65 7865 635f 203d   QDialog.exec_ =
+00050050: 206c 616d 6264 6120 7365 6c66 5f2c 202a   lambda self_, *
+00050060: 6172 6773 3a20 7365 6c66 5f2e 6163 6365  args: self_.acce
+00050070: 7074 2829 0a0a 2020 2020 2020 2020 7069  pt()..        pi
+00050080: 7065 6c69 6e65 5f6d 616e 6167 6572 2e61  peline_manager.a
+00050090: 736b 5f69 7465 7261 7465 645f 7069 7065  sk_iterated_pipe
+000500a0: 6c69 6e65 5f70 6c75 6773 2870 6970 656c  line_plugs(pipel
+000500b0: 696e 6529 0a0a 2020 2020 6465 6620 7465  ine)..    def te
+000500c0: 7374 5f62 7569 6c64 5f69 7465 7261 7465  st_build_iterate
+000500d0: 645f 7069 7065 6c69 6e65 2873 656c 6629  d_pipeline(self)
+000500e0: 3a0a 2020 2020 2020 2020 2222 2241 6464  :.        """Add
+000500f0: 7320 6120 2753 656c 6563 7427 2070 726f  s a 'Select' pro
+00050100: 6365 7373 2c20 6578 706f 7274 7320 6974  cess, exports it
+00050110: 7320 6d61 6e64 6174 6f72 7920 696e 7075  s mandatory inpu
+00050120: 7473 2c20 6d6f 636b 730a 2020 2020 2020  ts, mocks.      
+00050130: 2020 736f 6d65 206d 6574 686f 6473 206f    some methods o
+00050140: 6620 7468 6520 7069 7065 6c69 6e65 206d  f the pipeline m
+00050150: 616e 6167 6572 2061 6e64 2062 7569 6c64  anager and build
+00050160: 7320 616e 2069 7465 7261 7465 6420 7069  s an iterated pi
+00050170: 7065 6c69 6e65 2e0a 0a20 2020 2020 2020  peline...       
+00050180: 202d 2054 6573 7473 3a27 5069 7065 6c69   - Tests:'Pipeli
+00050190: 6e65 4d61 6e61 6765 7254 6162 2e62 7569  neManagerTab.bui
+000501a0: 6c64 5f69 7465 7261 7465 645f 7069 7065  ld_iterated_pipe
+000501b0: 6c69 6e65 270a 2020 2020 2020 2020 2222  line'.        ""
+000501c0: 220a 0a20 2020 2020 2020 2070 706c 5f65  "..        ppl_e
+000501d0: 6474 5f74 6162 7320 3d20 7365 6c66 2e6d  dt_tabs = self.m
+000501e0: 6169 6e5f 7769 6e64 6f77 2e70 6970 656c  ain_window.pipel
+000501f0: 696e 655f 6d61 6e61 6765 722e 7069 7065  ine_manager.pipe
+00050200: 6c69 6e65 4564 6974 6f72 5461 6273 0a20  lineEditorTabs. 
+00050210: 2020 2020 2020 2070 706c 5f6d 616e 6167         ppl_manag
+00050220: 6572 203d 2073 656c 662e 6d61 696e 5f77  er = self.main_w
+00050230: 696e 646f 772e 7069 7065 6c69 6e65 5f6d  indow.pipeline_m
+00050240: 616e 6167 6572 0a0a 2020 2020 2020 2020  anager..        
+00050250: 2320 4164 6473 2074 6865 2070 726f 6365  # Adds the proce
+00050260: 7373 6573 2053 656c 6563 742c 2063 7265  sses Select, cre
+00050270: 6174 6573 2074 6865 2022 7365 6c65 6374  ates the "select
+00050280: 5f31 2220 6e6f 6465 0a20 2020 2020 2020  _1" node.       
+00050290: 2070 706c 5f65 6474 5f74 6162 732e 6765   ppl_edt_tabs.ge
+000502a0: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
+000502b0: 2829 2e63 6c69 636b 5f70 6f73 203d 2051  ().click_pos = Q
+000502c0: 506f 696e 7428 3435 302c 2035 3030 290a  Point(450, 500).
+000502d0: 2020 2020 2020 2020 7070 6c5f 6564 745f          ppl_edt_
+000502e0: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
+000502f0: 5f65 6469 746f 7228 292e 6164 645f 6e61  _editor().add_na
+00050300: 6d65 645f 7072 6f63 6573 7328 5365 6c65  med_process(Sele
+00050310: 6374 290a 2020 2020 2020 2020 7069 7065  ct).        pipe
+00050320: 6c69 6e65 203d 2070 706c 5f65 6474 5f74  line = ppl_edt_t
+00050330: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
+00050340: 7069 7065 6c69 6e65 2829 0a0a 2020 2020  pipeline()..    
+00050350: 2020 2020 2320 4578 706f 7274 7320 7468      # Exports th
+00050360: 6520 6d61 6e64 6174 6f72 7920 696e 7075  e mandatory inpu
+00050370: 7420 616e 6420 6f75 7470 7574 2070 6c75  t and output plu
+00050380: 6773 2066 6f72 2022 7365 6c65 6374 5f31  gs for "select_1
+00050390: 220a 2020 2020 2020 2020 7070 6c5f 6564  ".        ppl_ed
+000503a0: 745f 7461 6273 2e67 6574 5f63 7572 7265  t_tabs.get_curre
+000503b0: 6e74 5f65 6469 746f 7228 292e 6375 7272  nt_editor().curr
+000503c0: 656e 745f 6e6f 6465 5f6e 616d 6520 3d20  ent_node_name = 
+000503d0: 2273 656c 6563 745f 3122 0a20 2020 2020  "select_1".     
+000503e0: 2020 2070 706c 5f65 6474 5f74 6162 732e     ppl_edt_tabs.
+000503f0: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
+00050400: 6f72 2829 2e65 7870 6f72 745f 756e 636f  or().export_unco
+00050410: 6e6e 6563 7465 645f 6d61 6e64 6174 6f72  nnected_mandator
+00050420: 795f 696e 7075 7473 2829 0a20 2020 2020  y_inputs().     
+00050430: 2020 2070 706c 5f65 6474 5f74 6162 732e     ppl_edt_tabs.
+00050440: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
+00050450: 6f72 2829 2e65 7870 6f72 745f 616c 6c5f  or().export_all_
+00050460: 756e 636f 6e6e 6563 7465 645f 6f75 7470  unconnected_outp
+00050470: 7574 7328 290a 0a20 2020 2020 2020 2023  uts()..        #
+00050480: 204d 6f63 6b73 2027 7061 7265 6e74 5f70   Mocks 'parent_p
+00050490: 6970 656c 696e 6527 2061 6e64 2072 6574  ipeline' and ret
+000504a0: 7572 6e73 2061 2027 5072 6f63 6573 7327  urns a 'Process'
+000504b0: 2069 6e73 7465 6164 206f 6620 610a 2020   instead of a.  
+000504c0: 2020 2020 2020 2320 2750 6970 656c 696e        # 'Pipelin
+000504d0: 6527 0a20 2020 2020 2020 2070 6970 656c  e'.        pipel
+000504e0: 696e 6520 3d20 7069 7065 6c69 6e65 2e6e  ine = pipeline.n
+000504f0: 6f64 6573 5b22 7365 6c65 6374 5f31 225d  odes["select_1"]
+00050500: 2e70 726f 6365 7373 0a20 2020 2020 2020  .process.       
+00050510: 2070 6970 656c 696e 652e 7061 7265 6e74   pipeline.parent
+00050520: 5f70 6970 656c 696e 6520 3d20 5472 7565  _pipeline = True
+00050530: 0a0a 2020 2020 2020 2020 7070 6c5f 6d61  ..        ppl_ma
+00050540: 6e61 6765 722e 6765 745f 7069 7065 6c69  nager.get_pipeli
+00050550: 6e65 5f6f 725f 7072 6f63 6573 7320 3d20  ne_or_process = 
+00050560: 4d61 6769 634d 6f63 6b28 7265 7475 726e  MagicMock(return
+00050570: 5f76 616c 7565 3d70 6970 656c 696e 6529  _value=pipeline)
+00050580: 0a0a 2020 2020 2020 2020 2320 4d6f 636b  ..        # Mock
+00050590: 7320 2761 736b 5f69 7465 7261 7465 645f  s 'ask_iterated_
+000505a0: 7069 7065 6c69 6e65 5f70 6c75 6773 2720  pipeline_plugs' 
+000505b0: 616e 6420 7265 7475 726e 7320 7468 6520  and returns the 
+000505c0: 7475 706c 650a 2020 2020 2020 2020 2320  tuple.        # 
+000505d0: 2728 6974 6572 6174 6564 5f70 6c75 6773  '(iterated_plugs
+000505e0: 2c20 6461 7461 6261 7365 5f70 6c75 6773  , database_plugs
+000505f0: 2927 0a20 2020 2020 2020 2070 706c 5f6d  )'.        ppl_m
+00050600: 616e 6167 6572 2e61 736b 5f69 7465 7261  anager.ask_itera
+00050610: 7465 645f 7069 7065 6c69 6e65 5f70 6c75  ted_pipeline_plu
+00050620: 6773 203d 204d 6167 6963 4d6f 636b 280a  gs = MagicMock(.
+00050630: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00050640: 726e 5f76 616c 7565 3d28 5b22 696e 6465  rn_value=(["inde
+00050650: 7822 2c20 2269 6e6c 6973 7422 2c20 225f  x", "inlist", "_
+00050660: 6f75 7422 5d2c 205b 2269 6e6c 6973 7422  out"], ["inlist"
+00050670: 5d29 0a20 2020 2020 2020 2029 0a0a 2020  ]).        )..  
+00050680: 2020 2020 2020 2320 4d6f 636b 7320 2775        # Mocks 'u
+00050690: 7064 6174 655f 6e6f 6465 735f 616e 645f  pdate_nodes_and_
+000506a0: 706c 7567 735f 6163 7469 7661 7469 6f6e  plugs_activation
+000506b0: 2720 7769 7468 206e 6f20 7265 7475 726e  ' with no return
+000506c0: 6564 2076 616c 7565 730a 2020 2020 2020  ed values.      
+000506d0: 2020 7069 7065 6c69 6e65 2e75 7064 6174    pipeline.updat
+000506e0: 655f 6e6f 6465 735f 616e 645f 706c 7567  e_nodes_and_plug
+000506f0: 735f 6163 7469 7661 7469 6f6e 203d 204d  s_activation = M
+00050700: 6167 6963 4d6f 636b 2829 0a0a 2020 2020  agicMock()..    
+00050710: 2020 2020 2320 4275 696c 6473 2069 7465      # Builds ite
+00050720: 7261 7465 6420 7069 7065 6c69 6e65 0a20  rated pipeline. 
+00050730: 2020 2020 2020 2070 7269 6e74 2822 5c6e         print("\n
+00050740: 5c6e 2a2a 2041 6e20 6578 6365 7074 696f  \n** An exceptio
+00050750: 6e20 6d65 7373 6167 6520 6973 2065 7870  n message is exp
+00050760: 6563 7465 6420 6265 6c6f 775c 6e22 290a  ected below\n").
+00050770: 2020 2020 2020 2020 7070 6c5f 6d61 6e61          ppl_mana
+00050780: 6765 722e 6275 696c 645f 6974 6572 6174  ger.build_iterat
+00050790: 6564 5f70 6970 656c 696e 6528 290a 0a20  ed_pipeline().. 
+000507a0: 2020 2020 2020 2023 2041 7373 6572 7473         # Asserts
+000507b0: 2074 6865 206d 6f63 6b20 6d65 7468 6f64   the mock method
+000507c0: 7320 7765 7265 2063 616c 6c65 6420 6173  s were called as
+000507d0: 2065 7870 6563 7465 640a 2020 2020 2020   expected.      
+000507e0: 2020 7070 6c5f 6d61 6e61 6765 722e 6765    ppl_manager.ge
+000507f0: 745f 7069 7065 6c69 6e65 5f6f 725f 7072  t_pipeline_or_pr
+00050800: 6f63 6573 732e 6173 7365 7274 5f63 616c  ocess.assert_cal
+00050810: 6c65 645f 6f6e 6365 5f77 6974 6828 290a  led_once_with().
+00050820: 2020 2020 2020 2020 7070 6c5f 6d61 6e61          ppl_mana
+00050830: 6765 722e 6173 6b5f 6974 6572 6174 6564  ger.ask_iterated
+00050840: 5f70 6970 656c 696e 655f 706c 7567 732e  _pipeline_plugs.
+00050850: 6173 7365 7274 5f63 616c 6c65 645f 6f6e  assert_called_on
+00050860: 6365 5f77 6974 6828 0a20 2020 2020 2020  ce_with(.       
+00050870: 2020 2020 2070 6970 656c 696e 650a 2020       pipeline.  
+00050880: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00050890: 7069 7065 6c69 6e65 2e75 7064 6174 655f  pipeline.update_
+000508a0: 6e6f 6465 735f 616e 645f 706c 7567 735f  nodes_and_plugs_
+000508b0: 6163 7469 7661 7469 6f6e 2e61 7373 6572  activation.asser
+000508c0: 745f 6361 6c6c 6564 5f6f 6e63 655f 7769  t_called_once_wi
+000508d0: 7468 2829 0a0a 2020 2020 6465 6620 7465  th()..    def te
+000508e0: 7374 5f63 6865 636b 5f72 6571 7569 7265  st_check_require
+000508f0: 6d65 6e74 7328 7365 6c66 293a 0a20 2020  ments(self):.   
+00050900: 2020 2020 2022 2222 4164 6473 2061 2027       """Adds a '
+00050910: 5365 6c65 6374 2720 7072 6f63 6573 732c  Select' process,
+00050920: 2061 7070 656e 6473 2069 7420 746f 2074   appends it to t
+00050930: 6865 206e 6f64 6573 206c 6973 7420 616e  he nodes list an
+00050940: 6420 6368 6563 6b73 0a20 2020 2020 2020  d checks.       
+00050950: 2074 6865 2072 6571 7569 7265 6d65 6e74   the requirement
+00050960: 7320 666f 7220 7468 6520 6769 7665 6e20  s for the given 
+00050970: 6e6f 6465 2e0a 0a20 2020 2020 2020 202d  node...        -
+00050980: 2054 6573 7473 3a20 5069 7065 6c69 6e65   Tests: Pipeline
+00050990: 4d61 6e61 6765 7254 6162 2e63 6865 636b  ManagerTab.check
+000509a0: 5f72 6571 7569 7265 6d65 6e74 730a 2020  _requirements.  
+000509b0: 2020 2020 2020 2222 220a 0a20 2020 2020        """..     
+000509c0: 2020 2070 706c 5f65 6474 5f74 6162 7320     ppl_edt_tabs 
+000509d0: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
+000509e0: 6f77 2e70 6970 656c 696e 655f 6d61 6e61  ow.pipeline_mana
+000509f0: 6765 722e 7069 7065 6c69 6e65 4564 6974  ger.pipelineEdit
+00050a00: 6f72 5461 6273 0a20 2020 2020 2020 2070  orTabs.        p
+00050a10: 6970 656c 696e 655f 6d61 6e61 6765 7220  ipeline_manager 
+00050a20: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
+00050a30: 6f77 2e70 6970 656c 696e 655f 6d61 6e61  ow.pipeline_mana
+00050a40: 6765 720a 0a20 2020 2020 2020 2023 2041  ger..        # A
+00050a50: 6464 7320 7468 6520 7072 6f63 6573 7365  dds the processe
+00050a60: 7320 5365 6c65 6374 2c20 6372 6561 7465  s Select, create
+00050a70: 7320 7468 6520 2273 656c 6563 745f 3122  s the "select_1"
+00050a80: 206e 6f64 650a 2020 2020 2020 2020 7072   node.        pr
+00050a90: 6f63 6573 735f 636c 6173 7320 3d20 5365  ocess_class = Se
+00050aa0: 6c65 6374 0a20 2020 2020 2020 2070 706c  lect.        ppl
+00050ab0: 5f65 6474 5f74 6162 732e 6765 745f 6375  _edt_tabs.get_cu
+00050ac0: 7272 656e 745f 6564 6974 6f72 2829 2e63  rrent_editor().c
+00050ad0: 6c69 636b 5f70 6f73 203d 2051 506f 696e  lick_pos = QPoin
+00050ae0: 7428 3435 302c 2035 3030 290a 2020 2020  t(450, 500).    
+00050af0: 2020 2020 7070 6c5f 6564 745f 7461 6273      ppl_edt_tabs
+00050b00: 2e67 6574 5f63 7572 7265 6e74 5f65 6469  .get_current_edi
+00050b10: 746f 7228 292e 6164 645f 6e61 6d65 645f  tor().add_named_
+00050b20: 7072 6f63 6573 7328 7072 6f63 6573 735f  process(process_
+00050b30: 636c 6173 7329 0a20 2020 2020 2020 2070  class).        p
+00050b40: 6970 656c 696e 6520 3d20 7070 6c5f 6564  ipeline = ppl_ed
+00050b50: 745f 7461 6273 2e67 6574 5f63 7572 7265  t_tabs.get_curre
+00050b60: 6e74 5f70 6970 656c 696e 6528 290a 0a20  nt_pipeline().. 
+00050b70: 2020 2020 2020 2023 2041 7070 656e 6473         # Appends
+00050b80: 2061 2027 5072 6f63 6573 7327 2074 6f20   a 'Process' to 
+00050b90: 2770 6970 656c 696e 655f 6d61 6e61 6765  'pipeline_manage
+00050ba0: 722e 6e6f 6465 5f6c 6973 7427 2061 6e64  r.node_list' and
+00050bb0: 2063 6865 636b 730a 2020 2020 2020 2020   checks.        
+00050bc0: 2320 7265 7175 6972 656d 656e 7473 0a20  # requirements. 
+00050bd0: 2020 2020 2020 2070 6970 656c 696e 655f         pipeline_
+00050be0: 6d61 6e61 6765 722e 6e6f 6465 5f6c 6973  manager.node_lis
+00050bf0: 742e 6170 7065 6e64 2870 6970 656c 696e  t.append(pipelin
+00050c00: 652e 6e6f 6465 735b 2273 656c 6563 745f  e.nodes["select_
+00050c10: 3122 5d2e 7072 6f63 6573 7329 0a20 2020  1"].process).   
+00050c20: 2020 2020 2063 6f6e 6669 6720 3d20 7069       config = pi
+00050c30: 7065 6c69 6e65 5f6d 616e 6167 6572 2e63  peline_manager.c
+00050c40: 6865 636b 5f72 6571 7569 7265 6d65 6e74  heck_requirement
+00050c50: 7328 290a 0a20 2020 2020 2020 2023 2041  s()..        # A
+00050c60: 7373 6572 7473 2074 6865 206f 7574 7075  sserts the outpu
+00050c70: 740a 2020 2020 2020 2020 7365 6c66 2e61  t.        self.a
+00050c80: 7373 6572 7454 7275 6528 6973 696e 7374  ssertTrue(isinst
+00050c90: 616e 6365 2863 6f6e 6669 672c 2064 6963  ance(config, dic
+00050ca0: 7429 290a 2020 2020 2020 2020 7365 6c66  t)).        self
+00050cb0: 2e61 7373 6572 7454 7275 6528 0a20 2020  .assertTrue(.   
+00050cc0: 2020 2020 2020 2020 206c 6973 7428 636f           list(co
+00050cd0: 6e66 6967 2e6b 6579 7328 2929 0a20 2020  nfig.keys()).   
+00050ce0: 2020 2020 2020 2020 203d 3d20 5b22 6361           == ["ca
+00050cf0: 7073 756c 5f65 6e67 696e 6522 2c20 2263  psul_engine", "c
+00050d00: 6170 7375 6c2e 656e 6769 6e65 2e6d 6f64  apsul.engine.mod
+00050d10: 756c 652e 6e69 7079 7065 225d 0a20 2020  ule.nipype"].   
+00050d20: 2020 2020 2029 0a0a 2020 2020 6465 6620       )..    def 
+00050d30: 7465 7374 5f63 6c65 616e 7570 5f6f 6c64  test_cleanup_old
+00050d40: 6572 5f69 6e69 7428 7365 6c66 293a 0a20  er_init(self):. 
+00050d50: 2020 2020 2020 2022 2222 4d6f 636b 7320         """Mocks 
+00050d60: 6120 6272 6963 6b20 6c69 7374 2c20 6d6f  a brick list, mo
+00050d70: 636b 7320 736f 6d65 206d 6574 686f 6473  cks some methods
+00050d80: 2066 726f 6d20 7468 6520 7069 7065 6c69   from the pipeli
+00050d90: 6e65 206d 616e 6167 6572 0a20 2020 2020  ne manager.     
+00050da0: 2020 2061 6e64 2063 6c65 616e 7320 7570     and cleans up
+00050db0: 206f 6c64 2069 6e69 7469 616c 697a 6174   old initializat
+00050dc0: 696f 6e20 7265 7375 6c74 732e 0a0a 2020  ion results...  
+00050dd0: 2020 2020 2020 2d20 5465 7374 733a 2050        - Tests: P
+00050de0: 6970 656c 696e 654d 616e 6167 6572 5461  ipelineManagerTa
+00050df0: 622e 636c 6561 6e75 705f 6f6c 6465 725f  b.cleanup_older_
+00050e00: 696e 6974 0a20 2020 2020 2020 2022 2222  init.        """
+00050e10: 0a0a 2020 2020 2020 2020 7070 6c5f 6d61  ..        ppl_ma
+00050e20: 6e61 6765 7220 3d20 7365 6c66 2e6d 6169  nager = self.mai
+00050e30: 6e5f 7769 6e64 6f77 2e70 6970 656c 696e  n_window.pipelin
+00050e40: 655f 6d61 6e61 6765 720a 0a20 2020 2020  e_manager..     
+00050e50: 2020 2023 204d 6f63 6b73 2061 2027 7069     # Mocks a 'pi
+00050e60: 7065 6c69 6e65 5f6d 616e 6167 6572 2e62  peline_manager.b
+00050e70: 7269 636b 5f6c 6973 7427 0a20 2020 2020  rick_list'.     
+00050e80: 2020 2062 7269 636b 5f69 6420 3d20 7374     brick_id = st
+00050e90: 7228 7575 6964 2e75 7569 6434 2829 290a  r(uuid.uuid4()).
+00050ea0: 2020 2020 2020 2020 7070 6c5f 6d61 6e61          ppl_mana
+00050eb0: 6765 722e 6272 6963 6b5f 6c69 7374 2e61  ger.brick_list.a
+00050ec0: 7070 656e 6428 6272 6963 6b5f 6964 290a  ppend(brick_id).
+00050ed0: 0a20 2020 2020 2020 2023 204d 6f63 6b73  .        # Mocks
+00050ee0: 206d 6574 686f 6473 2075 7365 6420 696e   methods used in
+00050ef0: 2074 6865 2074 6573 740a 2020 2020 2020   the test.      
+00050f00: 2020 280a 2020 2020 2020 2020 2020 2020    (.            
+00050f10: 7070 6c5f 6d61 6e61 6765 722e 6d61 696e  ppl_manager.main
+00050f20: 5f77 696e 646f 772e 6461 7461 5f62 726f  _window.data_bro
+00050f30: 7773 6572 2e74 6162 6c65 5f64 6174 612e  wser.table_data.
+00050f40: 6465 6c65 7465 5f66 726f 6d5f 6272 6963  delete_from_bric
+00050f50: 6b0a 2020 2020 2020 2020 2920 3d20 4d61  k.        ) = Ma
+00050f60: 6769 634d 6f63 6b28 290a 2020 2020 2020  gicMock().      
+00050f70: 2020 7070 6c5f 6d61 6e61 6765 722e 7072    ppl_manager.pr
+00050f80: 6f6a 6563 742e 636c 6561 6e75 705f 6f72  oject.cleanup_or
+00050f90: 7068 616e 5f6e 6f6e 6578 6973 7469 6e67  phan_nonexisting
+00050fa0: 5f66 696c 6573 203d 204d 6167 6963 4d6f  _files = MagicMo
+00050fb0: 636b 2829 0a0a 2020 2020 2020 2020 2320  ck()..        # 
+00050fc0: 436c 6561 6e73 2075 7020 6f6c 6465 7220  Cleans up older 
+00050fd0: 696e 6974 0a20 2020 2020 2020 2070 706c  init.        ppl
+00050fe0: 5f6d 616e 6167 6572 2e63 6c65 616e 7570  _manager.cleanup
+00050ff0: 5f6f 6c64 6572 5f69 6e69 7428 290a 0a20  _older_init().. 
+00051000: 2020 2020 2020 2023 2041 7373 6572 7473         # Asserts
+00051010: 2074 6861 7420 7468 6520 6d6f 636b 206d   that the mock m
+00051020: 6574 686f 6473 2077 6572 6520 6361 6c6c  ethods were call
+00051030: 6564 2061 7320 6578 7065 6374 6564 0a20  ed as expected. 
+00051040: 2020 2020 2020 2023 2066 6d74 3a20 6f66         # fmt: of
+00051050: 660a 2020 2020 2020 2020 280a 2020 2020  f.        (.    
+00051060: 2020 2020 2020 2020 7070 6c5f 6d61 6e61          ppl_mana
+00051070: 6765 722e 6d61 696e 5f77 696e 646f 772e  ger.main_window.
+00051080: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
+00051090: 6c65 5f64 6174 612e 6465 6c65 7465 5f66  le_data.delete_f
+000510a0: 726f 6d5f 6272 6963 6b2e 0a20 2020 2020  rom_brick..     
+000510b0: 2020 2020 2020 2061 7373 6572 745f 6361         assert_ca
+000510c0: 6c6c 6564 5f6f 6e63 655f 7769 7468 2862  lled_once_with(b
+000510d0: 7269 636b 5f69 6429 0a20 2020 2020 2020  rick_id).       
+000510e0: 2029 0a20 2020 2020 2020 2028 0a20 2020   ).        (.   
+000510f0: 2020 2020 2020 2020 2070 706c 5f6d 616e           ppl_man
+00051100: 6167 6572 2e70 726f 6a65 6374 2e63 6c65  ager.project.cle
+00051110: 616e 7570 5f6f 7270 6861 6e5f 6e6f 6e65  anup_orphan_none
+00051120: 7869 7374 696e 675f 6669 6c65 732e 0a20  xisting_files.. 
+00051130: 2020 2020 2020 2020 2020 2061 7373 6572             asser
+00051140: 745f 6361 6c6c 6564 5f6f 6e63 655f 7769  t_called_once_wi
+00051150: 7468 2829 0a20 2020 2020 2020 2029 0a20  th().        ). 
+00051160: 2020 2020 2020 2023 2066 6d74 3a20 6f6e         # fmt: on
+00051170: 0a0a 2020 2020 2020 2020 2320 4173 7365  ..        # Asse
+00051180: 7274 7320 7468 6174 2062 6f74 6820 2762  rts that both 'b
+00051190: 7269 636b 5f6c 6973 7427 2061 6e64 2027  rick_list' and '
+000511a0: 6e6f 6465 5f6c 6973 7427 2077 6572 6520  node_list' were 
+000511b0: 636c 6561 6e65 640a 2020 2020 2020 2020  cleaned.        
+000511c0: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
+000511d0: 6c65 6e28 7070 6c5f 6d61 6e61 6765 722e  len(ppl_manager.
+000511e0: 6272 6963 6b5f 6c69 7374 2920 3d3d 2030  brick_list) == 0
+000511f0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00051200: 7373 6572 7454 7275 6528 6c65 6e28 7070  ssertTrue(len(pp
+00051210: 6c5f 6d61 6e61 6765 722e 6e6f 6465 5f6c  l_manager.node_l
+00051220: 6973 7429 203d 3d20 3029 0a0a 2020 2020  ist) == 0)..    
+00051230: 6465 6620 7465 7374 5f63 6f6d 706c 6574  def test_complet
+00051240: 655f 7069 7065 6c69 6e65 5f70 6172 616d  e_pipeline_param
+00051250: 6574 6572 7328 7365 6c66 293a 0a20 2020  eters(self):.   
+00051260: 2020 2020 2022 2222 4d6f 636b 7320 6120       """Mocks a 
+00051270: 6d65 7468 6f64 206f 6620 7069 7065 6c69  method of pipeli
+00051280: 6e65 206d 616e 6167 6572 2061 6e64 2063  ne manager and c
+00051290: 6f6d 706c 6574 6573 2074 6865 2070 6970  ompletes the pip
+000512a0: 656c 696e 650a 2020 2020 2020 2020 7061  eline.        pa
+000512b0: 7261 6d65 7465 7273 2e0a 0a20 2020 2020  rameters...     
+000512c0: 2020 202d 2054 6573 7473 3a20 5069 7065     - Tests: Pipe
+000512d0: 6c69 6e65 4d61 6e61 6765 7254 6162 2e63  lineManagerTab.c
+000512e0: 6f6d 706c 6574 655f 7069 7065 6c69 6e65  omplete_pipeline
+000512f0: 5f70 6172 616d 6574 6572 730a 2020 2020  _parameters.    
+00051300: 2020 2020 2222 220a 0a20 2020 2020 2020      """..       
+00051310: 2070 706c 5f6d 616e 6167 6572 203d 2073   ppl_manager = s
+00051320: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+00051330: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
+00051340: 0a0a 2020 2020 2020 2020 2320 4d6f 636b  ..        # Mock
+00051350: 7320 6d65 7468 6f64 2075 7365 6420 696e  s method used in
+00051360: 2074 6865 2074 6573 740a 2020 2020 2020   the test.      
+00051370: 2020 7070 6c5f 6d61 6e61 6765 722e 6765    ppl_manager.ge
+00051380: 745f 6361 7073 756c 5f65 6e67 696e 6520  t_capsul_engine 
+00051390: 3d20 4d61 6769 634d 6f63 6b28 0a20 2020  = MagicMock(.   
+000513a0: 2020 2020 2020 2020 2072 6574 7572 6e5f           return_
+000513b0: 7661 6c75 653d 7070 6c5f 6d61 6e61 6765  value=ppl_manage
+000513c0: 722e 6765 745f 7069 7065 6c69 6e65 5f6f  r.get_pipeline_o
+000513d0: 725f 7072 6f63 6573 7328 290a 2020 2020  r_process().    
+000513e0: 2020 2020 290a 0a20 2020 2020 2020 2023      )..        #
+000513f0: 2043 6f6d 706c 6574 6520 7069 7065 6c69   Complete pipeli
+00051400: 6e65 2070 6172 616d 6574 6572 730a 2020  ne parameters.  
+00051410: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
+00051420: 722e 636f 6d70 6c65 7465 5f70 6970 656c  r.complete_pipel
+00051430: 696e 655f 7061 7261 6d65 7465 7273 2829  ine_parameters()
+00051440: 0a0a 2020 2020 2020 2020 2320 4173 7365  ..        # Asse
+00051450: 7274 7320 7468 6174 2074 6865 206d 6f63  rts that the moc
+00051460: 6b20 6d65 7468 6f64 2077 6173 2063 616c  k method was cal
+00051470: 6c65 6420 6173 2065 7870 6563 7465 640a  led as expected.
+00051480: 2020 2020 2020 2020 7070 6c5f 6d61 6e61          ppl_mana
+00051490: 6765 722e 6765 745f 6361 7073 756c 5f65  ger.get_capsul_e
+000514a0: 6e67 696e 652e 6173 7365 7274 5f63 616c  ngine.assert_cal
+000514b0: 6c65 645f 6f6e 6365 5f77 6974 6828 290a  led_once_with().
+000514c0: 0a20 2020 2064 6566 2074 6573 745f 6465  .    def test_de
+000514d0: 6c65 7465 5f70 726f 6365 7373 6573 2873  lete_processes(s
+000514e0: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+000514f0: 2244 656c 6574 6573 2061 2070 726f 6365  "Deletes a proce
+00051500: 7373 2061 6e64 206d 616b 6573 2074 6865  ss and makes the
+00051510: 2075 6e64 6f2f 7265 646f 2061 6374 696f   undo/redo actio
+00051520: 6e2e 2222 220a 0a20 2020 2020 2020 2070  n."""..        p
+00051530: 6970 656c 696e 655f 6d61 6e61 6765 7220  ipeline_manager 
+00051540: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
+00051550: 6f77 2e70 6970 656c 696e 655f 6d61 6e61  ow.pipeline_mana
+00051560: 6765 720a 2020 2020 2020 2020 7069 7065  ger.        pipe
+00051570: 6c69 6e65 5f65 6469 746f 725f 7461 6273  line_editor_tabs
+00051580: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
+00051590: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+000515a0: 772e 7069 7065 6c69 6e65 5f6d 616e 6167  w.pipeline_manag
+000515b0: 6572 2e70 6970 656c 696e 6545 6469 746f  er.pipelineEdito
+000515c0: 7254 6162 730a 2020 2020 2020 2020 290a  rTabs.        ).
+000515d0: 0a20 2020 2020 2020 2023 2041 6464 696e  .        # Addin
+000515e0: 6720 7072 6f63 6573 7365 730a 2020 2020  g processes.    
+000515f0: 2020 2020 7072 6f63 6573 735f 636c 6173      process_clas
+00051600: 7320 3d20 536d 6f6f 7468 0a0a 2020 2020  s = Smooth..    
+00051610: 2020 2020 7069 7065 6c69 6e65 5f65 6469      pipeline_edi
+00051620: 746f 725f 7461 6273 2e67 6574 5f63 7572  tor_tabs.get_cur
+00051630: 7265 6e74 5f65 6469 746f 7228 292e 636c  rent_editor().cl
+00051640: 6963 6b5f 706f 7320 3d20 5150 6f69 6e74  ick_pos = QPoint
+00051650: 2834 3530 2c20 3530 3029 0a20 2020 2020  (450, 500).     
+00051660: 2020 2023 2043 7265 6174 6573 2061 206e     # Creates a n
+00051670: 6f64 6520 6361 6c6c 6564 2022 736d 6f6f  ode called "smoo
+00051680: 7468 5f31 220a 2020 2020 2020 2020 7069  th_1".        pi
+00051690: 7065 6c69 6e65 5f65 6469 746f 725f 7461  peline_editor_ta
+000516a0: 6273 2e67 6574 5f63 7572 7265 6e74 5f65  bs.get_current_e
+000516b0: 6469 746f 7228 292e 6164 645f 6e61 6d65  ditor().add_name
+000516c0: 645f 7072 6f63 6573 7328 0a20 2020 2020  d_process(.     
+000516d0: 2020 2020 2020 2070 726f 6365 7373 5f63         process_c
+000516e0: 6c61 7373 0a20 2020 2020 2020 2029 0a20  lass.        ). 
+000516f0: 2020 2020 2020 2023 2043 7265 6174 6573         # Creates
+00051700: 2061 206e 6f64 6520 6361 6c6c 6564 2022   a node called "
+00051710: 736d 6f6f 7468 5f32 220a 2020 2020 2020  smooth_2".      
+00051720: 2020 7069 7065 6c69 6e65 5f65 6469 746f    pipeline_edito
+00051730: 725f 7461 6273 2e67 6574 5f63 7572 7265  r_tabs.get_curre
+00051740: 6e74 5f65 6469 746f 7228 292e 6164 645f  nt_editor().add_
+00051750: 6e61 6d65 645f 7072 6f63 6573 7328 0a20  named_process(. 
+00051760: 2020 2020 2020 2020 2020 2070 726f 6365             proce
+00051770: 7373 5f63 6c61 7373 0a20 2020 2020 2020  ss_class.       
+00051780: 2029 0a20 2020 2020 2020 2023 2043 7265   ).        # Cre
+00051790: 6174 6573 2061 206e 6f64 6520 6361 6c6c  ates a node call
+000517a0: 6564 2022 736d 6f6f 7468 5f33 220a 2020  ed "smooth_3".  
+000517b0: 2020 2020 2020 7069 7065 6c69 6e65 5f65        pipeline_e
+000517c0: 6469 746f 725f 7461 6273 2e67 6574 5f63  ditor_tabs.get_c
+000517d0: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
+000517e0: 6164 645f 6e61 6d65 645f 7072 6f63 6573  add_named_proces
+000517f0: 7328 0a20 2020 2020 2020 2020 2020 2070  s(.            p
+00051800: 726f 6365 7373 5f63 6c61 7373 0a20 2020  rocess_class.   
+00051810: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+00051820: 7069 7065 6c69 6e65 203d 2070 6970 656c  pipeline = pipel
+00051830: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
+00051840: 6765 745f 6375 7272 656e 745f 7069 7065  get_current_pipe
+00051850: 6c69 6e65 2829 0a0a 2020 2020 2020 2020  line()..        
+00051860: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
+00051870: 2273 6d6f 6f74 685f 3122 2069 6e20 7069  "smooth_1" in pi
+00051880: 7065 6c69 6e65 2e6e 6f64 6573 2e6b 6579  peline.nodes.key
+00051890: 7328 2929 0a20 2020 2020 2020 2073 656c  s()).        sel
+000518a0: 662e 6173 7365 7274 5472 7565 2822 736d  f.assertTrue("sm
+000518b0: 6f6f 7468 5f32 2220 696e 2070 6970 656c  ooth_2" in pipel
+000518c0: 696e 652e 6e6f 6465 732e 6b65 7973 2829  ine.nodes.keys()
 000518d0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-000518e0: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
-000518f0: 2020 2020 2020 2020 312c 0a20 2020 2020          1,.     
-00051900: 2020 2020 2020 206c 656e 2870 6970 656c         len(pipel
-00051910: 696e 652e 6e6f 6465 735b 2273 6d6f 6f74  ine.nodes["smoot
-00051920: 685f 3222 5d2e 706c 7567 735b 225f 736d  h_2"].plugs["_sm
-00051930: 6f6f 7468 6564 5f66 696c 6573 225d 2e6c  oothed_files"].l
-00051940: 696e 6b73 5f74 6f29 2c0a 2020 2020 2020  inks_to),.      
-00051950: 2020 290a 0a20 2020 2020 2020 2070 6970    )..        pip
-00051960: 656c 696e 655f 6564 6974 6f72 5f74 6162  eline_editor_tab
-00051970: 732e 6765 745f 6375 7272 656e 745f 6564  s.get_current_ed
-00051980: 6974 6f72 2829 2e63 7572 7265 6e74 5f6e  itor().current_n
-00051990: 6f64 655f 6e61 6d65 203d 2028 0a20 2020  ode_name = (.   
-000519a0: 2020 2020 2020 2020 2022 736d 6f6f 7468           "smooth
-000519b0: 5f32 220a 2020 2020 2020 2020 290a 2020  _2".        ).  
-000519c0: 2020 2020 2020 7069 7065 6c69 6e65 5f65        pipeline_e
-000519d0: 6469 746f 725f 7461 6273 2e67 6574 5f63  ditor_tabs.get_c
-000519e0: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
-000519f0: 6465 6c5f 6e6f 6465 2829 0a0a 2020 2020  del_node()..    
-00051a00: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
-00051a10: 7275 6528 2273 6d6f 6f74 685f 3122 2069  rue("smooth_1" i
-00051a20: 6e20 7069 7065 6c69 6e65 2e6e 6f64 6573  n pipeline.nodes
-00051a30: 2e6b 6579 7328 2929 0a20 2020 2020 2020  .keys()).       
-00051a40: 2073 656c 662e 6173 7365 7274 4661 6c73   self.assertFals
-00051a50: 6528 2273 6d6f 6f74 685f 3222 2069 6e20  e("smooth_2" in 
-00051a60: 7069 7065 6c69 6e65 2e6e 6f64 6573 2e6b  pipeline.nodes.k
-00051a70: 6579 7328 2929 0a20 2020 2020 2020 2073  eys()).        s
-00051a80: 656c 662e 6173 7365 7274 5472 7565 2822  elf.assertTrue("
-00051a90: 736d 6f6f 7468 5f33 2220 696e 2070 6970  smooth_3" in pip
-00051aa0: 656c 696e 652e 6e6f 6465 732e 6b65 7973  eline.nodes.keys
-00051ab0: 2829 290a 2020 2020 2020 2020 7365 6c66  ()).        self
-00051ac0: 2e61 7373 6572 7445 7175 616c 280a 2020  .assertEqual(.  
-00051ad0: 2020 2020 2020 2020 2020 302c 0a20 2020            0,.   
-00051ae0: 2020 2020 2020 2020 206c 656e 2870 6970           len(pip
-00051af0: 656c 696e 652e 6e6f 6465 735b 2273 6d6f  eline.nodes["smo
-00051b00: 6f74 685f 3122 5d2e 706c 7567 735b 225f  oth_1"].plugs["_
-00051b10: 736d 6f6f 7468 6564 5f66 696c 6573 225d  smoothed_files"]
-00051b20: 2e6c 696e 6b73 5f74 6f29 2c0a 2020 2020  .links_to),.    
-00051b30: 2020 2020 290a 2020 2020 2020 2020 7365      ).        se
-00051b40: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
-00051b50: 2020 2020 2020 2020 2020 2020 302c 206c              0, l
-00051b60: 656e 2870 6970 656c 696e 652e 6e6f 6465  en(pipeline.node
-00051b70: 735b 2273 6d6f 6f74 685f 3322 5d2e 706c  s["smooth_3"].pl
-00051b80: 7567 735b 2269 6e5f 6669 6c65 7322 5d2e  ugs["in_files"].
-00051b90: 6c69 6e6b 735f 6672 6f6d 290a 2020 2020  links_from).    
-00051ba0: 2020 2020 290a 0a20 2020 2020 2020 2070      )..        p
-00051bb0: 6970 656c 696e 655f 6d61 6e61 6765 722e  ipeline_manager.
-00051bc0: 756e 646f 2829 0a20 2020 2020 2020 2073  undo().        s
-00051bd0: 656c 662e 6173 7365 7274 5472 7565 2822  elf.assertTrue("
-00051be0: 736d 6f6f 7468 5f31 2220 696e 2070 6970  smooth_1" in pip
-00051bf0: 656c 696e 652e 6e6f 6465 732e 6b65 7973  eline.nodes.keys
-00051c00: 2829 290a 2020 2020 2020 2020 7365 6c66  ()).        self
-00051c10: 2e61 7373 6572 7454 7275 6528 2273 6d6f  .assertTrue("smo
-00051c20: 6f74 685f 3222 2069 6e20 7069 7065 6c69  oth_2" in pipeli
-00051c30: 6e65 2e6e 6f64 6573 2e6b 6579 7328 2929  ne.nodes.keys())
-00051c40: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00051c50: 7365 7274 5472 7565 2822 736d 6f6f 7468  sertTrue("smooth
-00051c60: 5f33 2220 696e 2070 6970 656c 696e 652e  _3" in pipeline.
-00051c70: 6e6f 6465 732e 6b65 7973 2829 290a 2020  nodes.keys()).  
-00051c80: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00051c90: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
-00051ca0: 2020 2020 312c 206c 656e 2870 6970 656c      1, len(pipel
-00051cb0: 696e 652e 6e6f 6465 735b 2273 6d6f 6f74  ine.nodes["smoot
-00051cc0: 685f 3222 5d2e 706c 7567 735b 2269 6e5f  h_2"].plugs["in_
-00051cd0: 6669 6c65 7322 5d2e 6c69 6e6b 735f 6672  files"].links_fr
-00051ce0: 6f6d 290a 2020 2020 2020 2020 290a 2020  om).        ).  
-00051cf0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00051d00: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
-00051d10: 2020 2020 312c 0a20 2020 2020 2020 2020      1,.         
-00051d20: 2020 206c 656e 2870 6970 656c 696e 652e     len(pipeline.
-00051d30: 6e6f 6465 735b 2273 6d6f 6f74 685f 3122  nodes["smooth_1"
-00051d40: 5d2e 706c 7567 735b 225f 736d 6f6f 7468  ].plugs["_smooth
-00051d50: 6564 5f66 696c 6573 225d 2e6c 696e 6b73  ed_files"].links
-00051d60: 5f74 6f29 2c0a 2020 2020 2020 2020 290a  _to),.        ).
+000518e0: 7373 6572 7454 7275 6528 2273 6d6f 6f74  ssertTrue("smoot
+000518f0: 685f 3322 2069 6e20 7069 7065 6c69 6e65  h_3" in pipeline
+00051900: 2e6e 6f64 6573 2e6b 6579 7328 2929 0a0a  .nodes.keys())..
+00051910: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
+00051920: 5f65 6469 746f 725f 7461 6273 2e67 6574  _editor_tabs.get
+00051930: 5f63 7572 7265 6e74 5f65 6469 746f 7228  _current_editor(
+00051940: 292e 6164 645f 6c69 6e6b 280a 2020 2020  ).add_link(.    
+00051950: 2020 2020 2020 2020 2822 736d 6f6f 7468          ("smooth
+00051960: 5f31 222c 2022 5f73 6d6f 6f74 6865 645f  _1", "_smoothed_
+00051970: 6669 6c65 7322 292c 0a20 2020 2020 2020  files"),.       
+00051980: 2020 2020 2028 2273 6d6f 6f74 685f 3222       ("smooth_2"
+00051990: 2c20 2269 6e5f 6669 6c65 7322 292c 0a20  , "in_files"),. 
+000519a0: 2020 2020 2020 2020 2020 2061 6374 6976             activ
+000519b0: 653d 5472 7565 2c0a 2020 2020 2020 2020  e=True,.        
+000519c0: 2020 2020 7765 616b 3d46 616c 7365 2c0a      weak=False,.
+000519d0: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+000519e0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+000519f0: 7561 6c28 0a20 2020 2020 2020 2020 2020  ual(.           
+00051a00: 2031 2c20 6c65 6e28 7069 7065 6c69 6e65   1, len(pipeline
+00051a10: 2e6e 6f64 6573 5b22 736d 6f6f 7468 5f32  .nodes["smooth_2
+00051a20: 225d 2e70 6c75 6773 5b22 696e 5f66 696c  "].plugs["in_fil
+00051a30: 6573 225d 2e6c 696e 6b73 5f66 726f 6d29  es"].links_from)
+00051a40: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00051a50: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00051a60: 7561 6c28 0a20 2020 2020 2020 2020 2020  ual(.           
+00051a70: 2031 2c0a 2020 2020 2020 2020 2020 2020   1,.            
+00051a80: 6c65 6e28 7069 7065 6c69 6e65 2e6e 6f64  len(pipeline.nod
+00051a90: 6573 5b22 736d 6f6f 7468 5f31 225d 2e70  es["smooth_1"].p
+00051aa0: 6c75 6773 5b22 5f73 6d6f 6f74 6865 645f  lugs["_smoothed_
+00051ab0: 6669 6c65 7322 5d2e 6c69 6e6b 735f 746f  files"].links_to
+00051ac0: 292c 0a20 2020 2020 2020 2029 0a0a 2020  ),.        )..  
+00051ad0: 2020 2020 2020 7069 7065 6c69 6e65 5f65        pipeline_e
+00051ae0: 6469 746f 725f 7461 6273 2e67 6574 5f63  ditor_tabs.get_c
+00051af0: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
+00051b00: 6164 645f 6c69 6e6b 280a 2020 2020 2020  add_link(.      
+00051b10: 2020 2020 2020 2822 736d 6f6f 7468 5f32        ("smooth_2
+00051b20: 222c 2022 5f73 6d6f 6f74 6865 645f 6669  ", "_smoothed_fi
+00051b30: 6c65 7322 292c 0a20 2020 2020 2020 2020  les"),.         
+00051b40: 2020 2028 2273 6d6f 6f74 685f 3322 2c20     ("smooth_3", 
+00051b50: 2269 6e5f 6669 6c65 7322 292c 0a20 2020  "in_files"),.   
+00051b60: 2020 2020 2020 2020 2061 6374 6976 653d           active=
+00051b70: 5472 7565 2c0a 2020 2020 2020 2020 2020  True,.          
+00051b80: 2020 7765 616b 3d46 616c 7365 2c0a 2020    weak=False,.  
+00051b90: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+00051ba0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00051bb0: 6c28 0a20 2020 2020 2020 2020 2020 2031  l(.            1
+00051bc0: 2c20 6c65 6e28 7069 7065 6c69 6e65 2e6e  , len(pipeline.n
+00051bd0: 6f64 6573 5b22 736d 6f6f 7468 5f33 225d  odes["smooth_3"]
+00051be0: 2e70 6c75 6773 5b22 696e 5f66 696c 6573  .plugs["in_files
+00051bf0: 225d 2e6c 696e 6b73 5f66 726f 6d29 0a20  "].links_from). 
+00051c00: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00051c10: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00051c20: 6c28 0a20 2020 2020 2020 2020 2020 2031  l(.            1
+00051c30: 2c0a 2020 2020 2020 2020 2020 2020 6c65  ,.            le
+00051c40: 6e28 7069 7065 6c69 6e65 2e6e 6f64 6573  n(pipeline.nodes
+00051c50: 5b22 736d 6f6f 7468 5f32 225d 2e70 6c75  ["smooth_2"].plu
+00051c60: 6773 5b22 5f73 6d6f 6f74 6865 645f 6669  gs["_smoothed_fi
+00051c70: 6c65 7322 5d2e 6c69 6e6b 735f 746f 292c  les"].links_to),
+00051c80: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+00051c90: 2020 2020 7069 7065 6c69 6e65 5f65 6469      pipeline_edi
+00051ca0: 746f 725f 7461 6273 2e67 6574 5f63 7572  tor_tabs.get_cur
+00051cb0: 7265 6e74 5f65 6469 746f 7228 292e 6375  rent_editor().cu
+00051cc0: 7272 656e 745f 6e6f 6465 5f6e 616d 6520  rrent_node_name 
+00051cd0: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
+00051ce0: 2273 6d6f 6f74 685f 3222 0a20 2020 2020  "smooth_2".     
+00051cf0: 2020 2029 0a20 2020 2020 2020 2070 6970     ).        pip
+00051d00: 656c 696e 655f 6564 6974 6f72 5f74 6162  eline_editor_tab
+00051d10: 732e 6765 745f 6375 7272 656e 745f 6564  s.get_current_ed
+00051d20: 6974 6f72 2829 2e64 656c 5f6e 6f64 6528  itor().del_node(
+00051d30: 290a 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00051d40: 6173 7365 7274 5472 7565 2822 736d 6f6f  assertTrue("smoo
+00051d50: 7468 5f31 2220 696e 2070 6970 656c 696e  th_1" in pipelin
+00051d60: 652e 6e6f 6465 732e 6b65 7973 2829 290a  e.nodes.keys()).
 00051d70: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00051d80: 6572 7445 7175 616c 280a 2020 2020 2020  ertEqual(.      
-00051d90: 2020 2020 2020 312c 206c 656e 2870 6970        1, len(pip
-00051da0: 656c 696e 652e 6e6f 6465 735b 2273 6d6f  eline.nodes["smo
-00051db0: 6f74 685f 3322 5d2e 706c 7567 735b 2269  oth_3"].plugs["i
-00051dc0: 6e5f 6669 6c65 7322 5d2e 6c69 6e6b 735f  n_files"].links_
-00051dd0: 6672 6f6d 290a 2020 2020 2020 2020 290a  from).        ).
-00051de0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00051df0: 6572 7445 7175 616c 280a 2020 2020 2020  ertEqual(.      
-00051e00: 2020 2020 2020 312c 0a20 2020 2020 2020        1,.       
-00051e10: 2020 2020 206c 656e 2870 6970 656c 696e       len(pipelin
-00051e20: 652e 6e6f 6465 735b 2273 6d6f 6f74 685f  e.nodes["smooth_
-00051e30: 3222 5d2e 706c 7567 735b 225f 736d 6f6f  2"].plugs["_smoo
-00051e40: 7468 6564 5f66 696c 6573 225d 2e6c 696e  thed_files"].lin
-00051e50: 6b73 5f74 6f29 2c0a 2020 2020 2020 2020  ks_to),.        
-00051e60: 290a 0a20 2020 2020 2020 2070 6970 656c  )..        pipel
-00051e70: 696e 655f 6d61 6e61 6765 722e 7265 646f  ine_manager.redo
-00051e80: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
-00051e90: 6173 7365 7274 5472 7565 2822 736d 6f6f  assertTrue("smoo
-00051ea0: 7468 5f31 2220 696e 2070 6970 656c 696e  th_1" in pipelin
-00051eb0: 652e 6e6f 6465 732e 6b65 7973 2829 290a  e.nodes.keys()).
-00051ec0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00051ed0: 6572 7446 616c 7365 2822 736d 6f6f 7468  ertFalse("smooth
-00051ee0: 5f32 2220 696e 2070 6970 656c 696e 652e  _2" in pipeline.
-00051ef0: 6e6f 6465 732e 6b65 7973 2829 290a 2020  nodes.keys()).  
+00051d80: 6572 7446 616c 7365 2822 736d 6f6f 7468  ertFalse("smooth
+00051d90: 5f32 2220 696e 2070 6970 656c 696e 652e  _2" in pipeline.
+00051da0: 6e6f 6465 732e 6b65 7973 2829 290a 2020  nodes.keys()).  
+00051db0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00051dc0: 7454 7275 6528 2273 6d6f 6f74 685f 3322  tTrue("smooth_3"
+00051dd0: 2069 6e20 7069 7065 6c69 6e65 2e6e 6f64   in pipeline.nod
+00051de0: 6573 2e6b 6579 7328 2929 0a20 2020 2020  es.keys()).     
+00051df0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00051e00: 7561 6c28 0a20 2020 2020 2020 2020 2020  ual(.           
+00051e10: 2030 2c0a 2020 2020 2020 2020 2020 2020   0,.            
+00051e20: 6c65 6e28 7069 7065 6c69 6e65 2e6e 6f64  len(pipeline.nod
+00051e30: 6573 5b22 736d 6f6f 7468 5f31 225d 2e70  es["smooth_1"].p
+00051e40: 6c75 6773 5b22 5f73 6d6f 6f74 6865 645f  lugs["_smoothed_
+00051e50: 6669 6c65 7322 5d2e 6c69 6e6b 735f 746f  files"].links_to
+00051e60: 292c 0a20 2020 2020 2020 2029 0a20 2020  ),.        ).   
+00051e70: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00051e80: 4571 7561 6c28 0a20 2020 2020 2020 2020  Equal(.         
+00051e90: 2020 2030 2c20 6c65 6e28 7069 7065 6c69     0, len(pipeli
+00051ea0: 6e65 2e6e 6f64 6573 5b22 736d 6f6f 7468  ne.nodes["smooth
+00051eb0: 5f33 225d 2e70 6c75 6773 5b22 696e 5f66  _3"].plugs["in_f
+00051ec0: 696c 6573 225d 2e6c 696e 6b73 5f66 726f  iles"].links_fro
+00051ed0: 6d29 0a20 2020 2020 2020 2029 0a0a 2020  m).        )..  
+00051ee0: 2020 2020 2020 7069 7065 6c69 6e65 5f6d        pipeline_m
+00051ef0: 616e 6167 6572 2e75 6e64 6f28 290a 2020  anager.undo().  
 00051f00: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00051f10: 7454 7275 6528 2273 6d6f 6f74 685f 3322  tTrue("smooth_3"
+00051f10: 7454 7275 6528 2273 6d6f 6f74 685f 3122  tTrue("smooth_1"
 00051f20: 2069 6e20 7069 7065 6c69 6e65 2e6e 6f64   in pipeline.nod
 00051f30: 6573 2e6b 6579 7328 2929 0a20 2020 2020  es.keys()).     
-00051f40: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00051f50: 7561 6c28 0a20 2020 2020 2020 2020 2020  ual(.           
-00051f60: 2030 2c0a 2020 2020 2020 2020 2020 2020   0,.            
-00051f70: 6c65 6e28 7069 7065 6c69 6e65 2e6e 6f64  len(pipeline.nod
-00051f80: 6573 5b22 736d 6f6f 7468 5f31 225d 2e70  es["smooth_1"].p
-00051f90: 6c75 6773 5b22 5f73 6d6f 6f74 6865 645f  lugs["_smoothed_
-00051fa0: 6669 6c65 7322 5d2e 6c69 6e6b 735f 746f  files"].links_to
-00051fb0: 292c 0a20 2020 2020 2020 2029 0a20 2020  ),.        ).   
-00051fc0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00051fd0: 4571 7561 6c28 0a20 2020 2020 2020 2020  Equal(.         
-00051fe0: 2020 2030 2c20 6c65 6e28 7069 7065 6c69     0, len(pipeli
-00051ff0: 6e65 2e6e 6f64 6573 5b22 736d 6f6f 7468  ne.nodes["smooth
-00052000: 5f33 225d 2e70 6c75 6773 5b22 696e 5f66  _3"].plugs["in_f
-00052010: 696c 6573 225d 2e6c 696e 6b73 5f66 726f  iles"].links_fro
-00052020: 6d29 0a20 2020 2020 2020 2029 0a0a 2020  m).        )..  
-00052030: 2020 6465 6620 7465 7374 5f65 6e64 5f70    def test_end_p
-00052040: 726f 6772 6573 7328 7365 6c66 293a 0a20  rogress(self):. 
-00052050: 2020 2020 2020 2022 2222 4372 6561 7465         """Create
-00052060: 7320 6120 7069 7065 6c69 6e65 206d 616e  s a pipeline man
-00052070: 6167 6572 2070 726f 6772 6573 7320 6f62  ager progress ob
-00052080: 6a65 6374 2061 6e64 2074 7269 6573 2074  ject and tries t
-00052090: 6f20 656e 6420 6974 2e0a 0a20 2020 2020  o end it...     
-000520a0: 2020 202d 2054 6573 7473 2052 756e 5072     - Tests RunPr
-000520b0: 6f67 7265 7373 2e65 6e64 5f70 726f 6772  ogress.end_progr
-000520c0: 6573 730a 2020 2020 2020 2020 2222 220a  ess.        """.
-000520d0: 0a20 2020 2020 2020 2023 2053 6574 7320  .        # Sets 
-000520e0: 7368 6f72 7463 7574 7320 666f 7220 6f62  shortcuts for ob
-000520f0: 6a65 6374 7320 7468 6174 2061 7265 206f  jects that are o
-00052100: 6674 656e 2075 7365 640a 2020 2020 2020  ften used.      
-00052110: 2020 7070 6c5f 6d61 6e61 6765 7220 3d20    ppl_manager = 
-00052120: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00052130: 2e70 6970 656c 696e 655f 6d61 6e61 6765  .pipeline_manage
-00052140: 720a 2020 2020 2020 2020 7070 6c5f 6564  r.        ppl_ed
-00052150: 745f 7461 6273 203d 2070 706c 5f6d 616e  t_tabs = ppl_man
-00052160: 6167 6572 2e70 6970 656c 696e 6545 6469  ager.pipelineEdi
-00052170: 746f 7254 6162 730a 2020 2020 2020 2020  torTabs.        
-00052180: 7070 6c20 3d20 7070 6c5f 6564 745f 7461  ppl = ppl_edt_ta
-00052190: 6273 2e67 6574 5f63 7572 7265 6e74 5f70  bs.get_current_p
-000521a0: 6970 656c 696e 6528 290a 0a20 2020 2020  ipeline()..     
-000521b0: 2020 2023 2043 7265 6174 6573 2061 2027     # Creates a '
-000521c0: 5275 6e50 726f 6772 6573 7327 206f 626a  RunProgress' obj
-000521d0: 6563 740a 2020 2020 2020 2020 7070 6c5f  ect.        ppl_
-000521e0: 6d61 6e61 6765 722e 7072 6f67 7265 7373  manager.progress
-000521f0: 203d 2052 756e 5072 6f67 7265 7373 2870   = RunProgress(p
-00052200: 706c 5f6d 616e 6167 6572 290a 0a20 2020  pl_manager)..   
-00052210: 2020 2020 2023 2027 7070 6c5f 6d61 6e61       # 'ppl_mana
-00052220: 6765 722e 776f 726b 6572 2720 646f 6573  ger.worker' does
-00052230: 206e 6f74 2068 6176 6520 6120 2765 7865   not have a 'exe
-00052240: 635f 6964 270a 2020 2020 2020 2020 7070  c_id'.        pp
-00052250: 6c5f 6d61 6e61 6765 722e 7072 6f67 7265  l_manager.progre
-00052260: 7373 2e65 6e64 5f70 726f 6772 6573 7328  ss.end_progress(
-00052270: 290a 0a20 2020 2020 2020 2023 204d 6f63  )..        # Moc
-00052280: 6b73 2061 6e20 2765 7865 635f 6964 2720  ks an 'exec_id' 
-00052290: 616e 6420 616e 2027 6765 745f 7069 7065  and an 'get_pipe
-000522a0: 6c69 6e65 5f6f 725f 7072 6f63 6573 7327  line_or_process'
-000522b0: 0a20 2020 2020 2020 2070 706c 5f6d 616e  .        ppl_man
-000522c0: 6167 6572 2e70 726f 6772 6573 732e 776f  ager.progress.wo
-000522d0: 726b 6572 2e65 7865 635f 6964 203d 2073  rker.exec_id = s
-000522e0: 7472 2875 7569 642e 7575 6964 3428 2929  tr(uuid.uuid4())
-000522f0: 0a20 2020 2020 2020 2065 6e67 696e 6520  .        engine 
-00052300: 3d20 7070 6c2e 6765 745f 7374 7564 795f  = ppl.get_study_
-00052310: 636f 6e66 6967 2829 2e65 6e67 696e 650a  config().engine.
-00052320: 2020 2020 2020 2020 656e 6769 6e65 2e72          engine.r
-00052330: 6169 7365 5f66 6f72 5f73 7461 7475 7320  aise_for_status 
-00052340: 3d20 4d6f 636b 2829 0a0a 2020 2020 2020  = Mock()..      
-00052350: 2020 2320 456e 6473 2074 6865 2070 726f    # Ends the pro
-00052360: 6772 6573 7320 7769 7468 2073 7563 6365  gress with succe
-00052370: 7373 0a20 2020 2020 2020 2070 706c 5f6d  ss.        ppl_m
-00052380: 616e 6167 6572 2e70 726f 6772 6573 732e  anager.progress.
-00052390: 656e 645f 7072 6f67 7265 7373 2829 0a0a  end_progress()..
-000523a0: 2020 2020 2020 2020 656e 6769 6e65 2e72          engine.r
-000523b0: 6169 7365 5f66 6f72 5f73 7461 7475 732e  aise_for_status.
-000523c0: 6173 7365 7274 5f63 616c 6c65 645f 6f6e  assert_called_on
-000523d0: 6365 5f77 6974 6828 0a20 2020 2020 2020  ce_with(.       
-000523e0: 2020 2020 2070 706c 5f6d 616e 6167 6572       ppl_manager
-000523f0: 2e70 726f 6772 6573 732e 776f 726b 6572  .progress.worker
-00052400: 2e73 7461 7475 732c 0a20 2020 2020 2020  .status,.       
-00052410: 2020 2020 2070 706c 5f6d 616e 6167 6572       ppl_manager
-00052420: 2e70 726f 6772 6573 732e 776f 726b 6572  .progress.worker
-00052430: 2e65 7865 635f 6964 2c0a 2020 2020 2020  .exec_id,.      
-00052440: 2020 290a 0a20 2020 2020 2020 2023 204d    )..        # M
-00052450: 6f63 6b73 2061 2027 576f 726b 666c 6f77  ocks a 'Workflow
-00052460: 4578 6563 7574 696f 6e45 7272 6f72 2720  ExecutionError' 
-00052470: 6578 6365 7074 696f 6e0a 2020 2020 2020  exception.      
-00052480: 2020 656e 6769 6e65 2e72 6169 7365 5f66    engine.raise_f
-00052490: 6f72 5f73 7461 7475 7320 3d20 4d6f 636b  or_status = Mock
-000524a0: 280a 2020 2020 2020 2020 2020 2020 7369  (.            si
-000524b0: 6465 5f65 6666 6563 743d 576f 726b 666c  de_effect=Workfl
-000524c0: 6f77 4578 6563 7574 696f 6e45 7272 6f72  owExecutionError
-000524d0: 287b 7d2c 207b 7d2c 2076 6572 626f 7365  ({}, {}, verbose
-000524e0: 3d46 616c 7365 290a 2020 2020 2020 2020  =False).        
-000524f0: 290a 0a20 2020 2020 2020 2023 2052 6169  )..        # Rai
-00052500: 7365 7320 6120 2757 6f72 6b66 6c6f 7745  ses a 'WorkflowE
-00052510: 7865 6375 7469 6f6e 4572 726f 7227 2077  xecutionError' w
-00052520: 6869 6c65 2065 6e64 696e 6720 7072 6f67  hile ending prog
-00052530: 7265 7373 0a20 2020 2020 2020 2023 2070  ress.        # p
-00052540: 706c 5f6d 616e 6167 6572 2e70 726f 6772  pl_manager.progr
-00052550: 6573 732e 656e 645f 7072 6f67 7265 7373  ess.end_progress
-00052560: 2829 0a20 2020 2020 2020 2023 2046 4958  ().        # FIX
-00052570: 4d45 3a20 7468 6520 6162 6f76 6520 6361  ME: the above ca
-00052580: 6c6c 2074 6f20 7468 6520 6675 6e63 7469  ll to the functi
-00052590: 6f6e 206c 6561 6473 2074 6f20 6120 5365  on leads to a Se
-000525a0: 676d 656e 7461 7469 6f6e 0a20 2020 2020  gmentation.     
-000525b0: 2020 2023 2020 2020 2020 2020 6661 756c     #        faul
-000525c0: 7420 7768 656e 2074 6865 2074 6573 7420  t when the test 
-000525d0: 726f 7574 696e 6520 6973 206c 6175 6e63  routine is launc
-000525e0: 6865 6420 696e 2041 7070 5665 796f 722e  hed in AppVeyor.
-000525f0: 0a0a 2020 2020 6465 6620 7465 7374 5f67  ..    def test_g
-00052600: 6172 6261 6765 5f63 6f6c 6c65 6374 2873  arbage_collect(s
-00052610: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
-00052620: 224d 6f63 6b73 2073 6576 6572 616c 206f  "Mocks several o
-00052630: 626a 6563 7473 206f 6620 7468 6520 7069  bjects of the pi
-00052640: 7065 6c69 6e65 206d 616e 6167 6572 2061  peline manager a
-00052650: 6e64 2063 6f6c 6c65 6374 7320 7468 650a  nd collects the.
-00052660: 2020 2020 2020 2020 6761 7262 6167 6520          garbage 
-00052670: 6f66 2074 6865 2070 6970 656c 696e 652e  of the pipeline.
-00052680: 0a0a 2020 2020 2020 2020 2d20 5465 7374  ..        - Test
-00052690: 733a 2050 6970 656c 696e 654d 616e 6167  s: PipelineManag
-000526a0: 6572 5461 622e 7465 7374 5f67 6172 6261  erTab.test_garba
-000526b0: 6765 5f63 6f6c 6c65 6374 0a20 2020 2020  ge_collect.     
-000526c0: 2020 2022 2222 0a0a 2020 2020 2020 2020     """..        
-000526d0: 7070 6c5f 6d61 6e61 6765 7220 3d20 7365  ppl_manager = se
-000526e0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
-000526f0: 6970 656c 696e 655f 6d61 6e61 6765 720a  ipeline_manager.
-00052700: 0a20 2020 2020 2020 2023 2323 2049 4e54  .        ### INT
-00052710: 4547 5241 5445 4420 5445 5354 0a0a 2020  EGRATED TEST..  
-00052720: 2020 2020 2020 2320 4d6f 636b 7320 7468        # Mocks th
-00052730: 6520 2769 6e69 7469 616c 697a 6564 2720  e 'initialized' 
-00052740: 6f62 6a65 6374 0a20 2020 2020 2020 2070  object.        p
-00052750: 706c 5f6d 616e 6167 6572 2e70 6970 656c  pl_manager.pipel
-00052760: 696e 6545 6469 746f 7254 6162 732e 6765  ineEditorTabs.ge
-00052770: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
-00052780: 2829 2e69 6e69 7469 616c 697a 6564 203d  ().initialized =
-00052790: 2054 7275 650a 0a20 2020 2020 2020 2023   True..        #
-000527a0: 2043 6f6c 6c65 6374 7320 7468 6520 6761   Collects the ga
-000527b0: 7262 6167 650a 2020 2020 2020 2020 7070  rbage.        pp
-000527c0: 6c5f 6d61 6e61 6765 722e 6761 7262 6167  l_manager.garbag
-000527d0: 655f 636f 6c6c 6563 7428 290a 0a20 2020  e_collect()..   
-000527e0: 2020 2020 2023 2041 7373 6572 7473 2074       # Asserts t
-000527f0: 6861 7420 7468 6520 2769 6e69 7469 616c  hat the 'initial
-00052800: 697a 6564 2720 6f62 6a65 6374 2063 6861  ized' object cha
-00052810: 6e67 6564 2073 7461 7465 0a20 2020 2020  nged state.     
-00052820: 2020 2073 656c 662e 6173 7365 7274 4661     self.assertFa
-00052830: 6c73 6528 0a20 2020 2020 2020 2020 2020  lse(.           
-00052840: 2070 706c 5f6d 616e 6167 6572 2e70 6970   ppl_manager.pip
-00052850: 656c 696e 6545 6469 746f 7254 6162 732e  elineEditorTabs.
-00052860: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
-00052870: 6f72 2829 2e69 6e69 7469 616c 697a 6564  or().initialized
-00052880: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-00052890: 2020 2020 2323 2320 4953 4f4c 4154 4544      ### ISOLATED
-000528a0: 2054 4553 540a 0a20 2020 2020 2020 2023   TEST..        #
-000528b0: 204d 6f63 6b73 2061 6761 696e 2074 6865   Mocks again the
-000528c0: 2027 696e 6974 6961 6c69 7a65 6427 206f   'initialized' o
-000528d0: 626a 6563 740a 2020 2020 2020 2020 7070  bject.        pp
-000528e0: 6c5f 6d61 6e61 6765 722e 7069 7065 6c69  l_manager.pipeli
-000528f0: 6e65 4564 6974 6f72 5461 6273 2e67 6574  neEditorTabs.get
-00052900: 5f63 7572 7265 6e74 5f65 6469 746f 7228  _current_editor(
-00052910: 292e 696e 6974 6961 6c69 7a65 6420 3d20  ).initialized = 
-00052920: 5472 7565 0a0a 2020 2020 2020 2020 2320  True..        # 
-00052930: 4d6f 636b 7320 7468 6520 6d65 7468 6f64  Mocks the method
-00052940: 7320 7573 6564 2069 6e20 7468 6520 7465  s used in the te
-00052950: 7374 0a20 2020 2020 2020 2070 706c 5f6d  st.        ppl_m
-00052960: 616e 6167 6572 2e70 6f73 7470 726f 6365  anager.postproce
-00052970: 7373 5f70 6970 656c 696e 655f 6578 6563  ss_pipeline_exec
-00052980: 7574 696f 6e20 3d20 4d61 6769 634d 6f63  ution = MagicMoc
-00052990: 6b28 290a 2020 2020 2020 2020 7070 6c5f  k().        ppl_
-000529a0: 6d61 6e61 6765 722e 7072 6f6a 6563 742e  manager.project.
-000529b0: 636c 6561 6e75 705f 6f72 7068 616e 5f6e  cleanup_orphan_n
-000529c0: 6f6e 6578 6973 7469 6e67 5f66 696c 6573  onexisting_files
-000529d0: 203d 204d 6167 6963 4d6f 636b 2829 0a20   = MagicMock(). 
-000529e0: 2020 2020 2020 2070 706c 5f6d 616e 6167         ppl_manag
-000529f0: 6572 2e70 726f 6a65 6374 2e63 6c65 616e  er.project.clean
-00052a00: 7570 5f6f 7270 6861 6e5f 6869 7374 6f72  up_orphan_histor
-00052a10: 7920 3d20 4d61 6769 634d 6f63 6b28 290a  y = MagicMock().
-00052a20: 2020 2020 2020 2020 280a 2020 2020 2020          (.      
-00052a30: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
-00052a40: 722e 6d61 696e 5f77 696e 646f 772e 6461  r.main_window.da
-00052a50: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
-00052a60: 5f64 6174 612e 7570 6461 7465 5f74 6162  _data.update_tab
-00052a70: 6c65 0a20 2020 2020 2020 2029 203d 204d  le.        ) = M
-00052a80: 6167 6963 4d6f 636b 2829 0a20 2020 2020  agicMock().     
-00052a90: 2020 2070 706c 5f6d 616e 6167 6572 2e75     ppl_manager.u
-00052aa0: 7064 6174 655f 7573 6572 5f62 7574 746f  pdate_user_butto
-00052ab0: 6e73 5f73 7461 7465 7320 3d20 4d61 6769  ns_states = Magi
-00052ac0: 634d 6f63 6b28 290a 0a20 2020 2020 2020  cMock()..       
-00052ad0: 2023 2043 6f6c 6c65 6374 7320 7468 6520   # Collects the 
-00052ae0: 6761 7262 6167 650a 2020 2020 2020 2020  garbage.        
-00052af0: 7070 6c5f 6d61 6e61 6765 722e 6761 7262  ppl_manager.garb
-00052b00: 6167 655f 636f 6c6c 6563 7428 290a 0a20  age_collect().. 
-00052b10: 2020 2020 2020 2023 2041 7373 6572 7473         # Asserts
-00052b20: 2074 6861 7420 7468 6520 2769 6e69 7469   that the 'initi
-00052b30: 616c 697a 6564 2720 6f62 6a65 6374 2063  alized' object c
-00052b40: 6861 6e67 6564 2073 7461 7465 0a20 2020  hanged state.   
-00052b50: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00052b60: 4661 6c73 6528 0a20 2020 2020 2020 2020  False(.         
-00052b70: 2020 2070 706c 5f6d 616e 6167 6572 2e70     ppl_manager.p
-00052b80: 6970 656c 696e 6545 6469 746f 7254 6162  ipelineEditorTab
-00052b90: 732e 6765 745f 6375 7272 656e 745f 6564  s.get_current_ed
-00052ba0: 6974 6f72 2829 2e69 6e69 7469 616c 697a  itor().initializ
-00052bb0: 6564 0a20 2020 2020 2020 2029 0a0a 2020  ed.        )..  
-00052bc0: 2020 2020 2020 2320 4173 7365 7274 7320        # Asserts 
-00052bd0: 7468 6174 2074 6865 206d 6f63 6b65 6420  that the mocked 
-00052be0: 6d65 7468 6f64 7320 7765 7265 2063 616c  methods were cal
-00052bf0: 6c65 6420 6173 2065 7870 6563 7465 640a  led as expected.
-00052c00: 2020 2020 2020 2020 7070 6c5f 6d61 6e61          ppl_mana
-00052c10: 6765 722e 706f 7374 7072 6f63 6573 735f  ger.postprocess_
-00052c20: 7069 7065 6c69 6e65 5f65 7865 6375 7469  pipeline_executi
-00052c30: 6f6e 2e61 7373 6572 745f 6361 6c6c 6564  on.assert_called
-00052c40: 5f6f 6e63 655f 7769 7468 2829 0a20 2020  _once_with().   
-00052c50: 2020 2020 2028 0a20 2020 2020 2020 2020       (.         
-00052c60: 2020 2070 706c 5f6d 616e 6167 6572 2e70     ppl_manager.p
-00052c70: 726f 6a65 6374 2e63 6c65 616e 7570 5f6f  roject.cleanup_o
-00052c80: 7270 6861 6e5f 6e6f 6e65 7869 7374 696e  rphan_nonexistin
-00052c90: 675f 6669 6c65 732e 6173 7365 7274 5f63  g_files.assert_c
-00052ca0: 616c 6c65 645f 6f6e 6365 5f77 6974 6828  alled_once_with(
-00052cb0: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
-00052cc0: 2020 2020 7070 6c5f 6d61 6e61 6765 722e      ppl_manager.
-00052cd0: 7072 6f6a 6563 742e 636c 6561 6e75 705f  project.cleanup_
-00052ce0: 6f72 7068 616e 5f68 6973 746f 7279 2e61  orphan_history.a
-00052cf0: 7373 6572 745f 6361 6c6c 6564 5f6f 6e63  ssert_called_onc
-00052d00: 655f 7769 7468 2829 0a20 2020 2020 2020  e_with().       
-00052d10: 2028 0a20 2020 2020 2020 2020 2020 2070   (.            p
-00052d20: 706c 5f6d 616e 6167 6572 2e6d 6169 6e5f  pl_manager.main_
-00052d30: 7769 6e64 6f77 2e64 6174 615f 6272 6f77  window.data_brow
-00052d40: 7365 722e 7461 626c 655f 6461 7461 2e75  ser.table_data.u
-00052d50: 7064 6174 655f 7461 626c 652e 6173 7365  pdate_table.asse
-00052d60: 7274 5f63 616c 6c65 645f 6f6e 6365 5f77  rt_called_once_w
-00052d70: 6974 6828 290a 2020 2020 2020 2020 290a  ith().        ).
-00052d80: 2020 2020 2020 2020 7070 6c5f 6d61 6e61          ppl_mana
-00052d90: 6765 722e 7570 6461 7465 5f75 7365 725f  ger.update_user_
-00052da0: 6275 7474 6f6e 735f 7374 6174 6573 2e61  buttons_states.a
-00052db0: 7373 6572 745f 6361 6c6c 6564 5f6f 6e63  ssert_called_onc
-00052dc0: 655f 7769 7468 2829 0a0a 2020 2020 6465  e_with()..    de
-00052dd0: 6620 7465 7374 5f67 6574 5f63 6170 7375  f test_get_capsu
-00052de0: 6c5f 656e 6769 6e65 2873 656c 6629 3a0a  l_engine(self):.
-00052df0: 2020 2020 2020 2020 2222 224d 6f63 6b73          """Mocks
-00052e00: 2061 6e20 6f62 6a65 6374 2069 6e20 7468   an object in th
-00052e10: 6520 7069 7065 6c69 6e65 206d 616e 6167  e pipeline manag
-00052e20: 6572 2061 6e64 2067 6574 7320 7468 6520  er and gets the 
-00052e30: 6361 7073 756c 2065 6e67 696e 650a 2020  capsul engine.  
-00052e40: 2020 2020 2020 6f66 2074 6865 2070 6970        of the pip
-00052e50: 656c 696e 652e 0a0a 2020 2020 2020 2020  eline...        
-00052e60: 2d20 5465 7374 733a 2050 6970 656c 696e  - Tests: Pipelin
-00052e70: 654d 616e 6167 6572 5461 622e 6765 745f  eManagerTab.get_
-00052e80: 6361 7073 756c 5f65 6e67 696e 650a 2020  capsul_engine.  
-00052e90: 2020 2020 2020 2222 220a 0a20 2020 2020        """..     
-00052ea0: 2020 2070 706c 5f6d 616e 6167 6572 203d     ppl_manager =
-00052eb0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-00052ec0: 772e 7069 7065 6c69 6e65 5f6d 616e 6167  w.pipeline_manag
-00052ed0: 6572 0a0a 2020 2020 2020 2020 2323 2320  er..        ### 
-00052ee0: 494e 5445 4752 4154 4544 0a0a 2020 2020  INTEGRATED..    
-00052ef0: 2020 2020 2320 4765 7473 2074 6865 2063      # Gets the c
-00052f00: 6170 7375 6c20 656e 6769 6e65 0a20 2020  apsul engine.   
-00052f10: 2020 2020 2063 6170 7375 6c5f 656e 6769       capsul_engi
-00052f20: 6e65 203d 2070 706c 5f6d 616e 6167 6572  ne = ppl_manager
-00052f30: 2e67 6574 5f63 6170 7375 6c5f 656e 6769  .get_capsul_engi
-00052f40: 6e65 2829 0a0a 2020 2020 2020 2020 2320  ne()..        # 
-00052f50: 4173 7365 7274 7320 7468 6174 2074 6865  Asserts that the
-00052f60: 2027 6361 7073 756c 5f65 6e67 696e 6527   'capsul_engine'
-00052f70: 2069 7320 6f66 2063 6c61 7373 2027 4361   is of class 'Ca
-00052f80: 7073 756c 456e 6769 6e65 270a 2020 2020  psulEngine'.    
-00052f90: 2020 2020 7365 6c66 2e61 7373 6572 7449      self.assertI
-00052fa0: 7349 6e73 7461 6e63 6528 6361 7073 756c  sInstance(capsul
-00052fb0: 5f65 6e67 696e 652c 2043 6170 7375 6c45  _engine, CapsulE
-00052fc0: 6e67 696e 6529 0a0a 2020 2020 2020 2020  ngine)..        
-00052fd0: 2323 2320 4953 4f4c 4154 4544 0a20 2020  ### ISOLATED.   
-00052fe0: 2020 2020 2070 706c 5f6d 616e 6167 6572       ppl_manager
-00052ff0: 2e70 6970 656c 696e 6545 6469 746f 7254  .pipelineEditorT
-00053000: 6162 732e 6765 745f 6361 7073 756c 5f65  abs.get_capsul_e
-00053010: 6e67 696e 6520 3d20 4d61 6769 634d 6f63  ngine = MagicMoc
-00053020: 6b28 290a 0a20 2020 2020 2020 2023 2047  k()..        # G
-00053030: 6574 7320 7468 6520 6361 7073 756c 2065  ets the capsul e
-00053040: 6e67 696e 650a 2020 2020 2020 2020 5f20  ngine.        _ 
-00053050: 3d20 7070 6c5f 6d61 6e61 6765 722e 6765  = ppl_manager.ge
-00053060: 745f 6361 7073 756c 5f65 6e67 696e 6528  t_capsul_engine(
-00053070: 290a 0a20 2020 2020 2020 2023 2041 7373  )..        # Ass
-00053080: 6572 7473 2074 6861 7420 7468 6520 6d6f  erts that the mo
-00053090: 636b 6564 206d 6574 686f 6420 7761 7320  cked method was 
-000530a0: 6361 6c6c 6564 2061 7320 6578 7065 6374  called as expect
-000530b0: 6564 0a20 2020 2020 2020 2028 0a20 2020  ed.        (.   
-000530c0: 2020 2020 2020 2020 2070 706c 5f6d 616e           ppl_man
-000530d0: 6167 6572 2e70 6970 656c 696e 6545 6469  ager.pipelineEdi
-000530e0: 746f 7254 6162 732e 6765 745f 6361 7073  torTabs.get_caps
-000530f0: 756c 5f65 6e67 696e 652e 6173 7365 7274  ul_engine.assert
-00053100: 5f63 616c 6c65 645f 6f6e 6365 5f77 6974  _called_once_wit
-00053110: 6828 290a 2020 2020 2020 2020 290a 0a20  h().        ).. 
-00053120: 2020 2064 6566 2074 6573 745f 6765 745f     def test_get_
-00053130: 6d69 7373 696e 675f 6d61 6e64 6174 6f72  missing_mandator
-00053140: 795f 7061 7261 6d65 7465 7273 2873 656c  y_parameters(sel
-00053150: 6629 3a0a 2020 2020 2020 2020 2222 2241  f):.        """A
-00053160: 6464 7320 6120 7072 6f63 6573 732c 2065  dds a process, e
-00053170: 7870 6f72 7473 2069 6e70 7574 2061 6e64  xports input and
-00053180: 206f 7574 7075 7420 706c 7567 7320 616e   output plugs an
-00053190: 6420 7472 6965 7320 746f 2069 6e69 7469  d tries to initi
-000531a0: 616c 697a 650a 2020 2020 2020 2020 7468  alize.        th
-000531b0: 6520 7069 7065 6c69 6e65 2077 6974 6820  e pipeline with 
-000531c0: 6d69 7373 696e 6720 6d61 6e64 6174 6f72  missing mandator
-000531d0: 7920 7061 7261 6d65 7465 7273 2e0a 0a20  y parameters... 
-000531e0: 2020 2020 2020 202d 5465 7374 733a 2050         -Tests: P
-000531f0: 6970 656c 696e 654d 616e 6167 6572 5461  ipelineManagerTa
-00053200: 622e 6765 745f 6d69 7373 696e 675f 6d61  b.get_missing_ma
-00053210: 6e64 6174 6f72 795f 7061 7261 6d65 7465  ndatory_paramete
-00053220: 7273 0a20 2020 2020 2020 2022 2222 0a0a  rs.        """..
+00051f40: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
+00051f50: 7565 2822 736d 6f6f 7468 5f32 2220 696e  ue("smooth_2" in
+00051f60: 2070 6970 656c 696e 652e 6e6f 6465 732e   pipeline.nodes.
+00051f70: 6b65 7973 2829 290a 2020 2020 2020 2020  keys()).        
+00051f80: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
+00051f90: 2273 6d6f 6f74 685f 3322 2069 6e20 7069  "smooth_3" in pi
+00051fa0: 7065 6c69 6e65 2e6e 6f64 6573 2e6b 6579  peline.nodes.key
+00051fb0: 7328 2929 0a20 2020 2020 2020 2073 656c  s()).        sel
+00051fc0: 662e 6173 7365 7274 4571 7561 6c28 0a20  f.assertEqual(. 
+00051fd0: 2020 2020 2020 2020 2020 2031 2c20 6c65             1, le
+00051fe0: 6e28 7069 7065 6c69 6e65 2e6e 6f64 6573  n(pipeline.nodes
+00051ff0: 5b22 736d 6f6f 7468 5f32 225d 2e70 6c75  ["smooth_2"].plu
+00052000: 6773 5b22 696e 5f66 696c 6573 225d 2e6c  gs["in_files"].l
+00052010: 696e 6b73 5f66 726f 6d29 0a20 2020 2020  inks_from).     
+00052020: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
+00052030: 662e 6173 7365 7274 4571 7561 6c28 0a20  f.assertEqual(. 
+00052040: 2020 2020 2020 2020 2020 2031 2c0a 2020             1,.  
+00052050: 2020 2020 2020 2020 2020 6c65 6e28 7069            len(pi
+00052060: 7065 6c69 6e65 2e6e 6f64 6573 5b22 736d  peline.nodes["sm
+00052070: 6f6f 7468 5f31 225d 2e70 6c75 6773 5b22  ooth_1"].plugs["
+00052080: 5f73 6d6f 6f74 6865 645f 6669 6c65 7322  _smoothed_files"
+00052090: 5d2e 6c69 6e6b 735f 746f 292c 0a20 2020  ].links_to),.   
+000520a0: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
+000520b0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+000520c0: 0a20 2020 2020 2020 2020 2020 2031 2c20  .            1, 
+000520d0: 6c65 6e28 7069 7065 6c69 6e65 2e6e 6f64  len(pipeline.nod
+000520e0: 6573 5b22 736d 6f6f 7468 5f33 225d 2e70  es["smooth_3"].p
+000520f0: 6c75 6773 5b22 696e 5f66 696c 6573 225d  lugs["in_files"]
+00052100: 2e6c 696e 6b73 5f66 726f 6d29 0a20 2020  .links_from).   
+00052110: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
+00052120: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00052130: 0a20 2020 2020 2020 2020 2020 2031 2c0a  .            1,.
+00052140: 2020 2020 2020 2020 2020 2020 6c65 6e28              len(
+00052150: 7069 7065 6c69 6e65 2e6e 6f64 6573 5b22  pipeline.nodes["
+00052160: 736d 6f6f 7468 5f32 225d 2e70 6c75 6773  smooth_2"].plugs
+00052170: 5b22 5f73 6d6f 6f74 6865 645f 6669 6c65  ["_smoothed_file
+00052180: 7322 5d2e 6c69 6e6b 735f 746f 292c 0a20  s"].links_to),. 
+00052190: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+000521a0: 2020 7069 7065 6c69 6e65 5f6d 616e 6167    pipeline_manag
+000521b0: 6572 2e72 6564 6f28 290a 2020 2020 2020  er.redo().      
+000521c0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+000521d0: 6528 2273 6d6f 6f74 685f 3122 2069 6e20  e("smooth_1" in 
+000521e0: 7069 7065 6c69 6e65 2e6e 6f64 6573 2e6b  pipeline.nodes.k
+000521f0: 6579 7328 2929 0a20 2020 2020 2020 2073  eys()).        s
+00052200: 656c 662e 6173 7365 7274 4661 6c73 6528  elf.assertFalse(
+00052210: 2273 6d6f 6f74 685f 3222 2069 6e20 7069  "smooth_2" in pi
+00052220: 7065 6c69 6e65 2e6e 6f64 6573 2e6b 6579  peline.nodes.key
+00052230: 7328 2929 0a20 2020 2020 2020 2073 656c  s()).        sel
+00052240: 662e 6173 7365 7274 5472 7565 2822 736d  f.assertTrue("sm
+00052250: 6f6f 7468 5f33 2220 696e 2070 6970 656c  ooth_3" in pipel
+00052260: 696e 652e 6e6f 6465 732e 6b65 7973 2829  ine.nodes.keys()
+00052270: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00052280: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
+00052290: 2020 2020 2020 2020 302c 0a20 2020 2020          0,.     
+000522a0: 2020 2020 2020 206c 656e 2870 6970 656c         len(pipel
+000522b0: 696e 652e 6e6f 6465 735b 2273 6d6f 6f74  ine.nodes["smoot
+000522c0: 685f 3122 5d2e 706c 7567 735b 225f 736d  h_1"].plugs["_sm
+000522d0: 6f6f 7468 6564 5f66 696c 6573 225d 2e6c  oothed_files"].l
+000522e0: 696e 6b73 5f74 6f29 2c0a 2020 2020 2020  inks_to),.      
+000522f0: 2020 290a 2020 2020 2020 2020 7365 6c66    ).        self
+00052300: 2e61 7373 6572 7445 7175 616c 280a 2020  .assertEqual(.  
+00052310: 2020 2020 2020 2020 2020 302c 206c 656e            0, len
+00052320: 2870 6970 656c 696e 652e 6e6f 6465 735b  (pipeline.nodes[
+00052330: 2273 6d6f 6f74 685f 3322 5d2e 706c 7567  "smooth_3"].plug
+00052340: 735b 2269 6e5f 6669 6c65 7322 5d2e 6c69  s["in_files"].li
+00052350: 6e6b 735f 6672 6f6d 290a 2020 2020 2020  nks_from).      
+00052360: 2020 290a 0a20 2020 2064 6566 2074 6573    )..    def tes
+00052370: 745f 656e 645f 7072 6f67 7265 7373 2873  t_end_progress(s
+00052380: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+00052390: 2243 7265 6174 6573 2061 2070 6970 656c  "Creates a pipel
+000523a0: 696e 6520 6d61 6e61 6765 7220 7072 6f67  ine manager prog
+000523b0: 7265 7373 206f 626a 6563 7420 616e 6420  ress object and 
+000523c0: 7472 6965 7320 746f 2065 6e64 2069 742e  tries to end it.
+000523d0: 0a0a 2020 2020 2020 2020 2d20 5465 7374  ..        - Test
+000523e0: 7320 5275 6e50 726f 6772 6573 732e 656e  s RunProgress.en
+000523f0: 645f 7072 6f67 7265 7373 0a20 2020 2020  d_progress.     
+00052400: 2020 2022 2222 0a0a 2020 2020 2020 2020     """..        
+00052410: 2320 5365 7473 2073 686f 7274 6375 7473  # Sets shortcuts
+00052420: 2066 6f72 206f 626a 6563 7473 2074 6861   for objects tha
+00052430: 7420 6172 6520 6f66 7465 6e20 7573 6564  t are often used
+00052440: 0a20 2020 2020 2020 2070 706c 5f6d 616e  .        ppl_man
+00052450: 6167 6572 203d 2073 656c 662e 6d61 696e  ager = self.main
+00052460: 5f77 696e 646f 772e 7069 7065 6c69 6e65  _window.pipeline
+00052470: 5f6d 616e 6167 6572 0a20 2020 2020 2020  _manager.       
+00052480: 2070 706c 5f65 6474 5f74 6162 7320 3d20   ppl_edt_tabs = 
+00052490: 7070 6c5f 6d61 6e61 6765 722e 7069 7065  ppl_manager.pipe
+000524a0: 6c69 6e65 4564 6974 6f72 5461 6273 0a20  lineEditorTabs. 
+000524b0: 2020 2020 2020 2070 706c 203d 2070 706c         ppl = ppl
+000524c0: 5f65 6474 5f74 6162 732e 6765 745f 6375  _edt_tabs.get_cu
+000524d0: 7272 656e 745f 7069 7065 6c69 6e65 2829  rrent_pipeline()
+000524e0: 0a0a 2020 2020 2020 2020 2320 4372 6561  ..        # Crea
+000524f0: 7465 7320 6120 2752 756e 5072 6f67 7265  tes a 'RunProgre
+00052500: 7373 2720 6f62 6a65 6374 0a20 2020 2020  ss' object.     
+00052510: 2020 2070 706c 5f6d 616e 6167 6572 2e70     ppl_manager.p
+00052520: 726f 6772 6573 7320 3d20 5275 6e50 726f  rogress = RunPro
+00052530: 6772 6573 7328 7070 6c5f 6d61 6e61 6765  gress(ppl_manage
+00052540: 7229 0a0a 2020 2020 2020 2020 2320 2770  r)..        # 'p
+00052550: 706c 5f6d 616e 6167 6572 2e77 6f72 6b65  pl_manager.worke
+00052560: 7227 2064 6f65 7320 6e6f 7420 6861 7665  r' does not have
+00052570: 2061 2027 6578 6563 5f69 6427 0a20 2020   a 'exec_id'.   
+00052580: 2020 2020 2070 706c 5f6d 616e 6167 6572       ppl_manager
+00052590: 2e70 726f 6772 6573 732e 656e 645f 7072  .progress.end_pr
+000525a0: 6f67 7265 7373 2829 0a0a 2020 2020 2020  ogress()..      
+000525b0: 2020 2320 4d6f 636b 7320 616e 2027 6578    # Mocks an 'ex
+000525c0: 6563 5f69 6427 2061 6e64 2061 6e20 2767  ec_id' and an 'g
+000525d0: 6574 5f70 6970 656c 696e 655f 6f72 5f70  et_pipeline_or_p
+000525e0: 726f 6365 7373 270a 2020 2020 2020 2020  rocess'.        
+000525f0: 7070 6c5f 6d61 6e61 6765 722e 7072 6f67  ppl_manager.prog
+00052600: 7265 7373 2e77 6f72 6b65 722e 6578 6563  ress.worker.exec
+00052610: 5f69 6420 3d20 7374 7228 7575 6964 2e75  _id = str(uuid.u
+00052620: 7569 6434 2829 290a 2020 2020 2020 2020  uid4()).        
+00052630: 656e 6769 6e65 203d 2070 706c 2e67 6574  engine = ppl.get
+00052640: 5f73 7475 6479 5f63 6f6e 6669 6728 292e  _study_config().
+00052650: 656e 6769 6e65 0a20 2020 2020 2020 2065  engine.        e
+00052660: 6e67 696e 652e 7261 6973 655f 666f 725f  ngine.raise_for_
+00052670: 7374 6174 7573 203d 204d 6f63 6b28 290a  status = Mock().
+00052680: 0a20 2020 2020 2020 2023 2045 6e64 7320  .        # Ends 
+00052690: 7468 6520 7072 6f67 7265 7373 2077 6974  the progress wit
+000526a0: 6820 7375 6363 6573 730a 2020 2020 2020  h success.      
+000526b0: 2020 7070 6c5f 6d61 6e61 6765 722e 7072    ppl_manager.pr
+000526c0: 6f67 7265 7373 2e65 6e64 5f70 726f 6772  ogress.end_progr
+000526d0: 6573 7328 290a 0a20 2020 2020 2020 2065  ess()..        e
+000526e0: 6e67 696e 652e 7261 6973 655f 666f 725f  ngine.raise_for_
+000526f0: 7374 6174 7573 2e61 7373 6572 745f 6361  status.assert_ca
+00052700: 6c6c 6564 5f6f 6e63 655f 7769 7468 280a  lled_once_with(.
+00052710: 2020 2020 2020 2020 2020 2020 7070 6c5f              ppl_
+00052720: 6d61 6e61 6765 722e 7072 6f67 7265 7373  manager.progress
+00052730: 2e77 6f72 6b65 722e 7374 6174 7573 2c0a  .worker.status,.
+00052740: 2020 2020 2020 2020 2020 2020 7070 6c5f              ppl_
+00052750: 6d61 6e61 6765 722e 7072 6f67 7265 7373  manager.progress
+00052760: 2e77 6f72 6b65 722e 6578 6563 5f69 642c  .worker.exec_id,
+00052770: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+00052780: 2020 2020 2320 4d6f 636b 7320 6120 2757      # Mocks a 'W
+00052790: 6f72 6b66 6c6f 7745 7865 6375 7469 6f6e  orkflowExecution
+000527a0: 4572 726f 7227 2065 7863 6570 7469 6f6e  Error' exception
+000527b0: 0a20 2020 2020 2020 2065 6e67 696e 652e  .        engine.
+000527c0: 7261 6973 655f 666f 725f 7374 6174 7573  raise_for_status
+000527d0: 203d 204d 6f63 6b28 0a20 2020 2020 2020   = Mock(.       
+000527e0: 2020 2020 2073 6964 655f 6566 6665 6374       side_effect
+000527f0: 3d57 6f72 6b66 6c6f 7745 7865 6375 7469  =WorkflowExecuti
+00052800: 6f6e 4572 726f 7228 7b7d 2c20 7b7d 2c20  onError({}, {}, 
+00052810: 7665 7262 6f73 653d 4661 6c73 6529 0a20  verbose=False). 
+00052820: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+00052830: 2020 2320 5261 6973 6573 2061 2027 576f    # Raises a 'Wo
+00052840: 726b 666c 6f77 4578 6563 7574 696f 6e45  rkflowExecutionE
+00052850: 7272 6f72 2720 7768 696c 6520 656e 6469  rror' while endi
+00052860: 6e67 2070 726f 6772 6573 730a 2020 2020  ng progress.    
+00052870: 2020 2020 2320 7070 6c5f 6d61 6e61 6765      # ppl_manage
+00052880: 722e 7072 6f67 7265 7373 2e65 6e64 5f70  r.progress.end_p
+00052890: 726f 6772 6573 7328 290a 2020 2020 2020  rogress().      
+000528a0: 2020 2320 4649 584d 453a 2074 6865 2061    # FIXME: the a
+000528b0: 626f 7665 2063 616c 6c20 746f 2074 6865  bove call to the
+000528c0: 2066 756e 6374 696f 6e20 6c65 6164 7320   function leads 
+000528d0: 746f 2061 2053 6567 6d65 6e74 6174 696f  to a Segmentatio
+000528e0: 6e0a 2020 2020 2020 2020 2320 2020 2020  n.        #     
+000528f0: 2020 2066 6175 6c74 2077 6865 6e20 7468     fault when th
+00052900: 6520 7465 7374 2072 6f75 7469 6e65 2069  e test routine i
+00052910: 7320 6c61 756e 6368 6564 2069 6e20 4170  s launched in Ap
+00052920: 7056 6579 6f72 2e0a 0a20 2020 2064 6566  pVeyor...    def
+00052930: 2074 6573 745f 6761 7262 6167 655f 636f   test_garbage_co
+00052940: 6c6c 6563 7428 7365 6c66 293a 0a20 2020  llect(self):.   
+00052950: 2020 2020 2022 2222 4d6f 636b 7320 7365       """Mocks se
+00052960: 7665 7261 6c20 6f62 6a65 6374 7320 6f66  veral objects of
+00052970: 2074 6865 2070 6970 656c 696e 6520 6d61   the pipeline ma
+00052980: 6e61 6765 7220 616e 6420 636f 6c6c 6563  nager and collec
+00052990: 7473 2074 6865 0a20 2020 2020 2020 2067  ts the.        g
+000529a0: 6172 6261 6765 206f 6620 7468 6520 7069  arbage of the pi
+000529b0: 7065 6c69 6e65 2e0a 0a20 2020 2020 2020  peline...       
+000529c0: 202d 2054 6573 7473 3a20 5069 7065 6c69   - Tests: Pipeli
+000529d0: 6e65 4d61 6e61 6765 7254 6162 2e74 6573  neManagerTab.tes
+000529e0: 745f 6761 7262 6167 655f 636f 6c6c 6563  t_garbage_collec
+000529f0: 740a 2020 2020 2020 2020 2222 220a 0a20  t.        """.. 
+00052a00: 2020 2020 2020 2070 706c 5f6d 616e 6167         ppl_manag
+00052a10: 6572 203d 2073 656c 662e 6d61 696e 5f77  er = self.main_w
+00052a20: 696e 646f 772e 7069 7065 6c69 6e65 5f6d  indow.pipeline_m
+00052a30: 616e 6167 6572 0a0a 2020 2020 2020 2020  anager..        
+00052a40: 2320 494e 5445 4752 4154 4544 2054 4553  # INTEGRATED TES
+00052a50: 540a 0a20 2020 2020 2020 2023 204d 6f63  T..        # Moc
+00052a60: 6b73 2074 6865 2027 696e 6974 6961 6c69  ks the 'initiali
+00052a70: 7a65 6427 206f 626a 6563 740a 2020 2020  zed' object.    
+00052a80: 2020 2020 7070 6c5f 6d61 6e61 6765 722e      ppl_manager.
+00052a90: 7069 7065 6c69 6e65 4564 6974 6f72 5461  pipelineEditorTa
+00052aa0: 6273 2e67 6574 5f63 7572 7265 6e74 5f65  bs.get_current_e
+00052ab0: 6469 746f 7228 292e 696e 6974 6961 6c69  ditor().initiali
+00052ac0: 7a65 6420 3d20 5472 7565 0a0a 2020 2020  zed = True..    
+00052ad0: 2020 2020 2320 436f 6c6c 6563 7473 2074      # Collects t
+00052ae0: 6865 2067 6172 6261 6765 0a20 2020 2020  he garbage.     
+00052af0: 2020 2070 706c 5f6d 616e 6167 6572 2e67     ppl_manager.g
+00052b00: 6172 6261 6765 5f63 6f6c 6c65 6374 2829  arbage_collect()
+00052b10: 0a0a 2020 2020 2020 2020 2320 4173 7365  ..        # Asse
+00052b20: 7274 7320 7468 6174 2074 6865 2027 696e  rts that the 'in
+00052b30: 6974 6961 6c69 7a65 6427 206f 626a 6563  itialized' objec
+00052b40: 7420 6368 616e 6765 6420 7374 6174 650a  t changed state.
+00052b50: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00052b60: 6572 7446 616c 7365 280a 2020 2020 2020  ertFalse(.      
+00052b70: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
+00052b80: 722e 7069 7065 6c69 6e65 4564 6974 6f72  r.pipelineEditor
+00052b90: 5461 6273 2e67 6574 5f63 7572 7265 6e74  Tabs.get_current
+00052ba0: 5f65 6469 746f 7228 292e 696e 6974 6961  _editor().initia
+00052bb0: 6c69 7a65 640a 2020 2020 2020 2020 290a  lized.        ).
+00052bc0: 0a20 2020 2020 2020 2023 2049 534f 4c41  .        # ISOLA
+00052bd0: 5445 4420 5445 5354 0a0a 2020 2020 2020  TED TEST..      
+00052be0: 2020 2320 4d6f 636b 7320 6167 6169 6e20    # Mocks again 
+00052bf0: 7468 6520 2769 6e69 7469 616c 697a 6564  the 'initialized
+00052c00: 2720 6f62 6a65 6374 0a20 2020 2020 2020  ' object.       
+00052c10: 2070 706c 5f6d 616e 6167 6572 2e70 6970   ppl_manager.pip
+00052c20: 656c 696e 6545 6469 746f 7254 6162 732e  elineEditorTabs.
+00052c30: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
+00052c40: 6f72 2829 2e69 6e69 7469 616c 697a 6564  or().initialized
+00052c50: 203d 2054 7275 650a 0a20 2020 2020 2020   = True..       
+00052c60: 2023 204d 6f63 6b73 2074 6865 206d 6574   # Mocks the met
+00052c70: 686f 6473 2075 7365 6420 696e 2074 6865  hods used in the
+00052c80: 2074 6573 740a 2020 2020 2020 2020 7070   test.        pp
+00052c90: 6c5f 6d61 6e61 6765 722e 706f 7374 7072  l_manager.postpr
+00052ca0: 6f63 6573 735f 7069 7065 6c69 6e65 5f65  ocess_pipeline_e
+00052cb0: 7865 6375 7469 6f6e 203d 204d 6167 6963  xecution = Magic
+00052cc0: 4d6f 636b 2829 0a20 2020 2020 2020 2070  Mock().        p
+00052cd0: 706c 5f6d 616e 6167 6572 2e70 726f 6a65  pl_manager.proje
+00052ce0: 6374 2e63 6c65 616e 7570 5f6f 7270 6861  ct.cleanup_orpha
+00052cf0: 6e5f 6e6f 6e65 7869 7374 696e 675f 6669  n_nonexisting_fi
+00052d00: 6c65 7320 3d20 4d61 6769 634d 6f63 6b28  les = MagicMock(
+00052d10: 290a 2020 2020 2020 2020 7070 6c5f 6d61  ).        ppl_ma
+00052d20: 6e61 6765 722e 7072 6f6a 6563 742e 636c  nager.project.cl
+00052d30: 6561 6e75 705f 6f72 7068 616e 5f68 6973  eanup_orphan_his
+00052d40: 746f 7279 203d 204d 6167 6963 4d6f 636b  tory = MagicMock
+00052d50: 2829 0a20 2020 2020 2020 2028 0a20 2020  ().        (.   
+00052d60: 2020 2020 2020 2020 2070 706c 5f6d 616e           ppl_man
+00052d70: 6167 6572 2e6d 6169 6e5f 7769 6e64 6f77  ager.main_window
+00052d80: 2e64 6174 615f 6272 6f77 7365 722e 7461  .data_browser.ta
+00052d90: 626c 655f 6461 7461 2e75 7064 6174 655f  ble_data.update_
+00052da0: 7461 626c 650a 2020 2020 2020 2020 2920  table.        ) 
+00052db0: 3d20 4d61 6769 634d 6f63 6b28 290a 2020  = MagicMock().  
+00052dc0: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
+00052dd0: 722e 7570 6461 7465 5f75 7365 725f 6275  r.update_user_bu
+00052de0: 7474 6f6e 735f 7374 6174 6573 203d 204d  ttons_states = M
+00052df0: 6167 6963 4d6f 636b 2829 0a0a 2020 2020  agicMock()..    
+00052e00: 2020 2020 2320 436f 6c6c 6563 7473 2074      # Collects t
+00052e10: 6865 2067 6172 6261 6765 0a20 2020 2020  he garbage.     
+00052e20: 2020 2070 706c 5f6d 616e 6167 6572 2e67     ppl_manager.g
+00052e30: 6172 6261 6765 5f63 6f6c 6c65 6374 2829  arbage_collect()
+00052e40: 0a0a 2020 2020 2020 2020 2320 4173 7365  ..        # Asse
+00052e50: 7274 7320 7468 6174 2074 6865 2027 696e  rts that the 'in
+00052e60: 6974 6961 6c69 7a65 6427 206f 626a 6563  itialized' objec
+00052e70: 7420 6368 616e 6765 6420 7374 6174 650a  t changed state.
+00052e80: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00052e90: 6572 7446 616c 7365 280a 2020 2020 2020  ertFalse(.      
+00052ea0: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
+00052eb0: 722e 7069 7065 6c69 6e65 4564 6974 6f72  r.pipelineEditor
+00052ec0: 5461 6273 2e67 6574 5f63 7572 7265 6e74  Tabs.get_current
+00052ed0: 5f65 6469 746f 7228 292e 696e 6974 6961  _editor().initia
+00052ee0: 6c69 7a65 640a 2020 2020 2020 2020 290a  lized.        ).
+00052ef0: 0a20 2020 2020 2020 2023 2041 7373 6572  .        # Asser
+00052f00: 7473 2074 6861 7420 7468 6520 6d6f 636b  ts that the mock
+00052f10: 6564 206d 6574 686f 6473 2077 6572 6520  ed methods were 
+00052f20: 6361 6c6c 6564 2061 7320 6578 7065 6374  called as expect
+00052f30: 6564 0a20 2020 2020 2020 2070 706c 5f6d  ed.        ppl_m
+00052f40: 616e 6167 6572 2e70 6f73 7470 726f 6365  anager.postproce
+00052f50: 7373 5f70 6970 656c 696e 655f 6578 6563  ss_pipeline_exec
+00052f60: 7574 696f 6e2e 6173 7365 7274 5f63 616c  ution.assert_cal
+00052f70: 6c65 645f 6f6e 6365 5f77 6974 6828 290a  led_once_with().
+00052f80: 2020 2020 2020 2020 2320 666d 743a 206f          # fmt: o
+00052f90: 6666 0a20 2020 2020 2020 2028 0a20 2020  ff.        (.   
+00052fa0: 2020 2020 2020 2020 2070 706c 5f6d 616e           ppl_man
+00052fb0: 6167 6572 2e70 726f 6a65 6374 2e63 6c65  ager.project.cle
+00052fc0: 616e 7570 5f6f 7270 6861 6e5f 6e6f 6e65  anup_orphan_none
+00052fd0: 7869 7374 696e 675f 6669 6c65 732e 0a20  xisting_files.. 
+00052fe0: 2020 2020 2020 2020 2020 2061 7373 6572             asser
+00052ff0: 745f 6361 6c6c 6564 5f6f 6e63 655f 7769  t_called_once_wi
+00053000: 7468 2829 0a20 2020 2020 2020 2029 0a20  th().        ). 
+00053010: 2020 2020 2020 2023 2066 6d74 3a20 6f6e         # fmt: on
+00053020: 0a20 2020 2020 2020 2070 706c 5f6d 616e  .        ppl_man
+00053030: 6167 6572 2e70 726f 6a65 6374 2e63 6c65  ager.project.cle
+00053040: 616e 7570 5f6f 7270 6861 6e5f 6869 7374  anup_orphan_hist
+00053050: 6f72 792e 6173 7365 7274 5f63 616c 6c65  ory.assert_calle
+00053060: 645f 6f6e 6365 5f77 6974 6828 290a 2020  d_once_with().  
+00053070: 2020 2020 2020 2320 666d 743a 6f66 660a        # fmt:off.
+00053080: 2020 2020 2020 2020 280a 2020 2020 2020          (.      
+00053090: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
+000530a0: 722e 6d61 696e 5f77 696e 646f 772e 6461  r.main_window.da
+000530b0: 7461 5f62 726f 7773 6572 2e74 6162 6c65  ta_browser.table
+000530c0: 5f64 6174 612e 7570 6461 7465 5f74 6162  _data.update_tab
+000530d0: 6c65 2e0a 2020 2020 2020 2020 2020 2020  le..            
+000530e0: 6173 7365 7274 5f63 616c 6c65 645f 6f6e  assert_called_on
+000530f0: 6365 5f77 6974 6828 290a 2020 2020 2020  ce_with().      
+00053100: 2020 290a 2020 2020 2020 2020 2320 666d    ).        # fm
+00053110: 743a 6f6e 0a20 2020 2020 2020 2070 706c  t:on.        ppl
+00053120: 5f6d 616e 6167 6572 2e75 7064 6174 655f  _manager.update_
+00053130: 7573 6572 5f62 7574 746f 6e73 5f73 7461  user_buttons_sta
+00053140: 7465 732e 6173 7365 7274 5f63 616c 6c65  tes.assert_calle
+00053150: 645f 6f6e 6365 5f77 6974 6828 290a 0a20  d_once_with().. 
+00053160: 2020 2064 6566 2074 6573 745f 6765 745f     def test_get_
+00053170: 6361 7073 756c 5f65 6e67 696e 6528 7365  capsul_engine(se
+00053180: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
+00053190: 4d6f 636b 7320 616e 206f 626a 6563 7420  Mocks an object 
+000531a0: 696e 2074 6865 2070 6970 656c 696e 6520  in the pipeline 
+000531b0: 6d61 6e61 6765 7220 616e 6420 6765 7473  manager and gets
+000531c0: 2074 6865 2063 6170 7375 6c20 656e 6769   the capsul engi
+000531d0: 6e65 0a20 2020 2020 2020 206f 6620 7468  ne.        of th
+000531e0: 6520 7069 7065 6c69 6e65 2e0a 0a20 2020  e pipeline...   
+000531f0: 2020 2020 202d 2054 6573 7473 3a20 5069       - Tests: Pi
+00053200: 7065 6c69 6e65 4d61 6e61 6765 7254 6162  pelineManagerTab
+00053210: 2e67 6574 5f63 6170 7375 6c5f 656e 6769  .get_capsul_engi
+00053220: 6e65 0a20 2020 2020 2020 2022 2222 0a0a  ne.        """..
 00053230: 2020 2020 2020 2020 7070 6c5f 6d61 6e61          ppl_mana
 00053240: 6765 7220 3d20 7365 6c66 2e6d 6169 6e5f  ger = self.main_
 00053250: 7769 6e64 6f77 2e70 6970 656c 696e 655f  window.pipeline_
-00053260: 6d61 6e61 6765 720a 2020 2020 2020 2020  manager.        
-00053270: 7070 6c5f 6564 745f 7461 6273 203d 2070  ppl_edt_tabs = p
-00053280: 706c 5f6d 616e 6167 6572 2e70 6970 656c  pl_manager.pipel
-00053290: 696e 6545 6469 746f 7254 6162 730a 0a20  ineEditorTabs.. 
-000532a0: 2020 2020 2020 2070 706c 5f65 6474 5f74         ppl_edt_t
-000532b0: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
-000532c0: 6564 6974 6f72 2829 2e63 6c69 636b 5f70  editor().click_p
-000532d0: 6f73 203d 2051 506f 696e 7428 3435 302c  os = QPoint(450,
-000532e0: 2035 3030 290a 2020 2020 2020 2020 7070   500).        pp
-000532f0: 6c5f 6564 745f 7461 6273 2e67 6574 5f63  l_edt_tabs.get_c
-00053300: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
-00053310: 6164 645f 6e61 6d65 645f 7072 6f63 6573  add_named_proces
-00053320: 7328 5265 6e61 6d65 290a 2020 2020 2020  s(Rename).      
-00053330: 2020 7069 7065 6c69 6e65 203d 2070 706c    pipeline = ppl
-00053340: 5f65 6474 5f74 6162 732e 6765 745f 6375  _edt_tabs.get_cu
-00053350: 7272 656e 745f 7069 7065 6c69 6e65 2829  rrent_pipeline()
-00053360: 0a0a 2020 2020 2020 2020 2320 4578 706f  ..        # Expo
-00053370: 7274 7320 7468 6520 6d61 6e64 6174 6f72  rts the mandator
-00053380: 7920 696e 7075 7473 2061 6e64 206f 7574  y inputs and out
-00053390: 7075 7473 2066 6f72 2022 7265 6e61 6d65  puts for "rename
-000533a0: 5f31 220a 2020 2020 2020 2020 7070 6c5f  _1".        ppl_
-000533b0: 6564 745f 7461 6273 2e67 6574 5f63 7572  edt_tabs.get_cur
-000533c0: 7265 6e74 5f65 6469 746f 7228 292e 6375  rent_editor().cu
-000533d0: 7272 656e 745f 6e6f 6465 5f6e 616d 6520  rrent_node_name 
-000533e0: 3d20 2272 656e 616d 655f 3122 0a20 2020  = "rename_1".   
-000533f0: 2020 2020 2028 0a20 2020 2020 2020 2020       (.         
-00053400: 2020 2070 706c 5f65 6474 5f74 6162 732e     ppl_edt_tabs.
-00053410: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
-00053420: 6f72 0a20 2020 2020 2020 2029 2829 2e65  or.        )().e
-00053430: 7870 6f72 745f 756e 636f 6e6e 6563 7465  xport_unconnecte
-00053440: 645f 6d61 6e64 6174 6f72 795f 696e 7075  d_mandatory_inpu
-00053450: 7473 2829 0a20 2020 2020 2020 2070 706c  ts().        ppl
-00053460: 5f65 6474 5f74 6162 732e 6765 745f 6375  _edt_tabs.get_cu
-00053470: 7272 656e 745f 6564 6974 6f72 2829 2e5f  rrent_editor()._
-00053480: 6578 706f 7274 5f70 6c75 6728 0a20 2020  export_plug(.   
-00053490: 2020 2020 2020 2020 2074 656d 705f 706c           temp_pl
-000534a0: 7567 5f6e 616d 653d 2822 7265 6e61 6d65  ug_name=("rename
-000534b0: 5f31 222c 2022 5f6f 7574 5f66 696c 6522  _1", "_out_file"
-000534c0: 292c 0a20 2020 2020 2020 2020 2020 2070  ),.            p
-000534d0: 6970 656c 696e 655f 7061 7261 6d65 7465  ipeline_paramete
-000534e0: 723d 225f 6f75 745f 6669 6c65 222c 0a20  r="_out_file",. 
-000534f0: 2020 2020 2020 2020 2020 206f 7074 696f             optio
-00053500: 6e61 6c3d 4661 6c73 652c 0a20 2020 2020  nal=False,.     
-00053510: 2020 2020 2020 2077 6561 6b5f 6c69 6e6b         weak_link
-00053520: 3d46 616c 7365 2c0a 2020 2020 2020 2020  =False,.        
-00053530: 290a 0a20 2020 2020 2020 2023 2049 6e69  )..        # Ini
-00053540: 7469 616c 697a 6573 2074 6865 2070 6970  tializes the pip
-00053550: 656c 696e 650a 2020 2020 2020 2020 7070  eline.        pp
-00053560: 6c5f 6d61 6e61 6765 722e 776f 726b 666c  l_manager.workfl
-00053570: 6f77 203d 2077 6f72 6b66 6c6f 775f 6672  ow = workflow_fr
-00053580: 6f6d 5f70 6970 656c 696e 6528 0a20 2020  om_pipeline(.   
-00053590: 2020 2020 2020 2020 2070 6970 656c 696e           pipelin
-000535a0: 652c 2063 6f6d 706c 6574 655f 7061 7261  e, complete_para
-000535b0: 6d65 7465 7273 3d54 7275 650a 2020 2020  meters=True.    
-000535c0: 2020 2020 290a 2020 2020 2020 2020 7070      ).        pp
-000535d0: 6c5f 6d61 6e61 6765 722e 7570 6461 7465  l_manager.update
-000535e0: 5f6e 6f64 655f 6c69 7374 2829 0a0a 2020  _node_list()..  
-000535f0: 2020 2020 2020 2320 4173 7365 7274 7320        # Asserts 
-00053600: 7468 6174 2032 206d 616e 6461 746f 7279  that 2 mandatory
-00053610: 2070 6172 616d 6574 6572 7320 6172 6520   parameters are 
-00053620: 6d69 7373 696e 670a 2020 2020 2020 2020  missing.        
-00053630: 7070 6c5f 6d61 6e61 6765 722e 7570 6461  ppl_manager.upda
-00053640: 7465 5f6e 6f64 655f 6c69 7374 2829 0a20  te_node_list(). 
-00053650: 2020 2020 2020 206d 6973 7369 6e67 5f69         missing_i
-00053660: 6e70 7574 7320 3d20 7070 6c5f 6d61 6e61  nputs = ppl_mana
-00053670: 6765 722e 6765 745f 6d69 7373 696e 675f  ger.get_missing_
-00053680: 6d61 6e64 6174 6f72 795f 7061 7261 6d65  mandatory_parame
-00053690: 7465 7273 2829 0a20 2020 2020 2020 2073  ters().        s
-000536a0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-000536b0: 6c65 6e28 6d69 7373 696e 675f 696e 7075  len(missing_inpu
-000536c0: 7473 292c 2032 290a 2020 2020 2020 2020  ts), 2).        
-000536d0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-000536e0: 286d 6973 7369 6e67 5f69 6e70 7574 735b  (missing_inputs[
-000536f0: 305d 2c20 2250 6970 656c 696e 652e 7265  0], "Pipeline.re
-00053700: 6e61 6d65 5f31 2e66 6f72 6d61 745f 7374  name_1.format_st
-00053710: 7269 6e67 2229 0a20 2020 2020 2020 2073  ring").        s
-00053720: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00053730: 6d69 7373 696e 675f 696e 7075 7473 5b31  missing_inputs[1
-00053740: 5d2c 2022 5069 7065 6c69 6e65 2e72 656e  ], "Pipeline.ren
-00053750: 616d 655f 312e 696e 5f66 696c 6522 290a  ame_1.in_file").
-00053760: 0a20 2020 2020 2020 2023 2045 6d70 7469  .        # Empti
-00053770: 6573 2074 6865 206a 6f62 7320 6c69 7374  es the jobs list
-00053780: 0a20 2020 2020 2020 2070 706c 5f6d 616e  .        ppl_man
-00053790: 6167 6572 2e77 6f72 6b66 6c6f 772e 6a6f  ager.workflow.jo
-000537a0: 6273 203d 205b 5d0a 0a20 2020 2020 2020  bs = []..       
-000537b0: 2023 2041 7373 6572 7473 2074 6861 7420   # Asserts that 
-000537c0: 3220 6d61 6e64 6174 6f72 7920 7061 7261  2 mandatory para
-000537d0: 6d65 7465 7273 2061 7265 2073 7469 6c6c  meters are still
-000537e0: 206d 6973 7369 6e67 0a20 2020 2020 2020   missing.       
-000537f0: 206d 6973 7369 6e67 5f69 6e70 7574 7320   missing_inputs 
-00053800: 3d20 7070 6c5f 6d61 6e61 6765 722e 6765  = ppl_manager.ge
-00053810: 745f 6d69 7373 696e 675f 6d61 6e64 6174  t_missing_mandat
-00053820: 6f72 795f 7061 7261 6d65 7465 7273 2829  ory_parameters()
-00053830: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00053840: 7365 7274 4571 7561 6c28 6c65 6e28 6d69  sertEqual(len(mi
-00053850: 7373 696e 675f 696e 7075 7473 292c 2032  ssing_inputs), 2
-00053860: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-00053870: 7373 6572 7445 7175 616c 286d 6973 7369  ssertEqual(missi
-00053880: 6e67 5f69 6e70 7574 735b 305d 2c20 2250  ng_inputs[0], "P
-00053890: 6970 656c 696e 652e 7265 6e61 6d65 5f31  ipeline.rename_1
-000538a0: 2e66 6f72 6d61 745f 7374 7269 6e67 2229  .format_string")
-000538b0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-000538c0: 7365 7274 4571 7561 6c28 6d69 7373 696e  sertEqual(missin
-000538d0: 675f 696e 7075 7473 5b31 5d2c 2022 5069  g_inputs[1], "Pi
-000538e0: 7065 6c69 6e65 2e72 656e 616d 655f 312e  peline.rename_1.
-000538f0: 696e 5f66 696c 6522 290a 0a20 2020 2064  in_file")..    d
-00053900: 6566 2074 6573 745f 6765 745f 7069 7065  ef test_get_pipe
-00053910: 6c69 6e65 5f6f 725f 7072 6f63 6573 7328  line_or_process(
-00053920: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
-00053930: 2222 4164 6473 2061 2070 726f 6365 7373  ""Adds a process
-00053940: 2061 6e64 2067 6574 7320 6120 7069 7065   and gets a pipe
-00053950: 6c69 6e65 2061 6e64 2061 2070 726f 6365  line and a proce
-00053960: 7373 2066 726f 6d20 7468 6520 7069 7065  ss from the pipe
-00053970: 6c69 6e65 0a20 2020 2020 2020 206d 616e  line.        man
-00053980: 6167 6572 2e0a 0a20 2020 2020 2020 202d  ager...        -
-00053990: 2054 6573 7473 3a20 5069 7065 6c69 6e65   Tests: Pipeline
-000539a0: 4d61 6e61 6765 7254 6162 2e67 6574 5f70  ManagerTab.get_p
-000539b0: 6970 656c 696e 655f 6f72 5f70 726f 6365  ipeline_or_proce
-000539c0: 7373 0a20 2020 2020 2020 2022 2222 0a0a  ss.        """..
-000539d0: 2020 2020 2020 2020 2320 5365 7473 2073          # Sets s
-000539e0: 686f 7274 6375 7473 2066 6f72 206f 6674  hortcuts for oft
-000539f0: 656e 2075 7365 6420 6f62 6a65 6374 730a  en used objects.
-00053a00: 2020 2020 2020 2020 7070 6c5f 6d61 6e61          ppl_mana
-00053a10: 6765 7220 3d20 7365 6c66 2e6d 6169 6e5f  ger = self.main_
-00053a20: 7769 6e64 6f77 2e70 6970 656c 696e 655f  window.pipeline_
-00053a30: 6d61 6e61 6765 720a 2020 2020 2020 2020  manager.        
-00053a40: 7070 6c5f 6564 745f 7461 6273 203d 2070  ppl_edt_tabs = p
-00053a50: 706c 5f6d 616e 6167 6572 2e70 6970 656c  pl_manager.pipel
-00053a60: 696e 6545 6469 746f 7254 6162 730a 0a20  ineEditorTabs.. 
-00053a70: 2020 2020 2020 2023 2047 6574 7320 7468         # Gets th
-00053a80: 6520 7069 7065 6c69 6e65 0a20 2020 2020  e pipeline.     
-00053a90: 2020 2070 6970 656c 696e 6520 3d20 7070     pipeline = pp
-00053aa0: 6c5f 6d61 6e61 6765 722e 6765 745f 7069  l_manager.get_pi
-00053ab0: 7065 6c69 6e65 5f6f 725f 7072 6f63 6573  peline_or_proces
-00053ac0: 7328 290a 0a20 2020 2020 2020 2023 2041  s()..        # A
-00053ad0: 7373 6572 7473 2074 6861 7420 7468 6520  sserts that the 
-00053ae0: 6f62 6a65 6374 2027 7069 7065 6c69 6e65  object 'pipeline
-00053af0: 2720 6973 2061 2027 5069 7065 6c69 6e65  ' is a 'Pipeline
-00053b00: 270a 2020 2020 2020 2020 7365 6c66 2e61  '.        self.a
-00053b10: 7373 6572 7449 7349 6e73 7461 6e63 6528  ssertIsInstance(
-00053b20: 7069 7065 6c69 6e65 2c20 5069 7065 6c69  pipeline, Pipeli
-00053b30: 6e65 290a 0a20 2020 2020 2020 2023 2041  ne)..        # A
-00053b40: 6464 7320 7468 6520 7072 6f63 6573 7365  dds the processe
-00053b50: 7320 5265 6e61 6d65 2c20 6372 6561 7465  s Rename, create
-00053b60: 7320 7468 6520 2272 656e 616d 655f 3122  s the "rename_1"
-00053b70: 206e 6f64 650a 2020 2020 2020 2020 7070   node.        pp
-00053b80: 6c5f 6564 745f 7461 6273 2e67 6574 5f63  l_edt_tabs.get_c
-00053b90: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
-00053ba0: 636c 6963 6b5f 706f 7320 3d20 5150 6f69  click_pos = QPoi
-00053bb0: 6e74 2834 3530 2c20 3530 3029 0a20 2020  nt(450, 500).   
-00053bc0: 2020 2020 2070 706c 5f65 6474 5f74 6162       ppl_edt_tab
-00053bd0: 732e 6765 745f 6375 7272 656e 745f 6564  s.get_current_ed
-00053be0: 6974 6f72 2829 2e61 6464 5f6e 616d 6564  itor().add_named
-00053bf0: 5f70 726f 6365 7373 2852 656e 616d 6529  _process(Rename)
-00053c00: 0a0a 2020 2020 2020 2020 2320 4765 7473  ..        # Gets
-00053c10: 2061 2070 726f 6365 7373 0a20 2020 2020   a process.     
-00053c20: 2020 2070 726f 6365 7373 203d 2070 706c     process = ppl
-00053c30: 5f6d 616e 6167 6572 2e67 6574 5f70 6970  _manager.get_pip
-00053c40: 656c 696e 655f 6f72 5f70 726f 6365 7373  eline_or_process
-00053c50: 2829 0a0a 2020 2020 2020 2020 2320 4173  ()..        # As
-00053c60: 7365 7274 7320 7468 6174 2074 6865 2070  serts that the p
-00053c70: 726f 6365 7373 2027 7069 7065 6c69 6e65  rocess 'pipeline
-00053c80: 2720 6973 2069 6e64 6565 6420 6120 274e  ' is indeed a 'N
-00053c90: 6970 7970 6550 726f 6365 7373 270a 2020  ipypeProcess'.  
-00053ca0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00053cb0: 7449 7349 6e73 7461 6e63 6528 7072 6f63  tIsInstance(proc
-00053cc0: 6573 732c 204e 6970 7970 6550 726f 6365  ess, NipypeProce
-00053cd0: 7373 290a 0a20 2020 2064 6566 2074 6573  ss)..    def tes
-00053ce0: 745f 696e 6974 6961 6c69 7a65 2873 656c  t_initialize(sel
-00053cf0: 6629 3a0a 2020 2020 2020 2020 2222 2241  f):.        """A
-00053d00: 6464 7320 5365 6c65 6374 2070 726f 6365  dds Select proce
-00053d10: 7373 2c20 6578 706f 7274 7320 6974 7320  ss, exports its 
-00053d20: 706c 7567 732c 206d 6f63 6b73 206f 626a  plugs, mocks obj
-00053d30: 6563 7473 2066 726f 6d20 7468 650a 2020  ects from the.  
-00053d40: 2020 2020 2020 7069 7065 6c69 6e65 206d        pipeline m
-00053d50: 616e 6167 6572 2061 6e64 2069 6e69 7469  anager and initi
-00053d60: 616c 697a 6573 2074 6865 2077 6f72 6b66  alizes the workf
-00053d70: 6c6f 772e 0a0a 2020 2020 2020 2020 2d20  low...        - 
-00053d80: 5465 7374 733a 2074 6865 2050 6970 656c  Tests: the Pipel
-00053d90: 696e 654d 616e 6167 6572 5461 622e 696e  ineManagerTab.in
-00053da0: 6974 6961 6c69 7a65 0a20 2020 2020 2020  itialize.       
-00053db0: 2022 2222 0a0a 2020 2020 2020 2020 2320   """..        # 
-00053dc0: 4765 7473 2074 6865 2070 6174 6873 206f  Gets the paths o
-00053dd0: 6620 3220 646f 6375 6d65 6e74 730a 2020  f 2 documents.  
-00053de0: 2020 2020 2020 636f 6e66 6967 203d 2043        config = C
-00053df0: 6f6e 6669 6728 636f 6e66 6967 5f70 6174  onfig(config_pat
-00053e00: 683d 7365 6c66 2e63 6f6e 6669 675f 7061  h=self.config_pa
-00053e10: 7468 290a 2020 2020 2020 2020 666f 6c64  th).        fold
-00053e20: 6572 203d 206f 732e 7061 7468 2e61 6273  er = os.path.abs
-00053e30: 7061 7468 280a 2020 2020 2020 2020 2020  path(.          
-00053e40: 2020 6f73 2e70 6174 682e 6a6f 696e 280a    os.path.join(.
-00053e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00053e60: 636f 6e66 6967 2e67 6574 5f6d 6961 5f70  config.get_mia_p
-00053e70: 6174 6828 292c 0a20 2020 2020 2020 2020  ath(),.         
-00053e80: 2020 2020 2020 2022 6d69 6175 7464 6174         "miautdat
-00053e90: 6122 2c0a 2020 2020 2020 2020 2020 2020  a",.            
-00053ea0: 2020 2020 2272 6573 6f75 7263 6573 222c      "resources",
-00053eb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00053ec0: 2022 6d69 6122 2c0a 2020 2020 2020 2020   "mia",.        
-00053ed0: 2020 2020 2020 2020 2270 726f 6a65 6374          "project
-00053ee0: 5f38 222c 0a20 2020 2020 2020 2020 2020  _8",.           
-00053ef0: 2020 2020 2022 6461 7461 222c 0a20 2020       "data",.   
-00053f00: 2020 2020 2020 2020 2020 2020 2022 7261               "ra
-00053f10: 775f 6461 7461 222c 0a20 2020 2020 2020  w_data",.       
-00053f20: 2020 2020 2029 0a20 2020 2020 2020 2029       ).        )
-00053f30: 0a0a 2020 2020 2020 2020 4e49 495f 4649  ..        NII_FI
-00053f40: 4c45 5f31 203d 2028 0a20 2020 2020 2020  LE_1 = (.       
-00053f50: 2020 2020 2022 4775 6572 6265 742d 4336       "Guerbet-C6
-00053f60: 2d32 3031 342d 5261 742d 4b35 322d 5475  -2014-Rat-K52-Tu
-00053f70: 6265 3237 2d32 3031 342d 3032 2d31 3431  be27-2014-02-141
-00053f80: 3032 3331 372d 3034 2d47 335f 220a 2020  02317-04-G3_".  
-00053f90: 2020 2020 2020 2020 2020 2247 7565 7262            "Guerb
-00053fa0: 6574 5f4d 4445 4654 2d4d 4445 4654 7076  et_MDEFT-MDEFTpv
-00053fb0: 6d2d 3030 3039 3430 5f38 3030 2e6e 6969  m-000940_800.nii
-00053fc0: 220a 2020 2020 2020 2020 290a 0a20 2020  ".        )..   
-00053fd0: 2020 2020 2044 4f43 554d 454e 545f 3120       DOCUMENT_1 
-00053fe0: 3d20 6f73 2e70 6174 682e 6162 7370 6174  = os.path.abspat
-00053ff0: 6828 6f73 2e70 6174 682e 6a6f 696e 2866  h(os.path.join(f
-00054000: 6f6c 6465 722c 204e 4949 5f46 494c 455f  older, NII_FILE_
-00054010: 3129 290a 0a20 2020 2020 2020 2023 2053  1))..        # S
-00054020: 6574 7320 7368 6f72 7463 7574 7320 666f  ets shortcuts fo
-00054030: 7220 6f62 6a65 6374 7320 7468 6174 2061  r objects that a
-00054040: 7265 206f 6674 656e 2075 7365 640a 2020  re often used.  
-00054050: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
-00054060: 7220 3d20 7365 6c66 2e6d 6169 6e5f 7769  r = self.main_wi
-00054070: 6e64 6f77 2e70 6970 656c 696e 655f 6d61  ndow.pipeline_ma
-00054080: 6e61 6765 720a 2020 2020 2020 2020 7070  nager.        pp
-00054090: 6c5f 6564 745f 7461 6273 203d 2070 706c  l_edt_tabs = ppl
-000540a0: 5f6d 616e 6167 6572 2e70 6970 656c 696e  _manager.pipelin
-000540b0: 6545 6469 746f 7254 6162 730a 0a20 2020  eEditorTabs..   
-000540c0: 2020 2020 2023 2041 6464 7320 7468 6520       # Adds the 
-000540d0: 7072 6f63 6573 7320 2752 656e 616d 6527  process 'Rename'
-000540e0: 2061 7320 7468 6520 6e6f 6465 2027 7265   as the node 're
-000540f0: 6e61 6d65 5f31 270a 2020 2020 2020 2020  name_1'.        
-00054100: 7070 6c5f 6564 745f 7461 6273 2e67 6574  ppl_edt_tabs.get
-00054110: 5f63 7572 7265 6e74 5f65 6469 746f 7228  _current_editor(
-00054120: 292e 636c 6963 6b5f 706f 7320 3d20 5150  ).click_pos = QP
-00054130: 6f69 6e74 2834 3530 2c20 3530 3029 0a20  oint(450, 500). 
-00054140: 2020 2020 2020 2070 706c 5f65 6474 5f74         ppl_edt_t
-00054150: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
-00054160: 6564 6974 6f72 2829 2e61 6464 5f6e 616d  editor().add_nam
-00054170: 6564 5f70 726f 6365 7373 2852 656e 616d  ed_process(Renam
-00054180: 6529 0a20 2020 2020 2020 2070 6970 656c  e).        pipel
-00054190: 696e 6520 3d20 7070 6c5f 6564 745f 7461  ine = ppl_edt_ta
-000541a0: 6273 2e67 6574 5f63 7572 7265 6e74 5f70  bs.get_current_p
-000541b0: 6970 656c 696e 6528 290a 0a20 2020 2020  ipeline()..     
-000541c0: 2020 2023 2045 7870 6f72 7473 2074 6865     # Exports the
-000541d0: 206d 616e 6461 746f 7279 2069 6e70 7574   mandatory input
-000541e0: 7320 616e 6420 6f75 7470 7574 7320 666f  s and outputs fo
-000541f0: 7220 2773 656c 6563 745f 3127 0a20 2020  r 'select_1'.   
-00054200: 2020 2020 2070 706c 5f65 6474 5f74 6162       ppl_edt_tab
-00054210: 732e 6765 745f 6375 7272 656e 745f 6564  s.get_current_ed
-00054220: 6974 6f72 2829 2e63 7572 7265 6e74 5f6e  itor().current_n
-00054230: 6f64 655f 6e61 6d65 203d 2022 7265 6e61  ode_name = "rena
-00054240: 6d65 5f31 220a 2020 2020 2020 2020 7070  me_1".        pp
-00054250: 6c5f 6564 745f 7461 6273 2e67 6574 5f63  l_edt_tabs.get_c
-00054260: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
-00054270: 6578 706f 7274 5f75 6e63 6f6e 6e65 6374  export_unconnect
-00054280: 6564 5f6d 616e 6461 746f 7279 5f69 6e70  ed_mandatory_inp
-00054290: 7574 7328 290a 2020 2020 2020 2020 7070  uts().        pp
-000542a0: 6c5f 6564 745f 7461 6273 2e67 6574 5f63  l_edt_tabs.get_c
-000542b0: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
-000542c0: 6578 706f 7274 5f61 6c6c 5f75 6e63 6f6e  export_all_uncon
-000542d0: 6e65 6374 6564 5f6f 7574 7075 7473 2829  nected_outputs()
-000542e0: 0a0a 2020 2020 2020 2020 2320 5365 7473  ..        # Sets
-000542f0: 206d 616e 6461 746f 7279 2070 6172 616d   mandatory param
-00054300: 6574 6572 7320 2773 656c 6563 745f 3127  eters 'select_1'
-00054310: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
-00054320: 652e 6e6f 6465 735b 2222 5d2e 7365 745f  e.nodes[""].set_
-00054330: 706c 7567 5f76 616c 7565 2822 696e 5f66  plug_value("in_f
-00054340: 696c 6522 2c20 444f 4355 4d45 4e54 5f31  ile", DOCUMENT_1
-00054350: 290a 2020 2020 2020 2020 7069 7065 6c69  ).        pipeli
-00054360: 6e65 2e6e 6f64 6573 5b22 225d 2e73 6574  ne.nodes[""].set
-00054370: 5f70 6c75 675f 7661 6c75 6528 2266 6f72  _plug_value("for
-00054380: 6d61 745f 7374 7269 6e67 222c 2022 6e65  mat_string", "ne
-00054390: 775f 6e61 6d65 2e6e 6969 2229 0a0a 2020  w_name.nii")..  
-000543a0: 2020 2020 2020 2320 4368 6563 6b73 2074        # Checks t
-000543b0: 6861 7420 7468 6572 6520 6973 206e 6f20  hat there is no 
-000543c0: 776f 726b 666c 6f77 2069 6e64 6578 0a20  workflow index. 
-000543d0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-000543e0: 7274 4973 4e6f 6e65 2870 706c 5f6d 616e  rtIsNone(ppl_man
-000543f0: 6167 6572 2e77 6f72 6b66 6c6f 7729 0a0a  ager.workflow)..
-00054400: 2020 2020 2020 2020 2320 4d6f 636b 7320          # Mocks 
-00054410: 6f62 6a65 6374 730a 2020 2020 2020 2020  objects.        
-00054420: 7070 6c5f 6d61 6e61 6765 722e 696e 6974  ppl_manager.init
-00054430: 5f63 6c69 636b 6564 203d 2054 7275 650a  _clicked = True.
-00054440: 2020 2020 2020 2020 7070 6c5f 6d61 6e61          ppl_mana
-00054450: 6765 722e 6967 6e6f 7265 5f6e 6f64 6520  ger.ignore_node 
-00054460: 3d20 5472 7565 0a20 2020 2020 2020 2070  = True.        p
-00054470: 706c 5f6d 616e 6167 6572 2e6b 6579 203d  pl_manager.key =
-00054480: 207b 2269 7465 6d22 3a20 2269 7465 6d5f   {"item": "item_
-00054490: 7661 6c75 6522 7d0a 2020 2020 2020 2020  value"}.        
-000544a0: 7070 6c5f 6d61 6e61 6765 722e 6967 6e6f  ppl_manager.igno
-000544b0: 7265 203d 207b 2269 7465 6d22 3a20 2269  re = {"item": "i
-000544c0: 7465 6d5f 7661 6c75 6522 7d0a 0a20 2020  tem_value"}..   
-000544d0: 2020 2020 2023 204d 6f63 6b73 206d 6574       # Mocks met
-000544e0: 686f 6473 0a20 2020 2020 2020 2070 706c  hods.        ppl
-000544f0: 5f6d 616e 6167 6572 2e69 6e69 745f 7069  _manager.init_pi
-00054500: 7065 6c69 6e65 203d 204d 6f63 6b28 290a  peline = Mock().
-00054510: 2020 2020 2020 2020 2320 4649 584d 453a          # FIXME:
-00054520: 2069 6620 7468 6520 6d65 7468 6f64 2027   if the method '
-00054530: 696e 6974 5f70 6970 656c 696e 6527 2069  init_pipeline' i
-00054540: 7320 6e6f 7420 6d6f 636b 6564 2074 6865  s not mocked the
-00054550: 2077 686f 6c65 0a20 2020 2020 2020 2023   whole.        #
-00054560: 2020 2020 2020 2020 7465 7374 2072 6f75          test rou
-00054570: 7469 6e65 2066 6169 6c73 2077 6974 6820  tine fails with 
-00054580: 6120 2753 6567 6d65 6e74 6174 696f 6e20  a 'Segmentation 
-00054590: 4661 756c 7427 0a0a 2020 2020 2020 2020  Fault'..        
-000545a0: 2320 496e 6974 6961 6c69 7a65 7320 7468  # Initializes th
-000545b0: 6520 7069 7065 6c69 6e65 0a20 2020 2020  e pipeline.     
-000545c0: 2020 2070 706c 5f6d 616e 6167 6572 2e69     ppl_manager.i
-000545d0: 6e69 7469 616c 697a 6528 290a 0a20 2020  nitialize()..   
-000545e0: 2020 2020 2023 2041 7373 6572 7473 2074       # Asserts t
-000545f0: 6861 7420 6120 776f 726b 666c 6f77 2068  hat a workflow h
-00054600: 6173 2062 6565 6e20 6372 6561 7465 640a  as been created.
-00054610: 2020 2020 2020 2020 2320 7365 6c66 2e61          # self.a
-00054620: 7373 6572 7449 734e 6f74 4e6f 6e65 2870  ssertIsNotNone(p
-00054630: 706c 5f6d 616e 6167 6572 2e77 6f72 6b66  pl_manager.workf
-00054640: 6c6f 7729 0a20 2020 2020 2020 2023 2066  low).        # f
-00054650: 726f 6d20 736f 6d61 5f77 6f72 6b66 6c6f  rom soma_workflo
-00054660: 772e 636c 6965 6e74 5f74 7970 6573 2069  w.client_types i
-00054670: 6d70 6f72 7420 576f 726b 666c 6f77 0a20  mport Workflow. 
-00054680: 2020 2020 2020 2023 2073 656c 662e 6173         # self.as
-00054690: 7365 7274 4973 496e 7374 616e 6365 2870  sertIsInstance(p
-000546a0: 706c 5f6d 616e 6167 6572 2e77 6f72 6b66  pl_manager.workf
-000546b0: 6c6f 772c 2057 6f72 6b66 6c6f 7729 0a20  low, Workflow). 
-000546c0: 2020 2020 2020 2023 2046 6958 4d45 3a20         # FiXME: 
-000546d0: 7468 6520 6162 6f76 6520 636f 6465 2065  the above code e
-000546e0: 6c73 6520 6c65 6164 7320 746f 2027 5365  lse leads to 'Se
-000546f0: 676d 656e 7461 7469 6f6e 2046 6175 6c74  gmentation Fault
-00054700: 270a 0a20 2020 2020 2020 2073 656c 662e  '..        self.
-00054710: 6173 7365 7274 4661 6c73 6528 7070 6c5f  assertFalse(ppl_
-00054720: 6d61 6e61 6765 722e 6967 6e6f 7265 5f6e  manager.ignore_n
-00054730: 6f64 6529 0a20 2020 2020 2020 2073 656c  ode).        sel
-00054740: 662e 6173 7365 7274 4571 7561 6c28 6c65  f.assertEqual(le
-00054750: 6e28 7070 6c5f 6d61 6e61 6765 722e 6b65  n(ppl_manager.ke
-00054760: 7929 2c20 3029 0a20 2020 2020 2020 2073  y), 0).        s
-00054770: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00054780: 6c65 6e28 7070 6c5f 6d61 6e61 6765 722e  len(ppl_manager.
-00054790: 6967 6e6f 7265 292c 2030 290a 2020 2020  ignore), 0).    
-000547a0: 2020 2020 7070 6c5f 6d61 6e61 6765 722e      ppl_manager.
-000547b0: 696e 6974 5f70 6970 656c 696e 652e 6173  init_pipeline.as
-000547c0: 7365 7274 5f63 616c 6c65 645f 6f6e 6365  sert_called_once
-000547d0: 5f77 6974 6828 290a 0a20 2020 2020 2020  _with()..       
-000547e0: 2023 204d 6f63 6b73 2061 6e20 6f62 6a65   # Mocks an obje
-000547f0: 6374 2074 6f20 696e 6475 6365 2061 6e20  ct to induce an 
-00054800: 6578 6365 7074 696f 6e0a 2020 2020 2020  exception.      
-00054810: 2020 7070 6c5f 6d61 6e61 6765 722e 696e    ppl_manager.in
-00054820: 6974 5f70 6970 656c 696e 6520 3d20 4e6f  it_pipeline = No
-00054830: 6e65 0a0a 2020 2020 2020 2020 2320 496e  ne..        # In
-00054840: 6475 6365 7320 616e 2065 7863 6570 7469  duces an excepti
-00054850: 6f6e 2069 6e20 7468 6520 7069 7065 6c69  on in the pipeli
-00054860: 6e65 2069 6e69 7469 616c 697a 6174 696f  ne initializatio
-00054870: 6e0a 2020 2020 2020 2020 7072 696e 7428  n.        print(
-00054880: 225c 6e5c 6e2a 2a20 616e 2065 7863 6570  "\n\n** an excep
-00054890: 7469 6f6e 206d 6573 7361 6765 2069 7320  tion message is 
-000548a0: 6578 7065 6374 6564 2062 656c 6f77 2229  expected below")
+00053260: 6d61 6e61 6765 720a 0a20 2020 2020 2020  manager..       
+00053270: 2023 2049 4e54 4547 5241 5445 440a 0a20   # INTEGRATED.. 
+00053280: 2020 2020 2020 2023 2047 6574 7320 7468         # Gets th
+00053290: 6520 6361 7073 756c 2065 6e67 696e 650a  e capsul engine.
+000532a0: 2020 2020 2020 2020 6361 7073 756c 5f65          capsul_e
+000532b0: 6e67 696e 6520 3d20 7070 6c5f 6d61 6e61  ngine = ppl_mana
+000532c0: 6765 722e 6765 745f 6361 7073 756c 5f65  ger.get_capsul_e
+000532d0: 6e67 696e 6528 290a 0a20 2020 2020 2020  ngine()..       
+000532e0: 2023 2041 7373 6572 7473 2074 6861 7420   # Asserts that 
+000532f0: 7468 6520 2763 6170 7375 6c5f 656e 6769  the 'capsul_engi
+00053300: 6e65 2720 6973 206f 6620 636c 6173 7320  ne' is of class 
+00053310: 2743 6170 7375 6c45 6e67 696e 6527 0a20  'CapsulEngine'. 
+00053320: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00053330: 7274 4973 496e 7374 616e 6365 2863 6170  rtIsInstance(cap
+00053340: 7375 6c5f 656e 6769 6e65 2c20 4361 7073  sul_engine, Caps
+00053350: 756c 456e 6769 6e65 290a 0a20 2020 2020  ulEngine)..     
+00053360: 2020 2023 2049 534f 4c41 5445 440a 2020     # ISOLATED.  
+00053370: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
+00053380: 722e 7069 7065 6c69 6e65 4564 6974 6f72  r.pipelineEditor
+00053390: 5461 6273 2e67 6574 5f63 6170 7375 6c5f  Tabs.get_capsul_
+000533a0: 656e 6769 6e65 203d 204d 6167 6963 4d6f  engine = MagicMo
+000533b0: 636b 2829 0a0a 2020 2020 2020 2020 2320  ck()..        # 
+000533c0: 4765 7473 2074 6865 2063 6170 7375 6c20  Gets the capsul 
+000533d0: 656e 6769 6e65 0a20 2020 2020 2020 205f  engine.        _
+000533e0: 203d 2070 706c 5f6d 616e 6167 6572 2e67   = ppl_manager.g
+000533f0: 6574 5f63 6170 7375 6c5f 656e 6769 6e65  et_capsul_engine
+00053400: 2829 0a0a 2020 2020 2020 2020 2320 4173  ()..        # As
+00053410: 7365 7274 7320 7468 6174 2074 6865 206d  serts that the m
+00053420: 6f63 6b65 6420 6d65 7468 6f64 2077 6173  ocked method was
+00053430: 2063 616c 6c65 6420 6173 2065 7870 6563   called as expec
+00053440: 7465 640a 2020 2020 2020 2020 2320 666d  ted.        # fm
+00053450: 743a 206f 6666 0a20 2020 2020 2020 2028  t: off.        (
+00053460: 0a20 2020 2020 2020 2020 2020 2070 706c  .            ppl
+00053470: 5f6d 616e 6167 6572 2e70 6970 656c 696e  _manager.pipelin
+00053480: 6545 6469 746f 7254 6162 732e 6765 745f  eEditorTabs.get_
+00053490: 6361 7073 756c 5f65 6e67 696e 652e 0a20  capsul_engine.. 
+000534a0: 2020 2020 2020 2020 2020 2061 7373 6572             asser
+000534b0: 745f 6361 6c6c 6564 5f6f 6e63 655f 7769  t_called_once_wi
+000534c0: 7468 2829 0a20 2020 2020 2020 2029 0a20  th().        ). 
+000534d0: 2020 2020 2020 2023 2066 6d74 3a20 6f6e         # fmt: on
+000534e0: 0a0a 2020 2020 6465 6620 7465 7374 5f67  ..    def test_g
+000534f0: 6574 5f6d 6973 7369 6e67 5f6d 616e 6461  et_missing_manda
+00053500: 746f 7279 5f70 6172 616d 6574 6572 7328  tory_parameters(
+00053510: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
+00053520: 2222 0a20 2020 2020 2020 2041 6464 7320  "".        Adds 
+00053530: 6120 7072 6f63 6573 732c 2065 7870 6f72  a process, expor
+00053540: 7473 2069 6e70 7574 2061 6e64 206f 7574  ts input and out
+00053550: 7075 7420 706c 7567 7320 616e 6420 7472  put plugs and tr
+00053560: 6965 7320 746f 2069 6e69 7469 616c 697a  ies to initializ
+00053570: 650a 2020 2020 2020 2020 7468 6520 7069  e.        the pi
+00053580: 7065 6c69 6e65 2077 6974 6820 6d69 7373  peline with miss
+00053590: 696e 6720 6d61 6e64 6174 6f72 7920 7061  ing mandatory pa
+000535a0: 7261 6d65 7465 7273 2e0a 0a20 2020 2020  rameters...     
+000535b0: 2020 202d 5465 7374 733a 2050 6970 656c     -Tests: Pipel
+000535c0: 696e 654d 616e 6167 6572 5461 622e 6765  ineManagerTab.ge
+000535d0: 745f 6d69 7373 696e 675f 6d61 6e64 6174  t_missing_mandat
+000535e0: 6f72 795f 7061 7261 6d65 7465 7273 0a20  ory_parameters. 
+000535f0: 2020 2020 2020 2022 2222 0a0a 2020 2020         """..    
+00053600: 2020 2020 7070 6c5f 6d61 6e61 6765 7220      ppl_manager 
+00053610: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
+00053620: 6f77 2e70 6970 656c 696e 655f 6d61 6e61  ow.pipeline_mana
+00053630: 6765 720a 2020 2020 2020 2020 7070 6c5f  ger.        ppl_
+00053640: 6564 745f 7461 6273 203d 2070 706c 5f6d  edt_tabs = ppl_m
+00053650: 616e 6167 6572 2e70 6970 656c 696e 6545  anager.pipelineE
+00053660: 6469 746f 7254 6162 730a 0a20 2020 2020  ditorTabs..     
+00053670: 2020 2070 706c 5f65 6474 5f74 6162 732e     ppl_edt_tabs.
+00053680: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
+00053690: 6f72 2829 2e63 6c69 636b 5f70 6f73 203d  or().click_pos =
+000536a0: 2051 506f 696e 7428 3435 302c 2035 3030   QPoint(450, 500
+000536b0: 290a 2020 2020 2020 2020 7070 6c5f 6564  ).        ppl_ed
+000536c0: 745f 7461 6273 2e67 6574 5f63 7572 7265  t_tabs.get_curre
+000536d0: 6e74 5f65 6469 746f 7228 292e 6164 645f  nt_editor().add_
+000536e0: 6e61 6d65 645f 7072 6f63 6573 7328 5265  named_process(Re
+000536f0: 6e61 6d65 290a 2020 2020 2020 2020 7069  name).        pi
+00053700: 7065 6c69 6e65 203d 2070 706c 5f65 6474  peline = ppl_edt
+00053710: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
+00053720: 745f 7069 7065 6c69 6e65 2829 0a0a 2020  t_pipeline()..  
+00053730: 2020 2020 2020 2320 4578 706f 7274 7320        # Exports 
+00053740: 7468 6520 6d61 6e64 6174 6f72 7920 696e  the mandatory in
+00053750: 7075 7473 2061 6e64 206f 7574 7075 7473  puts and outputs
+00053760: 2066 6f72 2022 7265 6e61 6d65 5f31 220a   for "rename_1".
+00053770: 2020 2020 2020 2020 7070 6c5f 6564 745f          ppl_edt_
+00053780: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
+00053790: 5f65 6469 746f 7228 292e 6375 7272 656e  _editor().curren
+000537a0: 745f 6e6f 6465 5f6e 616d 6520 3d20 2272  t_node_name = "r
+000537b0: 656e 616d 655f 3122 0a20 2020 2020 2020  ename_1".       
+000537c0: 2028 0a20 2020 2020 2020 2020 2020 2070   (.            p
+000537d0: 706c 5f65 6474 5f74 6162 732e 6765 745f  pl_edt_tabs.get_
+000537e0: 6375 7272 656e 745f 6564 6974 6f72 0a20  current_editor. 
+000537f0: 2020 2020 2020 2029 2829 2e65 7870 6f72         )().expor
+00053800: 745f 756e 636f 6e6e 6563 7465 645f 6d61  t_unconnected_ma
+00053810: 6e64 6174 6f72 795f 696e 7075 7473 2829  ndatory_inputs()
+00053820: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
+00053830: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
+00053840: 745f 6564 6974 6f72 2829 2e5f 6578 706f  t_editor()._expo
+00053850: 7274 5f70 6c75 6728 0a20 2020 2020 2020  rt_plug(.       
+00053860: 2020 2020 2074 656d 705f 706c 7567 5f6e       temp_plug_n
+00053870: 616d 653d 2822 7265 6e61 6d65 5f31 222c  ame=("rename_1",
+00053880: 2022 5f6f 7574 5f66 696c 6522 292c 0a20   "_out_file"),. 
+00053890: 2020 2020 2020 2020 2020 2070 6970 656c             pipel
+000538a0: 696e 655f 7061 7261 6d65 7465 723d 225f  ine_parameter="_
+000538b0: 6f75 745f 6669 6c65 222c 0a20 2020 2020  out_file",.     
+000538c0: 2020 2020 2020 206f 7074 696f 6e61 6c3d         optional=
+000538d0: 4661 6c73 652c 0a20 2020 2020 2020 2020  False,.         
+000538e0: 2020 2077 6561 6b5f 6c69 6e6b 3d46 616c     weak_link=Fal
+000538f0: 7365 2c0a 2020 2020 2020 2020 290a 0a20  se,.        ).. 
+00053900: 2020 2020 2020 2023 2049 6e69 7469 616c         # Initial
+00053910: 697a 6573 2074 6865 2070 6970 656c 696e  izes the pipelin
+00053920: 650a 2020 2020 2020 2020 7070 6c5f 6d61  e.        ppl_ma
+00053930: 6e61 6765 722e 776f 726b 666c 6f77 203d  nager.workflow =
+00053940: 2077 6f72 6b66 6c6f 775f 6672 6f6d 5f70   workflow_from_p
+00053950: 6970 656c 696e 6528 0a20 2020 2020 2020  ipeline(.       
+00053960: 2020 2020 2070 6970 656c 696e 652c 2063       pipeline, c
+00053970: 6f6d 706c 6574 655f 7061 7261 6d65 7465  omplete_paramete
+00053980: 7273 3d54 7275 650a 2020 2020 2020 2020  rs=True.        
+00053990: 290a 2020 2020 2020 2020 7070 6c5f 6d61  ).        ppl_ma
+000539a0: 6e61 6765 722e 7570 6461 7465 5f6e 6f64  nager.update_nod
+000539b0: 655f 6c69 7374 2829 0a0a 2020 2020 2020  e_list()..      
+000539c0: 2020 2320 4173 7365 7274 7320 7468 6174    # Asserts that
+000539d0: 2032 206d 616e 6461 746f 7279 2070 6172   2 mandatory par
+000539e0: 616d 6574 6572 7320 6172 6520 6d69 7373  ameters are miss
+000539f0: 696e 670a 2020 2020 2020 2020 7070 6c5f  ing.        ppl_
+00053a00: 6d61 6e61 6765 722e 7570 6461 7465 5f6e  manager.update_n
+00053a10: 6f64 655f 6c69 7374 2829 0a20 2020 2020  ode_list().     
+00053a20: 2020 206d 6973 7369 6e67 5f69 6e70 7574     missing_input
+00053a30: 7320 3d20 7070 6c5f 6d61 6e61 6765 722e  s = ppl_manager.
+00053a40: 6765 745f 6d69 7373 696e 675f 6d61 6e64  get_missing_mand
+00053a50: 6174 6f72 795f 7061 7261 6d65 7465 7273  atory_parameters
+00053a60: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
+00053a70: 6173 7365 7274 4571 7561 6c28 6c65 6e28  assertEqual(len(
+00053a80: 6d69 7373 696e 675f 696e 7075 7473 292c  missing_inputs),
+00053a90: 2032 290a 2020 2020 2020 2020 7365 6c66   2).        self
+00053aa0: 2e61 7373 6572 7445 7175 616c 286d 6973  .assertEqual(mis
+00053ab0: 7369 6e67 5f69 6e70 7574 735b 305d 2c20  sing_inputs[0], 
+00053ac0: 2250 6970 656c 696e 652e 7265 6e61 6d65  "Pipeline.rename
+00053ad0: 5f31 2e66 6f72 6d61 745f 7374 7269 6e67  _1.format_string
+00053ae0: 2229 0a20 2020 2020 2020 2073 656c 662e  ").        self.
+00053af0: 6173 7365 7274 4571 7561 6c28 6d69 7373  assertEqual(miss
+00053b00: 696e 675f 696e 7075 7473 5b31 5d2c 2022  ing_inputs[1], "
+00053b10: 5069 7065 6c69 6e65 2e72 656e 616d 655f  Pipeline.rename_
+00053b20: 312e 696e 5f66 696c 6522 290a 0a20 2020  1.in_file")..   
+00053b30: 2020 2020 2023 2045 6d70 7469 6573 2074       # Empties t
+00053b40: 6865 206a 6f62 7320 6c69 7374 0a20 2020  he jobs list.   
+00053b50: 2020 2020 2070 706c 5f6d 616e 6167 6572       ppl_manager
+00053b60: 2e77 6f72 6b66 6c6f 772e 6a6f 6273 203d  .workflow.jobs =
+00053b70: 205b 5d0a 0a20 2020 2020 2020 2023 2041   []..        # A
+00053b80: 7373 6572 7473 2074 6861 7420 3220 6d61  sserts that 2 ma
+00053b90: 6e64 6174 6f72 7920 7061 7261 6d65 7465  ndatory paramete
+00053ba0: 7273 2061 7265 2073 7469 6c6c 206d 6973  rs are still mis
+00053bb0: 7369 6e67 0a20 2020 2020 2020 206d 6973  sing.        mis
+00053bc0: 7369 6e67 5f69 6e70 7574 7320 3d20 7070  sing_inputs = pp
+00053bd0: 6c5f 6d61 6e61 6765 722e 6765 745f 6d69  l_manager.get_mi
+00053be0: 7373 696e 675f 6d61 6e64 6174 6f72 795f  ssing_mandatory_
+00053bf0: 7061 7261 6d65 7465 7273 2829 0a20 2020  parameters().   
+00053c00: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00053c10: 4571 7561 6c28 6c65 6e28 6d69 7373 696e  Equal(len(missin
+00053c20: 675f 696e 7075 7473 292c 2032 290a 2020  g_inputs), 2).  
+00053c30: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00053c40: 7445 7175 616c 286d 6973 7369 6e67 5f69  tEqual(missing_i
+00053c50: 6e70 7574 735b 305d 2c20 2250 6970 656c  nputs[0], "Pipel
+00053c60: 696e 652e 7265 6e61 6d65 5f31 2e66 6f72  ine.rename_1.for
+00053c70: 6d61 745f 7374 7269 6e67 2229 0a20 2020  mat_string").   
+00053c80: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00053c90: 4571 7561 6c28 6d69 7373 696e 675f 696e  Equal(missing_in
+00053ca0: 7075 7473 5b31 5d2c 2022 5069 7065 6c69  puts[1], "Pipeli
+00053cb0: 6e65 2e72 656e 616d 655f 312e 696e 5f66  ne.rename_1.in_f
+00053cc0: 696c 6522 290a 0a20 2020 2064 6566 2074  ile")..    def t
+00053cd0: 6573 745f 6765 745f 7069 7065 6c69 6e65  est_get_pipeline
+00053ce0: 5f6f 725f 7072 6f63 6573 7328 7365 6c66  _or_process(self
+00053cf0: 293a 0a20 2020 2020 2020 2022 2222 4164  ):.        """Ad
+00053d00: 6473 2061 2070 726f 6365 7373 2061 6e64  ds a process and
+00053d10: 2067 6574 7320 6120 7069 7065 6c69 6e65   gets a pipeline
+00053d20: 2061 6e64 2061 2070 726f 6365 7373 2066   and a process f
+00053d30: 726f 6d20 7468 6520 7069 7065 6c69 6e65  rom the pipeline
+00053d40: 0a20 2020 2020 2020 206d 616e 6167 6572  .        manager
+00053d50: 2e0a 0a20 2020 2020 2020 202d 2054 6573  ...        - Tes
+00053d60: 7473 3a20 5069 7065 6c69 6e65 4d61 6e61  ts: PipelineMana
+00053d70: 6765 7254 6162 2e67 6574 5f70 6970 656c  gerTab.get_pipel
+00053d80: 696e 655f 6f72 5f70 726f 6365 7373 0a20  ine_or_process. 
+00053d90: 2020 2020 2020 2022 2222 0a0a 2020 2020         """..    
+00053da0: 2020 2020 2320 5365 7473 2073 686f 7274      # Sets short
+00053db0: 6375 7473 2066 6f72 206f 6674 656e 2075  cuts for often u
+00053dc0: 7365 6420 6f62 6a65 6374 730a 2020 2020  sed objects.    
+00053dd0: 2020 2020 7070 6c5f 6d61 6e61 6765 7220      ppl_manager 
+00053de0: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
+00053df0: 6f77 2e70 6970 656c 696e 655f 6d61 6e61  ow.pipeline_mana
+00053e00: 6765 720a 2020 2020 2020 2020 7070 6c5f  ger.        ppl_
+00053e10: 6564 745f 7461 6273 203d 2070 706c 5f6d  edt_tabs = ppl_m
+00053e20: 616e 6167 6572 2e70 6970 656c 696e 6545  anager.pipelineE
+00053e30: 6469 746f 7254 6162 730a 0a20 2020 2020  ditorTabs..     
+00053e40: 2020 2023 2047 6574 7320 7468 6520 7069     # Gets the pi
+00053e50: 7065 6c69 6e65 0a20 2020 2020 2020 2070  peline.        p
+00053e60: 6970 656c 696e 6520 3d20 7070 6c5f 6d61  ipeline = ppl_ma
+00053e70: 6e61 6765 722e 6765 745f 7069 7065 6c69  nager.get_pipeli
+00053e80: 6e65 5f6f 725f 7072 6f63 6573 7328 290a  ne_or_process().
+00053e90: 0a20 2020 2020 2020 2023 2041 7373 6572  .        # Asser
+00053ea0: 7473 2074 6861 7420 7468 6520 6f62 6a65  ts that the obje
+00053eb0: 6374 2027 7069 7065 6c69 6e65 2720 6973  ct 'pipeline' is
+00053ec0: 2061 2027 5069 7065 6c69 6e65 270a 2020   a 'Pipeline'.  
+00053ed0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00053ee0: 7449 7349 6e73 7461 6e63 6528 7069 7065  tIsInstance(pipe
+00053ef0: 6c69 6e65 2c20 5069 7065 6c69 6e65 290a  line, Pipeline).
+00053f00: 0a20 2020 2020 2020 2023 2041 6464 7320  .        # Adds 
+00053f10: 7468 6520 7072 6f63 6573 7365 7320 5265  the processes Re
+00053f20: 6e61 6d65 2c20 6372 6561 7465 7320 7468  name, creates th
+00053f30: 6520 2272 656e 616d 655f 3122 206e 6f64  e "rename_1" nod
+00053f40: 650a 2020 2020 2020 2020 7070 6c5f 6564  e.        ppl_ed
+00053f50: 745f 7461 6273 2e67 6574 5f63 7572 7265  t_tabs.get_curre
+00053f60: 6e74 5f65 6469 746f 7228 292e 636c 6963  nt_editor().clic
+00053f70: 6b5f 706f 7320 3d20 5150 6f69 6e74 2834  k_pos = QPoint(4
+00053f80: 3530 2c20 3530 3029 0a20 2020 2020 2020  50, 500).       
+00053f90: 2070 706c 5f65 6474 5f74 6162 732e 6765   ppl_edt_tabs.ge
+00053fa0: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
+00053fb0: 2829 2e61 6464 5f6e 616d 6564 5f70 726f  ().add_named_pro
+00053fc0: 6365 7373 2852 656e 616d 6529 0a0a 2020  cess(Rename)..  
+00053fd0: 2020 2020 2020 2320 4765 7473 2061 2070        # Gets a p
+00053fe0: 726f 6365 7373 0a20 2020 2020 2020 2070  rocess.        p
+00053ff0: 726f 6365 7373 203d 2070 706c 5f6d 616e  rocess = ppl_man
+00054000: 6167 6572 2e67 6574 5f70 6970 656c 696e  ager.get_pipelin
+00054010: 655f 6f72 5f70 726f 6365 7373 2829 0a0a  e_or_process()..
+00054020: 2020 2020 2020 2020 2320 4173 7365 7274          # Assert
+00054030: 7320 7468 6174 2074 6865 2070 726f 6365  s that the proce
+00054040: 7373 2027 7069 7065 6c69 6e65 2720 6973  ss 'pipeline' is
+00054050: 2069 6e64 6565 6420 6120 274e 6970 7970   indeed a 'Nipyp
+00054060: 6550 726f 6365 7373 270a 2020 2020 2020  eProcess'.      
+00054070: 2020 7365 6c66 2e61 7373 6572 7449 7349    self.assertIsI
+00054080: 6e73 7461 6e63 6528 7072 6f63 6573 732c  nstance(process,
+00054090: 204e 6970 7970 6550 726f 6365 7373 290a   NipypeProcess).
+000540a0: 0a20 2020 2064 6566 2074 6573 745f 696e  .    def test_in
+000540b0: 6974 6961 6c69 7a65 2873 656c 6629 3a0a  itialize(self):.
+000540c0: 2020 2020 2020 2020 2222 2241 6464 7320          """Adds 
+000540d0: 5365 6c65 6374 2070 726f 6365 7373 2c20  Select process, 
+000540e0: 6578 706f 7274 7320 6974 7320 706c 7567  exports its plug
+000540f0: 732c 206d 6f63 6b73 206f 626a 6563 7473  s, mocks objects
+00054100: 2066 726f 6d20 7468 650a 2020 2020 2020   from the.      
+00054110: 2020 7069 7065 6c69 6e65 206d 616e 6167    pipeline manag
+00054120: 6572 2061 6e64 2069 6e69 7469 616c 697a  er and initializ
+00054130: 6573 2074 6865 2077 6f72 6b66 6c6f 772e  es the workflow.
+00054140: 0a0a 2020 2020 2020 2020 2d20 5465 7374  ..        - Test
+00054150: 733a 2074 6865 2050 6970 656c 696e 654d  s: the PipelineM
+00054160: 616e 6167 6572 5461 622e 696e 6974 6961  anagerTab.initia
+00054170: 6c69 7a65 0a20 2020 2020 2020 2022 2222  lize.        """
+00054180: 0a0a 2020 2020 2020 2020 2320 4765 7473  ..        # Gets
+00054190: 2074 6865 2070 6174 6873 206f 6620 3220   the paths of 2 
+000541a0: 646f 6375 6d65 6e74 730a 2020 2020 2020  documents.      
+000541b0: 2020 636f 6e66 6967 203d 2043 6f6e 6669    config = Confi
+000541c0: 6728 636f 6e66 6967 5f70 6174 683d 7365  g(config_path=se
+000541d0: 6c66 2e63 6f6e 6669 675f 7061 7468 290a  lf.config_path).
+000541e0: 2020 2020 2020 2020 666f 6c64 6572 203d          folder =
+000541f0: 206f 732e 7061 7468 2e61 6273 7061 7468   os.path.abspath
+00054200: 280a 2020 2020 2020 2020 2020 2020 6f73  (.            os
+00054210: 2e70 6174 682e 6a6f 696e 280a 2020 2020  .path.join(.    
+00054220: 2020 2020 2020 2020 2020 2020 636f 6e66              conf
+00054230: 6967 2e67 6574 5f6d 6961 5f70 6174 6828  ig.get_mia_path(
+00054240: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
+00054250: 2020 2022 6d69 6175 7464 6174 6122 2c0a     "miautdata",.
+00054260: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00054270: 2272 6573 6f75 7263 6573 222c 0a20 2020  "resources",.   
+00054280: 2020 2020 2020 2020 2020 2020 2022 6d69               "mi
+00054290: 6122 2c0a 2020 2020 2020 2020 2020 2020  a",.            
+000542a0: 2020 2020 2270 726f 6a65 6374 5f38 222c      "project_8",
+000542b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000542c0: 2022 6461 7461 222c 0a20 2020 2020 2020   "data",.       
+000542d0: 2020 2020 2020 2020 2022 7261 775f 6461           "raw_da
+000542e0: 7461 222c 0a20 2020 2020 2020 2020 2020  ta",.           
+000542f0: 2029 0a20 2020 2020 2020 2029 0a0a 2020   ).        )..  
+00054300: 2020 2020 2020 4e49 495f 4649 4c45 5f31        NII_FILE_1
+00054310: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
+00054320: 2022 4775 6572 6265 742d 4336 2d32 3031   "Guerbet-C6-201
+00054330: 342d 5261 742d 4b35 322d 5475 6265 3237  4-Rat-K52-Tube27
+00054340: 2d32 3031 342d 3032 2d31 3431 3032 3331  -2014-02-1410231
+00054350: 372d 3034 2d47 335f 220a 2020 2020 2020  7-04-G3_".      
+00054360: 2020 2020 2020 2247 7565 7262 6574 5f4d        "Guerbet_M
+00054370: 4445 4654 2d4d 4445 4654 7076 6d2d 3030  DEFT-MDEFTpvm-00
+00054380: 3039 3430 5f38 3030 2e6e 6969 220a 2020  0940_800.nii".  
+00054390: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+000543a0: 2044 4f43 554d 454e 545f 3120 3d20 6f73   DOCUMENT_1 = os
+000543b0: 2e70 6174 682e 6162 7370 6174 6828 6f73  .path.abspath(os
+000543c0: 2e70 6174 682e 6a6f 696e 2866 6f6c 6465  .path.join(folde
+000543d0: 722c 204e 4949 5f46 494c 455f 3129 290a  r, NII_FILE_1)).
+000543e0: 0a20 2020 2020 2020 2023 2053 6574 7320  .        # Sets 
+000543f0: 7368 6f72 7463 7574 7320 666f 7220 6f62  shortcuts for ob
+00054400: 6a65 6374 7320 7468 6174 2061 7265 206f  jects that are o
+00054410: 6674 656e 2075 7365 640a 2020 2020 2020  ften used.      
+00054420: 2020 7070 6c5f 6d61 6e61 6765 7220 3d20    ppl_manager = 
+00054430: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+00054440: 2e70 6970 656c 696e 655f 6d61 6e61 6765  .pipeline_manage
+00054450: 720a 2020 2020 2020 2020 7070 6c5f 6564  r.        ppl_ed
+00054460: 745f 7461 6273 203d 2070 706c 5f6d 616e  t_tabs = ppl_man
+00054470: 6167 6572 2e70 6970 656c 696e 6545 6469  ager.pipelineEdi
+00054480: 746f 7254 6162 730a 0a20 2020 2020 2020  torTabs..       
+00054490: 2023 2041 6464 7320 7468 6520 7072 6f63   # Adds the proc
+000544a0: 6573 7320 2752 656e 616d 6527 2061 7320  ess 'Rename' as 
+000544b0: 7468 6520 6e6f 6465 2027 7265 6e61 6d65  the node 'rename
+000544c0: 5f31 270a 2020 2020 2020 2020 7070 6c5f  _1'.        ppl_
+000544d0: 6564 745f 7461 6273 2e67 6574 5f63 7572  edt_tabs.get_cur
+000544e0: 7265 6e74 5f65 6469 746f 7228 292e 636c  rent_editor().cl
+000544f0: 6963 6b5f 706f 7320 3d20 5150 6f69 6e74  ick_pos = QPoint
+00054500: 2834 3530 2c20 3530 3029 0a20 2020 2020  (450, 500).     
+00054510: 2020 2070 706c 5f65 6474 5f74 6162 732e     ppl_edt_tabs.
+00054520: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
+00054530: 6f72 2829 2e61 6464 5f6e 616d 6564 5f70  or().add_named_p
+00054540: 726f 6365 7373 2852 656e 616d 6529 0a20  rocess(Rename). 
+00054550: 2020 2020 2020 2070 6970 656c 696e 6520         pipeline 
+00054560: 3d20 7070 6c5f 6564 745f 7461 6273 2e67  = ppl_edt_tabs.g
+00054570: 6574 5f63 7572 7265 6e74 5f70 6970 656c  et_current_pipel
+00054580: 696e 6528 290a 0a20 2020 2020 2020 2023  ine()..        #
+00054590: 2045 7870 6f72 7473 2074 6865 206d 616e   Exports the man
+000545a0: 6461 746f 7279 2069 6e70 7574 7320 616e  datory inputs an
+000545b0: 6420 6f75 7470 7574 7320 666f 7220 2773  d outputs for 's
+000545c0: 656c 6563 745f 3127 0a20 2020 2020 2020  elect_1'.       
+000545d0: 2070 706c 5f65 6474 5f74 6162 732e 6765   ppl_edt_tabs.ge
+000545e0: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
+000545f0: 2829 2e63 7572 7265 6e74 5f6e 6f64 655f  ().current_node_
+00054600: 6e61 6d65 203d 2022 7265 6e61 6d65 5f31  name = "rename_1
+00054610: 220a 2020 2020 2020 2020 7070 6c5f 6564  ".        ppl_ed
+00054620: 745f 7461 6273 2e67 6574 5f63 7572 7265  t_tabs.get_curre
+00054630: 6e74 5f65 6469 746f 7228 292e 6578 706f  nt_editor().expo
+00054640: 7274 5f75 6e63 6f6e 6e65 6374 6564 5f6d  rt_unconnected_m
+00054650: 616e 6461 746f 7279 5f69 6e70 7574 7328  andatory_inputs(
+00054660: 290a 2020 2020 2020 2020 7070 6c5f 6564  ).        ppl_ed
+00054670: 745f 7461 6273 2e67 6574 5f63 7572 7265  t_tabs.get_curre
+00054680: 6e74 5f65 6469 746f 7228 292e 6578 706f  nt_editor().expo
+00054690: 7274 5f61 6c6c 5f75 6e63 6f6e 6e65 6374  rt_all_unconnect
+000546a0: 6564 5f6f 7574 7075 7473 2829 0a0a 2020  ed_outputs()..  
+000546b0: 2020 2020 2020 2320 5365 7473 206d 616e        # Sets man
+000546c0: 6461 746f 7279 2070 6172 616d 6574 6572  datory parameter
+000546d0: 7320 2773 656c 6563 745f 3127 0a20 2020  s 'select_1'.   
+000546e0: 2020 2020 2070 6970 656c 696e 652e 6e6f       pipeline.no
+000546f0: 6465 735b 2222 5d2e 7365 745f 706c 7567  des[""].set_plug
+00054700: 5f76 616c 7565 2822 696e 5f66 696c 6522  _value("in_file"
+00054710: 2c20 444f 4355 4d45 4e54 5f31 290a 2020  , DOCUMENT_1).  
+00054720: 2020 2020 2020 7069 7065 6c69 6e65 2e6e        pipeline.n
+00054730: 6f64 6573 5b22 225d 2e73 6574 5f70 6c75  odes[""].set_plu
+00054740: 675f 7661 6c75 6528 2266 6f72 6d61 745f  g_value("format_
+00054750: 7374 7269 6e67 222c 2022 6e65 775f 6e61  string", "new_na
+00054760: 6d65 2e6e 6969 2229 0a0a 2020 2020 2020  me.nii")..      
+00054770: 2020 2320 4368 6563 6b73 2074 6861 7420    # Checks that 
+00054780: 7468 6572 6520 6973 206e 6f20 776f 726b  there is no work
+00054790: 666c 6f77 2069 6e64 6578 0a20 2020 2020  flow index.     
+000547a0: 2020 2073 656c 662e 6173 7365 7274 4973     self.assertIs
+000547b0: 4e6f 6e65 2870 706c 5f6d 616e 6167 6572  None(ppl_manager
+000547c0: 2e77 6f72 6b66 6c6f 7729 0a0a 2020 2020  .workflow)..    
+000547d0: 2020 2020 2320 4d6f 636b 7320 6f62 6a65      # Mocks obje
+000547e0: 6374 730a 2020 2020 2020 2020 7070 6c5f  cts.        ppl_
+000547f0: 6d61 6e61 6765 722e 696e 6974 5f63 6c69  manager.init_cli
+00054800: 636b 6564 203d 2054 7275 650a 2020 2020  cked = True.    
+00054810: 2020 2020 7070 6c5f 6d61 6e61 6765 722e      ppl_manager.
+00054820: 6967 6e6f 7265 5f6e 6f64 6520 3d20 5472  ignore_node = Tr
+00054830: 7565 0a20 2020 2020 2020 2070 706c 5f6d  ue.        ppl_m
+00054840: 616e 6167 6572 2e6b 6579 203d 207b 2269  anager.key = {"i
+00054850: 7465 6d22 3a20 2269 7465 6d5f 7661 6c75  tem": "item_valu
+00054860: 6522 7d0a 2020 2020 2020 2020 7070 6c5f  e"}.        ppl_
+00054870: 6d61 6e61 6765 722e 6967 6e6f 7265 203d  manager.ignore =
+00054880: 207b 2269 7465 6d22 3a20 2269 7465 6d5f   {"item": "item_
+00054890: 7661 6c75 6522 7d0a 0a20 2020 2020 2020  value"}..       
+000548a0: 2023 204d 6f63 6b73 206d 6574 686f 6473   # Mocks methods
 000548b0: 0a20 2020 2020 2020 2070 706c 5f6d 616e  .        ppl_man
-000548c0: 6167 6572 2e69 6e69 7469 616c 697a 6528  ager.initialize(
-000548d0: 290a 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-000548e0: 6173 7365 7274 4661 6c73 6528 7070 6c5f  assertFalse(ppl_
-000548f0: 6d61 6e61 6765 722e 6967 6e6f 7265 5f6e  manager.ignore_n
-00054900: 6f64 6529 0a0a 2020 2020 6465 6620 7465  ode)..    def te
-00054910: 7374 5f72 6567 6973 7465 725f 636f 6d70  st_register_comp
-00054920: 6c65 7469 6f6e 5f61 7474 7269 6275 7465  letion_attribute
-00054930: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
-00054940: 2022 2222 4d6f 636b 7320 6d65 7468 6f64   """Mocks method
-00054950: 7320 6f66 2074 6865 2070 6970 656c 696e  s of the pipelin
-00054960: 6520 6d61 6e61 6765 7220 616e 6420 7265  e manager and re
-00054970: 6769 7374 6572 7320 636f 6d70 6c65 7469  gisters completi
-00054980: 6f6e 0a20 2020 2020 2020 2061 7474 7269  on.        attri
-00054990: 6275 7465 732e 0a0a 2020 2020 2020 2020  butes...        
-000549a0: 5369 6e63 6520 6120 6d65 7468 6f64 206f  Since a method o
-000549b0: 6620 7468 6520 5072 6f63 6573 7343 6f6d  f the ProcessCom
-000549c0: 706c 6574 696f 6e45 6e67 696e 6520 636c  pletionEngine cl
-000549d0: 6173 7320 6973 206d 6f63 6b65 642c 0a20  ass is mocked,. 
-000549e0: 2020 2020 2020 2074 6869 7320 7465 7374         this test
-000549f0: 206d 6179 2072 656e 6465 7220 7468 6520   may render the 
-00054a00: 7570 636f 6d69 6e67 2074 6573 7420 726f  upcoming test ro
-00054a10: 7574 696e 6520 756e 7374 6162 6c65 2e0a  utine unstable..
-00054a20: 0a20 2020 2020 2020 202d 2054 6573 7473  .        - Tests
-00054a30: 3a20 5069 7065 6c69 6e65 4d61 6e61 6765  : PipelineManage
-00054a40: 7254 6162 2e72 6567 6973 7465 725f 636f  rTab.register_co
-00054a50: 6d70 6c65 7469 6f6e 5f61 7474 7269 6275  mpletion_attribu
-00054a60: 7465 730a 2020 2020 2020 2020 2222 220a  tes.        """.
-00054a70: 0a20 2020 2020 2020 2023 2053 6574 7320  .        # Sets 
-00054a80: 7368 6f72 7463 7574 7320 666f 7220 6f62  shortcuts for ob
-00054a90: 6a65 6374 7320 7468 6174 2061 7265 206f  jects that are o
-00054aa0: 6674 656e 2075 7365 640a 2020 2020 2020  ften used.      
-00054ab0: 2020 7070 6c5f 6d61 6e61 6765 7220 3d20    ppl_manager = 
-00054ac0: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-00054ad0: 2e70 6970 656c 696e 655f 6d61 6e61 6765  .pipeline_manage
-00054ae0: 720a 2020 2020 2020 2020 7070 6c5f 6564  r.        ppl_ed
-00054af0: 745f 7461 6273 203d 2070 706c 5f6d 616e  t_tabs = ppl_man
-00054b00: 6167 6572 2e70 6970 656c 696e 6545 6469  ager.pipelineEdi
-00054b10: 746f 7254 6162 730a 2020 2020 2020 2020  torTabs.        
-00054b20: 7070 6c20 3d20 7070 6c5f 6564 745f 7461  ppl = ppl_edt_ta
-00054b30: 6273 2e67 6574 5f63 7572 7265 6e74 5f70  bs.get_current_p
-00054b40: 6970 656c 696e 6528 290a 0a20 2020 2020  ipeline()..     
-00054b50: 2020 2023 2047 6574 7320 7468 6520 7061     # Gets the pa
-00054b60: 7468 206f 6620 6f6e 6520 646f 6375 6d65  th of one docume
-00054b70: 6e74 0a20 2020 2020 2020 2063 6f6e 6669  nt.        confi
-00054b80: 6720 3d20 436f 6e66 6967 2863 6f6e 6669  g = Config(confi
-00054b90: 675f 7061 7468 3d73 656c 662e 636f 6e66  g_path=self.conf
-00054ba0: 6967 5f70 6174 6829 0a20 2020 2020 2020  ig_path).       
-00054bb0: 2066 6f6c 6465 7220 3d20 6f73 2e70 6174   folder = os.pat
-00054bc0: 682e 6162 7370 6174 6828 0a20 2020 2020  h.abspath(.     
-00054bd0: 2020 2020 2020 206f 732e 7061 7468 2e6a         os.path.j
-00054be0: 6f69 6e28 0a20 2020 2020 2020 2020 2020  oin(.           
-00054bf0: 2020 2020 2063 6f6e 6669 672e 6765 745f       config.get_
-00054c00: 6d69 615f 7061 7468 2829 2c0a 2020 2020  mia_path(),.    
-00054c10: 2020 2020 2020 2020 2020 2020 226d 6961              "mia
-00054c20: 7574 6461 7461 222c 0a20 2020 2020 2020  utdata",.       
-00054c30: 2020 2020 2020 2020 2022 7265 736f 7572           "resour
-00054c40: 6365 7322 2c0a 2020 2020 2020 2020 2020  ces",.          
-00054c50: 2020 2020 2020 226d 6961 222c 0a20 2020        "mia",.   
-00054c60: 2020 2020 2020 2020 2020 2020 2022 7072               "pr
-00054c70: 6f6a 6563 745f 3822 2c0a 2020 2020 2020  oject_8",.      
-00054c80: 2020 2020 2020 2020 2020 2264 6174 6122            "data"
-00054c90: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00054ca0: 2020 2272 6177 5f64 6174 6122 2c0a 2020    "raw_data",.  
-00054cb0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00054cc0: 2020 2020 290a 2020 2020 2020 2020 4e49      ).        NI
-00054cd0: 495f 4649 4c45 5f31 203d 2028 0a20 2020  I_FILE_1 = (.   
-00054ce0: 2020 2020 2020 2020 2022 4775 6572 6265           "Guerbe
-00054cf0: 742d 4336 2d32 3031 342d 5261 742d 4b35  t-C6-2014-Rat-K5
-00054d00: 322d 5475 6265 3237 2d32 3031 342d 3032  2-Tube27-2014-02
-00054d10: 2d31 3431 3032 3331 372d 3031 2d47 315f  -14102317-01-G1_
-00054d20: 220a 2020 2020 2020 2020 2020 2020 2247  ".            "G
-00054d30: 7565 7262 6574 5f41 6e61 742d 5241 5245  uerbet_Anat-RARE
-00054d40: 7076 6d2d 3030 3032 3230 5f30 3030 2e6e  pvm-000220_000.n
-00054d50: 6969 220a 2020 2020 2020 2020 290a 2020  ii".        ).  
-00054d60: 2020 2020 2020 4e49 495f 4649 4c45 5f32        NII_FILE_2
-00054d70: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
-00054d80: 2022 4775 6572 6265 742d 4336 2d32 3031   "Guerbet-C6-201
-00054d90: 342d 5261 742d 4b35 322d 5475 6265 3237  4-Rat-K52-Tube27
-00054da0: 2d32 3031 342d 3032 2d31 3431 3032 3331  -2014-02-1410231
-00054db0: 372d 3034 2d47 335f 220a 2020 2020 2020  7-04-G3_".      
-00054dc0: 2020 2020 2020 2247 7565 7262 6574 5f4d        "Guerbet_M
-00054dd0: 4445 4654 2d4d 4445 4654 7076 6d2d 3030  DEFT-MDEFTpvm-00
-00054de0: 3039 3430 5f38 3030 2e6e 6969 220a 2020  0940_800.nii".  
-00054df0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
-00054e00: 2044 4f43 554d 454e 545f 3120 3d20 6f73   DOCUMENT_1 = os
-00054e10: 2e70 6174 682e 6162 7370 6174 6828 6f73  .path.abspath(os
-00054e20: 2e70 6174 682e 6a6f 696e 2866 6f6c 6465  .path.join(folde
-00054e30: 722c 204e 4949 5f46 494c 455f 3129 290a  r, NII_FILE_1)).
-00054e40: 2020 2020 2020 2020 444f 4355 4d45 4e54          DOCUMENT
-00054e50: 5f32 203d 206f 732e 7061 7468 2e61 6273  _2 = os.path.abs
-00054e60: 7061 7468 286f 732e 7061 7468 2e6a 6f69  path(os.path.joi
-00054e70: 6e28 666f 6c64 6572 2c20 4e49 495f 4649  n(folder, NII_FI
-00054e80: 4c45 5f32 2929 0a0a 2020 2020 2020 2020  LE_2))..        
-00054e90: 2320 4164 6473 2061 2053 656c 6563 7420  # Adds a Select 
-00054ea0: 7072 6f63 6573 7365 732c 2063 7265 6174  processes, creat
-00054eb0: 6573 2074 6865 2027 7365 6c65 6374 5f31  es the 'select_1
-00054ec0: 2720 6e6f 6465 0a20 2020 2020 2020 2070  ' node.        p
-00054ed0: 706c 5f65 6474 5f74 6162 732e 6765 745f  pl_edt_tabs.get_
-00054ee0: 6375 7272 656e 745f 6564 6974 6f72 2829  current_editor()
-00054ef0: 2e63 6c69 636b 5f70 6f73 203d 2051 506f  .click_pos = QPo
-00054f00: 696e 7428 3435 302c 2035 3030 290a 2020  int(450, 500).  
-00054f10: 2020 2020 2020 7070 6c5f 6564 745f 7461        ppl_edt_ta
-00054f20: 6273 2e67 6574 5f63 7572 7265 6e74 5f65  bs.get_current_e
-00054f30: 6469 746f 7228 292e 6164 645f 6e61 6d65  ditor().add_name
-00054f40: 645f 7072 6f63 6573 7328 5365 6c65 6374  d_process(Select
-00054f50: 290a 0a20 2020 2020 2020 2023 2045 7870  )..        # Exp
-00054f60: 6f72 7420 706c 7567 7320 616e 6420 7365  ort plugs and se
-00054f70: 7473 2074 6865 6972 2076 616c 7565 730a  ts their values.
-00054f80: 2020 2020 2020 2020 7072 696e 7428 225c          print("\
-00054f90: 6e5c 6e2a 2a20 616e 2065 7863 6570 7469  n\n** an excepti
-00054fa0: 6f6e 206d 6573 7361 6765 2069 7320 6578  on message is ex
-00054fb0: 7065 6374 6564 2062 656c 6f77 5c6e 2229  pected below\n")
-00054fc0: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
-00054fd0: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
-00054fe0: 745f 6564 6974 6f72 2829 2e65 7870 6f72  t_editor().expor
-00054ff0: 745f 756e 636f 6e6e 6563 7465 645f 6d61  t_unconnected_ma
-00055000: 6e64 6174 6f72 795f 696e 7075 7473 2829  ndatory_inputs()
-00055010: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
-00055020: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
-00055030: 745f 6564 6974 6f72 2829 2e65 7870 6f72  t_editor().expor
-00055040: 745f 616c 6c5f 756e 636f 6e6e 6563 7465  t_all_unconnecte
-00055050: 645f 6f75 7470 7574 7328 290a 2020 2020  d_outputs().    
-00055060: 2020 2020 7070 6c2e 6e6f 6465 735b 2222      ppl.nodes[""
-00055070: 5d2e 7365 745f 706c 7567 5f76 616c 7565  ].set_plug_value
-00055080: 2822 696e 6c69 7374 222c 205b 444f 4355  ("inlist", [DOCU
-00055090: 4d45 4e54 5f31 2c20 444f 4355 4d45 4e54  MENT_1, DOCUMENT
-000550a0: 5f32 5d29 0a20 2020 2020 2020 2070 726f  _2]).        pro
-000550b0: 6a5f 6469 7220 3d20 6f73 2e70 6174 682e  j_dir = os.path.
-000550c0: 6a6f 696e 280a 2020 2020 2020 2020 2020  join(.          
-000550d0: 2020 6f73 2e70 6174 682e 6162 7370 6174    os.path.abspat
-000550e0: 6828 6f73 2e70 6174 682e 6e6f 726d 7061  h(os.path.normpa
-000550f0: 7468 2870 706c 5f6d 616e 6167 6572 2e70  th(ppl_manager.p
-00055100: 726f 6a65 6374 2e66 6f6c 6465 7229 292c  roject.folder)),
-00055110: 2022 220a 2020 2020 2020 2020 290a 2020   "".        ).  
-00055120: 2020 2020 2020 6f75 7470 7574 5f64 6972        output_dir
-00055130: 203d 206f 732e 7061 7468 2e6a 6f69 6e28   = os.path.join(
-00055140: 7072 6f6a 5f64 6972 2c20 226f 7574 7075  proj_dir, "outpu
-00055150: 745f 6669 6c65 2e6e 6969 2229 0a20 2020  t_file.nii").   
-00055160: 2020 2020 2070 706c 2e6e 6f64 6573 5b22       ppl.nodes["
-00055170: 225d 2e73 6574 5f70 6c75 675f 7661 6c75  "].set_plug_valu
-00055180: 6528 225f 6f75 7422 2c20 6f75 7470 7574  e("_out", output
-00055190: 5f64 6972 290a 0a20 2020 2020 2020 2023  _dir)..        #
-000551a0: 2052 6567 6973 7465 7220 636f 6d70 6c65   Register comple
-000551b0: 7469 6f6e 2077 6974 686f 7574 2027 6174  tion without 'at
-000551c0: 7472 6962 7574 6573 270a 2020 2020 2020  tributes'.      
-000551d0: 2020 7070 6c5f 6d61 6e61 6765 722e 7265    ppl_manager.re
-000551e0: 6769 7374 6572 5f63 6f6d 706c 6574 696f  gister_completio
-000551f0: 6e5f 6174 7472 6962 7574 6573 2870 706c  n_attributes(ppl
-00055200: 290a 0a20 2020 2020 2020 2023 204d 6f63  )..        # Moc
-00055210: 6b73 2027 6765 745f 6361 7073 756c 5f65  ks 'get_capsul_e
-00055220: 6e67 696e 6527 2066 6f72 2074 6865 206d  ngine' for the m
-00055230: 6574 686f 6420 6e6f 7420 746f 2074 6872  ethod not to thr
-00055240: 6f77 2061 6e20 6572 726f 720a 2020 2020  ow an error.    
-00055250: 2020 2020 2320 7769 7468 2074 6865 2069      # with the i
-00055260: 6e73 6572 7469 6f6e 206f 6620 7468 6520  nsertion of the 
-00055270: 7570 636f 6d69 6e67 206d 6f63 6b0a 2020  upcoming mock.  
-00055280: 2020 2020 2020 6361 7073 756c 5f65 6e67        capsul_eng
-00055290: 696e 6520 3d20 7070 6c5f 6564 745f 7461  ine = ppl_edt_ta
-000552a0: 6273 2e67 6574 5f63 6170 7375 6c5f 656e  bs.get_capsul_en
-000552b0: 6769 6e65 2829 0a20 2020 2020 2020 2070  gine().        p
-000552c0: 706c 5f6d 616e 6167 6572 2e67 6574 5f63  pl_manager.get_c
-000552d0: 6170 7375 6c5f 656e 6769 6e65 203d 204d  apsul_engine = M
-000552e0: 6f63 6b28 7265 7475 726e 5f76 616c 7565  ock(return_value
-000552f0: 3d63 6170 7375 6c5f 656e 6769 6e65 290a  =capsul_engine).
-00055300: 0a20 2020 2020 2020 2023 204d 6f63 6b73  .        # Mocks
-00055310: 2061 7474 7269 6275 7465 7320 7661 6c75   attributes valu
-00055320: 6573 2074 6861 7420 6172 6520 696e 2074  es that are in t
-00055330: 6865 2074 6167 7320 6c69 7374 0a20 2020  he tags list.   
-00055340: 2020 2020 2061 7474 7269 6275 7465 7320       attributes 
-00055350: 3d20 7b22 4368 6563 6b73 756d 223a 2022  = {"Checksum": "
-00055360: 4368 6563 6b73 756d 5f76 616c 7565 227d  Checksum_value"}
-00055370: 0a20 2020 2020 2020 2028 0a20 2020 2020  .        (.     
-00055380: 2020 2020 2020 2050 726f 6365 7373 436f         ProcessCo
-00055390: 6d70 6c65 7469 6f6e 456e 6769 6e65 2e67  mpletionEngine.g
-000553a0: 6574 5f63 6f6d 706c 6574 696f 6e5f 656e  et_completion_en
-000553b0: 6769 6e65 280a 2020 2020 2020 2020 2020  gine(.          
-000553c0: 2020 2020 2020 7070 6c0a 2020 2020 2020        ppl.      
-000553d0: 2020 2020 2020 292e 6765 745f 6174 7472        ).get_attr
-000553e0: 6962 7574 655f 7661 6c75 6573 0a20 2020  ibute_values.   
-000553f0: 2020 2020 2029 2829 2e65 7870 6f72 745f       )().export_
-00055400: 746f 5f64 6963 7420 3d20 4d6f 636b 2872  to_dict = Mock(r
-00055410: 6574 7572 6e5f 7661 6c75 653d 6174 7472  eturn_value=attr
-00055420: 6962 7574 6573 290a 0a20 2020 2020 2020  ibutes)..       
-00055430: 2023 2052 6567 6973 7465 7220 636f 6d70   # Register comp
-00055440: 6c65 7469 6f6e 2077 6974 6820 6d6f 636b  letion with mock
-00055450: 6564 2027 6174 7472 6962 7574 6573 270a  ed 'attributes'.
-00055460: 2020 2020 2020 2020 7070 6c5f 6d61 6e61          ppl_mana
-00055470: 6765 722e 7265 6769 7374 6572 5f63 6f6d  ger.register_com
-00055480: 706c 6574 696f 6e5f 6174 7472 6962 7574  pletion_attribut
-00055490: 6573 2870 706c 290a 0a20 2020 2064 6566  es(ppl)..    def
-000554a0: 2074 6573 745f 7265 6769 7374 6572 5f6e   test_register_n
-000554b0: 6f64 655f 696f 5f69 6e5f 6461 7461 6261  ode_io_in_databa
-000554c0: 7365 2873 656c 6629 3a0a 2020 2020 2020  se(self):.      
-000554d0: 2020 2222 2241 6464 7320 6120 7072 6f63    """Adds a proc
-000554e0: 6573 732c 2073 6574 7320 696e 7075 7420  ess, sets input 
-000554f0: 616e 6420 6f75 7470 7574 2070 6172 616d  and output param
-00055500: 6574 6572 7320 616e 6420 7265 6769 7374  eters and regist
-00055510: 6572 7320 7468 656d 0a20 2020 2020 2020  ers them.       
-00055520: 2069 6e20 6461 7461 6261 7365 2e0a 0a20   in database... 
-00055530: 2020 2020 2020 202d 2054 6573 7473 3a20         - Tests: 
-00055540: 5069 7065 6c69 6e65 4d61 6e61 6765 7254  PipelineManagerT
-00055550: 6162 2e5f 7265 6769 7374 6572 5f6e 6f64  ab._register_nod
-00055560: 655f 696f 5f69 6e5f 6461 7461 6261 7365  e_io_in_database
-00055570: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
-00055580: 2020 2020 2020 2320 4f70 656e 7320 7072        # Opens pr
-00055590: 6f6a 6563 7420 3820 616e 6420 7377 6974  oject 8 and swit
-000555a0: 6368 6573 2074 6f20 6974 0a20 2020 2020  ches to it.     
-000555b0: 2020 2070 726f 6a65 6374 5f38 5f70 6174     project_8_pat
-000555c0: 6820 3d20 7365 6c66 2e67 6574 5f6e 6577  h = self.get_new
-000555d0: 5f74 6573 745f 7072 6f6a 6563 7428 290a  _test_project().
-000555e0: 2020 2020 2020 2020 7365 6c66 2e6d 6169          self.mai
-000555f0: 6e5f 7769 6e64 6f77 2e73 7769 7463 685f  n_window.switch_
-00055600: 7072 6f6a 6563 7428 7072 6f6a 6563 745f  project(project_
-00055610: 385f 7061 7468 2c20 2270 726f 6a65 6374  8_path, "project
-00055620: 5f39 2229 0a0a 2020 2020 2020 2020 444f  _9")..        DO
-00055630: 4355 4d45 4e54 5f31 203d 2073 656c 662e  CUMENT_1 = self.
-00055640: 6d61 696e 5f77 696e 646f 772e 7072 6f6a  main_window.proj
-00055650: 6563 742e 7365 7373 696f 6e2e 6765 745f  ect.session.get_
-00055660: 646f 6375 6d65 6e74 735f 6e61 6d65 7328  documents_names(
-00055670: 0a20 2020 2020 2020 2020 2020 2022 6375  .            "cu
-00055680: 7272 656e 7422 0a20 2020 2020 2020 2029  rrent".        )
-00055690: 5b30 5d0a 0a20 2020 2020 2020 2070 6970  [0]..        pip
-000556a0: 656c 696e 655f 6564 6974 6f72 5f74 6162  eline_editor_tab
-000556b0: 7320 3d20 280a 2020 2020 2020 2020 2020  s = (.          
-000556c0: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
-000556d0: 6f77 2e70 6970 656c 696e 655f 6d61 6e61  ow.pipeline_mana
-000556e0: 6765 722e 7069 7065 6c69 6e65 4564 6974  ger.pipelineEdit
-000556f0: 6f72 5461 6273 0a20 2020 2020 2020 2029  orTabs.        )
-00055700: 0a0a 2020 2020 2020 2020 2320 4164 6473  ..        # Adds
-00055710: 2074 6865 2070 726f 6365 7373 6573 2052   the processes R
-00055720: 656e 616d 652c 2063 7265 6174 6573 2074  ename, creates t
-00055730: 6865 2022 7265 6e61 6d65 5f31 2220 6e6f  he "rename_1" no
-00055740: 6465 0a20 2020 2020 2020 2070 726f 6365  de.        proce
-00055750: 7373 5f63 6c61 7373 203d 2052 656e 616d  ss_class = Renam
-00055760: 650a 2020 2020 2020 2020 7069 7065 6c69  e.        pipeli
-00055770: 6e65 5f65 6469 746f 725f 7461 6273 2e67  ne_editor_tabs.g
-00055780: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
-00055790: 7228 292e 636c 6963 6b5f 706f 7320 3d20  r().click_pos = 
-000557a0: 5150 6f69 6e74 2834 3530 2c20 3530 3029  QPoint(450, 500)
-000557b0: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
-000557c0: 655f 6564 6974 6f72 5f74 6162 732e 6765  e_editor_tabs.ge
-000557d0: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
-000557e0: 2829 2e61 6464 5f6e 616d 6564 5f70 726f  ().add_named_pro
-000557f0: 6365 7373 280a 2020 2020 2020 2020 2020  cess(.          
-00055800: 2020 7072 6f63 6573 735f 636c 6173 730a    process_class.
-00055810: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00055820: 2020 7069 7065 6c69 6e65 203d 2070 6970    pipeline = pip
-00055830: 656c 696e 655f 6564 6974 6f72 5f74 6162  eline_editor_tab
-00055840: 732e 6765 745f 6375 7272 656e 745f 7069  s.get_current_pi
-00055850: 7065 6c69 6e65 2829 0a0a 2020 2020 2020  peline()..      
-00055860: 2020 2320 4578 706f 7274 7320 7468 6520    # Exports the 
-00055870: 6d61 6e64 6174 6f72 7920 696e 7075 7420  mandatory input 
-00055880: 616e 6420 6f75 7470 7574 2070 6c75 6773  and output plugs
-00055890: 2066 6f72 2022 7265 6e61 6d65 5f31 220a   for "rename_1".
-000558a0: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
-000558b0: 5f65 6469 746f 725f 7461 6273 2e67 6574  _editor_tabs.get
-000558c0: 5f63 7572 7265 6e74 5f65 6469 746f 7228  _current_editor(
-000558d0: 292e 6375 7272 656e 745f 6e6f 6465 5f6e  ).current_node_n
-000558e0: 616d 6520 3d20 280a 2020 2020 2020 2020  ame = (.        
-000558f0: 2020 2020 2272 656e 616d 655f 3122 0a20      "rename_1". 
-00055900: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00055910: 2028 0a20 2020 2020 2020 2020 2020 2070   (.            p
-00055920: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
-00055930: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
-00055940: 6564 6974 6f72 0a20 2020 2020 2020 2029  editor.        )
-00055950: 2829 2e65 7870 6f72 745f 756e 636f 6e6e  ().export_unconn
-00055960: 6563 7465 645f 6d61 6e64 6174 6f72 795f  ected_mandatory_
-00055970: 696e 7075 7473 2829 0a20 2020 2020 2020  inputs().       
-00055980: 2028 0a20 2020 2020 2020 2020 2020 2070   (.            p
-00055990: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
-000559a0: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
-000559b0: 6564 6974 6f72 0a20 2020 2020 2020 2029  editor.        )
-000559c0: 2829 2e65 7870 6f72 745f 616c 6c5f 756e  ().export_all_un
-000559d0: 636f 6e6e 6563 7465 645f 6f75 7470 7574  connected_output
-000559e0: 7328 290a 0a20 2020 2020 2020 206f 6c64  s()..        old
-000559f0: 5f73 6361 6e5f 6e61 6d65 203d 2044 4f43  _scan_name = DOC
-00055a00: 554d 454e 545f 312e 7370 6c69 7428 222f  UMENT_1.split("/
-00055a10: 2229 5b2d 315d 0a20 2020 2020 2020 206e  ")[-1].        n
-00055a20: 6577 5f73 6361 6e5f 6e61 6d65 203d 2022  ew_scan_name = "
-00055a30: 6e65 775f 6e61 6d65 2e6e 6969 220a 0a20  new_name.nii".. 
-00055a40: 2020 2020 2020 2023 2053 6574 7320 7468         # Sets th
-00055a50: 6520 6d61 6e64 6174 6f72 7920 706c 7567  e mandatory plug
-00055a60: 2076 616c 7565 7320 696e 2074 6865 2022   values in the "
-00055a70: 696e 7075 7473 2220 6e6f 6465 0a20 2020  inputs" node.   
-00055a80: 2020 2020 2070 6970 656c 696e 652e 6e6f       pipeline.no
-00055a90: 6465 735b 2222 5d2e 7365 745f 706c 7567  des[""].set_plug
-00055aa0: 5f76 616c 7565 2822 696e 5f66 696c 6522  _value("in_file"
-00055ab0: 2c20 444f 4355 4d45 4e54 5f31 290a 2020  , DOCUMENT_1).  
-00055ac0: 2020 2020 2020 7069 7065 6c69 6e65 2e6e        pipeline.n
-00055ad0: 6f64 6573 5b22 225d 2e73 6574 5f70 6c75  odes[""].set_plu
-00055ae0: 675f 7661 6c75 6528 2266 6f72 6d61 745f  g_value("format_
-00055af0: 7374 7269 6e67 222c 206e 6577 5f73 6361  string", new_sca
-00055b00: 6e5f 6e61 6d65 290a 0a20 2020 2020 2020  n_name)..       
-00055b10: 2023 2043 6861 6e67 6573 2074 6865 2022   # Changes the "
-00055b20: 5f6f 7574 5f66 696c 6522 2069 6e20 7468  _out_file" in th
-00055b30: 6520 226f 7574 7075 7473 2220 6e6f 6465  e "outputs" node
-00055b40: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
-00055b50: 652e 6e6f 6465 735b 2222 5d2e 7365 745f  e.nodes[""].set_
-00055b60: 706c 7567 5f76 616c 7565 280a 2020 2020  plug_value(.    
-00055b70: 2020 2020 2020 2020 225f 6f75 745f 6669          "_out_fi
-00055b80: 6c65 222c 2044 4f43 554d 454e 545f 312e  le", DOCUMENT_1.
-00055b90: 7265 706c 6163 6528 6f6c 645f 7363 616e  replace(old_scan
-00055ba0: 5f6e 616d 652c 206e 6577 5f73 6361 6e5f  _name, new_scan_
-00055bb0: 6e61 6d65 290a 2020 2020 2020 2020 290a  name).        ).
-00055bc0: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
-00055bd0: 655f 6d61 6e61 6765 7220 3d20 7365 6c66  e_manager = self
-00055be0: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 6970  .main_window.pip
-00055bf0: 656c 696e 655f 6d61 6e61 6765 720a 2020  eline_manager.  
-00055c00: 2020 2020 2020 7069 7065 6c69 6e65 5f6d        pipeline_m
-00055c10: 616e 6167 6572 2e77 6f72 6b66 6c6f 7720  anager.workflow 
-00055c20: 3d20 776f 726b 666c 6f77 5f66 726f 6d5f  = workflow_from_
-00055c30: 7069 7065 6c69 6e65 280a 2020 2020 2020  pipeline(.      
-00055c40: 2020 2020 2020 7069 7065 6c69 6e65 2c20        pipeline, 
-00055c50: 636f 6d70 6c65 7465 5f70 6172 616d 6574  complete_paramet
-00055c60: 6572 733d 5472 7565 0a20 2020 2020 2020  ers=True.       
-00055c70: 2029 0a0a 2020 2020 2020 2020 6a6f 6220   )..        job 
-00055c80: 3d20 7069 7065 6c69 6e65 5f6d 616e 6167  = pipeline_manag
-00055c90: 6572 2e77 6f72 6b66 6c6f 772e 6a6f 6273  er.workflow.jobs
-00055ca0: 5b30 5d0a 0a20 2020 2020 2020 2062 7269  [0]..        bri
-00055cb0: 636b 5f69 6420 3d20 7374 7228 7575 6964  ck_id = str(uuid
-00055cc0: 2e75 7569 6434 2829 290a 2020 2020 2020  .uuid4()).      
-00055cd0: 2020 6a6f 622e 7575 6964 203d 2062 7269    job.uuid = bri
-00055ce0: 636b 5f69 640a 2020 2020 2020 2020 7069  ck_id.        pi
-00055cf0: 7065 6c69 6e65 5f6d 616e 6167 6572 2e62  peline_manager.b
-00055d00: 7269 636b 5f6c 6973 742e 6170 7065 6e64  rick_list.append
-00055d10: 2862 7269 636b 5f69 6429 0a0a 2020 2020  (brick_id)..    
-00055d20: 2020 2020 7069 7065 6c69 6e65 5f6d 616e      pipeline_man
-00055d30: 6167 6572 2e70 726f 6a65 6374 2e73 6573  ager.project.ses
-00055d40: 7369 6f6e 2e61 6464 5f64 6f63 756d 656e  sion.add_documen
-00055d50: 7428 0a20 2020 2020 2020 2020 2020 2043  t(.            C
-00055d60: 4f4c 4c45 4354 494f 4e5f 4252 4943 4b2c  OLLECTION_BRICK,
-00055d70: 2062 7269 636b 5f69 640a 2020 2020 2020   brick_id.      
-00055d80: 2020 290a 0a20 2020 2020 2020 2070 6970    )..        pip
-00055d90: 656c 696e 655f 6d61 6e61 6765 722e 5f72  eline_manager._r
-00055da0: 6567 6973 7465 725f 6e6f 6465 5f69 6f5f  egister_node_io_
-00055db0: 696e 5f64 6174 6162 6173 6528 6a6f 622c  in_database(job,
-00055dc0: 206a 6f62 2e70 726f 6365 7373 2829 290a   job.process()).
-00055dd0: 0a20 2020 2020 2020 2023 2053 696d 756c  .        # Simul
-00055de0: 6174 6573 2061 2027 5072 6f63 6573 734e  ates a 'ProcessN
-00055df0: 6f64 6528 2927 2061 7320 2770 726f 6365  ode()' as 'proce
-00055e00: 7373 270a 2020 2020 2020 2020 7072 6f63  ss'.        proc
-00055e10: 6573 735f 6e6f 6465 203d 2050 726f 6365  ess_node = Proce
-00055e20: 7373 4e6f 6465 2870 6970 656c 696e 652c  ssNode(pipeline,
-00055e30: 2022 222c 206a 6f62 2e70 726f 6365 7373   "", job.process
-00055e40: 2829 290a 2020 2020 2020 2020 7069 7065  ()).        pipe
-00055e50: 6c69 6e65 5f6d 616e 6167 6572 2e5f 7265  line_manager._re
-00055e60: 6769 7374 6572 5f6e 6f64 655f 696f 5f69  gister_node_io_i
-00055e70: 6e5f 6461 7461 6261 7365 286a 6f62 2c20  n_database(job, 
-00055e80: 7072 6f63 6573 735f 6e6f 6465 290a 0a20  process_node).. 
-00055e90: 2020 2020 2020 2023 2053 696d 756c 6174         # Simulat
-00055ea0: 6573 2061 2027 5069 7065 6c69 6e65 4e6f  es a 'PipelineNo
-00055eb0: 6465 2829 2720 6173 2027 7072 6f63 6573  de()' as 'proces
-00055ec0: 7327 0a20 2020 2020 2020 2070 6970 656c  s'.        pipel
-00055ed0: 696e 655f 6e6f 6465 203d 2050 6970 656c  ine_node = Pipel
-00055ee0: 696e 654e 6f64 6528 7069 7065 6c69 6e65  ineNode(pipeline
-00055ef0: 2c20 2222 2c20 6a6f 622e 7072 6f63 6573  , "", job.proces
-00055f00: 7328 2929 0a20 2020 2020 2020 2070 6970  s()).        pip
-00055f10: 656c 696e 655f 6d61 6e61 6765 722e 5f72  eline_manager._r
-00055f20: 6567 6973 7465 725f 6e6f 6465 5f69 6f5f  egister_node_io_
-00055f30: 696e 5f64 6174 6162 6173 6528 6a6f 622c  in_database(job,
-00055f40: 2070 6970 656c 696e 655f 6e6f 6465 290a   pipeline_node).
-00055f50: 0a20 2020 2020 2020 2023 2053 696d 756c  .        # Simul
-00055f60: 6174 6573 2061 2027 5377 6974 6368 2829  ates a 'Switch()
-00055f70: 2720 6173 2027 7072 6f63 6573 7327 0a20  ' as 'process'. 
-00055f80: 2020 2020 2020 2073 7769 7463 6820 3d20         switch = 
-00055f90: 5377 6974 6368 2870 6970 656c 696e 652c  Switch(pipeline,
-00055fa0: 2022 222c 205b 2222 5d2c 205b 2222 5d29   "", [""], [""])
-00055fb0: 0a20 2020 2020 2020 2073 7769 7463 682e  .        switch.
-00055fc0: 636f 6d70 6c65 7469 6f6e 5f65 6e67 696e  completion_engin
-00055fd0: 6520 3d20 4e6f 6e65 0a20 2020 2020 2020  e = None.       
-00055fe0: 2070 6970 656c 696e 655f 6d61 6e61 6765   pipeline_manage
-00055ff0: 722e 5f72 6567 6973 7465 725f 6e6f 6465  r._register_node
-00056000: 5f69 6f5f 696e 5f64 6174 6162 6173 6528  _io_in_database(
-00056010: 6a6f 622c 2073 7769 7463 6829 0a0a 2020  job, switch)..  
-00056020: 2020 2020 2020 2320 5369 6d75 6c61 7465        # Simulate
-00056030: 7320 6120 6c69 7374 206f 6620 6f75 7470  s a list of outp
-00056040: 7574 7320 696e 2027 7072 6f63 6573 7327  uts in 'process'
-00056050: 0a20 2020 2020 2020 206a 6f62 2e70 726f  .        job.pro
-00056060: 6365 7373 2829 2e6c 6973 745f 6f75 7470  cess().list_outp
-00056070: 7574 7320 3d20 5b5d 0a20 2020 2020 2020  uts = [].       
-00056080: 206a 6f62 2e70 726f 6365 7373 2829 2e6f   job.process().o
-00056090: 7574 7075 7473 203d 205b 5d0a 2020 2020  utputs = [].    
-000560a0: 2020 2020 7069 7065 6c69 6e65 5f6d 616e      pipeline_man
-000560b0: 6167 6572 2e5f 7265 6769 7374 6572 5f6e  ager._register_n
-000560c0: 6f64 655f 696f 5f69 6e5f 6461 7461 6261  ode_io_in_databa
-000560d0: 7365 286a 6f62 2c20 6a6f 622e 7072 6f63  se(job, job.proc
-000560e0: 6573 7328 2929 0a0a 2020 2020 6465 6620  ess())..    def 
-000560f0: 7465 7374 5f72 656d 6f76 655f 7072 6f67  test_remove_prog
-00056100: 7265 7373 2873 656c 6629 3a0a 2020 2020  ress(self):.    
-00056110: 2020 2020 2222 224d 6f63 6b73 2061 6e20      """Mocks an 
-00056120: 6f62 6a65 6374 206f 6620 7468 6520 7069  object of the pi
-00056130: 7065 6c69 6e65 206d 616e 6167 6572 2061  peline manager a
-00056140: 6e64 2072 656d 6f76 6573 2069 7473 2070  nd removes its p
-00056150: 726f 6772 6573 732e 0a0a 2020 2020 2020  rogress...      
-00056160: 2020 2d20 5465 7374 733a 2050 6970 656c    - Tests: Pipel
-00056170: 696e 654d 616e 6167 6572 5461 622e 7265  ineManagerTab.re
-00056180: 6d6f 7665 5f70 726f 6772 6573 730a 2020  move_progress.  
-00056190: 2020 2020 2020 2222 220a 0a20 2020 2020        """..     
-000561a0: 2020 2070 706c 5f6d 616e 6167 6572 203d     ppl_manager =
-000561b0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-000561c0: 772e 7069 7065 6c69 6e65 5f6d 616e 6167  w.pipeline_manag
-000561d0: 6572 0a0a 2020 2020 2020 2020 2320 4d6f  er..        # Mo
-000561e0: 636b 7320 7468 6520 2770 726f 6772 6573  cks the 'progres
-000561f0: 7327 206f 626a 6563 740a 2020 2020 2020  s' object.      
-00056200: 2020 7070 6c5f 6d61 6e61 6765 722e 7072    ppl_manager.pr
-00056210: 6f67 7265 7373 203d 2052 756e 5072 6f67  ogress = RunProg
-00056220: 7265 7373 2870 706c 5f6d 616e 6167 6572  ress(ppl_manager
-00056230: 290a 0a20 2020 2020 2020 2023 2052 656d  )..        # Rem
-00056240: 6f76 6573 2070 726f 6772 6573 730a 2020  oves progress.  
-00056250: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
-00056260: 722e 7265 6d6f 7665 5f70 726f 6772 6573  r.remove_progres
-00056270: 7328 290a 0a20 2020 2020 2020 2023 2041  s()..        # A
-00056280: 7373 6572 7473 2074 6861 7420 7468 6520  sserts that the 
-00056290: 6f62 6a65 6374 2027 7072 6f67 7265 7373  object 'progress
-000562a0: 2720 7761 7320 6465 6c65 7465 640a 2020  ' was deleted.  
-000562b0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-000562c0: 7446 616c 7365 2868 6173 6174 7472 2870  tFalse(hasattr(p
-000562d0: 706c 5f6d 616e 6167 6572 2c20 2270 726f  pl_manager, "pro
-000562e0: 6772 6573 7322 2929 0a0a 2020 2020 6465  gress"))..    de
-000562f0: 6620 7465 7374 5f72 756e 2873 656c 6629  f test_run(self)
-00056300: 3a0a 2020 2020 2020 2020 2222 2241 6464  :.        """Add
-00056310: 7320 6120 7072 6f63 6573 732c 2063 7265  s a process, cre
-00056320: 6174 6573 2061 2070 6970 656c 696e 6520  ates a pipeline 
-00056330: 6d61 6e61 6765 7220 7072 6f67 7265 7373  manager progress
-00056340: 206f 626a 6563 7420 616e 640a 2020 2020   object and.    
-00056350: 2020 2020 7472 6965 7320 746f 2072 756e      tries to run
-00056360: 2069 7420 7768 696c 6520 6d6f 636b 696e   it while mockin
-00056370: 6720 6d65 7468 6f64 7320 6f66 2074 6865  g methods of the
-00056380: 2070 6970 656c 696e 6520 6d61 6e61 6765   pipeline manage
-00056390: 722e 0a0a 2020 2020 2020 2020 2d20 5465  r...        - Te
-000563a0: 7374 733a 2052 756e 576f 726b 6572 2e72  sts: RunWorker.r
-000563b0: 756e 0a20 2020 2020 2020 2022 2222 0a0a  un.        """..
-000563c0: 2020 2020 2020 2020 2320 5365 7473 2073          # Sets s
-000563d0: 686f 7274 6375 7473 2066 6f72 206f 626a  hortcuts for obj
-000563e0: 6563 7473 2074 6861 7420 6172 6520 6f66  ects that are of
-000563f0: 7465 6e20 7573 6564 0a20 2020 2020 2020  ten used.       
-00056400: 2070 706c 5f6d 616e 6167 6572 203d 2073   ppl_manager = s
-00056410: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00056420: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
-00056430: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
-00056440: 5f74 6162 7320 3d20 7070 6c5f 6d61 6e61  _tabs = ppl_mana
-00056450: 6765 722e 7069 7065 6c69 6e65 4564 6974  ger.pipelineEdit
-00056460: 6f72 5461 6273 0a20 2020 2020 2020 2070  orTabs.        p
-00056470: 706c 203d 2070 706c 5f65 6474 5f74 6162  pl = ppl_edt_tab
-00056480: 732e 6765 745f 6375 7272 656e 745f 7069  s.get_current_pi
-00056490: 7065 6c69 6e65 2829 0a0a 2020 2020 2020  peline()..      
-000564a0: 2020 636f 6e66 6967 203d 2043 6f6e 6669    config = Confi
-000564b0: 6728 636f 6e66 6967 5f70 6174 683d 7365  g(config_path=se
-000564c0: 6c66 2e63 6f6e 6669 675f 7061 7468 290a  lf.config_path).
-000564d0: 2020 2020 2020 2020 666f 6c64 6572 203d          folder =
-000564e0: 206f 732e 7061 7468 2e61 6273 7061 7468   os.path.abspath
-000564f0: 280a 2020 2020 2020 2020 2020 2020 6f73  (.            os
-00056500: 2e70 6174 682e 6a6f 696e 280a 2020 2020  .path.join(.    
-00056510: 2020 2020 2020 2020 2020 2020 636f 6e66              conf
-00056520: 6967 2e67 6574 5f6d 6961 5f70 6174 6828  ig.get_mia_path(
-00056530: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
-00056540: 2020 2022 6d69 6175 7464 6174 6122 2c0a     "miautdata",.
-00056550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00056560: 2272 6573 6f75 7263 6573 222c 0a20 2020  "resources",.   
-00056570: 2020 2020 2020 2020 2020 2020 2022 6d69               "mi
-00056580: 6122 2c0a 2020 2020 2020 2020 2020 2020  a",.            
-00056590: 2020 2020 2270 726f 6a65 6374 5f38 222c      "project_8",
-000565a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000565b0: 2022 6461 7461 222c 0a20 2020 2020 2020   "data",.       
-000565c0: 2020 2020 2020 2020 2022 7261 775f 6461           "raw_da
-000565d0: 7461 222c 0a20 2020 2020 2020 2020 2020  ta",.           
-000565e0: 2029 0a20 2020 2020 2020 2029 0a0a 2020   ).        )..  
-000565f0: 2020 2020 2020 4e49 495f 4649 4c45 5f31        NII_FILE_1
-00056600: 203d 2028 0a20 2020 2020 2020 2020 2020   = (.           
-00056610: 2022 4775 6572 6265 742d 4336 2d32 3031   "Guerbet-C6-201
-00056620: 342d 5261 742d 4b35 322d 5475 6265 3237  4-Rat-K52-Tube27
-00056630: 2d32 3031 342d 3032 2d31 3431 3032 3331  -2014-02-1410231
-00056640: 372d 3031 2d47 315f 220a 2020 2020 2020  7-01-G1_".      
-00056650: 2020 2020 2020 2247 7565 7262 6574 5f41        "Guerbet_A
-00056660: 6e61 742d 5241 5245 7076 6d2d 3030 3032  nat-RAREpvm-0002
-00056670: 3230 5f30 3030 2e6e 6969 220a 2020 2020  20_000.nii".    
-00056680: 2020 2020 290a 0a20 2020 2020 2020 2044      )..        D
-00056690: 4f43 554d 454e 545f 3120 3d20 6f73 2e70  OCUMENT_1 = os.p
-000566a0: 6174 682e 6162 7370 6174 6828 6f73 2e70  ath.abspath(os.p
-000566b0: 6174 682e 6a6f 696e 2866 6f6c 6465 722c  ath.join(folder,
-000566c0: 204e 4949 5f46 494c 455f 3129 290a 0a20   NII_FILE_1)).. 
-000566d0: 2020 2020 2020 2023 2041 6464 7320 6120         # Adds a 
-000566e0: 5265 6e61 6d65 2070 726f 6365 7373 6573  Rename processes
-000566f0: 2c20 6372 6561 7465 7320 7468 6520 2772  , creates the 'r
-00056700: 656e 616d 655f 3127 206e 6f64 650a 2020  ename_1' node.  
-00056710: 2020 2020 2020 7070 6c5f 6564 745f 7461        ppl_edt_ta
-00056720: 6273 2e67 6574 5f63 7572 7265 6e74 5f65  bs.get_current_e
-00056730: 6469 746f 7228 292e 636c 6963 6b5f 706f  ditor().click_po
-00056740: 7320 3d20 5150 6f69 6e74 2834 3530 2c20  s = QPoint(450, 
-00056750: 3530 3029 0a20 2020 2020 2020 2070 706c  500).        ppl
-00056760: 5f65 6474 5f74 6162 732e 6765 745f 6375  _edt_tabs.get_cu
-00056770: 7272 656e 745f 6564 6974 6f72 2829 2e61  rrent_editor().a
-00056780: 6464 5f6e 616d 6564 5f70 726f 6365 7373  dd_named_process
-00056790: 2852 656e 616d 6529 0a0a 2020 2020 2020  (Rename)..      
-000567a0: 2020 7070 6c5f 6564 745f 7461 6273 2e67    ppl_edt_tabs.g
-000567b0: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
-000567c0: 7228 292e 6578 706f 7274 5f75 6e63 6f6e  r().export_uncon
-000567d0: 6e65 6374 6564 5f6d 616e 6461 746f 7279  nected_mandatory
-000567e0: 5f69 6e70 7574 7328 290a 2020 2020 2020  _inputs().      
-000567f0: 2020 7070 6c5f 6564 745f 7461 6273 2e67    ppl_edt_tabs.g
-00056800: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
-00056810: 7228 292e 6578 706f 7274 5f61 6c6c 5f75  r().export_all_u
-00056820: 6e63 6f6e 6e65 6374 6564 5f6f 7574 7075  nconnected_outpu
-00056830: 7473 2829 0a0a 2020 2020 2020 2020 2320  ts()..        # 
-00056840: 5365 7473 2074 6865 206d 616e 6461 746f  Sets the mandato
-00056850: 7279 2070 6172 616d 6574 6572 730a 2020  ry parameters.  
-00056860: 2020 2020 2020 7070 6c2e 6e6f 6465 735b        ppl.nodes[
-00056870: 2222 5d2e 7365 745f 706c 7567 5f76 616c  ""].set_plug_val
-00056880: 7565 2822 696e 5f66 696c 6522 2c20 444f  ue("in_file", DO
-00056890: 4355 4d45 4e54 5f31 290a 2020 2020 2020  CUMENT_1).      
-000568a0: 2020 7070 6c2e 6e6f 6465 735b 2222 5d2e    ppl.nodes[""].
-000568b0: 7365 745f 706c 7567 5f76 616c 7565 2822  set_plug_value("
-000568c0: 666f 726d 6174 5f73 7472 696e 6722 2c20  format_string", 
-000568d0: 226e 6577 5f6e 616d 652e 6e69 6922 290a  "new_name.nii").
-000568e0: 0a20 2020 2020 2020 2023 2043 7265 6174  .        # Creat
-000568f0: 6573 2061 2027 5275 6e50 726f 6772 6573  es a 'RunProgres
-00056900: 7327 206f 626a 6563 740a 2020 2020 2020  s' object.      
-00056910: 2020 7070 6c5f 6d61 6e61 6765 722e 7072    ppl_manager.pr
-00056920: 6f67 7265 7373 203d 2052 756e 5072 6f67  ogress = RunProg
-00056930: 7265 7373 2870 706c 5f6d 616e 6167 6572  ress(ppl_manager
-00056940: 290a 0a20 2020 2020 2020 2023 204d 6f63  )..        # Moc
-00056950: 6b73 2061 206e 6f64 6520 7468 6174 2064  ks a node that d
-00056960: 6f65 7320 6e6f 7420 6861 7665 2061 2070  oes not have a p
-00056970: 726f 6365 7373 2061 6e64 2061 206e 6f64  rocess and a nod
-00056980: 6520 7468 6174 2068 6173 0a20 2020 2020  e that has.     
-00056990: 2020 2023 2061 2070 6970 656c 696e 6520     # a pipeline 
-000569a0: 6173 2061 2070 726f 6365 7373 0a20 2020  as a process.   
-000569b0: 2020 2020 2070 706c 2e6e 6f64 6573 5b22       ppl.nodes["
-000569c0: 7377 6974 6368 225d 203d 2053 7769 7463  switch"] = Switc
-000569d0: 6828 7070 6c2c 2022 222c 205b 2222 5d2c  h(ppl, "", [""],
-000569e0: 205b 2222 5d29 0a20 2020 2020 2020 2070   [""]).        p
-000569f0: 706c 2e6e 6f64 6573 5b22 7069 7065 6c69  pl.nodes["pipeli
-00056a00: 6e65 225d 203d 2050 726f 6365 7373 4e6f  ne"] = ProcessNo
-00056a10: 6465 2870 706c 2c20 2270 6970 656c 696e  de(ppl, "pipelin
-00056a20: 6522 2c20 5069 7065 6c69 6e65 2829 290a  e", Pipeline()).
-00056a30: 0a20 2020 2020 2020 2070 706c 5f6d 616e  .        ppl_man
-00056a40: 6167 6572 2e70 726f 6772 6573 732e 776f  ager.progress.wo
-00056a50: 726b 6572 2e72 756e 2829 0a0a 2020 2020  rker.run()..    
-00056a60: 2020 2020 2320 4d6f 636b 7320 2767 6574      # Mocks 'get
-00056a70: 5f70 6970 656c 696e 655f 6f72 5f70 726f  _pipeline_or_pro
-00056a80: 6365 7373 2720 746f 2072 6574 7572 6e20  cess' to return 
-00056a90: 6120 274e 6970 7970 6550 726f 6365 7373  a 'NipypeProcess
-00056aa0: 2720 696e 7374 6561 640a 2020 2020 2020  ' instead.      
-00056ab0: 2020 2320 6f66 2061 2027 5069 7065 6c69    # of a 'Pipeli
-00056ac0: 6e65 2720 616e 6420 2770 6f73 7470 726f  ne' and 'postpro
-00056ad0: 6365 7373 5f70 6970 656c 696e 655f 6578  cess_pipeline_ex
-00056ae0: 6563 7574 696f 6e27 2074 6f20 7468 726f  ecution' to thro
-00056af0: 7720 616e 0a20 2020 2020 2020 2023 2065  w an.        # e
-00056b00: 7863 6570 7469 6f6e 0a20 2020 2020 2020  xception.       
-00056b10: 2070 706c 5f6d 616e 6167 6572 2e70 726f   ppl_manager.pro
-00056b20: 6772 6573 7320 3d20 5275 6e50 726f 6772  gress = RunProgr
-00056b30: 6573 7328 7070 6c5f 6d61 6e61 6765 7229  ess(ppl_manager)
-00056b40: 0a20 2020 2020 2020 2028 0a20 2020 2020  .        (.     
-00056b50: 2020 2020 2020 2070 706c 5f6d 616e 6167         ppl_manag
-00056b60: 6572 2e70 726f 6772 6573 732e 776f 726b  er.progress.work
-00056b70: 6572 2e70 6970 656c 696e 655f 6d61 6e61  er.pipeline_mana
-00056b80: 6765 722e 6765 745f 7069 7065 6c69 6e65  ger.get_pipeline
-00056b90: 5f6f 725f 7072 6f63 6573 730a 2020 2020  _or_process.    
-00056ba0: 2020 2020 2920 3d20 4d6f 636b 2872 6574      ) = Mock(ret
-00056bb0: 7572 6e5f 7661 6c75 653d 7070 6c2e 6e6f  urn_value=ppl.no
-00056bc0: 6465 735b 2272 656e 616d 655f 3122 5d2e  des["rename_1"].
-00056bd0: 7072 6f63 6573 7329 0a20 2020 2020 2020  process).       
-00056be0: 2028 0a20 2020 2020 2020 2020 2020 2070   (.            p
-00056bf0: 706c 5f6d 616e 6167 6572 2e70 726f 6772  pl_manager.progr
-00056c00: 6573 732e 776f 726b 6572 2e70 6970 656c  ess.worker.pipel
-00056c10: 696e 655f 6d61 6e61 6765 722e 706f 7374  ine_manager.post
-00056c20: 7072 6f63 6573 735f 7069 7065 6c69 6e65  process_pipeline
-00056c30: 5f65 7865 6375 7469 6f6e 0a20 2020 2020  _execution.     
-00056c40: 2020 2029 203d 204d 6f63 6b28 7369 6465     ) = Mock(side
-00056c50: 5f65 6666 6563 743d 5661 6c75 6545 7272  _effect=ValueErr
-00056c60: 6f72 2829 290a 0a20 2020 2020 2020 2070  or())..        p
-00056c70: 7269 6e74 2822 5c6e 5c6e 2a2a 2061 6e20  rint("\n\n** an 
-00056c80: 6578 6365 7074 696f 6e20 6d65 7373 6167  exception messag
-00056c90: 6520 6973 2065 7870 6563 7465 6420 6265  e is expected be
-00056ca0: 6c6f 775c 6e22 290a 2020 2020 2020 2020  low\n").        
-00056cb0: 7070 6c5f 6d61 6e61 6765 722e 7072 6f67  ppl_manager.prog
-00056cc0: 7265 7373 2e77 6f72 6b65 722e 7275 6e28  ress.worker.run(
-00056cd0: 290a 0a20 2020 2020 2020 2023 204d 6f63  )..        # Moc
-00056ce0: 6b73 2061 6e20 696e 7465 7272 7570 7469  ks an interrupti
-00056cf0: 6f6e 2072 6571 7565 7374 0a20 2020 2020  on request.     
-00056d00: 2020 2070 706c 5f6d 616e 6167 6572 2e70     ppl_manager.p
-00056d10: 726f 6772 6573 732e 776f 726b 6572 2e69  rogress.worker.i
-00056d20: 6e74 6572 7275 7074 5f72 6571 7565 7374  nterrupt_request
-00056d30: 203d 2054 7275 650a 0a20 2020 2020 2020   = True..       
-00056d40: 2070 706c 5f6d 616e 6167 6572 2e70 726f   ppl_manager.pro
-00056d50: 6772 6573 732e 776f 726b 6572 2e72 756e  gress.worker.run
-00056d60: 2829 0a0a 2020 2020 6465 6620 7465 7374  ()..    def test
-00056d70: 5f73 6176 6550 6970 656c 696e 6528 7365  _savePipeline(se
-00056d80: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
-00056d90: 4d6f 636b 7320 6d65 7468 6f64 7320 6f66  Mocks methods of
-00056da0: 2074 6865 2070 6970 656c 696e 6520 6d61   the pipeline ma
-00056db0: 6e61 6765 7220 616e 6420 7472 6965 7320  nager and tries 
-00056dc0: 746f 2073 6176 6520 7468 6520 7069 7065  to save the pipe
-00056dd0: 6c69 6e65 0a20 2020 2020 2020 206f 7665  line.        ove
-00056de0: 7220 7365 7665 7261 6c20 636f 6e64 6974  r several condit
-00056df0: 696f 6e73 2e0a 0a20 2020 2020 2020 202d  ions...        -
-00056e00: 5465 7374 733a 2050 6970 656c 696e 654d  Tests: PipelineM
-00056e10: 616e 6167 6572 5461 622e 7361 7665 5069  anagerTab.savePi
-00056e20: 7065 6c69 6e65 0a20 2020 2020 2020 2022  peline.        "
-00056e30: 2222 0a0a 2020 2020 2020 2020 6465 6620  ""..        def 
-00056e40: 636c 6963 6b5f 7965 7328 7365 6c66 5f29  click_yes(self_)
-00056e50: 3a0a 2020 2020 2020 2020 2020 2020 636c  :.            cl
-00056e60: 6f73 655f 6275 7474 6f6e 203d 2073 656c  ose_button = sel
-00056e70: 665f 2e62 7574 746f 6e28 514d 6573 7361  f_.button(QMessa
-00056e80: 6765 426f 782e 5965 7329 0a20 2020 2020  geBox.Yes).     
-00056e90: 2020 2020 2020 2051 5465 7374 2e6d 6f75         QTest.mou
-00056ea0: 7365 436c 6963 6b28 636c 6f73 655f 6275  seClick(close_bu
-00056eb0: 7474 6f6e 2c20 5174 2e4c 6566 7442 7574  tton, Qt.LeftBut
-00056ec0: 746f 6e29 0a0a 2020 2020 2020 2020 2320  ton)..        # 
-00056ed0: 5365 7420 7368 6f72 7463 7574 7320 666f  Set shortcuts fo
-00056ee0: 7220 6f62 6a65 6374 7320 7468 6174 2061  r objects that a
-00056ef0: 7265 206f 6674 656e 2075 7365 640a 2020  re often used.  
-00056f00: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
-00056f10: 7220 3d20 7365 6c66 2e6d 6169 6e5f 7769  r = self.main_wi
-00056f20: 6e64 6f77 2e70 6970 656c 696e 655f 6d61  ndow.pipeline_ma
-00056f30: 6e61 6765 720a 2020 2020 2020 2020 7070  nager.        pp
-00056f40: 6c5f 6564 745f 7461 6273 203d 2070 706c  l_edt_tabs = ppl
-00056f50: 5f6d 616e 6167 6572 2e70 6970 656c 696e  _manager.pipelin
-00056f60: 6545 6469 746f 7254 6162 730a 0a20 2020  eEditorTabs..   
-00056f70: 2020 2020 2063 6f6e 6669 6720 3d20 436f       config = Co
-00056f80: 6e66 6967 2863 6f6e 6669 675f 7061 7468  nfig(config_path
-00056f90: 3d73 656c 662e 636f 6e66 6967 5f70 6174  =self.config_pat
-00056fa0: 6829 0a20 2020 2020 2020 2070 706c 5f70  h).        ppl_p
-00056fb0: 6174 6820 3d20 6f73 2e70 6174 682e 6a6f  ath = os.path.jo
-00056fc0: 696e 280a 2020 2020 2020 2020 2020 2020  in(.            
-00056fd0: 636f 6e66 6967 2e67 6574 5f6d 6961 5f70  config.get_mia_p
-00056fe0: 6174 6828 292c 0a20 2020 2020 2020 2020  ath(),.         
-00056ff0: 2020 2022 7072 6f63 6573 7365 7322 2c0a     "processes",.
-00057000: 2020 2020 2020 2020 2020 2020 2255 7365              "Use
-00057010: 725f 7072 6f63 6573 7365 7322 2c0a 2020  r_processes",.  
-00057020: 2020 2020 2020 2020 2020 2274 6573 745f            "test_
-00057030: 7069 7065 6c69 6e65 5f31 2e70 7922 2c0a  pipeline_1.py",.
-00057040: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-00057050: 2020 2070 706c 5f65 6474 5f74 6162 732e     ppl_edt_tabs.
-00057060: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
-00057070: 6f72 2829 2e5f 7069 7065 6c69 6e65 5f66  or()._pipeline_f
-00057080: 696c 656e 616d 6520 3d20 7070 6c5f 7061  ilename = ppl_pa
-00057090: 7468 0a0a 2020 2020 2020 2020 2320 5361  th..        # Sa
-000570a0: 7665 2070 6970 656c 696e 6520 6173 2077  ve pipeline as w
-000570b0: 6974 6820 656d 7074 7920 6669 6c65 6e61  ith empty filena
-000570c0: 6d65 2c20 756e 6368 6563 6b65 640a 2020  me, unchecked.  
-000570d0: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
-000570e0: 722e 7361 7665 5069 7065 6c69 6e65 2875  r.savePipeline(u
-000570f0: 6e63 6865 636b 3d54 7275 6529 0a0a 2020  ncheck=True)..  
-00057100: 2020 2020 2020 2320 4d6f 636b 7320 2773        # Mocks 's
-00057110: 6176 6550 6970 656c 696e 6527 2066 726f  avePipeline' fro
-00057120: 6d20 2770 706c 5f65 6474 5f74 6162 7327  m 'ppl_edt_tabs'
-00057130: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
-00057140: 5f74 6162 732e 7361 7665 5f70 6970 656c  _tabs.save_pipel
-00057150: 696e 6520 3d20 4d6f 636b 2872 6574 7572  ine = Mock(retur
-00057160: 6e5f 7661 6c75 653d 226e 6f74 5f65 6d70  n_value="not_emp
-00057170: 7479 2229 0a0a 2020 2020 2020 2020 2320  ty")..        # 
-00057180: 5361 7665 7320 7069 7065 6c69 6e65 2061  Saves pipeline a
-00057190: 7320 7769 7468 2065 6d70 7479 2066 696c  s with empty fil
-000571a0: 656e 616d 652c 2063 6865 636b 6564 0a20  ename, checked. 
-000571b0: 2020 2020 2020 2070 706c 5f6d 616e 6167         ppl_manag
-000571c0: 6572 2e73 6176 6550 6970 656c 696e 6528  er.savePipeline(
-000571d0: 756e 6368 6563 6b3d 5472 7565 290a 0a20  uncheck=True).. 
-000571e0: 2020 2020 2020 2023 2053 6574 7320 7468         # Sets th
-000571f0: 6520 7061 7468 2074 6f20 7361 7665 2074  e path to save t
-00057200: 6865 2070 6970 656c 696e 650a 2020 2020  he pipeline.    
-00057210: 2020 2020 7070 6c5f 6564 745f 7461 6273      ppl_edt_tabs
-00057220: 2e67 6574 5f63 7572 7265 6e74 5f65 6469  .get_current_edi
-00057230: 746f 7228 292e 5f70 6970 656c 696e 655f  tor()._pipeline_
-00057240: 6669 6c65 6e61 6d65 203d 2070 706c 5f70  filename = ppl_p
-00057250: 6174 680a 0a20 2020 2020 2020 2023 2053  ath..        # S
-00057260: 6176 6573 2070 6970 656c 696e 6520 6173  aves pipeline as
-00057270: 2077 6974 6820 6669 6c6c 6564 2066 696c   with filled fil
-00057280: 656e 616d 652c 2075 6e63 6865 636b 0a20  ename, uncheck. 
-00057290: 2020 2020 2020 2070 706c 5f6d 616e 6167         ppl_manag
-000572a0: 6572 2e73 6176 6550 6970 656c 696e 6528  er.savePipeline(
-000572b0: 756e 6368 6563 6b3d 5472 7565 290a 0a20  uncheck=True).. 
-000572c0: 2020 2020 2020 2023 204d 6f63 6b73 2065         # Mocks e
-000572d0: 7865 6375 7469 6e67 2061 2064 6961 6c6f  xecuting a dialo
-000572e0: 6720 626f 7820 616e 6420 636c 6963 6b69  g box and clicki
-000572f0: 6e67 2063 6c6f 7365 0a20 2020 2020 2020  ng close.       
-00057300: 2051 4d65 7373 6167 6542 6f78 2e65 7865   QMessageBox.exe
-00057310: 6320 3d20 6c61 6d62 6461 2073 656c 665f  c = lambda self_
-00057320: 2c20 2a61 7267 733a 2073 656c 665f 2e63  , *args: self_.c
-00057330: 6c6f 7365 2829 0a0a 2020 2020 2020 2020  lose()..        
-00057340: 2320 4162 6f72 7473 2070 6970 656c 696e  # Aborts pipelin
-00057350: 6520 7361 7669 6e67 2077 6974 6820 6669  e saving with fi
-00057360: 6c6c 6564 2066 696c 656e 616d 650a 2020  lled filename.  
-00057370: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
-00057380: 722e 7361 7665 5069 7065 6c69 6e65 2829  r.savePipeline()
-00057390: 0a0a 2020 2020 2020 2020 2320 4d6f 636b  ..        # Mock
-000573a0: 7320 6578 6563 7574 696e 6720 6120 6469  s executing a di
-000573b0: 616c 6f67 2062 6f78 2061 6e64 2063 6c69  alog box and cli
-000573c0: 636b 696e 6720 7965 730a 2020 2020 2020  cking yes.      
-000573d0: 2020 514d 6573 7361 6765 426f 782e 6578    QMessageBox.ex
-000573e0: 6563 203d 2063 6c69 636b 5f79 6573 0a0a  ec = click_yes..
-000573f0: 2020 2020 2020 2020 2320 4163 6365 7074          # Accept
-00057400: 2070 6970 656c 696e 6520 7361 7669 6e67   pipeline saving
-00057410: 2077 6974 6820 6669 6c6c 6564 2066 696c   with filled fil
-00057420: 656e 616d 650a 2020 2020 2020 2020 7070  ename.        pp
-00057430: 6c5f 6d61 6e61 6765 722e 7361 7665 5069  l_manager.savePi
-00057440: 7065 6c69 6e65 2829 0a0a 2020 2020 6465  peline()..    de
-00057450: 6620 7465 7374 5f73 6176 6550 6970 656c  f test_savePipel
-00057460: 696e 6541 7328 7365 6c66 293a 0a20 2020  ineAs(self):.   
-00057470: 2020 2020 2022 2222 4d6f 636b 7320 6120       """Mocks a 
-00057480: 6d65 7468 6f64 2066 726f 6d20 7069 7065  method from pipe
-00057490: 6c69 6e65 206d 616e 6167 6572 2061 6e64  line manager and
-000574a0: 2073 6176 6573 2061 2070 6970 656c 696e   saves a pipelin
-000574b0: 6520 756e 6465 720a 2020 2020 2020 2020  e under.        
-000574c0: 616e 6f74 6865 7220 6e61 6d65 2e0a 0a20  another name... 
-000574d0: 2020 2020 2020 202d 2054 6573 7473 3a20         - Tests: 
-000574e0: 5069 7065 6c69 6e65 4d61 6e61 6765 7254  PipelineManagerT
-000574f0: 6162 2e73 6176 6550 6970 656c 696e 6541  ab.savePipelineA
-00057500: 730a 2020 2020 2020 2020 2222 220a 0a20  s.        """.. 
-00057510: 2020 2020 2020 2023 2053 6574 2073 686f         # Set sho
-00057520: 7274 6375 7473 2066 6f72 206f 626a 6563  rtcuts for objec
-00057530: 7473 2074 6861 7420 6172 6520 6f66 7465  ts that are ofte
-00057540: 6e20 7573 6564 0a20 2020 2020 2020 2070  n used.        p
-00057550: 706c 5f6d 616e 6167 6572 203d 2073 656c  pl_manager = sel
-00057560: 662e 6d61 696e 5f77 696e 646f 772e 7069  f.main_window.pi
-00057570: 7065 6c69 6e65 5f6d 616e 6167 6572 0a20  peline_manager. 
-00057580: 2020 2020 2020 2070 706c 5f65 6474 5f74         ppl_edt_t
-00057590: 6162 7320 3d20 7070 6c5f 6d61 6e61 6765  abs = ppl_manage
-000575a0: 722e 7069 7065 6c69 6e65 4564 6974 6f72  r.pipelineEditor
-000575b0: 5461 6273 0a0a 2020 2020 2020 2020 2320  Tabs..        # 
-000575c0: 5361 7665 7320 7069 7065 6c69 6e65 2077  Saves pipeline w
-000575d0: 6974 6820 656d 7074 7920 6669 6c65 6e61  ith empty filena
-000575e0: 6d65 0a20 2020 2020 2020 2070 706c 5f6d  me.        ppl_m
-000575f0: 616e 6167 6572 2e73 6176 6550 6970 656c  anager.savePipel
-00057600: 696e 6541 7328 290a 0a20 2020 2020 2020  ineAs()..       
-00057610: 2023 204d 6f63 6b73 2027 7361 7665 5069   # Mocks 'savePi
-00057620: 7065 6c69 6e65 2720 6672 6f6d 2027 7070  peline' from 'pp
-00057630: 6c5f 6564 745f 7461 6273 270a 2020 2020  l_edt_tabs'.    
-00057640: 2020 2020 7070 6c5f 6564 745f 7461 6273      ppl_edt_tabs
-00057650: 2e73 6176 655f 7069 7065 6c69 6e65 203d  .save_pipeline =
-00057660: 204d 6f63 6b28 7265 7475 726e 5f76 616c   Mock(return_val
-00057670: 7565 3d22 6e6f 745f 656d 7074 7922 290a  ue="not_empty").
-00057680: 0a20 2020 2020 2020 2023 2053 6176 6573  .        # Saves
-00057690: 2070 6970 656c 696e 6520 7769 7468 206e   pipeline with n
-000576a0: 6f74 2065 6d70 7479 2066 696c 656e 616d  ot empty filenam
-000576b0: 650a 2020 2020 2020 2020 7070 6c5f 6d61  e.        ppl_ma
-000576c0: 6e61 6765 722e 7361 7665 5069 7065 6c69  nager.savePipeli
-000576d0: 6e65 4173 2829 0a0a 2020 2020 6465 6620  neAs()..    def 
-000576e0: 7465 7374 5f73 6574 5f61 6e69 6d5f 6672  test_set_anim_fr
-000576f0: 616d 6528 7365 6c66 293a 0a20 2020 2020  ame(self):.     
-00057700: 2020 2022 2222 5275 6e73 2074 6865 2027     """Runs the '
-00057710: 726f 7461 7469 6e67 4272 6169 6e56 4953  rotatingBrainVIS
-00057720: 412e 6769 6627 2061 6e69 6d61 7469 6f6e  A.gif' animation
-00057730: 2e22 2222 0a0a 2020 2020 2020 2020 7069  ."""..        pi
-00057740: 7065 6c69 6e65 5f6d 616e 6167 6572 203d  peline_manager =
-00057750: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
-00057760: 772e 7069 7065 6c69 6e65 5f6d 616e 6167  w.pipeline_manag
-00057770: 6572 0a0a 2020 2020 2020 2020 636f 6e66  er..        conf
-00057780: 6967 203d 2043 6f6e 6669 6728 290a 2020  ig = Config().  
-00057790: 2020 2020 2020 736f 7572 6365 735f 696d        sources_im
-000577a0: 6167 6573 5f64 6972 203d 2063 6f6e 6669  ages_dir = confi
-000577b0: 672e 6765 7453 6f75 7263 6549 6d61 6765  g.getSourceImage
-000577c0: 4469 7228 290a 2020 2020 2020 2020 7365  Dir().        se
-000577d0: 6c66 2e61 7373 6572 7454 7275 6528 736f  lf.assertTrue(so
-000577e0: 7572 6365 735f 696d 6167 6573 5f64 6972  urces_images_dir
-000577f0: 2920 2023 2069 6620 7468 6520 7374 7269  )  # if the stri
-00057800: 6e67 2069 7320 6e6f 7420 656d 7074 790a  ng is not empty.
-00057810: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
-00057820: 655f 6d61 6e61 6765 722e 5f6d 6d6f 7669  e_manager._mmovi
-00057830: 6520 3d20 5174 4775 692e 514d 6f76 6965  e = QtGui.QMovie
-00057840: 280a 2020 2020 2020 2020 2020 2020 6f73  (.            os
-00057850: 2e70 6174 682e 6a6f 696e 2873 6f75 7263  .path.join(sourc
-00057860: 6573 5f69 6d61 6765 735f 6469 722c 2022  es_images_dir, "
-00057870: 726f 7461 7469 6e67 4272 6169 6e56 4953  rotatingBrainVIS
-00057880: 412e 6769 6622 290a 2020 2020 2020 2020  A.gif").        
-00057890: 290a 2020 2020 2020 2020 7069 7065 6c69  ).        pipeli
-000578a0: 6e65 5f6d 616e 6167 6572 2e5f 7365 745f  ne_manager._set_
-000578b0: 616e 696d 5f66 7261 6d65 2829 0a0a 2020  anim_frame()..  
-000578c0: 2020 6465 6620 7465 7374 5f73 686f 775f    def test_show_
-000578d0: 7374 6174 7573 2873 656c 6629 3a0a 2020  status(self):.  
-000578e0: 2020 2020 2020 2222 2253 686f 7773 2074        """Shows t
-000578f0: 6865 2073 7461 7475 7320 6f66 2074 6865  he status of the
-00057900: 2070 6970 656c 696e 6520 6578 6563 7574   pipeline execut
-00057910: 696f 6e2e 0a0a 2020 2020 2020 2020 496e  ion...        In
-00057920: 6469 7265 6374 6c79 2074 6573 7473 2053  directly tests S
-00057930: 7461 7475 7357 6964 6765 742e 5f5f 696e  tatusWidget.__in
-00057940: 6974 5f5f 2061 6e64 0a20 2020 2020 2020  it__ and.       
-00057950: 2053 7461 7475 7357 6964 6765 742e 746f   StatusWidget.to
-00057960: 6767 6c65 5f73 6f6d 615f 776f 726b 666c  ggle_soma_workfl
-00057970: 6f77 2e0a 0a20 2020 2020 2020 202d 5465  ow...        -Te
-00057980: 7374 733a 2050 6970 656c 696e 654d 616e  sts: PipelineMan
-00057990: 6167 6572 5461 622e 7465 7374 5f73 686f  agerTab.test_sho
-000579a0: 775f 7374 6174 7573 0a20 2020 2020 2020  w_status.       
-000579b0: 2022 2222 0a0a 2020 2020 2020 2020 2320   """..        # 
-000579c0: 5365 7420 7368 6f72 7463 7574 7320 666f  Set shortcuts fo
-000579d0: 7220 6f62 6a65 6374 7320 7468 6174 2061  r objects that a
-000579e0: 7265 206f 6674 656e 2075 7365 640a 2020  re often used.  
-000579f0: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
-00057a00: 7220 3d20 7365 6c66 2e6d 6169 6e5f 7769  r = self.main_wi
-00057a10: 6e64 6f77 2e70 6970 656c 696e 655f 6d61  ndow.pipeline_ma
-00057a20: 6e61 6765 720a 0a20 2020 2020 2020 2023  nager..        #
-00057a30: 2053 686f 7773 2074 6865 2073 7461 7475   Shows the statu
-00057a40: 7320 6f66 2074 6865 2070 6970 656c 696e  s of the pipelin
-00057a50: 6527 7320 6578 6563 7574 696f 6e0a 2020  e's execution.  
-00057a60: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
-00057a70: 722e 7368 6f77 5f73 7461 7475 7328 290a  r.show_status().
-00057a80: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00057a90: 7365 7274 4973 4e6f 6e65 2870 706c 5f6d  sertIsNone(ppl_m
-00057aa0: 616e 6167 6572 2e73 7461 7475 735f 7769  anager.status_wi
-00057ab0: 6467 6574 2e73 7766 5f77 6964 6765 7429  dget.swf_widget)
-00057ac0: 0a0a 2020 2020 2020 2020 2320 4372 6561  ..        # Crea
-00057ad0: 7465 7320 2770 706c 5f6d 616e 6167 6572  tes 'ppl_manager
-00057ae0: 2e73 7461 7475 735f 7769 6467 6574 2e73  .status_widget.s
-00057af0: 7766 5f77 6964 6765 7427 2c20 6e6f 7420  wf_widget', not 
-00057b00: 7669 7369 626c 6520 6279 0a20 2020 2020  visible by.     
-00057b10: 2020 2023 2064 6566 6175 6c74 2028 7468     # default (th
-00057b20: 6520 6172 6775 6d65 6e74 2069 7320 6972  e argument is ir
-00057b30: 7265 6c65 7661 6e74 290a 2020 2020 2020  relevant).      
-00057b40: 2020 7070 6c5f 6d61 6e61 6765 722e 7374    ppl_manager.st
-00057b50: 6174 7573 5f77 6964 6765 742e 746f 6767  atus_widget.togg
-00057b60: 6c65 5f73 6f6d 615f 776f 726b 666c 6f77  le_soma_workflow
-00057b70: 2846 616c 7365 290a 0a20 2020 2020 2020  (False)..       
-00057b80: 2023 2041 7373 6572 7473 2074 6861 7420   # Asserts that 
-00057b90: 2773 7766 5f77 6964 6765 7427 2068 6173  'swf_widget' has
-00057ba0: 2062 6565 6e20 6372 6561 7465 6420 616e   been created an
-00057bb0: 6420 6973 2076 6973 6962 6c65 0a20 2020  d is visible.   
-00057bc0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00057bd0: 4973 4e6f 744e 6f6e 6528 7070 6c5f 6d61  IsNotNone(ppl_ma
-00057be0: 6e61 6765 722e 7374 6174 7573 5f77 6964  nager.status_wid
-00057bf0: 6765 742e 7377 665f 7769 6467 6574 290a  get.swf_widget).
-00057c00: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00057c10: 6572 7446 616c 7365 2870 706c 5f6d 616e  ertFalse(ppl_man
-00057c20: 6167 6572 2e73 7461 7475 735f 7769 6467  ager.status_widg
-00057c30: 6574 2e73 7766 5f77 6964 6765 742e 6973  et.swf_widget.is
-00057c40: 5669 7369 626c 6528 2929 0a0a 2020 2020  Visible())..    
-00057c50: 2020 2020 2320 546f 6767 6c65 7320 7669      # Toggles vi
-00057c60: 7369 6269 6c69 7479 206f 6e0a 2020 2020  sibility on.    
-00057c70: 2020 2020 7070 6c5f 6d61 6e61 6765 722e      ppl_manager.
-00057c80: 7374 6174 7573 5f77 6964 6765 742e 746f  status_widget.to
-00057c90: 6767 6c65 5f73 6f6d 615f 776f 726b 666c  ggle_soma_workfl
-00057ca0: 6f77 2846 616c 7365 290a 2020 2020 2020  ow(False).      
-00057cb0: 2020 7365 6c66 2e61 7373 6572 7446 616c    self.assertFal
-00057cc0: 7365 2870 706c 5f6d 616e 6167 6572 2e73  se(ppl_manager.s
-00057cd0: 7461 7475 735f 7769 6467 6574 2e73 7766  tatus_widget.swf
-00057ce0: 5f77 6964 6765 742e 6973 5669 7369 626c  _widget.isVisibl
-00057cf0: 6528 2929 0a0a 2020 2020 2020 2020 2320  e())..        # 
-00057d00: 546f 6767 6c65 7320 7669 7369 6269 6c69  Toggles visibili
-00057d10: 7479 206f 6666 0a20 2020 2020 2020 2070  ty off.        p
-00057d20: 706c 5f6d 616e 6167 6572 2e73 7461 7475  pl_manager.statu
-00057d30: 735f 7769 6467 6574 2e74 6f67 676c 655f  s_widget.toggle_
-00057d40: 736f 6d61 5f77 6f72 6b66 6c6f 7728 5472  soma_workflow(Tr
-00057d50: 7565 290a 2020 2020 2020 2020 7365 6c66  ue).        self
-00057d60: 2e61 7373 6572 7454 7275 6528 7070 6c5f  .assertTrue(ppl_
-00057d70: 6d61 6e61 6765 722e 7374 6174 7573 5f77  manager.status_w
-00057d80: 6964 6765 742e 7377 665f 7769 6467 6574  idget.swf_widget
-00057d90: 2e69 7356 6973 6962 6c65 2829 290a 0a20  .isVisible()).. 
-00057da0: 2020 2064 6566 2074 6573 745f 7374 6f70     def test_stop
-00057db0: 5f65 7865 6375 7469 6f6e 2873 656c 6629  _execution(self)
-00057dc0: 3a0a 2020 2020 2020 2020 2222 2253 686f  :.        """Sho
-00057dd0: 7773 2074 6865 2073 7461 7475 7320 7769  ws the status wi
-00057de0: 6e64 6f77 206f 6620 7468 6520 7069 7065  ndow of the pipe
-00057df0: 6c69 6e65 206d 616e 6167 6572 2e0a 0a20  line manager... 
-00057e00: 2020 2020 2020 202d 2054 6573 7473 3a20         - Tests: 
-00057e10: 5069 7065 6c69 6e65 4d61 6e61 6765 7254  PipelineManagerT
-00057e20: 6162 2e74 6573 745f 7368 6f77 5f73 7461  ab.test_show_sta
-00057e30: 7475 730a 2020 2020 2020 2020 2222 220a  tus.        """.
-00057e40: 0a20 2020 2020 2020 2023 2053 6574 2073  .        # Set s
-00057e50: 686f 7274 6375 7473 2066 6f72 206f 626a  hortcuts for obj
-00057e60: 6563 7473 2074 6861 7420 6172 6520 6f66  ects that are of
-00057e70: 7465 6e20 7573 6564 0a20 2020 2020 2020  ten used.       
-00057e80: 2070 706c 5f6d 616e 6167 6572 203d 2073   ppl_manager = s
-00057e90: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00057ea0: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
-00057eb0: 0a0a 2020 2020 2020 2020 2320 4372 6561  ..        # Crea
-00057ec0: 7465 7320 6120 2752 756e 5072 6f67 7265  tes a 'RunProgre
-00057ed0: 7373 2720 6f62 6a65 6374 0a20 2020 2020  ss' object.     
-00057ee0: 2020 2070 706c 5f6d 616e 6167 6572 2e70     ppl_manager.p
-00057ef0: 726f 6772 6573 7320 3d20 5275 6e50 726f  rogress = RunPro
-00057f00: 6772 6573 7328 7070 6c5f 6d61 6e61 6765  gress(ppl_manage
-00057f10: 7229 0a0a 2020 2020 2020 2020 7070 6c5f  r)..        ppl_
-00057f20: 6d61 6e61 6765 722e 7374 6f70 5f65 7865  manager.stop_exe
-00057f30: 6375 7469 6f6e 2829 0a0a 2020 2020 2020  cution()..      
-00057f40: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
-00057f50: 6528 7070 6c5f 6d61 6e61 6765 722e 7072  e(ppl_manager.pr
-00057f60: 6f67 7265 7373 2e77 6f72 6b65 722e 696e  ogress.worker.in
-00057f70: 7465 7272 7570 745f 7265 7175 6573 7429  terrupt_request)
-00057f80: 0a0a 2020 2020 6465 6620 7465 7374 5f75  ..    def test_u
-00057f90: 6e64 6f5f 7265 646f 2873 656c 6629 3a0a  ndo_redo(self):.
-00057fa0: 2020 2020 2020 2020 2222 2254 6573 7473          """Tests
-00057fb0: 2074 6865 2075 6e64 6f2f 7265 646f 2061   the undo/redo a
-00057fc0: 6374 696f 6e2e 2222 220a 0a20 2020 2020  ction."""..     
-00057fd0: 2020 2063 6f6e 6669 6720 3d20 436f 6e66     config = Conf
-00057fe0: 6967 2863 6f6e 6669 675f 7061 7468 3d73  ig(config_path=s
-00057ff0: 656c 662e 636f 6e66 6967 5f70 6174 6829  elf.config_path)
-00058000: 0a20 2020 2020 2020 2063 6f6e 7472 6f6c  .        control
-00058010: 5631 5f76 6572 203d 2063 6f6e 6669 672e  V1_ver = config.
-00058020: 6973 436f 6e74 726f 6c56 3128 290a 0a20  isControlV1().. 
-00058030: 2020 2020 2020 2023 2053 7769 7463 6820         # Switch 
-00058040: 746f 2056 3120 6e6f 6465 2063 6f6e 7472  to V1 node contr
-00058050: 6f6c 6c65 7220 4755 492c 2069 6620 6e65  oller GUI, if ne
-00058060: 6365 7373 6172 790a 2020 2020 2020 2020  cessary.        
-00058070: 6966 206e 6f74 2063 6f6e 7472 6f6c 5631  if not controlV1
-00058080: 5f76 6572 3a0a 2020 2020 2020 2020 2020  _ver:.          
-00058090: 2020 636f 6e66 6967 2e73 6574 436f 6e74    config.setCont
-000580a0: 726f 6c56 3128 5472 7565 290a 2020 2020  rolV1(True).    
-000580b0: 2020 2020 2020 2020 7365 6c66 2e72 6573          self.res
-000580c0: 7461 7274 5f4d 4941 2829 0a0a 2020 2020  tart_MIA()..    
-000580d0: 2020 2020 2320 5365 7420 7368 6f72 7463      # Set shortc
-000580e0: 7574 7320 666f 7220 6f62 6a65 6374 7320  uts for objects 
-000580f0: 7468 6174 2061 7265 206f 6674 656e 2075  that are often u
-00058100: 7365 640a 2020 2020 2020 2020 7069 7065  sed.        pipe
-00058110: 6c69 6e65 5f6d 616e 6167 6572 203d 2073  line_manager = s
-00058120: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-00058130: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
-00058140: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
-00058150: 655f 6564 6974 6f72 5f74 6162 7320 3d20  e_editor_tabs = 
-00058160: 280a 2020 2020 2020 2020 2020 2020 7365  (.            se
-00058170: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
-00058180: 6970 656c 696e 655f 6d61 6e61 6765 722e  ipeline_manager.
-00058190: 7069 7065 6c69 6e65 4564 6974 6f72 5461  pipelineEditorTa
-000581a0: 6273 0a20 2020 2020 2020 2029 0a0a 2020  bs.        )..  
-000581b0: 2020 2020 2020 2320 4372 6561 7465 7320        # Creates 
-000581c0: 6120 6e65 7720 7072 6f6a 6563 7420 666f  a new project fo
-000581d0: 6c64 6572 2061 6e64 2061 6464 7320 6f6e  lder and adds on
-000581e0: 6520 646f 6375 6d65 6e74 2074 6f20 7468  e document to th
-000581f0: 650a 2020 2020 2020 2020 2320 7072 6f6a  e.        # proj
-00058200: 6563 740a 2020 2020 2020 2020 2320 7465  ect.        # te
-00058210: 7374 5f70 726f 6a5f 7061 7468 203d 2073  st_proj_path = s
-00058220: 656c 662e 6765 745f 6e65 775f 7465 7374  elf.get_new_test
-00058230: 5f70 726f 6a65 6374 2829 0a20 2020 2020  _project().     
-00058240: 2020 2023 2066 6f6c 6465 7220 3d20 6f73     # folder = os
-00058250: 2e70 6174 682e 6a6f 696e 2874 6573 745f  .path.join(test_
-00058260: 7072 6f6a 5f70 6174 682c 2027 6461 7461  proj_path, 'data
-00058270: 272c 2027 7261 775f 6461 7461 2729 0a20  ', 'raw_data'). 
-00058280: 2020 2020 2020 2023 204e 4949 5f46 494c         # NII_FIL
-00058290: 455f 3120 3d20 2827 4775 6572 6265 742d  E_1 = ('Guerbet-
-000582a0: 4336 2d32 3031 342d 5261 742d 4b35 322d  C6-2014-Rat-K52-
-000582b0: 5475 6265 3237 2d32 3031 342d 3032 2d31  Tube27-2014-02-1
-000582c0: 3431 3032 3331 372d 3034 2d47 335f 270a  4102317-04-G3_'.
-000582d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000582e0: 2020 2020 2020 2027 4775 6572 6265 745f         'Guerbet_
-000582f0: 4d44 4546 542d 4d44 4546 5470 766d 2d30  MDEFT-MDEFTpvm-0
-00058300: 3030 3934 305f 3830 302e 6e69 6927 290a  00940_800.nii').
-00058310: 2020 2020 2020 2020 2320 444f 4355 4d45          # DOCUME
-00058320: 4e54 5f31 203d 206f 732e 7061 7468 2e61  NT_1 = os.path.a
-00058330: 6273 7061 7468 286f 732e 7061 7468 2e6a  bspath(os.path.j
-00058340: 6f69 6e28 666f 6c64 6572 2c20 4e49 495f  oin(folder, NII_
-00058350: 4649 4c45 5f31 2929 0a0a 2020 2020 2020  FILE_1))..      
-00058360: 2020 2320 4372 6561 7465 7320 6120 7072    # Creates a pr
-00058370: 6f6a 6563 7420 7769 7468 2061 6e6f 7468  oject with anoth
-00058380: 6572 2070 726f 6a65 6374 2061 6c72 6561  er project alrea
-00058390: 6479 206f 7065 6e65 640a 2020 2020 2020  dy opened.      
-000583a0: 2020 2320 7365 6c66 2e6d 6169 6e5f 7769    # self.main_wi
-000583b0: 6e64 6f77 2e64 6174 615f 6272 6f77 7365  ndow.data_browse
-000583c0: 722e 7461 626c 655f 6461 7461 2e61 6464  r.table_data.add
-000583d0: 5f70 6174 6828 290a 0a20 2020 2020 2020  _path()..       
-000583e0: 2023 2070 6f70 5f75 705f 6164 645f 7061   # pop_up_add_pa
-000583f0: 7468 203d 2073 656c 662e 6d61 696e 5f77  th = self.main_w
-00058400: 696e 646f 772e 6461 7461 5f62 726f 7773  indow.data_brows
-00058410: 6572 2e74 6162 6c65 5f64 6174 612e 706f  er.table_data.po
-00058420: 705f 7570 5f61 6464 5f70 6174 680a 0a20  p_up_add_path.. 
-00058430: 2020 2020 2020 2023 2070 6f70 5f75 705f         # pop_up_
-00058440: 6164 645f 7061 7468 2e66 696c 655f 6c69  add_path.file_li
-00058450: 6e65 5f65 6469 742e 7365 7454 6578 7428  ne_edit.setText(
-00058460: 444f 4355 4d45 4e54 5f31 290a 2020 2020  DOCUMENT_1).    
-00058470: 2020 2020 2320 706f 705f 7570 5f61 6464      # pop_up_add
-00058480: 5f70 6174 682e 7361 7665 5f70 6174 6828  _path.save_path(
-00058490: 290a 0a20 2020 2020 2020 2023 2073 656c  )..        # sel
-000584a0: 662e 6d61 696e 5f77 696e 646f 772e 756e  f.main_window.un
-000584b0: 646f 2829 0a0a 2020 2020 2020 2020 2320  do()..        # 
-000584c0: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-000584d0: 2e72 6564 6f28 290a 0a20 2020 2020 2020  .redo()..       
-000584e0: 2023 204d 6f63 6b73 206e 6f74 2073 6176   # Mocks not sav
-000584f0: 696e 6720 7468 6520 7069 7065 6c69 6e65  ing the pipeline
-00058500: 0a20 2020 2020 2020 2023 2051 4d65 7373  .        # QMess
-00058510: 6167 6542 6f78 2e65 7865 6320 3d20 6c61  ageBox.exec = la
-00058520: 6d62 6461 2073 656c 665f 2c20 2a61 7267  mbda self_, *arg
-00058530: 3a20 7365 6c66 5f2e 6275 7474 6f6e 7328  : self_.buttons(
-00058540: 295b 2d31 5d2e 636c 6963 6b65 642e 656d  )[-1].clicked.em
-00058550: 6974 2829 0a0a 2020 2020 2020 2020 2320  it()..        # 
-00058560: 5377 6974 6368 6573 2074 6f20 7069 7065  Switches to pipe
-00058570: 6c69 6e65 206d 616e 6167 6572 0a20 2020  line manager.   
-00058580: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
-00058590: 696e 646f 772e 7461 6273 2e73 6574 4375  indow.tabs.setCu
-000585a0: 7272 656e 7449 6e64 6578 2832 290a 0a20  rrentIndex(2).. 
-000585b0: 2020 2020 2020 2023 2041 6464 2061 2053         # Add a S
-000585c0: 6d6f 6f74 6820 7072 6f63 6573 7320 3d3e  mooth process =>
-000585d0: 2063 7265 6174 6573 2061 206e 6f64 6520   creates a node 
-000585e0: 6361 6c6c 6564 2022 736d 6f6f 7468 5f31  called "smooth_1
-000585f0: 222c 0a20 2020 2020 2020 2023 2074 6573  ",.        # tes
-00058600: 7420 6966 2053 6d6f 6f74 685f 3120 6973  t if Smooth_1 is
-00058610: 2061 206e 6f64 6520 696e 2074 6865 2063   a node in the c
-00058620: 7572 7265 6e74 2070 6970 656c 696e 6520  urrent pipeline 
-00058630: 2f20 6564 6974 6f72 0a20 2020 2020 2020  / editor.       
-00058640: 2070 726f 6365 7373 5f63 6c61 7373 203d   process_class =
-00058650: 2053 6d6f 6f74 680a 2020 2020 2020 2020   Smooth.        
-00058660: 7069 7065 6c69 6e65 5f65 6469 746f 725f  pipeline_editor_
-00058670: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
-00058680: 5f65 6469 746f 7228 292e 636c 6963 6b5f  _editor().click_
-00058690: 706f 7320 3d20 5150 6f69 6e74 2834 3530  pos = QPoint(450
-000586a0: 2c20 3530 3029 0a20 2020 2020 2020 2070  , 500).        p
-000586b0: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
-000586c0: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
-000586d0: 6564 6974 6f72 2829 2e61 6464 5f6e 616d  editor().add_nam
-000586e0: 6564 5f70 726f 6365 7373 280a 2020 2020  ed_process(.    
-000586f0: 2020 2020 2020 2020 7072 6f63 6573 735f          process_
-00058700: 636c 6173 730a 2020 2020 2020 2020 290a  class.        ).
-00058710: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
-00058720: 6520 3d20 7069 7065 6c69 6e65 5f65 6469  e = pipeline_edi
-00058730: 746f 725f 7461 6273 2e67 6574 5f63 7572  tor_tabs.get_cur
-00058740: 7265 6e74 5f70 6970 656c 696e 6528 290a  rent_pipeline().
-00058750: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00058760: 6572 7454 7275 6528 2273 6d6f 6f74 685f  ertTrue("smooth_
-00058770: 3122 2069 6e20 7069 7065 6c69 6e65 2e6e  1" in pipeline.n
-00058780: 6f64 6573 2e6b 6579 7328 2929 0a0a 2020  odes.keys())..  
-00058790: 2020 2020 2020 2320 556e 646f 2028 7265        # Undo (re
-000587a0: 6d6f 7665 2074 6865 206e 6f64 6529 2c20  move the node), 
-000587b0: 7465 7374 2069 6620 7468 6520 6e6f 6465  test if the node
-000587c0: 2077 6173 2072 656d 6f76 6564 0a20 2020   was removed.   
-000587d0: 2020 2020 2070 6970 656c 696e 655f 6d61       pipeline_ma
-000587e0: 6e61 6765 722e 756e 646f 2829 0a20 2020  nager.undo().   
-000587f0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00058800: 4661 6c73 6528 2273 6d6f 6f74 685f 3122  False("smooth_1"
-00058810: 2069 6e20 7069 7065 6c69 6e65 2e6e 6f64   in pipeline.nod
-00058820: 6573 2e6b 6579 7328 2929 0a0a 2020 2020  es.keys())..    
-00058830: 2020 2020 2320 5265 646f 2028 6164 6420      # Redo (add 
-00058840: 6167 6169 6e20 7468 6520 6e6f 6465 292c  again the node),
-00058850: 2074 6573 7420 6966 2074 6865 206e 6f64   test if the nod
-00058860: 6520 7761 7320 6164 6465 640a 2020 2020  e was added.    
-00058870: 2020 2020 7069 7065 6c69 6e65 5f6d 616e      pipeline_man
-00058880: 6167 6572 2e72 6564 6f28 290a 2020 2020  ager.redo().    
-00058890: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
-000588a0: 7275 6528 2273 6d6f 6f74 685f 3122 2069  rue("smooth_1" i
-000588b0: 6e20 7069 7065 6c69 6e65 2e6e 6f64 6573  n pipeline.nodes
-000588c0: 2e6b 6579 7328 2929 0a0a 2020 2020 2020  .keys())..      
-000588d0: 2020 2320 4465 6c65 7465 2074 6865 206e    # Delete the n
-000588e0: 6f64 652c 2074 6573 7420 6966 2074 6865  ode, test if the
-000588f0: 206e 6f64 6520 7761 7320 7265 6d6f 7665   node was remove
-00058900: 640a 2020 2020 2020 2020 7069 7065 6c69  d.        pipeli
-00058910: 6e65 5f65 6469 746f 725f 7461 6273 2e67  ne_editor_tabs.g
-00058920: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
-00058930: 7228 292e 6375 7272 656e 745f 6e6f 6465  r().current_node
-00058940: 5f6e 616d 6520 3d20 280a 2020 2020 2020  _name = (.      
-00058950: 2020 2020 2020 2273 6d6f 6f74 685f 3122        "smooth_1"
-00058960: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00058970: 2020 2070 6970 656c 696e 655f 6564 6974     pipeline_edit
-00058980: 6f72 5f74 6162 732e 6765 745f 6375 7272  or_tabs.get_curr
-00058990: 656e 745f 6564 6974 6f72 2829 2e64 656c  ent_editor().del
-000589a0: 5f6e 6f64 6528 290a 2020 2020 2020 2020  _node().        
-000589b0: 7365 6c66 2e61 7373 6572 7446 616c 7365  self.assertFalse
-000589c0: 2822 736d 6f6f 7468 5f31 2220 696e 2070  ("smooth_1" in p
-000589d0: 6970 656c 696e 652e 6e6f 6465 732e 6b65  ipeline.nodes.ke
-000589e0: 7973 2829 290a 0a20 2020 2020 2020 2023  ys())..        #
-000589f0: 2055 6e64 6f20 2861 6464 2061 6761 696e   Undo (add again
-00058a00: 2074 6865 206e 6f64 6529 2c20 7465 7374   the node), test
-00058a10: 2069 6620 7468 6520 6e6f 6465 2077 6173   if the node was
-00058a20: 2061 6464 6564 0a20 2020 2020 2020 2070   added.        p
-00058a30: 6970 656c 696e 655f 6d61 6e61 6765 722e  ipeline_manager.
-00058a40: 756e 646f 2829 0a20 2020 2020 2020 2073  undo().        s
-00058a50: 656c 662e 6173 7365 7274 5472 7565 2822  elf.assertTrue("
-00058a60: 736d 6f6f 7468 5f31 2220 696e 2070 6970  smooth_1" in pip
-00058a70: 656c 696e 652e 6e6f 6465 732e 6b65 7973  eline.nodes.keys
-00058a80: 2829 290a 0a20 2020 2020 2020 2023 2052  ())..        # R
-00058a90: 6564 6f20 2864 656c 6574 6520 6167 6169  edo (delete agai
-00058aa0: 6e20 7468 6520 6e6f 6465 292c 2074 6573  n the node), tes
-00058ab0: 7420 6966 2074 6865 206e 6f64 6520 7761  t if the node wa
-00058ac0: 7320 7265 6d6f 7665 640a 2020 2020 2020  s removed.      
-00058ad0: 2020 7069 7065 6c69 6e65 5f6d 616e 6167    pipeline_manag
-00058ae0: 6572 2e72 6564 6f28 290a 2020 2020 2020  er.redo().      
-00058af0: 2020 7365 6c66 2e61 7373 6572 7446 616c    self.assertFal
-00058b00: 7365 2822 736d 6f6f 7468 3122 2069 6e20  se("smooth1" in 
-00058b10: 7069 7065 6c69 6e65 2e6e 6f64 6573 2e6b  pipeline.nodes.k
-00058b20: 6579 7328 2929 0a0a 2020 2020 2020 2020  eys())..        
-00058b30: 2320 4164 6469 6e67 2061 206e 6577 2053  # Adding a new S
-00058b40: 6d6f 6f74 6820 7072 6f63 6573 7320 3d3e  mooth process =>
-00058b50: 2063 7265 6174 6573 2061 206e 6f64 6520   creates a node 
-00058b60: 6361 6c6c 6564 2022 736d 6f6f 7468 5f31  called "smooth_1
-00058b70: 220a 2020 2020 2020 2020 7069 7065 6c69  ".        pipeli
-00058b80: 6e65 5f65 6469 746f 725f 7461 6273 2e67  ne_editor_tabs.g
-00058b90: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
-00058ba0: 7228 292e 636c 6963 6b5f 706f 7320 3d20  r().click_pos = 
-00058bb0: 5150 6f69 6e74 2834 3530 2c20 3530 3029  QPoint(450, 500)
-00058bc0: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
-00058bd0: 655f 6564 6974 6f72 5f74 6162 732e 6765  e_editor_tabs.ge
-00058be0: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
-00058bf0: 2829 2e61 6464 5f6e 616d 6564 5f70 726f  ().add_named_pro
-00058c00: 6365 7373 280a 2020 2020 2020 2020 2020  cess(.          
-00058c10: 2020 7072 6f63 6573 735f 636c 6173 730a    process_class.
-00058c20: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-00058c30: 2020 2023 2045 7870 6f72 7420 7468 6520     # Export the 
-00058c40: 226f 7574 5f70 7265 6669 7822 2070 6c75  "out_prefix" plu
-00058c50: 6720 6173 2022 7072 6566 6978 5f73 6d6f  g as "prefix_smo
-00058c60: 6f74 6822 2069 6e20 496e 7075 7420 6e6f  oth" in Input no
-00058c70: 6465 2c20 7465 7374 0a20 2020 2020 2020  de, test.       
-00058c80: 2023 2069 6620 7468 6520 496e 7075 7420   # if the Input 
-00058c90: 6e6f 6465 2068 6176 6520 6120 7072 6566  node have a pref
-00058ca0: 6978 5f73 6d6f 6f74 6820 706c 7567 0a20  ix_smooth plug. 
-00058cb0: 2020 2020 2020 2070 6970 656c 696e 655f         pipeline_
-00058cc0: 6564 6974 6f72 5f74 6162 732e 6765 745f  editor_tabs.get_
-00058cd0: 6375 7272 656e 745f 6564 6974 6f72 2829  current_editor()
-00058ce0: 2e5f 6578 706f 7274 5f70 6c75 6728 0a20  ._export_plug(. 
-00058cf0: 2020 2020 2020 2020 2020 2074 656d 705f             temp_
-00058d00: 706c 7567 5f6e 616d 653d 2822 736d 6f6f  plug_name=("smoo
-00058d10: 7468 5f31 222c 2022 6f75 745f 7072 6566  th_1", "out_pref
-00058d20: 6978 2229 2c0a 2020 2020 2020 2020 2020  ix"),.          
-00058d30: 2020 7069 7065 6c69 6e65 5f70 6172 616d    pipeline_param
-00058d40: 6574 6572 3d22 7072 6566 6978 5f73 6d6f  eter="prefix_smo
-00058d50: 6f74 6822 2c0a 2020 2020 2020 2020 2020  oth",.          
-00058d60: 2020 6f70 7469 6f6e 616c 3d46 616c 7365    optional=False
-00058d70: 2c0a 2020 2020 2020 2020 2020 2020 7765  ,.            we
-00058d80: 616b 5f6c 696e 6b3d 4661 6c73 652c 0a20  ak_link=False,. 
-00058d90: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00058da0: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
-00058db0: 2822 7072 6566 6978 5f73 6d6f 6f74 6822  ("prefix_smooth"
-00058dc0: 2069 6e20 7069 7065 6c69 6e65 2e6e 6f64   in pipeline.nod
-00058dd0: 6573 5b22 225d 2e70 6c75 6773 2e6b 6579  es[""].plugs.key
-00058de0: 7328 2929 0a0a 2020 2020 2020 2020 2320  s())..        # 
-00058df0: 556e 646f 2028 7265 6d6f 7665 2070 7265  Undo (remove pre
-00058e00: 6669 785f 736d 6f6f 7468 2066 726f 6d20  fix_smooth from 
-00058e10: 496e 7075 7420 6e6f 6465 292c 0a20 2020  Input node),.   
-00058e20: 2020 2020 2023 2074 6573 7420 6966 2074       # test if t
-00058e30: 6865 2070 7265 6669 785f 736d 6f6f 7468  he prefix_smooth
-00058e40: 2070 6c75 6720 7761 7320 6465 6c65 7465   plug was delete
-00058e50: 6420 6672 6f6d 2049 6e70 7574 206e 6f64  d from Input nod
-00058e60: 650a 2020 2020 2020 2020 7069 7065 6c69  e.        pipeli
-00058e70: 6e65 5f6d 616e 6167 6572 2e75 6e64 6f28  ne_manager.undo(
-00058e80: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-00058e90: 7373 6572 7446 616c 7365 2822 7072 6566  ssertFalse("pref
-00058ea0: 6978 5f73 6d6f 6f74 6822 2069 6e20 7069  ix_smooth" in pi
-00058eb0: 7065 6c69 6e65 2e6e 6f64 6573 5b22 225d  peline.nodes[""]
-00058ec0: 2e70 6c75 6773 2e6b 6579 7328 2929 0a0a  .plugs.keys())..
-00058ed0: 2020 2020 2020 2020 2320 7265 646f 2028          # redo (
-00058ee0: 6578 706f 7274 2061 6761 696e 2074 6865  export again the
-00058ef0: 2022 6f75 745f 7072 6566 6978 2220 706c   "out_prefix" pl
-00058f00: 7567 292c 0a20 2020 2020 2020 2023 2074  ug),.        # t
-00058f10: 6573 7420 6966 2074 6865 2049 6e70 7574  est if the Input
-00058f20: 206e 6f64 6520 6861 7665 2061 2070 7265   node have a pre
-00058f30: 6669 785f 736d 6f6f 7468 2070 6c75 670a  fix_smooth plug.
-00058f40: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
-00058f50: 5f6d 616e 6167 6572 2e72 6564 6f28 290a  _manager.redo().
-00058f60: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00058f70: 6572 7454 7275 6528 2270 7265 6669 785f  ertTrue("prefix_
-00058f80: 736d 6f6f 7468 2220 696e 2070 6970 656c  smooth" in pipel
-00058f90: 696e 652e 6e6f 6465 735b 2222 5d2e 706c  ine.nodes[""].pl
-00058fa0: 7567 732e 6b65 7973 2829 290a 0a20 2020  ugs.keys())..   
-00058fb0: 2020 2020 2023 2044 656c 6574 6520 7468       # Delete th
-00058fc0: 6520 2270 7265 6669 785f 736d 6f6f 7468  e "prefix_smooth
-00058fd0: 2220 706c 7567 2066 726f 6d20 7468 6520  " plug from the 
-00058fe0: 496e 7075 7420 6e6f 6465 2c0a 2020 2020  Input node,.    
-00058ff0: 2020 2020 2320 7465 7374 2069 6620 7468      # test if th
-00059000: 6520 496e 7075 7420 6e6f 6465 2068 6176  e Input node hav
-00059010: 6520 6e6f 7420 6120 7072 6566 6978 5f73  e not a prefix_s
-00059020: 6d6f 6f74 6820 706c 7567 0a20 2020 2020  mooth plug.     
-00059030: 2020 2070 6970 656c 696e 655f 6564 6974     pipeline_edit
-00059040: 6f72 5f74 6162 732e 6765 745f 6375 7272  or_tabs.get_curr
-00059050: 656e 745f 6564 6974 6f72 2829 2e5f 7265  ent_editor()._re
-00059060: 6d6f 7665 5f70 6c75 6728 0a20 2020 2020  move_plug(.     
-00059070: 2020 2020 2020 205f 7465 6d70 5f70 6c75         _temp_plu
-00059080: 675f 6e61 6d65 3d28 2269 6e70 7574 7322  g_name=("inputs"
-00059090: 2c20 2270 7265 6669 785f 736d 6f6f 7468  , "prefix_smooth
-000590a0: 2229 0a20 2020 2020 2020 2029 0a20 2020  ").        ).   
-000590b0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-000590c0: 4661 6c73 6528 2270 7265 6669 785f 736d  False("prefix_sm
-000590d0: 6f6f 7468 2220 696e 2070 6970 656c 696e  ooth" in pipelin
-000590e0: 652e 6e6f 6465 735b 2222 5d2e 706c 7567  e.nodes[""].plug
-000590f0: 732e 6b65 7973 2829 290a 0a20 2020 2020  s.keys())..     
-00059100: 2020 2023 2055 6e64 6f20 2865 7870 6f72     # Undo (expor
-00059110: 7420 6167 6169 6e20 7468 6520 226f 7574  t again the "out
-00059120: 5f70 7265 6669 7822 2070 6c75 6729 2c0a  _prefix" plug),.
-00059130: 2020 2020 2020 2020 2320 7465 7374 2069          # test i
-00059140: 6620 7468 6520 496e 7075 7420 6e6f 6465  f the Input node
-00059150: 2068 6176 6520 6120 7072 6566 6978 5f73   have a prefix_s
-00059160: 6d6f 6f74 6820 706c 7567 0a20 2020 2020  mooth plug.     
-00059170: 2020 2070 6970 656c 696e 655f 6d61 6e61     pipeline_mana
-00059180: 6765 722e 756e 646f 2829 0a20 2020 2020  ger.undo().     
-00059190: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-000591a0: 7565 2822 7072 6566 6978 5f73 6d6f 6f74  ue("prefix_smoot
-000591b0: 6822 2069 6e20 7069 7065 6c69 6e65 2e6e  h" in pipeline.n
-000591c0: 6f64 6573 5b22 225d 2e70 6c75 6773 2e6b  odes[""].plugs.k
-000591d0: 6579 7328 2929 0a0a 2020 2020 2020 2020  eys())..        
-000591e0: 2320 7265 646f 2028 6465 6c65 7469 6e67  # redo (deleting
-000591f0: 2074 6865 2022 7072 6566 6978 5f73 6d6f   the "prefix_smo
-00059200: 6f74 6822 2070 6c75 6720 6672 6f6d 2074  oth" plug from t
-00059210: 6865 2049 6e70 7574 206e 6f64 6529 2c0a  he Input node),.
-00059220: 2020 2020 2020 2020 2320 7465 7374 2069          # test i
-00059230: 6620 7468 6520 496e 7075 7420 6e6f 6465  f the Input node
-00059240: 2068 6176 6520 6e6f 7420 6120 7072 6566   have not a pref
-00059250: 6978 5f73 6d6f 6f74 6820 706c 7567 0a20  ix_smooth plug. 
-00059260: 2020 2020 2020 2070 6970 656c 696e 655f         pipeline_
-00059270: 6d61 6e61 6765 722e 7265 646f 2829 0a20  manager.redo(). 
-00059280: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00059290: 7274 4661 6c73 6528 2270 7265 6669 785f  rtFalse("prefix_
-000592a0: 736d 6f6f 7468 2220 696e 2070 6970 656c  smooth" in pipel
-000592b0: 696e 652e 6e6f 6465 735b 2222 5d2e 706c  ine.nodes[""].pl
-000592c0: 7567 732e 6b65 7973 2829 290a 0a20 2020  ugs.keys())..   
-000592d0: 2020 2020 2023 2046 4958 4d45 3a20 6578       # FIXME: ex
-000592e0: 706f 7274 5f70 6c75 6773 2028 6375 7272  port_plugs (curr
-000592f0: 656e 746c 7920 7468 6572 6520 6973 2061  ently there is a
-00059300: 2062 7567 2069 6620 6120 706c 7567 2069   bug if a plug i
-00059310: 730a 2020 2020 2020 2020 2320 2020 2020  s.        #     
-00059320: 2020 206f 6620 7479 7065 206c 6973 7429     of type list)
-00059330: 0a0a 2020 2020 2020 2020 2320 4164 6469  ..        # Addi
-00059340: 6e67 2061 206e 6577 2053 6d6f 6f74 6820  ng a new Smooth 
-00059350: 7072 6f63 6573 7320 3d3e 2063 7265 6174  process => creat
-00059360: 6573 2061 206e 6f64 6520 6361 6c6c 6564  es a node called
-00059370: 2022 736d 6f6f 7468 5f32 220a 2020 2020   "smooth_2".    
-00059380: 2020 2020 7069 7065 6c69 6e65 5f65 6469      pipeline_edi
-00059390: 746f 725f 7461 6273 2e67 6574 5f63 7572  tor_tabs.get_cur
-000593a0: 7265 6e74 5f65 6469 746f 7228 292e 636c  rent_editor().cl
-000593b0: 6963 6b5f 706f 7320 3d20 5150 6f69 6e74  ick_pos = QPoint
-000593c0: 2834 3530 2c20 3535 3029 0a20 2020 2020  (450, 550).     
-000593d0: 2020 2070 6970 656c 696e 655f 6564 6974     pipeline_edit
-000593e0: 6f72 5f74 6162 732e 6765 745f 6375 7272  or_tabs.get_curr
-000593f0: 656e 745f 6564 6974 6f72 2829 2e61 6464  ent_editor().add
-00059400: 5f6e 616d 6564 5f70 726f 6365 7373 280a  _named_process(.
-00059410: 2020 2020 2020 2020 2020 2020 7072 6f63              proc
-00059420: 6573 735f 636c 6173 730a 2020 2020 2020  ess_class.      
-00059430: 2020 290a 0a20 2020 2020 2020 2023 2041    )..        # A
-00059440: 6464 696e 6720 6120 6c69 6e6b 0a20 2020  dding a link.   
-00059450: 2020 2020 2070 6970 656c 696e 655f 6564       pipeline_ed
-00059460: 6974 6f72 5f74 6162 732e 6765 745f 6375  itor_tabs.get_cu
-00059470: 7272 656e 745f 6564 6974 6f72 2829 2e61  rrent_editor().a
-00059480: 6464 5f6c 696e 6b28 0a20 2020 2020 2020  dd_link(.       
-00059490: 2020 2020 2028 2273 6d6f 6f74 685f 3122       ("smooth_1"
-000594a0: 2c20 225f 736d 6f6f 7468 6564 5f66 696c  , "_smoothed_fil
-000594b0: 6573 2229 2c0a 2020 2020 2020 2020 2020  es"),.          
-000594c0: 2020 2822 736d 6f6f 7468 5f32 222c 2022    ("smooth_2", "
-000594d0: 696e 5f66 696c 6573 2229 2c0a 2020 2020  in_files"),.    
-000594e0: 2020 2020 2020 2020 6163 7469 7665 3d54          active=T
-000594f0: 7275 652c 0a20 2020 2020 2020 2020 2020  rue,.           
-00059500: 2077 6561 6b3d 4661 6c73 652c 0a20 2020   weak=False,.   
-00059510: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-00059520: 2320 7465 7374 2069 6620 7468 6520 3220  # test if the 2 
-00059530: 6e6f 6465 7320 6861 7665 2074 6865 2067  nodes have the g
-00059540: 6f6f 6420 6c69 6e6b 730a 2020 2020 2020  ood links.      
-00059550: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00059560: 616c 280a 2020 2020 2020 2020 2020 2020  al(.            
-00059570: 312c 206c 656e 2870 6970 656c 696e 652e  1, len(pipeline.
-00059580: 6e6f 6465 735b 2273 6d6f 6f74 685f 3222  nodes["smooth_2"
-00059590: 5d2e 706c 7567 735b 2269 6e5f 6669 6c65  ].plugs["in_file
-000595a0: 7322 5d2e 6c69 6e6b 735f 6672 6f6d 290a  s"].links_from).
-000595b0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-000595c0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-000595d0: 616c 280a 2020 2020 2020 2020 2020 2020  al(.            
-000595e0: 312c 0a20 2020 2020 2020 2020 2020 206c  1,.            l
-000595f0: 656e 2870 6970 656c 696e 652e 6e6f 6465  en(pipeline.node
-00059600: 735b 2273 6d6f 6f74 685f 3122 5d2e 706c  s["smooth_1"].pl
-00059610: 7567 735b 225f 736d 6f6f 7468 6564 5f66  ugs["_smoothed_f
-00059620: 696c 6573 225d 2e6c 696e 6b73 5f74 6f29  iles"].links_to)
-00059630: 2c0a 2020 2020 2020 2020 290a 0a20 2020  ,.        )..   
-00059640: 2020 2020 2023 2055 6e64 6f20 2872 656d       # Undo (rem
-00059650: 6f76 6520 7468 6520 6c69 6e6b 292c 2074  ove the link), t
-00059660: 6573 7420 6966 2074 6865 2032 206e 6f64  est if the 2 nod
-00059670: 6573 2068 6176 6520 6e6f 7420 7468 6520  es have not the 
-00059680: 6c69 6e6b 730a 2020 2020 2020 2020 7069  links.        pi
-00059690: 7065 6c69 6e65 5f6d 616e 6167 6572 2e75  peline_manager.u
-000596a0: 6e64 6f28 290a 2020 2020 2020 2020 7365  ndo().        se
-000596b0: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
-000596c0: 2020 2020 2020 2020 2020 2020 302c 206c              0, l
-000596d0: 656e 2870 6970 656c 696e 652e 6e6f 6465  en(pipeline.node
-000596e0: 735b 2273 6d6f 6f74 685f 3222 5d2e 706c  s["smooth_2"].pl
-000596f0: 7567 735b 2269 6e5f 6669 6c65 7322 5d2e  ugs["in_files"].
-00059700: 6c69 6e6b 735f 6672 6f6d 290a 2020 2020  links_from).    
-00059710: 2020 2020 290a 2020 2020 2020 2020 7365      ).        se
-00059720: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
-00059730: 2020 2020 2020 2020 2020 2020 302c 0a20              0,. 
-00059740: 2020 2020 2020 2020 2020 206c 656e 2870             len(p
-00059750: 6970 656c 696e 652e 6e6f 6465 735b 2273  ipeline.nodes["s
-00059760: 6d6f 6f74 685f 3122 5d2e 706c 7567 735b  mooth_1"].plugs[
-00059770: 225f 736d 6f6f 7468 6564 5f66 696c 6573  "_smoothed_files
-00059780: 225d 2e6c 696e 6b73 5f74 6f29 2c0a 2020  "].links_to),.  
-00059790: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
-000597a0: 2023 2052 6564 6f20 2861 6464 2061 6761   # Redo (add aga
-000597b0: 696e 2074 6865 206c 696e 6b29 2c20 7465  in the link), te
-000597c0: 7374 2069 6620 7468 6520 3220 6e6f 6465  st if the 2 node
-000597d0: 7320 6861 7665 2074 6865 2067 6f6f 6420  s have the good 
-000597e0: 6c69 6e6b 730a 2020 2020 2020 2020 7069  links.        pi
-000597f0: 7065 6c69 6e65 5f6d 616e 6167 6572 2e72  peline_manager.r
-00059800: 6564 6f28 290a 2020 2020 2020 2020 7365  edo().        se
-00059810: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
-00059820: 2020 2020 2020 2020 2020 2020 312c 206c              1, l
-00059830: 656e 2870 6970 656c 696e 652e 6e6f 6465  en(pipeline.node
-00059840: 735b 2273 6d6f 6f74 685f 3222 5d2e 706c  s["smooth_2"].pl
-00059850: 7567 735b 2269 6e5f 6669 6c65 7322 5d2e  ugs["in_files"].
-00059860: 6c69 6e6b 735f 6672 6f6d 290a 2020 2020  links_from).    
-00059870: 2020 2020 290a 2020 2020 2020 2020 7365      ).        se
-00059880: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
-00059890: 2020 2020 2020 2020 2020 2020 312c 0a20              1,. 
-000598a0: 2020 2020 2020 2020 2020 206c 656e 2870             len(p
-000598b0: 6970 656c 696e 652e 6e6f 6465 735b 2273  ipeline.nodes["s
-000598c0: 6d6f 6f74 685f 3122 5d2e 706c 7567 735b  mooth_1"].plugs[
-000598d0: 225f 736d 6f6f 7468 6564 5f66 696c 6573  "_smoothed_files
-000598e0: 225d 2e6c 696e 6b73 5f74 6f29 2c0a 2020  "].links_to),.  
-000598f0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
-00059900: 2023 2052 656d 6f76 696e 6720 7468 6520   # Removing the 
-00059910: 6c69 6e6b 2c20 7465 7374 2069 6620 7468  link, test if th
-00059920: 6520 3220 6e6f 6465 7320 6861 7665 206e  e 2 nodes have n
-00059930: 6f74 2074 6865 206c 696e 6b73 0a20 2020  ot the links.   
-00059940: 2020 2020 206c 696e 6b20 3d20 2273 6d6f       link = "smo
-00059950: 6f74 685f 312e 5f73 6d6f 6f74 6865 645f  oth_1._smoothed_
-00059960: 6669 6c65 732d 3e73 6d6f 6f74 685f 322e  files->smooth_2.
-00059970: 696e 5f66 696c 6573 220a 2020 2020 2020  in_files".      
-00059980: 2020 7069 7065 6c69 6e65 5f65 6469 746f    pipeline_edito
-00059990: 725f 7461 6273 2e67 6574 5f63 7572 7265  r_tabs.get_curre
-000599a0: 6e74 5f65 6469 746f 7228 292e 5f64 656c  nt_editor()._del
-000599b0: 5f6c 696e 6b28 6c69 6e6b 290a 2020 2020  _link(link).    
-000599c0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-000599d0: 7175 616c 280a 2020 2020 2020 2020 2020  qual(.          
-000599e0: 2020 302c 206c 656e 2870 6970 656c 696e    0, len(pipelin
-000599f0: 652e 6e6f 6465 735b 2273 6d6f 6f74 685f  e.nodes["smooth_
-00059a00: 3222 5d2e 706c 7567 735b 2269 6e5f 6669  2"].plugs["in_fi
-00059a10: 6c65 7322 5d2e 6c69 6e6b 735f 6672 6f6d  les"].links_from
-00059a20: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
-00059a30: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-00059a40: 7175 616c 280a 2020 2020 2020 2020 2020  qual(.          
-00059a50: 2020 302c 0a20 2020 2020 2020 2020 2020    0,.           
-00059a60: 206c 656e 2870 6970 656c 696e 652e 6e6f   len(pipeline.no
-00059a70: 6465 735b 2273 6d6f 6f74 685f 3122 5d2e  des["smooth_1"].
-00059a80: 706c 7567 735b 225f 736d 6f6f 7468 6564  plugs["_smoothed
-00059a90: 5f66 696c 6573 225d 2e6c 696e 6b73 5f74  _files"].links_t
-00059aa0: 6f29 2c0a 2020 2020 2020 2020 290a 0a20  o),.        ).. 
-00059ab0: 2020 2020 2020 2023 2055 6e64 6f20 2861         # Undo (a
-00059ac0: 6464 2061 6761 696e 2074 6865 206c 696e  dd again the lin
-00059ad0: 6b29 2c20 7465 7374 2069 6620 7468 6520  k), test if the 
-00059ae0: 3220 6e6f 6465 7320 6861 7665 2074 6865  2 nodes have the
-00059af0: 2067 6f6f 6420 6c69 6e6b 730a 2020 2020   good links.    
-00059b00: 2020 2020 7069 7065 6c69 6e65 5f6d 616e      pipeline_man
-00059b10: 6167 6572 2e75 6e64 6f28 290a 2020 2020  ager.undo().    
-00059b20: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-00059b30: 7175 616c 280a 2020 2020 2020 2020 2020  qual(.          
-00059b40: 2020 312c 206c 656e 2870 6970 656c 696e    1, len(pipelin
-00059b50: 652e 6e6f 6465 735b 2273 6d6f 6f74 685f  e.nodes["smooth_
-00059b60: 3222 5d2e 706c 7567 735b 2269 6e5f 6669  2"].plugs["in_fi
-00059b70: 6c65 7322 5d2e 6c69 6e6b 735f 6672 6f6d  les"].links_from
-00059b80: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
-00059b90: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-00059ba0: 7175 616c 280a 2020 2020 2020 2020 2020  qual(.          
-00059bb0: 2020 312c 0a20 2020 2020 2020 2020 2020    1,.           
-00059bc0: 206c 656e 2870 6970 656c 696e 652e 6e6f   len(pipeline.no
-00059bd0: 6465 735b 2273 6d6f 6f74 685f 3122 5d2e  des["smooth_1"].
-00059be0: 706c 7567 735b 225f 736d 6f6f 7468 6564  plugs["_smoothed
-00059bf0: 5f66 696c 6573 225d 2e6c 696e 6b73 5f74  _files"].links_t
-00059c00: 6f29 2c0a 2020 2020 2020 2020 290a 0a20  o),.        ).. 
-00059c10: 2020 2020 2020 2023 2052 6564 6f20 2872         # Redo (r
-00059c20: 656d 6f76 6520 7468 6520 6c69 6e6b 292c  emove the link),
-00059c30: 2074 6573 7420 6966 2074 6865 2032 206e   test if the 2 n
-00059c40: 6f64 6573 2068 6176 6520 6e6f 7420 7468  odes have not th
-00059c50: 6520 6c69 6e6b 730a 2020 2020 2020 2020  e links.        
-00059c60: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
-00059c70: 2e72 6564 6f28 290a 2020 2020 2020 2020  .redo().        
-00059c80: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00059c90: 280a 2020 2020 2020 2020 2020 2020 302c  (.            0,
-00059ca0: 206c 656e 2870 6970 656c 696e 652e 6e6f   len(pipeline.no
-00059cb0: 6465 735b 2273 6d6f 6f74 685f 3222 5d2e  des["smooth_2"].
-00059cc0: 706c 7567 735b 2269 6e5f 6669 6c65 7322  plugs["in_files"
-00059cd0: 5d2e 6c69 6e6b 735f 6672 6f6d 290a 2020  ].links_from).  
-00059ce0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00059cf0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00059d00: 280a 2020 2020 2020 2020 2020 2020 302c  (.            0,
-00059d10: 0a20 2020 2020 2020 2020 2020 206c 656e  .            len
-00059d20: 2870 6970 656c 696e 652e 6e6f 6465 735b  (pipeline.nodes[
-00059d30: 2273 6d6f 6f74 685f 3122 5d2e 706c 7567  "smooth_1"].plug
-00059d40: 735b 225f 736d 6f6f 7468 6564 5f66 696c  s["_smoothed_fil
-00059d50: 6573 225d 2e6c 696e 6b73 5f74 6f29 2c0a  es"].links_to),.
-00059d60: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-00059d70: 2020 2023 2052 652d 6164 6469 6e67 2061     # Re-adding a
-00059d80: 206c 696e 6b0a 2020 2020 2020 2020 7069   link.        pi
-00059d90: 7065 6c69 6e65 5f65 6469 746f 725f 7461  peline_editor_ta
-00059da0: 6273 2e67 6574 5f63 7572 7265 6e74 5f65  bs.get_current_e
-00059db0: 6469 746f 7228 292e 6164 645f 6c69 6e6b  ditor().add_link
-00059dc0: 280a 2020 2020 2020 2020 2020 2020 2822  (.            ("
-00059dd0: 736d 6f6f 7468 5f31 222c 2022 5f73 6d6f  smooth_1", "_smo
-00059de0: 6f74 6865 645f 6669 6c65 7322 292c 0a20  othed_files"),. 
-00059df0: 2020 2020 2020 2020 2020 2028 2273 6d6f             ("smo
-00059e00: 6f74 685f 3222 2c20 2269 6e5f 6669 6c65  oth_2", "in_file
-00059e10: 7322 292c 0a20 2020 2020 2020 2020 2020  s"),.           
-00059e20: 2061 6374 6976 653d 5472 7565 2c0a 2020   active=True,.  
-00059e30: 2020 2020 2020 2020 2020 7765 616b 3d46            weak=F
-00059e40: 616c 7365 2c0a 2020 2020 2020 2020 290a  alse,.        ).
-00059e50: 0a20 2020 2020 2020 2023 2055 7064 6174  .        # Updat
-00059e60: 696e 6720 7468 6520 6e6f 6465 206e 616d  ing the node nam
-00059e70: 650a 2020 2020 2020 2020 7072 6f63 6573  e.        proces
-00059e80: 7320 3d20 7069 7065 6c69 6e65 2e6e 6f64  s = pipeline.nod
-00059e90: 6573 5b22 736d 6f6f 7468 5f32 225d 2e70  es["smooth_2"].p
-00059ea0: 726f 6365 7373 0a20 2020 2020 2020 2070  rocess.        p
-00059eb0: 6970 656c 696e 655f 6d61 6e61 6765 722e  ipeline_manager.
-00059ec0: 6469 7370 6c61 794e 6f64 6550 6172 616d  displayNodeParam
-00059ed0: 6574 6572 7328 2273 6d6f 6f74 685f 3222  eters("smooth_2"
-00059ee0: 2c20 7072 6f63 6573 7329 0a20 2020 2020  , process).     
-00059ef0: 2020 206e 6f64 655f 636f 6e74 726f 6c6c     node_controll
-00059f00: 6572 203d 2073 656c 662e 6d61 696e 5f77  er = self.main_w
-00059f10: 696e 646f 772e 7069 7065 6c69 6e65 5f6d  indow.pipeline_m
-00059f20: 616e 6167 6572 2e6e 6f64 6543 6f6e 7472  anager.nodeContr
-00059f30: 6f6c 6c65 720a 2020 2020 2020 2020 6e6f  oller.        no
-00059f40: 6465 5f63 6f6e 7472 6f6c 6c65 722e 6469  de_controller.di
-00059f50: 7370 6c61 795f 7061 7261 6d65 7465 7273  splay_parameters
-00059f60: 2822 736d 6f6f 7468 5f32 222c 2070 726f  ("smooth_2", pro
-00059f70: 6365 7373 2c20 7069 7065 6c69 6e65 290a  cess, pipeline).
-00059f80: 2020 2020 2020 2020 6e6f 6465 5f63 6f6e          node_con
-00059f90: 7472 6f6c 6c65 722e 6c69 6e65 5f65 6469  troller.line_edi
-00059fa0: 745f 6e6f 6465 5f6e 616d 652e 7365 7454  t_node_name.setT
-00059fb0: 6578 7428 226d 795f 736d 6f6f 7468 2229  ext("my_smooth")
-00059fc0: 0a20 2020 2020 2020 206b 6579 4576 656e  .        keyEven
-00059fd0: 7420 3d20 5174 4775 692e 514b 6579 4576  t = QtGui.QKeyEv
-00059fe0: 656e 7428 0a20 2020 2020 2020 2020 2020  ent(.           
-00059ff0: 2051 4576 656e 742e 4b65 7950 7265 7373   QEvent.KeyPress
-0005a000: 2c20 5174 2e4b 6579 5f52 6574 7572 6e2c  , Qt.Key_Return,
-0005a010: 2051 742e 4e6f 4d6f 6469 6669 6572 0a20   Qt.NoModifier. 
-0005a020: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0005a030: 2051 436f 7265 4170 706c 6963 6174 696f   QCoreApplicatio
-0005a040: 6e2e 706f 7374 4576 656e 7428 0a20 2020  n.postEvent(.   
-0005a050: 2020 2020 2020 2020 206e 6f64 655f 636f           node_co
-0005a060: 6e74 726f 6c6c 6572 2e6c 696e 655f 6564  ntroller.line_ed
-0005a070: 6974 5f6e 6f64 655f 6e61 6d65 2c20 6b65  it_node_name, ke
-0005a080: 7945 7665 6e74 0a20 2020 2020 2020 2029  yEvent.        )
-0005a090: 0a20 2020 2020 2020 2051 5465 7374 2e71  .        QTest.q
-0005a0a0: 5761 6974 2831 3030 290a 0a20 2020 2020  Wait(100)..     
-0005a0b0: 2020 2023 2074 6573 7420 6966 2074 6865     # test if the
-0005a0c0: 2073 6d6f 6f74 685f 3220 6e6f 6465 2068   smooth_2 node h
-0005a0d0: 6173 2062 6565 6e20 7265 706c 6163 6564  as been replaced
-0005a0e0: 2062 7920 7468 650a 2020 2020 2020 2020   by the.        
-0005a0f0: 2320 6d79 5f73 6d6f 6f74 6820 6e6f 6465  # my_smooth node
-0005a100: 2061 6e64 2074 6573 7420 7468 6520 6c69   and test the li
-0005a110: 6e6b 730a 2020 2020 2020 2020 7365 6c66  nks.        self
-0005a120: 2e61 7373 6572 7454 7275 6528 226d 795f  .assertTrue("my_
-0005a130: 736d 6f6f 7468 2220 696e 2070 6970 656c  smooth" in pipel
-0005a140: 696e 652e 6e6f 6465 732e 6b65 7973 2829  ine.nodes.keys()
-0005a150: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-0005a160: 7373 6572 7446 616c 7365 2822 736d 6f6f  ssertFalse("smoo
-0005a170: 7468 5f32 2220 696e 2070 6970 656c 696e  th_2" in pipelin
-0005a180: 652e 6e6f 6465 732e 6b65 7973 2829 290a  e.nodes.keys()).
-0005a190: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0005a1a0: 6572 7445 7175 616c 280a 2020 2020 2020  ertEqual(.      
-0005a1b0: 2020 2020 2020 312c 206c 656e 2870 6970        1, len(pip
-0005a1c0: 656c 696e 652e 6e6f 6465 735b 226d 795f  eline.nodes["my_
-0005a1d0: 736d 6f6f 7468 225d 2e70 6c75 6773 5b22  smooth"].plugs["
-0005a1e0: 696e 5f66 696c 6573 225d 2e6c 696e 6b73  in_files"].links
-0005a1f0: 5f66 726f 6d29 0a20 2020 2020 2020 2029  _from).        )
-0005a200: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0005a210: 7365 7274 4571 7561 6c28 0a20 2020 2020  sertEqual(.     
-0005a220: 2020 2020 2020 2031 2c0a 2020 2020 2020         1,.      
-0005a230: 2020 2020 2020 6c65 6e28 7069 7065 6c69        len(pipeli
-0005a240: 6e65 2e6e 6f64 6573 5b22 736d 6f6f 7468  ne.nodes["smooth
-0005a250: 5f31 225d 2e70 6c75 6773 5b22 5f73 6d6f  _1"].plugs["_smo
-0005a260: 6f74 6865 645f 6669 6c65 7322 5d2e 6c69  othed_files"].li
-0005a270: 6e6b 735f 746f 292c 0a20 2020 2020 2020  nks_to),.       
-0005a280: 2029 0a0a 2020 2020 2020 2020 2320 556e   )..        # Un
-0005a290: 646f 2028 5570 6461 7469 6e67 2074 6865  do (Updating the
-0005a2a0: 206e 6f64 6520 6e61 6d65 2066 726f 6d20   node name from 
-0005a2b0: 6d79 5f73 6d6f 6f74 6820 746f 2073 6d6f  my_smooth to smo
-0005a2c0: 6f74 685f 3229 2c0a 2020 2020 2020 2020  oth_2),.        
-0005a2d0: 2320 7465 7374 2069 6620 6974 2773 206f  # test if it's o
-0005a2e0: 6b0a 2020 2020 2020 2020 7069 7065 6c69  k.        pipeli
-0005a2f0: 6e65 5f6d 616e 6167 6572 2e75 6e64 6f28  ne_manager.undo(
-0005a300: 290a 2020 2020 2020 2020 5154 6573 742e  ).        QTest.
-0005a310: 7157 6169 7428 3130 3029 0a20 2020 2020  qWait(100).     
-0005a320: 2020 2073 656c 662e 6173 7365 7274 4661     self.assertFa
-0005a330: 6c73 6528 226d 795f 736d 6f6f 7468 2220  lse("my_smooth" 
-0005a340: 696e 2070 6970 656c 696e 652e 6e6f 6465  in pipeline.node
-0005a350: 732e 6b65 7973 2829 290a 2020 2020 2020  s.keys()).      
-0005a360: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
-0005a370: 6528 2273 6d6f 6f74 685f 3222 2069 6e20  e("smooth_2" in 
-0005a380: 7069 7065 6c69 6e65 2e6e 6f64 6573 2e6b  pipeline.nodes.k
-0005a390: 6579 7328 2929 0a20 2020 2020 2020 2073  eys()).        s
-0005a3a0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0005a3b0: 0a20 2020 2020 2020 2020 2020 2031 2c20  .            1, 
-0005a3c0: 6c65 6e28 7069 7065 6c69 6e65 2e6e 6f64  len(pipeline.nod
-0005a3d0: 6573 5b22 736d 6f6f 7468 5f32 225d 2e70  es["smooth_2"].p
-0005a3e0: 6c75 6773 5b22 696e 5f66 696c 6573 225d  lugs["in_files"]
-0005a3f0: 2e6c 696e 6b73 5f66 726f 6d29 0a20 2020  .links_from).   
-0005a400: 2020 2020 2029 0a20 2020 2020 2020 2073       ).        s
-0005a410: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0005a420: 0a20 2020 2020 2020 2020 2020 2031 2c0a  .            1,.
-0005a430: 2020 2020 2020 2020 2020 2020 6c65 6e28              len(
-0005a440: 7069 7065 6c69 6e65 2e6e 6f64 6573 5b22  pipeline.nodes["
-0005a450: 736d 6f6f 7468 5f31 225d 2e70 6c75 6773  smooth_1"].plugs
-0005a460: 5b22 5f73 6d6f 6f74 6865 645f 6669 6c65  ["_smoothed_file
-0005a470: 7322 5d2e 6c69 6e6b 735f 746f 292c 0a20  s"].links_to),. 
-0005a480: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-0005a490: 2020 2320 5265 646f 2028 5570 6461 7469    # Redo (Updati
-0005a4a0: 6e67 2074 6865 206e 6f64 6520 6e61 6d65  ng the node name
-0005a4b0: 2066 726f 6d20 736d 6f6f 7468 5f32 2074   from smooth_2 t
-0005a4c0: 6f20 6d79 5f73 6d6f 6f74 6829 2c0a 2020  o my_smooth),.  
-0005a4d0: 2020 2020 2020 2320 7465 7374 2069 6620        # test if 
-0005a4e0: 6974 2773 206f 6b0a 2020 2020 2020 2020  it's ok.        
-0005a4f0: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
-0005a500: 2e72 6564 6f28 290a 2020 2020 2020 2020  .redo().        
-0005a510: 5154 6573 742e 7157 6169 7428 3130 3029  QTest.qWait(100)
-0005a520: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0005a530: 7365 7274 5472 7565 2822 6d79 5f73 6d6f  sertTrue("my_smo
-0005a540: 6f74 6822 2069 6e20 7069 7065 6c69 6e65  oth" in pipeline
-0005a550: 2e6e 6f64 6573 2e6b 6579 7328 2929 0a20  .nodes.keys()). 
-0005a560: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0005a570: 7274 4661 6c73 6528 2273 6d6f 6f74 685f  rtFalse("smooth_
-0005a580: 3222 2069 6e20 7069 7065 6c69 6e65 2e6e  2" in pipeline.n
-0005a590: 6f64 6573 2e6b 6579 7328 2929 0a20 2020  odes.keys()).   
-0005a5a0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0005a5b0: 4571 7561 6c28 0a20 2020 2020 2020 2020  Equal(.         
-0005a5c0: 2020 2031 2c20 6c65 6e28 7069 7065 6c69     1, len(pipeli
-0005a5d0: 6e65 2e6e 6f64 6573 5b22 6d79 5f73 6d6f  ne.nodes["my_smo
-0005a5e0: 6f74 6822 5d2e 706c 7567 735b 2269 6e5f  oth"].plugs["in_
-0005a5f0: 6669 6c65 7322 5d2e 6c69 6e6b 735f 6672  files"].links_fr
-0005a600: 6f6d 290a 2020 2020 2020 2020 290a 2020  om).        ).  
-0005a610: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0005a620: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
-0005a630: 2020 2020 312c 0a20 2020 2020 2020 2020      1,.         
-0005a640: 2020 206c 656e 2870 6970 656c 696e 652e     len(pipeline.
-0005a650: 6e6f 6465 735b 2273 6d6f 6f74 685f 3122  nodes["smooth_1"
-0005a660: 5d2e 706c 7567 735b 225f 736d 6f6f 7468  ].plugs["_smooth
-0005a670: 6564 5f66 696c 6573 225d 2e6c 696e 6b73  ed_files"].links
-0005a680: 5f74 6f29 2c0a 2020 2020 2020 2020 290a  _to),.        ).
-0005a690: 0a20 2020 2020 2020 2023 2055 7064 6174  .        # Updat
-0005a6a0: 696e 6720 6120 706c 7567 2076 616c 7565  ing a plug value
-0005a6b0: 0a20 2020 2020 2020 2069 6620 6861 7361  .        if hasa
-0005a6c0: 7474 7228 6e6f 6465 5f63 6f6e 7472 6f6c  ttr(node_control
-0005a6d0: 6c65 722c 2022 6765 745f 696e 6465 785f  ler, "get_index_
-0005a6e0: 6672 6f6d 5f70 6c75 675f 6e61 6d65 2229  from_plug_name")
-0005a6f0: 3a0a 2020 2020 2020 2020 2020 2020 696e  :.            in
-0005a700: 6465 7820 3d20 6e6f 6465 5f63 6f6e 7472  dex = node_contr
-0005a710: 6f6c 6c65 722e 6765 745f 696e 6465 785f  oller.get_index_
-0005a720: 6672 6f6d 5f70 6c75 675f 6e61 6d65 280a  from_plug_name(.
-0005a730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005a740: 226f 7574 5f70 7265 6669 7822 2c20 2269  "out_prefix", "i
-0005a750: 6e22 0a20 2020 2020 2020 2020 2020 2029  n".            )
-0005a760: 0a20 2020 2020 2020 2020 2020 206e 6f64  .            nod
-0005a770: 655f 636f 6e74 726f 6c6c 6572 2e6c 696e  e_controller.lin
-0005a780: 655f 6564 6974 5f69 6e70 7574 5b69 6e64  e_edit_input[ind
-0005a790: 6578 5d2e 7365 7454 6578 7428 2250 5245  ex].setText("PRE
-0005a7a0: 4649 5822 290a 2020 2020 2020 2020 2020  FIX").          
-0005a7b0: 2020 6e6f 6465 5f63 6f6e 7472 6f6c 6c65    node_controlle
-0005a7c0: 722e 7570 6461 7465 5f70 6c75 675f 7661  r.update_plug_va
-0005a7d0: 6c75 6528 0a20 2020 2020 2020 2020 2020  lue(.           
-0005a7e0: 2020 2020 2022 696e 222c 2022 6f75 745f       "in", "out_
-0005a7f0: 7072 6566 6978 222c 2070 6970 656c 696e  prefix", pipelin
-0005a800: 652c 2073 7472 0a20 2020 2020 2020 2020  e, str.         
-0005a810: 2020 2029 0a0a 2020 2020 2020 2020 2020     )..          
-0005a820: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0005a830: 616c 280a 2020 2020 2020 2020 2020 2020  al(.            
-0005a840: 2020 2020 2250 5245 4649 5822 2c0a 2020      "PREFIX",.  
-0005a850: 2020 2020 2020 2020 2020 2020 2020 7069                pi
-0005a860: 7065 6c69 6e65 2e6e 6f64 6573 5b22 6d79  peline.nodes["my
-0005a870: 5f73 6d6f 6f74 6822 5d2e 6765 745f 706c  _smooth"].get_pl
-0005a880: 7567 5f76 616c 7565 2822 6f75 745f 7072  ug_value("out_pr
-0005a890: 6566 6978 2229 2c0a 2020 2020 2020 2020  efix"),.        
-0005a8a0: 2020 2020 290a 0a20 2020 2020 2020 2020      )..         
-0005a8b0: 2020 2073 656c 662e 6d61 696e 5f77 696e     self.main_win
-0005a8c0: 646f 772e 756e 646f 2829 0a20 2020 2020  dow.undo().     
-0005a8d0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0005a8e0: 7274 4571 7561 6c28 0a20 2020 2020 2020  rtEqual(.       
-0005a8f0: 2020 2020 2020 2020 2022 7322 2c20 7069           "s", pi
-0005a900: 7065 6c69 6e65 2e6e 6f64 6573 5b22 6d79  peline.nodes["my
-0005a910: 5f73 6d6f 6f74 6822 5d2e 6765 745f 706c  _smooth"].get_pl
-0005a920: 7567 5f76 616c 7565 2822 6f75 745f 7072  ug_value("out_pr
-0005a930: 6566 6978 2229 0a20 2020 2020 2020 2020  efix").         
-0005a940: 2020 2029 0a0a 2020 2020 2020 2020 2020     )..          
-0005a950: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
-0005a960: 6f77 2e72 6564 6f28 290a 2020 2020 2020  ow.redo().      
-0005a970: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0005a980: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
-0005a990: 2020 2020 2020 2020 2250 5245 4649 5822          "PREFIX"
-0005a9a0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0005a9b0: 2020 7069 7065 6c69 6e65 2e6e 6f64 6573    pipeline.nodes
-0005a9c0: 5b22 6d79 5f73 6d6f 6f74 6822 5d2e 6765  ["my_smooth"].ge
-0005a9d0: 745f 706c 7567 5f76 616c 7565 2822 6f75  t_plug_value("ou
-0005a9e0: 745f 7072 6566 6978 2229 2c0a 2020 2020  t_prefix"),.    
-0005a9f0: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-0005aa00: 2020 2023 2053 7769 7463 6865 7320 6261     # Switches ba
-0005aa10: 636b 2074 6f20 6e6f 6465 2063 6f6e 7472  ck to node contr
-0005aa20: 6f6c 6c65 7220 5632 2c20 6966 206e 6563  oller V2, if nec
-0005aa30: 6573 7361 7279 2028 7265 7475 726e 2074  essary (return t
-0005aa40: 6f20 696e 6974 6961 6c0a 2020 2020 2020  o initial.      
-0005aa50: 2020 2320 7374 6174 6529 0a20 2020 2020    # state).     
-0005aa60: 2020 2063 6f6e 6669 6720 3d20 436f 6e66     config = Conf
-0005aa70: 6967 2863 6f6e 6669 675f 7061 7468 3d73  ig(config_path=s
-0005aa80: 656c 662e 636f 6e66 6967 5f70 6174 6829  elf.config_path)
-0005aa90: 0a0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
-0005aaa0: 2063 6f6e 7472 6f6c 5631 5f76 6572 3a0a   controlV1_ver:.
-0005aab0: 2020 2020 2020 2020 2020 2020 636f 6e66              conf
-0005aac0: 6967 2e73 6574 436f 6e74 726f 6c56 3128  ig.setControlV1(
-0005aad0: 4661 6c73 6529 0a0a 2020 2020 6465 6620  False)..    def 
-0005aae0: 7465 7374 5f75 7064 6174 655f 6175 746f  test_update_auto
-0005aaf0: 5f69 6e68 6572 6974 616e 6365 2873 656c  _inheritance(sel
-0005ab00: 6629 3a0a 2020 2020 2020 2020 2222 2241  f):.        """A
-0005ab10: 6464 7320 6120 7072 6f63 6573 7320 616e  dds a process an
-0005ab20: 6420 7570 6461 7465 7320 7468 6520 6a6f  d updates the jo
-0005ab30: 6227 7320 6175 746f 2069 6e68 6572 6974  b's auto inherit
-0005ab40: 616e 6365 2064 6963 742e 0a0a 2020 2020  ance dict...    
-0005ab50: 2020 2020 2d20 5465 7374 733a 2050 6970      - Tests: Pip
-0005ab60: 656c 696e 654d 616e 6167 6572 5461 622e  elineManagerTab.
-0005ab70: 7570 6461 7465 5f61 7574 6f5f 696e 6865  update_auto_inhe
-0005ab80: 7269 7461 6e63 650a 2020 2020 2020 2020  ritance.        
-0005ab90: 2222 220a 0a20 2020 2020 2020 2063 6f6e  """..        con
-0005aba0: 6669 6720 3d20 436f 6e66 6967 2863 6f6e  fig = Config(con
-0005abb0: 6669 675f 7061 7468 3d73 656c 662e 636f  fig_path=self.co
-0005abc0: 6e66 6967 5f70 6174 6829 0a20 2020 2020  nfig_path).     
-0005abd0: 2020 2066 6f6c 6465 7220 3d20 6f73 2e70     folder = os.p
-0005abe0: 6174 682e 6162 7370 6174 6828 0a20 2020  ath.abspath(.   
-0005abf0: 2020 2020 2020 2020 206f 732e 7061 7468           os.path
-0005ac00: 2e6a 6f69 6e28 0a20 2020 2020 2020 2020  .join(.         
-0005ac10: 2020 2020 2020 2063 6f6e 6669 672e 6765         config.ge
-0005ac20: 745f 6d69 615f 7061 7468 2829 2c0a 2020  t_mia_path(),.  
-0005ac30: 2020 2020 2020 2020 2020 2020 2020 226d                "m
-0005ac40: 6961 7574 6461 7461 222c 0a20 2020 2020  iautdata",.     
-0005ac50: 2020 2020 2020 2020 2020 2022 7265 736f             "reso
-0005ac60: 7572 6365 7322 2c0a 2020 2020 2020 2020  urces",.        
-0005ac70: 2020 2020 2020 2020 226d 6961 222c 0a20          "mia",. 
-0005ac80: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0005ac90: 7072 6f6a 6563 745f 3822 2c0a 2020 2020  project_8",.    
-0005aca0: 2020 2020 2020 2020 2020 2020 2264 6174              "dat
-0005acb0: 6122 2c0a 2020 2020 2020 2020 2020 2020  a",.            
-0005acc0: 2020 2020 2272 6177 5f64 6174 6122 2c0a      "raw_data",.
-0005acd0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-0005ace0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
-0005acf0: 204e 4949 5f46 494c 455f 3120 3d20 280a   NII_FILE_1 = (.
-0005ad00: 2020 2020 2020 2020 2020 2020 2247 7565              "Gue
-0005ad10: 7262 6574 2d43 362d 3230 3134 2d52 6174  rbet-C6-2014-Rat
-0005ad20: 2d4b 3532 2d54 7562 6532 372d 3230 3134  -K52-Tube27-2014
-0005ad30: 2d30 322d 3134 3130 3233 3137 2d30 312d  -02-14102317-01-
-0005ad40: 4731 5f22 0a20 2020 2020 2020 2020 2020  G1_".           
-0005ad50: 2022 4775 6572 6265 745f 416e 6174 2d52   "Guerbet_Anat-R
-0005ad60: 4152 4570 766d 2d30 3030 3232 305f 3030  AREpvm-000220_00
-0005ad70: 302e 6e69 6922 0a20 2020 2020 2020 2029  0.nii".        )
-0005ad80: 0a20 2020 2020 2020 204e 4949 5f46 494c  .        NII_FIL
-0005ad90: 455f 3220 3d20 280a 2020 2020 2020 2020  E_2 = (.        
-0005ada0: 2020 2020 2247 7565 7262 6574 2d43 362d      "Guerbet-C6-
-0005adb0: 3230 3134 2d52 6174 2d4b 3532 2d54 7562  2014-Rat-K52-Tub
-0005adc0: 6532 372d 3230 3134 2d30 322d 3134 3130  e27-2014-02-1410
-0005add0: 3233 3137 2d30 342d 4733 5f22 0a20 2020  2317-04-G3_".   
-0005ade0: 2020 2020 2020 2020 2022 4775 6572 6265           "Guerbe
-0005adf0: 745f 4d44 4546 542d 4d44 4546 5470 766d  t_MDEFT-MDEFTpvm
-0005ae00: 2d30 3030 3934 305f 3830 302e 6e69 6922  -000940_800.nii"
-0005ae10: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-0005ae20: 2020 2020 444f 4355 4d45 4e54 5f31 203d      DOCUMENT_1 =
-0005ae30: 206f 732e 7061 7468 2e61 6273 7061 7468   os.path.abspath
-0005ae40: 286f 732e 7061 7468 2e6a 6f69 6e28 666f  (os.path.join(fo
-0005ae50: 6c64 6572 2c20 4e49 495f 4649 4c45 5f31  lder, NII_FILE_1
-0005ae60: 2929 0a20 2020 2020 2020 2044 4f43 554d  )).        DOCUM
-0005ae70: 454e 545f 3220 3d20 6f73 2e70 6174 682e  ENT_2 = os.path.
-0005ae80: 6162 7370 6174 6828 6f73 2e70 6174 682e  abspath(os.path.
-0005ae90: 6a6f 696e 2866 6f6c 6465 722c 204e 4949  join(folder, NII
-0005aea0: 5f46 494c 455f 3229 290a 0a20 2020 2020  _FILE_2))..     
-0005aeb0: 2020 2023 2053 6574 2073 686f 7274 6375     # Set shortcu
-0005aec0: 7473 2066 6f72 206f 626a 6563 7473 2074  ts for objects t
-0005aed0: 6861 7420 6172 6520 6f66 7465 6e20 7573  hat are often us
-0005aee0: 6564 0a20 2020 2020 2020 2070 706c 5f6d  ed.        ppl_m
-0005aef0: 616e 6167 6572 203d 2073 656c 662e 6d61  anager = self.ma
-0005af00: 696e 5f77 696e 646f 772e 7069 7065 6c69  in_window.pipeli
-0005af10: 6e65 5f6d 616e 6167 6572 0a20 2020 2020  ne_manager.     
-0005af20: 2020 2070 706c 5f65 6474 5f74 6162 7320     ppl_edt_tabs 
-0005af30: 3d20 7070 6c5f 6d61 6e61 6765 722e 7069  = ppl_manager.pi
-0005af40: 7065 6c69 6e65 4564 6974 6f72 5461 6273  pelineEditorTabs
-0005af50: 0a20 2020 2020 2020 2070 706c 203d 2070  .        ppl = p
-0005af60: 706c 5f65 6474 5f74 6162 732e 6765 745f  pl_edt_tabs.get_
-0005af70: 6375 7272 656e 745f 7069 7065 6c69 6e65  current_pipeline
-0005af80: 2829 0a0a 2020 2020 2020 2020 2320 4164  ()..        # Ad
-0005af90: 6473 2061 2052 656e 616d 6520 7072 6f63  ds a Rename proc
-0005afa0: 6573 7365 732c 2063 7265 6174 6573 2074  esses, creates t
-0005afb0: 6865 2027 7265 6e61 6d65 5f31 2720 6e6f  he 'rename_1' no
-0005afc0: 6465 0a20 2020 2020 2020 2070 706c 5f65  de.        ppl_e
-0005afd0: 6474 5f74 6162 732e 6765 745f 6375 7272  dt_tabs.get_curr
-0005afe0: 656e 745f 6564 6974 6f72 2829 2e63 6c69  ent_editor().cli
-0005aff0: 636b 5f70 6f73 203d 2051 506f 696e 7428  ck_pos = QPoint(
-0005b000: 3435 302c 2035 3030 290a 2020 2020 2020  450, 500).      
-0005b010: 2020 7070 6c5f 6564 745f 7461 6273 2e67    ppl_edt_tabs.g
-0005b020: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
-0005b030: 7228 292e 6164 645f 6e61 6d65 645f 7072  r().add_named_pr
-0005b040: 6f63 6573 7328 5265 6e61 6d65 290a 0a20  ocess(Rename).. 
-0005b050: 2020 2020 2020 2070 706c 5f65 6474 5f74         ppl_edt_t
-0005b060: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
-0005b070: 6564 6974 6f72 2829 2e65 7870 6f72 745f  editor().export_
-0005b080: 756e 636f 6e6e 6563 7465 645f 6d61 6e64  unconnected_mand
-0005b090: 6174 6f72 795f 696e 7075 7473 2829 0a20  atory_inputs(). 
-0005b0a0: 2020 2020 2020 2070 706c 5f65 6474 5f74         ppl_edt_t
-0005b0b0: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
-0005b0c0: 6564 6974 6f72 2829 2e65 7870 6f72 745f  editor().export_
-0005b0d0: 616c 6c5f 756e 636f 6e6e 6563 7465 645f  all_unconnected_
-0005b0e0: 6f75 7470 7574 7328 290a 0a20 2020 2020  outputs()..     
-0005b0f0: 2020 2070 706c 2e6e 6f64 6573 5b22 7265     ppl.nodes["re
-0005b100: 6e61 6d65 5f31 225d 2e73 6574 5f70 6c75  name_1"].set_plu
-0005b110: 675f 7661 6c75 6528 2269 6e5f 6669 6c65  g_value("in_file
-0005b120: 222c 2044 4f43 554d 454e 545f 3129 0a20  ", DOCUMENT_1). 
-0005b130: 2020 2020 2020 206e 6f64 6520 3d20 7070         node = pp
-0005b140: 6c2e 6e6f 6465 735b 2272 656e 616d 655f  l.nodes["rename_
-0005b150: 3122 5d0a 0a20 2020 2020 2020 2023 2049  1"]..        # I
-0005b160: 6e69 7469 616c 697a 6573 2074 6865 2077  nitializes the w
-0005b170: 6f72 6b66 6c6f 7720 6d61 6e75 616c 6c79  orkflow manually
-0005b180: 0a20 2020 2020 2020 2070 706c 5f6d 616e  .        ppl_man
-0005b190: 6167 6572 2e77 6f72 6b66 6c6f 7720 3d20  ager.workflow = 
-0005b1a0: 776f 726b 666c 6f77 5f66 726f 6d5f 7069  workflow_from_pi
-0005b1b0: 7065 6c69 6e65 280a 2020 2020 2020 2020  peline(.        
-0005b1c0: 2020 2020 7070 6c2c 2063 6f6d 706c 6574      ppl, complet
-0005b1d0: 655f 7061 7261 6d65 7465 7273 3d54 7275  e_parameters=Tru
-0005b1e0: 650a 2020 2020 2020 2020 290a 0a20 2020  e.        )..   
-0005b1f0: 2020 2020 206a 6f62 203d 2070 706c 5f6d       job = ppl_m
-0005b200: 616e 6167 6572 2e77 6f72 6b66 6c6f 772e  anager.workflow.
-0005b210: 6a6f 6273 5b30 5d0a 0a20 2020 2020 2020  jobs[0]..       
-0005b220: 2023 204d 6f63 6b73 2074 6865 206e 6f64   # Mocks the nod
-0005b230: 6527 7320 7061 7261 6d65 7465 7273 0a20  e's parameters. 
-0005b240: 2020 2020 2020 206e 6f64 652e 6175 746f         node.auto
-0005b250: 5f69 6e68 6572 6974 616e 6365 5f64 6963  _inheritance_dic
-0005b260: 7420 3d20 7b7d 0a20 2020 2020 2020 2070  t = {}.        p
-0005b270: 726f 6365 7373 203d 206e 6f64 652e 7072  rocess = node.pr
-0005b280: 6f63 6573 730a 2020 2020 2020 2020 7072  ocess.        pr
-0005b290: 6f63 6573 732e 7374 7564 795f 636f 6e66  ocess.study_conf
-0005b2a0: 6967 2e70 726f 6a65 6374 203d 204d 6f63  ig.project = Moc
-0005b2b0: 6b28 290a 2020 2020 2020 2020 7072 6f63  k().        proc
-0005b2c0: 6573 732e 7374 7564 795f 636f 6e66 6967  ess.study_config
-0005b2d0: 2e70 726f 6a65 6374 2e66 6f6c 6465 7220  .project.folder 
-0005b2e0: 3d20 636f 6e66 6967 2e67 6574 5f6d 6961  = config.get_mia
-0005b2f0: 5f70 6174 6828 290a 2020 2020 2020 2020  _path().        
-0005b300: 7072 6f63 6573 732e 6f75 7470 7574 7320  process.outputs 
-0005b310: 3d20 5b5d 0a20 2020 2020 2020 2070 726f  = [].        pro
-0005b320: 6365 7373 2e6c 6973 745f 6f75 7470 7574  cess.list_output
-0005b330: 7320 3d20 5b5d 0a20 2020 2020 2020 2070  s = [].        p
-0005b340: 726f 6365 7373 2e61 7574 6f5f 696e 6865  rocess.auto_inhe
-0005b350: 7269 7461 6e63 655f 6469 6374 203d 207b  ritance_dict = {
-0005b360: 7d0a 0a20 2020 2020 2020 2023 204d 6f63  }..        # Moc
-0005b370: 6b73 2027 6a6f 622e 7061 7261 6d5f 6469  ks 'job.param_di
-0005b380: 6374 2720 746f 2073 6861 7265 2069 7465  ct' to share ite
-0005b390: 6d73 2077 6974 6820 626f 7468 2074 6865  ms with both the
-0005b3a0: 2069 6e70 7574 7320 616e 640a 2020 2020   inputs and.    
-0005b3b0: 2020 2020 2320 6f75 7470 7574 7320 6c69      # outputs li
-0005b3c0: 7374 206f 6620 7468 6520 7072 6f63 6573  st of the proces
-0005b3d0: 730a 2020 2020 2020 2020 2320 4e6f 7465  s.        # Note
-0005b3e0: 3a20 6f6e 6c79 2027 696e 5f66 696c 6527  : only 'in_file'
-0005b3f0: 2061 6e64 2027 5f6f 7574 5f66 696c 6527   and '_out_file'
-0005b400: 2061 7265 2066 696c 6520 7472 6169 7420   are file trait 
-0005b410: 7479 7065 730a 2020 2020 2020 2020 6a6f  types.        jo
-0005b420: 622e 7061 7261 6d5f 6469 6374 5b22 5f6f  b.param_dict["_o
-0005b430: 7574 5f66 696c 6522 5d20 3d20 225f 6f75  ut_file"] = "_ou
-0005b440: 745f 6669 6c65 5f76 616c 7565 220a 0a20  t_file_value".. 
-0005b450: 2020 2020 2020 2070 706c 5f6d 616e 6167         ppl_manag
-0005b460: 6572 2e75 7064 6174 655f 6175 746f 5f69  er.update_auto_i
-0005b470: 6e68 6572 6974 616e 6365 286a 6f62 2c20  nheritance(job, 
-0005b480: 6e6f 6465 290a 0a20 2020 2020 2020 2023  node)..        #
-0005b490: 2027 6a6f 622e 7061 7261 6d5f 6469 6374   'job.param_dict
-0005b4a0: 2720 6173 206c 6973 7420 6f66 206f 626a  ' as list of obj
-0005b4b0: 6563 7473 0a20 2020 2020 2020 206a 6f62  ects.        job
-0005b4c0: 2e70 6172 616d 5f64 6963 745b 2269 6e6c  .param_dict["inl
-0005b4d0: 6973 7422 5d20 3d20 5b44 4f43 554d 454e  ist"] = [DOCUMEN
-0005b4e0: 545f 312c 2044 4f43 554d 454e 545f 325d  T_1, DOCUMENT_2]
-0005b4f0: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
-0005b500: 2e67 6574 5f6f 7574 7075 7473 203d 204d  .get_outputs = M
-0005b510: 6f63 6b28 7265 7475 726e 5f76 616c 7565  ock(return_value
-0005b520: 3d7b 225f 6f75 7422 3a20 5b22 5f6f 7574  ={"_out": ["_out
-0005b530: 5f76 616c 7565 225d 7d29 0a20 2020 2020  _value"]}).     
-0005b540: 2020 206a 6f62 2e70 6172 616d 5f64 6963     job.param_dic
-0005b550: 745b 225f 6f75 7422 5d20 3d20 5b22 5f6f  t["_out"] = ["_o
-0005b560: 7574 5f76 616c 7565 225d 0a20 2020 2020  ut_value"].     
-0005b570: 2020 2070 706c 5f6d 616e 6167 6572 2e75     ppl_manager.u
-0005b580: 7064 6174 655f 6175 746f 5f69 6e68 6572  pdate_auto_inher
-0005b590: 6974 616e 6365 286a 6f62 2c20 6e6f 6465  itance(job, node
-0005b5a0: 290a 0a20 2020 2020 2020 2023 2027 6e6f  )..        # 'no
-0005b5b0: 6465 2720 646f 6573 206e 6f74 2068 6176  de' does not hav
-0005b5c0: 6520 6120 2770 726f 6a65 6374 270a 2020  e a 'project'.  
-0005b5d0: 2020 2020 2020 6465 6c20 6e6f 6465 2e70        del node.p
-0005b5e0: 726f 6365 7373 2e73 7475 6479 5f63 6f6e  rocess.study_con
-0005b5f0: 6669 672e 7072 6f6a 6563 740a 2020 2020  fig.project.    
-0005b600: 2020 2020 7070 6c5f 6d61 6e61 6765 722e      ppl_manager.
-0005b610: 7570 6461 7465 5f61 7574 6f5f 696e 6865  update_auto_inhe
-0005b620: 7269 7461 6e63 6528 6a6f 622c 206e 6f64  ritance(job, nod
-0005b630: 6529 0a0a 2020 2020 2020 2020 2320 276e  e)..        # 'n
-0005b640: 6f64 6527 2069 7320 6e6f 7420 6120 2750  ode' is not a 'P
-0005b650: 726f 6365 7373 270a 2020 2020 2020 2020  rocess'.        
-0005b660: 6e6f 6465 203d 207b 7d0a 2020 2020 2020  node = {}.      
-0005b670: 2020 7070 6c5f 6d61 6e61 6765 722e 7570    ppl_manager.up
-0005b680: 6461 7465 5f61 7574 6f5f 696e 6865 7269  date_auto_inheri
-0005b690: 7461 6e63 6528 6a6f 622c 206e 6f64 6529  tance(job, node)
-0005b6a0: 0a0a 2020 2020 6465 6620 7465 7374 5f75  ..    def test_u
-0005b6b0: 7064 6174 655f 696e 6865 7269 7461 6e63  pdate_inheritanc
-0005b6c0: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
-0005b6d0: 2022 2222 4164 6473 2061 2070 726f 6365   """Adds a proce
-0005b6e0: 7373 2061 6e64 2075 7064 6174 6573 2074  ss and updates t
-0005b6f0: 6865 206a 6f62 2773 2069 6e68 6572 6974  he job's inherit
-0005b700: 616e 6365 2064 6963 742e 0a0a 2020 2020  ance dict...    
-0005b710: 2020 2020 2d20 5465 7374 733a 2050 6970      - Tests: Pip
-0005b720: 656c 696e 654d 616e 6167 6572 5461 622e  elineManagerTab.
-0005b730: 7570 6461 7465 5f69 6e68 6572 6974 616e  update_inheritan
-0005b740: 6365 0a20 2020 2020 2020 2022 2222 0a0a  ce.        """..
-0005b750: 2020 2020 2020 2020 2320 5365 7473 2073          # Sets s
-0005b760: 686f 7274 6375 7473 2066 6f72 206f 626a  hortcuts for obj
-0005b770: 6563 7473 2074 6861 7420 6172 6520 6f66  ects that are of
-0005b780: 7465 6e20 7573 6564 0a20 2020 2020 2020  ten used.       
-0005b790: 2070 706c 5f6d 616e 6167 6572 203d 2073   ppl_manager = s
-0005b7a0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
-0005b7b0: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
-0005b7c0: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
-0005b7d0: 5f74 6162 7320 3d20 7070 6c5f 6d61 6e61  _tabs = ppl_mana
-0005b7e0: 6765 722e 7069 7065 6c69 6e65 4564 6974  ger.pipelineEdit
-0005b7f0: 6f72 5461 6273 0a20 2020 2020 2020 2070  orTabs.        p
-0005b800: 706c 203d 2070 706c 5f65 6474 5f74 6162  pl = ppl_edt_tab
-0005b810: 732e 6765 745f 6375 7272 656e 745f 7069  s.get_current_pi
-0005b820: 7065 6c69 6e65 2829 0a0a 2020 2020 2020  peline()..      
-0005b830: 2020 2320 4164 6473 2061 2052 656e 616d    # Adds a Renam
-0005b840: 6520 7072 6f63 6573 7365 732c 2063 7265  e processes, cre
-0005b850: 6174 6573 2074 6865 2027 7265 6e61 6d65  ates the 'rename
-0005b860: 5f31 2720 6e6f 6465 0a20 2020 2020 2020  _1' node.       
-0005b870: 2070 706c 5f65 6474 5f74 6162 732e 6765   ppl_edt_tabs.ge
-0005b880: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
-0005b890: 2829 2e63 6c69 636b 5f70 6f73 203d 2051  ().click_pos = Q
-0005b8a0: 506f 696e 7428 3435 302c 2035 3030 290a  Point(450, 500).
-0005b8b0: 2020 2020 2020 2020 7070 6c5f 6564 745f          ppl_edt_
-0005b8c0: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
-0005b8d0: 5f65 6469 746f 7228 292e 6164 645f 6e61  _editor().add_na
-0005b8e0: 6d65 645f 7072 6f63 6573 7328 5265 6e61  med_process(Rena
-0005b8f0: 6d65 290a 0a20 2020 2020 2020 2070 706c  me)..        ppl
-0005b900: 5f65 6474 5f74 6162 732e 6765 745f 6375  _edt_tabs.get_cu
-0005b910: 7272 656e 745f 6564 6974 6f72 2829 2e65  rrent_editor().e
-0005b920: 7870 6f72 745f 756e 636f 6e6e 6563 7465  xport_unconnecte
-0005b930: 645f 6d61 6e64 6174 6f72 795f 696e 7075  d_mandatory_inpu
-0005b940: 7473 2829 0a20 2020 2020 2020 2070 706c  ts().        ppl
-0005b950: 5f65 6474 5f74 6162 732e 6765 745f 6375  _edt_tabs.get_cu
-0005b960: 7272 656e 745f 6564 6974 6f72 2829 2e65  rrent_editor().e
-0005b970: 7870 6f72 745f 616c 6c5f 756e 636f 6e6e  xport_all_unconn
-0005b980: 6563 7465 645f 6f75 7470 7574 7328 290a  ected_outputs().
-0005b990: 0a20 2020 2020 2020 206e 6f64 6520 3d20  .        node = 
-0005b9a0: 7070 6c2e 6e6f 6465 735b 2272 656e 616d  ppl.nodes["renam
-0005b9b0: 655f 3122 5d0a 0a20 2020 2020 2020 2023  e_1"]..        #
-0005b9c0: 2049 6e69 7469 616c 697a 6573 2074 6865   Initializes the
-0005b9d0: 2077 6f72 6b66 6c6f 7720 6d61 6e75 616c   workflow manual
-0005b9e0: 6c79 0a20 2020 2020 2020 2070 706c 5f6d  ly.        ppl_m
-0005b9f0: 616e 6167 6572 2e77 6f72 6b66 6c6f 7720  anager.workflow 
-0005ba00: 3d20 776f 726b 666c 6f77 5f66 726f 6d5f  = workflow_from_
-0005ba10: 7069 7065 6c69 6e65 280a 2020 2020 2020  pipeline(.      
-0005ba20: 2020 2020 2020 7070 6c2c 2063 6f6d 706c        ppl, compl
-0005ba30: 6574 655f 7061 7261 6d65 7465 7273 3d54  ete_parameters=T
-0005ba40: 7275 650a 2020 2020 2020 2020 290a 0a20  rue.        ).. 
-0005ba50: 2020 2020 2020 2023 2047 6574 7320 7468         # Gets th
-0005ba60: 6520 276a 6f62 2720 616e 6420 6d6f 636b  e 'job' and mock
-0005ba70: 7320 6164 6469 6e67 2061 2062 7269 636b  s adding a brick
-0005ba80: 2074 6f20 7468 6520 636f 6c6c 6563 7469   to the collecti
-0005ba90: 6f6e 0a20 2020 2020 2020 206a 6f62 203d  on.        job =
-0005baa0: 2070 706c 5f6d 616e 6167 6572 2e77 6f72   ppl_manager.wor
-0005bab0: 6b66 6c6f 772e 6a6f 6273 5b30 5d0a 0a20  kflow.jobs[0].. 
-0005bac0: 2020 2020 2020 2023 204e 6f64 6527 7320         # Node's 
-0005bad0: 6e61 6d65 2064 6f65 7320 6e6f 7420 636f  name does not co
-0005bae0: 6e74 6169 6e73 2027 5069 7065 6c69 6e65  ntains 'Pipeline
-0005baf0: 270a 2020 2020 2020 2020 6e6f 6465 2e63  '.        node.c
-0005bb00: 6f6e 7465 7874 5f6e 616d 6520 3d20 2222  ontext_name = ""
-0005bb10: 0a20 2020 2020 2020 206e 6f64 652e 7072  .        node.pr
-0005bb20: 6f63 6573 732e 696e 6865 7269 7461 6e63  ocess.inheritanc
-0005bb30: 655f 6469 6374 203d 207b 2269 7465 6d22  e_dict = {"item"
-0005bb40: 3a20 2276 616c 7565 227d 0a20 2020 2020  : "value"}.     
-0005bb50: 2020 2070 706c 5f6d 616e 6167 6572 2e70     ppl_manager.p
-0005bb60: 726f 6a65 6374 2e6e 6f64 655f 696e 6865  roject.node_inhe
-0005bb70: 7269 7461 6e63 655f 6869 7374 6f72 7920  ritance_history 
-0005bb80: 3d20 7b7d 0a20 2020 2020 2020 2070 706c  = {}.        ppl
-0005bb90: 5f6d 616e 6167 6572 2e75 7064 6174 655f  _manager.update_
-0005bba0: 696e 6865 7269 7461 6e63 6528 6a6f 622c  inheritance(job,
-0005bbb0: 206e 6f64 6529 0a0a 2020 2020 2020 2020   node)..        
-0005bbc0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-0005bbd0: 286a 6f62 2e69 6e68 6572 6974 616e 6365  (job.inheritance
-0005bbe0: 5f64 6963 742c 207b 2269 7465 6d22 3a20  _dict, {"item": 
-0005bbf0: 2276 616c 7565 227d 290a 0a20 2020 2020  "value"})..     
-0005bc00: 2020 2023 204e 6f64 6527 7320 6e61 6d65     # Node's name
-0005bc10: 2063 6f6e 7461 696e 7320 2750 6970 656c   contains 'Pipel
-0005bc20: 696e 6527 0a20 2020 2020 2020 206e 6f64  ine'.        nod
-0005bc30: 652e 636f 6e74 6578 745f 6e61 6d65 203d  e.context_name =
-0005bc40: 2022 5069 7065 6c69 6e65 2e72 656e 616d   "Pipeline.renam
-0005bc50: 655f 3122 0a20 2020 2020 2020 2070 706c  e_1".        ppl
-0005bc60: 5f6d 616e 6167 6572 2e75 7064 6174 655f  _manager.update_
-0005bc70: 696e 6865 7269 7461 6e63 6528 6a6f 622c  inheritance(job,
-0005bc80: 206e 6f64 6529 0a0a 2020 2020 2020 2020   node)..        
-0005bc90: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-0005bca0: 286a 6f62 2e69 6e68 6572 6974 616e 6365  (job.inheritance
-0005bcb0: 5f64 6963 742c 207b 2269 7465 6d22 3a20  _dict, {"item": 
-0005bcc0: 2276 616c 7565 227d 290a 0a20 2020 2020  "value"})..     
-0005bcd0: 2020 2023 204e 6f64 6527 7320 6e61 6d65     # Node's name
-0005bce0: 2069 6e20 276e 6f64 655f 696e 6865 7269   in 'node_inheri
-0005bcf0: 7461 6e63 655f 6869 7374 6f72 7927 0a20  tance_history'. 
-0005bd00: 2020 2020 2020 2028 7070 6c5f 6d61 6e61         (ppl_mana
-0005bd10: 6765 722e 7072 6f6a 6563 742e 6e6f 6465  ger.project.node
-0005bd20: 5f69 6e68 6572 6974 616e 6365 5f68 6973  _inheritance_his
-0005bd30: 746f 7279 5b22 7265 6e61 6d65 5f31 225d  tory["rename_1"]
-0005bd40: 2920 3d20 5b0a 2020 2020 2020 2020 2020  ) = [.          
-0005bd50: 2020 7b30 3a20 226e 6577 5f76 616c 7565    {0: "new_value
-0005bd60: 227d 0a20 2020 2020 2020 205d 0a20 2020  "}.        ].   
-0005bd70: 2020 2020 2070 706c 5f6d 616e 6167 6572       ppl_manager
-0005bd80: 2e75 7064 6174 655f 696e 6865 7269 7461  .update_inherita
-0005bd90: 6e63 6528 6a6f 622c 206e 6f64 6529 0a0a  nce(job, node)..
-0005bda0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0005bdb0: 6572 7445 7175 616c 286a 6f62 2e69 6e68  ertEqual(job.inh
-0005bdc0: 6572 6974 616e 6365 5f64 6963 742c 207b  eritance_dict, {
-0005bdd0: 303a 2022 6e65 775f 7661 6c75 6522 7d29  0: "new_value"})
-0005bde0: 0a0a 2020 2020 6465 6620 7465 7374 5f75  ..    def test_u
-0005bdf0: 7064 6174 655f 6e6f 6465 5f6c 6973 7428  pdate_node_list(
-0005be00: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
-0005be10: 2222 4164 6473 2061 2070 726f 6365 7373  ""Adds a process
-0005be20: 2c20 6578 706f 7274 7320 696e 7075 7420  , exports input 
-0005be30: 616e 6420 6f75 7470 7574 2070 6c75 6773  and output plugs
-0005be40: 2c20 696e 6974 6961 6c69 7a65 7320 610a  , initializes a.
-0005be50: 2020 2020 2020 2020 776f 726b 666c 6f77          workflow
-0005be60: 2061 6e64 2061 6464 7320 7468 6520 7072   and adds the pr
-0005be70: 6f63 6573 7320 746f 2074 6865 2022 7069  ocess to the "pi
-0005be80: 706c 696e 655f 6d61 6e61 6765 722e 6e6f  pline_manager.no
-0005be90: 6465 5f6c 6973 7422 2e0a 0a20 2020 2020  de_list"...     
-0005bea0: 2020 202d 2054 6573 7473 3a20 5069 7065     - Tests: Pipe
-0005beb0: 6c69 6e65 4d61 6e61 6765 7254 6162 2e75  lineManagerTab.u
-0005bec0: 7064 6174 655f 6e6f 6465 5f6c 6973 740a  pdate_node_list.
-0005bed0: 2020 2020 2020 2020 2222 220a 0a20 2020          """..   
-0005bee0: 2020 2020 2023 2053 6574 2073 686f 7274       # Set short
-0005bef0: 6375 7473 2066 6f72 206f 6674 656e 2075  cuts for often u
-0005bf00: 7365 6420 6f62 6a65 6374 730a 2020 2020  sed objects.    
-0005bf10: 2020 2020 7070 6c5f 6d61 6e61 6765 7220      ppl_manager 
-0005bf20: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
-0005bf30: 6f77 2e70 6970 656c 696e 655f 6d61 6e61  ow.pipeline_mana
-0005bf40: 6765 720a 2020 2020 2020 2020 7070 6c5f  ger.        ppl_
-0005bf50: 6564 745f 7461 6273 203d 2070 706c 5f6d  edt_tabs = ppl_m
-0005bf60: 616e 6167 6572 2e70 6970 656c 696e 6545  anager.pipelineE
-0005bf70: 6469 746f 7254 6162 730a 0a20 2020 2020  ditorTabs..     
-0005bf80: 2020 2070 726f 6365 7373 5f63 6c61 7373     process_class
-0005bf90: 203d 2052 656e 616d 650a 2020 2020 2020   = Rename.      
-0005bfa0: 2020 7070 6c5f 6564 745f 7461 6273 2e67    ppl_edt_tabs.g
-0005bfb0: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
-0005bfc0: 7228 292e 636c 6963 6b5f 706f 7320 3d20  r().click_pos = 
-0005bfd0: 5150 6f69 6e74 2834 3530 2c20 3530 3029  QPoint(450, 500)
-0005bfe0: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
-0005bff0: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
-0005c000: 745f 6564 6974 6f72 2829 2e61 6464 5f6e  t_editor().add_n
-0005c010: 616d 6564 5f70 726f 6365 7373 2870 726f  amed_process(pro
-0005c020: 6365 7373 5f63 6c61 7373 290a 2020 2020  cess_class).    
-0005c030: 2020 2020 7069 7065 6c69 6e65 203d 2070      pipeline = p
-0005c040: 706c 5f65 6474 5f74 6162 732e 6765 745f  pl_edt_tabs.get_
-0005c050: 6375 7272 656e 745f 7069 7065 6c69 6e65  current_pipeline
-0005c060: 2829 0a0a 2020 2020 2020 2020 2320 4578  ()..        # Ex
-0005c070: 706f 7274 7320 7468 6520 6d61 6e64 6174  ports the mandat
-0005c080: 6f72 7920 696e 7075 7473 2061 6e64 206f  ory inputs and o
-0005c090: 7574 7075 7473 2066 6f72 2022 7265 6e61  utputs for "rena
-0005c0a0: 6d65 5f31 220a 2020 2020 2020 2020 7070  me_1".        pp
-0005c0b0: 6c5f 6564 745f 7461 6273 2e67 6574 5f63  l_edt_tabs.get_c
-0005c0c0: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
-0005c0d0: 6375 7272 656e 745f 6e6f 6465 5f6e 616d  current_node_nam
-0005c0e0: 6520 3d20 2272 656e 616d 655f 3122 0a20  e = "rename_1". 
-0005c0f0: 2020 2020 2020 2070 706c 5f65 6474 5f74         ppl_edt_t
-0005c100: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
-0005c110: 6564 6974 6f72 2829 2e65 7870 6f72 745f  editor().export_
-0005c120: 756e 636f 6e6e 6563 7465 645f 6d61 6e64  unconnected_mand
-0005c130: 6174 6f72 795f 696e 7075 7473 2829 0a20  atory_inputs(). 
-0005c140: 2020 2020 2020 2070 706c 5f65 6474 5f74         ppl_edt_t
-0005c150: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
-0005c160: 6564 6974 6f72 2829 2e65 7870 6f72 745f  editor().export_
-0005c170: 616c 6c5f 756e 636f 6e6e 6563 7465 645f  all_unconnected_
-0005c180: 6f75 7470 7574 7328 290a 0a20 2020 2020  outputs()..     
-0005c190: 2020 2023 2049 6e69 7469 616c 697a 6573     # Initializes
-0005c1a0: 2074 6865 2077 6f72 6b66 6c6f 770a 2020   the workflow.  
-0005c1b0: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
-0005c1c0: 722e 776f 726b 666c 6f77 203d 2077 6f72  r.workflow = wor
-0005c1d0: 6b66 6c6f 775f 6672 6f6d 5f70 6970 656c  kflow_from_pipel
-0005c1e0: 696e 6528 0a20 2020 2020 2020 2020 2020  ine(.           
-0005c1f0: 2070 6970 656c 696e 652c 2063 6f6d 706c   pipeline, compl
-0005c200: 6574 655f 7061 7261 6d65 7465 7273 3d54  ete_parameters=T
-0005c210: 7275 650a 2020 2020 2020 2020 290a 0a20  rue.        ).. 
-0005c220: 2020 2020 2020 2023 2041 7373 6572 7473         # Asserts
-0005c230: 2074 6861 7420 7468 6520 226e 6f64 655f   that the "node_
-0005c240: 6c69 7374 2220 6973 2065 6d70 7479 2062  list" is empty b
-0005c250: 7920 6465 6661 756c 740a 2020 2020 2020  y default.      
-0005c260: 2020 6e6f 6465 5f6c 6973 7420 3d20 7365    node_list = se
-0005c270: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
-0005c280: 6970 656c 696e 655f 6d61 6e61 6765 722e  ipeline_manager.
-0005c290: 6e6f 6465 5f6c 6973 740a 2020 2020 2020  node_list.      
-0005c2a0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0005c2b0: 616c 286c 656e 286e 6f64 655f 6c69 7374  al(len(node_list
-0005c2c0: 292c 2030 290a 0a20 2020 2020 2020 2023  ), 0)..        #
-0005c2d0: 2041 7373 6572 7473 2074 6861 7420 7468   Asserts that th
-0005c2e0: 6520 7072 6f63 6573 7320 2252 656e 616d  e process "Renam
-0005c2f0: 6522 2077 6173 2061 6464 6564 2074 6f20  e" was added to 
-0005c300: 226e 6f64 655f 6c69 7374 220a 2020 2020  "node_list".    
-0005c310: 2020 2020 7070 6c5f 6d61 6e61 6765 722e      ppl_manager.
-0005c320: 7570 6461 7465 5f6e 6f64 655f 6c69 7374  update_node_list
-0005c330: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
-0005c340: 6173 7365 7274 4571 7561 6c28 6c65 6e28  assertEqual(len(
-0005c350: 6e6f 6465 5f6c 6973 7429 2c20 3129 0a20  node_list), 1). 
-0005c360: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0005c370: 7274 4571 7561 6c28 6e6f 6465 5f6c 6973  rtEqual(node_lis
-0005c380: 745b 305d 2e5f 6e69 7079 7065 5f63 6c61  t[0]._nipype_cla
-0005c390: 7373 2c20 2252 656e 616d 6522 290a 0a20  ss, "Rename").. 
-0005c3a0: 2020 2064 6566 2074 6573 745f 7a5f 696e     def test_z_in
-0005c3b0: 6974 5f70 6970 656c 696e 6528 7365 6c66  it_pipeline(self
-0005c3c0: 293a 0a20 2020 2020 2020 2022 2222 4164  ):.        """Ad
-0005c3d0: 6473 2061 2070 726f 6365 7373 2c20 6d6f  ds a process, mo
-0005c3e0: 636b 7320 7365 7665 7261 6c20 7061 7261  cks several para
-0005c3f0: 6d65 7465 7273 2066 726f 6d20 7468 6520  meters from the 
-0005c400: 7069 7065 6c69 6e65 0a20 2020 2020 2020  pipeline.       
-0005c410: 206d 616e 6167 6572 2061 6e64 2069 6e69   manager and ini
-0005c420: 7469 616c 697a 6573 2074 6865 2070 6970  tializes the pip
-0005c430: 656c 696e 652e 0a0a 2020 2020 2020 2020  eline...        
-0005c440: 2d20 5465 7374 733a 2050 6970 656c 696e  - Tests: Pipelin
-0005c450: 654d 616e 6167 6572 5461 622e 696e 6974  eManagerTab.init
-0005c460: 5f70 6970 656c 696e 650a 2020 2020 2020  _pipeline.      
-0005c470: 2020 2222 220a 0a20 2020 2020 2020 2023    """..        #
-0005c480: 2053 6574 7320 7368 6f72 7463 7574 7320   Sets shortcuts 
-0005c490: 666f 7220 6f62 6a65 6374 7320 7468 6174  for objects that
-0005c4a0: 2061 7265 206f 6674 656e 2075 7365 640a   are often used.
-0005c4b0: 2020 2020 2020 2020 7070 6c5f 6d61 6e61          ppl_mana
-0005c4c0: 6765 7220 3d20 7365 6c66 2e6d 6169 6e5f  ger = self.main_
-0005c4d0: 7769 6e64 6f77 2e70 6970 656c 696e 655f  window.pipeline_
-0005c4e0: 6d61 6e61 6765 720a 2020 2020 2020 2020  manager.        
-0005c4f0: 7070 6c5f 6564 745f 7461 6273 203d 2070  ppl_edt_tabs = p
-0005c500: 706c 5f6d 616e 6167 6572 2e70 6970 656c  pl_manager.pipel
-0005c510: 696e 6545 6469 746f 7254 6162 730a 2020  ineEditorTabs.  
-0005c520: 2020 2020 2020 7070 6c20 3d20 7070 6c5f        ppl = ppl_
-0005c530: 6564 745f 7461 6273 2e67 6574 5f63 7572  edt_tabs.get_cur
-0005c540: 7265 6e74 5f70 6970 656c 696e 6528 290a  rent_pipeline().
-0005c550: 0a20 2020 2020 2020 2023 2047 6574 7320  .        # Gets 
-0005c560: 7468 6520 7061 7468 206f 6620 6f6e 6520  the path of one 
-0005c570: 646f 6375 6d65 6e74 0a20 2020 2020 2020  document.       
-0005c580: 2063 6f6e 6669 6720 3d20 436f 6e66 6967   config = Config
-0005c590: 2863 6f6e 6669 675f 7061 7468 3d73 656c  (config_path=sel
-0005c5a0: 662e 636f 6e66 6967 5f70 6174 6829 0a20  f.config_path). 
-0005c5b0: 2020 2020 2020 2066 6f6c 6465 7220 3d20         folder = 
-0005c5c0: 6f73 2e70 6174 682e 6162 7370 6174 6828  os.path.abspath(
-0005c5d0: 0a20 2020 2020 2020 2020 2020 206f 732e  .            os.
-0005c5e0: 7061 7468 2e6a 6f69 6e28 0a20 2020 2020  path.join(.     
-0005c5f0: 2020 2020 2020 2020 2020 2063 6f6e 6669             confi
-0005c600: 672e 6765 745f 6d69 615f 7061 7468 2829  g.get_mia_path()
-0005c610: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0005c620: 2020 226d 6961 7574 6461 7461 222c 0a20    "miautdata",. 
-0005c630: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0005c640: 7265 736f 7572 6365 7322 2c0a 2020 2020  resources",.    
-0005c650: 2020 2020 2020 2020 2020 2020 226d 6961              "mia
-0005c660: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
-0005c670: 2020 2022 7072 6f6a 6563 745f 3822 2c0a     "project_8",.
-0005c680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0005c690: 2264 6174 6122 2c0a 2020 2020 2020 2020  "data",.        
-0005c6a0: 2020 2020 2020 2020 2272 6177 5f64 6174          "raw_dat
-0005c6b0: 6122 2c0a 2020 2020 2020 2020 2020 2020  a",.            
-0005c6c0: 290a 2020 2020 2020 2020 290a 0a20 2020  ).        )..   
-0005c6d0: 2020 2020 204e 4949 5f46 494c 455f 3120       NII_FILE_1 
-0005c6e0: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
-0005c6f0: 2247 7565 7262 6574 2d43 362d 3230 3134  "Guerbet-C6-2014
-0005c700: 2d52 6174 2d4b 3532 2d54 7562 6532 372d  -Rat-K52-Tube27-
-0005c710: 3230 3134 2d30 322d 3134 3130 3233 3137  2014-02-14102317
-0005c720: 2d30 312d 4731 5f22 0a20 2020 2020 2020  -01-G1_".       
-0005c730: 2020 2020 2022 4775 6572 6265 745f 416e       "Guerbet_An
-0005c740: 6174 2d52 4152 4570 766d 2d30 3030 3232  at-RAREpvm-00022
-0005c750: 305f 3030 302e 6e69 6922 0a20 2020 2020  0_000.nii".     
-0005c760: 2020 2029 0a0a 2020 2020 2020 2020 444f     )..        DO
-0005c770: 4355 4d45 4e54 5f31 203d 206f 732e 7061  CUMENT_1 = os.pa
-0005c780: 7468 2e61 6273 7061 7468 286f 732e 7061  th.abspath(os.pa
-0005c790: 7468 2e6a 6f69 6e28 666f 6c64 6572 2c20  th.join(folder, 
-0005c7a0: 4e49 495f 4649 4c45 5f31 2929 0a0a 2020  NII_FILE_1))..  
-0005c7b0: 2020 2020 2020 2320 4164 6473 2061 2052        # Adds a R
-0005c7c0: 656e 616d 6520 7072 6f63 6573 7365 732c  ename processes,
-0005c7d0: 2063 7265 6174 6573 2074 6865 2027 7265   creates the 're
-0005c7e0: 6e61 6d65 5f31 2720 6e6f 6465 0a20 2020  name_1' node.   
-0005c7f0: 2020 2020 2070 706c 5f65 6474 5f74 6162       ppl_edt_tab
-0005c800: 732e 6765 745f 6375 7272 656e 745f 6564  s.get_current_ed
-0005c810: 6974 6f72 2829 2e63 6c69 636b 5f70 6f73  itor().click_pos
-0005c820: 203d 2051 506f 696e 7428 3435 302c 2035   = QPoint(450, 5
-0005c830: 3030 290a 2020 2020 2020 2020 7070 6c5f  00).        ppl_
-0005c840: 6564 745f 7461 6273 2e67 6574 5f63 7572  edt_tabs.get_cur
-0005c850: 7265 6e74 5f65 6469 746f 7228 292e 6164  rent_editor().ad
-0005c860: 645f 6e61 6d65 645f 7072 6f63 6573 7328  d_named_process(
-0005c870: 5265 6e61 6d65 290a 0a20 2020 2020 2020  Rename)..       
-0005c880: 2070 706c 5f65 6474 5f74 6162 732e 6765   ppl_edt_tabs.ge
-0005c890: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
-0005c8a0: 2829 2e65 7870 6f72 745f 756e 636f 6e6e  ().export_unconn
-0005c8b0: 6563 7465 645f 6d61 6e64 6174 6f72 795f  ected_mandatory_
-0005c8c0: 696e 7075 7473 2829 0a20 2020 2020 2020  inputs().       
-0005c8d0: 2070 706c 5f65 6474 5f74 6162 732e 6765   ppl_edt_tabs.ge
-0005c8e0: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
-0005c8f0: 2829 2e65 7870 6f72 745f 616c 6c5f 756e  ().export_all_un
-0005c900: 636f 6e6e 6563 7465 645f 6f75 7470 7574  connected_output
-0005c910: 7328 290a 0a20 2020 2020 2020 2023 2056  s()..        # V
-0005c920: 6572 6966 6965 7320 7468 6174 2061 6c6c  erifies that all
-0005c930: 2074 6865 2070 726f 6365 7373 6573 2077   the processes w
-0005c940: 6572 6520 6164 6465 640a 2020 2020 2020  ere added.      
-0005c950: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0005c960: 616c 285b 2222 2c20 2272 656e 616d 655f  al(["", "rename_
-0005c970: 3122 5d2c 2070 706c 2e6e 6f64 6573 2e6b  1"], ppl.nodes.k
-0005c980: 6579 7328 2929 0a0a 2020 2020 2020 2020  eys())..        
-0005c990: 2320 496e 6974 6961 6c69 7a65 2074 6865  # Initialize the
-0005c9a0: 2070 6970 656c 696e 6520 7769 7468 206d   pipeline with m
-0005c9b0: 6973 7369 6e67 206d 616e 6461 746f 7279  issing mandatory
-0005c9c0: 2070 6172 616d 6574 6572 730a 2020 2020   parameters.    
-0005c9d0: 2020 2020 7070 6c5f 6d61 6e61 6765 722e      ppl_manager.
-0005c9e0: 776f 726b 666c 6f77 203d 2077 6f72 6b66  workflow = workf
-0005c9f0: 6c6f 775f 6672 6f6d 5f70 6970 656c 696e  low_from_pipelin
-0005ca00: 6528 0a20 2020 2020 2020 2020 2020 2070  e(.            p
-0005ca10: 706c 2c20 636f 6d70 6c65 7465 5f70 6172  pl, complete_par
-0005ca20: 616d 6574 6572 733d 5472 7565 0a20 2020  ameters=True.   
-0005ca30: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-0005ca40: 2320 4d6f 636b 7320 6578 6563 7574 696e  # Mocks executin
-0005ca50: 6720 6120 6469 616c 6f67 2062 6f78 2c20  g a dialog box, 
-0005ca60: 696e 7374 6561 6420 7368 6f77 7320 6974  instead shows it
-0005ca70: 0a20 2020 2020 2020 2051 4d65 7373 6167  .        QMessag
-0005ca80: 6542 6f78 2e65 7865 6320 3d20 6c61 6d62  eBox.exec = lamb
-0005ca90: 6461 2073 656c 665f 2c20 2a61 7267 733a  da self_, *args:
-0005caa0: 2073 656c 665f 2e73 686f 7728 290a 0a20   self_.show().. 
-0005cab0: 2020 2020 2020 2070 706c 5f6d 616e 6167         ppl_manag
-0005cac0: 6572 2e75 7064 6174 655f 6e6f 6465 5f6c  er.update_node_l
-0005cad0: 6973 7428 290a 2020 2020 2020 2020 696e  ist().        in
-0005cae0: 6974 5f72 6573 756c 7420 3d20 7070 6c5f  it_result = ppl_
-0005caf0: 6d61 6e61 6765 722e 696e 6974 5f70 6970  manager.init_pip
-0005cb00: 656c 696e 6528 290a 2020 2020 2020 2020  eline().        
-0005cb10: 7070 6c5f 6d61 6e61 6765 722e 6d73 672e  ppl_manager.msg.
-0005cb20: 6163 6365 7074 2829 0a20 2020 2020 2020  accept().       
-0005cb30: 2073 656c 662e 6173 7365 7274 4661 6c73   self.assertFals
-0005cb40: 6528 696e 6974 5f72 6573 756c 7429 0a0a  e(init_result)..
-0005cb50: 2020 2020 2020 2020 2320 5365 7473 2074          # Sets t
-0005cb60: 6865 206d 616e 6461 746f 7279 2070 6172  he mandatory par
-0005cb70: 616d 6574 6572 730a 2020 2020 2020 2020  ameters.        
-0005cb80: 7070 6c2e 6e6f 6465 735b 2222 5d2e 7365  ppl.nodes[""].se
-0005cb90: 745f 706c 7567 5f76 616c 7565 2822 696e  t_plug_value("in
-0005cba0: 5f66 696c 6522 2c20 444f 4355 4d45 4e54  _file", DOCUMENT
-0005cbb0: 5f31 290a 2020 2020 2020 2020 7070 6c2e  _1).        ppl.
-0005cbc0: 6e6f 6465 735b 2222 5d2e 7365 745f 706c  nodes[""].set_pl
-0005cbd0: 7567 5f76 616c 7565 2822 666f 726d 6174  ug_value("format
-0005cbe0: 5f73 7472 696e 6722 2c20 226e 6577 5f6e  _string", "new_n
-0005cbf0: 616d 652e 6e69 6922 290a 0a20 2020 2020  ame.nii")..     
-0005cc00: 2020 2023 204d 6f63 6b73 2061 6e20 6974     # Mocks an it
-0005cc10: 6572 6174 696f 6e20 7069 7065 6c69 6e65  eration pipeline
-0005cc20: 0a20 2020 2020 2020 2070 706c 2e6e 616d  .        ppl.nam
-0005cc30: 6520 3d20 2249 7465 7261 7469 6f6e 5f70  e = "Iteration_p
-0005cc40: 6970 656c 696e 6522 0a20 2020 2020 2020  ipeline".       
-0005cc50: 2070 726f 6365 7373 5f69 7420 3d20 5072   process_it = Pr
-0005cc60: 6f63 6573 7349 7465 7261 7469 6f6e 2870  ocessIteration(p
-0005cc70: 706c 2e6e 6f64 6573 5b22 7265 6e61 6d65  pl.nodes["rename
-0005cc80: 5f31 225d 2e70 726f 6365 7373 2c20 2222  _1"].process, ""
-0005cc90: 290a 2020 2020 2020 2020 7070 6c2e 6c69  ).        ppl.li
-0005cca0: 7374 5f70 726f 6365 7373 5f69 6e5f 7069  st_process_in_pi
-0005ccb0: 7065 6c69 6e65 2e61 7070 656e 6428 7072  peline.append(pr
-0005ccc0: 6f63 6573 735f 6974 290a 0a20 2020 2020  ocess_it)..     
-0005ccd0: 2020 2023 2049 6e69 7469 616c 697a 6520     # Initialize 
-0005cce0: 7468 6520 7069 7065 6c69 6e65 2077 6974  the pipeline wit
-0005ccf0: 6820 6d61 6e64 6174 6f72 7920 7061 7261  h mandatory para
-0005cd00: 6d65 7465 7273 2073 6574 0a20 2020 2020  meters set.     
-0005cd10: 2020 2023 2051 5469 6d65 722e 7369 6e67     # QTimer.sing
-0005cd20: 6c65 5368 6f74 2831 3030 302c 2073 656c  leShot(1000, sel
-0005cd30: 662e 6578 6563 7574 655f 5144 6961 6c6f  f.execute_QDialo
-0005cd40: 6741 6363 6570 7429 0a20 2020 2020 2020  gAccept).       
-0005cd50: 2023 2069 6e69 745f 7265 7375 6c74 203d   # init_result =
-0005cd60: 2070 706c 5f6d 616e 6167 6572 2e69 6e69   ppl_manager.ini
-0005cd70: 745f 7069 7065 6c69 6e65 2870 6970 656c  t_pipeline(pipel
-0005cd80: 696e 653d 7070 6c29 0a20 2020 2020 2020  ine=ppl).       
-0005cd90: 2023 2070 706c 5f6d 616e 6167 6572 2e6d   # ppl_manager.m
-0005cda0: 7367 2e61 6363 6570 7428 290a 0a20 2020  sg.accept()..   
-0005cdb0: 2020 2020 2023 204d 6f63 6b73 206e 756c       # Mocks nul
-0005cdc0: 6c20 7265 7175 6972 656d 656e 7473 2061  l requirements a
-0005cdd0: 6e64 2069 6e69 7469 616c 697a 6573 2074  nd initializes t
-0005cde0: 6865 2070 6970 656c 696e 650a 2020 2020  he pipeline.    
-0005cdf0: 2020 2020 7070 6c5f 6d61 6e61 6765 722e      ppl_manager.
-0005ce00: 6368 6563 6b5f 7265 7175 6972 656d 656e  check_requiremen
-0005ce10: 7473 203d 204d 6f63 6b28 7265 7475 726e  ts = Mock(return
-0005ce20: 5f76 616c 7565 3d4e 6f6e 6529 0a20 2020  _value=None).   
-0005ce30: 2020 2020 2069 6e69 745f 7265 7375 6c74       init_result
-0005ce40: 203d 2070 706c 5f6d 616e 6167 6572 2e69   = ppl_manager.i
-0005ce50: 6e69 745f 7069 7065 6c69 6e65 2829 0a20  nit_pipeline(). 
-0005ce60: 2020 2020 2020 2070 706c 5f6d 616e 6167         ppl_manag
-0005ce70: 6572 2e6d 7367 2e61 6363 6570 7428 290a  er.msg.accept().
-0005ce80: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0005ce90: 6572 7446 616c 7365 2869 6e69 745f 7265  ertFalse(init_re
-0005cea0: 7375 6c74 290a 2020 2020 2020 2020 7070  sult).        pp
-0005ceb0: 6c5f 6d61 6e61 6765 722e 6368 6563 6b5f  l_manager.check_
-0005cec0: 7265 7175 6972 656d 656e 7473 2e61 7373  requirements.ass
-0005ced0: 6572 745f 6361 6c6c 6564 5f6f 6e63 655f  ert_called_once_
-0005cee0: 7769 7468 280a 2020 2020 2020 2020 2020  with(.          
-0005cef0: 2020 2267 6c6f 6261 6c22 2c20 6d65 7373    "global", mess
-0005cf00: 6167 655f 6c69 7374 3d5b 5d0a 2020 2020  age_list=[].    
-0005cf10: 2020 2020 290a 0a20 2020 2020 2020 2023      )..        #
-0005cf20: 204d 6f63 6b73 2065 7874 6572 6e61 6c20   Mocks external 
-0005cf30: 7061 636b 6167 6573 2061 7320 7265 7175  packages as requ
-0005cf40: 6972 656d 656e 7473 2061 6e64 2069 6e69  irements and ini
-0005cf50: 7469 616c 697a 6573 2074 6865 2070 6970  tializes the pip
-0005cf60: 656c 696e 650a 2020 2020 2020 2020 706b  eline.        pk
-0005cf70: 6773 203d 205b 2266 736c 222c 2022 6166  gs = ["fsl", "af
-0005cf80: 6e69 222c 2022 616e 7473 222c 2022 6d61  ni", "ants", "ma
-0005cf90: 746c 6162 222c 2022 7370 6d22 5d0a 2020  tlab", "spm"].  
-0005cfa0: 2020 2020 2020 7265 7120 3d20 7b22 6361        req = {"ca
-0005cfb0: 7073 756c 5f65 6e67 696e 6522 3a20 7b22  psul_engine": {"
-0005cfc0: 7573 6573 223a 204d 6f63 6b28 297d 7d0a  uses": Mock()}}.
-0005cfd0: 0a20 2020 2020 2020 2066 6f72 2070 6b67  .        for pkg
-0005cfe0: 2069 6e20 706b 6773 3a0a 2020 2020 2020   in pkgs:.      
-0005cff0: 2020 2020 2020 7265 715b 2263 6170 7375        req["capsu
-0005d000: 6c2e 656e 6769 6e65 2e6d 6f64 756c 652e  l.engine.module.
-0005d010: 7b7d 222e 666f 726d 6174 2870 6b67 295d  {}".format(pkg)]
-0005d020: 203d 207b 2264 6972 6563 746f 7279 223a   = {"directory":
-0005d030: 2046 616c 7365 7d0a 0a20 2020 2020 2020   False}..       
-0005d040: 2072 6571 5b22 6361 7073 756c 5f65 6e67   req["capsul_eng
-0005d050: 696e 6522 5d5b 2275 7365 7322 5d2e 6765  ine"]["uses"].ge
-0005d060: 7420 3d20 4d6f 636b 2872 6574 7572 6e5f  t = Mock(return_
-0005d070: 7661 6c75 653d 3129 0a20 2020 2020 2020  value=1).       
-0005d080: 2070 706c 5f6d 616e 6167 6572 2e63 6865   ppl_manager.che
-0005d090: 636b 5f72 6571 7569 7265 6d65 6e74 7320  ck_requirements 
-0005d0a0: 3d20 4d6f 636b 2872 6574 7572 6e5f 7661  = Mock(return_va
-0005d0b0: 6c75 653d 7265 7129 0a0a 2020 2020 2020  lue=req)..      
-0005d0c0: 2020 2320 5154 696d 6572 2e73 696e 676c    # QTimer.singl
-0005d0d0: 6553 686f 7428 3130 3030 2c20 7365 6c66  eShot(1000, self
-0005d0e0: 2e65 7865 6375 7465 5f51 4469 616c 6f67  .execute_QDialog
-0005d0f0: 4163 6365 7074 290a 2020 2020 2020 2020  Accept).        
-0005d100: 696e 6974 5f72 6573 756c 7420 3d20 7070  init_result = pp
-0005d110: 6c5f 6d61 6e61 6765 722e 696e 6974 5f70  l_manager.init_p
-0005d120: 6970 656c 696e 6528 290a 2020 2020 2020  ipeline().      
-0005d130: 2020 7070 6c5f 6d61 6e61 6765 722e 6d73    ppl_manager.ms
-0005d140: 672e 6163 6365 7074 2829 0a20 2020 2020  g.accept().     
-0005d150: 2020 2073 656c 662e 6173 7365 7274 4661     self.assertFa
-0005d160: 6c73 6528 696e 6974 5f72 6573 756c 7429  lse(init_result)
-0005d170: 0a0a 2020 2020 2020 2020 2320 4578 7472  ..        # Extr
-0005d180: 6120 7374 6570 7320 666f 7220 5350 4d0a  a steps for SPM.
-0005d190: 2020 2020 2020 2020 7265 715b 2263 6170          req["cap
-0005d1a0: 7375 6c2e 656e 6769 6e65 2e6d 6f64 756c  sul.engine.modul
-0005d1b0: 652e 7370 6d22 5d5b 2264 6972 6563 746f  e.spm"]["directo
-0005d1c0: 7279 225d 203d 2054 7275 650a 2020 2020  ry"] = True.    
-0005d1d0: 2020 2020 7265 715b 2263 6170 7375 6c2e      req["capsul.
-0005d1e0: 656e 6769 6e65 2e6d 6f64 756c 652e 7370  engine.module.sp
-0005d1f0: 6d22 5d5b 2273 7461 6e64 616c 6f6e 6522  m"]["standalone"
-0005d200: 5d20 3d20 5472 7565 0a20 2020 2020 2020  ] = True.       
-0005d210: 2043 6f6e 6669 6728 292e 7365 745f 6d61   Config().set_ma
-0005d220: 746c 6162 5f73 7461 6e64 616c 6f6e 655f  tlab_standalone_
-0005d230: 7061 7468 284e 6f6e 6529 0a0a 2020 2020  path(None)..    
-0005d240: 2020 2020 2320 5154 696d 6572 2e73 696e      # QTimer.sin
-0005d250: 676c 6553 686f 7428 3130 3030 2c20 7365  gleShot(1000, se
-0005d260: 6c66 2e65 7865 6375 7465 5f51 4469 616c  lf.execute_QDial
-0005d270: 6f67 4163 6365 7074 290a 2020 2020 2020  ogAccept).      
-0005d280: 2020 696e 6974 5f72 6573 756c 7420 3d20    init_result = 
-0005d290: 7070 6c5f 6d61 6e61 6765 722e 696e 6974  ppl_manager.init
-0005d2a0: 5f70 6970 656c 696e 6528 290a 2020 2020  _pipeline().    
-0005d2b0: 2020 2020 7070 6c5f 6d61 6e61 6765 722e      ppl_manager.
-0005d2c0: 6d73 672e 6163 6365 7074 2829 0a20 2020  msg.accept().   
-0005d2d0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0005d2e0: 4661 6c73 6528 696e 6974 5f72 6573 756c  False(init_resul
-0005d2f0: 7429 0a0a 2020 2020 2020 2020 7265 715b  t)..        req[
-0005d300: 2263 6170 7375 6c2e 656e 6769 6e65 2e6d  "capsul.engine.m
-0005d310: 6f64 756c 652e 7370 6d22 5d5b 2273 7461  odule.spm"]["sta
-0005d320: 6e64 616c 6f6e 6522 5d20 3d20 4661 6c73  ndalone"] = Fals
-0005d330: 650a 0a20 2020 2020 2020 2023 2051 5469  e..        # QTi
-0005d340: 6d65 722e 7369 6e67 6c65 5368 6f74 2831  mer.singleShot(1
-0005d350: 3030 302c 2073 656c 662e 6578 6563 7574  000, self.execut
-0005d360: 655f 5144 6961 6c6f 6741 6363 6570 7429  e_QDialogAccept)
-0005d370: 0a20 2020 2020 2020 2069 6e69 745f 7265  .        init_re
-0005d380: 7375 6c74 203d 2070 706c 5f6d 616e 6167  sult = ppl_manag
-0005d390: 6572 2e69 6e69 745f 7069 7065 6c69 6e65  er.init_pipeline
-0005d3a0: 2829 0a20 2020 2020 2020 2070 706c 5f6d  ().        ppl_m
-0005d3b0: 616e 6167 6572 2e6d 7367 2e61 6363 6570  anager.msg.accep
-0005d3c0: 7428 290a 2020 2020 2020 2020 7365 6c66  t().        self
-0005d3d0: 2e61 7373 6572 7446 616c 7365 2869 6e69  .assertFalse(ini
-0005d3e0: 745f 7265 7375 6c74 290a 0a20 2020 2020  t_result)..     
-0005d3f0: 2020 2023 2044 656c 6574 6573 2061 6e20     # Deletes an 
-0005d400: 6174 7472 6962 7574 6520 6f66 2065 6163  attribute of eac
-0005d410: 6820 7061 636b 6167 6520 7265 7175 6972  h package requir
-0005d420: 656d 656e 740a 2020 2020 2020 2020 666f  ement.        fo
-0005d430: 7220 706b 6720 696e 2070 6b67 733a 0a20  r pkg in pkgs:. 
-0005d440: 2020 2020 2020 2020 2020 2064 656c 2072             del r
-0005d450: 6571 5b22 6361 7073 756c 2e65 6e67 696e  eq["capsul.engin
-0005d460: 652e 6d6f 6475 6c65 2e7b 7d22 2e66 6f72  e.module.{}".for
-0005d470: 6d61 7428 706b 6729 5d0a 0a20 2020 2020  mat(pkg)]..     
-0005d480: 2020 2023 2051 5469 6d65 722e 7369 6e67     # QTimer.sing
-0005d490: 6c65 5368 6f74 2831 3030 302c 2073 656c  leShot(1000, sel
-0005d4a0: 662e 6578 6563 7574 655f 5144 6961 6c6f  f.execute_QDialo
-0005d4b0: 6741 6363 6570 7429 0a20 2020 2020 2020  gAccept).       
-0005d4c0: 2069 6e69 745f 7265 7375 6c74 203d 2070   init_result = p
-0005d4d0: 706c 5f6d 616e 6167 6572 2e69 6e69 745f  pl_manager.init_
-0005d4e0: 7069 7065 6c69 6e65 2829 0a20 2020 2020  pipeline().     
-0005d4f0: 2020 2070 706c 5f6d 616e 6167 6572 2e6d     ppl_manager.m
-0005d500: 7367 2e61 6363 6570 7428 290a 2020 2020  sg.accept().    
-0005d510: 2020 2020 7365 6c66 2e61 7373 6572 7446      self.assertF
-0005d520: 616c 7365 2869 6e69 745f 7265 7375 6c74  alse(init_result
-0005d530: 290a 0a20 2020 2020 2020 2023 204d 6f63  )..        # Moc
-0005d540: 6b73 2061 2027 5661 6c75 6545 7272 6f72  ks a 'ValueError
-0005d550: 2720 696e 2027 776f 726b 666c 6f77 5f66  ' in 'workflow_f
-0005d560: 726f 6d5f 7069 7065 6c69 6e65 270a 2020  rom_pipeline'.  
-0005d570: 2020 2020 2020 7070 6c2e 6669 6e64 5f65        ppl.find_e
-0005d580: 6d70 7479 5f70 6172 616d 6574 6572 7320  mpty_parameters 
-0005d590: 3d20 4d6f 636b 2873 6964 655f 6566 6665  = Mock(side_effe
-0005d5a0: 6374 3d56 616c 7565 4572 726f 7229 0a0a  ct=ValueError)..
-0005d5b0: 2020 2020 2020 2020 2320 5154 696d 6572          # QTimer
-0005d5c0: 2e73 696e 676c 6553 686f 7428 3130 3030  .singleShot(1000
-0005d5d0: 2c20 7365 6c66 2e65 7865 6375 7465 5f51  , self.execute_Q
-0005d5e0: 4469 616c 6f67 4163 6365 7074 290a 2020  DialogAccept).  
-0005d5f0: 2020 2020 2020 696e 6974 5f72 6573 756c        init_resul
-0005d600: 7420 3d20 7070 6c5f 6d61 6e61 6765 722e  t = ppl_manager.
-0005d610: 696e 6974 5f70 6970 656c 696e 6528 290a  init_pipeline().
-0005d620: 2020 2020 2020 2020 7070 6c5f 6d61 6e61          ppl_mana
-0005d630: 6765 722e 6d73 672e 6163 6365 7074 2829  ger.msg.accept()
-0005d640: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0005d650: 7365 7274 4661 6c73 6528 696e 6974 5f72  sertFalse(init_r
-0005d660: 6573 756c 7429 0a0a 2020 2020 6465 6620  esult)..    def 
-0005d670: 7465 7374 5f7a 5f72 756e 5069 7065 6c69  test_z_runPipeli
-0005d680: 6e65 2873 656c 6629 3a0a 2020 2020 2020  ne(self):.      
-0005d690: 2020 2222 2241 6464 7320 6120 7072 6f63    """Adds a proc
-0005d6a0: 6573 732c 2065 7870 6f72 7420 706c 7567  ess, export plug
-0005d6b0: 7320 616e 6420 7275 6e73 2061 2070 6970  s and runs a pip
-0005d6c0: 656c 696e 652e 0a0a 2020 2020 2020 2020  eline...        
-0005d6d0: 2d20 5465 7374 733a 0a20 2020 2020 2020  - Tests:.       
-0005d6e0: 2020 2020 202d 2050 6970 656c 696e 654d       - PipelineM
-0005d6f0: 616e 6167 6572 5461 622e 7275 6e50 6970  anagerTab.runPip
-0005d700: 656c 696e 650a 2020 2020 2020 2020 2020  eline.          
-0005d710: 2020 2d20 5069 7065 6c69 6e65 4d61 6e61    - PipelineMana
-0005d720: 6765 7254 6162 2e66 696e 6973 685f 6578  gerTab.finish_ex
-0005d730: 6563 7574 696f 6e0a 2020 2020 2020 2020  ecution.        
-0005d740: 2020 2020 2d20 5275 6e50 726f 6772 6573      - RunProgres
-0005d750: 730a 2020 2020 2020 2020 2020 2020 2d20  s.            - 
-0005d760: 5275 6e57 6f72 6b65 720a 2020 2020 2020  RunWorker.      
-0005d770: 2020 2222 220a 0a20 2020 2020 2020 2023    """..        #
-0005d780: 2053 6574 2073 686f 7274 6375 7473 2066   Set shortcuts f
-0005d790: 6f72 206f 626a 6563 7473 2074 6861 7420  or objects that 
-0005d7a0: 6172 6520 6f66 7465 6e20 7573 6564 0a20  are often used. 
-0005d7b0: 2020 2020 2020 2070 706c 5f6d 616e 6167         ppl_manag
-0005d7c0: 6572 203d 2073 656c 662e 6d61 696e 5f77  er = self.main_w
-0005d7d0: 696e 646f 772e 7069 7065 6c69 6e65 5f6d  indow.pipeline_m
-0005d7e0: 616e 6167 6572 0a20 2020 2020 2020 2070  anager.        p
-0005d7f0: 706c 5f65 6474 5f74 6162 7320 3d20 7070  pl_edt_tabs = pp
-0005d800: 6c5f 6d61 6e61 6765 722e 7069 7065 6c69  l_manager.pipeli
-0005d810: 6e65 4564 6974 6f72 5461 6273 0a20 2020  neEditorTabs.   
-0005d820: 2020 2020 2070 706c 203d 2070 706c 5f65       ppl = ppl_e
-0005d830: 6474 5f74 6162 732e 6765 745f 6375 7272  dt_tabs.get_curr
-0005d840: 656e 745f 7069 7065 6c69 6e65 2829 0a0a  ent_pipeline()..
-0005d850: 2020 2020 2020 2020 2320 4372 6561 7465          # Create
-0005d860: 7320 6120 6e65 7720 7072 6f6a 6563 7420  s a new project 
-0005d870: 666f 6c64 6572 2061 6e64 2061 6464 7320  folder and adds 
-0005d880: 6f6e 6520 646f 6375 6d65 6e74 2074 6f20  one document to 
-0005d890: 7468 650a 2020 2020 2020 2020 2320 7072  the.        # pr
-0005d8a0: 6f6a 6563 742c 2073 6574 7320 7468 6520  oject, sets the 
-0005d8b0: 706c 7567 2076 616c 7565 2074 6861 7420  plug value that 
-0005d8c0: 6973 2061 6464 6564 2074 6f20 7468 6520  is added to the 
-0005d8d0: 6461 7461 6261 7365 0a20 2020 2020 2020  database.       
-0005d8e0: 2070 726f 6a65 6374 5f38 5f70 6174 6820   project_8_path 
-0005d8f0: 3d20 7365 6c66 2e67 6574 5f6e 6577 5f74  = self.get_new_t
-0005d900: 6573 745f 7072 6f6a 6563 7428 290a 2020  est_project().  
-0005d910: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
-0005d920: 722e 7072 6f6a 6563 742e 666f 6c64 6572  r.project.folder
-0005d930: 203d 2070 726f 6a65 6374 5f38 5f70 6174   = project_8_pat
-0005d940: 680a 2020 2020 2020 2020 666f 6c64 6572  h.        folder
-0005d950: 203d 206f 732e 7061 7468 2e6a 6f69 6e28   = os.path.join(
-0005d960: 7072 6f6a 6563 745f 385f 7061 7468 2c20  project_8_path, 
-0005d970: 2264 6174 6122 2c20 2272 6177 5f64 6174  "data", "raw_dat
-0005d980: 6122 290a 2020 2020 2020 2020 4e49 495f  a").        NII_
-0005d990: 4649 4c45 5f31 203d 2028 0a20 2020 2020  FILE_1 = (.     
-0005d9a0: 2020 2020 2020 2022 4775 6572 6265 742d         "Guerbet-
-0005d9b0: 4336 2d32 3031 342d 5261 742d 4b35 322d  C6-2014-Rat-K52-
-0005d9c0: 5475 6265 3237 2d32 3031 342d 3032 2d31  Tube27-2014-02-1
-0005d9d0: 3431 3032 3331 372d 3034 2d47 335f 220a  4102317-04-G3_".
-0005d9e0: 2020 2020 2020 2020 2020 2020 2247 7565              "Gue
-0005d9f0: 7262 6574 5f4d 4445 4654 2d4d 4445 4654  rbet_MDEFT-MDEFT
-0005da00: 7076 6d2d 3030 3039 3430 5f38 3030 2e6e  pvm-000940_800.n
-0005da10: 6969 220a 2020 2020 2020 2020 290a 2020  ii".        ).  
-0005da20: 2020 2020 2020 444f 4355 4d45 4e54 5f31        DOCUMENT_1
-0005da30: 203d 206f 732e 7061 7468 2e61 6273 7061   = os.path.abspa
-0005da40: 7468 286f 732e 7061 7468 2e6a 6f69 6e28  th(os.path.join(
-0005da50: 666f 6c64 6572 2c20 4e49 495f 4649 4c45  folder, NII_FILE
-0005da60: 5f31 2929 0a0a 2020 2020 2020 2020 2320  _1))..        # 
-0005da70: 5377 6974 6368 6573 2074 6f20 7069 7065  Switches to pipe
-0005da80: 6c69 6e65 206d 616e 6167 6572 2074 6162  line manager tab
-0005da90: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
-0005daa0: 696e 5f77 696e 646f 772e 7461 6273 2e73  in_window.tabs.s
-0005dab0: 6574 4375 7272 656e 7449 6e64 6578 2832  etCurrentIndex(2
-0005dac0: 290a 0a20 2020 2020 2020 2023 2041 6464  )..        # Add
-0005dad0: 7320 6120 5265 6e61 6d65 2070 726f 6365  s a Rename proce
-0005dae0: 7373 6573 2c20 6372 6561 7465 7320 7468  sses, creates th
-0005daf0: 6520 2772 656e 616d 655f 3127 206e 6f64  e 'rename_1' nod
-0005db00: 650a 2020 2020 2020 2020 7070 6c5f 6564  e.        ppl_ed
-0005db10: 745f 7461 6273 2e67 6574 5f63 7572 7265  t_tabs.get_curre
-0005db20: 6e74 5f65 6469 746f 7228 292e 636c 6963  nt_editor().clic
-0005db30: 6b5f 706f 7320 3d20 5150 6f69 6e74 2834  k_pos = QPoint(4
-0005db40: 3530 2c20 3530 3029 0a20 2020 2020 2020  50, 500).       
-0005db50: 2070 706c 5f65 6474 5f74 6162 732e 6765   ppl_edt_tabs.ge
-0005db60: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
-0005db70: 2829 2e61 6464 5f6e 616d 6564 5f70 726f  ().add_named_pro
-0005db80: 6365 7373 2852 656e 616d 6529 0a0a 2020  cess(Rename)..  
-0005db90: 2020 2020 2020 7070 6c5f 6564 745f 7461        ppl_edt_ta
-0005dba0: 6273 2e67 6574 5f63 7572 7265 6e74 5f65  bs.get_current_e
-0005dbb0: 6469 746f 7228 292e 6578 706f 7274 5f75  ditor().export_u
-0005dbc0: 6e63 6f6e 6e65 6374 6564 5f6d 616e 6461  nconnected_manda
-0005dbd0: 746f 7279 5f69 6e70 7574 7328 290a 2020  tory_inputs().  
-0005dbe0: 2020 2020 2020 7070 6c5f 6564 745f 7461        ppl_edt_ta
-0005dbf0: 6273 2e67 6574 5f63 7572 7265 6e74 5f65  bs.get_current_e
-0005dc00: 6469 746f 7228 292e 6578 706f 7274 5f61  ditor().export_a
-0005dc10: 6c6c 5f75 6e63 6f6e 6e65 6374 6564 5f6f  ll_unconnected_o
-0005dc20: 7574 7075 7473 2829 0a0a 2020 2020 2020  utputs()..      
-0005dc30: 2020 2320 5365 7473 2074 6865 206d 616e    # Sets the man
-0005dc40: 6461 746f 7279 2070 6172 616d 6574 6572  datory parameter
-0005dc50: 730a 2020 2020 2020 2020 7070 6c2e 6e6f  s.        ppl.no
-0005dc60: 6465 735b 2222 5d2e 7365 745f 706c 7567  des[""].set_plug
-0005dc70: 5f76 616c 7565 2822 696e 5f66 696c 6522  _value("in_file"
-0005dc80: 2c20 444f 4355 4d45 4e54 5f31 290a 2020  , DOCUMENT_1).  
-0005dc90: 2020 2020 2020 7070 6c2e 6e6f 6465 735b        ppl.nodes[
-0005dca0: 2222 5d2e 7365 745f 706c 7567 5f76 616c  ""].set_plug_val
-0005dcb0: 7565 2822 666f 726d 6174 5f73 7472 696e  ue("format_strin
-0005dcc0: 6722 2c20 226e 6577 5f6e 616d 652e 6e69  g", "new_name.ni
-0005dcd0: 6922 290a 0a20 2020 2020 2020 2023 204d  i")..        # M
-0005dce0: 6f63 6b73 2074 6865 2061 6c6c 6f63 6174  ocks the allocat
-0005dcf0: 696f 6e20 6f66 2074 6865 2070 6970 656c  ion of the pipel
-0005dd00: 696e 6520 696e 746f 2061 6e6f 7468 6572  ine into another
-0005dd10: 2074 6872 6561 640a 2020 2020 2020 2020   thread.        
-0005dd20: 2320 5468 6973 2066 756e 6374 696f 6e20  # This function 
-0005dd30: 7365 656d 2074 6f20 7265 7175 6972 6520  seem to require 
-0005dd40: 6120 6469 6666 6572 656e 7420 6e75 6d62  a different numb
-0005dd50: 6572 206f 6620 6172 6775 6d65 6e74 730a  er of arguments.
-0005dd60: 2020 2020 2020 2020 2320 6465 7065 6e64          # depend
-0005dd70: 696e 6720 6f6e 2074 6865 2070 6c61 7466  ing on the platf
-0005dd80: 6f72 6d2c 2074 6865 7265 666f 7265 2061  orm, therefore a
-0005dd90: 2027 4d6f 636b 2720 6973 2075 7365 640a   'Mock' is used.
-0005dda0: 2020 2020 2020 2020 5154 6872 6561 642e          QThread.
-0005ddb0: 7374 6172 7420 3d20 4d6f 636b 2829 0a0a  start = Mock()..
-0005ddc0: 2020 2020 2020 2020 2320 5069 7065 6c69          # Pipeli
-0005ddd0: 6e65 2066 6169 6c73 2077 6869 6c65 2072  ne fails while r
-0005dde0: 756e 6e69 6e67 2c20 6475 6520 746f 2063  unning, due to c
-0005ddf0: 6170 7375 6c20 696d 706f 7274 2065 7272  apsul import err
-0005de00: 6f72 0a20 2020 2020 2020 2070 706c 5f6d  or.        ppl_m
-0005de10: 616e 6167 6572 2e72 756e 5069 7065 6c69  anager.runPipeli
-0005de20: 6e65 2829 0a0a 2020 2020 2020 2020 2320  ne()..        # 
-0005de30: 4469 7265 6374 6c79 2072 756e 7320 7468  Directly runs th
-0005de40: 6520 2751 5468 7265 6164 2720 6f62 6a65  e 'QThread' obje
-0005de50: 6374 2c20 6173 2074 6865 206f 6e6c 7920  ct, as the only 
-0005de60: 736f 6c75 7469 6f6e 2066 6f75 6e64 0a20  solution found. 
-0005de70: 2020 2020 2020 2023 2074 6f20 7275 6e20         # to run 
-0005de80: 7468 6520 7069 7065 6c69 6e65 2064 7572  the pipeline dur
-0005de90: 696e 6720 7468 6520 7465 7374 2072 6f75  ing the test rou
-0005dea0: 7469 6e65 0a20 2020 2020 2020 2070 706c  tine.        ppl
-0005deb0: 5f6d 616e 6167 6572 2e70 726f 6772 6573  _manager.progres
-0005dec0: 732e 776f 726b 6572 2e72 756e 2829 0a0a  s.worker.run()..
-0005ded0: 2020 2020 2020 2020 2320 5365 6e64 7320          # Sends 
-0005dee0: 7468 6520 7369 676e 616c 2074 6f20 6669  the signal to fi
-0005def0: 6e69 7368 2074 6865 2070 6970 656c 696e  nish the pipelin
-0005df00: 650a 2020 2020 2020 2020 7070 6c5f 6d61  e.        ppl_ma
-0005df10: 6e61 6765 722e 7072 6f67 7265 7373 2e77  nager.progress.w
-0005df20: 6f72 6b65 722e 6669 6e69 7368 6564 2e65  orker.finished.e
-0005df30: 6d69 7428 290a 0a20 2020 2020 2020 2073  mit()..        s
-0005df40: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0005df50: 7070 6c5f 6d61 6e61 6765 722e 6c61 7374  ppl_manager.last
-0005df60: 5f72 756e 5f70 6970 656c 696e 652c 2070  _run_pipeline, p
-0005df70: 706c 290a 2020 2020 2020 2020 5154 6872  pl).        QThr
-0005df80: 6561 642e 7374 6172 742e 6173 7365 7274  ead.start.assert
-0005df90: 5f63 616c 6c65 645f 6f6e 6365 2829 0a0a  _called_once()..
-0005dfa0: 2020 2020 2020 2020 2320 5069 7065 6c69          # Pipeli
-0005dfb0: 6e65 2069 7320 7374 6f70 7065 6420 6279  ne is stopped by
-0005dfc0: 2074 6865 2075 7365 722c 2074 6865 2070   the user, the p
-0005dfd0: 6970 656c 696e 6520 6661 696c 7320 6265  ipeline fails be
-0005dfe0: 666f 7265 2072 756e 6e69 6e67 0a20 2020  fore running.   
-0005dff0: 2020 2020 2070 706c 5f6d 616e 6167 6572       ppl_manager
-0005e000: 2e72 756e 5069 7065 6c69 6e65 2829 0a20  .runPipeline(). 
-0005e010: 2020 2020 2020 2070 706c 5f6d 616e 6167         ppl_manag
-0005e020: 6572 2e73 746f 705f 6578 6563 7574 696f  er.stop_executio
-0005e030: 6e28 290a 2020 2020 2020 2020 7070 6c5f  n().        ppl_
-0005e040: 6d61 6e61 6765 722e 7072 6f67 7265 7373  manager.progress
-0005e050: 2e77 6f72 6b65 722e 7275 6e28 290a 2020  .worker.run().  
-0005e060: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
-0005e070: 722e 7072 6f67 7265 7373 2e77 6f72 6b65  r.progress.worke
-0005e080: 722e 6669 6e69 7368 6564 2e65 6d69 7428  r.finished.emit(
-0005e090: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
-0005e0a0: 7a7a 5f64 656c 5f70 6163 6b28 7365 6c66  zz_del_pack(self
-0005e0b0: 293a 0a20 2020 2020 2020 2022 2222 5765  ):.        """We
-0005e0c0: 2072 656d 6f76 6520 7468 6520 6272 6963   remove the bric
-0005e0d0: 6b20 6372 6561 7465 6420 6475 7269 6e67  k created during
-0005e0e0: 2074 6865 2075 6e69 7420 7465 7374 732c   the unit tests,
-0005e0f0: 2061 6e64 2077 6520 7461 6b65 0a20 2020   and we take.   
-0005e100: 2020 2020 2061 6476 616e 7461 6765 206f       advantage o
-0005e110: 6620 7468 6973 2074 6f20 636f 7665 7220  f this to cover 
-0005e120: 7468 6520 7061 7274 206f 6620 7468 6520  the part of the 
-0005e130: 636f 6465 2075 7365 6420 746f 2072 656d  code used to rem
-0005e140: 6f76 6520 7468 650a 2020 2020 2020 2020  ove the.        
-0005e150: 7061 636b 6167 6573 2222 220a 0a20 2020  packages"""..   
-0005e160: 2020 2020 2070 6b67 203d 2050 6163 6b61       pkg = Packa
-0005e170: 6765 4c69 6272 6172 7944 6961 6c6f 6728  geLibraryDialog(
-0005e180: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
-0005e190: 290a 0a20 2020 2020 2020 2023 2054 6865  )..        # The
-0005e1a0: 2054 6573 745f 7069 7065 6c69 6e65 2062   Test_pipeline b
-0005e1b0: 7269 636b 2077 6173 2061 6464 6564 2069  rick was added i
-0005e1c0: 6e20 7468 6520 7061 636b 6167 6520 6c69  n the package li
-0005e1d0: 6272 6172 790a 2020 2020 2020 2020 7365  brary.        se
-0005e1e0: 6c66 2e61 7373 6572 7454 7275 6528 0a20  lf.assertTrue(. 
-0005e1f0: 2020 2020 2020 2020 2020 2022 5465 7374             "Test
-0005e200: 5f70 6970 656c 696e 655f 3122 0a20 2020  _pipeline_1".   
-0005e210: 2020 2020 2020 2020 2069 6e20 706b 672e           in pkg.
-0005e220: 7061 636b 6167 655f 6c69 6272 6172 792e  package_library.
-0005e230: 7061 636b 6167 655f 7472 6565 5b22 5573  package_tree["Us
-0005e240: 6572 5f70 726f 6365 7373 6573 225d 0a20  er_processes"]. 
-0005e250: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-0005e260: 2020 706b 672e 6465 6c65 7465 5f70 6163    pkg.delete_pac
-0005e270: 6b61 6765 280a 2020 2020 2020 2020 2020  kage(.          
-0005e280: 2020 746f 5f64 656c 6574 653d 2255 7365    to_delete="Use
-0005e290: 725f 7072 6f63 6573 7365 732e 5465 7374  r_processes.Test
-0005e2a0: 5f70 6970 656c 696e 655f 3122 2c20 6c6f  _pipeline_1", lo
-0005e2b0: 6f70 3d54 7275 650a 2020 2020 2020 2020  op=True.        
-0005e2c0: 290a 0a20 2020 2020 2020 2023 2054 6865  )..        # The
-0005e2d0: 2054 6573 745f 7069 7065 6c69 6e65 2062   Test_pipeline b
-0005e2e0: 7269 636b 2068 6173 2062 6565 6e20 7265  rick has been re
-0005e2f0: 6d6f 7665 6420 6672 6f6d 2074 6865 2070  moved from the p
-0005e300: 6163 6b61 6765 206c 6962 7261 7279 0a20  ackage library. 
-0005e310: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0005e320: 7274 4661 6c73 6528 0a20 2020 2020 2020  rtFalse(.       
-0005e330: 2020 2020 2022 5465 7374 5f70 6970 656c       "Test_pipel
-0005e340: 696e 655f 3122 0a20 2020 2020 2020 2020  ine_1".         
-0005e350: 2020 2069 6e20 706b 672e 7061 636b 6167     in pkg.packag
-0005e360: 655f 6c69 6272 6172 792e 7061 636b 6167  e_library.packag
-0005e370: 655f 7472 6565 5b22 5573 6572 5f70 726f  e_tree["User_pro
-0005e380: 6365 7373 6573 225d 0a20 2020 2020 2020  cesses"].       
-0005e390: 2029 0a0a 0a69 6620 5f5f 6e61 6d65 5f5f   )...if __name__
-0005e3a0: 203d 3d20 225f 5f6d 6169 6e5f 5f22 3a0a   == "__main__":.
-0005e3b0: 2020 2020 756e 6974 7465 7374 2e6d 6169      unittest.mai
-0005e3c0: 6e28 290a                                n().
+000548c0: 6167 6572 2e69 6e69 745f 7069 7065 6c69  ager.init_pipeli
+000548d0: 6e65 203d 204d 6f63 6b28 290a 2020 2020  ne = Mock().    
+000548e0: 2020 2020 2320 4649 584d 453a 2069 6620      # FIXME: if 
+000548f0: 7468 6520 6d65 7468 6f64 2027 696e 6974  the method 'init
+00054900: 5f70 6970 656c 696e 6527 2069 7320 6e6f  _pipeline' is no
+00054910: 7420 6d6f 636b 6564 2074 6865 2077 686f  t mocked the who
+00054920: 6c65 0a20 2020 2020 2020 2023 2020 2020  le.        #    
+00054930: 2020 2020 7465 7374 2072 6f75 7469 6e65      test routine
+00054940: 2066 6169 6c73 2077 6974 6820 6120 2753   fails with a 'S
+00054950: 6567 6d65 6e74 6174 696f 6e20 4661 756c  egmentation Faul
+00054960: 7427 0a0a 2020 2020 2020 2020 2320 496e  t'..        # In
+00054970: 6974 6961 6c69 7a65 7320 7468 6520 7069  itializes the pi
+00054980: 7065 6c69 6e65 0a20 2020 2020 2020 2070  peline.        p
+00054990: 706c 5f6d 616e 6167 6572 2e69 6e69 7469  pl_manager.initi
+000549a0: 616c 697a 6528 290a 0a20 2020 2020 2020  alize()..       
+000549b0: 2023 2041 7373 6572 7473 2074 6861 7420   # Asserts that 
+000549c0: 6120 776f 726b 666c 6f77 2068 6173 2062  a workflow has b
+000549d0: 6565 6e20 6372 6561 7465 640a 2020 2020  een created.    
+000549e0: 2020 2020 2320 7365 6c66 2e61 7373 6572      # self.asser
+000549f0: 7449 734e 6f74 4e6f 6e65 2870 706c 5f6d  tIsNotNone(ppl_m
+00054a00: 616e 6167 6572 2e77 6f72 6b66 6c6f 7729  anager.workflow)
+00054a10: 0a20 2020 2020 2020 2023 2066 726f 6d20  .        # from 
+00054a20: 736f 6d61 5f77 6f72 6b66 6c6f 772e 636c  soma_workflow.cl
+00054a30: 6965 6e74 5f74 7970 6573 2069 6d70 6f72  ient_types impor
+00054a40: 7420 576f 726b 666c 6f77 0a20 2020 2020  t Workflow.     
+00054a50: 2020 2023 2073 656c 662e 6173 7365 7274     # self.assert
+00054a60: 4973 496e 7374 616e 6365 2870 706c 5f6d  IsInstance(ppl_m
+00054a70: 616e 6167 6572 2e77 6f72 6b66 6c6f 772c  anager.workflow,
+00054a80: 2057 6f72 6b66 6c6f 7729 0a20 2020 2020   Workflow).     
+00054a90: 2020 2023 2046 6958 4d45 3a20 7468 6520     # FiXME: the 
+00054aa0: 6162 6f76 6520 636f 6465 2065 6c73 6520  above code else 
+00054ab0: 6c65 6164 7320 746f 2027 5365 676d 656e  leads to 'Segmen
+00054ac0: 7461 7469 6f6e 2046 6175 6c74 270a 0a20  tation Fault'.. 
+00054ad0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00054ae0: 7274 4661 6c73 6528 7070 6c5f 6d61 6e61  rtFalse(ppl_mana
+00054af0: 6765 722e 6967 6e6f 7265 5f6e 6f64 6529  ger.ignore_node)
+00054b00: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00054b10: 7365 7274 4571 7561 6c28 6c65 6e28 7070  sertEqual(len(pp
+00054b20: 6c5f 6d61 6e61 6765 722e 6b65 7929 2c20  l_manager.key), 
+00054b30: 3029 0a20 2020 2020 2020 2073 656c 662e  0).        self.
+00054b40: 6173 7365 7274 4571 7561 6c28 6c65 6e28  assertEqual(len(
+00054b50: 7070 6c5f 6d61 6e61 6765 722e 6967 6e6f  ppl_manager.igno
+00054b60: 7265 292c 2030 290a 2020 2020 2020 2020  re), 0).        
+00054b70: 7070 6c5f 6d61 6e61 6765 722e 696e 6974  ppl_manager.init
+00054b80: 5f70 6970 656c 696e 652e 6173 7365 7274  _pipeline.assert
+00054b90: 5f63 616c 6c65 645f 6f6e 6365 5f77 6974  _called_once_wit
+00054ba0: 6828 290a 0a20 2020 2020 2020 2023 204d  h()..        # M
+00054bb0: 6f63 6b73 2061 6e20 6f62 6a65 6374 2074  ocks an object t
+00054bc0: 6f20 696e 6475 6365 2061 6e20 6578 6365  o induce an exce
+00054bd0: 7074 696f 6e0a 2020 2020 2020 2020 7070  ption.        pp
+00054be0: 6c5f 6d61 6e61 6765 722e 696e 6974 5f70  l_manager.init_p
+00054bf0: 6970 656c 696e 6520 3d20 4e6f 6e65 0a0a  ipeline = None..
+00054c00: 2020 2020 2020 2020 2320 496e 6475 6365          # Induce
+00054c10: 7320 616e 2065 7863 6570 7469 6f6e 2069  s an exception i
+00054c20: 6e20 7468 6520 7069 7065 6c69 6e65 2069  n the pipeline i
+00054c30: 6e69 7469 616c 697a 6174 696f 6e0a 2020  nitialization.  
+00054c40: 2020 2020 2020 7072 696e 7428 225c 6e5c        print("\n\
+00054c50: 6e2a 2a20 616e 2065 7863 6570 7469 6f6e  n** an exception
+00054c60: 206d 6573 7361 6765 2069 7320 6578 7065   message is expe
+00054c70: 6374 6564 2062 656c 6f77 2229 0a20 2020  cted below").   
+00054c80: 2020 2020 2070 706c 5f6d 616e 6167 6572       ppl_manager
+00054c90: 2e69 6e69 7469 616c 697a 6528 290a 0a20  .initialize().. 
+00054ca0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00054cb0: 7274 4661 6c73 6528 7070 6c5f 6d61 6e61  rtFalse(ppl_mana
+00054cc0: 6765 722e 6967 6e6f 7265 5f6e 6f64 6529  ger.ignore_node)
+00054cd0: 0a0a 2020 2020 6465 6620 7465 7374 5f72  ..    def test_r
+00054ce0: 6567 6973 7465 725f 636f 6d70 6c65 7469  egister_completi
+00054cf0: 6f6e 5f61 7474 7269 6275 7465 7328 7365  on_attributes(se
+00054d00: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
+00054d10: 4d6f 636b 7320 6d65 7468 6f64 7320 6f66  Mocks methods of
+00054d20: 2074 6865 2070 6970 656c 696e 6520 6d61   the pipeline ma
+00054d30: 6e61 6765 7220 616e 6420 7265 6769 7374  nager and regist
+00054d40: 6572 7320 636f 6d70 6c65 7469 6f6e 0a20  ers completion. 
+00054d50: 2020 2020 2020 2061 7474 7269 6275 7465         attribute
+00054d60: 732e 0a0a 2020 2020 2020 2020 5369 6e63  s...        Sinc
+00054d70: 6520 6120 6d65 7468 6f64 206f 6620 7468  e a method of th
+00054d80: 6520 5072 6f63 6573 7343 6f6d 706c 6574  e ProcessComplet
+00054d90: 696f 6e45 6e67 696e 6520 636c 6173 7320  ionEngine class 
+00054da0: 6973 206d 6f63 6b65 642c 0a20 2020 2020  is mocked,.     
+00054db0: 2020 2074 6869 7320 7465 7374 206d 6179     this test may
+00054dc0: 2072 656e 6465 7220 7468 6520 7570 636f   render the upco
+00054dd0: 6d69 6e67 2074 6573 7420 726f 7574 696e  ming test routin
+00054de0: 6520 756e 7374 6162 6c65 2e0a 0a20 2020  e unstable...   
+00054df0: 2020 2020 202d 2054 6573 7473 3a20 5069       - Tests: Pi
+00054e00: 7065 6c69 6e65 4d61 6e61 6765 7254 6162  pelineManagerTab
+00054e10: 2e72 6567 6973 7465 725f 636f 6d70 6c65  .register_comple
+00054e20: 7469 6f6e 5f61 7474 7269 6275 7465 730a  tion_attributes.
+00054e30: 2020 2020 2020 2020 2222 220a 0a20 2020          """..   
+00054e40: 2020 2020 2023 2053 6574 7320 7368 6f72       # Sets shor
+00054e50: 7463 7574 7320 666f 7220 6f62 6a65 6374  tcuts for object
+00054e60: 7320 7468 6174 2061 7265 206f 6674 656e  s that are often
+00054e70: 2075 7365 640a 2020 2020 2020 2020 7070   used.        pp
+00054e80: 6c5f 6d61 6e61 6765 7220 3d20 7365 6c66  l_manager = self
+00054e90: 2e6d 6169 6e5f 7769 6e64 6f77 2e70 6970  .main_window.pip
+00054ea0: 656c 696e 655f 6d61 6e61 6765 720a 2020  eline_manager.  
+00054eb0: 2020 2020 2020 7070 6c5f 6564 745f 7461        ppl_edt_ta
+00054ec0: 6273 203d 2070 706c 5f6d 616e 6167 6572  bs = ppl_manager
+00054ed0: 2e70 6970 656c 696e 6545 6469 746f 7254  .pipelineEditorT
+00054ee0: 6162 730a 2020 2020 2020 2020 7070 6c20  abs.        ppl 
+00054ef0: 3d20 7070 6c5f 6564 745f 7461 6273 2e67  = ppl_edt_tabs.g
+00054f00: 6574 5f63 7572 7265 6e74 5f70 6970 656c  et_current_pipel
+00054f10: 696e 6528 290a 0a20 2020 2020 2020 2023  ine()..        #
+00054f20: 2047 6574 7320 7468 6520 7061 7468 206f   Gets the path o
+00054f30: 6620 6f6e 6520 646f 6375 6d65 6e74 0a20  f one document. 
+00054f40: 2020 2020 2020 2063 6f6e 6669 6720 3d20         config = 
+00054f50: 436f 6e66 6967 2863 6f6e 6669 675f 7061  Config(config_pa
+00054f60: 7468 3d73 656c 662e 636f 6e66 6967 5f70  th=self.config_p
+00054f70: 6174 6829 0a20 2020 2020 2020 2066 6f6c  ath).        fol
+00054f80: 6465 7220 3d20 6f73 2e70 6174 682e 6162  der = os.path.ab
+00054f90: 7370 6174 6828 0a20 2020 2020 2020 2020  spath(.         
+00054fa0: 2020 206f 732e 7061 7468 2e6a 6f69 6e28     os.path.join(
+00054fb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00054fc0: 2063 6f6e 6669 672e 6765 745f 6d69 615f   config.get_mia_
+00054fd0: 7061 7468 2829 2c0a 2020 2020 2020 2020  path(),.        
+00054fe0: 2020 2020 2020 2020 226d 6961 7574 6461          "miautda
+00054ff0: 7461 222c 0a20 2020 2020 2020 2020 2020  ta",.           
+00055000: 2020 2020 2022 7265 736f 7572 6365 7322       "resources"
+00055010: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00055020: 2020 226d 6961 222c 0a20 2020 2020 2020    "mia",.       
+00055030: 2020 2020 2020 2020 2022 7072 6f6a 6563           "projec
+00055040: 745f 3822 2c0a 2020 2020 2020 2020 2020  t_8",.          
+00055050: 2020 2020 2020 2264 6174 6122 2c0a 2020        "data",.  
+00055060: 2020 2020 2020 2020 2020 2020 2020 2272                "r
+00055070: 6177 5f64 6174 6122 2c0a 2020 2020 2020  aw_data",.      
+00055080: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00055090: 290a 2020 2020 2020 2020 4e49 495f 4649  ).        NII_FI
+000550a0: 4c45 5f31 203d 2028 0a20 2020 2020 2020  LE_1 = (.       
+000550b0: 2020 2020 2022 4775 6572 6265 742d 4336       "Guerbet-C6
+000550c0: 2d32 3031 342d 5261 742d 4b35 322d 5475  -2014-Rat-K52-Tu
+000550d0: 6265 3237 2d32 3031 342d 3032 2d31 3431  be27-2014-02-141
+000550e0: 3032 3331 372d 3031 2d47 315f 220a 2020  02317-01-G1_".  
+000550f0: 2020 2020 2020 2020 2020 2247 7565 7262            "Guerb
+00055100: 6574 5f41 6e61 742d 5241 5245 7076 6d2d  et_Anat-RAREpvm-
+00055110: 3030 3032 3230 5f30 3030 2e6e 6969 220a  000220_000.nii".
+00055120: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00055130: 2020 4e49 495f 4649 4c45 5f32 203d 2028    NII_FILE_2 = (
+00055140: 0a20 2020 2020 2020 2020 2020 2022 4775  .            "Gu
+00055150: 6572 6265 742d 4336 2d32 3031 342d 5261  erbet-C6-2014-Ra
+00055160: 742d 4b35 322d 5475 6265 3237 2d32 3031  t-K52-Tube27-201
+00055170: 342d 3032 2d31 3431 3032 3331 372d 3034  4-02-14102317-04
+00055180: 2d47 335f 220a 2020 2020 2020 2020 2020  -G3_".          
+00055190: 2020 2247 7565 7262 6574 5f4d 4445 4654    "Guerbet_MDEFT
+000551a0: 2d4d 4445 4654 7076 6d2d 3030 3039 3430  -MDEFTpvm-000940
+000551b0: 5f38 3030 2e6e 6969 220a 2020 2020 2020  _800.nii".      
+000551c0: 2020 290a 0a20 2020 2020 2020 2044 4f43    )..        DOC
+000551d0: 554d 454e 545f 3120 3d20 6f73 2e70 6174  UMENT_1 = os.pat
+000551e0: 682e 6162 7370 6174 6828 6f73 2e70 6174  h.abspath(os.pat
+000551f0: 682e 6a6f 696e 2866 6f6c 6465 722c 204e  h.join(folder, N
+00055200: 4949 5f46 494c 455f 3129 290a 2020 2020  II_FILE_1)).    
+00055210: 2020 2020 444f 4355 4d45 4e54 5f32 203d      DOCUMENT_2 =
+00055220: 206f 732e 7061 7468 2e61 6273 7061 7468   os.path.abspath
+00055230: 286f 732e 7061 7468 2e6a 6f69 6e28 666f  (os.path.join(fo
+00055240: 6c64 6572 2c20 4e49 495f 4649 4c45 5f32  lder, NII_FILE_2
+00055250: 2929 0a0a 2020 2020 2020 2020 2320 4164  ))..        # Ad
+00055260: 6473 2061 2053 656c 6563 7420 7072 6f63  ds a Select proc
+00055270: 6573 7365 732c 2063 7265 6174 6573 2074  esses, creates t
+00055280: 6865 2027 7365 6c65 6374 5f31 2720 6e6f  he 'select_1' no
+00055290: 6465 0a20 2020 2020 2020 2070 706c 5f65  de.        ppl_e
+000552a0: 6474 5f74 6162 732e 6765 745f 6375 7272  dt_tabs.get_curr
+000552b0: 656e 745f 6564 6974 6f72 2829 2e63 6c69  ent_editor().cli
+000552c0: 636b 5f70 6f73 203d 2051 506f 696e 7428  ck_pos = QPoint(
+000552d0: 3435 302c 2035 3030 290a 2020 2020 2020  450, 500).      
+000552e0: 2020 7070 6c5f 6564 745f 7461 6273 2e67    ppl_edt_tabs.g
+000552f0: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
+00055300: 7228 292e 6164 645f 6e61 6d65 645f 7072  r().add_named_pr
+00055310: 6f63 6573 7328 5365 6c65 6374 290a 0a20  ocess(Select).. 
+00055320: 2020 2020 2020 2023 2045 7870 6f72 7420         # Export 
+00055330: 706c 7567 7320 616e 6420 7365 7473 2074  plugs and sets t
+00055340: 6865 6972 2076 616c 7565 730a 2020 2020  heir values.    
+00055350: 2020 2020 7072 696e 7428 225c 6e5c 6e2a      print("\n\n*
+00055360: 2a20 616e 2065 7863 6570 7469 6f6e 206d  * an exception m
+00055370: 6573 7361 6765 2069 7320 6578 7065 6374  essage is expect
+00055380: 6564 2062 656c 6f77 5c6e 2229 0a20 2020  ed below\n").   
+00055390: 2020 2020 2070 706c 5f65 6474 5f74 6162       ppl_edt_tab
+000553a0: 732e 6765 745f 6375 7272 656e 745f 6564  s.get_current_ed
+000553b0: 6974 6f72 2829 2e65 7870 6f72 745f 756e  itor().export_un
+000553c0: 636f 6e6e 6563 7465 645f 6d61 6e64 6174  connected_mandat
+000553d0: 6f72 795f 696e 7075 7473 2829 0a20 2020  ory_inputs().   
+000553e0: 2020 2020 2070 706c 5f65 6474 5f74 6162       ppl_edt_tab
+000553f0: 732e 6765 745f 6375 7272 656e 745f 6564  s.get_current_ed
+00055400: 6974 6f72 2829 2e65 7870 6f72 745f 616c  itor().export_al
+00055410: 6c5f 756e 636f 6e6e 6563 7465 645f 6f75  l_unconnected_ou
+00055420: 7470 7574 7328 290a 2020 2020 2020 2020  tputs().        
+00055430: 7070 6c2e 6e6f 6465 735b 2222 5d2e 7365  ppl.nodes[""].se
+00055440: 745f 706c 7567 5f76 616c 7565 2822 696e  t_plug_value("in
+00055450: 6c69 7374 222c 205b 444f 4355 4d45 4e54  list", [DOCUMENT
+00055460: 5f31 2c20 444f 4355 4d45 4e54 5f32 5d29  _1, DOCUMENT_2])
+00055470: 0a20 2020 2020 2020 2070 726f 6a5f 6469  .        proj_di
+00055480: 7220 3d20 6f73 2e70 6174 682e 6a6f 696e  r = os.path.join
+00055490: 280a 2020 2020 2020 2020 2020 2020 6f73  (.            os
+000554a0: 2e70 6174 682e 6162 7370 6174 6828 6f73  .path.abspath(os
+000554b0: 2e70 6174 682e 6e6f 726d 7061 7468 2870  .path.normpath(p
+000554c0: 706c 5f6d 616e 6167 6572 2e70 726f 6a65  pl_manager.proje
+000554d0: 6374 2e66 6f6c 6465 7229 292c 2022 220a  ct.folder)), "".
+000554e0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+000554f0: 2020 6f75 7470 7574 5f64 6972 203d 206f    output_dir = o
+00055500: 732e 7061 7468 2e6a 6f69 6e28 7072 6f6a  s.path.join(proj
+00055510: 5f64 6972 2c20 226f 7574 7075 745f 6669  _dir, "output_fi
+00055520: 6c65 2e6e 6969 2229 0a20 2020 2020 2020  le.nii").       
+00055530: 2070 706c 2e6e 6f64 6573 5b22 225d 2e73   ppl.nodes[""].s
+00055540: 6574 5f70 6c75 675f 7661 6c75 6528 225f  et_plug_value("_
+00055550: 6f75 7422 2c20 6f75 7470 7574 5f64 6972  out", output_dir
+00055560: 290a 0a20 2020 2020 2020 2023 2052 6567  )..        # Reg
+00055570: 6973 7465 7220 636f 6d70 6c65 7469 6f6e  ister completion
+00055580: 2077 6974 686f 7574 2027 6174 7472 6962   without 'attrib
+00055590: 7574 6573 270a 2020 2020 2020 2020 7070  utes'.        pp
+000555a0: 6c5f 6d61 6e61 6765 722e 7265 6769 7374  l_manager.regist
+000555b0: 6572 5f63 6f6d 706c 6574 696f 6e5f 6174  er_completion_at
+000555c0: 7472 6962 7574 6573 2870 706c 290a 0a20  tributes(ppl).. 
+000555d0: 2020 2020 2020 2023 204d 6f63 6b73 2027         # Mocks '
+000555e0: 6765 745f 6361 7073 756c 5f65 6e67 696e  get_capsul_engin
+000555f0: 6527 2066 6f72 2074 6865 206d 6574 686f  e' for the metho
+00055600: 6420 6e6f 7420 746f 2074 6872 6f77 2061  d not to throw a
+00055610: 6e20 6572 726f 720a 2020 2020 2020 2020  n error.        
+00055620: 2320 7769 7468 2074 6865 2069 6e73 6572  # with the inser
+00055630: 7469 6f6e 206f 6620 7468 6520 7570 636f  tion of the upco
+00055640: 6d69 6e67 206d 6f63 6b0a 2020 2020 2020  ming mock.      
+00055650: 2020 6361 7073 756c 5f65 6e67 696e 6520    capsul_engine 
+00055660: 3d20 7070 6c5f 6564 745f 7461 6273 2e67  = ppl_edt_tabs.g
+00055670: 6574 5f63 6170 7375 6c5f 656e 6769 6e65  et_capsul_engine
+00055680: 2829 0a20 2020 2020 2020 2070 706c 5f6d  ().        ppl_m
+00055690: 616e 6167 6572 2e67 6574 5f63 6170 7375  anager.get_capsu
+000556a0: 6c5f 656e 6769 6e65 203d 204d 6f63 6b28  l_engine = Mock(
+000556b0: 7265 7475 726e 5f76 616c 7565 3d63 6170  return_value=cap
+000556c0: 7375 6c5f 656e 6769 6e65 290a 0a20 2020  sul_engine)..   
+000556d0: 2020 2020 2023 204d 6f63 6b73 2061 7474       # Mocks att
+000556e0: 7269 6275 7465 7320 7661 6c75 6573 2074  ributes values t
+000556f0: 6861 7420 6172 6520 696e 2074 6865 2074  hat are in the t
+00055700: 6167 7320 6c69 7374 0a20 2020 2020 2020  ags list.       
+00055710: 2061 7474 7269 6275 7465 7320 3d20 7b22   attributes = {"
+00055720: 4368 6563 6b73 756d 223a 2022 4368 6563  Checksum": "Chec
+00055730: 6b73 756d 5f76 616c 7565 227d 0a20 2020  ksum_value"}.   
+00055740: 2020 2020 2028 0a20 2020 2020 2020 2020       (.         
+00055750: 2020 2050 726f 6365 7373 436f 6d70 6c65     ProcessComple
+00055760: 7469 6f6e 456e 6769 6e65 2e67 6574 5f63  tionEngine.get_c
+00055770: 6f6d 706c 6574 696f 6e5f 656e 6769 6e65  ompletion_engine
+00055780: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+00055790: 2020 7070 6c0a 2020 2020 2020 2020 2020    ppl.          
+000557a0: 2020 292e 6765 745f 6174 7472 6962 7574    ).get_attribut
+000557b0: 655f 7661 6c75 6573 0a20 2020 2020 2020  e_values.       
+000557c0: 2029 2829 2e65 7870 6f72 745f 746f 5f64   )().export_to_d
+000557d0: 6963 7420 3d20 4d6f 636b 2872 6574 7572  ict = Mock(retur
+000557e0: 6e5f 7661 6c75 653d 6174 7472 6962 7574  n_value=attribut
+000557f0: 6573 290a 0a20 2020 2020 2020 2023 2052  es)..        # R
+00055800: 6567 6973 7465 7220 636f 6d70 6c65 7469  egister completi
+00055810: 6f6e 2077 6974 6820 6d6f 636b 6564 2027  on with mocked '
+00055820: 6174 7472 6962 7574 6573 270a 2020 2020  attributes'.    
+00055830: 2020 2020 7070 6c5f 6d61 6e61 6765 722e      ppl_manager.
+00055840: 7265 6769 7374 6572 5f63 6f6d 706c 6574  register_complet
+00055850: 696f 6e5f 6174 7472 6962 7574 6573 2870  ion_attributes(p
+00055860: 706c 290a 0a20 2020 2064 6566 2074 6573  pl)..    def tes
+00055870: 745f 7265 6769 7374 6572 5f6e 6f64 655f  t_register_node_
+00055880: 696f 5f69 6e5f 6461 7461 6261 7365 2873  io_in_database(s
+00055890: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+000558a0: 2241 6464 7320 6120 7072 6f63 6573 732c  "Adds a process,
+000558b0: 2073 6574 7320 696e 7075 7420 616e 6420   sets input and 
+000558c0: 6f75 7470 7574 2070 6172 616d 6574 6572  output parameter
+000558d0: 7320 616e 6420 7265 6769 7374 6572 7320  s and registers 
+000558e0: 7468 656d 0a20 2020 2020 2020 2069 6e20  them.        in 
+000558f0: 6461 7461 6261 7365 2e0a 0a20 2020 2020  database...     
+00055900: 2020 202d 2054 6573 7473 3a20 5069 7065     - Tests: Pipe
+00055910: 6c69 6e65 4d61 6e61 6765 7254 6162 2e5f  lineManagerTab._
+00055920: 7265 6769 7374 6572 5f6e 6f64 655f 696f  register_node_io
+00055930: 5f69 6e5f 6461 7461 6261 7365 0a20 2020  _in_database.   
+00055940: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
+00055950: 2020 2320 4f70 656e 7320 7072 6f6a 6563    # Opens projec
+00055960: 7420 3820 616e 6420 7377 6974 6368 6573  t 8 and switches
+00055970: 2074 6f20 6974 0a20 2020 2020 2020 2070   to it.        p
+00055980: 726f 6a65 6374 5f38 5f70 6174 6820 3d20  roject_8_path = 
+00055990: 7365 6c66 2e67 6574 5f6e 6577 5f74 6573  self.get_new_tes
+000559a0: 745f 7072 6f6a 6563 7428 290a 2020 2020  t_project().    
+000559b0: 2020 2020 7365 6c66 2e6d 6169 6e5f 7769      self.main_wi
+000559c0: 6e64 6f77 2e73 7769 7463 685f 7072 6f6a  ndow.switch_proj
+000559d0: 6563 7428 7072 6f6a 6563 745f 385f 7061  ect(project_8_pa
+000559e0: 7468 2c20 2270 726f 6a65 6374 5f39 2229  th, "project_9")
+000559f0: 0a0a 2020 2020 2020 2020 444f 4355 4d45  ..        DOCUME
+00055a00: 4e54 5f31 203d 2073 656c 662e 6d61 696e  NT_1 = self.main
+00055a10: 5f77 696e 646f 772e 7072 6f6a 6563 742e  _window.project.
+00055a20: 7365 7373 696f 6e2e 6765 745f 646f 6375  session.get_docu
+00055a30: 6d65 6e74 735f 6e61 6d65 7328 0a20 2020  ments_names(.   
+00055a40: 2020 2020 2020 2020 2022 6375 7272 656e           "curren
+00055a50: 7422 0a20 2020 2020 2020 2029 5b30 5d0a  t".        )[0].
+00055a60: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
+00055a70: 655f 6564 6974 6f72 5f74 6162 7320 3d20  e_editor_tabs = 
+00055a80: 280a 2020 2020 2020 2020 2020 2020 7365  (.            se
+00055a90: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
+00055aa0: 6970 656c 696e 655f 6d61 6e61 6765 722e  ipeline_manager.
+00055ab0: 7069 7065 6c69 6e65 4564 6974 6f72 5461  pipelineEditorTa
+00055ac0: 6273 0a20 2020 2020 2020 2029 0a0a 2020  bs.        )..  
+00055ad0: 2020 2020 2020 2320 4164 6473 2074 6865        # Adds the
+00055ae0: 2070 726f 6365 7373 6573 2052 656e 616d   processes Renam
+00055af0: 652c 2063 7265 6174 6573 2074 6865 2022  e, creates the "
+00055b00: 7265 6e61 6d65 5f31 2220 6e6f 6465 0a20  rename_1" node. 
+00055b10: 2020 2020 2020 2070 726f 6365 7373 5f63         process_c
+00055b20: 6c61 7373 203d 2052 656e 616d 650a 2020  lass = Rename.  
+00055b30: 2020 2020 2020 7069 7065 6c69 6e65 5f65        pipeline_e
+00055b40: 6469 746f 725f 7461 6273 2e67 6574 5f63  ditor_tabs.get_c
+00055b50: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
+00055b60: 636c 6963 6b5f 706f 7320 3d20 5150 6f69  click_pos = QPoi
+00055b70: 6e74 2834 3530 2c20 3530 3029 0a20 2020  nt(450, 500).   
+00055b80: 2020 2020 2070 6970 656c 696e 655f 6564       pipeline_ed
+00055b90: 6974 6f72 5f74 6162 732e 6765 745f 6375  itor_tabs.get_cu
+00055ba0: 7272 656e 745f 6564 6974 6f72 2829 2e61  rrent_editor().a
+00055bb0: 6464 5f6e 616d 6564 5f70 726f 6365 7373  dd_named_process
+00055bc0: 280a 2020 2020 2020 2020 2020 2020 7072  (.            pr
+00055bd0: 6f63 6573 735f 636c 6173 730a 2020 2020  ocess_class.    
+00055be0: 2020 2020 290a 2020 2020 2020 2020 7069      ).        pi
+00055bf0: 7065 6c69 6e65 203d 2070 6970 656c 696e  peline = pipelin
+00055c00: 655f 6564 6974 6f72 5f74 6162 732e 6765  e_editor_tabs.ge
+00055c10: 745f 6375 7272 656e 745f 7069 7065 6c69  t_current_pipeli
+00055c20: 6e65 2829 0a0a 2020 2020 2020 2020 2320  ne()..        # 
+00055c30: 4578 706f 7274 7320 7468 6520 6d61 6e64  Exports the mand
+00055c40: 6174 6f72 7920 696e 7075 7420 616e 6420  atory input and 
+00055c50: 6f75 7470 7574 2070 6c75 6773 2066 6f72  output plugs for
+00055c60: 2022 7265 6e61 6d65 5f31 220a 2020 2020   "rename_1".    
+00055c70: 2020 2020 7069 7065 6c69 6e65 5f65 6469      pipeline_edi
+00055c80: 746f 725f 7461 6273 2e67 6574 5f63 7572  tor_tabs.get_cur
+00055c90: 7265 6e74 5f65 6469 746f 7228 292e 6375  rent_editor().cu
+00055ca0: 7272 656e 745f 6e6f 6465 5f6e 616d 6520  rrent_node_name 
+00055cb0: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
+00055cc0: 2272 656e 616d 655f 3122 0a20 2020 2020  "rename_1".     
+00055cd0: 2020 2029 0a20 2020 2020 2020 2028 0a20     ).        (. 
+00055ce0: 2020 2020 2020 2020 2020 2070 6970 656c             pipel
+00055cf0: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
+00055d00: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
+00055d10: 6f72 0a20 2020 2020 2020 2029 2829 2e65  or.        )().e
+00055d20: 7870 6f72 745f 756e 636f 6e6e 6563 7465  xport_unconnecte
+00055d30: 645f 6d61 6e64 6174 6f72 795f 696e 7075  d_mandatory_inpu
+00055d40: 7473 2829 0a20 2020 2020 2020 2028 0a20  ts().        (. 
+00055d50: 2020 2020 2020 2020 2020 2070 6970 656c             pipel
+00055d60: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
+00055d70: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
+00055d80: 6f72 0a20 2020 2020 2020 2029 2829 2e65  or.        )().e
+00055d90: 7870 6f72 745f 616c 6c5f 756e 636f 6e6e  xport_all_unconn
+00055da0: 6563 7465 645f 6f75 7470 7574 7328 290a  ected_outputs().
+00055db0: 0a20 2020 2020 2020 206f 6c64 5f73 6361  .        old_sca
+00055dc0: 6e5f 6e61 6d65 203d 2044 4f43 554d 454e  n_name = DOCUMEN
+00055dd0: 545f 312e 7370 6c69 7428 222f 2229 5b2d  T_1.split("/")[-
+00055de0: 315d 0a20 2020 2020 2020 206e 6577 5f73  1].        new_s
+00055df0: 6361 6e5f 6e61 6d65 203d 2022 6e65 775f  can_name = "new_
+00055e00: 6e61 6d65 2e6e 6969 220a 0a20 2020 2020  name.nii"..     
+00055e10: 2020 2023 2053 6574 7320 7468 6520 6d61     # Sets the ma
+00055e20: 6e64 6174 6f72 7920 706c 7567 2076 616c  ndatory plug val
+00055e30: 7565 7320 696e 2074 6865 2022 696e 7075  ues in the "inpu
+00055e40: 7473 2220 6e6f 6465 0a20 2020 2020 2020  ts" node.       
+00055e50: 2070 6970 656c 696e 652e 6e6f 6465 735b   pipeline.nodes[
+00055e60: 2222 5d2e 7365 745f 706c 7567 5f76 616c  ""].set_plug_val
+00055e70: 7565 2822 696e 5f66 696c 6522 2c20 444f  ue("in_file", DO
+00055e80: 4355 4d45 4e54 5f31 290a 2020 2020 2020  CUMENT_1).      
+00055e90: 2020 7069 7065 6c69 6e65 2e6e 6f64 6573    pipeline.nodes
+00055ea0: 5b22 225d 2e73 6574 5f70 6c75 675f 7661  [""].set_plug_va
+00055eb0: 6c75 6528 2266 6f72 6d61 745f 7374 7269  lue("format_stri
+00055ec0: 6e67 222c 206e 6577 5f73 6361 6e5f 6e61  ng", new_scan_na
+00055ed0: 6d65 290a 0a20 2020 2020 2020 2023 2043  me)..        # C
+00055ee0: 6861 6e67 6573 2074 6865 2022 5f6f 7574  hanges the "_out
+00055ef0: 5f66 696c 6522 2069 6e20 7468 6520 226f  _file" in the "o
+00055f00: 7574 7075 7473 2220 6e6f 6465 0a20 2020  utputs" node.   
+00055f10: 2020 2020 2070 6970 656c 696e 652e 6e6f       pipeline.no
+00055f20: 6465 735b 2222 5d2e 7365 745f 706c 7567  des[""].set_plug
+00055f30: 5f76 616c 7565 280a 2020 2020 2020 2020  _value(.        
+00055f40: 2020 2020 225f 6f75 745f 6669 6c65 222c      "_out_file",
+00055f50: 2044 4f43 554d 454e 545f 312e 7265 706c   DOCUMENT_1.repl
+00055f60: 6163 6528 6f6c 645f 7363 616e 5f6e 616d  ace(old_scan_nam
+00055f70: 652c 206e 6577 5f73 6361 6e5f 6e61 6d65  e, new_scan_name
+00055f80: 290a 2020 2020 2020 2020 290a 0a20 2020  ).        )..   
+00055f90: 2020 2020 2070 6970 656c 696e 655f 6d61       pipeline_ma
+00055fa0: 6e61 6765 7220 3d20 7365 6c66 2e6d 6169  nager = self.mai
+00055fb0: 6e5f 7769 6e64 6f77 2e70 6970 656c 696e  n_window.pipelin
+00055fc0: 655f 6d61 6e61 6765 720a 2020 2020 2020  e_manager.      
+00055fd0: 2020 7069 7065 6c69 6e65 5f6d 616e 6167    pipeline_manag
+00055fe0: 6572 2e77 6f72 6b66 6c6f 7720 3d20 776f  er.workflow = wo
+00055ff0: 726b 666c 6f77 5f66 726f 6d5f 7069 7065  rkflow_from_pipe
+00056000: 6c69 6e65 280a 2020 2020 2020 2020 2020  line(.          
+00056010: 2020 7069 7065 6c69 6e65 2c20 636f 6d70    pipeline, comp
+00056020: 6c65 7465 5f70 6172 616d 6574 6572 733d  lete_parameters=
+00056030: 5472 7565 0a20 2020 2020 2020 2029 0a0a  True.        )..
+00056040: 2020 2020 2020 2020 6a6f 6220 3d20 7069          job = pi
+00056050: 7065 6c69 6e65 5f6d 616e 6167 6572 2e77  peline_manager.w
+00056060: 6f72 6b66 6c6f 772e 6a6f 6273 5b30 5d0a  orkflow.jobs[0].
+00056070: 0a20 2020 2020 2020 2062 7269 636b 5f69  .        brick_i
+00056080: 6420 3d20 7374 7228 7575 6964 2e75 7569  d = str(uuid.uui
+00056090: 6434 2829 290a 2020 2020 2020 2020 6a6f  d4()).        jo
+000560a0: 622e 7575 6964 203d 2062 7269 636b 5f69  b.uuid = brick_i
+000560b0: 640a 2020 2020 2020 2020 7069 7065 6c69  d.        pipeli
+000560c0: 6e65 5f6d 616e 6167 6572 2e62 7269 636b  ne_manager.brick
+000560d0: 5f6c 6973 742e 6170 7065 6e64 2862 7269  _list.append(bri
+000560e0: 636b 5f69 6429 0a0a 2020 2020 2020 2020  ck_id)..        
+000560f0: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
+00056100: 2e70 726f 6a65 6374 2e73 6573 7369 6f6e  .project.session
+00056110: 2e61 6464 5f64 6f63 756d 656e 7428 0a20  .add_document(. 
+00056120: 2020 2020 2020 2020 2020 2043 4f4c 4c45             COLLE
+00056130: 4354 494f 4e5f 4252 4943 4b2c 2062 7269  CTION_BRICK, bri
+00056140: 636b 5f69 640a 2020 2020 2020 2020 290a  ck_id.        ).
+00056150: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
+00056160: 655f 6d61 6e61 6765 722e 5f72 6567 6973  e_manager._regis
+00056170: 7465 725f 6e6f 6465 5f69 6f5f 696e 5f64  ter_node_io_in_d
+00056180: 6174 6162 6173 6528 6a6f 622c 206a 6f62  atabase(job, job
+00056190: 2e70 726f 6365 7373 2829 290a 0a20 2020  .process())..   
+000561a0: 2020 2020 2023 2053 696d 756c 6174 6573       # Simulates
+000561b0: 2061 2027 5072 6f63 6573 734e 6f64 6528   a 'ProcessNode(
+000561c0: 2927 2061 7320 2770 726f 6365 7373 270a  )' as 'process'.
+000561d0: 2020 2020 2020 2020 7072 6f63 6573 735f          process_
+000561e0: 6e6f 6465 203d 2050 726f 6365 7373 4e6f  node = ProcessNo
+000561f0: 6465 2870 6970 656c 696e 652c 2022 222c  de(pipeline, "",
+00056200: 206a 6f62 2e70 726f 6365 7373 2829 290a   job.process()).
+00056210: 2020 2020 2020 2020 7069 7065 6c69 6e65          pipeline
+00056220: 5f6d 616e 6167 6572 2e5f 7265 6769 7374  _manager._regist
+00056230: 6572 5f6e 6f64 655f 696f 5f69 6e5f 6461  er_node_io_in_da
+00056240: 7461 6261 7365 286a 6f62 2c20 7072 6f63  tabase(job, proc
+00056250: 6573 735f 6e6f 6465 290a 0a20 2020 2020  ess_node)..     
+00056260: 2020 2023 2053 696d 756c 6174 6573 2061     # Simulates a
+00056270: 2027 5069 7065 6c69 6e65 4e6f 6465 2829   'PipelineNode()
+00056280: 2720 6173 2027 7072 6f63 6573 7327 0a20  ' as 'process'. 
+00056290: 2020 2020 2020 2070 6970 656c 696e 655f         pipeline_
+000562a0: 6e6f 6465 203d 2050 6970 656c 696e 654e  node = PipelineN
+000562b0: 6f64 6528 7069 7065 6c69 6e65 2c20 2222  ode(pipeline, ""
+000562c0: 2c20 6a6f 622e 7072 6f63 6573 7328 2929  , job.process())
+000562d0: 0a20 2020 2020 2020 2070 6970 656c 696e  .        pipelin
+000562e0: 655f 6d61 6e61 6765 722e 5f72 6567 6973  e_manager._regis
+000562f0: 7465 725f 6e6f 6465 5f69 6f5f 696e 5f64  ter_node_io_in_d
+00056300: 6174 6162 6173 6528 6a6f 622c 2070 6970  atabase(job, pip
+00056310: 656c 696e 655f 6e6f 6465 290a 0a20 2020  eline_node)..   
+00056320: 2020 2020 2023 2053 696d 756c 6174 6573       # Simulates
+00056330: 2061 2027 5377 6974 6368 2829 2720 6173   a 'Switch()' as
+00056340: 2027 7072 6f63 6573 7327 0a20 2020 2020   'process'.     
+00056350: 2020 2073 7769 7463 6820 3d20 5377 6974     switch = Swit
+00056360: 6368 2870 6970 656c 696e 652c 2022 222c  ch(pipeline, "",
+00056370: 205b 2222 5d2c 205b 2222 5d29 0a20 2020   [""], [""]).   
+00056380: 2020 2020 2073 7769 7463 682e 636f 6d70       switch.comp
+00056390: 6c65 7469 6f6e 5f65 6e67 696e 6520 3d20  letion_engine = 
+000563a0: 4e6f 6e65 0a20 2020 2020 2020 2070 6970  None.        pip
+000563b0: 656c 696e 655f 6d61 6e61 6765 722e 5f72  eline_manager._r
+000563c0: 6567 6973 7465 725f 6e6f 6465 5f69 6f5f  egister_node_io_
+000563d0: 696e 5f64 6174 6162 6173 6528 6a6f 622c  in_database(job,
+000563e0: 2073 7769 7463 6829 0a0a 2020 2020 2020   switch)..      
+000563f0: 2020 2320 5369 6d75 6c61 7465 7320 6120    # Simulates a 
+00056400: 6c69 7374 206f 6620 6f75 7470 7574 7320  list of outputs 
+00056410: 696e 2027 7072 6f63 6573 7327 0a20 2020  in 'process'.   
+00056420: 2020 2020 206a 6f62 2e70 726f 6365 7373       job.process
+00056430: 2829 2e6c 6973 745f 6f75 7470 7574 7320  ().list_outputs 
+00056440: 3d20 5b5d 0a20 2020 2020 2020 206a 6f62  = [].        job
+00056450: 2e70 726f 6365 7373 2829 2e6f 7574 7075  .process().outpu
+00056460: 7473 203d 205b 5d0a 2020 2020 2020 2020  ts = [].        
+00056470: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
+00056480: 2e5f 7265 6769 7374 6572 5f6e 6f64 655f  ._register_node_
+00056490: 696f 5f69 6e5f 6461 7461 6261 7365 286a  io_in_database(j
+000564a0: 6f62 2c20 6a6f 622e 7072 6f63 6573 7328  ob, job.process(
+000564b0: 2929 0a0a 2020 2020 6465 6620 7465 7374  ))..    def test
+000564c0: 5f72 656d 6f76 655f 7072 6f67 7265 7373  _remove_progress
+000564d0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+000564e0: 2222 224d 6f63 6b73 2061 6e20 6f62 6a65  """Mocks an obje
+000564f0: 6374 206f 6620 7468 6520 7069 7065 6c69  ct of the pipeli
+00056500: 6e65 206d 616e 6167 6572 2061 6e64 2072  ne manager and r
+00056510: 656d 6f76 6573 2069 7473 2070 726f 6772  emoves its progr
+00056520: 6573 732e 0a0a 2020 2020 2020 2020 2d20  ess...        - 
+00056530: 5465 7374 733a 2050 6970 656c 696e 654d  Tests: PipelineM
+00056540: 616e 6167 6572 5461 622e 7265 6d6f 7665  anagerTab.remove
+00056550: 5f70 726f 6772 6573 730a 2020 2020 2020  _progress.      
+00056560: 2020 2222 220a 0a20 2020 2020 2020 2070    """..        p
+00056570: 706c 5f6d 616e 6167 6572 203d 2073 656c  pl_manager = sel
+00056580: 662e 6d61 696e 5f77 696e 646f 772e 7069  f.main_window.pi
+00056590: 7065 6c69 6e65 5f6d 616e 6167 6572 0a0a  peline_manager..
+000565a0: 2020 2020 2020 2020 2320 4d6f 636b 7320          # Mocks 
+000565b0: 7468 6520 2770 726f 6772 6573 7327 206f  the 'progress' o
+000565c0: 626a 6563 740a 2020 2020 2020 2020 7070  bject.        pp
+000565d0: 6c5f 6d61 6e61 6765 722e 7072 6f67 7265  l_manager.progre
+000565e0: 7373 203d 2052 756e 5072 6f67 7265 7373  ss = RunProgress
+000565f0: 2870 706c 5f6d 616e 6167 6572 290a 0a20  (ppl_manager).. 
+00056600: 2020 2020 2020 2023 2052 656d 6f76 6573         # Removes
+00056610: 2070 726f 6772 6573 730a 2020 2020 2020   progress.      
+00056620: 2020 7070 6c5f 6d61 6e61 6765 722e 7265    ppl_manager.re
+00056630: 6d6f 7665 5f70 726f 6772 6573 7328 290a  move_progress().
+00056640: 0a20 2020 2020 2020 2023 2041 7373 6572  .        # Asser
+00056650: 7473 2074 6861 7420 7468 6520 6f62 6a65  ts that the obje
+00056660: 6374 2027 7072 6f67 7265 7373 2720 7761  ct 'progress' wa
+00056670: 7320 6465 6c65 7465 640a 2020 2020 2020  s deleted.      
+00056680: 2020 7365 6c66 2e61 7373 6572 7446 616c    self.assertFal
+00056690: 7365 2868 6173 6174 7472 2870 706c 5f6d  se(hasattr(ppl_m
+000566a0: 616e 6167 6572 2c20 2270 726f 6772 6573  anager, "progres
+000566b0: 7322 2929 0a0a 2020 2020 6465 6620 7465  s"))..    def te
+000566c0: 7374 5f72 756e 2873 656c 6629 3a0a 2020  st_run(self):.  
+000566d0: 2020 2020 2020 2222 2241 6464 7320 6120        """Adds a 
+000566e0: 7072 6f63 6573 732c 2063 7265 6174 6573  process, creates
+000566f0: 2061 2070 6970 656c 696e 6520 6d61 6e61   a pipeline mana
+00056700: 6765 7220 7072 6f67 7265 7373 206f 626a  ger progress obj
+00056710: 6563 7420 616e 640a 2020 2020 2020 2020  ect and.        
+00056720: 7472 6965 7320 746f 2072 756e 2069 7420  tries to run it 
+00056730: 7768 696c 6520 6d6f 636b 696e 6720 6d65  while mocking me
+00056740: 7468 6f64 7320 6f66 2074 6865 2070 6970  thods of the pip
+00056750: 656c 696e 6520 6d61 6e61 6765 722e 0a0a  eline manager...
+00056760: 2020 2020 2020 2020 2d20 5465 7374 733a          - Tests:
+00056770: 2052 756e 576f 726b 6572 2e72 756e 0a20   RunWorker.run. 
+00056780: 2020 2020 2020 2022 2222 0a0a 2020 2020         """..    
+00056790: 2020 2020 2320 5365 7473 2073 686f 7274      # Sets short
+000567a0: 6375 7473 2066 6f72 206f 626a 6563 7473  cuts for objects
+000567b0: 2074 6861 7420 6172 6520 6f66 7465 6e20   that are often 
+000567c0: 7573 6564 0a20 2020 2020 2020 2070 706c  used.        ppl
+000567d0: 5f6d 616e 6167 6572 203d 2073 656c 662e  _manager = self.
+000567e0: 6d61 696e 5f77 696e 646f 772e 7069 7065  main_window.pipe
+000567f0: 6c69 6e65 5f6d 616e 6167 6572 0a20 2020  line_manager.   
+00056800: 2020 2020 2070 706c 5f65 6474 5f74 6162       ppl_edt_tab
+00056810: 7320 3d20 7070 6c5f 6d61 6e61 6765 722e  s = ppl_manager.
+00056820: 7069 7065 6c69 6e65 4564 6974 6f72 5461  pipelineEditorTa
+00056830: 6273 0a20 2020 2020 2020 2070 706c 203d  bs.        ppl =
+00056840: 2070 706c 5f65 6474 5f74 6162 732e 6765   ppl_edt_tabs.ge
+00056850: 745f 6375 7272 656e 745f 7069 7065 6c69  t_current_pipeli
+00056860: 6e65 2829 0a0a 2020 2020 2020 2020 636f  ne()..        co
+00056870: 6e66 6967 203d 2043 6f6e 6669 6728 636f  nfig = Config(co
+00056880: 6e66 6967 5f70 6174 683d 7365 6c66 2e63  nfig_path=self.c
+00056890: 6f6e 6669 675f 7061 7468 290a 2020 2020  onfig_path).    
+000568a0: 2020 2020 666f 6c64 6572 203d 206f 732e      folder = os.
+000568b0: 7061 7468 2e61 6273 7061 7468 280a 2020  path.abspath(.  
+000568c0: 2020 2020 2020 2020 2020 6f73 2e70 6174            os.pat
+000568d0: 682e 6a6f 696e 280a 2020 2020 2020 2020  h.join(.        
+000568e0: 2020 2020 2020 2020 636f 6e66 6967 2e67          config.g
+000568f0: 6574 5f6d 6961 5f70 6174 6828 292c 0a20  et_mia_path(),. 
+00056900: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00056910: 6d69 6175 7464 6174 6122 2c0a 2020 2020  miautdata",.    
+00056920: 2020 2020 2020 2020 2020 2020 2272 6573              "res
+00056930: 6f75 7263 6573 222c 0a20 2020 2020 2020  ources",.       
+00056940: 2020 2020 2020 2020 2022 6d69 6122 2c0a           "mia",.
+00056950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00056960: 2270 726f 6a65 6374 5f38 222c 0a20 2020  "project_8",.   
+00056970: 2020 2020 2020 2020 2020 2020 2022 6461               "da
+00056980: 7461 222c 0a20 2020 2020 2020 2020 2020  ta",.           
+00056990: 2020 2020 2022 7261 775f 6461 7461 222c       "raw_data",
+000569a0: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
+000569b0: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+000569c0: 2020 4e49 495f 4649 4c45 5f31 203d 2028    NII_FILE_1 = (
+000569d0: 0a20 2020 2020 2020 2020 2020 2022 4775  .            "Gu
+000569e0: 6572 6265 742d 4336 2d32 3031 342d 5261  erbet-C6-2014-Ra
+000569f0: 742d 4b35 322d 5475 6265 3237 2d32 3031  t-K52-Tube27-201
+00056a00: 342d 3032 2d31 3431 3032 3331 372d 3031  4-02-14102317-01
+00056a10: 2d47 315f 220a 2020 2020 2020 2020 2020  -G1_".          
+00056a20: 2020 2247 7565 7262 6574 5f41 6e61 742d    "Guerbet_Anat-
+00056a30: 5241 5245 7076 6d2d 3030 3032 3230 5f30  RAREpvm-000220_0
+00056a40: 3030 2e6e 6969 220a 2020 2020 2020 2020  00.nii".        
+00056a50: 290a 0a20 2020 2020 2020 2044 4f43 554d  )..        DOCUM
+00056a60: 454e 545f 3120 3d20 6f73 2e70 6174 682e  ENT_1 = os.path.
+00056a70: 6162 7370 6174 6828 6f73 2e70 6174 682e  abspath(os.path.
+00056a80: 6a6f 696e 2866 6f6c 6465 722c 204e 4949  join(folder, NII
+00056a90: 5f46 494c 455f 3129 290a 0a20 2020 2020  _FILE_1))..     
+00056aa0: 2020 2023 2041 6464 7320 6120 5265 6e61     # Adds a Rena
+00056ab0: 6d65 2070 726f 6365 7373 6573 2c20 6372  me processes, cr
+00056ac0: 6561 7465 7320 7468 6520 2772 656e 616d  eates the 'renam
+00056ad0: 655f 3127 206e 6f64 650a 2020 2020 2020  e_1' node.      
+00056ae0: 2020 7070 6c5f 6564 745f 7461 6273 2e67    ppl_edt_tabs.g
+00056af0: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
+00056b00: 7228 292e 636c 6963 6b5f 706f 7320 3d20  r().click_pos = 
+00056b10: 5150 6f69 6e74 2834 3530 2c20 3530 3029  QPoint(450, 500)
+00056b20: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
+00056b30: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
+00056b40: 745f 6564 6974 6f72 2829 2e61 6464 5f6e  t_editor().add_n
+00056b50: 616d 6564 5f70 726f 6365 7373 2852 656e  amed_process(Ren
+00056b60: 616d 6529 0a0a 2020 2020 2020 2020 7070  ame)..        pp
+00056b70: 6c5f 6564 745f 7461 6273 2e67 6574 5f63  l_edt_tabs.get_c
+00056b80: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
+00056b90: 6578 706f 7274 5f75 6e63 6f6e 6e65 6374  export_unconnect
+00056ba0: 6564 5f6d 616e 6461 746f 7279 5f69 6e70  ed_mandatory_inp
+00056bb0: 7574 7328 290a 2020 2020 2020 2020 7070  uts().        pp
+00056bc0: 6c5f 6564 745f 7461 6273 2e67 6574 5f63  l_edt_tabs.get_c
+00056bd0: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
+00056be0: 6578 706f 7274 5f61 6c6c 5f75 6e63 6f6e  export_all_uncon
+00056bf0: 6e65 6374 6564 5f6f 7574 7075 7473 2829  nected_outputs()
+00056c00: 0a0a 2020 2020 2020 2020 2320 5365 7473  ..        # Sets
+00056c10: 2074 6865 206d 616e 6461 746f 7279 2070   the mandatory p
+00056c20: 6172 616d 6574 6572 730a 2020 2020 2020  arameters.      
+00056c30: 2020 7070 6c2e 6e6f 6465 735b 2222 5d2e    ppl.nodes[""].
+00056c40: 7365 745f 706c 7567 5f76 616c 7565 2822  set_plug_value("
+00056c50: 696e 5f66 696c 6522 2c20 444f 4355 4d45  in_file", DOCUME
+00056c60: 4e54 5f31 290a 2020 2020 2020 2020 7070  NT_1).        pp
+00056c70: 6c2e 6e6f 6465 735b 2222 5d2e 7365 745f  l.nodes[""].set_
+00056c80: 706c 7567 5f76 616c 7565 2822 666f 726d  plug_value("form
+00056c90: 6174 5f73 7472 696e 6722 2c20 226e 6577  at_string", "new
+00056ca0: 5f6e 616d 652e 6e69 6922 290a 0a20 2020  _name.nii")..   
+00056cb0: 2020 2020 2023 2043 7265 6174 6573 2061       # Creates a
+00056cc0: 2027 5275 6e50 726f 6772 6573 7327 206f   'RunProgress' o
+00056cd0: 626a 6563 740a 2020 2020 2020 2020 7070  bject.        pp
+00056ce0: 6c5f 6d61 6e61 6765 722e 7072 6f67 7265  l_manager.progre
+00056cf0: 7373 203d 2052 756e 5072 6f67 7265 7373  ss = RunProgress
+00056d00: 2870 706c 5f6d 616e 6167 6572 290a 0a20  (ppl_manager).. 
+00056d10: 2020 2020 2020 2023 204d 6f63 6b73 2061         # Mocks a
+00056d20: 206e 6f64 6520 7468 6174 2064 6f65 7320   node that does 
+00056d30: 6e6f 7420 6861 7665 2061 2070 726f 6365  not have a proce
+00056d40: 7373 2061 6e64 2061 206e 6f64 6520 7468  ss and a node th
+00056d50: 6174 2068 6173 0a20 2020 2020 2020 2023  at has.        #
+00056d60: 2061 2070 6970 656c 696e 6520 6173 2061   a pipeline as a
+00056d70: 2070 726f 6365 7373 0a20 2020 2020 2020   process.       
+00056d80: 2070 706c 2e6e 6f64 6573 5b22 7377 6974   ppl.nodes["swit
+00056d90: 6368 225d 203d 2053 7769 7463 6828 7070  ch"] = Switch(pp
+00056da0: 6c2c 2022 222c 205b 2222 5d2c 205b 2222  l, "", [""], [""
+00056db0: 5d29 0a20 2020 2020 2020 2070 706c 2e6e  ]).        ppl.n
+00056dc0: 6f64 6573 5b22 7069 7065 6c69 6e65 225d  odes["pipeline"]
+00056dd0: 203d 2050 726f 6365 7373 4e6f 6465 2870   = ProcessNode(p
+00056de0: 706c 2c20 2270 6970 656c 696e 6522 2c20  pl, "pipeline", 
+00056df0: 5069 7065 6c69 6e65 2829 290a 0a20 2020  Pipeline())..   
+00056e00: 2020 2020 2070 706c 5f6d 616e 6167 6572       ppl_manager
+00056e10: 2e70 726f 6772 6573 732e 776f 726b 6572  .progress.worker
+00056e20: 2e72 756e 2829 0a0a 2020 2020 2020 2020  .run()..        
+00056e30: 2320 4d6f 636b 7320 2767 6574 5f70 6970  # Mocks 'get_pip
+00056e40: 656c 696e 655f 6f72 5f70 726f 6365 7373  eline_or_process
+00056e50: 2720 746f 2072 6574 7572 6e20 6120 274e  ' to return a 'N
+00056e60: 6970 7970 6550 726f 6365 7373 2720 696e  ipypeProcess' in
+00056e70: 7374 6561 640a 2020 2020 2020 2020 2320  stead.        # 
+00056e80: 6f66 2061 2027 5069 7065 6c69 6e65 2720  of a 'Pipeline' 
+00056e90: 616e 6420 2770 6f73 7470 726f 6365 7373  and 'postprocess
+00056ea0: 5f70 6970 656c 696e 655f 6578 6563 7574  _pipeline_execut
+00056eb0: 696f 6e27 2074 6f20 7468 726f 7720 616e  ion' to throw an
+00056ec0: 0a20 2020 2020 2020 2023 2065 7863 6570  .        # excep
+00056ed0: 7469 6f6e 0a20 2020 2020 2020 2070 706c  tion.        ppl
+00056ee0: 5f6d 616e 6167 6572 2e70 726f 6772 6573  _manager.progres
+00056ef0: 7320 3d20 5275 6e50 726f 6772 6573 7328  s = RunProgress(
+00056f00: 7070 6c5f 6d61 6e61 6765 7229 0a20 2020  ppl_manager).   
+00056f10: 2020 2020 2023 2066 6d74 3a20 6f66 660a       # fmt: off.
+00056f20: 2020 2020 2020 2020 280a 2020 2020 2020          (.      
+00056f30: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
+00056f40: 722e 7072 6f67 7265 7373 2e77 6f72 6b65  r.progress.worke
+00056f50: 722e 7069 7065 6c69 6e65 5f6d 616e 6167  r.pipeline_manag
+00056f60: 6572 2e0a 2020 2020 2020 2020 2020 2020  er..            
+00056f70: 6765 745f 7069 7065 6c69 6e65 5f6f 725f  get_pipeline_or_
+00056f80: 7072 6f63 6573 730a 2020 2020 2020 2020  process.        
+00056f90: 2920 3d20 4d6f 636b 2872 6574 7572 6e5f  ) = Mock(return_
+00056fa0: 7661 6c75 653d 7070 6c2e 6e6f 6465 735b  value=ppl.nodes[
+00056fb0: 2272 656e 616d 655f 3122 5d2e 7072 6f63  "rename_1"].proc
+00056fc0: 6573 7329 0a20 2020 2020 2020 2028 0a20  ess).        (. 
+00056fd0: 2020 2020 2020 2020 2020 2070 706c 5f6d             ppl_m
+00056fe0: 616e 6167 6572 2e70 726f 6772 6573 732e  anager.progress.
+00056ff0: 776f 726b 6572 2e70 6970 656c 696e 655f  worker.pipeline_
+00057000: 6d61 6e61 6765 722e 0a20 2020 2020 2020  manager..       
+00057010: 2020 2020 2070 6f73 7470 726f 6365 7373       postprocess
+00057020: 5f70 6970 656c 696e 655f 6578 6563 7574  _pipeline_execut
+00057030: 696f 6e0a 2020 2020 2020 2020 2920 3d20  ion.        ) = 
+00057040: 4d6f 636b 2873 6964 655f 6566 6665 6374  Mock(side_effect
+00057050: 3d56 616c 7565 4572 726f 7228 2929 0a20  =ValueError()). 
+00057060: 2020 2020 2020 2023 2066 6d74 3a20 6f6e         # fmt: on
+00057070: 0a20 2020 2020 2020 2070 7269 6e74 2822  .        print("
+00057080: 5c6e 5c6e 2a2a 2061 6e20 6578 6365 7074  \n\n** an except
+00057090: 696f 6e20 6d65 7373 6167 6520 6973 2065  ion message is e
+000570a0: 7870 6563 7465 6420 6265 6c6f 775c 6e22  xpected below\n"
+000570b0: 290a 2020 2020 2020 2020 7070 6c5f 6d61  ).        ppl_ma
+000570c0: 6e61 6765 722e 7072 6f67 7265 7373 2e77  nager.progress.w
+000570d0: 6f72 6b65 722e 7275 6e28 290a 0a20 2020  orker.run()..   
+000570e0: 2020 2020 2023 204d 6f63 6b73 2061 6e20       # Mocks an 
+000570f0: 696e 7465 7272 7570 7469 6f6e 2072 6571  interruption req
+00057100: 7565 7374 0a20 2020 2020 2020 2070 706c  uest.        ppl
+00057110: 5f6d 616e 6167 6572 2e70 726f 6772 6573  _manager.progres
+00057120: 732e 776f 726b 6572 2e69 6e74 6572 7275  s.worker.interru
+00057130: 7074 5f72 6571 7565 7374 203d 2054 7275  pt_request = Tru
+00057140: 650a 0a20 2020 2020 2020 2070 706c 5f6d  e..        ppl_m
+00057150: 616e 6167 6572 2e70 726f 6772 6573 732e  anager.progress.
+00057160: 776f 726b 6572 2e72 756e 2829 0a0a 2020  worker.run()..  
+00057170: 2020 6465 6620 7465 7374 5f73 6176 6550    def test_saveP
+00057180: 6970 656c 696e 6528 7365 6c66 293a 0a20  ipeline(self):. 
+00057190: 2020 2020 2020 2022 2222 4d6f 636b 7320         """Mocks 
+000571a0: 6d65 7468 6f64 7320 6f66 2074 6865 2070  methods of the p
+000571b0: 6970 656c 696e 6520 6d61 6e61 6765 7220  ipeline manager 
+000571c0: 616e 6420 7472 6965 7320 746f 2073 6176  and tries to sav
+000571d0: 6520 7468 6520 7069 7065 6c69 6e65 0a20  e the pipeline. 
+000571e0: 2020 2020 2020 206f 7665 7220 7365 7665         over seve
+000571f0: 7261 6c20 636f 6e64 6974 696f 6e73 2e0a  ral conditions..
+00057200: 0a20 2020 2020 2020 202d 5465 7374 733a  .        -Tests:
+00057210: 2050 6970 656c 696e 654d 616e 6167 6572   PipelineManager
+00057220: 5461 622e 7361 7665 5069 7065 6c69 6e65  Tab.savePipeline
+00057230: 0a20 2020 2020 2020 2022 2222 0a0a 2020  .        """..  
+00057240: 2020 2020 2020 6465 6620 636c 6963 6b5f        def click_
+00057250: 7965 7328 7365 6c66 5f29 3a0a 2020 2020  yes(self_):.    
+00057260: 2020 2020 2020 2020 2222 2242 6c61 626c          """Blabl
+00057270: 6122 2222 0a0a 2020 2020 2020 2020 2020  a"""..          
+00057280: 2020 636c 6f73 655f 6275 7474 6f6e 203d    close_button =
+00057290: 2073 656c 665f 2e62 7574 746f 6e28 514d   self_.button(QM
+000572a0: 6573 7361 6765 426f 782e 5965 7329 0a20  essageBox.Yes). 
+000572b0: 2020 2020 2020 2020 2020 2051 5465 7374             QTest
+000572c0: 2e6d 6f75 7365 436c 6963 6b28 636c 6f73  .mouseClick(clos
+000572d0: 655f 6275 7474 6f6e 2c20 5174 2e4c 6566  e_button, Qt.Lef
+000572e0: 7442 7574 746f 6e29 0a0a 2020 2020 2020  tButton)..      
+000572f0: 2020 2320 5365 7420 7368 6f72 7463 7574    # Set shortcut
+00057300: 7320 666f 7220 6f62 6a65 6374 7320 7468  s for objects th
+00057310: 6174 2061 7265 206f 6674 656e 2075 7365  at are often use
+00057320: 640a 2020 2020 2020 2020 7070 6c5f 6d61  d.        ppl_ma
+00057330: 6e61 6765 7220 3d20 7365 6c66 2e6d 6169  nager = self.mai
+00057340: 6e5f 7769 6e64 6f77 2e70 6970 656c 696e  n_window.pipelin
+00057350: 655f 6d61 6e61 6765 720a 2020 2020 2020  e_manager.      
+00057360: 2020 7070 6c5f 6564 745f 7461 6273 203d    ppl_edt_tabs =
+00057370: 2070 706c 5f6d 616e 6167 6572 2e70 6970   ppl_manager.pip
+00057380: 656c 696e 6545 6469 746f 7254 6162 730a  elineEditorTabs.
+00057390: 0a20 2020 2020 2020 2063 6f6e 6669 6720  .        config 
+000573a0: 3d20 436f 6e66 6967 2863 6f6e 6669 675f  = Config(config_
+000573b0: 7061 7468 3d73 656c 662e 636f 6e66 6967  path=self.config
+000573c0: 5f70 6174 6829 0a20 2020 2020 2020 2070  _path).        p
+000573d0: 706c 5f70 6174 6820 3d20 6f73 2e70 6174  pl_path = os.pat
+000573e0: 682e 6a6f 696e 280a 2020 2020 2020 2020  h.join(.        
+000573f0: 2020 2020 636f 6e66 6967 2e67 6574 5f6d      config.get_m
+00057400: 6961 5f70 6174 6828 292c 0a20 2020 2020  ia_path(),.     
+00057410: 2020 2020 2020 2022 7072 6f63 6573 7365         "processe
+00057420: 7322 2c0a 2020 2020 2020 2020 2020 2020  s",.            
+00057430: 2255 7365 725f 7072 6f63 6573 7365 7322  "User_processes"
+00057440: 2c0a 2020 2020 2020 2020 2020 2020 2274  ,.            "t
+00057450: 6573 745f 7069 7065 6c69 6e65 5f31 2e70  est_pipeline_1.p
+00057460: 7922 2c0a 2020 2020 2020 2020 290a 0a20  y",.        ).. 
+00057470: 2020 2020 2020 2070 706c 5f65 6474 5f74         ppl_edt_t
+00057480: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
+00057490: 6564 6974 6f72 2829 2e5f 7069 7065 6c69  editor()._pipeli
+000574a0: 6e65 5f66 696c 656e 616d 6520 3d20 7070  ne_filename = pp
+000574b0: 6c5f 7061 7468 0a0a 2020 2020 2020 2020  l_path..        
+000574c0: 2320 5361 7665 2070 6970 656c 696e 6520  # Save pipeline 
+000574d0: 6173 2077 6974 6820 656d 7074 7920 6669  as with empty fi
+000574e0: 6c65 6e61 6d65 2c20 756e 6368 6563 6b65  lename, unchecke
+000574f0: 640a 2020 2020 2020 2020 7070 6c5f 6d61  d.        ppl_ma
+00057500: 6e61 6765 722e 7361 7665 5069 7065 6c69  nager.savePipeli
+00057510: 6e65 2875 6e63 6865 636b 3d54 7275 6529  ne(uncheck=True)
+00057520: 0a0a 2020 2020 2020 2020 2320 4d6f 636b  ..        # Mock
+00057530: 7320 2773 6176 6550 6970 656c 696e 6527  s 'savePipeline'
+00057540: 2066 726f 6d20 2770 706c 5f65 6474 5f74   from 'ppl_edt_t
+00057550: 6162 7327 0a20 2020 2020 2020 2070 706c  abs'.        ppl
+00057560: 5f65 6474 5f74 6162 732e 7361 7665 5f70  _edt_tabs.save_p
+00057570: 6970 656c 696e 6520 3d20 4d6f 636b 2872  ipeline = Mock(r
+00057580: 6574 7572 6e5f 7661 6c75 653d 226e 6f74  eturn_value="not
+00057590: 5f65 6d70 7479 2229 0a0a 2020 2020 2020  _empty")..      
+000575a0: 2020 2320 5361 7665 7320 7069 7065 6c69    # Saves pipeli
+000575b0: 6e65 2061 7320 7769 7468 2065 6d70 7479  ne as with empty
+000575c0: 2066 696c 656e 616d 652c 2063 6865 636b   filename, check
+000575d0: 6564 0a20 2020 2020 2020 2070 706c 5f6d  ed.        ppl_m
+000575e0: 616e 6167 6572 2e73 6176 6550 6970 656c  anager.savePipel
+000575f0: 696e 6528 756e 6368 6563 6b3d 5472 7565  ine(uncheck=True
+00057600: 290a 0a20 2020 2020 2020 2023 2053 6574  )..        # Set
+00057610: 7320 7468 6520 7061 7468 2074 6f20 7361  s the path to sa
+00057620: 7665 2074 6865 2070 6970 656c 696e 650a  ve the pipeline.
+00057630: 2020 2020 2020 2020 7070 6c5f 6564 745f          ppl_edt_
+00057640: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
+00057650: 5f65 6469 746f 7228 292e 5f70 6970 656c  _editor()._pipel
+00057660: 696e 655f 6669 6c65 6e61 6d65 203d 2070  ine_filename = p
+00057670: 706c 5f70 6174 680a 0a20 2020 2020 2020  pl_path..       
+00057680: 2023 2053 6176 6573 2070 6970 656c 696e   # Saves pipelin
+00057690: 6520 6173 2077 6974 6820 6669 6c6c 6564  e as with filled
+000576a0: 2066 696c 656e 616d 652c 2075 6e63 6865   filename, unche
+000576b0: 636b 0a20 2020 2020 2020 2070 706c 5f6d  ck.        ppl_m
+000576c0: 616e 6167 6572 2e73 6176 6550 6970 656c  anager.savePipel
+000576d0: 696e 6528 756e 6368 6563 6b3d 5472 7565  ine(uncheck=True
+000576e0: 290a 0a20 2020 2020 2020 2023 204d 6f63  )..        # Moc
+000576f0: 6b73 2065 7865 6375 7469 6e67 2061 2064  ks executing a d
+00057700: 6961 6c6f 6720 626f 7820 616e 6420 636c  ialog box and cl
+00057710: 6963 6b69 6e67 2063 6c6f 7365 0a20 2020  icking close.   
+00057720: 2020 2020 2051 4d65 7373 6167 6542 6f78       QMessageBox
+00057730: 2e65 7865 6320 3d20 6c61 6d62 6461 2073  .exec = lambda s
+00057740: 656c 665f 2c20 2a61 7267 733a 2073 656c  elf_, *args: sel
+00057750: 665f 2e63 6c6f 7365 2829 0a0a 2020 2020  f_.close()..    
+00057760: 2020 2020 2320 4162 6f72 7473 2070 6970      # Aborts pip
+00057770: 656c 696e 6520 7361 7669 6e67 2077 6974  eline saving wit
+00057780: 6820 6669 6c6c 6564 2066 696c 656e 616d  h filled filenam
+00057790: 650a 2020 2020 2020 2020 7070 6c5f 6d61  e.        ppl_ma
+000577a0: 6e61 6765 722e 7361 7665 5069 7065 6c69  nager.savePipeli
+000577b0: 6e65 2829 0a0a 2020 2020 2020 2020 2320  ne()..        # 
+000577c0: 4d6f 636b 7320 6578 6563 7574 696e 6720  Mocks executing 
+000577d0: 6120 6469 616c 6f67 2062 6f78 2061 6e64  a dialog box and
+000577e0: 2063 6c69 636b 696e 6720 7965 730a 2020   clicking yes.  
+000577f0: 2020 2020 2020 514d 6573 7361 6765 426f        QMessageBo
+00057800: 782e 6578 6563 203d 2063 6c69 636b 5f79  x.exec = click_y
+00057810: 6573 0a0a 2020 2020 2020 2020 2320 4163  es..        # Ac
+00057820: 6365 7074 2070 6970 656c 696e 6520 7361  cept pipeline sa
+00057830: 7669 6e67 2077 6974 6820 6669 6c6c 6564  ving with filled
+00057840: 2066 696c 656e 616d 650a 2020 2020 2020   filename.      
+00057850: 2020 7070 6c5f 6d61 6e61 6765 722e 7361    ppl_manager.sa
+00057860: 7665 5069 7065 6c69 6e65 2829 0a0a 2020  vePipeline()..  
+00057870: 2020 6465 6620 7465 7374 5f73 6176 6550    def test_saveP
+00057880: 6970 656c 696e 6541 7328 7365 6c66 293a  ipelineAs(self):
+00057890: 0a20 2020 2020 2020 2022 2222 4d6f 636b  .        """Mock
+000578a0: 7320 6120 6d65 7468 6f64 2066 726f 6d20  s a method from 
+000578b0: 7069 7065 6c69 6e65 206d 616e 6167 6572  pipeline manager
+000578c0: 2061 6e64 2073 6176 6573 2061 2070 6970   and saves a pip
+000578d0: 656c 696e 6520 756e 6465 720a 2020 2020  eline under.    
+000578e0: 2020 2020 616e 6f74 6865 7220 6e61 6d65      another name
+000578f0: 2e0a 0a20 2020 2020 2020 202d 2054 6573  ...        - Tes
+00057900: 7473 3a20 5069 7065 6c69 6e65 4d61 6e61  ts: PipelineMana
+00057910: 6765 7254 6162 2e73 6176 6550 6970 656c  gerTab.savePipel
+00057920: 696e 6541 730a 2020 2020 2020 2020 2222  ineAs.        ""
+00057930: 220a 0a20 2020 2020 2020 2023 2053 6574  "..        # Set
+00057940: 2073 686f 7274 6375 7473 2066 6f72 206f   shortcuts for o
+00057950: 626a 6563 7473 2074 6861 7420 6172 6520  bjects that are 
+00057960: 6f66 7465 6e20 7573 6564 0a20 2020 2020  often used.     
+00057970: 2020 2070 706c 5f6d 616e 6167 6572 203d     ppl_manager =
+00057980: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+00057990: 772e 7069 7065 6c69 6e65 5f6d 616e 6167  w.pipeline_manag
+000579a0: 6572 0a20 2020 2020 2020 2070 706c 5f65  er.        ppl_e
+000579b0: 6474 5f74 6162 7320 3d20 7070 6c5f 6d61  dt_tabs = ppl_ma
+000579c0: 6e61 6765 722e 7069 7065 6c69 6e65 4564  nager.pipelineEd
+000579d0: 6974 6f72 5461 6273 0a0a 2020 2020 2020  itorTabs..      
+000579e0: 2020 2320 5361 7665 7320 7069 7065 6c69    # Saves pipeli
+000579f0: 6e65 2077 6974 6820 656d 7074 7920 6669  ne with empty fi
+00057a00: 6c65 6e61 6d65 0a20 2020 2020 2020 2070  lename.        p
+00057a10: 706c 5f6d 616e 6167 6572 2e73 6176 6550  pl_manager.saveP
+00057a20: 6970 656c 696e 6541 7328 290a 0a20 2020  ipelineAs()..   
+00057a30: 2020 2020 2023 204d 6f63 6b73 2027 7361       # Mocks 'sa
+00057a40: 7665 5069 7065 6c69 6e65 2720 6672 6f6d  vePipeline' from
+00057a50: 2027 7070 6c5f 6564 745f 7461 6273 270a   'ppl_edt_tabs'.
+00057a60: 2020 2020 2020 2020 7070 6c5f 6564 745f          ppl_edt_
+00057a70: 7461 6273 2e73 6176 655f 7069 7065 6c69  tabs.save_pipeli
+00057a80: 6e65 203d 204d 6f63 6b28 7265 7475 726e  ne = Mock(return
+00057a90: 5f76 616c 7565 3d22 6e6f 745f 656d 7074  _value="not_empt
+00057aa0: 7922 290a 0a20 2020 2020 2020 2023 2053  y")..        # S
+00057ab0: 6176 6573 2070 6970 656c 696e 6520 7769  aves pipeline wi
+00057ac0: 7468 206e 6f74 2065 6d70 7479 2066 696c  th not empty fil
+00057ad0: 656e 616d 650a 2020 2020 2020 2020 7070  ename.        pp
+00057ae0: 6c5f 6d61 6e61 6765 722e 7361 7665 5069  l_manager.savePi
+00057af0: 7065 6c69 6e65 4173 2829 0a0a 2020 2020  pelineAs()..    
+00057b00: 6465 6620 7465 7374 5f73 6574 5f61 6e69  def test_set_ani
+00057b10: 6d5f 6672 616d 6528 7365 6c66 293a 0a20  m_frame(self):. 
+00057b20: 2020 2020 2020 2022 2222 5275 6e73 2074         """Runs t
+00057b30: 6865 2027 726f 7461 7469 6e67 4272 6169  he 'rotatingBrai
+00057b40: 6e56 4953 412e 6769 6627 2061 6e69 6d61  nVISA.gif' anima
+00057b50: 7469 6f6e 2e22 2222 0a0a 2020 2020 2020  tion."""..      
+00057b60: 2020 7069 7065 6c69 6e65 5f6d 616e 6167    pipeline_manag
+00057b70: 6572 203d 2073 656c 662e 6d61 696e 5f77  er = self.main_w
+00057b80: 696e 646f 772e 7069 7065 6c69 6e65 5f6d  indow.pipeline_m
+00057b90: 616e 6167 6572 0a0a 2020 2020 2020 2020  anager..        
+00057ba0: 636f 6e66 6967 203d 2043 6f6e 6669 6728  config = Config(
+00057bb0: 290a 2020 2020 2020 2020 736f 7572 6365  ).        source
+00057bc0: 735f 696d 6167 6573 5f64 6972 203d 2063  s_images_dir = c
+00057bd0: 6f6e 6669 672e 6765 7453 6f75 7263 6549  onfig.getSourceI
+00057be0: 6d61 6765 4469 7228 290a 2020 2020 2020  mageDir().      
+00057bf0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+00057c00: 6528 736f 7572 6365 735f 696d 6167 6573  e(sources_images
+00057c10: 5f64 6972 2920 2023 2069 6620 7468 6520  _dir)  # if the 
+00057c20: 7374 7269 6e67 2069 7320 6e6f 7420 656d  string is not em
+00057c30: 7074 790a 0a20 2020 2020 2020 2070 6970  pty..        pip
+00057c40: 656c 696e 655f 6d61 6e61 6765 722e 5f6d  eline_manager._m
+00057c50: 6d6f 7669 6520 3d20 5174 4775 692e 514d  movie = QtGui.QM
+00057c60: 6f76 6965 280a 2020 2020 2020 2020 2020  ovie(.          
+00057c70: 2020 6f73 2e70 6174 682e 6a6f 696e 2873    os.path.join(s
+00057c80: 6f75 7263 6573 5f69 6d61 6765 735f 6469  ources_images_di
+00057c90: 722c 2022 726f 7461 7469 6e67 4272 6169  r, "rotatingBrai
+00057ca0: 6e56 4953 412e 6769 6622 290a 2020 2020  nVISA.gif").    
+00057cb0: 2020 2020 290a 2020 2020 2020 2020 7069      ).        pi
+00057cc0: 7065 6c69 6e65 5f6d 616e 6167 6572 2e5f  peline_manager._
+00057cd0: 7365 745f 616e 696d 5f66 7261 6d65 2829  set_anim_frame()
+00057ce0: 0a0a 2020 2020 6465 6620 7465 7374 5f73  ..    def test_s
+00057cf0: 686f 775f 7374 6174 7573 2873 656c 6629  how_status(self)
+00057d00: 3a0a 2020 2020 2020 2020 2222 2253 686f  :.        """Sho
+00057d10: 7773 2074 6865 2073 7461 7475 7320 6f66  ws the status of
+00057d20: 2074 6865 2070 6970 656c 696e 6520 6578   the pipeline ex
+00057d30: 6563 7574 696f 6e2e 0a0a 2020 2020 2020  ecution...      
+00057d40: 2020 496e 6469 7265 6374 6c79 2074 6573    Indirectly tes
+00057d50: 7473 2053 7461 7475 7357 6964 6765 742e  ts StatusWidget.
+00057d60: 5f5f 696e 6974 5f5f 2061 6e64 0a20 2020  __init__ and.   
+00057d70: 2020 2020 2053 7461 7475 7357 6964 6765       StatusWidge
+00057d80: 742e 746f 6767 6c65 5f73 6f6d 615f 776f  t.toggle_soma_wo
+00057d90: 726b 666c 6f77 2e0a 0a20 2020 2020 2020  rkflow...       
+00057da0: 202d 5465 7374 733a 2050 6970 656c 696e   -Tests: Pipelin
+00057db0: 654d 616e 6167 6572 5461 622e 7465 7374  eManagerTab.test
+00057dc0: 5f73 686f 775f 7374 6174 7573 0a20 2020  _show_status.   
+00057dd0: 2020 2020 2022 2222 0a0a 2020 2020 2020       """..      
+00057de0: 2020 2320 5365 7420 7368 6f72 7463 7574    # Set shortcut
+00057df0: 7320 666f 7220 6f62 6a65 6374 7320 7468  s for objects th
+00057e00: 6174 2061 7265 206f 6674 656e 2075 7365  at are often use
+00057e10: 640a 2020 2020 2020 2020 7070 6c5f 6d61  d.        ppl_ma
+00057e20: 6e61 6765 7220 3d20 7365 6c66 2e6d 6169  nager = self.mai
+00057e30: 6e5f 7769 6e64 6f77 2e70 6970 656c 696e  n_window.pipelin
+00057e40: 655f 6d61 6e61 6765 720a 0a20 2020 2020  e_manager..     
+00057e50: 2020 2023 2053 686f 7773 2074 6865 2073     # Shows the s
+00057e60: 7461 7475 7320 6f66 2074 6865 2070 6970  tatus of the pip
+00057e70: 656c 696e 6527 7320 6578 6563 7574 696f  eline's executio
+00057e80: 6e0a 2020 2020 2020 2020 7070 6c5f 6d61  n.        ppl_ma
+00057e90: 6e61 6765 722e 7368 6f77 5f73 7461 7475  nager.show_statu
+00057ea0: 7328 290a 0a20 2020 2020 2020 2073 656c  s()..        sel
+00057eb0: 662e 6173 7365 7274 4973 4e6f 6e65 2870  f.assertIsNone(p
+00057ec0: 706c 5f6d 616e 6167 6572 2e73 7461 7475  pl_manager.statu
+00057ed0: 735f 7769 6467 6574 2e73 7766 5f77 6964  s_widget.swf_wid
+00057ee0: 6765 7429 0a0a 2020 2020 2020 2020 2320  get)..        # 
+00057ef0: 4372 6561 7465 7320 2770 706c 5f6d 616e  Creates 'ppl_man
+00057f00: 6167 6572 2e73 7461 7475 735f 7769 6467  ager.status_widg
+00057f10: 6574 2e73 7766 5f77 6964 6765 7427 2c20  et.swf_widget', 
+00057f20: 6e6f 7420 7669 7369 626c 6520 6279 0a20  not visible by. 
+00057f30: 2020 2020 2020 2023 2064 6566 6175 6c74         # default
+00057f40: 2028 7468 6520 6172 6775 6d65 6e74 2069   (the argument i
+00057f50: 7320 6972 7265 6c65 7661 6e74 290a 2020  s irrelevant).  
+00057f60: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
+00057f70: 722e 7374 6174 7573 5f77 6964 6765 742e  r.status_widget.
+00057f80: 746f 6767 6c65 5f73 6f6d 615f 776f 726b  toggle_soma_work
+00057f90: 666c 6f77 2846 616c 7365 290a 0a20 2020  flow(False)..   
+00057fa0: 2020 2020 2023 2041 7373 6572 7473 2074       # Asserts t
+00057fb0: 6861 7420 2773 7766 5f77 6964 6765 7427  hat 'swf_widget'
+00057fc0: 2068 6173 2062 6565 6e20 6372 6561 7465   has been create
+00057fd0: 6420 616e 6420 6973 2076 6973 6962 6c65  d and is visible
+00057fe0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00057ff0: 7365 7274 4973 4e6f 744e 6f6e 6528 7070  sertIsNotNone(pp
+00058000: 6c5f 6d61 6e61 6765 722e 7374 6174 7573  l_manager.status
+00058010: 5f77 6964 6765 742e 7377 665f 7769 6467  _widget.swf_widg
+00058020: 6574 290a 2020 2020 2020 2020 7365 6c66  et).        self
+00058030: 2e61 7373 6572 7446 616c 7365 2870 706c  .assertFalse(ppl
+00058040: 5f6d 616e 6167 6572 2e73 7461 7475 735f  _manager.status_
+00058050: 7769 6467 6574 2e73 7766 5f77 6964 6765  widget.swf_widge
+00058060: 742e 6973 5669 7369 626c 6528 2929 0a0a  t.isVisible())..
+00058070: 2020 2020 2020 2020 2320 546f 6767 6c65          # Toggle
+00058080: 7320 7669 7369 6269 6c69 7479 206f 6e0a  s visibility on.
+00058090: 2020 2020 2020 2020 7070 6c5f 6d61 6e61          ppl_mana
+000580a0: 6765 722e 7374 6174 7573 5f77 6964 6765  ger.status_widge
+000580b0: 742e 746f 6767 6c65 5f73 6f6d 615f 776f  t.toggle_soma_wo
+000580c0: 726b 666c 6f77 2846 616c 7365 290a 2020  rkflow(False).  
+000580d0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+000580e0: 7446 616c 7365 2870 706c 5f6d 616e 6167  tFalse(ppl_manag
+000580f0: 6572 2e73 7461 7475 735f 7769 6467 6574  er.status_widget
+00058100: 2e73 7766 5f77 6964 6765 742e 6973 5669  .swf_widget.isVi
+00058110: 7369 626c 6528 2929 0a0a 2020 2020 2020  sible())..      
+00058120: 2020 2320 546f 6767 6c65 7320 7669 7369    # Toggles visi
+00058130: 6269 6c69 7479 206f 6666 0a20 2020 2020  bility off.     
+00058140: 2020 2070 706c 5f6d 616e 6167 6572 2e73     ppl_manager.s
+00058150: 7461 7475 735f 7769 6467 6574 2e74 6f67  tatus_widget.tog
+00058160: 676c 655f 736f 6d61 5f77 6f72 6b66 6c6f  gle_soma_workflo
+00058170: 7728 5472 7565 290a 2020 2020 2020 2020  w(True).        
+00058180: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
+00058190: 7070 6c5f 6d61 6e61 6765 722e 7374 6174  ppl_manager.stat
+000581a0: 7573 5f77 6964 6765 742e 7377 665f 7769  us_widget.swf_wi
+000581b0: 6467 6574 2e69 7356 6973 6962 6c65 2829  dget.isVisible()
+000581c0: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
+000581d0: 7374 6f70 5f65 7865 6375 7469 6f6e 2873  stop_execution(s
+000581e0: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+000581f0: 2253 686f 7773 2074 6865 2073 7461 7475  "Shows the statu
+00058200: 7320 7769 6e64 6f77 206f 6620 7468 6520  s window of the 
+00058210: 7069 7065 6c69 6e65 206d 616e 6167 6572  pipeline manager
+00058220: 2e0a 0a20 2020 2020 2020 202d 2054 6573  ...        - Tes
+00058230: 7473 3a20 5069 7065 6c69 6e65 4d61 6e61  ts: PipelineMana
+00058240: 6765 7254 6162 2e74 6573 745f 7368 6f77  gerTab.test_show
+00058250: 5f73 7461 7475 730a 2020 2020 2020 2020  _status.        
+00058260: 2222 220a 0a20 2020 2020 2020 2023 2053  """..        # S
+00058270: 6574 2073 686f 7274 6375 7473 2066 6f72  et shortcuts for
+00058280: 206f 626a 6563 7473 2074 6861 7420 6172   objects that ar
+00058290: 6520 6f66 7465 6e20 7573 6564 0a20 2020  e often used.   
+000582a0: 2020 2020 2070 706c 5f6d 616e 6167 6572       ppl_manager
+000582b0: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
+000582c0: 646f 772e 7069 7065 6c69 6e65 5f6d 616e  dow.pipeline_man
+000582d0: 6167 6572 0a0a 2020 2020 2020 2020 2320  ager..        # 
+000582e0: 4372 6561 7465 7320 6120 2752 756e 5072  Creates a 'RunPr
+000582f0: 6f67 7265 7373 2720 6f62 6a65 6374 0a20  ogress' object. 
+00058300: 2020 2020 2020 2070 706c 5f6d 616e 6167         ppl_manag
+00058310: 6572 2e70 726f 6772 6573 7320 3d20 5275  er.progress = Ru
+00058320: 6e50 726f 6772 6573 7328 7070 6c5f 6d61  nProgress(ppl_ma
+00058330: 6e61 6765 7229 0a0a 2020 2020 2020 2020  nager)..        
+00058340: 7070 6c5f 6d61 6e61 6765 722e 7374 6f70  ppl_manager.stop
+00058350: 5f65 7865 6375 7469 6f6e 2829 0a0a 2020  _execution()..  
+00058360: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00058370: 7454 7275 6528 7070 6c5f 6d61 6e61 6765  tTrue(ppl_manage
+00058380: 722e 7072 6f67 7265 7373 2e77 6f72 6b65  r.progress.worke
+00058390: 722e 696e 7465 7272 7570 745f 7265 7175  r.interrupt_requ
+000583a0: 6573 7429 0a0a 2020 2020 6465 6620 7465  est)..    def te
+000583b0: 7374 5f75 6e64 6f5f 7265 646f 2873 656c  st_undo_redo(sel
+000583c0: 6629 3a0a 2020 2020 2020 2020 2222 2254  f):.        """T
+000583d0: 6573 7473 2074 6865 2075 6e64 6f2f 7265  ests the undo/re
+000583e0: 646f 2061 6374 696f 6e2e 2222 220a 0a20  do action.""".. 
+000583f0: 2020 2020 2020 2063 6f6e 6669 6720 3d20         config = 
+00058400: 436f 6e66 6967 2863 6f6e 6669 675f 7061  Config(config_pa
+00058410: 7468 3d73 656c 662e 636f 6e66 6967 5f70  th=self.config_p
+00058420: 6174 6829 0a20 2020 2020 2020 2063 6f6e  ath).        con
+00058430: 7472 6f6c 5631 5f76 6572 203d 2063 6f6e  trolV1_ver = con
+00058440: 6669 672e 6973 436f 6e74 726f 6c56 3128  fig.isControlV1(
+00058450: 290a 0a20 2020 2020 2020 2023 2053 7769  )..        # Swi
+00058460: 7463 6820 746f 2056 3120 6e6f 6465 2063  tch to V1 node c
+00058470: 6f6e 7472 6f6c 6c65 7220 4755 492c 2069  ontroller GUI, i
+00058480: 6620 6e65 6365 7373 6172 790a 2020 2020  f necessary.    
+00058490: 2020 2020 6966 206e 6f74 2063 6f6e 7472      if not contr
+000584a0: 6f6c 5631 5f76 6572 3a0a 2020 2020 2020  olV1_ver:.      
+000584b0: 2020 2020 2020 636f 6e66 6967 2e73 6574        config.set
+000584c0: 436f 6e74 726f 6c56 3128 5472 7565 290a  ControlV1(True).
+000584d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000584e0: 2e72 6573 7461 7274 5f4d 4941 2829 0a0a  .restart_MIA()..
+000584f0: 2020 2020 2020 2020 2320 5365 7420 7368          # Set sh
+00058500: 6f72 7463 7574 7320 666f 7220 6f62 6a65  ortcuts for obje
+00058510: 6374 7320 7468 6174 2061 7265 206f 6674  cts that are oft
+00058520: 656e 2075 7365 640a 2020 2020 2020 2020  en used.        
+00058530: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
+00058540: 203d 2073 656c 662e 6d61 696e 5f77 696e   = self.main_win
+00058550: 646f 772e 7069 7065 6c69 6e65 5f6d 616e  dow.pipeline_man
+00058560: 6167 6572 0a20 2020 2020 2020 2070 6970  ager.        pip
+00058570: 656c 696e 655f 6564 6974 6f72 5f74 6162  eline_editor_tab
+00058580: 7320 3d20 280a 2020 2020 2020 2020 2020  s = (.          
+00058590: 2020 7365 6c66 2e6d 6169 6e5f 7769 6e64    self.main_wind
+000585a0: 6f77 2e70 6970 656c 696e 655f 6d61 6e61  ow.pipeline_mana
+000585b0: 6765 722e 7069 7065 6c69 6e65 4564 6974  ger.pipelineEdit
+000585c0: 6f72 5461 6273 0a20 2020 2020 2020 2029  orTabs.        )
+000585d0: 0a0a 2020 2020 2020 2020 2320 4372 6561  ..        # Crea
+000585e0: 7465 7320 6120 6e65 7720 7072 6f6a 6563  tes a new projec
+000585f0: 7420 666f 6c64 6572 2061 6e64 2061 6464  t folder and add
+00058600: 7320 6f6e 6520 646f 6375 6d65 6e74 2074  s one document t
+00058610: 6f20 7468 650a 2020 2020 2020 2020 2320  o the.        # 
+00058620: 7072 6f6a 6563 740a 2020 2020 2020 2020  project.        
+00058630: 2320 7465 7374 5f70 726f 6a5f 7061 7468  # test_proj_path
+00058640: 203d 2073 656c 662e 6765 745f 6e65 775f   = self.get_new_
+00058650: 7465 7374 5f70 726f 6a65 6374 2829 0a20  test_project(). 
+00058660: 2020 2020 2020 2023 2066 6f6c 6465 7220         # folder 
+00058670: 3d20 6f73 2e70 6174 682e 6a6f 696e 2874  = os.path.join(t
+00058680: 6573 745f 7072 6f6a 5f70 6174 682c 2027  est_proj_path, '
+00058690: 6461 7461 272c 2027 7261 775f 6461 7461  data', 'raw_data
+000586a0: 2729 0a20 2020 2020 2020 2023 204e 4949  ').        # NII
+000586b0: 5f46 494c 455f 3120 3d20 2827 4775 6572  _FILE_1 = ('Guer
+000586c0: 6265 742d 4336 2d32 3031 342d 5261 742d  bet-C6-2014-Rat-
+000586d0: 4b35 322d 5475 6265 3237 2d32 3031 342d  K52-Tube27-2014-
+000586e0: 3032 2d31 3431 3032 3331 372d 0a20 2020  02-14102317-.   
+000586f0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00058700: 2020 2020 2020 2020 2020 2020 2730 342d              '04-
+00058710: 4733 5f47 7565 7262 6574 5f4d 4445 4654  G3_Guerbet_MDEFT
+00058720: 2d4d 4445 4654 7076 6d2d 3030 3039 3430  -MDEFTpvm-000940
+00058730: 5f38 3030 2e6e 6969 2729 0a20 2020 2020  _800.nii').     
+00058740: 2020 2023 2044 4f43 554d 454e 545f 3120     # DOCUMENT_1 
+00058750: 3d20 6f73 2e70 6174 682e 6162 7370 6174  = os.path.abspat
+00058760: 6828 6f73 2e70 6174 682e 6a6f 696e 2866  h(os.path.join(f
+00058770: 6f6c 6465 722c 204e 4949 5f46 494c 455f  older, NII_FILE_
+00058780: 3129 290a 0a20 2020 2020 2020 2023 2043  1))..        # C
+00058790: 7265 6174 6573 2061 2070 726f 6a65 6374  reates a project
+000587a0: 2077 6974 6820 616e 6f74 6865 7220 7072   with another pr
+000587b0: 6f6a 6563 7420 616c 7265 6164 7920 6f70  oject already op
+000587c0: 656e 6564 0a20 2020 2020 2020 2023 2073  ened.        # s
+000587d0: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+000587e0: 6461 7461 5f62 726f 7773 6572 2e74 6162  data_browser.tab
+000587f0: 6c65 5f64 6174 612e 6164 645f 7061 7468  le_data.add_path
+00058800: 2829 0a0a 2020 2020 2020 2020 2320 706f  ()..        # po
+00058810: 705f 7570 5f61 6464 5f70 6174 6820 3d20  p_up_add_path = 
+00058820: 2873 656c 662e 6d61 696e 5f77 696e 646f  (self.main_windo
+00058830: 772e 6461 7461 5f62 726f 7773 6572 2e0a  w.data_browser..
+00058840: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00058850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00058860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00058870: 2020 7461 626c 655f 6461 7461 2e70 6f70    table_data.pop
+00058880: 5f75 705f 6164 645f 7061 7468 290a 0a20  _up_add_path).. 
+00058890: 2020 2020 2020 2023 2070 6f70 5f75 705f         # pop_up_
+000588a0: 6164 645f 7061 7468 2e66 696c 655f 6c69  add_path.file_li
+000588b0: 6e65 5f65 6469 742e 7365 7454 6578 7428  ne_edit.setText(
+000588c0: 444f 4355 4d45 4e54 5f31 290a 2020 2020  DOCUMENT_1).    
+000588d0: 2020 2020 2320 706f 705f 7570 5f61 6464      # pop_up_add
+000588e0: 5f70 6174 682e 7361 7665 5f70 6174 6828  _path.save_path(
+000588f0: 290a 0a20 2020 2020 2020 2023 2073 656c  )..        # sel
+00058900: 662e 6d61 696e 5f77 696e 646f 772e 756e  f.main_window.un
+00058910: 646f 2829 0a0a 2020 2020 2020 2020 2320  do()..        # 
+00058920: 7365 6c66 2e6d 6169 6e5f 7769 6e64 6f77  self.main_window
+00058930: 2e72 6564 6f28 290a 0a20 2020 2020 2020  .redo()..       
+00058940: 2023 204d 6f63 6b73 206e 6f74 2073 6176   # Mocks not sav
+00058950: 696e 6720 7468 6520 7069 7065 6c69 6e65  ing the pipeline
+00058960: 0a20 2020 2020 2020 2023 2051 4d65 7373  .        # QMess
+00058970: 6167 6542 6f78 2e65 7865 6320 3d20 6c61  ageBox.exec = la
+00058980: 6d62 6461 2073 656c 665f 2c20 2a61 7267  mbda self_, *arg
+00058990: 3a20 7365 6c66 5f2e 6275 7474 6f6e 7328  : self_.buttons(
+000589a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000589b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000589c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000589d0: 2020 2020 2020 2020 2020 2020 295b 2d31              )[-1
+000589e0: 5d2e 636c 6963 6b65 642e 656d 6974 2829  ].clicked.emit()
+000589f0: 0a0a 2020 2020 2020 2020 2320 5377 6974  ..        # Swit
+00058a00: 6368 6573 2074 6f20 7069 7065 6c69 6e65  ches to pipeline
+00058a10: 206d 616e 6167 6572 0a20 2020 2020 2020   manager.       
+00058a20: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+00058a30: 772e 7461 6273 2e73 6574 4375 7272 656e  w.tabs.setCurren
+00058a40: 7449 6e64 6578 2832 290a 0a20 2020 2020  tIndex(2)..     
+00058a50: 2020 2023 2041 6464 2061 2053 6d6f 6f74     # Add a Smoot
+00058a60: 6820 7072 6f63 6573 7320 3d3e 2063 7265  h process => cre
+00058a70: 6174 6573 2061 206e 6f64 6520 6361 6c6c  ates a node call
+00058a80: 6564 2022 736d 6f6f 7468 5f31 222c 0a20  ed "smooth_1",. 
+00058a90: 2020 2020 2020 2023 2074 6573 7420 6966         # test if
+00058aa0: 2053 6d6f 6f74 685f 3120 6973 2061 206e   Smooth_1 is a n
+00058ab0: 6f64 6520 696e 2074 6865 2063 7572 7265  ode in the curre
+00058ac0: 6e74 2070 6970 656c 696e 6520 2f20 6564  nt pipeline / ed
+00058ad0: 6974 6f72 0a20 2020 2020 2020 2070 726f  itor.        pro
+00058ae0: 6365 7373 5f63 6c61 7373 203d 2053 6d6f  cess_class = Smo
+00058af0: 6f74 680a 2020 2020 2020 2020 7069 7065  oth.        pipe
+00058b00: 6c69 6e65 5f65 6469 746f 725f 7461 6273  line_editor_tabs
+00058b10: 2e67 6574 5f63 7572 7265 6e74 5f65 6469  .get_current_edi
+00058b20: 746f 7228 292e 636c 6963 6b5f 706f 7320  tor().click_pos 
+00058b30: 3d20 5150 6f69 6e74 2834 3530 2c20 3530  = QPoint(450, 50
+00058b40: 3029 0a20 2020 2020 2020 2070 6970 656c  0).        pipel
+00058b50: 696e 655f 6564 6974 6f72 5f74 6162 732e  ine_editor_tabs.
+00058b60: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
+00058b70: 6f72 2829 2e61 6464 5f6e 616d 6564 5f70  or().add_named_p
+00058b80: 726f 6365 7373 280a 2020 2020 2020 2020  rocess(.        
+00058b90: 2020 2020 7072 6f63 6573 735f 636c 6173      process_clas
+00058ba0: 730a 2020 2020 2020 2020 290a 0a20 2020  s.        )..   
+00058bb0: 2020 2020 2070 6970 656c 696e 6520 3d20       pipeline = 
+00058bc0: 7069 7065 6c69 6e65 5f65 6469 746f 725f  pipeline_editor_
+00058bd0: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
+00058be0: 5f70 6970 656c 696e 6528 290a 2020 2020  _pipeline().    
+00058bf0: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
+00058c00: 7275 6528 2273 6d6f 6f74 685f 3122 2069  rue("smooth_1" i
+00058c10: 6e20 7069 7065 6c69 6e65 2e6e 6f64 6573  n pipeline.nodes
+00058c20: 2e6b 6579 7328 2929 0a0a 2020 2020 2020  .keys())..      
+00058c30: 2020 2320 556e 646f 2028 7265 6d6f 7665    # Undo (remove
+00058c40: 2074 6865 206e 6f64 6529 2c20 7465 7374   the node), test
+00058c50: 2069 6620 7468 6520 6e6f 6465 2077 6173   if the node was
+00058c60: 2072 656d 6f76 6564 0a20 2020 2020 2020   removed.       
+00058c70: 2070 6970 656c 696e 655f 6d61 6e61 6765   pipeline_manage
+00058c80: 722e 756e 646f 2829 0a20 2020 2020 2020  r.undo().       
+00058c90: 2073 656c 662e 6173 7365 7274 4661 6c73   self.assertFals
+00058ca0: 6528 2273 6d6f 6f74 685f 3122 2069 6e20  e("smooth_1" in 
+00058cb0: 7069 7065 6c69 6e65 2e6e 6f64 6573 2e6b  pipeline.nodes.k
+00058cc0: 6579 7328 2929 0a0a 2020 2020 2020 2020  eys())..        
+00058cd0: 2320 5265 646f 2028 6164 6420 6167 6169  # Redo (add agai
+00058ce0: 6e20 7468 6520 6e6f 6465 292c 2074 6573  n the node), tes
+00058cf0: 7420 6966 2074 6865 206e 6f64 6520 7761  t if the node wa
+00058d00: 7320 6164 6465 640a 2020 2020 2020 2020  s added.        
+00058d10: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
+00058d20: 2e72 6564 6f28 290a 2020 2020 2020 2020  .redo().        
+00058d30: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
+00058d40: 2273 6d6f 6f74 685f 3122 2069 6e20 7069  "smooth_1" in pi
+00058d50: 7065 6c69 6e65 2e6e 6f64 6573 2e6b 6579  peline.nodes.key
+00058d60: 7328 2929 0a0a 2020 2020 2020 2020 2320  s())..        # 
+00058d70: 4465 6c65 7465 2074 6865 206e 6f64 652c  Delete the node,
+00058d80: 2074 6573 7420 6966 2074 6865 206e 6f64   test if the nod
+00058d90: 6520 7761 7320 7265 6d6f 7665 640a 2020  e was removed.  
+00058da0: 2020 2020 2020 7069 7065 6c69 6e65 5f65        pipeline_e
+00058db0: 6469 746f 725f 7461 6273 2e67 6574 5f63  ditor_tabs.get_c
+00058dc0: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
+00058dd0: 6375 7272 656e 745f 6e6f 6465 5f6e 616d  current_node_nam
+00058de0: 6520 3d20 280a 2020 2020 2020 2020 2020  e = (.          
+00058df0: 2020 2273 6d6f 6f74 685f 3122 0a20 2020    "smooth_1".   
+00058e00: 2020 2020 2029 0a20 2020 2020 2020 2070       ).        p
+00058e10: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
+00058e20: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
+00058e30: 6564 6974 6f72 2829 2e64 656c 5f6e 6f64  editor().del_nod
+00058e40: 6528 290a 2020 2020 2020 2020 7365 6c66  e().        self
+00058e50: 2e61 7373 6572 7446 616c 7365 2822 736d  .assertFalse("sm
+00058e60: 6f6f 7468 5f31 2220 696e 2070 6970 656c  ooth_1" in pipel
+00058e70: 696e 652e 6e6f 6465 732e 6b65 7973 2829  ine.nodes.keys()
+00058e80: 290a 0a20 2020 2020 2020 2023 2055 6e64  )..        # Und
+00058e90: 6f20 2861 6464 2061 6761 696e 2074 6865  o (add again the
+00058ea0: 206e 6f64 6529 2c20 7465 7374 2069 6620   node), test if 
+00058eb0: 7468 6520 6e6f 6465 2077 6173 2061 6464  the node was add
+00058ec0: 6564 0a20 2020 2020 2020 2070 6970 656c  ed.        pipel
+00058ed0: 696e 655f 6d61 6e61 6765 722e 756e 646f  ine_manager.undo
+00058ee0: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
+00058ef0: 6173 7365 7274 5472 7565 2822 736d 6f6f  assertTrue("smoo
+00058f00: 7468 5f31 2220 696e 2070 6970 656c 696e  th_1" in pipelin
+00058f10: 652e 6e6f 6465 732e 6b65 7973 2829 290a  e.nodes.keys()).
+00058f20: 0a20 2020 2020 2020 2023 2052 6564 6f20  .        # Redo 
+00058f30: 2864 656c 6574 6520 6167 6169 6e20 7468  (delete again th
+00058f40: 6520 6e6f 6465 292c 2074 6573 7420 6966  e node), test if
+00058f50: 2074 6865 206e 6f64 6520 7761 7320 7265   the node was re
+00058f60: 6d6f 7665 640a 2020 2020 2020 2020 7069  moved.        pi
+00058f70: 7065 6c69 6e65 5f6d 616e 6167 6572 2e72  peline_manager.r
+00058f80: 6564 6f28 290a 2020 2020 2020 2020 7365  edo().        se
+00058f90: 6c66 2e61 7373 6572 7446 616c 7365 2822  lf.assertFalse("
+00058fa0: 736d 6f6f 7468 3122 2069 6e20 7069 7065  smooth1" in pipe
+00058fb0: 6c69 6e65 2e6e 6f64 6573 2e6b 6579 7328  line.nodes.keys(
+00058fc0: 2929 0a0a 2020 2020 2020 2020 2320 4164  ))..        # Ad
+00058fd0: 6469 6e67 2061 206e 6577 2053 6d6f 6f74  ding a new Smoot
+00058fe0: 6820 7072 6f63 6573 7320 3d3e 2063 7265  h process => cre
+00058ff0: 6174 6573 2061 206e 6f64 6520 6361 6c6c  ates a node call
+00059000: 6564 2022 736d 6f6f 7468 5f31 220a 2020  ed "smooth_1".  
+00059010: 2020 2020 2020 7069 7065 6c69 6e65 5f65        pipeline_e
+00059020: 6469 746f 725f 7461 6273 2e67 6574 5f63  ditor_tabs.get_c
+00059030: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
+00059040: 636c 6963 6b5f 706f 7320 3d20 5150 6f69  click_pos = QPoi
+00059050: 6e74 2834 3530 2c20 3530 3029 0a20 2020  nt(450, 500).   
+00059060: 2020 2020 2070 6970 656c 696e 655f 6564       pipeline_ed
+00059070: 6974 6f72 5f74 6162 732e 6765 745f 6375  itor_tabs.get_cu
+00059080: 7272 656e 745f 6564 6974 6f72 2829 2e61  rrent_editor().a
+00059090: 6464 5f6e 616d 6564 5f70 726f 6365 7373  dd_named_process
+000590a0: 280a 2020 2020 2020 2020 2020 2020 7072  (.            pr
+000590b0: 6f63 6573 735f 636c 6173 730a 2020 2020  ocess_class.    
+000590c0: 2020 2020 290a 0a20 2020 2020 2020 2023      )..        #
+000590d0: 2045 7870 6f72 7420 7468 6520 226f 7574   Export the "out
+000590e0: 5f70 7265 6669 7822 2070 6c75 6720 6173  _prefix" plug as
+000590f0: 2022 7072 6566 6978 5f73 6d6f 6f74 6822   "prefix_smooth"
+00059100: 2069 6e20 496e 7075 7420 6e6f 6465 2c20   in Input node, 
+00059110: 7465 7374 0a20 2020 2020 2020 2023 2069  test.        # i
+00059120: 6620 7468 6520 496e 7075 7420 6e6f 6465  f the Input node
+00059130: 2068 6176 6520 6120 7072 6566 6978 5f73   have a prefix_s
+00059140: 6d6f 6f74 6820 706c 7567 0a20 2020 2020  mooth plug.     
+00059150: 2020 2070 6970 656c 696e 655f 6564 6974     pipeline_edit
+00059160: 6f72 5f74 6162 732e 6765 745f 6375 7272  or_tabs.get_curr
+00059170: 656e 745f 6564 6974 6f72 2829 2e5f 6578  ent_editor()._ex
+00059180: 706f 7274 5f70 6c75 6728 0a20 2020 2020  port_plug(.     
+00059190: 2020 2020 2020 2074 656d 705f 706c 7567         temp_plug
+000591a0: 5f6e 616d 653d 2822 736d 6f6f 7468 5f31  _name=("smooth_1
+000591b0: 222c 2022 6f75 745f 7072 6566 6978 2229  ", "out_prefix")
+000591c0: 2c0a 2020 2020 2020 2020 2020 2020 7069  ,.            pi
+000591d0: 7065 6c69 6e65 5f70 6172 616d 6574 6572  peline_parameter
+000591e0: 3d22 7072 6566 6978 5f73 6d6f 6f74 6822  ="prefix_smooth"
+000591f0: 2c0a 2020 2020 2020 2020 2020 2020 6f70  ,.            op
+00059200: 7469 6f6e 616c 3d46 616c 7365 2c0a 2020  tional=False,.  
+00059210: 2020 2020 2020 2020 2020 7765 616b 5f6c            weak_l
+00059220: 696e 6b3d 4661 6c73 652c 0a20 2020 2020  ink=False,.     
+00059230: 2020 2029 0a20 2020 2020 2020 2073 656c     ).        sel
+00059240: 662e 6173 7365 7274 5472 7565 2822 7072  f.assertTrue("pr
+00059250: 6566 6978 5f73 6d6f 6f74 6822 2069 6e20  efix_smooth" in 
+00059260: 7069 7065 6c69 6e65 2e6e 6f64 6573 5b22  pipeline.nodes["
+00059270: 225d 2e70 6c75 6773 2e6b 6579 7328 2929  "].plugs.keys())
+00059280: 0a0a 2020 2020 2020 2020 2320 556e 646f  ..        # Undo
+00059290: 2028 7265 6d6f 7665 2070 7265 6669 785f   (remove prefix_
+000592a0: 736d 6f6f 7468 2066 726f 6d20 496e 7075  smooth from Inpu
+000592b0: 7420 6e6f 6465 292c 0a20 2020 2020 2020  t node),.       
+000592c0: 2023 2074 6573 7420 6966 2074 6865 2070   # test if the p
+000592d0: 7265 6669 785f 736d 6f6f 7468 2070 6c75  refix_smooth plu
+000592e0: 6720 7761 7320 6465 6c65 7465 6420 6672  g was deleted fr
+000592f0: 6f6d 2049 6e70 7574 206e 6f64 650a 2020  om Input node.  
+00059300: 2020 2020 2020 7069 7065 6c69 6e65 5f6d        pipeline_m
+00059310: 616e 6167 6572 2e75 6e64 6f28 290a 2020  anager.undo().  
+00059320: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00059330: 7446 616c 7365 2822 7072 6566 6978 5f73  tFalse("prefix_s
+00059340: 6d6f 6f74 6822 2069 6e20 7069 7065 6c69  mooth" in pipeli
+00059350: 6e65 2e6e 6f64 6573 5b22 225d 2e70 6c75  ne.nodes[""].plu
+00059360: 6773 2e6b 6579 7328 2929 0a0a 2020 2020  gs.keys())..    
+00059370: 2020 2020 2320 7265 646f 2028 6578 706f      # redo (expo
+00059380: 7274 2061 6761 696e 2074 6865 2022 6f75  rt again the "ou
+00059390: 745f 7072 6566 6978 2220 706c 7567 292c  t_prefix" plug),
+000593a0: 0a20 2020 2020 2020 2023 2074 6573 7420  .        # test 
+000593b0: 6966 2074 6865 2049 6e70 7574 206e 6f64  if the Input nod
+000593c0: 6520 6861 7665 2061 2070 7265 6669 785f  e have a prefix_
+000593d0: 736d 6f6f 7468 2070 6c75 670a 2020 2020  smooth plug.    
+000593e0: 2020 2020 7069 7065 6c69 6e65 5f6d 616e      pipeline_man
+000593f0: 6167 6572 2e72 6564 6f28 290a 2020 2020  ager.redo().    
+00059400: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
+00059410: 7275 6528 2270 7265 6669 785f 736d 6f6f  rue("prefix_smoo
+00059420: 7468 2220 696e 2070 6970 656c 696e 652e  th" in pipeline.
+00059430: 6e6f 6465 735b 2222 5d2e 706c 7567 732e  nodes[""].plugs.
+00059440: 6b65 7973 2829 290a 0a20 2020 2020 2020  keys())..       
+00059450: 2023 2044 656c 6574 6520 7468 6520 2270   # Delete the "p
+00059460: 7265 6669 785f 736d 6f6f 7468 2220 706c  refix_smooth" pl
+00059470: 7567 2066 726f 6d20 7468 6520 496e 7075  ug from the Inpu
+00059480: 7420 6e6f 6465 2c0a 2020 2020 2020 2020  t node,.        
+00059490: 2320 7465 7374 2069 6620 7468 6520 496e  # test if the In
+000594a0: 7075 7420 6e6f 6465 2068 6176 6520 6e6f  put node have no
+000594b0: 7420 6120 7072 6566 6978 5f73 6d6f 6f74  t a prefix_smoot
+000594c0: 6820 706c 7567 0a20 2020 2020 2020 2070  h plug.        p
+000594d0: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
+000594e0: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
+000594f0: 6564 6974 6f72 2829 2e5f 7265 6d6f 7665  editor()._remove
+00059500: 5f70 6c75 6728 0a20 2020 2020 2020 2020  _plug(.         
+00059510: 2020 205f 7465 6d70 5f70 6c75 675f 6e61     _temp_plug_na
+00059520: 6d65 3d28 2269 6e70 7574 7322 2c20 2270  me=("inputs", "p
+00059530: 7265 6669 785f 736d 6f6f 7468 2229 0a20  refix_smooth"). 
+00059540: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00059550: 2073 656c 662e 6173 7365 7274 4661 6c73   self.assertFals
+00059560: 6528 2270 7265 6669 785f 736d 6f6f 7468  e("prefix_smooth
+00059570: 2220 696e 2070 6970 656c 696e 652e 6e6f  " in pipeline.no
+00059580: 6465 735b 2222 5d2e 706c 7567 732e 6b65  des[""].plugs.ke
+00059590: 7973 2829 290a 0a20 2020 2020 2020 2023  ys())..        #
+000595a0: 2055 6e64 6f20 2865 7870 6f72 7420 6167   Undo (export ag
+000595b0: 6169 6e20 7468 6520 226f 7574 5f70 7265  ain the "out_pre
+000595c0: 6669 7822 2070 6c75 6729 2c0a 2020 2020  fix" plug),.    
+000595d0: 2020 2020 2320 7465 7374 2069 6620 7468      # test if th
+000595e0: 6520 496e 7075 7420 6e6f 6465 2068 6176  e Input node hav
+000595f0: 6520 6120 7072 6566 6978 5f73 6d6f 6f74  e a prefix_smoot
+00059600: 6820 706c 7567 0a20 2020 2020 2020 2070  h plug.        p
+00059610: 6970 656c 696e 655f 6d61 6e61 6765 722e  ipeline_manager.
+00059620: 756e 646f 2829 0a20 2020 2020 2020 2073  undo().        s
+00059630: 656c 662e 6173 7365 7274 5472 7565 2822  elf.assertTrue("
+00059640: 7072 6566 6978 5f73 6d6f 6f74 6822 2069  prefix_smooth" i
+00059650: 6e20 7069 7065 6c69 6e65 2e6e 6f64 6573  n pipeline.nodes
+00059660: 5b22 225d 2e70 6c75 6773 2e6b 6579 7328  [""].plugs.keys(
+00059670: 2929 0a0a 2020 2020 2020 2020 2320 7265  ))..        # re
+00059680: 646f 2028 6465 6c65 7469 6e67 2074 6865  do (deleting the
+00059690: 2022 7072 6566 6978 5f73 6d6f 6f74 6822   "prefix_smooth"
+000596a0: 2070 6c75 6720 6672 6f6d 2074 6865 2049   plug from the I
+000596b0: 6e70 7574 206e 6f64 6529 2c0a 2020 2020  nput node),.    
+000596c0: 2020 2020 2320 7465 7374 2069 6620 7468      # test if th
+000596d0: 6520 496e 7075 7420 6e6f 6465 2068 6176  e Input node hav
+000596e0: 6520 6e6f 7420 6120 7072 6566 6978 5f73  e not a prefix_s
+000596f0: 6d6f 6f74 6820 706c 7567 0a20 2020 2020  mooth plug.     
+00059700: 2020 2070 6970 656c 696e 655f 6d61 6e61     pipeline_mana
+00059710: 6765 722e 7265 646f 2829 0a20 2020 2020  ger.redo().     
+00059720: 2020 2073 656c 662e 6173 7365 7274 4661     self.assertFa
+00059730: 6c73 6528 2270 7265 6669 785f 736d 6f6f  lse("prefix_smoo
+00059740: 7468 2220 696e 2070 6970 656c 696e 652e  th" in pipeline.
+00059750: 6e6f 6465 735b 2222 5d2e 706c 7567 732e  nodes[""].plugs.
+00059760: 6b65 7973 2829 290a 0a20 2020 2020 2020  keys())..       
+00059770: 2023 2046 4958 4d45 3a20 6578 706f 7274   # FIXME: export
+00059780: 5f70 6c75 6773 2028 6375 7272 656e 746c  _plugs (currentl
+00059790: 7920 7468 6572 6520 6973 2061 2062 7567  y there is a bug
+000597a0: 2069 6620 6120 706c 7567 2069 730a 2020   if a plug is.  
+000597b0: 2020 2020 2020 2320 2020 2020 2020 206f        #        o
+000597c0: 6620 7479 7065 206c 6973 7429 0a0a 2020  f type list)..  
+000597d0: 2020 2020 2020 2320 4164 6469 6e67 2061        # Adding a
+000597e0: 206e 6577 2053 6d6f 6f74 6820 7072 6f63   new Smooth proc
+000597f0: 6573 7320 3d3e 2063 7265 6174 6573 2061  ess => creates a
+00059800: 206e 6f64 6520 6361 6c6c 6564 2022 736d   node called "sm
+00059810: 6f6f 7468 5f32 220a 2020 2020 2020 2020  ooth_2".        
+00059820: 7069 7065 6c69 6e65 5f65 6469 746f 725f  pipeline_editor_
+00059830: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
+00059840: 5f65 6469 746f 7228 292e 636c 6963 6b5f  _editor().click_
+00059850: 706f 7320 3d20 5150 6f69 6e74 2834 3530  pos = QPoint(450
+00059860: 2c20 3535 3029 0a20 2020 2020 2020 2070  , 550).        p
+00059870: 6970 656c 696e 655f 6564 6974 6f72 5f74  ipeline_editor_t
+00059880: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
+00059890: 6564 6974 6f72 2829 2e61 6464 5f6e 616d  editor().add_nam
+000598a0: 6564 5f70 726f 6365 7373 280a 2020 2020  ed_process(.    
+000598b0: 2020 2020 2020 2020 7072 6f63 6573 735f          process_
+000598c0: 636c 6173 730a 2020 2020 2020 2020 290a  class.        ).
+000598d0: 0a20 2020 2020 2020 2023 2041 6464 696e  .        # Addin
+000598e0: 6720 6120 6c69 6e6b 0a20 2020 2020 2020  g a link.       
+000598f0: 2070 6970 656c 696e 655f 6564 6974 6f72   pipeline_editor
+00059900: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
+00059910: 745f 6564 6974 6f72 2829 2e61 6464 5f6c  t_editor().add_l
+00059920: 696e 6b28 0a20 2020 2020 2020 2020 2020  ink(.           
+00059930: 2028 2273 6d6f 6f74 685f 3122 2c20 225f   ("smooth_1", "_
+00059940: 736d 6f6f 7468 6564 5f66 696c 6573 2229  smoothed_files")
+00059950: 2c0a 2020 2020 2020 2020 2020 2020 2822  ,.            ("
+00059960: 736d 6f6f 7468 5f32 222c 2022 696e 5f66  smooth_2", "in_f
+00059970: 696c 6573 2229 2c0a 2020 2020 2020 2020  iles"),.        
+00059980: 2020 2020 6163 7469 7665 3d54 7275 652c      active=True,
+00059990: 0a20 2020 2020 2020 2020 2020 2077 6561  .            wea
+000599a0: 6b3d 4661 6c73 652c 0a20 2020 2020 2020  k=False,.       
+000599b0: 2029 0a0a 2020 2020 2020 2020 2320 7465   )..        # te
+000599c0: 7374 2069 6620 7468 6520 3220 6e6f 6465  st if the 2 node
+000599d0: 7320 6861 7665 2074 6865 2067 6f6f 6420  s have the good 
+000599e0: 6c69 6e6b 730a 2020 2020 2020 2020 7365  links.        se
+000599f0: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
+00059a00: 2020 2020 2020 2020 2020 2020 312c 206c              1, l
+00059a10: 656e 2870 6970 656c 696e 652e 6e6f 6465  en(pipeline.node
+00059a20: 735b 2273 6d6f 6f74 685f 3222 5d2e 706c  s["smooth_2"].pl
+00059a30: 7567 735b 2269 6e5f 6669 6c65 7322 5d2e  ugs["in_files"].
+00059a40: 6c69 6e6b 735f 6672 6f6d 290a 2020 2020  links_from).    
+00059a50: 2020 2020 290a 2020 2020 2020 2020 7365      ).        se
+00059a60: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
+00059a70: 2020 2020 2020 2020 2020 2020 312c 0a20              1,. 
+00059a80: 2020 2020 2020 2020 2020 206c 656e 2870             len(p
+00059a90: 6970 656c 696e 652e 6e6f 6465 735b 2273  ipeline.nodes["s
+00059aa0: 6d6f 6f74 685f 3122 5d2e 706c 7567 735b  mooth_1"].plugs[
+00059ab0: 225f 736d 6f6f 7468 6564 5f66 696c 6573  "_smoothed_files
+00059ac0: 225d 2e6c 696e 6b73 5f74 6f29 2c0a 2020  "].links_to),.  
+00059ad0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+00059ae0: 2023 2055 6e64 6f20 2872 656d 6f76 6520   # Undo (remove 
+00059af0: 7468 6520 6c69 6e6b 292c 2074 6573 7420  the link), test 
+00059b00: 6966 2074 6865 2032 206e 6f64 6573 2068  if the 2 nodes h
+00059b10: 6176 6520 6e6f 7420 7468 6520 6c69 6e6b  ave not the link
+00059b20: 730a 2020 2020 2020 2020 7069 7065 6c69  s.        pipeli
+00059b30: 6e65 5f6d 616e 6167 6572 2e75 6e64 6f28  ne_manager.undo(
+00059b40: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00059b50: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
+00059b60: 2020 2020 2020 2020 302c 206c 656e 2870          0, len(p
+00059b70: 6970 656c 696e 652e 6e6f 6465 735b 2273  ipeline.nodes["s
+00059b80: 6d6f 6f74 685f 3222 5d2e 706c 7567 735b  mooth_2"].plugs[
+00059b90: 2269 6e5f 6669 6c65 7322 5d2e 6c69 6e6b  "in_files"].link
+00059ba0: 735f 6672 6f6d 290a 2020 2020 2020 2020  s_from).        
+00059bb0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00059bc0: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
+00059bd0: 2020 2020 2020 2020 302c 0a20 2020 2020          0,.     
+00059be0: 2020 2020 2020 206c 656e 2870 6970 656c         len(pipel
+00059bf0: 696e 652e 6e6f 6465 735b 2273 6d6f 6f74  ine.nodes["smoot
+00059c00: 685f 3122 5d2e 706c 7567 735b 225f 736d  h_1"].plugs["_sm
+00059c10: 6f6f 7468 6564 5f66 696c 6573 225d 2e6c  oothed_files"].l
+00059c20: 696e 6b73 5f74 6f29 2c0a 2020 2020 2020  inks_to),.      
+00059c30: 2020 290a 0a20 2020 2020 2020 2023 2052    )..        # R
+00059c40: 6564 6f20 2861 6464 2061 6761 696e 2074  edo (add again t
+00059c50: 6865 206c 696e 6b29 2c20 7465 7374 2069  he link), test i
+00059c60: 6620 7468 6520 3220 6e6f 6465 7320 6861  f the 2 nodes ha
+00059c70: 7665 2074 6865 2067 6f6f 6420 6c69 6e6b  ve the good link
+00059c80: 730a 2020 2020 2020 2020 7069 7065 6c69  s.        pipeli
+00059c90: 6e65 5f6d 616e 6167 6572 2e72 6564 6f28  ne_manager.redo(
+00059ca0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00059cb0: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
+00059cc0: 2020 2020 2020 2020 312c 206c 656e 2870          1, len(p
+00059cd0: 6970 656c 696e 652e 6e6f 6465 735b 2273  ipeline.nodes["s
+00059ce0: 6d6f 6f74 685f 3222 5d2e 706c 7567 735b  mooth_2"].plugs[
+00059cf0: 2269 6e5f 6669 6c65 7322 5d2e 6c69 6e6b  "in_files"].link
+00059d00: 735f 6672 6f6d 290a 2020 2020 2020 2020  s_from).        
+00059d10: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00059d20: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
+00059d30: 2020 2020 2020 2020 312c 0a20 2020 2020          1,.     
+00059d40: 2020 2020 2020 206c 656e 2870 6970 656c         len(pipel
+00059d50: 696e 652e 6e6f 6465 735b 2273 6d6f 6f74  ine.nodes["smoot
+00059d60: 685f 3122 5d2e 706c 7567 735b 225f 736d  h_1"].plugs["_sm
+00059d70: 6f6f 7468 6564 5f66 696c 6573 225d 2e6c  oothed_files"].l
+00059d80: 696e 6b73 5f74 6f29 2c0a 2020 2020 2020  inks_to),.      
+00059d90: 2020 290a 0a20 2020 2020 2020 2023 2052    )..        # R
+00059da0: 656d 6f76 696e 6720 7468 6520 6c69 6e6b  emoving the link
+00059db0: 2c20 7465 7374 2069 6620 7468 6520 3220  , test if the 2 
+00059dc0: 6e6f 6465 7320 6861 7665 206e 6f74 2074  nodes have not t
+00059dd0: 6865 206c 696e 6b73 0a20 2020 2020 2020  he links.       
+00059de0: 206c 696e 6b20 3d20 2273 6d6f 6f74 685f   link = "smooth_
+00059df0: 312e 5f73 6d6f 6f74 6865 645f 6669 6c65  1._smoothed_file
+00059e00: 732d 3e73 6d6f 6f74 685f 322e 696e 5f66  s->smooth_2.in_f
+00059e10: 696c 6573 220a 2020 2020 2020 2020 7069  iles".        pi
+00059e20: 7065 6c69 6e65 5f65 6469 746f 725f 7461  peline_editor_ta
+00059e30: 6273 2e67 6574 5f63 7572 7265 6e74 5f65  bs.get_current_e
+00059e40: 6469 746f 7228 292e 5f64 656c 5f6c 696e  ditor()._del_lin
+00059e50: 6b28 6c69 6e6b 290a 2020 2020 2020 2020  k(link).        
+00059e60: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00059e70: 280a 2020 2020 2020 2020 2020 2020 302c  (.            0,
+00059e80: 206c 656e 2870 6970 656c 696e 652e 6e6f   len(pipeline.no
+00059e90: 6465 735b 2273 6d6f 6f74 685f 3222 5d2e  des["smooth_2"].
+00059ea0: 706c 7567 735b 2269 6e5f 6669 6c65 7322  plugs["in_files"
+00059eb0: 5d2e 6c69 6e6b 735f 6672 6f6d 290a 2020  ].links_from).  
+00059ec0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00059ed0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00059ee0: 280a 2020 2020 2020 2020 2020 2020 302c  (.            0,
+00059ef0: 0a20 2020 2020 2020 2020 2020 206c 656e  .            len
+00059f00: 2870 6970 656c 696e 652e 6e6f 6465 735b  (pipeline.nodes[
+00059f10: 2273 6d6f 6f74 685f 3122 5d2e 706c 7567  "smooth_1"].plug
+00059f20: 735b 225f 736d 6f6f 7468 6564 5f66 696c  s["_smoothed_fil
+00059f30: 6573 225d 2e6c 696e 6b73 5f74 6f29 2c0a  es"].links_to),.
+00059f40: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+00059f50: 2020 2023 2055 6e64 6f20 2861 6464 2061     # Undo (add a
+00059f60: 6761 696e 2074 6865 206c 696e 6b29 2c20  gain the link), 
+00059f70: 7465 7374 2069 6620 7468 6520 3220 6e6f  test if the 2 no
+00059f80: 6465 7320 6861 7665 2074 6865 2067 6f6f  des have the goo
+00059f90: 6420 6c69 6e6b 730a 2020 2020 2020 2020  d links.        
+00059fa0: 7069 7065 6c69 6e65 5f6d 616e 6167 6572  pipeline_manager
+00059fb0: 2e75 6e64 6f28 290a 2020 2020 2020 2020  .undo().        
+00059fc0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00059fd0: 280a 2020 2020 2020 2020 2020 2020 312c  (.            1,
+00059fe0: 206c 656e 2870 6970 656c 696e 652e 6e6f   len(pipeline.no
+00059ff0: 6465 735b 2273 6d6f 6f74 685f 3222 5d2e  des["smooth_2"].
+0005a000: 706c 7567 735b 2269 6e5f 6669 6c65 7322  plugs["in_files"
+0005a010: 5d2e 6c69 6e6b 735f 6672 6f6d 290a 2020  ].links_from).  
+0005a020: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0005a030: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+0005a040: 280a 2020 2020 2020 2020 2020 2020 312c  (.            1,
+0005a050: 0a20 2020 2020 2020 2020 2020 206c 656e  .            len
+0005a060: 2870 6970 656c 696e 652e 6e6f 6465 735b  (pipeline.nodes[
+0005a070: 2273 6d6f 6f74 685f 3122 5d2e 706c 7567  "smooth_1"].plug
+0005a080: 735b 225f 736d 6f6f 7468 6564 5f66 696c  s["_smoothed_fil
+0005a090: 6573 225d 2e6c 696e 6b73 5f74 6f29 2c0a  es"].links_to),.
+0005a0a0: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+0005a0b0: 2020 2023 2052 6564 6f20 2872 656d 6f76     # Redo (remov
+0005a0c0: 6520 7468 6520 6c69 6e6b 292c 2074 6573  e the link), tes
+0005a0d0: 7420 6966 2074 6865 2032 206e 6f64 6573  t if the 2 nodes
+0005a0e0: 2068 6176 6520 6e6f 7420 7468 6520 6c69   have not the li
+0005a0f0: 6e6b 730a 2020 2020 2020 2020 7069 7065  nks.        pipe
+0005a100: 6c69 6e65 5f6d 616e 6167 6572 2e72 6564  line_manager.red
+0005a110: 6f28 290a 2020 2020 2020 2020 7365 6c66  o().        self
+0005a120: 2e61 7373 6572 7445 7175 616c 280a 2020  .assertEqual(.  
+0005a130: 2020 2020 2020 2020 2020 302c 206c 656e            0, len
+0005a140: 2870 6970 656c 696e 652e 6e6f 6465 735b  (pipeline.nodes[
+0005a150: 2273 6d6f 6f74 685f 3222 5d2e 706c 7567  "smooth_2"].plug
+0005a160: 735b 2269 6e5f 6669 6c65 7322 5d2e 6c69  s["in_files"].li
+0005a170: 6e6b 735f 6672 6f6d 290a 2020 2020 2020  nks_from).      
+0005a180: 2020 290a 2020 2020 2020 2020 7365 6c66    ).        self
+0005a190: 2e61 7373 6572 7445 7175 616c 280a 2020  .assertEqual(.  
+0005a1a0: 2020 2020 2020 2020 2020 302c 0a20 2020            0,.   
+0005a1b0: 2020 2020 2020 2020 206c 656e 2870 6970           len(pip
+0005a1c0: 656c 696e 652e 6e6f 6465 735b 2273 6d6f  eline.nodes["smo
+0005a1d0: 6f74 685f 3122 5d2e 706c 7567 735b 225f  oth_1"].plugs["_
+0005a1e0: 736d 6f6f 7468 6564 5f66 696c 6573 225d  smoothed_files"]
+0005a1f0: 2e6c 696e 6b73 5f74 6f29 2c0a 2020 2020  .links_to),.    
+0005a200: 2020 2020 290a 0a20 2020 2020 2020 2023      )..        #
+0005a210: 2052 652d 6164 6469 6e67 2061 206c 696e   Re-adding a lin
+0005a220: 6b0a 2020 2020 2020 2020 7069 7065 6c69  k.        pipeli
+0005a230: 6e65 5f65 6469 746f 725f 7461 6273 2e67  ne_editor_tabs.g
+0005a240: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
+0005a250: 7228 292e 6164 645f 6c69 6e6b 280a 2020  r().add_link(.  
+0005a260: 2020 2020 2020 2020 2020 2822 736d 6f6f            ("smoo
+0005a270: 7468 5f31 222c 2022 5f73 6d6f 6f74 6865  th_1", "_smoothe
+0005a280: 645f 6669 6c65 7322 292c 0a20 2020 2020  d_files"),.     
+0005a290: 2020 2020 2020 2028 2273 6d6f 6f74 685f         ("smooth_
+0005a2a0: 3222 2c20 2269 6e5f 6669 6c65 7322 292c  2", "in_files"),
+0005a2b0: 0a20 2020 2020 2020 2020 2020 2061 6374  .            act
+0005a2c0: 6976 653d 5472 7565 2c0a 2020 2020 2020  ive=True,.      
+0005a2d0: 2020 2020 2020 7765 616b 3d46 616c 7365        weak=False
+0005a2e0: 2c0a 2020 2020 2020 2020 290a 0a20 2020  ,.        )..   
+0005a2f0: 2020 2020 2023 2055 7064 6174 696e 6720       # Updating 
+0005a300: 7468 6520 6e6f 6465 206e 616d 650a 2020  the node name.  
+0005a310: 2020 2020 2020 7072 6f63 6573 7320 3d20        process = 
+0005a320: 7069 7065 6c69 6e65 2e6e 6f64 6573 5b22  pipeline.nodes["
+0005a330: 736d 6f6f 7468 5f32 225d 2e70 726f 6365  smooth_2"].proce
+0005a340: 7373 0a20 2020 2020 2020 2070 6970 656c  ss.        pipel
+0005a350: 696e 655f 6d61 6e61 6765 722e 6469 7370  ine_manager.disp
+0005a360: 6c61 794e 6f64 6550 6172 616d 6574 6572  layNodeParameter
+0005a370: 7328 2273 6d6f 6f74 685f 3222 2c20 7072  s("smooth_2", pr
+0005a380: 6f63 6573 7329 0a20 2020 2020 2020 206e  ocess).        n
+0005a390: 6f64 655f 636f 6e74 726f 6c6c 6572 203d  ode_controller =
+0005a3a0: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+0005a3b0: 772e 7069 7065 6c69 6e65 5f6d 616e 6167  w.pipeline_manag
+0005a3c0: 6572 2e6e 6f64 6543 6f6e 7472 6f6c 6c65  er.nodeControlle
+0005a3d0: 720a 2020 2020 2020 2020 6e6f 6465 5f63  r.        node_c
+0005a3e0: 6f6e 7472 6f6c 6c65 722e 6469 7370 6c61  ontroller.displa
+0005a3f0: 795f 7061 7261 6d65 7465 7273 2822 736d  y_parameters("sm
+0005a400: 6f6f 7468 5f32 222c 2070 726f 6365 7373  ooth_2", process
+0005a410: 2c20 7069 7065 6c69 6e65 290a 2020 2020  , pipeline).    
+0005a420: 2020 2020 6e6f 6465 5f63 6f6e 7472 6f6c      node_control
+0005a430: 6c65 722e 6c69 6e65 5f65 6469 745f 6e6f  ler.line_edit_no
+0005a440: 6465 5f6e 616d 652e 7365 7454 6578 7428  de_name.setText(
+0005a450: 226d 795f 736d 6f6f 7468 2229 0a20 2020  "my_smooth").   
+0005a460: 2020 2020 206b 6579 4576 656e 7420 3d20       keyEvent = 
+0005a470: 5174 4775 692e 514b 6579 4576 656e 7428  QtGui.QKeyEvent(
+0005a480: 0a20 2020 2020 2020 2020 2020 2051 4576  .            QEv
+0005a490: 656e 742e 4b65 7950 7265 7373 2c20 5174  ent.KeyPress, Qt
+0005a4a0: 2e4b 6579 5f52 6574 7572 6e2c 2051 742e  .Key_Return, Qt.
+0005a4b0: 4e6f 4d6f 6469 6669 6572 0a20 2020 2020  NoModifier.     
+0005a4c0: 2020 2029 0a20 2020 2020 2020 2051 436f     ).        QCo
+0005a4d0: 7265 4170 706c 6963 6174 696f 6e2e 706f  reApplication.po
+0005a4e0: 7374 4576 656e 7428 0a20 2020 2020 2020  stEvent(.       
+0005a4f0: 2020 2020 206e 6f64 655f 636f 6e74 726f       node_contro
+0005a500: 6c6c 6572 2e6c 696e 655f 6564 6974 5f6e  ller.line_edit_n
+0005a510: 6f64 655f 6e61 6d65 2c20 6b65 7945 7665  ode_name, keyEve
+0005a520: 6e74 0a20 2020 2020 2020 2029 0a20 2020  nt.        ).   
+0005a530: 2020 2020 2051 5465 7374 2e71 5761 6974       QTest.qWait
+0005a540: 2831 3030 290a 0a20 2020 2020 2020 2023  (100)..        #
+0005a550: 2074 6573 7420 6966 2074 6865 2073 6d6f   test if the smo
+0005a560: 6f74 685f 3220 6e6f 6465 2068 6173 2062  oth_2 node has b
+0005a570: 6565 6e20 7265 706c 6163 6564 2062 7920  een replaced by 
+0005a580: 7468 650a 2020 2020 2020 2020 2320 6d79  the.        # my
+0005a590: 5f73 6d6f 6f74 6820 6e6f 6465 2061 6e64  _smooth node and
+0005a5a0: 2074 6573 7420 7468 6520 6c69 6e6b 730a   test the links.
+0005a5b0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+0005a5c0: 6572 7454 7275 6528 226d 795f 736d 6f6f  ertTrue("my_smoo
+0005a5d0: 7468 2220 696e 2070 6970 656c 696e 652e  th" in pipeline.
+0005a5e0: 6e6f 6465 732e 6b65 7973 2829 290a 2020  nodes.keys()).  
+0005a5f0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0005a600: 7446 616c 7365 2822 736d 6f6f 7468 5f32  tFalse("smooth_2
+0005a610: 2220 696e 2070 6970 656c 696e 652e 6e6f  " in pipeline.no
+0005a620: 6465 732e 6b65 7973 2829 290a 2020 2020  des.keys()).    
+0005a630: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0005a640: 7175 616c 280a 2020 2020 2020 2020 2020  qual(.          
+0005a650: 2020 312c 206c 656e 2870 6970 656c 696e    1, len(pipelin
+0005a660: 652e 6e6f 6465 735b 226d 795f 736d 6f6f  e.nodes["my_smoo
+0005a670: 7468 225d 2e70 6c75 6773 5b22 696e 5f66  th"].plugs["in_f
+0005a680: 696c 6573 225d 2e6c 696e 6b73 5f66 726f  iles"].links_fro
+0005a690: 6d29 0a20 2020 2020 2020 2029 0a20 2020  m).        ).   
+0005a6a0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0005a6b0: 4571 7561 6c28 0a20 2020 2020 2020 2020  Equal(.         
+0005a6c0: 2020 2031 2c0a 2020 2020 2020 2020 2020     1,.          
+0005a6d0: 2020 6c65 6e28 7069 7065 6c69 6e65 2e6e    len(pipeline.n
+0005a6e0: 6f64 6573 5b22 736d 6f6f 7468 5f31 225d  odes["smooth_1"]
+0005a6f0: 2e70 6c75 6773 5b22 5f73 6d6f 6f74 6865  .plugs["_smoothe
+0005a700: 645f 6669 6c65 7322 5d2e 6c69 6e6b 735f  d_files"].links_
+0005a710: 746f 292c 0a20 2020 2020 2020 2029 0a0a  to),.        )..
+0005a720: 2020 2020 2020 2020 2320 556e 646f 2028          # Undo (
+0005a730: 5570 6461 7469 6e67 2074 6865 206e 6f64  Updating the nod
+0005a740: 6520 6e61 6d65 2066 726f 6d20 6d79 5f73  e name from my_s
+0005a750: 6d6f 6f74 6820 746f 2073 6d6f 6f74 685f  mooth to smooth_
+0005a760: 3229 2c0a 2020 2020 2020 2020 2320 7465  2),.        # te
+0005a770: 7374 2069 6620 6974 2773 206f 6b0a 2020  st if it's ok.  
+0005a780: 2020 2020 2020 7069 7065 6c69 6e65 5f6d        pipeline_m
+0005a790: 616e 6167 6572 2e75 6e64 6f28 290a 2020  anager.undo().  
+0005a7a0: 2020 2020 2020 5154 6573 742e 7157 6169        QTest.qWai
+0005a7b0: 7428 3130 3029 0a20 2020 2020 2020 2073  t(100).        s
+0005a7c0: 656c 662e 6173 7365 7274 4661 6c73 6528  elf.assertFalse(
+0005a7d0: 226d 795f 736d 6f6f 7468 2220 696e 2070  "my_smooth" in p
+0005a7e0: 6970 656c 696e 652e 6e6f 6465 732e 6b65  ipeline.nodes.ke
+0005a7f0: 7973 2829 290a 2020 2020 2020 2020 7365  ys()).        se
+0005a800: 6c66 2e61 7373 6572 7454 7275 6528 2273  lf.assertTrue("s
+0005a810: 6d6f 6f74 685f 3222 2069 6e20 7069 7065  mooth_2" in pipe
+0005a820: 6c69 6e65 2e6e 6f64 6573 2e6b 6579 7328  line.nodes.keys(
+0005a830: 2929 0a20 2020 2020 2020 2073 656c 662e  )).        self.
+0005a840: 6173 7365 7274 4571 7561 6c28 0a20 2020  assertEqual(.   
+0005a850: 2020 2020 2020 2020 2031 2c20 6c65 6e28           1, len(
+0005a860: 7069 7065 6c69 6e65 2e6e 6f64 6573 5b22  pipeline.nodes["
+0005a870: 736d 6f6f 7468 5f32 225d 2e70 6c75 6773  smooth_2"].plugs
+0005a880: 5b22 696e 5f66 696c 6573 225d 2e6c 696e  ["in_files"].lin
+0005a890: 6b73 5f66 726f 6d29 0a20 2020 2020 2020  ks_from).       
+0005a8a0: 2029 0a20 2020 2020 2020 2073 656c 662e   ).        self.
+0005a8b0: 6173 7365 7274 4571 7561 6c28 0a20 2020  assertEqual(.   
+0005a8c0: 2020 2020 2020 2020 2031 2c0a 2020 2020           1,.    
+0005a8d0: 2020 2020 2020 2020 6c65 6e28 7069 7065          len(pipe
+0005a8e0: 6c69 6e65 2e6e 6f64 6573 5b22 736d 6f6f  line.nodes["smoo
+0005a8f0: 7468 5f31 225d 2e70 6c75 6773 5b22 5f73  th_1"].plugs["_s
+0005a900: 6d6f 6f74 6865 645f 6669 6c65 7322 5d2e  moothed_files"].
+0005a910: 6c69 6e6b 735f 746f 292c 0a20 2020 2020  links_to),.     
+0005a920: 2020 2029 0a0a 2020 2020 2020 2020 2320     )..        # 
+0005a930: 5265 646f 2028 5570 6461 7469 6e67 2074  Redo (Updating t
+0005a940: 6865 206e 6f64 6520 6e61 6d65 2066 726f  he node name fro
+0005a950: 6d20 736d 6f6f 7468 5f32 2074 6f20 6d79  m smooth_2 to my
+0005a960: 5f73 6d6f 6f74 6829 2c0a 2020 2020 2020  _smooth),.      
+0005a970: 2020 2320 7465 7374 2069 6620 6974 2773    # test if it's
+0005a980: 206f 6b0a 2020 2020 2020 2020 7069 7065   ok.        pipe
+0005a990: 6c69 6e65 5f6d 616e 6167 6572 2e72 6564  line_manager.red
+0005a9a0: 6f28 290a 2020 2020 2020 2020 5154 6573  o().        QTes
+0005a9b0: 742e 7157 6169 7428 3130 3029 0a20 2020  t.qWait(100).   
+0005a9c0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0005a9d0: 5472 7565 2822 6d79 5f73 6d6f 6f74 6822  True("my_smooth"
+0005a9e0: 2069 6e20 7069 7065 6c69 6e65 2e6e 6f64   in pipeline.nod
+0005a9f0: 6573 2e6b 6579 7328 2929 0a20 2020 2020  es.keys()).     
+0005aa00: 2020 2073 656c 662e 6173 7365 7274 4661     self.assertFa
+0005aa10: 6c73 6528 2273 6d6f 6f74 685f 3222 2069  lse("smooth_2" i
+0005aa20: 6e20 7069 7065 6c69 6e65 2e6e 6f64 6573  n pipeline.nodes
+0005aa30: 2e6b 6579 7328 2929 0a20 2020 2020 2020  .keys()).       
+0005aa40: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0005aa50: 6c28 0a20 2020 2020 2020 2020 2020 2031  l(.            1
+0005aa60: 2c20 6c65 6e28 7069 7065 6c69 6e65 2e6e  , len(pipeline.n
+0005aa70: 6f64 6573 5b22 6d79 5f73 6d6f 6f74 6822  odes["my_smooth"
+0005aa80: 5d2e 706c 7567 735b 2269 6e5f 6669 6c65  ].plugs["in_file
+0005aa90: 7322 5d2e 6c69 6e6b 735f 6672 6f6d 290a  s"].links_from).
+0005aaa0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0005aab0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0005aac0: 616c 280a 2020 2020 2020 2020 2020 2020  al(.            
+0005aad0: 312c 0a20 2020 2020 2020 2020 2020 206c  1,.            l
+0005aae0: 656e 2870 6970 656c 696e 652e 6e6f 6465  en(pipeline.node
+0005aaf0: 735b 2273 6d6f 6f74 685f 3122 5d2e 706c  s["smooth_1"].pl
+0005ab00: 7567 735b 225f 736d 6f6f 7468 6564 5f66  ugs["_smoothed_f
+0005ab10: 696c 6573 225d 2e6c 696e 6b73 5f74 6f29  iles"].links_to)
+0005ab20: 2c0a 2020 2020 2020 2020 290a 0a20 2020  ,.        )..   
+0005ab30: 2020 2020 2023 2055 7064 6174 696e 6720       # Updating 
+0005ab40: 6120 706c 7567 2076 616c 7565 0a20 2020  a plug value.   
+0005ab50: 2020 2020 2069 6620 6861 7361 7474 7228       if hasattr(
+0005ab60: 6e6f 6465 5f63 6f6e 7472 6f6c 6c65 722c  node_controller,
+0005ab70: 2022 6765 745f 696e 6465 785f 6672 6f6d   "get_index_from
+0005ab80: 5f70 6c75 675f 6e61 6d65 2229 3a0a 2020  _plug_name"):.  
+0005ab90: 2020 2020 2020 2020 2020 696e 6465 7820            index 
+0005aba0: 3d20 6e6f 6465 5f63 6f6e 7472 6f6c 6c65  = node_controlle
+0005abb0: 722e 6765 745f 696e 6465 785f 6672 6f6d  r.get_index_from
+0005abc0: 5f70 6c75 675f 6e61 6d65 280a 2020 2020  _plug_name(.    
+0005abd0: 2020 2020 2020 2020 2020 2020 226f 7574              "out
+0005abe0: 5f70 7265 6669 7822 2c20 2269 6e22 0a20  _prefix", "in". 
+0005abf0: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+0005ac00: 2020 2020 2020 2020 206e 6f64 655f 636f           node_co
+0005ac10: 6e74 726f 6c6c 6572 2e6c 696e 655f 6564  ntroller.line_ed
+0005ac20: 6974 5f69 6e70 7574 5b69 6e64 6578 5d2e  it_input[index].
+0005ac30: 7365 7454 6578 7428 2250 5245 4649 5822  setText("PREFIX"
+0005ac40: 290a 2020 2020 2020 2020 2020 2020 6e6f  ).            no
+0005ac50: 6465 5f63 6f6e 7472 6f6c 6c65 722e 7570  de_controller.up
+0005ac60: 6461 7465 5f70 6c75 675f 7661 6c75 6528  date_plug_value(
+0005ac70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0005ac80: 2022 696e 222c 2022 6f75 745f 7072 6566   "in", "out_pref
+0005ac90: 6978 222c 2070 6970 656c 696e 652c 2073  ix", pipeline, s
+0005aca0: 7472 0a20 2020 2020 2020 2020 2020 2029  tr.            )
+0005acb0: 0a0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+0005acc0: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
+0005acd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005ace0: 2250 5245 4649 5822 2c0a 2020 2020 2020  "PREFIX",.      
+0005acf0: 2020 2020 2020 2020 2020 7069 7065 6c69            pipeli
+0005ad00: 6e65 2e6e 6f64 6573 5b22 6d79 5f73 6d6f  ne.nodes["my_smo
+0005ad10: 6f74 6822 5d2e 6765 745f 706c 7567 5f76  oth"].get_plug_v
+0005ad20: 616c 7565 2822 6f75 745f 7072 6566 6978  alue("out_prefix
+0005ad30: 2229 2c0a 2020 2020 2020 2020 2020 2020  "),.            
+0005ad40: 290a 0a20 2020 2020 2020 2020 2020 2073  )..            s
+0005ad50: 656c 662e 6d61 696e 5f77 696e 646f 772e  elf.main_window.
+0005ad60: 756e 646f 2829 0a20 2020 2020 2020 2020  undo().         
+0005ad70: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+0005ad80: 7561 6c28 0a20 2020 2020 2020 2020 2020  ual(.           
+0005ad90: 2020 2020 2022 7322 2c20 7069 7065 6c69       "s", pipeli
+0005ada0: 6e65 2e6e 6f64 6573 5b22 6d79 5f73 6d6f  ne.nodes["my_smo
+0005adb0: 6f74 6822 5d2e 6765 745f 706c 7567 5f76  oth"].get_plug_v
+0005adc0: 616c 7565 2822 6f75 745f 7072 6566 6978  alue("out_prefix
+0005add0: 2229 0a20 2020 2020 2020 2020 2020 2029  ").            )
+0005ade0: 0a0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+0005adf0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e72  lf.main_window.r
+0005ae00: 6564 6f28 290a 2020 2020 2020 2020 2020  edo().          
+0005ae10: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0005ae20: 616c 280a 2020 2020 2020 2020 2020 2020  al(.            
+0005ae30: 2020 2020 2250 5245 4649 5822 2c0a 2020      "PREFIX",.  
+0005ae40: 2020 2020 2020 2020 2020 2020 2020 7069                pi
+0005ae50: 7065 6c69 6e65 2e6e 6f64 6573 5b22 6d79  peline.nodes["my
+0005ae60: 5f73 6d6f 6f74 6822 5d2e 6765 745f 706c  _smooth"].get_pl
+0005ae70: 7567 5f76 616c 7565 2822 6f75 745f 7072  ug_value("out_pr
+0005ae80: 6566 6978 2229 2c0a 2020 2020 2020 2020  efix"),.        
+0005ae90: 2020 2020 290a 0a20 2020 2020 2020 2023      )..        #
+0005aea0: 2053 7769 7463 6865 7320 6261 636b 2074   Switches back t
+0005aeb0: 6f20 6e6f 6465 2063 6f6e 7472 6f6c 6c65  o node controlle
+0005aec0: 7220 5632 2c20 6966 206e 6563 6573 7361  r V2, if necessa
+0005aed0: 7279 2028 7265 7475 726e 2074 6f20 696e  ry (return to in
+0005aee0: 6974 6961 6c0a 2020 2020 2020 2020 2320  itial.        # 
+0005aef0: 7374 6174 6529 0a20 2020 2020 2020 2063  state).        c
+0005af00: 6f6e 6669 6720 3d20 436f 6e66 6967 2863  onfig = Config(c
+0005af10: 6f6e 6669 675f 7061 7468 3d73 656c 662e  onfig_path=self.
+0005af20: 636f 6e66 6967 5f70 6174 6829 0a0a 2020  config_path)..  
+0005af30: 2020 2020 2020 6966 206e 6f74 2063 6f6e        if not con
+0005af40: 7472 6f6c 5631 5f76 6572 3a0a 2020 2020  trolV1_ver:.    
+0005af50: 2020 2020 2020 2020 636f 6e66 6967 2e73          config.s
+0005af60: 6574 436f 6e74 726f 6c56 3128 4661 6c73  etControlV1(Fals
+0005af70: 6529 0a0a 2020 2020 6465 6620 7465 7374  e)..    def test
+0005af80: 5f75 7064 6174 655f 6175 746f 5f69 6e68  _update_auto_inh
+0005af90: 6572 6974 616e 6365 2873 656c 6629 3a0a  eritance(self):.
+0005afa0: 2020 2020 2020 2020 2222 2241 6464 7320          """Adds 
+0005afb0: 6120 7072 6f63 6573 7320 616e 6420 7570  a process and up
+0005afc0: 6461 7465 7320 7468 6520 6a6f 6227 7320  dates the job's 
+0005afd0: 6175 746f 2069 6e68 6572 6974 616e 6365  auto inheritance
+0005afe0: 2064 6963 742e 0a0a 2020 2020 2020 2020   dict...        
+0005aff0: 2d20 5465 7374 733a 2050 6970 656c 696e  - Tests: Pipelin
+0005b000: 654d 616e 6167 6572 5461 622e 7570 6461  eManagerTab.upda
+0005b010: 7465 5f61 7574 6f5f 696e 6865 7269 7461  te_auto_inherita
+0005b020: 6e63 650a 2020 2020 2020 2020 2222 220a  nce.        """.
+0005b030: 0a20 2020 2020 2020 2063 6f6e 6669 6720  .        config 
+0005b040: 3d20 436f 6e66 6967 2863 6f6e 6669 675f  = Config(config_
+0005b050: 7061 7468 3d73 656c 662e 636f 6e66 6967  path=self.config
+0005b060: 5f70 6174 6829 0a20 2020 2020 2020 2066  _path).        f
+0005b070: 6f6c 6465 7220 3d20 6f73 2e70 6174 682e  older = os.path.
+0005b080: 6162 7370 6174 6828 0a20 2020 2020 2020  abspath(.       
+0005b090: 2020 2020 206f 732e 7061 7468 2e6a 6f69       os.path.joi
+0005b0a0: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
+0005b0b0: 2020 2063 6f6e 6669 672e 6765 745f 6d69     config.get_mi
+0005b0c0: 615f 7061 7468 2829 2c0a 2020 2020 2020  a_path(),.      
+0005b0d0: 2020 2020 2020 2020 2020 226d 6961 7574            "miaut
+0005b0e0: 6461 7461 222c 0a20 2020 2020 2020 2020  data",.         
+0005b0f0: 2020 2020 2020 2022 7265 736f 7572 6365         "resource
+0005b100: 7322 2c0a 2020 2020 2020 2020 2020 2020  s",.            
+0005b110: 2020 2020 226d 6961 222c 0a20 2020 2020      "mia",.     
+0005b120: 2020 2020 2020 2020 2020 2022 7072 6f6a             "proj
+0005b130: 6563 745f 3822 2c0a 2020 2020 2020 2020  ect_8",.        
+0005b140: 2020 2020 2020 2020 2264 6174 6122 2c0a          "data",.
+0005b150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0005b160: 2272 6177 5f64 6174 6122 2c0a 2020 2020  "raw_data",.    
+0005b170: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0005b180: 2020 290a 0a20 2020 2020 2020 204e 4949    )..        NII
+0005b190: 5f46 494c 455f 3120 3d20 280a 2020 2020  _FILE_1 = (.    
+0005b1a0: 2020 2020 2020 2020 2247 7565 7262 6574          "Guerbet
+0005b1b0: 2d43 362d 3230 3134 2d52 6174 2d4b 3532  -C6-2014-Rat-K52
+0005b1c0: 2d54 7562 6532 372d 3230 3134 2d30 322d  -Tube27-2014-02-
+0005b1d0: 3134 3130 3233 3137 2d30 312d 4731 5f22  14102317-01-G1_"
+0005b1e0: 0a20 2020 2020 2020 2020 2020 2022 4775  .            "Gu
+0005b1f0: 6572 6265 745f 416e 6174 2d52 4152 4570  erbet_Anat-RAREp
+0005b200: 766d 2d30 3030 3232 305f 3030 302e 6e69  vm-000220_000.ni
+0005b210: 6922 0a20 2020 2020 2020 2029 0a20 2020  i".        ).   
+0005b220: 2020 2020 204e 4949 5f46 494c 455f 3220       NII_FILE_2 
+0005b230: 3d20 280a 2020 2020 2020 2020 2020 2020  = (.            
+0005b240: 2247 7565 7262 6574 2d43 362d 3230 3134  "Guerbet-C6-2014
+0005b250: 2d52 6174 2d4b 3532 2d54 7562 6532 372d  -Rat-K52-Tube27-
+0005b260: 3230 3134 2d30 322d 3134 3130 3233 3137  2014-02-14102317
+0005b270: 2d30 342d 4733 5f22 0a20 2020 2020 2020  -04-G3_".       
+0005b280: 2020 2020 2022 4775 6572 6265 745f 4d44       "Guerbet_MD
+0005b290: 4546 542d 4d44 4546 5470 766d 2d30 3030  EFT-MDEFTpvm-000
+0005b2a0: 3934 305f 3830 302e 6e69 6922 0a20 2020  940_800.nii".   
+0005b2b0: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+0005b2c0: 444f 4355 4d45 4e54 5f31 203d 206f 732e  DOCUMENT_1 = os.
+0005b2d0: 7061 7468 2e61 6273 7061 7468 286f 732e  path.abspath(os.
+0005b2e0: 7061 7468 2e6a 6f69 6e28 666f 6c64 6572  path.join(folder
+0005b2f0: 2c20 4e49 495f 4649 4c45 5f31 2929 0a20  , NII_FILE_1)). 
+0005b300: 2020 2020 2020 2044 4f43 554d 454e 545f         DOCUMENT_
+0005b310: 3220 3d20 6f73 2e70 6174 682e 6162 7370  2 = os.path.absp
+0005b320: 6174 6828 6f73 2e70 6174 682e 6a6f 696e  ath(os.path.join
+0005b330: 2866 6f6c 6465 722c 204e 4949 5f46 494c  (folder, NII_FIL
+0005b340: 455f 3229 290a 0a20 2020 2020 2020 2023  E_2))..        #
+0005b350: 2053 6574 2073 686f 7274 6375 7473 2066   Set shortcuts f
+0005b360: 6f72 206f 626a 6563 7473 2074 6861 7420  or objects that 
+0005b370: 6172 6520 6f66 7465 6e20 7573 6564 0a20  are often used. 
+0005b380: 2020 2020 2020 2070 706c 5f6d 616e 6167         ppl_manag
+0005b390: 6572 203d 2073 656c 662e 6d61 696e 5f77  er = self.main_w
+0005b3a0: 696e 646f 772e 7069 7065 6c69 6e65 5f6d  indow.pipeline_m
+0005b3b0: 616e 6167 6572 0a20 2020 2020 2020 2070  anager.        p
+0005b3c0: 706c 5f65 6474 5f74 6162 7320 3d20 7070  pl_edt_tabs = pp
+0005b3d0: 6c5f 6d61 6e61 6765 722e 7069 7065 6c69  l_manager.pipeli
+0005b3e0: 6e65 4564 6974 6f72 5461 6273 0a20 2020  neEditorTabs.   
+0005b3f0: 2020 2020 2070 706c 203d 2070 706c 5f65       ppl = ppl_e
+0005b400: 6474 5f74 6162 732e 6765 745f 6375 7272  dt_tabs.get_curr
+0005b410: 656e 745f 7069 7065 6c69 6e65 2829 0a0a  ent_pipeline()..
+0005b420: 2020 2020 2020 2020 2320 4164 6473 2061          # Adds a
+0005b430: 2052 656e 616d 6520 7072 6f63 6573 7365   Rename processe
+0005b440: 732c 2063 7265 6174 6573 2074 6865 2027  s, creates the '
+0005b450: 7265 6e61 6d65 5f31 2720 6e6f 6465 0a20  rename_1' node. 
+0005b460: 2020 2020 2020 2070 706c 5f65 6474 5f74         ppl_edt_t
+0005b470: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
+0005b480: 6564 6974 6f72 2829 2e63 6c69 636b 5f70  editor().click_p
+0005b490: 6f73 203d 2051 506f 696e 7428 3435 302c  os = QPoint(450,
+0005b4a0: 2035 3030 290a 2020 2020 2020 2020 7070   500).        pp
+0005b4b0: 6c5f 6564 745f 7461 6273 2e67 6574 5f63  l_edt_tabs.get_c
+0005b4c0: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
+0005b4d0: 6164 645f 6e61 6d65 645f 7072 6f63 6573  add_named_proces
+0005b4e0: 7328 5265 6e61 6d65 290a 0a20 2020 2020  s(Rename)..     
+0005b4f0: 2020 2070 706c 5f65 6474 5f74 6162 732e     ppl_edt_tabs.
+0005b500: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
+0005b510: 6f72 2829 2e65 7870 6f72 745f 756e 636f  or().export_unco
+0005b520: 6e6e 6563 7465 645f 6d61 6e64 6174 6f72  nnected_mandator
+0005b530: 795f 696e 7075 7473 2829 0a20 2020 2020  y_inputs().     
+0005b540: 2020 2070 706c 5f65 6474 5f74 6162 732e     ppl_edt_tabs.
+0005b550: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
+0005b560: 6f72 2829 2e65 7870 6f72 745f 616c 6c5f  or().export_all_
+0005b570: 756e 636f 6e6e 6563 7465 645f 6f75 7470  unconnected_outp
+0005b580: 7574 7328 290a 0a20 2020 2020 2020 2070  uts()..        p
+0005b590: 706c 2e6e 6f64 6573 5b22 7265 6e61 6d65  pl.nodes["rename
+0005b5a0: 5f31 225d 2e73 6574 5f70 6c75 675f 7661  _1"].set_plug_va
+0005b5b0: 6c75 6528 2269 6e5f 6669 6c65 222c 2044  lue("in_file", D
+0005b5c0: 4f43 554d 454e 545f 3129 0a20 2020 2020  OCUMENT_1).     
+0005b5d0: 2020 206e 6f64 6520 3d20 7070 6c2e 6e6f     node = ppl.no
+0005b5e0: 6465 735b 2272 656e 616d 655f 3122 5d0a  des["rename_1"].
+0005b5f0: 0a20 2020 2020 2020 2023 2049 6e69 7469  .        # Initi
+0005b600: 616c 697a 6573 2074 6865 2077 6f72 6b66  alizes the workf
+0005b610: 6c6f 7720 6d61 6e75 616c 6c79 0a20 2020  low manually.   
+0005b620: 2020 2020 2070 706c 5f6d 616e 6167 6572       ppl_manager
+0005b630: 2e77 6f72 6b66 6c6f 7720 3d20 776f 726b  .workflow = work
+0005b640: 666c 6f77 5f66 726f 6d5f 7069 7065 6c69  flow_from_pipeli
+0005b650: 6e65 280a 2020 2020 2020 2020 2020 2020  ne(.            
+0005b660: 7070 6c2c 2063 6f6d 706c 6574 655f 7061  ppl, complete_pa
+0005b670: 7261 6d65 7465 7273 3d54 7275 650a 2020  rameters=True.  
+0005b680: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+0005b690: 206a 6f62 203d 2070 706c 5f6d 616e 6167   job = ppl_manag
+0005b6a0: 6572 2e77 6f72 6b66 6c6f 772e 6a6f 6273  er.workflow.jobs
+0005b6b0: 5b30 5d0a 0a20 2020 2020 2020 2023 204d  [0]..        # M
+0005b6c0: 6f63 6b73 2074 6865 206e 6f64 6527 7320  ocks the node's 
+0005b6d0: 7061 7261 6d65 7465 7273 0a20 2020 2020  parameters.     
+0005b6e0: 2020 206e 6f64 652e 6175 746f 5f69 6e68     node.auto_inh
+0005b6f0: 6572 6974 616e 6365 5f64 6963 7420 3d20  eritance_dict = 
+0005b700: 7b7d 0a20 2020 2020 2020 2070 726f 6365  {}.        proce
+0005b710: 7373 203d 206e 6f64 652e 7072 6f63 6573  ss = node.proces
+0005b720: 730a 2020 2020 2020 2020 7072 6f63 6573  s.        proces
+0005b730: 732e 7374 7564 795f 636f 6e66 6967 2e70  s.study_config.p
+0005b740: 726f 6a65 6374 203d 204d 6f63 6b28 290a  roject = Mock().
+0005b750: 2020 2020 2020 2020 7072 6f63 6573 732e          process.
+0005b760: 7374 7564 795f 636f 6e66 6967 2e70 726f  study_config.pro
+0005b770: 6a65 6374 2e66 6f6c 6465 7220 3d20 636f  ject.folder = co
+0005b780: 6e66 6967 2e67 6574 5f6d 6961 5f70 6174  nfig.get_mia_pat
+0005b790: 6828 290a 2020 2020 2020 2020 7072 6f63  h().        proc
+0005b7a0: 6573 732e 6f75 7470 7574 7320 3d20 5b5d  ess.outputs = []
+0005b7b0: 0a20 2020 2020 2020 2070 726f 6365 7373  .        process
+0005b7c0: 2e6c 6973 745f 6f75 7470 7574 7320 3d20  .list_outputs = 
+0005b7d0: 5b5d 0a20 2020 2020 2020 2070 726f 6365  [].        proce
+0005b7e0: 7373 2e61 7574 6f5f 696e 6865 7269 7461  ss.auto_inherita
+0005b7f0: 6e63 655f 6469 6374 203d 207b 7d0a 0a20  nce_dict = {}.. 
+0005b800: 2020 2020 2020 2023 204d 6f63 6b73 2027         # Mocks '
+0005b810: 6a6f 622e 7061 7261 6d5f 6469 6374 2720  job.param_dict' 
+0005b820: 746f 2073 6861 7265 2069 7465 6d73 2077  to share items w
+0005b830: 6974 6820 626f 7468 2074 6865 2069 6e70  ith both the inp
+0005b840: 7574 7320 616e 640a 2020 2020 2020 2020  uts and.        
+0005b850: 2320 6f75 7470 7574 7320 6c69 7374 206f  # outputs list o
+0005b860: 6620 7468 6520 7072 6f63 6573 730a 2020  f the process.  
+0005b870: 2020 2020 2020 2320 4e6f 7465 3a20 6f6e        # Note: on
+0005b880: 6c79 2027 696e 5f66 696c 6527 2061 6e64  ly 'in_file' and
+0005b890: 2027 5f6f 7574 5f66 696c 6527 2061 7265   '_out_file' are
+0005b8a0: 2066 696c 6520 7472 6169 7420 7479 7065   file trait type
+0005b8b0: 730a 2020 2020 2020 2020 6a6f 622e 7061  s.        job.pa
+0005b8c0: 7261 6d5f 6469 6374 5b22 5f6f 7574 5f66  ram_dict["_out_f
+0005b8d0: 696c 6522 5d20 3d20 225f 6f75 745f 6669  ile"] = "_out_fi
+0005b8e0: 6c65 5f76 616c 7565 220a 0a20 2020 2020  le_value"..     
+0005b8f0: 2020 2070 706c 5f6d 616e 6167 6572 2e75     ppl_manager.u
+0005b900: 7064 6174 655f 6175 746f 5f69 6e68 6572  pdate_auto_inher
+0005b910: 6974 616e 6365 286a 6f62 2c20 6e6f 6465  itance(job, node
+0005b920: 290a 0a20 2020 2020 2020 2023 2027 6a6f  )..        # 'jo
+0005b930: 622e 7061 7261 6d5f 6469 6374 2720 6173  b.param_dict' as
+0005b940: 206c 6973 7420 6f66 206f 626a 6563 7473   list of objects
+0005b950: 0a20 2020 2020 2020 206a 6f62 2e70 6172  .        job.par
+0005b960: 616d 5f64 6963 745b 2269 6e6c 6973 7422  am_dict["inlist"
+0005b970: 5d20 3d20 5b44 4f43 554d 454e 545f 312c  ] = [DOCUMENT_1,
+0005b980: 2044 4f43 554d 454e 545f 325d 0a20 2020   DOCUMENT_2].   
+0005b990: 2020 2020 2070 726f 6365 7373 2e67 6574       process.get
+0005b9a0: 5f6f 7574 7075 7473 203d 204d 6f63 6b28  _outputs = Mock(
+0005b9b0: 7265 7475 726e 5f76 616c 7565 3d7b 225f  return_value={"_
+0005b9c0: 6f75 7422 3a20 5b22 5f6f 7574 5f76 616c  out": ["_out_val
+0005b9d0: 7565 225d 7d29 0a20 2020 2020 2020 206a  ue"]}).        j
+0005b9e0: 6f62 2e70 6172 616d 5f64 6963 745b 225f  ob.param_dict["_
+0005b9f0: 6f75 7422 5d20 3d20 5b22 5f6f 7574 5f76  out"] = ["_out_v
+0005ba00: 616c 7565 225d 0a20 2020 2020 2020 2070  alue"].        p
+0005ba10: 706c 5f6d 616e 6167 6572 2e75 7064 6174  pl_manager.updat
+0005ba20: 655f 6175 746f 5f69 6e68 6572 6974 616e  e_auto_inheritan
+0005ba30: 6365 286a 6f62 2c20 6e6f 6465 290a 0a20  ce(job, node).. 
+0005ba40: 2020 2020 2020 2023 2027 6e6f 6465 2720         # 'node' 
+0005ba50: 646f 6573 206e 6f74 2068 6176 6520 6120  does not have a 
+0005ba60: 2770 726f 6a65 6374 270a 2020 2020 2020  'project'.      
+0005ba70: 2020 6465 6c20 6e6f 6465 2e70 726f 6365    del node.proce
+0005ba80: 7373 2e73 7475 6479 5f63 6f6e 6669 672e  ss.study_config.
+0005ba90: 7072 6f6a 6563 740a 2020 2020 2020 2020  project.        
+0005baa0: 7070 6c5f 6d61 6e61 6765 722e 7570 6461  ppl_manager.upda
+0005bab0: 7465 5f61 7574 6f5f 696e 6865 7269 7461  te_auto_inherita
+0005bac0: 6e63 6528 6a6f 622c 206e 6f64 6529 0a0a  nce(job, node)..
+0005bad0: 2020 2020 2020 2020 2320 276e 6f64 6527          # 'node'
+0005bae0: 2069 7320 6e6f 7420 6120 2750 726f 6365   is not a 'Proce
+0005baf0: 7373 270a 2020 2020 2020 2020 6e6f 6465  ss'.        node
+0005bb00: 203d 207b 7d0a 2020 2020 2020 2020 7070   = {}.        pp
+0005bb10: 6c5f 6d61 6e61 6765 722e 7570 6461 7465  l_manager.update
+0005bb20: 5f61 7574 6f5f 696e 6865 7269 7461 6e63  _auto_inheritanc
+0005bb30: 6528 6a6f 622c 206e 6f64 6529 0a0a 2020  e(job, node)..  
+0005bb40: 2020 6465 6620 7465 7374 5f75 7064 6174    def test_updat
+0005bb50: 655f 696e 6865 7269 7461 6e63 6528 7365  e_inheritance(se
+0005bb60: 6c66 293a 0a20 2020 2020 2020 2022 2222  lf):.        """
+0005bb70: 4164 6473 2061 2070 726f 6365 7373 2061  Adds a process a
+0005bb80: 6e64 2075 7064 6174 6573 2074 6865 206a  nd updates the j
+0005bb90: 6f62 2773 2069 6e68 6572 6974 616e 6365  ob's inheritance
+0005bba0: 2064 6963 742e 0a0a 2020 2020 2020 2020   dict...        
+0005bbb0: 2d20 5465 7374 733a 2050 6970 656c 696e  - Tests: Pipelin
+0005bbc0: 654d 616e 6167 6572 5461 622e 7570 6461  eManagerTab.upda
+0005bbd0: 7465 5f69 6e68 6572 6974 616e 6365 0a20  te_inheritance. 
+0005bbe0: 2020 2020 2020 2022 2222 0a0a 2020 2020         """..    
+0005bbf0: 2020 2020 2320 5365 7473 2073 686f 7274      # Sets short
+0005bc00: 6375 7473 2066 6f72 206f 626a 6563 7473  cuts for objects
+0005bc10: 2074 6861 7420 6172 6520 6f66 7465 6e20   that are often 
+0005bc20: 7573 6564 0a20 2020 2020 2020 2070 706c  used.        ppl
+0005bc30: 5f6d 616e 6167 6572 203d 2073 656c 662e  _manager = self.
+0005bc40: 6d61 696e 5f77 696e 646f 772e 7069 7065  main_window.pipe
+0005bc50: 6c69 6e65 5f6d 616e 6167 6572 0a20 2020  line_manager.   
+0005bc60: 2020 2020 2070 706c 5f65 6474 5f74 6162       ppl_edt_tab
+0005bc70: 7320 3d20 7070 6c5f 6d61 6e61 6765 722e  s = ppl_manager.
+0005bc80: 7069 7065 6c69 6e65 4564 6974 6f72 5461  pipelineEditorTa
+0005bc90: 6273 0a20 2020 2020 2020 2070 706c 203d  bs.        ppl =
+0005bca0: 2070 706c 5f65 6474 5f74 6162 732e 6765   ppl_edt_tabs.ge
+0005bcb0: 745f 6375 7272 656e 745f 7069 7065 6c69  t_current_pipeli
+0005bcc0: 6e65 2829 0a0a 2020 2020 2020 2020 2320  ne()..        # 
+0005bcd0: 4164 6473 2061 2052 656e 616d 6520 7072  Adds a Rename pr
+0005bce0: 6f63 6573 7365 732c 2063 7265 6174 6573  ocesses, creates
+0005bcf0: 2074 6865 2027 7265 6e61 6d65 5f31 2720   the 'rename_1' 
+0005bd00: 6e6f 6465 0a20 2020 2020 2020 2070 706c  node.        ppl
+0005bd10: 5f65 6474 5f74 6162 732e 6765 745f 6375  _edt_tabs.get_cu
+0005bd20: 7272 656e 745f 6564 6974 6f72 2829 2e63  rrent_editor().c
+0005bd30: 6c69 636b 5f70 6f73 203d 2051 506f 696e  lick_pos = QPoin
+0005bd40: 7428 3435 302c 2035 3030 290a 2020 2020  t(450, 500).    
+0005bd50: 2020 2020 7070 6c5f 6564 745f 7461 6273      ppl_edt_tabs
+0005bd60: 2e67 6574 5f63 7572 7265 6e74 5f65 6469  .get_current_edi
+0005bd70: 746f 7228 292e 6164 645f 6e61 6d65 645f  tor().add_named_
+0005bd80: 7072 6f63 6573 7328 5265 6e61 6d65 290a  process(Rename).
+0005bd90: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
+0005bda0: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
+0005bdb0: 745f 6564 6974 6f72 2829 2e65 7870 6f72  t_editor().expor
+0005bdc0: 745f 756e 636f 6e6e 6563 7465 645f 6d61  t_unconnected_ma
+0005bdd0: 6e64 6174 6f72 795f 696e 7075 7473 2829  ndatory_inputs()
+0005bde0: 0a20 2020 2020 2020 2070 706c 5f65 6474  .        ppl_edt
+0005bdf0: 5f74 6162 732e 6765 745f 6375 7272 656e  _tabs.get_curren
+0005be00: 745f 6564 6974 6f72 2829 2e65 7870 6f72  t_editor().expor
+0005be10: 745f 616c 6c5f 756e 636f 6e6e 6563 7465  t_all_unconnecte
+0005be20: 645f 6f75 7470 7574 7328 290a 0a20 2020  d_outputs()..   
+0005be30: 2020 2020 206e 6f64 6520 3d20 7070 6c2e       node = ppl.
+0005be40: 6e6f 6465 735b 2272 656e 616d 655f 3122  nodes["rename_1"
+0005be50: 5d0a 0a20 2020 2020 2020 2023 2049 6e69  ]..        # Ini
+0005be60: 7469 616c 697a 6573 2074 6865 2077 6f72  tializes the wor
+0005be70: 6b66 6c6f 7720 6d61 6e75 616c 6c79 0a20  kflow manually. 
+0005be80: 2020 2020 2020 2070 706c 5f6d 616e 6167         ppl_manag
+0005be90: 6572 2e77 6f72 6b66 6c6f 7720 3d20 776f  er.workflow = wo
+0005bea0: 726b 666c 6f77 5f66 726f 6d5f 7069 7065  rkflow_from_pipe
+0005beb0: 6c69 6e65 280a 2020 2020 2020 2020 2020  line(.          
+0005bec0: 2020 7070 6c2c 2063 6f6d 706c 6574 655f    ppl, complete_
+0005bed0: 7061 7261 6d65 7465 7273 3d54 7275 650a  parameters=True.
+0005bee0: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+0005bef0: 2020 2023 2047 6574 7320 7468 6520 276a     # Gets the 'j
+0005bf00: 6f62 2720 616e 6420 6d6f 636b 7320 6164  ob' and mocks ad
+0005bf10: 6469 6e67 2061 2062 7269 636b 2074 6f20  ding a brick to 
+0005bf20: 7468 6520 636f 6c6c 6563 7469 6f6e 0a20  the collection. 
+0005bf30: 2020 2020 2020 206a 6f62 203d 2070 706c         job = ppl
+0005bf40: 5f6d 616e 6167 6572 2e77 6f72 6b66 6c6f  _manager.workflo
+0005bf50: 772e 6a6f 6273 5b30 5d0a 0a20 2020 2020  w.jobs[0]..     
+0005bf60: 2020 2023 204e 6f64 6527 7320 6e61 6d65     # Node's name
+0005bf70: 2064 6f65 7320 6e6f 7420 636f 6e74 6169   does not contai
+0005bf80: 6e73 2027 5069 7065 6c69 6e65 270a 2020  ns 'Pipeline'.  
+0005bf90: 2020 2020 2020 6e6f 6465 2e63 6f6e 7465        node.conte
+0005bfa0: 7874 5f6e 616d 6520 3d20 2222 0a20 2020  xt_name = "".   
+0005bfb0: 2020 2020 206e 6f64 652e 7072 6f63 6573       node.proces
+0005bfc0: 732e 696e 6865 7269 7461 6e63 655f 6469  s.inheritance_di
+0005bfd0: 6374 203d 207b 2269 7465 6d22 3a20 2276  ct = {"item": "v
+0005bfe0: 616c 7565 227d 0a20 2020 2020 2020 2070  alue"}.        p
+0005bff0: 706c 5f6d 616e 6167 6572 2e70 726f 6a65  pl_manager.proje
+0005c000: 6374 2e6e 6f64 655f 696e 6865 7269 7461  ct.node_inherita
+0005c010: 6e63 655f 6869 7374 6f72 7920 3d20 7b7d  nce_history = {}
+0005c020: 0a20 2020 2020 2020 2070 706c 5f6d 616e  .        ppl_man
+0005c030: 6167 6572 2e75 7064 6174 655f 696e 6865  ager.update_inhe
+0005c040: 7269 7461 6e63 6528 6a6f 622c 206e 6f64  ritance(job, nod
+0005c050: 6529 0a0a 2020 2020 2020 2020 7365 6c66  e)..        self
+0005c060: 2e61 7373 6572 7445 7175 616c 286a 6f62  .assertEqual(job
+0005c070: 2e69 6e68 6572 6974 616e 6365 5f64 6963  .inheritance_dic
+0005c080: 742c 207b 2269 7465 6d22 3a20 2276 616c  t, {"item": "val
+0005c090: 7565 227d 290a 0a20 2020 2020 2020 2023  ue"})..        #
+0005c0a0: 204e 6f64 6527 7320 6e61 6d65 2063 6f6e   Node's name con
+0005c0b0: 7461 696e 7320 2750 6970 656c 696e 6527  tains 'Pipeline'
+0005c0c0: 0a20 2020 2020 2020 206e 6f64 652e 636f  .        node.co
+0005c0d0: 6e74 6578 745f 6e61 6d65 203d 2022 5069  ntext_name = "Pi
+0005c0e0: 7065 6c69 6e65 2e72 656e 616d 655f 3122  peline.rename_1"
+0005c0f0: 0a20 2020 2020 2020 2070 706c 5f6d 616e  .        ppl_man
+0005c100: 6167 6572 2e75 7064 6174 655f 696e 6865  ager.update_inhe
+0005c110: 7269 7461 6e63 6528 6a6f 622c 206e 6f64  ritance(job, nod
+0005c120: 6529 0a0a 2020 2020 2020 2020 7365 6c66  e)..        self
+0005c130: 2e61 7373 6572 7445 7175 616c 286a 6f62  .assertEqual(job
+0005c140: 2e69 6e68 6572 6974 616e 6365 5f64 6963  .inheritance_dic
+0005c150: 742c 207b 2269 7465 6d22 3a20 2276 616c  t, {"item": "val
+0005c160: 7565 227d 290a 0a20 2020 2020 2020 2023  ue"})..        #
+0005c170: 204e 6f64 6527 7320 6e61 6d65 2069 6e20   Node's name in 
+0005c180: 276e 6f64 655f 696e 6865 7269 7461 6e63  'node_inheritanc
+0005c190: 655f 6869 7374 6f72 7927 0a20 2020 2020  e_history'.     
+0005c1a0: 2020 2028 7070 6c5f 6d61 6e61 6765 722e     (ppl_manager.
+0005c1b0: 7072 6f6a 6563 742e 6e6f 6465 5f69 6e68  project.node_inh
+0005c1c0: 6572 6974 616e 6365 5f68 6973 746f 7279  eritance_history
+0005c1d0: 5b22 7265 6e61 6d65 5f31 225d 2920 3d20  ["rename_1"]) = 
+0005c1e0: 5b0a 2020 2020 2020 2020 2020 2020 7b30  [.            {0
+0005c1f0: 3a20 226e 6577 5f76 616c 7565 227d 0a20  : "new_value"}. 
+0005c200: 2020 2020 2020 205d 0a20 2020 2020 2020         ].       
+0005c210: 2070 706c 5f6d 616e 6167 6572 2e75 7064   ppl_manager.upd
+0005c220: 6174 655f 696e 6865 7269 7461 6e63 6528  ate_inheritance(
+0005c230: 6a6f 622c 206e 6f64 6529 0a0a 2020 2020  job, node)..    
+0005c240: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0005c250: 7175 616c 286a 6f62 2e69 6e68 6572 6974  qual(job.inherit
+0005c260: 616e 6365 5f64 6963 742c 207b 303a 2022  ance_dict, {0: "
+0005c270: 6e65 775f 7661 6c75 6522 7d29 0a0a 2020  new_value"})..  
+0005c280: 2020 6465 6620 7465 7374 5f75 7064 6174    def test_updat
+0005c290: 655f 6e6f 6465 5f6c 6973 7428 7365 6c66  e_node_list(self
+0005c2a0: 293a 0a20 2020 2020 2020 2022 2222 4164  ):.        """Ad
+0005c2b0: 6473 2061 2070 726f 6365 7373 2c20 6578  ds a process, ex
+0005c2c0: 706f 7274 7320 696e 7075 7420 616e 6420  ports input and 
+0005c2d0: 6f75 7470 7574 2070 6c75 6773 2c20 696e  output plugs, in
+0005c2e0: 6974 6961 6c69 7a65 7320 610a 2020 2020  itializes a.    
+0005c2f0: 2020 2020 776f 726b 666c 6f77 2061 6e64      workflow and
+0005c300: 2061 6464 7320 7468 6520 7072 6f63 6573   adds the proces
+0005c310: 7320 746f 2074 6865 2022 7069 706c 696e  s to the "piplin
+0005c320: 655f 6d61 6e61 6765 722e 6e6f 6465 5f6c  e_manager.node_l
+0005c330: 6973 7422 2e0a 0a20 2020 2020 2020 202d  ist"...        -
+0005c340: 2054 6573 7473 3a20 5069 7065 6c69 6e65   Tests: Pipeline
+0005c350: 4d61 6e61 6765 7254 6162 2e75 7064 6174  ManagerTab.updat
+0005c360: 655f 6e6f 6465 5f6c 6973 740a 2020 2020  e_node_list.    
+0005c370: 2020 2020 2222 220a 0a20 2020 2020 2020      """..       
+0005c380: 2023 2053 6574 2073 686f 7274 6375 7473   # Set shortcuts
+0005c390: 2066 6f72 206f 6674 656e 2075 7365 6420   for often used 
+0005c3a0: 6f62 6a65 6374 730a 2020 2020 2020 2020  objects.        
+0005c3b0: 7070 6c5f 6d61 6e61 6765 7220 3d20 7365  ppl_manager = se
+0005c3c0: 6c66 2e6d 6169 6e5f 7769 6e64 6f77 2e70  lf.main_window.p
+0005c3d0: 6970 656c 696e 655f 6d61 6e61 6765 720a  ipeline_manager.
+0005c3e0: 2020 2020 2020 2020 7070 6c5f 6564 745f          ppl_edt_
+0005c3f0: 7461 6273 203d 2070 706c 5f6d 616e 6167  tabs = ppl_manag
+0005c400: 6572 2e70 6970 656c 696e 6545 6469 746f  er.pipelineEdito
+0005c410: 7254 6162 730a 0a20 2020 2020 2020 2070  rTabs..        p
+0005c420: 726f 6365 7373 5f63 6c61 7373 203d 2052  rocess_class = R
+0005c430: 656e 616d 650a 2020 2020 2020 2020 7070  ename.        pp
+0005c440: 6c5f 6564 745f 7461 6273 2e67 6574 5f63  l_edt_tabs.get_c
+0005c450: 7572 7265 6e74 5f65 6469 746f 7228 292e  urrent_editor().
+0005c460: 636c 6963 6b5f 706f 7320 3d20 5150 6f69  click_pos = QPoi
+0005c470: 6e74 2834 3530 2c20 3530 3029 0a20 2020  nt(450, 500).   
+0005c480: 2020 2020 2070 706c 5f65 6474 5f74 6162       ppl_edt_tab
+0005c490: 732e 6765 745f 6375 7272 656e 745f 6564  s.get_current_ed
+0005c4a0: 6974 6f72 2829 2e61 6464 5f6e 616d 6564  itor().add_named
+0005c4b0: 5f70 726f 6365 7373 2870 726f 6365 7373  _process(process
+0005c4c0: 5f63 6c61 7373 290a 2020 2020 2020 2020  _class).        
+0005c4d0: 7069 7065 6c69 6e65 203d 2070 706c 5f65  pipeline = ppl_e
+0005c4e0: 6474 5f74 6162 732e 6765 745f 6375 7272  dt_tabs.get_curr
+0005c4f0: 656e 745f 7069 7065 6c69 6e65 2829 0a0a  ent_pipeline()..
+0005c500: 2020 2020 2020 2020 2320 4578 706f 7274          # Export
+0005c510: 7320 7468 6520 6d61 6e64 6174 6f72 7920  s the mandatory 
+0005c520: 696e 7075 7473 2061 6e64 206f 7574 7075  inputs and outpu
+0005c530: 7473 2066 6f72 2022 7265 6e61 6d65 5f31  ts for "rename_1
+0005c540: 220a 2020 2020 2020 2020 7070 6c5f 6564  ".        ppl_ed
+0005c550: 745f 7461 6273 2e67 6574 5f63 7572 7265  t_tabs.get_curre
+0005c560: 6e74 5f65 6469 746f 7228 292e 6375 7272  nt_editor().curr
+0005c570: 656e 745f 6e6f 6465 5f6e 616d 6520 3d20  ent_node_name = 
+0005c580: 2272 656e 616d 655f 3122 0a20 2020 2020  "rename_1".     
+0005c590: 2020 2070 706c 5f65 6474 5f74 6162 732e     ppl_edt_tabs.
+0005c5a0: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
+0005c5b0: 6f72 2829 2e65 7870 6f72 745f 756e 636f  or().export_unco
+0005c5c0: 6e6e 6563 7465 645f 6d61 6e64 6174 6f72  nnected_mandator
+0005c5d0: 795f 696e 7075 7473 2829 0a20 2020 2020  y_inputs().     
+0005c5e0: 2020 2070 706c 5f65 6474 5f74 6162 732e     ppl_edt_tabs.
+0005c5f0: 6765 745f 6375 7272 656e 745f 6564 6974  get_current_edit
+0005c600: 6f72 2829 2e65 7870 6f72 745f 616c 6c5f  or().export_all_
+0005c610: 756e 636f 6e6e 6563 7465 645f 6f75 7470  unconnected_outp
+0005c620: 7574 7328 290a 0a20 2020 2020 2020 2023  uts()..        #
+0005c630: 2049 6e69 7469 616c 697a 6573 2074 6865   Initializes the
+0005c640: 2077 6f72 6b66 6c6f 770a 2020 2020 2020   workflow.      
+0005c650: 2020 7070 6c5f 6d61 6e61 6765 722e 776f    ppl_manager.wo
+0005c660: 726b 666c 6f77 203d 2077 6f72 6b66 6c6f  rkflow = workflo
+0005c670: 775f 6672 6f6d 5f70 6970 656c 696e 6528  w_from_pipeline(
+0005c680: 0a20 2020 2020 2020 2020 2020 2070 6970  .            pip
+0005c690: 656c 696e 652c 2063 6f6d 706c 6574 655f  eline, complete_
+0005c6a0: 7061 7261 6d65 7465 7273 3d54 7275 650a  parameters=True.
+0005c6b0: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+0005c6c0: 2020 2023 2041 7373 6572 7473 2074 6861     # Asserts tha
+0005c6d0: 7420 7468 6520 226e 6f64 655f 6c69 7374  t the "node_list
+0005c6e0: 2220 6973 2065 6d70 7479 2062 7920 6465  " is empty by de
+0005c6f0: 6661 756c 740a 2020 2020 2020 2020 6e6f  fault.        no
+0005c700: 6465 5f6c 6973 7420 3d20 7365 6c66 2e6d  de_list = self.m
+0005c710: 6169 6e5f 7769 6e64 6f77 2e70 6970 656c  ain_window.pipel
+0005c720: 696e 655f 6d61 6e61 6765 722e 6e6f 6465  ine_manager.node
+0005c730: 5f6c 6973 740a 2020 2020 2020 2020 7365  _list.        se
+0005c740: 6c66 2e61 7373 6572 7445 7175 616c 286c  lf.assertEqual(l
+0005c750: 656e 286e 6f64 655f 6c69 7374 292c 2030  en(node_list), 0
+0005c760: 290a 0a20 2020 2020 2020 2023 2041 7373  )..        # Ass
+0005c770: 6572 7473 2074 6861 7420 7468 6520 7072  erts that the pr
+0005c780: 6f63 6573 7320 2252 656e 616d 6522 2077  ocess "Rename" w
+0005c790: 6173 2061 6464 6564 2074 6f20 226e 6f64  as added to "nod
+0005c7a0: 655f 6c69 7374 220a 2020 2020 2020 2020  e_list".        
+0005c7b0: 7070 6c5f 6d61 6e61 6765 722e 7570 6461  ppl_manager.upda
+0005c7c0: 7465 5f6e 6f64 655f 6c69 7374 2829 0a20  te_node_list(). 
+0005c7d0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0005c7e0: 7274 4571 7561 6c28 6c65 6e28 6e6f 6465  rtEqual(len(node
+0005c7f0: 5f6c 6973 7429 2c20 3129 0a20 2020 2020  _list), 1).     
+0005c800: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+0005c810: 7561 6c28 6e6f 6465 5f6c 6973 745b 305d  ual(node_list[0]
+0005c820: 2e5f 6e69 7079 7065 5f63 6c61 7373 2c20  ._nipype_class, 
+0005c830: 2252 656e 616d 6522 290a 0a20 2020 2064  "Rename")..    d
+0005c840: 6566 2074 6573 745f 7a5f 696e 6974 5f70  ef test_z_init_p
+0005c850: 6970 656c 696e 6528 7365 6c66 293a 0a20  ipeline(self):. 
+0005c860: 2020 2020 2020 2022 2222 4164 6473 2061         """Adds a
+0005c870: 2070 726f 6365 7373 2c20 6d6f 636b 7320   process, mocks 
+0005c880: 7365 7665 7261 6c20 7061 7261 6d65 7465  several paramete
+0005c890: 7273 2066 726f 6d20 7468 6520 7069 7065  rs from the pipe
+0005c8a0: 6c69 6e65 0a20 2020 2020 2020 206d 616e  line.        man
+0005c8b0: 6167 6572 2061 6e64 2069 6e69 7469 616c  ager and initial
+0005c8c0: 697a 6573 2074 6865 2070 6970 656c 696e  izes the pipelin
+0005c8d0: 652e 0a0a 2020 2020 2020 2020 2d20 5465  e...        - Te
+0005c8e0: 7374 733a 2050 6970 656c 696e 654d 616e  sts: PipelineMan
+0005c8f0: 6167 6572 5461 622e 696e 6974 5f70 6970  agerTab.init_pip
+0005c900: 656c 696e 650a 2020 2020 2020 2020 2222  eline.        ""
+0005c910: 220a 0a20 2020 2020 2020 2023 2053 6574  "..        # Set
+0005c920: 7320 7368 6f72 7463 7574 7320 666f 7220  s shortcuts for 
+0005c930: 6f62 6a65 6374 7320 7468 6174 2061 7265  objects that are
+0005c940: 206f 6674 656e 2075 7365 640a 2020 2020   often used.    
+0005c950: 2020 2020 7070 6c5f 6d61 6e61 6765 7220      ppl_manager 
+0005c960: 3d20 7365 6c66 2e6d 6169 6e5f 7769 6e64  = self.main_wind
+0005c970: 6f77 2e70 6970 656c 696e 655f 6d61 6e61  ow.pipeline_mana
+0005c980: 6765 720a 2020 2020 2020 2020 7070 6c5f  ger.        ppl_
+0005c990: 6564 745f 7461 6273 203d 2070 706c 5f6d  edt_tabs = ppl_m
+0005c9a0: 616e 6167 6572 2e70 6970 656c 696e 6545  anager.pipelineE
+0005c9b0: 6469 746f 7254 6162 730a 2020 2020 2020  ditorTabs.      
+0005c9c0: 2020 7070 6c20 3d20 7070 6c5f 6564 745f    ppl = ppl_edt_
+0005c9d0: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
+0005c9e0: 5f70 6970 656c 696e 6528 290a 0a20 2020  _pipeline()..   
+0005c9f0: 2020 2020 2023 2047 6574 7320 7468 6520       # Gets the 
+0005ca00: 7061 7468 206f 6620 6f6e 6520 646f 6375  path of one docu
+0005ca10: 6d65 6e74 0a20 2020 2020 2020 2063 6f6e  ment.        con
+0005ca20: 6669 6720 3d20 436f 6e66 6967 2863 6f6e  fig = Config(con
+0005ca30: 6669 675f 7061 7468 3d73 656c 662e 636f  fig_path=self.co
+0005ca40: 6e66 6967 5f70 6174 6829 0a20 2020 2020  nfig_path).     
+0005ca50: 2020 2066 6f6c 6465 7220 3d20 6f73 2e70     folder = os.p
+0005ca60: 6174 682e 6162 7370 6174 6828 0a20 2020  ath.abspath(.   
+0005ca70: 2020 2020 2020 2020 206f 732e 7061 7468           os.path
+0005ca80: 2e6a 6f69 6e28 0a20 2020 2020 2020 2020  .join(.         
+0005ca90: 2020 2020 2020 2063 6f6e 6669 672e 6765         config.ge
+0005caa0: 745f 6d69 615f 7061 7468 2829 2c0a 2020  t_mia_path(),.  
+0005cab0: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+0005cac0: 6961 7574 6461 7461 222c 0a20 2020 2020  iautdata",.     
+0005cad0: 2020 2020 2020 2020 2020 2022 7265 736f             "reso
+0005cae0: 7572 6365 7322 2c0a 2020 2020 2020 2020  urces",.        
+0005caf0: 2020 2020 2020 2020 226d 6961 222c 0a20          "mia",. 
+0005cb00: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0005cb10: 7072 6f6a 6563 745f 3822 2c0a 2020 2020  project_8",.    
+0005cb20: 2020 2020 2020 2020 2020 2020 2264 6174              "dat
+0005cb30: 6122 2c0a 2020 2020 2020 2020 2020 2020  a",.            
+0005cb40: 2020 2020 2272 6177 5f64 6174 6122 2c0a      "raw_data",.
+0005cb50: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0005cb60: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+0005cb70: 204e 4949 5f46 494c 455f 3120 3d20 280a   NII_FILE_1 = (.
+0005cb80: 2020 2020 2020 2020 2020 2020 2247 7565              "Gue
+0005cb90: 7262 6574 2d43 362d 3230 3134 2d52 6174  rbet-C6-2014-Rat
+0005cba0: 2d4b 3532 2d54 7562 6532 372d 3230 3134  -K52-Tube27-2014
+0005cbb0: 2d30 322d 3134 3130 3233 3137 2d30 312d  -02-14102317-01-
+0005cbc0: 4731 5f22 0a20 2020 2020 2020 2020 2020  G1_".           
+0005cbd0: 2022 4775 6572 6265 745f 416e 6174 2d52   "Guerbet_Anat-R
+0005cbe0: 4152 4570 766d 2d30 3030 3232 305f 3030  AREpvm-000220_00
+0005cbf0: 302e 6e69 6922 0a20 2020 2020 2020 2029  0.nii".        )
+0005cc00: 0a0a 2020 2020 2020 2020 444f 4355 4d45  ..        DOCUME
+0005cc10: 4e54 5f31 203d 206f 732e 7061 7468 2e61  NT_1 = os.path.a
+0005cc20: 6273 7061 7468 286f 732e 7061 7468 2e6a  bspath(os.path.j
+0005cc30: 6f69 6e28 666f 6c64 6572 2c20 4e49 495f  oin(folder, NII_
+0005cc40: 4649 4c45 5f31 2929 0a0a 2020 2020 2020  FILE_1))..      
+0005cc50: 2020 2320 4164 6473 2061 2052 656e 616d    # Adds a Renam
+0005cc60: 6520 7072 6f63 6573 7365 732c 2063 7265  e processes, cre
+0005cc70: 6174 6573 2074 6865 2027 7265 6e61 6d65  ates the 'rename
+0005cc80: 5f31 2720 6e6f 6465 0a20 2020 2020 2020  _1' node.       
+0005cc90: 2070 706c 5f65 6474 5f74 6162 732e 6765   ppl_edt_tabs.ge
+0005cca0: 745f 6375 7272 656e 745f 6564 6974 6f72  t_current_editor
+0005ccb0: 2829 2e63 6c69 636b 5f70 6f73 203d 2051  ().click_pos = Q
+0005ccc0: 506f 696e 7428 3435 302c 2035 3030 290a  Point(450, 500).
+0005ccd0: 2020 2020 2020 2020 7070 6c5f 6564 745f          ppl_edt_
+0005cce0: 7461 6273 2e67 6574 5f63 7572 7265 6e74  tabs.get_current
+0005ccf0: 5f65 6469 746f 7228 292e 6164 645f 6e61  _editor().add_na
+0005cd00: 6d65 645f 7072 6f63 6573 7328 5265 6e61  med_process(Rena
+0005cd10: 6d65 290a 0a20 2020 2020 2020 2070 706c  me)..        ppl
+0005cd20: 5f65 6474 5f74 6162 732e 6765 745f 6375  _edt_tabs.get_cu
+0005cd30: 7272 656e 745f 6564 6974 6f72 2829 2e65  rrent_editor().e
+0005cd40: 7870 6f72 745f 756e 636f 6e6e 6563 7465  xport_unconnecte
+0005cd50: 645f 6d61 6e64 6174 6f72 795f 696e 7075  d_mandatory_inpu
+0005cd60: 7473 2829 0a20 2020 2020 2020 2070 706c  ts().        ppl
+0005cd70: 5f65 6474 5f74 6162 732e 6765 745f 6375  _edt_tabs.get_cu
+0005cd80: 7272 656e 745f 6564 6974 6f72 2829 2e65  rrent_editor().e
+0005cd90: 7870 6f72 745f 616c 6c5f 756e 636f 6e6e  xport_all_unconn
+0005cda0: 6563 7465 645f 6f75 7470 7574 7328 290a  ected_outputs().
+0005cdb0: 0a20 2020 2020 2020 2023 2056 6572 6966  .        # Verif
+0005cdc0: 6965 7320 7468 6174 2061 6c6c 2074 6865  ies that all the
+0005cdd0: 2070 726f 6365 7373 6573 2077 6572 6520   processes were 
+0005cde0: 6164 6465 640a 2020 2020 2020 2020 7365  added.        se
+0005cdf0: 6c66 2e61 7373 6572 7445 7175 616c 285b  lf.assertEqual([
+0005ce00: 2222 2c20 2272 656e 616d 655f 3122 5d2c  "", "rename_1"],
+0005ce10: 2070 706c 2e6e 6f64 6573 2e6b 6579 7328   ppl.nodes.keys(
+0005ce20: 2929 0a0a 2020 2020 2020 2020 2320 496e  ))..        # In
+0005ce30: 6974 6961 6c69 7a65 2074 6865 2070 6970  itialize the pip
+0005ce40: 656c 696e 6520 7769 7468 206d 6973 7369  eline with missi
+0005ce50: 6e67 206d 616e 6461 746f 7279 2070 6172  ng mandatory par
+0005ce60: 616d 6574 6572 730a 2020 2020 2020 2020  ameters.        
+0005ce70: 7070 6c5f 6d61 6e61 6765 722e 776f 726b  ppl_manager.work
+0005ce80: 666c 6f77 203d 2077 6f72 6b66 6c6f 775f  flow = workflow_
+0005ce90: 6672 6f6d 5f70 6970 656c 696e 6528 0a20  from_pipeline(. 
+0005cea0: 2020 2020 2020 2020 2020 2070 706c 2c20             ppl, 
+0005ceb0: 636f 6d70 6c65 7465 5f70 6172 616d 6574  complete_paramet
+0005cec0: 6572 733d 5472 7565 0a20 2020 2020 2020  ers=True.       
+0005ced0: 2029 0a0a 2020 2020 2020 2020 2320 4d6f   )..        # Mo
+0005cee0: 636b 7320 6578 6563 7574 696e 6720 6120  cks executing a 
+0005cef0: 6469 616c 6f67 2062 6f78 2c20 696e 7374  dialog box, inst
+0005cf00: 6561 6420 7368 6f77 7320 6974 0a20 2020  ead shows it.   
+0005cf10: 2020 2020 2051 4d65 7373 6167 6542 6f78       QMessageBox
+0005cf20: 2e65 7865 6320 3d20 6c61 6d62 6461 2073  .exec = lambda s
+0005cf30: 656c 665f 2c20 2a61 7267 733a 2073 656c  elf_, *args: sel
+0005cf40: 665f 2e73 686f 7728 290a 0a20 2020 2020  f_.show()..     
+0005cf50: 2020 2070 706c 5f6d 616e 6167 6572 2e75     ppl_manager.u
+0005cf60: 7064 6174 655f 6e6f 6465 5f6c 6973 7428  pdate_node_list(
+0005cf70: 290a 2020 2020 2020 2020 696e 6974 5f72  ).        init_r
+0005cf80: 6573 756c 7420 3d20 7070 6c5f 6d61 6e61  esult = ppl_mana
+0005cf90: 6765 722e 696e 6974 5f70 6970 656c 696e  ger.init_pipelin
+0005cfa0: 6528 290a 2020 2020 2020 2020 7070 6c5f  e().        ppl_
+0005cfb0: 6d61 6e61 6765 722e 6d73 672e 6163 6365  manager.msg.acce
+0005cfc0: 7074 2829 0a20 2020 2020 2020 2073 656c  pt().        sel
+0005cfd0: 662e 6173 7365 7274 4661 6c73 6528 696e  f.assertFalse(in
+0005cfe0: 6974 5f72 6573 756c 7429 0a0a 2020 2020  it_result)..    
+0005cff0: 2020 2020 2320 5365 7473 2074 6865 206d      # Sets the m
+0005d000: 616e 6461 746f 7279 2070 6172 616d 6574  andatory paramet
+0005d010: 6572 730a 2020 2020 2020 2020 7070 6c2e  ers.        ppl.
+0005d020: 6e6f 6465 735b 2222 5d2e 7365 745f 706c  nodes[""].set_pl
+0005d030: 7567 5f76 616c 7565 2822 696e 5f66 696c  ug_value("in_fil
+0005d040: 6522 2c20 444f 4355 4d45 4e54 5f31 290a  e", DOCUMENT_1).
+0005d050: 2020 2020 2020 2020 7070 6c2e 6e6f 6465          ppl.node
+0005d060: 735b 2222 5d2e 7365 745f 706c 7567 5f76  s[""].set_plug_v
+0005d070: 616c 7565 2822 666f 726d 6174 5f73 7472  alue("format_str
+0005d080: 696e 6722 2c20 226e 6577 5f6e 616d 652e  ing", "new_name.
+0005d090: 6e69 6922 290a 0a20 2020 2020 2020 2023  nii")..        #
+0005d0a0: 204d 6f63 6b73 2061 6e20 6974 6572 6174   Mocks an iterat
+0005d0b0: 696f 6e20 7069 7065 6c69 6e65 0a20 2020  ion pipeline.   
+0005d0c0: 2020 2020 2070 706c 2e6e 616d 6520 3d20       ppl.name = 
+0005d0d0: 2249 7465 7261 7469 6f6e 5f70 6970 656c  "Iteration_pipel
+0005d0e0: 696e 6522 0a20 2020 2020 2020 2070 726f  ine".        pro
+0005d0f0: 6365 7373 5f69 7420 3d20 5072 6f63 6573  cess_it = Proces
+0005d100: 7349 7465 7261 7469 6f6e 2870 706c 2e6e  sIteration(ppl.n
+0005d110: 6f64 6573 5b22 7265 6e61 6d65 5f31 225d  odes["rename_1"]
+0005d120: 2e70 726f 6365 7373 2c20 2222 290a 2020  .process, "").  
+0005d130: 2020 2020 2020 7070 6c2e 6c69 7374 5f70        ppl.list_p
+0005d140: 726f 6365 7373 5f69 6e5f 7069 7065 6c69  rocess_in_pipeli
+0005d150: 6e65 2e61 7070 656e 6428 7072 6f63 6573  ne.append(proces
+0005d160: 735f 6974 290a 0a20 2020 2020 2020 2023  s_it)..        #
+0005d170: 2049 6e69 7469 616c 697a 6520 7468 6520   Initialize the 
+0005d180: 7069 7065 6c69 6e65 2077 6974 6820 6d61  pipeline with ma
+0005d190: 6e64 6174 6f72 7920 7061 7261 6d65 7465  ndatory paramete
+0005d1a0: 7273 2073 6574 0a20 2020 2020 2020 2023  rs set.        #
+0005d1b0: 2051 5469 6d65 722e 7369 6e67 6c65 5368   QTimer.singleSh
+0005d1c0: 6f74 2831 3030 302c 2073 656c 662e 6578  ot(1000, self.ex
+0005d1d0: 6563 7574 655f 5144 6961 6c6f 6741 6363  ecute_QDialogAcc
+0005d1e0: 6570 7429 0a20 2020 2020 2020 2023 2069  ept).        # i
+0005d1f0: 6e69 745f 7265 7375 6c74 203d 2070 706c  nit_result = ppl
+0005d200: 5f6d 616e 6167 6572 2e69 6e69 745f 7069  _manager.init_pi
+0005d210: 7065 6c69 6e65 2870 6970 656c 696e 653d  peline(pipeline=
+0005d220: 7070 6c29 0a20 2020 2020 2020 2023 2070  ppl).        # p
+0005d230: 706c 5f6d 616e 6167 6572 2e6d 7367 2e61  pl_manager.msg.a
+0005d240: 6363 6570 7428 290a 0a20 2020 2020 2020  ccept()..       
+0005d250: 2023 204d 6f63 6b73 206e 756c 6c20 7265   # Mocks null re
+0005d260: 7175 6972 656d 656e 7473 2061 6e64 2069  quirements and i
+0005d270: 6e69 7469 616c 697a 6573 2074 6865 2070  nitializes the p
+0005d280: 6970 656c 696e 650a 2020 2020 2020 2020  ipeline.        
+0005d290: 7070 6c5f 6d61 6e61 6765 722e 6368 6563  ppl_manager.chec
+0005d2a0: 6b5f 7265 7175 6972 656d 656e 7473 203d  k_requirements =
+0005d2b0: 204d 6f63 6b28 7265 7475 726e 5f76 616c   Mock(return_val
+0005d2c0: 7565 3d4e 6f6e 6529 0a20 2020 2020 2020  ue=None).       
+0005d2d0: 2069 6e69 745f 7265 7375 6c74 203d 2070   init_result = p
+0005d2e0: 706c 5f6d 616e 6167 6572 2e69 6e69 745f  pl_manager.init_
+0005d2f0: 7069 7065 6c69 6e65 2829 0a20 2020 2020  pipeline().     
+0005d300: 2020 2070 706c 5f6d 616e 6167 6572 2e6d     ppl_manager.m
+0005d310: 7367 2e61 6363 6570 7428 290a 2020 2020  sg.accept().    
+0005d320: 2020 2020 7365 6c66 2e61 7373 6572 7446      self.assertF
+0005d330: 616c 7365 2869 6e69 745f 7265 7375 6c74  alse(init_result
+0005d340: 290a 2020 2020 2020 2020 7070 6c5f 6d61  ).        ppl_ma
+0005d350: 6e61 6765 722e 6368 6563 6b5f 7265 7175  nager.check_requ
+0005d360: 6972 656d 656e 7473 2e61 7373 6572 745f  irements.assert_
+0005d370: 6361 6c6c 6564 5f6f 6e63 655f 7769 7468  called_once_with
+0005d380: 280a 2020 2020 2020 2020 2020 2020 2267  (.            "g
+0005d390: 6c6f 6261 6c22 2c20 6d65 7373 6167 655f  lobal", message_
+0005d3a0: 6c69 7374 3d5b 5d0a 2020 2020 2020 2020  list=[].        
+0005d3b0: 290a 0a20 2020 2020 2020 2023 204d 6f63  )..        # Moc
+0005d3c0: 6b73 2065 7874 6572 6e61 6c20 7061 636b  ks external pack
+0005d3d0: 6167 6573 2061 7320 7265 7175 6972 656d  ages as requirem
+0005d3e0: 656e 7473 2061 6e64 2069 6e69 7469 616c  ents and initial
+0005d3f0: 697a 6573 2074 6865 2070 6970 656c 696e  izes the pipelin
+0005d400: 650a 2020 2020 2020 2020 706b 6773 203d  e.        pkgs =
+0005d410: 205b 2266 736c 222c 2022 6166 6e69 222c   ["fsl", "afni",
+0005d420: 2022 616e 7473 222c 2022 6d61 746c 6162   "ants", "matlab
+0005d430: 222c 2022 7370 6d22 5d0a 2020 2020 2020  ", "spm"].      
+0005d440: 2020 7265 7120 3d20 7b22 6361 7073 756c    req = {"capsul
+0005d450: 5f65 6e67 696e 6522 3a20 7b22 7573 6573  _engine": {"uses
+0005d460: 223a 204d 6f63 6b28 297d 7d0a 0a20 2020  ": Mock()}}..   
+0005d470: 2020 2020 2066 6f72 2070 6b67 2069 6e20       for pkg in 
+0005d480: 706b 6773 3a0a 2020 2020 2020 2020 2020  pkgs:.          
+0005d490: 2020 7265 715b 2263 6170 7375 6c2e 656e    req["capsul.en
+0005d4a0: 6769 6e65 2e6d 6f64 756c 652e 7b7d 222e  gine.module.{}".
+0005d4b0: 666f 726d 6174 2870 6b67 295d 203d 207b  format(pkg)] = {
+0005d4c0: 2264 6972 6563 746f 7279 223a 2046 616c  "directory": Fal
+0005d4d0: 7365 7d0a 0a20 2020 2020 2020 2072 6571  se}..        req
+0005d4e0: 5b22 6361 7073 756c 5f65 6e67 696e 6522  ["capsul_engine"
+0005d4f0: 5d5b 2275 7365 7322 5d2e 6765 7420 3d20  ]["uses"].get = 
+0005d500: 4d6f 636b 2872 6574 7572 6e5f 7661 6c75  Mock(return_valu
+0005d510: 653d 3129 0a20 2020 2020 2020 2070 706c  e=1).        ppl
+0005d520: 5f6d 616e 6167 6572 2e63 6865 636b 5f72  _manager.check_r
+0005d530: 6571 7569 7265 6d65 6e74 7320 3d20 4d6f  equirements = Mo
+0005d540: 636b 2872 6574 7572 6e5f 7661 6c75 653d  ck(return_value=
+0005d550: 7265 7129 0a0a 2020 2020 2020 2020 2320  req)..        # 
+0005d560: 5154 696d 6572 2e73 696e 676c 6553 686f  QTimer.singleSho
+0005d570: 7428 3130 3030 2c20 7365 6c66 2e65 7865  t(1000, self.exe
+0005d580: 6375 7465 5f51 4469 616c 6f67 4163 6365  cute_QDialogAcce
+0005d590: 7074 290a 2020 2020 2020 2020 696e 6974  pt).        init
+0005d5a0: 5f72 6573 756c 7420 3d20 7070 6c5f 6d61  _result = ppl_ma
+0005d5b0: 6e61 6765 722e 696e 6974 5f70 6970 656c  nager.init_pipel
+0005d5c0: 696e 6528 290a 2020 2020 2020 2020 7070  ine().        pp
+0005d5d0: 6c5f 6d61 6e61 6765 722e 6d73 672e 6163  l_manager.msg.ac
+0005d5e0: 6365 7074 2829 0a20 2020 2020 2020 2073  cept().        s
+0005d5f0: 656c 662e 6173 7365 7274 4661 6c73 6528  elf.assertFalse(
+0005d600: 696e 6974 5f72 6573 756c 7429 0a0a 2020  init_result)..  
+0005d610: 2020 2020 2020 2320 4578 7472 6120 7374        # Extra st
+0005d620: 6570 7320 666f 7220 5350 4d0a 2020 2020  eps for SPM.    
+0005d630: 2020 2020 7265 715b 2263 6170 7375 6c2e      req["capsul.
+0005d640: 656e 6769 6e65 2e6d 6f64 756c 652e 7370  engine.module.sp
+0005d650: 6d22 5d5b 2264 6972 6563 746f 7279 225d  m"]["directory"]
+0005d660: 203d 2054 7275 650a 2020 2020 2020 2020   = True.        
+0005d670: 7265 715b 2263 6170 7375 6c2e 656e 6769  req["capsul.engi
+0005d680: 6e65 2e6d 6f64 756c 652e 7370 6d22 5d5b  ne.module.spm"][
+0005d690: 2273 7461 6e64 616c 6f6e 6522 5d20 3d20  "standalone"] = 
+0005d6a0: 5472 7565 0a20 2020 2020 2020 2043 6f6e  True.        Con
+0005d6b0: 6669 6728 292e 7365 745f 6d61 746c 6162  fig().set_matlab
+0005d6c0: 5f73 7461 6e64 616c 6f6e 655f 7061 7468  _standalone_path
+0005d6d0: 284e 6f6e 6529 0a0a 2020 2020 2020 2020  (None)..        
+0005d6e0: 2320 5154 696d 6572 2e73 696e 676c 6553  # QTimer.singleS
+0005d6f0: 686f 7428 3130 3030 2c20 7365 6c66 2e65  hot(1000, self.e
+0005d700: 7865 6375 7465 5f51 4469 616c 6f67 4163  xecute_QDialogAc
+0005d710: 6365 7074 290a 2020 2020 2020 2020 696e  cept).        in
+0005d720: 6974 5f72 6573 756c 7420 3d20 7070 6c5f  it_result = ppl_
+0005d730: 6d61 6e61 6765 722e 696e 6974 5f70 6970  manager.init_pip
+0005d740: 656c 696e 6528 290a 2020 2020 2020 2020  eline().        
+0005d750: 7070 6c5f 6d61 6e61 6765 722e 6d73 672e  ppl_manager.msg.
+0005d760: 6163 6365 7074 2829 0a20 2020 2020 2020  accept().       
+0005d770: 2073 656c 662e 6173 7365 7274 4661 6c73   self.assertFals
+0005d780: 6528 696e 6974 5f72 6573 756c 7429 0a0a  e(init_result)..
+0005d790: 2020 2020 2020 2020 7265 715b 2263 6170          req["cap
+0005d7a0: 7375 6c2e 656e 6769 6e65 2e6d 6f64 756c  sul.engine.modul
+0005d7b0: 652e 7370 6d22 5d5b 2273 7461 6e64 616c  e.spm"]["standal
+0005d7c0: 6f6e 6522 5d20 3d20 4661 6c73 650a 0a20  one"] = False.. 
+0005d7d0: 2020 2020 2020 2023 2051 5469 6d65 722e         # QTimer.
+0005d7e0: 7369 6e67 6c65 5368 6f74 2831 3030 302c  singleShot(1000,
+0005d7f0: 2073 656c 662e 6578 6563 7574 655f 5144   self.execute_QD
+0005d800: 6961 6c6f 6741 6363 6570 7429 0a20 2020  ialogAccept).   
+0005d810: 2020 2020 2069 6e69 745f 7265 7375 6c74       init_result
+0005d820: 203d 2070 706c 5f6d 616e 6167 6572 2e69   = ppl_manager.i
+0005d830: 6e69 745f 7069 7065 6c69 6e65 2829 0a20  nit_pipeline(). 
+0005d840: 2020 2020 2020 2070 706c 5f6d 616e 6167         ppl_manag
+0005d850: 6572 2e6d 7367 2e61 6363 6570 7428 290a  er.msg.accept().
+0005d860: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+0005d870: 6572 7446 616c 7365 2869 6e69 745f 7265  ertFalse(init_re
+0005d880: 7375 6c74 290a 0a20 2020 2020 2020 2023  sult)..        #
+0005d890: 2044 656c 6574 6573 2061 6e20 6174 7472   Deletes an attr
+0005d8a0: 6962 7574 6520 6f66 2065 6163 6820 7061  ibute of each pa
+0005d8b0: 636b 6167 6520 7265 7175 6972 656d 656e  ckage requiremen
+0005d8c0: 740a 2020 2020 2020 2020 666f 7220 706b  t.        for pk
+0005d8d0: 6720 696e 2070 6b67 733a 0a20 2020 2020  g in pkgs:.     
+0005d8e0: 2020 2020 2020 2064 656c 2072 6571 5b22         del req["
+0005d8f0: 6361 7073 756c 2e65 6e67 696e 652e 6d6f  capsul.engine.mo
+0005d900: 6475 6c65 2e7b 7d22 2e66 6f72 6d61 7428  dule.{}".format(
+0005d910: 706b 6729 5d0a 0a20 2020 2020 2020 2023  pkg)]..        #
+0005d920: 2051 5469 6d65 722e 7369 6e67 6c65 5368   QTimer.singleSh
+0005d930: 6f74 2831 3030 302c 2073 656c 662e 6578  ot(1000, self.ex
+0005d940: 6563 7574 655f 5144 6961 6c6f 6741 6363  ecute_QDialogAcc
+0005d950: 6570 7429 0a20 2020 2020 2020 2069 6e69  ept).        ini
+0005d960: 745f 7265 7375 6c74 203d 2070 706c 5f6d  t_result = ppl_m
+0005d970: 616e 6167 6572 2e69 6e69 745f 7069 7065  anager.init_pipe
+0005d980: 6c69 6e65 2829 0a20 2020 2020 2020 2070  line().        p
+0005d990: 706c 5f6d 616e 6167 6572 2e6d 7367 2e61  pl_manager.msg.a
+0005d9a0: 6363 6570 7428 290a 2020 2020 2020 2020  ccept().        
+0005d9b0: 7365 6c66 2e61 7373 6572 7446 616c 7365  self.assertFalse
+0005d9c0: 2869 6e69 745f 7265 7375 6c74 290a 0a20  (init_result).. 
+0005d9d0: 2020 2020 2020 2023 204d 6f63 6b73 2061         # Mocks a
+0005d9e0: 2027 5661 6c75 6545 7272 6f72 2720 696e   'ValueError' in
+0005d9f0: 2027 776f 726b 666c 6f77 5f66 726f 6d5f   'workflow_from_
+0005da00: 7069 7065 6c69 6e65 270a 2020 2020 2020  pipeline'.      
+0005da10: 2020 7070 6c2e 6669 6e64 5f65 6d70 7479    ppl.find_empty
+0005da20: 5f70 6172 616d 6574 6572 7320 3d20 4d6f  _parameters = Mo
+0005da30: 636b 2873 6964 655f 6566 6665 6374 3d56  ck(side_effect=V
+0005da40: 616c 7565 4572 726f 7229 0a0a 2020 2020  alueError)..    
+0005da50: 2020 2020 2320 5154 696d 6572 2e73 696e      # QTimer.sin
+0005da60: 676c 6553 686f 7428 3130 3030 2c20 7365  gleShot(1000, se
+0005da70: 6c66 2e65 7865 6375 7465 5f51 4469 616c  lf.execute_QDial
+0005da80: 6f67 4163 6365 7074 290a 2020 2020 2020  ogAccept).      
+0005da90: 2020 696e 6974 5f72 6573 756c 7420 3d20    init_result = 
+0005daa0: 7070 6c5f 6d61 6e61 6765 722e 696e 6974  ppl_manager.init
+0005dab0: 5f70 6970 656c 696e 6528 290a 2020 2020  _pipeline().    
+0005dac0: 2020 2020 7070 6c5f 6d61 6e61 6765 722e      ppl_manager.
+0005dad0: 6d73 672e 6163 6365 7074 2829 0a20 2020  msg.accept().   
+0005dae0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0005daf0: 4661 6c73 6528 696e 6974 5f72 6573 756c  False(init_resul
+0005db00: 7429 0a0a 2020 2020 6465 6620 7465 7374  t)..    def test
+0005db10: 5f7a 5f72 756e 5069 7065 6c69 6e65 2873  _z_runPipeline(s
+0005db20: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+0005db30: 2241 6464 7320 6120 7072 6f63 6573 732c  "Adds a process,
+0005db40: 2065 7870 6f72 7420 706c 7567 7320 616e   export plugs an
+0005db50: 6420 7275 6e73 2061 2070 6970 656c 696e  d runs a pipelin
+0005db60: 652e 0a0a 2020 2020 2020 2020 2d20 5465  e...        - Te
+0005db70: 7374 733a 0a20 2020 2020 2020 2020 2020  sts:.           
+0005db80: 202d 2050 6970 656c 696e 654d 616e 6167   - PipelineManag
+0005db90: 6572 5461 622e 7275 6e50 6970 656c 696e  erTab.runPipelin
+0005dba0: 650a 2020 2020 2020 2020 2020 2020 2d20  e.            - 
+0005dbb0: 5069 7065 6c69 6e65 4d61 6e61 6765 7254  PipelineManagerT
+0005dbc0: 6162 2e66 696e 6973 685f 6578 6563 7574  ab.finish_execut
+0005dbd0: 696f 6e0a 2020 2020 2020 2020 2020 2020  ion.            
+0005dbe0: 2d20 5275 6e50 726f 6772 6573 730a 2020  - RunProgress.  
+0005dbf0: 2020 2020 2020 2020 2020 2d20 5275 6e57            - RunW
+0005dc00: 6f72 6b65 720a 2020 2020 2020 2020 2222  orker.        ""
+0005dc10: 220a 0a20 2020 2020 2020 2023 2053 6574  "..        # Set
+0005dc20: 2073 686f 7274 6375 7473 2066 6f72 206f   shortcuts for o
+0005dc30: 626a 6563 7473 2074 6861 7420 6172 6520  bjects that are 
+0005dc40: 6f66 7465 6e20 7573 6564 0a20 2020 2020  often used.     
+0005dc50: 2020 2070 706c 5f6d 616e 6167 6572 203d     ppl_manager =
+0005dc60: 2073 656c 662e 6d61 696e 5f77 696e 646f   self.main_windo
+0005dc70: 772e 7069 7065 6c69 6e65 5f6d 616e 6167  w.pipeline_manag
+0005dc80: 6572 0a20 2020 2020 2020 2070 706c 5f65  er.        ppl_e
+0005dc90: 6474 5f74 6162 7320 3d20 7070 6c5f 6d61  dt_tabs = ppl_ma
+0005dca0: 6e61 6765 722e 7069 7065 6c69 6e65 4564  nager.pipelineEd
+0005dcb0: 6974 6f72 5461 6273 0a20 2020 2020 2020  itorTabs.       
+0005dcc0: 2070 706c 203d 2070 706c 5f65 6474 5f74   ppl = ppl_edt_t
+0005dcd0: 6162 732e 6765 745f 6375 7272 656e 745f  abs.get_current_
+0005dce0: 7069 7065 6c69 6e65 2829 0a0a 2020 2020  pipeline()..    
+0005dcf0: 2020 2020 2320 4372 6561 7465 7320 6120      # Creates a 
+0005dd00: 6e65 7720 7072 6f6a 6563 7420 666f 6c64  new project fold
+0005dd10: 6572 2061 6e64 2061 6464 7320 6f6e 6520  er and adds one 
+0005dd20: 646f 6375 6d65 6e74 2074 6f20 7468 650a  document to the.
+0005dd30: 2020 2020 2020 2020 2320 7072 6f6a 6563          # projec
+0005dd40: 742c 2073 6574 7320 7468 6520 706c 7567  t, sets the plug
+0005dd50: 2076 616c 7565 2074 6861 7420 6973 2061   value that is a
+0005dd60: 6464 6564 2074 6f20 7468 6520 6461 7461  dded to the data
+0005dd70: 6261 7365 0a20 2020 2020 2020 2070 726f  base.        pro
+0005dd80: 6a65 6374 5f38 5f70 6174 6820 3d20 7365  ject_8_path = se
+0005dd90: 6c66 2e67 6574 5f6e 6577 5f74 6573 745f  lf.get_new_test_
+0005dda0: 7072 6f6a 6563 7428 290a 2020 2020 2020  project().      
+0005ddb0: 2020 7070 6c5f 6d61 6e61 6765 722e 7072    ppl_manager.pr
+0005ddc0: 6f6a 6563 742e 666f 6c64 6572 203d 2070  oject.folder = p
+0005ddd0: 726f 6a65 6374 5f38 5f70 6174 680a 2020  roject_8_path.  
+0005dde0: 2020 2020 2020 666f 6c64 6572 203d 206f        folder = o
+0005ddf0: 732e 7061 7468 2e6a 6f69 6e28 7072 6f6a  s.path.join(proj
+0005de00: 6563 745f 385f 7061 7468 2c20 2264 6174  ect_8_path, "dat
+0005de10: 6122 2c20 2272 6177 5f64 6174 6122 290a  a", "raw_data").
+0005de20: 2020 2020 2020 2020 4e49 495f 4649 4c45          NII_FILE
+0005de30: 5f31 203d 2028 0a20 2020 2020 2020 2020  _1 = (.         
+0005de40: 2020 2022 4775 6572 6265 742d 4336 2d32     "Guerbet-C6-2
+0005de50: 3031 342d 5261 742d 4b35 322d 5475 6265  014-Rat-K52-Tube
+0005de60: 3237 2d32 3031 342d 3032 2d31 3431 3032  27-2014-02-14102
+0005de70: 3331 372d 3034 2d47 335f 220a 2020 2020  317-04-G3_".    
+0005de80: 2020 2020 2020 2020 2247 7565 7262 6574          "Guerbet
+0005de90: 5f4d 4445 4654 2d4d 4445 4654 7076 6d2d  _MDEFT-MDEFTpvm-
+0005dea0: 3030 3039 3430 5f38 3030 2e6e 6969 220a  000940_800.nii".
+0005deb0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0005dec0: 2020 444f 4355 4d45 4e54 5f31 203d 206f    DOCUMENT_1 = o
+0005ded0: 732e 7061 7468 2e61 6273 7061 7468 286f  s.path.abspath(o
+0005dee0: 732e 7061 7468 2e6a 6f69 6e28 666f 6c64  s.path.join(fold
+0005def0: 6572 2c20 4e49 495f 4649 4c45 5f31 2929  er, NII_FILE_1))
+0005df00: 0a0a 2020 2020 2020 2020 2320 5377 6974  ..        # Swit
+0005df10: 6368 6573 2074 6f20 7069 7065 6c69 6e65  ches to pipeline
+0005df20: 206d 616e 6167 6572 2074 6162 0a20 2020   manager tab.   
+0005df30: 2020 2020 2073 656c 662e 6d61 696e 5f77       self.main_w
+0005df40: 696e 646f 772e 7461 6273 2e73 6574 4375  indow.tabs.setCu
+0005df50: 7272 656e 7449 6e64 6578 2832 290a 0a20  rrentIndex(2).. 
+0005df60: 2020 2020 2020 2023 2041 6464 7320 6120         # Adds a 
+0005df70: 5265 6e61 6d65 2070 726f 6365 7373 6573  Rename processes
+0005df80: 2c20 6372 6561 7465 7320 7468 6520 2772  , creates the 'r
+0005df90: 656e 616d 655f 3127 206e 6f64 650a 2020  ename_1' node.  
+0005dfa0: 2020 2020 2020 7070 6c5f 6564 745f 7461        ppl_edt_ta
+0005dfb0: 6273 2e67 6574 5f63 7572 7265 6e74 5f65  bs.get_current_e
+0005dfc0: 6469 746f 7228 292e 636c 6963 6b5f 706f  ditor().click_po
+0005dfd0: 7320 3d20 5150 6f69 6e74 2834 3530 2c20  s = QPoint(450, 
+0005dfe0: 3530 3029 0a20 2020 2020 2020 2070 706c  500).        ppl
+0005dff0: 5f65 6474 5f74 6162 732e 6765 745f 6375  _edt_tabs.get_cu
+0005e000: 7272 656e 745f 6564 6974 6f72 2829 2e61  rrent_editor().a
+0005e010: 6464 5f6e 616d 6564 5f70 726f 6365 7373  dd_named_process
+0005e020: 2852 656e 616d 6529 0a0a 2020 2020 2020  (Rename)..      
+0005e030: 2020 7070 6c5f 6564 745f 7461 6273 2e67    ppl_edt_tabs.g
+0005e040: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
+0005e050: 7228 292e 6578 706f 7274 5f75 6e63 6f6e  r().export_uncon
+0005e060: 6e65 6374 6564 5f6d 616e 6461 746f 7279  nected_mandatory
+0005e070: 5f69 6e70 7574 7328 290a 2020 2020 2020  _inputs().      
+0005e080: 2020 7070 6c5f 6564 745f 7461 6273 2e67    ppl_edt_tabs.g
+0005e090: 6574 5f63 7572 7265 6e74 5f65 6469 746f  et_current_edito
+0005e0a0: 7228 292e 6578 706f 7274 5f61 6c6c 5f75  r().export_all_u
+0005e0b0: 6e63 6f6e 6e65 6374 6564 5f6f 7574 7075  nconnected_outpu
+0005e0c0: 7473 2829 0a0a 2020 2020 2020 2020 2320  ts()..        # 
+0005e0d0: 5365 7473 2074 6865 206d 616e 6461 746f  Sets the mandato
+0005e0e0: 7279 2070 6172 616d 6574 6572 730a 2020  ry parameters.  
+0005e0f0: 2020 2020 2020 7070 6c2e 6e6f 6465 735b        ppl.nodes[
+0005e100: 2222 5d2e 7365 745f 706c 7567 5f76 616c  ""].set_plug_val
+0005e110: 7565 2822 696e 5f66 696c 6522 2c20 444f  ue("in_file", DO
+0005e120: 4355 4d45 4e54 5f31 290a 2020 2020 2020  CUMENT_1).      
+0005e130: 2020 7070 6c2e 6e6f 6465 735b 2222 5d2e    ppl.nodes[""].
+0005e140: 7365 745f 706c 7567 5f76 616c 7565 2822  set_plug_value("
+0005e150: 666f 726d 6174 5f73 7472 696e 6722 2c20  format_string", 
+0005e160: 226e 6577 5f6e 616d 652e 6e69 6922 290a  "new_name.nii").
+0005e170: 0a20 2020 2020 2020 2023 204d 6f63 6b73  .        # Mocks
+0005e180: 2074 6865 2061 6c6c 6f63 6174 696f 6e20   the allocation 
+0005e190: 6f66 2074 6865 2070 6970 656c 696e 6520  of the pipeline 
+0005e1a0: 696e 746f 2061 6e6f 7468 6572 2074 6872  into another thr
+0005e1b0: 6561 640a 2020 2020 2020 2020 2320 5468  ead.        # Th
+0005e1c0: 6973 2066 756e 6374 696f 6e20 7365 656d  is function seem
+0005e1d0: 2074 6f20 7265 7175 6972 6520 6120 6469   to require a di
+0005e1e0: 6666 6572 656e 7420 6e75 6d62 6572 206f  fferent number o
+0005e1f0: 6620 6172 6775 6d65 6e74 730a 2020 2020  f arguments.    
+0005e200: 2020 2020 2320 6465 7065 6e64 696e 6720      # depending 
+0005e210: 6f6e 2074 6865 2070 6c61 7466 6f72 6d2c  on the platform,
+0005e220: 2074 6865 7265 666f 7265 2061 2027 4d6f   therefore a 'Mo
+0005e230: 636b 2720 6973 2075 7365 640a 2020 2020  ck' is used.    
+0005e240: 2020 2020 5154 6872 6561 642e 7374 6172      QThread.star
+0005e250: 7420 3d20 4d6f 636b 2829 0a0a 2020 2020  t = Mock()..    
+0005e260: 2020 2020 2320 5069 7065 6c69 6e65 2066      # Pipeline f
+0005e270: 6169 6c73 2077 6869 6c65 2072 756e 6e69  ails while runni
+0005e280: 6e67 2c20 6475 6520 746f 2063 6170 7375  ng, due to capsu
+0005e290: 6c20 696d 706f 7274 2065 7272 6f72 0a20  l import error. 
+0005e2a0: 2020 2020 2020 2070 706c 5f6d 616e 6167         ppl_manag
+0005e2b0: 6572 2e72 756e 5069 7065 6c69 6e65 2829  er.runPipeline()
+0005e2c0: 0a0a 2020 2020 2020 2020 2320 4469 7265  ..        # Dire
+0005e2d0: 6374 6c79 2072 756e 7320 7468 6520 2751  ctly runs the 'Q
+0005e2e0: 5468 7265 6164 2720 6f62 6a65 6374 2c20  Thread' object, 
+0005e2f0: 6173 2074 6865 206f 6e6c 7920 736f 6c75  as the only solu
+0005e300: 7469 6f6e 2066 6f75 6e64 0a20 2020 2020  tion found.     
+0005e310: 2020 2023 2074 6f20 7275 6e20 7468 6520     # to run the 
+0005e320: 7069 7065 6c69 6e65 2064 7572 696e 6720  pipeline during 
+0005e330: 7468 6520 7465 7374 2072 6f75 7469 6e65  the test routine
+0005e340: 0a20 2020 2020 2020 2070 706c 5f6d 616e  .        ppl_man
+0005e350: 6167 6572 2e70 726f 6772 6573 732e 776f  ager.progress.wo
+0005e360: 726b 6572 2e72 756e 2829 0a0a 2020 2020  rker.run()..    
+0005e370: 2020 2020 2320 5365 6e64 7320 7468 6520      # Sends the 
+0005e380: 7369 676e 616c 2074 6f20 6669 6e69 7368  signal to finish
+0005e390: 2074 6865 2070 6970 656c 696e 650a 2020   the pipeline.  
+0005e3a0: 2020 2020 2020 7070 6c5f 6d61 6e61 6765        ppl_manage
+0005e3b0: 722e 7072 6f67 7265 7373 2e77 6f72 6b65  r.progress.worke
+0005e3c0: 722e 6669 6e69 7368 6564 2e65 6d69 7428  r.finished.emit(
+0005e3d0: 290a 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+0005e3e0: 6173 7365 7274 4571 7561 6c28 7070 6c5f  assertEqual(ppl_
+0005e3f0: 6d61 6e61 6765 722e 6c61 7374 5f72 756e  manager.last_run
+0005e400: 5f70 6970 656c 696e 652c 2070 706c 290a  _pipeline, ppl).
+0005e410: 2020 2020 2020 2020 5154 6872 6561 642e          QThread.
+0005e420: 7374 6172 742e 6173 7365 7274 5f63 616c  start.assert_cal
+0005e430: 6c65 645f 6f6e 6365 2829 0a0a 2020 2020  led_once()..    
+0005e440: 2020 2020 2320 5069 7065 6c69 6e65 2069      # Pipeline i
+0005e450: 7320 7374 6f70 7065 6420 6279 2074 6865  s stopped by the
+0005e460: 2075 7365 722c 2074 6865 2070 6970 656c   user, the pipel
+0005e470: 696e 6520 6661 696c 7320 6265 666f 7265  ine fails before
+0005e480: 2072 756e 6e69 6e67 0a20 2020 2020 2020   running.       
+0005e490: 2070 706c 5f6d 616e 6167 6572 2e72 756e   ppl_manager.run
+0005e4a0: 5069 7065 6c69 6e65 2829 0a20 2020 2020  Pipeline().     
+0005e4b0: 2020 2070 706c 5f6d 616e 6167 6572 2e73     ppl_manager.s
+0005e4c0: 746f 705f 6578 6563 7574 696f 6e28 290a  top_execution().
+0005e4d0: 2020 2020 2020 2020 7070 6c5f 6d61 6e61          ppl_mana
+0005e4e0: 6765 722e 7072 6f67 7265 7373 2e77 6f72  ger.progress.wor
+0005e4f0: 6b65 722e 7275 6e28 290a 2020 2020 2020  ker.run().      
+0005e500: 2020 7070 6c5f 6d61 6e61 6765 722e 7072    ppl_manager.pr
+0005e510: 6f67 7265 7373 2e77 6f72 6b65 722e 6669  ogress.worker.fi
+0005e520: 6e69 7368 6564 2e65 6d69 7428 290a 0a20  nished.emit().. 
+0005e530: 2020 2064 6566 2074 6573 745f 7a7a 5f64     def test_zz_d
+0005e540: 656c 5f70 6163 6b28 7365 6c66 293a 0a20  el_pack(self):. 
+0005e550: 2020 2020 2020 2022 2222 5765 2072 656d         """We rem
+0005e560: 6f76 6520 7468 6520 6272 6963 6b20 6372  ove the brick cr
+0005e570: 6561 7465 6420 6475 7269 6e67 2074 6865  eated during the
+0005e580: 2075 6e69 7420 7465 7374 732c 2061 6e64   unit tests, and
+0005e590: 2077 6520 7461 6b65 0a20 2020 2020 2020   we take.       
+0005e5a0: 2061 6476 616e 7461 6765 206f 6620 7468   advantage of th
+0005e5b0: 6973 2074 6f20 636f 7665 7220 7468 6520  is to cover the 
+0005e5c0: 7061 7274 206f 6620 7468 6520 636f 6465  part of the code
+0005e5d0: 2075 7365 6420 746f 2072 656d 6f76 6520   used to remove 
+0005e5e0: 7468 650a 2020 2020 2020 2020 7061 636b  the.        pack
+0005e5f0: 6167 6573 2222 220a 0a20 2020 2020 2020  ages"""..       
+0005e600: 2070 6b67 203d 2050 6163 6b61 6765 4c69   pkg = PackageLi
+0005e610: 6272 6172 7944 6961 6c6f 6728 7365 6c66  braryDialog(self
+0005e620: 2e6d 6169 6e5f 7769 6e64 6f77 290a 0a20  .main_window).. 
+0005e630: 2020 2020 2020 2023 2054 6865 2054 6573         # The Tes
+0005e640: 745f 7069 7065 6c69 6e65 2062 7269 636b  t_pipeline brick
+0005e650: 2077 6173 2061 6464 6564 2069 6e20 7468   was added in th
+0005e660: 6520 7061 636b 6167 6520 6c69 6272 6172  e package librar
+0005e670: 790a 2020 2020 2020 2020 7365 6c66 2e61  y.        self.a
+0005e680: 7373 6572 7454 7275 6528 0a20 2020 2020  ssertTrue(.     
+0005e690: 2020 2020 2020 2022 5465 7374 5f70 6970         "Test_pip
+0005e6a0: 656c 696e 655f 3122 0a20 2020 2020 2020  eline_1".       
+0005e6b0: 2020 2020 2069 6e20 706b 672e 7061 636b       in pkg.pack
+0005e6c0: 6167 655f 6c69 6272 6172 792e 7061 636b  age_library.pack
+0005e6d0: 6167 655f 7472 6565 5b22 5573 6572 5f70  age_tree["User_p
+0005e6e0: 726f 6365 7373 6573 225d 0a20 2020 2020  rocesses"].     
+0005e6f0: 2020 2029 0a0a 2020 2020 2020 2020 706b     )..        pk
+0005e700: 672e 6465 6c65 7465 5f70 6163 6b61 6765  g.delete_package
+0005e710: 280a 2020 2020 2020 2020 2020 2020 746f  (.            to
+0005e720: 5f64 656c 6574 653d 2255 7365 725f 7072  _delete="User_pr
+0005e730: 6f63 6573 7365 732e 5465 7374 5f70 6970  ocesses.Test_pip
+0005e740: 656c 696e 655f 3122 2c20 6c6f 6f70 3d54  eline_1", loop=T
+0005e750: 7275 650a 2020 2020 2020 2020 290a 0a20  rue.        ).. 
+0005e760: 2020 2020 2020 2023 2054 6865 2054 6573         # The Tes
+0005e770: 745f 7069 7065 6c69 6e65 2062 7269 636b  t_pipeline brick
+0005e780: 2068 6173 2062 6565 6e20 7265 6d6f 7665   has been remove
+0005e790: 6420 6672 6f6d 2074 6865 2070 6163 6b61  d from the packa
+0005e7a0: 6765 206c 6962 7261 7279 0a20 2020 2020  ge library.     
+0005e7b0: 2020 2073 656c 662e 6173 7365 7274 4661     self.assertFa
+0005e7c0: 6c73 6528 0a20 2020 2020 2020 2020 2020  lse(.           
+0005e7d0: 2022 5465 7374 5f70 6970 656c 696e 655f   "Test_pipeline_
+0005e7e0: 3122 0a20 2020 2020 2020 2020 2020 2069  1".            i
+0005e7f0: 6e20 706b 672e 7061 636b 6167 655f 6c69  n pkg.package_li
+0005e800: 6272 6172 792e 7061 636b 6167 655f 7472  brary.package_tr
+0005e810: 6565 5b22 5573 6572 5f70 726f 6365 7373  ee["User_process
+0005e820: 6573 225d 0a20 2020 2020 2020 2029 0a0a  es"].        )..
+0005e830: 0a69 6620 5f5f 6e61 6d65 5f5f 203d 3d20  .if __name__ == 
+0005e840: 225f 5f6d 6169 6e5f 5f22 3a0a 2020 2020  "__main__":.    
+0005e850: 756e 6974 7465 7374 2e6d 6169 6e28 290a  unittest.main().
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/__init__.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/__init__.py`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/data_browser/__init__.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/data_browser/__init__.py`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/data_browser/advanced_search.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/data_browser/advanced_search.py`

 * *Files 1% similar despite different names*

```diff
@@ -15,21 +15,33 @@
 # http://www.cecill.info/licences/Licence_CeCILL_V2.1-en.html
 # for details.
 ##########################################################################
 
 import os
 
 # Populse_db imports
-from populse_db.database import (ALL_TYPES, FIELD_TYPE_BOOLEAN,
-                                 FIELD_TYPE_STRING)
+from populse_db.database import (
+    ALL_TYPES,
+    FIELD_TYPE_BOOLEAN,
+    FIELD_TYPE_STRING,
+)
+
 # PyQt5 imports
 from PyQt5.QtCore import QObjectCleanupHandler
 from PyQt5.QtGui import QPixmap
-from PyQt5.QtWidgets import (QComboBox, QGridLayout, QHBoxLayout, QLineEdit,
-                             QMessageBox, QPushButton, QVBoxLayout, QWidget)
+from PyQt5.QtWidgets import (
+    QComboBox,
+    QGridLayout,
+    QHBoxLayout,
+    QLineEdit,
+    QMessageBox,
+    QPushButton,
+    QVBoxLayout,
+    QWidget,
+)
 
 # Populse_MIA imports
 from populse_mia.data_manager.project import COLLECTION_CURRENT, TAG_FILENAME
 from populse_mia.software_properties import Config
 from populse_mia.user_interface.pop_ups import ClickableLabel
 
 
@@ -213,15 +225,14 @@
 
         old_rows = self.dataBrowser.table_data.scans_to_visualize
 
         # Filter applied only if at least one row
         if len(nots) > 0:
             # Result gotten
             try:
-
                 filter_query = self.prepare_filters(
                     links, fields, conditions, values, nots, self.scans_list
                 )
                 result = self.project.session.filter_documents(
                     COLLECTION_CURRENT, filter_query
                 )
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/data_browser/count_table.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/data_browser/count_table.py`

 * *Files 5% similar despite different names*

```diff
@@ -20,22 +20,32 @@
 import os
 from functools import reduce  # Valid in Python 2.6+, required in Python 3
 
 # PyQt5 imports
 import PyQt5.QtCore as QtCore
 from PyQt5.QtCore import Qt
 from PyQt5.QtGui import QFont, QIcon, QPixmap
-from PyQt5.QtWidgets import (QDialog, QHBoxLayout, QLabel, QPushButton,
-                             QTableWidget, QTableWidgetItem, QVBoxLayout)
+from PyQt5.QtWidgets import (
+    QDialog,
+    QHBoxLayout,
+    QLabel,
+    QPushButton,
+    QTableWidget,
+    QTableWidgetItem,
+    QVBoxLayout,
+)
 
 from populse_mia.data_manager.project import COLLECTION_CURRENT, TAG_FILENAME
+
 # Populse_MIA imports
 from populse_mia.software_properties import Config
-from populse_mia.user_interface.pop_ups import (ClickableLabel,
-                                                PopUpSelectTagCountTable)
+from populse_mia.user_interface.pop_ups import (
+    ClickableLabel,
+    PopUpSelectTagCountTable,
+)
 from populse_mia.utils.utils import set_item_data, table_to_database
 
 
 class CountTable(QDialog):
     """
     Tool to precisely verify the scans of the project.
 
@@ -256,15 +266,14 @@
             item = QTableWidgetItem()
             item.setText(str(self.nb_values[col]))
             item.setFont(self.font)
             self.table.setItem(self.nb_row, col, item)
 
         # Filling the cells of the n-1 first tags
         for row in range(self.nb_row):
-
             for col in range(len(self.values_list) - 1):
                 item = QTableWidgetItem()
                 tag_name = self.push_buttons[col].text()
                 tag_type = self.project.session.get_field(
                     COLLECTION_CURRENT, tag_name
                 ).field_type
                 set_item_data(item, cell_text[col], tag_type)
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/data_browser/data_browser.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/data_browser/data_browser.py`

 * *Files 2% similar despite different names*

```diff
@@ -25,55 +25,100 @@
 import os
 import subprocess
 import traceback
 from functools import partial
 from sys import platform
 
 # Populse_db imports
-from populse_db.database import (FIELD_TYPE_DATE, FIELD_TYPE_DATETIME,
-                                 FIELD_TYPE_FLOAT, FIELD_TYPE_LIST_BOOLEAN,
-                                 FIELD_TYPE_LIST_DATE,
-                                 FIELD_TYPE_LIST_DATETIME,
-                                 FIELD_TYPE_LIST_FLOAT,
-                                 FIELD_TYPE_LIST_INTEGER,
-                                 FIELD_TYPE_LIST_STRING, FIELD_TYPE_LIST_TIME,
-                                 FIELD_TYPE_STRING, FIELD_TYPE_TIME)
+from populse_db.database import (
+    FIELD_TYPE_DATE,
+    FIELD_TYPE_DATETIME,
+    FIELD_TYPE_FLOAT,
+    FIELD_TYPE_LIST_BOOLEAN,
+    FIELD_TYPE_LIST_DATE,
+    FIELD_TYPE_LIST_DATETIME,
+    FIELD_TYPE_LIST_FLOAT,
+    FIELD_TYPE_LIST_INTEGER,
+    FIELD_TYPE_LIST_STRING,
+    FIELD_TYPE_LIST_TIME,
+    FIELD_TYPE_STRING,
+    FIELD_TYPE_TIME,
+)
+
 # PyQt5 imports
 from PyQt5 import QtCore, QtWidgets
 from PyQt5.QtCore import Qt
 from PyQt5.QtGui import QColor, QIcon, QPixmap
-from PyQt5.QtWidgets import (QAbstractItemView, QAction, QApplication,
-                             QDateEdit, QDateTimeEdit, QDoubleSpinBox, QFrame,
-                             QGridLayout, QHBoxLayout, QItemDelegate, QMenu,
-                             QMessageBox, QProgressDialog, QPushButton,
-                             QSplitter, QTableWidget, QTableWidgetItem,
-                             QTimeEdit, QToolBar, QToolButton, QVBoxLayout,
-                             QWidget)
-
-from populse_mia.data_manager.database_mia import (TAG_ORIGIN_BUILTIN,
-                                                   TAG_ORIGIN_USER)
-from populse_mia.data_manager.project import (BRICK_NAME, COLLECTION_BRICK,
-                                              COLLECTION_CURRENT,
-                                              COLLECTION_INITIAL, TAG_BRICKS,
-                                              TAG_CHECKSUM, TAG_FILENAME,
-                                              TAG_HISTORY)
+from PyQt5.QtWidgets import (
+    QAbstractItemView,
+    QAction,
+    QApplication,
+    QDateEdit,
+    QDateTimeEdit,
+    QDoubleSpinBox,
+    QFrame,
+    QGridLayout,
+    QHBoxLayout,
+    QItemDelegate,
+    QMenu,
+    QMessageBox,
+    QProgressDialog,
+    QPushButton,
+    QSplitter,
+    QTableWidget,
+    QTableWidgetItem,
+    QTimeEdit,
+    QToolBar,
+    QToolButton,
+    QVBoxLayout,
+    QWidget,
+)
+
+from populse_mia.data_manager.database_mia import (
+    TAG_ORIGIN_BUILTIN,
+    TAG_ORIGIN_USER,
+)
+from populse_mia.data_manager.project import (
+    BRICK_NAME,
+    COLLECTION_BRICK,
+    COLLECTION_CURRENT,
+    COLLECTION_INITIAL,
+    TAG_BRICKS,
+    TAG_CHECKSUM,
+    TAG_FILENAME,
+    TAG_HISTORY,
+)
 from populse_mia.software_properties import Config
-from populse_mia.user_interface.data_browser.advanced_search import \
-    AdvancedSearch
+from populse_mia.user_interface.data_browser.advanced_search import (
+    AdvancedSearch,
+)
 from populse_mia.user_interface.data_browser.count_table import CountTable
 from populse_mia.user_interface.data_browser.mini_viewer import MiniViewer
 from populse_mia.user_interface.data_browser.modify_table import ModifyTable
+
 # Populse_MIA imports
 from populse_mia.user_interface.data_browser.rapid_search import RapidSearch
 from populse_mia.user_interface.pop_ups import (
-    ClickableLabel, PopUpAddPath, PopUpAddTag, PopUpCloneTag,
-    PopUpDataBrowserCurrentSelection, PopUpMultipleSort, PopUpProperties,
-    PopUpRemoveScan, PopUpRemoveTag, PopUpSelectFilter, PopUpShowHistory)
-from populse_mia.utils.utils import (check_value_type, set_item_data,
-                                     table_to_database)
+    ClickableLabel,
+    PopUpAddPath,
+    PopUpAddTag,
+    PopUpCloneTag,
+    PopUpDataBrowserCurrentSelection,
+    PopUpMultipleSort,
+    PopUpProperties,
+    PopUpRemoveScan,
+    PopUpRemoveTag,
+    PopUpSelectFilter,
+    PopUpShowHistory,
+)
+from populse_mia.utils.utils import (
+    check_value_type,
+    set_item_data,
+    table_to_database,
+)
 
 # Variable shown everywhere when no value for the tag
 not_defined_value = "*Not Defined*"
 
 
 class DataBrowser(QWidget):
     """Widget that contains everything in the Data Browser tab.
@@ -318,15 +363,14 @@
             True,
             TAG_ORIGIN_USER,
             tag_cloned.unit,
             tag_cloned.default_value,
         )
         self.project.unsavedModifications = True
         for scan in self.project.session.get_documents(COLLECTION_CURRENT):
-
             # If the tag to clone has a value, we add this value with the
             # new tag name in the Database
             cloned_cur_value = self.project.session.get_value(
                 COLLECTION_CURRENT, getattr(scan, TAG_FILENAME), tag_to_clone
             )
             cloned_init_value = self.project.session.get_value(
                 COLLECTION_INITIAL, getattr(scan, TAG_FILENAME), tag_to_clone
@@ -737,41 +781,50 @@
 class DateFormatDelegate(QItemDelegate):
     """Delegate that is used to handle dates in the TableDataBrowser."""
 
     def __init__(self, parent=None):
         QItemDelegate.__init__(self, parent)
 
     def createEditor(self, parent, option, index):
-        """Override of the createEditor method, called to generate the widget."""
+        """
+        Override of the createEditor method, called to generate the widget.
+        """
+
         editor = QDateEdit(parent)
         editor.setDisplayFormat("dd/MM/yyyy")
         return editor
 
 
 class DateTimeFormatDelegate(QItemDelegate):
     """Delegate that is used to handle date & time in the TableDataBrowser."""
 
     def __init__(self, parent=None):
         QItemDelegate.__init__(self, parent)
 
     def createEditor(self, parent, option, index):
-        """Override of the createEditor method, called to generate the widget."""
+        """
+        Override of the createEditor method, called to generate the widget.
+        """
+
         editor = QDateTimeEdit(parent)
         editor.setDisplayFormat("dd/MM/yyyy hh:mm:ss.zzz")
         return editor
 
 
 class NumberFormatDelegate(QItemDelegate):
     """Delegate that is used to handle numbers in the TableDataBrowser."""
 
     def __init__(self, parent=None):
         QItemDelegate.__init__(self, parent)
 
     def createEditor(self, parent, option, index):
-        """Override of the createEditor method, called to generate the widget."""
+        """
+        Override of the createEditor method, called to generate the widget.
+        """
+
         editor = QDoubleSpinBox(parent)
         data = index.data(Qt.EditRole)
         decimals_number = str(data)[::-1].find(".")
         editor.setMaximum(10**10)
         editor.setDecimals(decimals_number)
         return editor
 
@@ -788,16 +841,16 @@
         - change_cell_color: changes the background color and the value of
            cells when edited by the user
         - clear_cell: clear the selected cells
         - context_menu_table: create the context menu of the table
         - delete_from_brick: delete a document from its brick id
         - display_unreset_values: display an error message when trying to
            reset user tags
-        - display_pdf:  tries to display a pdf file in the user's
-          preferred application
+        - display_file: tries to display a file in the user's preferred
+          application
         - edit_table_data_values: change values in DataBrowser
         - fill_cells_update_table: initialize and fills the cells of the table
         - fill_headers: initialize and fill the headers of the table
         - get_current_filter: get the current data browser selection
         - get_index_insertion: get index insertion of a new column
         - get_scan_row: return the row index of the scan
         - get_tag_column: return the column index of the tag
@@ -967,19 +1020,17 @@
         tags.insert(0, TAG_FILENAME)
 
         visibles = self.project.session.get_shown_tags()
 
         # Adding missing columns
 
         for tag in tags:
-
             # Tag added only if it's not already in the table
 
             if self.get_tag_column(tag) is None:
-
                 column_index = self.get_index_insertion(tag)
                 self.insertColumn(column_index)
 
                 item = QtWidgets.QTableWidgetItem()
                 self.setHorizontalHeaderItem(column_index, item)
                 item.setText(tag)
                 tag_object = self.project.session.get_field(
@@ -1044,16 +1095,16 @@
                 # Removing useless columns
                 tags_to_remove = []
 
                 for column in range(0, self.columnCount()):
                     tag_name = self.horizontalHeaderItem(column).text()
 
                     if (
-                        not tag_name
-                        in self.project.session.get_fields_names(
+                        tag_name
+                        not in self.project.session.get_fields_names(
                             COLLECTION_CURRENT
                         )
                         and tag_name != TAG_FILENAME
                     ):
                         tags_to_remove.append(tag_name)
 
                     for tag in tags_to_remove:
@@ -1111,15 +1162,14 @@
             # Scan added only if it's not already in the table
             if self.get_scan_row(scan) is None:
                 rowCount = self.rowCount()
                 self.insertRow(rowCount)
 
                 # Columns filled for the row being added
                 for column in range(0, self.columnCount()):
-
                     idx += 1
                     self.progress.setValue(idx)
                     QApplication.processEvents()
 
                     item = QtWidgets.QTableWidgetItem()
                     tag = self.horizontalHeaderItem(column).text()
 
@@ -1296,15 +1346,14 @@
             msg.setWindowTitle("Warning")
             msg.setStandardButtons(QMessageBox.Ok)
             msg.buttonClicked.connect(msg.close)
             msg.exec()
 
         # Otherwise we update the values
         else:
-
             # For history
             history_maker = list()
             history_maker.append("modified_values")
             modified_values = []
 
             for item in self.selectedItems():
                 row = item.row()
@@ -1316,15 +1365,14 @@
                     self.project.session.get_field(
                         COLLECTION_CURRENT, tag_name
                     ).field_type,
                 )
 
                 # We only set the cell if it's not the tag name
                 if tag_name != TAG_FILENAME:
-
                     old_value = self.project.session.get_value(
                         COLLECTION_CURRENT, scan_path, tag_name
                     )
                     # The scan already has a value for the tag: we update it
                     if old_value is not None:
                         modified_values.append(
                             [scan_path, tag_name, old_value, database_value]
@@ -1429,17 +1477,15 @@
         )
         self.action_visualized_tags = self.menu.addAction("Visualized tags")
         self.action_select_column = self.menu.addAction("Select column(s)")
         self.action_multiple_sort = self.menu.addAction("Multiple sort")
         self.action_send_documents_to_pipeline = self.menu.addAction(
             "Send documents to the Pipeline Manager"
         )
-        self.action_display_pdf_file = self.menu.addAction(
-            "Display a pdf file"
-        )
+        self.action_display_file = self.menu.addAction("Tries to read a file")
 
         action = self.menu.exec_(self.mapToGlobal(position))
         msg = QMessageBox()
         msg.setIcon(QMessageBox.Warning)
         msg.setWindowTitle("Warning")
         msg.setStandardButtons(QMessageBox.Ok | QMessageBox.Cancel)
 
@@ -1484,16 +1530,16 @@
             self.visualized_tags_pop_up()
         elif action == self.action_select_column:
             self.select_all_columns()
         elif action == self.action_multiple_sort:
             self.multiple_sort_pop_up()
         elif action == self.action_send_documents_to_pipeline:
             self.data_browser.send_documents_to_pipeline()
-        elif action == self.action_display_pdf_file:
-            self.display_pdf()
+        elif action == self.action_display_file:
+            self.display_file()
 
         self.update_colors()
 
         # Signals reconnected
         self.itemChanged.connect(self.change_cell_color)
 
     def delete_from_brick(self, name):
@@ -1577,24 +1623,25 @@
             "cells not defined."
         )
         self.msg.setWindowTitle("Warning")
         self.msg.setStandardButtons(QMessageBox.Ok)
         self.msg.buttonClicked.connect(self.msg.close)
         self.msg.show()
 
-    def display_pdf(self):
-        """Tries to display a pdf file in the user's preferred application."""
+    def display_file(self):
+        """Tries to display a file in the user's preferred application."""
 
         points = self.selectedIndexes()
 
         for point in points:
             row = point.row()
             scan_path = self.item(row, 0).text()
-            full_name = os.path.abspath(os.path.join(self.project.folder,
-                                                     scan_path))
+            full_name = os.path.abspath(
+                os.path.join(self.project.folder, scan_path)
+            )
 
             if platform == "linux":
                 subprocess.Popen(["xdg-open", full_name])
 
             # FIXME: test the following part of the code for windows and macos!
             elif platform == "darwin":
                 subprocess.Popen(["open", full_name])
@@ -1612,15 +1659,14 @@
         self.old_table_values = []  # Old table values stored
         self.types = []  # List of types
         self.lengths = []  # List of lengths
         self.scans_list = []  # List of table scans
         self.tags = []  # List of table tags
 
         try:
-
             for item in self.selectedItems():
                 column = item.column()
                 row = item.row()
                 self.coordinates.append([row, column])
                 tag_name = self.horizontalHeaderItem(column).text()
                 tag_object = self.project.session.get_field(
                     COLLECTION_CURRENT, tag_name
@@ -1637,15 +1683,14 @@
                 self.scans_list.append(scan_name)
 
                 # Type checked
                 if tag_type not in self.types:
                     self.types.append(tag_type)
 
                 if tag_type.startswith("list_"):
-
                     database_value = self.project.session.get_value(
                         COLLECTION_CURRENT, scan_name, tag_name
                     )
                     self.old_database_values.append(database_value)
 
                     table_value = item.data(Qt.EditRole)
                     table_value = ast.literal_eval(table_value)
@@ -1668,15 +1713,14 @@
                 msg.setWindowTitle("Warning")
                 msg.setStandardButtons(QMessageBox.Ok)
                 msg.buttonClicked.connect(msg.close)
                 msg.exec()
 
             # Ok
             elif len(self.old_table_values) > 0:
-
                 if len(self.coordinates) > 1:
                     value = []
                     for i in range(0, self.lengths[0]):
                         value.append(0)
                 else:
                     value = self.old_table_values[0]
 
@@ -1758,15 +1802,15 @@
         self.progress.setWindowFlags(
             Qt.Window | Qt.WindowTitleHint | Qt.CustomizeWindowHint
         )
         self.progress.setModal(True)
         self.progress.setAttribute(Qt.WA_DeleteOnClose, True)
         self.progress.show()
 
-        ## Quick fix for #168 populse_mia issue
+        # Quick fix for #168 populse_mia issue
         # try:
         #
         #    if getattr(self.data_browser.main_window, 'test', False):
         #        from PyQt5.QtTest import QTest
         #        QTest.qWait(100)
         #
         # except AttributeError:
@@ -2093,17 +2137,15 @@
         self.setSortingEnabled(False)
 
         for row in range(0, self.rowCount()):
             scan = self.scans_to_visualize[row]
             old_row = self.get_scan_row(scan)
 
             if old_row != row:
-
                 for column in range(0, self.columnCount()):
-
                     if self.horizontalHeaderItem(column).text() == TAG_BRICKS:
                         widget_to_move = self.cellWidget(old_row, column)
                         item_to_move = self.takeItem(old_row, column)
                         widget_wrong_row = self.cellWidget(row, column)
                         item_wrong_row = self.takeItem(row, column)
 
                         if widget_to_move:
@@ -2125,15 +2167,14 @@
                                 brick_name_button.moveToThread(
                                     QApplication.instance().thread()
                                 )
 
                                 bricks_copy = {**self.bricks}
 
                                 for key, value in bricks_copy.items():
-
                                     if (
                                         value == brick_uuid
                                         and key
                                         == widget_to_move.findChildren(
                                             QPushButton
                                         )[0]
                                     ):
@@ -2181,15 +2222,14 @@
                                 brick_name_button.moveToThread(
                                     QApplication.instance().thread()
                                 )
 
                                 bricks_copy = {**self.bricks}
 
                                 for key, value in bricks_copy.items():
-
                                     if (
                                         value == brick_uuid
                                         and key
                                         == widget_wrong_row.findChildren(
                                             QPushButton
                                         )[0]
                                     ):
@@ -2257,19 +2297,17 @@
             row = point.row()
             scan_path = self.item(row, 0).text()
             scan_object = self.project.session.get_document(
                 COLLECTION_CURRENT, scan_path
             )
 
             if scan_object is not None:
-
                 if (scan_path in scan_list) and (
                     self.data_browser.data_sent is True
                 ):
-
                     if not repeat_pop_up:
                         self.pop = PopUpRemoveScan(scan_path, len(points))
                         self.pop.exec()
                         cancel = self.pop.stop
                         repeat_pop_up = self.pop.repeat
 
                     if cancel:
@@ -2277,15 +2315,14 @@
 
                 scans_removed.append(scan_object)
 
                 # Adding removed values to history
                 for tag in self.project.session.get_fields_names(
                     COLLECTION_CURRENT
                 ):
-
                     if tag != TAG_FILENAME:
                         current_value = self.project.session.get_value(
                             COLLECTION_CURRENT, scan_path, tag
                         )
                         initial_value = self.project.session.get_value(
                             COLLECTION_INITIAL, scan_path, tag
                         )
@@ -2309,15 +2346,14 @@
                     os.path.join(self.project.folder, scan_path)
                 ]
 
                 if scan_path.endswith(".nii"):
                     full_scan_paths.append(full_scan_paths[0][:-4] + ".json")
 
                 for full_scan_path in full_scan_paths:
-
                     if os.path.isfile(full_scan_path):
                         os.remove(full_scan_path)
 
         for scan in scans_removed:
             scan_name = getattr(scan, TAG_FILENAME)
             self.removeRow(self.get_scan_row(scan_name))
             self.project.unsavedModifications = True
@@ -2631,29 +2667,26 @@
 
         self.itemChanged.connect(self.change_cell_color)
 
     def update_colors(self):
         """Update the background of all the cells."""
 
         # itemChanged signal is always disconnected when calling this method
-
         tags = [
             self.horizontalHeaderItem(column).text()
             for column in range(len(self.horizontalHeader()))
         ]
         scans = [
             self.item(row, 0).text() if self.item(row, 0) else None
             for row in range(self.rowCount())
         ]
-
         dbs = self.project.session
         collection_row = dbs.get_collection(COLLECTION_CURRENT)
         primary_key = collection_row.primary_key
-        collection_init = dbs.get_collection(COLLECTION_INITIAL)
-        primary_key_init = collection_row.primary_key
+
         if scans:
             req = "%s IN [%s]" % (
                 primary_key,
                 ", ".join(
                     [
                         '"%s"' % x.replace("\\", "\\\\").replace('"', '"')
                         for x in self.scans_to_visualize
@@ -2664,29 +2697,30 @@
             documents_init = dbs.filter_documents(COLLECTION_INITIAL, req)
 
         else:
             documents = []
             documents_init = []
 
         fields = {f.field_name: f for f in dbs.get_fields(COLLECTION_CURRENT)}
-
         table_scans = {
             self.item(row, 0).text(): row for row in range(self.rowCount())
         }
         table_tags = {
             self.horizontalHeaderItem(column).text(): column
             for column in range(self.columnCount())
         }
         table_tags = [table_tags[tag] for tag in tags]
 
         # count visible rows odd/even
         row_even = []
         even = True
+
         for ro in range(self.rowCount()):
             row_even.append(even)
+
             if not self.isRowHidden(ro):
                 even = not even
 
         for scan_row, scan_i in enumerate(zip(documents, documents_init)):
             scan, scan_init = scan_i
 
             try:
@@ -2707,54 +2741,63 @@
 
             if not self.isRowHidden(row):
                 even = row_even[row]
 
                 for column, tag in zip(table_tags, tags):
                     if not self.isColumnHidden(column):
                         item = self.item(row, column)
-
                         color = QColor()
 
                         if column == 0:
                             if even:
                                 color.setRgb(255, 255, 255)  # White
+
                             else:
                                 color.setRgb(230, 230, 230)  # Grey
+
                         # Avoid issues after switching tab and not saving
                         elif scan[tag] is None:
                             if even:
                                 color.setRgb(245, 215, 215)  # Pink
+
                             else:
                                 color.setRgb(245, 175, 175)  # Red
+
                         # Raw tag
                         elif fields[tag].origin == TAG_ORIGIN_BUILTIN:
                             current_value = scan[tag]
                             initial_value = scan_init[tag]
+
                             if current_value != initial_value:
                                 if even:
                                     color.setRgb(200, 230, 245)  # Cyan
+
                                 else:
                                     color.setRgb(150, 215, 230)  # Blue
+
                             else:
                                 if even:
                                     color.setRgb(255, 255, 255)  # White
+
                                 else:
                                     color.setRgb(230, 230, 230)  # Grey
 
                         # User tag
                         else:
                             if even:
                                 color.setRgb(245, 215, 215)  # Pink
+
                             else:
                                 color.setRgb(245, 175, 175)  # Red
 
                         item.setData(Qt.BackgroundRole, QtCore.QVariant(color))
 
         # Auto-save
         config = Config()
+
         if config.isAutoSave() is True:
             self.project.saveModifications()
 
     def update_selection(self):
         """Update the selection after a search."""
 
         # Selection updated
@@ -2819,36 +2862,37 @@
 
         self.itemChanged.disconnect()
         if self.activate_selection:
             self.itemSelectionChanged.disconnect()
 
         # Tags that are not visible anymore are hidden
         for tag in old_tags:
-            if not tag in showed:
+            if tag not in showed:
                 self.setColumnHidden(self.get_tag_column(tag), True)
 
         # Tags that became visible must be visible
         for tag in showed:
             self.setColumnHidden(self.get_tag_column(tag), False)
 
         # Update the list of tags in the advanced search if it's opened
         if (
             hasattr(self.data_browser, "frame_advanced_search")
             and not self.data_browser.frame_advanced_search.isHidden()
         ):
             for row in self.data_browser.advanced_search.rows:
                 fields = row[2]
                 fields.clear()
+
                 for visible_tag in showed:
                     fields.addItem(visible_tag)
+
                 fields.model().sort(0)
                 fields.addItem("All visualized tags")
 
         self.resizeColumnsToContents()
-
         self.update_colors()
 
         # Selection updated
         if self.activate_selection:
             self.update_selection()
             self.itemSelectionChanged.connect(self.selection_changed)
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/data_browser/mini_viewer.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/data_browser/mini_viewer.py`

 * *Files 1% similar despite different names*

```diff
@@ -17,24 +17,36 @@
 import os
 import traceback
 from functools import partial
 
 import nibabel as nib
 import numpy as np  # a N-dimensional array object
 import skimage as sk
+
 # Populse_MIA imports
 # from populse_mia.software_properties import verCmp
 from packaging import version
 from PyQt5 import QtCore
+
 # PyQt5 imports
 from PyQt5.QtCore import Qt
 from PyQt5.QtGui import QFont, QImage, QPixmap
-from PyQt5.QtWidgets import (QCheckBox, QFrame, QHBoxLayout, QLabel, QLineEdit,
-                             QScrollArea, QSizePolicy, QSlider, QVBoxLayout,
-                             QWidget)
+from PyQt5.QtWidgets import (
+    QCheckBox,
+    QFrame,
+    QHBoxLayout,
+    QLabel,
+    QLineEdit,
+    QScrollArea,
+    QSizePolicy,
+    QSlider,
+    QVBoxLayout,
+    QWidget,
+)
+
 # from scipy.ndimage import rotate  # to work with NumPy arrays
 from skimage.transform import resize
 
 from populse_mia.data_manager.project import COLLECTION_CURRENT
 from populse_mia.software_properties import Config
 from populse_mia.user_interface.data_browser import data_browser
 from populse_mia.user_interface.pop_ups import ClickableLabel, PopUpSelectTag
@@ -450,29 +462,27 @@
         #  2 - rescaling before rotation is slightly faster, specially for
         #      large images (> display_size).
         #  3 - rescaling may alter the occurrence of nan or infinite values
         #      (e.g. an image may become all-nan), anti_aliasing keyword is
         #      defined in skimage since version 0.14.0
 
         if version.parse(sk.__version__) >= version.Version("0.14.0"):
-
             try:
                 im2D = resize(
                     im2D, display_size, mode="constant", anti_aliasing=False
                 )
 
             except ValueError:
                 im2D = resize(
                     im2D.byteswap().newbyteorder(),
                     display_size,
                     mode="constant",
                     anti_aliasing=False,
                 )
         else:
-
             try:
                 im2D = resize(im2D, display_size, mode="constant")
 
             except ValueError:
                 im2D = resize(
                     im2D.byteswap().newbyteorder(),
                     display_size,
@@ -646,15 +656,14 @@
             self.nb_char_max = 60
 
             font = QFont()
             font.setPointSize(9)
 
             # Reading the images from the file paths
             for idx, file_path in enumerate(self.file_paths.copy()):
-
                 try:
                     chk = nib.as_closest_canonical(
                         nib.load(file_path, mmap=False)
                     )
                     # chk = nib.as_closest_canonical(nib.load(file_path))
                     # chk = nib.load(file_path)
 
@@ -666,53 +675,51 @@
                     print(
                         "".join(traceback.format_tb(e.__traceback__)), end=""
                     )
                     print("{0}: {1}\n".format(e.__class__.__name__, e))
                     self.file_paths.remove(file_path)
                     chk = False
 
-                except FileNotFoundError as e:
+                except FileNotFoundError:
                     print(
                         "File "
                         + os.path.abspath(file_path)
                         + " is not existing ..."
                     )
                     self.file_paths.remove(file_path)
                     chk = False
 
                 if chk is not False:
-
                     try:
                         np.asarray(chk.dataobj)
 
                     except Exception as e:
                         print(
-                            "\nError while trying to display the {} image ...!\n"
+                            "\nError while trying to display the {} "
+                            "image ...!\n"
                             "Traceback:".format(os.path.abspath(file_path))
                         )
                         print(
                             "".join(traceback.format_tb(e.__traceback__)),
                             end="",
                         )
                         print("{0}: {1}\n".format(e.__class__.__name__, e))
                         self.file_paths.remove(file_path)
 
                     else:
                         self.img.insert(idx, chk)
 
             # If we are in the "cursors" display mode
             if self.check_box_slices.checkState() == Qt.Unchecked:
-
                 # Layout to aligne each thumbnail (image + cursors)
                 self.h_box_thumb = QHBoxLayout()
 
                 # idx represents the index of the selected image
                 for idx in range(min(self.max_scans, len(self.file_paths))):
                     if not self.do_nothing[idx]:
-
                         # Creating sliders and labels
                         self.boxSlider(idx)
                         self.enableSliders(idx)
                         self.createDimensionLabels(idx)
 
                         # Getting the sliders value and reading the image data
                         self.indexImage(idx)
@@ -791,15 +798,14 @@
                     # Layout that will contain all the thumbnails
                     self.h_box_thumb.addLayout(self.v_box_thumb)
 
                 self.frame.setLayout(self.h_box_thumb)
 
             # If we are in the "all slices" display mode
             else:
-
                 self.h_box_images = QHBoxLayout()
                 self.h_box_images.setSpacing(10)
                 self.v_box_scans = QVBoxLayout()
 
                 # idx represents the index of the selected image
                 for idx in range(len(self.file_paths)):
                     file_path_base_name = os.path.relpath(
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/data_browser/modify_table.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/data_browser/modify_table.py`

 * *Files 2% similar despite different names*

```diff
@@ -14,24 +14,37 @@
 # http://www.cecill.info/licences/Licence_CeCILL_V2.1-en.html
 # for details.
 ##########################################################################
 
 from datetime import datetime
 
 # Populse_db imports
-from populse_db.database import (FIELD_TYPE_LIST_BOOLEAN, FIELD_TYPE_LIST_DATE,
-                                 FIELD_TYPE_LIST_DATETIME,
-                                 FIELD_TYPE_LIST_FLOAT,
-                                 FIELD_TYPE_LIST_INTEGER,
-                                 FIELD_TYPE_LIST_STRING, FIELD_TYPE_LIST_TIME)
+from populse_db.database import (
+    FIELD_TYPE_LIST_BOOLEAN,
+    FIELD_TYPE_LIST_DATE,
+    FIELD_TYPE_LIST_DATETIME,
+    FIELD_TYPE_LIST_FLOAT,
+    FIELD_TYPE_LIST_INTEGER,
+    FIELD_TYPE_LIST_STRING,
+    FIELD_TYPE_LIST_TIME,
+)
+
 # PyQt5 imports
-from PyQt5.QtWidgets import (QDialog, QHBoxLayout, QMessageBox, QPushButton,
-                             QTableWidget, QTableWidgetItem, QVBoxLayout)
+from PyQt5.QtWidgets import (
+    QDialog,
+    QHBoxLayout,
+    QMessageBox,
+    QPushButton,
+    QTableWidget,
+    QTableWidgetItem,
+    QVBoxLayout,
+)
 
 from populse_mia.data_manager.project import COLLECTION_CURRENT
+
 # Populse_MIA imports
 from populse_mia.utils.utils import check_value_type
 
 
 class ModifyTable(QDialog):
     """Used to modify the contents of cells which contains lists.
 
@@ -134,15 +147,14 @@
                 if not check_value_type(text, tag_type, True):
                     valid_type = False
                     type_problem = tag_type
                     break
 
             # Type checked
             if not valid_type:
-
                 # Error dialog if invalid cell
                 valid = False
                 if test is False:
                     msg = QMessageBox()
                     msg.setIcon(QMessageBox.Warning)
                     msg.setText("Invalid value")
                     msg.setInformativeText(
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/data_browser/rapid_search.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/data_browser/rapid_search.py`

 * *Files 1% similar despite different names*

```diff
@@ -63,17 +63,15 @@
         """
 
         query = ""
 
         or_to_write = False
 
         for tag in tags:
-
             if tag != TAG_BRICKS:
-
                 if or_to_write:
                     query += " OR "
 
                 query += "({" + tag + "} == null)"
 
                 or_to_write = True
 
@@ -102,17 +100,15 @@
         """
 
         query = "("
 
         or_to_write = False
 
         for tag in tags:
-
             if tag != TAG_BRICKS:
-
                 if or_to_write:
                     query += " OR "
 
                 query += "({" + tag + '} LIKE "%' + search + '%")'
 
                 or_to_write = True
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/data_viewer/anatomist/mia_anatomist.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/data_viewer/anatomist/mia_anatomist.py`

 * *Files 15% similar despite different names*

```diff
@@ -1,46 +1,60 @@
 # -*- coding: utf-8 -*-
 
 """
-MIA data viewer implementation based on `Anatomist <http://brainvisa.info/anatomist/user_doc/index.html>`_
+MIA data viewer implementation based on `Anatomist
+<http://brainvisa.info/anatomist/user_doc/index.html>`_
 """
 
 from __future__ import absolute_import, print_function
 
 import os
 
-from anatomist.simpleviewer.anasimpleviewer import AnaSimpleViewer
+try:
+    from anatomist.simpleviewer.anasimpleviewer import AnaSimpleViewer
+
+except ImportError:
+    print(
+        "\nAnatomist seems not to be installed. The data_viewer anatomist "
+        "and anatomist_2 will not work...\n"
+    )
+
 from soma.qt_gui.qt_backend import Qt
 
 from populse_mia.data_manager.project import COLLECTION_CURRENT, TAG_FILENAME
-from populse_mia.user_interface.data_browser.data_browser import \
-    TableDataBrowser
+from populse_mia.user_interface.data_browser.data_browser import (
+    TableDataBrowser,
+)
 
 from ..data_viewer import DataViewer
 
 
 class MiaViewer(Qt.QWidget, DataViewer):
     """
-    :class:`MIA data viewer <populse_mia.user_interface.data_viewer.data_viewer.DataViewer>`
-    implementation based on `PyAnatomist <http://brainvisa.info/pyanatomist/sphinx/index.html>`_
+    :class:`MIA data viewer
+           <populse_mia.user_interface.data_viewer.data_viewer.DataViewer>`
+    implementation based on `PyAnatomist
+    <http://brainvisa.info/pyanatomist/sphinx/index.html>`_
     """
 
     def __init__(self, init_global_handlers=None):
+        """blabla"""
 
         super(MiaViewer, self).__init__()
-
         self.anaviewer = AnaSimpleViewer(init_global_handlers)
 
         # count global number of viewers using anatomist, in order to close it
         # nicely
         if not hasattr(DataViewer, "mia_viewers"):
             DataViewer.mia_viewers = 0
+
         DataViewer.mia_viewers += 1
 
-        findChild = lambda x, y: Qt.QObject.findChild(x, Qt.QObject, y)
+        def findChild(x, y):
+            return Qt.QObject.findChild(x, Qt.QObject, y)
 
         awidget = self.anaviewer.awidget
         toolbar = findChild(awidget, "toolBar")
         open_action = findChild(awidget, "fileOpenAction")
         db_action = Qt.QAction(open_action.icon(), "filter", awidget)
         toolbar.insertAction(open_action, db_action)
         db_action.triggered.connect(self.filter_documents)
@@ -53,32 +67,37 @@
         layout.addWidget(self.anaviewer.awidget)
 
         self.project = None
         self.documents = []
         self.displayed = []
 
     def display_files(self, files):
+        """blabla"""
         self.displayed += files
         for filename in files:
             self.anaviewer.loadObject(filename)
 
     def displayed_files(self):
+        """blabla"""
         return self.displayed
 
     def remove_files(self, files):
+        """blabla"""
         self.anaviewer.deleteObjectsFromFiles(files)
         self.files = [doc for doc in self.displayed if doc not in files]
 
     def set_documents(self, project, documents):
+        """blabla"""
         if self.project is not project:
             self.clear()
         self.project = project
         self.documents = documents
 
     def filter_documents(self):
+        """blabla"""
         dialog = Qt.QDialog()
         layout = Qt.QVBoxLayout()
         dialog.setLayout(layout)
         table_data = TableDataBrowser(
             self.project,
             self,
             self.project.session.get_shown_tags(),
@@ -118,13 +137,14 @@
                 value = os.path.abspath(
                     os.path.join(self.project.folder, value)
                 )
                 result_names.append(value)
             self.display_files(result_names)
 
     def close(self):
+        """blabla"""
         super(MiaViewer, self).close()
         close_ana = False
         DataViewer.mia_viewers -= 1  # dec count
         if DataViewer.mia_viewers == 0:
             close_ana = True
         self.anaviewer.closeAll(close_ana)
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/data_viewer/anatomist_2/anasimpleviewer2.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/data_viewer/anatomist_2/anasimpleviewer2.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,9 +1,11 @@
 #!/usr/bin/env python
 # -*- coding: utf-8 -*-
+"""AnaSimpleViewer2"""
+
 #  This software and supporting documentation are distributed by
 #      Institut Federatif de Recherche 49
 #      CEA/NeuroSpin, Batiment 145,
 #      91191 Gif-sur-Yvette cedex
 #      France
 #
 # This software is governed by the CeCILL license version 2 under
@@ -32,61 +34,71 @@
 # The fact that you are presently reading this means that you have had
 # knowledge of the CeCILL license version 2 and that you accept its terms.
 
 from __future__ import absolute_import, print_function
 
 import os
 import sys
-from optparse import OptionParser
-
-import anatomist.direct.api as ana
-from six.moves import zip
-from soma import aims
-from soma.aims import colormaphints
-# determine wheter we are using Qt4 or Qt5, and hack a little bit accordingly
-# the boolean qt4 gloabl variable will tell it for later usage
-from soma.qt_gui import qt_backend
-
-qt_backend.set_qt_backend(compatible_qt5=True)
-import importlib
 import time
 
 import numpy as np
 import PyQt5
 import six
-# the following imports have to be made after the qApp.startingUp() test
-# since they do instantiate Anatomist for registry to work.
-from anatomist.cpp.simplecontrols import (ResetFOVAction, Simple2DControl,
-                                          Simple3DControl,
-                                          registerSimpleControls)
-from PyQt5.QtGui import QColor, QIcon, QLabel, QSlider, QWidget
+from PyQt5.QtGui import QColor, QIcon, QLabel, QWidget
 from PyQt5.QtWidgets import QMessageBox
-from soma.qt_gui.qt_backend import Qt, QtCore, QtGui, uic
+from six.moves import zip
+from soma import aims
+from soma.aims import colormaphints
+from soma.qt_gui import qt_backend
+from soma.qt_gui.qt_backend import Qt, QtCore
 from soma.qt_gui.qt_backend.uic import loadUi
 
 from populse_mia.software_properties import Config
-from populse_mia.user_interface.data_viewer.anatomist_2 import \
-    resources_snd_window
-from populse_mia.user_interface.data_viewer.anatomist_2.snd_window import \
-    NewWindowViewer
+from populse_mia.user_interface.data_viewer.anatomist_2.snd_window import (
+    NewWindowViewer,
+)
+
+try:
+    import anatomist.direct.api as ana
+except ImportError:
+    print(
+        "\nAnatomist seems not to be installed. The data_viewer anatomist "
+        "and anatomist_2 will not work...\n"
+    )
+# the following imports have to be made after the qApp.startingUp() test
+# since they do instantiate Anatomist for registry to work.
+try:
+    from anatomist.cpp.simplecontrols import (
+        Simple2DControl,
+        registerSimpleControls,
+    )
+except ImportError:
+    print(
+        "\nAnatomist seems not to be installed. The data_viewer anatomist "
+        "and anatomist_2 will not work...\n"
+    )
+# determine whether we are using Qt4 or Qt5, and hack a little bit accordingly
+# the boolean qt4 global variable will tell it for later usage
+qt_backend.set_qt_backend(compatible_qt5=True)
 
 
 class LeftSimple3DControl(Simple2DControl):
     """
     define another control where rotation is with the left mouse button
     (useful for touch devices)
     """
 
     def __init__(self, prio=25, name="LeftSimple3DControl"):
+        """blabla"""
         super(LeftSimple3DControl, self).__init__(prio, name)
 
     def eventAutoSubscription(self, pool):
+        """blabla"""
         key = QtCore.Qt
         NoModifier = key.NoModifier
-        ShiftModifier = key.ShiftModifier
         ControlModifier = key.ControlModifier
         super(LeftSimple3DControl, self).eventAutoSubscription(pool)
         self.mouseLongEventUnsubscribe(key.LeftButton, NoModifier)
         self.mouseLongEventSubscribe(
             key.LeftButton,
             NoModifier,
             pool.action("ContinuousTrackball").beginTrackball,
@@ -107,17 +119,19 @@
 class VolRenderControl(LeftSimple3DControl):
     """
     define another control where cut slice rotation is with the middle mouse
     button
     """
 
     def __init__(self, prio=25, name="VolRenderControl"):
+        """blabla"""
         super(VolRenderControl, self).__init__(prio, name)
 
     def eventAutoSubscription(self, pool):
+        """blabla"""
         super(VolRenderControl, self).eventAutoSubscription(pool)
         self.mouseLongEventUnsubscribe(Qt.Qt.MiddleButton, Qt.Qt.NoModifier)
         self.mouseLongEventSubscribe(
             Qt.Qt.MiddleButton,
             Qt.Qt.NoModifier,
             pool.action("TrackCutAction").beginTrackball,
             pool.action("TrackCutAction").moveTrackball,
@@ -148,14 +162,15 @@
     the :meth:`init_global_handlers` method, which is called by the constructor
     if the argument `init_global_handlers` is not set to False when calling it.
     """
 
     _global_handlers_initialized = False
 
     def __init__(self, init_global_handlers=None):
+        """blabla"""
         Qt.QObject.__init__(self)
 
         a = ana.Anatomist("-b")
 
         if init_global_handlers:
             self.init_global_handlers()
 
@@ -171,17 +186,19 @@
         self.awidget = awin
 
         # new window popup for objects
         self.newWindow = NewWindowViewer()
 
         # connect GUI actions callbacks
         def findChild(x, y):
+            """blabla"""
             return Qt.QObject.findChild(x, QtCore.QObject, y)
 
-        # findChild(awin, 'actionprint_view').triggered.connect(self.addNewView)
+        # findChild(awin,
+        #           'actionprint_view').triggered.connect(self.addNewView)
         findChild(awin, "actionTimeRunning").triggered.connect(
             self.automaticRunning
         )
         findChild(awin, "fileOpenAction").triggered.connect(self.fileOpen)
         findChild(awin, "fileExitAction").triggered.connect(self.closeAll)
         findChild(awin, "editAddAction").triggered.connect(self.editAdd)
         findChild(awin, "editRemoveAction").triggered.connect(self.editRemove)
@@ -271,15 +288,14 @@
         self.slider.valueChanged.connect(self.changeOpacity)
 
     def init_global_handlers(self):
         """
         Set some global controls / settings in Anatomist application object
         """
         if not AnaSimpleViewer2._global_handlers_initialized:
-
             registerSimpleControls()
             a = ana.Anatomist("-b")
             iconpath = os.path.join(str(a.anatomistSharedPath()), "icons")
             pix = Qt.QPixmap(os.path.join(iconpath, "simple3Dcontrol.png"))
             ana.cpp.IconDictionary.instance().addIcon(
                 "LeftSimple3DControl", pix
             )
@@ -304,41 +320,48 @@
 
             a.setGraphParams(label_attribute="label")
 
             AnaSimpleViewer2._global_handlers_initialized = True
 
     def setComboBox(self):
         """
-        Inserts a drop down menu in the toolbar. This menu contains defined available color palettes
-        The default color palettes are in self.available_palettes
+        Inserts a drop down menu in the toolbar. This menu contains defined
+        available color palettes. The default color palettes are in
+        self.available_palettes.
         """
+
         toolBar = Qt.QObject.findChild(self.awidget, QtCore.QObject, "toolBar")
         actionAutoRunning = Qt.QObject.findChild(
             self.awidget, QtCore.QObject, "actionTimeRunning"
         )
         label = QLabel("Palette: ")
         label.setToolTip("Change color palette of selected object")
+
         for palette in self.available_palettes:
             self.combobox.addItem(palette)
+
         toolBar.insertWidget(actionAutoRunning, label)
         toolBar.insertWidget(actionAutoRunning, self.combobox)
         sources_images_dir = Config().getSourceImageDir()
+
         for i in range(len(self.available_palettes)):
             icon = QIcon(
                 os.path.join(sources_images_dir, self.available_palettes[i])
             )
             self.combobox.setItemIcon(i, icon)
+
         size = PyQt5.QtCore.QSize(200, 15)
         self.combobox.setIconSize(size)
 
     def setSlider(self):
         """
         Inserts opacity slider in the toolbar
         Minimum returned value is 0 and maximum value is 100
         """
+
         toolBar = Qt.QObject.findChild(self.awidget, QtCore.QObject, "toolBar")
         actionAutoRunning = Qt.QObject.findChild(
             self.awidget, QtCore.QObject, "actionTimeRunning"
         )
         space = QWidget().resize(5, 0)
         label = QLabel("Opacity: ")
         label.setToolTip("Change opacity of selected object")
@@ -347,75 +370,82 @@
         self.slider.setValue(100)
         toolBar.insertWidget(actionAutoRunning, space)
         toolBar.insertWidget(actionAutoRunning, label)
         toolBar.insertWidget(actionAutoRunning, self.slider)
 
     def changeOpacity(self):
         """
-        Changes opacity of selected object (to be more precise it changes the mixing rate between objects when multiple ones are
-        displayed)
+        Changes opacity of selected object (to be more precise it changes the
+        mixing rate between objects when multiple ones are displayed)
         """
+
         if self.selectedObjects() and len(self.displayedObjects) == 1:
             diffuse_vect = self.selectedObjects()[0].getInfo()["material"][
                 "diffuse"
             ]
             self.selectedObjects()[0].setMaterial(
                 diffuse=[
                     diffuse_vect[0],
                     diffuse_vect[1],
                     diffuse_vect[2],
                     self.slider.value() / 100,
                 ]
             )
+
         elif self.selectedObjects():
             index = self.displayedObjects.index(self.selectedObjects()[0])
             a = ana.Anatomist("-b")
-            list = Qt.QObject.findChild(
-                self.awidget, QtCore.QObject, "objectslist"
-            )
+
             if index == 0:
                 a.execute(
                     "TexturingParams",
                     objects=self.fusion2d,
                     texture_index=1,
                     rate=self.slider.value() / 100,
                     mode="linear_B_if_A_black",
                 )
+
             else:
                 corrected_val = abs(self.slider.value() - 100)
                 a.execute(
                     "TexturingParams",
                     objects=self.fusion2d,
                     texture_index=index,
                     rate=corrected_val / 100,
                     mode="linear_A_if_B_black",
                 )
 
     def newPalette(self):
         """
-        Sets chosen color palette in the toolbar drop down menu to selected object
+        Sets chosen color palette in the toolbar drop down menu to
+        selected object.
         """
         color = self.combobox.currentText()
         if self.selectedObjects():
             self.selectedObjects()[0].setPalette(palette=color)
 
     def setColorPalette(self):
         """
-        Checks color palette of a selected object, displays it in the toolbar drop-down menu and adds it if it isn't already stored in
-        self.available_palettes
-        If corresponding palette image exists it is added, otherwise only the name of the palette appears
+        Checks color palette of a selected object, displays it in the toolbar
+        drop-down menu and adds it if it isn't already stored in
+        self.available_palettes. If corresponding palette image exists it is
+        added, otherwise only the name of the palette appears.
         """
+
         color = self.combobox.currentText()
+
         if self.selectedObjects():
             actual_pal = self.selectedObjects()[0].getInfo()["palette"][
                 "palette"
             ]
+
             if actual_pal != color:
                 if actual_pal in self.available_palettes:
                     self.combobox.setCurrentText(actual_pal)
+
                 else:
                     self.combobox.addItem(actual_pal)
                     self.combobox.setCurrentText(actual_pal)
                     self.available_palettes.append(actual_pal)
                     sources_images_dir = Config().getSourceImageDir()
                     index = self.combobox.currentIndex()
                     icon = QIcon(
@@ -437,19 +467,20 @@
     def changeRef(self):
         """
         change referential
         ref : Boolean
         0 : World coordinates
         1 : Image referential
         """
-        a = ana.Anatomist("-b")
         self.deleteObjects(self.aobjects)
         self.loadObject(self.files, config_changed=True)
 
     def findChild(x, y):
+        """Blabla"""
+
         return Qt.QObject.findChild(x, QtCore.QObject, y)
 
     def clickHandler(self, eventName, params):
         """
         Callback for linked cursor. In volume rendering mode, it will sync
         the VR slice to the linked cursor.
         It also updates the volumes values view
@@ -462,14 +493,15 @@
         tr = a.getTransformation(wref, a.mniTemplateRef)
         if tr:
             pos2 = tr.transform(pos[:3])
         else:
             pos2 = pos
 
         def findChild(x, y):
+            """Blabla"""
             return Qt.QObject.findChild(x, QtCore.QObject, y)
 
         x = findChild(self.awidget, "coordXEdit")
         x.setText("%8.3f" % pos2[0])
         y = findChild(self.awidget, "coordYEdit")
         y.setText("%8.3f" % pos2[1])
         z = findChild(self.awidget, "coordZEdit")
@@ -535,20 +567,23 @@
             clip.notifyObservers()
 
     def automaticRunning(self):
         """
         Enable automatic running of functionnal images
         frame rate can be changed in preferences by the user
         """
+
         a = ana.Anatomist("-b")
         objects = []
         im_sec = float(Config().getViewerFramerate())
         frame_rate = 1 / im_sec
 
         def findChild(x, y):
+            """Blabla"""
+
             return Qt.QObject.findChild(x, QtCore.QObject, y)
 
         t = findChild(self.awidget, "coordTEdit")
         sources_images_dir = Config().getSourceImageDir()
         pauseIcon = QIcon(os.path.join(sources_images_dir, "pause.png"))
         playIcon = QIcon(os.path.join(sources_images_dir, "play.png"))
 
@@ -651,30 +686,36 @@
             windows=[w],
             light={"background": [0.0, 0.0, 0.0, 1.0]},
             view_size=(500, 600),
         )
 
     def createTotalWindow(self, views):
         """
-        Create the windows which will contain the views
-        views : array containing strings "axial", "sagittal", "coronal" and/or "3D"
+        Create the windows which will contain the views.
+
+        views : array containing strings "axial", "sagittal", "coronal"
+                and/or "3D"
         """
+
         for i in views:
             self.createWindow(str(i))
+
             if i == "3D":
                 # set a cool angle of view for 3D
                 a = ana.Anatomist("-b")
                 a.execute(
                     "Camera",
                     windows=[self.awindows[-1]],
                     view_quaternion=[0.404603, 0.143829, 0.316813, 0.845718],
                 )
+
         # Sets view buttons checked for first display
         if views == ["Axial", "Sagittal", "Coronal"]:
             counter = 0
+
             for i in views:
                 self.viewButtons[counter].setChecked(True)
                 counter += 1
 
     def deleteTotalWindow(self):
         """
         Clear windows and fusions in order to enable new display
@@ -855,14 +896,16 @@
                             ana.cpp.AObjectConverter.aims(obj)
                         )
                         obj.attributed()["colormaphints"] = hints
                     i += 1
 
     @QtCore.Slot("anatomist::AObject *", "const std::string &")
     def objectLoaded(self, obj, filename):
+        """Blabla"""
+
         a = ana.Anatomist("-b")
         if not obj:
             return
         o = a.AObject(a, obj)
         o.releaseAppRef()
         p = a.theProcessor()
         resetProcExec = False
@@ -876,40 +919,45 @@
             # set back recursive execution to its previous state
             p.allowExecWhileIdle(False)
 
     def registerObject(self, obj, views=None):
         """
         Register an object in anasimpleviewer objects list, and display it
         """
-        a = ana.Anatomist("-b")
         ojectlist = Qt.QObject.findChild(
             self.awidget, QtCore.QObject, "objectslist"
         )
         ojectlist.addItem(obj.name)
         # keep it in the global list
         self.aobjects.append(obj)
         self.displayedObjects.append(obj)
         self.colorBackgroundList()
+
         if obj.objectType == "VOLUME":
             # volume are checked for possible adequate colormaps
             # prints the header of volume ana.cpp.AObjectConverter.aims(obj)
             hints = colormaphints.checkVolume(
                 ana.cpp.AObjectConverter.aims(obj)
             )
             obj.attributed()["colormaphints"] = hints
+
         bb = obj.boundingbox()
+
         if not bb:
             # not a viewable object
             return
+
         # create the 4 windows if they don't exist
         if len(self.awindows) == 0:
-            if views == None:
+            if views is None:
                 self.createTotalWindow(["Axial", "Sagittal", "Coronal"])
+
             else:
                 self.createTotalWindow(views)
+
         # view obj in these views
         self.addObject(obj)
         # set the cursot at the center of the object (actually, overcome a bug
         # in anatomist...)
         self.viewReferential(obj)
 
     def _displayVolume(self, obj, opts={}):
@@ -941,35 +989,42 @@
         If several volumes are displayed, a Fusion2D will be built to wrap all
         of them.
         If volume rendering is allowed, 3D views will display a clipped volume
         rendering of either the single volume (if only one is present), or of
         the 2D fusion.
         """
         a = ana.Anatomist("-b")
+
         if obj in self.fusion2d:
             return
-        hasvr = False
+
+        # hasvr = False
         if self.volrender:
             # delete the previous volume rendering
             a.deleteObjects(self.volrender)
-            hasvr = True
+            # hasvr = True
             self.volrender = None
+
         if len(self.fusion2d) == 0:
             # only one object
             self.fusion2d = [None, obj]
+
         else:
             # several objects: fusion them
             fusobjs = self.fusion2d[1:] + [obj]
             f2d = a.fusionObjects(fusobjs, method="Fusion2DMethod")
             f2d.releaseAppRef()
+
             if self.fusion2d[0] is not None:
                 # destroy the previous fusion
                 a.deleteObjects(self.fusion2d[0])
+
             else:
                 a.removeObjects(self.fusion2d[1], self.awindows)
+
             self.fusion2d = [f2d] + fusobjs
             # repalette( fusobjs )
             obj = f2d
 
         if obj.objectType == "VOLUME":
             # choose a good colormap for a single volume
             if "volume_contents_likelihoods" in obj.attributed():
@@ -984,54 +1039,71 @@
             children = [
                 x
                 for x, y in zip(obj.children, hints)
                 if "volume_contents_likelihoods" in y
             ]
             hints = [x for x in hints if "volume_contents_likelihoods" in x]
             cmaps = colormaphints.chooseColormaps(hints)
+
             for x, y in zip(children, cmaps):
                 x.setPalette(y)
+
         # call a lower-level function for display and volume rendering
         self._displayVolume(obj, opts)
 
     def removeVolume(self, obj, opts={}):
         """
         Hides a volume from views (low-level function: use removeObject)
         """
         a = ana.Anatomist("-b")
+
         if obj in self.fusion2d:
-            hasvr = False
+            # hasvr = False
+
             if self.volrender:
                 a.deleteObjects(self.volrender)
                 self.volrender = None
-                hasvr = True
+                # hasvr = True
+
             fusobjs = [o for o in self.fusion2d[1:] if o != obj]
+
             if len(fusobjs) >= 2:
                 f2d = a.fusionObjects(fusobjs, method="Fusion2DMethod")
                 f2d.releaseAppRef()
+
             else:
                 f2d = None
+
             if self.fusion2d[0] is not None:
                 a.deleteObjects(self.fusion2d[0])
+
             else:
                 a.removeObjects(self.fusion2d[1], self.awindows)
+
             if len(fusobjs) == 0:
                 self.fusion2d = []
+
             else:
                 self.fusion2d = [f2d] + fusobjs
+
             # repalette( fusobjs )
             if f2d:
                 obj = f2d
+
             elif len(fusobjs) == 1:
                 obj = fusobjs[0]
+
             else:
                 return
+
             self._displayVolume(obj, opts)
 
     def get_new_mesh2d_color(self):
+        """Blabla"""
+
         colors = [
             (1.0, 0.3, 0.3, 1.0),
             (0.3, 1.0, 0.3, 1.0),
             (0.3, 0.3, 1.0, 1.0),
             (1.0, 1.0, 0.0, 1.0),
             (0.0, 1.0, 1.0, 1.0),
             (1.0, 0.0, 1.0, 1.0),
@@ -1052,14 +1124,16 @@
         used_cols = set([col for obj, col in six.itervalues(self.meshes2d)])
         for col in colors:
             if col not in used_cols:
                 return col
         return len(self.meshes2d) % len(colors)
 
     def addMesh(self, obj, opts):
+        """Blabla"""
+
         a = ana.Anatomist("-b")
         mesh2d = a.fusionObjects(
             [obj.getInternalRep()], method="Fusion2DMeshMethod"
         )
         color = self.get_new_mesh2d_color()
         self.meshes2d[obj.getInternalRep()] = (mesh2d, color)
         mesh2d.setMaterial(diffuse=color)
@@ -1071,14 +1145,16 @@
             in (w.AXIAL_WINDOW, w.CORONAL_WINDOW, w.SAGITTAL_WINDOW)
         ]
         windows_3d = [w for w in self.awindows if w not in windows_2d]
         a.addObjects(mesh2d, windows_2d)
         a.addObjects(obj, windows_3d)
 
     def removeMesh(self, obj):
+        """Blabla"""
+
         a = ana.Anatomist("-b")
         mesh2d, col = self.meshes2d[obj.getInternalRep()]
         a.removeObjects([obj, mesh2d], self.awindows)
         del self.meshes2d[obj.getInternalRep()]
 
     def disableButtons(self):
         """
@@ -1134,21 +1210,24 @@
                 self.changeIcon(item, i)
                 item = Qt.QObject.findChild(
                     self.awidget, QtCore.QObject, "objectslist"
                 ).item(i)
                 item.setBackground(QColor("transparent"))
 
     def changeIcon(self, item, i, icon=None):
-        """adds empty icon if object is not displayed and check icon if displayed"""
+        """
+        Adds empty icon if object is not displayed and check icon if displayed.
+        """
+
         objectlist = Qt.QObject.findChild(
             self.awidget, QtCore.QObject, "objectslist"
         )
         row = objectlist.row(item)
         # remove item from objectlist
-        itembis = objectlist.takeItem(row)
+        objectlist.takeItem(row)
         object_name = self.aobjects[i].name
         # Add blank icon as spaceItem
         sources_images_dir = Config().getSourceImageDir()
         if icon == "check":
             icon = QIcon(os.path.join(sources_images_dir, "check.png"))
         else:
             icon = QIcon(os.path.join(sources_images_dir, "BLANK_ICON.png"))
@@ -1271,54 +1350,66 @@
         """
         a = ana.Anatomist("-b")
         objs = [o for o in a.getObjects() if o.filename in files]
         self.deleteObjects(objs)
 
     def closeAll(self, close_ana=True):
         """Exit"""
+
         print("Exiting Ana2")
         self.newWindow.close()
         a = ana.Anatomist("-b")
         # remove windows from their parent to prevent them to be brutally
         # deleted by Qt.
         w = None
+
         for w in self.awindows:
             try:
                 w.hide()
-            except:
+
+            except Exception:
                 continue  # window closed by Qt ?
+
             self.viewgridlay.removeWidget(w.internalRep._get())
             w.setParent(None)
+
         del w
         self.awindows = []
         self.displayedObjects = []
         self.viewgridlay = None
         self.volrender = None
         self.fusion2d = []
         self.mesh3d = {}
         self.aobjects = []
         self.awidget.close()
         self.awidget = None
         del self.fdialog
+
         if close_ana:
             a = ana.Anatomist()
             a.close()
 
     def stopVolumeRendering(self):
         """Disable volume rendering: show a slice instead"""
+
         a = ana.Anatomist("-b")
+
         if not self.volrender:
             return
+
         a.deleteObjects(self.volrender)
         self.volrender = None
+
         if len(self.fusion2d) != 0:
             if self.fusion2d[0] is not None:
                 obj = self.fusion2d[0]
+
             else:
                 obj = self.fusion2d[1]
+
         wins = [w for w in self.awindows if w.subtype() == 0]
         a.addObjects(obj, wins)
         self.control_3d_type = "LeftSimple3DControl"
         a.execute("SetControl", windows=wins, control=self.control_3d_type)
 
     def startVolumeRendering(self):
         """Enable volume rendering in 3D views"""
@@ -1347,14 +1438,16 @@
         self._vrenabled = on
         if self._vrenabled:
             self.startVolumeRendering()
         else:
             self.stopVolumeRendering()
 
     def open_anatomist_main_window(self):
+        """Blabla"""
+
         a = ana.Anatomist()
         cw = a.getControlWindow()
         a.execute("CreateControlWindow")
         if not cw:
             anacontrolmenu = sys.modules.get("anacontrolmenu")
             if anacontrolmenu:
                 anacontrolmenu.add_gui_menus()
@@ -1362,14 +1455,16 @@
     def coordsChanged(self):
         """set the cursor on the position entered in the coords fields"""
         a = ana.Anatomist("-b")
         if len(self.awindows) == 0:
             return
 
         def findChild(x, y):
+            """Blabla"""
+
             return Qt.QObject.findChild(x, QtCore.QObject, y)
 
         pos = [
             float(findChild(self.awidget, "coordXEdit").text()),
             float(findChild(self.awidget, "coordYEdit").text()),
             float(findChild(self.awidget, "coordZEdit").text()),
         ]
@@ -1381,23 +1476,27 @@
             pos = tr.transform(pos)
         t = float(findChild(self.awidget, "coordTEdit").text())
         a.execute(
             "LinkedCursor", window=self.awindows[0], position=pos[:3] + [t]
         )
 
     def dragEnterEvent(self, win, event):
+        """Blabla"""
+
         x = ana.cpp.QAObjectDrag.canDecode(
             event
         ) or ana.cpp.QAObjectDrag.canDecodeURI(event)
         if x:
             event.accept()
         else:
             event.reject()
 
     def dropEvent(self, win, event):
+        """Blabla"""
+
         a = ana.Anatomist("-b")
         o = ana.cpp.set_AObjectPtr()
         if ana.cpp.QAObjectDrag.decode(event, o):
             for obj in o:
                 ob = a.AObject(o)
                 if ob not in self.aobjects:
                     self.registerObject(ob)
@@ -1427,15 +1526,14 @@
         Right-click popup on objects list
         """
         sel = self.selectedObjects()
         if len(sel) == 0:
             return
         t = aims.Tree()
         osel = [o.getInternalRep() for o in sel]
-        options = ana.cpp.OptionMatcher.commonOptions(osel, t)
         menu = ana.cpp.OptionMatcher.popupMenu(osel, t)
         prop = menu.addAction("Object properties")
         prop.triggered.connect(self.object_properties)
         new_view = menu.addAction("Open in new view")
         new_view.triggered.connect(lambda: self.addNewView(sel[0]))
         menu.exec_(Qt.QCursor.pos())
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/data_viewer/anatomist_2/mia_anatomist.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/data_viewer/anatomist_2/mia_anatomist.py`

 * *Files 2% similar despite different names*

```diff
@@ -17,39 +17,42 @@
 # for details.
 ##########################################################################
 
 from __future__ import absolute_import, print_function
 
 import os
 
-import anatomist.direct.api as ana
-from PyQt5.QtGui import QIcon, QIntValidator, QMessageBox, QPixmap
+from PyQt5.QtGui import QIcon, QMessageBox
 from PyQt5.QtWidgets import QHBoxLayout, QToolButton
 from soma.qt_gui.qt_backend import Qt, QtCore
 
 from populse_mia.data_manager.project import COLLECTION_CURRENT, TAG_FILENAME
 from populse_mia.software_properties import Config
-from populse_mia.user_interface.data_browser.advanced_search import \
-    AdvancedSearch
-from populse_mia.user_interface.data_browser.data_browser import \
-    TableDataBrowser
+from populse_mia.user_interface.data_browser.data_browser import (
+    TableDataBrowser,
+)
 from populse_mia.user_interface.data_browser.rapid_search import RapidSearch
-from populse_mia.user_interface.data_viewer.anatomist_2 import resources
-from populse_mia.user_interface.data_viewer.anatomist_2.anasimpleviewer2 import \
-    AnaSimpleViewer2
+from populse_mia.user_interface.data_viewer.anatomist_2 import (  # noqa: F401
+    resources,
+)
+from populse_mia.user_interface.data_viewer.anatomist_2.anasimpleviewer2 import (  # noqa: E501
+    AnaSimpleViewer2,
+)
 
 from ..data_viewer import DataViewer
 
 not_defined_value = "*Not Defined*"
 
 
 class MiaViewer(Qt.QWidget, DataViewer):
     """
-    :class:`MIA data viewer <populse_mia.user_interface.data_viewer.data_viewer.DataViewer>`
-    implementation based on `PyAnatomist <http://brainvisa.info/pyanatomist/sphinx/index.html>`_
+    :class:`MIA data viewer
+           <populse_mia.user_interface.data_viewer.data_viewer.DataViewer>`
+           implementation based on
+           `PyAnatomist <http://brainvisa.info/pyanatomist/sphinx/index.html>`_
 
     .. Methods:
         - close: Exit
         - display_files: Load objects in files and display
         - displayed_files: Get the list of displayed files
         - filter_documents: Filter documents already loaded in the Databrowser
         - preferences: Preferences for the dataviewer
@@ -58,29 +61,28 @@
         - screenshot: The screenshot of mia_anatomist_2
         - search_str: Update the *Not Defined*" values in visualised documents
         - set_documents: Initialise current documents in the viewer
 
     """
 
     def __init__(self, init_global_handlers=None):
-
         super(MiaViewer, self).__init__()
 
         self.anaviewer = AnaSimpleViewer2(init_global_handlers)
 
         # count global number of viewers using anatomist, in order to close it
         # nicely
         if not hasattr(DataViewer, "mia_viewers"):
             DataViewer.mia_viewers = 0
         DataViewer.mia_viewers += 1
 
-        findChild = lambda x, y: Qt.QObject.findChild(x, Qt.QObject, y)
+        def findChild(x, y):
+            return Qt.QObject.findChild(x, Qt.QObject, y)
 
         awidget = self.anaviewer.awidget
-
         filter_action = findChild(awidget, "filterAction")
         preferences_action = findChild(awidget, "actionPreferences")
         screenshot_action = findChild(awidget, "actionprint_view")
 
         filter_action.triggered.connect(self.filter_documents)
         preferences_action.triggered.connect(self.preferences)
         screenshot_action.triggered.connect(self.screenshot)
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/data_viewer/anatomist_2/resources.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/data_viewer/anatomist_2/resources.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,11 +1,11 @@
 # -*- coding: utf-8 -*-
 
-# Resource object code
-#
+"""Resource object code."""
+
 # Created by: The Resource Compiler for PyQt5 (Qt v5.12.8)
 #
 # WARNING! All changes made in this file will be lost!
 
 from PyQt5 import QtCore
 
 qt_resource_data = b"\
@@ -79499,19 +79499,23 @@
     qt_resource_struct = qt_resource_struct_v1
 else:
     rcc_version = 2
     qt_resource_struct = qt_resource_struct_v2
 
 
 def qInitResources():
+    """Blabla"""
+
     QtCore.qRegisterResourceData(
         rcc_version, qt_resource_struct, qt_resource_name, qt_resource_data
     )
 
 
 def qCleanupResources():
+    """Blabla"""
+
     QtCore.qUnregisterResourceData(
         rcc_version, qt_resource_struct, qt_resource_name, qt_resource_data
     )
 
 
 qInitResources()
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/data_viewer/anatomist_2/resources_snd_window.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/data_viewer/anatomist_2/resources_snd_window.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,11 +1,10 @@
 # -*- coding: utf-8 -*-
+"""Resource object code."""
 
-# Resource object code
-#
 # Created by: The Resource Compiler for PyQt5 (Qt v5.9.5)
 #
 # WARNING! All changes made in this file will be lost!
 
 from PyQt5 import QtCore
 
 qt_resource_data = b"\
@@ -37809,19 +37808,23 @@
     qt_resource_struct = qt_resource_struct_v1
 else:
     rcc_version = 2
     qt_resource_struct = qt_resource_struct_v2
 
 
 def qInitResources():
+    """Blabla"""
+
     QtCore.qRegisterResourceData(
         rcc_version, qt_resource_struct, qt_resource_name, qt_resource_data
     )
 
 
 def qCleanupResources():
+    """Blabla"""
+
     QtCore.qUnregisterResourceData(
         rcc_version, qt_resource_struct, qt_resource_name, qt_resource_data
     )
 
 
 qInitResources()
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/data_viewer/anatomist_2/snd_window.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/data_viewer/anatomist_2/snd_window.py`

 * *Files 10% similar despite different names*

```diff
@@ -1,20 +1,38 @@
 # -*- coding: utf-8 -*-
+"""Open a new window for a selected object with only one view possible."""
+
+###############################################################################
+# Populse_mia - Copyright (C) IRMaGe/CEA, 2018
+# Distributed under the terms of the CeCILL license, as published by
+# the CEA-CNRS-INRIA. Refer to the LICENSE file or to
+# http://www.cecill.info/licences/Licence_CeCILL_V2.1-en.html
+# for details.
+###############################################################################
+
 import os
 
-import anatomist.direct.api as ana
+try:
+    import anatomist.direct.api as ana
+
+except ImportError:
+    print(
+        "\nAnatomist seems not to be installed. The data_viewer anatomist "
+        "and anatomist_2 will not work...\n"
+    )
+
 from soma.qt_gui.qt_backend import Qt, QtCore, QtGui
 from soma.qt_gui.qt_backend.uic import loadUi
 
 
 class NewWindowViewer(QtGui.QMainWindow):
     """
-    Class defined to open a new window for a selected object with only one view possible
-    The user will be able to choose which view he wants to display (axial,
-    sagittal, coronal view or 3D view)
+    Class defined to open a new window for a selected object with only one
+    view possible. The user will be able to choose which view he wants to
+    display (axial, sagittal, coronal view or 3D view)
     """
 
     def __init__(self):
         QtGui.QMainWindow.__init__(self, None, QtCore.Qt.WindowStaysOnTopHint)
 
         # Load ui file
         uifile = "second_window.ui"
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/data_viewer/data_viewer.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/data_viewer/data_viewer.py`

 * *Files 6% similar despite different names*

```diff
@@ -6,18 +6,19 @@
 Data viewers are supposed to inherit :class:`DataViewer` and implement (at
 least) its methods. A data viewer is given a project and documents list, and is
 thus allowed to access databasing features and documents attributes.
 
 Coding a data viewer
 --------------------
 
-A data viewer is identified after its module name, and is currently searched for
-as a submodule of :mod:`populse_mia.user_interface.data_viewer`. The data viewer
-module may be implemented as a "regular" module (.py file) or a package
-(directory) and should contain at least a class named ``MiaViewer`` which:
+A data viewer is identified after its module name, and is currently searched
+for as a submodule of :mod:`populse_mia.user_interface.data_viewer`. The
+data viewer module may be implemented as a "regular" module (.py file) or a
+package (directory) and should contain at least a
+class named ``MiaViewer`` which:
 
   - is a Qt ``QWidget`` (inherits ``QWidget`` as 1st inheritance as is required
     by Qt)
   - implements the :class:`DataViewer` API (normally by inheriting it as second
     inheritance after ``QWidget`` but this is not technically required if the
     API is implemented)
 
@@ -36,23 +37,25 @@
     remove given files.
     """
 
     def display_files(self, files):
         """
         Display the selected document files
         """
+
         raise NotImplementedError(
             "display_files is abstract and should be overloaded in data "
             "viewer implementations"
         )
 
     def clear(self):
         """
         Hide / unload all displayed documents
         """
+
         self.remove_files(self.displayed_files())
 
     def displayed_files(self):
         """
         Get the list of displayed files
         """
         raise NotImplementedError(
@@ -60,23 +63,27 @@
             "viewer implementations"
         )
 
     def remove_files(self, files):
         """
         Remove documents from the displayed ones (hide, unload...)
         """
+
         raise NotImplementedError(
             "remove_files is abstract and should be overloaded in data "
             "viewer implementations"
         )
 
     def set_documents(self, projet, documents):
         """
         Sets the project and list of possible documents
         """
+
         raise NotImplementedError(
             "set_documents is abstract and should be overloaded in data "
             "viewer implementations"
         )
 
     def close(self):
+        """Blabla"""
+
         self.clear()
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/data_viewer/data_viewer_tab.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/data_viewer/data_viewer_tab.py`

 * *Files 1% similar despite different names*

```diff
@@ -14,18 +14,20 @@
 
 from soma.qt_gui.qt_backend import Qt
 
 
 class DataViewerTab(Qt.QWidget):
     """
     DataViewerTab is the widget in the data viewer tab of Populse-MIA GUI.
+
     A combobox containing the available viewers will always appear.
     If import of viewers fails, it won't impact the work of Mia itself.
     Viewers are put in Qt.QStackedLayout in order to share a same project.
-    A new viewer can be added simply by placing it in the data_viewer directory.
+    A new viewer can be added simply by placing it in the
+    data_viewer directory.
     """
 
     def __init__(self, main_window):
         """The constructor ...
 
         :param main_window: an instance of the MainWindow class
         """
@@ -126,17 +128,15 @@
             self.stacks = Qt.QStackedLayout()
             self.lay.addLayout(self.stacks)
 
         init_global_handlers = True
 
         # Try import detected viewers
         for viewer_name in detected_viewer:
-
             if viewer_name not in self.viewers_loaded:
-
                 try:
                     viewer_module = importlib.import_module(
                         "%s.%s" % (__name__.rsplit(".", 1)[0], viewer_name)
                     )
                     self.viewers_loaded[viewer_name] = viewer_module.MiaViewer(
                         init_global_handlers
                     )
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/main_window.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/main_window.py`

 * *Files 2% similar despite different names*

```diff
@@ -28,41 +28,61 @@
 import webbrowser
 from datetime import datetime
 from os.path import expanduser
 
 import yaml
 from packaging import version
 from PyQt5.QtCore import QCoreApplication, Qt
+
 # PyQt5 imports
 from PyQt5.QtGui import QCursor, QIcon
-from PyQt5.QtWidgets import (QAction, QApplication, QLabel, QMainWindow, QMenu,
-                             QMessageBox, QPushButton, QTabWidget, QVBoxLayout,
-                             QWidget)
+from PyQt5.QtWidgets import (
+    QAction,
+    QApplication,
+    QMainWindow,
+    QMenu,
+    QMessageBox,
+    QPushButton,
+    QTabWidget,
+    QVBoxLayout,
+    QWidget,
+)
 
 import populse_mia.data_manager.data_loader as data_loader
-from populse_mia.data_manager.project import (COLLECTION_CURRENT, TAG_HISTORY,
-                                              Project)
+from populse_mia.data_manager.project import (
+    COLLECTION_CURRENT,
+    TAG_HISTORY,
+    Project,
+)
+
 # Populse_MIA imports
 from populse_mia.data_manager.project_properties import SavedProjects
 from populse_mia.software_properties import Config
 from populse_mia.user_interface.data_browser.data_browser import DataBrowser
-from populse_mia.user_interface.data_viewer.data_viewer_tab import \
-    DataViewerTab
-from populse_mia.user_interface.pipeline_manager.pipeline_manager_tab import \
-    PipelineManagerTab
+from populse_mia.user_interface.data_viewer.data_viewer_tab import (
+    DataViewerTab,
+)
+from populse_mia.user_interface.pipeline_manager.pipeline_manager_tab import (
+    PipelineManagerTab,
+)
 from populse_mia.user_interface.pipeline_manager.process_library import (
-    InstallProcesses, PackageLibraryDialog)
-from populse_mia.user_interface.pop_ups import (PopUpDeletedProject,
-                                                PopUpDeleteProject,
-                                                PopUpNewProject,
-                                                PopUpOpenProject,
-                                                PopUpPreferences,
-                                                PopUpProperties, PopUpQuit,
-                                                PopUpSaveProjectAs,
-                                                PopUpSeeAllProjects)
+    InstallProcesses,
+    PackageLibraryDialog,
+)
+from populse_mia.user_interface.pop_ups import (
+    PopUpDeletedProject,
+    PopUpDeleteProject,
+    PopUpNewProject,
+    PopUpOpenProject,
+    PopUpPreferences,
+    PopUpProperties,
+    PopUpQuit,
+    PopUpSaveProjectAs,
+    PopUpSeeAllProjects,
+)
 
 CLINICAL_TAGS = [
     "Site",
     "Spectro",
     "MR",
     "PatientRef",
     "Pathology",
@@ -81,23 +101,27 @@
     """Used by open_shell."""
 
     def __init__(self, o):
         threading.Thread.__init__(self)
         self.o = o
 
     def __del__(self):
+        """Blabla"""
+
         try:
             self.o.kill()
         except Exception:
             pass
         if getattr(self, "console", False):
             global console_shell_running
             console_shell_running = False
 
     def run(self):
+        """Blabla"""
+
         try:
             self.o.communicate()
         except Exception as e:
             print("exception in ipython process:", e)
         global _ipsubprocs
         try:
             with _ipsubprocs_lock:
@@ -264,17 +288,21 @@
         else:
             size = self.config.get_mainwindow_size()
             if size:
                 self.resize(size[0], size[1])
 
     @staticmethod
     def last_window_closed():
-        # if the ipython console has been run, something prevents Qt from
-        # quitting after the window is closed. The cause is not known yet.
-        # so: force exit the event loop.
+        """Force exit the event loop after ipython console is closed.
+
+        If the ipython console has been run, something prevents Qt from
+        quitting after the window is closed. The cause is not known yet.
+        So: force exit the event loop.
+        """
+
         from soma.qt_gui.qt_backend import Qt
 
         Qt.QTimer.singleShot(10, Qt.qApp.exit)
 
     def add_clinical_tags(self):
         """Add the clinical tags to the database and the data browser"""
 
@@ -579,33 +607,31 @@
                 self.msg.setInformativeText(
                     "The projects folder path in MIA preferences is invalid!"
                 )
                 self.msg.setWindowTitle("Error")
                 yes_button = self.msg.addButton(
                     "Open MIA preferences", QMessageBox.YesRole
                 )
-                ok_button = self.msg.addButton(QMessageBox.Ok)
+                self.msg.addButton(QMessageBox.Ok)
                 self.msg.exec()
 
                 if self.msg.clickedButton() == yes_button:
                     self.software_preferences_pop_up()
                     self.msg.close()
 
                 else:
                     self.msg.close()
 
             else:
-
                 if self.exPopup.exec():
-
                     self.exPopup.get_filename(self.exPopup.selectedFiles())
                     file_name = self.exPopup.relative_path
 
-                    # Removing the old project from the list of currently opened
-                    # projects
+                    # Removing the old project from the list of
+                    # currently opened projects
                     config = Config()
                     opened_projects = config.get_opened_projects()
                     opened_projects.remove(self.project.folder)
                     config.set_opened_projects(opened_projects)
                     config.saveConfig()
 
                     self.remove_raw_files_useless()  # We remove the useless
@@ -668,15 +694,15 @@
             self.msg.setInformativeText(
                 "The projects folder path in MIA preferences is invalid!"
             )
             self.msg.setWindowTitle("Error")
             yes_button = self.msg.addButton(
                 "Open MIA preferences", QMessageBox.YesRole
             )
-            ok_button = self.msg.addButton(QMessageBox.Ok)
+            self.msg.addButton(QMessageBox.Ok)
             self.msg.exec()
 
             if self.msg.clickedButton() == yes_button:
                 self.software_preferences_pop_up()
                 self.msg.close()
 
             else:
@@ -785,18 +811,17 @@
             self.project.unsavedModifications = True
 
         elif code_exit == 100:  # User only close mri_conv and do nothing
             pass
 
         else:
             print(
-                "\nmri_conv, did not work properly. Current absolute path to "
-                "MRIManager.jar defined in File > MIA Preferences:\n{0}\n".format(
-                    config.get_mri_conv_path()
-                )
+                "\nmri_conv, did not work properly. Current absolute"
+                "path to MRIManager.jar defined in File > MIA Preferences:"
+                "\n{0}\n".format(config.get_mri_conv_path())
             )
 
             if not os.path.isfile(config.get_mri_conv_path()):
                 mssgText = (
                     "Warning: mri_conv did not work properly. The "
                     "current absolute path to MRIManager.jar doesn't "
                     "seem to be correctly defined.\nCurrent absolute "
@@ -822,28 +847,26 @@
             msg.exec()
 
     def open_project_pop_up(self):
         """Open a pop-up to open a project and updates the recent projects."""
         # Ui_Dialog() is defined in pop_ups.py
         # We check for unsaved modifications
         if self.check_unsaved_modifications():
-
             # If there are unsaved modifications, we ask the user what he
             # wants to do
             self.pop_up_close = PopUpQuit(self.project)
             self.pop_up_close.save_as_signal.connect(self.saveChoice)
             self.pop_up_close.exec()
             can_switch = self.pop_up_close.can_exit()
 
         else:
             can_switch = True
 
         # We can open a new project
         if can_switch:
-
             try:
                 self.exPopup = PopUpOpenProject()
 
             except Exception as e:
                 print("\nopen_project_pop_up: ", e)
                 self.msg = QMessageBox()
                 self.msg.setIcon(QMessageBox.Critical)
@@ -851,48 +874,59 @@
                 self.msg.setInformativeText(
                     "The projects folder path in MIA preferences is invalid!"
                 )
                 self.msg.setWindowTitle("Error")
                 yes_button = self.msg.addButton(
                     "Open MIA preferences", QMessageBox.YesRole
                 )
-                ok_button = self.msg.addButton(QMessageBox.Ok)
+                self.msg.addButton(QMessageBox.Ok)
                 self.msg.exec()
 
                 if self.msg.clickedButton() == yes_button:
                     self.software_preferences_pop_up()
                     self.msg.close()
 
                 else:
                     self.msg.close()
 
             else:
-
                 if self.exPopup.exec():
                     file_name = self.exPopup.selectedFiles()
                     self.exPopup.get_filename(file_name)
                     file_name = self.exPopup.relative_path
                     self.data_browser.data_sent = False
+
                     # We switch the project
                     self.switch_project(file_name, self.exPopup.name)
                     field_names = self.project.session.get_fields_names(
                         COLLECTION_CURRENT
                     )
 
                     if all(ele in field_names for ele in CLINICAL_TAGS):
                         Config().set_clinical_mode(True)
 
                     else:
                         Config().set_clinical_mode(False)
 
+                    # Update the history and brick tables in the newly opened
+                    # project, if it comes from outside.
+                    path_name = os.path.join(
+                        os.path.abspath(os.path.normpath(file_name)), ""
+                    )
+                    projectsPath = os.path.join(
+                        os.path.abspath(self.config.getPathToProjectsFolder()),
+                        "",
+                    )
+                    if path_name != projectsPath:
+                        self.project.update_db_for_paths(path_name)
+
     def open_recent_project(self):
         """Open a recent project."""
         # We check for unsaved modifications
         if self.check_unsaved_modifications():
-
             # If there are unsaved modifications, we ask the user what he
             # wants to do
             self.pop_up_close = PopUpQuit(self.project)
             self.pop_up_close.save_as_signal.connect(self.saveChoice)
             self.pop_up_close.exec()
             can_switch = self.pop_up_close.can_exit()
 
@@ -966,90 +1000,95 @@
             # In Pipeline Manager
             self.pipeline_manager.redo()
 
     def remove_raw_files_useless(self):
         """Remove the useless raw files of the current project, close the
         database connection. The project is not valid any longer after this
         call."""
+
         folder = self.project.folder
 
         # If it's unnamed project, we can remove the whole project
         if self.project.isTempProject:
             # close database, and files
             self.project.session = None
             self.project.database.__exit__(None, None, None)
             self.project.database = None
             shutil.rmtree(folder)
 
         else:
-
-            for filename in glob.glob(
-                os.path.join(os.path.abspath(folder), "data", "raw_data", "*")
-            ):
-                scan = os.path.basename(filename)
-                # The file is removed only if it's not a scan in the project,
-                # and if it's not a logExport
-                # Json files associated to nii files are kept for the raw_
-                # data folder
-                file_name, file_extension = os.path.splitext(scan)
-                file_in_database = False
-
-                for database_scan in self.project.session.get_documents_names(
-                    COLLECTION_CURRENT
-                ):
-
-                    if file_name in database_scan:
-                        file_in_database = True
-
-                if "logExport" in scan:
-                    file_in_database = True
-
-                # I don't understand why files from raw_data are automatically
-                # transferred to derived_data. I comment on this feature in the
-                # next 3 lines. We can uncomment if this action makes sense ...
-                # if not file_in_database:
-                #    os.rename(filename, filename.replace("raw_data",
-                #                                         "derived_data"))
+            # I don't understand why files from raw_data are automatically
+            # transferred to derived_data, if they are not in db. I comment
+            # on this feature in the following lines. We can uncomment if
+            # this action makes sense ...
+            # for filename in glob.glob(
+            #    os.path.join(os.path.abspath(folder), "data", "raw_data", "*")
+            # ):
+            #    scan = os.path.basename(filename)
+            #    # The file is removed only if it's not a scan in the project,
+            #    # and if it's not a logExport
+            #    # Json files associated to nii files are kept for the raw_
+            #    # data folder
+            #    file_name, file_extension = os.path.splitext(scan)
+            #    file_in_database = False
+            #
+            #    for database_scan in self.project.session.get_documents_names(
+            #        COLLECTION_CURRENT
+            #    ):
+            #        if file_name in database_scan:
+            #            file_in_database = True
+            #
+            #    if "logExport" in scan:
+            #        file_in_database = True
+            #
+            #    if not file_in_database:
+            #        os.rename(filename, filename.replace("raw_data",
+            #                                             "derived_data"))
+
+            # I don't understand why files from derived_data are automatically
+            # deleted if they are not in db. I comment on this feature in the
+            # following lines. We can uncomment if this action makes sense ...
             # for filename in glob.glob(
             #         os.path.join(os.path.relpath(
             #             self.project.folder), 'data', 'derived_data', '*')):
             #     scan = os.path.basename(filename)
             #     # The file is removed only if it's not a scan in the project,
             #     # and if it's not a logExport
             #     if (self.project.session.get_document(
             #             COLLECTION_CURRENT, os.path.join(
             #                 "data", "derived_data", scan)) is None and
             #             "logExport" not in scan):
             #         os.remove(filename)
-            for filename in glob.glob(
-                os.path.join(
-                    os.path.abspath(self.project.folder),
-                    "data",
-                    "downloaded_data",
-                    "*",
-                )
-            ):
-                scan = os.path.basename(filename)
 
-                # The file is removed only if it's not a scan in the project,
-                # and if it's not a logExport
-                if (
-                    self.project.session.get_document(
-                        COLLECTION_CURRENT,
-                        os.path.join("data", "downloaded_data", scan),
-                    )
-                    is None
-                    and "logExport" not in scan
-                ):
-                    # I don't understand why files in downloaded_data are
-                    # automatically deleted. I comment on this feature in the
-                    # following line. We can uncomment if this action
-                    # makes sense...
-                    # os.remove(filename)
-                    self.project.unsavedModifications = True
+            # I don't understand why files in downloaded_data are
+            # automatically deleted if they are not in db. I comment on this
+            # feature in the following line. We can uncomment if this action
+            # makes sense...
+            # for filename in glob.glob(
+            #     os.path.join(
+            #        os.path.abspath(self.project.folder),
+            #        "data",
+            #        "downloaded_data",
+            #        "*",
+            #    )
+            # ):
+            #    scan = os.path.basename(filename)
+            #
+            #    # The file is removed only if it's not a scan in the project,
+            #    # and if it's not a logExport
+            #    if (
+            #        self.project.session.get_document(
+            #            COLLECTION_CURRENT,
+            #            os.path.join("data", "downloaded_data", scan),
+            #        )
+            #        is None
+            #        and "logExport" not in scan
+            #    ):
+            #        os.remove(filename)
+            #        self.project.unsavedModifications = True
 
             # close database, and files
             self.project.session = None
             self.project.database.__exit__(None, None, None)
             self.project.database = None
 
         self.project = None
@@ -1100,26 +1139,25 @@
             self.msg.setInformativeText(
                 "The projects folder path in MIA preferences is invalid!"
             )
             self.msg.setWindowTitle("Error")
             yes_button = self.msg.addButton(
                 "Open MIA preferences", QMessageBox.YesRole
             )
-            ok_button = self.msg.addButton(QMessageBox.Ok)
+            self.msg.addButton(QMessageBox.Ok)
             self.msg.exec()
 
             if self.msg.clickedButton() == yes_button:
                 self.software_preferences_pop_up()
                 self.msg.close()
 
             else:
                 self.msg.close()
 
         else:
-
             if self.test:
                 self.exPopup.exec = lambda x=0: True
                 self.exPopup.validate = True
                 self.exPopup.new_project.text = lambda x=0: "something"
                 self.exPopup.return_value()
 
             self.exPopup.exec()
@@ -1137,69 +1175,70 @@
 
                 database_path = os.path.join(as_folder, "database")
                 properties_path = os.path.join(as_folder, "properties")
                 filters_path = os.path.join(as_folder, "filters")
                 data_path = os.path.join(as_folder, "data")
 
                 raw_data_path = os.path.join(data_path, "raw_data")
-                derived_data_path = os.path.join(data_path, "derived_data")
                 downloaded_data_path = os.path.join(
                     data_path, "downloaded_data"
                 )
 
                 # List of projects updated
                 if not self.test:
                     self.saved_projects_list = (
                         self.saved_projects
                     ).addSavedProject(as_folder_rel)
                 self.update_recent_projects_actions()
 
                 if os.path.exists(as_folder_rel):
-                    # Prevent by a carefull message
+                    # Prevent by a careful message
                     # see PopUpSaveProjectAs/return_value
                     # in admin mode only
                     shutil.rmtree(as_folder_rel)
 
                 if not os.path.exists(as_folder_rel):
                     os.makedirs(as_folder_rel)
                     os.mkdir(data_path)
                     os.mkdir(raw_data_path)
-                    os.mkdir(derived_data_path)
+                    # os.mkdir(derived_data_path)
                     os.mkdir(downloaded_data_path)
                     os.mkdir(filters_path)
 
                 # Data files copied
                 if os.path.exists(os.path.join(old_folder_rel, "data")):
-
                     for filename in glob.glob(
                         os.path.join(old_folder, "data", "raw_data", "*")
                     ):
                         shutil.copy(
                             filename, os.path.join(data_path, "raw_data")
                         )
 
-                    for filename in glob.glob(
-                        os.path.join(old_folder, "data", "derived_data", "*")
-                    ):
-                        shutil.copy(
-                            filename, os.path.join(data_path, "derived_data")
-                        )
+                    # for filename in glob.glob(
+                    #     os.path.join(old_folder, "data", "derived_data", "*")
+                    # ):
+                    #     shutil.copy(
+                    #         filename, os.path.join(data_path, "derived_data")
+                    #     )
+                    shutil.copytree(
+                        os.path.join(old_folder, "data", "derived_data"),
+                        os.path.join(data_path, "derived_data"),
+                    )
 
                     for filename in glob.glob(
                         os.path.join(
                             old_folder, "data", "downloaded_data", "*"
                         )
                     ):
                         shutil.copy(
                             filename,
                             os.path.join(data_path, "downloaded_data"),
                         )
 
                 if os.path.exists(os.path.join(old_folder_rel, "filters")):
-
                     for filename in glob.glob(
                         os.path.join(old_folder, "filters", "*")
                     ):
                         shutil.copy(filename, os.path.join(filters_path))
 
                 # First we register the Database before commiting the last
                 # pending modifications
@@ -1239,16 +1278,16 @@
                 config.set_opened_projects(opened_projects)
                 config.saveConfig()
 
                 # We remove the useless files from the old project
                 self.remove_raw_files_useless()
 
                 if reset_old_db:
-                    # We remove the Database with all the modifications saved in
-                    # the old project
+                    # We remove the Database with all the modifications saved
+                    # in the old project
                     os.remove(os.path.join(old_folder, "database", "mia.db"))
 
                     # We reput the Database without the last modifications
                     # in the old project
                     shutil.copy(
                         os.path.join(
                             old_folder, "database", "mia_before_commit.db"
@@ -1286,14 +1325,18 @@
                         "again before they can run."
                     )
                     msg.setWindowTitle("Warning")
                     msg.setStandardButtons(QMessageBox.Ok)
                     msg.buttonClicked.connect(msg.close)
                     msg.exec()
 
+        # Update of the history and the brick table in the newly
+        # created project
+        self.project.update_db_for_paths()
+
     def saveChoice(self):
         """Check if the project needs to be 'saved as' or just 'saved'."""
         if self.project.isTempProject:
             self.save_project_as()
         else:
             self.project.saveModifications()
 
@@ -1337,38 +1380,42 @@
         # self.pop_up_preferences.signal_preferences_change.connect(
         #     self.update_package_library_action)
 
     def open_shell(self):
         """Open a Qt console shell with an IPython kernel seeing the program
         internals
         """
+
         from soma.qt_gui import qt_backend
 
         ipfunc = None
         mode = "qtconsole"
         print("startShell")
+
         try:
-            import jupyter_core.application
-            import qtconsole  # to check it is installed
+            # to check it is installed
+            import jupyter_core.application  # noqa: F401
+            import qtconsole  # noqa: F401
 
             ipfunc = (
                 "from jupyter_core import application; "
                 "app = application.JupyterApp(); app.initialize(); app.start()"
             )
+
         except ImportError:
             print("failed to run Qt console")
             return
 
         if ipfunc:
             import soma.subprocess
 
             ipConsole = self.run_ipconsole_kernel(mode)
+
             if ipConsole:
                 global _ipsubprocs
-
                 qt_api = qt_backend.get_qt_backend()
                 qt_apis = {
                     "PyQt4": "pyqt",
                     "PyQt5": "pyqt5",
                     "PySide": "pyside",
                 }
                 qt_api_code = qt_apis.get(qt_api, "pyq5t")
@@ -1394,70 +1441,80 @@
                 # otherwise
                 QApplication.instance().lastWindowClosed.connect(
                     self.last_window_closed
                 )
 
     @staticmethod
     def run_ipconsole_kernel(mode="qtconsole"):
+        """blabla"""
+
         print("run_ipconsole_kernel:", mode)
-        import IPython
+        import IPython  # noqa: F401
         from IPython.lib import guisupport
         from soma.qt_gui.qt_backend import Qt
 
         qtapp = Qt.QApplication.instance()
         qtapp._in_event_loop = True
         guisupport.in_event_loop = True
-        ipversion = [int(x) for x in IPython.__version__.split(".")]
+        # ipversion = [int(x) for x in IPython.__version__.split(".")]
 
         from ipykernel.kernelapp import IPKernelApp
 
         app = IPKernelApp.instance()
+
         if not app.initialized() or not app.kernel:
             print("runing IP console kernel")
             app.hb_port = 50042  # don't know why this is not set automatically
             app.initialize(
                 [
                     mode,
                     "--gui=qt",  # '--pylab=qt',
                     "--KernelApp.parent_appname='ipython-%s'" % mode,
                 ]
             )
             # in ipython >= 1.2, app.start() blocks until a ctrl-c is issued in
             # the terminal. Seems to block in tornado.ioloop.PollIOLoop.start()
             #
-            # So, don't call app.start because it would begin a zmq/tornado loop
-            # instead we must just initialize its callback.
+            # So, don't call app.start because it would begin a zmq/tornado
+            # loop instead we must just initialize its callback.
             # if app.poller is not None:
             # app.poller.start()
             app.kernel.start()
 
             # IP 2 allows just calling the current callbacks.
             # For IP 1 it is not sufficient.
             import tornado
             from zmq.eventloop import ioloop
 
             if tornado.version_info >= (4, 5):
                 # tornado 5 is using a decque for _callbacks, not a
                 # list + explicit locking
+
                 def my_start_ioloop_callbacks(self):
+                    """Blabla"""
+
                     if hasattr(self, "_callbacks"):
                         ncallbacks = len(self._callbacks)
                         for i in range(ncallbacks):
                             self._run_callback(self._callbacks.popleft())
 
             else:
 
                 def my_start_ioloop_callbacks(self):
+                    """Blabla"""
+
                     with self._callback_lock:
                         callbacks = self._callbacks
                         self._callbacks = []
+
                     for callback in callbacks:
                         self._run_callback(callback)
 
             my_start_ioloop_callbacks(ioloop.IOLoop.instance())
+
         return app
 
     def switch_project(self, file_path, name):
         """Check if it's possible to open the selected project
         and quit the current one.
 
         :param file_path: raw file_path
@@ -1465,18 +1522,16 @@
 
         :return: Boolean
         """
         # /!\ file_path and path are the same param
 
         # Switching project only if it's a different one
         if file_path != self.project.folder:
-
             # If the file exists
             if os.path.exists(os.path.join(file_path)):
-
                 # If it is a MIA project
                 if (
                     os.path.exists(
                         os.path.join(file_path, "properties", "properties.yml")
                     )
                     and os.path.exists(
                         os.path.join(file_path, "database", "mia.db")
@@ -1488,24 +1543,22 @@
                         os.path.join(file_path, "data", "derived_data")
                     )
                     and os.path.exists(
                         os.path.join(file_path, "data", "downloaded_data")
                     )
                     and os.path.exists(os.path.join(file_path, "filters"))
                 ):
-
                     # We check if the name of the project directory is the
                     # same in its properties
                     with open(
                         os.path.join(
                             file_path, "properties", "properties.yml"
                         ),
                         "r+",
                     ) as stream:
-
                         if version.parse(yaml.__version__) > version.parse(
                             "5.1"
                         ):
                             properties = yaml.load(
                                 stream, Loader=yaml.FullLoader
                             )
 
@@ -1689,20 +1742,25 @@
                     COLLECTION_CURRENT
                 )
                 self.pipeline_manager.scan_list = scans
                 self.pipeline_manager.nodeController.scan_list = scans
                 self.pipeline_manager.pipelineEditorTabs.scan_list = scans
             self.pipeline_manager.pipelineEditorTabs.update_scans_list()
             self.pipeline_manager.update_user_buttons_states()
+
+            # fmt: off
             if (
-                self.pipeline_manager.pipelineEditorTabs.get_current_editor().iterated_tag
+                self.pipeline_manager.pipelineEditorTabs.
+                    get_current_editor().iterated_tag
             ):
                 self.pipeline_manager.iterationTable.update_iterated_tag(
-                    self.pipeline_manager.pipelineEditorTabs.get_current_editor().iterated_tag
+                    self.pipeline_manager.pipelineEditorTabs.
+                    get_current_editor().iterated_tag
                 )
+            # fmt: on
 
             # Pipeline Manager
             # The pending modifications must be saved before
             # working with pipelines (auto_commit)
             if self.project.hasUnsavedModifications():
                 msg = QMessageBox()
                 msg.setIcon(QMessageBox.Warning)
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/pipeline_manager/__init__.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/pipeline_manager/__init__.py`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/pipeline_manager/iteration_table.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/pipeline_manager/iteration_table.py`

 * *Files 12% similar despite different names*

```diff
@@ -17,44 +17,56 @@
 
 
 import os
 
 # PyQt5 imports
 from PyQt5.QtCore import pyqtSignal
 from PyQt5.QtGui import QPixmap
-from PyQt5.QtWidgets import (QCheckBox, QComboBox, QHBoxLayout, QLabel,
-                             QPushButton, QTableWidget, QTableWidgetItem,
-                             QVBoxLayout, QWidget)
+from PyQt5.QtWidgets import (
+    QCheckBox,
+    QComboBox,
+    QHBoxLayout,
+    QLabel,
+    QPushButton,
+    QTableWidget,
+    QTableWidgetItem,
+    QVBoxLayout,
+    QWidget,
+)
 
 from populse_mia.data_manager.project import COLLECTION_CURRENT, TAG_FILENAME
 from populse_mia.software_properties import Config
+
 # MIA imports
 from populse_mia.user_interface.pipeline_manager.process_mia import ProcessMIA
-from populse_mia.user_interface.pop_ups import (ClickableLabel,
-                                                PopUpSelectIteration,
-                                                PopUpSelectTagCountTable)
+from populse_mia.user_interface.pop_ups import (
+    ClickableLabel,
+    PopUpSelectIteration,
+    PopUpSelectTagCountTable,
+)
 
 
 class IterationTable(QWidget):
     """Widget that handles pipeline iteration.
 
     .. Methods:
         - add_tag: adds a tag to visualize in the iteration table
         - emit_iteration_table_updated: emits a signal when the iteration
-           scans have been updated
+                                        scans have been updated
         - fill_values: fill values_list depending on the visualized tags
         - refresh_layout: updates the layout of the widget
         - remove_tag: removes a tag to visualize in the iteration table
         - select_iterated_tag: opens a pop-up to let the user select on which
-           tag to iterate
+                               tag to iterate
         - select_visualized_tag: opens a pop-up to let the user select which
-           tag to visualize in the iteration table
+                                 tag to visualize in the iteration table
         - update_iterated_tag: updates the widget
         - update_table: updates the iteration table
-        - update_selected_tag: updates the selected tag for current pipeline manager tab
+        - update_selected_tag: updates the selected tag for current pipeline
+                               manager tab
 
     """
 
     iteration_table_updated = pyqtSignal(list, list)
 
     def __init__(self, project, scan_list, main_window):
         """
@@ -269,55 +281,69 @@
             del self.values_list[-1]
             self.refresh_layout()
             self.update_table()
 
     def select_iteration_tag(self):
         """Open a pop-up to let the user select on which tag to iterate."""
 
+        # fmt: off
         ui_select = PopUpSelectTagCountTable(
             self.project,
             self.project.session.get_fields_names(COLLECTION_CURRENT),
-            self.main_window.pipeline_manager.pipelineEditorTabs.get_current_editor().iterated_tag,
+            self.main_window.pipeline_manager.pipelineEditorTabs.
+            get_current_editor().iterated_tag,
         )
+        # fmt: on
 
         if ui_select.exec_():
-
+            # fmt: off
             if (
-                self.main_window.pipeline_manager.pipelineEditorTabs.get_current_editor().iterated_tag
-                is None
+                self.main_window.pipeline_manager.pipelineEditorTabs.
+                get_current_editor().iterated_tag is None
                 and ui_select.selected_tag is None
             ):
+                # fmt: on
                 pass
 
             else:
-                self.main_window.pipeline_manager.pipelineEditorTabs.get_current_editor().iterated_tag = (
-                    ui_select.selected_tag
-                )
+                (self.main_window.pipeline_manager.pipelineEditorTabs.
+                 get_current_editor)().iterated_tag = ui_select.selected_tag
 
                 # Retrieve tag values
                 self.update_selected_tag(ui_select.selected_tag)
 
     def filter_values(self):
+        """blabla"""
+
+        # fmt: off
         iterated_tag = (
-            self.main_window.pipeline_manager.pipelineEditorTabs.get_current_editor().iterated_tag
+            self.main_window.pipeline_manager.pipelineEditorTabs.
+            get_current_editor().iterated_tag
         )
         tag_values = (
-            self.main_window.pipeline_manager.pipelineEditorTabs.get_current_editor().all_tag_values_list
+            self.main_window.pipeline_manager.pipelineEditorTabs.
+            get_current_editor().all_tag_values_list
         )
+        # fmt: on
+
         ui_iteration = PopUpSelectIteration(iterated_tag, tag_values)
+
         if ui_iteration.exec_():
             tag_values_list = [
                 t.replace("&", "") for t in ui_iteration.final_values
             ]
-            self.main_window.pipeline_manager.pipelineEditorTabs.get_current_editor().tag_values_list = (
-                tag_values_list
-            )
+            # fmt: off
+            (
+                self.main_window.pipeline_manager.pipelineEditorTabs.
+                get_current_editor
+            )().tag_values_list = tag_values_list
+            # fmt: on
+
             self.combo_box.clear()
             self.combo_box.addItems(tag_values_list)
-
             self.update_table()
 
     def select_visualized_tag(self, idx):
         """Open a pop-up to let the user select which tag to visualize in the
         iteration table.
 
         :param idx: index of the clicked push button
@@ -354,21 +380,24 @@
             self.iteration_table.clear()
             self.iteration_table.setColumnCount(len(self.push_buttons))
         else:
             self.iterated_tag_push_button.setText(tag_name)
             self.iterated_tag_label.setText(tag_name + ":")
 
             # duplicate the values list to have the initial, unfiltered, one
+            # fmt: off
             self.all_tag_values = list(
-                self.main_window.pipeline_manager.pipelineEditorTabs.get_current_editor().all_tag_values_list
+                self.main_window.pipeline_manager.pipelineEditorTabs.
+                get_current_editor().all_tag_values_list
             )
             self.combo_box.addItems(
-                self.main_window.pipeline_manager.pipelineEditorTabs.get_current_editor().tag_values_list
+                self.main_window.pipeline_manager.pipelineEditorTabs.
+                get_current_editor().tag_values_list
             )
-
+            # fmt: on
             self.update_table()
 
     def update_table(self):
         """
         Update the iteration table.
 
         """
@@ -379,44 +408,51 @@
                 COLLECTION_CURRENT
             )
 
         # Clearing the table and preparing its columns
         self.iteration_table.clear()
         self.iteration_table.setColumnCount(len(self.push_buttons))
 
+        # fmt: off
         if (
-            self.main_window.pipeline_manager.pipelineEditorTabs.get_current_editor().iterated_tag
+            self.main_window.pipeline_manager.pipelineEditorTabs.
+            get_current_editor().iterated_tag
             is not None
         ):
+            # fmt: on
             # Headers
             for idx in range(len(self.push_buttons)):
                 # FIXME should not use GUI text values !!
                 header_name = self.push_buttons[idx].text().replace("&", "")
                 if header_name not in self.project.session.get_fields_names(
                     COLLECTION_CURRENT
                 ):
                     print("{0} not in the project's tags".format(header_name))
                     return
 
                 item = QTableWidgetItem()
                 item.setText(header_name)
                 self.iteration_table.setHorizontalHeaderItem(idx, item)
 
-            # Searching the database scans that correspond to iterated tag value
+            # Searching the database scans that correspond to
+            # iterated tag value
+            # fmt: off
             filter_query = (
                 "({"
                 + str(
-                    self.main_window.pipeline_manager.pipelineEditorTabs.get_current_editor().iterated_tag
+                    self.main_window.pipeline_manager.pipelineEditorTabs.
+                    get_current_editor().iterated_tag
                 )
                 + "} "
                 + "=="
                 + ' "'
                 + str(self.combo_box.currentText()).replace("&", "")
                 + '")'
             )
+            # fmt: on
             scans_list = self.project.session.filter_documents(
                 COLLECTION_CURRENT, filter_query
             )
             scans_res = [
                 getattr(document, TAG_FILENAME) for document in scans_list
             ]
 
@@ -441,63 +477,81 @@
                                 COLLECTION_CURRENT, scan_name, tag_name
                             )
                         )
                     )
                     self.iteration_table.setItem(row, idx, item)
 
             all_iterations_scans = []
+
+            # fmt: off
             for (
                 tag_value
             ) in (
-                self.main_window.pipeline_manager.pipelineEditorTabs.get_current_editor().tag_values_list
+                self.main_window.pipeline_manager.pipelineEditorTabs.
+                get_current_editor().tag_values_list
             ):
-                # Searching the database scans that correspond to iterated tag value
+                # Searching the database scans that correspond to
+                # iterated tag value
                 filter_query = (
                     "({"
                     + str(
-                        self.main_window.pipeline_manager.pipelineEditorTabs.get_current_editor().iterated_tag
+                        self.main_window.pipeline_manager.pipelineEditorTabs.
+                        get_current_editor().iterated_tag
                     )
                     + "} "
                     + "=="
                     + ' "'
                     + str(tag_value)
                     + '")'
                 )
+                # fmt: on
                 scans_list = self.project.session.filter_documents(
                     COLLECTION_CURRENT, filter_query
                 )
                 scans_res = [
                     getattr(document, TAG_FILENAME) for document in scans_list
                 ]
                 all_iterations_scans.append(
                     list(set(scans_res).intersection(self.scan_list))
                 )
             self.all_iterations_scans = all_iterations_scans
             # self.scans = True
 
-            # This will change the scans list in the current Pipeline Manager tab
+            # This will change the scans list in the current
+            # Pipeline Manager tab
             self.iteration_table_updated.emit(
                 self.iteration_scans, self.all_iterations_scans
             )
 
     def update_selected_tag(self, selected_tag):
+        """blabla"""
+
         tag_values_list = []
         scans_names = self.project.session.get_documents_names(
             COLLECTION_CURRENT
         )
+
         if not self.scan_list:
             self.scan_list = scans_names
+
         scans_names = list(set(scans_names).intersection(self.scan_list))
+
         for scan_name in scans_names:
             tag_value = self.project.session.get_value(
                 COLLECTION_CURRENT, scan_name, selected_tag
             )
+
             if str(tag_value) not in tag_values_list:
                 tag_values_list.append(str(tag_value))
 
-        self.main_window.pipeline_manager.pipelineEditorTabs.get_current_editor().tag_values_list = (
-            tag_values_list
-        )
-        self.main_window.pipeline_manager.pipelineEditorTabs.get_current_editor().all_tag_values_list = (
-            tag_values_list
-        )
+        # fmt: off
+        (
+            self.main_window.pipeline_manager.pipelineEditorTabs.
+            get_current_editor
+        )().tag_values_list = tag_values_list
+
+        (
+            self.main_window.pipeline_manager.pipelineEditorTabs.
+            get_current_editor
+        )().all_tag_values_list = tag_values_list
+        # fmt: on
         self.update_iterated_tag(selected_tag)
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/pipeline_manager/node_controller.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/pipeline_manager/node_controller.py`

 * *Files 2% similar despite different names*

```diff
@@ -20,59 +20,84 @@
 ##########################################################################
 
 import os
 import sys
 from functools import partial
 
 import sip
-import six
-from capsul.attributes.completion_engine import ProcessCompletionEngine
+
 # capsul imports
+from capsul.attributes.completion_engine import ProcessCompletionEngine
 from capsul.pipeline.pipeline_nodes import PipelineNode
 from capsul.pipeline.process_iteration import ProcessIteration
-from capsul.qt_gui.widgets.attributed_process_widget import \
-    AttributedProcessWidget
+from capsul.qt_gui.widgets.attributed_process_widget import (
+    AttributedProcessWidget,
+)
 from matplotlib.backends.qt_compat import QtWidgets
+
 # PyQt5 imports
 from PyQt5 import Qt
 from PyQt5.QtCore import pyqtSignal
 from PyQt5.QtGui import QIcon
-from PyQt5.QtWidgets import (QApplication, QDialog, QDialogButtonBox,
-                             QGroupBox, QHBoxLayout, QLabel, QLineEdit,
-                             QMessageBox, QPushButton, QToolButton,
-                             QVBoxLayout, QWidget)
+from PyQt5.QtWidgets import (
+    QApplication,
+    QDialog,
+    QDialogButtonBox,
+    QGroupBox,
+    QHBoxLayout,
+    QLabel,
+    QLineEdit,
+    QMessageBox,
+    QPushButton,
+    QToolButton,
+    QVBoxLayout,
+    QWidget,
+)
+
 # soma-base imports
 from soma.controller import trait_ids
 from traits.api import TraitError, Undefined
 
 # Populse_MIA imports
 from populse_mia.data_manager.filter import Filter
-from populse_mia.data_manager.project import (COLLECTION_BRICK,
-                                              COLLECTION_CURRENT, TAG_FILENAME)
+from populse_mia.data_manager.project import (
+    COLLECTION_BRICK,
+    COLLECTION_CURRENT,
+    TAG_FILENAME,
+)
 from populse_mia.software_properties import Config
-from populse_mia.user_interface.data_browser.advanced_search import \
-    AdvancedSearch
+from populse_mia.user_interface.data_browser.advanced_search import (
+    AdvancedSearch,
+)
 from populse_mia.user_interface.data_browser.data_browser import (
-    TableDataBrowser, not_defined_value)
+    TableDataBrowser,
+    not_defined_value,
+)
 from populse_mia.user_interface.data_browser.rapid_search import RapidSearch
 from populse_mia.user_interface.pipeline_manager.process_mia import ProcessMIA
-from populse_mia.user_interface.pop_ups import (PopUpSelectTagCountTable,
-                                                PopUpVisualizedTags)
+from populse_mia.user_interface.pop_ups import (
+    PopUpSelectTagCountTable,
+    PopUpVisualizedTags,
+)
 
 from . import type_editors
 
 if sys.version_info[0] >= 3:
     unicode = str
 
     def values(d):
+        """blabla"""
+
         return list(d.values())
 
 else:
 
     def values(d):
+        """blabla"""
+
         return d.values()
 
 
 class PlugFilter(QWidget):
     """Filter widget used on a node plug.
 
     The widget displays a browser with the selected files of the database,
@@ -110,16 +135,17 @@
         :param plug_name: name of the selected node plug
         :param node_controller: parent node controller
         :param main_window: parent main window
         """
         super(PlugFilter, self).__init__(None)
 
         from populse_mia.data_manager.project import COLLECTION_CURRENT
-        from populse_mia.user_interface.data_browser.rapid_search import \
-            RapidSearch
+        from populse_mia.user_interface.data_browser.rapid_search import (
+            RapidSearch,
+        )
 
         self.project = project
         self.node_controller = node_controller
         self.main_window = main_window
         self.process = process
         self.plug_name = plug_name
 
@@ -484,32 +510,33 @@
 
         :param node_name: name of the node
         :param process: process of the node
         :param pipeline: current pipeline
         """
         self.node_name = node_name
         self.pipeline = pipeline
+
         # The pipeline global inputs and outputs node name cannot be modified
         if self.node_name not in ("inputs", "outputs"):
             self.line_edit_node_name.setText(self.node_name)
             self.line_edit_node_name.setReadOnly(False)
             self.line_edit_node_name.returnPressed.connect(
                 self.update_node_name
             )
         else:
             self.line_edit_node_name.setText("Pipeline inputs/outputs")
             self.line_edit_node_name.setReadOnly(True)
 
         if self.process_widget:
-            item = self.layout().takeAt(1)
+            # item = self.layout().takeAt(1)
             self.static_release(
                 self.process_widget.attributed_process, self.parameters_changed
             )
             self.process_widget.deleteLater()
-            del item
+            # del item
             self.process_widget = None
 
         # get the list of inputs connected from outputs of upstream nodes
         # in order to disable their "filter" file button
         node = pipeline.nodes.get(node_name)
         connected_inputs = set()
         if node is not None:
@@ -518,34 +545,36 @@
                     connected_inputs.add(plug_name)
 
         userlevel = Config().get_user_level()
         self.process = process
 
         # force initializing the completion engine
         ProcessCompletionEngine.get_completion_engine(process)
-
+        # fmt: off
         self.process_widget = AttributedProcessWidget(
             process,
             override_control_types={
                 "File": type_editors.PopulseFileControlWidget,
                 "Directory": type_editors.PopulseDirectoryControlWidget,
-                "List_File": type_editors.PopulseOffscreenListFileControlWidget,
+                "List_File": type_editors.
+                PopulseOffscreenListFileControlWidget,
                 "Undefined": type_editors.PopulseUndefinedControlWidget,
             },
             separate_outputs=True,
             user_data={
                 "project": self.project,
                 "scan_list": self.scan_list,
                 "main_window": self.main_window,
                 "node_controller": self,
                 "connected_inputs": connected_inputs,
             },
             scroll=False,
             userlevel=userlevel,
         )
+        # fmt: on
 
         if hasattr(process, "completion_engine"):
             compl = process.completion_engine
             atts = compl.get_attribute_values()
 
             if len(atts.user_traits()) != 0:
                 btn = QPushButton("Filter")
@@ -556,16 +585,18 @@
         self.layout().addWidget(self.process_widget)
         self.process.on_trait_change(self.parameters_changed, dispatch="ui")
         # this cannot be done in __del__ since the C++ part will be already
         # destroyed by then.
         # However this signal seems never to be emitted, and I don't understand
         # why. So release_process() has to be called manually from the
         # pipeline manager. Sigh.
-        # self.process_widget.destroyed.connect(partial(self.static_release, process,
-        #                               self.parameters_changed))
+        # self.process_widget.destroyed.connect(partial(
+        #                                             self.static_release,
+        #                                             process,
+        #                                             self.parameters_changed))
 
     @staticmethod
     def static_release(process, param_changed):
         """Remove notification"""
         process.on_trait_change(param_changed, remove=True)
 
     def release_process(self):
@@ -628,17 +659,14 @@
         """
         if not new_node_name:
             new_node_name = self.line_edit_node_name.text()
 
         if not old_node_name:
             old_node_name = self.node_name
 
-        # Copying the old node
-        old_node = self.pipeline.nodes[old_node_name]
-
         if isinstance(self.process, ProcessIteration):
             if not new_node_name.startswith("iterated_"):
                 new_node_name = "iterated_" + new_node_name
                 self.line_edit_node_name.setText(new_node_name)
 
         if new_node_name in list(self.pipeline.nodes.keys()):
             print(
@@ -668,34 +696,37 @@
                 ]
             )
 
             # For history
             history_maker = ["update_node_name"]
 
             if from_undo:
-
                 # TODO: next line is strange!
                 history_maker.append
 
             else:
                 history_maker.append(self.pipeline.nodes[new_node_name])
                 history_maker.append(new_node_name)
                 history_maker.append(old_node_name)
-
+            # fmt:off
             (
-                self.main_window.pipeline_manager.pipelineEditorTabs.get_current_editor().update_history
+                self.main_window.pipeline_manager.pipelineEditorTabs.
+                get_current_editor().update_history
             )(history_maker, from_undo, from_redo)
+            # fmt: on
 
             self.main_window.statusBar().showMessage(
                 'Node name "{0}" has been changed to "{1}".'.format(
                     old_node_name, new_node_name
                 )
             )
 
     def rename_subprocesses(self, node, parent_node_name):
+        """blabla"""
+
         if node.process.context_name.split(".")[0] == "Pipeline":
             if len(node.process.context_name.split(".")) >= 3:
                 node.process.context_name = (
                     "Pipeline."
                     + parent_node_name
                     + "."
                     + ".".join(node.process.context_name.split(".")[2:])
@@ -730,15 +761,14 @@
 
     def update_attributes_from_filter(self, attributes):
         """Update attributes from filter widger"""
         compl = self.process.completion_engine
         atts = compl.get_attribute_values()
         num_set = 0
         for name, value in attributes.items():
-
             if atts.trait(name):
                 if isinstance(getattr(atts, name), list):
                     setattr(atts, name, value)
 
                 else:
                     setattr(atts, name, value[0])
 
@@ -748,15 +778,15 @@
             mbox_icon = QMessageBox.Information
             mbox_title = "Unmatching tags / attributes"
             mbox_text = (
                 "The selected data tags do not match the expected "
                 "attributes set for process parameters completion"
             )
             mbox = QMessageBox(mbox_icon, mbox_title, mbox_text)
-            timer = Qt.QTimer.singleShot(2000, mbox.accept)
+            Qt.QTimer.singleShot(2000, mbox.accept)
             mbox.exec()
 
 
 class FilterWidget(QWidget):
     """Filter widget used on a Input_Filter process.
 
     The widget displays a browser with the selected files of the database,
@@ -1119,15 +1149,16 @@
             self.main_window,
         )
         self.pop_up.show()
         self.pop_up.plug_value_changed.connect(
             partial(self.update_plug_value_from_filter, plug_name, parameters)
         )
 
-    # def display_parameters(self, node_name: object, process: object, pipeline: object) -> object:
+    # def display_parameters(self, node_name: object,
+    #                        process: object, pipeline: object) -> object:
     def display_parameters(self, node_name, process, pipeline):
         """Display the parameters of the selected node.
 
         The node parameters are read and line labels/line edits/push buttons
         are created for each of them. This methods consists mainly in widget
         and layout organization.
 
@@ -1174,14 +1205,18 @@
         self.button_group_inputs = QGroupBox("Inputs")
         self.v_box_inputs = QVBoxLayout()
         idx = 0
 
         for name, trait in process.user_traits().items():
             if name == "nodes_activation":
                 continue
+
+            if trait.userlevel is not None and trait.userlevel > 0:
+                continue
+
             if not trait.output:
                 label_input = QLabel()
                 label_input.setText(str(name))
                 self.labels_input.insert(idx, label_input)
                 try:
                     value = getattr(process, name)
                 except TraitError:
@@ -1204,26 +1239,27 @@
                 h_box.addWidget(label_input)
                 h_box.addWidget(self.line_edit_input[idx])
 
                 # Adding the possibility to filter pipeline global
                 # inputs except if the input is "database_scans"
                 # which means that the scans will be filtered with InputFilter
                 if self.node_name == "inputs" and name != "database_scans":
-                    parameters = (idx, pipeline, type(value))
-                    push_button = QPushButton("Filter")
-                    push_button.clicked.connect(
-                        partial(
-                            self.display_filter,
-                            self.node_name,
-                            name,
-                            parameters,
-                            process,
+                    if "File" in trait_type or "List_File" in trait_type:
+                        parameters = (idx, pipeline, type(value))
+                        push_button = QPushButton("Filter")
+                        push_button.clicked.connect(
+                            partial(
+                                self.display_filter,
+                                self.node_name,
+                                name,
+                                parameters,
+                                process,
+                            )
                         )
-                    )
-                    h_box.addWidget(push_button)
+                        h_box.addWidget(push_button)
 
                 self.v_box_inputs.addLayout(h_box)
 
                 idx += 1
 
         self.button_group_inputs.setLayout(self.v_box_inputs)
 
@@ -1256,42 +1292,44 @@
             idx += 1
 
         self.button_group_outputs.setLayout(self.v_box_outputs)
 
         self.v_box_final.addLayout(self.h_box_node_name)
         self.v_box_final.addWidget(self.button_group_inputs)
         self.v_box_final.addWidget(self.button_group_outputs)
-
-        self.main_window.pipeline_manager.pipelineEditorTabs.get_current_editor().node_parameters_tmp[
-            node_name
-        ] = {}
-
-        self.main_window.pipeline_manager.pipelineEditorTabs.get_current_editor().node_parameters_tmp[
-            node_name
-        ][
-            "inputs"
-        ] = [
+        # fmt: off
+        (
+            self.main_window.pipeline_manager.pipelineEditorTabs.
+            get_current_editor
+        )().node_parameters_tmp[node_name] = {}
+
+        (
+            self.main_window.pipeline_manager.pipelineEditorTabs.
+            get_current_editor
+        )().node_parameters_tmp[node_name]["inputs"] = [
             x.text() for x in self.line_edit_input
         ]
 
-        self.main_window.pipeline_manager.pipelineEditorTabs.get_current_editor().node_parameters_tmp[
-            node_name
-        ][
-            "outputs"
-        ] = [
+        (
+            self.main_window.pipeline_manager.pipelineEditorTabs.
+            get_current_editor
+        )().node_parameters_tmp[node_name]["outputs"] = [
             x.text() for x in self.line_edit_output
         ]
 
         if (
-            "outputs"
-            in self.main_window.pipeline_manager.pipelineEditorTabs.get_current_editor().node_parameters_tmp
+            "outputs" in
+                self.main_window.pipeline_manager.pipelineEditorTabs.
+                get_current_editor().node_parameters_tmp
         ):
-            del self.main_window.pipeline_manager.pipelineEditorTabs.get_current_editor().node_parameters_tmp[
-                "outputs"
-            ]
+            del (
+                self.main_window.pipeline_manager.pipelineEditorTabs.
+                get_current_editor().node_parameters_tmp["outputs"]
+            )
+        # fmt: on
 
         # Commented on January, 4th 2020
         # if self.main_window.pipeline_manager.pipelineEditorTabs\
         # .get_current_editor().node_parameters_tmp ==  \
         #         self.main_window.pipeline_manager.pipelineEditorTabs\
         # .get_current_editor().node_parameters and \
         #         self.main_window.pipeline_manager.test_init and \
@@ -1339,15 +1377,14 @@
         a new node that has the same traits as the selected one and create
         new links that are the same than the selected node.
 
         :param new_node_name: new node name (is None except when this method
                               is called from an undo/redo)
         """
         # Copying the old node
-        old_node = self.pipeline.nodes[self.node_name]
         old_node_name = self.node_name
 
         if not new_node_name:
             new_node_name = self.line_edit_node_name.text()
 
         if isinstance(
             self.pipeline.list_process_in_pipeline[0], ProcessIteration
@@ -1381,14 +1418,16 @@
             self.main_window.statusBar().showMessage(
                 'Node name "{0}" has been changed to "{1}".'.format(
                     old_node_name, new_node_name
                 )
             )
 
     def rename_subprocesses(self, node, parent_node_name):
+        """blabla"""
+
         if node.process.context_name.split(".")[0] == "Pipeline":
             if len(node.process.context_name.split(".")) >= 3:
                 node.process.context_name = (
                     "Pipeline."
                     + parent_node_name
                     + "."
                     + ".".join(node.process.context_name.split(".")[2:])
@@ -1407,15 +1446,17 @@
 
     def update_parameters(self, process=None):
         """Update the parameters values.
 
         :param process: process of the node
         """
 
-        # self.main_window.pipeline_manager.run_pipeline_action.setDisabled(True) # commented on January, 4th 2020
+        # commented on January, 4th 2020
+        # self.main_window.pipeline_manager.run_pipeline_action.setDisabled(
+        #                                                                True)
 
         if process is None:
             try:
                 process = self.current_process
             except AttributeError:
                 # if no node has been clicked, no need to update the widget
                 return
@@ -1457,26 +1498,40 @@
                           method is called from an undo/redo)
         """
 
         index = self.get_index_from_plug_name(plug_name, in_or_out)
 
         # Reading the value from the plug's line edit
         if not new_value:
-
             if in_or_out == "in":
                 new_value = self.line_edit_input[index].text()
+
             elif in_or_out == "out":
                 new_value = self.line_edit_output[index].text()
+
             else:
                 new_value = None
 
             try:
                 new_value = eval(new_value)
+
+            # We try to handle the undefined value with the eval() function
+            # See FixME below.
+            except SyntaxError:
+                new_value = new_value.replace("<undefined>", "'<undefined>'")
+
+                try:
+                    new_value = eval(new_value)
+
+                except Exception as err:
+                    print("{0}: {1}.".format(err.__class__, err))
+
             except NameError:
                 pass
+
             except Exception as err:
                 print("{0}: {1}.".format(err.__class__, err))
 
             # except NameError:
             #    print("NameError for value {0}".format(new_value))
             # except SyntaxError:
             #    pass
@@ -1490,14 +1545,23 @@
 
         else:
             node_name = self.node_name
 
         old_value = pipeline.nodes[node_name].get_plug_value(plug_name)
 
         try:
+            # FIXME:Since we replace, above, "<undefined>" with "<undefined>"
+            # in order to handle syntax error with eval() we should handle
+            # all cases here (big job).
+            # For the moment we manage only the dictionary
+            if isinstance(new_value, dict):
+                new_value = {
+                    k: Undefined if v == "<undefined>" else v
+                    for k, v in new_value.items()
+                }
             pipeline.nodes[node_name].set_plug_value(plug_name, new_value)
 
         except TraitError as err:
             msg = QMessageBox()
             msg.setText("{}".format(err))
             msg.setIcon(QMessageBox.Warning)
             msg.setWindowTitle(err.__class__.__name__)
@@ -1542,25 +1606,27 @@
 
         :param plug_name: name of the plug
         :param parameters: tuple containing the index of the plug, the current
                            pipeline instance and the type of the plug value
         :param filter_res_list: list of the filtered files
         """
 
-        index = parameters[0]
         pipeline = parameters[1]
         value_type = parameters[2]
 
         # If the list contains only one element, setting
         # this element as the plug value
         len_list = len(filter_res_list)
+
         if len_list > 1:
             res = filter_res_list
+
         elif len_list == 1:
             res = filter_res_list[0]
+
         else:
             res = []
 
         self.update_plug_value("in", plug_name, pipeline, value_type, res)
 
     def release_process(self):
         """
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/pipeline_manager/pipeline_editor.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/pipeline_manager/pipeline_editor.py`

 * *Files 2% similar despite different names*

```diff
@@ -19,40 +19,50 @@
 # Populse_mia - Copyright (C) IRMaGe/CEA, 2018
 # Distributed under the terms of the CeCILL license, as published by
 # the CEA-CNRS-INRIA. Refer to the LICENSE file or to
 # http://www.cecill.info/licences/Licence_CeCILL_V2.1-en.html
 # for details.
 ##########################################################################
 
-import json
 import os
-import re
 import sys
 
 import six
 import yaml
+
 # Capsul imports
-from capsul.api import (Node, PipelineNode, Process, Switch, capsul_engine,
-                        get_process_instance)
+from capsul.api import (
+    Node,
+    PipelineNode,
+    Process,
+    Switch,
+    get_process_instance,
+)
 from capsul.pipeline.pipeline_nodes import ProcessNode
 from capsul.pipeline.python_export import save_py_pipeline
 from capsul.pipeline.xml import save_xml_pipeline
 from capsul.qt_gui.widgets.pipeline_developer_view import (
-    NodeGWidget, PipelineDeveloperView)
+    NodeGWidget,
+    PipelineDeveloperView,
+)
+
 # PyQt5 imports
-from PyQt5 import Qt, QtCore, QtGui, QtWidgets
-from PyQt5.QtWidgets import QInputDialog, QLineEdit, QMessageBox
+from PyQt5 import Qt, QtCore, QtWidgets
+from PyQt5.QtWidgets import QInputDialog, QMessageBox
+
 # soma-base imports
 from soma.utils.weak_proxy import weak_proxy
 from traits.api import TraitError
 
 from populse_mia.software_properties import Config, verCmp
+
 # Populse_MIA imports
-from populse_mia.user_interface.pipeline_manager.node_controller import \
-    FilterWidget
+from populse_mia.user_interface.pipeline_manager.node_controller import (
+    FilterWidget,
+)
 from populse_mia.user_interface.pop_ups import PopUpClosePipeline
 
 unicode = str
 
 
 class PipelineEditor(PipelineDeveloperView):
     """View to edit a pipeline graphically.
@@ -160,17 +170,17 @@
             active,
             weak_link,
         ]
         self.update_history(history_maker, from_undo, from_redo)
 
         # Commented on January, 4th 2020
         # if not (self.main_window.pipeline_manager.iterationTable.
-        #                                          check_box_iterate).isChecked():
-        #     self.main_window.pipeline_manager.run_pipeline_action.setDisabled(
-        #                                                                    True)
+        #                                     check_box_iterate).isChecked():
+        #     (self.main_window.pipeline_manager.run_pipeline_action.
+        #                                         setDisabled)(True)
         # End - commented on January, 4th 2020
 
         self.main_window.statusBar().showMessage(
             "Link {0} has been deleted.".format(link)
         )
 
     def _export_plug(
@@ -217,15 +227,14 @@
             if not pipeline_parameter:
                 plug_name = str(dial.name_line.text())
 
             else:
                 plug_name = pipeline_parameter
 
             while check_plug is True:
-
                 if plug_name in self.scene.pipeline.pipeline_node.plugs:
                     msg = QMessageBox()
                     msg.setIcon(QMessageBox.Warning)
                     title = "populse_mia - Warning: Duplicate pipeline plug"
                     msgtext = (
                         'The "{0}" pipeline plug already exists, do '
                         "you want to connect to this existing "
@@ -254,35 +263,33 @@
                             and new_name
                             and not new_name.isspace()
                             and plug_name != new_name
                         ):
                             plug_name = new_name
 
                             if (
-                                not plug_name
-                                in self.scene.pipeline.pipeline_node.plugs
+                                plug_name
+                                not in self.scene.pipeline.pipeline_node.plugs
                             ):
                                 check_plug = False
 
                 else:
                     allow_existing_plug = False
                     check_plug = False
 
             pipeline_parameter = plug_name
 
             if optional is None:
-
                 try:
                     optional = dial.optional.isChecked()
 
                 except UnboundLocalError:
                     pass
 
             if weak_link is None:
-
                 try:
                     weak_link = dial.weak.isChecked()
 
                 except UnboundLocalError:
                     weak_link = False
 
             try:
@@ -314,16 +321,18 @@
             else:
                 # For history
                 if multi_export:
                     return temp_plug_name[1]
 
                 else:
                     self.scene.update_pipeline()
-                    # history_maker = ["export_plug", ('inputs', pipeline_parameter),
-                    #                 pipeline_parameter, optional, weak_link]
+                    # history_maker = ["export_plug",
+                    #                  ('inputs', pipeline_parameter),
+                    #                  pipeline_parameter, optional,
+                    #                  weak_link]
                     history_maker = [
                         "export_plugs",
                         plug_name,
                         temp_plug_name[0],
                     ]
                     self.update_history(history_maker, from_undo, from_redo)
 
@@ -384,15 +393,14 @@
         if not _temp_plug_name:
             _temp_plug_name = self._temp_plug_name
 
         if isinstance(_temp_plug_name, tuple):
             _temp_plug_name = [_temp_plug_name]
 
         for pip_plug_name in _temp_plug_name:
-
             if pip_plug_name[0] in ("inputs", "outputs"):
                 plug_name = pip_plug_name[1]
                 plug = self.scene.pipeline.pipeline_node.plugs[plug_name]
                 optional = plug.optional
                 # contains the plugs that are connected
                 # to the input or output plug
                 new_temp_plugs = []
@@ -541,16 +549,16 @@
             history_maker.append(class_process)
 
         self.update_history(history_maker, from_undo, from_redo)
 
         # Commented on January, 4th 2020
         # if not (self.main_window.pipeline_manager.
         #         iterationTable.check_box_iterate.isChecked)():
-        #     self.main_window.pipeline_manager.run_pipeline_action.setDisabled(
-        #                                                                    True)
+        #     (self.main_window.pipeline_manager.run_pipeline_action.
+        #                                       setDisabled)(True)
         # End - commented on January, 4th 2020
 
         self.main_window.statusBar().showMessage(
             "Node {0} has been " "added.".format(node_name)
         )
 
         self.main_window.pipeline_manager.update_user_buttons_states()
@@ -565,26 +573,24 @@
         removed_links = []
 
         for node_name, node in pipeline.nodes.items():
             # Only if the node is a pipeline node ?
 
             if node_name and isinstance(node, PipelineNode):
                 sub_pipeline_process = node.process
-                current_process_id = sub_pipeline_process.id
 
                 # Reading the process configuration file
                 with open(
                     os.path.join(
                         config.get_mia_path(),
                         "properties",
                         "process_config.yml",
                     ),
                     "r",
                 ) as stream:
-
                     try:
                         if verCmp(yaml.__version__, "5.1", "sup"):
                             dic = yaml.load(stream, Loader=yaml.FullLoader)
                         else:
                             dic = yaml.load(stream)
 
                     except yaml.YAMLError as exc:
@@ -646,15 +652,14 @@
 
                 if (
                     new_inputs
                     or new_outputs
                     or removed_inputs
                     or removed_outputs
                 ):
-
                     # Checking the links of the node
                     link_to_del = set()
                     for link, glink in six.iteritems(self.scene.glinks):
                         if link[0][0] == node_name or link[1][0] == node_name:
                             self.scene.removeItem(glink)
                             link_to_del.add((link, glink))
                     for link, glink in link_to_del:
@@ -764,60 +769,55 @@
             invert_io = True
         else:
             node = pipeline.nodes[node_name]
 
         # Collecting the links from the node that is being deleted
         links = []
         for plug_name, plug in node.plugs.items():
-
             if plug.output or (invert_io and not plug.output):
-
                 for link_to in plug.links_to:
                     (
                         dest_node_name,
                         dest_parameter,
                         dest_node,
                         dest_plug,
                         weak_link,
                     ) = link_to
                     active = plug.activated
 
                     # Looking for the name of dest_plug in dest_node
                     dest_plug_name = None
 
                     for plug_name_d, plug_d in dest_node.plugs.items():
-
                         if plug_d == dest_plug:
                             dest_plug_name = plug_name_d
                             break
 
                     link_to_add = [(node_name, plug_name)]
                     link_to_add.append((dest_node_name, dest_plug_name))
                     link_to_add.append(active)
                     link_to_add.append(weak_link)
 
                     links.append(link_to_add)
 
             else:
-
                 for link_from in plug.links_from:
                     (
                         source_node_name,
                         source_parameter,
                         source_node,
                         source_plug,
                         weak_link,
                     ) = link_from
                     active = plug.activated
 
                     # Looking for the name of source_plug in source_node
                     source_plug_name = None
 
                     for plug_name_d, plug_d in source_node.plugs.items():
-
                         if plug_d == source_plug:
                             source_plug_name = plug_name_d
                             break
 
                     link_to_add = [(source_node_name, source_plug_name)]
                     link_to_add.append((node_name, plug_name))
                     link_to_add.append(active)
@@ -837,16 +837,16 @@
         history_maker = ["delete_process", node_name, process, links]
 
         self.update_history(history_maker, from_undo, from_redo)
 
         # Commented on January, 4th 2020
         # if not (self.main_window.pipeline_manager.iterationTable
         #         .check_box_iterate).isChecked():
-        #     self.main_window.pipeline_manager.run_pipeline_action.setDisabled(
-        #                                                                    True)
+        #     (self.main_window.pipeline_manager.run_pipeline_action.
+        #                                               setDisabled)(True)
         # End - commented on January, 4th 2020
 
         self.main_window.statusBar().showMessage(
             "Node {0} has been deleted.".format(node_name)
         )
 
         for node_name, node in pipeline.nodes.items():
@@ -881,15 +881,14 @@
         :param from_redo: True if this method is called from a redo action
         """
         pipeline = self.scene.pipeline
         node = pipeline.nodes[node_name]
         parameter_list = []
 
         for parameter_name, plug in six.iteritems(node.plugs):
-
             if parameter_name in (
                 "nodes_activation",
                 "selection_changed",
                 "output_directory",
                 "use_mcr",
                 "paths",
                 "matlab_cmd",
@@ -902,15 +901,14 @@
                 (node_name, parameter_name) not in pipeline.do_not_export
                 and (
                     (outputs and plug.output and not plug.links_to)
                     or (inputs and not plug.output and not plug.links_from)
                 )
                 and (optional or not node.get_trait(parameter_name).optional)
             ):
-
                 p_name = self._export_plug(
                     parameter_name,
                     temp_plug_name=(node_name, parameter_name),
                     multi_export=True,
                 )
                 parameter_list.append(p_name)
 
@@ -919,17 +917,17 @@
 
         # For history
         history_maker = ["export_plugs", parameter_list, node_name]
         self.update_history(history_maker, from_undo, from_redo)
 
         # Commented on January, 4th 2020
         # if not (self.main_window.pipeline_manager.iterationTable.
-        #                                          check_box_iterate).isChecked():
-        #     self.main_window.pipeline_manager.run_pipeline_action.setDisabled(
-        #                                                                    True)
+        #                                    check_box_iterate).isChecked():
+        #     (self.main_window.pipeline_manager.run_pipeline_action.
+        #                                               setDisabled)(True)
         # End - commented on January, 4th 2020
 
         self.main_window.statusBar().showMessage(
             "Plugs {0} have been exported.".format(str(parameter_list))
         )
 
     def get_current_filename(self):
@@ -968,15 +966,14 @@
 
             if not os.path.isdir(folder):
                 os.mkdir(folder)
 
             if not os.path.isfile(
                 os.path.abspath(os.path.join(folder, "__init__.py"))
             ):
-
                 with open(
                     os.path.abspath(os.path.join(folder, "__init__.py")), "w"
                 ):
                     pass
 
             filename = QtWidgets.QFileDialog.getSaveFileName(
                 None,
@@ -1074,15 +1071,16 @@
     #                     return {'__tuple__': True,
     #                             'items': [hint_tuples(e) for e in item]}
     #
     #                 if isinstance(item, list):
     #                     return [hint_tuples(e) for e in item]
     #
     #                 if isinstance(item, dict):
-    #                     return dict((key, hint_tuples(value)) for key, value in
+    #                     return dict((key,
+    #                                  hint_tuples(value)) for key, value in
     #                                 item.items())
     #
     #                 else:
     #                     return item
     #
     #             return super(MultiDimensionalArrayEncoder, self).encode(
     #                 hint_tuples(obj))
@@ -1181,15 +1179,14 @@
                 elif history_maker[0] == "delete_process":
                     to_redo = "add_process"
 
                 elif history_maker[0] == "update_node_name":
                     self.undos.pop()
 
                 for i, item in enumerate(self.redos):
-
                     if item[0] == to_redo and history_maker[1] == item[1]:
                         self.redos.pop(i)
 
         self.pipeline_modified.emit(self)
 
     def update_node_name(
         self,
@@ -1210,16 +1207,15 @@
            redo
         """
         pipeline = self.scene.pipeline
 
         # Removing links of the selected node and copy the origin/destination
         links_to_copy = []
 
-        for (source_parameter, source_plug) in six.iteritems(old_node.plugs):
-
+        for source_parameter, source_plug in six.iteritems(old_node.plugs):
             for (
                 dest_node_name,
                 dest_parameter,
                 dest_node,
                 dest_plug,
                 weak_link,
             ) in source_plug.links_to.copy():
@@ -1258,15 +1254,14 @@
 
         # Creating a new node with the new name and deleting the previous one
         pipeline.nodes[new_node_name] = pipeline.nodes[old_node_name]
         del pipeline.nodes[old_node_name]
 
         # Setting the same links as the original node
         for link in links_to_copy:
-
             if link[0] == "to":
                 pipeline.add_link(
                     new_node_name
                     + "."
                     + link[1]
                     + "->"
                     + link[2]
@@ -1919,15 +1914,14 @@
 
         with open(
             os.path.join(
                 config.get_mia_path(), "properties", "process_config.yml"
             ),
             "r",
         ) as stream:
-
             try:
                 if verCmp(yaml.__version__, "5.1", "sup"):
                     dic = yaml.load(stream, Loader=yaml.FullLoader)
 
                 else:
                     dic = yaml.load(stream)
 
@@ -1995,15 +1989,15 @@
                         (key, (value.x(), value.y()))
                         for key, value in six.iteritems(
                             self.get_current_editor().scene.pos
                         )
                     ]
                 )
 
-            except:
+            except Exception:
                 posdict = dict(
                     [
                         (key, (value[0], value[1]))
                         for key, value in six.iteritems(
                             self.get_current_editor().scene.pos
                         )
                     ]
@@ -2062,38 +2056,56 @@
 
     def set_tab_index(self, index):
         """Set the current tab index and disable the run pipeline action.
 
         :param index: index of the editor
         """
 
-        # self.main_window.pipeline_manager.run_pipeline_action.setDisabled(True) # commented on January, 4th 2020
+        # commented on January, 4th 2020
+        # self.main_window.pipeline_manager.run_pipeline_action.setDisabled(
+        #                                                                 True)
         self.setCurrentIndex(index)
         self.previousIndex = index
         self.update_current_node(index)
 
     def update_iteration_checkbox(self):
+        """blabla"""
+
         pipeline = self.get_current_pipeline()
+
         if not pipeline or not hasattr(pipeline, "nodes"):
-            self.main_window.pipeline_manager.iterationTable.check_box_iterate.setCheckState(
-                Qt.Qt.Unchecked
-            )
+            # fmt: off
+            (
+                self.main_window.pipeline_manager.iterationTable.
+                check_box_iterate.setCheckState
+            )(Qt.Qt.Unchecked)
+            # fmt: on
+
         else:
             has_iteration = False
+
             for key in pipeline.nodes.sortedKeys:
                 if "iterated_" in key:
                     has_iteration = True
+
             if has_iteration:
-                self.main_window.pipeline_manager.iterationTable.check_box_iterate.setCheckState(
-                    Qt.Qt.Checked
-                )
+                # fmt: off
+                (
+                    self.main_window.pipeline_manager.iterationTable.
+                    check_box_iterate.setCheckState
+                )(Qt.Qt.Checked)
+                # fmt: on
+
             else:
-                self.main_window.pipeline_manager.iterationTable.check_box_iterate.setCheckState(
-                    Qt.Qt.Unchecked
-                )
+                # fmt: off
+                (
+                    self.main_window.pipeline_manager.iterationTable.
+                    check_box_iterate.setCheckState
+                )(Qt.Qt.Unchecked)
+                # fmt: on
 
     def update_current_node(self, index):
         """Update the node parameters
 
         :param index: index of the editor
         """
 
@@ -2116,18 +2128,22 @@
         #         .check_box_iterate.isChecked():
         #     self.main_window.pipeline_manager.run_pipeline_action\
         #         .setDisabled(False)
         # End - commented on January, 4th 2020
         self.main_window.pipeline_manager.update_user_buttons_states()
 
         self.update_iteration_checkbox()
+
+        # fmt: off
         if self.get_current_editor():
-            self.main_window.pipeline_manager.iterationTable.update_iterated_tag(
-                self.get_current_editor().iterated_tag
-            )
+            (
+                self.main_window.pipeline_manager.iterationTable.
+                update_iterated_tag
+            )(self.get_current_editor().iterated_tag)
+        # fmt: on
 
     def update_history(self, editor):
         """Update undo/redo history of an editor.
 
         :param editor: editor
         """
 
@@ -2151,15 +2167,15 @@
         """Update the list of database scans in every editor."""
 
         for i in range(self.count() - 1):
             pipeline = self.widget(i).scene.pipeline
             if pipeline.trait("database_scans"):
                 try:
                     setattr(pipeline, "database_scans", self.scan_list)
-                except Exception as e:
+                except Exception:
                     import traceback
 
                     traceback.print_exc()
                     # but continue...
 
         self.update_iteration_checkbox()
 
@@ -2173,25 +2189,23 @@
     :param file_name: name of the sub-pipeline
     :return: name of the corresponding file if it is found, else None
     """
 
     filenames = [file_name + ".py", file_name + ".xml"]
 
     for filename in filenames:
-
         for path in paths_list:
             new_path = path
 
             for package in packages_list:
                 new_path = os.path.join(new_path, package)
 
             # Making sure that the filename is found (has somme issues
             # with case sensitivity)
             if os.path.isdir(new_path):
-
                 for f in os.listdir(new_path):
                     new_file = os.path.join(new_path, f)
 
                     if (os.path.isfile(new_file)) and (
                         f.lower() == filename.lower()
                     ):
                         return new_file
@@ -2218,15 +2232,14 @@
     new_paths = prev_paths.copy()
     for idx, (key, value) in enumerate(dictionary.items()):
         # If the value is a string, this means
         # that this is a "leaf" of the tree
         # so the key is a module name.
 
         if isinstance(value, str):
-
             if key == name:
                 new_paths.append(key)
                 return new_paths
 
             else:
                 continue
 
@@ -2251,15 +2264,14 @@
     :param filename: name of the file where to save the pipeline
     """
 
     formats = {".py": save_py_pipeline, ".xml": save_xml_pipeline}
     saved = False
 
     for ext, writer in six.iteritems(formats):
-
         if filename.endswith(ext):
             writer(pipeline, filename)
             saved = True
             break
 
     if not saved:
         # fallback to .py
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/pipeline_manager/pipeline_manager_tab.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/pipeline_manager/pipeline_manager_tab.py`

 * *Files 2% similar despite different names*

```diff
@@ -19,80 +19,108 @@
 # for details.
 ##########################################################################
 
 # Other imports
 import copy
 import datetime
 import functools
-import inspect
 import io
 import json
 import os
-import re
 import sys
 import threading
 import time
 import traceback
 import uuid
-from collections import OrderedDict
 
 import six
+
 # Soma_workflow import
 import soma_workflow.constants as swconstants
 import traits.api as traits
+
 # Capsul imports
-from capsul.api import (NipypeProcess, Pipeline, PipelineNode, Process,
-                        ProcessNode, Switch, get_process_instance)
+from capsul.api import (
+    NipypeProcess,
+    Pipeline,
+    PipelineNode,
+    Process,
+    ProcessNode,
+    get_process_instance,
+)
 from capsul.attributes.completion_engine import ProcessCompletionEngine
 from capsul.engine import WorkflowExecutionError
 from capsul.pipeline import pipeline_tools
 from capsul.pipeline.pipeline_workflow import workflow_from_pipeline
 from capsul.pipeline.process_iteration import ProcessIteration
 from matplotlib.backends.qt_compat import QtWidgets
-# MIA processes imports
-from mia_processes.bricks.tools.tools import Input_Filter
+
 # PyQt5 imports
 from PyQt5 import Qt, QtCore
 from PyQt5.QtCore import QThread, QTimer, Signal
 from PyQt5.QtGui import QCursor, QIcon, QMovie
-from PyQt5.QtWidgets import (QAction, QApplication, QHBoxLayout, QMenu,
-                             QMessageBox, QProgressDialog, QPushButton,
-                             QScrollArea, QSplitter, QToolBar, QVBoxLayout,
-                             QWidget)
+from PyQt5.QtWidgets import (
+    QAction,
+    QApplication,
+    QHBoxLayout,
+    QMenu,
+    QMessageBox,
+    QScrollArea,
+    QSplitter,
+    QToolBar,
+    QVBoxLayout,
+    QWidget,
+)
+
 # Soma_base import
 from soma.controller.trait_utils import is_file_trait
 from soma.qt_gui.qtThread import QtThreadCall
 from traits.api import TraitListObject, Undefined
-from traits.trait_errors import TraitError
 
 # Populse_MIA imports
-from populse_mia.data_manager.project import (BRICK_EXEC, BRICK_EXEC_TIME,
-                                              BRICK_INIT, BRICK_INIT_TIME,
-                                              BRICK_INPUTS, BRICK_NAME,
-                                              BRICK_OUTPUTS, COLLECTION_BRICK,
-                                              COLLECTION_CURRENT,
-                                              COLLECTION_HISTORY,
-                                              COLLECTION_INITIAL,
-                                              HISTORY_BRICKS, HISTORY_PIPELINE,
-                                              TAG_BRICKS, TAG_CHECKSUM,
-                                              TAG_FILENAME, TAG_HISTORY,
-                                              TAG_TYPE, TYPE_MAT, TYPE_NII,
-                                              TYPE_TXT, TYPE_UNKNOWN)
+from populse_mia.data_manager.project import (
+    BRICK_EXEC,
+    BRICK_EXEC_TIME,
+    BRICK_INIT,
+    BRICK_INIT_TIME,
+    BRICK_INPUTS,
+    BRICK_NAME,
+    BRICK_OUTPUTS,
+    COLLECTION_BRICK,
+    COLLECTION_CURRENT,
+    COLLECTION_HISTORY,
+    COLLECTION_INITIAL,
+    HISTORY_BRICKS,
+    HISTORY_PIPELINE,
+    TAG_BRICKS,
+    TAG_CHECKSUM,
+    TAG_FILENAME,
+    TAG_HISTORY,
+    TAG_TYPE,
+    TYPE_MAT,
+    TYPE_NII,
+    TYPE_TXT,
+    TYPE_UNKNOWN,
+)
 from populse_mia.software_properties import Config
-from populse_mia.user_interface.pipeline_manager.iteration_table import \
-    IterationTable
+from populse_mia.user_interface.pipeline_manager.iteration_table import (
+    IterationTable,
+)
 from populse_mia.user_interface.pipeline_manager.node_controller import (
-    CapsulNodeController, NodeController)
-from populse_mia.user_interface.pipeline_manager.pipeline_editor import \
-    PipelineEditorTabs
-from populse_mia.user_interface.pipeline_manager.process_library import \
-    ProcessLibraryWidget
+    CapsulNodeController,
+    NodeController,
+)
+from populse_mia.user_interface.pipeline_manager.pipeline_editor import (
+    PipelineEditorTabs,
+)
+from populse_mia.user_interface.pipeline_manager.process_library import (
+    ProcessLibraryWidget,
+)
 from populse_mia.user_interface.pipeline_manager.process_mia import ProcessMIA
-from populse_mia.user_interface.pop_ups import (PopUpInheritanceDict,
-                                                PopUpSelectIteration)
+from populse_mia.user_interface.pop_ups import PopUpInheritanceDict
 
 
 class PipelineManagerTab(QWidget):
     """
     Widget that handles the Pipeline Manager tab.
 
     .. Methods:
@@ -100,15 +128,15 @@
         - _set_anim_frame: Callback which sets the animated icon frame to
           the status action icon
         - _show_preview:
         - add_plug_value_to_database: add the plug value to the database.
         - add_process_to_preview: add a process to the pipeline
         - build_iterated_pipeline:
         - cleanup_older_init:
-        - complete_pipeline_parameters
+        - complete_pipeline_parameters:
         - controller_value_changed: update history when a pipeline node is
           changed
         - displayNodeParameters: display the node controller when a node is
           clicked
         - find_process:
         - finish_execution:
         - garbage_collect:
@@ -263,29 +291,31 @@
         )
         self.save_pipeline_parameters_action.triggered.connect(
             self.saveParameters
         )
 
         sources_images_dir = config.getSourceImageDir()
         # commented on January, 4th 2020
-        # initialization button was deleted to avoid issues of indexation into the database.
+        # initialization button was deleted to avoid issues of indexation
+        # into the database.
         # initialization is now performed just befor run in run_pipeline_action
         # self.init_pipeline_action = QAction(
         #     QIcon(os.path.join(sources_images_dir, 'init32.png')),
         #     "Initialize pipeline", self)
         # self.init_pipeline_action.triggered.connect(self.initialize)
         # End - commented on January, 4th 2020
 
         self.run_pipeline_action = QAction(
             QIcon(os.path.join(sources_images_dir, "run32.png")),
             "Run pipeline",
             self,
         )
         self.run_pipeline_action.triggered.connect(self.runPipeline)
-        # self.run_pipeline_action.setDisabled(True) # commented on January, 4th 2020
+        # commented on January, 4th 2020
+        # self.run_pipeline_action.setDisabled(True)
 
         self.stop_pipeline_action = QAction(
             QIcon(os.path.join(sources_images_dir, "stop32.png")), "Stop", self
         )
         self.stop_pipeline_action.triggered.connect(self.stop_execution)
         self.stop_pipeline_action.setDisabled(True)
 
@@ -335,23 +365,30 @@
 
     def _register_node_io_in_database(
         self, job, node, pipeline_name="", history_id=""
     ):
         """bla bla bla"""
 
         def _serialize_tmp(item):
+            """blabla"""
+
             import soma_workflow.client as swc
 
             if item in (Undefined, [Undefined]):
-                # return '<undefined'
                 return "<undefined>"
+
             if isinstance(item, swc.TemporaryPath):
                 return "<temp>"
+
             if isinstance(item, datetime.datetime):
                 return item.__str__()
+
+            if isinstance(item, set):
+                return list(item)
+
             raise TypeError
 
         if isinstance(node, (PipelineNode, Pipeline)):
             # only leaf processes produce output data
             return
 
         process = node
@@ -403,24 +440,22 @@
         attributes = {}
         completion = ProcessCompletionEngine.get_completion_engine(node)
         if completion:
             attributes = completion.get_attribute_values().export_to_dict()
 
         # Adding I/O to database history
         for key in inputs:
-
             # filter Undefined / temp
             # this is an overhead since we convert to/from json, and it will
             # be converted again in the database. But the "default" function
             # for json is not in the database API.
             code = json.dumps(inputs[key], default=_serialize_tmp)
             inputs[key] = json.loads(code)
 
         for key in outputs:
-
             # filter Undefined / temp
             # this is an overhead since we convert to/from json, and it will
             # be converted again in the database.
             code = json.dumps(outputs[key], default=_serialize_tmp)
             outputs[key] = json.loads(code)
 
         node_name = node.name
@@ -428,22 +463,19 @@
         # Updating the database with output values obtained from
         # initialisation. If a plug name is in
         # outputs['notInDb'], then the corresponding
         # output value is not added to the database.
         notInDb = set(outputs.get("notInDb", []))
 
         for plug_name, plug_value in outputs.items():
-
             if plug_name not in process.traits():
                 continue
 
             if plug_value != "<undefined>":
-
                 if plug_name not in notInDb:
-
                     if pipeline_name != "":
                         full_name = pipeline_name + "." + node_name
 
                     else:
                         full_name = node_name
 
                     trait = process.trait(plug_name)
@@ -631,31 +663,32 @@
         )
         field_names = self.project.session.get_fields_names(COLLECTION_CURRENT)
         all_cvalues = {}
         all_ivalues = {}
 
         # get all tags values for inputs
         for param, parent_file in parent_files.items():
-            database_parent_file = None
-            relfile = os.path.abspath(os.path.normpath(parent_file))[
-                len(db_dir) :
-            ]
+            # database_parent_file = None
+            # fmt: off
+            relfile = os.path.abspath(os.path.normpath(parent_file)
+                                      )[len(db_dir):]
+            # fmt: on
 
             if relfile == p_value:
                 # output is one of the inputs: OK nothing to be done.
                 all_cvalues = {}
                 all_ivalues = {}
                 break
 
             scan = self.project.session.get_document(
                 COLLECTION_CURRENT, relfile
             )
 
             if scan:
-                database_parent_file = scan
+                # database_parent_file = scan
                 # banished_tags = set([TAG_TYPE, TAG_EXP_TYPE, TAG_BRICKS,
                 #                TAG_CHECKSUM, TAG_FILENAME])
                 banished_tags = set(
                     [
                         TAG_TYPE,
                         TAG_BRICKS,
                         TAG_CHECKSUM,
@@ -678,15 +711,14 @@
         # If there are several possible inputs: there is more work
         if (
             not self.ignore_node
             and len(all_cvalues) >= 2
             and (node_name not in self.ignore)
             and (node_name + plug_name not in self.ignore)
         ):
-
             # if all inputs have the same tags set: then pick either of them,
             # they are all the same, there is no ambiguity
             eq = True
             first = None
             for param, cvalues in all_cvalues.items():
                 if first is None:
                     first = cvalues
@@ -707,15 +739,14 @@
                 # all values equal, no ambiguity
                 k, v = next(iter(all_cvalues.items()))
                 all_cvalues = {k: v}
                 k, v = next(iter(all_ivalues.items()))
                 all_ivalues = {k: v}
 
             else:
-
                 # ambiguous inputs -> output
                 # ask the user, or use previously setup answers.
 
                 # FIXME:
                 # There is a GUI dialog here, involving user interaction.
                 # This should probably be avoided here in a processing loop.
                 # Some pipelines, especially with iterations, may ask many many
@@ -791,18 +822,16 @@
             {k: v for k, v in attributes.items() if k in field_names}
         )
         ivalues.update(
             {k: v for k, v in attributes.items() if k in field_names}
         )
 
         if own_tags:
-
             # own_tags may insert new fields in the database
             for tag_to_add in own_tags:
-
                 if tag_to_add["name"] not in field_names:
                     (self.project.session.add_field)(
                         COLLECTION_CURRENT,
                         tag_to_add["name"],
                         tag_to_add["field_type"],
                         tag_to_add["description"],
                         tag_to_add["visibility"],
@@ -875,22 +904,28 @@
         """
         Opens a dialog to ask for each pipeline plug, if an iteration should
         iterate over it, or if it should not be iterated, or if it should be
         connected to a database filter (input_filter node)
         """
 
         def check_db_compat(process, plug):
+            """blabla"""
+
             trait = process.trait(plug)
             return is_file_trait(trait)
 
         def iter_clicked(param_btns, p, state):
+            """blabla"""
+
             if not state and param_btns[p][2] is not None:
                 param_btns[p][2].setChecked(False)
 
         def db_clicked(param_btns, p, state):
+            """blabla"""
+
             if state:
                 param_btns[p][1].setChecked(True)
 
         dialog = Qt.QDialog()
         buttonbox = Qt.QDialogButtonBox(
             Qt.QDialogButtonBox.Ok | Qt.QDialogButtonBox.Cancel
         )
@@ -933,45 +968,54 @@
                 "pipeline_steps",
                 "visible_groups",
             ]
         )
 
         for i in range(2):
             p = 0
+
             for plug in params[i]:
                 if plug in forbidden:
                     continue
-                trait = pipeline.trait(plug)
+
                 it_btn = Qt.QCheckBox()
                 db_btn = None
+
                 if i == 0:
                     db_btn = Qt.QCheckBox()
+
                     if not check_db_compat(pipeline, plug):
                         db_btn.setEnabled(False)
+
                     c = 2
+
                 else:
                     c = 4
 
                 it_btn.toggled.connect(
                     functools.partial(iter_clicked, param_btns[i], p)
                 )
 
                 param_lay.addWidget(it_btn, p + 1, i * 3)
+
                 if db_btn:
                     param_lay.addWidget(db_btn, p + 1, i * 3 + 1)
                     db_btn.toggled.connect(
                         functools.partial(db_clicked, param_btns[i], p)
                     )
+
                 param_lay.addWidget(Qt.QLabel(plug), p + 1, c)
                 param_btns[i].append([plug, it_btn, db_btn])
                 it_btn.setChecked(True)
                 p += 1
+
         param_lay.setRowStretch(max(len(inputs), len(outputs)) - 1, 1)
 
         res = dialog.exec_()
+
         if res != dialog.Accepted:
             return None
 
         iterated_plugs = [
             param[0]
             for param in param_btns[0] + param_btns[1]
             if param[1].isChecked()
@@ -986,16 +1030,14 @@
 
     def build_iterated_pipeline(self):
         """
         Build a new pipeline with an iteration node, iterating over the current
         pipeline
         """
 
-        from capsul.attributes.completion_engine import ProcessCompletionEngine
-
         pipeline = self.get_pipeline_or_process()
         engine = self.get_capsul_engine()
         pipeline_name = "Iteration_pipeline"
         iteration_name = "Pipeline"
         if hasattr(pipeline, "context_name"):
             iteration_name = pipeline.context_name
             if pipeline.context_name.split(".")[0] == "Pipeline":
@@ -1087,54 +1129,62 @@
             make_optional=None,
         )
 
         # plugs which should be connected to a database filter: add some
         # Input_Filter nodes for them, and connect them to the special
         # database_scans input
         in_filter_not_found = False
+
         for plug in database_plugs:
             try:
                 in_filter = engine.get_process_instance(
                     "mia_processes.bricks.tools.Input_Filter"
                 )
+
             except ValueError:
                 in_filter_not_found = True
                 print("Input filter not found in library.")
                 break
+
             node_name = "%s_filter" % plug
             it_pipeline.add_process(node_name, in_filter)
             it_pipeline.add_link(
                 "%s.output->%s.%s" % (node_name, iteration_name, plug)
             )
 
             # If database_scans is already a pipeline global input, the plug
             # cannot be exported. A link as to be added between database_scans
             # and the input of the filter.
             if "database_scans" in it_pipeline.user_traits():
                 it_pipeline.add_link("database_scans->%s.input" % node_name)
+
             else:
                 old_traits = list(it_pipeline.user_traits().keys())
                 it_pipeline.export_parameter(
                     node_name, "input", pipeline_parameter="database_scans"
                 )
                 it_pipeline.reorder_traits(["database_scans"] + old_traits)
 
         if not in_filter_not_found:
             self.pipelineEditorTabs.get_current_editor().iterated = True
-        compl = ProcessCompletionEngine.get_completion_engine(it_pipeline)
+
+        # compl = ProcessCompletionEngine.get_completion_engine(it_pipeline)
         return it_pipeline
 
     def check_requirements(self, environment="global", message_list=None):
+        """blabla"""
+
         config = {}
         for node in self.node_list:
             config.update(node.check_requirements(environment, message_list))
 
         return config
 
     def cleanup_older_init(self):
+        """Remove non-existent entries from the databrowser."""
 
         for brick in self.brick_list:
             print("cleanup brick", brick)
             self.main_window.data_browser.table_data.delete_from_brick(brick)
         self.project.cleanup_orphan_nonexisting_files()
         self.brick_list = []
         self.node_list = []
@@ -1146,21 +1196,25 @@
         """
         Complete pipeline parameters using Capsul's completion engine
         mechanism.
         This engine works using a set of attributes which can be retreived from
         the database.
         """
 
-        # get a working / configured CapsulEngine
-        engine = self.get_capsul_engine()
+        # FIXME: It seems that the following line is only used for UTs (test.
+        #        testMIAPipelineManageTab.test_complete_pipeline_parameters).
+        #        I think we could find a cleaner way ...
+        _ = self.get_capsul_engine()
+
         if not pipeline:
             pipeline = self.get_pipeline_or_process()
+
         completion = ProcessCompletionEngine.get_completion_engine(pipeline)
+
         if completion:
-            attributes = completion.get_attribute_values()
             completion.complete_parameters()
 
     def controller_value_changed(self, signal_list):
         """
         Update history when a pipeline node is changed
 
         :param signal_list: list of the needed parameters to update history.
@@ -1182,15 +1236,14 @@
             rect = editor.sceneRect()
             trans = editor.transform()
             editor.set_pipeline(pipeline)
             editor.setSceneRect(rect)
             editor.setTransform(trans)
 
         elif case == "plug_value":
-
             if (
                 signal_list[2]
                 in [
                     "protected_parameters",
                     "protected_parameters_items",
                     "selection_changed",
                     "trait_added",
@@ -1200,31 +1253,32 @@
                 or (signal_list[1] == [] and signal_list[4] is Undefined)
             ):
                 return
 
             history_maker.append("update_plug_value")
 
             for element in signal_list:
-
                 if element in ["inputs", "outputs"]:
                     element = ""
 
                 history_maker.append(element)
 
         # For history
         self.pipelineEditorTabs.undos[
             self.pipelineEditorTabs.get_current_editor()
         ].append(history_maker)
         # self.pipelineEditorTabs.redos[
         #    self.pipelineEditorTabs.get_current_editor()].clear()
-        # self.run_pipeline_action.setDisabled(True) # commented on January, 4th 2020
+        # commented on January, 4th 2020
+        # self.run_pipeline_action.setDisabled(True)
 
         # Cause a segmentation fault
         # from capsul.qt_gui.widgets.pipeline_developer_view import NodeGWidget
-        # for item in self.pipelineEditorTabs.get_current_editor().scene.items():
+        # for item in self.pipelineEditorTabs.get_current_editor(
+        #                                                      ).scene.items():
         #     if isinstance(item, NodeGWidget):
         #         self.pipelineEditorTabs.get_current_editor(
         #
         #         ).scene.process_clicked.emit(item.name, item.process)
 
     def displayNodeParameters(self, node_name, process):
         """
@@ -1337,14 +1391,16 @@
         del self._mmovie
         Qt.QTimer.singleShot(100, self.remove_progress)
         self.nodeController.update_parameters()
         self.run_pipeline_action.setDisabled(False)
         self.garbage_collect_action.setDisabled(False)
 
     def remove_progress(self):
+        """blabla"""
+
         self.progress.cleanup()
         # self.hLayout.removeWidget(self.progress)
         self.progress.close()
         self.progress.deleteLater()
         del self.progress
 
     def garbage_collect(self):
@@ -1410,84 +1466,97 @@
                 if isinstance(node, ProcessNode):
                     return node.process
         return pipeline
 
     def get_missing_mandatory_parameters(self):
         """check on missing parameters for
         each job"""
+
         missing_inputs = []
+
         for node in self.node_list:
             job = None
+
             for item in node.get_missing_mandatory_parameters():
                 # we must also check that the parameter is not a temporary
                 # in the workflow
                 if job is None:
                     job = [
                         j
                         for j in self.workflow.jobs
                         if hasattr(j, "process") and j.process() is node
                     ]
+
                     if len(job) != 0:
                         job = job[0]
+
                     else:
                         job = None
+
                     if job:
                         value = job.param_dict.get(item)
+
                         if value not in (None, Undefined, []):
                             # gets a non-null value in the workflow
                             continue
+                # fmt: off
                 if (
-                    node
-                    is self.pipelineEditorTabs.get_current_pipeline().pipeline_node
+                    node is
+                        self.pipelineEditorTabs.
+                        get_current_pipeline().pipeline_node
                 ):
                     item_name = item
+                # fmt: on
+
                 else:
                     item_name = "%s.%s" % (node.context_name, item)
+
                 missing_inputs.append(item_name)
 
         return missing_inputs
 
     def initialize(self):
         """Clean previous initialization then initialize the current
         pipeline."""
 
         QApplication.instance().setOverrideCursor(QCursor(Qt.Qt.WaitCursor))
 
         if self.init_clicked:
-
             self.cleanup_older_init()
 
         self.ignore_node = False
         self.key = {}
         self.ignore = {}
 
         try:
             self.test_init = self.init_pipeline()
 
         except Exception as e:
             name = os.path.basename(
                 self.pipelineEditorTabs.get_current_filename()
             )
             if name == "":
-                name = "NoName"
+                pipeline = self.pipelineEditorTabs.get_current_pipeline()
+                name = [k for k, v in pipeline.nodes.items() if k != ''][0]
             print(
                 '\nError during initialisation of the "{0}" pipeline '
                 "...!\nTraceback:".format(name)
             )
             print("".join(traceback.format_tb(e.__traceback__)), end="")
             print("{0}: {1}\n".format(e.__class__.__name__, e))
             self.test_init = False
             self.main_window.statusBar().showMessage(
                 'Pipeline "{0}" was not initialised successfully.'.format(name)
             )
 
         # If the initialization fail, the run pipeline action is disabled
         # The run pipeline action is enabled only when an initialization is
         # successful
-        # self.run_pipeline_action.setDisabled(True) # commented on January, 4th 2020
+        # commented on January, 4th 2020
+        # self.run_pipeline_action.setDisabled(True)
         self.init_clicked = True
         self.pipelineEditorTabs.update_current_node(
             self.pipelineEditorTabs.currentIndex()
         )
         (
             self.pipelineEditorTabs.get_current_editor()
         ).node_parameters = copy.deepcopy(
@@ -1513,19 +1582,17 @@
         if not pipeline:
             pipeline = get_process_instance(self.get_pipeline_or_process())
             main_pipeline = True
 
         else:
             main_pipeline = False
 
-        # name = os.path.basename(
-        #    self.pipelineEditorTabs.get_current_filename())
         name = pipeline.name
-        if name == "Pipeline":
-            name = "NoName"
+        if name == "Pipeline" and len(pipeline.nodes) == 2:
+            name = [k for k, v in pipeline.nodes.items() if k != ''][0]
         self.main_window.statusBar().showMessage(
             'Pipeline "{0}" is getting initialized. '
             "Please wait.".format(name)
         )
         init_result = True
 
         # complete config for completion
@@ -1534,30 +1601,28 @@
         self.project.node_inheritance_history = {}
 
         req_messages = []
         init_messages = []
 
         # completion / retrieve workflow
         try:
-
             print("Completion / workflow...")
             print("pipeline:", pipeline)
             self.workflow = workflow_from_pipeline(
                 pipeline, complete_parameters=True
             )
             print("\nWorkflow done.\n")
 
         except (TypeError, ValueError) as error:
             init_result = False
             ptype = "pipeline"
             mssg = ("In {0} {1}, initialization error: " "{2}").format(
                 ptype, name, str(error)
             )
             init_messages.append(mssg)
-            pass
 
         # retrieve node list
         self.update_node_list()
 
         # check missing inputs
         missing_inputs = self.get_missing_mandatory_parameters()
 
@@ -1570,31 +1635,34 @@
             init_result = False
 
         # check requirements
         requirements = self.check_requirements(
             "global", message_list=req_messages
         )
 
-        if requirements is None:
-            print("Pipeline requirements are not met.")
+        if requirements is None or requirements == {}:
+            pipeline.check_requirements(message_list=req_messages)
+            print("\nPipeline requirements are not met:")
             print("\n".join(req_messages))
-            print("current configuration:")
+            print("\nCurrent configuration:")
             print(study_config.engine.settings.select_configurations("global"))
             init_result = False
             init_messages.append(
                 "The pipeline requirements are not met. "
                 "Please see the standard output for more "
                 "information."
             )
 
         else:
             # QUESTION: Would it be better to write a general method for
             #           testing all modules (currently each module test is
             #           hard coded below)?
             # TODO: Are these tests compatible with remote run?
+            # FIXME: Make a requirement check for FreeSurfer:
+            # FreeSurfer
 
             # FSL:
             try:
                 if (
                     requirements["capsul_engine"]["uses"].get(
                         "capsul.engine.module." "fsl"
                     )
@@ -1604,15 +1672,14 @@
 
             except KeyError:
                 # The process don't need FSL
                 pass
 
             else:
                 if "capsul.engine.module.fsl" in requirements:
-
                     if not requirements["capsul.engine.module." "fsl"].get(
                         "directory", False
                     ):
                         init_result = False
                         init_messages.append(
                             "The pipeline requires FSL "
                             "but it seems FSL is not "
@@ -1640,15 +1707,14 @@
 
             except KeyError:
                 # The process don't need AFNI
                 pass
 
             else:
                 if "capsul.engine.module.afni" in requirements:
-
                     if not requirements["capsul.engine.module." "afni"].get(
                         "directory", False
                     ):
                         init_result = False
                         init_messages.append(
                             "The pipeline requires AFNI "
                             "but it seems AFNI is not "
@@ -1676,15 +1742,14 @@
 
             except KeyError:
                 # The process don't need ANTS
                 pass
 
             else:
                 if "capsul.engine.module.ants" in requirements:
-
                     if not requirements["capsul.engine.module." "ants"].get(
                         "directory", False
                     ):
                         init_result = False
                         init_messages.append(
                             "The pipeline requires ANTS "
                             "but it seems ANTS is not "
@@ -1698,32 +1763,29 @@
                         "The pipeline requires ANTS but it "
                         "seems ANTS is not configured in "
                         "mia preferences."
                     )
 
             # Matlab:
             try:
-
                 if (
                     requirements["capsul_engine"]["uses"].get(
                         "capsul.engine.module." "matlab"
                     )
                     is None
                     or Config().get_use_spm_standalone()
                 ):
                     raise KeyError
 
             except KeyError:
                 # The process don't need matlab
                 pass
 
             else:
-
                 if "capsul.engine.module.matlab" in requirements:
-
                     if not requirements["capsul.engine.module." "matlab"].get(
                         "executable", False
                     ):
                         init_result = False
                         init_messages.append(
                             "The pipeline requires Matlab "
                             "but it seems Matlab is not "
@@ -1750,46 +1812,42 @@
                     raise KeyError
 
             except KeyError:
                 # The process don't need spm
                 pass
 
             else:
-
                 if "capsul.engine.module.spm" in requirements:
-
                     if not requirements["capsul.engine.module.spm"].get(
                         "directory", False
                     ):
                         init_result = False
                         init_messages.append(
                             "The pipeline requires SPM "
                             "but it seems SPM is not "
                             "configured in mia "
                             "preferences."
                         )
 
                     elif requirements["capsul.engine.module.spm"][
                         "standalone"
                     ]:
-
                         if Config().get_matlab_standalone_path() is None:
                             init_result = False
                             init_messages.append(
                                 "The pipeline requires "
                                 "SPM but it seems that in "
                                 "mia preferences, SPM has "
                                 "been configured as "
                                 "standalone while matlab "
                                 "Runtime is not "
                                 "configured."
                             )
 
                     else:
-
                         try:
                             requirements["capsul.engine.module.matlab"].get(
                                 "executable"
                             )
 
                         except KeyError:
                             init_result = False
@@ -1901,23 +1959,24 @@
 
                             self.brick_list.append(brick_id)
                             try:
                                 self.project.session.add_document(
                                     COLLECTION_BRICK, brick_id
                                 )
                             except ValueError:
-                                # # id is not unique. It happens in iterations
-                                # # FIXME: we need a better way to handle UUIDs in
-                                # #        iterated processes
+                                # id is not unique. It happens in iterations
+                                # FIXME: we need a better way to handle
+                                #        UUIDs in iterated processes
                                 # brick_id = str(uuid.uuid4())
                                 # job.uuid = brick_id
                                 # self.brick_list[-1] = brick_id
                                 # # then try again
-                                # self.project.session.add_document(COLLECTION_BRICK,
-                                #                                   brick_id)
+                                # self.project.session.add_document(
+                                #                          COLLECTION_BRICK,
+                                #                          brick_id)
                                 init_result = False
                                 init_messages.append(
                                     "Error while setting job uuid on "
                                     '"{0}" brick.'.format(node_name)
                                 )
 
                             self.project.session.set_values(
@@ -1948,18 +2007,18 @@
 
         # Updating the node controller
         # Display the updated parameters in right part of
         # the Pipeline Manager (controller)
         if main_pipeline:
             node_controller_node_name = self.nodeController.node_name
 
-            #### Todo: Fix the problem of the controller that
-            #### keeps the name of the old brick deleted until
-            #### a click on the new one. This can cause a mia
-            #### crash during the initialisation, for example.
+            # Todo: Fix the problem of the controller that
+            #       keeps the name of the old brick deleted until
+            #       a click on the new one. This can cause a mia
+            #       crash during the initialisation, for example.
 
             if node_controller_node_name in ["inputs", "outputs"]:
                 node_controller_node_name = ""
 
             process = pipeline
 
             if (
@@ -1971,58 +2030,66 @@
             self.nodeController.display_parameters(
                 self.nodeController.node_name,
                 process,
                 self.pipelineEditorTabs.get_current_pipeline(),
             )
 
             if not init_result:
-
                 if init_messages:
                     message = "The pipeline could not be initialised properly:"
 
                     for mssg in init_messages:
                         message = message + "\n- " + mssg
 
                 else:
-                    message = ("The pipeline could not be initialised "
-                               "correctly, for an unknown reason!")
+                    message = (
+                        "The pipeline could not be initialised "
+                        "correctly, for an unknown reason!"
+                    )
 
-                lineCnt = message.count('\n')
+                lineCnt = message.count("\n")
                 self.msg = QMessageBox()
                 self.msg.setWindowTitle("MIA configuration warning!")
 
                 if lineCnt > 10:
                     scroll = QtWidgets.QScrollArea()
                     scroll.setWidgetResizable(1)
                     content = QtWidgets.QWidget()
                     scroll.setWidget(content)
                     layout = QtWidgets.QVBoxLayout(content)
                     tmpLabel = QtWidgets.QLabel(message)
                     tmpLabel.setTextInteractionFlags(
-                                                QtCore.Qt.TextSelectableByMouse)
+                        QtCore.Qt.TextSelectableByMouse
+                    )
                     layout.addWidget(tmpLabel)
-                    self.msg.layout().addWidget(scroll, 0, 0, 1,
-                                                self.msg.layout().columnCount())
-                    self.msg.setStyleSheet("QScrollArea{min-width:550 px; "
-                                           "min-height: 300px}")
+                    self.msg.layout().addWidget(
+                        scroll, 0, 0, 1, self.msg.layout().columnCount()
+                    )
+                    self.msg.setStyleSheet(
+                        "QScrollArea{min-width:550 px; " "min-height: 300px}"
+                    )
 
                 else:
                     self.msg.setText(message)
                     self.msg.setIcon(QMessageBox.Critical)
 
                 yes_button = self.msg.addButton(
                     "Open MIA preferences", QMessageBox.YesRole
                 )
                 self.msg.addButton(QMessageBox.Ok)
                 self.msg.exec()
 
                 if self.msg.clickedButton() == yes_button:
                     self.main_window.software_preferences_pop_up()
-                    (self.main_window.pop_up_preferences.
-                                                  tab_widget.setCurrentIndex)(1)
+                    # fmt: off
+                    (
+                        self.main_window.pop_up_preferences.
+                        tab_widget.setCurrentIndex
+                    )(1)
+                    # fmt: on
 
                 self.main_window.statusBar().showMessage(
                     'Pipeline "{0}" was not initialised successfully.'.format(
                         name
                     )
                 )
 
@@ -2061,27 +2128,28 @@
                 False
             )
         self.tags_menu.addAction(self.save_pipeline_as_action)
         self.tags_menu.addSeparator()
         self.tags_menu.addAction(self.load_pipeline_parameters_action)
         self.tags_menu.addAction(self.save_pipeline_parameters_action)
         self.tags_menu.addSeparator()
-        # self.tags_menu.addAction(self.init_pipeline_action) # commented on January, 4th 2020
+        # commented on January, 4th 2020
+        # self.tags_menu.addAction(self.init_pipeline_action)
         self.tags_menu.addAction(self.run_pipeline_action)
         self.tags_menu.addAction(self.stop_pipeline_action)
         self.tags_menu.addAction(self.show_pipeline_status_action)
         self.tags_menu.addAction(self.garbage_collect_action)
 
         self.tags_tool_button.setText("Pipeline")
         self.tags_tool_button.setPopupMode(
             QtWidgets.QToolButton.MenuButtonPopup
         )
         self.tags_tool_button.setMenu(self.tags_menu)
-
-        # self.menu_toolbar.addAction(self.init_pipeline_action) # commented on January, 4th 2020
+        # commented on January, 4th 2020
+        # self.menu_toolbar.addAction(self.init_pipeline_action)
         self.menu_toolbar.addAction(self.run_pipeline_action)
         self.menu_toolbar.addAction(self.stop_pipeline_action)
         self.menu_toolbar.addAction(self.show_pipeline_status_action)
         self.menu_toolbar.addAction(self.garbage_collect_action)
         self.menu_toolbar.setSizePolicy(
             QtWidgets.QSizePolicy.Expanding, QtWidgets.QSizePolicy.Fixed
         )
@@ -2171,16 +2239,14 @@
                 pipeline = self.pipelineEditorTabs.get_current_pipeline()
 
         # print('postprocess pipeline:', pipeline)
 
         to_upate = self.project.finished_bricks(
             self.get_capsul_engine(), pipeline=pipeline, include_done=False
         )
-
-        outputs = to_upate["outputs"]
         bricks = to_upate["bricks"]
 
         # set state of bricks: done + exec date
         for brid, brick in bricks.items():
             swf_status = brick.get("swf_status")
             if swf_status:
                 exec_date = swf_status[4][2]
@@ -2337,17 +2403,16 @@
                 # link = source[0] + "." + source[1]
                 # + "->" + dest[0] + "." + dest[1]
 
             c_e.scene.pipeline.update_nodes_and_plugs_activation()
             self.nodeController.update_parameters()
 
     def register_completion_attributes(self, pipeline):
-        # get a working / configured CapsulEngine
+        """blabla"""
 
-        engine = self.get_capsul_engine()
         completion = ProcessCompletionEngine.get_completion_engine(pipeline)
         if not completion:
             return
 
         attributes = completion.get_attribute_values().export_to_dict()
         if not attributes:
             return
@@ -2357,38 +2422,45 @@
         )
         pl = len(proj_dir)
 
         tag_list = set(
             self.project.session.get_fields_names(COLLECTION_CURRENT)
         )
         attributes = {k: v for k, v in attributes.items() if k in tag_list}
+
         if not attributes:
             return
 
         for param in pipeline.user_traits():
             value = getattr(pipeline, param)
             todo = []
             values = []
             todo = [value]
+
             while todo:
                 item = todo.pop(0)
+
                 if isinstance(item, list):
                     todo += item
+
                 elif isinstance(item, str):
                     apath = os.path.abspath(os.path.normpath(item))
+
                     if apath.startswith(proj_dir):
                         values.append(apath[pl:])
+
             for value in values:
                 try:
                     self.project.session.set_values(
                         COLLECTION_CURRENT, value, attributes
                     )
                     self.project.session.set_values(
                         COLLECTION_INITIAL, value, attributes
                     )
+
                 except ValueError:
                     pass  # outputs not used / inactivated
 
     def runPipeline(self):
         """Run the current pipeline of the pipeline editor."""
 
         from soma_workflow import constants as swconstants
@@ -2429,85 +2501,91 @@
 
             # pipeline_progress = dict()
             # pipeline_progress['size'] = len(tag_values)
             # pipeline_progress['counter'] = 1
             # pipeline_progress['tag'] = iterated_tag
             # for tag_value in tag_values:
             # self.brick_list = []
-            ## Status bar update
+            # # Status bar update
             # pipeline_progress['tag_value'] = tag_value
 
             # idx_combo_box = self.iterationTable.combo_box.findText(
             # tag_value)
             # self.iterationTable.combo_box.setCurrentIndex(
             # idx_combo_box)
             # self.iterationTable.update_table()
 
             # self.init_pipeline()
             # self.main_window.statusBar().showMessage(
-            #'Pipeline "{0}" is getting run for {1} {2}. '
-            #'Please wait.'.format(name, iterated_tag, tag_value))
+            # 'Pipeline "{0}" is getting run for {1} {2}. '
+            # 'Please wait.'.format(name, iterated_tag, tag_value))
             # QApplication.processEvents()
             # self.progress = RunProgress(self, pipeline_progress)
-            ##self.progress.show()
-            ##self.progress.exec()
+            # # self.progress.show()
+            # # self.progress.exec()
             # pipeline_progress['counter'] += 1
             # self.init_clicked = False
 
-            ## # self.init_pipeline(self.pipeline)
-            ## idx = self.progress.value()
-            ## idx += 1
-            ## self.progress.setValue(idx)
-            ## QApplication.processEvents()
+            # # self.init_pipeline(self.pipeline)
+            # idx = self.progress.value()
+            # idx += 1
+            # self.progress.setValue(idx)
+            # QApplication.processEvents()
 
             # self.main_window.statusBar().showMessage(
-            #'Pipeline "{0}" has been run for {1} {2}. Please wait.'.format(
+            # 'Pipeline "{0}" has been run for {1} {2}. Please wait.'.format(
             # name, iterated_tag, tag_values))
 
             # else:
 
             # soma-workflow remote credentials
-            from soma_workflow.gui.workflowGui import ConnectionDialog
             from soma_workflow import configuration
+            from soma_workflow.gui.workflowGui import ConnectionDialog
+
             config_file = configuration.Configuration.search_config_path()
-            resource_list \
-                = configuration.Configuration.get_configured_resources(
-                    config_file)
+            resource_list = (
+                configuration.Configuration.get_configured_resources(
+                    config_file
+                )
+            )
             login_list = configuration.Configuration.get_logins(config_file)
             engine = self.get_capsul_engine()
             swf_config = engine.settings.select_configurations(
-                'global', {'somaworkflow': 'config_id=="somaworkflow"'})
-            if swf_config.get('use', True):
+                "global", {"somaworkflow": 'config_id=="somaworkflow"'}
+            )
+            if swf_config.get("use", True):
                 cd = ConnectionDialog(login_list, resource_list)
-                sel_resource = swf_config.get('computing_resource', None)
+                sel_resource = swf_config.get("computing_resource", None)
                 if sel_resource and sel_resource in resource_list:
                     cd.ui.combo_resources.setCurrentText(sel_resource)
                 res = cd.exec_()
                 if res == 0:
                     return
                 resource = cd.ui.combo_resources.currentText()
-                login = cd.ui.lineEdit_login.text()
+                # login = cd.ui.lineEdit_login.text()
                 passwd = cd.ui.lineEdit_password.text()
                 rsa_key = cd.ui.lineEdit_rsa_password.text()
                 if resource not in (
-                    '', 'localhost',
-                    configuration.Configuration.get_local_resource_id()):
+                    "",
+                    "localhost",
+                    configuration.Configuration.get_local_resource_id(),
+                ):
                     sc = engine.study_config
-                    if 'SomaWorkflowConfig' in sc.modules:
+                    if "SomaWorkflowConfig" in sc.modules:
                         # not sure this is needed...
                         sc.somaworkflow_computing_resource = resource
-                        #setattr(sc.somaworkflow_computing_resources_config,
-                                #resource, {})
-                        swc = sc.modules['SomaWorkflowConfig']
-                        swc.set_computing_resource_password(resource, passwd,
-                                                            rsa_key)
-                    print('CONNECT TO:', resource)
+                        # setattr(sc.somaworkflow_computing_resources_config,
+                        # resource, {})
+                        swc = sc.modules["SomaWorkflowConfig"]
+                        swc.set_computing_resource_password(
+                            resource, passwd, rsa_key
+                        )
+                    print("CONNECT TO:", resource)
                     engine.connect(resource)
 
-
             self.progress = RunProgress(self)
             self.progress.setSizePolicy(
                 QtWidgets.QSizePolicy.Preferred, QtWidgets.QSizePolicy.Fixed
             )
             self.hLayout.addWidget(self.progress)
             # self.progress.show()
             # self.progress.exec()
@@ -2523,15 +2601,16 @@
             mmovie.frameChanged.connect(self._set_anim_frame)
             mmovie.start()
 
             self.progress.worker.finished.connect(self.finish_execution)
             self.progress.start()
 
             self.init_clicked = False
-            # self.run_pipeline_action.setDisabled(True) # Commented on January, 4th 2020
+            # Commented on January, 4th 2020
+            # self.run_pipeline_action.setDisabled(True)
 
     def saveParameters(self):
         """
         Save the pipeline parameters of the the current pipeline of the
         pipeline editor
         """
 
@@ -2631,15 +2710,14 @@
 
     def show_status(self):
         """
         Show the last run status and execution info, errors etc.
         """
 
         print("show_status")
-        log = getattr(self, "last_run_log", "")
         status_widget = StatusWidget(self)
         status_widget.show()
         self.status_widget = status_widget
 
     def stop_execution(self):
         """
         Request interruption of pipeline execution
@@ -2690,15 +2768,14 @@
 
                 if isinstance(parameters, str):
                     parameters = [parameters]
 
                 temp_plug_name = []
 
                 for parameter in parameters:
-
                     if c_e.scene.pipeline.nodes[""].plugs[parameter].links_to:
                         pip_plug_name = ("inputs", parameter)
 
                     else:
                         pip_plug_name = ("outputs", parameter)
 
                     temp_plug_name.append(pip_plug_name)
@@ -2872,15 +2949,14 @@
         proj_dir = os.path.join(
             os.path.abspath(os.path.normpath(project.folder)), ""
         )
         pl = len(proj_dir)
 
         # retrieve inputs and outputs keys in process,
         if isinstance(process, Process):
-
             inputs = process.get_inputs()
             outputs = process.get_outputs()
             # ProcessMIA / Process_Mia specific
             if hasattr(process, "list_outputs") and hasattr(
                 process, "outputs"
             ):
                 # normally same as outputs, but it may contain an additional
@@ -2918,15 +2994,14 @@
                     outputs[key] = value
 
         # if the process has a single input with a value in the database,
         # then we can deduce its output database tags/attributes from it
 
         values = {}
         for key, value in inputs.items():
-
             trait = process.trait(key)
             if not is_file_trait(trait):
                 continue
 
             paths = []
             if isinstance(value, list):
                 for val in value:
@@ -2959,15 +3034,14 @@
             main_value = values
 
         notInDb = set(outputs.get("notInDb", []))
 
         auto_inheritance_dict = {}
 
         for plug_name, plug_value in outputs.items():
-
             if plug_name in notInDb:
                 continue
 
             trait = process.trait(plug_name)
             if not trait or not is_file_trait(trait):
                 continue
 
@@ -2984,42 +3058,50 @@
                         plug_values.add(value)
 
             for value in plug_values:
                 auto_inheritance_dict[value] = main_value
 
         if auto_inheritance_dict:
             job.auto_inheritance_dict = auto_inheritance_dict
-            # print('auto_inheritance_dict for', node.name, ':', auto_inheritance_dict)
+            # print('auto_inheritance_dict for',
+            #       node.name, ':', auto_inheritance_dict)
 
     def update_inheritance(self, job, node):
+        """Update the inheritance dictionary"""
+
         if node.context_name.split(".")[0] == "Pipeline":
             node_name = ".".join(node.context_name.split(".")[1:])
 
         else:
             node_name = node.context_name
 
         new_inheritance_dict = {}
+
         if node_name in self.project.node_inheritance_history:
             for inherit_dict in self.project.node_inheritance_history[
                 node_name
             ]:
                 dict_found = False
+
                 for inheritance_dict_key in inherit_dict.keys():
                     for param_key, param_value in job.param_dict.items():
                         if (
                             inheritance_dict_key == param_value
                             and not dict_found
                         ):
                             new_inheritance_dict.update(inherit_dict)
                             dict_found = True
+
         if not new_inheritance_dict:
             process = node
+
             if isinstance(process, ProcessNode):
                 process = process.process
             job.inheritance_dict = getattr(process, "inheritance_dict", {})
+
         else:
             job.inheritance_dict = new_inheritance_dict
 
     def update_node_list(self):
         """
         Update the list of nodes in workflow
         """
@@ -3172,15 +3254,16 @@
             self.pipelineEditorTabs.scan_list = (
                 self.project.session.get_documents_names(COLLECTION_CURRENT)
             )
         self.pipelineEditorTabs.update_scans_list()
 
     def update_user_buttons_states(self, index=-1):
         """
-        Update the visibility of initialize/run/save actions according to pipeline state
+        Update the visibility of initialize/run/save actions according to
+        pipeline state
         """
         # Commented on January, 4th 2020
         # With disabling of init button, run button is always available
         # if (hasattr(self.pipelineEditorTabs.get_current_editor(),
         #             'initialized') and
         #         self.pipelineEditorTabs.get_current_editor().initialized):
         #     self.run_pipeline_action.setDisabled(False)
@@ -3199,24 +3282,24 @@
 
         if pipeline is None or len(pipeline.list_process_in_pipeline) == 0:
             self.run_pipeline_action.setDisabled(True)
         else:
             self.run_pipeline_action.setDisabled(False)
         # End - Commented on January, 4th 2020
 
-        ### Uncomment below to not allow to save an iterated pipeline: ##
+        # Uncomment below to not allow to save an iterated pipeline: ###
         # if (hasattr(self.pipelineEditorTabs.get_current_editor(),
         #            'iterated') and
         #        self.pipelineEditorTabs.get_current_editor().iterated):
         #    self.save_pipeline_as_action.setDisabled(True)
         #    self.save_pipeline_action.setDisabled(True)
         # else:
         #    self.save_pipeline_as_action.setDisabled(False)
         #    self.save_pipeline_action.setDisabled(False)
-        ### End Comment ###
+        # End Comment ###
 
     def update_user_mode(self):
         """
         Update the visibility of widgets/actions depending of the chosen mode
         """
 
         config = Config()
@@ -3262,15 +3345,14 @@
     The progress bar is closed when the thread finishes.
 
     :param pipeline_manager: A PipelineManagerTab
     :param settings: dictionary of settings when the pipeline is iterated
     """
 
     def __init__(self, pipeline_manager, settings=None):
-
         super(RunProgress, self).__init__()
 
         self.pipeline_manager = pipeline_manager
 
         self.progressbar = QtWidgets.QProgressBar()
         layout = QHBoxLayout()
         self.setLayout(layout)
@@ -3283,23 +3365,25 @@
         self.worker = RunWorker(self.pipeline_manager)
         self.worker.finished.connect(self.end_progress)
 
     # def __del__(self):
     # self.cleanup()
 
     def cleanup(self):
+        """blabla"""
+
         self.worker.wait()
         self.worker.finished.disconnect()  # self.end_progress)
         del self.worker
         # self.progressbar.deleteLater()
         # del self.progressbar
         # self.hide()
 
     def end_progress(self):
-
+        """blabla"""
         self.worker.wait()
         QApplication.instance().restoreOverrideCursor()
 
         if not hasattr(self.worker, "exec_id"):
             mbox_icon = QMessageBox.Critical
             mbox_title = "Failure"
             mbox_text = (
@@ -3309,35 +3393,37 @@
         else:
             try:
                 pipeline = self.pipeline_manager.get_pipeline_or_process()
                 engine = pipeline.get_study_config().engine
                 engine.raise_for_status(
                     self.worker.status, self.worker.exec_id
                 )
-            except WorkflowExecutionError as e:
+            except WorkflowExecutionError:
                 mbox_icon = QMessageBox.Critical
                 mbox_title = "Failure"
                 mbox_text = (
                     "Pipeline execution has failed:\n"
                     "Please see details using the status report button"
                 )
             else:
                 mbox_icon = QMessageBox.Information
                 mbox_title = "Success"
                 mbox_text = "Pipeline execution was OK."
         mbox = QMessageBox(mbox_icon, mbox_title, mbox_text)
-        timer = QTimer.singleShot(2000, mbox.accept)
+        QTimer.singleShot(2000, mbox.accept)
         mbox.exec()
 
     def start(self):
+        """blabla"""
 
         self.worker.start()
         # self.progressbar.setValue(20)
 
     def stop_execution(self):
+        """blabla"""
 
         print("*** CANCEL ***")
         with self.worker.lock:
             self.worker.interrupt_request = True
         # self.close()
 
 
@@ -3351,15 +3437,18 @@
         self.lock = threading.RLock()
         self.status = swconstants.WORKFLOW_NOT_STARTED
         # when interrupt_request is set (within a lock session from a different
         # thread), the worker will interrupt execution and leave the thread.
         self.interrupt_request = False
 
     def run(self):
+        """blabla"""
+
         def _check_nipype_processes(pplne):
+            """blabla"""
 
             if isinstance(pplne, Pipeline):
                 for node_name, node in pplne.nodes.items():
                     if not hasattr(node, "process"):
                         continue  # not a process node
                     if isinstance(node.process, Pipeline):
                         if node_name != "":
@@ -3378,18 +3467,14 @@
         _check_nipype_processes(pipeline)
 
         with self.lock:
             if self.interrupt_request:
                 print("*** INTERRUPT ***")
                 return
 
-        # Reading config
-        config = Config()
-        capsul_config = config.get_capsul_config()
-
         engine = self.pipeline_manager.get_capsul_engine()
 
         with self.lock:
             if self.interrupt_request:
                 print("*** INTERRUPT ***")
                 return
 
@@ -3406,22 +3491,24 @@
         print("- Pipeline running ...\n")
 
         workflow = self.pipeline_manager.workflow
         # if we are running with file transfers / translations, then we must
         # rebuild the workflow, because it has not been made with them.
         resource_id = engine.connected_to()
         resource_conf = engine.settings.select_configurations(
-            resource_id, {'somaworkflow': 'config_id=="somaworkflow"'}).get(
-                'capsul.engine.module.somaworkflow', {})
-        if resource_conf.get('transfer_paths', None) \
-                or resource_conf.get('path_translations', None):
-            print('rebuilding workflow for file transfers / translations...')
+            resource_id, {"somaworkflow": 'config_id=="somaworkflow"'}
+        ).get("capsul.engine.module.somaworkflow", {})
+        if resource_conf.get("transfer_paths", None) or resource_conf.get(
+            "path_translations", None
+        ):
+            print("rebuilding workflow for file transfers / translations...")
             workflow = workflow_from_pipeline(
-                pipeline, complete_parameters=True, environment=resource_id)
-            print('running now...')
+                pipeline, complete_parameters=True, environment=resource_id
+            )
+            print("running now...")
 
         try:
             exec_id, pipeline = engine.start(
                 pipeline,
                 workflow=workflow,
                 get_pipeline=True,
             )
@@ -3459,15 +3546,14 @@
 
 class StatusWidget(QWidget):
     """
     Status widget: displays info about the current or last pipeline execution
     """
 
     def __init__(self, pipeline_manager):
-
         super().__init__()
         self.pipeline_manager = pipeline_manager
         layout = QVBoxLayout()
         self.setLayout(layout)
         self.edit = QtWidgets.QTextBrowser()
         log = getattr(pipeline_manager, "last_run_log", "")
         self.edit.setText(log)
@@ -3493,23 +3579,25 @@
         layout.addWidget(swf_box)
         layout.addWidget(QtWidgets.QLabel("Execution log:"))
         layout.addWidget(self.edit)
         self.resize(600, 800)
         self.setWindowTitle("Execution status")
 
     def toggle_soma_workflow(self, checked):
+        """blabla"""
 
         if self.swf_widget is not None:
             self.swf_widget.setVisible(checked)
             if not checked:
                 return
         else:
-            from soma_workflow.gui.workflowGui import (ApplicationModel,
-                                                       MainWindow,
-                                                       SomaWorkflowWidget)
+            from soma_workflow.gui.workflowGui import (
+                ApplicationModel,
+                MainWindow,
+            )
 
             model = ApplicationModel()
             sw_widget = MainWindow(
                 model, None, True, None, None, interactive=False
             )
             self.swf_widget = sw_widget
             self.swf_box.layout().addWidget(sw_widget)
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/pipeline_manager/process_library.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/pipeline_manager/process_library.py`

 * *Files 2% similar despite different names*

```diff
@@ -30,41 +30,61 @@
 
 # Other import
 import distutils.dir_util
 import glob
 import inspect
 import os
 import pkgutil
-import re
 import shutil
 import sys
 import tempfile
 import traceback
 from copy import copy, deepcopy
 from datetime import datetime
 from functools import partial
 from zipfile import ZipFile, is_zipfile
 
 import yaml
+
 # capsul import
 from capsul.api import get_process_instance
+
 # PyQt5 import
 from PyQt5 import QtCore
+
 # QAbstractItemView is not available from soma (see in PackageLibraryDialog)
 from PyQt5.QtWidgets import QAbstractItemView
+
 # PyQt / PySide import, via soma
 from soma.qt_gui import qt_backend
 from soma.qt_gui.qt_backend import QtGui
-from soma.qt_gui.qt_backend.Qt import (QApplication, QDialog, QFileDialog,
-                                       QHBoxLayout, QLabel, QLineEdit,
-                                       QMessageBox, QPushButton, QSplitter,
-                                       QTreeView, QTreeWidget, QTreeWidgetItem,
-                                       QVBoxLayout, QWidget)
-from soma.qt_gui.qt_backend.QtCore import (QAbstractItemModel, QByteArray,
-                                           QMimeData, QModelIndex, Qt, Signal)
+from soma.qt_gui.qt_backend.Qt import (
+    QApplication,
+    QDialog,
+    QFileDialog,
+    QHBoxLayout,
+    QLabel,
+    QLineEdit,
+    QMessageBox,
+    QPushButton,
+    QSplitter,
+    QTreeView,
+    QTreeWidget,
+    QTreeWidgetItem,
+    QVBoxLayout,
+    QWidget,
+)
+from soma.qt_gui.qt_backend.QtCore import (
+    QAbstractItemModel,
+    QByteArray,
+    QMimeData,
+    QModelIndex,
+    Qt,
+    Signal,
+)
 from soma.qt_gui.qt_backend.QtWidgets import QGroupBox, QListWidget, QMenu
 
 # Populse_MIA import
 from populse_mia.software_properties import Config, verCmp
 
 
 class DictionaryTreeModel(QAbstractItemModel):
@@ -376,15 +396,14 @@
             :param proc_dic: the process tree-dictionary
             :param module_name: name of the module
             :return: proc_dic: the modified process tree-dictionary
 
             """
 
             if module_name:
-
                 # Reloading the package
                 if module_name in sys.modules.keys():
                     del sys.modules[module_name]
 
                 try:
                     __import__(module_name)
 
@@ -412,44 +431,40 @@
 
                 pkg = sys.modules[module_name]
 
                 # Checking if there are subpackages
                 for importer, modname, ispkg in pkgutil.iter_modules(
                     pkg.__path__
                 ):
-
                     if ispkg:
                         _add_package(
                             proc_dic, str(module_name + "." + modname)
                         )
 
                 for k, v in sorted(list(pkg.__dict__.items())):
                     # Checking each class of in the package
                     if inspect.isclass(v):
-
                         try:
                             print(
                                 "\nInstalling %s.%s ..."
                                 % (module_name, v.__name__)
                             )
                             get_process_instance(
                                 "%s.%s" % (module_name, v.__name__)
                             )
                             # Updating the tree's dictionnary
                             path_list = module_name.split(".")
                             path_list.append(k)
                             pkg_iter = proc_dic
 
                             for element in path_list:
-
                                 if element in pkg_iter.keys():
                                     pkg_iter = pkg_iter[element]
 
                                 else:
-
                                     if element is path_list[-1]:
                                         pkg_iter[element] = "process_enabled"
 
                                     else:
                                         pkg_iter[element] = {}
                                         pkg_iter = pkg_iter[element]
 
@@ -474,15 +489,14 @@
             :param path: path of the extracted or copied processes
             :param old_pattern: old pattern
             :param new_pattern: new pattern
 
             """
 
             for dname, dirs, files in os.walk(path):
-
                 for fname in files:
                     # Modifying only .py files (pipelines are saved with
                     # this extension)
 
                     if fname[-2:] == "py":
                         fpath = os.path.join(dname, fname)
 
@@ -490,20 +504,30 @@
                             s = f.read()
 
                         s = s.replace(old_pattern + ".", new_pattern + ".")
 
                         with open(fpath, "w") as f:
                             f.write(s)
 
+        try:
+            self.main_window.statusBar().showMessage(
+                "Package installation, " "please wait ..."
+            )
+            QApplication.processEvents()
+
+        except AttributeError:
+            self.main_window.status_label.setText(
+                "Package installation, " "please wait ..."
+            )
+
         self.result_add_package = True
         filename = self.path_edit.text()
         config = Config()
 
         if not os.path.isdir(filename):
-
             if not os.path.isfile(filename):
                 msg = QMessageBox()
                 msg.setIcon(QMessageBox.Critical)
                 msg.setText("The specified file cannot be found")
                 msg.setWindowTitle("Warning")
                 msg.setStandardButtons(QMessageBox.Ok)
                 msg.buttonClicked.connect(msg.close)
@@ -517,15 +541,14 @@
                 msg.setWindowTitle("Warning")
                 msg.setStandardButtons(QMessageBox.Ok)
                 msg.buttonClicked.connect(msg.close)
                 msg.exec()
                 return
 
         try:
-
             if (
                 os.path.abspath(
                     os.path.join(config.get_mia_path(), "processes")
                 )
                 not in sys.path
             ):
                 sys.path.append(
@@ -551,15 +574,14 @@
 
             with open(
                 os.path.join(
                     config.get_mia_path(), "properties", "process_config.yml"
                 ),
                 "r",
             ) as stream:
-
                 try:
                     if verCmp(yaml.__version__, "5.1", "sup"):
                         process_dic = yaml.load(stream, Loader=yaml.FullLoader)
                     else:
                         process_dic = yaml.load(stream)
 
                 except yaml.YAMLError as exc:
@@ -598,18 +620,16 @@
                 )
                 if not os.path.isfile(
                     os.path.join(config.get_mia_path(), "processes", dire)
                 )
             ]
 
             if is_zipfile(filename):
-
                 # Extraction of the zipped content
                 with ZipFile(filename, "r") as zip_ref:
-
                     packages_name = [
                         member.split("/")[0]
                         for member in zip_ref.namelist()
                         if (
                             len(member.split("/")) == 2
                             and not member.split("/")[-1]
                         )
@@ -625,15 +645,14 @@
                 # package_name: package(s) in the zip file or in folder
 
                 if (package_name not in packages_already) or (
                     package_name == "mia_processes"
                 ):
                     # Copy MIA_processes in a temporary folder
                     if mia_processes_not_found:
-
                         if (package_name == "mia_processes") and (
                             os.path.exists(
                                 os.path.join(
                                     config.get_mia_path(),
                                     "processes",
                                     "mia_processes",
                                 )
@@ -647,15 +666,14 @@
                                     "processes",
                                     "mia_processes",
                                 ),
                                 os.path.join(tmp_folder4MIA, "MIA_processes"),
                             )
 
                     if is_zipfile(filename):
-
                         with ZipFile(filename, "r") as zip_ref:
                             members_to_extract = [
                                 member
                                 for member in zip_ref.namelist()
                                 if member.startswith(package_name)
                             ]
                             zip_ref.extractall(
@@ -680,15 +698,14 @@
                             ),
                         )
 
                 else:
                     date = datetime.now().strftime("%Y%m%d%H%M%S")
 
                     if is_zipfile(filename):
-
                         with ZipFile(filename, "r") as zip_ref:
                             temp_dir = tempfile.mkdtemp()
                             members_to_extract = [
                                 member
                                 for member in zip_ref.namelist()
                                 if member.startswith(package_name)
                             ]
@@ -780,14 +797,15 @@
             self.result_add_package = False
             messg = ('Installation of the "{0}" library ' "aborted!").format(
                 package_name
             )
 
             try:
                 self.main_window.statusBar().showMessage(messg)
+                QApplication.processEvents()
 
             except AttributeError:
                 self.main_window.status_label.setText(messg)
 
             msg = QMessageBox()
             msg.setIcon(QMessageBox.Critical)
             msg.setText(
@@ -795,14 +813,15 @@
                 "the standard output screen for more "
                 "details.".format(package_name)
             )
             msg.setWindowTitle("Warning")
             msg.setStandardButtons(QMessageBox.Ok)
             msg.buttonClicked.connect(msg.close)
             msg.exec()
+            self.close()
 
             # Resetting process_config.yml
             if process_dic_orig is None:
                 process_dic_orig = {}
 
             with open(
                 os.path.join(
@@ -847,56 +866,59 @@
             if "tmp_folder4MIA" in locals():
                 shutil.rmtree(tmp_folder4MIA)
 
             if "temp_dir" in locals():
                 shutil.rmtree(temp_dir)
 
         else:
-
             if self.result_add_package:
                 messg = (
                     'The "{0}" library has been ' "correctly installed."
                 ).format(package_name)
 
                 try:
                     self.main_window.statusBar().showMessage(messg)
+                    QApplication.processEvents()
 
                 except AttributeError:
                     self.main_window.status_label.setText(messg)
 
                 msg = QMessageBox()
                 msg.setWindowTitle("Installation completed")
                 msg.setText(
                     'The "{0}" package has been correctly '
                     "installed.".format(package_name)
                 )
                 msg.setStandardButtons(QMessageBox.Ok)
                 msg.buttonClicked.connect(msg.close)
                 msg.exec()
+                self.close()
 
             else:
                 messg = (
                     'The "{0}" library has not been ' "correctly installed."
                 ).format(package_name)
 
                 try:
                     self.main_window.statusBar().showMessage(messg)
+                    QApplication.processEvents()
 
                 except AttributeError:
                     self.main_window.status_label.setText(messg)
 
                 msg = QMessageBox()
                 msg.setWindowTitle("Installation completed with error(s)")
                 msg.setText(
                     'The "{0}" package has not been correctly '
                     "installed.".format(package_name)
                 )
                 msg.setStandardButtons(QMessageBox.Ok)
                 msg.buttonClicked.connect(msg.close)
                 msg.exec()
+                self.close()
 
 
 class Node(object):
     """Class to handle a package children.
 
     .. Methods:
         -  __repr__: Define what should be printed by the class
@@ -1060,17 +1082,21 @@
         """Return the name of the object.
 
         :return: name
 
         """
 
         def fget(self):
+            """Get the name of the object."""
+
             return self._name
 
         def fset(self, value):
+            """Set tye name of the object."""
+
             self._name = value
 
         return locals()
 
     name = property(**name())
 
     def parent(self):
@@ -1139,17 +1165,21 @@
         """Return the value of the object.
 
         :return: value
 
         """
 
         def fget(self):
+            """Get the value of the object."""
+
             return self._value
 
         def fset(self, value):
+            """Set tye value of the object."""
+
             self._value = value
 
         return locals()
 
     value = property(**value())
 
     def setData(self, column, value):
@@ -1189,15 +1219,16 @@
         - update_checks: updates the checks of the tree from an item
 
     """
 
     def __init__(self, package_tree, paths):
         """Initialization of the PackageLibrary widget.
 
-        :param package_tree: representation of the packages as a tree-dictionary
+        :param package_tree: representation of the packages as
+                             a tree-dictionary
         :param paths: list of paths to add to the system to import the packages
 
         """
 
         super(PackageLibrary, self).__init__()
 
         self.itemChanged.connect(self.update_checks)
@@ -1597,15 +1628,14 @@
             self.update_config()
             del self.packages
 
         self.packages = self.package_library.package_tree
         config = Config()
 
         if module_name:
-
             if (
                 os.path.abspath(
                     os.path.join(config.get_mia_path(), "processes")
                 )
                 not in sys.path
             ):
                 sys.path.append(
@@ -1622,31 +1652,27 @@
 
             try:
                 __import__(module_name)
                 pkg = sys.modules[module_name]
 
                 # Checking if there are subpackages
                 if hasattr(pkg, "__path__"):
-
                     for importer, modname, ispkg in pkgutil.iter_modules(
                         pkg.__path__
                     ):
-
                         if ispkg and modname != "__main__":
                             err_msg += self.add_package(
                                 str(module_name + "." + modname),
                                 class_name,
                                 show_error=False,
                             )
 
                 for k, v in sorted(list(pkg.__dict__.items())):
-
                     # Checking each class of in the package
                     if inspect.isclass(v):
-
                         try:
                             get_process_instance(
                                 "%s.%s" % (module_name, v.__name__)
                             )
 
                         except Exception as e:
                             print(
@@ -1663,28 +1689,25 @@
                             # Updating the tree's dictionary
                             path_list = module_name.split(".")
                             path_list.append(k)
                             pkg_iter = self.packages
                             recurs = False
 
                             for element in path_list:
-
                                 if element == class_name:
                                     recurs = True
 
                                 if (
                                     element in pkg_iter.keys()
                                     and element is not path_list[-1]
                                 ):
                                     pkg_iter = pkg_iter[element]
 
                                 else:
-
                                     if element is path_list[-1]:
-
                                         if (
                                             element == class_name
                                             or recurs is True
                                         ):
                                             print(
                                                 "\nAdding %s.%s ..."
                                                 % (module_name, v.__name__)
@@ -1700,18 +1723,18 @@
                                         #     print(
                                         #         '\nA not installed pipeline '
                                         #         'was detected in the %s '
                                         #         'library:' % (path_list[0]))
                                         #     print('- %s.%s ...' % (
                                         #         module_name, v.__name__))
                                         #     print(
-                                        #         'This pipeline is now '
-                                        #         'installed but disabled '
-                                        #         '(see File > Package Library '
-                                        #         'Manager to enable it) ...')
+                                        #        'This pipeline is now '
+                                        #        'installed but disabled '
+                                        #        '(see File > Package Library '
+                                        #        'Manager to enable it) ...')
                                         #     pkg_iter[
                                         #         element] = 'process_disabled'
 
                                     else:
                                         pkg_iter[element] = {}
                                         pkg_iter = pkg_iter[element]
 
@@ -1774,15 +1797,14 @@
                 for content in _2add.split("."):
                     part += content
 
                     try:
                         __import__(part)
 
                     except ImportError:
-
                         try:
                             flag = True
 
                             if content in dir(sys.modules[old_part]):
                                 errors = self.add_package(
                                     os.path.splitext(_2add)[0],
                                     os.path.splitext(_2add)[1][1:],
@@ -1916,15 +1938,14 @@
             self.msg.setWindowTitle("Warning")
             self.msg.setStandardButtons(QMessageBox.Ok)
             self.msg.buttonClicked.connect(self.msg.close)
             self.msg.show()
             return deleted_packages
 
         if to_delete.split(".")[0] in ["nipype", "mia_processes", "capsul"]:
-
             if from_pipeline_manager:
                 inform_text = (
                     "This package belongs to "
                     + to_delete.split(".")[0]
                     + " which is required "
                     "by populse mia.\n You can still hide it in the "
                     "package library manager."
@@ -1974,15 +1995,14 @@
                 sub_deleted_packages = self.delete_package(
                     index + 1,
                     to_delete,
                     from_pipeline_manager=from_pipeline_manager,
                 )
 
                 for sub_pkg in sub_deleted_packages:
-
                     if sub_pkg not in deleted_packages:
                         deleted_packages.append(sub_pkg)
 
                 if os.path.exists(path):
                     del_path = False
 
                     if (len(glob.glob(os.path.join(path, "*"))) == 0) or (
@@ -1990,24 +2010,21 @@
                     ):
                         del_path = True
 
                     else:
                         is_import = False
 
                         for root, dirs, files in os.walk(path):
-
                             if "__init__.py" in files:
-
                                 with open(
                                     os.path.join(root, "__init__.py"), "r"
                                 ) as f:
                                     lines = f.readlines()
 
                                 for line in lines:
-
                                     if (
                                         not line.startswith("#")
                                         and "import" in line
                                     ):
                                         is_import = True
 
                         if (
@@ -2020,25 +2037,27 @@
                         shutil.rmtree(path)
                         self.main_window.statusBar().showMessage(
                             "{0} was "
                             "deleted ({1} library) ...".format(
                                 path, os.path.split(path)[-1]
                             )
                         )
+                        # fmt: off
                         print(
                             "\nDeleting {0} "
                             "...".format(
                                 ".".join(
                                     path.split(os.sep)[
                                         path.split(os.sep).index("processes")
-                                        + 1 :
+                                        + 1:
                                     ]
                                 )
                             )
                         )
+                        # fmt: on
 
                         if index > 0 and remove:
                             self.remove_package_with_text(
                                 ".".join(pkg_list[0:index]), False
                             )
 
                 else:
@@ -2048,37 +2067,33 @@
                             "processes",
                             *pkg_list[: index - 1],
                             "__init__.py"
                         )
                     )
 
                     if os.path.isfile(init):
-
                         with open(init, "r") as f:
                             lines = f.readlines()
 
                         import_line = False
                         imports_in_init = dict()
                         imports_string = ""
 
                         for line in lines:
-
                             if (line.startswith("#") is False) and (
                                 "import" in line
                             ):
                                 from_package = line.split(" ")[1]
                                 from_package = from_package[1:]
                                 imports_in_init[from_package] = []
 
                         for line in lines:
-
                             if (line.startswith("#") is False) and (
                                 ("import" in line) or (import_line is True)
                             ):
-
                                 if "from" in line:
                                     from_package = line.split(" ")[1]
                                     from_package = from_package[1:]
                                     imports_string = "".join(
                                         [
                                             imports_string,
                                             line.split("import")[1],
@@ -2112,15 +2127,14 @@
                         if not imports_in_init:
                             print(
                                 "\nThe {} brick seems to be corrupted and is "
                                 "not accessible ...".format(to_delete)
                             )
 
                         for key in imports_in_init:
-
                             if pkg_list[index - 1] in imports_in_init[key]:
                                 filename = key + ".py"
                                 delete_all = True
 
                                 if len(imports_in_init[key]) > 1:
                                     msgtext = (
                                         "The brick (class) {0} alone "
@@ -2163,20 +2177,22 @@
                                         delete_all = False
 
                                 if delete_all is True:
                                     dir_init = os.path.split(init)[0]
                                     file2del = os.path.join(dir_init, filename)
 
                                     if os.path.isfile(file2del):
+                                        # fmt: off
                                         name = file2del.split(os.sep)[
                                             file2del.split(os.sep).index(
                                                 "processes"
                                             )
-                                            + 1 : -1
+                                            + 1:-1
                                         ]
+                                        # fmt: on
                                         name = ".".join(name)
 
                                         for pkg in imports_in_init[key]:
                                             deleted_packages.append(
                                                 ".".join([name, pkg])
                                             )
 
@@ -2184,76 +2200,69 @@
                                             print(
                                                 "\nDeleting {0} "
                                                 "...".format(pkg)
                                             )
 
                                         os.remove(file2del)
                                         (
-                                            self.main_window.statusBar().showMessage
-                                        )(
+                                            self.main_window.statusBar
+                                        )().showMessage(
                                             "{0} was deleted ({1} "
                                             "brick(s)) "
                                             "...".format(
                                                 file2del,
                                                 ", ".join(
                                                     imports_in_init[key]
                                                 ),
                                             )
                                         )
 
                                     if remove:
-
                                         for pkg in deleted_packages:
                                             self.remove_package_with_text(
                                                 pkg, False
                                             )
 
                                     # rewrite __init_.py to wipe module
                                     import_line = False
 
                                     with open(init, "w") as f:
-
                                         for line in lines:
-
                                             if key in line:
-
                                                 if "(" in line:
                                                     import_line = True
 
                                             elif import_line is True:
-
                                                 if ")" in line:
                                                     import_line = False
 
                                             elif import_line is False:
                                                 f.write(line)
 
                                     # if all packages have been deleted,
                                     # cleaning up empty files
                                     with open(init, "r") as f:
                                         lines = f.readlines()
 
                                     is_import = False
 
                                     for line in lines:
-
                                         if (
                                             not line.startswith("#")
                                             and "import" in line
                                         ):
                                             is_import = True
 
                                     if (
                                         not is_import
                                         and pkg_list[0] != "User_processes"
                                     ):
                                         os.remove(init)
 
                                         for elt in os.listdir(dir_init):
-
                                             if elt == "__pycache__":
                                                 shutil.rmtree(
                                                     os.path.join(
                                                         dir_init, elt
                                                     ),
                                                     ignore_errors=True,
                                                 )
@@ -2289,36 +2298,32 @@
         if _2del not in self.delete_dic:
             package_removed = self.remove_package(_2del)
 
         else:
             package_removed = True
 
         if package_removed is True:
-
             if update_view:
-
                 if _2del not in self.delete_dic:
                     self.del_list.addItem(_2del)
                     self.delete_dic[_2del] = self.del_list.count() - 1
 
             if _2del in self.add_dic:
                 index = self.add_dic[_2del]
                 self.add_list.takeItem(self.add_dic[_2del])
                 self.add_dic.pop(_2del)
                 for key in self.add_dic:
-
                     if self.add_dic[key] > index:
                         self.add_dic[key] = self.add_dic[key] - 1
 
             if _2del in self.remove_dic:
                 index = self.remove_dic[_2del]
                 self.remove_list.takeItem(self.remove_dic[_2del])
                 self.remove_dic.pop(_2del)
                 for key in self.remove_dic:
-
                     if self.remove_dic[key] > index:
                         self.remove_dic[key] = self.remove_dic[key] - 1
 
             self.status_label.setText(
                 "{0} deleted from Package Library.".format(_2del)
             )
 
@@ -2352,15 +2357,14 @@
 
         with open(
             os.path.join(
                 config.get_mia_path(), "properties", "process_config.yml"
             ),
             "r",
         ) as stream:
-
             try:
                 if verCmp(yaml.__version__, "5.1", "sup"):
                     return yaml.load(stream, Loader=yaml.FullLoader)
 
                 else:
                     return yaml.load(stream)
 
@@ -2431,15 +2435,14 @@
         :return: True if the package has been removed correctly
 
         """
         self.packages = self.package_library.package_tree
         config = Config()
 
         if package:
-
             if (
                 os.path.abspath(
                     os.path.join(config.get_mia_path(), "processes")
                 )
                 not in sys.path
             ):
                 sys.path.append(
@@ -2454,17 +2457,15 @@
             if package in self.remove_dic or package in self.delete_dic:
                 check_flag = True
 
             else:
                 check_flag = False
 
             for element in path_list:
-
                 if element in pkg_iter.keys():
-
                     if element is not path_list[-1]:
                         pkg_iter = pkg_iter[element]
 
                     else:
                         del pkg_iter[element]
 
                         if path_list[: path_list.index(element)]:
@@ -2593,15 +2594,14 @@
         # Updating the packages and the paths according to the
         # package library tree
 
         self.packages = self.package_library.package_tree
         self.paths = self.package_library.paths
 
         if self.process_config:
-
             if self.process_config.get("Packages"):
                 del self.process_config["Packages"]
 
             if self.process_config.get("Paths"):
                 del self.process_config["Paths"]
         else:
             self.process_config = {}
@@ -2708,19 +2708,16 @@
         self.pkg_library = pkg_lib
 
     def keyPressEvent(self, event):
         """Event when the delete key is pressed."""
         config = Config()
 
         if event.key() == QtCore.Qt.Key_Delete and not config.get_user_mode():
-
             for idx in self.selectedIndexes():
-
                 if idx.isValid:
-                    model = idx.model()
                     idx = idx.sibling(idx.row(), 0)
                     node = idx.internalPointer()
 
                     if node is not None:
                         txt = node.data(idx.column())
                         (self.pkg_library.package_library.package_tree) = (
                             self.pkg_library.load_config
@@ -2749,15 +2746,14 @@
         """Event when the mouse is pressed."""
 
         idx = self.indexAt(event.pos())
         # print('idx',dir(idx.model()))
         config = Config()
 
         if idx.isValid:
-            model = idx.model()
             idx = idx.sibling(idx.row(), 0)
             node = idx.internalPointer()
 
             if node is not None:
                 self.setCurrentIndex(idx)
                 txt = node.data(idx.column())
                 path = txt.encode()
@@ -2902,15 +2898,14 @@
 
         with open(
             os.path.join(
                 config.get_mia_path(), "properties", "process_config.yml"
             ),
             "r",
         ) as stream:
-
             try:
                 if verCmp(yaml.__version__, "5.1", "sup"):
                     return yaml.load(stream, Loader=yaml.FullLoader)
                 else:
                     return yaml.load(stream)
 
             except yaml.YAMLError as exc:
@@ -3010,38 +3005,34 @@
     """
 
     if not parent:
         root_node = Node("Root")
         parent = root_node
 
     for name, data in sorted(datadict.items()):
-
         if isinstance(data, dict):
-
             if True in [
                 True for value in data.values() if value == "process_enabled"
             ]:
                 list_name = [
                     value
                     for value in data.values()
                     if value == "process_enabled"
                 ]
 
             else:
-
                 list_name = []
                 list_values = [
                     value for value in data.values() if isinstance(value, dict)
                 ]
 
                 while list_values:
                     value = list_values.pop()
 
                     for i in value.values():
-
                         if not isinstance(i, dict):
                             list_name.append(i)
 
                     list_values = list_values + [
                         i for i in value.values() if isinstance(i, dict)
                     ]
 
@@ -3083,15 +3074,15 @@
 #         source_model = self.sourceModel()
 #         index0 = source_model.index(source_row, 0, source_parent)
 #         # Always show directories
 #         if source_model.isDir(index0):
 #             return True
 #         # filter files
 #         filename = source_model.fileName(index0)
-#         #       filename=self.sourceModel().index(row,0,parent).data().lower()
+#         # filename=self.sourceModel().index(row,0,parent).data().lower()
 #         # return True
 #         if filename.count(".py") + filename.count(".xml") == 0:
 #             return False
 #         else:
 #             return True
 #
 #     def flags(self, index):
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/pipeline_manager/process_mia.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/pipeline_manager/process_mia.py`

 * *Files 10% similar despite different names*

```diff
@@ -15,34 +15,35 @@
 # Populse_mia - Copyright (C) IRMaGe/CEA, 2018
 # Distributed under the terms of the CeCILL license, as published by
 # the CEA-CNRS-INRIA. Refer to the LICENSE file or to
 # http://www.cecill.info/licences/Licence_CeCILL_V2.1-en.html
 # for details.
 ##########################################################################
 
-# Capsul imports
-import copy
 # Other imports
 import os
 import traceback
 import uuid
-import weakref
 
-import six
 import traits.api as traits
 from capsul.api import Pipeline, Process, capsul_engine
 from capsul.attributes.completion_engine import (
-    ProcessCompletionEngine, ProcessCompletionEngineFactory)
-from capsul.attributes.completion_engine_factory import \
-    BuiltinProcessCompletionEngineFactory
+    ProcessCompletionEngine,
+    ProcessCompletionEngineFactory,
+)
+from capsul.attributes.completion_engine_factory import (
+    BuiltinProcessCompletionEngineFactory,
+)
 from capsul.pipeline.pipeline_nodes import ProcessNode
 from capsul.pipeline.process_iteration import ProcessIteration
 from capsul.process.process import NipypeProcess
+
 # nipype imports
 from nipype.interfaces.base import File, InputMultiObject, traits_extension
+
 # Soma-base import
 from soma.controller.trait_utils import relax_exists_constraint
 from soma.utils.weak_proxy import get_ref
 from traits.trait_base import Undefined
 
 # Populse_MIA imports
 from populse_mia.data_manager.project import COLLECTION_CURRENT
@@ -72,29 +73,63 @@
     The "normal" Capsul completion system is also complemented using MIA
     database: attributes from input parameters in the database (called "tags"
     here in MIA) are added to the completion attributes.
 
     The MIA project will keep track of completed processes, in the correct
     completion order, so that other operations can be performed following the
     same order later after completion.
+
+    :Contains:
+        :Method:
+            - __init__: constructor
+            - complete_attributes_with_database:  augments the Capsul
+            completion system attributes associated with a process
+            - complete_nipype_common: set Nipype parameters for SPM
+            - complete_parameters: completes file parameters from
+            given inputs parameters
+            - complete_parameters_mia: Completion for :class:`ProcessMIA`
+            instances
+            - get_attribute_values: re-route to underlying fallback engine
+            - get_path_completion_engine: re-route to underlying fallback
+            engine
+            - get_project: get the project associated with the process
+            - path_attributes: re-route to underlying fallback engine
+            - remove_switch_observe: reimplemented since it is expectes
+            in switches completion engine
+
     """
 
     def __init__(self, process, name, fallback_engine):
+        """Constructor.
+
+        Parameters
+        ----------
+        process: a process
+        name: the name of the process
+        fallback_engine: the fallback engine for the process
+
+        """
 
         super(MIAProcessCompletionEngine, self).__init__(process, name)
 
         self.fallback_engine = fallback_engine
         self.completion_progress = 0.0
         self.completion_progress_total = 0.0
 
     def complete_attributes_with_database(self, process_inputs={}):
         """
         Augments the Capsul completion system attributes associated with a
         process. Attributes from the database are queried for input parameters,
         and added to the completion attributes values, if they match.
+
+        Parameters
+        ----------
+        process_inputs: dict (optional)
+            parameters to be set on the process.
+
         """
 
         # re-route to underlying fallback engine
         attributes = self.fallback_engine.get_attribute_values()
         process = self.process
         if isinstance(process, ProcessNode):
             process = process.process
@@ -116,15 +151,14 @@
 
         proj_dir = os.path.join(
             os.path.abspath(os.path.realpath(project.folder)), ""
         )
         pl = len(proj_dir)
 
         for param, par_value in process.get_inputs().items():
-
             # update value from given forced input
             par_value = process_inputs.get(param, par_value)
             if isinstance(par_value, list):
                 par_values = par_value
             else:
                 par_values = [par_value]
 
@@ -175,14 +209,19 @@
 
     @staticmethod
     def complete_nipype_common(process):
         """
         Set Nipype parameters for SPM. This is used both on
         :class:`NipypeProcess` and :class:`ProcessMIA` instances which have the
         appropriate parameters.
+
+        Parameters
+        ----------
+        process: a process
+
         """
 
         # Test for matlab launch
         if process.trait("use_mcr"):
             config = Config()
 
             if config.get_use_spm_standalone():
@@ -196,15 +235,14 @@
                 process.matlab_cmd = config.get_matlab_command()
 
         # add "project" attribute if the process is using it
         study_config = process.get_study_config()
         project = getattr(study_config, "project", None)
 
         if project:
-
             if hasattr(process, "use_project") and process.use_project:
                 process.project = project
 
             # set output_directory
             if process.trait(
                 "output_directory"
             ) and process.output_directory in (None, Undefined, ""):
@@ -234,27 +272,29 @@
 
                 if not process.trait(tname) and process.trait(
                     "spm_script_file"
                 ):
                     tname = "spm_script_file"
 
                 if tname:
-
                     if hasattr(process, "_nipype_interface"):
                         iscript = (
                             process._nipype_interface.mlab.inputs.script_file
                         )
 
                     elif hasattr(process, "process") and hasattr(
                         process.process, "_nipype_interface"
                     ):
                         # ProcessMIA with a NipypeProcess inside
+                        # fmt: off
                         iscript = (
-                            process.process._nipype_interface.mlab.inputs.script_file
+                            process.process._nipype_interface.
+                            mlab.inputs.script_file
                         )
+                        # fmt: on
 
                     else:
                         iscript = process.name + ".m"
 
                     process.uuid = str(uuid.uuid4())
                     iscript = (
                         os.path.basename(iscript)[:-2] + "_%s.m" % process.uuid
@@ -266,58 +306,74 @@
                             os.path.join(project.folder, "scripts", iscript)
                         ),
                     )
 
                 process.mfile = True
 
     def complete_parameters(self, process_inputs={}, complete_iterations=True):
+        """Completes file parameters from given inputs parameters.
+
+        Parameters
+        ----------
+        process_inputs: dict (optional)
+            parameters to be set on the process. It may include "regular"
+            process parameters, and attributes used for completion. Attributes
+            should be in a sub-dictionary under the key "capsul_attributes".
+        complete_iterations: bool (optional)
+            if False, iteration nodes inside the pipeline will not run their
+            own completion. Thus parameters for the iterations will not be
+            correctly completed. However this has 2 advantages: 1. it prevents
+            modification of the input pipeline, 2. it will not do iterations
+            completion which will anyway be done (again) when building a
+            workflow in
+            `~capsul.pipeline.pipeline_workflow.workflow_from_pipeline`.
+        """
 
         self.completion_progress = self.fallback_engine.completion_progress
         self.completion_progress_total = (
             self.fallback_engine.completion_progress_total
         )
 
-        # print('complete_parameters', self.process.name, ', attributes:', self.fallback_engine.get_attribute_values().export_to_dict())
-
         # handle database attributes and indexation
         self.complete_attributes_with_database(process_inputs)
         in_process = get_ref(self.process)
 
         if isinstance(in_process, ProcessNode):
             in_process = in_process.process
 
         # nipype special case -- output_directory is set from MIA project
         if isinstance(in_process, (NipypeProcess, ProcessMIA)):
             self.complete_nipype_common(in_process)
 
         if not isinstance(in_process, ProcessMIA):
-
             if not isinstance(in_process, Pipeline):
-
                 if in_process.context_name.split(".")[0] == "Pipeline":
                     node_name = ".".join(
                         in_process.context_name.split(".")[1:]
                     )
 
                 else:
                     node_name = in_process.context_name
 
                 if isinstance(in_process, NipypeProcess):
+                    # fmt: off
                     print(
                         "\n. {0} ({1}) nipype node ...".format(
                             node_name,
                             ".".join(
                                 (
-                                    in_process._nipype_interface.__module__,
-                                    in_process._nipype_interface.__class__.__name__,
+                                    in_process._nipype_interface.
+                                    __module__,
+                                    in_process._nipype_interface.
+                                    __class__.__name__,
                                 )
                             ),
                         )
                     )
-
+                    # fmt: on
                 else:
                     print(
                         "\n. {0} ({1}) regular node ...".format(
                             node_name,
                             ".".join(
                                 (
                                     in_process.__module__,
@@ -360,22 +416,23 @@
                     ),
                 )
             )
 
             self.complete_parameters_mia(process_inputs)
             self.completion_progress = self.completion_progress_total
 
-            # we must keep a copy of inheritance dict,
-            # since it changes at each iteration and is not included in workflow
-            # TODO: a better solution would be to save for each node the inheritance between plugs
-            # and not between filenames (that changes over iteration)
+            # we must keep a copy of inheritance dict, since it changes
+            # at each iteration and is not included in workflow
+            # TODO: a better solution would be to save for each
+            #       node the inheritance between plugs and not between
+            #       filenames (that changes over iteration)
             project = self.get_project(in_process)
             if project is not None:
-                # record completion order to perform 2nd pass tags recording and
-                # indexation
+                # record completion order to perform 2nd pass tags recording
+                # and indexation
                 if not hasattr(project, "node_inheritance_history"):
                     project.node_inheritance_history = {}
 
                 node = self.process
 
                 if isinstance(node, Pipeline):
                     node = node.pipeline_node
@@ -390,18 +447,24 @@
 
     def complete_parameters_mia(self, process_inputs={}):
         """
         Completion for :class:`ProcessMIA` instances. This is done using their
         :meth: `ProcessMIA.list_outputs` method, which fills in output
         parameters from input values, and sets the internal `inheritance_dict`
         used after completion for data indexation in MIA.
+
+        Parameters
+        ----------
+        process_inputs: dict (optional)
+            parameters to be set on the process.
+
         """
         self.set_parameters(process_inputs)
         verbose = False
-        node = self.process
+        node = get_ref(self.process)
         process = node
 
         if isinstance(node, ProcessNode):
             process = node.process
 
             is_plugged = {
                 key: (bool(plug.links_to) or bool(plug.links_from))
@@ -441,158 +504,225 @@
                     print("param:", parameter)
                     print("value:", repr(value))
                     traceback.print_exc()
 
         MIAProcessCompletionEngine.complete_nipype_common(process)
 
     def get_attribute_values(self):
-        # re-route to underlying fallback engine
+        """Re-route to underlying fallback engine."""
+
         return self.fallback_engine.get_attribute_values()
 
     def get_path_completion_engine(self):
-        # re-route to underlying fallback engine
+        """Re-route to underlying fallback engine."""
+
         return self.fallback_engine.get_path_completion_engine()
 
     @staticmethod
     def get_project(process):
+        """Get the project associated with the process.
+
+        Parameters
+        ----------
+        process: a process
+
+        Returns
+        -------
+        project: the project associated with the process
+
+        """
+
         project = None
+
         if isinstance(process, ProcessNode):
             process = process.process
+
         if hasattr(process, "get_study_config"):
             study_config = process.get_study_config()
             project = getattr(study_config, "project", None)
+
         return project
 
     def path_attributes(self, filename, parameter=None):
-        # re-route to underlying fallback engine
+        """Re-route to underlying fallback engine.
+
+        Parameters
+        ----------
+        filename:
+        parameter:
+
+        Returns
+        -------
+        out: the path attributes
+
+        """
+
         return self.fallback_engine.path_attributes(filename, parameter)
 
     def remove_switch_observer(self, observer=None):
-        # reimplemented since it is expectes in switches completion engine
+        """Reimplemented since it is expectes in switches completion engine.
+
+        Parameters
+        ----------
+        observer:
+
+        Returns
+        -------
+        out:
+
+        """
+
         return self.fallback_engine.remove_switch_observer(observer)
 
 
 class MIAProcessCompletionEngineFactory(ProcessCompletionEngineFactory):
     """
     Completion engine factory specialization for Popules MIA context.
     Its ``factory_id`` is "mia_completion".
 
     This factory is activated in the
     :class:`~capsul.study_config.study_config.StudyConfig` instance by setting
     2 parameters::
 
-        study_config.attributes_schema_paths = study_config.attributes_schema_paths \
-            + ['populse_mia.user_interface.pipeline_manager.process_mia']
+        study_config.attributes_schema_paths = study_config.\
+            attributes_schema_paths + ['populse_mia.user_interface.'
+                                       'pipeline_manager.process_mia']
         study_config.process_completion =  'mia_completion'
 
     Once this is done, the completion system will be activated for all
     processes, and use differently all MIA processes and nipype processes. For
     regular processes, additional database operations will be performed, then
     the underlying completion system will be called (FOM or other).
+
+    :Contains:
+        :Method:
+            - get_completion_engine: get a ProcessCompletionEngine instance for
+             a given process/node
+            -
     """
 
     factory_id = "mia_completion"
 
     def get_completion_engine(self, process, name=None):
+        """Get a ProcessCompletionEngine instance for a given process/node.
+
+        Parameters
+        ----------
+        process: Node or Process instance
+        name: str
+
+        Returns
+        -------
+        out: ProcessCompletionEngine instance
+
+        """
+
         if hasattr(process, "completion_engine"):
             return process.completion_engine
 
         engine_factory = None
         if hasattr(process, "get_study_config"):
             study_config = process.get_study_config()
 
             engine = study_config.engine
             if "capsul.engine.module.attributes" in engine._loaded_modules:
                 try:
                     former_factory = "builtin"  # TODO how to store this ?
                     engine_factory = engine._modules_data["attributes"][
                         "attributes_factory"
                     ].get("process_completion", former_factory)
+
                 except ValueError:
                     pass  # not found
+
         if engine_factory is None:
             engine_factory = BuiltinProcessCompletionEngineFactory()
 
         fallback = engine_factory.get_completion_engine(process, name=name)
 
         # iteration
         in_process = process
+
         if isinstance(process, ProcessNode):
             in_process = process.process
+
         if isinstance(in_process, ProcessIteration):
             # iteration nodes must follow their own way
             return fallback
 
         return MIAProcessCompletionEngine(process, name, fallback)
 
 
 class ProcessMIA(Process):
     """Class overriding the default capsul Process class, in order to
      customise the run for MIA bricks.
 
     This class is mainly used by MIA bricks.
 
      .. Methods:
-
-         - _after_run_process: Try to recover the output values, when the
+         - _after_run_process: try to recover the output values, when the
                                calculation has been delegated to a process in
                                ProcessMIA
-         - _run_processes: Call the run_process_mia method in the
+         - _run_processes: call the run_process_mia method in the
                            ProcessMIA subclass
-         - init_default_traits: Automatically initialise necessary parameters
+         - init_default_traits: automatically initialise necessary parameters
                                 for nipype or capsul
-         - list_outputs: Override the outputs of the process
-         - make_initResult: Make the final dictionnary for outputs,
+         - init_process: instantiation of the process attribute given a
+           process identifier
+         - list_outputs: override the outputs of the process
+         - make_initResult: make the final dictionary for outputs,
                             inheritance and requirement from the
                             initialisation of a brick
-         - relax_nipype_exists_constraints: Relax the exists constraint of
+         - relax_nipype_exists_constraints: relax the exists constraint of
                                             the process.inputs traits
          - requirements: Capsul Process.requirements() implementation using
                          MIA's ProcessMIA.requirement attribute
-         - run_process_mia: Implements specific runs for ProcessMia
+         - run_process_mia: implements specific runs for ProcessMia
                             subclasses
 
     """
 
     def __init__(self, *args, **kwargs):
         super(ProcessMIA, self).__init__(*args, **kwargs)
         self.requirement = None
         self.outputs = {}
         self.inheritance_dict = {}
 
     def _after_run_process(self, run_process_result):
         """Try to recover the output values."""
+
         if hasattr(self, "process") and isinstance(
             self.process, NipypeProcess
         ):
-
             for mia_output in self.user_traits():
                 wrapped_output = self.trait(mia_output).nipype_process_name
 
                 if wrapped_output:
                     new = getattr(self.process, wrapped_output, None)
                     old = getattr(self, mia_output, None)
 
                     if new and old != new:
                         setattr(self, mia_output, new)
 
     def _run_process(self):
         """Call the run_process_mia method in the Process_Mia subclass"""
+
         self.run_process_mia()
 
     def init_default_traits(self):
-        """Automatically initialise necessary parameters for nipype or capsul"""
+        """Automatically initialise necessary parameters for
+        nipype or capsul"""
+
         if "output_directory" not in self.user_traits():
             self.add_trait(
                 "output_directory",
                 traits.Directory(output=False, optional=True, userlevel=1),
             )
 
         if self.requirement is not None and "spm" in self.requirement:
-
             if "use_mcr" not in self.user_traits():
                 self.add_trait(
                     "use_mcr", traits.Bool(optional=True, userlevel=1)
                 )
 
             if "paths" not in self.user_traits():
                 self.add_trait(
@@ -710,15 +840,14 @@
         """
         Implements specific runs for Process_Mia subclasses
         """
         if self.output_directory and hasattr(self, "process"):
             self.process.output_directory = self.output_directory
 
         if self.requirement is not None and "spm" in self.requirement:
-
             if self.spm_script_file:
                 self.process._spm_script_file = self.spm_script_file
 
             if self.use_mcr:
                 self.process.use_mcr = self.use_mcr
 
             if self.paths:
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/pipeline_manager/type_editors.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/pipeline_manager/type_editors.py`

 * *Files 13% similar despite different names*

```diff
@@ -1,27 +1,58 @@
 # -*- coding: utf-8 -*-
-# Define the logger
+"""
+Define the Mia logger.
+
+The soma control classes are overloaded for the needs of Mia.
+
+:Contains:
+    :Class:
+        - PopulseFileControlWidget
+        - PopulseDirectoryControlWidget
+        - PopulseOffscreenListFileControlWidget
+        - PopulseUndefinedControlWidget
+
+"""
+
+###############################################################################
+# Populse_mia - Copyright (C) IRMaGe/CEA, 2018
+# Distributed under the terms of the CeCILL license, as published by
+# the CEA-CNRS-INRIA. Refer to the LICENSE file or to
+# http://www.cecill.info/licences/Licence_CeCILL_V2.1-en.html
+# for details.
+###############################################################################
+
 import logging
+import os
 from functools import partial
 
-import os
 import six
 import traits.api as traits
-from soma.qt_gui import controller_widget
 from soma.qt_gui.controls.Directory import DirectoryControlWidget
 from soma.qt_gui.controls.File import FileControlWidget
-from soma.qt_gui.controls.List_File_offscreen import \
-    OffscreenListFileControlWidget
+from soma.qt_gui.controls.List_File_offscreen import (
+    OffscreenListFileControlWidget,
+)
 from soma.qt_gui.qt_backend import Qt, QtGui, QtWidgets
 from soma.utils.weak_proxy import weak_proxy
 
 logger = logging.getLogger(__name__)
 
 
 class PopulseFileControlWidget(FileControlWidget):
+    """Control to enter a file.
+
+    :Contains:
+        :Method:
+            - create_widget: method to create the file widget
+            - filter_clicked: display a filter widget
+            - update_plug_value_from_filter: update the plug value from
+            a filter result
+    """
+
     @staticmethod
     def create_widget(
         parent,
         control_name,
         control_value,
         trait,
         label_class=None,
@@ -67,21 +98,34 @@
         layout = widget.layout()
 
         project = user_data.get("project")
         scan_list = user_data.get("scan_list")
         connected_inputs = user_data.get("connected_inputs", set())
 
         def is_number(x):
+            """Check if x is a number.
+
+            Parameters
+            ----------
+            x: the name of the control we want to create (str)
+
+            Returns
+            -------
+            out: bool
+            True if the control name is a number,
+            False otherwise
+            """
+
             try:
                 int(x)
                 return True
+
             except ValueError:
                 return False
 
-        main_window = user_data.get("main_window")
         # files in a list don't get a Filter button.
         if (
             project
             and scan_list
             and not trait.output
             and control_name not in connected_inputs
             and not is_number(control_name)
@@ -116,16 +160,20 @@
         """Display a filter widget.
 
         :param node_name: name of the node
         :param plug_name: name of the plug
         """
         # this import is not at the beginning of the file to avoid a cyclic
         # import issue.
-        from populse_mia.user_interface.pipeline_manager.node_controller import \
-            PlugFilter
+        # fmt: off
+        # isort: off
+        from populse_mia.user_interface.pipeline_manager.\
+            node_controller import PlugFilter
+        # isort: on
+        # fmt: on
 
         project = widget.user_data.get("project")
         scan_list = widget.user_data.get("scan_list")
         main_window = widget.user_data.get("main_window")
         node_controller = widget.user_data.get("node_controller")
         widget.pop_up = PlugFilter(
             project,
@@ -177,23 +225,36 @@
                 res = traits.Undefined
 
         # Set the selected file path to the path sub control
         widget.path.set_value(six.text_type(res))
 
 
 class PopulseDirectoryControlWidget(DirectoryControlWidget):
+    """Control to enter a Directory.
+
+    :Contains:
+        :Method:
+            - create_widget: method to create the file widget
+            - filter_clicked: display a filter widget
+            - update_plug_value_from_filter: update the plug value from
+            a filter result
+
+    """
+
     @staticmethod
     def create_widget(
         parent,
         control_name,
         control_value,
         trait,
         label_class=None,
         user_data=None,
     ):
+        """Method to create the directory widget."""
+
         return PopulseFileControlWidget.create_widget(
             parent,
             control_name,
             control_value,
             trait,
             label_class=label_class,
             user_data=user_data,
@@ -204,16 +265,20 @@
         """Display a filter widget.
 
         :param node_name: name of the node
         :param plug_name: name of the plug
         """
         # this import is not at the beginning of the file to avoid a cyclic
         # import issue.
-        from populse_mia.user_interface.pipeline_manager.node_controller import \
-            PlugFilter
+        # fmt: off
+        # isort: off
+        from populse_mia.user_interface.pipeline_manager.\
+            node_controller import PlugFilter
+        # fmt: on
+        # isort: on
 
         project = widget.user_data.get("project")
         scan_list = widget.user_data.get("scan_list")
         main_window = widget.user_data.get("main_window")
         node_controller = widget.user_data.get("node_controller")
         widget.pop_up = PlugFilter(
             project,
@@ -251,24 +316,35 @@
             res = traits.Undefined
 
         # Set the selected file path to the path sub control
         widget.path.setText(six.text_type(res))
 
 
 class PopulseOffscreenListFileControlWidget(OffscreenListFileControlWidget):
+    """Control to enter a list of files.
+
+    :Contains:
+        :Method:
+            - create_widget: method to create the list of files widget
+            - filter_clicked: display a filter widget
+            - update_plug_value_from_filter: update the plug value from
+            a filter result
+
+    """
+
     @staticmethod
     def create_widget(
         parent,
         control_name,
         control_value,
         trait,
         label_class=None,
         user_data=None,
     ):
-        """Method to create the list widget.
+        """Method to create the list of files widget.
 
         Parameters
         ----------
         parent: QWidget (mandatory)
             the parent widget
         control_name: str (mandatory)
             the name of the control we want to create
@@ -296,15 +372,14 @@
             user_data=user_data,
         )
 
         layout = widget.layout()
 
         project = user_data.get("project")
         scan_list = user_data.get("scan_list")
-        main_window = user_data.get("main_window")
         connected_inputs = user_data.get("connected_inputs", set())
         if (
             project
             and scan_list
             and not trait.output
             and control_name not in connected_inputs
         ):
@@ -339,16 +414,20 @@
         """Display a filter widget.
 
         :param node_name: name of the node
         :param plug_name: name of the plug
         """
         # this import is not at the beginning of the file to avoid a cyclic
         # import issue.
-        from populse_mia.user_interface.pipeline_manager.node_controller import \
-            PlugFilter
+        # fmt: off
+        # isort: off
+        from populse_mia.user_interface.pipeline_manager.\
+            node_controller import PlugFilter
+        # isort: on
+        # fmt: on
 
         project = widget.user_data.get("project")
         scan_list = widget.user_data.get("scan_list")
         main_window = widget.user_data.get("main_window")
         node_controller = widget.user_data.get("node_controller")
         widget.pop_up = PlugFilter(
             project,
@@ -356,21 +435,26 @@
             None,  # (process)
             node_name,
             plug_name,
             node_controller,
             main_window,
         )
         widget.pop_up.show()
+        # fmt: off
         widget.pop_up.plug_value_changed.connect(
             partial(
-                PopulseOffscreenListFileControlWidget.update_plug_value_from_filter,
+                (
+                    PopulseOffscreenListFileControlWidget.
+                    update_plug_value_from_filter
+                ),
                 widget,
                 plug_name,
             )
         )
+        # fmt: on
 
     @staticmethod
     def update_plug_value_from_filter(widget, plug_name, filter_res_list):
         """Update the plug value from a filter result.
 
         :param plug_name: name of the plug
         :param filter_res_list: list of the filtered files
@@ -412,15 +496,16 @@
         # Get the control current value
         control_text = control_instance.text()
 
         is_valid = False
 
         if control_text in [
             "<undefined>",
-            "<style>background-color: gray; text-color: red;</style><undefined>",
+            "<style>background-color: gray; "
+            "text-color: red;</style><undefined>",
         ]:
             is_valid = True
 
         return is_valid
 
     @classmethod
     def check(cls, control_instance):
@@ -492,15 +577,14 @@
         controller_widget,
         control_name,
         control_instance,
         reset_invalid_value,
         *args,
         **kwargs
     ):
-
         """Update one element of the controller.
 
         At the end the controller trait value with the name 'control_name'
         will match the controller widget user parameters defined in
         'control_instance'.
 
         Parameters
@@ -513,15 +597,14 @@
         control_instance: QLineEdit (mandatory)
             the instance of the controller widget control we want to
             synchronize with the controller
         """
 
         # Update the controller only if the control is valid
         if PopulseUndefinedControlWidget.is_valid(control_instance):
-
             # Define the control value
             new_trait_value = traits.Undefined
             setattr(
                 controller_widget.controller, control_name, new_trait_value
             )
             logger.debug(
                 "'PopulseUndefinedControlWidget' associated controller trait "
```

### Comparing `populse_mia-2.2.2/python/populse_mia/user_interface/pop_ups.py` & `populse_mia-2.3.1/python/populse_mia/user_interface/pop_ups.py`

 * *Files 3% similar despite different names*

```diff
@@ -51,61 +51,104 @@
 import os
 import platform
 import shutil
 import subprocess
 from datetime import datetime
 from functools import partial
 
-import six
 import yaml
+
 # Capsul imports
 from capsul.api import capsul_engine
-from capsul.pipeline.pipeline_nodes import PipelineNode, ProcessNode
+from capsul.pipeline.pipeline_nodes import PipelineNode
 from capsul.qt_gui.widgets.pipeline_developer_view import PipelineDeveloperView
 from capsul.qt_gui.widgets.settings_editor import SettingsEditor
+
 # Populse_db imports
-from populse_db.database import (FIELD_TYPE_BOOLEAN, FIELD_TYPE_DATE,
-                                 FIELD_TYPE_DATETIME, FIELD_TYPE_FLOAT,
-                                 FIELD_TYPE_INTEGER, FIELD_TYPE_LIST_BOOLEAN,
-                                 FIELD_TYPE_LIST_DATE,
-                                 FIELD_TYPE_LIST_DATETIME,
-                                 FIELD_TYPE_LIST_FLOAT,
-                                 FIELD_TYPE_LIST_INTEGER,
-                                 FIELD_TYPE_LIST_STRING, FIELD_TYPE_LIST_TIME,
-                                 FIELD_TYPE_STRING, FIELD_TYPE_TIME)
+from populse_db.database import (
+    FIELD_TYPE_BOOLEAN,
+    FIELD_TYPE_DATE,
+    FIELD_TYPE_DATETIME,
+    FIELD_TYPE_FLOAT,
+    FIELD_TYPE_INTEGER,
+    FIELD_TYPE_LIST_BOOLEAN,
+    FIELD_TYPE_LIST_DATE,
+    FIELD_TYPE_LIST_DATETIME,
+    FIELD_TYPE_LIST_FLOAT,
+    FIELD_TYPE_LIST_INTEGER,
+    FIELD_TYPE_LIST_STRING,
+    FIELD_TYPE_LIST_TIME,
+    FIELD_TYPE_STRING,
+    FIELD_TYPE_TIME,
+)
+
 # PyQt5 imports
 from PyQt5 import Qt, QtCore, QtGui, QtWidgets
 from PyQt5.QtCore import QCoreApplication, pyqtSignal
 from PyQt5.QtGui import QIcon, QPixmap
-from PyQt5.QtWidgets import (QApplication, QCheckBox, QComboBox, QDialog,
-                             QDialogButtonBox, QFileDialog, QFormLayout,
-                             QHBoxLayout, QHeaderView, QInputDialog, QLabel,
-                             QLineEdit, QMessageBox, QPlainTextEdit,
-                             QPushButton, QRadioButton, QScrollArea, QSplitter,
-                             QTableWidget, QTableWidgetItem, QTreeWidget,
-                             QTreeWidgetItem, QVBoxLayout, QWidget)
+from PyQt5.QtWidgets import (
+    QApplication,
+    QCheckBox,
+    QComboBox,
+    QDialog,
+    QDialogButtonBox,
+    QFileDialog,
+    QFormLayout,
+    QHBoxLayout,
+    QHeaderView,
+    QInputDialog,
+    QLabel,
+    QLineEdit,
+    QMessageBox,
+    QPlainTextEdit,
+    QPushButton,
+    QRadioButton,
+    QScrollArea,
+    QSplitter,
+    QTableWidget,
+    QTableWidgetItem,
+    QTreeWidget,
+    QTreeWidgetItem,
+    QVBoxLayout,
+    QWidget,
+)
 
 # Populse_mia imports
-from populse_mia.data_manager.database_mia import (TAG_ORIGIN_USER,
-                                                   TAG_UNIT_DEGREE,
-                                                   TAG_UNIT_HZPIXEL,
-                                                   TAG_UNIT_MHZ, TAG_UNIT_MM,
-                                                   TAG_UNIT_MS)
-from populse_mia.data_manager.project import (BRICK_EXEC, BRICK_EXEC_TIME,
-                                              BRICK_INIT, BRICK_INIT_TIME,
-                                              BRICK_INPUTS, BRICK_NAME,
-                                              BRICK_OUTPUTS, COLLECTION_BRICK,
-                                              COLLECTION_CURRENT,
-                                              COLLECTION_HISTORY,
-                                              COLLECTION_INITIAL,
-                                              HISTORY_BRICKS, HISTORY_PIPELINE,
-                                              TAG_CHECKSUM, TAG_FILENAME,
-                                              TAG_HISTORY, TAG_TYPE, TYPE_MAT,
-                                              TYPE_NII, TYPE_TXT, TYPE_UNKNOWN,
-                                              Project)
+from populse_mia.data_manager.database_mia import (
+    TAG_ORIGIN_USER,
+    TAG_UNIT_DEGREE,
+    TAG_UNIT_HZPIXEL,
+    TAG_UNIT_MHZ,
+    TAG_UNIT_MM,
+    TAG_UNIT_MS,
+)
+from populse_mia.data_manager.project import (
+    BRICK_EXEC,
+    BRICK_EXEC_TIME,
+    BRICK_INIT,
+    BRICK_INIT_TIME,
+    BRICK_INPUTS,
+    BRICK_NAME,
+    BRICK_OUTPUTS,
+    COLLECTION_BRICK,
+    COLLECTION_CURRENT,
+    COLLECTION_HISTORY,
+    COLLECTION_INITIAL,
+    HISTORY_BRICKS,
+    HISTORY_PIPELINE,
+    TAG_CHECKSUM,
+    TAG_FILENAME,
+    TAG_HISTORY,
+    TAG_TYPE,
+    TYPE_MAT,
+    TYPE_NII,
+    TYPE_TXT,
+    TYPE_UNKNOWN,
+    Project,
+)
 from populse_mia.software_properties import Config, verCmp
 from populse_mia.user_interface.data_browser import data_browser
 from populse_mia.utils import utils
 from populse_mia.utils.utils import check_value_type
 
 
 class ClickableLabel(QLabel):
@@ -168,30 +211,30 @@
         self.table.setRowCount(1)
 
         value = self.parent.text()
 
         if value != "":
             try:
                 list_value = ast.literal_eval(value)
-                if isinstance(list_value, list):
 
+                if isinstance(list_value, list):
                     # If the previous value was already a list, we fill it
-
                     self.table.setColumnCount(len(list_value))
 
                     for i in range(0, self.table.columnCount()):
                         item = QtWidgets.QTableWidgetItem()
                         item.setText(str(list_value[i]))
                         self.table.setItem(0, i, item)
 
                 else:
                     self.default_init_table()
 
-            except Exception as e:
+            except Exception:
                 self.default_init_table()
+
         else:
             self.default_init_table()
 
         self.resize_table()
 
         # Ok button
         self.ok_button = QtWidgets.QPushButton("Ok")
@@ -430,128 +473,156 @@
         hbox_layout.addWidget(cancel_button)
         vbox_layout.addLayout(hbox_layout)
         self.setLayout(vbox_layout)
 
     def file_to_choose(self):
         """Lets the user choose a file to import."""
 
-        fname = QFileDialog.getOpenFileName(
+        fname, _ = QFileDialog.getOpenFileNames(
             self, "Choose a document to import", os.path.expanduser("~")
         )
 
-        if fname[0]:
-            self.file_line_edit.setText(fname[0])
+        if fname != []:
+            self.file_line_edit.setText(str(fname))
 
     def find_type(self):
         """Tries to find the document type when the document is changed."""
 
         new_file = self.file_line_edit.text()
-        filename, file_extension = os.path.splitext(new_file)
-        if file_extension == ".nii":
-            self.type_line_edit.setText(TYPE_NII)
-        elif file_extension == ".mat":
-            self.type_line_edit.setText(TYPE_MAT)
-        elif file_extension == ".txt":
-            self.type_line_edit.setText(TYPE_TXT)
-        else:
-            self.type_line_edit.setText(TYPE_UNKNOWN)
+        new_file = ast.literal_eval(new_file)
+        new_type = []
+
+        for elmt in new_file:
+            filename, file_extension = os.path.splitext(elmt)
+
+            if file_extension == ".nii":
+                new_type.append(TYPE_NII)
+
+            elif file_extension == ".mat":
+                new_type.append(TYPE_MAT)
+
+            elif file_extension == ".txt":
+                new_type.append(TYPE_TXT)
+
+            else:
+                new_type.append(TYPE_UNKNOWN)
+
+        self.type_line_edit.setText(str(new_type))
 
     def save_path(self):
         """Adds the path to the database and the data browser."""
 
-        path = self.file_line_edit.text()
-        path_type = self.type_line_edit.text()
-        docInDb = [
-            os.path.basename(i)
-            for i in self.project.session.get_documents_names(
-                COLLECTION_CURRENT
-            )
-        ]
-        self.project.unsavedModifications = True
+        path_list = self.file_line_edit.text()
 
-        if os.path.basename(path) in docInDb:
-            self.msg = QMessageBox()
-            self.msg.setIcon(QMessageBox.Warning)
-            self.msg.setText("- {0} -".format(os.path.basename(path)))
-            self.msg.setInformativeText(
-                "The document '{0}' \n "
-                "already exists in the Data Browser!".format(path)
-            )
-            self.msg.setWindowTitle("Warning: existing data!")
-            self.msg.setStandardButtons(QMessageBox.Ok)
-            self.msg.buttonClicked.connect(self.msg.close)
-            self.msg.show()
+        if path_list != "":
+            path_list = ast.literal_eval(path_list)
 
-        elif path != "" and os.path.exists(path) and path_type != "":
+        else:
+            path_list = [path_list]
 
-            # For history
-            history_maker = []
-            history_maker.append("add_scans")
-
-            path = os.path.relpath(path)
-            filename = os.path.basename(path)
-            copy_path = os.path.join(
-                self.project.folder, "data", "downloaded_data", filename
-            )
-            shutil.copy(path, copy_path)
-            with open(path, "rb") as scan_file:
-                data = scan_file.read()
-                checksum = hashlib.md5(data).hexdigest()
-            path = os.path.join("data", "downloaded_data", filename)
-            self.project.session.add_document(COLLECTION_CURRENT, path)
-            self.project.session.add_document(COLLECTION_INITIAL, path)
-            values_added = []
-            self.project.session.add_value(
-                COLLECTION_INITIAL, path, TAG_TYPE, path_type
-            )
-            self.project.session.add_value(
-                COLLECTION_CURRENT, path, TAG_TYPE, path_type
-            )
-            values_added.append([path, TAG_TYPE, path_type, path_type])
-            self.project.session.add_value(
-                COLLECTION_INITIAL, path, TAG_CHECKSUM, checksum
-            )
-            self.project.session.add_value(
-                COLLECTION_CURRENT, path, TAG_CHECKSUM, checksum
-            )
-            values_added.append([path, TAG_CHECKSUM, checksum, checksum])
+        path_type_list = self.type_line_edit.text()
 
-            # For history
-            history_maker.append([path])
-            history_maker.append(values_added)
-            self.project.undos.append(history_maker)
-            self.project.redos.clear()
+        if path_type_list != "":
+            path_type_list = ast.literal_eval(path_type_list)
 
-            # Databrowser updated
+        else:
+            path_type_list = [path_type_list]
 
-            (
-                self.databrowser.table_data.scans_to_visualize
-            ) = self.project.session.get_documents_names(COLLECTION_CURRENT)
+        for path, path_type in zip(path_list, path_type_list):
+            docInDb = [
+                os.path.basename(i)
+                for i in self.project.session.get_documents_names(
+                    COLLECTION_CURRENT
+                )
+            ]
+            self.project.unsavedModifications = True
 
-            (
-                self.databrowser.table_data.scans_to_search
-            ) = self.project.session.get_documents_names(COLLECTION_CURRENT)
-            self.databrowser.table_data.add_columns()
-            self.databrowser.table_data.fill_headers()
-            self.databrowser.table_data.add_rows([path])
-            self.databrowser.reset_search_bar()
-            self.databrowser.frame_advanced_search.setHidden(True)
-            self.databrowser.advanced_search.rows = []
-            self.close()
-        else:
-            self.msg = QMessageBox()
-            self.msg.setIcon(QMessageBox.Warning)
-            self.msg.setText("Invalid arguments")
-            self.msg.setInformativeText(
-                "The path must exist.\nThe path type can't be empty."
-            )
-            self.msg.setWindowTitle("Warning")
-            self.msg.setStandardButtons(QMessageBox.Ok)
-            self.msg.buttonClicked.connect(self.msg.close)
-            self.msg.show()
+            if os.path.basename(path) in docInDb:
+                self.msg = QMessageBox()
+                self.msg.setIcon(QMessageBox.Warning)
+                self.msg.setText("- {0} -".format(os.path.basename(path)))
+                self.msg.setInformativeText(
+                    "The document '{0}' \n "
+                    "already exists in the Data Browser!".format(path)
+                )
+                self.msg.setWindowTitle("Warning: existing data!")
+                self.msg.setStandardButtons(QMessageBox.Ok)
+                self.msg.buttonClicked.connect(self.msg.close)
+                self.msg.show()
+
+            elif path != "" and os.path.exists(path) and path_type != "":
+                # For history
+                history_maker = []
+                history_maker.append("add_scans")
+
+                path = os.path.relpath(path)
+                filename = os.path.basename(path)
+                copy_path = os.path.join(
+                    self.project.folder, "data", "downloaded_data", filename
+                )
+                shutil.copy(path, copy_path)
+                with open(path, "rb") as scan_file:
+                    data = scan_file.read()
+                    checksum = hashlib.md5(data).hexdigest()
+                path = os.path.join("data", "downloaded_data", filename)
+                self.project.session.add_document(COLLECTION_CURRENT, path)
+                self.project.session.add_document(COLLECTION_INITIAL, path)
+                values_added = []
+                self.project.session.add_value(
+                    COLLECTION_INITIAL, path, TAG_TYPE, path_type
+                )
+                self.project.session.add_value(
+                    COLLECTION_CURRENT, path, TAG_TYPE, path_type
+                )
+                values_added.append([path, TAG_TYPE, path_type, path_type])
+                self.project.session.add_value(
+                    COLLECTION_INITIAL, path, TAG_CHECKSUM, checksum
+                )
+                self.project.session.add_value(
+                    COLLECTION_CURRENT, path, TAG_CHECKSUM, checksum
+                )
+                values_added.append([path, TAG_CHECKSUM, checksum, checksum])
+
+                # For history
+                history_maker.append([path])
+                history_maker.append(values_added)
+                self.project.undos.append(history_maker)
+                self.project.redos.clear()
+
+                # Databrowser updated
+
+                (
+                    self.databrowser.table_data.scans_to_visualize
+                ) = self.project.session.get_documents_names(
+                    COLLECTION_CURRENT
+                )
+
+                (
+                    self.databrowser.table_data.scans_to_search
+                ) = self.project.session.get_documents_names(
+                    COLLECTION_CURRENT
+                )
+                self.databrowser.table_data.add_columns()
+                self.databrowser.table_data.fill_headers()
+                self.databrowser.table_data.add_rows([path])
+                self.databrowser.reset_search_bar()
+                self.databrowser.frame_advanced_search.setHidden(True)
+                self.databrowser.advanced_search.rows = []
+                self.close()
+            else:
+                self.msg = QMessageBox()
+                self.msg.setIcon(QMessageBox.Warning)
+                self.msg.setText("Invalid arguments")
+                self.msg.setInformativeText(
+                    "The path must exist.\nThe path type can't be empty."
+                )
+                self.msg.setWindowTitle("Warning")
+                self.msg.setStandardButtons(QMessageBox.Ok)
+                self.msg.buttonClicked.connect(self.msg.close)
+                self.msg.show()
 
 
 class PopUpAddTag(QDialog):
     """Is called when the user wants to add a tag to the project.
 
     .. Methods:
         - ok_action: verifies that each field is correct and send the new tag
@@ -1787,15 +1858,14 @@
 
     def sort_scans(self):
         """Collects the information and send them to the data browser."""
 
         self.order = self.combo_box.itemText(self.combo_box.currentIndex())
 
         for push_button in self.push_buttons:
-
             if push_button.text() in self.project.session.get_fields_names(
                 COLLECTION_CURRENT
             ):
                 self.list_tags.append(push_button.text())
 
         self.accept()
         self.table_data_browser.multiple_sort_infos(self.list_tags, self.order)
@@ -1903,14 +1973,16 @@
         - browse_fsl: called when fsl browse button is clicked
         - browse_matlab: called when matlab browse button is clicked
         - browse_matlab_standalone: called when matlab browse button is clicked
         - browse_mri_conv_path: called when "MRIManager.jar" browse
           button is clicked
         - browse_projects_save_path: called when "Projects folder" browse
           button is clicked
+        - browse_resources_path: called when "resources" browse button is
+          clicked
         - browse_spm: called when spm browse button is clicked
         - browse_spm_standalone: called when spm standalone browse button
           is clicked
         - change_admin_psswd: method to change the admin password
         - control_checkbox_toggled: check before changing controller version
         - edit_capsul_config: capsul engine edition
         - edit_config_file: create a window to view, edit the mia
@@ -1963,42 +2035,42 @@
         config = Config()
 
         # The 'Tools" tab
         self.tab_tools = QtWidgets.QWidget()
         self.tab_tools.setObjectName("tab_tools")
         self.tab_widget.addTab(self.tab_tools, _translate("Dialog", "Tools"))
 
-        ## Groupbox "Global preferences"
+        # Groupbox "Global preferences"
         self.groupbox_global = QtWidgets.QGroupBox("Global preferences")
 
-        ## Auto save
+        # Auto save
         self.save_checkbox = QCheckBox("", self)
         self.save_label = QLabel("Auto save")
 
         if config.isAutoSave() is True:
             self.save_checkbox.setChecked(1)
 
         h_box_auto_save = QtWidgets.QHBoxLayout()
         h_box_auto_save.addWidget(self.save_checkbox)
         h_box_auto_save.addWidget(self.save_label)
         h_box_auto_save.addStretch(1)
 
-        ## Clinical mode
+        # Clinical mode
         self.clinical_mode_checkbox = QCheckBox("", self)
 
         if config.get_use_clinical() is True:
             self.clinical_mode_checkbox.setChecked(1)
 
         self.clinical_mode_label = QLabel("Clinical mode")
         h_box_clinical = QtWidgets.QHBoxLayout()
         h_box_clinical.addWidget(self.clinical_mode_checkbox)
         h_box_clinical.addWidget(self.clinical_mode_label)
         h_box_clinical.addStretch(1)
 
-        ## Admin mode + Change password + Edit config
+        # Admin mode + Change password + Edit config
         self.admin_mode_checkbox = QCheckBox("", self)
         self.admin_mode_checkbox.clicked.connect(self.admin_mode_switch)
         self.admin_mode_label = QLabel("Admin mode")
         self.change_psswd = QPushButton(
             "Change password", default=False, autoDefault=False
         )
         self.edit_config = QPushButton(
@@ -2026,15 +2098,15 @@
         h_box_change_psswd.addWidget(self.change_psswd)
         h_box_change_psswd.addStretch(1)
 
         h_box_edit_config = QtWidgets.QHBoxLayout()
         h_box_edit_config.addWidget(self.edit_config)
         h_box_edit_config.addStretch(1)
 
-        ## Version 1 controller
+        # Version 1 controller
         self.control_checkbox = QCheckBox("", self)
         self.control_label = QLabel("Version 1 controller")
 
         if config.isControlV1() is True:
             self.control_checkbox.setChecked(1)
 
         self.control_checkbox_changed = main_window.get_controller_version()
@@ -2043,81 +2115,81 @@
         )
 
         h_box_control = QtWidgets.QHBoxLayout()
         h_box_control.addWidget(self.control_checkbox)
         h_box_control.addWidget(self.control_label)
         h_box_control.addStretch(1)
 
-        ## Max thumbnails number at the data browser bottom
+        # Max thumbnails number at the data browser bottom
         self.max_thumbnails_label = QLabel(
             "Number of thumbnails " "in Data Browser:"
         )
         self.max_thumbnails_box = QtWidgets.QSpinBox()
         self.max_thumbnails_box.setMinimum(1)
         self.max_thumbnails_box.setMaximum(15)
         self.max_thumbnails_box.setValue(config.get_max_thumbnails())
         self.max_thumbnails_box.setSingleStep(1)
 
         h_box_max_thumbnails = QtWidgets.QHBoxLayout()
         h_box_max_thumbnails.addWidget(self.max_thumbnails_box)
         h_box_max_thumbnails.addStretch(1)
 
-        ## Radiological vs neurological orientation in miniviewer data browser
+        # Radiological vs neurological orientation in miniviewer data browser
         self.radioView_checkbox = QCheckBox("", self)
         self.radioView_label = QLabel(
             "Radiological orientation in " "miniviewer (data browser)"
         )
 
         if config.isRadioView() is True:
             self.radioView_checkbox.setChecked(1)
 
         h_box_radioView = QtWidgets.QHBoxLayout()
         h_box_radioView.addWidget(self.radioView_checkbox)
         h_box_radioView.addWidget(self.radioView_label)
         h_box_radioView.addStretch(1)
 
-        ## Draws graphic objects
+        # Draws graphic objects
         v_box_global = QtWidgets.QVBoxLayout()
         v_box_global.addLayout(h_box_auto_save)
         v_box_global.addLayout(h_box_clinical)
         v_box_global.addLayout(h_box_admin_mode)
         v_box_global.addLayout(h_box_change_psswd)
         v_box_global.addLayout(h_box_edit_config)
         v_box_global.addLayout(h_box_control)
         v_box_global.addWidget(self.max_thumbnails_label)
         v_box_global.addLayout(h_box_max_thumbnails)
         v_box_global.addLayout(h_box_radioView)
 
         self.groupbox_global.setLayout(v_box_global)
 
-        ### Groupbox "Projects preferences"
+        # Groupbox "Projects preferences"
         self.groupbox_projects = QtWidgets.QGroupBox("Projects preferences")
 
-        ### Projects folder label/line edit
+        # Projects folder label/line edit
         self.projects_save_path_label = QLabel("Projects folder:")
         self.projects_save_path_line_edit = QLineEdit(
             config.get_projects_save_path()
         )
         self.projects_save_path_browse = QPushButton("Browse")
         self.projects_save_path_browse.clicked.connect(
             self.browse_projects_save_path
         )
 
-        ### Max projects in "Saved projects"
+        # Max projects in "Saved projects"
         self.max_projects_label = QLabel(
             'Number of projects in "Saved projects":'
         )
         self.max_projects_box = QtWidgets.QSpinBox()
         self.max_projects_box.setMinimum(1)
         self.max_projects_box.setMaximum(20)
         self.max_projects_box.setValue(config.get_max_projects())
         # self.max_projects_box.setDecimals(0)
         self.max_projects_box.setSingleStep(1)
 
-        ### Draws graphic objects
+        # Draws graphic objects
         h_box_projects_save = QtWidgets.QHBoxLayout()
         h_box_projects_save.addWidget(self.projects_save_path_line_edit)
         h_box_projects_save.addWidget(self.projects_save_path_browse)
 
         v_box_projects_save = QtWidgets.QVBoxLayout()
         v_box_projects_save.addWidget(self.projects_save_path_label)
         v_box_projects_save.addLayout(h_box_projects_save)
@@ -2132,52 +2204,81 @@
 
         projects_layout = QVBoxLayout()
         projects_layout.addLayout(v_box_projects_save)
         projects_layout.addLayout(v_box_max_projects)
 
         self.groupbox_projects.setLayout(projects_layout)
 
-        #### Groupbox "POPULSE third party preferences"
+        # Groupbox "POPULSE third party preferences"
         self.groupbox_populse = QtWidgets.QGroupBox(
             "POPULSE third party preference"
         )
 
-        #### MRI File Manager folder label/line edit
+        # MRI File Manager folder label/line edit
         self.mri_conv_path_label = QLabel(
             "Absolute path to MRIManager.jar "
             "file (e.g., mri_conv_dir/"
             "MRIFileManager/MRIManager.jar):"
         )
         self.mri_conv_path_line_edit = QLineEdit(config.get_mri_conv_path())
         self.mri_conv_path_browse = QPushButton("Browse")
         self.mri_conv_path_browse.clicked.connect(self.browse_mri_conv_path)
 
-        #### Draws graphic objects
+        # Draws graphic objects
         h_box_mri_conv = QtWidgets.QHBoxLayout()
         h_box_mri_conv.addWidget(self.mri_conv_path_line_edit)
         h_box_mri_conv.addWidget(self.mri_conv_path_browse)
 
         v_box_mri_conv = QtWidgets.QVBoxLayout()
         v_box_mri_conv.addWidget(self.mri_conv_path_label)
         v_box_mri_conv.addLayout(h_box_mri_conv)
 
         populse_layout = QVBoxLayout()
         populse_layout.addLayout(v_box_mri_conv)
 
         self.groupbox_populse.setLayout(populse_layout)
 
+        # Groupbox "External resources preferences"
+        self.groupbox_resources = QtWidgets.QGroupBox(
+            "External resources preferences"
+        )
+
+        # Resources folder label/line edit
+        self.resources_path_label = QLabel(
+            "Absolute path to the external resources data (some processes may "
+            "require external data to function properly):"
+        )
+        self.resources_path_line_edit = QLineEdit(config.get_resources_path())
+        self.resources_path_browse = QPushButton("Browse")
+        self.resources_path_browse.clicked.connect(self.browse_resources_path)
+
+        # Draws graphic objects
+        h_box_resources = QtWidgets.QHBoxLayout()
+        h_box_resources.addWidget(self.resources_path_line_edit)
+        h_box_resources.addWidget(self.resources_path_browse)
+
+        v_box_resources = QtWidgets.QVBoxLayout()
+        v_box_resources.addWidget(self.resources_path_label)
+        v_box_resources.addLayout(h_box_resources)
+
+        resources_layout = QVBoxLayout()
+        resources_layout.addLayout(v_box_resources)
+
+        self.groupbox_resources.setLayout(resources_layout)
+
         # Final tab layouts
         h_box_top = QtWidgets.QHBoxLayout()
         h_box_top.addWidget(self.groupbox_global)
         h_box_top.addStretch(1)
 
         self.tab_tools_layout = QtWidgets.QVBoxLayout()
         self.tab_tools_layout.addLayout(h_box_top)
         self.tab_tools_layout.addWidget(self.groupbox_projects)
         self.tab_tools_layout.addWidget(self.groupbox_populse)
+        self.tab_tools_layout.addWidget(self.groupbox_resources)
         self.tab_tools_layout.addStretch(1)
         self.tab_tools.setLayout(self.tab_tools_layout)
 
         # The 'OK' push button
         self.push_button_ok = QtWidgets.QPushButton("OK")
         self.push_button_ok.setObjectName("pushButton_ok")
         self.push_button_ok.clicked.connect(self.ok_clicked)
@@ -2415,14 +2516,46 @@
 
         v_box_ants = QtWidgets.QVBoxLayout()
         v_box_ants.addLayout(h_box_use_ants)
         v_box_ants.addLayout(v_box_ants_path)
 
         self.groupbox_ants.setLayout(v_box_ants)
 
+        # Groupbox "freesurfer"
+        self.groupbox_freesurfer = QtWidgets.QGroupBox("freesurfer")
+
+        self.use_freesurfer_label = QLabel("Use freesurfer")
+        self.use_freesurfer_checkbox = QCheckBox("", self)
+
+        self.freesurfer_label = QLabel(
+            "freesurfer path (e.g. freesurfer_dir/FreeSurferEnv.sh):"
+        )
+        self.freesurfer_choice = QLineEdit(config.get_freesurfer_setup())
+        self.freesurfer_browse = QPushButton("Browse")
+        self.freesurfer_browse.clicked.connect(self.browse_freesurfer)
+
+        h_box_use_freesurfer = QtWidgets.QHBoxLayout()
+        h_box_use_freesurfer.addWidget(self.use_freesurfer_checkbox)
+        h_box_use_freesurfer.addWidget(self.use_freesurfer_label)
+        h_box_use_freesurfer.addStretch(1)
+
+        h_box_freesurfer_path = QtWidgets.QHBoxLayout()
+        h_box_freesurfer_path.addWidget(self.freesurfer_choice)
+        h_box_freesurfer_path.addWidget(self.freesurfer_browse)
+
+        v_box_freesurfer_path = QtWidgets.QVBoxLayout()
+        v_box_freesurfer_path.addWidget(self.freesurfer_label)
+        v_box_freesurfer_path.addLayout(h_box_freesurfer_path)
+
+        v_box_freesurfer = QtWidgets.QVBoxLayout()
+        v_box_freesurfer.addLayout(h_box_use_freesurfer)
+        v_box_freesurfer.addLayout(v_box_freesurfer_path)
+
+        self.groupbox_freesurfer.setLayout(v_box_freesurfer)
+
         # Groupbox "CAPSUL"
         groupbox_capsul = Qt.QGroupBox("CAPSUL")
         capsul_config_button = Qt.QPushButton(
             "Edit CAPSUL config", default=False, autoDefault=False
         )
         capsul_config_button.clicked.connect(self.edit_capsul_config)
         h_box_capsul = Qt.QHBoxLayout()
@@ -2436,14 +2569,15 @@
         # general layout
         self.tab_pipeline_layout = QtWidgets.QVBoxLayout()
         self.tab_pipeline_layout.addWidget(self.groupbox_matlab)
         self.tab_pipeline_layout.addWidget(self.groupbox_spm)
         self.tab_pipeline_layout.addWidget(self.groupbox_fsl)
         self.tab_pipeline_layout.addWidget(self.groupbox_afni)
         self.tab_pipeline_layout.addWidget(self.groupbox_ants)
+        self.tab_pipeline_layout.addWidget(self.groupbox_freesurfer)
         self.tab_pipeline_layout.addWidget(groupbox_capsul)
 
         self.tab_pipeline_layout.addStretch(1)
         self.tab_pipeline.setLayout(self.tab_pipeline_layout)
 
         if config.get_use_spm_standalone():
             archi = platform.architecture()
@@ -2493,14 +2627,17 @@
 
         if config.get_use_afni():
             self.use_afni_checkbox.setChecked(True)
 
         if config.get_use_ants():
             self.use_ants_checkbox.setChecked(True)
 
+        if config.get_use_freesurfer():
+            self.use_freesurfer_checkbox.setChecked(True)
+
         # The 'Appearance' tab
         self.tab_appearance = QtWidgets.QWidget()
         self.tab_appearance.setObjectName("tab_appearance")
         self.tab_widget.addTab(
             self.tab_appearance, _translate("Dialog", "Appearance")
         )
 
@@ -2572,37 +2709,49 @@
         self.appearance_layout.addWidget(self.label_text_color)
         self.appearance_layout.addWidget(self.text_color_combo)
         self.appearance_layout.addWidget(self.fullscreen_cbox)
         self.appearance_layout.addLayout(mainwindow_size_lay)
         self.appearance_layout.addStretch(1)
         self.tab_appearance.setLayout(self.appearance_layout)
 
-        self.setLayout(vbox)
+        # Global layout - scrollable global window
+        self.scroll = QScrollArea()
+        self.scroll.setWidgetResizable(True)
+        self.widget = QtWidgets.QWidget()
+        self.widget.setLayout(vbox)
+        self.scroll.setWidget(self.widget)
+        self.final_layout = QVBoxLayout()
+        self.final_layout.addWidget(self.scroll)
+        self.setLayout(self.final_layout)
 
         # Disabling widgets
         self.use_spm_changed()
         self.use_matlab_changed()
         self.use_matlab_standalone_changed()
         self.use_spm_standalone_changed()
         self.use_fsl_changed()
         self.use_afni_changed()
         self.use_ants_changed()
+        self.use_freesurfer_changed()
 
         # Signals
         self.use_matlab_checkbox.stateChanged.connect(self.use_matlab_changed)
         self.use_matlab_standalone_checkbox.stateChanged.connect(
             self.use_matlab_standalone_changed
         )
         self.use_spm_checkbox.stateChanged.connect(self.use_spm_changed)
         self.use_spm_standalone_checkbox.stateChanged.connect(
             self.use_spm_standalone_changed
         )
         self.use_fsl_checkbox.stateChanged.connect(self.use_fsl_changed)
         self.use_afni_checkbox.stateChanged.connect(self.use_afni_changed)
         self.use_ants_checkbox.stateChanged.connect(self.use_ants_changed)
+        self.use_freesurfer_checkbox.stateChanged.connect(
+            self.use_freesurfer_changed
+        )
 
     def browse_fsl(self):
         """Called when fsl browse button is clicked."""
 
         fname = QFileDialog.getOpenFileName(
             self, "Choose FSL config file", os.path.expanduser("~")
         )[0]
@@ -2623,14 +2772,23 @@
 
         fname = QFileDialog.getExistingDirectory(
             self, "Choose ANTS directory", os.path.expanduser("~")
         )
         if fname:
             self.ants_choice.setText(fname)
 
+    def browse_freesurfer(self):
+        """Called when freesurfer browse button is clicked."""
+
+        fname = QFileDialog.getOpenFileName(
+            self, "Choose freesurfer env file", os.path.expanduser("~")
+        )[0]
+        if fname:
+            self.freesurfer_choice.setText(fname)
+
     def browse_matlab(self):
         """Called when matlab browse button is clicked."""
 
         fname = QFileDialog.getOpenFileName(
             self, "Choose Matlab file", os.path.expanduser("~")
         )[0]
         if fname:
@@ -2667,14 +2825,25 @@
 
         if fname:
             self.projects_save_path_line_edit.setText(fname)
 
             with open(os.path.join(fname, ".gitignore"), "w") as myFile:
                 myFile.write("/*")
 
+    def browse_resources_path(self):
+        """Called when "resources" browse button is clicked."""
+
+        fname = QFileDialog.getExistingDirectory(
+            self,
+            "Select the location of the " "External resources folder",
+            os.path.expanduser("~"),
+        )
+        if fname:
+            self.resources_path_line_edit.setText(fname)
+
     def browse_spm(self):
         """Called when spm browse button is clicked."""
 
         fname = QFileDialog.getExistingDirectory(
             self, "Choose SPM directory", os.path.expanduser("~")
         )
         if fname:
@@ -2961,14 +3130,25 @@
 
             if use_ants:
                 self.ants_choice.setText(config.get_ants_path())
 
             use_ants = Qt.Qt.Checked if use_ants else Qt.Qt.Unchecked
             self.use_ants_checkbox.setCheckState(use_ants)
 
+            # freesurfer
+            use_freesurfer = config.get_use_freesurfer()
+
+            if use_freesurfer:
+                self.freesurfer_choice.setText(config.get_freesurfer_setup())
+
+            use_freesurfer = (
+                Qt.Qt.Checked if use_freesurfer else Qt.Qt.Unchecked
+            )
+            self.use_freesurfer_checkbox.setCheckState(use_freesurfer)
+
             # fsl
             use_fsl = config.get_use_fsl()
 
             if use_fsl:
                 self.fsl_choice.setText(config.get_fsl_config())
 
             use_fsl = Qt.Qt.Checked if use_fsl else Qt.Qt.Unchecked
@@ -3033,14 +3213,24 @@
 
             if self.use_ants_checkbox.isChecked():
                 config.set_use_ants(True)
 
             else:
                 config.set_use_ants(False)
 
+            # Use freesurfer
+            freesurfer_setup = self.freesurfer_choice.text()
+            config.set_freesurfer_setup(freesurfer_setup)
+
+            if self.use_freesurfer_checkbox.isChecked():
+                config.set_use_freesurfer(True)
+
+            else:
+                config.set_use_freesurfer(False)
+
             # Use FSL
             fsl_conf = self.fsl_choice.text()
             config.set_fsl_config(fsl_conf)
 
             if self.use_fsl_checkbox.isChecked():
                 config.set_use_fsl(True)
 
@@ -3085,15 +3275,14 @@
                 config.set_use_spm_standalone(True)
 
             else:
                 config.set_use_spm_standalone(False)
 
         # complete backup and testing
         else:
-
             # Auto-save
             if self.save_checkbox.isChecked():
                 config.setAutoSave(True)
 
             else:
                 config.setAutoSave(False)
 
@@ -3223,14 +3412,59 @@
                 except Exception:
                     self.wrong_path(ants_dir, "ANTS")
                     QApplication.restoreOverrideCursor()
                     return False
             else:
                 config.set_use_ants(False)
 
+            # freesurfer config test
+            if self.use_freesurfer_checkbox.isChecked():
+                freesurfer_setup = self.freesurfer_choice.text()
+                freesurfer_dir = os.path.dirname(freesurfer_setup)
+
+                if "FREESURFER_HOME" not in os.environ:
+                    os.environ["FREESURFER_HOME"] = freesurfer_dir
+
+                freesurfer_cmd = "recon-all"
+
+                if os.path.isdir(freesurfer_dir):
+                    freesurfer_cmd = os.path.join(
+                        freesurfer_dir, "bin", freesurfer_cmd
+                    )
+
+                else:
+                    self.wrong_path(freesurfer_dir, "freesurfer")
+                    QApplication.restoreOverrideCursor()
+                    return False
+
+                try:
+                    p = subprocess.Popen(
+                        [freesurfer_cmd, "--version"],
+                        stdin=subprocess.PIPE,
+                        stdout=subprocess.PIPE,
+                        stderr=subprocess.PIPE,
+                    )
+                    output, err = p.communicate()
+
+                    if err == b"":
+                        config.set_freesurfer_setup(freesurfer_setup)
+                        config.set_use_freesurfer(True)
+
+                    else:
+                        self.wrong_path(freesurfer_dir, "freesurfer")
+                        QApplication.restoreOverrideCursor()
+                        return False
+
+                except Exception:
+                    self.wrong_path(freesurfer_dir, "freesurfer")
+                    QApplication.restoreOverrideCursor()
+                    return False
+            else:
+                config.set_use_freesurfer(False)
+
             # FSL config test
             if self.use_fsl_checkbox.isChecked():
                 fsl_conf = self.fsl_choice.text()
 
                 if fsl_conf == "":
                     fsl_cmd = "flirt"
 
@@ -3274,33 +3508,30 @@
             # SPM & Matlab (license) config test
             matlab_input = self.matlab_choice.text()
             spm_input = self.spm_choice.text()
 
             if (
                 matlab_input != "" and spm_input != ""
             ) or self.use_spm_checkbox.isChecked():
-
                 if not os.path.isfile(matlab_input):
                     self.wrong_path(matlab_input, "Matlab")
                     QApplication.restoreOverrideCursor()
                     return False
 
                 if (
                     matlab_input == config.get_matlab_path()
                     and spm_input == config.get_spm_path()
                 ):
-
                     if self.use_spm_checkbox.isChecked():
                         config.set_use_spm(True)
                         config.set_use_matlab(True)
                         config.set_use_matlab_standalone(False)
                         config.set_use_spm_standalone(False)
 
                 elif os.path.isdir(spm_input):
-
                     try:
                         matlab_cmd = (
                             "restoredefaultpath; "
                             "addpath('" + spm_input + "'); "
                             "[name, ~]=spm('Ver'); "
                             "exit"
                         )
@@ -3349,26 +3580,25 @@
                 else:
                     self.wrong_path(spm_input, "SPM")
                     QApplication.restoreOverrideCursor()
                     return False
 
             # Matlab alone config test
             if matlab_input != "" or self.use_matlab_checkbox.isChecked():
-
                 if matlab_input == config.get_matlab_path():
-
-                    if (self.use_matlab_checkbox.isChecked() and
-                            not self.use_spm_checkbox.isChecked()):
+                    if (
+                        self.use_matlab_checkbox.isChecked()
+                        and not self.use_spm_checkbox.isChecked()
+                    ):
                         config.set_use_matlab(True)
                         config.set_use_matlab_standalone(False)
                         config.set_use_spm(False)
                         config.set_use_spm_standalone(False)
 
                 elif os.path.isfile(matlab_input):
-
                     try:
                         matlab_cmd = "ver; exit"
                         p = subprocess.Popen(
                             [
                                 matlab_input,
                                 "-nodisplay",
                                 "-nodesktop",
@@ -3410,38 +3640,35 @@
             spm_input = self.spm_standalone_choice.text()
             matlab_input = self.matlab_standalone_choice.text()
             archi = platform.architecture()
 
             if (
                 matlab_input != "" and spm_input != ""
             ) or self.use_spm_standalone_checkbox.isChecked():
-
                 if (not os.path.isdir(matlab_input)) and (
-                    not "Windows" in archi[1]
+                    "Windows" not in archi[1]
                 ):
                     self.wrong_path(matlab_input, "Matlab standalone")
                     QApplication.restoreOverrideCursor()
                     return False
 
                 if (matlab_input == config.get_matlab_standalone_path()) and (
                     spm_input == config.get_spm_standalone_path()
                 ):
-
                     if self.use_spm_standalone_checkbox.isChecked():
                         config.set_use_spm_standalone(True)
 
                         if "Windows" in archi[1]:
                             config.set_use_matlab(True)
                             config.set_use_matlab_standalone(False)
 
                         else:
                             config.set_use_matlab_standalone(True)
 
                 elif os.path.isdir(spm_input):
-
                     if "Windows" in archi[1]:
                         mcr = glob.glob(
                             os.path.join(spm_input, "spm*_win*.exe")
                         )
                         pos = -1
                         nb_bit_sys = archi[0]
 
@@ -3456,17 +3683,15 @@
                             QApplication.restoreOverrideCursor()
                             return False
 
                     elif os.path.isdir(matlab_input):
                         mcr = glob.glob(os.path.join(spm_input, "run_spm*.sh"))
 
                     if mcr:
-
                         try:
-
                             if "Windows" in archi[1]:
                                 p = subprocess.Popen(
                                     [mcr[pos], "--version"],
                                     stdin=subprocess.PIPE,
                                     stdout=subprocess.PIPE,
                                     stderr=subprocess.PIPE,
                                 )
@@ -3486,31 +3711,30 @@
                             ) or output.startswith(b"SPM8 "):
                                 # spm8 standalone doesn't accept --version
                                 # argument but prints a message that we can
                                 # interpret as saying that SPM8 is working
                                 # anyway.
 
                                 if (
-                                    self.use_spm_standalone_checkbox.isChecked()
-                                ):
+                                    self.use_spm_standalone_checkbox.isChecked
+                                )():
                                     config.set_use_spm_standalone(True)
                                     config.set_use_matlab_standalone(True)
 
                                 config.set_spm_standalone_path(spm_input)
                                 config.set_matlab_standalone_path(matlab_input)
 
                             elif (
                                 (err != b"")
                                 and (b"version" in output.split()[2:])
                                 and (b"(standalone)" in output.split()[2:])
                             ):
-
                                 if (
-                                    self.use_spm_standalone_checkbox.isChecked()
-                                ):
+                                    self.use_spm_standalone_checkbox.isChecked
+                                )():
                                     config.set_use_spm_standalone(True)
                                     config.set_use_matlab_standalone(True)
                                 config.set_spm_standalone_path(spm_input)
                                 config.set_matlab_standalone_path(matlab_input)
 
                                 if isinstance(err, bytes):
                                     err = err.decode("utf-8")
@@ -3521,15 +3745,14 @@
                                     " Mia's preferences seems to be valid "
                                     "but the following issue has been "
                                     "detected:\n{}\nPlease fix this issue"
                                     " to avoid a malfunction ...".format(err)
                                 )
 
                             elif err != b"":
-
                                 if "shared libraries" in str(err):
                                     self.wrong_path(
                                         matlab_input, "Matlab standalone"
                                     )
                                     QApplication.restoreOverrideCursor()
                                     return False
 
@@ -3541,15 +3764,15 @@
                                     return False
 
                             else:
                                 self.wrong_path(spm_input, "SPM standalone")
                                 QApplication.restoreOverrideCursor()
                                 return False
 
-                        except Exception as e:
+                        except Exception:
                             self.wrong_path(spm_input, "SPM standalone")
                             QApplication.restoreOverrideCursor()
                             return False
 
                     else:
                         self.wrong_path(spm_input, "SPM standalone")
                         QApplication.restoreOverrideCursor()
@@ -3561,28 +3784,28 @@
                     return False
 
             # Matlab (MCR) alone config test
             if (
                 matlab_input != ""
                 or self.use_matlab_standalone_checkbox.isChecked()
             ):
-
                 if "Windows" in archi[1]:
                     print(
                         "WARNING: Matlab Standalone Path enter, this "
                         "is unnecessary to use SPM12."
                     )
                     config.set_use_matlab(True)
                     config.set_use_matlab_standalone(False)
                     config.set_matlab_standalone_path(matlab_input)
 
                 elif os.path.isdir(matlab_input):
-
-                    if (self.use_matlab_standalone_checkbox.isChecked() and
-                            not self.use_spm_standalone_checkbox.isChecked()):
+                    if (
+                        self.use_matlab_standalone_checkbox.isChecked()
+                        and not self.use_spm_standalone_checkbox.isChecked()
+                    ):
                         config.set_use_matlab_standalone(True)
                         config.set_matlab_standalone_path(matlab_input)
                         config.set_use_matlab(False)
                         config.set_use_spm_standalone(False)
                         config.set_use_spm(False)
 
                 else:
@@ -3642,16 +3865,15 @@
             mri_conv_path = self.mri_conv_path_line_edit.text()
 
             if mri_conv_path == "":
                 self.msg = QMessageBox()
                 self.msg.setIcon(QMessageBox.Warning)
                 self.msg.setText("Empty MRIFileManager.jar path")
                 self.msg.setInformativeText(
-                    "No path has been entered for "
-                    "MRIFileManager.jar.".format(mri_conv_path)
+                    "No path has been entered for " "MRIFileManager.jar."
                 )
                 self.msg.setWindowTitle("Warning")
                 self.msg.setStandardButtons(QMessageBox.Ok)
                 self.msg.buttonClicked.connect(self.msg.close)
                 self.msg.show()
                 config.set_mri_conv_path(mri_conv_path)
 
@@ -3670,27 +3892,47 @@
                 self.msg.setWindowTitle("Error")
                 self.msg.setStandardButtons(QMessageBox.Ok)
                 self.msg.buttonClicked.connect(self.msg.close)
                 self.msg.show()
                 QApplication.restoreOverrideCursor()
                 return False
 
+            # Resources folder
+            resources_folder = self.resources_path_line_edit.text()
+
+            if os.path.isdir(resources_folder):
+                config.set_resources_path(resources_folder)
+
+            else:
+                self.msg = QMessageBox()
+                self.msg.setIcon(QMessageBox.Critical)
+                self.msg.setText("Invalid resources folder path")
+                self.msg.setInformativeText(
+                    "The resources folder path entered "
+                    "{0} is "
+                    "invalid.".format(resources_folder)
+                )
+                self.msg.setWindowTitle("Error")
+                self.msg.setStandardButtons(QMessageBox.Ok)
+                self.msg.buttonClicked.connect(self.msg.close)
+                self.msg.show()
+                QApplication.restoreOverrideCursor()
+                return False
+
             self.signal_preferences_change.emit()
             QApplication.restoreOverrideCursor()
 
         c_c = config.config.setdefault("capsul_config", {})
         c_e = config.get_capsul_engine()
 
         if c_c and c_e:
-
             # sync capsul config from mia config, if module is not used:
 
             # AFNI CapsulConfig
             if not config.get_use_afni():
-
                 # TODO: We only deal here with the global environment
                 cif = c_e.settings.config_id_field
 
                 with c_e.settings as settings:
                     configafni = settings.config("afni", "global")
 
                     if configafni:
@@ -3705,15 +3947,14 @@
                     ]["directory"]
 
                 except KeyError:
                     pass
 
             # ANTS CapsulConfig
             if not config.get_use_ants():
-
                 # TODO: We only deal here with the global environment
                 cif = c_e.settings.config_id_field
 
                 with c_e.settings as settings:
                     configants = settings.config("ants", "global")
 
                     if configants:
@@ -3726,14 +3967,37 @@
                     del c_c["engine"]["global"]["capsul.engine.module.ants"][
                         "ants"
                     ]["directory"]
 
                 except KeyError:
                     pass
 
+            # freesurfer CapsulConfig
+            if not config.get_use_freesurfer():
+                # TODO: We only deal here with the global environment
+                cif = c_e.settings.config_id_field
+
+                with c_e.settings as settings:
+                    configants = settings.config("freesurfer", "global")
+
+                    if configants:
+                        settings.remove_config(
+                            "freesurfer", "global", getattr(configants, cif)
+                        )
+
+                # TODO: We could use a generic method to deal with c_c?
+                # try:
+                #     del c_c["engine"]["global"][
+                #         "capsul.engine.module.freesurfer"
+                #         ]["freesurfer"
+                #          ]["directory"]
+                #
+                # except KeyError:
+                #     pass
+
             # FSL CapsulConfig
             if not config.get_use_fsl():
                 # TODO: We only deal here with the global environment
                 cif = c_e.settings.config_id_field
 
                 with c_e.settings as settings:
                     configfsl = settings.config("fsl", "global")
@@ -3758,153 +4022,139 @@
                     ]["config"]
 
                 except KeyError:
                     pass
 
             # SPM standalone CapsulConfig
             if not config.get_use_spm_standalone():
-
                 try:
                     keys = c_c["engine"]["global"][
                         "capsul.engine.module.spm"
                     ].keys()
 
                 except KeyError:
                     pass
 
                 else:
                     dict4clean = dict.fromkeys(keys, False)
 
                     for i in keys:
-
                         if (
                             "standalone"
                             in c_c["engine"]["global"][
                                 "capsul.engine.module.spm"
                             ][i]
                         ):
-
                             if (
                                 c_c["engine"]["global"][
                                     "capsul.engine.module.spm"
                                 ][i]["standalone"]
                                 is True
                             ):
                                 dict4clean[i] = True
 
                         else:
                             # TODO: What we do if standalone is not a key ?
                             pass
 
                     for i in dict4clean:
-
                         if dict4clean[i]:
                             del c_c["engine"]["global"][
                                 "capsul.engine.module.spm"
                             ][i]
 
             if not config.get_use_spm():
-
                 try:
                     keys = c_c["engine"]["global"][
                         "capsul.engine.module.spm"
                     ].keys()
 
                 except KeyError:
                     pass
 
                 else:
                     dict4clean = dict.fromkeys(keys, False)
 
                     for i in keys:
-
                         if (
                             "standalone"
                             in c_c["engine"]["global"][
                                 "capsul.engine.module.spm"
                             ][i]
                         ):
-
                             if (
                                 c_c["engine"]["global"][
                                     "capsul.engine.module.spm"
                                 ][i]["standalone"]
                                 is False
                             ):
                                 dict4clean[i] = True
 
                     for i in dict4clean:
-
                         if dict4clean[i]:
                             del c_c["engine"]["global"][
                                 "capsul.engine.module.spm"
                             ][i]
 
             try:
                 if not c_c["engine"]["global"]["capsul.engine.module.spm"]:
                     del c_c["engine"]["global"]["capsul.engine.module.spm"]
 
             except KeyError:
                 pass
 
             if not config.get_use_matlab():
-
                 try:
                     keys = c_c["engine"]["global"][
                         "capsul.engine.module.matlab"
                     ].keys()
 
                 except KeyError:
                     pass
 
                 else:
                     dict4clean = dict.fromkeys(keys, False)
 
                     for i in keys:
-
                         if (
                             "executable"
                             in c_c["engine"]["global"][
                                 "capsul.engine.module.matlab"
                             ][i]
                         ):
                             dict4clean[i] = True
 
                     for i in dict4clean:
-
                         if dict4clean[i]:
                             del c_c["engine"]["global"][
                                 "capsul.engine.module.matlab"
                             ][i]["executable"]
 
             if not config.get_use_matlab_standalone():
-
                 try:
                     keys = c_c["engine"]["global"][
                         "capsul.engine.module.matlab"
                     ].keys()
 
                 except KeyError:
                     pass
 
                 else:
                     dict4clean = dict.fromkeys(keys, False)
 
                     for i in keys:
-
                         if (
                             "mcr_directory"
                             in c_c["engine"]["global"][
                                 "capsul.engine.module.matlab"
                             ][i]
                         ):
                             dict4clean[i] = True
 
                     for i in dict4clean:
-
                         if dict4clean[i]:
                             del c_c["engine"]["global"][
                                 "capsul.engine.module.matlab"
                             ][i]["mcr_directory"]
 
             try:
                 if not c_c["engine"]["global"]["capsul.engine.module.matlab"]:
@@ -3922,31 +4172,31 @@
             #
             #     except KeyError:
             #         pass
             #
             #     # try:
             #     #     del c_c['engine']['global'][
             #     #         'capsul.engine.module.spm'][
-            #     #                             'spm12-standalone']['standalone']
+            #     #                           'spm12-standalone']['standalone']
             #     #
             #     # except KeyError:
             #     #     pass
             #
             #     cif = c_e.settings.config_id_field
             #
             #     with c_e.settings as settings:
             #
             #         for c in settings.configs('spm', 'global'):
             #             settings.remove_config('spm', 'global',
             #                                    getattr(c, cif))
             #
             #         # settings.new_config('spm', 'global',
-            #         #         {'config_id': 'spm',
-            #         #          'standalone': False,
-            #         #          'directory': config.get_spm_standalone_path()})
+            #         #        {'config_id': 'spm',
+            #         #         'standalone': False,
+            #         #         'directory': config.get_spm_standalone_path()})
             #
             #         # for c in settings.configs('matlab', 'global'):
             #         #     settings.remove_config('matlab', 'global',
             #         #                            getattr(c, cif))
             #
             #     # try:
             #     #     del c_c['engine']['global'][
@@ -3981,16 +4231,16 @@
             #         #                 'standalone': False})
             #
             #         # for c in settings.configs('matlab', 'global'):
             #         #     settings.remove_config('matlab', 'global',
             #         #                            getattr(c, cif))
             #         #
             #         # settings.new_config('matlab', 'global',
-            #         #                {'config_id': 'matlab',
-            #         #                 'executable': config.get_matlab_path()})
+            #         #               {'config_id': 'matlab',
+            #         #                'executable': config.get_matlab_path()})
             #     # try:
             #     #     c_c['engine']['global'][
             #     #         'capsul.engine.module.matlab'][
             #     #             'executable'] = config.get_matlab_path()
             #     #
             #     # except KeyError:
             #     #     pass
@@ -4060,14 +4310,16 @@
             #                                    getattr(c, cif))
 
         config.get_capsul_config(sync_from_engine=False)
         config.saveConfig()
         return True
 
     def ok_clicked(self):
+        """Blabla"""
+
         if self.validate_and_save(OK_clicked=True):
             self.accept()
             self.close()
 
     def use_afni_changed(self):
         """Called when the use_afni checkbox is changed."""
 
@@ -4086,14 +4338,25 @@
             self.ants_choice.setDisabled(True)
             self.ants_label.setDisabled(True)
 
         else:
             self.ants_choice.setDisabled(False)
             self.ants_label.setDisabled(False)
 
+    def use_freesurfer_changed(self):
+        """Called when the use_freesurfer checkbox is changed."""
+
+        if not self.use_freesurfer_checkbox.isChecked():
+            self.freesurfer_choice.setDisabled(True)
+            self.freesurfer_label.setDisabled(True)
+
+        else:
+            self.freesurfer_choice.setDisabled(False)
+            self.freesurfer_label.setDisabled(False)
+
     def use_fsl_changed(self):
         """Called when the use_fsl checkbox is changed."""
 
         if not self.use_fsl_checkbox.isChecked():
             self.fsl_choice.setDisabled(True)
             self.fsl_label.setDisabled(True)
 
@@ -4119,22 +4382,25 @@
             self.use_matlab_standalone_checkbox.setChecked(False)
 
     def use_matlab_standalone_changed(self):
         """Called when the use_matlab_standalone checkbox is changed."""
 
         if not self.use_matlab_standalone_checkbox.isChecked():
             archi = platform.architecture()
-            if not "Windows" in archi[1]:
+
+            if "Windows" not in archi[1]:
                 self.spm_standalone_choice.setDisabled(True)
                 self.use_spm_standalone_checkbox.setChecked(False)
                 self.spm_standalone_label.setDisabled(True)
                 self.spm_standalone_browse.setDisabled(True)
+
             self.matlab_standalone_choice.setDisabled(True)
             self.matlab_standalone_label.setDisabled(True)
             self.matlab_standalone_browse.setDisabled(True)
+
         else:
             self.matlab_standalone_choice.setDisabled(False)
             self.matlab_standalone_label.setDisabled(False)
             self.matlab_standalone_browse.setDisabled(False)
             self.use_matlab_checkbox.setChecked(False)
 
     def use_spm_changed(self):
@@ -4159,18 +4425,21 @@
     def use_spm_standalone_changed(self):
         """Called when the use_spm_standalone checkbox is changed."""
 
         if not self.use_spm_standalone_checkbox.isChecked():
             self.spm_standalone_choice.setDisabled(True)
             self.spm_standalone_label.setDisabled(True)
             self.spm_standalone_browse.setDisabled(True)
+
         else:
             archi = platform.architecture()
-            if not "Windows" in archi[1]:
+
+            if "Windows" not in archi[1]:
                 self.use_matlab_standalone_checkbox.setChecked(True)
+
             self.spm_standalone_choice.setDisabled(False)
             self.spm_standalone_label.setDisabled(False)
             self.spm_standalone_browse.setDisabled(False)
             self.spm_choice.setDisabled(True)
             self.spm_label.setDisabled(True)
             self.spm_browse.setDisabled(True)
             self.use_spm_checkbox.setChecked(False)
@@ -4207,14 +4476,16 @@
                 self.admin_mode_checkbox.setChecked(False)
 
         else:
             self.change_psswd.setVisible(False)
             self.edit_config.setVisible(False)
 
     def wrong_path(self, path, tool, extra_mess=""):
+        """Blabla"""
+
         QApplication.restoreOverrideCursor()
         self.status_label.setText("")
         self.msg = QMessageBox()
         self.msg.setIcon(QMessageBox.Critical)
         self.msg.setText("Invalid " + tool + " path")
         if extra_mess:
             extra_mess = " " + extra_mess
@@ -4225,14 +4496,16 @@
         )
         self.msg.setWindowTitle("Error")
         self.msg.setStandardButtons(QMessageBox.Ok)
         self.msg.buttonClicked.connect(self.msg.close)
         self.msg.show()
 
     def use_current_mainwindow_size(self, main_window):
+        """Blabla"""
+
         self.mainwindow_size_x_spinbox.setValue(main_window.width())
         self.mainwindow_size_y_spinbox.setValue(main_window.height())
 
 
 class PopUpProperties(QDialog):
     """Is called when the user wants to change the current project's
        properties (File > properties).
@@ -4471,29 +4744,37 @@
         push_button_yes.clicked.connect(self.yes_clicked)
         push_button_cancel.clicked.connect(self.cancel_clicked)
         if size > 1:
             push_button_yes_all.clicked.connect(self.yes_all_clicked)
             push_button_no_all.clicked.connect(self.no_all_clicked)
 
     def cancel_clicked(self):
+        """Blabla"""
+
         self.stop = True
         self.repeat = False
         self.close()
 
     def no_all_clicked(self):
+        """Blabla"""
+
         self.stop = True
         self.repeat = True
         self.close()
 
     def yes_all_clicked(self):
+        """Blabla"""
+
         self.stop = False
         self.repeat = True
         self.close()
 
     def yes_clicked(self):
+        """Blabla"""
+
         self.stop = False
         self.repeat = False
         self.close()
 
 
 class PopUpRemoveTag(QDialog):
     """Is called when the user wants to remove a user tag from
@@ -4642,15 +4923,14 @@
 
         project_list = os.listdir(self.project_path)
 
         self.v_box = QVBoxLayout()
 
         # Label
         self.label = QLabel("Projects list:")
-        h_box = QHBoxLayout()
 
         project_list.sort()
         for i in range(0, len(project_list)):
             if os.path.isdir(os.path.join(self.project_path, project_list[i])):
                 label = QLabel_clickable(project_list[i])
                 label.clicked.connect(
                     partial(self.fill_input, project_list[i])
@@ -4916,15 +5196,14 @@
             self.list_widget_filters.addItem(item)
             item.setText(filter.name)
 
     def ok_clicked(self):
         """Saves the modifications and updates the data browser."""
 
         for item in self.list_widget_filters.selectedItems():
-
             # Current filter updated
             filter_name = item.text()
             filter_object = self.project.getFilter(filter_name)
             self.project.setCurrentFilter(filter_object)
             break
 
         self.databrowser.open_filter_infos()
@@ -5295,31 +5574,32 @@
                 self.brick_list = self.project.session.get_value(
                     COLLECTION_HISTORY, history_uuid, HISTORY_BRICKS
                 )
 
                 engine = Config.get_capsul_engine()
                 try:
                     pipeline = engine.get_process_instance(self.pipeline_xml)
-                except Exception as e:
+                except Exception:
                     pipeline = None
 
                 if pipeline is not None:
                     # handle case of pipeline node alone --> exploded view
                     # (e.g. a pipeline alone and plug exported)
                     if len(pipeline.nodes) == 2:
                         for key in pipeline.nodes.keys():
                             if key != "":
                                 if isinstance(
                                     pipeline.nodes[key], PipelineNode
                                 ):
                                     pipeline = pipeline.nodes[key].process
                                     full_brick_name.pop(0)
                                     self.unitary_pipeline = True
-                    # handle cases of named pipeline/brick without being a single Pipeline node
-                    # (e.g. a pipeline alone without exporting plugs)
+                    # handle cases of named pipeline/brick without being a
+                    # single Pipeline node (e.g. a pipeline alone without
+                    # exporting plugs)
                     if (
                         not self.unitary_pipeline
                         and pipeline.name != "CustomPipeline"
                     ) or (
                         len(full_brick_name) == 2
                         and full_brick_name[1] == "main"
                     ):
@@ -5347,17 +5627,18 @@
                         break
 
                     selected_name = full_brick_name[0]
                     try:
                         self.node_selected(
                             selected_name, pipeline.nodes[selected_name]
                         )
-                    except:
+                    except Exception:
                         print(
-                            "\nerror in naming association brick\\pipeline, cannot select node"
+                            "\nerror in naming association brick\\pipeline, "
+                            "cannot select node ..."
                         )
                         pass
 
         inputs = getattr(brick_row, BRICK_INPUTS)
         outputs = getattr(brick_row, BRICK_OUTPUTS)
         brick_name = getattr(brick_row, BRICK_NAME)
         init = getattr(brick_row, BRICK_INIT)
@@ -5387,15 +5668,14 @@
         """
 
         value_scan = None
 
         for scan in self.project.session.get_documents_names(
             COLLECTION_CURRENT
         ):
-
             if scan in str(value):
                 value_scan = scan
 
         return value_scan
 
     def file_clicked(self):
         """Called when a file is clicked."""
@@ -5405,14 +5685,16 @@
         row_to_select = self.databrowser.table_data.get_scan_row(file)
         self.databrowser.table_data.selectRow(row_to_select)
         item_to_scroll_to = self.databrowser.table_data.item(row_to_select, 0)
         self.databrowser.table_data.scrollToItem(item_to_scroll_to)
         self.close()
 
     def find_associated_bricks(self, node_name):
+        """Blabla"""
+
         bricks = {}
         for uuid in self.brick_list:
             full_brick_name = self.project.session.get_value(
                 COLLECTION_BRICK, uuid, BRICK_NAME
             )
             list_full_brick_name = full_brick_name.split(".")
 
@@ -5423,14 +5705,16 @@
                 if full_brick_name not in bricks:
                     bricks[full_brick_name] = [uuid]
                 else:
                     bricks[full_brick_name].append(uuid)
         return bricks
 
     def find_process_from_plug(self, plug):
+        """Blabla"""
+
         process_name = ""
         plug_name = ""
         if plug.output:
             link_done = False
             for link in plug.links_from:
                 if not link_done:
                     link_done = True
@@ -5542,15 +5826,16 @@
         outputs,
         brick_name,
         init="",
         init_time=None,
         exec="",
         exec_time=None,
     ):
-        # Filling the table
+        """Filling the table."""
+
         self.table.removeRow(0)
         self.table.setRowCount(1)
         nbColumn = 1
         if init != "":
             nbColumn += 2
         if exec != "":
             nbColumn += 2
@@ -5846,15 +6131,15 @@
             (
                 self.list_widget_selected_tags.addItem(
                     self.list_widget_tags.takeItem(row)
                 )
             )
 
     def click_unselect_tag(self):
-        """Removes the unselected tags from populse_mia.e "selected tag" table."""
+        """Removes the unselected tags from populse_mia table."""
 
         rows = sorted(
             [
                 index.row()
                 for index in self.list_widget_selected_tags.selectedIndexes()
             ],
             reverse=True,
@@ -5880,8 +6165,10 @@
 
     clicked = pyqtSignal()
 
     def __init__(self, parent=None):
         QLabel.__init__(self, parent)
 
     def mousePressEvent(self, ev):
+        """Blabla"""
+
         self.clicked.emit()
```

### Comparing `populse_mia-2.2.2/python/populse_mia/utils/__init__.py` & `populse_mia-2.3.1/python/populse_mia/utils/__init__.py`

 * *Files identical despite different names*

### Comparing `populse_mia-2.2.2/python/populse_mia/utils/utils.py` & `populse_mia-2.3.1/python/populse_mia/utils/utils.py`

 * *Files 5% similar despite different names*

```diff
@@ -23,24 +23,33 @@
 
 import ast
 import os
 import sys
 from datetime import date, datetime, time
 
 import dateutil.parser
+
 # Populse_db imports
-from populse_db.database import (FIELD_TYPE_BOOLEAN, FIELD_TYPE_DATE,
-                                 FIELD_TYPE_DATETIME, FIELD_TYPE_FLOAT,
-                                 FIELD_TYPE_INTEGER, FIELD_TYPE_LIST_BOOLEAN,
-                                 FIELD_TYPE_LIST_DATE,
-                                 FIELD_TYPE_LIST_DATETIME,
-                                 FIELD_TYPE_LIST_FLOAT,
-                                 FIELD_TYPE_LIST_INTEGER,
-                                 FIELD_TYPE_LIST_STRING, FIELD_TYPE_LIST_TIME,
-                                 FIELD_TYPE_STRING, FIELD_TYPE_TIME)
+from populse_db.database import (
+    FIELD_TYPE_BOOLEAN,
+    FIELD_TYPE_DATE,
+    FIELD_TYPE_DATETIME,
+    FIELD_TYPE_FLOAT,
+    FIELD_TYPE_INTEGER,
+    FIELD_TYPE_LIST_BOOLEAN,
+    FIELD_TYPE_LIST_DATE,
+    FIELD_TYPE_LIST_DATETIME,
+    FIELD_TYPE_LIST_FLOAT,
+    FIELD_TYPE_LIST_INTEGER,
+    FIELD_TYPE_LIST_STRING,
+    FIELD_TYPE_LIST_TIME,
+    FIELD_TYPE_STRING,
+    FIELD_TYPE_TIME,
+)
+
 # PyQt5 imports
 from PyQt5.QtCore import QDate, QDateTime, Qt, QTime, QVariant
 from PyQt5.QtWidgets import QMessageBox
 
 # Populse_mia imports
 from populse_mia.software_properties import Config
 
@@ -62,123 +71,112 @@
 def check_value_type(value, value_type, is_subvalue=False):
     """
     Checks the type of new value in a table cell (QTableWidget).
 
     :param value: Value of the cell
     :param value_type: Type expected
     :param is_subvalue: To know if the value is a subvalue of a list
-    :returns: True if the value is valid to replace the old one, False otherwise
+    :returns: True if the value is valid to replace the old
+              one, False otherwise
     """
 
     if (value_type == FIELD_TYPE_INTEGER) or (
         value_type == FIELD_TYPE_LIST_INTEGER and is_subvalue
     ):
-
         try:
             int(value)
             return True
 
         except Exception:
             return False
 
     elif (value_type == FIELD_TYPE_FLOAT) or (
         value_type == FIELD_TYPE_LIST_FLOAT and is_subvalue
     ):
-
         try:
             float(value)
             return True
 
         except Exception:
             return False
 
     elif (value_type == FIELD_TYPE_BOOLEAN) or (
         value_type == FIELD_TYPE_LIST_BOOLEAN and is_subvalue
     ):
-
         return (
             value == "True"
-            or value == True
+            or value is True
             or value == "False"
-            or value == False
+            or value is False
         )
 
     elif (value_type == FIELD_TYPE_STRING) or (
         value_type == FIELD_TYPE_LIST_STRING and is_subvalue
     ):
-
         try:
             str(value)
             return True
 
         except Exception:
             return False
 
     elif (
         isinstance(value_type, str)
         and value_type.startswith("list_")
         and not is_subvalue
     ):
-
         if isinstance(value, str):
             value = ast.literal_eval(value)
 
         is_valid_value = True
 
         for subvalue in value:
-
             if not check_value_type(subvalue, value_type, True):
                 is_valid_value = False
                 break
 
         return is_valid_value
 
     elif (value_type == FIELD_TYPE_DATE) or (
         value_type == FIELD_TYPE_LIST_DATE and is_subvalue
     ):
-
         if isinstance(value, QDate):
             return True
 
         elif isinstance(value, str):
-
             try:
                 format = "%d/%m/%Y"
                 datetime.strptime(value, format).date()
                 return True
 
             except Exception:
                 return False
 
     elif (value_type == FIELD_TYPE_DATETIME) or (
         value_type == FIELD_TYPE_LIST_DATETIME and is_subvalue
     ):
-
         if isinstance(value, QDateTime):
             return True
 
         elif isinstance(value, str):
-
             try:
                 format = "%d/%m/%Y %H:%M:%S.%f"
                 datetime.strptime(value, format)
                 return True
 
             except Exception:
                 return False
 
     elif (value_type == FIELD_TYPE_TIME) or (
         value_type == FIELD_TYPE_LIST_TIME and is_subvalue
     ):
-
         if isinstance(value, QTime):
             return True
 
         elif isinstance(value, str):
-
             try:
                 format = "%H:%M:%S.%f"
                 datetime.strptime(value, format).time()
                 return True
 
             except Exception:
                 return False
@@ -232,15 +230,14 @@
 
     :param item: item to set
     :param value: new item value
     :param value_type: new value type
     """
 
     if value_type.startswith("list_"):
-
         if isinstance(value, str):
             value = ast.literal_eval(value)
 
         if value_type == FIELD_TYPE_LIST_DATE:
             new_list = []
 
             for subvalue in value:
@@ -264,43 +261,40 @@
 
             value = new_list
 
         value_prepared = str(value)
         item.setData(Qt.EditRole, QVariant(value_prepared))
 
     elif value_type == FIELD_TYPE_DATETIME:
-
         if isinstance(value, datetime):
             value_prepared = QDateTime(value)
 
         elif isinstance(value, QDateTime):
             value_prepared = value
 
         elif isinstance(value, str):
             format = "%d/%m/%Y %H:%M:%S.%f"
             value_prepared = QDateTime(datetime.strptime(value, format))
 
         item.setData(Qt.EditRole, QVariant(value_prepared))
 
     elif value_type == FIELD_TYPE_DATE:
-
         if isinstance(value, date):
             value_prepared = QDate(value)
 
         elif isinstance(value, QDate):
             value_prepared = value
 
         elif isinstance(value, str):
             format = "%d/%m/%Y"
             value_prepared = QDate(datetime.strptime(value, format).date())
 
         item.setData(Qt.EditRole, QVariant(value_prepared))
 
     elif value_type == FIELD_TYPE_TIME:
-
         if isinstance(value, time):
             value_prepared = QTime(value)
 
         elif isinstance(value, QTime):
             value_prepared = value
 
         elif isinstance(value, str):
@@ -357,48 +351,43 @@
     elif value_type == FIELD_TYPE_STRING:
         return str(value)
 
     elif value_type == FIELD_TYPE_INTEGER:
         return int(value)
 
     elif value_type == FIELD_TYPE_BOOLEAN:
-
         if value == "True" or value is True:
             return True
 
         elif value == "False" or value is False:
             return False
 
     elif value_type == FIELD_TYPE_DATETIME:
-
         if isinstance(value, QDateTime):
             return value.toPyDateTime()
 
         elif isinstance(value, str):
-
             try:
                 format = "%d/%m/%Y %H:%M:%S.%f"
                 date_typed = datetime.strptime(value, format)
 
             except Exception:
                 date_typed = dateutil.parser.parse(value)
 
             return date_typed
 
     elif value_type == FIELD_TYPE_DATE:
-
         if isinstance(value, QDate):
             return value.toPyDate()
 
         elif isinstance(value, str):
             format = "%d/%m/%Y"
             return datetime.strptime(value, format).date()
 
     elif value_type == FIELD_TYPE_TIME:
-
         if isinstance(value, QTime):
             return value.toPyTime()
 
         elif isinstance(value, str):
             format = "%H:%M:%S.%f"
             return datetime.strptime(value, format).time()
```

### Comparing `populse_mia-2.2.2/python/populse_mia.egg-info/PKG-INFO` & `populse_mia-2.3.1/python/populse_mia.egg-info/PKG-INFO`

 * *Files 10% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: populse-mia
-Version: 2.2.2
+Version: 2.3.1
 Summary: populse mia
 Home-page: http://populse.github.io/populse_mia
 Author: Populse team
 Author-email: populse-support@univ-grenoble-alpes.fr
 License: CeCILL
 Platform: OS Independent
 Classifier: Development Status :: 5 - Production/Stable
```

### Comparing `populse_mia-2.2.2/python/populse_mia.egg-info/SOURCES.txt` & `populse_mia-2.3.1/python/populse_mia.egg-info/SOURCES.txt`

 * *Files 0% similar despite different names*

```diff
@@ -1,12 +1,11 @@
 LICENSE
 README.md
 pyproject.toml
 setup.py
-python/populse_mia/#install_mia.py
 python/populse_mia/__init__.py
 python/populse_mia/__main__.py
 python/populse_mia/info.py
 python/populse_mia/main.py
 python/populse_mia/software_properties.py
 python/populse_mia/test.py
 python/populse_mia.egg-info/PKG-INFO
```

### Comparing `populse_mia-2.2.2/setup.py` & `populse_mia-2.3.1/setup.py`

 * *Files 9% similar despite different names*

```diff
@@ -1,8 +1,11 @@
 # -*- coding: utf-8 -*-
+
+"""Building, distributing, and installing modules using the Distutils"""
+
 import os
 
 from setuptools import find_packages, setup
 
 # Select modules to include in distribution
 modules = find_packages("python")
 print("\nmodules found: ", modules)
```

