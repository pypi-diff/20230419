# Comparing `tmp/siat-1.9-py3-none-any.whl.zip` & `tmp/siat-1.9.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,8 +1,8 @@
-Zip file size: 1117402 bytes, number of entries: 115
+Zip file size: 1120883 bytes, number of entries: 117
 -rw-rw-rw-  2.0 fat      840 b- defN 23-Apr-10 11:29 siat/__init__.py
 -rw-rw-rw-  2.0 fat     2130 b- defN 23-Apr-10 11:29 siat/allin.py
 -rw-rw-rw-  2.0 fat      747 b- defN 23-Apr-10 11:29 siat/alpha_vantage_test.py
 -rw-rw-rw-  2.0 fat    28555 b- defN 23-Apr-10 11:29 siat/assets_liquidity.py
 -rw-rw-rw-  2.0 fat     1285 b- defN 23-Apr-10 11:29 siat/assets_liquidity_test.py
 -rw-rw-rw-  2.0 fat    10110 b- defN 23-Apr-10 11:29 siat/barrons_scraping_test.py
 -rw-rw-rw-  2.0 fat    36597 b- defN 23-Apr-10 11:29 siat/beta_adjustment.py
@@ -31,20 +31,22 @@
 -rw-rw-rw-  2.0 fat     2944 b- defN 23-Apr-10 11:29 siat/esg_test.py
 -rw-rw-rw-  2.0 fat    47177 b- defN 23-Apr-10 11:29 siat/fama_french.py
 -rw-rw-rw-  2.0 fat     4678 b- defN 23-Apr-10 11:29 siat/fama_french_test.py
 -rw-rw-rw-  2.0 fat    40695 b- defN 23-Apr-10 11:29 siat/financial_base.py
 -rw-rw-rw-  2.0 fat    21528 b- defN 23-Apr-10 11:29 siat/financial_statements.py
 -rw-rw-rw-  2.0 fat      716 b- defN 23-Apr-10 11:29 siat/financial_statements_test.py
 -rw-rw-rw-  2.0 fat    76676 b- defN 23-Apr-10 11:29 siat/financials.py
--rw-rw-rw-  2.0 fat   124837 b- defN 23-Apr-18 13:43 siat/financials_china.py
+-rw-rw-rw-  2.0 fat   125365 b- defN 23-Apr-19 10:25 siat/financials_china.py
 -rw-rw-rw-  2.0 fat    57998 b- defN 23-Apr-10 11:29 siat/financials_china2.py
 -rw-rw-rw-  2.0 fat     2722 b- defN 23-Apr-10 11:29 siat/financials_china2_test.py
 -rw-rw-rw-  2.0 fat     3507 b- defN 23-Apr-10 11:29 siat/financials_china2_test2.py
 -rw-rw-rw-  2.0 fat     3118 b- defN 23-Apr-10 11:29 siat/financials_china2_test3.py
 -rw-rw-rw-  2.0 fat    17549 b- defN 23-Apr-10 11:29 siat/financials_china_test.py
+-rw-rw-rw-  2.0 fat     5924 b- defN 23-Apr-19 09:54 siat/financials_china_test2.py
+-rw-rw-rw-  2.0 fat     5924 b- defN 23-Apr-19 09:55 siat/financials_china_test2_fin_indicator.py
 -rw-rw-rw-  2.0 fat    23829 b- defN 23-Apr-10 11:29 siat/financials_test.py
 -rw-rw-rw-  2.0 fat     1201 b- defN 23-Apr-10 11:29 siat/fred_test.py
 -rw-rw-rw-  2.0 fat    24637 b- defN 23-Apr-10 11:29 siat/fund.py
 -rw-rw-rw-  2.0 fat    66934 b- defN 23-Apr-10 11:29 siat/fund_china.py
 -rw-rw-rw-  2.0 fat     6649 b- defN 23-Apr-10 11:29 siat/fund_china_test.py
 -rw-rw-rw-  2.0 fat     1116 b- defN 23-Apr-10 11:29 siat/fund_test.py
 -rw-rw-rw-  2.0 fat    16442 b- defN 23-Apr-10 11:29 siat/future_china.py
@@ -101,17 +103,17 @@
 -rw-rw-rw-  2.0 fat    16648 b- defN 23-Apr-18 09:06 siat/test2_graphviz.py
 -rw-rw-rw-  2.0 fat    16999 b- defN 23-Apr-14 14:38 siat/test_graphviz.py
 -rw-rw-rw-  2.0 fat    14492 b- defN 23-Apr-10 11:29 siat/transaction.py
 -rw-rw-rw-  2.0 fat    18580 b- defN 23-Apr-10 11:29 siat/transaction_test.py
 -rw-rw-rw-  2.0 fat   117953 b- defN 23-Apr-10 11:29 siat/translate-20230125.py
 -rw-rw-rw-  2.0 fat   118133 b- defN 23-Apr-10 11:29 siat/translate-20230206.py
 -rw-rw-rw-  2.0 fat   121657 b- defN 23-Apr-10 11:29 siat/translate-20230215.py
--rw-rw-rw-  2.0 fat   124748 b- defN 23-Apr-10 11:29 siat/translate.py
+-rw-rw-rw-  2.0 fat   124748 b- defN 23-Apr-19 09:58 siat/translate.py
 -rw-rw-rw-  2.0 fat     3936 b- defN 23-Apr-10 11:29 siat/universal_test.py
 -rw-rw-rw-  2.0 fat    51268 b- defN 23-Apr-10 11:29 siat/valuation_china.py
 -rw-rw-rw-  2.0 fat     1571 b- defN 23-Apr-10 11:29 siat/valuation_market_china_test.py
 -rw-rw-rw-  2.0 fat    14859 b- defN 23-Apr-10 11:29 siat/var_model_validation.py
--rw-rw-rw-  2.0 fat     1397 b- defN 23-Apr-18 13:47 siat-1.9.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 23-Apr-18 13:47 siat-1.9.dist-info/WHEEL
--rw-rw-rw-  2.0 fat        5 b- defN 23-Apr-18 13:47 siat-1.9.dist-info/top_level.txt
-?rw-rw-r--  2.0 fat     9157 b- defN 23-Apr-18 13:47 siat-1.9.dist-info/RECORD
-115 files, 4395104 bytes uncompressed, 1103448 bytes compressed:  74.9%
+-rw-rw-rw-  2.0 fat     1399 b- defN 23-Apr-19 10:32 siat-1.9.1.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 23-Apr-19 10:32 siat-1.9.1.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat        5 b- defN 23-Apr-19 10:32 siat-1.9.1.dist-info/top_level.txt
+?rw-rw-r--  2.0 fat     9353 b- defN 23-Apr-19 10:33 siat-1.9.1.dist-info/RECORD
+117 files, 4407678 bytes uncompressed, 1106613 bytes compressed:  74.9%
```

## zipnote {}

```diff
@@ -120,14 +120,20 @@
 
 Filename: siat/financials_china2_test3.py
 Comment: 
 
 Filename: siat/financials_china_test.py
 Comment: 
 
+Filename: siat/financials_china_test2.py
+Comment: 
+
+Filename: siat/financials_china_test2_fin_indicator.py
+Comment: 
+
 Filename: siat/financials_test.py
 Comment: 
 
 Filename: siat/fred_test.py
 Comment: 
 
 Filename: siat/fund.py
@@ -327,20 +333,20 @@
 
 Filename: siat/valuation_market_china_test.py
 Comment: 
 
 Filename: siat/var_model_validation.py
 Comment: 
 
-Filename: siat-1.9.dist-info/METADATA
+Filename: siat-1.9.1.dist-info/METADATA
 Comment: 
 
-Filename: siat-1.9.dist-info/WHEEL
+Filename: siat-1.9.1.dist-info/WHEEL
 Comment: 
 
-Filename: siat-1.9.dist-info/top_level.txt
+Filename: siat-1.9.1.dist-info/top_level.txt
 Comment: 
 
-Filename: siat-1.9.dist-info/RECORD
+Filename: siat-1.9.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## siat/financials_china.py

```diff
@@ -45,15 +45,16 @@
 import pandas as pd
 import akshare as ak
 
 STOCK_SUFFIX_CHINA=['SS','SZ','BJ','NQ']
 #==============================================================================
 #==============================================================================
 if __name__=='__main__':
-    ticker="600606.SS" 
+    ticker="000002.SZ"
+    akfs=get_fin_stmt_ak(ticker)
     
 def get_fin_stmt_ak(ticker):
     """
     从akshare获取财务报表数据，合成df，限于中国A股
     获取的项目：所有原始项目
     注意：抓取所有的报表，不过滤日期
     """
@@ -120,16 +121,21 @@
         return None
     #按照日期升序排序
     fs2.sort_index(inplace=True)
 
     #数据清洗：删除因两次合并可能产生的重复列
     dup_col_list=[]
     for c in fs2.columns:
-        if ('_x' in c) or ('_y' in c): 
+        if '_y' in c:
             dup_col_list=dup_col_list+[c]
+            
+            c2=c[:-2]
+            c2y=c2+'_x'
+            fs2.rename(columns={c2y:c2},inplace=True)
+            
     fs2.drop(labels= dup_col_list, axis=1, inplace=True)
     
     #数据清洗：将空值替换为0
     fs3=fs2.fillna('0')
     
     #数据清洗：转换数值类型
     for i in fs3.columns:
@@ -486,16 +492,19 @@
     for t in tickerlist:
         try:
             dpidf=calc_dupont_china(t,start,end)
             #dpidf=calc_dupont_china_indicator(t,start,end)
         except:
             print("  #Warning(compare_dupont_china): failed to get financial info for",t)
             continue
+        if dpidf is None:
+            print("  #Warning(compare_dupont_china): financial statements not found for",t,'@',fsdate)
+            continue
         if len(dpidf)==0:
-            print("  #Warning(compare_dupont_china): lack of some accounting items for",t,'@',fsdate)
+            print("  #Warning(compare_dupont_china): financial statements not available for",t,'@',fsdate)
             continue
         dpi=dpidf.tail(1)
         
         newtickerlist=newtickerlist+[t]
         dpidflist=dpidflist+[dpidf]
         dpilist=dpilist+[dpi]
         fsdatelist=fsdatelist+[dpi['endDate'][0]]
@@ -2549,17 +2558,17 @@
             "\n数据来源: sina/EM, "+str(today)
         plot_barh(df,colname,titletxt,footnote,axisamp=axisamp2)         
     return df
 #==============================================================================
 if __name__=='__main__':
     ticker="600519.SS" 
     ticker="601398.SS"
-    ticker='601628.SS'
+    ticker='000002.SZ'
     
-    fsdate='2021-12-31'
+    fsdate='2022-12-31'
     
     g=dupont_decompose_china(ticker,fsdate)
 
 def dupont_decompose_china(ticker,fsdate,gview=False):
     """
     功能：杜邦分析分解图
     ticker: 股票代码
@@ -2726,17 +2735,17 @@
     #财务报告摘要
     try:
         fsabs = ak.stock_financial_abstract(prefix)
     except:
         print("  #Warning(dupont_decompose_china): financial summary not found for",ticker)
         return None
     """
-    financialExpenses='利息\\n费用'
+    financialExpenses='财务\\n费用'
     try:
-        financialExpensesValue=round((fs1['应付利息'].values[0])/ yi,1)
+        financialExpensesValue=round((fs1['财务费用'].values[0])/ yi,1)
     except:
         financialExpensesValue=round(fs1['应付利息'].values[0] / yi,1)
     
     taxExpenses='税金'
     try:
         taxExpensesValue=round((fs1['营业税金及附加'].values[0] + fs1['减：所得税费用'].values[0]) / yi,1)
     except:
@@ -2953,43 +2962,47 @@
         company_name=z[0]
         layer=z[1]
         u.append(z[1])
     number_of_layers=max(u) #计算出层数
     
     from graphviz import Digraph
     #按各公司的层数生产分层的节点：
-    g=Digraph(name=codetranslate(ticker))
+    g=Digraph(name=codetranslate(ticker)+fsdate)
     
     for key in dic:
         for n in range(number_of_layers+1):
             if dic[key]==n:
                 with g.subgraph() as layer_n:
                     layer_n.attr(rank='same')
-                    layer_n.node(name=key,color='blue',shape='box',fontname='Microsoft YaHei',fontsize='10')
+                    layer_n.node(name=key,color='blue',shape='box', \
+                                 fontname='Microsoft YaHei',fontsize='11', \
+                                     nodesranksep='0.5',nodesnodesep='0.5')
     
     #生产各节点间的连线：
     for i2 in range(len(L)):
-        g.edge(father_name_list[i2],child_name_list[i2],label=equity_portion_list[i2],color='red',fontname='Microsoft Yahei')
+        g.edge(father_name_list[i2],child_name_list[i2],label=equity_portion_list[i2], \
+               color='red',fontname='Microsoft Yahei',edgeweight='1.0',fontsize='11')
     
     if gview:
         # 分离式显示，便于多图对比
         g.view()  
     else:
         # 嵌入式显示
         display(g)
     
     #打印信息
-    print("\n注:",codetranslate(ticker),"\b，金额单位：亿元，财报日期:",fsdate)
-    print("1、为避免图示过大，这里未列出所有分解项目")
-    print("2、金融机构报表与普通企业结构不同，此处仅为约算")
-    print("3、应收款项包括应收账款、应收利息、应收保费以及应收票据等")
-    print("4、递延资产为递延所得税资产或借项")
-    print("5、税金包括营业税金及附加以及所得税费用")
-    print("6、此处金融资产主要为交易性金融资产、衍生金融资产和买入返售金融资产")
-    print("7、此处长期投资包括贷款及垫款、可供出售金融资产、持有至到期投资、长期股权投资、投资性房地产等")
+    if not gview:
+        print("\n注:",codetranslate(ticker),"\b，金额单位：亿元，财报日期:",fsdate)
+        print("1、为避免图示过大，这里未列出所有分解项目")
+        print("2、金融机构报表与普通企业结构不同，此处仅为约算")
+        print("3、应收款项包括应收账款、应收利息、应收保费以及应收票据等")
+        print("4、递延资产为递延所得税资产或借项")
+        print("5、税金包括营业税金及附加以及所得税费用")
+        print("6、此处金融资产主要为交易性金融资产、衍生金融资产和买入返售金融资产")
+        print("7、此处长期投资包括贷款及垫款、可供出售金融资产、持有至到期投资、长期股权投资、投资性房地产等")
 
     return g
 
 if __name__=='__main__':
     ticker="600519.SS" 
     fsdate='2022-12-31'
```

## siat/translate.py

```diff
@@ -1098,15 +1098,15 @@
         #======================================================================
         # 白酒行业
         ['603589.SS','口子窖'],['000568.SZ','泸州老窖'],['000858.SZ','五粮液'],
         ['600519.SS','贵州茅台'],['000596.SZ','古井贡酒'],['000799.SZ','酒鬼酒'],
         ['600809.SS','山西汾酒'],['600779.SS','水井坊'],
 
         # 房地产行业
-        ['000002.SZ','万科A'],['600048.SS','保利地产'],['600340.SS','华夏幸福'],
+        ['000002.SZ','万科A'],['600048.SS','保利发展'],['600340.SS','华夏幸福'],
         ['000031.SZ','大悦城'],['600383.SS','金地集团'],['600266.SS','城建发展'],
         ['600246.SS','万通发展'],['600606.SS','绿地控股'],['600743.SS','华远地产'],
         ['000402.SZ','金融街'],['000608.SZ','阳光股份'],['600376.SS','首开股份'],
         ['000036.SZ','华联控股'],['000620.SZ','新华联'],['600663.SS','陆家嘴'],
 
         # 银行业
         ['601328.SS','交通银行'],['601988.SS','中国银行'],['600015.SS','华夏银行'],
@@ -1533,15 +1533,15 @@
         #======================================================================
         # 白酒行业
         ['603589.SS','口子窖'],['000568.SZ','泸州老窖'],['000858.SZ','五粮液'],
         ['600519.SS','贵州茅台'],['000596.SZ','古井贡酒'],['000799.SZ','酒鬼酒'],
         ['600809.SS','山西汾酒'],['600779.SS','水井坊'],
 
         # 房地产行业
-        ['000002.SZ','万科A'],['600048.SS','保利地产'],['600340.SS','华夏幸福'],
+        ['000002.SZ','万科A'],['600048.SS','保利发展'],['600340.SS','华夏幸福'],
         ['000031.SZ','大悦城'],['600383.SS','金地集团'],['600266.SS','城建发展'],
         ['600246.SS','万通发展'],['600606.SS','绿地控股'],['600743.SS','华远地产'],
         ['000402.SZ','金融街'],['000608.SZ','阳光股份'],['600376.SS','首开股份'],
         ['000036.SZ','华联控股'],['000620.SZ','新华联'],['600663.SS','陆家嘴'],
 
         # 银行业
         ['601328.SS','交通银行'],['601988.SS','中国银行'],['600015.SS','华夏银行'],
```

## Comparing `siat-1.9.dist-info/METADATA` & `siat-1.9.1.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: siat
-Version: 1.9
+Version: 1.9.1
 Summary: Securities Investment Analysis Tools (siat)
 Home-page: https://pypi.org/project/siat/
 Author: Prof. WANG Dehong, Business School, BFSU (北京外国语大学 国际商学院 王德宏 教授)
 Author-email: wdehong2000@163.com
 License: Copyright (C) WANG Dehong, 2023. For educational purpose only!
 Platform: UNKNOWN
 Requires-Dist: pandas-datareader
```

## Comparing `siat-1.9.dist-info/RECORD` & `siat-1.9.1.dist-info/RECORD`

 * *Files 2% similar despite different names*

```diff
@@ -30,20 +30,22 @@
 siat/esg_test.py,sha256=Z9m6GUt8O7oHZSEG9aDYpGdvvrv2AiRJdHTiU6jqmZ0,2944
 siat/fama_french.py,sha256=qDpsZOj0BLuzXXdNwJ1IPhDyNVAnTJFHqn80Hkp85ZI,47177
 siat/fama_french_test.py,sha256=M4O23lBKsJxhWHRluwCb3l7HSEn3OFTjzGMpehcevRg,4678
 siat/financial_base.py,sha256=YxNVfhbgLQ4stLojI9nklB4sdQNuROcILcO3M2uz4Gs,40695
 siat/financial_statements.py,sha256=KDUl9b92EV5IseLLnEmG3czDHAaay2SWM2MpzZXPHpk,21528
 siat/financial_statements_test.py,sha256=FLhx8JD-tVVWSBGux6AMz1jioXX4U4bp9DmgFHYXb_w,716
 siat/financials.py,sha256=4b0fJAu1Mm5aX_zCIvF01CzzBokrprQpIk1N3za1FNA,76676
-siat/financials_china.py,sha256=FAklXVPqa8qwDWi5tlC2rRRm5v5i464y99sZJH8shso,124837
+siat/financials_china.py,sha256=bnr3x09X0xaRyB1ewe63maQ-0_CLPjKrFWC0WZGXCdU,125365
 siat/financials_china2.py,sha256=32--MBk7PBOSg7DUyxfjN63ZPEkmAsrYfuTHAenOphA,57998
 siat/financials_china2_test.py,sha256=Erz5k4LyOplBBvYls2MypuqHpVNJ3daiLdyeJezNPu0,2722
 siat/financials_china2_test2.py,sha256=C8CuYTMHN4Mhp-sTu-Bmg0zMXRCaYV6ezGDoYartRYQ,3507
 siat/financials_china2_test3.py,sha256=UXYSA80DNSPRhHpovc2MA9JkpILWMAQaRatbWCHBNPs,3118
 siat/financials_china_test.py,sha256=QS1SD_mXx4uH1Lg3gl2PmwLrvkLqkRs3e4x7SyFI_Xk,17549
+siat/financials_china_test2.py,sha256=WkNlVW_0hGegdw1rzg4BP_dKR-smdyUp9Fr00K7mPZY,5924
+siat/financials_china_test2_fin_indicator.py,sha256=WkNlVW_0hGegdw1rzg4BP_dKR-smdyUp9Fr00K7mPZY,5924
 siat/financials_test.py,sha256=HJ3CPo_Xckz2wXi3AEP6ZNWCF1Duc1pLi0Y10USiImc,23829
 siat/fred_test.py,sha256=KF50ssSbsfpa_kT6iuomD0vG4eXztAcOasZxg1OGX5w,1201
 siat/fund.py,sha256=wMDORsCBV8ZXfgwbtq-0bu3qqWY66dHnbqgllW0gWCo,24637
 siat/fund_china.py,sha256=KBVTvzgkjzD_AhxrZntx0p5muPQTL5oXT10_ed6fXnU,66934
 siat/fund_china_test.py,sha256=-Bh6m0J0GPpIbYXx-H2vpzJoNFI6pE2C2jVPa8DazgE,6649
 siat/fund_test.py,sha256=V4ADb8Gsp8gyeFTwcgRsJBpnUih_O-Q2V1ILc5oKjK8,1116
 siat/future_china.py,sha256=s9LgTuy4nFIXgqtZKc71HaZIyFnSmyvxEloGHxlmLZ4,16442
@@ -100,16 +102,16 @@
 siat/test2_graphviz.py,sha256=05w2YJuIBH0LsJjdA60EFn7rL0vCo-CA6EVJEQOXNE4,16648
 siat/test_graphviz.py,sha256=CETKpDL8PnysS-PD3fHkeAgagUxjaUl0CsXPiadQySg,16999
 siat/transaction.py,sha256=foTWS1qYXQFuzNTG2m7ec6aDgsJjzpKmyAbyxKcE8KU,14492
 siat/transaction_test.py,sha256=Z8g1LJCN4-mnUByXMUMoFmN0t105cbmsz2QmvSuIkbU,18580
 siat/translate-20230125.py,sha256=NPPSXhT38s5t9fzMvl_fvi4ckSB73ThLmZetVI-xGdU,117953
 siat/translate-20230206.py,sha256=-vtI125WyaJhmPotOpDAmclt_XnYVaWU9ByLWZ6FyYE,118133
 siat/translate-20230215.py,sha256=TJgtPE3n8IjljmZ4Pefy8dmHoNdFF-1zpML6BhA9FKE,121657
-siat/translate.py,sha256=-7-R7pLutkOVur5O0ihj3-_XyoWRF2VAJRorIsiZJVQ,124748
+siat/translate.py,sha256=Ed3H3G1BiMaWL1iKGiiE4YP92tgj23xhlIdsU42Uqlk,124748
 siat/universal_test.py,sha256=CDAOffW1Rvs-TcNN5giWVvHMlch1w4dp-w5SIV9jXL0,3936
 siat/valuation_china.py,sha256=J78FTnwyzOjNENq30MXaQdby6EtcBZi3AMeUKhGtuok,51268
 siat/valuation_market_china_test.py,sha256=gbJ0ioauuo4koTPH6WKUkqcXiQPafnbhU5eKJ6lpdLA,1571
 siat/var_model_validation.py,sha256=zB_Skk_tmzIR15l6oAW3am4HBGVIG-eZ8gJhCdXZ8Qw,14859
-siat-1.9.dist-info/METADATA,sha256=MEn6dabgaFdZmN6cliD1MzzAsj_9ciIMtHP_4AN2Xck,1397
-siat-1.9.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
-siat-1.9.dist-info/top_level.txt,sha256=r1cVyL7AIKqeAmEJjNR8FMT20OmEzufDstC2gv3NvEY,5
-siat-1.9.dist-info/RECORD,,
+siat-1.9.1.dist-info/METADATA,sha256=CD8o_91qonL7hUBaDfpVMvqqAQ9rP5de8yz8MwnNI80,1399
+siat-1.9.1.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
+siat-1.9.1.dist-info/top_level.txt,sha256=r1cVyL7AIKqeAmEJjNR8FMT20OmEzufDstC2gv3NvEY,5
+siat-1.9.1.dist-info/RECORD,,
```

